(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{9698:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{YT:()=>de,uA:()=>Fe,I:()=>tt,YG:()=>g});var de=function(me){return me.Loaded="applePayLoaded",me.FailedToLoad="applePayFailedToLoad",me.Completed="applePayCompleted",me.Canceled="applePayCanceled",me.Failed="applePayFailed",me.DidSelectShippingContact="applePayDidSelectShippingContact",me.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",me}(de||{}),Fe=function(me){return me.Loaded="googlePayLoaded",me.FailedToLoad="googlePayFailedToLoad",me.Completed="googlePayCompleted",me.Canceled="googlePayCanceled",me.Failed="googlePayFailed",me}(Fe||{}),tt=function(me){return me.Loaded="paymentFlowLoaded",me.FailedToLoad="paymentFlowFailedToLoad",me.Opened="paymentFlowOpened",me.Created="paymentFlowCreated",me.Completed="paymentFlowCompleted",me.Canceled="paymentFlowCanceled",me.Failed="paymentFlowFailed",me}(tt||{}),g=function(me){return me.Loaded="paymentSheetLoaded",me.FailedToLoad="paymentSheetFailedToLoad",me.Completed="paymentSheetCompleted",me.Canceled="paymentSheetCanceled",me.Failed="paymentSheetFailed",me}(g||{})},5961:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{GW:()=>Fe,dk:()=>tt,oK:()=>de});var de=function(g){return g.Prompt="PROMPT",g.Camera="CAMERA",g.Photos="PHOTOS",g}(de||{}),Fe=function(g){return g.Rear="REAR",g.Front="FRONT",g}(Fe||{}),tt=function(g){return g.Uri="uri",g.Base64="base64",g.DataUrl="dataUrl",g}(tt||{})},2726:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{Uw:()=>te,fo:()=>Bt,ur:()=>We,xz:()=>ht});var de=Ie(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var We=function(je){return je.Unimplemented="UNIMPLEMENTED",je.Unavailable="UNAVAILABLE",je}(We||{});class ht extends Error{constructor(Te,K,qe){super(Te),this.message=Te,this.code=K,this.data=qe}}const Xe=je=>{var Te,K,qe,Me,Je;const Ue=je.CapacitorCustomPlatform||null,le=je.Capacitor||{},Qe=le.Plugins=le.Plugins||{},lt=je.CapacitorPlatforms,Xt=(null===(Te=lt?.currentPlatform)||void 0===Te?void 0:Te.getPlatform)||(()=>null!==Ue?Ue.name:(je=>{var Te,K;return je?.androidBridge?"android":null!==(K=null===(Te=je?.webkit)||void 0===Te?void 0:Te.messageHandlers)&&void 0!==K&&K.bridge?"ios":"web"})(je)),Pn=(null===(K=lt?.currentPlatform)||void 0===K?void 0:K.isNativePlatform)||(()=>"web"!==Xt()),jt=(null===(qe=lt?.currentPlatform)||void 0===qe?void 0:qe.isPluginAvailable)||(Pt=>{const Pe=Ft.get(Pt);return!(!Pe?.platforms.has(Xt())&&!Tn(Pt))}),Tn=(null===(Me=lt?.currentPlatform)||void 0===Me?void 0:Me.getPluginHeader)||(Pt=>{var Pe;return null===(Pe=le.PluginHeaders)||void 0===Pe?void 0:Pe.find(Ae=>Ae.name===Pt)}),Ft=new Map,jn=(null===(Je=lt?.currentPlatform)||void 0===Je?void 0:Je.registerPlugin)||((Pt,Pe={})=>{const Ae=Ft.get(Pt);if(Ae)return console.warn(`Capacitor plugin "${Pt}" already registered. Cannot register plugins twice.`),Ae.proxy;const Se=Xt(),ut=Tn(Pt);let kt;const cn=function(){var Cr=(0,de.Z)(function*(){return!kt&&Se in Pe?kt=kt="function"==typeof Pe[Se]?yield Pe[Se]():Pe[Se]:null!==Ue&&!kt&&"web"in Pe&&(kt=kt="function"==typeof Pe.web?yield Pe.web():Pe.web),kt});return function(){return Cr.apply(this,arguments)}}(),Fn=Cr=>{let Ei;const Hr=(..._i)=>{const Ni=cn().then(zi=>{const yo=((Cr,Ei)=>{var Hr,_i;if(!ut){if(Cr)return null===(_i=Cr[Ei])||void 0===_i?void 0:_i.bind(Cr);throw new ht(`"${Pt}" plugin is not implemented on ${Se}`,We.Unimplemented)}{const Ni=ut?.methods.find(zi=>Ei===zi.name);if(Ni)return"promise"===Ni.rtype?zi=>le.nativePromise(Pt,Ei.toString(),zi):(zi,yo)=>le.nativeCallback(Pt,Ei.toString(),zi,yo);if(Cr)return null===(Hr=Cr[Ei])||void 0===Hr?void 0:Hr.bind(Cr)}})(zi,Cr);if(yo){const _t=yo(..._i);return Ei=_t?.remove,_t}throw new ht(`"${Pt}.${Cr}()" is not implemented on ${Se}`,We.Unimplemented)});return"addListener"===Cr&&(Ni.remove=(0,de.Z)(function*(){return Ei()})),Ni};return Hr.toString=()=>`${Cr.toString()}() { [capacitor code] }`,Object.defineProperty(Hr,"name",{value:Cr,writable:!1,configurable:!1}),Hr},vn=Fn("addListener"),Yr=Fn("removeListener"),si=(Cr,Ei)=>{const Hr=vn({eventName:Cr},Ei),_i=function(){var zi=(0,de.Z)(function*(){const yo=yield Hr;Yr({eventName:Cr,callbackId:yo},Ei)});return function(){return zi.apply(this,arguments)}}(),Ni=new Promise(zi=>Hr.then(()=>zi({remove:_i})));return Ni.remove=(0,de.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield _i()}),Ni},sr=new Proxy({},{get(Cr,Ei){switch(Ei){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return ut?si:vn;case"removeListener":return Yr;default:return Fn(Ei)}}});return Qe[Pt]=sr,Ft.set(Pt,{name:Pt,proxy:sr,platforms:new Set([...Object.keys(Pe),...ut?[Se]:[]])}),sr});return le.convertFileSrc||(le.convertFileSrc=Pt=>Pt),le.getPlatform=Xt,le.handleError=Pt=>je.console.error(Pt),le.isNativePlatform=Pn,le.isPluginAvailable=jt,le.pluginMethodNoop=(Pt,Pe,Ae)=>Promise.reject(`${Ae} does not have an implementation of "${Pe}".`),le.registerPlugin=jn,le.Exception=ht,le.DEBUG=!!le.DEBUG,le.isLoggingEnabled=!!le.isLoggingEnabled,le.platform=le.getPlatform(),le.isNative=le.isNativePlatform(),le},He=(je=>je.Capacitor=Xe(je))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Bt=He.registerPlugin;class te{constructor(Te){this.listeners={},this.windowListeners={},Te&&(console.warn(`Capacitor WebPlugin "${Te.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=Te)}addListener(Te,K){var qe=this;this.listeners[Te]||(this.listeners[Te]=[]),this.listeners[Te].push(K);const Je=this.windowListeners[Te];Je&&!Je.registered&&this.addWindowListener(Je);const Ue=function(){var Qe=(0,de.Z)(function*(){return qe.removeListener(Te,K)});return function(){return Qe.apply(this,arguments)}}(),le=Promise.resolve({remove:Ue});return Object.defineProperty(le,"remove",{value:(Qe=(0,de.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Ue()}),function(){return Qe.apply(this,arguments)})}),le;var Qe}removeAllListeners(){var Te=this;return(0,de.Z)(function*(){Te.listeners={};for(const K in Te.windowListeners)Te.removeWindowListener(Te.windowListeners[K]);Te.windowListeners={}})()}notifyListeners(Te,K){const qe=this.listeners[Te];qe&&qe.forEach(Me=>Me(K))}hasListeners(Te){return!!this.listeners[Te].length}registerWindowListener(Te,K){this.windowListeners[K]={registered:!1,windowEventName:Te,pluginEventName:K,handler:qe=>{this.notifyListeners(K,qe)}}}unimplemented(Te="not implemented"){return new He.Exception(Te,We.Unimplemented)}unavailable(Te="not available"){return new He.Exception(Te,We.Unavailable)}removeListener(Te,K){var qe=this;return(0,de.Z)(function*(){const Me=qe.listeners[Te];if(!Me)return;const Je=Me.indexOf(K);qe.listeners[Te].splice(Je,1),qe.listeners[Te].length||qe.removeWindowListener(qe.windowListeners[Te])})()}addWindowListener(Te){window.addEventListener(Te.windowEventName,Te.handler),Te.registered=!0}removeWindowListener(Te){Te&&(window.removeEventListener(Te.windowEventName,Te.handler),Te.registered=!1)}}const ne=je=>encodeURIComponent(je).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Re=je=>je.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ie extends te{getCookies(){return(0,de.Z)(function*(){const Te=document.cookie,K={};return Te.split(";").forEach(qe=>{if(qe.length<=0)return;let[Me,Je]=qe.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");Me=Re(Me).trim(),Je=Re(Je).trim(),K[Me]=Je}),K})()}setCookie(Te){return(0,de.Z)(function*(){try{const K=ne(Te.key),qe=ne(Te.value),Me=`; expires=${(Te.expires||"").replace("expires=","")}`,Je=(Te.path||"/").replace("path=",""),Ue=null!=Te.url&&Te.url.length>0?`domain=${Te.url}`:"";document.cookie=`${K}=${qe||""}${Me}; path=${Je}; ${Ue};`}catch(K){return Promise.reject(K)}})()}deleteCookie(Te){return(0,de.Z)(function*(){try{document.cookie=`${Te.key}=; Max-Age=0`}catch(K){return Promise.reject(K)}})()}clearCookies(){return(0,de.Z)(function*(){try{const Te=document.cookie.split(";")||[];for(const K of Te)document.cookie=K.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(Te){return Promise.reject(Te)}})()}clearAllCookies(){var Te=this;return(0,de.Z)(function*(){try{yield Te.clearCookies()}catch(K){return Promise.reject(K)}})()}}Bt("CapacitorCookies",{web:()=>new ie});const xe=function(){var je=(0,de.Z)(function*(Te){return new Promise((K,qe)=>{const Me=new FileReader;Me.onload=()=>{const Je=Me.result;K(Je.indexOf(",")>=0?Je.split(",")[1]:Je)},Me.onerror=Je=>qe(Je),Me.readAsDataURL(Te)})});return function(K){return je.apply(this,arguments)}}();class we extends te{request(Te){return(0,de.Z)(function*(){const K=((je,Te={})=>{const K=Object.assign({method:je.method||"GET",headers:je.headers},Te),Me=((je={})=>{const Te=Object.keys(je);return Object.keys(je).map(Me=>Me.toLocaleLowerCase()).reduce((Me,Je,Ue)=>(Me[Je]=je[Te[Ue]],Me),{})})(je.headers)["content-type"]||"";if("string"==typeof je.data)K.body=je.data;else if(Me.includes("application/x-www-form-urlencoded")){const Je=new URLSearchParams;for(const[Ue,le]of Object.entries(je.data||{}))Je.set(Ue,le);K.body=Je.toString()}else if(Me.includes("multipart/form-data")){const Je=new FormData;if(je.data instanceof FormData)je.data.forEach((le,Qe)=>{Je.append(Qe,le)});else for(const le of Object.keys(je.data))Je.append(le,je.data[le]);K.body=Je;const Ue=new Headers(K.headers);Ue.delete("content-type"),K.headers=Ue}else(Me.includes("application/json")||"object"==typeof je.data)&&(K.body=JSON.stringify(je.data));return K})(Te,Te.webFetchExtra),qe=((je,Te=!0)=>je?Object.entries(je).reduce((qe,Me)=>{const[Je,Ue]=Me;let le,Qe;return Array.isArray(Ue)?(Qe="",Ue.forEach(lt=>{le=Te?encodeURIComponent(lt):lt,Qe+=`${Je}=${le}&`}),Qe.slice(0,-1)):(le=Te?encodeURIComponent(Ue):Ue,Qe=`${Je}=${le}`),`${qe}&${Qe}`},"").substr(1):null)(Te.params,Te.shouldEncodeUrlParams),Me=qe?`${Te.url}?${qe}`:Te.url,Je=yield fetch(Me,K),Ue=Je.headers.get("content-type")||"";let Qe,lt,{responseType:le="text"}=Je.ok?Te:{};switch(Ue.includes("application/json")&&(le="json"),le){case"arraybuffer":case"blob":lt=yield Je.blob(),Qe=yield xe(lt);break;case"json":Qe=yield Je.json();break;default:Qe=yield Je.text()}const dn={};return Je.headers.forEach((Xt,_n)=>{dn[_n]=Xt}),{data:Qe,headers:dn,status:Je.status,url:Je.url}})()}get(Te){var K=this;return(0,de.Z)(function*(){return K.request(Object.assign(Object.assign({},Te),{method:"GET"}))})()}post(Te){var K=this;return(0,de.Z)(function*(){return K.request(Object.assign(Object.assign({},Te),{method:"POST"}))})()}put(Te){var K=this;return(0,de.Z)(function*(){return K.request(Object.assign(Object.assign({},Te),{method:"PUT"}))})()}patch(Te){var K=this;return(0,de.Z)(function*(){return K.request(Object.assign(Object.assign({},Te),{method:"PATCH"}))})()}delete(Te){var K=this;return(0,de.Z)(function*(){return K.request(Object.assign(Object.assign({},Te),{method:"DELETE"}))})()}}Bt("CapacitorHttp",{web:()=>new we})},3630:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{c:()=>tt,r:()=>Xe});const tt=(pe,ae)=>{pe.componentOnReady?pe.componentOnReady().then(we=>ae(we)):Xe(()=>ae(pe))},Xe=pe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(pe):"function"==typeof requestAnimationFrame?requestAnimationFrame(pe):setTimeout(pe)},191:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{L:()=>de,a:()=>Fe,b:()=>tt,c:()=>g,d:()=>me,g:()=>pe});const de="ionViewWillEnter",Fe="ionViewDidEnter",tt="ionViewWillLeave",g="ionViewDidLeave",me="ionViewWillUnload",pe=ae=>ae.classList.contains("ion-page")?ae:ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ae},5062:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{c:()=>Ce});var de=Ie(6225),Fe=Ie(839);let tt;const me=te=>te.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Be=te=>(void 0===tt&&(tt=void 0===te.style.animationName&&void 0!==te.style.webkitAnimationName?"-webkit-":""),tt),Ne=(te,Q,ne)=>{const Re=Q.startsWith("animation")?Be(te):"";te.style.setProperty(Re+Q,ne)},We=(te,Q)=>{const ne=Q.startsWith("animation")?Be(te):"";te.style.removeProperty(ne+Q)},Xe=[],ce=(te=[],Q)=>{if(void 0!==Q){const ne=Array.isArray(Q)?Q:[Q];return[...te,...ne]}return te},Ce=te=>{let Q,ne,Re,ie,J,xe,oe,le,Qe,lt,dn,Qn,jt,ee=[],pe=[],ae=[],we=!1,je={},Te=[],K=[],qe={},Me=0,Je=!1,Ue=!1,Xt=!0,_n=!1,Pn=!0,mr=!1;const Tn=te,Vn=[],un=[],Ft=[],Cn=[],jn=[],Pt=[],Pe=[],Ae=[],Se=[],ut=[],kt=[],cn="function"==typeof AnimationEffect||void 0!==de.w&&"function"==typeof de.w.AnimationEffect,Nn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&cn,vn=()=>kt,Ei=(Le,dt)=>{const Rt=dt.findIndex(sn=>sn.c===Le);Rt>-1&&dt.splice(Rt,1)},_i=(Le,dt)=>((dt?.oneTimeCallback?un:Vn).push({c:Le,o:dt}),jt),zi=()=>{if(Nn)kt.forEach(Le=>{Le.cancel()}),kt.length=0;else{const Le=Cn.slice();(0,Fe.r)(()=>{Le.forEach(dt=>{We(dt,"animation-name"),We(dt,"animation-duration"),We(dt,"animation-timing-function"),We(dt,"animation-iteration-count"),We(dt,"animation-delay"),We(dt,"animation-play-state"),We(dt,"animation-fill-mode"),We(dt,"animation-direction")})})}},yo=()=>{Pt.forEach(Le=>{Le?.parentNode&&Le.parentNode.removeChild(Le)}),Pt.length=0},Xn=()=>void 0!==J?J:oe?oe.getFill():"both",bi=()=>void 0!==Qe?Qe:void 0!==xe?xe:oe?oe.getDirection():"normal",Si=()=>Je?"linear":void 0!==Re?Re:oe?oe.getEasing():"linear",ai=()=>Ue?0:void 0!==lt?lt:void 0!==ne?ne:oe?oe.getDuration():0,Kr=()=>void 0!==ie?ie:oe?oe.getIterations():1,Ii=()=>void 0!==dn?dn:void 0!==Q?Q:oe?oe.getDelay():0,to=()=>{0!==Me&&(Me--,0===Me&&((()=>{Ze(),Se.forEach(yn=>yn()),ut.forEach(yn=>yn());const Le=Xt?1:0,dt=Te,Rt=K,sn=qe;Cn.forEach(yn=>{const Et=yn.classList;dt.forEach(kn=>Et.add(kn)),Rt.forEach(kn=>Et.remove(kn));for(const kn in sn)sn.hasOwnProperty(kn)&&Ne(yn,kn,sn[kn])}),Vn.forEach(yn=>yn.c(Le,jt)),un.forEach(yn=>yn.c(Le,jt)),un.length=0,Pn=!0,Xt&&(_n=!0),Xt=!0})(),oe&&oe.animationFinish()))},Vi=(Le=!0)=>{yo();const dt=(te=>(te.forEach(Q=>{for(const ne in Q)if(Q.hasOwnProperty(ne)){const Re=Q[ne];if("easing"===ne)Q["animation-timing-function"]=Re,delete Q[ne];else{const ie=me(ne);ie!==ne&&(Q[ie]=Re,delete Q[ne])}}}),te))(ee);Cn.forEach(Rt=>{if(dt.length>0){const sn=((te=[])=>te.map(Q=>{const ne=Q.offset,Re=[];for(const ie in Q)Q.hasOwnProperty(ie)&&"offset"!==ie&&Re.push(`${ie}: ${Q[ie]};`);return`${100*ne}% { ${Re.join(" ")} }`}).join(" "))(dt);Qn=void 0!==te?te:(te=>{let Q=Xe.indexOf(te);return Q<0&&(Q=Xe.push(te)-1),`ion-animation-${Q}`})(sn);const yn=((te,Q,ne)=>{var Re;const ie=(te=>{const Q=void 0!==te.getRootNode?te.getRootNode():te;return Q.head||Q})(ne),J=Be(ne),xe=ie.querySelector("#"+te);if(xe)return xe;const ee=(null!==(Re=ne.ownerDocument)&&void 0!==Re?Re:document).createElement("style");return ee.id=te,ee.textContent=`@${J}keyframes ${te} { ${Q} } @${J}keyframes ${te}-alt { ${Q} }`,ie.appendChild(ee),ee})(Qn,sn,Rt);Pt.push(yn),Ne(Rt,"animation-duration",`${ai()}ms`),Ne(Rt,"animation-timing-function",Si()),Ne(Rt,"animation-delay",`${Ii()}ms`),Ne(Rt,"animation-fill-mode",Xn()),Ne(Rt,"animation-direction",bi());const Et=Kr()===1/0?"infinite":Kr().toString();Ne(Rt,"animation-iteration-count",Et),Ne(Rt,"animation-play-state","paused"),Le&&Ne(Rt,"animation-name",`${yn.id}-alt`),(0,Fe.r)(()=>{Ne(Rt,"animation-name",yn.id||null)})}})},so=(Le=!0)=>{(()=>{Pe.forEach(sn=>sn()),Ae.forEach(sn=>sn());const Le=pe,dt=ae,Rt=je;Cn.forEach(sn=>{const yn=sn.classList;Le.forEach(Et=>yn.add(Et)),dt.forEach(Et=>yn.remove(Et));for(const Et in Rt)Rt.hasOwnProperty(Et)&&Ne(sn,Et,Rt[Et])})})(),ee.length>0&&(Nn?(Cn.forEach(Le=>{const dt=Le.animate(ee,{id:Tn,delay:Ii(),duration:ai(),easing:Si(),iterations:Kr(),fill:Xn(),direction:bi()});dt.pause(),kt.push(dt)}),kt.length>0&&(kt[0].onfinish=()=>{to()})):Vi(Le)),we=!0},Ns=Le=>{if(Le=Math.min(Math.max(Le,0),.9999),Nn)kt.forEach(dt=>{dt.currentTime=dt.effect.getComputedTiming().delay+ai()*Le,dt.pause()});else{const dt=`-${ai()*Le}ms`;Cn.forEach(Rt=>{ee.length>0&&(Ne(Rt,"animation-delay",dt),Ne(Rt,"animation-play-state","paused"))})}},Lo=Le=>{kt.forEach(dt=>{dt.effect.updateTiming({delay:Ii(),duration:ai(),easing:Si(),iterations:Kr(),fill:Xn(),direction:bi()})}),void 0!==Le&&Ns(Le)},no=(Le=!0,dt)=>{(0,Fe.r)(()=>{Cn.forEach(Rt=>{Ne(Rt,"animation-name",Qn||null),Ne(Rt,"animation-duration",`${ai()}ms`),Ne(Rt,"animation-timing-function",Si()),Ne(Rt,"animation-delay",void 0!==dt?`-${dt*ai()}ms`:`${Ii()}ms`),Ne(Rt,"animation-fill-mode",Xn()||null),Ne(Rt,"animation-direction",bi()||null);const sn=Kr()===1/0?"infinite":Kr().toString();Ne(Rt,"animation-iteration-count",sn),Le&&Ne(Rt,"animation-name",`${Qn}-alt`),(0,Fe.r)(()=>{Ne(Rt,"animation-name",Qn||null)})})})},li=(Le=!1,dt=!0,Rt)=>(Le&&jn.forEach(sn=>{sn.update(Le,dt,Rt)}),Nn?Lo(Rt):no(dt,Rt),jt),bs=()=>{we&&(Nn?kt.forEach(Le=>{Le.pause()}):Cn.forEach(Le=>{Ne(Le,"animation-play-state","paused")}),mr=!0)},El=()=>{le=void 0,to()},Ze=()=>{le&&clearTimeout(le)},Nt=Le=>new Promise(dt=>{Le?.sync&&(Ue=!0,_i(()=>Ue=!1,{oneTimeCallback:!0})),we||so(),_n&&(Nn?(Ns(0),Lo()):no(),_n=!1),Pn&&(Me=jn.length+1,Pn=!1);const Rt=()=>{Ei(sn,un),dt()},sn=()=>{Ei(Rt,Ft),dt()};_i(sn,{oneTimeCallback:!0}),((Le,dt)=>{Ft.push({c:Le,o:{oneTimeCallback:!0}})})(Rt),jn.forEach(yn=>{yn.play()}),Nn?(kt.forEach(Le=>{Le.play()}),(0===ee.length||0===Cn.length)&&to()):(()=>{if(Ze(),(0,Fe.r)(()=>{Cn.forEach(Le=>{ee.length>0&&Ne(Le,"animation-play-state","running")})}),0===ee.length||0===Cn.length)to();else{const Le=Ii()||0,dt=ai()||0,Rt=Kr()||1;isFinite(Rt)&&(le=setTimeout(El,Le+dt*Rt+100)),((te,Q)=>{let ne;const Re={passive:!0},J=xe=>{te===xe.target&&(ne&&ne(),Ze(),(0,Fe.r)(()=>{Cn.forEach(Le=>{We(Le,"animation-duration"),We(Le,"animation-delay"),We(Le,"animation-play-state")}),(0,Fe.r)(to)}))};te&&(te.addEventListener("webkitAnimationEnd",J,Re),te.addEventListener("animationend",J,Re),ne=()=>{te.removeEventListener("webkitAnimationEnd",J,Re),te.removeEventListener("animationend",J,Re)})})(Cn[0])}})(),mr=!1}),ye=(Le,dt)=>{const Rt=ee[0];return void 0===Rt||void 0!==Rt.offset&&0!==Rt.offset?ee=[{offset:0,[Le]:dt},...ee]:Rt[Le]=dt,jt};return jt={parentAnimation:oe,elements:Cn,childAnimations:jn,id:Tn,animationFinish:to,from:ye,to:(Le,dt)=>{const Rt=ee[ee.length-1];return void 0===Rt||void 0!==Rt.offset&&1!==Rt.offset?ee=[...ee,{offset:1,[Le]:dt}]:Rt[Le]=dt,jt},fromTo:(Le,dt,Rt)=>ye(Le,dt).to(Le,Rt),parent:Le=>(oe=Le,jt),play:Nt,pause:()=>(jn.forEach(Le=>{Le.pause()}),bs(),jt),stop:()=>{jn.forEach(Le=>{Le.stop()}),we&&(zi(),we=!1),Je=!1,Ue=!1,Pn=!0,Qe=void 0,lt=void 0,dn=void 0,Me=0,_n=!1,Xt=!0,mr=!1,Ft.forEach(Le=>Le.c(0,jt)),Ft.length=0},destroy:Le=>(jn.forEach(dt=>{dt.destroy(Le)}),(Le=>{zi(),Le&&yo()})(Le),Cn.length=0,jn.length=0,ee.length=0,Vn.length=0,un.length=0,we=!1,Pn=!0,jt),keyframes:Le=>{const dt=ee!==Le;return ee=Le,dt&&(Le=>{Nn?vn().forEach(dt=>{if(dt.effect.setKeyframes)dt.effect.setKeyframes(Le);else{const Rt=new KeyframeEffect(dt.effect.target,Le,dt.effect.getTiming());dt.effect=Rt}}):Vi()})(ee),jt},addAnimation:Le=>{if(null!=Le)if(Array.isArray(Le))for(const dt of Le)dt.parent(jt),jn.push(dt);else Le.parent(jt),jn.push(Le);return jt},addElement:Le=>{if(null!=Le)if(1===Le.nodeType)Cn.push(Le);else if(Le.length>=0)for(let dt=0;dt<Le.length;dt++)Cn.push(Le[dt]);else console.error("Invalid addElement value");return jt},update:li,fill:Le=>(J=Le,li(!0),jt),direction:Le=>(xe=Le,li(!0),jt),iterations:Le=>(ie=Le,li(!0),jt),duration:Le=>(!Nn&&0===Le&&(Le=1),ne=Le,li(!0),jt),easing:Le=>(Re=Le,li(!0),jt),delay:Le=>(Q=Le,li(!0),jt),getWebAnimations:vn,getKeyframes:()=>ee,getFill:Xn,getDirection:bi,getDelay:Ii,getIterations:Kr,getEasing:Si,getDuration:ai,afterAddRead:Le=>(Se.push(Le),jt),afterAddWrite:Le=>(ut.push(Le),jt),afterClearStyles:(Le=[])=>{for(const dt of Le)qe[dt]="";return jt},afterStyles:(Le={})=>(qe=Le,jt),afterRemoveClass:Le=>(K=ce(K,Le),jt),afterAddClass:Le=>(Te=ce(Te,Le),jt),beforeAddRead:Le=>(Pe.push(Le),jt),beforeAddWrite:Le=>(Ae.push(Le),jt),beforeClearStyles:(Le=[])=>{for(const dt of Le)je[dt]="";return jt},beforeStyles:(Le={})=>(je=Le,jt),beforeRemoveClass:Le=>(ae=ce(ae,Le),jt),beforeAddClass:Le=>(pe=ce(pe,Le),jt),onFinish:_i,isRunning:()=>0!==Me&&!mr,progressStart:(Le=!1,dt)=>(jn.forEach(Rt=>{Rt.progressStart(Le,dt)}),bs(),Je=Le,we||so(),li(!1,!0,dt),jt),progressStep:Le=>(jn.forEach(dt=>{dt.progressStep(Le)}),Ns(Le),jt),progressEnd:(Le,dt,Rt)=>(Je=!1,jn.forEach(sn=>{sn.progressEnd(Le,dt,Rt)}),void 0!==Rt&&(lt=Rt),_n=!1,Xt=!0,0===Le?(Qe="reverse"===bi()?"normal":"reverse","reverse"===Qe&&(Xt=!1),Nn?(li(),Ns(1-dt)):(dn=(1-dt)*ai()*-1,li(!1,!1))):1===Le&&(Nn?(li(),Ns(dt)):(dn=dt*ai()*-1,li(!1,!1))),void 0!==Le&&(_i(()=>{lt=void 0,Qe=void 0,dn=void 0},{oneTimeCallback:!0}),oe||Nt()),jt)}}},3365:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{E:()=>Wt,a:()=>de,s:()=>We});const de=Xe=>{try{if(Xe instanceof Ne)return Xe.value;if(!g()||"string"!=typeof Xe||""===Xe)return Xe;if(Xe.includes("onload="))return"";const et=document.createDocumentFragment(),He=document.createElement("div");et.appendChild(He),He.innerHTML=Xe,Be.forEach(te=>{const Q=et.querySelectorAll(te);for(let ne=Q.length-1;ne>=0;ne--){const Re=Q[ne];Re.parentNode?Re.parentNode.removeChild(Re):et.removeChild(Re);const ie=tt(Re);for(let J=0;J<ie.length;J++)Fe(ie[J])}});const Bt=tt(et);for(let te=0;te<Bt.length;te++)Fe(Bt[te]);const ce=document.createElement("div");ce.appendChild(et);const Ce=ce.querySelector("div");return null!==Ce?Ce.innerHTML:ce.innerHTML}catch(et){return console.error(et),""}},Fe=Xe=>{if(Xe.nodeType&&1!==Xe.nodeType)return;if(typeof NamedNodeMap<"u"&&!(Xe.attributes instanceof NamedNodeMap))return void Xe.remove();for(let He=Xe.attributes.length-1;He>=0;He--){const Bt=Xe.attributes.item(He),ce=Bt.name;if(!me.includes(ce.toLowerCase())){Xe.removeAttribute(ce);continue}const Ce=Bt.value,te=Xe[ce];(null!=Ce&&Ce.toLowerCase().includes("javascript:")||null!=te&&te.toLowerCase().includes("javascript:"))&&Xe.removeAttribute(ce)}const et=tt(Xe);for(let He=0;He<et.length;He++)Fe(et[He])},tt=Xe=>null!=Xe.children?Xe.children:Xe.childNodes,g=()=>{var Xe;const et=window,He=null===(Xe=et?.Ionic)||void 0===Xe?void 0:Xe.config;return!He||(He.get?He.get("sanitizerEnabled",!0):!0===He.sanitizerEnabled||void 0===He.sanitizerEnabled)},me=["class","id","href","src","name","slot"],Be=["script","style","iframe","meta","link","object","embed"];class Ne{constructor(et){this.value=et}}const We=Xe=>{const et=window,He=et.Ionic;if(!He||!He.config||"Object"===He.config.constructor.name)return et.Ionic=et.Ionic||{},et.Ionic.config=Object.assign(Object.assign({},et.Ionic.config),Xe),et.Ionic.config},Wt=!1},6559:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{C:()=>me,a:()=>tt,d:()=>g});var de=Ie(5861),Fe=Ie(839);const tt=function(){var Be=(0,de.Z)(function*(Ne,We,ht,Wt,Xe,et){var He;if(Ne)return Ne.attachViewToDom(We,ht,Xe,Wt);if(!(et||"string"==typeof ht||ht instanceof HTMLElement))throw new Error("framework delegate is missing");const Bt="string"==typeof ht?null===(He=We.ownerDocument)||void 0===He?void 0:He.createElement(ht):ht;return Wt&&Wt.forEach(ce=>Bt.classList.add(ce)),Xe&&Object.assign(Bt,Xe),We.appendChild(Bt),yield new Promise(ce=>(0,Fe.c)(Bt,ce)),Bt});return function(We,ht,Wt,Xe,et,He){return Be.apply(this,arguments)}}(),g=(Be,Ne)=>{if(Ne){if(Be)return Be.removeViewFromDom(Ne.parentElement,Ne);Ne.remove()}return Promise.resolve()},me=()=>{let Be,Ne;return{attachViewToDom:function(){var Wt=(0,de.Z)(function*(Xe,et,He={},Bt=[]){var ce,Ce;let te;if(Be=Xe,et){const ne="string"==typeof et?null===(ce=Be.ownerDocument)||void 0===ce?void 0:ce.createElement(et):et;Bt.forEach(Re=>ne.classList.add(Re)),Object.assign(ne,He),Be.appendChild(ne),te=ne,yield new Promise(Re=>(0,Fe.c)(ne,Re))}else if(Be.children.length>0&&("ION-MODAL"===Be.tagName||"ION-POPOVER"===Be.tagName)&&!(te=Be.children[0]).classList.contains("ion-delegate-host")){const Re=null===(Ce=Be.ownerDocument)||void 0===Ce?void 0:Ce.createElement("div");Re.classList.add("ion-delegate-host"),Bt.forEach(ie=>Re.classList.add(ie)),Re.append(...Be.children),Be.appendChild(Re),te=Re}const Q=document.querySelector("ion-app")||document.body;return Ne=document.createComment("ionic teleport"),Be.parentNode.insertBefore(Ne,Be),Q.appendChild(Be),te??Be});return function(et,He){return Wt.apply(this,arguments)}}(),removeViewFromDom:()=>(Be&&Ne&&(Ne.parentNode.insertBefore(Be,Ne),Ne.remove()),Promise.resolve())}}},619:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{G:()=>me});class Fe{constructor(Ne,We,ht,Wt,Xe){this.id=We,this.name=ht,this.disableScroll=Xe,this.priority=1e6*Wt+We,this.ctrl=Ne}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ne=this.ctrl.capture(this.name,this.id,this.priority);return Ne&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ne}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class tt{constructor(Ne,We,ht,Wt){this.id=We,this.disable=ht,this.disableScroll=Wt,this.ctrl=Ne}block(){if(this.ctrl){if(this.disable)for(const Ne of this.disable)this.ctrl.disableGesture(Ne,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ne of this.disable)this.ctrl.enableGesture(Ne,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const g="backdrop-no-scroll",me=new class de{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ne){var We;return new Fe(this,this.newID(),Ne.name,null!==(We=Ne.priority)&&void 0!==We?We:0,!!Ne.disableScroll)}createBlocker(Ne={}){return new tt(this,this.newID(),Ne.disable,!!Ne.disableScroll)}start(Ne,We,ht){return this.canStart(Ne)?(this.requestedStart.set(We,ht),!0):(this.requestedStart.delete(We),!1)}capture(Ne,We,ht){if(!this.start(Ne,We,ht))return!1;const Wt=this.requestedStart;let Xe=-1e4;if(Wt.forEach(et=>{Xe=Math.max(Xe,et)}),Xe===ht){this.capturedId=We,Wt.clear();const et=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ne}});return document.dispatchEvent(et),!0}return Wt.delete(We),!1}release(Ne){this.requestedStart.delete(Ne),this.capturedId===Ne&&(this.capturedId=void 0)}disableGesture(Ne,We){let ht=this.disabledGestures.get(Ne);void 0===ht&&(ht=new Set,this.disabledGestures.set(Ne,ht)),ht.add(We)}enableGesture(Ne,We){const ht=this.disabledGestures.get(Ne);void 0!==ht&&ht.delete(We)}disableScroll(Ne){this.disabledScroll.add(Ne),1===this.disabledScroll.size&&document.body.classList.add(g)}enableScroll(Ne){this.disabledScroll.delete(Ne),0===this.disabledScroll.size&&document.body.classList.remove(g)}canStart(Ne){return!(void 0!==this.capturedId||this.isDisabled(Ne))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ne){const We=this.disabledGestures.get(Ne);return!!(We&&We.size>0)}newID(){return this.gestureId++,this.gestureId}}},2124:(An,Lt,Ie)=>{"use strict";Ie.r(Lt),Ie.d(Lt,{MENU_BACK_BUTTON_PRIORITY:()=>me,OVERLAY_BACK_BUTTON_PRIORITY:()=>g,blockHardwareBackButton:()=>Fe,startHardwareBackButton:()=>tt});var de=Ie(5861);const Fe=()=>{document.addEventListener("backbutton",()=>{})},tt=()=>{const Be=document;let Ne=!1;Be.addEventListener("backbutton",()=>{if(Ne)return;let We=0,ht=[];const Wt=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(He,Bt){ht.push({priority:He,handler:Bt,id:We++})}}});Be.dispatchEvent(Wt);const Xe=function(){var He=(0,de.Z)(function*(Bt){try{if(Bt?.handler){const ce=Bt.handler(et);null!=ce&&(yield ce)}}catch(ce){console.error(ce)}});return function(ce){return He.apply(this,arguments)}}(),et=()=>{if(ht.length>0){let He={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ht.forEach(Bt=>{Bt.priority>=He.priority&&(He=Bt)}),Ne=!0,ht=ht.filter(Bt=>Bt.id!==He.id),Xe(He).then(()=>Ne=!1)}};et()})},g=100,me=99},839:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{a:()=>We,b:()=>ht,c:()=>tt,d:()=>Ce,e:()=>ce,f:()=>Bt,g:()=>Wt,h:()=>He,i:()=>Ne,j:()=>J,k:()=>me,l:()=>te,m:()=>g,n:()=>et,o:()=>Q,p:()=>ie,q:()=>xe,r:()=>Xe,s:()=>ee,t:()=>de,u:()=>ne,v:()=>Re});const de=(pe,ae=0)=>new Promise(we=>{Fe(pe,ae,we)}),Fe=(pe,ae=0,we)=>{let oe,je;const Te={passive:!0},qe=()=>{oe&&oe()},Me=Je=>{(void 0===Je||pe===Je.target)&&(qe(),we(Je))};return pe&&(pe.addEventListener("webkitTransitionEnd",Me,Te),pe.addEventListener("transitionend",Me,Te),je=setTimeout(Me,ae+500),oe=()=>{je&&(clearTimeout(je),je=void 0),pe.removeEventListener("webkitTransitionEnd",Me,Te),pe.removeEventListener("transitionend",Me,Te)}),qe},tt=(pe,ae)=>{pe.componentOnReady?pe.componentOnReady().then(we=>ae(we)):Xe(()=>ae(pe))},g=pe=>void 0!==pe.componentOnReady,me=(pe,ae=[])=>{const we={};return ae.forEach(oe=>{pe.hasAttribute(oe)&&(null!==pe.getAttribute(oe)&&(we[oe]=pe.getAttribute(oe)),pe.removeAttribute(oe))}),we},Be=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ne=(pe,ae)=>{let we=Be;return ae&&ae.length>0&&(we=we.filter(oe=>!ae.includes(oe))),me(pe,we)},We=(pe,ae,we,oe)=>{var je;if(typeof window<"u"){const Te=window,K=null===(je=Te?.Ionic)||void 0===je?void 0:je.config;if(K){const qe=K.get("_ael");if(qe)return qe(pe,ae,we,oe);if(K._ael)return K._ael(pe,ae,we,oe)}}return pe.addEventListener(ae,we,oe)},ht=(pe,ae,we,oe)=>{var je;if(typeof window<"u"){const Te=window,K=null===(je=Te?.Ionic)||void 0===je?void 0:je.config;if(K){const qe=K.get("_rel");if(qe)return qe(pe,ae,we,oe);if(K._rel)return K._rel(pe,ae,we,oe)}}return pe.removeEventListener(ae,we,oe)},Wt=(pe,ae=pe)=>pe.shadowRoot||ae,Xe=pe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(pe):"function"==typeof requestAnimationFrame?requestAnimationFrame(pe):setTimeout(pe),et=pe=>!!pe.shadowRoot&&!!pe.attachShadow,He=pe=>{const ae=pe.closest("ion-item");return ae?ae.querySelector("ion-label"):null},Bt=pe=>{if(pe.focus(),pe.classList.contains("ion-focusable")){const ae=pe.closest("ion-app");ae&&ae.setFocus([pe])}},ce=(pe,ae)=>{let we;const oe=pe.getAttribute("aria-labelledby"),je=pe.id;let Te=null!==oe&&""!==oe.trim()?oe:ae+"-lbl",K=null!==oe&&""!==oe.trim()?document.getElementById(oe):He(pe);return K?(null===oe&&(K.id=Te),we=K.textContent,K.setAttribute("aria-hidden","true")):""!==je.trim()&&(K=document.querySelector(`label[for="${je}"]`),K&&(""!==K.id?Te=K.id:K.id=Te=`${je}-lbl`,we=K.textContent)),{label:K,labelId:Te,labelText:we}},Ce=(pe,ae,we,oe,je)=>{if(pe||et(ae)){let Te=ae.querySelector("input.aux-input");Te||(Te=ae.ownerDocument.createElement("input"),Te.type="hidden",Te.classList.add("aux-input"),ae.appendChild(Te)),Te.disabled=je,Te.name=we,Te.value=oe||""}},te=(pe,ae,we)=>Math.max(pe,Math.min(ae,we)),Q=(pe,ae)=>{if(!pe){const we="ASSERT: "+ae;throw console.error(we),new Error(we)}},ne=pe=>pe.timeStamp||Date.now(),Re=pe=>{if(pe){const ae=pe.changedTouches;if(ae&&ae.length>0){const we=ae[0];return{x:we.clientX,y:we.clientY}}if(void 0!==pe.pageX)return{x:pe.pageX,y:pe.pageY}}return{x:0,y:0}},ie=pe=>{const ae="rtl"===document.dir;switch(pe){case"start":return ae;case"end":return!ae;default:throw new Error(`"${pe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},J=(pe,ae)=>{const we=pe._original||pe;return{_original:pe,emit:xe(we.emit.bind(we),ae)}},xe=(pe,ae=0)=>{let we;return(...oe)=>{clearTimeout(we),we=setTimeout(pe,ae,...oe)}},ee=(pe,ae)=>{if(pe??(pe={}),ae??(ae={}),pe===ae)return!0;const we=Object.keys(pe);if(we.length!==Object.keys(ae).length)return!1;for(const oe of we)if(!(oe in ae)||pe[oe]!==ae[oe])return!1;return!0}},6710:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{a:()=>Fe,b:()=>tt,p:()=>de});const de=(g,...me)=>console.warn(`[Ionic Warning]: ${g}`,...me),Fe=(g,...me)=>console.error(`[Ionic Error]: ${g}`,...me),tt=(g,...me)=>console.error(`<${g.tagName.toLowerCase()}> must be used inside ${me.join(" or ")}.`)},6225:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{d:()=>Fe,w:()=>de});const de=typeof window<"u"?window:void 0,Fe=typeof document<"u"?document:void 0},6323:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{b:()=>Be,c:()=>Ne,d:()=>We,e:()=>pe,g:()=>oe,l:()=>xe,s:()=>ae,t:()=>Xe,w:()=>ee});var de=Ie(5861),Fe=Ie(8411),tt=Ie(839);const Be="ionViewWillLeave",Ne="ionViewDidLeave",We="ionViewWillUnload",Xe=je=>new Promise((Te,K)=>{(0,Fe.w)(()=>{et(je),He(je).then(qe=>{qe.animation&&qe.animation.destroy(),Bt(je),Te(qe)},qe=>{Bt(je),K(qe)})})}),et=je=>{const Te=je.enteringEl,K=je.leavingEl;we(Te,K,je.direction),je.showGoBack?Te.classList.add("can-go-back"):Te.classList.remove("can-go-back"),ae(Te,!1),Te.style.setProperty("pointer-events","none"),K&&(ae(K,!1),K.style.setProperty("pointer-events","none"))},He=function(){var je=(0,de.Z)(function*(Te){const K=yield ce(Te);return K&&Fe.B.isBrowser?Ce(K,Te):te(Te)});return function(K){return je.apply(this,arguments)}}(),Bt=je=>{const Te=je.enteringEl,K=je.leavingEl;Te.classList.remove("ion-page-invisible"),Te.style.removeProperty("pointer-events"),void 0!==K&&(K.classList.remove("ion-page-invisible"),K.style.removeProperty("pointer-events"))},ce=function(){var je=(0,de.Z)(function*(Te){return Te.leavingEl&&Te.animated&&0!==Te.duration?Te.animationBuilder?Te.animationBuilder:"ios"===Te.mode?(yield Promise.resolve().then(Ie.bind(Ie,2510))).iosTransitionAnimation:(yield Promise.resolve().then(Ie.bind(Ie,6003))).mdTransitionAnimation:void 0});return function(K){return je.apply(this,arguments)}}(),Ce=function(){var je=(0,de.Z)(function*(Te,K){yield Q(K,!0);const qe=Te(K.baseEl,K);ie(K.enteringEl,K.leavingEl);const Me=yield Re(qe,K);return K.progressCallback&&K.progressCallback(void 0),Me&&J(K.enteringEl,K.leavingEl),{hasCompleted:Me,animation:qe}});return function(K,qe){return je.apply(this,arguments)}}(),te=function(){var je=(0,de.Z)(function*(Te){const K=Te.enteringEl,qe=Te.leavingEl;return yield Q(Te,!1),ie(K,qe),J(K,qe),{hasCompleted:!0}});return function(K){return je.apply(this,arguments)}}(),Q=function(){var je=(0,de.Z)(function*(Te,K){(void 0!==Te.deepWait?Te.deepWait:K)&&(yield Promise.all([pe(Te.enteringEl),pe(Te.leavingEl)])),yield ne(Te.viewIsReady,Te.enteringEl)});return function(K,qe){return je.apply(this,arguments)}}(),ne=function(){var je=(0,de.Z)(function*(Te,K){Te&&(yield Te(K))});return function(K,qe){return je.apply(this,arguments)}}(),Re=(je,Te)=>{const K=Te.progressCallback,qe=new Promise(Me=>{je.onFinish(Je=>Me(1===Je))});return K?(je.progressStart(!0),K(je)):je.play(),qe},ie=(je,Te)=>{xe(Te,Be),xe(je,"ionViewWillEnter")},J=(je,Te)=>{xe(je,"ionViewDidEnter"),xe(Te,Ne)},xe=(je,Te)=>{if(je){const K=new CustomEvent(Te,{bubbles:!1,cancelable:!1});je.dispatchEvent(K)}},ee=()=>new Promise(je=>(0,tt.r)(()=>(0,tt.r)(()=>je()))),pe=function(){var je=(0,de.Z)(function*(Te){const K=Te;if(K){if(null!=K.componentOnReady){if(null!=(yield K.componentOnReady()))return}else if(null!=K.__registerHost)return void(yield new Promise(Me=>(0,tt.r)(Me)));yield Promise.all(Array.from(K.children).map(pe))}});return function(K){return je.apply(this,arguments)}}(),ae=(je,Te)=>{Te?(je.setAttribute("aria-hidden","true"),je.classList.add("ion-page-hidden")):(je.hidden=!1,je.removeAttribute("aria-hidden"),je.classList.remove("ion-page-hidden"))},we=(je,Te,K)=>{void 0!==je&&(je.style.zIndex="back"===K?"99":"101"),void 0!==Te&&(Te.style.zIndex="100")},oe=je=>je.classList.contains("ion-page")?je:je.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||je},8411:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{B:()=>Xe,H:()=>qe,a:()=>Mn,b:()=>on,c:()=>_n,d:()=>mr,e:()=>Tt,f:()=>jt,g:()=>Pn,h:()=>Te,i:()=>Dt,j:()=>et,r:()=>yi,w:()=>Nt});var de=Ie(5861);let tt,g,me,Be=!1,Ne=!1,We=!1,ht=!1,Wt=!1;const Xe={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},et=ue=>{const ye=new URL(ue,li.$resourcesUrl$);return ye.origin!==Lo.location.origin?ye.href:ye.pathname},ne="s-id",Re="sty-id",xe="http://www.w3.org/1999/xlink",ee={},oe=ue=>"object"==(ue=typeof ue)||"function"===ue;function je(ue){var ye,nt,xt;return null!==(xt=null===(nt=null===(ye=ue.head)||void 0===ye?void 0:ye.querySelector('meta[name="csp-nonce"]'))||void 0===nt?void 0:nt.getAttribute("content"))&&void 0!==xt?xt:void 0}const Te=(ue,ye,...nt)=>{let xt=null,Le=null,dt=null,Rt=!1,sn=!1;const yn=[],Et=zr=>{for(let ui=0;ui<zr.length;ui++)xt=zr[ui],Array.isArray(xt)?Et(xt):null!=xt&&"boolean"!=typeof xt&&((Rt="function"!=typeof ue&&!oe(xt))&&(xt=String(xt)),Rt&&sn?yn[yn.length-1].$text$+=xt:yn.push(Rt?K(null,xt):xt),sn=Rt)};if(Et(nt),ye){ye.key&&(Le=ye.key),ye.name&&(dt=ye.name);{const zr=ye.className||ye.class;zr&&(ye.class="object"!=typeof zr?zr:Object.keys(zr).filter(ui=>zr[ui]).join(" "))}}if("function"==typeof ue)return ue(null===ye?{}:ye,yn,Je);const kn=K(ue,null);return kn.$attrs$=ye,yn.length>0&&(kn.$children$=yn),kn.$key$=Le,kn.$name$=dt,kn},K=(ue,ye)=>({$flags$:0,$tag$:ue,$text$:ye,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),qe={},Je={forEach:(ue,ye)=>ue.map(Ue).forEach(ye),map:(ue,ye)=>ue.map(Ue).map(ye).map(le)},Ue=ue=>({vattrs:ue.$attrs$,vchildren:ue.$children$,vkey:ue.$key$,vname:ue.$name$,vtag:ue.$tag$,vtext:ue.$text$}),le=ue=>{if("function"==typeof ue.vtag){const nt=Object.assign({},ue.vattrs);return ue.vkey&&(nt.key=ue.vkey),ue.vname&&(nt.name=ue.vname),Te(ue.vtag,nt,...ue.vchildren||[])}const ye=K(ue.vtag,ue.vtext);return ye.$attrs$=ue.vattrs,ye.$children$=ue.vchildren,ye.$key$=ue.vkey,ye.$name$=ue.vname,ye},lt=(ue,ye,nt,xt,Le,dt,Rt)=>{let sn,yn,Et,kn;if(1===dt.nodeType){for(sn=dt.getAttribute("c-id"),sn&&(yn=sn.split("."),(yn[0]===Rt||"0"===yn[0])&&(Et={$flags$:0,$hostId$:yn[0],$nodeId$:yn[1],$depth$:yn[2],$index$:yn[3],$tag$:dt.tagName.toLowerCase(),$elm$:dt,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ye.push(Et),dt.removeAttribute("c-id"),ue.$children$||(ue.$children$=[]),ue.$children$[Et.$index$]=Et,ue=Et,xt&&"0"===Et.$depth$&&(xt[Et.$index$]=Et.$elm$))),kn=dt.childNodes.length-1;kn>=0;kn--)lt(ue,ye,nt,xt,Le,dt.childNodes[kn],Rt);if(dt.shadowRoot)for(kn=dt.shadowRoot.childNodes.length-1;kn>=0;kn--)lt(ue,ye,nt,xt,Le,dt.shadowRoot.childNodes[kn],Rt)}else if(8===dt.nodeType)yn=dt.nodeValue.split("."),(yn[1]===Rt||"0"===yn[1])&&(sn=yn[0],Et={$flags$:0,$hostId$:yn[1],$nodeId$:yn[2],$depth$:yn[3],$index$:yn[4],$elm$:dt,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===sn?(Et.$elm$=dt.nextSibling,Et.$elm$&&3===Et.$elm$.nodeType&&(Et.$text$=Et.$elm$.textContent,ye.push(Et),dt.remove(),ue.$children$||(ue.$children$=[]),ue.$children$[Et.$index$]=Et,xt&&"0"===Et.$depth$&&(xt[Et.$index$]=Et.$elm$))):Et.$hostId$===Rt&&("s"===sn?(Et.$tag$="slot",dt["s-sn"]=yn[5]?Et.$name$=yn[5]:"",dt["s-sr"]=!0,xt&&(Et.$elm$=no.createElement(Et.$tag$),Et.$name$&&Et.$elm$.setAttribute("name",Et.$name$),dt.parentNode.insertBefore(Et.$elm$,dt),dt.remove(),"0"===Et.$depth$&&(xt[Et.$index$]=Et.$elm$)),nt.push(Et),ue.$children$||(ue.$children$=[]),ue.$children$[Et.$index$]=Et):"r"===sn&&(xt?dt.remove():(Le["s-cr"]=dt,dt["s-cn"]=!0))));else if(ue&&"style"===ue.$tag$){const zr=K(null,dt.textContent);zr.$elm$=dt,zr.$index$="0",ue.$children$=[zr]}},dn=(ue,ye)=>{if(1===ue.nodeType){let nt=0;for(;nt<ue.childNodes.length;nt++)dn(ue.childNodes[nt],ye);if(ue.shadowRoot)for(nt=0;nt<ue.shadowRoot.childNodes.length;nt++)dn(ue.shadowRoot.childNodes[nt],ye)}else if(8===ue.nodeType){const nt=ue.nodeValue.split(".");"o"===nt[0]&&(ye.set(nt[1]+"."+nt[2],ue),ue.nodeValue="",ue["s-en"]=nt[3])}},_n=ue=>Ns.push(ue),Pn=ue=>Bn(ue).$modeName$,jt=ue=>Bn(ue).$hostElement$,mr=(ue,ye,nt)=>{const xt=jt(ue);return{emit:Le=>Tn(xt,ye,{bubbles:!!(4&nt),composed:!!(2&nt),cancelable:!!(1&nt),detail:Le})}},Tn=(ue,ye,nt)=>{const xt=li.ce(ye,nt);return ue.dispatchEvent(xt),xt},Vn=new WeakMap,un=(ue,ye,nt)=>{let xt=so.get(ue);bs&&nt?(xt=xt||new CSSStyleSheet,"string"==typeof xt?xt=ye:xt.replaceSync(ye)):xt=ye,so.set(ue,xt)},Ft=(ue,ye,nt)=>{var xt;const Le=jn(ye,nt),dt=so.get(Le);if(ue=11===ue.nodeType?ue:no,dt)if("string"==typeof dt){let sn,Rt=Vn.get(ue=ue.head||ue);if(Rt||Vn.set(ue,Rt=new Set),!Rt.has(Le)){if(ue.host&&(sn=ue.querySelector(`[${Re}="${Le}"]`)))sn.innerHTML=dt;else{sn=no.createElement("style"),sn.innerHTML=dt;const yn=null!==(xt=li.$nonce$)&&void 0!==xt?xt:je(no);null!=yn&&sn.setAttribute("nonce",yn),ue.insertBefore(sn,ue.querySelector("link"))}Rt&&Rt.add(Le)}}else ue.adoptedStyleSheets.includes(dt)||(ue.adoptedStyleSheets=[...ue.adoptedStyleSheets,dt]);return Le},jn=(ue,ye)=>"sc-"+(ye&&32&ue.$flags$?ue.$tagName$+"-"+ye:ue.$tagName$),Pt=ue=>ue.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Pe=(ue,ye,nt,xt,Le,dt)=>{if(nt!==xt){let Rt=oi(ue,ye),sn=ye.toLowerCase();if("class"===ye){const yn=ue.classList,Et=Se(nt),kn=Se(xt);yn.remove(...Et.filter(zr=>zr&&!kn.includes(zr))),yn.add(...kn.filter(zr=>zr&&!Et.includes(zr)))}else if("style"===ye){for(const yn in nt)(!xt||null==xt[yn])&&(yn.includes("-")?ue.style.removeProperty(yn):ue.style[yn]="");for(const yn in xt)(!nt||xt[yn]!==nt[yn])&&(yn.includes("-")?ue.style.setProperty(yn,xt[yn]):ue.style[yn]=xt[yn])}else if("key"!==ye)if("ref"===ye)xt&&xt(ue);else if(Rt||"o"!==ye[0]||"n"!==ye[1]){const yn=oe(xt);if((Rt||yn&&null!==xt)&&!Le)try{if(ue.tagName.includes("-"))ue[ye]=xt;else{const kn=xt??"";"list"===ye?Rt=!1:(null==nt||ue[ye]!=kn)&&(ue[ye]=kn)}}catch{}let Et=!1;sn!==(sn=sn.replace(/^xlink\:?/,""))&&(ye=sn,Et=!0),null==xt||!1===xt?(!1!==xt||""===ue.getAttribute(ye))&&(Et?ue.removeAttributeNS(xe,ye):ue.removeAttribute(ye)):(!Rt||4&dt||Le)&&!yn&&(xt=!0===xt?"":xt,Et?ue.setAttributeNS(xe,ye,xt):ue.setAttribute(ye,xt))}else ye="-"===ye[2]?ye.slice(3):oi(Lo,sn)?sn.slice(2):sn[2]+ye.slice(3),nt&&li.rel(ue,ye,nt,!1),xt&&li.ael(ue,ye,xt,!1)}},Ae=/\s/,Se=ue=>ue?ue.split(Ae):[],ut=(ue,ye,nt,xt)=>{const Le=11===ye.$elm$.nodeType&&ye.$elm$.host?ye.$elm$.host:ye.$elm$,dt=ue&&ue.$attrs$||ee,Rt=ye.$attrs$||ee;for(xt in dt)xt in Rt||Pe(Le,xt,dt[xt],void 0,nt,ye.$flags$);for(xt in Rt)Pe(Le,xt,dt[xt],Rt[xt],nt,ye.$flags$)},kt=(ue,ye,nt,xt)=>{const Le=ye.$children$[nt];let Rt,sn,yn,dt=0;if(Be||(We=!0,"slot"===Le.$tag$&&(tt&&xt.classList.add(tt+"-s"),Le.$flags$|=Le.$children$?2:1)),null!==Le.$text$)Rt=Le.$elm$=no.createTextNode(Le.$text$);else if(1&Le.$flags$)Rt=Le.$elm$=no.createTextNode("");else{if(ht||(ht="svg"===Le.$tag$),Rt=Le.$elm$=no.createElementNS(ht?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Le.$flags$?"slot-fb":Le.$tag$),ht&&"foreignObject"===Le.$tag$&&(ht=!1),ut(null,Le,ht),(ue=>null!=ue)(tt)&&Rt["s-si"]!==tt&&Rt.classList.add(Rt["s-si"]=tt),Le.$children$)for(dt=0;dt<Le.$children$.length;++dt)sn=kt(ue,Le,dt,Rt),sn&&Rt.appendChild(sn);"svg"===Le.$tag$?ht=!1:"foreignObject"===Rt.tagName&&(ht=!0)}return Rt["s-hn"]=me,3&Le.$flags$&&(Rt["s-sr"]=!0,Rt["s-cr"]=g,Rt["s-sn"]=Le.$name$||"",yn=ue&&ue.$children$&&ue.$children$[nt],yn&&yn.$tag$===Le.$tag$&&ue.$elm$&&cn(ue.$elm$,!1)),Rt},cn=(ue,ye)=>{li.$flags$|=1;const nt=ue.childNodes;for(let xt=nt.length-1;xt>=0;xt--){const Le=nt[xt];Le["s-hn"]!==me&&Le["s-ol"]&&(sr(Le).insertBefore(Le,si(Le)),Le["s-ol"].remove(),Le["s-ol"]=void 0,We=!0),ye&&cn(Le,ye)}li.$flags$&=-2},Nn=(ue,ye,nt,xt,Le,dt)=>{let sn,Rt=ue["s-cr"]&&ue["s-cr"].parentNode||ue;for(Rt.shadowRoot&&Rt.tagName===me&&(Rt=Rt.shadowRoot);Le<=dt;++Le)xt[Le]&&(sn=kt(null,nt,Le,ue),sn&&(xt[Le].$elm$=sn,Rt.insertBefore(sn,si(ye))))},Fn=(ue,ye,nt)=>{for(let xt=ye;xt<=nt;++xt){const Le=ue[xt];if(Le){const dt=Le.$elm$;zi(Le),dt&&(Ne=!0,dt["s-ol"]?dt["s-ol"].remove():cn(dt,!0),dt.remove())}}},Yr=(ue,ye)=>ue.$tag$===ye.$tag$&&("slot"===ue.$tag$?ue.$name$===ye.$name$:ue.$key$===ye.$key$),si=ue=>ue&&ue["s-ol"]||ue,sr=ue=>(ue["s-ol"]?ue["s-ol"]:ue).parentNode,Cr=(ue,ye)=>{const nt=ye.$elm$=ue.$elm$,xt=ue.$children$,Le=ye.$children$,dt=ye.$tag$,Rt=ye.$text$;let sn;null===Rt?(ht="svg"===dt||"foreignObject"!==dt&&ht,"slot"===dt||ut(ue,ye,ht),null!==xt&&null!==Le?((ue,ye,nt,xt)=>{let _o,tn,Le=0,dt=0,Rt=0,sn=0,yn=ye.length-1,Et=ye[0],kn=ye[yn],zr=xt.length-1,ui=xt[0],ao=xt[zr];for(;Le<=yn&&dt<=zr;)if(null==Et)Et=ye[++Le];else if(null==kn)kn=ye[--yn];else if(null==ui)ui=xt[++dt];else if(null==ao)ao=xt[--zr];else if(Yr(Et,ui))Cr(Et,ui),Et=ye[++Le],ui=xt[++dt];else if(Yr(kn,ao))Cr(kn,ao),kn=ye[--yn],ao=xt[--zr];else if(Yr(Et,ao))("slot"===Et.$tag$||"slot"===ao.$tag$)&&cn(Et.$elm$.parentNode,!1),Cr(Et,ao),ue.insertBefore(Et.$elm$,kn.$elm$.nextSibling),Et=ye[++Le],ao=xt[--zr];else if(Yr(kn,ui))("slot"===Et.$tag$||"slot"===ao.$tag$)&&cn(kn.$elm$.parentNode,!1),Cr(kn,ui),ue.insertBefore(kn.$elm$,Et.$elm$),kn=ye[--yn],ui=xt[++dt];else{for(Rt=-1,sn=Le;sn<=yn;++sn)if(ye[sn]&&null!==ye[sn].$key$&&ye[sn].$key$===ui.$key$){Rt=sn;break}Rt>=0?(tn=ye[Rt],tn.$tag$!==ui.$tag$?_o=kt(ye&&ye[dt],nt,Rt,ue):(Cr(tn,ui),ye[Rt]=void 0,_o=tn.$elm$),ui=xt[++dt]):(_o=kt(ye&&ye[dt],nt,dt,ue),ui=xt[++dt]),_o&&sr(Et.$elm$).insertBefore(_o,si(Et.$elm$))}Le>yn?Nn(ue,null==xt[zr+1]?null:xt[zr+1].$elm$,nt,xt,dt,zr):dt>zr&&Fn(ye,Le,yn)})(nt,xt,ye,Le):null!==Le?(null!==ue.$text$&&(nt.textContent=""),Nn(nt,null,ye,Le,0,Le.length-1)):null!==xt&&Fn(xt,0,xt.length-1),ht&&"svg"===dt&&(ht=!1)):(sn=nt["s-cr"])?sn.parentNode.textContent=Rt:ue.$text$!==Rt&&(nt.data=Rt)},Ei=ue=>{const ye=ue.childNodes;for(const nt of ye)if(1===nt.nodeType){if(nt["s-sr"]){const xt=nt["s-sn"];nt.hidden=!1;for(const Le of ye)if(Le["s-hn"]!==nt["s-hn"]||""!==xt){if(1===Le.nodeType&&xt===Le.getAttribute("slot")){nt.hidden=!0;break}}else if(1===Le.nodeType||3===Le.nodeType&&""!==Le.textContent.trim()){nt.hidden=!0;break}}Ei(nt)}},Hr=[],_i=ue=>{let ye,nt,xt;for(const Le of ue.childNodes){if(Le["s-sr"]&&(ye=Le["s-cr"])&&ye.parentNode){nt=ye.parentNode.childNodes;const dt=Le["s-sn"];for(xt=nt.length-1;xt>=0;xt--)if(ye=nt[xt],!ye["s-cn"]&&!ye["s-nr"]&&ye["s-hn"]!==Le["s-hn"])if(Ni(ye,dt)){let Rt=Hr.find(sn=>sn.$nodeToRelocate$===ye);Ne=!0,ye["s-sn"]=ye["s-sn"]||dt,Rt?Rt.$slotRefNode$=Le:Hr.push({$slotRefNode$:Le,$nodeToRelocate$:ye}),ye["s-sr"]&&Hr.map(sn=>{Ni(sn.$nodeToRelocate$,ye["s-sn"])&&(Rt=Hr.find(yn=>yn.$nodeToRelocate$===ye),Rt&&!sn.$slotRefNode$&&(sn.$slotRefNode$=Rt.$slotRefNode$))})}else Hr.some(Rt=>Rt.$nodeToRelocate$===ye)||Hr.push({$nodeToRelocate$:ye})}1===Le.nodeType&&_i(Le)}},Ni=(ue,ye)=>1===ue.nodeType?null===ue.getAttribute("slot")&&""===ye||ue.getAttribute("slot")===ye:ue["s-sn"]===ye||""===ye,zi=ue=>{ue.$attrs$&&ue.$attrs$.ref&&ue.$attrs$.ref(null),ue.$children$&&ue.$children$.map(zi)},_t=(ue,ye)=>{ye&&!ue.$onRenderResolve$&&ye["s-p"]&&ye["s-p"].push(new Promise(nt=>ue.$onRenderResolve$=nt))},De=(ue,ye)=>{if(ue.$flags$|=16,!(4&ue.$flags$))return _t(ue,ue.$ancestorComponent$),Nt(()=>ke(ue,ye));ue.$flags$|=512},ke=(ue,ye)=>{const xt=ue.$lazyInstance$;let Le;return ye&&(ue.$flags$|=256,ue.$queuedListeners$&&(ue.$queuedListeners$.map(([dt,Rt])=>qn(xt,dt,Rt)),ue.$queuedListeners$=void 0),Le=qn(xt,"componentWillLoad")),Le=gt(Le,()=>qn(xt,"componentWillRender")),gt(Le,()=>ct(ue,xt,ye))},gt=(ue,ye)=>It(ue)?ue.then(ye):ye(),It=ue=>ue instanceof Promise||ue&&ue.then&&"function"==typeof ue.then,ct=function(){var ue=(0,de.Z)(function*(ye,nt,xt){var Le;const dt=ye.$hostElement$,sn=dt["s-rc"];xt&&(ue=>{const ye=ue.$cmpMeta$,nt=ue.$hostElement$,xt=ye.$flags$,dt=Ft(nt.shadowRoot?nt.shadowRoot:nt.getRootNode(),ye,ue.$modeName$);10&xt&&(nt["s-sc"]=dt,nt.classList.add(dt+"-h"),2&xt&&nt.classList.add(dt+"-s"))})(ye);nn(ye,nt,dt,xt),sn&&(sn.map(Et=>Et()),dt["s-rc"]=void 0);{const Et=null!==(Le=dt["s-p"])&&void 0!==Le?Le:[],kn=()=>Qt(ye);0===Et.length?kn():(Promise.all(Et).then(kn),ye.$flags$|=4,Et.length=0)}});return function(nt,xt,Le){return ue.apply(this,arguments)}}(),nn=(ue,ye,nt,xt)=>{try{ye=ye.render&&ye.render(),ue.$flags$&=-17,ue.$flags$|=2,((ue,ye,nt=!1)=>{const xt=ue.$hostElement$,Le=ue.$cmpMeta$,dt=ue.$vnode$||K(null,null),Rt=(ue=>ue&&ue.$tag$===qe)(ye)?ye:Te(null,null,ye);if(me=xt.tagName,Le.$attrsToReflect$&&(Rt.$attrs$=Rt.$attrs$||{},Le.$attrsToReflect$.map(([sn,yn])=>Rt.$attrs$[yn]=xt[sn])),nt&&Rt.$attrs$)for(const sn of Object.keys(Rt.$attrs$))xt.hasAttribute(sn)&&!["key","ref","style","class"].includes(sn)&&(Rt.$attrs$[sn]=xt[sn]);if(Rt.$tag$=null,Rt.$flags$|=4,ue.$vnode$=Rt,Rt.$elm$=dt.$elm$=xt.shadowRoot||xt,tt=xt["s-sc"],g=xt["s-cr"],Be=0!=(1&Le.$flags$),Ne=!1,Cr(dt,Rt),li.$flags$|=1,We){_i(Rt.$elm$);let sn,yn,Et,kn,zr,ui,ao=0;for(;ao<Hr.length;ao++)sn=Hr[ao],yn=sn.$nodeToRelocate$,yn["s-ol"]||(Et=no.createTextNode(""),Et["s-nr"]=yn,yn.parentNode.insertBefore(yn["s-ol"]=Et,yn));for(ao=0;ao<Hr.length;ao++)if(sn=Hr[ao],yn=sn.$nodeToRelocate$,sn.$slotRefNode$){for(kn=sn.$slotRefNode$.parentNode,zr=sn.$slotRefNode$.nextSibling,Et=yn["s-ol"];Et=Et.previousSibling;)if(ui=Et["s-nr"],ui&&ui["s-sn"]===yn["s-sn"]&&kn===ui.parentNode&&(ui=ui.nextSibling,!ui||!ui["s-nr"])){zr=ui;break}(!zr&&kn!==yn.parentNode||yn.nextSibling!==zr)&&yn!==zr&&(!yn["s-hn"]&&yn["s-ol"]&&(yn["s-hn"]=yn["s-ol"].parentNode.nodeName),kn.insertBefore(yn,zr))}else 1===yn.nodeType&&(yn.hidden=!0)}Ne&&Ei(Rt.$elm$),li.$flags$&=-2,Hr.length=0})(ue,ye,xt)}catch(Le){to(Le,ue.$hostElement$)}return null},Qt=ue=>{const nt=ue.$hostElement$,Le=ue.$lazyInstance$,dt=ue.$ancestorComponent$;qn(Le,"componentDidRender"),64&ue.$flags$?qn(Le,"componentDidUpdate"):(ue.$flags$|=64,nr(nt),qn(Le,"componentDidLoad"),ue.$onReadyResolve$(nt),dt||hn()),ue.$onInstanceResolve$(nt),ue.$onRenderResolve$&&(ue.$onRenderResolve$(),ue.$onRenderResolve$=void 0),512&ue.$flags$&&rt(()=>De(ue,!1)),ue.$flags$&=-517},Dt=ue=>{{const ye=Bn(ue),nt=ye.$hostElement$.isConnected;return nt&&2==(18&ye.$flags$)&&De(ye,!1),nt}},hn=ue=>{nr(no.documentElement),rt(()=>Tn(Lo,"appload",{detail:{namespace:"ionic"}}))},qn=(ue,ye,nt)=>{if(ue&&ue[ye])try{return ue[ye](nt)}catch(xt){to(xt)}},nr=ue=>ue.classList.add("hydrated"),Si=(ue,ye,nt)=>{var xt;if(ye.$members$){ue.watchers&&(ye.$watchers$=ue.watchers);const Le=Object.entries(ye.$members$),dt=ue.prototype;if(Le.map(([Rt,[sn]])=>{31&sn||2&nt&&32&sn?Object.defineProperty(dt,Rt,{get(){return((ue,ye)=>Bn(this).$instanceValues$.get(ye))(0,Rt)},set(yn){((ue,ye,nt,xt)=>{const Le=Bn(ue),dt=Le.$hostElement$,Rt=Le.$instanceValues$.get(ye),sn=Le.$flags$,yn=Le.$lazyInstance$;nt=((ue,ye)=>null==ue||oe(ue)?ue:4&ye?"false"!==ue&&(""===ue||!!ue):2&ye?parseFloat(ue):1&ye?String(ue):ue)(nt,xt.$members$[ye][0]);const Et=Number.isNaN(Rt)&&Number.isNaN(nt);if((!(8&sn)||void 0===Rt)&&nt!==Rt&&!Et&&(Le.$instanceValues$.set(ye,nt),yn)){if(xt.$watchers$&&128&sn){const zr=xt.$watchers$[ye];zr&&zr.map(ui=>{try{yn[ui](nt,Rt,ye)}catch(ao){to(ao,dt)}})}2==(18&sn)&&De(Le,!1)}})(this,Rt,yn,ye)},configurable:!0,enumerable:!0}):1&nt&&64&sn&&Object.defineProperty(dt,Rt,{value(...yn){const Et=Bn(this);return Et.$onInstancePromise$.then(()=>Et.$lazyInstance$[Rt](...yn))}})}),1&nt){const Rt=new Map;dt.attributeChangedCallback=function(sn,yn,Et){li.jmp(()=>{const kn=Rt.get(sn);if(this.hasOwnProperty(kn))Et=this[kn],delete this[kn];else{if(dt.hasOwnProperty(kn)&&"number"==typeof this[kn]&&this[kn]==Et)return;if(null==kn){const zr=Bn(this),ui=zr?.$flags$;if(!(8&ui)&&128&ui&&Et!==yn){const ao=zr.$lazyInstance$,_o=ye.$watchers$[sn];_o?.forEach(tn=>{null!=ao[tn]&&ao[tn].call(ao,Et,yn,sn)})}return}}this[kn]=(null!==Et||"boolean"!=typeof this[kn])&&Et})},ue.observedAttributes=Array.from(new Set([...Object.keys(null!==(xt=ye.$watchers$)&&void 0!==xt?xt:{}),...Le.filter(([sn,yn])=>15&yn[0]).map(([sn,yn])=>{const Et=yn[1]||sn;return Rt.set(Et,sn),512&yn[0]&&ye.$attrsToReflect$.push([sn,Et]),Et})]))}}return ue},ai=function(){var ue=(0,de.Z)(function*(ye,nt,xt,Le){let dt;if(!(32&nt.$flags$)){nt.$flags$|=32;{if(dt=So(xt),dt.then){const Et=()=>{};dt=yield dt,Et()}dt.isProxied||(xt.$watchers$=dt.watchers,Si(dt,xt,2),dt.isProxied=!0);const yn=()=>{};nt.$flags$|=8;try{new dt(nt)}catch(Et){to(Et)}nt.$flags$&=-9,nt.$flags$|=128,yn(),Kr(nt.$lazyInstance$)}if(dt.style){let yn=dt.style;"string"!=typeof yn&&(yn=yn[nt.$modeName$=(ue=>Ns.map(ye=>ye(ue)).find(ye=>!!ye))(ye)]);const Et=jn(xt,nt.$modeName$);if(!so.has(Et)){const kn=()=>{};un(Et,yn,!!(1&xt.$flags$)),kn()}}}const Rt=nt.$ancestorComponent$,sn=()=>De(nt,!0);Rt&&Rt["s-rc"]?Rt["s-rc"].push(sn):sn()});return function(nt,xt,Le,dt){return ue.apply(this,arguments)}}(),Kr=ue=>{qn(ue,"connectedCallback")},Fi=ue=>{const ye=ue["s-cr"]=no.createComment("");ye["s-cn"]=!0,ue.insertBefore(ye,ue.firstChild)},bt=ue=>{qn(ue,"disconnectedCallback")},Ct=function(){var ue=(0,de.Z)(function*(ye){if(!(1&li.$flags$)){const nt=Bn(ye);nt.$rmListeners$&&(nt.$rmListeners$.map(xt=>xt()),nt.$rmListeners$=void 0),nt?.$lazyInstance$?bt(nt.$lazyInstance$):nt?.$onReadyPromise$&&nt.$onReadyPromise$.then(()=>bt(nt.$lazyInstance$))}});return function(nt){return ue.apply(this,arguments)}}(),on=(ue,ye={})=>{var nt;const Le=[],dt=ye.exclude||[],Rt=Lo.customElements,sn=no.head,yn=sn.querySelector("meta[charset]"),Et=no.createElement("style"),kn=[],zr=no.querySelectorAll(`[${Re}]`);let ui,ao=!0,_o=0;for(Object.assign(li,ye),li.$resourcesUrl$=new URL(ye.resourcesUrl||"./",no.baseURI).href,li.$flags$|=2;_o<zr.length;_o++)un(zr[_o].getAttribute(Re),Pt(zr[_o].innerHTML),!0);ue.map(tn=>{tn[1].map($i=>{var jr;const Mi={$flags$:$i[0],$tagName$:$i[1],$members$:$i[2],$listeners$:$i[3]};Mi.$members$=$i[2],Mi.$listeners$=$i[3],Mi.$attrsToReflect$=[],Mi.$watchers$=null!==(jr=$i[4])&&void 0!==jr?jr:{};const Ds=Mi.$tagName$,Cl=class extends HTMLElement{constructor(Su){super(Su),Pr(Su=this,Mi),1&Mi.$flags$&&Su.attachShadow({mode:"open",delegatesFocus:!!(16&Mi.$flags$)})}connectedCallback(){ui&&(clearTimeout(ui),ui=null),ao?kn.push(this):li.jmp(()=>(ue=>{if(!(1&li.$flags$)){const ye=Bn(ue),nt=ye.$cmpMeta$,xt=()=>{};if(1&ye.$flags$)ln(ue,ye,nt.$listeners$),ye?.$lazyInstance$?Kr(ye.$lazyInstance$):ye?.$onReadyPromise$&&ye.$onReadyPromise$.then(()=>Kr(ye.$lazyInstance$));else{let Le;if(ye.$flags$|=1,Le=ue.getAttribute(ne),Le){if(1&nt.$flags$){const dt=Ft(ue.shadowRoot,nt,ue.getAttribute("s-mode"));ue.classList.remove(dt+"-h",dt+"-s")}((ue,ye,nt,xt)=>{const dt=ue.shadowRoot,Rt=[],yn=dt?[]:null,Et=xt.$vnode$=K(ye,null);li.$orgLocNodes$||dn(no.body,li.$orgLocNodes$=new Map),ue[ne]=nt,ue.removeAttribute(ne),lt(Et,Rt,[],yn,ue,ue,nt),Rt.map(kn=>{const zr=kn.$hostId$+"."+kn.$nodeId$,ui=li.$orgLocNodes$.get(zr),ao=kn.$elm$;ui&&gl&&""===ui["s-en"]&&ui.parentNode.insertBefore(ao,ui.nextSibling),dt||(ao["s-hn"]=ye,ui&&(ao["s-ol"]=ui,ao["s-ol"]["s-nr"]=ao)),li.$orgLocNodes$.delete(zr)}),dt&&yn.map(kn=>{kn&&dt.appendChild(kn)})})(ue,nt.$tagName$,Le,ye)}Le||12&nt.$flags$&&Fi(ue);{let dt=ue;for(;dt=dt.parentNode||dt.host;)if(1===dt.nodeType&&dt.hasAttribute("s-id")&&dt["s-p"]||dt["s-p"]){_t(ye,ye.$ancestorComponent$=dt);break}}nt.$members$&&Object.entries(nt.$members$).map(([dt,[Rt]])=>{if(31&Rt&&ue.hasOwnProperty(dt)){const sn=ue[dt];delete ue[dt],ue[dt]=sn}}),ai(ue,ye,nt)}xt()}})(this))}disconnectedCallback(){li.jmp(()=>Ct(this))}componentOnReady(){return Bn(this).$onReadyPromise$}};Mi.$lazyBundleId$=tn[0],!dt.includes(Ds)&&!Rt.get(Ds)&&(Le.push(Ds),Rt.define(Ds,Si(Cl,Mi,1)))})});{Et.innerHTML=Le+"{visibility:hidden}.hydrated{visibility:inherit}",Et.setAttribute("data-styles","");const tn=null!==(nt=li.$nonce$)&&void 0!==nt?nt:je(no);null!=tn&&Et.setAttribute("nonce",tn),sn.insertBefore(Et,yn?yn.nextSibling:sn.firstChild)}ao=!1,kn.length?kn.map(tn=>tn.connectedCallback()):li.jmp(()=>ui=setTimeout(hn,30))},ln=(ue,ye,nt,xt)=>{nt&&nt.map(([Le,dt,Rt])=>{const sn=$n(ue,Le),yn=Sn(ye,Rt),Et=Yn(Le);li.ael(sn,dt,yn,Et),(ye.$rmListeners$=ye.$rmListeners$||[]).push(()=>li.rel(sn,dt,yn,Et))})},Sn=(ue,ye)=>nt=>{try{256&ue.$flags$?ue.$lazyInstance$[ye](nt):(ue.$queuedListeners$=ue.$queuedListeners$||[]).push([ye,nt])}catch(xt){to(xt)}},$n=(ue,ye)=>4&ye?no:8&ye?Lo:16&ye?no.body:ue,Yn=ue=>0!=(2&ue),Dr=new WeakMap,Bn=ue=>Dr.get(ue),yi=(ue,ye)=>Dr.set(ye.$lazyInstance$=ue,ye),Pr=(ue,ye)=>{const nt={$flags$:0,$hostElement$:ue,$cmpMeta$:ye,$instanceValues$:new Map};return nt.$onInstancePromise$=new Promise(xt=>nt.$onInstanceResolve$=xt),nt.$onReadyPromise$=new Promise(xt=>nt.$onReadyResolve$=xt),ue["s-p"]=[],ue["s-rc"]=[],ln(ue,nt,ye.$listeners$),Dr.set(ue,nt)},oi=(ue,ye)=>ye in ue,to=(ue,ye)=>(0,console.error)(ue,ye),Vi=new Map,So=(ue,ye,nt)=>{const xt=ue.$tagName$.replace(/-/g,"_"),Le=ue.$lazyBundleId$,dt=Vi.get(Le);return dt?dt[xt]:Ie(863)(`./${Le}.entry.js`).then(Rt=>(Vi.set(Le,Rt),Rt[xt]),to)},so=new Map,Ns=[],Lo=typeof window<"u"?window:{},no=Lo.document||{head:{}},li={$flags$:0,$resourcesUrl$:"",jmp:ue=>ue(),raf:ue=>requestAnimationFrame(ue),ael:(ue,ye,nt,xt)=>ue.addEventListener(ye,nt,xt),rel:(ue,ye,nt,xt)=>ue.removeEventListener(ye,nt,xt),ce:(ue,ye)=>new CustomEvent(ue,ye)},Mn=ue=>{Object.assign(li,ue)},gl=!0,bs=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Mo=[],El=[],Ze=(ue,ye)=>nt=>{ue.push(nt),Wt||(Wt=!0,ye&&4&li.$flags$?rt(yt):li.raf(yt))},$t=ue=>{for(let ye=0;ye<ue.length;ye++)try{ue[ye](performance.now())}catch(nt){to(nt)}ue.length=0},yt=()=>{$t(Mo),$t(El),(Wt=Mo.length>0)&&li.raf(yt)},rt=ue=>Promise.resolve(void 0).then(ue),Tt=Ze(Mo,!1),Nt=Ze(El,!0)},3389:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{m:()=>et});var de=Ie(5861),Fe=Ie(6710),tt=Ie(2124),g=Ie(839),me=Ie(3395),Be=Ie(5062);const Ne=He=>(0,Be.c)().duration(He?400:300),We=He=>{let Bt,ce;const Ce=He.width+8,te=(0,Be.c)(),Q=(0,Be.c)();He.isEndSide?(Bt=Ce+"px",ce="0px"):(Bt=-Ce+"px",ce="0px"),te.addElement(He.menuInnerEl).fromTo("transform",`translateX(${Bt})`,`translateX(${ce})`);const Re="ios"===(0,me.b)(He),ie=Re?.2:.25;return Q.addElement(He.backdropEl).fromTo("opacity",.01,ie),Ne(Re).addAnimation([te,Q])},ht=He=>{let Bt,ce;const Ce=(0,me.b)(He),te=He.width;He.isEndSide?(Bt=-te+"px",ce=te+"px"):(Bt=te+"px",ce=-te+"px");const Q=(0,Be.c)().addElement(He.menuInnerEl).fromTo("transform",`translateX(${ce})`,"translateX(0px)"),ne=(0,Be.c)().addElement(He.contentEl).fromTo("transform","translateX(0px)",`translateX(${Bt})`),Re=(0,Be.c)().addElement(He.backdropEl).fromTo("opacity",.01,.32);return Ne("ios"===Ce).addAnimation([Q,ne,Re])},Wt=He=>{const Bt=(0,me.b)(He),ce=He.width*(He.isEndSide?-1:1)+"px",Ce=(0,Be.c)().addElement(He.contentEl).fromTo("transform","translateX(0px)",`translateX(${ce})`);return Ne("ios"===Bt).addAnimation(Ce)},et=(()=>{const He=new Map,Bt=[],ce=function(){var le=(0,de.Z)(function*(Qe){const lt=yield J(Qe,!0);return!!lt&&lt.open()});return function(lt){return le.apply(this,arguments)}}(),Ce=function(){var le=(0,de.Z)(function*(Qe){const lt=yield void 0!==Qe?J(Qe,!0):xe();return void 0!==lt&&lt.close()});return function(lt){return le.apply(this,arguments)}}(),te=function(){var le=(0,de.Z)(function*(Qe){const lt=yield J(Qe,!0);return!!lt&&lt.toggle()});return function(lt){return le.apply(this,arguments)}}(),Q=function(){var le=(0,de.Z)(function*(Qe,lt){const dn=yield J(lt);return dn&&(dn.disabled=!Qe),dn});return function(lt,dn){return le.apply(this,arguments)}}(),ne=function(){var le=(0,de.Z)(function*(Qe,lt){const dn=yield J(lt);return dn&&(dn.swipeGesture=Qe),dn});return function(lt,dn){return le.apply(this,arguments)}}(),Re=function(){var le=(0,de.Z)(function*(Qe){if(null!=Qe){const lt=yield J(Qe);return void 0!==lt&&lt.isOpen()}return void 0!==(yield xe())});return function(lt){return le.apply(this,arguments)}}(),ie=function(){var le=(0,de.Z)(function*(Qe){const lt=yield J(Qe);return!!lt&&!lt.disabled});return function(lt){return le.apply(this,arguments)}}(),J=function(){var le=(0,de.Z)(function*(Qe,lt=!1){if(yield Ue(),"start"===Qe||"end"===Qe){const Xt=Bt.filter(Pn=>Pn.side===Qe&&!Pn.disabled);if(Xt.length>=1)return Xt.length>1&&lt&&(0,Fe.p)(`menuController queried for a menu on the "${Qe}" side, but ${Xt.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Xt.map(Pn=>Pn.el)),Xt[0].el;const _n=Bt.filter(Pn=>Pn.side===Qe);if(_n.length>=1)return _n.length>1&&lt&&(0,Fe.p)(`menuController queried for a menu on the "${Qe}" side, but ${_n.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,_n.map(Pn=>Pn.el)),_n[0].el}else if(null!=Qe)return Je(Xt=>Xt.menuId===Qe);return Je(Xt=>!Xt.disabled)||(Bt.length>0?Bt[0].el:void 0)});return function(lt){return le.apply(this,arguments)}}(),xe=function(){var le=(0,de.Z)(function*(){return yield Ue(),K()});return function(){return le.apply(this,arguments)}}(),ee=function(){var le=(0,de.Z)(function*(){return yield Ue(),qe()});return function(){return le.apply(this,arguments)}}(),pe=function(){var le=(0,de.Z)(function*(){return yield Ue(),Me()});return function(){return le.apply(this,arguments)}}(),ae=(le,Qe)=>{He.set(le,Qe)},je=function(){var le=(0,de.Z)(function*(Qe,lt,dn){if(Me())return!1;if(lt){const Xt=yield xe();Xt&&Qe.el!==Xt&&(yield Xt.setOpen(!1,!1))}return Qe._setOpen(lt,dn)});return function(lt,dn,Xt){return le.apply(this,arguments)}}(),K=()=>Je(le=>le._isOpen),qe=()=>Bt.map(le=>le.el),Me=()=>Bt.some(le=>le.isAnimating),Je=le=>{const Qe=Bt.find(le);if(void 0!==Qe)return Qe.el},Ue=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(le=>new Promise(Qe=>(0,g.c)(le,Qe))));return ae("reveal",Wt),ae("push",ht),ae("overlay",We),typeof document<"u"&&document.addEventListener("ionBackButton",le=>{const Qe=K();Qe&&le.detail.register(tt.MENU_BACK_BUTTON_PRIORITY,()=>Qe.close())}),{registerAnimation:ae,get:J,getMenus:ee,getOpen:xe,isEnabled:ie,swipeGesture:ne,isAnimating:pe,isOpen:Re,enable:Q,toggle:te,close:Ce,open:ce,_getOpenSync:K,_createAnimation:(le,Qe)=>{const lt=He.get(le);if(!lt)throw new Error("animation not registered");return lt(Qe)},_register:le=>{Bt.indexOf(le)<0&&Bt.push(le)},_unregister:le=>{const Qe=Bt.indexOf(le);Qe>-1&&Bt.splice(Qe,1)},_setOpen:je}})()},9203:(An,Lt,Ie)=>{"use strict";Ie.r(Lt),Ie.d(Lt,{GESTURE_CONTROLLER:()=>de.G,createGesture:()=>ht});var de=Ie(619);const Fe=(He,Bt,ce,Ce)=>{const te=tt(He)?{capture:!!Ce.capture,passive:!!Ce.passive}:!!Ce.capture;let Q,ne;return He.__zone_symbol__addEventListener?(Q="__zone_symbol__addEventListener",ne="__zone_symbol__removeEventListener"):(Q="addEventListener",ne="removeEventListener"),He[Q](Bt,ce,te),()=>{He[ne](Bt,ce,te)}},tt=He=>{if(void 0===g)try{const Bt=Object.defineProperty({},"passive",{get:()=>{g=!0}});He.addEventListener("optsTest",()=>{},Bt)}catch{g=!1}return!!g};let g;const Ne=He=>He instanceof Document?He:He.ownerDocument,ht=He=>{let Bt=!1,ce=!1,Ce=!0,te=!1;const Q=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},He),ne=Q.canStart,Re=Q.onWillStart,ie=Q.onStart,J=Q.onEnd,xe=Q.notCaptured,ee=Q.onMove,pe=Q.threshold,ae=Q.passive,we=Q.blurOnStart,oe={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},je=((He,Bt,ce)=>{const Ce=ce*(Math.PI/180),te="x"===He,Q=Math.cos(Ce),ne=Bt*Bt;let Re=0,ie=0,J=!1,xe=0;return{start(ee,pe){Re=ee,ie=pe,xe=0,J=!0},detect(ee,pe){if(!J)return!1;const ae=ee-Re,we=pe-ie,oe=ae*ae+we*we;if(oe<ne)return!1;const je=Math.sqrt(oe),Te=(te?ae:we)/je;return xe=Te>Q?1:Te<-Q?-1:0,J=!1,!0},isGesture:()=>0!==xe,getDirection:()=>xe}})(Q.direction,Q.threshold,Q.maxAngle),Te=de.G.createGesture({name:He.gestureName,priority:He.gesturePriority,disableScroll:He.disableScroll}),Me=()=>{Bt&&(te=!1,ee&&ee(oe))},Je=()=>!!Te.capture()&&(Bt=!0,Ce=!1,oe.startX=oe.currentX,oe.startY=oe.currentY,oe.startTime=oe.currentTime,Re?Re(oe).then(le):le(),!0),le=()=>{we&&(()=>{if(typeof document<"u"){const _n=document.activeElement;_n?.blur&&_n.blur()}})(),ie&&ie(oe),Ce=!0},Qe=()=>{Bt=!1,ce=!1,te=!1,Ce=!0,Te.release()},lt=_n=>{const Pn=Bt,Qn=Ce;if(Qe(),Qn){if(Wt(oe,_n),Pn)return void(J&&J(oe));xe&&xe(oe)}},dn=((He,Bt,ce,Ce,te)=>{let Q,ne,Re,ie,J,xe,ee,pe=0;const ae=Ue=>{pe=Date.now()+2e3,Bt(Ue)&&(!ne&&ce&&(ne=Fe(He,"touchmove",ce,te)),Re||(Re=Fe(Ue.target,"touchend",oe,te)),ie||(ie=Fe(Ue.target,"touchcancel",oe,te)))},we=Ue=>{pe>Date.now()||Bt(Ue)&&(!xe&&ce&&(xe=Fe(Ne(He),"mousemove",ce,te)),ee||(ee=Fe(Ne(He),"mouseup",je,te)))},oe=Ue=>{Te(),Ce&&Ce(Ue)},je=Ue=>{K(),Ce&&Ce(Ue)},Te=()=>{ne&&ne(),Re&&Re(),ie&&ie(),ne=Re=ie=void 0},K=()=>{xe&&xe(),ee&&ee(),xe=ee=void 0},qe=()=>{Te(),K()},Me=(Ue=!0)=>{Ue?(Q||(Q=Fe(He,"touchstart",ae,te)),J||(J=Fe(He,"mousedown",we,te))):(Q&&Q(),J&&J(),Q=J=void 0,qe())};return{enable:Me,stop:qe,destroy:()=>{Me(!1),Ce=ce=Bt=void 0}}})(Q.el,_n=>{const Pn=et(_n);return!(ce||!Ce||(Xe(_n,oe),oe.startX=oe.currentX,oe.startY=oe.currentY,oe.startTime=oe.currentTime=Pn,oe.velocityX=oe.velocityY=oe.deltaX=oe.deltaY=0,oe.event=_n,ne&&!1===ne(oe))||(Te.release(),!Te.start()))&&(ce=!0,0===pe?Je():(je.start(oe.startX,oe.startY),!0))},_n=>{Bt?!te&&Ce&&(te=!0,Wt(oe,_n),requestAnimationFrame(Me)):(Wt(oe,_n),je.detect(oe.currentX,oe.currentY)&&(!je.isGesture()||!Je())&&Xt())},lt,{capture:!1,passive:ae}),Xt=()=>{Qe(),dn.stop(),xe&&xe(oe)};return{enable(_n=!0){_n||(Bt&&lt(void 0),Qe()),dn.enable(_n)},destroy(){Te.destroy(),dn.destroy()}}},Wt=(He,Bt)=>{if(!Bt)return;const ce=He.currentX,Ce=He.currentY,te=He.currentTime;Xe(Bt,He);const Q=He.currentX,ne=He.currentY,ie=(He.currentTime=et(Bt))-te;if(ie>0&&ie<100){const xe=(ne-Ce)/ie;He.velocityX=(Q-ce)/ie*.7+.3*He.velocityX,He.velocityY=.7*xe+.3*He.velocityY}He.deltaX=Q-He.startX,He.deltaY=ne-He.startY,He.event=Bt},Xe=(He,Bt)=>{let ce=0,Ce=0;if(He){const te=He.changedTouches;if(te&&te.length>0){const Q=te[0];ce=Q.clientX,Ce=Q.clientY}else void 0!==He.pageX&&(ce=He.pageX,Ce=He.pageY)}Bt.currentX=ce,Bt.currentY=Ce},et=He=>He.timeStamp||Date.now()},3395:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{a:()=>Xe,b:()=>Me,c:()=>tt,i:()=>Je});var de=Ie(8411);class Fe{constructor(){this.m=new Map}reset(le){this.m=new Map(Object.entries(le))}get(le,Qe){const lt=this.m.get(le);return void 0!==lt?lt:Qe}getBoolean(le,Qe=!1){const lt=this.m.get(le);return void 0===lt?Qe:"string"==typeof lt?"true"===lt:!!lt}getNumber(le,Qe){const lt=parseFloat(this.m.get(le));return isNaN(lt)?void 0!==Qe?Qe:NaN:lt}set(le,Qe){this.m.set(le,Qe)}}const tt=new Fe,ht="ionic-persist-config",Xe=(Ue,le)=>("string"==typeof Ue&&(le=Ue,Ue=void 0),(Ue=>et(Ue))(Ue).includes(le)),et=(Ue=window)=>{if(typeof Ue>"u")return[];Ue.Ionic=Ue.Ionic||{};let le=Ue.Ionic.platforms;return null==le&&(le=Ue.Ionic.platforms=He(Ue),le.forEach(Qe=>Ue.document.documentElement.classList.add(`plt-${Qe}`))),le},He=Ue=>{const le=tt.get("platform");return Object.keys(K).filter(Qe=>{const lt=le?.[Qe];return"function"==typeof lt?lt(Ue):K[Qe](Ue)})},ce=Ue=>!!(je(Ue,/iPad/i)||je(Ue,/Macintosh/i)&&J(Ue)),Q=Ue=>je(Ue,/android|sink/i),J=Ue=>Te(Ue,"(any-pointer:coarse)"),ee=Ue=>pe(Ue)||ae(Ue),pe=Ue=>!!(Ue.cordova||Ue.phonegap||Ue.PhoneGap),ae=Ue=>{const le=Ue.Capacitor;return!!le?.isNative},je=(Ue,le)=>le.test(Ue.navigator.userAgent),Te=(Ue,le)=>{var Qe;return null===(Qe=Ue.matchMedia)||void 0===Qe?void 0:Qe.call(Ue,le).matches},K={ipad:ce,iphone:Ue=>je(Ue,/iPhone/i),ios:Ue=>je(Ue,/iPhone|iPod/i)||ce(Ue),android:Q,phablet:Ue=>{const le=Ue.innerWidth,Qe=Ue.innerHeight,lt=Math.min(le,Qe),dn=Math.max(le,Qe);return lt>390&&lt<520&&dn>620&&dn<800},tablet:Ue=>{const le=Ue.innerWidth,Qe=Ue.innerHeight,lt=Math.min(le,Qe),dn=Math.max(le,Qe);return ce(Ue)||(Ue=>Q(Ue)&&!je(Ue,/mobile/i))(Ue)||lt>460&&lt<820&&dn>780&&dn<1400},cordova:pe,capacitor:ae,electron:Ue=>je(Ue,/electron/i),pwa:Ue=>{var le;return!!(null!==(le=Ue.matchMedia)&&void 0!==le&&le.call(Ue,"(display-mode: standalone)").matches||Ue.navigator.standalone)},mobile:J,mobileweb:Ue=>J(Ue)&&!ee(Ue),desktop:Ue=>!J(Ue),hybrid:ee};let qe;const Me=Ue=>Ue&&(0,de.g)(Ue)||qe,Je=(Ue={})=>{if(typeof window>"u")return;const le=window.document,Qe=window,lt=Qe.Ionic=Qe.Ionic||{},dn={};Ue._ael&&(dn.ael=Ue._ael),Ue._rel&&(dn.rel=Ue._rel),Ue._ce&&(dn.ce=Ue._ce),(0,de.a)(dn);const Xt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ue=>{try{const le=Ue.sessionStorage.getItem(ht);return null!==le?JSON.parse(le):{}}catch{return{}}})(Qe)),{persistConfig:!1}),lt.config),(Ue=>{const le={};return Ue.location.search.slice(1).split("&").map(Qe=>Qe.split("=")).map(([Qe,lt])=>[decodeURIComponent(Qe),decodeURIComponent(lt)]).filter(([Qe])=>((Ue,le)=>Ue.substr(0,le.length)===le)(Qe,"ionic:")).map(([Qe,lt])=>[Qe.slice(6),lt]).forEach(([Qe,lt])=>{le[Qe]=lt}),le})(Qe)),Ue);tt.reset(Xt),tt.getBoolean("persistConfig")&&((Ue,le)=>{try{Ue.sessionStorage.setItem(ht,JSON.stringify(le))}catch{return}})(Qe,Xt),et(Qe),lt.config=tt,lt.mode=qe=tt.get("mode",le.documentElement.getAttribute("mode")||(Xe(Qe,"ios")?"ios":"md")),tt.set("mode",qe),le.documentElement.setAttribute("mode",qe),le.documentElement.classList.add(qe),tt.getBoolean("_testing")&&tt.set("animated",!1);const _n=Qn=>{var jt;return null===(jt=Qn.tagName)||void 0===jt?void 0:jt.startsWith("ION-")},Pn=Qn=>["ios","md"].includes(Qn);(0,de.c)(Qn=>{for(;Qn;){const jt=Qn.mode||Qn.getAttribute("mode");if(jt){if(Pn(jt))return jt;_n(Qn)&&console.warn('Invalid ionic mode: "'+jt+'", expected: "ios" or "md"')}Qn=Qn.parentElement}return qe})}},2510:(An,Lt,Ie)=>{"use strict";Ie.r(Lt),Ie.d(Lt,{iosTransitionAnimation:()=>He,shadow:()=>Ne});var de=Ie(5062),Fe=Ie(6323);Ie(6225),Ie(8411);const Be=ce=>document.querySelector(`${ce}.ion-cloned-element`),Ne=ce=>ce.shadowRoot||ce,We=ce=>{const Ce="ION-TABS"===ce.tagName?ce:ce.querySelector("ion-tabs"),te="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ce){const Q=Ce.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Q?Q.querySelector(te):null}return ce.querySelector(te)},ht=(ce,Ce)=>{const te="ION-TABS"===ce.tagName?ce:ce.querySelector("ion-tabs");let Q=[];if(null!=te){const ne=te.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ne&&(Q=ne.querySelectorAll("ion-buttons"))}else Q=ce.querySelectorAll("ion-buttons");for(const ne of Q){const Re=ne.closest("ion-header"),ie=Re&&!Re.classList.contains("header-collapse-condense-inactive"),J=ne.querySelector("ion-back-button"),xe=ne.classList.contains("buttons-collapse");if(null!==J&&("start"===ne.slot||""===ne.slot)&&(xe&&ie&&Ce||!xe))return J}return null},Xe=(ce,Ce,te,Q,ne,Re,ie,J,xe)=>{var ee,pe;const ae=Ce?`calc(100% - ${ne.right+4}px)`:ne.left-4+"px",we=Ce?"right":"left",oe=Ce?"left":"right",je=Ce?"right":"left",Te=(null===(ee=Re.textContent)||void 0===ee?void 0:ee.trim())===(null===(pe=J.textContent)||void 0===pe?void 0:pe.trim()),qe=(xe.height-Bt)/ie.height,Me=Te?`scale(${xe.width/ie.width}, ${qe})`:`scale(${qe})`,Je="scale(1)",le=Ne(Q).querySelector("ion-icon").getBoundingClientRect(),Qe=Ce?le.width/2-(le.right-ne.right)+"px":ne.left-le.width/2+"px",lt=Ce?`-${window.innerWidth-ne.right}px`:`${ne.left}px`,dn=`${xe.top}px`,Xt=`${ne.top}px`,Qn=te?[{offset:0,transform:`translate3d(${lt}, ${Xt}, 0)`},{offset:1,transform:`translate3d(${Qe}, ${dn}, 0)`}]:[{offset:0,transform:`translate3d(${Qe}, ${dn}, 0)`},{offset:1,transform:`translate3d(${lt}, ${Xt}, 0)`}],Tn=te?[{offset:0,opacity:1,transform:Je},{offset:1,opacity:0,transform:Me}]:[{offset:0,opacity:0,transform:Me},{offset:1,opacity:1,transform:Je}],Ft=te?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Cn=(0,de.c)(),jn=(0,de.c)(),Pt=(0,de.c)(),Pe=Be("ion-back-button"),Ae=Ne(Pe).querySelector(".button-text"),Se=Ne(Pe).querySelector("ion-icon");Pe.text=Q.text,Pe.mode=Q.mode,Pe.icon=Q.icon,Pe.color=Q.color,Pe.disabled=Q.disabled,Pe.style.setProperty("display","block"),Pe.style.setProperty("position","fixed"),jn.addElement(Se),Cn.addElement(Ae),Pt.addElement(Pe),Pt.beforeStyles({position:"absolute",top:"0px",[je]:"0px"}).keyframes(Qn),Cn.beforeStyles({"transform-origin":`${we} top`}).beforeAddWrite(()=>{Q.style.setProperty("display","none"),Pe.style.setProperty(we,ae)}).afterAddWrite(()=>{Q.style.setProperty("display",""),Pe.style.setProperty("display","none"),Pe.style.removeProperty(we)}).keyframes(Tn),jn.beforeStyles({"transform-origin":`${oe} center`}).keyframes(Ft),ce.addAnimation([Cn,jn,Pt])},et=(ce,Ce,te,Q,ne,Re,ie,J)=>{var xe,ee;const pe=Ce?"right":"left",ae=Ce?`calc(100% - ${ne.right}px)`:`${ne.left}px`,oe=`${ne.top}px`,Te=Ce?`-${window.innerWidth-J.right-8}px`:J.x-8+"px",qe=J.y-2+"px",Me=(null===(xe=ie.textContent)||void 0===xe?void 0:xe.trim())===(null===(ee=Q.textContent)||void 0===ee?void 0:ee.trim()),Ue=J.height/(Re.height-Bt),le="scale(1)",Qe=Me?`scale(${J.width/Re.width}, ${Ue})`:`scale(${Ue})`,Xt=te?[{offset:0,opacity:0,transform:`translate3d(${Te}, ${qe}, 0) ${Qe}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${oe}, 0) ${le}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${oe}, 0) ${le}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Te}, ${qe}, 0) ${Qe}`}],_n=Be("ion-title"),Pn=(0,de.c)();_n.innerText=Q.innerText,_n.size=Q.size,_n.color=Q.color,Pn.addElement(_n),Pn.beforeStyles({"transform-origin":`${pe} top`,height:`${ne.height}px`,display:"",position:"relative",[pe]:ae}).beforeAddWrite(()=>{Q.style.setProperty("opacity","0")}).afterAddWrite(()=>{Q.style.setProperty("opacity",""),_n.style.setProperty("display","none")}).keyframes(Xt),ce.addAnimation(Pn)},He=(ce,Ce)=>{var te;try{const Q="cubic-bezier(0.32,0.72,0,1)",ne="opacity",Re="transform",ie="0%",xe="rtl"===ce.ownerDocument.dir,ee=xe?"-99.5%":"99.5%",pe=xe?"33%":"-33%",ae=Ce.enteringEl,we=Ce.leavingEl,oe="back"===Ce.direction,je=ae.querySelector(":scope > ion-content"),Te=ae.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),K=ae.querySelectorAll(":scope > ion-header > ion-toolbar"),qe=(0,de.c)(),Me=(0,de.c)();if(qe.addElement(ae).duration((null!==(te=Ce.duration)&&void 0!==te?te:0)||540).easing(Ce.easing||Q).fill("both").beforeRemoveClass("ion-page-invisible"),we&&null!=ce){const Qe=(0,de.c)();Qe.addElement(ce),qe.addAnimation(Qe)}if(je||0!==K.length||0!==Te.length?(Me.addElement(je),Me.addElement(Te)):Me.addElement(ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),qe.addAnimation(Me),oe?Me.beforeClearStyles([ne]).fromTo("transform",`translateX(${pe})`,`translateX(${ie})`).fromTo(ne,.8,1):Me.beforeClearStyles([ne]).fromTo("transform",`translateX(${ee})`,`translateX(${ie})`),je){const Qe=Ne(je).querySelector(".transition-effect");if(Qe){const lt=Qe.querySelector(".transition-cover"),dn=Qe.querySelector(".transition-shadow"),Xt=(0,de.c)(),_n=(0,de.c)(),Pn=(0,de.c)();Xt.addElement(Qe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),_n.addElement(lt).beforeClearStyles([ne]).fromTo(ne,0,.1),Pn.addElement(dn).beforeClearStyles([ne]).fromTo(ne,.03,.7),Xt.addAnimation([_n,Pn]),Me.addAnimation([Xt])}}const Je=ae.querySelector("ion-header.header-collapse-condense"),{forward:Ue,backward:le}=((ce,Ce,te,Q,ne)=>{const Re=ht(Q,te),ie=We(ne),J=We(Q),xe=ht(ne,te),ee=null!==Re&&null!==ie&&!te,pe=null!==J&&null!==xe&&te;if(ee){const ae=ie.getBoundingClientRect(),we=Re.getBoundingClientRect(),oe=Ne(Re).querySelector(".button-text"),je=oe.getBoundingClientRect(),K=Ne(ie).querySelector(".toolbar-title").getBoundingClientRect();et(ce,Ce,te,ie,ae,K,oe,je),Xe(ce,Ce,te,Re,we,oe,je,ie,K)}else if(pe){const ae=J.getBoundingClientRect(),we=xe.getBoundingClientRect(),oe=Ne(xe).querySelector(".button-text"),je=oe.getBoundingClientRect(),K=Ne(J).querySelector(".toolbar-title").getBoundingClientRect();et(ce,Ce,te,J,ae,K,oe,je),Xe(ce,Ce,te,xe,we,oe,je,J,K)}return{forward:ee,backward:pe}})(qe,xe,oe,ae,we);if(K.forEach(Qe=>{const lt=(0,de.c)();lt.addElement(Qe),qe.addAnimation(lt);const dn=(0,de.c)();dn.addElement(Qe.querySelector("ion-title"));const Xt=(0,de.c)(),_n=Array.from(Qe.querySelectorAll("ion-buttons,[menuToggle]")),Pn=Qe.closest("ion-header"),Qn=Pn?.classList.contains("header-collapse-condense-inactive");let jt;jt=_n.filter(oe?Ft=>{const Cn=Ft.classList.contains("buttons-collapse");return Cn&&!Qn||!Cn}:Ft=>!Ft.classList.contains("buttons-collapse")),Xt.addElement(jt);const mr=(0,de.c)();mr.addElement(Qe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Tn=(0,de.c)();Tn.addElement(Ne(Qe).querySelector(".toolbar-background"));const Vn=(0,de.c)(),un=Qe.querySelector("ion-back-button");if(un&&Vn.addElement(un),lt.addAnimation([dn,Xt,mr,Tn,Vn]),Xt.fromTo(ne,.01,1),mr.fromTo(ne,.01,1),oe)Qn||dn.fromTo("transform",`translateX(${pe})`,`translateX(${ie})`).fromTo(ne,.01,1),mr.fromTo("transform",`translateX(${pe})`,`translateX(${ie})`),Vn.fromTo(ne,.01,1);else if(Je||dn.fromTo("transform",`translateX(${ee})`,`translateX(${ie})`).fromTo(ne,.01,1),mr.fromTo("transform",`translateX(${ee})`,`translateX(${ie})`),Tn.beforeClearStyles([ne,"transform"]),Pn?.translucent?Tn.fromTo("transform",xe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Tn.fromTo(ne,.01,"var(--opacity)"),Ue||Vn.fromTo(ne,.01,1),un&&!Ue){const Cn=(0,de.c)();Cn.addElement(Ne(un).querySelector(".button-text")).fromTo("transform",xe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),lt.addAnimation(Cn)}}),we){const Qe=(0,de.c)(),lt=we.querySelector(":scope > ion-content"),dn=we.querySelectorAll(":scope > ion-header > ion-toolbar"),Xt=we.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(lt||0!==dn.length||0!==Xt.length?(Qe.addElement(lt),Qe.addElement(Xt)):Qe.addElement(we.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),qe.addAnimation(Qe),oe){Qe.beforeClearStyles([ne]).fromTo("transform",`translateX(${ie})`,xe?"translateX(-100%)":"translateX(100%)");const _n=(0,Fe.g)(we);qe.afterAddWrite(()=>{"normal"===qe.getDirection()&&_n.style.setProperty("display","none")})}else Qe.fromTo("transform",`translateX(${ie})`,`translateX(${pe})`).fromTo(ne,1,.8);if(lt){const _n=Ne(lt).querySelector(".transition-effect");if(_n){const Pn=_n.querySelector(".transition-cover"),Qn=_n.querySelector(".transition-shadow"),jt=(0,de.c)(),mr=(0,de.c)(),Tn=(0,de.c)();jt.addElement(_n).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),mr.addElement(Pn).beforeClearStyles([ne]).fromTo(ne,.1,0),Tn.addElement(Qn).beforeClearStyles([ne]).fromTo(ne,.7,.03),jt.addAnimation([mr,Tn]),Qe.addAnimation([jt])}}dn.forEach(_n=>{const Pn=(0,de.c)();Pn.addElement(_n);const Qn=(0,de.c)();Qn.addElement(_n.querySelector("ion-title"));const jt=(0,de.c)(),mr=_n.querySelectorAll("ion-buttons,[menuToggle]"),Tn=_n.closest("ion-header"),Vn=Tn?.classList.contains("header-collapse-condense-inactive"),un=Array.from(mr).filter(Ae=>{const Se=Ae.classList.contains("buttons-collapse");return Se&&!Vn||!Se});jt.addElement(un);const Ft=(0,de.c)(),Cn=_n.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Cn.length>0&&Ft.addElement(Cn);const jn=(0,de.c)();jn.addElement(Ne(_n).querySelector(".toolbar-background"));const Pt=(0,de.c)(),Pe=_n.querySelector("ion-back-button");if(Pe&&Pt.addElement(Pe),Pn.addAnimation([Qn,jt,Ft,Pt,jn]),qe.addAnimation(Pn),Pt.fromTo(ne,.99,0),jt.fromTo(ne,.99,0),Ft.fromTo(ne,.99,0),oe){if(Vn||Qn.fromTo("transform",`translateX(${ie})`,xe?"translateX(-100%)":"translateX(100%)").fromTo(ne,.99,0),Ft.fromTo("transform",`translateX(${ie})`,xe?"translateX(-100%)":"translateX(100%)"),jn.beforeClearStyles([ne,"transform"]),Tn?.translucent?jn.fromTo("transform","translateX(0px)",xe?"translateX(-100%)":"translateX(100%)"):jn.fromTo(ne,"var(--opacity)",0),Pe&&!le){const Se=(0,de.c)();Se.addElement(Ne(Pe).querySelector(".button-text")).fromTo("transform",`translateX(${ie})`,`translateX(${(xe?-124:124)+"px"})`),Pn.addAnimation(Se)}}else Vn||Qn.fromTo("transform",`translateX(${ie})`,`translateX(${pe})`).fromTo(ne,.99,0).afterClearStyles([Re,ne]),Ft.fromTo("transform",`translateX(${ie})`,`translateX(${pe})`).afterClearStyles([Re,ne]),Pt.afterClearStyles([ne]),Qn.afterClearStyles([ne]),jt.afterClearStyles([ne])})}return qe}catch(Q){throw Q}},Bt=10},6003:(An,Lt,Ie)=>{"use strict";Ie.r(Lt),Ie.d(Lt,{mdTransitionAnimation:()=>me});var de=Ie(5062),Fe=Ie(6323);Ie(6225),Ie(8411);const me=(Be,Ne)=>{var We,ht,Wt;const He="back"===Ne.direction,ce=Ne.leavingEl,Ce=(0,Fe.g)(Ne.enteringEl),te=Ce.querySelector("ion-toolbar"),Q=(0,de.c)();if(Q.addElement(Ce).fill("both").beforeRemoveClass("ion-page-invisible"),He?Q.duration((null!==(We=Ne.duration)&&void 0!==We?We:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Q.duration((null!==(ht=Ne.duration)&&void 0!==ht?ht:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),te){const ne=(0,de.c)();ne.addElement(te),Q.addAnimation(ne)}if(ce&&He){Q.duration((null!==(Wt=Ne.duration)&&void 0!==Wt?Wt:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ne=(0,de.c)();ne.addElement((0,Fe.g)(ce)).onFinish(Re=>{1===Re&&ne.elements.length>0&&ne.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Q.addAnimation(ne)}return Q}},3645:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{B:()=>Qn,G:()=>jt,a:()=>et,b:()=>He,c:()=>te,d:()=>mr,e:()=>Tn,f:()=>Me,g:()=>Ue,h:()=>lt,i:()=>Xt,j:()=>ne,k:()=>Re,n:()=>Wt,o:()=>xe,q:()=>K,s:()=>Pn});var de=Ie(5861),Fe=Ie(6225),tt=Ie(3395),g=Ie(6559),me=Ie(2124),Be=Ie(839),Ne=Ie(6710);let We=0,ht=0;const Wt=new WeakMap,Xe=Vn=>({create:un=>ie(Vn,un),dismiss:(un,Ft,Cn)=>oe(document,un,Ft,Vn,Cn),getTop:()=>(0,de.Z)(function*(){return K(document,Vn)})()}),et=Xe("ion-alert"),He=Xe("ion-action-sheet"),te=Xe("ion-popover"),ne=Vn=>{typeof document<"u"&&we(document);const un=We++;Vn.overlayIndex=un},Re=Vn=>(Vn.hasAttribute("id")||(Vn.id="ion-overlay-"+ ++ht),Vn.id),ie=(Vn,un)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Vn).then(()=>{const Ft=document.createElement(Vn);return Ft.classList.add("overlay-hidden"),Object.assign(Ft,Object.assign(Object.assign({},un),{hasController:!0})),le(document).appendChild(Ft),new Promise(Cn=>(0,Be.c)(Ft,Cn))}):Promise.resolve(),J='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',xe=(Vn,un)=>{let Ft=Vn.querySelector(J);const Cn=Ft?.shadowRoot;Cn&&(Ft=Cn.querySelector(J)||Ft),Ft?(0,Be.f)(Ft):un.focus()},pe=(Vn,un)=>{const Ft=Array.from(Vn.querySelectorAll(J));let Cn=Ft.length>0?Ft[Ft.length-1]:null;const jn=Cn?.shadowRoot;jn&&(Cn=jn.querySelector(J)||Cn),Cn?Cn.focus():un.focus()},we=Vn=>{0===We&&(We=1,Vn.addEventListener("focus",un=>{((Vn,un)=>{const Ft=K(un,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Cn=Vn.target;Ft&&Cn&&!Ft.classList.contains("ion-disable-focus-trap")&&(Ft.shadowRoot?(()=>{if(Ft.contains(Cn))Ft.lastFocus=Cn;else{const Pe=Ft.lastFocus;xe(Ft,Ft),Pe===un.activeElement&&pe(Ft,Ft),Ft.lastFocus=un.activeElement}})():(()=>{if(Ft===Cn)Ft.lastFocus=void 0;else{const Pe=(0,Be.g)(Ft);if(!Pe.contains(Cn))return;const Ae=Pe.querySelector(".ion-overlay-wrapper");if(!Ae)return;if(Ae.contains(Cn)||Cn===Pe.querySelector("ion-backdrop"))Ft.lastFocus=Cn;else{const Se=Ft.lastFocus;xe(Ae,Ft),Se===un.activeElement&&pe(Ae,Ft),Ft.lastFocus=un.activeElement}}})())})(un,Vn)},!0),Vn.addEventListener("ionBackButton",un=>{const Ft=K(Vn);Ft?.backdropDismiss&&un.detail.register(me.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ft.dismiss(void 0,Qn))}),Vn.addEventListener("keydown",un=>{if("Escape"===un.key){const Ft=K(Vn);Ft?.backdropDismiss&&Ft.dismiss(void 0,Qn)}}))},oe=(Vn,un,Ft,Cn,jn)=>{const Pt=K(Vn,Cn,jn);return Pt?Pt.dismiss(un,Ft):Promise.reject("overlay does not exist")},Te=(Vn,un)=>((Vn,un)=>(void 0===un&&(un="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Vn.querySelectorAll(un)).filter(Ft=>Ft.overlayIndex>0)))(Vn,un).filter(Ft=>!(Vn=>Vn.classList.contains("overlay-hidden"))(Ft)),K=(Vn,un,Ft)=>{const Cn=Te(Vn,un);return void 0===Ft?Cn[Cn.length-1]:Cn.find(jn=>jn.id===Ft)},qe=(Vn=!1)=>{const Ft=le(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ft&&(Vn?Ft.setAttribute("aria-hidden","true"):Ft.removeAttribute("aria-hidden"))},Me=function(){var Vn=(0,de.Z)(function*(un,Ft,Cn,jn,Pt){var Pe,Ae;if(un.presented)return;qe(!0),un.presented=!0,un.willPresent.emit(),null===(Pe=un.willPresentShorthand)||void 0===Pe||Pe.emit();const Se=(0,tt.b)(un),ut=un.enterAnimation?un.enterAnimation:tt.c.get(Ft,"ios"===Se?Cn:jn);(yield Qe(un,ut,un.el,Pt))&&(un.didPresent.emit(),null===(Ae=un.didPresentShorthand)||void 0===Ae||Ae.emit()),"ION-TOAST"!==un.el.tagName&&Je(un.el),un.keyboardClose&&(null===document.activeElement||!un.el.contains(document.activeElement))&&un.el.focus()});return function(Ft,Cn,jn,Pt,Pe){return Vn.apply(this,arguments)}}(),Je=function(){var Vn=(0,de.Z)(function*(un){let Ft=document.activeElement;if(!Ft)return;const Cn=Ft?.shadowRoot;Cn&&(Ft=Cn.querySelector(J)||Ft),yield un.onDidDismiss(),Ft.focus()});return function(Ft){return Vn.apply(this,arguments)}}(),Ue=function(){var Vn=(0,de.Z)(function*(un,Ft,Cn,jn,Pt,Pe,Ae){var Se,ut;if(!un.presented)return!1;void 0!==Fe.d&&1===Te(Fe.d).length&&qe(!1),un.presented=!1;try{un.el.style.setProperty("pointer-events","none"),un.willDismiss.emit({data:Ft,role:Cn}),null===(Se=un.willDismissShorthand)||void 0===Se||Se.emit({data:Ft,role:Cn});const kt=(0,tt.b)(un),cn=un.leaveAnimation?un.leaveAnimation:tt.c.get(jn,"ios"===kt?Pt:Pe);Cn!==jt&&(yield Qe(un,cn,un.el,Ae)),un.didDismiss.emit({data:Ft,role:Cn}),null===(ut=un.didDismissShorthand)||void 0===ut||ut.emit({data:Ft,role:Cn}),Wt.delete(un),un.el.classList.add("overlay-hidden"),un.el.style.removeProperty("pointer-events"),void 0!==un.el.lastFocus&&(un.el.lastFocus=void 0)}catch(kt){console.error(kt)}return un.el.remove(),!0});return function(Ft,Cn,jn,Pt,Pe,Ae,Se){return Vn.apply(this,arguments)}}(),le=Vn=>Vn.querySelector("ion-app")||Vn.body,Qe=function(){var Vn=(0,de.Z)(function*(un,Ft,Cn,jn){Cn.classList.remove("overlay-hidden");const Pe=Ft(un.el,jn);(!un.animated||!tt.c.getBoolean("animated",!0))&&Pe.duration(0),un.keyboardClose&&Pe.beforeAddWrite(()=>{const Se=Cn.ownerDocument.activeElement;Se?.matches("input,ion-input, ion-textarea")&&Se.blur()});const Ae=Wt.get(un)||[];return Wt.set(un,[...Ae,Pe]),yield Pe.play(),!0});return function(Ft,Cn,jn,Pt){return Vn.apply(this,arguments)}}(),lt=(Vn,un)=>{let Ft;const Cn=new Promise(jn=>Ft=jn);return dn(Vn,un,jn=>{Ft(jn.detail)}),Cn},dn=(Vn,un,Ft)=>{const Cn=jn=>{(0,Be.b)(Vn,un,Cn),Ft(jn)};(0,Be.a)(Vn,un,Cn)},Xt=Vn=>"cancel"===Vn||Vn===Qn,_n=Vn=>Vn(),Pn=(Vn,un)=>{if("function"==typeof Vn)return tt.c.get("_zoneGate",_n)(()=>{try{return Vn(un)}catch(Cn){throw Cn}})},Qn="backdrop",jt="gesture",mr=Vn=>{let Ft,un=!1;const Cn=(0,g.C)(),jn=(Ae=!1)=>{if(Ft&&!Ae)return{delegate:Ft,inline:un};const{el:Se,hasController:ut,delegate:kt}=Vn;return un=null!==Se.parentNode&&!ut,Ft=un?kt||Cn:kt,{inline:un,delegate:Ft}};return{attachViewToDom:function(){var Ae=(0,de.Z)(function*(Se){const{delegate:ut}=jn(!0);if(ut)return yield ut.attachViewToDom(Vn.el,Se);const{hasController:kt}=Vn;if(kt&&void 0!==Se)throw new Error("framework delegate is missing");return null});return function(ut){return Ae.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Ae}=jn();Ae&&void 0!==Vn.el&&Ae.removeViewFromDom(Vn.el.parentElement,Vn.el)}}},Tn=()=>{let Vn;const un=()=>{Vn&&(Vn(),Vn=void 0)};return{addClickListener:(Cn,jn)=>{un();const Pt=void 0!==jn?document.getElementById(jn):null;Pt?Vn=((Ae,Se)=>{const ut=()=>{Se.present()};return Ae.addEventListener("click",ut),()=>{Ae.removeEventListener("click",ut)}})(Pt,Cn):(0,Ne.p)(`A trigger element with the ID "${jn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Cn)},removeClickListener:un}}},2176:(An,Lt)=>{"use strict";function de(te){return!function Fe(te){return function tt(){return typeof window<"u"&&typeof document<"u"}()?function g(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}()?function me(){return Function.prototype&&Function.prototype.bind}()?function Be(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}()?function Ne(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}()?function We(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,Re,te=new Blob([""],{type:"text/javascript"}),Q=URL.createObjectURL(te);try{Re=new Worker(Q),ne=!0}catch{ne=!1}return Re&&Re.terminate(),URL.revokeObjectURL(Q),ne}()?function ht(){return"Uint8ClampedArray"in window}()?function Wt(){return ArrayBuffer.isView}()?function Xe(){var te=document.createElement("canvas");te.width=te.height=1;var Q=te.getContext("2d");if(!Q)return!1;var ne=Q.getImageData(0,0,1,1);return ne&&ne.width===te.width}()?function He(te){return void 0===et[te]&&(et[te]=function ce(te){var ne,Q=function Bt(te){var Q=document.createElement("canvas"),ne=Object.create(de.webGLContextAttributes);return ne.failIfMajorPerformanceCaveat=te,Q.getContext("webgl",ne)||Q.getContext("experimental-webgl",ne)}(te);if(!Q)return!1;try{ne=Q.createShader(Q.VERTEX_SHADER)}catch{return!1}return!(!ne||Q.isContextLost())&&(Q.shaderSource(ne,"void main() {}"),Q.compileShader(ne),!0===Q.getShaderParameter(ne,Q.COMPILE_STATUS))}(te)),et[te]}(te&&te.failIfMajorPerformanceCaveat)?function Ce(){return!document.documentMode}()?void 0:"insufficient ECMAScript 6 support":"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}(te)}Lt.Z=de;var et={};de.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},9081:(An,Lt,Ie)=>{"use strict";function de(n){return"function"==typeof n}function Fe(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const tt=Fe(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function g(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class me{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(de(r))try{r()}catch(o){e=o instanceof tt?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{We(o)}catch(a){e=e??[],a instanceof tt?e=[...e,...a.errors]:e.push(a)}}if(e)throw new tt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)We(e);else{if(e instanceof me){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&g(t,e)}remove(e){const{_finalizers:t}=this;t&&g(t,e),e instanceof me&&e._removeParent(this)}}me.EMPTY=(()=>{const n=new me;return n.closed=!0,n})();const Be=me.EMPTY;function Ne(n){return n instanceof me||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function We(n){de(n)?n():n.unsubscribe()}const ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Wt={setTimeout(n,e,...t){const{delegate:r}=Wt;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Wt;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xe(n){Wt.setTimeout(()=>{const{onUnhandledError:e}=ht;if(!e)throw n;e(n)})}function et(){}const He=Ce("C",void 0,void 0);function Ce(n,e,t){return{kind:n,value:e,error:t}}let te=null;function Q(n){if(ht.useDeprecatedSynchronousErrorHandling){const e=!te;if(e&&(te={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=te;if(te=null,t)throw r}}else n()}class Re extends me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ne(e)&&e.add(this)):this.destination=oe}static create(e,t,r){return new ee(e,t,r)}next(e){this.isStopped?we(function ce(n){return Ce("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?we(function Bt(n){return Ce("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?we(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ie=Function.prototype.bind;function J(n,e){return ie.call(n,e)}class xe{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pe(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pe(r)}else pe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pe(t)}}}class ee extends Re{constructor(e,t,r){let i;if(super(),de(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ht.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&J(e.next,o),error:e.error&&J(e.error,o),complete:e.complete&&J(e.complete,o)}):i=e}this.destination=new xe(i)}}function pe(n){ht.useDeprecatedSynchronousErrorHandling?function ne(n){ht.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=n)}(n):Xe(n)}function we(n,e){const{onStoppedNotification:t}=ht;t&&Wt.setTimeout(()=>t(n,e))}const oe={closed:!0,next:et,error:function ae(n){throw n},complete:et},je="function"==typeof Symbol&&Symbol.observable||"@@observable";function Te(n){return n}function qe(n){return 0===n.length?Te:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function le(n){return n&&n instanceof Re||function Ue(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}(n)&&Ne(n)}(t)?t:new ee(t,r,i);return Q(()=>{const{operator:a,source:d}=this;o.add(a?a.call(o,d):d?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Je(r))((i,o)=>{const a=new ee({next:d=>{try{t(d)}catch(m){o(m),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[je](){return this}pipe(...t){return qe(t)(this)}toPromise(t){return new(t=Je(t))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function Je(n){var e;return null!==(e=n??ht.Promise)&&void 0!==e?e:Promise}const Qe=Fe(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let lt=(()=>{class n extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new dn(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Qe}next(t){Q(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Q(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Q(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Be:(this.currentObservers=null,o.push(t),new me(()=>{this.currentObservers=null,g(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new Me;return t.source=this,t}}return n.create=(e,t)=>new dn(e,t),n})();class dn extends lt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Be}}function Xt(n){return de(n?.lift)}function _n(n){return e=>{if(Xt(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pn(n,e,t,r,i){return new Qn(n,e,t,r,i)}class Qn extends Re{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(d){try{t(d)}catch(m){e.error(m)}}:super._next,this._error=i?function(d){try{i(d)}catch(m){e.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function jt(n,e){return _n((t,r)=>{let i=0;t.subscribe(Pn(r,o=>{r.next(n.call(e,o,i++))}))})}function Ft(n,e,t,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,r);else for(var d=n.length-1;d>=0;d--)(a=n[d])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function Cr(n){return this instanceof Cr?(this.v=n,this):new Cr(n)}function _i(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Fn(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(d,m){!function i(o,a,d,m){Promise.resolve(m).then(function(_){o({value:_,done:d})},a)}(d,m,(a=n[o](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function hn(n){return de(n?.then)}function qn(n){return de(n[je])}function nr(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function Xn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Si=function bi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ai(n){return de(n?.[Si])}function Kr(n){return function Ei(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(R){r[R]&&(i[R]=function(L){return new Promise(function(G,W){o.push([R,L,G,W])>1||d(R,L)})})}function d(R,L){try{!function m(R){R.value instanceof Cr?Promise.resolve(R.value.v).then(_,C):T(o[0][2],R)}(r[R](L))}catch(G){T(o[0][3],G)}}function _(R){d("next",R)}function C(R){d("throw",R)}function T(R,L){R(L),o.shift(),o.length&&d(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Cr(t.read());if(i)return yield Cr(void 0);yield yield Cr(r)}}finally{t.releaseLock()}})}function Ii(n){return de(n?.getReader)}function Fi(n){if(n instanceof Me)return n;if(null!=n){if(qn(n))return function bt(n){return new Me(e=>{const t=n[je]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Dt(n))return function Ct(n){return new Me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(hn(n))return function on(n){return new Me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xe)})}(n);if(nr(n))return Sn(n);if(ai(n))return function ln(n){return new Me(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ii(n))return function $n(n){return Sn(Kr(n))}(n)}throw Xn(n)}function Sn(n){return new Me(e=>{(function Yn(n,e){var t,r,i,o;return function ut(n,e,t,r){return new(t||(t=Promise))(function(o,a){function d(C){try{_(r.next(C))}catch(T){a(T)}}function m(C){try{_(r.throw(C))}catch(T){a(T)}}function _(C){C.done?o(C.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(C.value).then(d,m)}_((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=_i(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ir(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Bn(n,e,t=1/0){return de(e)?Bn((r,i)=>jt((o,a)=>e(r,o,i,a))(Fi(n(r,i))),t):("number"==typeof e&&(t=e),_n((r,i)=>function Dr(n,e,t,r,i,o,a,d){const m=[];let _=0,C=0,T=!1;const R=()=>{T&&!m.length&&!_&&e.complete()},L=W=>_<r?G(W):m.push(W),G=W=>{o&&e.next(W),_++;let ve=!1;Fi(t(W,C++)).subscribe(Pn(e,_e=>{i?.(_e),o?L(_e):e.next(_e)},()=>{ve=!0},void 0,()=>{if(ve)try{for(_--;m.length&&_<r;){const _e=m.shift();a?ir(e,a,()=>G(_e)):G(_e)}R()}catch(_e){e.error(_e)}}))};return n.subscribe(Pn(e,L,()=>{T=!0,R()})),()=>{d?.()}}(r,i,n,t)))}function yi(n=1/0){return Bn(Te,n)}const Pr=new Me(n=>n.complete());function Vi(n){return n&&de(n.schedule)}function So(n){return n[n.length-1]}function so(n){return de(So(n))?n.pop():void 0}function Ns(n){return Vi(So(n))?n.pop():void 0}function no(n,e=0){return _n((t,r)=>{t.subscribe(Pn(r,i=>ir(r,n,()=>r.next(i),e),()=>ir(r,n,()=>r.complete(),e),i=>ir(r,n,()=>r.error(i),e)))})}function li(n,e=0){return _n((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Mo(n,e){if(!n)throw new Error("Iterable cannot be null");return new Me(t=>{ir(t,e,()=>{const r=n[Symbol.asyncIterator]();ir(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $t(n,e){return e?function Ze(n,e){if(null!=n){if(qn(n))return function Mn(n,e){return Fi(n).pipe(li(e),no(e))}(n,e);if(Dt(n))return function vs(n,e){return new Me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(hn(n))return function gl(n,e){return Fi(n).pipe(li(e),no(e))}(n,e);if(nr(n))return Mo(n,e);if(ai(n))return function bs(n,e){return new Me(t=>{let r;return ir(t,e,()=>{r=n[Si](),ir(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>de(r?.return)&&r.return()})}(n,e);if(Ii(n))return function El(n,e){return Mo(Kr(n),e)}(n,e)}throw Xn(n)}(n,e):Fi(n)}function yt(...n){const e=Ns(n),t=function Lo(n,e){return"number"==typeof So(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Fi(r[0]):yi(t)($t(r,e)):Pr}class rt extends lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Tt(...n){return $t(n,Ns(n))}function Nt(n={}){const{connector:e=(()=>new lt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let a,d,m,_=0,C=!1,T=!1;const R=()=>{d?.unsubscribe(),d=void 0},L=()=>{R(),a=m=void 0,C=T=!1},G=()=>{const W=a;L(),W?.unsubscribe()};return _n((W,ve)=>{_++,!T&&!C&&R();const _e=m=m??e();ve.add(()=>{_--,0===_&&!T&&!C&&(d=ue(G,i))}),_e.subscribe(ve),!a&&_>0&&(a=new ee({next:re=>_e.next(re),error:re=>{T=!0,R(),d=ue(L,t,re),_e.error(re)},complete:()=>{C=!0,R(),d=ue(L,r),_e.complete()}}),Fi(W).subscribe(a))})(o)}}function ue(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ee({next:()=>{r.unsubscribe(),n()}});return Fi(e(...t)).subscribe(r)}function ye(n,e){return _n((t,r)=>{let i=null,o=0,a=!1;const d=()=>a&&!i&&r.complete();t.subscribe(Pn(r,m=>{i?.unsubscribe();let _=0;const C=o++;Fi(n(m,C)).subscribe(i=Pn(r,T=>r.next(e?e(m,T,C,_++):T),()=>{i=null,d()}))},()=>{a=!0,d()}))})}function nt(n,e=Te){return n=n??xt,_n((t,r)=>{let i,o=!0;t.subscribe(Pn(r,a=>{const d=e(a);(o||!n(i,d))&&(o=!1,i=d,r.next(a))}))})}function xt(n,e){return n===e}function Le(n){for(let e in n)if(n[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function dt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function sn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const yn=Le({__forward_ref__:Le});function Et(n){return n.__forward_ref__=Et,n.toString=function(){return Rt(this())},n}function kn(n){return zr(n)?n():n}function zr(n){return"function"==typeof n&&n.hasOwnProperty(yn)&&n.__forward_ref__===Et}function ui(n){return n&&!!n.\u0275providers}const _o="https://g.co/ng/security#xss";class tn extends Error{constructor(e,t){super(function $i(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function jr(n){return"string"==typeof n?n:null==n?"":String(n)}function Ks(n,e){throw new tn(-201,!1)}function Vc(n,e){null==n&&function xi(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function yr(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Io(n){return{providers:n.providers||[],imports:n.imports||[]}}function jc(n){return oc(n,Ol)||oc(n,Ws)}function oc(n,e){return n.hasOwnProperty(e)?n[e]:null}function Iu(n){return n&&(n.hasOwnProperty(uh)||n.hasOwnProperty(ii))?n[uh]:null}const Ol=Le({\u0275prov:Le}),uh=Le({\u0275inj:Le}),Ws=Le({ngInjectableDef:Le}),ii=Le({ngInjectorDef:Le});var ti=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ti||{});let ud;function na(n){const e=ud;return ud=n,e}function Tu(n,e,t){const r=jc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ti.Optional?null:void 0!==e?e:void Ks(Rt(n))}const xs=globalThis,lo={},Ec="__NG_DI_FLAG__",fo="ngTempTokenPath",dd=/\n/gm,Sl="__source";let Ca;function hh(n){const e=Ca;return Ca=n,e}function Du(n,e=ti.Default){if(void 0===Ca)throw new tn(-203,!1);return null===Ca?Tu(n,void 0,e):Ca.get(n,e&ti.Optional?null:void 0,e)}function pn(n,e=ti.Default){return(function _l(){return ud}()||Du)(kn(n),e)}function rr(n,e=ti.Default){return pn(n,Wl(e))}function Wl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cc(n){const e=[];for(let t=0;t<n.length;t++){const r=kn(n[t]);if(Array.isArray(r)){if(0===r.length)throw new tn(900,!1);let i,o=ti.Default;for(let a=0;a<r.length;a++){const d=r[a],m=Sc(d);"number"==typeof m?-1===m?i=d.token:o|=m:i=d}e.push(pn(i,o))}else e.push(pn(r))}return e}function cu(n,e){return n[Ec]=e,n.prototype[Ec]=e,n}function Sc(n){return n[Ec]}function Xl(n){return{toString:n}.toString()}var Ra=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ra||{}),Bs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Bs||{});const Sa={},Po=[],Oa=Le({\u0275cmp:Le}),Ef=Le({\u0275dir:Le}),Vu=Le({\u0275pipe:Le}),fd=Le({\u0275mod:Le}),uu=Le({\u0275fac:Le}),dh=Le({__NG_ELEMENT_ID__:Le}),hu=Le({__NG_ENV_ID__:Le});function Gc(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Ia(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],a=t[r++],d=t[r++];n.setAttribute(e,a,d,o)}else{const o=i,a=t[++r];Qa(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function pd(n){return 3===n||4===n||6===n}function Qa(n){return 64===n.charCodeAt(0)}function Zl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Hc(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Hc(n,e,t,r,i){let o=0,a=n.length;if(-1===e)a=-1;else for(;o<n.length;){const d=n[o++];if("number"==typeof d){if(d===e){a=-1;break}if(d>e){a=o-1;break}}}for(;o<n.length;){const d=n[o];if("number"==typeof d)break;if(d===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const Cf="ng-template";function Uu(n,e,t){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const a=n[r++];if(t&&"class"===o&&-1!==Gc(a.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Mu(n){return 4===n.type&&n.value!==Cf}function sc(n,e,t){return e===(4!==n.type||t?n.value:Cf)}function ll(n,e,t){let r=4;const i=n.attrs||[],o=function zh(n){for(let e=0;e<n.length;e++)if(pd(n[e]))return e;return n.length}(i);let a=!1;for(let d=0;d<e.length;d++){const m=e[d];if("number"!=typeof m){if(!a)if(4&r){if(r=2|1&r,""!==m&&!sc(n,m,t)||""===m&&1===e.length){if(La(r))return!1;a=!0}}else{const _=8&r?m:e[++d];if(8&r&&null!==n.attrs){if(!Uu(n.attrs,_,t)){if(La(r))return!1;a=!0}continue}const T=Il(8&r?"class":m,i,Mu(n),t);if(-1===T){if(La(r))return!1;a=!0;continue}if(""!==_){let R;R=T>o?"":i[T+1].toLowerCase();const L=8&r?R:null;if(L&&-1!==Gc(L,_,0)||2&r&&_!==R){if(La(r))return!1;a=!0}}}}else{if(!a&&!La(r)&&!La(m))return!1;if(a&&La(m))continue;a=!1,r=m|1&r}}return La(r)||a}function La(n){return 0==(1&n)}function Il(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const a=e[i];if(a===n)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let d=e[++i];for(;"string"==typeof d;)d=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function Na(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function cm(n,e,t=!1){for(let r=0;r<e.length;r++)if(ll(n,e[r],t))return!0;return!1}function Ta(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Ic(n,e){return n?":not("+e.trim()+")":e}function ac(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&r){const d=n[++t];i+="["+a+(d.length>0?'="'+d+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!La(a)&&(e+=Ic(o,i),i=""),r=a,o=o||!La(r);t++}return""!==i&&(e+=Ic(o,i)),e}function Zn(n){return Xl(()=>{const e=No(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ra.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Bs.Emulated,styles:n.styles||Po,_:null,schemas:n.schemas||null,tView:null,id:""};up(t);const r=n.dependencies;return t.directiveDefs=$h(r,!1),t.pipeDefs=$h(r,!0),t.id=function Tc(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function cp(n){return po(n)||ws(n)}function ra(n){return null!==n}function wo(n){return Xl(()=>({type:n.type,bootstrap:n.bootstrap||Po,declarations:n.declarations||Po,imports:n.imports||Po,exports:n.exports||Po,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pa(n,e){if(null==n)return Sa;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}function Kn(n){return Xl(()=>{const e=No(n);return up(e),e})}function po(n){return n[Oa]||null}function ws(n){return n[Ef]||null}function ia(n){return n[Vu]||null}function oa(n,e){const t=n[fd]||null;if(!t&&!0===e)throw new Error(`Type ${Rt(n)} does not have '\u0275mod' property.`);return t}function No(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Sa,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Po,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pa(n.inputs,e),outputs:pa(n.outputs)}}function up(n){n.features?.forEach(e=>e(n))}function $h(n,e){if(!n)return null;const t=e?ia:cp;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(ra)}const sa=0,Fr=1,Ri=2,Wi=3,Es=4,Sr=5,mo=6,ph=7,Xs=8,Cs=9,za=10,Ti=11,mh=12,Vh=13,gh=14,Wa=15,Tl=16,Yl=17,Fl=18,md=19,Uh=20,ul=21,cc=22,du=23,Dc=24,Mr=25,pu=1,ku=2,ga=7,Ja=9,vl=11;function c(n){return Array.isArray(n)&&"object"==typeof n[pu]}function f(n){return Array.isArray(n)&&!0===n[pu]}function b(n){return 0!=(4&n.flags)}function w(n){return n.componentOffset>-1}function M(n){return 1==(1&n.flags)}function z(n){return!!n.template}function j(n){return 0!=(512&n[Ri])}function If(n,e){return n.hasOwnProperty(uu)?n[uu]:null}let Bl=null,_d=!1;function x(n){const e=Bl;return Bl=n,e}const h={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function S(n){if(!Ye(n)||n.dirty){if(!n.producerMustRecompute(n)&&!X(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function F(n){n.dirty=!0,function D(n){if(void 0===n.liveConsumerNode)return;const e=_d;_d=!0;try{for(const t of n.liveConsumerNode)t.dirty||F(t)}finally{_d=e}}(n),n.consumerMarkedDirty?.(n)}function B(n){return n&&(n.nextProducerIndex=0),x(n)}function V(n,e){if(x(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ye(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ve(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function X(n){it(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(S(t),r!==t.version))return!0}return!1}function q(n){if(it(n),Ye(n))for(let e=0;e<n.producerNode.length;e++)Ve(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ve(n,e){if(function st(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),it(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Ve(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];it(i),i.producerIndexOfThis[r]=e}}function Ye(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function it(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let qt=null;const hr=()=>{},vi=(()=>({...h,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:hr}))();class Wr{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ei(){return co}function co(n){return n.type.prototype.ngOnChanges&&(n.setInput=hi),uo}function uo(){const n=zs(this),e=n?.current;if(e){const t=n.previous;if(t===Sa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function hi(n,e,t,r){const i=this.declaredInputs[t],o=zs(n)||function Zs(n,e){return n[ms]=e}(n,{previous:Sa,current:null}),a=o.current||(o.current={}),d=o.previous,m=d[i];a[i]=new Wr(m&&m.currentValue,e,d===Sa),n[r]=e}ei.ngInherit=!0;const ms="__ngSimpleChanges__";function zs(n){return n[ms]||null}const _a=function(n,e,t){};function ji(n){for(;Array.isArray(n);)n=n[sa];return n}function Do(n,e){return ji(e[n])}function gs(n,e){return ji(e[n.index])}function aa(n,e){return n.data[e]}function Mc(n,e){const t=e[n];return c(t)?t:t[sa]}function Xc(n,e){return null==e?null:n[e]}function Gd(n){n[Yl]=0}function gg(n){1024&n[Ri]||(n[Ri]|=1024,_g(n,1))}function hp(n){1024&n[Ri]&&(n[Ri]&=-1025,_g(n,-1))}function _g(n,e){let t=n[Wi];if(null===t)return;t[Sr]+=e;let r=t;for(t=t[Wi];null!==t&&(1===e&&1===r[Sr]||-1===e&&0===r[Sr]);)t[Sr]+=e,r=t,t=t[Wi]}const ro={lFrame:B_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hd(){return ro.bindingsEnabled}function Df(){return null!==ro.skipHydrationRootTNode}function dr(){return ro.lFrame.lView}function Fo(){return ro.lFrame.tView}function Gh(n){return ro.lFrame.contextLView=n,n[Xs]}function Ou(n){return ro.lFrame.contextLView=null,n}function $a(){let n=Af();for(;null!==n&&64===n.type;)n=n.parent;return n}function Af(){return ro.lFrame.currentTNode}function gu(n,e){const t=ro.lFrame;t.currentTNode=n,t.isParent=e}function Sx(){return ro.lFrame.isParent}function Ix(){ro.lFrame.isParent=!1}function yg(){return ro.lFrame.bindingIndex++}function Fv(n,e){const t=ro.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bv(e)}function Bv(n){ro.lFrame.currentDirectiveIndex=n}function zv(n){const e=ro.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function qh(){return ro.lFrame.currentQueryIndex}function F_(n){ro.lFrame.currentQueryIndex=n}function hm(n){const e=n[Fr];return 2===e.type?e.declTNode:1===e.type?n[mo]:null}function vg(n,e,t){if(t&ti.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&ti.Host||(i=hm(o),null===i||(o=o[gh],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ro.lFrame=$v();return r.currentTNode=e,r.lView=n,!0}function Pf(n){const e=$v(),t=n[Fr];ro.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $v(){const n=ro.lFrame,e=null===n?null:n.child;return null===e?B_(n):e}function B_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Dx(){const n=ro.lFrame;return ro.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ax=Dx;function Mx(){const n=Dx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hc(){return ro.lFrame.selectedIndex}function Wh(n){ro.lFrame.selectedIndex=n}function Js(){const n=ro.lFrame;return aa(n.tView,n.selectedIndex)}let xg=!0;function dc(){return xg}function fc(n){xg=n}function Va(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:d,ngAfterViewInit:m,ngAfterViewChecked:_,ngOnDestroy:C}=o;a&&(n.contentHooks??=[]).push(-t,a),d&&((n.contentHooks??=[]).push(t,d),(n.contentCheckHooks??=[]).push(t,d)),m&&(n.viewHooks??=[]).push(-t,m),_&&((n.viewHooks??=[]).push(t,_),(n.viewCheckHooks??=[]).push(t,_)),null!=C&&(n.destroyHooks??=[]).push(t,C)}}function $_(n,e,t){qC(n,e,3,t)}function dp(n,e,t,r){(3&n[Ri])===t&&qC(n,e,t,r)}function yh(n,e){let t=n[Ri];(3&t)===e&&(t&=8191,t+=1,n[Ri]=t)}function qC(n,e,t,r){const o=r??-1,a=e.length-1;let d=0;for(let m=void 0!==r?65535&n[Yl]:0;m<a;m++)if("number"==typeof e[m+1]){if(d=e[m],null!=r&&d>=r)break}else e[m]<0&&(n[Yl]+=65536),(d<o||-1==o)&&(XC(n,t,e,m),n[Yl]=(4294901760&n[Yl])+m+2),m++}function WC(n,e){_a(4,n,e);const t=x(null);try{e.call(n)}finally{x(t),_a(5,n,e)}}function XC(n,e,t,r){const i=t[r]<0,o=t[r+1],d=n[i?-t[r]:t[r]];i?n[Ri]>>13<n[Yl]>>16&&(3&n[Ri])===e&&(n[Ri]+=8192,WC(d,o)):WC(d,o)}const dm=-1;class vd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function fm(n){return n!==dm}function pm(n){return 32767&n}function mm(n,e){let t=function Rx(n){return n>>16}(n),r=e;for(;t>0;)r=r[gh],t--;return r}let Pc=!0;function wg(n){const e=Pc;return Pc=n,e}const bd=255,YC=5;let gm=0;const qu={};function Lu(n,e){const t=V_(n,e);if(-1!==t)return t;const r=e[Fr];r.firstCreatePass&&(n.injectorIndex=e.length,Ox(r.data,n),Ox(e,null),Ox(r.blueprint,null));const i=U_(n,e),o=n.injectorIndex;if(fm(i)){const a=pm(i),d=mm(i,e),m=d[Fr].data;for(let _=0;_<8;_++)e[o+_]=d[a+_]|m[a+_]}return e[o+8]=i,o}function Ox(n,e){n.push(0,0,0,0,0,0,0,0,e)}function V_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function U_(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=jv(i),null===r)return dm;if(t++,i=i[gh],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return dm}function Lx(n,e,t){!function Xh(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(dh)&&(r=t[dh]),null==r&&(r=t[dh]=gm++);const i=r&bd;e.data[n+(i>>YC)]|=1<<i}(n,e,t)}function xd(n,e,t){if(t&ti.Optional||void 0!==n)return n;Ks()}function fp(n,e,t,r){if(t&ti.Optional&&void 0===r&&(r=null),!(t&(ti.Self|ti.Host))){const i=n[Cs],o=na(void 0);try{return i?i.get(e,r,t&ti.Optional):Tu(e,r,t&ti.Optional)}finally{na(o)}}return xd(r,0,t)}function Fx(n,e,t,r=ti.Default,i){if(null!==n){if(2048&e[Ri]&&!(r&ti.Self)){const a=function QC(n,e,t,r,i){let o=n,a=e;for(;null!==o&&null!==a&&2048&a[Ri]&&!(512&a[Ri]);){const d=Bx(o,a,t,r|ti.Self,qu);if(d!==qu)return d;let m=o.parent;if(!m){const _=a[Uh];if(_){const C=_.get(t,qu,r);if(C!==qu)return C}m=jv(a),a=a[gh]}o=m}return i}(n,e,t,r,qu);if(a!==qu)return a}const o=Bx(n,e,t,r,qu);if(o!==qu)return o}return fp(e,t,r,i)}function Bx(n,e,t,r,i){const o=function Eg(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(dh)?n[dh]:void 0;return"number"==typeof e?e>=0?e&bd:zx:e}(t);if("function"==typeof o){if(!vg(e,n,r))return r&ti.Host?xd(i,0,r):fp(e,t,r,i);try{let a;if(a=o(r),null!=a||r&ti.Optional)return a;Ks()}finally{Ax()}}else if("number"==typeof o){let a=null,d=V_(n,e),m=dm,_=r&ti.Host?e[Wa][mo]:null;for((-1===d||r&ti.SkipSelf)&&(m=-1===d?U_(n,e):e[d+8],m!==dm&&Cg(r,!1)?(a=e[Fr],d=pm(m),e=mm(m,e)):d=-1);-1!==d;){const C=e[Fr];if(ym(o,d,C.data)){const T=eM(d,e,t,a,r,_);if(T!==qu)return T}m=e[d+8],m!==dm&&Cg(r,e[Fr].data[d+8]===_)&&ym(o,d,e)?(a=C,d=pm(m),e=mm(m,e)):d=-1}}return i}function eM(n,e,t,r,i,o){const a=e[Fr],d=a.data[n+8],C=_m(d,a,t,null==r?w(d)&&Pc:r!=a&&0!=(3&d.type),i&ti.Host&&o===d);return null!==C?kf(e,a,C,d):qu}function _m(n,e,t,r,i){const o=n.providerIndexes,a=e.data,d=1048575&o,m=n.directiveStart,C=o>>20,R=i?d+C:n.directiveEnd;for(let L=r?d:d+C;L<R;L++){const G=a[L];if(L<m&&t===G||L>=m&&G.type===t)return L}if(i){const L=a[m];if(L&&z(L)&&L.type===t)return m}return null}function kf(n,e,t,r){let i=n[t];const o=e.data;if(function ZC(n){return n instanceof vd}(i)){const a=i;a.resolving&&function Ds(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new tn(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Mi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():jr(n)}(o[t]));const d=wg(a.canSeeViewProviders);a.resolving=!0;const _=a.injectImpl?na(a.injectImpl):null;vg(n,r,ti.Default);try{i=n[t]=a.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function kx(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const a=co(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==_&&na(_),wg(d),a.resolving=!1,Ax()}}return i}function ym(n,e,t){return!!(t[e+(n>>YC)]&1<<n)}function Cg(n,e){return!(n&ti.Self||n&ti.Host&&e)}class pc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Fx(this._tNode,this._lView,e,Wl(r),t)}}function zx(){return new pc($a(),dr())}function la(n){return Xl(()=>{const e=n.prototype.constructor,t=e[uu]||mp(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[uu]||mp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function mp(n){return zr(n)?()=>{const e=mp(kn(n));return e&&e()}:If(n)}function jv(n){const e=n[Fr],t=e.type;return 2===t?e.declTNode:1===t?n[mo]:null}function Rf(n){return function Nx(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(pd(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}($a(),n)}const Ig="__parameters__";function jo(n,e,t){return Xl(()=>{const r=function Wd(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return d.annotation=a,d;function d(m,_,C){const T=m.hasOwnProperty(Ig)?m[Ig]:Object.defineProperty(m,Ig,{value:[]})[Ig];for(;T.length<=C;)T.push(null);return(T[C]=T[C]||[]).push(a),m}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Dg(n,e){n.forEach(t=>Array.isArray(t)?Dg(t,e):e(t))}function Yd(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function gp(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Wu(n,e,t){let r=_p(n,e);return r>=0?n[1|r]=t:(r=~r,function tS(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Gx(n,e){const t=_p(n,e);if(t>=0)return n[1|t]}function _p(n,e){return function Hv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const xm=cu(jo("Optional"),8),Pg=cu(jo("SkipSelf"),4);function X_(n){return 128==(128&n.flags)}var Cp=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cp||{});const Rg=new Map;let hM=0;const Sp="__ngContext__";function yu(n,e){c(e)?(n[Sp]=e[md],function fM(n){Rg.set(n[md],n)}(e)):n[Sp]=e}let s1;function wm(n,e){return s1(n,e)}function Og(n){const e=n[Wi];return f(e)?e[Wi]:e}function yS(n){return l1(n[mh])}function a1(n){return l1(n[Es])}function l1(n){for(;null!==n&&!f(n);)n=n[Es];return n}function Em(n,e,t,r,i){if(null!=r){let o,a=!1;f(r)?o=r:c(r)&&(a=!0,r=r[sa]);const d=ji(r);0===n&&null!==t?null==i?wS(e,t,d):Sm(e,t,d,i||null,!0):1===n&&null!==t?Sm(e,t,d,i||null,!0):2===n?function Lg(n,e,t){const r=ny(n,e);r&&function xM(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,d,a):3===n&&e.destroyNode(d),null!=o&&function CM(n,e,t,r,i){const o=t[ga];o!==ji(t)&&Em(e,n,r,o,i);for(let d=vl;d<t.length;d++){const m=t[d];sy(m[Fr],m,n,e,r,o)}}(e,n,o,t,i)}}function t0(n,e,t){return n.createElement(e,t)}function Cm(n,e){const t=n[Ja],r=t.indexOf(e);hp(e),t.splice(r,1)}function Ip(n,e){if(n.length<=vl)return;const t=vl+e,r=n[t];if(r){const i=r[Tl];null!==i&&i!==n&&Cm(i,r),e>0&&(n[t-1][Es]=r[Es]);const o=Kd(n,vl+e);!function yM(n,e){sy(n,e,e[Ti],2,null,null),e[sa]=null,e[mo]=null}(r[Fr],r);const a=o[Fl];null!==a&&a.detachView(o[Fr]),r[Wi]=null,r[Es]=null,r[Ri]&=-129}return r}function r0(n,e){if(!(256&e[Ri])){const t=e[Ti];e[du]&&q(e[du]),e[Dc]&&q(e[Dc]),t.destroyNode&&sy(n,e,t,3,null,null),function bS(n){let e=n[mh];if(!e)return o0(n[Fr],n);for(;e;){let t=null;if(c(e))t=e[mh];else{const r=e[vl];r&&(t=r)}if(!t){for(;e&&!e[Es]&&e!==n;)c(e)&&o0(e[Fr],e),e=e[Wi];null===e&&(e=n),c(e)&&o0(e[Fr],e),t=e&&e[Es]}e=t}}(e)}}function o0(n,e){if(!(256&e[Ri])){e[Ri]&=-129,e[Ri]|=256,function bM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof vd)){const o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const d=i[o[a]],m=o[a+1];_a(4,d,m);try{m.call(d)}finally{_a(5,d,m)}}else{_a(4,i,o);try{o.call(i)}finally{_a(5,i,o)}}}}}(n,e),function vM(n,e){const t=n.cleanup,r=e[ph];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[ph]=null);const i=e[ul];if(null!==i){e[ul]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[Fr].type&&e[Ti].destroy();const t=e[Tl];if(null!==t&&f(e[Wi])){t!==e[Wi]&&Cm(t,e);const r=e[Fl];null!==r&&r.detachView(n)}!function pM(n){Rg.delete(n[md])}(e)}}function u1(n,e,t){return function xS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[sa];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Bs.None||o===Bs.Emulated)return null}return gs(r,t)}}(n,e.parent,t)}function Sm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function wS(n,e,t){n.appendChild(e,t)}function ty(n,e,t,r,i){null!==r?Sm(n,e,t,r,i):wS(n,e,t)}function ny(n,e){return n.parentNode(e)}function CS(n,e,t){return IS(n,e,t)}let h1,ks,p1,s0,IS=function SS(n,e,t){return 40&n.type?gs(n,t):null};function ry(n,e,t,r){const i=u1(n,r,e),o=e[Ti],d=CS(r.parent||e[mo],r,e);if(null!=i)if(Array.isArray(t))for(let m=0;m<t.length;m++)ty(o,i,t[m],d,!1);else ty(o,i,t,d,!1);void 0!==h1&&h1(o,r,e,t,i)}function iy(n,e){if(null!==e){const t=e.type;if(3&t)return gs(e,n);if(4&t)return xh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return iy(n,r);{const i=n[e.index];return f(i)?xh(-1,i):ji(i)}}if(32&t)return wm(e,n)()||ji(n[e.index]);{const r=Ql(n,e);return null!==r?Array.isArray(r)?r[0]:iy(Og(n[Wa]),r):iy(n,e.next)}}return null}function Ql(n,e){return null!==e?n[Wa][mo].projection[e.projection]:null}function xh(n,e){const t=vl+n+1;if(t<e.length){const r=e[t],i=r[Fr].firstChild;if(null!==i)return iy(r,i)}return e[ga]}function Tp(n,e,t,r,i,o,a){for(;null!=t;){const d=r[t.index],m=t.type;if(a&&0===e&&(d&&yu(ji(d),r),t.flags|=2),32!=(32&t.flags))if(8&m)Tp(n,e,t.child,r,i,o,!1),Em(e,n,i,d,o);else if(32&m){const _=wm(t,r);let C;for(;C=_();)Em(e,n,i,C,o);Em(e,n,i,d,o)}else 16&m?Ng(n,e,r,t,i,o):Em(e,n,i,d,o);t=a?t.projectionNext:t.next}}function sy(n,e,t,r,i,o){Tp(t,r,n.firstChild,e,i,o,!1)}function Ng(n,e,t,r,i,o){const a=t[Wa],m=a[mo].projection[r.projection];if(Array.isArray(m))for(let _=0;_<m.length;_++)Em(e,n,i,m[_],o);else{let _=m;const C=a[Wi];X_(r)&&(_.flags|=128),Tp(n,e,_,C,i,o,!0)}}function d1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function f1(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Ia(n,e,r),null!==i&&d1(n,e,i),null!==o&&function DS(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Im(n){return function ay(){if(void 0===ks&&(ks=null,xs.trustedTypes))try{ks=xs.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ks}()?.createHTML(n)||n}function RS(n){return function m1(){if(void 0===s0&&(s0=null,xs.trustedTypes))try{s0=xs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return s0}()?.createScriptURL(n)||n}class Tm{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_o})`}}class a0 extends Tm{getTypeName(){return"HTML"}}class Bg extends Tm{getTypeName(){return"Style"}}class OS extends Tm{getTypeName(){return"Script"}}class l0 extends Tm{getTypeName(){return"URL"}}class g1 extends Tm{getTypeName(){return"ResourceURL"}}function wh(n){return n instanceof Tm?n.changingThisBreaksApplicationSecurity:n}function Qd(n,e){const t=function TM(n){return n instanceof Tm&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${_o})`)}return t===e}class FS{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Im(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class cy{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Im(e),t}}const v1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dm(n){return(n=String(n)).match(v1)?n:"unsafe:"+n}function Nf(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function $g(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const b1=Nf("area,br,col,hr,img,wbr"),BS=Nf("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x1=Nf("rp,rt"),w1=$g(b1,$g(BS,Nf("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$g(x1,Nf("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$g(x1,BS)),c0=Nf("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),E1=$g(c0,Nf("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nf("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$S=Nf("script,style,template");class VS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!w1.hasOwnProperty(t))return this.sanitizedSomething=!0,!$S.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),a=o.name,d=a.toLowerCase();if(!E1.hasOwnProperty(d)){this.sanitizedSomething=!0;continue}let m=o.value;c0[d]&&(m=Dm(m)),this.buf.push(" ",a,'="',C1(m),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();w1.hasOwnProperty(t)&&!b1.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(C1(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const PM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kM=/([^\#-~ |!])/g;function C1(n){return n.replace(/&/g,"&amp;").replace(PM,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(kM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uy;function Vg(n,e){let t=null;try{uy=uy||function Zu(n){const e=new cy(n);return function zg(){try{return!!(new window.DOMParser).parseFromString(Im(""),"text/html")}catch{return!1}}()?new FS(e):e}(n);let r=e?String(e):"";t=uy.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=uy.getInertBodyElement(r)}while(r!==o);return Im((new VS).sanitizeChildren(u0(t)||t))}finally{if(t){const r=u0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function u0(n){return"content"in n&&function US(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ua=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ua||{});function Ap(n){const e=hy();return e?e.sanitize(Ua.URL,n)||"":Qd(n,"URL")?wh(n):Dm(jr(n))}function I1(n){const e=hy();if(e)return RS(e.sanitize(Ua.RESOURCE_URL,n)||"");if(Qd(n,"ResourceURL"))return RS(wh(n));throw new tn(904,!1)}function hy(){const n=dr();return n&&n[za].sanitizer}class Ar{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=yr({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jd=new Ar("ENVIRONMENT_INITIALIZER"),Am=new Ar("INJECTOR",-1),p0=new Ar("INJECTOR_DEF_TYPES");class T1{get(e,t=lo){if(t===lo){const r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return t}}function RM(...n){return{\u0275providers:g0(0,n),\u0275fromNgModule:!0}}function g0(n,...e){const t=[],r=new Set;let i;const o=a=>{t.push(a)};return Dg(e,a=>{const d=a;Mp(d,o,[],r)&&(i||=[],i.push(d))}),void 0!==i&&HS(i,o),t}function HS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];_0(i,o=>{e(o,r)})}}function Mp(n,e,t,r){if(!(n=kn(n)))return!1;let i=null,o=Iu(n);const a=!o&&po(n);if(o||a){if(a&&!a.standalone)return!1;i=n}else{const m=n.ngModule;if(o=Iu(m),!o)return!1;i=m}const d=r.has(i);if(a){if(d)return!1;if(r.add(i),a.dependencies){const m="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const _ of m)Mp(_,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!d){let _;r.add(i);try{Dg(o.imports,C=>{Mp(C,e,t,r)&&(_||=[],_.push(C))})}finally{}void 0!==_&&HS(_,e)}if(!d){const _=If(i)||(()=>new i);e({provide:i,useFactory:_,deps:Po},i),e({provide:p0,useValue:i,multi:!0},i),e({provide:Jd,useValue:()=>pn(i),multi:!0},i)}const m=o.providers;if(null!=m&&!d){const _=n;_0(m,C=>{e(C,_)})}}}return i!==n&&void 0!==n.providers}function _0(n,e){for(let t of n)ui(t)&&(t=t.\u0275providers),Array.isArray(t)?_0(t,e):e(t)}const qS=Le({provide:String,useValue:Le});function jg(n){return null!==n&&"object"==typeof n&&qS in n}function Pp(n){return"function"==typeof n}const D1=new Ar("Set Injector scope."),wd={},OM={};let km;function kp(){return void 0===km&&(km=new T1),km}class Al{}class Rp extends Al{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,A1(e,a=>this.processProvider(a)),this.records.set(Am,Ff(void 0,this)),i.has("environment")&&this.records.set(Al,Ff(void 0,this));const o=this.records.get(D1);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(p0.multi,Po,ti.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=hh(this),r=na(void 0);try{return e()}finally{hh(t),na(r)}}get(e,t=lo,r=ti.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(hu))return e[hu](this);r=Wl(r);const o=hh(this),a=na(void 0);try{if(!(r&ti.SkipSelf)){let m=this.records.get(e);if(void 0===m){const _=function ZS(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ar}(e)&&jc(e);m=_&&this.injectableDefInScope(_)?Ff(Gg(e),wd):null,this.records.set(e,m)}if(null!=m)return this.hydrate(e,m)}return(r&ti.Self?kp():this.parent).get(e,t=r&ti.Optional&&t===lo?null:t)}catch(d){if("NullInjectorError"===d.name){if((d[fo]=d[fo]||[]).unshift(Rt(e)),o)throw d;return function fa(n,e,t,r){const i=n[fo];throw e[Sl]&&i.unshift(e[Sl]),n.message=function lp(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let d=e[a];o.push(a+":"+("string"==typeof d?JSON.stringify(d):Rt(d)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dd,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[fo]=null,n}(d,e,"R3InjectorError",this.source)}throw d}finally{na(a),hh(o)}}resolveInjectorInitializers(){const e=hh(this),t=na(void 0);try{const i=this.get(Jd.multi,Po,ti.Self);for(const o of i)o()}finally{hh(e),na(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tn(205,!1)}processProvider(e){let t=Pp(e=kn(e))?e:kn(e&&e.provide);const r=function NM(n){return jg(n)?Ff(void 0,n.useValue):Ff(Rm(n),wd)}(e);if(Pp(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ff(void 0,wd,!0),i.factory=()=>Cc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===wd&&(t.value=OM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XS(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=kn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Gg(n){const e=jc(n),t=null!==e?e.factory:If(n);if(null!==t)return t;if(n instanceof Ar)throw new tn(204,!1);if(n instanceof Function)return function LM(n){const e=n.length;if(e>0)throw gp(e,"?"),new tn(204,!1);const t=function qa(n){return n&&(n[Ol]||n[Ws])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new tn(204,!1)}function Rm(n,e,t){let r;if(Pp(n)){const i=kn(n);return If(i)||Gg(i)}if(jg(n))r=()=>kn(n.useValue);else if(function WS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Cc(n.deps||[]));else if(function y0(n){return!(!n||!n.useExisting)}(n))r=()=>pn(kn(n.useExisting));else{const i=kn(n&&(n.useClass||n.provide));if(!function FM(n){return!!n.deps}(n))return If(i)||Gg(i);r=()=>new i(...Cc(n.deps))}return r}function Ff(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function A1(n,e){for(const t of n)Array.isArray(t)?A1(t,e):t&&ui(t)?A1(t.\u0275providers,e):e(t)}const dy=new Ar("AppId",{providedIn:"root",factory:()=>BM}),BM="ng",M1=new Ar("Platform Initializer"),Bf=new Ar("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zf=new Ar("AnimationModuleType"),P1=new Ar("CSP nonce",{providedIn:"root",factory:()=>function Fg(){if(void 0!==p1)return p1;if(typeof document<"u")return document;throw new tn(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let F1=(n,e,t)=>null;function Yu(n,e,t=!1){return F1(n,e,t)}class QS{}class z1{}class eI{resolveComponentFactory(e){throw function JS(n){const e=Error(`No component factory found for ${Rt(n)}.`);return e.ngComponent=n,e}(e)}}let Eh=(()=>{class n{static#e=this.NULL=new eI}return n})();function tI(){return Xg($a(),dr())}function Xg(n,e){return new er(gs(n,e))}let er=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=tI}return n})();function I0(n){return n instanceof er?n.nativeElement:n}class yy{}let Ku=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function V1(){const n=dr(),t=Mc($a().index,n);return(c(t)?t:n)[Ti]}()}return n})(),U1=(()=>{class n{static#e=this.\u0275prov=yr({token:n,providedIn:"root",factory:()=>null})}return n})();class bu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const j1=new bu("16.2.9"),vy={};function q1(n,e=null,t=null,r){const i=oI(n,e,t,r);return i.resolveInjectorInitializers(),i}function oI(n,e=null,t=null,r,i=new Set){const o=[t||Po,RM(n)];return r=r||("object"==typeof n?void 0:Rt(n)),new Rp(o,e||kp(),r||null,i)}let $s=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=lo;static#t=this.NULL=new T1;static create(t,r){if(Array.isArray(t))return q1({name:""},r,t,"");{const i=t.name??"";return q1({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=yr({token:n,providedIn:"any",factory:()=>pn(Am)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function T0(n){return n.ngOriginalError}class Qu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&T0(e);for(;t&&T0(t);)t=T0(t);return t||null}}function A0(n){return e=>{setTimeout(n,void 0,e)}}const l=class X1 extends lt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&"object"==typeof e){const m=e;i=m.next?.bind(m),o=m.error?.bind(m),a=m.complete?.bind(m)}this.__isAsync&&(o=A0(o),i&&(i=A0(i)),a&&(a=A0(a)));const d=super.subscribe({next:i,error:o,complete:a});return e instanceof me&&e.add(d),d}};function s(...n){}class y{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new l(!1),this.onMicrotaskEmpty=new l(!1),this.onStable=new l(!1),this.onError=new l(!1),typeof Zone>"u")throw new tn(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function u(){const n="function"==typeof xs.requestAnimationFrame;let e=xs[n?"requestAnimationFrame":"setTimeout"],t=xs[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function O(n){const e=()=>{!function P(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xs,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,N(n),n.isCheckStableRunning=!0,I(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),N(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,a,d)=>{if(function be(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(d))return t.invokeTask(i,o,a,d);try{return $(n),t.invokeTask(i,o,a,d)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),U(n)}},onInvoke:(t,r,i,o,a,d,m)=>{try{return $(n),t.invoke(i,o,a,d,m)}finally{n.shouldCoalesceRunChangeDetection&&e(),U(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,N(n),I(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!y.isInAngularZone())throw new tn(909,!1)}static assertNotInAngularZone(){if(y.isInAngularZone())throw new tn(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,E,s,s);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const E={};function I(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function N(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function U(n){n._nesting--,I(n)}class H{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new l,this.onMicrotaskEmpty=new l,this.onStable=new l,this.onError=new l}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const Y=new Ar("",{providedIn:"root",factory:se});function se(){const n=rr(y);let e=!0;return yt(new Me(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Me(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{y.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const a=n.onUnstable.subscribe(()=>{y.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),a.unsubscribe()}}).pipe(Nt()))}function At(n){return n instanceof Function?n():n}let lr=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=yr({token:n,providedIn:"root",factory:()=>new n})}return n})();function In(n){for(;n;){n[Ri]|=64;const e=Og(n);if(j(n)&&!e)return n;n=e}return null}const tr=new Ar("",{providedIn:"root",factory:()=>!1});let Vs=null;function Xi(n,e){return n[e]??js()}function Us(n,e){const t=js();t.producerNode?.length&&(n[e]=Vs,t.lView=n,Vs=Ys())}const ea={...h,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{In(n.lView)},lView:null};function Ys(){return Object.create(ea)}function js(){return Vs??=Ys(),Vs}const mi={};function Gr(n){hl(Fo(),dr(),hc()+n,!1)}function hl(n,e,t,r){if(!r)if(3==(3&e[Ri])){const o=n.preOrderCheckHooks;null!==o&&$_(e,o,t)}else{const o=n.preOrderHooks;null!==o&&dp(e,o,0,t)}Wh(t)}function he(n,e=ti.Default){const t=dr();return null===t?pn(n,e):Fx($a(),t,kn(n),e)}function el(){throw new Error("invalid")}function ya(n,e,t,r,i,o,a,d,m,_,C){const T=e.blueprint.slice();return T[sa]=i,T[Ri]=140|r,(null!==_||n&&2048&n[Ri])&&(T[Ri]|=2048),Gd(T),T[Wi]=T[gh]=n,T[Xs]=t,T[za]=a||n&&n[za],T[Ti]=d||n&&n[Ti],T[Cs]=m||n&&n[Cs]||null,T[mo]=o,T[md]=function dM(){return hM++}(),T[cc]=C,T[Uh]=_,T[Wa]=2==e.type?n[Wa]:T,T}function bo(n,e,t,r,i){let o=n.data[e];if(null===o)o=function tl(n,e,t,r,i){const o=Af(),a=Sx(),m=n.data[e]=function uI(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,d=0;return Df()&&(d|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:d,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=m),null!==o&&(a?null==o.child&&null!==m.parent&&(o.child=m):null===o.next&&(o.next=m,m.prev=o)),m}(n,e,t,r,i),function Ci(){return ro.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const a=function Hh(){const n=ro.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return gu(o,!0),o}function Ss(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Kc(n,e,t,r,i){const o=Xi(e,du),a=hc(),d=2&r;try{Wh(-1),d&&e.length>Mr&&hl(n,e,Mr,!1),_a(d?2:0,i);const _=d?o:null,C=B(_);try{null!==_&&(_.dirty=!1),t(r,i)}finally{V(_,C)}}finally{d&&null===e[du]&&Us(e,du),Wh(a),_a(d?3:1,i)}}function nl(n,e,t){if(b(e)){const r=x(null);try{const o=e.directiveEnd;for(let a=e.directiveStart;a<o;a++){const d=n.data[a];d.contentQueries&&d.contentQueries(1,t[a],a)}}finally{x(r)}}}function $l(n,e,t){Hd()&&(function Sy(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;w(t)&&function lX(n,e,t){const r=gs(e,n),i=Qc(t);let a=16;t.signals?a=4096:t.onPush&&(a=64);const d=pI(n,ya(n,i,null,a,r,e,null,n[za].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=d}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Lu(t,e),yu(r,e);const a=t.initialInputs;for(let d=i;d<o;d++){const m=n.data[d],_=kf(e,n,d,t);yu(_,e),null!==a&&cX(0,d-i,_,m,0,a),z(m)&&(Mc(t.index,e)[Xs]=kf(e,n,d,t))}}(n,e,t,gs(t,e)),64==(64&t.flags)&&k0(n,e,t))}function Ml(n,e,t=gs){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],d=-1===a?t(e,n):n[a];n[i++]=d}}}function Qc(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Pl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pl(n,e,t,r,i,o,a,d,m,_,C){const T=Mr+r,R=T+i,L=function Cd(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:mi);return t}(T,R),G="function"==typeof _?_():_;return L[Fr]={type:n,blueprint:L,template:t,queries:null,viewQuery:d,declTNode:e,data:L.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:m,consts:G,incompleteFirstPass:!1,ssrId:C}}let Yg=n=>null;function M0(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?P0(t,e,i,o):r.hasOwnProperty(i)&&P0(t,e,r[i],o)}return t}function P0(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function mc(n,e,t,r,i,o,a,d){const m=gs(e,t);let C,_=e.inputs;!d&&null!=_&&(C=_[r])?(ZM(n,t,C,r,i),w(e)&&function Z1(n,e){const t=Mc(e,n);16&t[Ri]||(t[Ri]|=64)}(t,e.index)):3&e.type&&(r=function hI(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=a?a(i,e.value||"",r):i,o.setProperty(m,r,i))}function Cy(n,e,t,r){if(Hd()){const i=null===r?null:{"":-1},o=function Fm(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const a=t[o];if(cm(e,a.selectors,!1))if(r||(r=[]),z(a))if(null!==a.findHostDirectiveDefs){const d=[];i=i||new Map,a.findHostDirectiveDefs(a,d,i),r.unshift(...d,a),qM(n,e,d.length)}else r.unshift(a),qM(n,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(n,t);let a,d;null===o?a=d=null:[a,d]=o,null!==a&&dI(n,e,t,a,i,d),i&&function iX(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new tn(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=Zl(t.mergedAttrs,t.attrs)}function dI(n,e,t,r,i,o){for(let _=0;_<r.length;_++)Lx(Lu(t,e),n,r[_].type);!function sX(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let _=0;_<r.length;_++){const C=r[_];C.providersResolver&&C.providersResolver(C)}let a=!1,d=!1,m=Ss(n,e,r.length,null);for(let _=0;_<r.length;_++){const C=r[_];t.mergedAttrs=Zl(t.mergedAttrs,C.hostAttrs),aX(n,t,e,m,C),oX(m,C,i),null!==C.contentQueries&&(t.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(t.flags|=64);const T=C.type.prototype;!a&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!d&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),m++}!function rf(n,e,t){const i=e.directiveEnd,o=n.data,a=e.attrs,d=[];let m=null,_=null;for(let C=e.directiveStart;C<i;C++){const T=o[C],R=t?t.get(T):null,G=R?R.outputs:null;m=M0(T.inputs,C,m,R?R.inputs:null),_=M0(T.outputs,C,_,G);const W=null===m||null===a||Mu(e)?null:uX(m,C,a);d.push(W)}null!==m&&(m.hasOwnProperty("class")&&(e.flags|=8),m.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=d,e.inputs=m,e.outputs=_}(n,t,o)}function k0(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function Gu(){return ro.lFrame.currentDirectiveIndex}();try{Wh(o);for(let d=r;d<i;d++){const m=n.data[d],_=e[d];Bv(d),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&fI(m,_)}}finally{Wh(-1),Bv(a)}}function fI(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function qM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oX(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;z(e)&&(t[""]=n)}}function aX(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=If(i.type)),a=new vd(o,z(i),he);n.blueprint[r]=a,t[r]=a,function Ju(n,e,t,r,i){const o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const d=~e.index;(function eh(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=d&&a.push(d),a.push(t,r,o)}}(n,e,r,Ss(n,t,i.hostVars,mi),i)}function Np(n,e,t,r,i,o){const a=gs(n,e);!function WM(n,e,t,r,i,o,a){if(null==o)n.removeAttribute(e,i,t);else{const d=null==a?jr(o):a(o,r||"",i);n.setAttribute(e,i,d,t)}}(e[Ti],a,o,n.value,t,r,i)}function cX(n,e,t,r,i,o){const a=o[e];if(null!==a)for(let d=0;d<a.length;)RF(r,t,a[d++],a[d++],a[d++])}function RF(n,e,t,r,i){const o=x(null);try{const a=n.inputTransforms;null!==a&&a.hasOwnProperty(r)&&(i=a[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{x(o)}}function uX(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const a=n[o];for(let d=0;d<a.length;d+=2)if(a[d]===e){r.push(o,a[d+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function OF(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function LF(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];F_(t[r]),a.contentQueries(2,e[o],o)}}}function pI(n,e){return n[mh]?n[Vh][Es]=e:n[mh]=e,n[Vh]=e,e}function XM(n,e,t){F_(0);const r=x(null);try{e(n,t)}finally{x(r)}}function NF(n){return n[ph]||(n[ph]=[])}function FF(n){return n.cleanup||(n.cleanup=[])}function BF(n,e,t){return(null===n||z(n))&&(t=function Ps(n){for(;Array.isArray(n);){if("object"==typeof n[pu])return n;n=n[sa]}return null}(t[e.index])),t[Ti]}function zF(n,e){const t=n[Cs],r=t?t.get(Qu,null):null;r&&r.handleError(e)}function ZM(n,e,t,r,i){for(let o=0;o<t.length;){const a=t[o++],d=t[o++];RF(n.data[a],e[a],r,d,i)}}function hX(n,e){const t=Mc(e,n),r=t[Fr];!function dX(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[sa];null!==i&&null===t[cc]&&(t[cc]=Yu(i,t[Cs])),YM(r,t,t[Xs])}function YM(n,e,t){Pf(e);try{const r=n.viewQuery;null!==r&&XM(1,r,t);const i=n.template;null!==i&&Kc(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&LF(n,e),n.staticViewQueries&&XM(2,n.viewQuery,t);const o=n.components;null!==o&&function fX(n,e){for(let t=0;t<e.length;t++)hX(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ri]&=-5,Mx()}}let $F=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const o=typeof Zone>"u"?null:Zone.current,a=function Jn(n,e,t){const r=Object.create(vi);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=a=>{r.cleanupFn=a};return r.ref={notify:()=>F(r),run:()=>{if(r.dirty=!1,r.hasRun&&!X(r))return;r.hasRun=!0;const a=B(r);try{r.cleanupFn(),r.cleanupFn=hr,r.fn(i)}finally{V(r,a)}},cleanup:()=>r.cleanupFn()},r.ref}(t,_=>{this.all.has(_)&&this.queue.set(_,o)},i);let d;this.all.add(a),a.notify();const m=()=>{a.cleanup(),d?.(),this.all.delete(a),this.queue.delete(a)};return d=r?.onDestroy(m),{destroy:m}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=yr({token:n,providedIn:"root",factory:()=>new n})}return n})();function mI(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const d=e[a];"number"==typeof d?o=d:1==o?i=sn(i,d):2==o&&(r=sn(r,d+": "+e[++a]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function K1(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(ji(o)),f(o)&&VF(o,r);const a=t.type;if(8&a)K1(n,e,t.child,r);else if(32&a){const d=wm(t,e);let m;for(;m=d();)r.push(m)}else if(16&a){const d=Ql(e,t);if(Array.isArray(d))r.push(...d);else{const m=Og(e[Wa]);K1(m[Fr],m,d,r,!0)}}t=i?t.projectionNext:t.next}return r}function VF(n,e){for(let t=vl;t<n.length;t++){const r=n[t],i=r[Fr].firstChild;null!==i&&K1(r[Fr],r,i,e)}n[ga]!==n[sa]&&e.push(n[ga])}function gI(n,e,t,r=!0){const i=e[za],o=i.rendererFactory,a=i.afterRenderEventManager;o.begin?.(),a?.begin();try{UF(n,e,n.template,t)}catch(m){throw r&&zF(e,m),m}finally{o.end?.(),i.effectManager?.flush(),a?.end()}}function UF(n,e,t,r){const i=e[Ri];if(256!=(256&i)){e[za].effectManager?.flush(),Pf(e);try{Gd(e),function jC(n){return ro.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Kc(n,e,t,2,r);const a=3==(3&i);if(a){const _=n.preOrderCheckHooks;null!==_&&$_(e,_,null)}else{const _=n.preOrderHooks;null!==_&&dp(e,_,0,null),yh(e,0)}if(function gX(n){for(let e=yS(n);null!==e;e=a1(e)){if(!e[ku])continue;const t=e[Ja];for(let r=0;r<t.length;r++){gg(t[r])}}}(e),jF(e,2),null!==n.contentQueries&&LF(n,e),a){const _=n.contentCheckHooks;null!==_&&$_(e,_)}else{const _=n.contentHooks;null!==_&&dp(e,_,1),yh(e,1)}!function xl(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=Xi(e,Dc);try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)Wh(~o);else{const a=o,d=t[++i],m=t[++i];Fv(d,a),r.dirty=!1;const _=B(r);try{m(2,e[a])}finally{V(r,_)}}}}finally{null===e[Dc]&&Us(e,Dc),Wh(-1)}}(n,e);const d=n.components;null!==d&&HF(e,d,0);const m=n.viewQuery;if(null!==m&&XM(2,m,r),a){const _=n.viewCheckHooks;null!==_&&$_(e,_)}else{const _=n.viewHooks;null!==_&&dp(e,_,2),yh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ri]&=-73,hp(e)}finally{Mx()}}}function jF(n,e){for(let t=yS(n);null!==t;t=a1(t))for(let r=vl;r<t.length;r++)GF(t[r],e)}function _X(n,e,t){GF(Mc(e,n),t)}function GF(n,e){if(!function um(n){return 128==(128&n[Ri])}(n))return;const t=n[Fr],r=n[Ri];if(80&r&&0===e||1024&r||2===e)UF(t,n,t.template,n[Xs]);else if(n[Sr]>0){jF(n,1);const i=t.components;null!==i&&HF(n,i,1)}}function HF(n,e,t){for(let r=0;r<e.length;r++)_X(n,e[r],t)}class Q1{get rootNodes(){const e=this._lView,t=e[Fr];return K1(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xs]}set context(e){this._lView[Xs]=e}get destroyed(){return 256==(256&this._lView[Ri])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Wi];if(f(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Ip(e,r),Kd(t,r))}this._attachedToViewContainer=!1}r0(this._lView[Fr],this._lView)}onDestroy(e){!function wx(n,e){if(256==(256&n[Ri]))throw new tn(911,!1);null===n[ul]&&(n[ul]=[]),n[ul].push(e)}(this._lView,e)}markForCheck(){In(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ri]&=-129}reattach(){this._lView[Ri]|=128}detectChanges(){gI(this._lView[Fr],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function n0(n,e){sy(n,e,e[Ti],2,null,null)}(this._lView[Fr],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new tn(902,!1);this._appRef=e}}class yX extends Q1{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;gI(e[Fr],e,e[Xs],!1)}checkNoChanges(){}get context(){return null}}class qF extends Eh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=po(e);return new J1(t,this.ngModule)}}function WF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class bX{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Wl(r);const i=this.injector.get(e,vy,r);return i!==vy||t===vy?i:this.parentInjector.get(e,t,r)}}class J1 extends z1{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=WF(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return WF(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Pu(n){return n.map(ac).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof Al?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new bX(e,o):e,d=a.get(yy,null);if(null===d)throw new tn(407,!1);const T={rendererFactory:d,sanitizer:a.get(U1,null),effectManager:a.get($F,null),afterRenderEventManager:a.get(lr,null)},R=d.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",G=r?function Zg(n,e,t,r){const o=r.get(tr,!1)||t===Bs.ShadowDom,a=n.selectRootElement(e,o);return function Ey(n){Yg(n)}(a),a}(R,r,this.componentDef.encapsulation,a):t0(R,L,function vX(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(L)),_e=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let re=null;null!==G&&(re=Yu(G,a,!0));const Oe=Pl(0,null,null,1,0,null,null,null,null,null,null),vt=ya(null,Oe,null,_e,null,null,T,R,a,null,re);let Mt,Kt;Pf(vt);try{const Zt=this.componentDef;let an,ot=null;Zt.findHostDirectiveDefs?(an=[],ot=new Map,Zt.findHostDirectiveDefs(Zt,an,ot),an.push(Zt)):an=[Zt];const Er=function wX(n,e){const t=n[Fr],r=Mr;return n[r]=e,bo(t,r,2,"#host",null)}(vt,G),_r=function EX(n,e,t,r,i,o,a){const d=i[Fr];!function CX(n,e,t,r){for(const i of n)e.mergedAttrs=Zl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(mI(e,e.mergedAttrs,!0),null!==t&&f1(r,t,e))}(r,n,e,a);let m=null;null!==e&&(m=Yu(e,i[Cs]));const _=o.rendererFactory.createRenderer(e,t);let C=16;t.signals?C=4096:t.onPush&&(C=64);const T=ya(i,Qc(t),null,C,i[n.index],n,o,_,null,null,m);return d.firstCreatePass&&qM(d,n,r.length-1),pI(i,T),i[n.index]=T}(Er,G,Zt,an,vt,T,R);Kt=aa(Oe,Mr),G&&function IX(n,e,t,r){if(r)Ia(n,t,["ng-version",j1.full]);else{const{attrs:i,classes:o}=function ju(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!La(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Ia(n,t,i),o&&o.length>0&&d1(n,t,o.join(" "))}}(R,Zt,G,r),void 0!==t&&function TX(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(Kt,this.ngContentSelectors,t),Mt=function SX(n,e,t,r,i,o){const a=$a(),d=i[Fr],m=gs(a,i);dI(d,i,a,t,null,r);for(let C=0;C<t.length;C++)yu(kf(i,d,a.directiveStart+C,a),i);k0(d,i,a),m&&yu(m,i);const _=kf(i,d,a.directiveStart+a.componentOffset,a);if(n[Xs]=i[Xs]=_,null!==o)for(const C of o)C(_,e);return nl(d,a,n),_}(_r,Zt,an,ot,vt,[DX]),YM(Oe,vt,null)}finally{Mx()}return new xX(this.componentType,Mt,Xg(Kt,vt),vt,Kt)}}class xX extends QS{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yX(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;ZM(o[Fr],o,i,e,t),this.previousInputValues.set(e,t),In(Mc(this._tNode.index,o))}}get injector(){return new pc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function DX(){const n=$a();Va(dr()[Fr],n)}function Bi(n){let e=function XF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(z(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new tn(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const a=n;a.inputs=_I(n.inputs),a.inputTransforms=_I(n.inputTransforms),a.declaredInputs=_I(n.declaredInputs),a.outputs=_I(n.outputs);const d=i.hostBindings;d&&kX(n,d);const m=i.viewQuery,_=i.contentQueries;if(m&&MX(n,m),_&&PX(n,_),dt(n.inputs,i.inputs),dt(n.declaredInputs,i.declaredInputs),dt(n.outputs,i.outputs),null!==i.inputTransforms&&(null===a.inputTransforms&&(a.inputTransforms={}),dt(a.inputTransforms,i.inputTransforms)),z(i)&&i.data.animation){const C=n.data;C.animation=(C.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let a=0;a<o.length;a++){const d=o[a];d&&d.ngInherit&&d(n),d===Bi&&(t=!1)}}e=Object.getPrototypeOf(e)}!function AX(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zl(i.hostAttrs,t=Zl(t,i.hostAttrs))}}(r)}function _I(n){return n===Sa?{}:n===Po?[]:n}function MX(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function PX(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function kX(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function QF(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function yI(n){return!!function KM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function th(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function gc(n,e,t,r){const i=dr();return th(i,yg(),e)&&(Fo(),Np(Js(),i,n,e,t,r)),gc}function Rs(n,e,t,r,i,o,a,d){const m=dr(),_=Fo(),C=n+Mr,T=_.firstCreatePass?function rZ(n,e,t,r,i,o,a,d,m){const _=e.consts,C=bo(e,n,4,a||null,Xc(_,d));Cy(e,t,C,Xc(_,m)),Va(e,C);const T=C.tView=Pl(2,C,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,_,null);return null!==e.queries&&(e.queries.template(e,C),T.queries=e.queries.embeddedTView(C)),C}(C,_,m,e,t,r,i,o,a):_.data[C];gu(T,!1);const R=hB(_,m,T,n);dc()&&ry(_,m,R,T),yu(R,m),pI(m,m[C]=OF(R,m,R,T)),M(T)&&$l(_,m,T),null!=a&&Ml(m,T,d)}let hB=function dB(n,e,t,r){return fc(!0),e[Ti].createComment("")};function EI(n){return function zl(n,e){return n[e]}(function q2(){return ro.lFrame.contextLView}(),Mr+n)}function oo(n,e,t){const r=dr();return th(r,yg(),e)&&mc(Fo(),Js(),r,n,e,r[Ti],t,!1),oo}function rP(n,e,t,r,i){const a=i?"class":"style";ZM(n,t,e.inputs[a],a,r)}function fr(n,e,t,r){const i=dr(),o=Fo(),a=Mr+n,d=i[Ti],m=o.firstCreatePass?function aZ(n,e,t,r,i,o){const a=e.consts,m=bo(e,n,2,r,Xc(a,i));return Cy(e,t,m,Xc(a,o)),null!==m.attrs&&mI(m,m.attrs,!1),null!==m.mergedAttrs&&mI(m,m.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,m),m}(a,o,i,e,t,r):o.data[a],_=fB(o,i,m,d,e,n);i[a]=_;const C=M(m);return gu(m,!0),f1(d,_,m),32!=(32&m.flags)&&dc()&&ry(o,i,_,m),0===function $C(){return ro.lFrame.elementDepthCount}()&&yu(_,i),function Cx(){ro.lFrame.elementDepthCount++}(),C&&($l(o,i,m),nl(o,m,i)),null!==r&&Ml(i,m),fr}function or(){let n=$a();Sx()?Ix():(n=n.parent,gu(n,!1));const e=n;(function VC(n){return ro.skipHydrationRootTNode===n})(e)&&function H2(){ro.skipHydrationRootTNode=null}(),function Nv(){ro.lFrame.elementDepthCount--}();const t=Fo();return t.firstCreatePass&&(Va(t,n),b(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Z2(n){return 0!=(8&n.flags)}(e)&&rP(t,e,dr(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Y2(n){return 0!=(16&n.flags)}(e)&&rP(t,e,dr(),e.stylesWithoutHost,!1),or}function Da(n,e,t,r){return fr(n,e,t,r),or(),Da}let fB=(n,e,t,r,i,o)=>(fc(!0),t0(r,i,function Hu(){return ro.lFrame.currentNamespace}()));function Ty(){return dr()}function iw(n){return!!n&&"function"==typeof n.then}function mB(n){return!!n&&"function"==typeof n.subscribe}function Bo(n,e,t,r){const i=dr(),o=Fo(),a=$a();return gB(o,i,i[Ti],a,n,e,r),Bo}function SI(n,e){const t=$a(),r=dr(),i=Fo();return gB(i,r,BF(zv(i.data),t,r),t,n,e),SI}function gB(n,e,t,r,i,o,a){const d=M(r),_=n.firstCreatePass&&FF(n),C=e[Xs],T=NF(e);let R=!0;if(3&r.type||a){const W=gs(r,e),ve=a?a(W):W,_e=T.length,re=a?vt=>a(ji(vt[r.index])):r.index;let Oe=null;if(!a&&d&&(Oe=function fZ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===t&&i[o+1]===r){const d=e[ph],m=i[o+2];return d.length>m?d[m]:null}"string"==typeof a&&(o+=2)}return null}(n,e,i,r.index)),null!==Oe)(Oe.__ngLastListenerFn__||Oe).__ngNextListenerFn__=o,Oe.__ngLastListenerFn__=o,R=!1;else{o=yB(r,e,C,o,!1);const vt=t.listen(ve,i,o);T.push(o,vt),_&&_.push(i,re,_e,_e+1)}}else o=yB(r,e,C,o,!1);const L=r.outputs;let G;if(R&&null!==L&&(G=L[i])){const W=G.length;if(W)for(let ve=0;ve<W;ve+=2){const Mt=e[G[ve]][G[ve+1]].subscribe(o),Kt=T.length;T.push(o,Mt),_&&_.push(i,r.index,Kt,-(Kt+1))}}}function _B(n,e,t,r){try{return _a(6,e,t),!1!==t(r)}catch(i){return zF(n,i),!1}finally{_a(7,e,t)}}function yB(n,e,t,r,i){return function o(a){if(a===Function)return r;In(n.componentOffset>-1?Mc(n.index,e):e);let m=_B(e,t,r,a),_=o.__ngNextListenerFn__;for(;_;)m=_B(e,t,_,a)&&m,_=_.__ngNextListenerFn__;return i&&!1===m&&a.preventDefault(),m}}function Jl(n=1){return function Px(n){return(ro.lFrame.contextLView=function GC(n,e){for(;n>0;)e=e[gh],n--;return e}(n,ro.lFrame.contextLView))[Xs]}(n)}function pZ(n,e){let t=null;const r=function fh(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?cm(n,o,!0):Ta(r,o))return i}else t=i}return t}function Lr(n){const e=dr()[Wa][mo];if(!e.projection){const r=e.projection=gp(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const a=n?pZ(o,n):0;null!==a&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function Tr(n,e=0,t){const r=dr(),i=Fo(),o=bo(i,Mr+n,16,null,t||null);null===o.projection&&(o.projection=e),Ix(),(!r[cc]||Df())&&32!=(32&o.flags)&&function EM(n,e,t){Ng(e[Ti],0,e,t,u1(n,t,e),CS(t.parent||e[mo],t,e))}(i,r,o)}function II(n,e){return n<<17|e<<2}function Kg(n){return n>>17&32767}function aP(n){return 2|n}function Dy(n){return(131068&n)>>2}function lP(n,e){return-131069&n|e<<2}function cP(n){return 1|n}function DB(n,e,t,r,i){const o=n[t+1],a=null===e;let d=r?Kg(o):Dy(o),m=!1;for(;0!==d&&(!1===m||a);){const C=n[d+1];bZ(n[d],e)&&(m=!0,n[d+1]=r?cP(C):aP(C)),d=r?Kg(C):Dy(C)}m&&(n[t+1]=r?aP(o):cP(o))}function bZ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&_p(n,e)>=0}function ow(n,e,t){return Vf(n,e,t,!1),ow}function Rc(n,e){return Vf(n,e,null,!0),Rc}function Vf(n,e,t,r){const i=dr(),o=Fo(),a=function Qs(n){const e=ro.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function NB(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[hc()],a=function LB(n,e){return e>=n.expandoStartIndex}(n,t);(function $B(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!a&&(e=!1),e=function AZ(n,e,t,r){const i=zv(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=sw(t=uP(null,n,e,t,r),e.attrs,r),o=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==i)if(t=uP(i,n,e,t,r),null===o){let m=function MZ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Dy(r))return n[Kg(r)]}(n,e,r);void 0!==m&&Array.isArray(m)&&(m=uP(null,n,e,m[1],r),m=sw(m,e.attrs,r),function PZ(n,e,t,r){n[Kg(t?e.classBindings:e.styleBindings)]=r}(n,e,r,m))}else o=function kZ(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=sw(r,n[o].hostAttrs,t);return sw(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function yZ(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,d=Kg(a),m=Dy(a);n[r]=t;let C,_=!1;if(Array.isArray(t)?(C=t[1],(null===C||_p(t,C)>0)&&(_=!0)):C=t,i)if(0!==m){const R=Kg(n[d+1]);n[r+1]=II(R,d),0!==R&&(n[R+1]=lP(n[R+1],r)),n[d+1]=function gZ(n,e){return 131071&n|e<<17}(n[d+1],r)}else n[r+1]=II(d,0),0!==d&&(n[d+1]=lP(n[d+1],r)),d=r;else n[r+1]=II(m,0),0===d?d=r:n[m+1]=lP(n[m+1],r),m=r;_&&(n[r+1]=aP(n[r+1])),DB(n,C,r,!0),DB(n,C,r,!1),function vZ(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&_p(o,e)>=0&&(t[r+1]=cP(t[r+1]))}(e,C,n,r,o),a=II(d,m),o?e.classBindings=a:e.styleBindings=a}(i,o,e,t,a,r)}}(o,n,a,r),e!==mi&&th(i,a,e)&&function BB(n,e,t,r,i,o,a,d){if(!(3&e.type))return;const m=n.data,_=m[d+1],C=function _Z(n){return 1==(1&n)}(_)?zB(m,e,t,i,Dy(_),a):void 0;TI(C)||(TI(o)||function mZ(n){return 2==(2&n)}(_)&&(o=zB(m,null,t,i,d,a)),function SM(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Cp.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Cp.Important),n.setStyle(t,r,i,o))}}(r,a,Do(hc(),t),i,o))}(o,o.data[hc()],i,i[Ti],n,i[a+1]=function NZ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Rt(wh(n)))),n}(e,t),r,a)}function uP(n,e,t,r,i){let o=null;const a=t.directiveEnd;let d=t.directiveStylingLast;for(-1===d?d=t.directiveStart:d++;d<a&&(o=e[d],r=sw(r,o.hostAttrs,i),o!==n);)d++;return null!==n&&(t.directiveStylingLast=d),r}function sw(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Wu(n,a,!!t||e[++o]))}return void 0===n?null:n}function zB(n,e,t,r,i,o){const a=null===e;let d;for(;i>0;){const m=n[i],_=Array.isArray(m),C=_?m[1]:m,T=null===C;let R=t[i+1];R===mi&&(R=T?Po:void 0);let L=T?Gx(R,r):C===r?R:void 0;if(_&&!TI(L)&&(L=Gx(m,r)),TI(L)&&(d=L,a))return d;const G=n[i+1];i=a?Kg(G):Dy(G)}if(null!==e){let m=o?e.residualClasses:e.residualStyles;null!=m&&(d=Gx(m,r))}return d}function TI(n){return void 0!==n}function Vr(n,e=""){const t=dr(),r=Fo(),i=n+Mr,o=r.firstCreatePass?bo(r,i,1,e,null):r.data[i],a=VB(r,t,o,e,n);t[i]=a,dc()&&ry(r,t,a,o),gu(o,!1)}let VB=(n,e,t,r,i)=>(fc(!0),function J_(n,e){return n.createText(e)}(e[Ti],r));function Qg(n){return Yh("",n,""),Qg}function Yh(n,e,t){const r=dr(),i=function O0(n,e,t,r){return th(n,yg(),t)?e+jr(t)+r:mi}(r,n,e,t);return i!==mi&&function Bm(n,e,t){const r=Do(e,n);!function c1(n,e,t){n.setValue(e,t)}(n[Ti],r,t)}(r,hc(),i),Yh}function hP(n,e,t){const r=dr();return th(r,yg(),e)&&mc(Fo(),Js(),r,n,e,r[Ti],t,!0),hP}function DI(n,e,t){const r=dr();if(th(r,yg(),e)){const o=Fo(),a=Js();mc(o,a,r,n,e,BF(zv(o.data),a,r),t,!0)}return DI}const G0="en-US";let l3=G0;function pP(n,e,t,r,i){if(n=kn(n),Array.isArray(n))for(let o=0;o<n.length;o++)pP(n[o],e,t,r,i);else{const o=Fo(),a=dr(),d=$a();let m=Pp(n)?n:kn(n.provide);const _=Rm(n),C=1048575&d.providerIndexes,T=d.directiveStart,R=d.providerIndexes>>20;if(Pp(n)||!n.multi){const L=new vd(_,i,he),G=gP(m,e,i?C:C+R,T);-1===G?(Lx(Lu(d,a),o,m),mP(o,n,e.length),e.push(m),d.directiveStart++,d.directiveEnd++,i&&(d.providerIndexes+=1048576),t.push(L),a.push(L)):(t[G]=L,a[G]=L)}else{const L=gP(m,e,C+R,T),G=gP(m,e,C,C+R),ve=G>=0&&t[G];if(i&&!ve||!i&&!(L>=0&&t[L])){Lx(Lu(d,a),o,m);const _e=function rK(n,e,t,r,i){const o=new vd(n,t,he);return o.multi=[],o.index=e,o.componentProviders=0,R3(o,i,r&&!t),o}(i?nK:tK,t.length,i,r,_);!i&&ve&&(t[G].providerFactory=_e),mP(o,n,e.length,0),e.push(m),d.directiveStart++,d.directiveEnd++,i&&(d.providerIndexes+=1048576),t.push(_e),a.push(_e)}else mP(o,n,L>-1?L:G,R3(t[i?G:L],_,!i&&r));!i&&r&&ve&&t[G].componentProviders++}}}function mP(n,e,t,r){const i=Pp(e),o=function Pm(n){return!!n.useClass}(e);if(i||o){const m=(o?kn(e.useClass):e).prototype.ngOnDestroy;if(m){const _=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const C=_.indexOf(t);-1===C?_.push(t,[r,m]):_[C+1].push(r,m)}else _.push(t,m)}}}function R3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gP(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tK(n,e,t,r){return _P(this.multi,[])}function nK(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,d=kf(t,t[Fr],this.providerFactory.index,r);o=d.slice(0,a),_P(i,o);for(let m=a;m<d.length;m++)o.push(d[m])}else o=[],_P(i,o);return o}function _P(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Is(n,e=[]){return t=>{t.providersResolver=(r,i)=>function eK(n,e,t){const r=Fo();if(r.firstCreatePass){const i=z(n);pP(t,r.data,r.blueprint,i,!0),pP(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class My{}class O3{}class yP extends My{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qF(this);const i=oa(e);this._bootstrapComponents=At(i.bootstrap),this._r3Injector=oI(e,t,[{provide:My,useValue:this},{provide:Eh,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class vP extends O3{constructor(e){super(),this.moduleType=e}create(e){return new yP(this.moduleType,e,[])}}class L3 extends My{constructor(e){super(),this.componentFactoryResolver=new qF(this),this.instance=null;const t=new Rp([...e.providers,{provide:My,useValue:this},{provide:Eh,useValue:this.componentFactoryResolver}],e.parent||kp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function bP(n,e,t=null){return new L3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let sK=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=g0(0,t.type),i=r.length>0?bP([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=yr({token:n,providedIn:"environment",factory:()=>new n(pn(Al))})}return n})();function N3(n){n.getStandaloneInjector=e=>e.get(sK).getOrCreateStandaloneInjector(n)}function kK(){return this._results[Symbol.iterator]()}class RI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new l)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=RI.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=kK)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function vh(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function jx(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function OK(n,e,t,r=!0){const i=e[Fr];if(function vu(n,e,t,r){const i=vl+r,o=t.length;r>0&&(t[i-1][Es]=e),r<o-vl?(e[Es]=t[i],Yd(t,vl+r,e)):(t.push(e),e[Es]=null),e[Wi]=t;const a=e[Tl];null!==a&&t!==a&&function ey(n,e){const t=n[Ja];e[Wa]!==e[Wi][Wi][Wa]&&(n[ku]=!0),null===t?n[Ja]=[e]:t.push(e)}(a,e);const d=e[Fl];null!==d&&d.insertView(n),e[Ri]|=128}(i,e,n,t),r){const o=xh(t,n),a=e[Ti],d=ny(a,n[ga]);null!==d&&function vS(n,e,t,r,i,o){r[sa]=i,r[mo]=e,sy(n,r,t,1,i,o)}(i,n[mo],a,e,d,o)}}let af=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=FK}return n})();const LK=af,NK=class extends LK{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function RK(n,e,t,r){const i=e.tView,d=ya(n,i,t,4096&n[Ri]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);d[Tl]=n[e.index];const _=n[Fl];return null!==_&&(d[Fl]=_.createEmbeddedView(i)),YM(i,d,t),d}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Q1(i)}};function FK(){return OI($a(),dr())}function OI(n,e){return 4&n.type?new NK(e,n,Xg(n,e)):null}let Sd=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=jK}return n})();function jK(){return ez($a(),dr())}const GK=Sd,Q3=class extends GK{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xg(this._hostTNode,this._hostLView)}get injector(){return new pc(this._hostTNode,this._hostLView)}get parentInjector(){const e=U_(this._hostTNode,this._hostLView);if(fm(e)){const t=mm(e,this._hostLView),r=pm(e);return new pc(t[Fr].data[r+8],t)}return new pc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=J3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-vl}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const d=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(d,i,false),d}createComponent(e,t,r,i,o){const a=e&&!function j_(n){return"function"==typeof n}(e);let d;if(a)d=t;else{const W=t||{};d=W.index,r=W.injector,i=W.projectableNodes,o=W.environmentInjector||W.ngModuleRef}const m=a?e:new J1(po(e)),_=r||this.parentInjector;if(!o&&null==m.ngModule){const ve=(a?_:this.parentInjector).get(Al,null);ve&&(o=ve)}po(m.componentType??{});const L=m.create(_,i,null,o);return this.insertImpl(L.hostView,d,false),L}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function yd(n){return f(n[Wi])}(i)){const m=this.indexOf(e);if(-1!==m)this.detach(m);else{const _=i[Wi],C=new Q3(_,_[mo],_[Wi]);C.detach(C.indexOf(e))}}const a=this._adjustIndex(t),d=this._lContainer;return OK(d,i,a,!r),e.attachToViewContainerRef(),Yd(wP(d),a,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=J3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ip(this._lContainer,t);r&&(Kd(wP(this._lContainer),t),r0(r[Fr],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ip(this._lContainer,t);return r&&null!=Kd(wP(this._lContainer),t)?new Q1(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function J3(n){return n[8]}function wP(n){return n[8]||(n[8]=[])}function ez(n,e){let t;const r=e[n.index];return f(r)?t=r:(t=OF(r,e,null,n),e[n.index]=t,pI(e,t)),tz(t,e,n,r),new Q3(t,n,e)}let tz=function nz(n,e,t,r){if(n[ga])return;let i;i=8&t.type?ji(r):function HK(n,e){const t=n[Ti],r=t.createComment(""),i=gs(e,n);return Sm(t,ny(t,i),r,function ES(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ga]=i};class EP{constructor(e){this.queryList=e,this.matches=null}clone(){return new EP(this.queryList)}setDirty(){this.queryList.setDirty()}}class CP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const a=t.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new CP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==az(e,t).matches&&this.queries[t].setDirty()}}class rz{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class SP{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new SP(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class IP{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new IP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,XK(t,o)),this.matchTNodeWithReadOption(e,t,_m(t,e,o,!1,!1))}else r===af?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,_m(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===er||i===Sd||i===af&&4&t.type)this.addMatch(t.index,-2);else{const o=_m(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function XK(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function YK(n,e,t,r){return-1===t?function ZK(n,e){return 11&n.type?Xg(n,e):4&n.type?OI(n,e):null}(e,n):-2===t?function KK(n,e,t){return t===er?Xg(e,n):t===af?OI(e,n):t===Sd?ez(e,n):void 0}(n,e,r):kf(n,n[Fr],t,e)}function iz(n,e,t,r){const i=e[Fl].queries[r];if(null===i.matches){const o=n.data,a=t.matches,d=[];for(let m=0;m<a.length;m+=2){const _=a[m];d.push(_<0?null:YK(e,o[_],a[m+1],t.metadata.read))}i.matches=d}return i.matches}function TP(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const a=iz(n,e,i,t);for(let d=0;d<o.length;d+=2){const m=o[d];if(m>0)r.push(a[d/2]);else{const _=o[d+1],C=e[-m];for(let T=vl;T<C.length;T++){const R=C[T];R[Tl]===R[Wi]&&TP(R[Fr],R,_,r)}if(null!==C[Ja]){const T=C[Ja];for(let R=0;R<T.length;R++){const L=T[R];TP(L[Fr],L,_,r)}}}}}return r}function Oc(n){const e=dr(),t=Fo(),r=qh();F_(r+1);const i=az(t,r);if(n.dirty&&function Tf(n){return 4==(4&n[Ri])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?TP(t,e,r,[]):iz(t,e,i,r);n.reset(o,I0),n.notifyOnChanges()}return!0}return!1}function jf(n,e,t){const r=Fo();r.firstCreatePass&&(sz(r,new rz(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),oz(r,dr(),e)}function $p(n,e,t,r){const i=Fo();if(i.firstCreatePass){const o=$a();sz(i,new rz(e,t,r),o.index),function JK(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}oz(i,dr(),t)}function Lc(){return function QK(n,e){return n[Fl].queries[e].queryList}(dr(),qh())}function oz(n,e,t){const r=new RI(4==(4&t));(function cI(n,e,t,r){const i=NF(e);i.push(t),n.firstCreatePass&&FF(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Fl]&&(e[Fl]=new CP),e[Fl].queries.push(new EP(r))}function sz(n,e,t){null===n.queries&&(n.queries=new SP),n.queries.track(new IP(e,t))}function az(n,e){return n.queries.getByIndex(e)}const FI=new Ar("Application Initializer");let RP=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=rr(FI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(iw(o))t.push(o);else if(mB(o)){const a=new Promise((d,m)=>{o.subscribe({complete:d,error:m})});t.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cz=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Vp=new Ar("LocaleId",{providedIn:"root",factory:()=>rr(Vp,ti.Optional|ti.SkipSelf)||function xQ(){return typeof $localize<"u"&&$localize.locale||G0}()});let BI=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new rt(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class CQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Sz=(()=>{class n{compileModuleSync(t){return new vP(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=At(oa(t).declarations).reduce((a,d)=>{const m=po(d);return m&&a.push(new J1(m)),a},[]);return new CQ(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Az=new Ar(""),$I=new Ar("");let BP,NP=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,BP||(function GQ(n){BP=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{y.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(pn(y),pn(FP),pn($I))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})(),FP=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return BP?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Jg=null;const Mz=new Ar("AllowMultipleToken"),zP=new Ar("PlatformDestroyListeners"),$P=new Ar("appBootstrapListener");class kz{constructor(e,t){this.name=e,this.token=t}}function Oz(n,e,t=[]){const r=`Platform: ${e}`,i=new Ar(r);return(o=[])=>{let a=VP();if(!a||a.injector.get(Mz,!1)){const d=[...t,...o,{provide:i,useValue:!0}];n?n(d):function WQ(n){if(Jg&&!Jg.get(Mz,!1))throw new tn(400,!1);(function Pz(){!function rn(n){qt=n}(()=>{throw new tn(600,!1)})})(),Jg=n;const e=n.get(Nz);(function Rz(n){n.get(M1,null)?.forEach(t=>t())})(n)}(function Lz(n=[],e){return $s.create({name:e,providers:[{provide:D1,useValue:"platform"},{provide:zP,useValue:new Set([()=>Jg=null])},...n]})}(d,r))}return function ZQ(n){const e=VP();if(!e)throw new tn(401,!1);return e}()}}function VP(){return Jg?.get(Nz)??null}let Nz=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function YQ(n="zone.js",e){return"noop"===n?new H:"zone.js"===n?new y(e):n}(r?.ngZone,function Fz(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function oK(n,e,t){return new yP(n,e,t)}(t.moduleType,this.injector,function Uz(n){return[{provide:y,useFactory:n},{provide:Jd,multi:!0,useFactory:()=>{const e=rr(QQ,{optional:!0});return()=>e.initialize()}},{provide:Vz,useFactory:KQ},{provide:Y,useFactory:se}]}(()=>i)),a=o.injector.get(Qu,null);return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:m=>{a.handleError(m)}});o.onDestroy(()=>{VI(this._modules,o),d.unsubscribe()})}),function Bz(n,e,t){try{const r=t();return iw(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(a,i,()=>{const d=o.injector.get(RP);return d.runInitializers(),d.donePromise.then(()=>(function c3(n){Vc(n,"Expected localeId to be defined"),"string"==typeof n&&(l3=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Vp,G0)||G0),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=zz({},r);return function HQ(n,e,t){const r=new vP(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(zm);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new tn(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tn(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(zP,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(pn($s))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function zz(n,e){return Array.isArray(e)?e.reduce(zz,n):{...n,...e}}let zm=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=rr(Vz),this.zoneIsStable=rr(Y),this.componentTypes=[],this.components=[],this.isStable=rr(BI).hasPendingTasks.pipe(ye(t=>t?Tt(!1):this.zoneIsStable),nt(),Nt()),this._injector=rr(Al)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof z1;if(!this._injector.get(RP).done)throw!i&&function Fa(n){const e=po(n)||ws(n)||ia(n);return null!==e&&e.standalone}(t),new tn(405,!1);let a;a=i?t:this._injector.get(Eh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const d=function qQ(n){return n.isBoundToModule}(a)?void 0:this._injector.get(My),_=a.create($s.NULL,[],r||a.selector,d),C=_.location.nativeElement,T=_.injector.get(Az,null);return T?.registerApplication(C),_.onDestroy(()=>{this.detachView(_.hostView),VI(this.components,_),T?.unregisterApplication(C)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new tn(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;VI(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get($P,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>VI(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new tn(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Vz=new Ar("",{providedIn:"root",factory:()=>rr(Qu).handleError.bind(void 0)});function KQ(){const n=rr(y),e=rr(Qu);return t=>n.runOutsideAngular(()=>e.handleError(t))}let QQ=(()=>{class n{constructor(){this.zone=rr(y),this.applicationRef=rr(zm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Or=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eJ}return n})();function eJ(n){return function tJ(n,e,t){if(w(n)&&!t){const r=Mc(n.index,e);return new Q1(r,r)}return 47&n.type?new Q1(e[Wa],e):null}($a(),dr(),16==(16&n))}class qz{constructor(){}supports(e){return yI(e)}create(e){return new aJ(e)}}const sJ=(n,e)=>e;class aJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sJ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const a=!r||t&&t.currentIndex<Xz(r,i,o)?t:r,d=Xz(a,i,o),m=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{o||(o=[]);const _=d-i,C=m-i;if(_!=C){for(let R=0;R<_;R++){const L=R<o.length?o[R]:o[R]=0,G=L+R;C<=G&&G<_&&(o[R]=L+1)}o[a.previousIndex]=C-_}}d!==m&&e(a,d,m)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!yI(e))throw new tn(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,a,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let d=0;d<this.length;d++)o=e[d],a=this._trackByFn(d,o),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,o,a,d)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,a,d),r=!0),t=t._next}else i=0,function zX(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,d=>{a=this._trackByFn(i,d),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,d,a,i)),Object.is(t.item,d)||this._addIdentityChange(t,d)):(t=this._mismatch(t,d,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new lJ(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Wz),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wz),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class lJ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Wz{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new cJ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xz(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Yz(){return new GI([new qz])}let GI=(()=>{class n{static#e=this.\u0275prov=yr({token:n,providedIn:"root",factory:Yz});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Yz()),deps:[[n,new Pg,new xm]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new tn(901,!1)}}return n})();const pJ=Oz(null,"core",[]);let mJ=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(pn(zm))};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})();function W0(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function s4(n){const e=po(n);if(!e)return null;const t=new J1(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}let WP=null;function e_(){return WP}class AJ{}const Ao=new Ar("DocumentToken");let XP=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return rr(PJ)},providedIn:"platform"})}return n})();const MJ=new Ar("Location Initialized");let PJ=(()=>{class n extends XP{constructor(){super(),this._doc=rr(Ao),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e_().getBaseHref(this._doc)}onPopState(t){const r=e_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=e_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function ZP(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function a4(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $m(n){return n&&"?"!==n[0]?"?"+n:n}let Vm=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return rr(c4)},providedIn:"root"})}return n})();const l4=new Ar("appBaseHref");let c4=(()=>{class n extends Vm{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??rr(Ao).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ZP(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$m(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+$m(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+$m(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(XP),pn(l4,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kJ=(()=>{class n extends Vm{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ZP(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+$m(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+$m(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(XP),pn(l4,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})(),X0=(()=>{class n{constructor(t){this._subject=new l,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function LJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(a4(u4(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$m(r))}normalize(t){return n.stripTrailingSlash(function OJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,u4(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$m(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$m(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=$m;static#t=this.joinWithSlash=ZP;static#n=this.stripTrailingSlash=a4;static#r=this.\u0275fac=function(r){return new(r||n)(pn(Vm))};static#i=this.\u0275prov=yr({token:n,factory:function(){return function RJ(){return new X0(pn(Vm))}()},providedIn:"root"})}return n})();function u4(n){return n.replace(/\/index.html$/,"")}function v4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class xee{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let w4=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new xee(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const d=r.get(o);r.move(d,a),E4(d,i)}});for(let i=0,o=r.length;i<o;i++){const d=r.get(i).context;d.index=i,d.count=o,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{E4(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(he(Sd),he(af),he(GI))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function E4(n,e){n.context.$implicit=e.item}let Hf=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){C4("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){C4("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(he(Sd),he(af))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class wee{constructor(){this.$implicit=null,this.ngIf=null}}function C4(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Rt(e)}'.`)}let vw=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})();const T4="browser",Zee="server";function hk(n){return n===Zee}let Jee=(()=>{class n{static#e=this.\u0275prov=yr({token:n,providedIn:"root",factory:()=>new ete(pn(Ao),window)})}return n})();class ete{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function tte(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class D4{}class Cte extends AJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pk extends Cte{static makeCurrent(){!function DJ(n){WP||(WP=n)}(new pk)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ste(){return xw=xw||document.querySelector("base"),xw?xw.getAttribute("href"):null}();return null==t?null:function Ite(n){iT=iT||document.createElement("a"),iT.setAttribute("href",n);const e=iT.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){xw=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return v4(document.cookie,e)}}let iT,xw=null,Dte=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();const mk=new Ar("EventManagerPlugins");let R4=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new tn(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(pn(mk),pn(y))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();class O4{constructor(e){this._doc=e}}const gk="ng-app-id";let L4=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hk(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${gk}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(gk),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(gk,this.appId),a}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,a=o.get(r)?.elements;a?a.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao),pn(dy),pn(P1,8),pn(Bf))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();const _k={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yk=/%COMP%/g,kte=new Ar("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function F4(n,e){return e.map(t=>t.replace(yk,n))}let vk=(()=>{class n{constructor(t,r,i,o,a,d,m,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=d,this.ngZone=m,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=hk(d),this.defaultRenderer=new bk(t,a,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Bs.ShadowDom&&(r={...r,encapsulation:Bs.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof z4?i.applyToHost(t):i instanceof xk&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const a=this.doc,d=this.ngZone,m=this.eventManager,_=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case Bs.Emulated:o=new z4(m,_,r,this.appId,C,a,d,T);break;case Bs.ShadowDom:return new Nte(m,_,t,r,a,d,this.nonce,T);default:o=new xk(m,_,r,C,a,d,T)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(R4),pn(L4),pn(dy),pn(kte),pn(Ao),pn(Bf),pn(y),pn(P1))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();class bk{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_k[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(B4(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(B4(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new tn(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=_k[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_k[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cp.DashCase|Cp.Important)?e.style.setProperty(t,r,i&Cp.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cp.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=e_().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function B4(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nte extends bk{constructor(e,t,r,i,o,a,d,m){super(e,o,a,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=F4(i.id,i.styles);for(const C of _){const T=document.createElement("style");d&&T.setAttribute("nonce",d),T.textContent=C,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class xk extends bk{constructor(e,t,r,i,o,a,d,m){super(e,o,a,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=m?F4(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class z4 extends xk{constructor(e,t,r,i,o,a,d,m){const _=i+"-"+r.id;super(e,t,r,o,a,d,m,_),this.contentAttr=function Rte(n){return"_ngcontent-%COMP%".replace(yk,n)}(_),this.hostAttr=function Ote(n){return"_nghost-%COMP%".replace(yk,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Fte=(()=>{class n extends O4{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();const $4=["alt","control","meta","shift"],Bte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $te=(()=>{class n extends O4{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>e_().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let a="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),a="code."),$4.forEach(_=>{const C=r.indexOf(_);C>-1&&(r.splice(C,1),a+=_+".")}),a+=o,0!=r.length||0===o.length)return null;const m={};return m.domEventName=i,m.fullKey=a,m}static matchEventFullKeyCode(t,r){let i=Bte[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),$4.forEach(a=>{a!==i&&(0,zte[a])(t)&&(o+=a+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();const Gte=Oz(pJ,"browser",[{provide:Bf,useValue:T4},{provide:M1,useValue:function Vte(){pk.makeCurrent()},multi:!0},{provide:Ao,useFactory:function jte(){return function IM(n){p1=n}(document),document},deps:[]}]),Hte=new Ar(""),j4=[{provide:$I,useClass:class Tte{addToWindow(e){xs.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new tn(5103,!1);return o},xs.getAllAngularTestabilities=()=>e.getAllTestabilities(),xs.getAllAngularRootElements=()=>e.getAllRootElements(),xs.frameworkStabilizers||(xs.frameworkStabilizers=[]),xs.frameworkStabilizers.push(r=>{const i=xs.getAllAngularTestabilities();let o=i.length,a=!1;const d=function(m){a=a||m,o--,0==o&&r(a)};i.forEach(m=>{m.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?e_().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Az,useClass:NP,deps:[y,FP,$I]},{provide:NP,useClass:NP,deps:[y,FP,$I]}],G4=[{provide:D1,useValue:"root"},{provide:Qu,useFactory:function Ute(){return new Qu},deps:[]},{provide:mk,useClass:Fte,multi:!0,deps:[Ao,y,Bf]},{provide:mk,useClass:$te,multi:!0,deps:[Ao]},vk,L4,R4,{provide:yy,useExisting:vk},{provide:D4,useClass:Dte,deps:[]},[]];let H4=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:dy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Hte,12))};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({providers:[...G4,...j4],imports:[vw,mJ]})}return n})(),q4=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:function(r){let i=null;return i=r?new r:function Wte(){return new q4(pn(Ao))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let oT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(r){let i=null;return i=r?new(r||n):pn(Z4),i},providedIn:"root"})}return n})(),Z4=(()=>{class n extends oT{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ua.NONE:return r;case Ua.HTML:return Qd(r,"HTML")?wh(r):Vg(this._doc,String(r)).toString();case Ua.STYLE:return Qd(r,"Style")?wh(r):r;case Ua.SCRIPT:if(Qd(r,"Script"))return wh(r);throw new tn(5200,!1);case Ua.URL:return Qd(r,"URL")?wh(r):Dm(String(r));case Ua.RESOURCE_URL:if(Qd(r,"ResourceURL"))return wh(r);throw new tn(5201,!1);default:throw new tn(5202,!1)}}bypassSecurityTrustHtml(t){return function LS(n){return new a0(n)}(t)}bypassSecurityTrustStyle(t){return function _1(n){return new Bg(n)}(t)}bypassSecurityTrustScript(t){return function Nu(n){return new OS(n)}(t)}bypassSecurityTrustUrl(t){return function y1(n){return new l0(n)}(t)}bypassSecurityTrustResourceUrl(t){return function NS(n){return new g1(n)}(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:function(r){let i=null;return i=r?new r:function Kte(n){return new Z4(n.get(Ao))}(pn($s)),i},providedIn:"root"})}return n})();function Y0(n,e){return de(e)?Bn(n,e,1):Bn(n,1)}function yc(n,e){return _n((t,r)=>{let i=0;t.subscribe(Pn(r,o=>n.call(e,o,i++)&&r.next(o)))})}function K0(n){return _n((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class sT{}class aT{}class uf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof uf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new uf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof uf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let a=this.headers.get(t);if(!a)return;a=a.filter(d=>-1===o.indexOf(d)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Qte{encodeKey(e){return K4(e)}encodeValue(e){return K4(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ene=/%(\d[a-f0-9])/gi,tne={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function K4(n){return encodeURIComponent(n).replace(ene,(e,t)=>tne[t]??e)}function lT(n){return`${n}`}class n_{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qte,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Jte(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[a,d]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],m=t.get(a)||[];m.push(d),t.set(a,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(lT):[lT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new n_({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(lT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(lT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class nne{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Q4(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function J4(n){return typeof Blob<"u"&&n instanceof Blob}function e5(n){return typeof FormData<"u"&&n instanceof FormData}class ww{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function rne(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new uf),this.context||(this.context=new nne),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+a}}else this.params=new n_,this.urlWithParams=t}serializeBody(){return null===this.body?null:Q4(this.body)||J4(this.body)||e5(this.body)||function ine(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof n_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||e5(this.body)?null:J4(this.body)?this.body.type||null:Q4(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof n_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,_=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((T,R)=>T.set(R,e.setHeaders[R]),m)),e.setParams&&(_=Object.keys(e.setParams).reduce((T,R)=>T.set(R,e.setParams[R]),_)),new ww(t,r,o,{params:_,headers:m,context:C,reportProgress:d,responseType:i,withCredentials:a})}}var Q0=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Q0||{});class Ek{constructor(e,t=200,r="OK"){this.headers=e.headers||new uf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ck extends Ek{constructor(e={}){super(e),this.type=Q0.ResponseHeader}clone(e={}){return new Ck({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class J0 extends Ek{constructor(e={}){super(e),this.type=Q0.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new J0({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class t5 extends Ek{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Sk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ew=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ww)o=t;else{let m,_;m=i.headers instanceof uf?i.headers:new uf(i.headers),i.params&&(_=i.params instanceof n_?i.params:new n_({fromObject:i.params})),o=new ww(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=Tt(o).pipe(Y0(m=>this.handler.handle(m)));if(t instanceof ww||"events"===i.observe)return a;const d=a.pipe(yc(m=>m instanceof J0));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe(jt(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return d.pipe(jt(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return d.pipe(jt(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return d.pipe(jt(m=>m.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new n_).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Sk(i,r))}post(t,r,i={}){return this.request("POST",t,Sk(i,r))}put(t,r,i={}){return this.request("PUT",t,Sk(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(pn(sT))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();function o5(n,e){return e(n)}function sne(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const lne=new Ar(""),Cw=new Ar(""),s5=new Ar("");function cne(){let n=null;return(e,t)=>{null===n&&(n=(rr(lne,{optional:!0})??[]).reduceRight(sne,o5));const r=rr(BI),i=r.add();return n(e,t).pipe(K0(()=>r.remove(i)))}}let a5=(()=>{class n extends sT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=rr(BI)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Cw),...this.injector.get(s5,[])]));this.chain=i.reduceRight((o,a)=>function ane(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(o,a,this.injector),o5)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(K0(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(pn(aT),pn(Al))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();const fne=/^\)\]\}',?\n/;let c5=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new tn(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?$t(r.\u0275loadImpl()):Tt(null)).pipe(ye(()=>new Me(o=>{const a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((W,ve)=>a.setRequestHeader(W,ve.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const W=t.detectContentTypeHeader();null!==W&&a.setRequestHeader("Content-Type",W)}if(t.responseType){const W=t.responseType.toLowerCase();a.responseType="json"!==W?W:"text"}const d=t.serializeBody();let m=null;const _=()=>{if(null!==m)return m;const W=a.statusText||"OK",ve=new uf(a.getAllResponseHeaders()),_e=function pne(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return m=new Ck({headers:ve,status:a.status,statusText:W,url:_e}),m},C=()=>{let{headers:W,status:ve,statusText:_e,url:re}=_(),Oe=null;204!==ve&&(Oe=typeof a.response>"u"?a.responseText:a.response),0===ve&&(ve=Oe?200:0);let vt=ve>=200&&ve<300;if("json"===t.responseType&&"string"==typeof Oe){const Mt=Oe;Oe=Oe.replace(fne,"");try{Oe=""!==Oe?JSON.parse(Oe):null}catch(Kt){Oe=Mt,vt&&(vt=!1,Oe={error:Kt,text:Oe})}}vt?(o.next(new J0({body:Oe,headers:W,status:ve,statusText:_e,url:re||void 0})),o.complete()):o.error(new t5({error:Oe,headers:W,status:ve,statusText:_e,url:re||void 0}))},T=W=>{const{url:ve}=_(),_e=new t5({error:W,status:a.status||0,statusText:a.statusText||"Unknown Error",url:ve||void 0});o.error(_e)};let R=!1;const L=W=>{R||(o.next(_()),R=!0);let ve={type:Q0.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(ve.total=W.total),"text"===t.responseType&&a.responseText&&(ve.partialText=a.responseText),o.next(ve)},G=W=>{let ve={type:Q0.UploadProgress,loaded:W.loaded};W.lengthComputable&&(ve.total=W.total),o.next(ve)};return a.addEventListener("load",C),a.addEventListener("error",T),a.addEventListener("timeout",T),a.addEventListener("abort",T),t.reportProgress&&(a.addEventListener("progress",L),null!==d&&a.upload&&a.upload.addEventListener("progress",G)),a.send(d),o.next({type:Q0.Sent}),()=>{a.removeEventListener("error",T),a.removeEventListener("abort",T),a.removeEventListener("load",C),a.removeEventListener("timeout",T),t.reportProgress&&(a.removeEventListener("progress",L),null!==d&&a.upload&&a.upload.removeEventListener("progress",G)),a.readyState!==a.DONE&&a.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(pn(D4))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();const Ik=new Ar("XSRF_ENABLED"),u5=new Ar("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),h5=new Ar("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class d5{}let _ne=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=v4(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao),pn(Bf),pn(u5))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();function yne(n,e){const t=n.url.toLowerCase();if(!rr(Ik)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=rr(d5).getToken(),i=rr(h5);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var r_=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(r_||{});function vne(...n){const e=[Ew,c5,a5,{provide:sT,useExisting:a5},{provide:aT,useExisting:c5},{provide:Cw,useValue:yne,multi:!0},{provide:Ik,useValue:!0},{provide:d5,useClass:_ne}];for(const t of n)e.push(...t.\u0275providers);return function m0(n){return{\u0275providers:n}}(e)}const f5=new Ar("LEGACY_INTERCEPTOR_FN");function bne(){return function ky(n,e){return{\u0275kind:n,\u0275providers:e}}(r_.LegacyInterceptors,[{provide:f5,useFactory:cne},{provide:Cw,useExisting:f5,multi:!0}])}let xne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({providers:[vne(bne())]})}return n})();const{isArray:Tne}=Array,{getPrototypeOf:Dne,prototype:Ane,keys:Mne}=Object;function p5(n){if(1===n.length){const e=n[0];if(Tne(e))return{args:e,keys:null};if(function Pne(n){return n&&"object"==typeof n&&Dne(n)===Ane}(e)){const t=Mne(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:kne}=Array;function Tk(n){return jt(e=>function Rne(n,e){return kne(e)?n(...e):n(e)}(n,e))}function m5(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function g5(...n){const e=so(n),{args:t,keys:r}=p5(n),i=new Me(o=>{const{length:a}=t;if(!a)return void o.complete();const d=new Array(a);let m=a,_=a;for(let C=0;C<a;C++){let T=!1;Fi(t[C]).subscribe(Pn(o,R=>{T||(T=!0,_--),d[C]=R},()=>m--,void 0,()=>{(!m||!T)&&(_||o.next(r?m5(r,d):d),o.complete())}))}});return e?i.pipe(Tk(e)):i}let _5=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ku),he(er))};static#t=this.\u0275dir=Kn({type:n})}return n})(),Ry=(()=>{class n extends _5{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275dir=Kn({type:n,features:[Bi]})}return n})();const nh=new Ar("NgValueAccessor"),Lne={provide:nh,useExisting:Et(()=>Sw),multi:!0},Fne=new Ar("CompositionEventMode");let Sw=(()=>{class n extends _5{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nne(){const n=e_()?e_().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ku),he(er),he(Fne,8))};static#t=this.\u0275dir=Kn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Bo("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[Is([Lne]),Bi]})}return n})();function i_(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function v5(n){return null!=n&&"number"==typeof n.length}const eu=new Ar("NgValidators"),o_=new Ar("NgAsyncValidators"),Bne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Up{static min(e){return b5(e)}static max(e){return x5(e)}static required(e){return w5(e)}static requiredTrue(e){return function E5(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function C5(n){return i_(n.value)||Bne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function S5(n){return e=>i_(e.value)||!v5(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function I5(n){return e=>v5(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function T5(n){if(!n)return uT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(i_(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return R5(e)}static composeAsync(e){return O5(e)}}function b5(n){return e=>{if(i_(e.value)||i_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function x5(n){return e=>{if(i_(e.value)||i_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function w5(n){return i_(n.value)?{required:!0}:null}function uT(n){return null}function D5(n){return null!=n}function A5(n){return iw(n)?$t(n):n}function M5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function P5(n,e){return e.map(t=>t(n))}function k5(n){return n.map(e=>function zne(n){return!n.validate}(e)?e:t=>e.validate(t))}function R5(n){if(!n)return null;const e=n.filter(D5);return 0==e.length?null:function(t){return M5(P5(t,e))}}function Dk(n){return null!=n?R5(k5(n)):null}function O5(n){if(!n)return null;const e=n.filter(D5);return 0==e.length?null:function(t){return g5(P5(t,e).map(A5)).pipe(jt(M5))}}function Ak(n){return null!=n?O5(k5(n)):null}function L5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function N5(n){return n._rawValidators}function F5(n){return n._rawAsyncValidators}function Mk(n){return n?Array.isArray(n)?n:[n]:[]}function hT(n,e){return Array.isArray(n)?n.includes(e):n===e}function B5(n,e){const t=Mk(e);return Mk(n).forEach(i=>{hT(t,i)||t.push(i)}),t}function z5(n,e){return Mk(e).filter(t=>!hT(n,t))}class $5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ak(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Th extends $5{get formDirective(){return null}get path(){return null}}class Gm extends $5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class V5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dT=(()=>{class n extends V5{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Gm,2))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Rc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Bi]})}return n})(),fT=(()=>{class n extends V5{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Th,10))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Rc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Bi]})}return n})();const Iw="VALID",mT="INVALID",eb="PENDING",Tw="DISABLED";function Rk(n){return(gT(n)?n.validators:n)||null}function Ok(n,e){return(gT(e)?e.asyncValidators:n)||null}function gT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function j5(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new tn(1e3,"");if(!r[t])throw new tn(1001,"")}function G5(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new tn(1002,"")})}class _T{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Iw}get invalid(){return this.status===mT}get pending(){return this.status==eb}get disabled(){return this.status===Tw}get enabled(){return this.status!==Tw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(B5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(B5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(z5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(z5(e,this._rawAsyncValidators))}hasValidator(e){return hT(this._rawValidators,e)}hasAsyncValidator(e){return hT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=eb,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Iw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Iw||this.status===eb)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tw:Iw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=eb,this._hasOwnPendingAsyncValidator=!0;const t=A5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l,this.statusChanges=new l}_calculateStatus(){return this._allControlsDisabled()?Tw:this.errors?mT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eb)?eb:this._anyControlsHaveStatus(mT)?mT:Iw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function jne(n){return Array.isArray(n)?Dk(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Gne(n){return Array.isArray(n)?Ak(n):n||null}(this._rawAsyncValidators)}}class tb extends _T{constructor(e,t,r){super(Rk(t),Ok(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){G5(this,0,e),Object.keys(e).forEach(r=>{j5(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Hne=tb;class H5 extends tb{}const Oy=new Ar("CallSetDisabledState",{providedIn:"root",factory:()=>Dw}),Dw="always";function Aw(n,e,t=Dw){Lk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Wne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&q5(n,e)})}(n,e),function Zne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Xne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&q5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qne(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function bT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Lk(n,e){const t=N5(n);null!==e.validator?n.setValidators(L5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=F5(n);null!==e.asyncValidator?n.setAsyncValidators(L5(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();bT(e._rawValidators,i),bT(e._rawAsyncValidators,i)}function xT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=N5(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(a=>a!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=F5(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(a=>a!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return bT(e._rawValidators,r),bT(e._rawAsyncValidators,r),t}function q5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Z5(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Y5(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nb=class extends _T{constructor(e=null,t,r){super(Rk(t),Ok(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Y5(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Z5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Z5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Y5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wT=nb;let $k=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Kn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),n$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})();const Vk=new Ar("NgModelWithFormControlWarning"),cre={provide:Th,useExisting:Et(()=>rb)};let rb=(()=>{class n extends Th{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Aw(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){vT(t.control||null,t,!1),function Jne(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function X5(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(vT(r||null,t),(n=>n instanceof nb)(i)&&(Aw(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function W5(n,e){Lk(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Yne(n,e){return xT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Lk(this.form,this),this._oldForm&&xT(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(he(eu,10),he(o_,10),he(Oy,8))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Bo("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Is([cre]),Bi,ei]})}return n})();const dre={provide:Gm,useExisting:Et(()=>Pw)};let Pw=(()=>{class n extends Gm{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new l,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Bk(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Sw?t=o:function Qne(n){return Object.getPrototypeOf(n.constructor)===Ry}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function Fk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function yT(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(he(Th,13),he(eu,10),he(o_,10),he(nh,10),he(Vk,8))};static#n=this.\u0275dir=Kn({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Is([dre]),Bi,ei]})}return n})();function u$(n){return"number"==typeof n?n:parseFloat(n)}let Ly=(()=>{class n{constructor(){this._validator=uT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):uT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Kn({type:n,features:[ei]})}return n})();const vre={provide:eu,useExisting:Et(()=>qk),multi:!0};let qk=(()=>{class n extends Ly{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>u$(t),this.createValidator=t=>x5(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275dir=Kn({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&gc("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Is([vre]),Bi]})}return n})();const bre={provide:eu,useExisting:Et(()=>Wk),multi:!0};let Wk=(()=>{class n extends Ly{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>u$(t),this.createValidator=t=>b5(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275dir=Kn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&gc("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Is([bre]),Bi]})}return n})();const xre={provide:eu,useExisting:Et(()=>kw),multi:!0};let kw=(()=>{class n extends Ly{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=W0,this.createValidator=t=>w5}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275dir=Kn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&gc("required",i._enabled?"":null)},inputs:{required:"required"},features:[Is([xre]),Bi]})}return n})(),m$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[n$]})}return n})();class g$ extends _T{constructor(e,t,r){super(Rk(t),Ok(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){G5(this,0,e),e.forEach((r,i)=>{j5(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function _$(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Yk,Zk=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return _$(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new tb(i,o)}record(t,r=null){const i=this._reduceControls(t);return new H5(i,r)}control(t,r,i){let o={};return this.useNonNullable?(_$(r)?o=r:(o.validators=r,o.asyncValidators=i),new nb(t,{...o,nonNullable:!0})):new nb(t,r,i)}array(t,r,i){const o=t.map(a=>this._createControl(a));return new g$(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof nb||t instanceof _T?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Oy,useValue:t.callSetDisabledState??Dw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[m$]})}return n})(),Dre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Oy,useValue:t.callSetDisabledState??Dw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[m$]})}return n})();try{Yk=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Yk=!1}let Rw,CT,Ny,Kk,rh=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Qee(n){return n===T4}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Yk)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Bf))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ET(n){return function Are(){if(null==Rw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rw=!0}))}finally{Rw=Rw||!1}return Rw}()?n:!!n.capture}function v$(){if(null==Ny){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ny=!1,Ny;if("scrollBehavior"in document.documentElement.style)Ny=!0;else{const n=Element.prototype.scrollTo;Ny=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ny}function Ow(){if("object"!=typeof document||!document)return 0;if(null==CT){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),CT=0,0===n.scrollLeft&&(n.scrollLeft=1,CT=0===n.scrollLeft?1:2),n.remove()}return CT}function s_(n){return n.composedPath?n.composedPath()[0]:n.target}function Qk(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Dh(n){return n<=0?()=>Pr:_n((e,t)=>{let r=0;e.subscribe(Pn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function b$(n){return yc((e,t)=>n<=t)}function ih(n){return _n((e,t)=>{Fi(n).subscribe(Pn(t,()=>t.complete(),et)),!t.closed&&e.subscribe(t)})}function Fu(n){return null!=n&&"false"!=`${n}`}function Jk(n,e=0){return function zre(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function ST(n){return Array.isArray(n)?n:[n]}function Fc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ob(n){return n instanceof er?n.nativeElement:n}function Lw(...n){const e=Ns(n),t=so(n),{args:r,keys:i}=p5(n);if(0===r.length)return $t([],e);const o=new Me(function $re(n,e,t=Te){return r=>{x$(e,()=>{const{length:i}=n,o=new Array(i);let a=i,d=i;for(let m=0;m<i;m++)x$(e,()=>{const _=$t(n[m],e);let C=!1;_.subscribe(Pn(r,T=>{o[m]=T,C||(C=!0,d--),d||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>m5(i,a):Te));return t?o.pipe(Tk(t)):o}function x$(n,e,t){n?ir(t,n,e):e()}function Nw(...n){return function Vre(){return yi(1)}()($t(n,Ns(n)))}class Ure extends me{constructor(e,t){super()}schedule(e,t=0){return this}}const IT={setInterval(n,e,...t){const{delegate:r}=IT;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=IT;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class eR extends Ure{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return IT.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&IT.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,g(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const w$={now:()=>(w$.delegate||Date).now(),delegate:void 0};class Fw{constructor(e,t=Fw.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Fw.now=w$.now;class tR extends Fw{constructor(e,t=Fw.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const TT=new tR(eR),jre=TT;function E$(n,e=TT){return _n((t,r)=>{let i=null,o=null,a=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function m(){const _=a+n,C=e.now();if(C<_)return i=this.schedule(void 0,_-C),void r.add(i);d()}t.subscribe(Pn(r,_=>{o=_,a=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}function DT(...n){const e=Ns(n);return _n((t,r)=>{(e?Nw(n,t,e):Nw(n,t)).subscribe(r)})}const C$=new Set;let Fy,Gre=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):qre}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Hre(n,e){if(!C$.has(n))try{Fy||(Fy=document.createElement("style"),e&&(Fy.nonce=e),Fy.setAttribute("type","text/css"),document.head.appendChild(Fy)),Fy.sheet&&(Fy.sheet.insertRule(`@media ${n} {body{ }}`,0),C$.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(rh),pn(P1,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qre(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let AT=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new lt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return S$(ST(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=Lw(S$(ST(t)).map(a=>this._registerQuery(a).observable));return o=Nw(o.pipe(Dh(1)),o.pipe(b$(1),E$(0))),o.pipe(jt(a=>{const d={matches:!1,breakpoints:{}};return a.forEach(({matches:m,query:_})=>{d.matches=d.matches||m,d.breakpoints[_]=m}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new Me(a=>{const d=m=>this._zone.run(()=>a.next(m));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(DT(r),jt(({matches:a})=>({query:t,matches:a})),ih(this._destroySubject)),mql:r};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Gre),pn(y))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S$(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let D$=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Kre(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function Yre(n){try{return n.frameElement}catch{return null}}(function oie(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===M$(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=M$(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function rie(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function iie(n){return!function Jre(n){return function tie(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Qre(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function eie(n){return function nie(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||A$(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||n)(pn(rh))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A$(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function M$(n){if(!A$(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class sie{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,r,i,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Dh(1)).subscribe(e)}}let aie=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new sie(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(D$),pn(y),pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P$(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function k$(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const lie=new Ar("cdk-input-modality-detector-options"),cie={ignoreKeys:[18,17,224,91,16]},sb=ET({passive:!0,capture:!0});let uie=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new rt(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(d=>d===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=s_(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(P$(a)?"keyboard":"mouse"),this._mostRecentTarget=s_(a))},this._onTouchstart=a=>{k$(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=s_(a))},this._options={...cie,...o},this.modalityDetected=this._modality.pipe(b$(1)),this.modalityChanged=this.modalityDetected.pipe(nt()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,sb),i.addEventListener("mousedown",this._onMousedown,sb),i.addEventListener("touchstart",this._onTouchstart,sb)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,sb),document.removeEventListener("mousedown",this._onMousedown,sb),document.removeEventListener("touchstart",this._onTouchstart,sb))}static#e=this.\u0275fac=function(r){return new(r||n)(pn(rh),pn(y),pn(Ao),pn(lie,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hie=new Ar("liveAnnouncerElement",{providedIn:"root",factory:function die(){return null}}),fie=new Ar("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let pie=0,O$=(()=>{class n{constructor(t,r,i,o){this._ngZone=r,this._defaultOptions=o,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let o,a;return 1===r.length&&"number"==typeof r[0]?a=r[0]:[o,a]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),null==a&&i&&(a=i.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof a&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id="cdk-live-announcer-"+pie++,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(t){const r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const o=r[i],a=o.getAttribute("aria-owns");a?-1===a.indexOf(t)&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(hie,8),pn(y),pn(Ao),pn(fie,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mie=new Ar("cdk-focus-monitor-default-options"),MT=ET({passive:!0,capture:!0});let L$=(()=>{class n{constructor(t,r,i,o,a){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new lt,this._rootNodeFocusAndBlurListener=d=>{for(let _=s_(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(t,r=!1){const i=ob(t);if(!this._platform.isBrowser||1!==i.nodeType)return Tt();const o=function Pre(n){if(function Mre(){if(null==Kk){const n=typeof document<"u"?document.head:null;Kk=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Kk}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return r&&(a.checkChildren=!0),a.subject;const d={checkChildren:r,subject:new lt,rootNode:o};return this._elementInfo.set(i,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const r=ob(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=ob(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([d,m])=>this._originChanged(d,r,m)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=s_(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,MT),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,MT)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ih(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,MT),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,MT),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(pn(y),pn(rh),pn(uie),pn(Ao,8),pn(mie,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N$="cdk-high-contrast-black-on-white",F$="cdk-high-contrast-white-on-black",nR="cdk-high-contrast-active";let gie=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=rr(AT).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(nR,N$,F$),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(nR,N$):2===r&&t.add(nR,F$)}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(rh),pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _ie=new Ar("cdk-dir-doc",{providedIn:"root",factory:function yie(){return rr(Ao)}}),vie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let rR=(()=>{class n{constructor(t){this.value="ltr",this.change=new l,t&&(this.value=function bie(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?vie.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(_ie,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bw=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})();const wie=new Ar("mat-sanity-checks",{providedIn:"root",factory:function xie(){return!0}});let oh=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!Qk()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(pn(gie),pn(wie,8),pn(Ao))};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[Bw,Bw]})}return n})();function $$(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Fu(e)}constructor(...e){super(...e),this._disabled=!1}}}function iR(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function V$(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Fu(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function Eie(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Jk(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class Sie{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const U$=ET({passive:!0,capture:!0});class Iie{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=s_(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,r,i){const o=this._events.get(t);if(o){const a=o.get(r);a?a.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,U$)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const o=i.get(t);o&&(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,U$)))}}const j$={enterDuration:225,exitDuration:150},G$=ET({passive:!0,capture:!0}),H$=["mousedown","touchstart"],q$=["mouseup","mouseleave","touchend","touchcancel"];class PT{static#e=this._eventManager=new Iie;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ob(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...j$,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const a=r.radius||function Die(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,m=t-i.top,_=o.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=d-a+"px",C.style.top=m-a+"px",C.style.height=2*a+"px",C.style.width=2*a+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(C);const T=window.getComputedStyle(C),L=T.transitionDuration,G="none"===T.transitionProperty||"0s"===L||"0s, 0s"===L||0===i.width&&0===i.height,W=new Sie(this,C,r,G);C.style.transform="scale3d(1, 1, 1)",W.state=0,r.persistent||(this._mostRecentTransientRipple=W);let ve=null;return!G&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _e=()=>this._finishRippleTransition(W),re=()=>this._destroyRipple(W);C.addEventListener("transitionend",_e),C.addEventListener("transitioncancel",re),ve={onTransitionEnd:_e,onTransitionCancel:re}}),this._activeRipples.set(W,ve),(G||!_)&&this._finishRippleTransition(W),W}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...j$,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ob(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,H$.forEach(r=>{PT._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{q$.forEach(t=>{this._triggerElement.addEventListener(t,this,G$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=P$(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!k$(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(H$.forEach(t=>PT._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&q$.forEach(t=>e.removeEventListener(t,this,G$)))}}const W$=new Ar("mat-ripple-global-options");let oR=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,o,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new PT(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(y),he(rh),he(W$,8),he(zf,8))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&Rc("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),X$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[oh,oh]})}return n})();const Z$={capture:!0},Y$=["focus","click","mouseenter","touchstart"],sR="mat-ripple-loader-uninitialized",aR="mat-ripple-loader-class-name",K$="mat-ripple-loader-centered",kT="mat-ripple-loader-disabled";let Aie=(()=>{class n{constructor(){this._document=rr(Ao,{optional:!0}),this._animationMode=rr(zf,{optional:!0}),this._globalRippleOptions=rr(W$,{optional:!0}),this._platform=rr(rh),this._ngZone=rr(y),this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const i=t.target.closest(`[${sR}]`);i&&this.createRipple(i)},this._ngZone.runOutsideAngular(()=>{for(const t of Y$)this._document?.addEventListener(t,this._onInteraction,Z$)})}ngOnDestroy(){for(const t of Y$)this._document?.removeEventListener(t,this._onInteraction,Z$)}configureRipple(t,r){t.setAttribute(sR,""),(r.className||!t.hasAttribute(aR))&&t.setAttribute(aR,r.className||""),r.centered&&t.setAttribute(K$,""),r.disabled&&t.setAttribute(kT,"")}getRipple(t){return t.matRipple?t.matRipple:this.createRipple(t)}setDisabled(t,r){const i=t.matRipple;i?i.disabled=r:r?t.setAttribute(kT,""):t.removeAttribute(kT)}createRipple(t){if(!this._document)return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(aR)),t.append(r);const i=new oR(new er(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return i._isInitialized=!0,i.trigger=t,i.centered=t.hasAttribute(K$),i.disabled=t.hasAttribute(kT),this.attachRipple(t,i),i}attachRipple(t,r){t.removeAttribute(sR),t.matRipple=r}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Mie=["mat-button",""],Pie=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],kie=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Oie=["mat-icon-button",""],Lie=["*"],Nie=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Fie=iR($$(V$(class{constructor(n){this._elementRef=n}})));let Q$=(()=>{class n extends Fie{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Fu(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=Fu(t),this._updateRippleDisabled()}constructor(t,r,i,o){super(t),this._platform=r,this._ngZone=i,this._animationMode=o,this._focusMonitor=rr(L$),this._rippleLoader=rr(Aie),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const a=t.nativeElement.classList;for(const d of Nie)this._hasHostAttributes(d.selector)&&d.mdcClasses.forEach(m=>{a.add(m)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){el()};static#t=this.\u0275dir=Kn({type:n,features:[Bi]})}return n})(),lR=(()=>{class n extends Q${constructor(t,r,i,o){super(t,r,i,o)}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(rh),he(y),he(zf,8))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(r,i){2&r&&(gc("disabled",i.disabled||null),Rc("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Bi],attrs:Mie,ngContentSelectors:kie,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Lr(Pie),Da(0,"span",0),Tr(1),fr(2,"span",1),Tr(3,1),or(),Tr(4,2),Da(5,"span",2)(6,"span",3)),2&r&&Rc("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),$ie=(()=>{class n extends Q${constructor(t,r,i,o){super(t,r,i,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(rh),he(y),he(zf,8))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(r,i){2&r&&(gc("disabled",i.disabled||null),Rc("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Bi],attrs:Oie,ngContentSelectors:Lie,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Lr(),Da(0,"span",0),Tr(1),Da(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),J$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[oh,X$,oh]})}return n})(),Vie=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Fu(t)}get inset(){return this._inset}set inset(t){this._inset=Fu(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){2&r&&(gc("aria-orientation",i.vertical?"vertical":"horizontal"),Rc("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),Uie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[oh,oh]})}return n})();function ab(n,e){const t=de(n)?n:()=>n,r=i=>i.error(t());return new Me(e?i=>e.schedule(r,0,i):r)}function vc(n,e,t){const r=de(n)||e||t?{next:n,error:e,complete:t}:n;return r?_n((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let d=!0;i.subscribe(Pn(o,m=>{var _;null===(_=r.next)||void 0===_||_.call(r,m),o.next(m)},()=>{var m;d=!1,null===(m=r.complete)||void 0===m||m.call(r),o.complete()},m=>{var _;d=!1,null===(_=r.error)||void 0===_||_.call(r,m),o.error(m)},()=>{var m,_;d&&(null===(m=r.unsubscribe)||void 0===m||m.call(r)),null===(_=r.finalize)||void 0===_||_.call(r)}))}):Te}function a_(n){return _n((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Pn(t,void 0,void 0,a=>{o=Fi(n(a,a_(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}const jie=["*"];let RT;function $w(n){return function Gie(){if(void 0===RT&&(RT=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(RT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return RT}()?.createHTML(n)||n}function eV(n){return Error(`Unable to find icon with the name "${n}"`)}function tV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function nV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class By{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let OT=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new By(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const a=this._sanitizer.sanitize(Ua.HTML,i);if(!a)throw nV(i);const d=$w(a);return this._addSvgIconConfig(t,r,new By("",d,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new By(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Ua.HTML,r);if(!o)throw nV(r);const a=$w(o);return this._addSvgIconSetConfig(t,new By("",a,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Ua.RESOURCE_URL,t);if(!r)throw tV(t);const i=this._cachedIconsByUrl.get(r);return i?Tt(LT(i)):this._loadSvgIconFromConfig(new By(t,null)).pipe(vc(o=>this._cachedIconsByUrl.set(r,o)),jt(o=>LT(o)))}getNamedSvgIcon(t,r=""){const i=rV(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(t,a):ab(eV(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Tt(LT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(jt(r=>LT(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Tt(i):g5(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(a_(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(Ua.RESOURCE_URL,a.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),Tt(null)})))).pipe(jt(()=>{const a=this._extractIconWithNameFromAnySet(t,r);if(!a)throw eV(t);return a}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const a=this._svgElementFromConfig(o),d=this._extractSvgIconFromSet(a,t,o.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(vc(r=>t.svgText=r),jt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Tt(null):this._fetchIcon(t).pipe(vc(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const a=o.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,i);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),i);const d=this._svgElementFromString($w("<svg></svg>"));return d.appendChild(a),this._setSvgAttributes(d,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString($w("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:a,value:d}=i[o];"id"!==a&&r.setAttribute(a,d)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function Hie(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Ua.RESOURCE_URL,r);if(!a)throw tV(r);const d=this._inProgressUrlFetches.get(a);if(d)return d;const m=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(jt(_=>$w(_)),K0(()=>this._inProgressUrlFetches.delete(a)),Nt());return this._inProgressUrlFetches.set(a,m),m}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(rV(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return Wie(o)?new By(o.url,null,o.options):new By(o,null)}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ew,8),pn(oT),pn(Ao,8),pn(Qu))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LT(n){return n.cloneNode(!0)}function rV(n,e){return n+":"+e}function Wie(n){return!(!n.url||!n.options)}const Xie=iR(class{constructor(n){this._elementRef=n}}),Zie=new Ar("MAT_ICON_DEFAULT_OPTIONS"),Yie=new Ar("mat-icon-location",{providedIn:"root",factory:function Kie(){const n=rr(Ao),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),iV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Qie=iV.map(n=>`[${n}]`).join(", "),Jie=/^url\(['"]?#(.*?)['"]?\)$/;let oV=(()=>{class n extends Xie{get inline(){return this._inline}set inline(t){this._inline=Fu(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,o,a,d){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=me.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(a=>{o.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(Qie),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)iV.forEach(a=>{const d=r[o],m=d.getAttribute(a),_=m?m.match(Jie):null;if(_){let C=i.get(d);C||(C=[],i.set(d,C)),C.push({name:a,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Dh(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(OT),Rf("aria-hidden"),he(Yie),he(Qu),he(Zie,8))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(r,i){2&r&&(gc("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Rc("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Bi],ngContentSelectors:jie,decls:1,vars:0,template:function(r,i){1&r&&(Lr(),Tr(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),eoe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[oh,oh]})}return n})();const toe=["addListener","removeListener"],noe=["addEventListener","removeEventListener"],roe=["on","off"];function zy(n,e,t,r){if(de(t)&&(r=t,t=void 0),r)return zy(n,e,t).pipe(Tk(r));const[i,o]=function soe(n){return de(n.addEventListener)&&de(n.removeEventListener)}(n)?noe.map(a=>d=>n[a](e,d,t)):function ioe(n){return de(n.addListener)&&de(n.removeListener)}(n)?toe.map(sV(n,e)):function ooe(n){return de(n.on)&&de(n.off)}(n)?roe.map(sV(n,e)):[];if(!i&&Dt(n))return Bn(a=>zy(a,e,t))(Fi(n));if(!i)throw new TypeError("Invalid event target");return new Me(a=>{const d=(...m)=>a.next(1<m.length?m:m[0]);return i(d),()=>o(d)})}function sV(n,e){return t=>r=>n[t](e,r)}const Vw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Vw;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new me(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Vw;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Vw;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class loe extends tR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class aoe extends eR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Vw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(Vw.cancelAnimationFrame(t),e._scheduled=void 0)}});let cR,uoe=1;const NT={};function aV(n){return n in NT&&(delete NT[n],!0)}const hoe={setImmediate(n){const e=uoe++;return NT[e]=!0,cR||(cR=Promise.resolve()),cR.then(()=>aV(e)&&n()),e},clearImmediate(n){aV(n)}},{setImmediate:doe,clearImmediate:foe}=hoe,FT={setImmediate(...n){const{delegate:e}=FT;return(e?.setImmediate||doe)(...n)},clearImmediate(n){const{delegate:e}=FT;return(e?.clearImmediate||foe)(n)},delegate:void 0};new class moe extends tR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class poe extends eR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=FT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(FT.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function lV(n=0,e,t=jre){let r=-1;return null!=e&&(Vi(e)?t=e:r=e),new Me(i=>{let o=function yoe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function cV(n,e=TT){return function _oe(n){return _n((e,t)=>{let r=!1,i=null,o=null,a=!1;const d=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const _=i;i=null,t.next(_)}a&&t.complete()},m=()=>{o=null,a&&t.complete()};e.subscribe(Pn(t,_=>{r=!0,i=_,o||Fi(n(_)).subscribe(o=Pn(t,d,m))},()=>{a=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>lV(n,e))}let BT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new lt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Me(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(cV(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Tt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(yc(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=ob(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>zy(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(y),pn(rh),pn(Ao,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uw=(()=>{class n{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new lt,this._elementScrolled=new Me(a=>this.ngZone.runOutsideAngular(()=>zy(this.elementRef.nativeElement,"scroll").pipe(ih(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Ow()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Ow()?t.left=t.right:1==Ow()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;v$()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==t?t=a?i:r:"end"==t&&(t=a?r:i),a&&2==Ow()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&1==Ow()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(BT),he(y),he(rR,8))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),uR=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new lt,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(cV(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(rh),pn(y),pn(Ao,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})(),uV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[Bw,zT,Bw,zT]})}return n})();function $T(n){return jt(()=>n)}class hV{}class xoe{}const Hm="*";function dV(n,e){return{type:7,name:n,definitions:e,options:{}}}function VT(n,e=null){return{type:4,styles:e,timings:n}}function fV(n,e=null){return{type:2,steps:n,options:e}}function $y(n){return{type:6,styles:n,offset:null}}function UT(n,e,t){return{type:0,name:n,styles:e,options:t}}function jT(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class jw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class pV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++r==o&&this._onDestroy()}),a.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,d)=>Math.max(a,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const GT=["*"],woe=["content"];function Eoe(n,e){if(1&n){const t=Ty();fr(0,"div",2),Bo("click",function(){return Gh(t),Ou(Jl()._onBackdropClicked())}),or()}2&n&&Rc("mat-drawer-shown",Jl()._isShowingBackdrop())}function Coe(n,e){1&n&&(fr(0,"mat-drawer-content"),Tr(1,2),or())}const Soe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ioe=["mat-drawer","mat-drawer-content","*"];function Toe(n,e){if(1&n){const t=Ty();fr(0,"div",2),Bo("click",function(){return Gh(t),Ou(Jl()._onBackdropClicked())}),or()}2&n&&Rc("mat-drawer-shown",Jl()._isShowingBackdrop())}function Doe(n,e){1&n&&(fr(0,"mat-sidenav-content"),Tr(1,2),or())}const Aoe=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Moe=["mat-sidenav","mat-sidenav-content","*"],mV={transformDrawer:dV("transform",[UT("open, open-instant",$y({transform:"none",visibility:"visible"})),UT("void",$y({"box-shadow":"none",visibility:"hidden"})),jT("void => open-instant",VT("0ms")),jT("void <=> open, open-instant => void",VT("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},koe=new Ar("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Roe(){return!1}}),dR=new Ar("MAT_DRAWER_CONTAINER");let HT=(()=>{class n extends Uw{constructor(t,r,i,o,a){super(i,o,a),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Or),he(Et(()=>_V)),he(er),he(BT),he(y))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,i){2&r&&ow("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[Is([{provide:Uw,useExisting:n}]),Bi],ngContentSelectors:GT,decls:1,vars:0,template:function(r,i){1&r&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0})}return n})(),gV=(()=>{class n{get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Fu(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Fu(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Fu(t))}constructor(t,r,i,o,a,d,m,_){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=o,this._ngZone=a,this._interactivityChecker=d,this._doc=m,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new lt,this._animationEnd=new lt,this._animationState="void",this.openedChange=new l(!0),this._openedStream=this.openedChange.pipe(yc(C=>C),jt(()=>{})),this.openedStart=this._animationStarted.pipe(yc(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),$T(void 0)),this._closedStream=this.openedChange.pipe(yc(C=>!C),jt(()=>{})),this.closedStart=this._animationStarted.pipe(yc(C=>C.fromState!==C.toState&&"void"===C.toState),$T(void 0)),this._destroyed=new lt,this.onPositionChanged=new l,this._modeChanged=new lt,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{zy(this._elementRef.nativeElement,"keydown").pipe(yc(C=>27===C.keyCode&&!this.disableClose&&!function Bre(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(C)),ih(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(nt((C,T)=>C.fromState===T.fromState&&C.toState===T.toState)).subscribe(C=>{const{fromState:T,toState:R}=C;(0===R.indexOf("open")&&"void"===T||"void"===R&&0===T.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(Dh(1)).subscribe(a=>o(a?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(aie),he(L$),he(rh),he(y),he(D$),he(Ao,8),he(dR,8))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-drawer"]],viewQuery:function(r,i){if(1&r&&jf(woe,5),2&r){let o;Oc(o=Lc())&&(i._content=o.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(r,i){1&r&&SI("@transform.start",function(a){return i._animationStarted.next(a)})("@transform.done",function(a){return i._animationEnd.next(a)}),2&r&&(gc("align",null),DI("@transform",i._animationState),Rc("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:GT,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,i){1&r&&(Lr(),fr(0,"div",0,1),Tr(2),or())},dependencies:[Uw],encapsulation:2,data:{animation:[mV.transformDrawer]},changeDetection:0})}return n})(),_V=(()=>{class n{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Fu(t)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=null==t?null:Fu(t)}get scrollable(){return this._userContent||this._content}constructor(t,r,i,o,a,d=!1,m){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=o,this._animationMode=m,this._drawers=new RI,this.backdropClick=new l,this._destroyed=new lt,this._doCheckSubject=new lt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new lt,t&&t.change.pipe(ih(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),a.change().pipe(ih(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=d}ngAfterContentInit(){this._allDrawers.changes.pipe(DT(this._allDrawers),ih(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(DT(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(E$(10),ih(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(yc(r=>r.fromState!==r.toState),ih(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(ih(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(ih(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Dh(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(ih(yt(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return null!=t&&t.opened}_drawerHasBackdrop(t){return null==this._backdropOverride?!!t&&"side"!==t.mode:this._backdropOverride}static#e=this.\u0275fac=function(r){return new(r||n)(he(rR,8),he(er),he(y),he(Or),he(uR),he(koe),he(zf,8))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(r,i,o){if(1&r&&($p(o,HT,5),$p(o,gV,5)),2&r){let a;Oc(a=Lc())&&(i._content=a.first),Oc(a=Lc())&&(i._allDrawers=a)}},viewQuery:function(r,i){if(1&r&&jf(HT,5),2&r){let o;Oc(o=Lc())&&(i._userContent=o.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,i){2&r&&Rc("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Is([{provide:dR,useExisting:n}])],ngContentSelectors:Ioe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){1&r&&(Lr(Soe),Rs(0,Eoe,1,2,"div",0),Tr(1),Tr(2,1),Rs(3,Coe,2,0,"mat-drawer-content",1)),2&r&&(oo("ngIf",i.hasBackdrop),Gr(3),oo("ngIf",!i._content))},dependencies:[Hf,HT],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return n})(),fR=(()=>{class n extends HT{constructor(t,r,i,o,a){super(t,r,i,o,a)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Or),he(Et(()=>yV)),he(er),he(BT),he(y))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,i){2&r&&ow("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[Is([{provide:Uw,useExisting:n}]),Bi],ngContentSelectors:GT,decls:1,vars:0,template:function(r,i){1&r&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0})}return n})(),pR=(()=>{class n extends gV{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Fu(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Jk(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Jk(t)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,i){2&r&&(gc("align",null),ow("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),Rc("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Bi],ngContentSelectors:GT,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,i){1&r&&(Lr(),fr(0,"div",0,1),Tr(2),or())},dependencies:[Uw],encapsulation:2,data:{animation:[mV.transformDrawer]},changeDetection:0})}return n})(),yV=(()=>{class n extends _V{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(r,i,o){if(1&r&&($p(o,fR,5),$p(o,pR,5)),2&r){let a;Oc(a=Lc())&&(i._content=a.first),Oc(a=Lc())&&(i._allDrawers=a)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,i){2&r&&Rc("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[Is([{provide:dR,useExisting:n}]),Bi],ngContentSelectors:Moe,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){1&r&&(Lr(Aoe),Rs(0,Toe,1,2,"div",0),Tr(1),Tr(2,1),Rs(3,Doe,2,0,"mat-sidenav-content",1)),2&r&&(oo("ngIf",i.hasBackdrop),Gr(3),oo("ngIf",!i._content))},dependencies:[Hf,fR],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return n})(),Ooe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[vw,oh,zT,zT,oh]})}return n})();class mR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class gR extends mR{constructor(e,t,r,i,o){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=o}}class vV extends mR{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Loe extends mR{constructor(e){super(),this.element=e instanceof er?e.nativeElement:e}}class _R{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof gR?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof vV?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Loe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Noe extends _R{constructor(e,t,r,i,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=a=>{const d=a.element,m=this._document.createComment("dom-portal");d.parentNode.insertBefore(m,d),this.outletElement.appendChild(d),this._attachedPortal=a,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(d,m)})},this._document=o}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||$s.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let bV=(()=>{class n extends _R{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new l,this.attachDomPortal=o=>{const a=o.element,d=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(d,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(a,d)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=r.createComponent(o,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||n)(he(Eh),he(Sd),he(Ao))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Bi]})}return n})(),xV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})();const wV=v$();class Foe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Fc(-this._previousScrollPosition.left),e.style.top=Fc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,o=r.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),wV&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wV&&(r.scrollBehavior=o,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Boe{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(yc(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class EV{enable(){}disable(){}attach(){}}function yR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function CV(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class zoe{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();yR(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $oe=(()=>{class n{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new EV,this.close=a=>new Boe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new Foe(this._viewportRuler,this._document),this.reposition=a=>new zoe(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}static#e=this.\u0275fac=function(r){return new(r||n)(pn(BT),pn(uR),pn(y),pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class SV{constructor(e){if(this.scrollStrategy=new EV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Voe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let IV=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uoe=(()=>{class n extends IV{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const d=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(i)):d.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao),pn(y,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),joe=(()=>{class n extends IV{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=s_(o)},this._clickListener=o=>{const a=s_(o),d="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const m=this._attachedOverlays.slice();for(let _=m.length-1;_>-1;_--){const C=m[_];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(a)||C.overlayElement.contains(d))break;const T=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>T.next(o)):T.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao),pn(rh),pn(y,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TV=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Qk()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),Qk()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao),pn(rh))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Goe{constructor(e,t,r,i,o,a,d,m,_,C=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=d,this._location=m,this._outsideClickDispatcher=_,this._animationsDisabled=C,this._backdropElement=null,this._backdropClick=new lt,this._attachments=new lt,this._detachments=new lt,this._locationChanges=me.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._backdropTransitionendHandler=T=>{this._disposeBackdrop(T.target)},this._keydownEvents=new lt,this._outsidePointerEvents=new lt,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Dh(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Fc(this._config.width),e.height=Fc(this._config.height),e.minWidth=Fc(this._config.minWidth),e.minHeight=Fc(this._config.minHeight),e.maxWidth=Fc(this._config.maxWidth),e.maxHeight=Fc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=ST(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(ih(yt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const DV="cdk-overlay-connected-position-bounding-box",Hoe=/([A-Za-z%]+)$/;class qoe{get positions(){return this._preferredPositions}constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new lt,this._resizeSubscription=me.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(DV),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let a;for(let d of this._preferredPositions){let m=this._getOriginPoint(e,i,d),_=this._getOverlayPoint(m,t,d),C=this._getOverlayFit(_,t,r,d);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,m);this._canFitWithFlexibleDimensions(C,_,r)?o.push({position:d,origin:m,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(m,d)}):(!a||a.overlayFit.visibleArea<C.visibleArea)&&(a={overlayFit:C,overlayPoint:_,originPoint:m,position:d,overlayRect:t})}if(o.length){let d=null,m=-1;for(const _ of o){const C=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);C>m&&(m=C,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Vy(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(DV),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,o;if("center"==r.originX)i=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;i="start"==r.originX?a:d}return t.left<0&&(i-=t.left),o="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){const o=MV(t);let{x:a,y:d}=e,m=this._getOffset(i,"x"),_=this._getOffset(i,"y");m&&(a+=m),_&&(d+=_);let R=0-d,L=d+o.height-r.height,G=this._subtractOverflows(o.width,0-a,a+o.width-r.width),W=this._subtractOverflows(o.height,R,L),ve=G*W;return{visibleArea:ve,isCompletelyWithinViewport:o.width*o.height===ve,fitsInViewportVertically:W===o.height,fitsInViewportHorizontally:G==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,a=AV(this._overlayRef.getConfig().minHeight),d=AV(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=i)&&(e.fitsInViewportHorizontally||null!=d&&d<=o)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=MV(t),o=this._viewportRect,a=Math.max(e.x+i.width-o.width,0),d=Math.max(e.y+i.height-o.height,0),m=Math.max(o.top-r.top-e.y,0),_=Math.max(o.left-r.left-e.x,0);let C=0,T=0;return C=i.width<=o.width?_||-a:e.x<this._viewportMargin?o.left-r.left-e.x:0,T=i.height<=o.height?m||-d:e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:C,y:T},{x:e.x+C,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Voe(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let o,a,d,C,T,R;if("top"===t.overlayY)a=e.y,o=r.height-a+this._viewportMargin;else if("bottom"===t.overlayY)d=r.height-e.y+2*this._viewportMargin,o=r.height-d+this._viewportMargin;else{const L=Math.min(r.bottom-e.y+r.top,e.y),G=this._lastBoundingBoxSize.height;o=2*L,a=e.y-L,o>G&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-G/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)R=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)T=e.x,C=r.right-e.x;else{const L=Math.min(r.right-e.x+r.left,e.x),G=this._lastBoundingBoxSize.width;C=2*L,T=e.x-L,C>G&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-G/2)}return{top:a,left:T,bottom:d,right:R,width:C,height:o}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Fc(r.height),i.top=Fc(r.top),i.bottom=Fc(r.bottom),i.width=Fc(r.width),i.left=Fc(r.left),i.right=Fc(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Fc(o)),a&&(i.maxWidth=Fc(a))}this._lastBoundingBoxSize=r,Vy(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Vy(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Vy(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();Vy(r,this._getExactOverlayY(t,e,C)),Vy(r,this._getExactOverlayX(t,e,C))}else r.position="static";let d="",m=this._getOffset(t,"x"),_=this._getOffset(t,"y");m&&(d+=`translateX(${m}px) `),_&&(d+=`translateY(${_}px)`),r.transform=d.trim(),a.maxHeight&&(i?r.maxHeight=Fc(a.maxHeight):o&&(r.maxHeight="")),a.maxWidth&&(i?r.maxWidth=Fc(a.maxWidth):o&&(r.maxWidth="")),Vy(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Fc(o.y),i}_getExactOverlayX(e,t,r){let a,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),a=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===a?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Fc(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:CV(e,r),isOriginOutsideView:yR(e,r),isOverlayClipped:CV(t,r),isOverlayOutsideView:yR(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ST(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof er)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Vy(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function AV(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Hoe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function MV(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const PV="cdk-global-overlay-wrapper";class Woe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(PV),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:a,maxHeight:d}=r,m=!("100%"!==i&&"100vw"!==i||a&&"100%"!==a&&"100vw"!==a),_=!("100%"!==o&&"100vh"!==o||d&&"100%"!==d&&"100vh"!==d),C=this._xPosition,T=this._xOffset,R="rtl"===this._overlayRef.getConfig().direction;let L="",G="",W="";m?W="flex-start":"center"===C?(W="center",R?G=T:L=T):R?"left"===C||"end"===C?(W="flex-end",L=T):("right"===C||"start"===C)&&(W="flex-start",G=T):"left"===C||"start"===C?(W="flex-start",L=T):("right"===C||"end"===C)&&(W="flex-end",G=T),e.position=this._cssPosition,e.marginLeft=m?"0":L,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=m?"0":G,t.justifyContent=W,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(PV),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Xoe=(()=>{class n{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new Woe}flexibleConnectedTo(t){return new qoe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(uR),pn(Ao),pn(rh),pn(TV))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zoe=0,qT=(()=>{class n{constructor(t,r,i,o,a,d,m,_,C,T,R,L){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=d,this._ngZone=m,this._document=_,this._directionality=C,this._location=T,this._outsideClickDispatcher=R,this._animationsModuleType=L}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),a=new SV(t);return a.direction=a.direction||this._directionality.value,new Goe(o,r,i,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Zoe++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(zm)),new Noe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(pn($oe),pn(TV),pn(Eh),pn(Xoe),pn(Uoe),pn($s),pn(y),pn(Ao),pn(rR),pn(X0),pn(joe),pn(zf,8))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Qoe={provide:new Ar("cdk-connected-overlay-scroll-strategy"),deps:[qT],useFactory:function Koe(n){return()=>n.scrollStrategies.reposition()}};let Joe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({providers:[qT,Qoe],imports:[Bw,xV,uV,uV]})}return n})();function ese(n,e){if(1&n){const t=Ty();fr(0,"div",2)(1,"button",3),Bo("click",function(){return Gh(t),Ou(Jl().action())}),Vr(2),or()()}if(2&n){const t=Jl();Gr(2),Yh(" ",t.data.action," ")}}const tse=["label"];function nse(n,e){}const rse=Math.pow(2,31)-1;class vR{constructor(e,t){this._overlayRef=t,this._afterDismissed=new lt,this._afterOpened=new lt,this._onAction=new lt,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,rse))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const kV=new Ar("MatSnackBarData");class WT{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let ise=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Kn({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),ose=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Kn({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),sse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Kn({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),ase=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#e=this.\u0275fac=function(r){return new(r||n)(he(vR),he(kV))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,i){1&r&&(fr(0,"div",0),Vr(1),or(),Rs(2,ese,3,1,"div",1)),2&r&&(Gr(1),Yh(" ",i.data.message,"\n"),Gr(1),oo("ngIf",i.hasAction))},dependencies:[Hf,lR,ise,ose,sse],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return n})();const lse={snackBarState:dV("state",[UT("void, hidden",$y({transform:"scale(0.8)",opacity:0})),UT("visible",$y({transform:"scale(1)",opacity:1})),jT("* => visible",VT("150ms cubic-bezier(0, 0, 0.2, 1)")),jT("* => void, * => hidden",VT("75ms cubic-bezier(0.4, 0.0, 1, 1)",$y({opacity:0})))])};let cse=0,use=(()=>{class n extends _R{constructor(t,r,i,o,a){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=o,this.snackBarConfig=a,this._document=rr(Ao),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new lt,this._onExit=new lt,this._onEnter=new lt,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+cse++,this.attachDomPortal=d=>{this._assertNotAttached();const m=this._portalOutlet.attachDomPortal(d);return this._afterPortalAttached(),m},this._live="assertive"!==a.politeness||a.announcementMessage?"off"===a.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Dh(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r)),this._exposeToModals()}_exposeToModals(){const t=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const o=r[i],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?-1===a.indexOf(t)&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const r=t.getAttribute("aria-owns");if(r){const i=r.replace(this._liveElementId,"").trim();i.length>0?t.setAttribute("aria-owns",i):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#e=this.\u0275fac=function(r){return new(r||n)(he(y),he(er),he(Or),he(rh),he(WT))};static#t=this.\u0275dir=Kn({type:n,viewQuery:function(r,i){if(1&r&&jf(bV,7),2&r){let o;Oc(o=Lc())&&(i._portalOutlet=o.first)}},features:[Bi]})}return n})(),hse=(()=>{class n extends use{_afterPortalAttached(){super._afterPortalAttached();const t=this._label.nativeElement,r="mdc-snackbar__label";t.classList.toggle(r,!t.querySelector(`.${r}`))}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,i){if(1&r&&jf(tse,7),2&r){let o;Oc(o=Lc())&&(i._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,i){1&r&&SI("@state.done",function(a){return i.onAnimationEnd(a)}),2&r&&DI("@state",i._animationState)},features:[Bi],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(fr(0,"div",0)(1,"div",1,2)(3,"div",3),Rs(4,nse,0,0,"ng-template",4),or(),Da(5,"div"),or()()),2&r&&(Gr(5),gc("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[bV],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;--mdc-snackbar-container-shape:4px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[lse.snackBarState]}})}return n})(),RV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[Joe,xV,vw,J$,oh,oh]})}return n})();const OV=new Ar("mat-snack-bar-default-options",{providedIn:"root",factory:function dse(){return new WT}});let fse=(()=>{class n{get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,r,i,o,a,d){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=o,this._parentSnackBar=a,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const o={...this._defaultConfig,...i};return o.data={message:t,action:r},o.announcementMessage===t&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const o=$s.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:WT,useValue:r}]}),a=new gR(this.snackBarContainerComponent,r.viewContainerRef,o),d=t.attach(a);return d.instance.snackBarConfig=r,d.instance}_attach(t,r){const i={...new WT,...this._defaultConfig,...r},o=this._createOverlay(i),a=this._attachSnackBarContainer(o,i),d=new vR(a,o);if(t instanceof af){const m=new vV(t,null,{$implicit:i.data,snackBarRef:d});d.instance=a.attachTemplatePortal(m)}else{const m=this._createInjector(i,d),_=new gR(t,void 0,m),C=a.attachComponentPortal(_);d.instance=C.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ih(o.detachments())).subscribe(m=>{o.overlayElement.classList.toggle(this.handsetCssClass,m.matches)}),i.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(d,i),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new SV;r.direction=t.direction;let i=this._overlay.position().global();const o="rtl"===t.direction,a="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!o||"end"===t.horizontalPosition&&o,d=!a&&"center"!==t.horizontalPosition;return a?i.left("0"):d?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return $s.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:vR,useValue:r},{provide:kV,useValue:t.data}]})}static#e=this.\u0275fac=function(r){return new(r||n)(pn(qT),pn(O$),pn($s),pn(AT),pn(n,12),pn(OV))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})(),bR=(()=>{class n extends fse{constructor(t,r,i,o,a,d){super(t,r,i,o,a,d),this.simpleSnackBarComponent=ase,this.snackBarContainerComponent=hse,this.handsetCssClass="mat-mdc-snack-bar-handset"}static#e=this.\u0275fac=function(r){return new(r||n)(pn(qT),pn(O$),pn($s),pn(AT),pn(n,12),pn(OV))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:RV})}return n})(),pse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[oh,oh]})}return n})();function LV(n){return new tn(3e3,!1)}function l_(n){switch(n.length){case 0:return new jw;case 1:return n[0];default:return new pV(n)}}function NV(n,e,t=new Map,r=new Map){const i=[],o=[];let a=-1,d=null;if(e.forEach(m=>{const _=m.get("offset"),C=_==a,T=C&&d||new Map;m.forEach((R,L)=>{let G=L,W=R;if("offset"!==L)switch(G=n.normalizePropertyName(G,i),W){case"!":W=t.get(L);break;case Hm:W=r.get(L);break;default:W=n.normalizeStyleValue(L,G,W,i)}T.set(G,W)}),C||o.push(T),d=T,a=_}),i.length)throw function Fse(n){return new tn(3502,!1)}();return o}function xR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&wR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&wR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&wR(t,"destroy",n)))}}function wR(n,e,t){const o=ER(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(o._data=a),o}function ER(n,e,t,r,i="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function Td(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function FV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Zse=(()=>typeof document>"u"?null:document.documentElement)();function CR(n){const e=n.parentNode||n.host||null;return e===Zse?null:e}let Uy=null,BV=!1;function zV(n,e){for(;e;){if(e===n)return!0;e=CR(e)}return!1}function $V(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let VV=(()=>{class n{validateStyleProperty(t){return function Kse(n){Uy||(Uy=function Qse(){return typeof document<"u"?document.body:null}()||{},BV=!!Uy.style&&"WebkitAppearance"in Uy.style);let e=!0;return Uy.style&&!function Yse(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Uy.style,!e&&BV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Uy.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return zV(t,r)}getParentElement(t){return CR(t)}query(t,r,i){return $V(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,a,d=[],m){return new jw(i,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})(),SR=(()=>{class n{static#e=this.NOOP=new VV}return n})();const Jse=1e3,IR="ng-enter",XT="ng-leave",ZT="ng-trigger",YT=".ng-trigger",jV="ng-animating",TR=".ng-animating";function qm(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:DR(parseFloat(e[1]),e[2])}function DR(n,e){return"s"===e?n*Jse:n}function KT(n,e,t){return n.hasOwnProperty("duration")?n:function tae(n,e,t){let i,o=0,a="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(LV()),{duration:0,delay:0,easing:""};i=DR(parseFloat(d[1]),d[2]);const m=d[3];null!=m&&(o=DR(parseFloat(m),d[4]));const _=d[5];_&&(a=_)}else i=n;if(!t){let d=!1,m=e.length;i<0&&(e.push(function mse(){return new tn(3100,!1)}()),d=!0),o<0&&(e.push(function gse(){return new tn(3101,!1)}()),d=!0),d&&e.splice(m,0,LV())}return{duration:i,delay:o,easing:a}}(n,e,t)}function Gw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function GV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function c_(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function jp(n,e,t){e.forEach((r,i)=>{const o=MR(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function jy(n,e){e.forEach((t,r)=>{const i=MR(r);n.style[i]=""})}function Hw(n){return Array.isArray(n)?1==n.length?n[0]:fV(n):n}const AR=new RegExp("{{\\s*(.+?)\\s*}}","g");function qV(n){let e=[];if("string"==typeof n){let t;for(;t=AR.exec(n);)e.push(t[1]);AR.lastIndex=0}return e}function qw(n,e,t){const r=n.toString(),i=r.replace(AR,(o,a)=>{let d=e[a];return null==d&&(t.push(function yse(n){return new tn(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function QT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const iae=/-+([a-z0-9])/g;function MR(n){return n.replace(iae,(...e)=>e[1].toUpperCase())}function Dd(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function vse(n){return new tn(3004,!1)}()}}function WV(n,e){return window.getComputedStyle(n)[e]}const JT="*";function aae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function lae(n,e,t){if(":"==n[0]){const m=function cae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Rse(n){return new tn(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function kse(n){return new tn(3015,!1)}()),e;const i=r[1],o=r[2],a=r[3];e.push(XV(i,a));"<"==o[0]&&!(i==JT&&a==JT)&&e.push(XV(a,i))}(r,t,e)):t.push(n),t}const eD=new Set(["true","1"]),tD=new Set(["false","0"]);function XV(n,e){const t=eD.has(n)||tD.has(n),r=eD.has(e)||tD.has(e);return(i,o)=>{let a=n==JT||n==i,d=e==JT||e==o;return!a&&t&&"boolean"==typeof i&&(a=i?eD.has(n):tD.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?eD.has(e):tD.has(e)),a&&d}}const uae=new RegExp("s*:selfs*,?","g");function PR(n,e,t,r){return new hae(n).build(e,t,r)}class hae{constructor(e){this._driver=e}build(e,t,r){const i=new pae(t);return this._resetContextStyleTimingState(i),Dd(this,Hw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function xse(){return new tn(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const m=d,_=m.name;_.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,o.push(this.visitState(m,t))}),m.name=_}else if(1==d.type){const m=this.visitTransition(d,t);r+=m.queryCount,i+=m.depCount,a.push(m)}else t.errors.push(function wse(){return new tn(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,a=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(m=>{qV(m).forEach(_=>{a.hasOwnProperty(_)||o.add(_)})})}),o.size&&(QT(o.values()),t.errors.push(function Ese(n,e){return new tn(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Dd(this,Hw(e.animation),t);return{type:1,matchers:aae(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Gy(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Dd(this,r,t)),options:Gy(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(a=>{t.currentTime=r;const d=Dd(this,a,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:o,options:Gy(e.options)}}visitAnimate(e,t){const r=function gae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return kR(KT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=kR(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=KT(t,e);return kR(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:$y({});if(5==o.type)i=this.visitKeyframes(o,t);else{let a=e.styles,d=!1;if(!a){d=!0;const _={};r.easing&&(_.easing=r.easing),a=$y(_)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(a,t);m.isEmptyStep=d,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===Hm?r.push(d):t.errors.push(new tn(3002,!1)):r.push(GV(d));let o=!1,a=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(a=d.get("easing"),d.delete("easing")),!o))for(let m of d.values())if(m.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((d,m)=>{const _=t.collectedStyles.get(t.currentQuerySelector),C=_.get(m);let T=!0;C&&(o!=i&&o>=C.startTime&&i<=C.endTime&&(t.errors.push(function Sse(n,e,t,r,i){return new tn(3010,!1)}()),T=!1),o=C.startTime),T&&_.set(m,{startTime:o,endTime:i}),t.options&&function rae(n,e,t){const r=e.params||{},i=qV(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function _se(n){return new tn(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Ise(){return new tn(3011,!1)}()),r;let o=0;const a=[];let d=!1,m=!1,_=0;const C=e.steps.map(_e=>{const re=this._makeStyleAst(_e,t);let Oe=null!=re.offset?re.offset:function mae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(re.styles),vt=0;return null!=Oe&&(o++,vt=re.offset=Oe),m=m||vt<0||vt>1,d=d||vt<_,_=vt,a.push(vt),re});m&&t.errors.push(function Tse(){return new tn(3012,!1)}()),d&&t.errors.push(function Dse(){return new tn(3200,!1)}());const T=e.steps.length;let R=0;o>0&&o<T?t.errors.push(function Ase(){return new tn(3202,!1)}()):0==o&&(R=1/(T-1));const L=T-1,G=t.currentTime,W=t.currentAnimateTimings,ve=W.duration;return C.forEach((_e,re)=>{const Oe=R>0?re==L?1:R*re:a[re],vt=Oe*ve;t.currentTime=G+W.delay+vt,W.duration=vt,this._validateStyleAst(_e,t),_e.offset=Oe,r.styles.push(_e)}),r}visitReference(e,t){return{type:8,animation:Dd(this,Hw(e.animation),t),options:Gy(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Gy(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Gy(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,a]=function dae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(uae,"")),n=n.replace(/@\*/g,YT).replace(/@\w+/g,t=>YT+"-"+t.slice(1)).replace(/:animating/g,TR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Td(t.collectedStyles,t.currentQuerySelector,new Map);const d=Dd(this,Hw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:d,originalSelector:e.selector,options:Gy(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Mse(){return new tn(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:KT(e.timings,t.errors,!0);return{type:12,animation:Dd(this,Hw(e.animation),t),timings:r,options:null}}}class pae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gy(n){return n?(n=Gw(n)).params&&(n.params=function fae(n){return n?Gw(n):null}(n.params)):n={},n}function kR(n,e,t){return{duration:n,delay:e,easing:t}}function RR(n,e,t,r,i,o,a=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:d}}class nD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vae=new RegExp(":enter","g"),xae=new RegExp(":leave","g");function OR(n,e,t,r,i,o=new Map,a=new Map,d,m,_=[]){return(new wae).buildKeyframes(n,e,t,r,i,o,a,d,m,_)}class wae{buildKeyframes(e,t,r,i,o,a,d,m,_,C=[]){_=_||new nD;const T=new LR(e,t,_,i,o,C,[]);T.options=m;const R=m.delay?qm(m.delay):0;T.currentTimeline.delayNextStep(R),T.currentTimeline.setStyles([a],null,T.errors,m),Dd(this,r,T);const L=T.timelines.filter(G=>G.containsAnimation());if(L.length&&d.size){let G;for(let W=L.length-1;W>=0;W--){const ve=L[W];if(ve.element===t){G=ve;break}}G&&!G.allowOnlyTimelineStyles()&&G.setStyles([d],null,T.errors,m)}return L.length?L.map(G=>G.buildKeyframes()):[RR(t,[],[],[],0,R,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const a="number"==typeof o?o:qm(qw(o,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const a=null!=r.duration?qm(r.duration):null,d=null!=r.delay?qm(r.delay):null;return 0!==a&&e.forEach(m=>{const _=t.appendInstructionToTimeline(m,a,d);o=Math.max(o,_.duration+_.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Dd(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rD);const a=qm(o.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>Dd(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?qm(e.options.delay):0;e.steps.forEach(a=>{const d=t.createSubContext(e.options);o&&d.delayNextStep(o),Dd(this,a,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return KT(t.params?qw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(m=>{d.forwardTime((m.offset||0)*o),d.setStyles(m.styles,m.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?qm(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rD);let a=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let m=null;d.forEach((_,C)=>{t.currentQueryIndex=C;const T=t.createSubContext(e.options,_);o&&T.delayNextStep(o),_===t.element&&(m=T.currentTimeline),Dd(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),d=a*(t.currentQueryTotal-1);let m=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=d-m;break;case"full":m=r.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const T=C.currentTime;Dd(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const rD={};class LR{constructor(e,t,r,i,o,a,d,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new iD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=qm(r.duration)),null!=r.delay&&(i.delay=qm(r.delay));const o=r.params;if(o){let a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(d=>{(!t||!a.hasOwnProperty(d))&&(a[d]=qw(o[d],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new LR(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=rD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Eae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,a){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(vae,"."+this._enterClassName)).replace(xae,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),d.push(..._)}return!o&&0==d.length&&a.push(function Pse(n){return new tn(3014,!1)}()),d}}class iD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new iD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Hm),this._currentKeyframe.set(t,Hm);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},a=function Cae(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Hm)}else c_(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,m]of a){const _=qw(m,o,r);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Hm),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,m)=>{const _=c_(d,new Map,this._backFill);_.forEach((C,T)=>{"!"===C?e.add(T):C===Hm&&t.add(T)}),r||_.set("offset",m/this.duration),i.push(_)});const o=e.size?QT(e.values()):[],a=t.size?QT(t.values()):[];if(r){const d=i[0],m=new Map(d);d.set("offset",0),m.set("offset",1),i=[d,m]}return RR(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}class Eae extends iD{constructor(e,t,r,i,o,a,d=!1){super(e,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],a=r+t,d=t/a,m=c_(e[0]);m.set("offset",0),o.push(m);const _=c_(e[0]);_.set("offset",KV(d)),o.push(_);const C=e.length-1;for(let T=1;T<=C;T++){let R=c_(e[T]);const L=R.get("offset");R.set("offset",KV((t+L*r)/a)),o.push(R)}r=a,t=0,i="",e=o}return RR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function KV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class NR{}const Sae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Iae extends NR{normalizePropertyName(e,t){return MR(e)}normalizeStyleValue(e,t,r,i){let o="";const a=r.toString().trim();if(Sae.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function bse(n,e){return new tn(3005,!1)}())}return a+o}}function QV(n,e,t,r,i,o,a,d,m,_,C,T,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:a,timelines:d,queriedElements:m,preStyleProps:_,postStyleProps:C,totalTime:T,errors:R}}const FR={};class JV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Tae(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,a,d,m,_,C){const T=[],R=this.ast.options&&this.ast.options.params||FR,G=this.buildStyles(r,d&&d.params||FR,T),W=m&&m.params||FR,ve=this.buildStyles(i,W,T),_e=new Set,re=new Map,Oe=new Map,vt="void"===i,Mt={params:Dae(W,R),delay:this.ast.options?.delay},Kt=C?[]:OR(e,t,this.ast.animation,o,a,G,ve,Mt,_,T);let Zt=0;if(Kt.forEach(ot=>{Zt=Math.max(ot.duration+ot.delay,Zt)}),T.length)return QV(t,this._triggerName,r,i,vt,G,ve,[],[],re,Oe,Zt,T);Kt.forEach(ot=>{const Er=ot.element,_r=Td(re,Er,new Set);ot.preStyleProps.forEach(Di=>_r.add(Di));const di=Td(Oe,Er,new Set);ot.postStyleProps.forEach(Di=>di.add(Di)),Er!==t&&_e.add(Er)});const an=QT(_e.values());return QV(t,this._triggerName,r,i,vt,G,ve,Kt,an,re,Oe,Zt)}}function Dae(n,e){const t=Gw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Aae{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Gw(this.defaultParams);return Object.keys(e).forEach(o=>{const a=e[o];null!==a&&(i[o]=a)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,d)=>{a&&(a=qw(a,i,t));const m=this.normalizer.normalizePropertyName(d,t);a=this.normalizer.normalizeStyleValue(d,m,a,t),r.set(d,a)})}),r}}class Pae{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Aae(i.style,i.options&&i.options.params||{},r))}),eU(this.states,"true","1"),eU(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new JV(e,i,this.states))}),this.fallbackTransition=function kae(n,e,t){return new JV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(a=>a.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function eU(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Rae=new nD;class Oae{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=PR(this._driver,t,r,[]);if(r.length)throw function Bse(n){return new tn(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=NV(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let a;const d=new Map;if(o?(a=OR(this._driver,t,o,IR,XT,new Map,new Map,r,Rae,i),a.forEach(C=>{const T=Td(d,C.element,new Map);C.postStyleProps.forEach(R=>T.set(R,null))})):(i.push(function zse(){return new tn(3300,!1)}()),a=[]),i.length)throw function $se(n){return new tn(3504,!1)}();d.forEach((C,T)=>{C.forEach((R,L)=>{C.set(L,this._driver.computeStyle(T,L,Hm))})});const _=l_(a.map(C=>{const T=d.get(C.element);return this._buildPlayer(C,new Map,T)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Vse(n){return new tn(3301,!1)}();return t}listen(e,t,r,i){const o=ER(t,"","","");return xR(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const tU="ng-animate-queued",BR="ng-animate-disabled",zae=[],nU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$ae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wf="__ng_removed";class zR{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Gae(n){return n??null}(r?e.value:e),r){const o=Gw(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ww="void",$R=new zR(Ww);class Vae{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,hf(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Use(n,e){return new tn(3302,!1)}();if(null==r||0==r.length)throw function jse(n){return new tn(3303,!1)}();if(!function Hae(n){return"start"==n||"done"==n}(r))throw function Gse(n,e){return new tn(3400,!1)}();const o=Td(this._elementListeners,e,[]),a={name:t,phase:r,callback:i};o.push(a);const d=Td(this._engine.statesByElement,e,new Map);return d.has(t)||(hf(e,ZT),hf(e,ZT+"-"+t),d.set(t,$R)),()=>{this._engine.afterFlush(()=>{const m=o.indexOf(a);m>=0&&o.splice(m,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Hse(n){return new tn(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),a=new VR(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(hf(e,ZT),hf(e,ZT+"-"+t),this._engine.statesByElement.set(e,d=new Map));let m=d.get(t);const _=new zR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&_.absorbOptions(m.options),d.set(t,_),m||(m=$R),_.value!==Ww&&m.value===_.value){if(!function Xae(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(m.params,_.params)){const W=[],ve=o.matchStyles(m.value,m.params,W),_e=o.matchStyles(_.value,_.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{jy(e,ve),jp(e,_e)})}return}const R=Td(this._engine.playersByElement,e,[]);R.forEach(W=>{W.namespaceId==this.id&&W.triggerName==t&&W.queued&&W.destroy()});let L=o.matchTransition(m.value,_.value,e,_.params),G=!1;if(!L){if(!i)return;L=o.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:m,toState:_,player:a,isFallbackTransition:G}),G||(hf(e,tU),a.onStart(()=>{lb(e,tU)})),a.onDone(()=>{let W=this.players.indexOf(a);W>=0&&this.players.splice(W,1);const ve=this._engine.playersByElement.get(e);if(ve){let _e=ve.indexOf(a);_e>=0&&ve.splice(_e,1)}}),this.players.push(a),R.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,YT,!0);r.forEach(i=>{if(i[Wf])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),a=new Map;if(o){const d=[];if(o.forEach((m,_)=>{if(a.set(_,m.value),this._triggers.has(_)){const C=this.trigger(e,_,Ww,i);C&&d.push(C)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),r&&l_(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const a=o.name;if(i.has(a))return;i.add(a);const m=this._triggers.get(a).fallbackTransition,_=r.get(a)||$R,C=new zR(Ww),T=new VR(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:m,fromState:_,toState:C,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let a=e;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Wf];(!o||o===nU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){hf(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,a=this._elementListeners.get(o);a&&a.forEach(d=>{if(d.name==r.triggerName){const m=ER(o,r.triggerName,r.fromState.value,r.toState.value);m._data=e,xR(r.player,d.phase,m,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==o||0==a?o-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Uae{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Vae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,d=this.driver.getParentElement(t);for(;d;){const m=i.get(d);if(m){const _=r.indexOf(m);r.splice(_+1,0,e),a=!0;break}d=this.driver.getParentElement(d)}a||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(oD(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!oD(t))return;const o=t[Wf];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),hf(e,BR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),lb(e,BR))}removeNode(e,t,r){if(oD(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Wf]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return oD(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,YT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,TR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return l_(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Wf];if(t&&t.setForRemoval){if(e[Wf]=nU,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(BR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)hf(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?l_(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function qse(n){return new tn(3402,!1)}()}_flushAnimations(e,t){const r=new nD,i=[],o=new Map,a=[],d=new Map,m=new Map,_=new Map,C=new Set;this.disabledNodes.forEach(Ln=>{C.add(Ln);const xr=this.driver.query(Ln,".ng-animate-queued",!0);for(let Ur=0;Ur<xr.length;Ur++)C.add(xr[Ur])});const T=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=oU(R,this.collectedEnterElements),G=new Map;let W=0;L.forEach((Ln,xr)=>{const Ur=IR+W++;G.set(xr,Ur),Ln.forEach(ri=>hf(ri,Ur))});const ve=[],_e=new Set,re=new Set;for(let Ln=0;Ln<this.collectedLeaveElements.length;Ln++){const xr=this.collectedLeaveElements[Ln],Ur=xr[Wf];Ur&&Ur.setForRemoval&&(ve.push(xr),_e.add(xr),Ur.hasAnimation?this.driver.query(xr,".ng-star-inserted",!0).forEach(ri=>_e.add(ri)):re.add(xr))}const Oe=new Map,vt=oU(R,Array.from(_e));vt.forEach((Ln,xr)=>{const Ur=XT+W++;Oe.set(xr,Ur),Ln.forEach(ri=>hf(ri,Ur))}),e.push(()=>{L.forEach((Ln,xr)=>{const Ur=G.get(xr);Ln.forEach(ri=>lb(ri,Ur))}),vt.forEach((Ln,xr)=>{const Ur=Oe.get(xr);Ln.forEach(ri=>lb(ri,Ur))}),ve.forEach(Ln=>{this.processLeaveNode(Ln)})});const Mt=[],Kt=[];for(let Ln=this._namespaceList.length-1;Ln>=0;Ln--)this._namespaceList[Ln].drainQueuedTransitions(t).forEach(Ur=>{const ri=Ur.player,Gs=Ur.element;if(Mt.push(ri),this.collectedEnterElements.length){const ol=Gs[Wf];if(ol&&ol.setForMove){if(ol.previousTriggersValues&&ol.previousTriggersValues.has(Ur.triggerName)){const ap=ol.previousTriggersValues.get(Ur.triggerName),Cu=this.statesByElement.get(Ur.element);if(Cu&&Cu.has(Ur.triggerName)){const mg=Cu.get(Ur.triggerName);mg.value=ap,Cu.set(Ur.triggerName,mg)}}return void ri.destroy()}}const wa=!T||!this.driver.containsElement(T,Gs),ha=Oe.get(Gs),Uo=G.get(Gs),eo=this._buildInstruction(Ur,r,Uo,ha,wa);if(eo.errors&&eo.errors.length)return void Kt.push(eo);if(wa)return ri.onStart(()=>jy(Gs,eo.fromStyles)),ri.onDestroy(()=>jp(Gs,eo.toStyles)),void i.push(ri);if(Ur.isFallbackTransition)return ri.onStart(()=>jy(Gs,eo.fromStyles)),ri.onDestroy(()=>jp(Gs,eo.toStyles)),void i.push(ri);const il=[];eo.timelines.forEach(ol=>{ol.stretchStartingKeyframe=!0,this.disabledNodes.has(ol.element)||il.push(ol)}),eo.timelines=il,r.append(Gs,eo.timelines),a.push({instruction:eo,player:ri,element:Gs}),eo.queriedElements.forEach(ol=>Td(d,ol,[]).push(ri)),eo.preStyleProps.forEach((ol,ap)=>{if(ol.size){let Cu=m.get(ap);Cu||m.set(ap,Cu=new Set),ol.forEach((mg,O_)=>Cu.add(O_))}}),eo.postStyleProps.forEach((ol,ap)=>{let Cu=_.get(ap);Cu||_.set(ap,Cu=new Set),ol.forEach((mg,O_)=>Cu.add(O_))})});if(Kt.length){const Ln=[];Kt.forEach(xr=>{Ln.push(function Wse(n,e){return new tn(3505,!1)}())}),Mt.forEach(xr=>xr.destroy()),this.reportError(Ln)}const Zt=new Map,an=new Map;a.forEach(Ln=>{const xr=Ln.element;r.has(xr)&&(an.set(xr,xr),this._beforeAnimationBuild(Ln.player.namespaceId,Ln.instruction,Zt))}),i.forEach(Ln=>{const xr=Ln.element;this._getPreviousPlayers(xr,!1,Ln.namespaceId,Ln.triggerName,null).forEach(ri=>{Td(Zt,xr,[]).push(ri),ri.destroy()})});const ot=ve.filter(Ln=>aU(Ln,m,_)),Er=new Map;iU(Er,this.driver,re,_,Hm).forEach(Ln=>{aU(Ln,m,_)&&ot.push(Ln)});const di=new Map;L.forEach((Ln,xr)=>{iU(di,this.driver,new Set(Ln),m,"!")}),ot.forEach(Ln=>{const xr=Er.get(Ln),Ur=di.get(Ln);Er.set(Ln,new Map([...xr?.entries()??[],...Ur?.entries()??[]]))});const Di=[],br=[],qr={};a.forEach(Ln=>{const{element:xr,player:Ur,instruction:ri}=Ln;if(r.has(xr)){if(C.has(xr))return Ur.onDestroy(()=>jp(xr,ri.toStyles)),Ur.disabled=!0,Ur.overrideTotalTime(ri.totalTime),void i.push(Ur);let Gs=qr;if(an.size>1){let ha=xr;const Uo=[];for(;ha=ha.parentNode;){const eo=an.get(ha);if(eo){Gs=eo;break}Uo.push(ha)}Uo.forEach(eo=>an.set(eo,Gs))}const wa=this._buildAnimation(Ur.namespaceId,ri,Zt,o,di,Er);if(Ur.setRealPlayer(wa),Gs===qr)Di.push(Ur);else{const ha=this.playersByElement.get(Gs);ha&&ha.length&&(Ur.parentPlayer=l_(ha)),i.push(Ur)}}else jy(xr,ri.fromStyles),Ur.onDestroy(()=>jp(xr,ri.toStyles)),br.push(Ur),C.has(xr)&&i.push(Ur)}),br.forEach(Ln=>{const xr=o.get(Ln.element);if(xr&&xr.length){const Ur=l_(xr);Ln.setRealPlayer(Ur)}}),i.forEach(Ln=>{Ln.parentPlayer?Ln.syncPlayerEvents(Ln.parentPlayer):Ln.destroy()});for(let Ln=0;Ln<ve.length;Ln++){const xr=ve[Ln],Ur=xr[Wf];if(lb(xr,XT),Ur&&Ur.hasAnimation)continue;let ri=[];if(d.size){let wa=d.get(xr);wa&&wa.length&&ri.push(...wa);let ha=this.driver.query(xr,TR,!0);for(let Uo=0;Uo<ha.length;Uo++){let eo=d.get(ha[Uo]);eo&&eo.length&&ri.push(...eo)}}const Gs=ri.filter(wa=>!wa.destroyed);Gs.length?qae(this,xr,Gs):this.processLeaveNode(xr)}return ve.length=0,Di.forEach(Ln=>{this.players.push(Ln),Ln.onDone(()=>{Ln.destroy();const xr=this.players.indexOf(Ln);this.players.splice(xr,1)}),Ln.play()}),Di}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let a=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(a=d)}else{const d=this.playersByElement.get(e);if(d){const m=!o||o==Ww;d.forEach(_=>{_.queued||!m&&_.triggerName!=i||a.push(_)})}}return(r||i)&&(a=a.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),a}_beforeAnimationBuild(e,t,r){const o=t.element,a=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const _=m.element,C=_!==o,T=Td(r,_,[]);this._getPreviousPlayers(_,C,a,d,t.toState).forEach(L=>{const G=L.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),L.destroy(),T.push(L)})}jy(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,a){const d=t.triggerName,m=t.element,_=[],C=new Set,T=new Set,R=t.timelines.map(G=>{const W=G.element;C.add(W);const ve=W[Wf];if(ve&&ve.removedBeforeQueried)return new jw(G.duration,G.delay);const _e=W!==m,re=function Wae(n){const e=[];return sU(n,e),e}((r.get(W)||zae).map(Zt=>Zt.getRealPlayer())).filter(Zt=>!!Zt.element&&Zt.element===W),Oe=o.get(W),vt=a.get(W),Mt=NV(this._normalizer,G.keyframes,Oe,vt),Kt=this._buildPlayer(G,Mt,re);if(G.subTimeline&&i&&T.add(W),_e){const Zt=new VR(e,d,W);Zt.setRealPlayer(Kt),_.push(Zt)}return Kt});_.forEach(G=>{Td(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function jae(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,G.element,G))}),C.forEach(G=>hf(G,jV));const L=l_(R);return L.onDestroy(()=>{C.forEach(G=>lb(G,jV)),jp(m,t.toStyles)}),T.forEach(G=>{Td(i,G,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new jw(e.duration,e.delay)}}class VR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new jw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>xR(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Td(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function oD(n){return n&&1===n.nodeType}function rU(n,e){const t=n.style.display;return n.style.display=e??"none",t}function iU(n,e,t,r,i){const o=[];t.forEach(m=>o.push(rU(m)));const a=[];r.forEach((m,_)=>{const C=new Map;m.forEach(T=>{const R=e.computeStyle(_,T,i);C.set(T,R),(!R||0==R.length)&&(_[Wf]=$ae,a.push(_))}),n.set(_,C)});let d=0;return t.forEach(m=>rU(m,o[d++])),a}function oU(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),o=new Map;function a(d){if(!d)return 1;let m=o.get(d);if(m)return m;const _=d.parentNode;return m=t.has(_)?_:i.has(_)?1:a(_),o.set(d,m),m}return e.forEach(d=>{const m=a(d);1!==m&&t.get(m).push(d)}),t}function hf(n,e){n.classList?.add(e)}function lb(n,e){n.classList?.remove(e)}function qae(n,e,t){l_(t).onDone(()=>n.processLeaveNode(e))}function sU(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof pV?sU(r.players,e):e.push(r)}}function aU(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class sD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Uae(e,t,r),this._timelineEngine=new Oae(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const a=e+"-"+i;let d=this._triggerCache[a];if(!d){const m=[],C=PR(this._driver,o,m,[]);if(m.length)throw function Nse(n,e){return new tn(3404,!1)}();d=function Mae(n,e,t){return new Pae(n,e,t)}(i,C,this._normalizer),this._triggerCache[a]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,a]=FV(r);this._timelineEngine.command(o,t,a,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[a,d]=FV(r);return this._timelineEngine.listen(a,t,d,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Yae=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&jp(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jp(this._element,this._initialStyles),this._endStyles&&(jp(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(jy(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(jy(this._element,this._endStyles),this._endStyles=null),jp(this._element,this._initialStyles),this._state=3)}}return n})();function UR(n){let e=null;return n.forEach((t,r)=>{(function Kae(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class lU{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:WV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Qae{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return zV(e,t)}getParentElement(e){return CR(e)}query(e,t,r){return $V(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,a=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(m.easing=o);const _=new Map,C=a.filter(L=>L instanceof lU);(function oae(n,e){return 0===n||0===e})(r,i)&&C.forEach(L=>{L.currentSnapshot.forEach((G,W)=>_.set(W,G))});let T=function nae(n){return n.length?n[0]instanceof Map?n:n.map(e=>GV(e)):[]}(t).map(L=>c_(L));T=function sae(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,a)=>{r.has(a)||i.push(a),r.set(a,o)}),i.length)for(let o=1;o<e.length;o++){let a=e[o];i.forEach(d=>a.set(d,WV(n,d)))}}return e}(e,T,_);const R=function Zae(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=UR(e[0]),e.length>1&&(r=UR(e[e.length-1]))):e instanceof Map&&(t=UR(e)),t||r?new Yae(n,t,r):null}(e,T);return new lU(e,T,m,R)}}let Jae=(()=>{class n extends hV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Bs.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?fV(t):t;return cU(this._renderer,null,r,"register",[i]),new ele(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(yy),pn(Ao))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();class ele extends xoe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new tle(this._id,e,t||{},this._renderer)}}class tle{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return cU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function cU(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const uU="@.disabled";let nle=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(o,a)=>{const d=a?.parentNode(o);d&&a.removeChild(d,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(o);return C||(C=new hU("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,C)),C}const a=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(a,d,t,C.name,C)};return r.data.animation.forEach(m),new rle(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[a,d]=o;a(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(yy),pn(sD),pn(y))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();class hU{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==uU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class rle extends hU{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==uU?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function ile(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),a="";return"@"!=o.charAt(0)&&([o,a]=function ole(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,a,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}const dU=[{provide:hV,useClass:Jae},{provide:NR,useFactory:function ale(){return new Iae}},{provide:sD,useClass:(()=>{class n extends sD{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ao),pn(SR),pn(NR),pn(zm))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})()},{provide:yy,useFactory:function lle(n,e,t){return new nle(n,e,t)},deps:[vk,sD,y]}],jR=[{provide:SR,useFactory:()=>new Qae},{provide:zf,useValue:"BrowserAnimations"},...dU],fU=[{provide:SR,useClass:VV},{provide:zf,useValue:"NoopAnimations"},...dU];let cle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?fU:jR}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({providers:jR,imports:[H4]})}return n})();var Aa=Ie(5861),Xw=Ie(191),pU=Ie(3630);const mU=n=>({create:e=>fle(n,e),dismiss:(e,t,r)=>_le(document,e,t,n,r),getTop:()=>(0,Aa.Z)(function*(){return Zw(document,n)})()}),hle=mU("ion-modal"),dle=mU("ion-popover"),fle=(n,e)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(n).then(()=>{const t=document.createElement(n);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},e),{hasController:!0})),yU(document).appendChild(t),new Promise(r=>(0,pU.c)(t,r))}):Promise.resolve(),_le=(n,e,t,r,i)=>{const o=Zw(n,r,i);return o?o.dismiss(e,t):Promise.reject("overlay does not exist")},Zw=(n,e,t)=>{const r=((n,e)=>((n,e)=>(void 0===e&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter(t=>t.overlayIndex>0)))(n,e).filter(t=>!(n=>n.classList.contains("overlay-hidden"))(t)))(n,e);return void 0===t?r[r.length-1]:r.find(i=>i.id===t)},yU=n=>n.querySelector("ion-app")||n.body;class wle{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const r=this.m.get(e);return void 0!==r?r:t}getBoolean(e,t=!1){const r=this.m.get(e);return void 0===r?t:"string"==typeof r?"true"===r:!!r}getNumber(e,t){const r=parseFloat(this.m.get(e));return isNaN(r)?void 0!==t?t:NaN:r}set(e,t){this.m.set(e,t)}}const u_=new wle,xU=n=>EU(n),EU=(n=window)=>{if(typeof n>"u")return[];n.Ionic=n.Ionic||{};let e=n.Ionic.platforms;return null==e&&(e=n.Ionic.platforms=Tle(n),e.forEach(t=>n.document.documentElement.classList.add(`plt-${t}`))),e},Tle=n=>{const e=u_.get("platform");return Object.keys(DU).filter(t=>{const r=e?.[t];return"function"==typeof r?r(n):DU[t](n)})},qR=n=>!!(Hy(n,/iPad/i)||Hy(n,/Macintosh/i)&&cD(n)),CU=n=>Hy(n,/android|sink/i),cD=n=>Fle(n,"(any-pointer:coarse)"),SU=n=>IU(n)||TU(n),IU=n=>!!(n.cordova||n.phonegap||n.PhoneGap),TU=n=>{const e=n.Capacitor;return!!e?.isNative},Hy=(n,e)=>e.test(n.navigator.userAgent),Fle=(n,e)=>{var t;return null===(t=n.matchMedia)||void 0===t?void 0:t.call(n,e).matches},DU={ipad:qR,iphone:n=>Hy(n,/iPhone/i),ios:n=>Hy(n,/iPhone|iPod/i)||qR(n),android:CU,phablet:n=>{const e=n.innerWidth,t=n.innerHeight,r=Math.min(e,t),i=Math.max(e,t);return r>390&&r<520&&i>620&&i<800},tablet:n=>{const e=n.innerWidth,t=n.innerHeight,r=Math.min(e,t),i=Math.max(e,t);return qR(n)||(n=>CU(n)&&!Hy(n,/mobile/i))(n)||r>460&&r<820&&i>780&&i<1400},cordova:IU,capacitor:TU,electron:n=>Hy(n,/electron/i),pwa:n=>{var e;return!!(null!==(e=n.matchMedia)&&void 0!==e&&e.call(n,"(display-mode: standalone)").matches||n.navigator.standalone)},mobile:cD,mobileweb:n=>cD(n)&&!SU(n),desktop:n=>!cD(n),hybrid:SU},Yw=Fe(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function AU(n){return new Me(e=>{Fi(n()).subscribe(e)})}function WR(){return _n((n,e)=>{let t=null;n._refCount++;const r=Pn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class MU extends Me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Xt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new me;const t=this.getSubject();e.add(this.source.subscribe(Pn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=me.EMPTY)}return e}refCount(){return WR()(this)}}function uD(n){return _n((e,t)=>{let r=!1;e.subscribe(Pn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function PU(n=zle){return _n((e,t)=>{let r=!1;e.subscribe(Pn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zle(){return new Yw}function h_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yc((i,o)=>n(i,o,r)):Te,Dh(1),t?uD(e):PU(()=>new Yw))}function XR(n){return n<=0?()=>Pr:_n((e,t)=>{let r=[];e.subscribe(Pn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const xo="primary",Kw=Symbol("RouteTitle");class jle{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ub(n){return new jle(n)}function Gle(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const a=r[o],d=n[o];if(a.startsWith(":"))i[a.substring(1)]=d;else if(a!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Gp(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!kU(n[i],e[i]))return!1;return!0}function kU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function RU(n){return n.length>0?n[n.length-1]:null}function d_(n){return function Ble(n){return!!n&&(n instanceof Me||de(n.lift)&&de(n.subscribe))}(n)?n:iw(n)?$t(Promise.resolve(n)):Tt(n)}const qle={exact:function NU(n,e,t){if(!qy(n.segments,e.segments)||!hD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!NU(n.children[r],e.children[r],t))return!1;return!0},subset:FU},OU={exact:function Wle(n,e){return Gp(n,e)},subset:function Xle(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kU(n[t],e[t]))},ignored:()=>!0};function LU(n,e,t){return qle[t.paths](n.root,e.root,t.matrixParams)&&OU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function FU(n,e,t){return BU(n,e,e.segments,t)}function BU(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qy(i,t)||e.hasChildren()||!hD(i,t,r))}if(n.segments.length===t.length){if(!qy(n.segments,t)||!hD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!FU(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(qy(n.segments,i)&&hD(n.segments,i,r)&&n.children[xo])&&BU(n.children[xo],e,o,r)}}function hD(n,e,t){return e.every((r,i)=>OU[t](n[i].parameters,r.parameters))}class hb{constructor(e=new ja([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ub(this.queryParams)),this._queryParamMap}toString(){return Kle.serialize(this)}}class ja{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dD(this)}}class Qw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ub(this.parameters)),this._parameterMap}toString(){return VU(this)}}function qy(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let db=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return new ZR},providedIn:"root"})}return n})();class ZR{parse(e){const t=new lce(e);return new hb(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Jw(e.root,!0)}`,r=function ece(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${fD(t)}=${fD(i)}`).join("&"):`${fD(t)}=${fD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Qle(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Kle=new ZR;function dD(n){return n.segments.map(e=>VU(e)).join("/")}function Jw(n,e){if(!n.hasChildren())return dD(n);if(e){const t=n.children[xo]?Jw(n.children[xo],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==xo&&r.push(`${i}:${Jw(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Yle(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===xo&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==xo&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===xo?[Jw(n.children[xo],!1)]:[`${i}:${Jw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xo]?`${dD(n)}/${t[0]}`:`${dD(n)}/(${t.join("//")})`}}function zU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fD(n){return zU(n).replace(/%3B/gi,";")}function YR(n){return zU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pD(n){return decodeURIComponent(n)}function $U(n){return pD(n.replace(/\+/g,"%20"))}function VU(n){return`${YR(n.path)}${function Jle(n){return Object.keys(n).map(e=>`;${YR(e)}=${YR(n[e])}`).join("")}(n.parameters)}`}const tce=/^[^\/()?;#]+/;function KR(n){const e=n.match(tce);return e?e[0]:""}const nce=/^[^\/()?;=#]+/,ice=/^[^=?&#]+/,sce=/^[^&#]+/;class lce{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ja([],{}):new ja([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xo]=new ja(e,t)),r}parseSegment(){const e=KR(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new tn(4009,!1);return this.capture(e),new Qw(pD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function rce(n){const e=n.match(nce);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=KR(this.remaining);i&&(r=i,this.capture(r))}e[pD(t)]=pD(r)}parseQueryParam(e){const t=function oce(n){const e=n.match(ice);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function ace(n){const e=n.match(sce);return e?e[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=$U(t),o=$U(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=KR(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new tn(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=xo);const a=this.parseChildren();t[o]=1===Object.keys(a).length?a[xo]:new ja([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new tn(4011,!1)}}function UU(n){return n.segments.length>0?new ja([],{[xo]:n}):n}function jU(n){const e={};for(const r of Object.keys(n.children)){const o=jU(n.children[r]);if(r===xo&&0===o.segments.length&&o.hasChildren())for(const[a,d]of Object.entries(o.children))e[a]=d;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function cce(n){if(1===n.numberOfChildren&&n.children[xo]){const e=n.children[xo];return new ja(n.segments.concat(e.segments),e.children)}return n}(new ja(n.segments,e))}function Wy(n){return n instanceof hb}function GU(n){let e;const i=UU(function t(o){const a={};for(const m of o.children){const _=t(m);a[m.outlet]=_}const d=new ja(o.url,a);return o===n&&(e=d),d}(n.root));return e??i}function HU(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return QR(i,i,i,t,r);const o=function hce(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new WU(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Object.entries(o.outlets).forEach(([m,_])=>{d[m]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((d,m)=>{0==m&&"."===d||(0==m&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new WU(t,e,r)}(e);if(o.toRoot())return QR(i,i,new ja([],{}),t,r);const a=function dce(n,e,t){if(n.isAbsolute)return new gD(e,!0,0);if(!t)return new gD(e,!1,NaN);if(null===t.parent)return new gD(t,!0,0);const r=mD(n.commands[0])?0:1;return function fce(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new tn(4005,!1);i=r.segments.length}return new gD(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),d=a.processChildren?tE(a.segmentGroup,a.index,o.commands):XU(a.segmentGroup,a.index,o.commands);return QR(i,a.segmentGroup,d,t,r)}function mD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eE(n){return"object"==typeof n&&null!=n&&n.outlets}function QR(n,e,t,r,i){let a,o={};r&&Object.entries(r).forEach(([m,_])=>{o[m]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),a=n===e?t:qU(n,e,t);const d=UU(jU(a));return new hb(d,o,i)}function qU(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:qU(o,e,t)}),new ja(n.segments,r)}class WU{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mD(r[0]))throw new tn(4003,!1);const i=r.find(eE);if(i&&i!==RU(r))throw new tn(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gD{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function XU(n,e,t){if(n||(n=new ja([],{})),0===n.segments.length&&n.hasChildren())return tE(n,e,t);const r=function mce(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const a=n.segments[i],d=t[r];if(eE(d))break;const m=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&_&&"object"==typeof _&&void 0===_.outlets){if(!YU(m,_,a))return o;r+=2}else{if(!YU(m,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new ja(n.segments.slice(0,r.pathIndex),{});return o.children[xo]=new ja(n.segments.slice(r.pathIndex),n.children),tE(o,0,i)}return r.match&&0===i.length?new ja(n.segments,{}):r.match&&!n.hasChildren()?JR(n,e,t):r.match?tE(n,0,i):JR(n,e,t)}function tE(n,e,t){if(0===t.length)return new ja(n.segments,{});{const r=function pce(n){return eE(n[0])?n[0].outlets:{[xo]:n}}(t),i={};if(Object.keys(r).some(o=>o!==xo)&&n.children[xo]&&1===n.numberOfChildren&&0===n.children[xo].segments.length){const o=tE(n.children[xo],e,t);return new ja(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(i[o]=XU(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{void 0===r[o]&&(i[o]=a)}),new ja(n.segments,i)}}function JR(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(eE(o)){const m=gce(o.outlets);return new ja(r,m)}if(0===i&&mD(t[0])){r.push(new Qw(n.segments[e].path,ZU(t[0]))),i++;continue}const a=eE(o)?o.outlets[xo]:`${o}`,d=i<t.length-1?t[i+1]:null;a&&d&&mD(d)?(r.push(new Qw(a,ZU(d))),i+=2):(r.push(new Qw(a,{})),i++)}return new ja(r,{})}function gce(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=JR(new ja([],{}),0,r))}),e}function ZU(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function YU(n,e,t){return n==t.path&&Gp(e,t.parameters)}const nE="imperative";class Hp{constructor(e,t){this.id=e,this.url=t}}class rE extends Hp{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wm extends Hp{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class iE extends Hp{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fb extends Hp{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class _D extends Hp{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KU extends Hp{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _ce extends Hp{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yce extends Hp{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vce extends Hp{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bce extends Hp{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xce{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wce{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ece{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cce{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sce{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ice{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QU{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class eO{}class tO{constructor(e){this.url=e}}class Tce{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xy,this.attachRef=null}}let Xy=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Tce,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class JU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nO(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nO(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rO(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rO(e,this._root).map(t=>t.value)}}function nO(n,e){if(n===e.value)return e;for(const t of e.children){const r=nO(n,t);if(r)return r}return null}function rO(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rO(n,t);if(r.length)return r.unshift(e),r}return[]}class Xm{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pb(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class e6 extends JU{constructor(e,t){super(e),this.snapshot=t,iO(this,e)}toString(){return this.snapshot.toString()}}function t6(n,e){const t=function Dce(n,e){const a=new yD([],{},{},"",{},xo,e,null,{});return new r6("",new Xm(a,[]))}(0,e),r=new rt([new Qw("",{})]),i=new rt({}),o=new rt({}),a=new rt({}),d=new rt(""),m=new Xf(r,i,a,d,o,xo,e,t.root);return m.snapshot=t.root,new e6(new Xm(m,[]),t)}class Xf{constructor(e,t,r,i,o,a,d,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=d,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(jt(_=>_[Kw]))??Tt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(jt(e=>ub(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(jt(e=>ub(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function n6(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Ace(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yD{get title(){return this.data?.[Kw]}constructor(e,t,r,i,o,a,d,m,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=d,this.routeConfig=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ub(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ub(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class r6 extends JU{constructor(e,t){super(t),this.url=e,iO(this,t)}toString(){return i6(this._root)}}function iO(n,e){e.value._routerState=n,e.children.forEach(t=>iO(n,t))}function i6(n){const e=n.children.length>0?` { ${n.children.map(i6).join(", ")} } `:"";return`${n.value}${e}`}function oO(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gp(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Gp(e.params,t.params)||n.paramsSubject.next(t.params),function Hle(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gp(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Gp(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sO(n,e){const t=Gp(n.params,e.params)&&function Zle(n,e){return qy(n,e)&&n.every((t,r)=>Gp(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sO(n.parent,e.parent))}let aO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xo,this.activateEvents=new l,this.deactivateEvents=new l,this.attachEvents=new l,this.detachEvents=new l,this.parentContexts=rr(Xy),this.location=rr(Sd),this.changeDetector=rr(Or),this.environmentInjector=rr(Al),this.inputBinder=rr(vD,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new tn(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new tn(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new tn(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new tn(4013,!1);this._activatedRoute=t;const i=this.location,a=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,m=new Mce(t,d,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Kn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ei]})}return n})();class Mce{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xf?this.route:e===Xy?this.childContexts:this.parent.get(e,t)}}const vD=new Ar("");let o6=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Lw([r.queryParams,r.params,r.data]).pipe(ye(([o,a,d],m)=>(d={...o,...a,...d},0===m?Tt(d):Promise.resolve(d)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const a=s4(r.component);if(a)for(const{templateName:d}of a.inputs)t.activatedComponentRef.setInput(d,o[d]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();function oE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kce(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return oE(n,r,i);return oE(n,r)})}(n,e,t);return new Xm(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(d=>oE(n,d)),a}}const r=function Rce(n){return new Xf(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>oE(n,o));return new Xm(r,i)}}const lO="ngNavigationCancelingError";function s6(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Wy(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=a6(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function a6(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[lO]=!0,r.cancellationCode=e,t&&(r.url=t),r}function l6(n){return n&&n[lO]}let c6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zn({type:n,selectors:[["ng-component"]],standalone:!0,features:[N3],decls:1,vars:0,template:function(r,i){1&r&&Da(0,"router-outlet")},dependencies:[aO],encapsulation:2})}return n})();function cO(n){const e=n.children&&n.children.map(cO),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xo&&(t.component=c6),t}function Zf(n){return n.outlet||xo}function sE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Vce{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oO(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=pb(t);e.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pb(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);if(r&&r.outlet){const a=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pb(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=pb(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ice(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Cce(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(oO(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(d.contexts),a.attachRef=d.componentRef,a.route=d.route.value,a.outlet&&a.outlet.attach(d.componentRef,d.route.value),oO(d.route.value),this.activateChildRoutes(e,null,a.children)}else{const d=sE(i.snapshot);a.attachRef=null,a.route=i,a.injector=d,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}}class u6{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bD{constructor(e,t){this.component=e,this.route=t}}function Uce(n,e,t){const r=n._root;return aE(r,e?e._root:null,t,[r.value])}function mb(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function sl(n){return null!==jc(n)}(n)?e.get(n):n:r}function aE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=pb(e);return n.children.forEach(a=>{(function Gce(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,a=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const m=function Hce(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qy(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qy(n.url,e.url)||!Gp(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sO(n,e)||!Gp(n.queryParams,e.queryParams);default:return!sO(n,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new u6(r)):(o.data=a.data,o._resolvedData=a._resolvedData),aE(n,e,o.component?d?d.children:null:t,r,i),m&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new bD(d.outlet.component,a))}else a&&lE(e,d,i),i.canActivateChecks.push(new u6(r)),aE(n,null,o.component?d?d.children:null:t,r,i)})(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,d])=>lE(d,t.getContext(a),i)),i}function lE(n,e,t){const r=pb(n),i=n.value;Object.entries(r).forEach(([o,a])=>{lE(a,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new bD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function cE(n){return"function"==typeof n}function h6(n){return n instanceof Yw||"EmptyError"===n?.name}const xD=Symbol("INITIAL_VALUE");function gb(){return ye(n=>Lw(n.map(e=>e.pipe(Dh(1),DT(xD)))).pipe(jt(e=>{for(const t of e)if(!0!==t){if(t===xD)return xD;if(!1===t||t instanceof hb)return t}return!0}),yc(e=>e!==xD),Dh(1)))}function d6(n){return function K(...n){return qe(n)}(vc(e=>{if(Wy(e))throw s6(0,e)}),jt(e=>!0===e))}class wD{constructor(e){this.segmentGroup=e||null}}class f6{constructor(e){this.urlTree=e}}function _b(n){return ab(new wD(n))}function p6(n){return ab(new f6(n))}class hue{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new tn(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Tt(r);if(i.numberOfChildren>1||!i.children[xo])return ab(new tn(4e3,!1));i=i.children[xo]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new hb(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const d=o.substring(1);r[i]=t[d]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let a={};return Object.entries(t.children).forEach(([d,m])=>{a[d]=this.createSegmentGroup(e,m,r,i)}),new ja(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new tn(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const uO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function due(n,e,t,r,i){const o=hO(n,e,t);return o.matched?(r=function Lce(n,e){return n.providers&&!n._injector&&(n._injector=bP(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function lue(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Tt(i.map(a=>{const d=mb(a,n);return d_(function Kce(n){return n&&cE(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(gb(),d6()):Tt(!0)}(r,e,t).pipe(jt(a=>!0===a?o:{...uO}))):Tt(o)}function hO(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...uO}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Gle)(t,n,e);if(!i)return{...uO};const o={};Object.entries(i.posParams??{}).forEach(([d,m])=>{o[d]=m.path});const a=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function m6(n,e,t,r){return t.length>0&&function mue(n,e,t){return t.some(r=>ED(n,e,r)&&Zf(r)!==xo)}(n,t,r)?{segmentGroup:new ja(e,pue(r,new ja(t,n.children))),slicedSegments:[]}:0===t.length&&function gue(n,e,t){return t.some(r=>ED(n,e,r))}(n,t,r)?{segmentGroup:new ja(n.segments,fue(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ja(n.segments,n.children),slicedSegments:t}}function fue(n,e,t,r,i){const o={};for(const a of r)if(ED(n,t,a)&&!i[Zf(a)]){const d=new ja([],{});o[Zf(a)]=d}return{...i,...o}}function pue(n,e){const t={};t[xo]=e;for(const r of n)if(""===r.path&&Zf(r)!==xo){const i=new ja([],{});t[Zf(r)]=i}return t}function ED(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class bue{constructor(e,t,r,i,o,a,d){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new hue(this.urlSerializer,this.urlTree)}noMatchError(e){return new tn(4002,!1)}recognize(){const e=m6(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xo).pipe(a_(t=>{if(t instanceof f6)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof wD?this.noMatchError(t):t}),jt(t=>{const r=new yD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xo,this.rootComponentType,null,{}),i=new Xm(r,t),o=new r6("",i),a=function uce(n,e,t=null,r=null){return HU(GU(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,xo).pipe(a_(r=>{throw r instanceof wD?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=n6(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return $t(i).pipe(Y0(o=>{const a=r.children[o],d=function zce(n,e){const t=n.filter(r=>Zf(r)===e);return t.push(...n.filter(r=>Zf(r)!==e)),t}(t,o);return this.processSegmentGroup(e,d,a,o)}),function Vle(n,e){return _n(function $le(n,e,t,r,i){return(o,a)=>{let d=t,m=e,_=0;o.subscribe(Pn(a,C=>{const T=_++;m=d?n(m,C,T):(d=!0,C),r&&a.next(m)},i&&(()=>{d&&a.next(m),a.complete()})))}}(n,e,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),uD(null),function Ule(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yc((i,o)=>n(i,o,r)):Te,XR(1),t?uD(e):PU(()=>new Yw))}(),Bn(o=>{if(null===o)return _b(r);const a=g6(o);return function xue(n){n.sort((e,t)=>e.value.outlet===xo?-1:t.value.outlet===xo?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Tt(a)}))}processSegment(e,t,r,i,o,a){return $t(t).pipe(Y0(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,o,a).pipe(a_(m=>{if(m instanceof wD)return Tt(null);throw m}))),h_(d=>!!d),a_(d=>{if(h6(d))return function yue(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?Tt([]):_b(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,o,a,d){return function _ue(n,e,t,r){return!!(Zf(n)===r||r!==xo&&ED(e,t,n))&&("**"===n.path||hO(e,n,t).matched)}(r,i,o,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,a,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a):_b(i):_b(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?p6(o):this.applyRedirects.lineralizeSegments(r,o).pipe(Bn(a=>{const d=new ja(a,{});return this.processSegment(e,t,d,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a){const{matched:d,consumedSegments:m,remainingSegments:_,positionalParamSegments:C}=hO(t,i,o);if(!d)return _b(t);const T=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?p6(T):this.applyRedirects.lineralizeSegments(i,T).pipe(Bn(R=>this.processSegment(e,r,t,R.concat(_),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let d;if("**"===r.path){const m=i.length>0?RU(i).parameters:{};d=Tt({snapshot:new yD(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_6(r),Zf(r),r.component??r._loadedComponent??null,r,y6(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else d=due(t,r,i,e).pipe(jt(({matched:m,consumedSegments:_,remainingSegments:C,parameters:T})=>m?{snapshot:new yD(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_6(r),Zf(r),r.component??r._loadedComponent??null,r,y6(r)),consumedSegments:_,remainingSegments:C}:null));return d.pipe(ye(m=>null===m?_b(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ye(({routes:_})=>{const C=r._loadedInjector??e,{snapshot:T,consumedSegments:R,remainingSegments:L}=m,{segmentGroup:G,slicedSegments:W}=m6(t,R,L,_);if(0===W.length&&G.hasChildren())return this.processChildren(C,_,G).pipe(jt(_e=>null===_e?null:[new Xm(T,_e)]));if(0===_.length&&0===W.length)return Tt([new Xm(T,[])]);const ve=Zf(r)===o;return this.processSegment(C,_,G,W,ve?xo:o,!0).pipe(jt(_e=>[new Xm(T,_e)]))}))))}getChildConfig(e,t,r){return t.children?Tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function aue(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Tt(!0):Tt(i.map(a=>{const d=mb(a,n);return d_(function Wce(n){return n&&cE(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(gb(),d6())}(e,t,r).pipe(Bn(i=>i?this.configLoader.loadChildren(e,t).pipe(vc(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function uue(n){return ab(a6(!1,3))}())):Tt({routes:[],injector:e})}}function wue(n){const e=n.value.routeConfig;return e&&""===e.path}function g6(n){const e=[],t=new Set;for(const r of n){if(!wue(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=g6(r.children);e.push(new Xm(r.value,i))}return e.filter(r=>!t.has(r))}function _6(n){return n.data||{}}function y6(n){return n.resolve||{}}function v6(n){return"string"==typeof n.title||null===n.title}function dO(n){return ye(e=>{const t=n(e);return t?$t(t).pipe(jt(()=>e)):Tt(e)})}const yb=new Ar("ROUTES");let fO=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=rr(Sz)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=d_(t.loadComponent()).pipe(jt(b6),vc(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),K0(()=>{this.componentLoaders.delete(t)})),i=new MU(r,()=>new lt).pipe(WR());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Aue(n,e,t,r){return d_(n.loadChildren()).pipe(jt(b6),Bn(i=>i instanceof O3||Array.isArray(i)?Tt(i):$t(e.compileModuleAsync(i))),jt(i=>{r&&r(n);let o,a,d=!1;return Array.isArray(i)?(a=i,!0):(o=i.create(t).injector,a=o.get(yb,[],{optional:!0,self:!0}).flat()),{routes:a.map(cO),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(K0(()=>{this.childrenLoaders.delete(r)})),a=new MU(o,()=>new lt).pipe(WR());return this.childrenLoaders.set(r,a),a}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b6(n){return function Mue(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let CD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new lt,this.transitionAbortSubject=new lt,this.configLoader=rr(fO),this.environmentInjector=rr(Al),this.urlSerializer=rr(db),this.rootContexts=rr(Xy),this.inputBindingEnabled=null!==rr(vD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Tt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new wce(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new xce(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new rt({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nE,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yc(o=>0!==o.id),jt(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),ye(o=>{this.currentTransition=o;let a=!1,d=!1;return Tt(o).pipe(vc(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ye(m=>{const _=m.currentBrowserUrl.toString(),C=!t.navigated||m.extractedUrl.toString()!==_||_!==m.currentUrlTree.toString();if(!C&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const R="";return this.events.next(new fb(m.id,this.urlSerializer.serialize(m.rawUrl),R,0)),m.resolve(null),Pr}if(t.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Tt(m).pipe(ye(R=>{const L=this.transitions?.getValue();return this.events.next(new rE(R.id,this.urlSerializer.serialize(R.extractedUrl),R.source,R.restoredState)),L!==this.transitions?.getValue()?Pr:Promise.resolve(R)}),function Eue(n,e,t,r,i,o){return Bn(a=>function vue(n,e,t,r,i,o,a="emptyOnly"){return new bue(n,e,t,r,i,a,o).recognize()}(n,e,t,r,a.extractedUrl,i,o).pipe(jt(({state:d,tree:m})=>({...a,targetSnapshot:d,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),vc(R=>{o.targetSnapshot=R.targetSnapshot,o.urlAfterRedirects=R.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects};const L=new KU(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot);this.events.next(L)}));if(C&&t.urlHandlingStrategy.shouldProcessUrl(m.currentRawUrl)){const{id:R,extractedUrl:L,source:G,restoredState:W,extras:ve}=m,_e=new rE(R,this.urlSerializer.serialize(L),G,W);this.events.next(_e);const re=t6(0,this.rootComponentType).snapshot;return this.currentTransition=o={...m,targetSnapshot:re,urlAfterRedirects:L,extras:{...ve,skipLocationChange:!1,replaceUrl:!1}},Tt(o)}{const R="";return this.events.next(new fb(m.id,this.urlSerializer.serialize(m.extractedUrl),R,1)),m.resolve(null),Pr}}),vc(m=>{const _=new _ce(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),jt(m=>(this.currentTransition=o={...m,guards:Uce(m.targetSnapshot,m.currentSnapshot,this.rootContexts)},o)),function Jce(n,e){return Bn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return 0===a.length&&0===o.length?Tt({...t,guardsResult:!0}):function eue(n,e,t,r){return $t(n).pipe(Bn(i=>function sue(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Tt(o.map(d=>{const m=sE(e)??i,_=mb(d,m);return d_(function Yce(n){return n&&cE(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):m.runInContext(()=>_(n,e,t,r))).pipe(h_())})).pipe(gb()):Tt(!0)}(i.component,i.route,t,e,r)),h_(i=>!0!==i,!0))}(a,r,i,n).pipe(Bn(d=>d&&function qce(n){return"boolean"==typeof n}(d)?function tue(n,e,t,r){return $t(e).pipe(Y0(i=>Nw(function rue(n,e){return null!==n&&e&&e(new Ece(n)),Tt(!0)}(i.route.parent,r),function nue(n,e){return null!==n&&e&&e(new Sce(n)),Tt(!0)}(i.route,r),function oue(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>function jce(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>AU(()=>Tt(a.guards.map(m=>{const _=sE(a.node)??t,C=mb(m,_);return d_(function Zce(n){return n&&cE(n.canActivateChild)}(C)?C.canActivateChild(r,n):_.runInContext(()=>C(r,n))).pipe(h_())})).pipe(gb())));return Tt(o).pipe(gb())}(n,i.path,t),function iue(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Tt(!0);const i=r.map(o=>AU(()=>{const a=sE(e)??t,d=mb(o,a);return d_(function Xce(n){return n&&cE(n.canActivate)}(d)?d.canActivate(e,n):a.runInContext(()=>d(e,n))).pipe(h_())}));return Tt(i).pipe(gb())}(n,i.route,t))),h_(i=>!0!==i,!0))}(r,o,n,e):Tt(d)),jt(d=>({...t,guardsResult:d})))})}(this.environmentInjector,m=>this.events.next(m)),vc(m=>{if(o.guardsResult=m.guardsResult,Wy(m.guardsResult))throw s6(0,m.guardsResult);const _=new yce(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(_)}),yc(m=>!!m.guardsResult||(this.cancelNavigationTransition(m,"",3),!1)),dO(m=>{if(m.guards.canActivateChecks.length)return Tt(m).pipe(vc(_=>{const C=new vce(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}),ye(_=>{let C=!1;return Tt(_).pipe(function Cue(n,e){return Bn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Tt(t);let o=0;return $t(i).pipe(Y0(a=>function Sue(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!v6(i)&&(o[Kw]=i.title),function Iue(n,e,t,r){const i=function Tue(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Tt({});const o={};return $t(i).pipe(Bn(a=>function Due(n,e,t,r){const i=sE(e)??r,o=mb(n,i);return d_(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[a],e,t,r).pipe(h_(),vc(d=>{o[a]=d}))),XR(1),$T(o),a_(a=>h6(a)?Pr:ab(a)))}(o,n,e,r).pipe(jt(a=>(n._resolvedData=a,n.data=n6(n,t).resolve,i&&v6(i)&&(n.data[Kw]=i.title),null)))}(a.route,r,n,e)),vc(()=>o++),XR(1),Bn(a=>o===i.length?Tt(t):Pr))})}(t.paramsInheritanceStrategy,this.environmentInjector),vc({next:()=>C=!0,complete:()=>{C||this.cancelNavigationTransition(_,"",2)}}))}),vc(_=>{const C=new bce(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}))}),dO(m=>{const _=C=>{const T=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(C.routeConfig).pipe(vc(R=>{C.component=R}),jt(()=>{})));for(const R of C.children)T.push(..._(R));return T};return Lw(_(m.targetSnapshot.root)).pipe(uD(),Dh(1))}),dO(()=>this.afterPreactivation()),jt(m=>{const _=function Pce(n,e,t){const r=oE(n,e._root,t?t._root:void 0);return new e6(r,e)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return this.currentTransition=o={...m,targetRouterState:_},o}),vc(()=>{this.events.next(new eO)}),((n,e,t,r)=>jt(i=>(new Vce(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m),this.inputBindingEnabled),Dh(1),vc({next:m=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Wm(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects))),t.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{a=!0}}),ih(this.transitionAbortSubject.pipe(vc(m=>{throw m}))),K0(()=>{a||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),a_(m=>{if(d=!0,l6(m))this.events.next(new iE(o.id,this.urlSerializer.serialize(o.extractedUrl),m.message,m.cancellationCode)),function Oce(n){return l6(n)&&Wy(n.url)}(m)?this.events.next(new tO(m.url)):o.resolve(!1);else{this.events.next(new _D(o.id,this.urlSerializer.serialize(o.extractedUrl),m,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(m))}catch(_){o.reject(_)}}return Pr}))}))}cancelNavigationTransition(t,r,i){const o=new iE(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x6(n){return n!==nE}let w6=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===xo);return r}getResolvedTitleForRoute(t){return t.data[Kw]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return rr(Pue)},providedIn:"root"})}return n})(),Pue=(()=>{class n extends w6{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(pn(q4))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return rr(Oue)},providedIn:"root"})}return n})();class Rue{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Oue=(()=>{class n extends Rue{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=la(n)))(i||n)}}();static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SD=new Ar("",{providedIn:"root",factory:()=>({})});let Lue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:function(){return rr(Nue)},providedIn:"root"})}return n})(),Nue=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uE=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(uE||{});function E6(n,e){n.events.pipe(yc(t=>t instanceof Wm||t instanceof iE||t instanceof _D||t instanceof fb),jt(t=>t instanceof Wm||t instanceof fb?uE.COMPLETE:t instanceof iE&&(0===t.code||1===t.code)?uE.REDIRECTING:uE.FAILED),yc(t=>t!==uE.REDIRECTING),Dh(1)).subscribe(()=>{e()})}function Fue(n){throw n}function Bue(n,e,t){return e.parse("/")}const zue={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$ue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xa=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=rr(Cz),this.isNgZoneEnabled=!1,this._events=new lt,this.options=rr(SD,{optional:!0})||{},this.pendingTasks=rr(BI),this.errorHandler=this.options.errorHandler||Fue,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Bue,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=rr(Lue),this.routeReuseStrategy=rr(kue),this.titleStrategy=rr(w6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=rr(yb,{optional:!0})?.flat()??[],this.navigationTransitions=rr(CD),this.urlSerializer=rr(db),this.location=rr(X0),this.componentInputBindingEnabled=!!rr(vD,{optional:!0}),this.eventsSubscription=new me,this.isNgZoneEnabled=rr(y)instanceof y&&y.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new hb,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=t6(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(C6(r)&&this._events.next(r));if(r instanceof rE)x6(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof fb)this.rawUrlTree=i.rawUrl;else if(r instanceof KU){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof eO)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof iE)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof tO){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||x6(i.source)};this.scheduleNavigation(o,nE,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof _D&&this.restoreHistory(i,!0),r instanceof Wm&&(this.navigated=!0),C6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t);this.scheduleNavigation(d,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:d,preserveFragment:m}=r,_=m?this.currentUrlTree.fragment:a;let T,C=null;switch(d){case"merge":C={...this.currentUrlTree.queryParams,...o};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=o||null}null!==C&&(C=this.removeEmptyProps(C));try{T=GU(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return HU(T,t,C,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Wy(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,nE,null,r)}navigate(t,r={skipLocationChange:!1}){return function Vue(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new tn(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...zue}:!1===r?{...$ue}:r,Wy(t))return LU(this.currentUrlTree,t,i);const o=this.parseUrl(t);return LU(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let d,m,_;a?(d=a.resolve,m=a.reject,_=a.promise):_=new Promise((T,R)=>{d=T,m=R});const C=this.pendingTasks.add();return E6(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:d,reject:m,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",a)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C6(n){return!(n instanceof eO||n instanceof tO)}let f_=(()=>{class n{constructor(t,r,i,o,a,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new lt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof Wm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function GS(n,e,t){return function f0(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?I1:Ap}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Xa),he(Xf),Rf("tabindex"),he(Ku),he(er),he(Vm))};static#t=this.\u0275dir=Kn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Bo("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&r&&gc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",W0],skipLocationChange:["skipLocationChange","skipLocationChange",W0],replaceUrl:["replaceUrl","replaceUrl",W0],routerLink:"routerLink"},standalone:!0,features:[QF,ei]})}return n})();class S6{}let Gue=(()=>{class n{constructor(t,r,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(yc(t=>t instanceof Wm),Y0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=bP(o.providers,t,`Route: ${o.path}`));const a=o._injector??t,d=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(d,o.children??o._loadedRoutes))}return $t(i).pipe(yi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Tt(null);const o=i.pipe(Bn(a=>null===a?Tt(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return r.loadComponent&&!r._loadedComponent?$t([o,this.loader.loadComponent(r)]).pipe(yi()):o})}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Xa),pn(Sz),pn(Al),pn(S6),pn(fO))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const pO=new Ar("");let I6=(()=>{class n{constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Wm?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fb&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof QU&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new QU(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){el()};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac})}return n})();function Zm(n,e){return{\u0275kind:n,\u0275providers:e}}function D6(){const n=rr($s);return e=>{const t=n.get(zm);if(e!==t.components[0])return;const r=n.get(Xa),i=n.get(A6);1===n.get(mO)&&r.initialNavigation(),n.get(M6,null,ti.Optional)?.setUpPreloading(),n.get(pO,null,ti.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const A6=new Ar("",{factory:()=>new lt}),mO=new Ar("",{providedIn:"root",factory:()=>1}),M6=new Ar("");function Xue(n){return Zm(0,[{provide:M6,useExisting:Gue},{provide:S6,useExisting:n}])}const P6=new Ar("ROUTER_FORROOT_GUARD"),Yue=[X0,{provide:db,useClass:ZR},Xa,Xy,{provide:Xf,useFactory:function T6(n){return n.routerState.root},deps:[Xa]},fO,[]];function Kue(){return new kz("Router",Xa)}let k6=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Yue,[],{provide:yb,multi:!0,useValue:t},{provide:P6,useFactory:the,deps:[[Xa,new xm,new Pg]]},{provide:SD,useValue:r||{}},r?.useHash?{provide:Vm,useClass:kJ}:{provide:Vm,useClass:c4},{provide:pO,useFactory:()=>{const n=rr(Jee),e=rr(y),t=rr(SD),r=rr(CD),i=rr(db);return t.scrollOffset&&n.setOffset(t.scrollOffset),new I6(i,r,n,e,t)}},r?.preloadingStrategy?Xue(r.preloadingStrategy).\u0275providers:[],{provide:kz,multi:!0,useFactory:Kue},r?.initialNavigation?nhe(r):[],r?.bindToComponentInputs?Zm(8,[o6,{provide:vD,useExisting:o6}]).\u0275providers:[],[{provide:R6,useFactory:D6},{provide:$P,multi:!0,useExisting:R6}]]}}static forChild(t){return{ngModule:n,providers:[{provide:yb,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(P6,8))};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})();function the(n){return"guarded"}function nhe(n){return["disabled"===n.initialNavigation?Zm(3,[{provide:FI,multi:!0,useFactory:()=>{const e=rr(Xa);return()=>{e.setUpLocationChangeListener()}}},{provide:mO,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zm(2,[{provide:mO,useValue:0},{provide:FI,multi:!0,deps:[$s],useFactory:e=>{const t=e.get(MJ,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Xa),o=e.get(A6);E6(i,()=>{r(!0)}),e.get(CD).afterPreactivation=()=>(r(!0),o.closed?Tt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const R6=new Ar("");class O6{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,r){return this.ctrl.dismiss(e,t,r)}getTop(){return this.ctrl.getTop()}}class L6{constructor(e={}){this.data=e}get(e){return this.data[e]}}let hE=(()=>{class n{constructor(){this.zone=rr(y),this.applicationRef=rr(zm)}create(t,r,i){return new ohe(t,r,this.applicationRef,this.zone,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();class ohe{constructor(e,t,r,i,o){this.environmentInjector=e,this.injector=t,this.applicationRef=r,this.zone=i,this.elementReferenceKey=o,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,r,i){return this.zone.run(()=>new Promise(o=>{const a={...r};void 0!==this.elementReferenceKey&&(a[this.elementReferenceKey]=e),o(she(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,t,a,i,this.elementReferenceKey))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(t);if(i){i.destroy(),this.elRefMap.delete(t);const o=this.elEventsMap.get(t);o&&(o(),this.elEventsMap.delete(t))}r()}))}}const she=(n,e,t,r,i,o,a,d,m,_,C)=>{const R=function TJ(n,e){const t=po(n),r=e.elementInjector||kp();return new J1(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}(d,{environmentInjector:e,elementInjector:$s.create({providers:lhe(m),parent:t})}),L=R.instance,G=R.location.nativeElement;if(m&&(C&&void 0!==L[C]&&console.error(`[Ionic Error]: ${C} is a reserved property when using ${a.tagName.toLowerCase()}. Rename or remove the "${C}" property from ${d.name}.`),Object.assign(L,m)),_)for(const ve of _)G.classList.add(ve);const W=N6(n,L,G);return a.appendChild(G),r.attachView(R.hostView),i.set(G,R),o.set(G,W),G},ahe=[Xw.L,Xw.a,Xw.b,Xw.c,Xw.d],N6=(n,e,t)=>n.run(()=>{const r=ahe.filter(i=>"function"==typeof e[i]).map(i=>{const o=a=>e[i](a.detail);return t.addEventListener(i,o),()=>t.removeEventListener(i,o)});return()=>r.forEach(i=>i())}),F6=new Ar("NavParamsToken"),lhe=n=>[{provide:F6,useValue:n},{provide:L6,useFactory:che,deps:[F6]}],che=n=>new L6(n);let uhe=(()=>{class n extends O6{constructor(){super(hle),this.angularDelegate=rr(hE),this.injector=rr($s),this.environmentInjector=rr(Al)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})(),hhe=(()=>{class n extends O6{constructor(){super(dle),this.angularDelegate=rr(hE),this.injector=rr($s),this.environmentInjector=rr(Al)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})(),dhe=(()=>{class n{constructor(t,r){this.doc=t,this.backButton=new lt,this.keyboardDidShow=new lt,this.keyboardDidHide=new lt,this.pause=new lt,this.resume=new lt,this.resize=new lt,r.run(()=>{let i;this.win=t.defaultView,this.backButton.subscribeWithPriority=function(o,a){return this.subscribe(d=>d.register(o,m=>r.run(()=>a(m))))},vb(this.pause,t,"pause"),vb(this.resume,t,"resume"),vb(this.backButton,t,"ionBackButton"),vb(this.resize,this.win,"resize"),vb(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),vb(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(o=>{i=o}),this.win?.cordova?t.addEventListener("deviceready",()=>{i("cordova")},{once:!0}):i("dom")})}is(t){return((n,e)=>("string"==typeof n&&(e=n,n=void 0),xU(n).includes(e)))(this.win,t)}platforms(){return xU(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(t){return fhe(this.win.location.href,t)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia?.("(orientation: portrait)").matches}testUserAgent(t){const r=this.win.navigator;return!!(r?.userAgent&&r.userAgent.indexOf(t)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return n.\u0275fac=function(t){return new(t||n)(pn(Ao),pn(y))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fhe=(n,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},vb=(n,e,t)=>{e&&e.addEventListener(t,r=>{const i=r?.detail;n.next(i)})};let bb=(()=>{class n{constructor(t,r,i,o){this.location=r,this.serializer=i,this.router=o,this.direction=B6,this.animated=z6,this.guessDirection="forward",this.lastNavId=-1,o&&o.events.subscribe(a=>{if(a instanceof rE){const d=a.restoredState?a.restoredState.navigationId:a.id;this.guessDirection=d<this.lastNavId?"back":"forward",this.guessAnimation=a.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?a.id:d}}),t.backButton.subscribeWithPriority(0,a=>{this.pop(),a()})}navigateForward(t,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateBack(t,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateRoot(t,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}back(t={animated:!0,animationDirection:"back"}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.location.back()}pop(){var t=this;return(0,Aa.Z)(function*(){let r=t.topOutlet;for(;r;){if(yield r.pop())return!0;r=r.parentOutlet}return!1})()}setDirection(t,r,i,o){this.direction=t,this.animated=phe(t,r,i),this.animationBuilder=o}setTopOutlet(t){this.topOutlet=t}consumeTransition(){let r,t="root";const i=this.animationBuilder;return"auto"===this.direction?(t=this.guessDirection,r=this.guessAnimation):(r=this.animated,t=this.direction),this.direction=B6,this.animated=z6,this.animationBuilder=void 0,{direction:t,animation:r,animationBuilder:i}}navigate(t,r){if(Array.isArray(t))return this.router.navigate(t,r);{const i=this.serializer.parse(t.toString());return void 0!==r.queryParams&&(i.queryParams={...r.queryParams}),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return n.\u0275fac=function(t){return new(t||n)(pn(dhe),pn(X0),pn(db),pn(Xa,8))},n.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const phe=(n,e,t)=>{if(!1!==e){if(void 0!==t)return t;if("forward"===n||"back"===n)return n;if("root"===n&&!0===e)return"forward"}},B6="auto",z6=void 0,$6=new Ar("USERCONFIG"),W6=new Ar("");let Mhe=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Lw([r.queryParams,r.params,r.data]).pipe(ye(([o,a,d],m)=>(d={...o,...a,...d},0===m?Tt(d):Promise.resolve(d)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const a=s4(r.component);if(a)for(const{templateName:d}of a.inputs)t.activatedComponentRef.setInput(d,o[d]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=yr({token:n,factory:n.\u0275fac}),n})();function khe(n){return n?.componentInputBindingEnabled?new Mhe:null}let Lhe=(()=>{class n{constructor(t,r,i,o,a){this.locationStrategy=t,this.navCtrl=r,this.elementRef=i,this.router=o,this.routerLink=a,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}}onClick(t){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(he(Vm),he(bb),he(er),he(Xa),he(f_,8))},n.\u0275dir=Kn({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&Bo("click",function(o){return r.onClick(o)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ei]}),n})(),Nhe=(()=>{class n{constructor(t,r,i,o,a){this.locationStrategy=t,this.navCtrl=r,this.elementRef=i,this.router=o,this.routerLink=a,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return n.\u0275fac=function(t){return new(t||n)(he(Vm),he(bb),he(er),he(Xa),he(f_,8))},n.\u0275dir=Kn({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(t,r){1&t&&Bo("click",function(){return r.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ei]}),n})();const X6=n=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(n):"function"==typeof requestAnimationFrame?requestAnimationFrame(n):setTimeout(n);Ie(5062),Ie(6323),Ie(2510),Ie(6003),Ie(9203);var jhe=Ie(3395),Ghe=Ie(3365),Hhe=(Ie(3389),Ie(3645),Ie(6225),Ie(8411));Ie(619);const Whe=jhe.i,Qr=["*"],ode=(n,e)=>{const t=n.prototype;e.forEach(r=>{Object.defineProperty(t,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)}})})},sde=(n,e)=>{const t=n.prototype;e.forEach(r=>{t[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})},xa=(n,e,t)=>{t.forEach(r=>n[r]=zy(e,r))};function ni(n){return function(t){const{defineCustomElementFn:r,inputs:i,methods:o}=n;return void 0!==r&&r(),i&&ode(t,i),o&&sde(t,o),t}}let Z6=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,xa(this,this.el,["ionFocus","ionBlur"])}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],n),n})(),xO=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,xa(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],n),n})(),Y6=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],n),n})(),K6=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,xa(this,this.el,["ionFocus","ionBlur"])}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],n),n})(),Q6=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["collapse","mode","translucent"]})],n),n})(),J6=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],n),n})(),e8=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["color","size"]})],n),n})(),t8=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(he(Or),he(er),he(y))},n.\u0275cmp=Zn({type:n,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Qr,decls:1,vars:0,template:function(t,r){1&t&&(Lr(),Tr(0))},encapsulation:2,changeDetection:0}),n=Ft([ni({inputs:["color","mode"]})],n),n})(),n8=(()=>{class n extends Lhe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=la(n)))(r||n)}}(),n.\u0275dir=Kn({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],features:[Bi]}),n})(),EO=(()=>{class n extends Nhe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=la(n)))(r||n)}}(),n.\u0275dir=Kn({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],features:[Bi]}),n})();const Ife={provide:eu,useExisting:Et(()=>r8),multi:!0};let r8=(()=>{class n extends qk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=la(n)))(r||n)}}(),n.\u0275dir=Kn({type:n,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&gc("max",r._enabled?r.max:null)},features:[Is([Ife]),Bi]}),n})();const Tfe={provide:eu,useExisting:Et(()=>i8),multi:!0};let i8=(()=>{class n extends Wk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=la(n)))(r||n)}}(),n.\u0275dir=Kn({type:n,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&gc("min",r._enabled?r.min:null)},features:[Is([Tfe]),Bi]}),n})();const Dfe=(n,e,t)=>()=>{if(e.defaultView&&typeof window<"u"){(0,Ghe.s)({...n,_zoneGate:o=>t.run(o)});const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function qhe(){var n=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&n.push(Ie.e(6748).then(Ie.t.bind(Ie,3342,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&n.push(Ie.e(2214).then(Ie.t.bind(Ie,2668,23)))}return Promise.all(n)}().then(()=>((n,e)=>{if(!(typeof window>"u"))return Whe(),(0,Hhe.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),e)})(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:X6,jmp:o=>t.runOutsideAngular(o),ael(o,a,d,m){o[i](a,d,m)},rel(o,a,d,m){o.removeEventListener(a,d,m)}}))}};let Afe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:$6,useValue:t},{provide:FI,useFactory:Dfe,multi:!0,deps:[$6,Ao,y]},{provide:W6,useFactory:khe,deps:[Xa]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=wo({type:n}),n.\u0275inj=Io({providers:[hE,uhe,hhe],imports:[vw]}),n})();var Mfe=Ie(9422),DD=Ie.n(Mfe);const AD={SecureStorage:"ionicSecureStorage",IndexedDB:DD().INDEXEDDB,LocalStorage:DD().LOCALSTORAGE},o8={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[AD.SecureStorage,AD.IndexedDB,AD.LocalStorage]};class MD{constructor(e=o8){this._db=null,this._secureStorageDriver=null;const t=Object.assign({},o8,e||{});this._config=t}create(){var e=this;return(0,Aa.Z)(function*(){const t=DD().createInstance(e._config);return e._db=t,yield t.setDriver(e._config.driverOrder||[]),e})()}defineDriver(e){var t=this;return(0,Aa.Z)(function*(){return e._driver===AD.SecureStorage&&(t._secureStorageDriver=e),DD().defineDriver(e)})()}get driver(){var e;return(null===(e=this._db)||void 0===e?void 0:e.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(e){return this.assertDb().getItem(e)}set(e,t){return this.assertDb().setItem(e,t)}remove(e){return this.assertDb().removeItem(e)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(e){return this.assertDb().iterate(e)}setEncryptionKey(e){var t;if(!this._secureStorageDriver)throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available");null===(t=this._secureStorageDriver)||void 0===t||t.setEncryptionKey(e)}}const s8=new Ar("STORAGE_CONFIG_TOKEN");class Pfe extends MD{constructor(){super()}create(){var e=this;return(0,Aa.Z)(function*(){return e})()}defineDriver(){return(0,Aa.Z)(function*(){})()}get driver(){return"noop"}get(e){return(0,Aa.Z)(function*(){return null})()}set(e,t){return(0,Aa.Z)(function*(){})()}remove(e){return(0,Aa.Z)(function*(){})()}clear(){return(0,Aa.Z)(function*(){})()}length(){return(0,Aa.Z)(function*(){return 0})()}keys(){return(0,Aa.Z)(function*(){return[]})()}forEach(e){return(0,Aa.Z)(function*(){})()}setEncryptionKey(e){}}function kfe(n,e){return hk(n)?new Pfe:new MD(e)}let Rfe=(()=>{class n{static forRoot(t=null){return{ngModule:n,providers:[{provide:s8,useValue:t},{provide:MD,useFactory:kfe,deps:[Bf,s8]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=wo({type:n}),n.\u0275inj=Io({}),n})();var fE=Ie(2726),a8=Ie(5961);const Ofe=(0,fE.fo)("Camera",{web:()=>Ie.e(6468).then(Ie.bind(Ie,6468)).then(n=>new n.CameraWeb)});function Lfe(n,e){1&n&&Da(0,"img",4),2&n&&oo("src",Jl().image,Ap)}let Nfe=(()=>{class n{constructor(t){var r=this;this.sanitizer=t,this.image=null,this.takePicture=(0,Aa.Z)(function*(){const i=yield Ofe.getPhoto({quality:90,allowEditing:!0,source:a8.oK.Prompt,resultType:a8.dk.Base64});i&&(r.image=r.sanitizer.bypassSecurityTrustUrl(`data:image/jpeg;base64,${i.base64String}`),console.log(i.base64String))})}static#e=this.\u0275fac=function(r){return new(r||n)(he(oT))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-camera"]],decls:6,vars:1,consts:[[1,"content-container"],[1,"card-container"],[1,"card","card-small",3,"click"],["alt","image","style","width: 500px",3,"src",4,"ngIf"],["alt","image",2,"width","500px",3,"src"]],template:function(r,i){1&r&&(fr(0,"div",0)(1,"div",1)(2,"button",2),Bo("click",function(){return i.takePicture()}),fr(3,"span"),Vr(4,"capture image"),or()()(),Rs(5,Lfe,1,1,"img",3),or()),2&r&&(Gr(5),oo("ngIf",i.image))},dependencies:[Hf],styles:[".content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.content-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.content-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:1rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.content-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer;border-radius:.375rem;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));padding:.5rem 1rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.content-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.content-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-small[_ngcontent-%COMP%]{width:8rem}.content-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;margin-top:1rem}"]})}return n})(),Ffe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-home"]],decls:0,vars:0,template:function(r,i){}})}return n})();class pE extends Error{}function l8(n,e){if("string"!=typeof n)throw new pE("Invalid token specified: must be a string");e||(e={});const t=!0===e.header?0:1,r=n.split(".")[t];if("string"!=typeof r)throw new pE(`Invalid token specified: missing part #${t+1}`);let i;try{i=function zfe(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function Bfe(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(e)}catch{return atob(e)}}(r)}catch(o){throw new pE(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(i)}catch(o){throw new pE(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}pE.prototype.name="InvalidTokenError";const $fe=(0,fE.fo)("Device",{web:()=>Ie.e(7116).then(Ie.bind(Ie,7116)).then(n=>new n.DeviceWeb)});let Vfe=(()=>{class n{constructor(t){this.storage=t,this.initStorage()}initStorage(){var t=this;return(0,Aa.Z)(function*(){yield t.storage.create()})()}set(t,r){var i=this;return(0,Aa.Z)(function*(){return yield i.storage.set(t,r),!0})()}get(t){var r=this;return(0,Aa.Z)(function*(){return yield r.storage.get(t)})()}remove(t){var r=this;return(0,Aa.Z)(function*(){return yield r.storage.remove(t)})()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(MD))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mE="APP_TOKEN";let PD=(()=>{class n{constructor(t,r,i){this.http=t,this.storageService=r,this.router=i,this.baseUrl="http://localhost:4000/",this.user=new rt(void 0),this.isAuthenticated=new rt(!1),this.token="",this.loadUser(),this.isMobile(),this.loadToken()}isMobile(){return(0,Aa.Z)(function*(){const t=yield $fe.getInfo();return"android"===t.platform||"ios"===t.platform})()}loadUser(){const t=localStorage.getItem(mE);if(t){const r=l8(t);this.user.next({token:t,id:r.sub})}else this.user.next(null)}register(t){return this.http.post(`${this.baseUrl}auth/register`,t).pipe(ye(r=>this.login(t.email,t.password)))}login(t,r){return this.http.post(`${this.baseUrl}auth/login`,{email:t,password:r}).pipe(jt(i=>{localStorage.setItem(mE,i.token);const o=l8(i.token),a={token:i.token,id:o.sub};return this.user.next(a),a}))}logOut(){localStorage.removeItem(mE),this.user.next(null),console.log("logged out")}getCurrentUser(){return this.user.asObservable()}getCurrentUserId(){return this.user.getValue()?.id}isLoggedIn(){const t=rr(Xa);return this.getCurrentUser().pipe(jt(r=>!!r||t.createUrlTree(["/"])))}shouldLogIn(){const t=rr(Xa);return this.getCurrentUser().pipe(jt(r=>!r||t.createUrlTree(["/map"])))}getRideHistory(){const t=new uf({Authorization:`Bearer ${localStorage.getItem(mE)}`});return this.http.get(`${this.baseUrl}rides/history`,{headers:t}).pipe(vc(r=>{console.log(r)}))}createRide(){const t=new uf({Authorization:`Bearer ${localStorage.getItem(mE)}`});return this.http.get(`${this.baseUrl}rides`,{headers:t}).pipe(vc(r=>{console.log(r)}))}loadToken(){var t=this;return(0,Aa.Z)(function*(){(yield t.storageService.get("token"))?t.isAuthenticated.next(!0):t.isAuthenticated.next(!1)})()}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Ew),pn(Vfe),pn(Xa))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ufe(n,e){1&n&&(fr(0,"div"),Vr(1,"Email is required"),or())}function jfe(n,e){1&n&&(fr(0,"div"),Vr(1,"Email is invalid"),or())}function Gfe(n,e){if(1&n&&(fr(0,"small",14),Rs(1,Ufe,2,0,"div",15),Rs(2,jfe,2,0,"div",15),or()),2&n){const t=Jl();Gr(1),oo("ngIf",null==t.email.errors?null:t.email.errors.required),Gr(1),oo("ngIf",null==t.email.errors?null:t.email.errors.email)}}function Hfe(n,e){1&n&&(fr(0,"div"),Vr(1," Password is required "),or())}function qfe(n,e){1&n&&(fr(0,"div"),Vr(1," Password is invalid "),or())}function Wfe(n,e){if(1&n&&(fr(0,"small",14),Rs(1,Hfe,2,0,"div",15),Rs(2,qfe,2,0,"div",15),or()),2&n){const t=Jl();Gr(1),oo("ngIf",null==t.password.errors?null:t.password.errors.required),Gr(1),oo("ngIf",null==t.password.errors?null:t.password.errors.password)}}let Xfe=(()=>{class n{constructor(t,r,i,o){this.fb=t,this.authService=r,this.snackBar=i,this.router=o,this.loginForm=this.fb.nonNullable.group({email:["",[Up.required,Up.email]],password:["",[Up.required,Up.minLength(4)]]})}get email(){return this.loginForm.controls.email}get password(){return this.loginForm.controls.password}logIn(){console.log(this.loginForm.value);const{email:t,password:r}=this.loginForm.getRawValue();this.authService.login(t,r).subscribe(i=>{this.router.navigate(["/map"]),this.snackBar.open("Logged in successfully","Close",{duration:2e3})},i=>{this.snackBar.open(200===i.status?"User doesn't exist":"An error occurred. Please try again later.","Close",{duration:2e3})})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Zk),he(PD),he(bR),he(Xa))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-login"]],decls:23,vars:4,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","h-screen"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],[1,"space-y-4","md:space-y-6",3,"formGroup","ngSubmit"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","name","email","id","email","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["class","text-red-500",4,"ngIf"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","password","type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"w-full","text-white","bg-primary-600","hover:bg-primary-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"disabled"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/registration",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"],[1,"text-red-500"],[4,"ngIf"]],template:function(r,i){1&r&&(fr(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),Vr(5," Sign in to your account "),or(),fr(6,"form",5),Bo("ngSubmit",function(){return i.logIn()}),fr(7,"div")(8,"label",6),Vr(9," Your email "),or(),Da(10,"input",7),Rs(11,Gfe,3,2,"small",8),or(),fr(12,"div")(13,"label",9),Vr(14," Password "),or(),Da(15,"input",10),Rs(16,Wfe,3,2,"small",8),or(),fr(17,"button",11),Vr(18," Sign in "),or(),fr(19,"p",12),Vr(20," Don\u2019t have an account yet? "),fr(21,"a",13),Vr(22," Sign up "),or()()()()()()()),2&r&&(Gr(6),oo("formGroup",i.loginForm),Gr(5),oo("ngIf",i.email.invalid&&(i.email.dirty||i.email.touched)),Gr(5),oo("ngIf",i.password.invalid&&(i.password.dirty||i.password.touched)),Gr(1),oo("disabled",i.loginForm.invalid))},dependencies:[Hf,$k,Sw,dT,fT,kw,f_,rb,Pw,EO],styles:["section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}form[_ngcontent-%COMP%]{width:100%}"]})}return n})();const CO=(0,fE.fo)("Geolocation",{web:()=>Ie.e(579).then(Ie.bind(Ie,579)).then(n=>new n.GeolocationWeb)});var Zfe=Ie(2176),Ah=6371008.8,c8={centimeters:100*Ah,centimetres:100*Ah,degrees:Ah/111325,feet:3.28084*Ah,inches:39.37*Ah,kilometers:Ah/1e3,kilometres:Ah/1e3,meters:Ah,metres:Ah,miles:Ah/1609.344,millimeters:1e3*Ah,millimetres:1e3*Ah,nauticalmiles:Ah/1852,radians:1,yards:1.0936*Ah};function Ym(n,e,t){void 0===t&&(t={});var r={type:"Feature"};return(0===t.id||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function wb(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!SO(n[0])||!SO(n[1]))throw new Error("coordinates must contain numbers");return Ym({type:"Point",coordinates:n},e,t)}function kD(n,e,t){void 0===t&&(t={});for(var r=0,i=n;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return Ym({type:"Polygon",coordinates:n},e,t)}function RD(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return Ym({type:"LineString",coordinates:n},e,t)}function LD(n){return n%360*Math.PI/180}function SO(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function gE(n,e,t){if(null!==n)for(var r,i,o,a,d,m,_,R,C=0,T=0,L=n.type,G="FeatureCollection"===L,W="Feature"===L,ve=G?n.features.length:1,_e=0;_e<ve;_e++){d=(R=!!(_=G?n.features[_e].geometry:W?n.geometry:n)&&"GeometryCollection"===_.type)?_.geometries.length:1;for(var re=0;re<d;re++){var Oe=0,vt=0;if(null!==(a=R?_.geometries[re]:_)){m=a.coordinates;var Mt=a.type;switch(C=!t||"Polygon"!==Mt&&"MultiPolygon"!==Mt?0:1,Mt){case null:break;case"Point":if(!1===e(m,T,_e,Oe,vt))return!1;T++,Oe++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(!1===e(m[r],T,_e,Oe,vt))return!1;T++,"MultiPoint"===Mt&&Oe++}"LineString"===Mt&&Oe++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(i=0;i<m[r].length-C;i++){if(!1===e(m[r][i],T,_e,Oe,vt))return!1;T++}"MultiLineString"===Mt&&Oe++,"Polygon"===Mt&&vt++}"Polygon"===Mt&&Oe++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(vt=0,i=0;i<m[r].length;i++){for(o=0;o<m[r][i].length-C;o++){if(!1===e(m[r][i][o],T,_e,Oe,vt))return!1;T++}vt++}Oe++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===gE(a.geometries[r],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ND(n,e){!function p8(n,e){var t,r,i,o,a,d,m,_,C,T,R=0,L="FeatureCollection"===n.type,G="Feature"===n.type,W=L?n.features.length:1;for(t=0;t<W;t++){for(_=L?n.features[t].properties:G?n.properties:{},C=L?n.features[t].bbox:G?n.bbox:void 0,T=L?n.features[t].id:G?n.id:void 0,a=(m=!!(d=L?n.features[t].geometry:G?n.geometry:n)&&"GeometryCollection"===d.type)?d.geometries.length:1,i=0;i<a;i++)if(null!==(o=m?d.geometries[i]:d))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,R,_,C,T))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],R,_,C,T))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,R,_,C,T))return!1;R++}}(n,function(t,r,i,o,a){var m,d=null===t?null:t.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Ym(t,i,{bbox:o,id:a}),r,0)&&void 0}switch(d){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon"}for(var _=0;_<t.coordinates.length;_++)if(!1===e(Ym({type:m,coordinates:t.coordinates[_]},i),r,_))return!1})}function IO(n){var e=[1/0,1/0,-1/0,-1/0];return gE(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}IO.default=IO;const ope=IO;function TO(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function y8(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=TO(n),i=function lpe(n){return"Feature"===n.type?n.geometry:n}(e),o=i.type,a=e.bbox,d=i.coordinates;if(a&&!1===function ype(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}(r,a))return!1;"Polygon"===o&&(d=[d]);for(var m=!1,_=0;_<d.length&&!m;_++)if(v8(r,d[_][0],t.ignoreBoundary)){for(var C=!1,T=1;T<d[_].length&&!C;)v8(r,d[_][T],!t.ignoreBoundary)&&(C=!0),T++;C||(m=!0)}return m}function v8(n,e,t){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],d=e[i][1],m=e[o][0],_=e[o][1];if(n[1]*(a-m)+d*(m-n[0])+_*(n[0]-a)==0&&(a-n[0])*(m-n[0])<=0&&(d-n[1])*(_-n[1])<=0)return!t;d>n[1]!=_>n[1]&&n[0]<(m-a)*(n[1]-d)/(_-d)+a&&(r=!r)}return r}Ie(4772),Ie(3664);const b8=function vpe(n,e,t){void 0===t&&(t={});var r=TO(n),i=TO(e),o=LD(i[1]-r[1]),a=LD(i[0]-r[0]),d=LD(r[1]),m=LD(i[1]),_=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(d)*Math.cos(m);return function d8(n,e){void 0===e&&(e="kilometers");var t=c8[e];if(!t)throw new Error(e+" units is invalid");return n*t}(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),t.units)};var w8=new ArrayBuffer(16);new Float64Array(w8),new Uint32Array(w8),Ie(7861),function(){function n(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var r=this.points[t],i=this.points[t+1];this.centers.push({x:(r.x+i.x)/2,y:(r.y+i.y)/2,z:(r.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var o=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,a=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,d=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+o),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+a),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+d)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+o),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+a),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+d)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(e){var t=[],r=this.pos(0);t.push(0);for(var i=0;i<this.duration;i+=10){var o=this.pos(i);Math.sqrt((o.x-r.x)*(o.x-r.x)+(o.y-r.y)*(o.y-r.y)+(o.z-r.z)*(o.z-r.z))>e&&(t.push(i),r=o)}return t},n.prototype.vector=function(e){var t=this.pos(e+10),r=this.pos(e-10);return{angle:180*Math.atan2(t.y-r.y,t.x-r.x)/3.14,speed:Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)+(r.z-t.z)*(r.z-t.z))}},n.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var r=t/this.duration;if(r>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*r);return function Lpe(n,e,t,r,i){var o=function Npe(n){var e=n*n;return[e*n,3*e*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:i.x*o[0]+r.x*o[1]+t.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+t.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+t.z*o[2]+e.z*o[3]}}((this.length-1)*r-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])}}();Ie(9145),Ie(5665);var z8=Math.PI/180,$8=180/Math.PI,vE=function(n,e){this.lon=n,this.lat=e,this.x=z8*n,this.y=z8*e};vE.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},vE.prototype.antipode=function(){return new vE(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var V8=function(){this.coords=[],this.length=0};V8.prototype.move_to=function(n){this.length++,this.coords.push(n)};var LO=function(n){this.properties=n||{},this.geometries=[]};LO.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},LO.prototype.wkt=function(){for(var n="",e="LINESTRING(",t=function(o){e+=o[0]+" "+o[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(t),n+=e.substring(0,e.length-1)+")"}return n};var NO=function(n,e,t){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new vE(n.x,n.y),this.end=new vE(e.x,e.y),this.properties=t||{};var r=this.start.x-this.end.x,o=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};NO.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),t=Math.sin(n*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),a=$8*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[$8*Math.atan2(i,r),a]},NO.prototype.Arc=function(n,e){var t=[];if(!n||n<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var r=1/(n-1),i=0;i<n;++i){var a=this.interpolate(r*i);t.push(a)}for(var d=!1,m=0,_=e&&e.offset?e.offset:10,C=180-_,T=-180+_,R=360-_,L=1;L<t.length;++L){var G=t[L-1][0],W=t[L][0],ve=Math.abs(W-G);ve>R&&(W>C&&G<T||G>C&&W<T)?d=!0:ve>m&&(m=ve)}var _e=[];if(d&&m<_){var re=[];_e.push(re);for(var Oe=0;Oe<t.length;++Oe){var vt=parseFloat(t[Oe][0]);if(Oe>0&&Math.abs(vt-t[Oe-1][0])>R){var Mt=parseFloat(t[Oe-1][0]),Kt=parseFloat(t[Oe-1][1]),Zt=parseFloat(t[Oe][0]),an=parseFloat(t[Oe][1]);if(Mt>-180&&Mt<T&&180===Zt&&Oe+1<t.length&&t[Oe-1][0]>-180&&t[Oe-1][0]<T){re.push([-180,t[Oe][1]]),Oe++,re.push([t[Oe][0],t[Oe][1]]);continue}if(Mt>C&&Mt<180&&-180===Zt&&Oe+1<t.length&&t[Oe-1][0]>C&&t[Oe-1][0]<180){re.push([180,t[Oe][1]]),Oe++,re.push([t[Oe][0],t[Oe][1]]);continue}if(Mt<T&&Zt>C){var ot=Mt;Mt=Zt,Zt=ot;var Er=Kt;Kt=an,an=Er}if(Mt>C&&Zt<T&&(Zt+=360),Mt<=180&&Zt>=180&&Mt<Zt){var _r=(180-Mt)/(Zt-Mt),di=_r*an+(1-_r)*Kt;re.push([t[Oe-1][0]>C?180:-180,di]),(re=[]).push([t[Oe-1][0]>C?-180:180,di]),_e.push(re)}else _e.push(re=[]);re.push([vt,t[Oe][1]])}else re.push([t[Oe][0],t[Oe][1]])}}else{var Di=[];_e.push(Di);for(var br=0;br<t.length;++br)Di.push([t[br][0],t[br][1]])}for(var qr=new LO(this.properties),Ln=0;Ln<_e.length;++Ln){var xr=new V8;qr.geometries.push(xr);for(var Ur=_e[Ln],ri=0;ri<Ur.length;++ri)xr.move_to(Ur[ri])}return qr},Ie(3970);var Go=[],Ho=[],qo=[],Wo=[],Xo=[],Zo=[],Yo=[],Ko=[],Qo=[],Jo=[],es=[],ts=[],ns=[],rs=[],is=[],os=[],ss=[],as=[],ls=[],cs=[],us=[],hs=[],ds=[],fs=[];Yo[85]=Jo[85]=-1,Ko[85]=es[85]=0,Qo[85]=ts[85]=1,ls[85]=hs[85]=1,cs[85]=ds[85]=0,us[85]=fs[85]=1,Go[85]=Wo[85]=0,Ho[85]=Xo[85]=-1,qo[85]=is[85]=0,os[85]=ns[85]=0,ss[85]=rs[85]=1,Zo[85]=as[85]=1,hs[1]=hs[169]=0,ds[1]=ds[169]=-1,fs[1]=fs[169]=0,ns[1]=ns[169]=-1,rs[1]=rs[169]=0,is[1]=is[169]=0,Jo[4]=Jo[166]=0,es[4]=es[166]=-1,ts[4]=ts[166]=1,os[4]=os[166]=1,ss[4]=ss[166]=0,as[4]=as[166]=0,Yo[16]=Yo[154]=0,Ko[16]=Ko[154]=1,Qo[16]=Qo[154]=1,Wo[16]=Wo[154]=1,Xo[16]=Xo[154]=0,Zo[16]=Zo[154]=1,ls[64]=ls[106]=0,cs[64]=cs[106]=1,us[64]=us[106]=0,Go[64]=Go[106]=-1,Ho[64]=Ho[106]=0,qo[64]=qo[106]=1,ls[2]=ls[168]=0,cs[2]=cs[168]=-1,us[2]=us[168]=1,hs[2]=hs[168]=0,ds[2]=ds[168]=-1,fs[2]=fs[168]=0,ns[2]=ns[168]=-1,rs[2]=rs[168]=0,is[2]=is[168]=0,os[2]=os[168]=-1,ss[2]=ss[168]=0,as[2]=as[168]=1,Yo[8]=Yo[162]=0,Ko[8]=Ko[162]=-1,Qo[8]=Qo[162]=0,Jo[8]=Jo[162]=0,es[8]=es[162]=-1,ts[8]=ts[162]=1,ns[8]=ns[162]=1,rs[8]=rs[162]=0,is[8]=is[162]=1,os[8]=os[162]=1,ss[8]=ss[162]=0,as[8]=as[162]=0,Yo[32]=Yo[138]=0,Ko[32]=Ko[138]=1,Qo[32]=Qo[138]=1,Jo[32]=Jo[138]=0,es[32]=es[138]=1,ts[32]=ts[138]=0,Go[32]=Go[138]=1,Ho[32]=Ho[138]=0,qo[32]=qo[138]=0,Wo[32]=Wo[138]=1,Xo[32]=Xo[138]=0,Zo[32]=Zo[138]=1,hs[128]=hs[42]=0,ds[128]=ds[42]=1,fs[128]=fs[42]=1,ls[128]=ls[42]=0,cs[128]=cs[42]=1,us[128]=us[42]=0,Go[128]=Go[42]=-1,Ho[128]=Ho[42]=0,qo[128]=qo[42]=1,Wo[128]=Wo[42]=-1,Xo[128]=Xo[42]=0,Zo[128]=Zo[42]=0,Jo[5]=Jo[165]=-1,es[5]=es[165]=0,ts[5]=ts[165]=0,hs[5]=hs[165]=1,ds[5]=ds[165]=0,fs[5]=fs[165]=0,os[20]=os[150]=0,ss[20]=ss[150]=1,as[20]=as[150]=1,Wo[20]=Wo[150]=0,Xo[20]=Xo[150]=-1,Zo[20]=Zo[150]=1,Yo[80]=Yo[90]=-1,Ko[80]=Ko[90]=0,Qo[80]=Qo[90]=1,ls[80]=ls[90]=1,cs[80]=cs[90]=0,us[80]=us[90]=1,ns[65]=ns[105]=0,rs[65]=rs[105]=1,is[65]=is[105]=0,Go[65]=Go[105]=0,Ho[65]=Ho[105]=-1,qo[65]=qo[105]=0,Yo[160]=Yo[10]=-1,Ko[160]=Ko[10]=0,Qo[160]=Qo[10]=1,Jo[160]=Jo[10]=-1,es[160]=es[10]=0,ts[160]=ts[10]=0,hs[160]=hs[10]=1,ds[160]=ds[10]=0,fs[160]=fs[10]=0,ls[160]=ls[10]=1,cs[160]=cs[10]=0,us[160]=us[10]=1,os[130]=os[40]=0,ss[130]=ss[40]=1,as[130]=as[40]=1,ns[130]=ns[40]=0,rs[130]=rs[40]=1,is[130]=is[40]=0,Go[130]=Go[40]=0,Ho[130]=Ho[40]=-1,qo[130]=qo[40]=0,Wo[130]=Wo[40]=0,Xo[130]=Xo[40]=-1,Zo[130]=Zo[40]=1,Jo[37]=Jo[133]=0,es[37]=es[133]=1,ts[37]=ts[133]=1,hs[37]=hs[133]=0,ds[37]=ds[133]=1,fs[37]=fs[133]=0,Go[37]=Go[133]=-1,Ho[37]=Ho[133]=0,qo[37]=qo[133]=0,Wo[37]=Wo[133]=1,Xo[37]=Xo[133]=0,Zo[37]=Zo[133]=0,os[148]=os[22]=-1,ss[148]=ss[22]=0,as[148]=as[22]=0,hs[148]=hs[22]=0,ds[148]=ds[22]=-1,fs[148]=fs[22]=1,ls[148]=ls[22]=0,cs[148]=cs[22]=1,us[148]=us[22]=1,Wo[148]=Wo[22]=-1,Xo[148]=Xo[22]=0,Zo[148]=Zo[22]=1,Yo[82]=Yo[88]=0,Ko[82]=Ko[88]=-1,Qo[82]=Qo[88]=1,os[82]=os[88]=1,ss[82]=ss[88]=0,as[82]=as[88]=1,ns[82]=ns[88]=-1,rs[82]=rs[88]=0,is[82]=is[88]=1,ls[82]=ls[88]=0,cs[82]=cs[88]=-1,us[82]=us[88]=0,Yo[73]=Yo[97]=0,Ko[73]=Ko[97]=1,Qo[73]=Qo[97]=0,Jo[73]=Jo[97]=0,es[73]=es[97]=-1,ts[73]=ts[97]=0,ns[73]=ns[97]=1,rs[73]=rs[97]=0,is[73]=is[97]=0,Go[73]=Go[97]=1,Ho[73]=Ho[97]=0,qo[73]=qo[97]=1,Yo[145]=Yo[25]=0,Ko[145]=Ko[25]=-1,Qo[145]=Qo[25]=0,ns[145]=ns[25]=1,rs[145]=rs[25]=0,is[145]=is[25]=1,hs[145]=hs[25]=0,ds[145]=ds[25]=1,fs[145]=fs[25]=1,Wo[145]=Wo[25]=-1,Xo[145]=Xo[25]=0,Zo[145]=Zo[25]=0,Jo[70]=Jo[100]=0,es[70]=es[100]=1,ts[70]=ts[100]=0,os[70]=os[100]=-1,ss[70]=ss[100]=0,as[70]=as[100]=1,ls[70]=ls[100]=0,cs[70]=cs[100]=-1,us[70]=us[100]=1,Go[70]=Go[100]=1,Ho[70]=Ho[100]=0,qo[70]=qo[100]=0,Jo[101]=Jo[69]=0,es[101]=es[69]=1,ts[101]=ts[69]=0,Go[101]=Go[69]=1,Ho[101]=Ho[69]=0,qo[101]=qo[69]=0,hs[149]=hs[21]=0,ds[149]=ds[21]=1,fs[149]=fs[21]=1,Wo[149]=Wo[21]=-1,Xo[149]=Xo[21]=0,Zo[149]=Zo[21]=0,os[86]=os[84]=-1,ss[86]=ss[84]=0,as[86]=as[84]=1,ls[86]=ls[84]=0,cs[86]=cs[84]=-1,us[86]=us[84]=1,Yo[89]=Yo[81]=0,Ko[89]=Ko[81]=-1,Qo[89]=Qo[81]=0,ns[89]=ns[81]=1,rs[89]=rs[81]=0,is[89]=is[81]=1,Yo[96]=Yo[74]=0,Ko[96]=Ko[74]=1,Qo[96]=Qo[74]=0,Jo[96]=Jo[74]=-1,es[96]=es[74]=0,ts[96]=ts[74]=1,ls[96]=ls[74]=1,cs[96]=cs[74]=0,us[96]=us[74]=0,Go[96]=Go[74]=1,Ho[96]=Ho[74]=0,qo[96]=qo[74]=1,Yo[24]=Yo[146]=0,Ko[24]=Ko[146]=-1,Qo[24]=Qo[146]=1,os[24]=os[146]=1,ss[24]=ss[146]=0,as[24]=as[146]=1,ns[24]=ns[146]=0,rs[24]=rs[146]=1,is[24]=is[146]=1,Wo[24]=Wo[146]=0,Xo[24]=Xo[146]=-1,Zo[24]=Zo[146]=0,Jo[6]=Jo[164]=-1,es[6]=es[164]=0,ts[6]=ts[164]=1,os[6]=os[164]=-1,ss[6]=ss[164]=0,as[6]=as[164]=0,hs[6]=hs[164]=0,ds[6]=ds[164]=-1,fs[6]=fs[164]=1,ls[6]=ls[164]=1,cs[6]=cs[164]=0,us[6]=us[164]=0,ns[129]=ns[41]=0,rs[129]=rs[41]=1,is[129]=is[41]=1,hs[129]=hs[41]=0,ds[129]=ds[41]=1,fs[129]=fs[41]=0,Go[129]=Go[41]=-1,Ho[129]=Ho[41]=0,qo[129]=qo[41]=0,Wo[129]=Wo[41]=0,Xo[129]=Xo[41]=-1,Zo[129]=Zo[41]=0,os[66]=os[104]=0,ss[66]=ss[104]=1,as[66]=as[104]=0,ns[66]=ns[104]=-1,rs[66]=rs[104]=0,is[66]=is[104]=1,ls[66]=ls[104]=0,cs[66]=cs[104]=-1,us[66]=us[104]=0,Go[66]=Go[104]=0,Ho[66]=Ho[104]=-1,qo[66]=qo[104]=1,Yo[144]=Yo[26]=-1,Ko[144]=Ko[26]=0,Qo[144]=Qo[26]=0,hs[144]=hs[26]=1,ds[144]=ds[26]=0,fs[144]=fs[26]=1,ls[144]=ls[26]=0,cs[144]=cs[26]=1,us[144]=us[26]=1,Wo[144]=Wo[26]=-1,Xo[144]=Xo[26]=0,Zo[144]=Zo[26]=1,Jo[36]=Jo[134]=0,es[36]=es[134]=1,ts[36]=ts[134]=1,os[36]=os[134]=0,ss[36]=ss[134]=1,as[36]=as[134]=0,Go[36]=Go[134]=0,Ho[36]=Ho[134]=-1,qo[36]=qo[134]=1,Wo[36]=Wo[134]=1,Xo[36]=Xo[134]=0,Zo[36]=Zo[134]=0,Yo[9]=Yo[161]=-1,Ko[9]=Ko[161]=0,Qo[9]=Qo[161]=0,Jo[9]=Jo[161]=0,es[9]=es[161]=-1,ts[9]=ts[161]=0,ns[9]=ns[161]=1,rs[9]=rs[161]=0,is[9]=is[161]=0,hs[9]=hs[161]=1,ds[9]=ds[161]=0,fs[9]=fs[161]=1,Yo[136]=0,Ko[136]=1,Qo[136]=1,Jo[136]=0,es[136]=1,ts[136]=0,os[136]=-1,ss[136]=0,as[136]=1,ns[136]=-1,rs[136]=0,is[136]=0,hs[136]=0,ds[136]=-1,fs[136]=0,ls[136]=0,cs[136]=-1,us[136]=1,Go[136]=1,Ho[136]=0,qo[136]=0,Wo[136]=1,Xo[136]=0,Zo[136]=1,Yo[34]=0,Ko[34]=-1,Qo[34]=0,Jo[34]=0,es[34]=-1,ts[34]=1,os[34]=1,ss[34]=0,as[34]=0,ns[34]=1,rs[34]=0,is[34]=1,hs[34]=0,ds[34]=1,fs[34]=1,ls[34]=0,cs[34]=1,us[34]=0,Go[34]=-1,Ho[34]=0,qo[34]=1,Wo[34]=-1,Xo[34]=0,Zo[34]=0,Yo[35]=0,Ko[35]=1,Qo[35]=1,Jo[35]=0,es[35]=-1,ts[35]=1,os[35]=1,ss[35]=0,as[35]=0,ns[35]=-1,rs[35]=0,is[35]=0,hs[35]=0,ds[35]=-1,fs[35]=0,ls[35]=0,cs[35]=1,us[35]=0,Go[35]=-1,Ho[35]=0,qo[35]=1,Wo[35]=1,Xo[35]=0,Zo[35]=1,Yo[153]=0,Ko[153]=1,Qo[153]=1,ns[153]=-1,rs[153]=0,is[153]=0,hs[153]=0,ds[153]=-1,fs[153]=0,Wo[153]=1,Xo[153]=0,Zo[153]=1,Jo[102]=0,es[102]=-1,ts[102]=1,os[102]=1,ss[102]=0,as[102]=0,ls[102]=0,cs[102]=1,us[102]=0,Go[102]=-1,Ho[102]=0,qo[102]=1,Yo[155]=0,Ko[155]=-1,Qo[155]=0,ns[155]=1,rs[155]=0,is[155]=1,hs[155]=0,ds[155]=1,fs[155]=1,Wo[155]=-1,Xo[155]=0,Zo[155]=0,Jo[103]=0,es[103]=1,ts[103]=0,os[103]=-1,ss[103]=0,as[103]=1,ls[103]=0,cs[103]=-1,us[103]=1,Go[103]=1,Ho[103]=0,qo[103]=0,Yo[152]=0,Ko[152]=1,Qo[152]=1,os[152]=-1,ss[152]=0,as[152]=1,ns[152]=-1,rs[152]=0,is[152]=0,hs[152]=0,ds[152]=-1,fs[152]=0,ls[152]=0,cs[152]=-1,us[152]=1,Wo[152]=1,Xo[152]=0,Zo[152]=1,Yo[156]=0,Ko[156]=-1,Qo[156]=1,os[156]=1,ss[156]=0,as[156]=1,ns[156]=-1,rs[156]=0,is[156]=0,hs[156]=0,ds[156]=-1,fs[156]=0,ls[156]=0,cs[156]=1,us[156]=1,Wo[156]=-1,Xo[156]=0,Zo[156]=1,Yo[137]=0,Ko[137]=1,Qo[137]=1,Jo[137]=0,es[137]=1,ts[137]=0,ns[137]=-1,rs[137]=0,is[137]=0,hs[137]=0,ds[137]=-1,fs[137]=0,Go[137]=1,Ho[137]=0,qo[137]=0,Wo[137]=1,Xo[137]=0,Zo[137]=1,Yo[139]=0,Ko[139]=1,Qo[139]=1,Jo[139]=0,es[139]=-1,ts[139]=0,ns[139]=1,rs[139]=0,is[139]=0,hs[139]=0,ds[139]=1,fs[139]=0,Go[139]=-1,Ho[139]=0,qo[139]=0,Wo[139]=1,Xo[139]=0,Zo[139]=1,Yo[98]=0,Ko[98]=-1,Qo[98]=0,Jo[98]=0,es[98]=-1,ts[98]=1,os[98]=1,ss[98]=0,as[98]=0,ns[98]=1,rs[98]=0,is[98]=1,ls[98]=0,cs[98]=1,us[98]=0,Go[98]=-1,Ho[98]=0,qo[98]=1,Yo[99]=0,Ko[99]=1,Qo[99]=0,Jo[99]=0,es[99]=-1,ts[99]=1,os[99]=1,ss[99]=0,as[99]=0,ns[99]=-1,rs[99]=0,is[99]=1,ls[99]=0,cs[99]=-1,us[99]=0,Go[99]=1,Ho[99]=0,qo[99]=1,Jo[38]=0,es[38]=-1,ts[38]=1,os[38]=1,ss[38]=0,as[38]=0,hs[38]=0,ds[38]=1,fs[38]=1,ls[38]=0,cs[38]=1,us[38]=0,Go[38]=-1,Ho[38]=0,qo[38]=1,Wo[38]=-1,Xo[38]=0,Zo[38]=0,Jo[39]=0,es[39]=1,ts[39]=1,os[39]=-1,ss[39]=0,as[39]=0,hs[39]=0,ds[39]=-1,fs[39]=1,ls[39]=0,cs[39]=1,us[39]=0,Go[39]=-1,Ho[39]=0,qo[39]=1,Wo[39]=1,Xo[39]=0,Zo[39]=0;var $O=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},VO=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},UO=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},jO=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},GO=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},HO=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},qO=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},WO=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},gi=[],ci=[],Li=[],Ai=[],Zi=[],Hi=[],ps=[],_s=[];Ai[1]=Zi[1]=18,Ai[169]=Zi[169]=18,Li[4]=ci[4]=12,Li[166]=ci[166]=12,gi[16]=_s[16]=4,gi[154]=_s[154]=4,Hi[64]=ps[64]=22,Hi[106]=ps[106]=22,Li[2]=Hi[2]=17,Ai[2]=Zi[2]=18,Li[168]=Hi[168]=17,Ai[168]=Zi[168]=18,gi[8]=Ai[8]=9,ci[8]=Li[8]=12,gi[162]=Ai[162]=9,ci[162]=Li[162]=12,gi[32]=_s[32]=4,ci[32]=ps[32]=1,gi[138]=_s[138]=4,ci[138]=ps[138]=1,Zi[128]=_s[128]=21,Hi[128]=ps[128]=22,Zi[42]=_s[42]=21,Hi[42]=ps[42]=22,ci[5]=Zi[5]=14,ci[165]=Zi[165]=14,Li[20]=_s[20]=6,Li[150]=_s[150]=6,gi[80]=Hi[80]=11,gi[90]=Hi[90]=11,Ai[65]=ps[65]=3,Ai[105]=ps[105]=3,gi[160]=Hi[160]=11,ci[160]=Zi[160]=14,gi[10]=Hi[10]=11,ci[10]=Zi[10]=14,Li[130]=_s[130]=6,Ai[130]=ps[130]=3,Li[40]=_s[40]=6,Ai[40]=ps[40]=3,ci[101]=ps[101]=1,ci[69]=ps[69]=1,Zi[149]=_s[149]=21,Zi[21]=_s[21]=21,Li[86]=Hi[86]=17,Li[84]=Hi[84]=17,gi[89]=Ai[89]=9,gi[81]=Ai[81]=9,gi[96]=ps[96]=0,ci[96]=Hi[96]=15,gi[74]=ps[74]=0,ci[74]=Hi[74]=15,gi[24]=Li[24]=8,Ai[24]=_s[24]=7,gi[146]=Li[146]=8,Ai[146]=_s[146]=7,ci[6]=Hi[6]=15,Li[6]=Zi[6]=16,ci[164]=Hi[164]=15,Li[164]=Zi[164]=16,Ai[129]=_s[129]=7,Zi[129]=ps[129]=20,Ai[41]=_s[41]=7,Zi[41]=ps[41]=20,Li[66]=ps[66]=2,Ai[66]=Hi[66]=19,Li[104]=ps[104]=2,Ai[104]=Hi[104]=19,gi[144]=Zi[144]=10,Hi[144]=_s[144]=23,gi[26]=Zi[26]=10,Hi[26]=_s[26]=23,ci[36]=_s[36]=5,Li[36]=ps[36]=2,ci[134]=_s[134]=5,Li[134]=ps[134]=2,gi[9]=Zi[9]=10,ci[9]=Ai[9]=13,gi[161]=Zi[161]=10,ci[161]=Ai[161]=13,ci[37]=_s[37]=5,Zi[37]=ps[37]=20,ci[133]=_s[133]=5,Zi[133]=ps[133]=20,Li[148]=Zi[148]=16,Hi[148]=_s[148]=23,Li[22]=Zi[22]=16,Hi[22]=_s[22]=23,gi[82]=Li[82]=8,Ai[82]=Hi[82]=19,gi[88]=Li[88]=8,Ai[88]=Hi[88]=19,gi[73]=ps[73]=0,ci[73]=Ai[73]=13,gi[97]=ps[97]=0,ci[97]=Ai[97]=13,gi[145]=Ai[145]=9,Zi[145]=_s[145]=21,gi[25]=Ai[25]=9,Zi[25]=_s[25]=21,ci[70]=ps[70]=1,Li[70]=Hi[70]=17,ci[100]=ps[100]=1,Li[100]=Hi[100]=17,gi[34]=Ai[34]=9,ci[34]=Li[34]=12,Zi[34]=_s[34]=21,Hi[34]=ps[34]=22,gi[136]=_s[136]=4,ci[136]=ps[136]=1,Li[136]=Hi[136]=17,Ai[136]=Zi[136]=18,gi[35]=_s[35]=4,ci[35]=Li[35]=12,Ai[35]=Zi[35]=18,Hi[35]=ps[35]=22,gi[153]=_s[153]=4,Ai[153]=Zi[153]=18,ci[102]=Li[102]=12,Hi[102]=ps[102]=22,gi[155]=Ai[155]=9,Zi[155]=_s[155]=23,ci[103]=ps[103]=1,Li[103]=Hi[103]=17,gi[152]=_s[152]=4,Li[152]=Hi[152]=17,Ai[152]=Zi[152]=18,gi[156]=Li[156]=8,Ai[156]=Zi[156]=18,Hi[156]=_s[156]=23,gi[137]=_s[137]=4,ci[137]=ps[137]=1,Ai[137]=Zi[137]=18,gi[139]=_s[139]=4,ci[139]=Ai[139]=13,Zi[139]=ps[139]=20,gi[98]=Ai[98]=9,ci[98]=Li[98]=12,Hi[98]=ps[98]=22,gi[99]=ps[99]=0,ci[99]=Li[99]=12,Ai[99]=Hi[99]=19,ci[38]=Li[38]=12,Zi[38]=_s[38]=21,Hi[38]=ps[38]=22,ci[39]=_s[39]=5,Li[39]=Zi[39]=16,Hi[39]=ps[39]=22;var Zr=[];function YO(n,e,t){return function Sge(n){return(n>0)-(n<0)||+n}((e[0]-n[0])*(t[1]-e[1])-(t[0]-e[0])*(e[1]-n[1]))}function rj(n,e){return e.geometry.coordinates[0].every(function(t){return y8(wb(t),n)})}Zr[1]=Zr[169]=$O,Zr[4]=Zr[166]=VO,Zr[16]=Zr[154]=UO,Zr[64]=Zr[106]=jO,Zr[168]=Zr[2]=GO,Zr[162]=Zr[8]=HO,Zr[138]=Zr[32]=qO,Zr[42]=Zr[128]=WO,Zr[5]=Zr[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Zr[20]=Zr[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Zr[80]=Zr[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Zr[65]=Zr[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Zr[160]=Zr[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Zr[130]=Zr[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Zr[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Zr[101]=Zr[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Zr[149]=Zr[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Zr[86]=Zr[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Zr[89]=Zr[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Zr[96]=Zr[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Zr[24]=Zr[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Zr[6]=Zr[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Zr[129]=Zr[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Zr[66]=Zr[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Zr[144]=Zr[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Zr[36]=Zr[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Zr[9]=Zr[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Zr[37]=Zr[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Zr[148]=Zr[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Zr[82]=Zr[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Zr[73]=Zr[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Zr[145]=Zr[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Zr[70]=Zr[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Zr[34]=function(n){return[WO(n),HO(n)]},Zr[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Zr[136]=function(n){return[qO(n),GO(n)]},Zr[153]=function(n){return[UO(n),$O(n)]},Zr[102]=function(n){return[VO(n),jO(n)]},Zr[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Zr[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Zr[152]=function(n){return[UO(n),GO(n)]},Zr[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Zr[137]=function(n){return[qO(n),$O(n)]},Zr[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Zr[98]=function(n){return[HO(n),jO(n)]},Zr[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Zr[38]=function(n){return[VO(n),WO(n)]},Zr[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};const ij=function(){function n(e){this.id=n.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(e){return e.join(",")},n.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},n.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},n.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,r){var i=t.to,o=r.to;if(i.coordinates[0]-e.coordinates[0]>=0&&o.coordinates[0]-e.coordinates[0]<0)return 1;if(i.coordinates[0]-e.coordinates[0]<0&&o.coordinates[0]-e.coordinates[0]>=0)return-1;if(i.coordinates[0]-e.coordinates[0]==0&&o.coordinates[0]-e.coordinates[0]==0)return i.coordinates[1]-e.coordinates[1]>=0||o.coordinates[1]-e.coordinates[1]>=0?i.coordinates[1]-o.coordinates[1]:o.coordinates[1]-i.coordinates[1];var a=YO(e.coordinates,i.coordinates,o.coordinates);return a<0?1:a>0?-1:Math.pow(i.coordinates[0]-e.coordinates[0],2)+Math.pow(i.coordinates[1]-e.coordinates[1],2)-(Math.pow(o.coordinates[0]-e.coordinates[0],2)+Math.pow(o.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},n.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},n}(),Mge=function(){function n(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return RD([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(e){return YO(e.from.coordinates,e.to.coordinates,this.to.coordinates)},n}(),kge=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},n.prototype.get=function(e){return this.edges[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(e){this.edges.forEach(e)},n.prototype.map=function(e){return this.edges.map(e)},n.prototype.some=function(e){return this.edges.some(e)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(a,d,m){return d.from.coordinates[1]>e.edges[a].from.coordinates[1]&&(a=m),a},0),r=(0===t?this.length:t)-1,i=(t+1)%this.length,o=YO(this.edges[r].from.coordinates,this.edges[t].from.coordinates,this.edges[i].from.coordinates);return 0===o?this.edges[r].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},n.prototype.toMultiPoint=function(){return function h8(n,e,t){return void 0===t&&(t={}),Ym({type:"MultiPoint",coordinates:n},e,t)}(this.edges.map(function(e){return e.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=kD([e])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function zpe(n){return function Bpe(n,e){void 0===e&&(e={});var t=Number(n[0]),r=Number(n[1]),i=Number(n[2]),o=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[t,r];return kD([[a,[i,r],[i,o],[t,o],a]],e.properties,{bbox:n,id:e.id})}(ope(n))}(this.toPolygon())},n.findEdgeRingContaining=function(e,t){var i,o,r=e.getEnvelope();return t.forEach(function(a){var d=a.getEnvelope();if(o&&(i=o.getEnvelope()),!function Ige(n,e){var t=n.geometry.coordinates[0].map(function(a){return a[0]}),r=n.geometry.coordinates[0].map(function(a){return a[1]}),i=e.geometry.coordinates[0].map(function(a){return a[0]}),o=e.geometry.coordinates[0].map(function(a){return a[1]});return Math.max.apply(null,t)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,t)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}(d,r)&&rj(d,r)){for(var m=e.map(function(G){return G.from.coordinates}),_=void 0,C=function(G){a.some(function(W){return function Tge(n,e){return n[0]===e[0]&&n[1]===e[1]}(G,W.from.coordinates)})||(_=G)},T=0,R=m;T<R.length;T++)C(R[T]);_&&a.inside(wb(_))&&(!o||rj(i,d))&&(o=a)}}),o},n.prototype.inside=function(e){return y8(e,this.toPolygon())},n}();function fj(n){for(var e=n,t=[];e.parent;)t.unshift(e),e=e.parent;return t}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(e){!function Rge(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var t=new n;return ND(e,function(r){(function ape(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)})(r,"LineString","Graph::fromGeoJson"),function Jfe(n,e,t,r){var i=t;gE(n,function(o,a,d,m,_){i=0===a&&void 0===t?o:e(i,o,a,d,m,_)},r)}(r,function(i,o){if(i){var a=t.getNode(i),d=t.getNode(o);t.addEdge(a,d)}return o})}),t},n.prototype.getNode=function(e){var t=ij.buildId(e),r=this.nodes[t];return r||(r=this.nodes[t]=new ij(e)),r},n.prototype.addEdge=function(e,t){var r=new Mge(e,t),i=r.getSymetric();this.edges.push(r),this.edges.push(i)},n.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},n.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var r=e.getOuterEdges().map(function(i){return i.to});this.removeNode(e),r.forEach(function(i){return t._removeIfDangle(i)})}},n.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},n.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(r){return t._computeNextCWEdges(t.nodes[r])}):e.getOuterEdges().forEach(function(r,i){e.getOuterEdge((0===i?e.getOuterEdges().length:i)-1).symetric.next=r})},n.prototype._computeNextCCWEdges=function(e,t){for(var i,o,r=e.getOuterEdges(),a=r.length-1;a>=0;--a){var d=r[a],m=d.symetric,_=void 0,C=void 0;d.label===t&&(_=d),m.label===t&&(C=m),_&&C&&(C&&(o=C),_&&(o&&(o.next=_,o=void 0),i||(i=_)))}o&&(o.next=i)},n.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(r){if(!(r.label>=0)){e.push(r);var i=r;do{i.label=t,i=i.next}while(!r.isEqual(i));t++}}),e},n.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(r){r.label=void 0}),this._findLabeledEdgeRings().forEach(function(r){e._findIntersectionNodes(r).forEach(function(i){e._computeNextCCWEdges(i,r.label)})});var t=[];return this.edges.forEach(function(r){r.ring||t.push(e._findEdgeRing(r))}),t},n.prototype._findIntersectionNodes=function(e){var t=[],r=e,i=function(){var o=0;r.from.getOuterEdges().forEach(function(a){a.label===e.label&&++o}),o>1&&t.push(r.from),r=r.next};do{i()}while(!e.isEqual(r));return t},n.prototype._findEdgeRing=function(e){var t=e,r=new kge;do{r.push(t),t.ring=r,t=t.next}while(!e.isEqual(t));return r},n.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(r){return t.removeEdge(r)}),e.innerEdges.forEach(function(r){return t.removeEdge(r)}),delete this.nodes[e.id]},n.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}(),Ie(3198),Ie(3367),Ie(3282);var jD={search:function(n,e,t,r){n.cleanDirty();var i=(r=r||{}).heuristic||jD.heuristics.manhattan,o=r.closest||!1,a=function Zge(){return new pj(function(n){return n.f})}(),d=e;for(e.h=i(e,t),a.push(e);a.size()>0;){var m=a.pop();if(m===t)return fj(m);m.closed=!0;for(var _=n.neighbors(m),C=0,T=_.length;C<T;++C){var R=_[C];if(!R.closed&&!R.isWall()){var L=m.g+R.getCost(m),G=R.visited;(!G||L<R.g)&&(R.visited=!0,R.parent=m,R.h=R.h||i(R,t),R.g=L,R.f=R.g+R.h,n.markDirty(R),o&&(R.h<d.h||R.h===d.h&&R.g<d.g)&&(d=R),G?a.rescoreElement(R):a.push(R))}}}return o?fj(d):[]},heuristics:{manhattan:function(n,e){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},diagonal:function(n,e){var r=Math.sqrt(2),i=Math.abs(e.x-n.x),o=Math.abs(e.y-n.y);return 1*(i+o)+(r-2)*Math.min(i,o)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function Cb(n,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<n.length;t++){this.grid[t]=[];for(var r=0,i=n[t];r<i.length;r++){var o=new GD(t,r,i[r]);this.grid[t][r]=o,this.nodes.push(o)}}this.init()}function GD(n,e,t){this.x=n,this.y=e,this.weight=t}function pj(n){this.content=[],this.scoreFunction=n}function QO(){this._=null}function HD(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function xE(n,e){var t=e,r=e.R,i=t.U;i?i.L===t?i.L=r:i.R=r:n._=r,r.U=i,t.U=r,t.R=r.L,t.R&&(t.R.U=t),r.L=t}function wE(n,e){var t=e,r=e.L,i=t.U;i?i.L===t?i.L=r:i.R=r:n._=r,r.U=i,t.U=r,t.L=r.R,t.L&&(t.L.U=t),r.R=t}function mj(n){for(;n.L;)n=n.L;return n}Cb.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)jD.cleanNode(this.nodes[n])},Cb.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)jD.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},Cb.prototype.markDirty=function(n){this.dirtyNodes.push(n)},Cb.prototype.neighbors=function(n){var e=[],t=n.x,r=n.y,i=this.grid;return i[t-1]&&i[t-1][r]&&e.push(i[t-1][r]),i[t+1]&&i[t+1][r]&&e.push(i[t+1][r]),i[t]&&i[t][r-1]&&e.push(i[t][r-1]),i[t]&&i[t][r+1]&&e.push(i[t][r+1]),this.diagonal&&(i[t-1]&&i[t-1][r-1]&&e.push(i[t-1][r-1]),i[t+1]&&i[t+1][r-1]&&e.push(i[t+1][r-1]),i[t-1]&&i[t-1][r+1]&&e.push(i[t-1][r+1]),i[t+1]&&i[t+1][r+1]&&e.push(i[t+1][r+1])),e},Cb.prototype.toString=function(){for(var t,r,i,o,n=[],e=this.grid,a=0,d=e.length;a<d;a++){for(t=[],i=0,o=(r=e[a]).length;i<o;i++)t.push(r[i].weight);n.push(t.join(" "))}return n.join("\n")},GD.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},GD.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},GD.prototype.isWall=function(){return 0===this.weight},pj.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,r=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[t]=e,this.content[n]=r,n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],r=this.scoreFunction(t);;){var d,i=n+1<<1,o=i-1,a=null;if(o<e&&(d=this.scoreFunction(this.content[o]))<r&&(a=o),i<e&&this.scoreFunction(this.content[i])<(null===a?r:d)&&(a=i),null===a)break;this.content[n]=this.content[a],this.content[a]=t,n=a}}},QO.prototype={constructor:QO,insert:function(n,e){var t,r,i;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=mj(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)t===(r=t.U).L?(i=r.R)&&i.C?(t.C=i.C=!1,r.C=!0,n=r):(n===t.R&&(xE(this,t),t=(n=t).U),t.C=!1,r.C=!0,wE(this,r)):(i=r.L)&&i.C?(t.C=i.C=!1,r.C=!0,n=r):(n===t.L&&(wE(this,t),t=(n=t).U),t.C=!1,r.C=!0,xE(this,r)),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,o,a,e=n.U,r=n.L,i=n.R;if(o=r?i?mj(i):r:i,e?e.L===n?e.L=o:e.R=o:this._=o,r&&i?(a=o.C,o.C=n.C,o.L=r,r.U=o,o!==i?(e=o.U,o.U=n.U,e.L=n=o.R,o.R=i,i.U=o):(o.U=e,e=o,n=o.R)):(a=n.C,n=o),n&&(n.U=e),!a){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===e.L){if((t=e.R).C&&(t.C=!1,e.C=!0,xE(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,wE(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,xE(this,e),n=this._;break}}else if((t=e.L).C&&(t.C=!1,e.C=!0,wE(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,xE(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,wE(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};const gj=QO;function EE(n,e,t,r){var i=[null,null],o=sh.push(i)-1;return i.left=n,i.right=e,t&&qD(i,n,e,t),r&&qD(i,e,n,r),Ad[n.index].halfedges.push(o),Ad[e.index].halfedges.push(o),i}function CE(n,e,t){var r=[e,t];return r.left=n,r}function qD(n,e,t,r){n[0]||n[1]?n.left===t?n[1]=r:n[0]=r:(n[0]=r,n.left=e,n.right=t)}function Kge(n,e,t,r,i){var W,o=n[0],a=n[1],d=o[0],m=o[1],T=0,R=1,L=a[0]-d,G=a[1]-m;if(W=e-d,L||!(W>0)){if(W/=L,L<0){if(W<T)return;W<R&&(R=W)}else if(L>0){if(W>R)return;W>T&&(T=W)}if(W=r-d,L||!(W<0)){if(W/=L,L<0){if(W>R)return;W>T&&(T=W)}else if(L>0){if(W<T)return;W<R&&(R=W)}if(W=t-m,G||!(W>0)){if(W/=G,G<0){if(W<T)return;W<R&&(R=W)}else if(G>0){if(W>R)return;W>T&&(T=W)}if(W=i-m,G||!(W<0)){if(W/=G,G<0){if(W>R)return;W>T&&(T=W)}else if(G>0){if(W<T)return;W<R&&(R=W)}return!(T>0)&&!(R<1)||(T>0&&(n[0]=[d+T*L,m+T*G]),R<1&&(n[1]=[d+R*L,m+R*G])),!0}}}}}function Qge(n,e,t,r,i){var o=n[1];if(o)return!0;var W,ve,a=n[0],d=n.left,m=n.right,_=d[0],C=d[1],T=m[0],R=m[1],L=(_+T)/2;if(R===C){if(L<e||L>=r)return;if(_>T){if(a){if(a[1]>=i)return}else a=[L,t];o=[L,i]}else{if(a){if(a[1]<t)return}else a=[L,i];o=[L,t]}}else if(ve=(C+R)/2-(W=(_-T)/(R-C))*L,W<-1||W>1)if(_>T){if(a){if(a[1]>=i)return}else a=[(t-ve)/W,t];o=[(i-ve)/W,i]}else{if(a){if(a[1]<t)return}else a=[(i-ve)/W,i];o=[(t-ve)/W,t]}else if(C<R){if(a){if(a[0]>=r)return}else a=[e,W*e+ve];o=[r,W*r+ve]}else{if(a){if(a[0]<e)return}else a=[r,W*r+ve];o=[e,W*e+ve]}return n[0]=a,n[1]=o,!0}function t_e(n,e){var t=n.site,r=e.left,i=e.right;return t===i&&(i=r,r=t),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(t===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function _j(n,e){return e[+(e.left!==n.site)]}function n_e(n,e){return e[+(e.left===n.site)]}var JO,yj=[];function o_e(){HD(this),this.x=this.y=this.arc=this.site=this.cy=null}function Sb(n){var e=n.P,t=n.N;if(e&&t){var r=e.site,i=n.site,o=t.site;if(r!==o){var a=i[0],d=i[1],m=r[0]-a,_=r[1]-d,C=o[0]-a,T=o[1]-d,R=2*(m*T-_*C);if(!(R>=-u_e)){var L=m*m+_*_,G=C*C+T*T,W=(T*L-_*G)/R,ve=(m*G-C*L)/R,_e=yj.pop()||new o_e;_e.arc=n,_e.site=i,_e.x=W+a,_e.y=(_e.cy=ve+d)+Math.sqrt(W*W+ve*ve),n.circle=_e;for(var re=null,Oe=SE._;Oe;)if(_e.y<Oe.y||_e.y===Oe.y&&_e.x<=Oe.x){if(!Oe.L){re=Oe.P;break}Oe=Oe.L}else{if(!Oe.R){re=Oe;break}Oe=Oe.R}SE.insert(re,_e),re||(JO=_e)}}}}function Ib(n){var e=n.circle;e&&(e.P||(JO=e.N),SE.remove(e),yj.push(e),HD(e),n.circle=null)}var vj=[];function s_e(){HD(this),this.edge=this.site=this.circle=null}function bj(n){var e=vj.pop()||new s_e;return e.site=n,e}function eL(n){Ib(n),Tb.remove(n),vj.push(n),HD(n)}function a_e(n){var e=n.circle,t=e.x,r=e.cy,i=[t,r],o=n.P,a=n.N,d=[n];eL(n);for(var m=o;m.circle&&Math.abs(t-m.circle.x)<kl&&Math.abs(r-m.circle.cy)<kl;)o=m.P,d.unshift(m),eL(m),m=o;d.unshift(m),Ib(m);for(var _=a;_.circle&&Math.abs(t-_.circle.x)<kl&&Math.abs(r-_.circle.cy)<kl;)a=_.N,d.push(_),eL(_),_=a;d.push(_),Ib(_);var T,C=d.length;for(T=1;T<C;++T)qD((_=d[T]).edge,(m=d[T-1]).site,_.site,i);(_=d[C-1]).edge=EE((m=d[0]).site,_.site,null,i),Sb(m),Sb(_)}function l_e(n){for(var r,i,o,a,e=n[0],t=n[1],d=Tb._;d;)if((o=xj(d,t)-e)>kl)d=d.L;else{if(!((a=e-c_e(d,t))>kl)){o>-kl?(r=d.P,i=d):a>-kl?(r=d,i=d.N):r=i=d;break}if(!d.R){r=d;break}d=d.R}!function e_e(n){Ad[n.index]={site:n,halfedges:[]}}(n);var m=bj(n);if(Tb.insert(r,m),r||i){if(r===i)return Ib(r),i=bj(r.site),Tb.insert(m,i),m.edge=i.edge=EE(r.site,m.site),Sb(r),void Sb(i);if(!i)return void(m.edge=EE(r.site,m.site));Ib(r),Ib(i);var _=r.site,C=_[0],T=_[1],R=n[0]-C,L=n[1]-T,G=i.site,W=G[0]-C,ve=G[1]-T,_e=2*(R*ve-L*W),re=R*R+L*L,Oe=W*W+ve*ve,vt=[(ve*re-L*Oe)/_e+C,(R*Oe-W*re)/_e+T];qD(i.edge,_,G,vt),m.edge=EE(_,n,null,vt),i.edge=EE(n,G,null,vt),Sb(r),Sb(i)}}function xj(n,e){var t=n.site,r=t[0],i=t[1],o=i-e;if(!o)return r;var a=n.P;if(!a)return-1/0;var d=(t=a.site)[0],m=t[1],_=m-e;if(!_)return d;var C=d-r,T=1/o-1/_,R=C/_;return T?(-R+Math.sqrt(R*R-2*T*(C*C/(-2*_)-m+_/2+i-o/2)))/T+r:(r+d)/2}function c_e(n,e){var t=n.N;if(t)return xj(t,e);var r=n.site;return r[1]===e?r[0]:1/0}var Tb,Ad,SE,sh,kl=1e-6,u_e=1e-12;function h_e(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function d_e(n,e){return e[1]-n[1]||e[0]-n[0]}function wj(n,e){var r,i,o,t=n.sort(d_e).pop();for(sh=[],Ad=new Array(n.length),Tb=new gj,SE=new gj;;)if(o=JO,t&&(!o||t[1]<o.y||t[1]===o.y&&t[0]<o.x))(t[0]!==r||t[1]!==i)&&(l_e(t),r=t[0],i=t[1]),t=n.pop();else{if(!o)break;a_e(o.arc)}if(function r_e(){for(var t,r,i,o,n=0,e=Ad.length;n<e;++n)if((t=Ad[n])&&(o=(r=t.halfedges).length)){var a=new Array(o),d=new Array(o);for(i=0;i<o;++i)a[i]=i,d[i]=t_e(t,sh[r[i]]);for(a.sort(function(m,_){return d[_]-d[m]}),i=0;i<o;++i)d[i]=r[a[i]];for(i=0;i<o;++i)r[i]=d[i]}}(),e){var a=+e[0][0],d=+e[0][1],m=+e[1][0],_=+e[1][1];(function Jge(n,e,t,r){for(var o,i=sh.length;i--;)Qge(o=sh[i],n,e,t,r)&&Kge(o,n,e,t,r)&&(Math.abs(o[0][0]-o[1][0])>kl||Math.abs(o[0][1]-o[1][1])>kl)||delete sh[i]})(a,d,m,_),function i_e(n,e,t,r){var o,a,d,m,_,C,T,R,L,G,W,ve,i=Ad.length,_e=!0;for(o=0;o<i;++o)if(a=Ad[o]){for(d=a.site,m=(_=a.halfedges).length;m--;)sh[_[m]]||_.splice(m,1);for(m=0,C=_.length;m<C;)W=(G=n_e(a,sh[_[m]]))[0],ve=G[1],R=(T=_j(a,sh[_[++m%C]]))[0],L=T[1],(Math.abs(W-R)>kl||Math.abs(ve-L)>kl)&&(_.splice(m,0,sh.push(CE(d,G,Math.abs(W-n)<kl&&r-ve>kl?[n,Math.abs(R-n)<kl?L:r]:Math.abs(ve-r)<kl&&t-W>kl?[Math.abs(L-r)<kl?R:t,r]:Math.abs(W-t)<kl&&ve-e>kl?[t,Math.abs(R-t)<kl?L:e]:Math.abs(ve-e)<kl&&W-n>kl?[Math.abs(L-e)<kl?R:n,e]:null))-1),++C);C&&(_e=!1)}if(_e){var re,Oe,vt,Mt=1/0;for(o=0,_e=null;o<i;++o)(a=Ad[o])&&(vt=(re=(d=a.site)[0]-n)*re+(Oe=d[1]-e)*Oe)<Mt&&(Mt=vt,_e=a);if(_e){var Kt=[n,e],Zt=[n,r],an=[t,r],ot=[t,e];_e.halfedges.push(sh.push(CE(d=_e.site,Kt,Zt))-1,sh.push(CE(d,Zt,an))-1,sh.push(CE(d,an,ot))-1,sh.push(CE(d,ot,Kt))-1)}}for(o=0;o<i;++o)(a=Ad[o])&&(a.halfedges.length||delete Ad[o])}(a,d,m,_)}this.edges=sh,this.cells=Ad,Tb=SE=sh=Ad=null}function p_(){return new WD}function WD(){this.reset()}wj.prototype={constructor:wj,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(r){return _j(e,n[r])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,r){if(d=(o=t.halfedges).length)for(var o,d,m,i=t.site,a=-1,_=e[o[d-1]],C=_.left===i?_.right:_.left;++a<d;)m=C,C=(_=e[o[a]]).left===i?_.right:_.left,m&&C&&r<m.index&&r<C.index&&h_e(i,m,C)<0&&n.push([i.data,m.data,C.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var i,d,r=this,o=r._found||0,a=r.cells.length;!(d=r.cells[o]);)if(++o>=a)return null;var m=n-d.site[0],_=e-d.site[1],C=m*m+_*_;do{d=r.cells[i=o],o=null,d.halfedges.forEach(function(T){var R=r.edges[T],L=R.left;if(L!==d.site&&L||(L=R.right)){var G=n-L[0],W=e-L[1],ve=G*G+W*W;ve<C&&(C=ve,o=L.index)}})}while(null!==o);return r._found=i,null==t||C<=t*t?d.site:null}},Ie(8464),Ie(4855),WD.prototype={constructor:WD,reset:function(){this.s=this.t=0},add:function(n){Rj(XD,n,this.t),Rj(this,XD.s,this.s),this.s?this.t+=XD.t:this.s=XD.t},valueOf:function(){return this.s}};var XD=new WD;function Rj(n,e,t){var r=n.s=e+t,i=r-e;n.t=e-(r-i)+(t-i)}var Vl=Math.PI,Jh=Vl/2,Db=2*Vl,wl=Vl/180,IE=(Math,Math.atan),Ab=Math.atan2,ta=Math.cos,ys=(Math,Math,Math,Math,Math,Math.sin),Km=(Math,Math.sqrt);Math;function Mb(n){return n>1?Jh:n<-1?-Jh:Math.asin(n)}function pL(n,e){return[n>Vl?n-Db:n<-Vl?n+Db:n,e]}function sG(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}p_(),p_(),p_(),pL.invert=pL,function G_e(n){1===n.length&&(n=function H_e(n){return function(e,t){return sG(n(e),t)}}(n))}(sG),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);p_();function RL(){}function kG(n){return function(e,t){var r=ta(e),i=ta(t),o=n(r*i);return[o*i*ys(e),o*ys(t)]}}function NE(n){return function(e,t){var r=Km(e*e+t*t),i=n(r),o=ys(i),a=ta(i);return[Ab(e*o,r*a),Mb(r&&t*o/r)]}}function LL(n,e){return[n,e]}p_(),p_(),p_(),p_(),function AG(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),RL.prototype={constructor:RL,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta(30*wl),function MG(n){return function(e){var t=new RL;for(var r in n)t[r]=n[r];return t.stream=e,t}}({point:function(n,e){this.stream.point(n*wl,e*wl)}}),kG(function(n){return Km(2/(1+n))}).invert=NE(function(n){return 2*Mb(n/2)}),kG(function(n){return(n=function I_e(n){return n>1?0:n<-1?Vl:Math.acos(n)}(n))&&n/ys(n)}).invert=NE(function(n){return n}),LL.invert=LL,NE(IE),NE(Mb),NE(function(n){return 2*IE(n)});var Lb=Ie(2574);const Nb_mapbox_MAPBOX_ACCESS_TOKEN="pk.eyJ1IjoiYXNpZnVycmFobWFucGlhbCIsImEiOiJjbG5rM2YwYnMwNDk3MnBsa3BzZm9ydWk1In0.T8_ydpW5mGLxlqaTQgrxiQ",Nb_mapbox_MAP_STYLE_URL="mapbox://styles/asifurrahmanpial/clnzn9x8w00bk01qmfn9e0zvy",Nb_stripe_publishableKey="pk_test_51O9ZJlEtvqqTQS33qbqk96ThKuOJb6DEcjAB2hi25LmdF59wuQMtlqoe8OBJbsIBQ9kDUDP9AbTPKg95m9gFXKj700t7ItuLn9";let Bye=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,r)=>{navigator.geolocation.getCurrentPosition(i=>{t({lng:i.coords.longitude,lat:i.coords.latitude})},i=>{r(i)})})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var GG=function(n){return n.Aztec="AZTEC",n.Codabar="CODABAR",n.Code39="CODE_39",n.Code93="CODE_93",n.Code128="CODE_128",n.DataMatrix="DATA_MATRIX",n.Ean8="EAN_8",n.Ean13="EAN_13",n.Itf="ITF",n.Pdf417="PDF_417",n.QrCode="QR_CODE",n.UpcA="UPC_A",n.UpcE="UPC_E",n}(GG||{}),NL=function(n){return n.Front="FRONT",n.Back="BACK",n}(NL||{});const Fb=(0,fE.fo)("BarcodeScanner",{web:()=>Ie.e(7338).then(Ie.bind(Ie,7338)).then(n=>new n.BarcodeScannerWeb)});let Vye=(()=>{class n{constructor(t){this.router=t}scanQRCode(t){var r=this;return(0,Aa.Z)(function*(){const{barcodes:i}=yield Fb.scan({formats:[]});if(i.length>0){const o=i[0].rawValue;console.log("Scanned QR Code Data:",o),console.log("Vehicle Data:",t);const a=r.extractRouteFromURL(o);a&&r.router.navigate([a],{state:{vehicleData:t}})}})()}extractRouteFromURL(t){try{const i=new URL(t).pathname;return i.startsWith("/")?i:null}catch{return null}}static#e=this.\u0275fac=function(r){return new(r||n)(pn(Xa))};static#t=this.\u0275prov=yr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uye(n,e){if(1&n){const t=Ty();fr(0,"button",15),Bo("click",function(){return Gh(t),Ou(Jl(2).startTracking())}),Vr(1," Start "),or()}}function jye(n,e){if(1&n){const t=Ty();fr(0,"button",16),Bo("click",function(){return Gh(t),Ou(Jl(2).stopTracking())}),Vr(1," Stop "),or()}}function Gye(n,e){if(1&n&&(fr(0,"div",5)(1,"div",6)(2,"div",7)(3,"h4",8)(4,"span",9),Vr(5," Distance (km) "),Da(6,"br"),Vr(7),or()()(),fr(8,"div",7)(9,"h4",8)(10,"span",9),Vr(11," Fare "),Da(12,"br"),Vr(13),or()()(),fr(14,"div",10)(15,"h4",8)(16,"span",9),Vr(17," Duration "),Da(18,"br"),fr(19,"p"),Vr(20),or()()()()(),Da(21,"div",11),fr(22,"div",12),Rs(23,Uye,2,0,"button",13),Rs(24,jye,2,0,"button",14),or()()),2&n){const t=Jl();Gr(7),Yh(" ",t.distance," "),Gr(6),Yh(" ",t.fare," "),Gr(7),Qg(t.getFormattedTime(t.duration)),Gr(3),oo("ngIf",!t.isTracking),Gr(1),oo("ngIf",t.isTracking)}}function Hye(n,e){1&n&&(fr(0,"div",5)(1,"div",6)(2,"h2"),Vr(3,"Please book a ride first"),or()()())}let qye=(()=>{class n{constructor(t,r,i,o,a,d){this.geolocationService=t,this.router=r,this.snackBar=i,this.qrScannerService=o,this.zone=a,this.route=d,this.style=Nb_mapbox_MAP_STYLE_URL,this.center=[90.4152,23.8041],this.vehicleMarkers={},this.isUserTracked=!1,this.hasBookedRide=!1,this.isTracking=!1,this.distance="0",this.duration=0,this.fare=0,this.features=[],this.vehicleLayersAndSources=[],this.realtimeLineString={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}};const m=this.router.getCurrentNavigation();m&&m.extras.state&&(this.hasBookedRide=m.extras.state.hasBookedRide)}ngAfterViewInit(){(0,Zfe.Z)()?this.initializeMapAndLayers().then(()=>{this.getUserLocation()}):console.error("WebGL is not supported.")}ngOnInit(){this.route.paramMap.subscribe(t=>{const r=window.history.state;r&&r.vehicleData&&(this.vehicleData=r.vehicleData,this.vehicleType=this.vehicleData.vehicleType)})}initializeMapAndLayers(){var t=this;return(0,Aa.Z)(function*(){return new Promise(r=>{const i=document.getElementById("map");i&&(i.innerHTML=""),t.map=new Lb.Map({accessToken:Nb_mapbox_MAPBOX_ACCESS_TOKEN,container:"map",style:t.style,zoom:11,center:t.center}),t.map.on("load",()=>{t.map.addSource("earthquakes",{type:"geojson",data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"}),t.map.addSource("service-zone",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{propertyName:"Dhanmondi"},geometry:{type:"Polygon",coordinates:[[[90.35892535035822,23.73026803278084],[90.35520837612711,23.741986116751818],[90.35664893945409,23.75627514237472],[90.37305368023294,23.760285068091434],[90.38742786820114,23.750902124253813],[90.39116505525789,23.738605801049147],[90.39228358878836,23.715910635726928],[90.38384621283393,23.713632613448837],[90.36976908063457,23.724745099707334],[90.35892535035822,23.73026803278084]]]}},{type:"Feature",properties:{propertyName:"Gulshan 2"},geometry:{type:"Polygon",coordinates:[[[90.41069757560575,23.79680223178086],[90.41591465744375,23.799395564120303],[90.42154656002418,23.79224047027232],[90.42059268924055,23.79149337898222],[90.41482858798452,23.787121694309377],[90.41069757560575,23.79680223178086]]]}}]}}),t.map.addLayer({id:"service-zone-color",type:"fill",source:"service-zone",layout:{},paint:{"fill-color":"#1cdb63","fill-opacity":.5}}),t.map.addLayer({id:"outline",type:"line",source:"service-zone",layout:{},paint:{"line-color":"#000","line-width":3}}),t.map.addLayer({id:"earthquakes-layer",type:"circle",source:"earthquakes",paint:{"circle-radius":4,"circle-stroke-width":2,"circle-color":"red","circle-stroke-color":"white"}}),r()})})})()}isUserInServiceZone(t){var r=this;return(0,Aa.Z)(function*(){return!!t&&r.map.queryRenderedFeatures(r.map.project(t),{layers:["service-zone-color"]}).length>0})()}getUserLocation(){var t=this;return(0,Aa.Z)(function*(){t.vehicleLayersAndSources.forEach(r=>{t.map.getLayer(r)&&t.map.removeLayer(r),t.map.getSource(r)&&t.map.removeSource(r)}),t.vehicleLayersAndSources=[],t.map||(yield t.initializeMapAndLayers());try{const r=yield CO.getCurrentPosition({enableHighAccuracy:!0});if(r){const{longitude:i,latitude:o}=r.coords,a=[i,o];if(console.log("User location:",r),t.isUserTracked=!0,t.flyToPosition(a,!0),!t.isTracking){const d=t.findVehiclesWithinRadius(a,[{coordinates:[90.3602676,23.7338588],title:"Scooter Two",vehicleType:"scooter",serviceZone:"Dhanmondi"},{coordinates:[90.36270595295844,23.732303975895746],title:"Cycle One",vehicleType:"cycle",serviceZone:"Dhanmondi"},{coordinates:[90.415,23.798],title:"Scooter One",vehicleType:"scooter",serviceZone:"Gulshan 2"},{coordinates:[90.41940936417484,23.792966936767243],title:"Scooter Three",vehicleType:"scooter",serviceZone:"Gulshan 2"}]);d&&d.length>0?(console.log("Nearby vehicles:",d),d.forEach(m=>{t.addVehicleMarker(m)})):console.log("No vehicles found within the specified radius.")}}else console.error("Geolocation.getCurrentPosition returned no position.");return r}catch(r){return void console.error("Error getting user location:",r)}})()}findVehiclesWithinRadius(t,r,i=1){const o=wb(t);return function OD(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}(r.map(m=>wb(m.coordinates,{title:m.title,vehicleType:m.vehicleType,serviceZone:m.serviceZone}))).features.filter(m=>b8(o,m)<=i).map(m=>{const _=m.geometry.coordinates;return{coordinates:[_[0],_[1]],title:m.properties.title,vehicleType:m.properties.vehicleType,serviceZone:m.properties.serviceZone}})}addVehicleMarker(t){const r=`Vehicles-${t.title}`,i=t.vehicleType,o=`Vehicles-points-${t.title}`;let a;this.map.getLayer(o)&&(this.map.removeLayer(o),this.vehicleLayersAndSources=this.vehicleLayersAndSources.filter(m=>m!==o)),this.map.getSource(r)&&(this.map.removeSource(r),this.vehicleLayersAndSources=this.vehicleLayersAndSources.filter(m=>m!==r)),"scooter"===t.vehicleType?a=20:"cycle"===t.vehicleType&&(a=10),this.map.getLayer(o)&&this.map.removeLayer(o),this.map.getSource(r)&&this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:{title:t.title,vehicleType:t.vehicleType,serviceZone:t.serviceZone,fare:a}}]}}),this.map.loadImage("scooter"===t.vehicleType?"assets/scooter.png":"cycle"===t.vehicleType?"assets/cycle.png":"assets/marker.svg",(m,_)=>{if(m)throw m;_&&(this.map.hasImage(i)&&this.map.removeImage(i),this.map.addImage(i,_),this.map.addLayer({id:o,type:"symbol",source:r,layout:{"icon-image":i,"icon-size":.2}}))}),this.vehicleLayersAndSources.push(o),this.vehicleLayersAndSources.push(r),this.setupVehicleMarkerClickEvent(o)}setupVehicleMarkerClickEvent(t){this.map.on("click",t,r=>{if(r.features&&r.features.length>0){const i=r.features[0];if(i&&i.geometry&&i.geometry.coordinates.length>=2){const o=[i.geometry.coordinates[0],i.geometry.coordinates[1]],a=r.features[0].properties?.title,d=r.features[0].properties?.fare,m=r.features[0].properties?.vehicleType,_=r.features[0].properties?.serviceZone,C={coordinates:o,title:a,vehicleType:m,serviceZone:_,fare:d},T=document.createElement("div");T.innerHTML=`\n                    <div class="flex flex-col items-center justify-center">\n                        <h3 class="text-xl font-bold">${a}</h3>\n                        <p>Fare: ${d} tk/min</p> \x3c!-- Display the fare --\x3e\n                        <button id="book-button" class="bg-blue-500 hover-bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4">Book</button>\n                    </div>`;const R=T.querySelector("#book-button");R&&R.addEventListener("click",()=>{this.qrScannerService.scanQRCode(C)}),(new Lb.Popup).setLngLat(o).setDOMContent(T).addTo(this.map)}}}),this.map.on("mouseenter",t,()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave",t,()=>{this.map.getCanvas().style.cursor=""})}trackLocation(){var t=this;return(0,Aa.Z)(function*(){try{const r=yield CO.watchPosition({enableHighAccuracy:!0},i=>{t.zone.runOutsideAngular(()=>{if(console.log("Position:",i),i){const o=[i.coords.longitude,i.coords.latitude];t.currentLocation=o,console.log("lngLat:",o),t.flyToPosition(o,!0),t.realtimeLineString.geometry.coordinates.push(o),console.log("realtimeLineString:",t.realtimeLineString),t.map.getSource("realtimeLineString")?t.map.getSource("realtimeLineString").setData(t.realtimeLineString):(t.map.addSource("realtimeLineString",{type:"geojson",data:t.realtimeLineString}),t.map.addLayer({id:"realtimeLineString",type:"line",source:"realtimeLineString",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ff0000","line-width":5}}))}})});console.log("watchId:",r),t.watchID=r}catch(r){console.log("Error:",r),console.log("Geolocation is not supported or permission denied.")}})()}stopTracking(){if(console.log("realtimeLineString:",this.realtimeLineString),this.isTracking=!1,this.endTime=new Date,this.onLineStringChange(),this.watchID){CO.clearWatch({id:this.watchID}),this.watchID=null;const t=this.realtimeLineString.geometry.coordinates,r=[t[0][0],t[0][1]],i=t.reduce((d,m)=>d.extend(m),new Lb.LngLatBounds(r,r));this.map.fitBounds(i,{padding:55});const o=this.endTime.getTime()-this.startTime.getTime(),a={geojson:this.realtimeLineString,fare:this.fare,startTime:this.startTime,endTime:this.endTime,duration:o,distance:this.distance};console.log("Ride details:",a),this.router.navigate(["/ride-summary"],{state:{data:a}})}}updateRealTimeInfo(){if(this.isTracking){const t=new Date,{length:r,time:i}=this.calculateLengthAndTime(this.startTime,t);this.distance=r,this.duration=+i,this.calculateFare(this.duration)}}startTracking(){var t=this;this.removeAllVehicles(),this.startTime=new Date,this.isTracking=!0,this.trackLocation(),this.realTimeUpdateInterval=setInterval(()=>{this.updateRealTimeInfo()},1e3);let r=!0;this.serviceZoneCheckInterval=setInterval((0,Aa.Z)(function*(){const i=yield t.isUserInServiceZone(t.currentLocation);!i&&r&&t.snackBar.open("\u26a0\ufe0f You are leaving the service zone!","",{duration:3e3}),r=i}),5e3)}removeAllVehicles(){for(let t=0;t<this.vehicleLayersAndSources.length;t+=2){const r=this.vehicleLayersAndSources[t],i=this.vehicleLayersAndSources[t+1];this.map.getLayer(r)&&this.map.removeLayer(r),this.map.getSource(i)&&this.map.removeSource(i)}this.vehicleLayersAndSources=[]}onLineStringChange(){const{length:t,time:r}=this.calculateLengthAndTime(this.startTime,this.endTime);this.zone.run(()=>{this.distance=t,this.duration=+r})}calculateFare(t){this.zone.run(()=>{const r=t/60;"cycle"===this.vehicleType?this.fare=10*r:"scooter"===this.vehicleType&&(this.fare=20*r)})}calculateLengthAndTime(t,r){const i=function eme(n,e){return void 0===e&&(e={}),function rpe(n,e,t){var r=t,i=!1;return function npe(n,e){ND(n,function(t,r,i){var o=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var d,m=0,_=0,C=0;if(!1===gE(t,function(T,R,L,G,W){if(void 0===d||r>m||G>_||W>C)return d=T,m=r,_=G,C=W,void(o=0);var ve=RD([d,T],t.properties);if(!1===e(ve,r,i,W,o))return!1;o++,d=T}))return!1}}})}(n,function(o,a,d,m,_){r=!1===i&&void 0===t?o:e(r,o,a,d,m,_),i=!0}),r}(n,function(t,r){var i=r.geometry.coordinates;return t+b8(i[0],i[1],e)},0)}(this.realtimeLineString,{units:"kilometers"}),o=r.getTime()-t.getTime(),a=Math.floor(o/1e3);return{length:this.formatDistance(i),time:a}}getFormattedTime(t){const r=Math.floor(t/3600),i=Math.floor((t-3600*r)/60),o=t-3600*r-60*i;return`${r}:${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}formatDistance(t){return t?t.toFixed(2):"0"}flyToPosition(t,r=!1){var i=this;return(0,Aa.Z)(function*(){yield i.map.flyTo({center:t,zoom:16,speed:1.5,curve:1.4,essential:!0});const o=document.createElement("div");o.className="custom-marker",o.style.width="50px",o.style.height="50px",o.innerHTML='<svg width="30" height="30" viewbox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" > <circle cx="20" cy="20" fill="none" r="10" stroke="#19a2fc" stroke-width="2"> <animate attributeName="r" from="8" to="20" dur="1.5s" begin="0s" repeatCount="indefinite" /> <animate attributeName="opacity" from="1" to="0" dur="1.5s" begin="0s" repeatCount="indefinite" /> </circle> <circle cx="20" cy="20" fill="#1ba3fd" r="10" /> </svg>';const a=new Lb.Marker(o);r?(i.removeFlyToMarker(),i.flyToMarker=a,i.flyToMarker.setLngLat(t).addTo(i.map)):i.removeFlyToMarker()})()}removeFlyToMarker(){this.flyToMarker&&this.flyToMarker.remove()}static#e=this.\u0275fac=function(r){return new(r||n)(he(Bye),he(Xa),he(bR),he(Vye),he(y),he(Xf))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-map"]],decls:8,vars:2,consts:[[1,"map-container","relative","h-screen"],["id","map"],[1,"absolute","top-4","right-4","z-10"],["mat-icon-button","",3,"click"],["class","bottom-card fixed bottom-0",4,"ngIf"],[1,"bottom-card","fixed","bottom-0"],[1,"flex","flex-wrap","justify-center","items-center"],[1,"w-1/3","md:w-1/3","text-center","border-r","border-gray-300"],[1,"text-xl","font-semibold"],[1,"text-center"],[1,"w-1/3","md:w-1/3","text-center"],[1,"border-t","border-gray-300","mx-4","my-4"],[1,"w-full","text-center","mt-2"],["mat-raised-button","","color","primary","class","rounded-full w-24 h-24 md:w-32 md:h-32",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","class","rounded-full w-24 h-24 md:w-32 md:h-32",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"rounded-full","w-24","h-24","md:w-32","md:h-32",3,"click"],["mat-raised-button","","color","warn",1,"rounded-full","w-24","h-24","md:w-32","md:h-32",3,"click"]],template:function(r,i){1&r&&(fr(0,"div",0),Da(1,"div",1),fr(2,"div",2)(3,"button",3),Bo("click",function(){return i.getUserLocation()}),fr(4,"mat-icon"),Vr(5,"my_location"),or()()()(),Rs(6,Gye,25,5,"div",4),Rs(7,Hye,4,0,"div",4)),2&r&&(Gr(6),oo("ngIf",i.hasBookedRide),Gr(1),oo("ngIf",!i.hasBookedRide))},dependencies:[Hf,lR,$ie,oV],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100vh}.bottom-card[_ngcontent-%COMP%]{margin:16px 16px 35px;width:calc(100% - 32px);border-left:none;color:#000;padding:16px;text-align:center;border-radius:31px;background:#f5f5f5}.marker[_ngcontent-%COMP%]{display:block;border:none;border-radius:50%;cursor:pointer;padding:0}"]})}return n})(),Wye=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Zn({type:n,selectors:[["ng-component"]],decls:2,vars:0,template:function(r,i){1&r&&(fr(0,"p"),Vr(1,"profile works!"),or())}})}return n})();const Xye=n=>{const e=n.get("password"),t=n.get("confirmPassword");return e&&t&&e.value!==t.value?{passwordMismatch:!0}:null};function Zye(n,e){1&n&&(fr(0,"div"),Vr(1,"Name is required"),or())}function Yye(n,e){1&n&&(fr(0,"div"),Vr(1,"Name is invalid"),or())}function Kye(n,e){if(1&n&&(fr(0,"small",18),Rs(1,Zye,2,0,"div",19),Rs(2,Yye,2,0,"div",19),or()),2&n){const t=Jl();Gr(1),oo("ngIf",null==t.name.errors?null:t.name.errors.required),Gr(1),oo("ngIf",null==t.name.errors?null:t.name.errors.pattern)}}function Qye(n,e){1&n&&(fr(0,"div"),Vr(1,"Email is required"),or())}function Jye(n,e){1&n&&(fr(0,"div"),Vr(1,"Email is invalid"),or())}function eve(n,e){if(1&n&&(fr(0,"small",18),Rs(1,Qye,2,0,"div",19),Rs(2,Jye,2,0,"div",19),or()),2&n){const t=Jl();Gr(1),oo("ngIf",null==t.email.errors?null:t.email.errors.required),Gr(1),oo("ngIf",null==t.email.errors?null:t.email.errors.email)}}function tve(n,e){1&n&&(fr(0,"div"),Vr(1," Password is required "),or())}function nve(n,e){1&n&&(fr(0,"div"),Vr(1," Password is invalid "),or())}function rve(n,e){if(1&n&&(fr(0,"small",18),Rs(1,tve,2,0,"div",19),Rs(2,nve,2,0,"div",19),or()),2&n){const t=Jl();Gr(1),oo("ngIf",null==t.password.errors?null:t.password.errors.required),Gr(1),oo("ngIf",null==t.password.errors?null:t.password.errors.password)}}function ive(n,e){1&n&&(fr(0,"div"),Vr(1," Confirm the password "),or())}function ove(n,e){if(1&n&&(fr(0,"small",18),Rs(1,ive,2,0,"div",19),or()),2&n){const t=Jl();Gr(1),oo("ngIf",null==t.confirmPassword.errors?null:t.confirmPassword.errors.required)}}function sve(n,e){1&n&&(fr(0,"small",18),Vr(1," Password should match "),or())}let ave=(()=>{class n{constructor(t,r,i,o){this.fb=t,this.authService=r,this.snackBar=i,this.router=o,this.registrationForm=this.fb.group({name:["",[Up.required,Up.pattern(/^[a-zA-Z]+(?: [a-zA-Z]+)*$/)]],email:["",[Up.required,Up.email]],password:["",Up.required],confirmPassword:["",Up.required]},{validators:Xye})}get name(){return this.registrationForm.controls.name}get email(){return this.registrationForm.controls.email}get password(){return this.registrationForm.controls.password}get confirmPassword(){return this.registrationForm.controls.confirmPassword}register(){let{name:t,email:r,password:i}=this.registrationForm.getRawValue();t=t??"",r=r??"",i=i??"";const o={name:t,email:r,password:i};console.log(o),this.authService.register(o).subscribe(a=>{this.router.navigate(["/login"]),this.snackBar.open("Registered in successfully","Close",{duration:2e3})},a=>{this.snackBar.open(200===a.status?"User already exists":"An error occurred. Please try again later.","Close",{duration:2e3})})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Zk),he(PD),he(bR),he(Xa))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-registration"]],decls:34,vars:7,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","h-screen"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],[1,"space-y-4","md:space-y-6",3,"formGroup","ngSubmit"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","name","type","text","name","name","id","name","placeholder","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["class","text-red-500",4,"ngIf"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","name","email","id","email","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","password","type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","confirm-password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","confirmPassword","type","confirmPassword","name","confirmPassword","id","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"w-full","text-white","bg-primary-600","hover:bg-primary-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"disabled"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/login",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"],[1,"text-red-500"],[4,"ngIf"]],template:function(r,i){1&r&&(fr(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),Vr(5," Create an account "),or(),fr(6,"form",5),Bo("ngSubmit",function(){return i.register()}),fr(7,"div")(8,"label",6),Vr(9," Username "),or(),Da(10,"input",7),Rs(11,Kye,3,2,"small",8),or(),fr(12,"div")(13,"label",9),Vr(14," Your email "),or(),Da(15,"input",10),Rs(16,eve,3,2,"small",8),or(),fr(17,"div")(18,"label",11),Vr(19," Password "),or(),Da(20,"input",12),Rs(21,rve,3,2,"small",8),or(),fr(22,"div")(23,"label",13),Vr(24," Confirm password "),or(),Da(25,"input",14),Rs(26,ove,2,1,"small",8),Rs(27,sve,2,0,"small",8),or(),fr(28,"button",15),Vr(29," Create an account "),or(),fr(30,"p",16),Vr(31," Already have an account? "),fr(32,"a",17),Vr(33," Login here "),or()()()()()()()),2&r&&(Gr(6),oo("formGroup",i.registrationForm),Gr(5),oo("ngIf",i.name.invalid&&(i.name.dirty||i.name.touched)),Gr(5),oo("ngIf",i.email.invalid&&(i.email.dirty||i.email.touched)),Gr(5),oo("ngIf",i.password.invalid&&(i.password.dirty||i.password.touched)),Gr(5),oo("ngIf",i.confirmPassword.invalid&&(i.confirmPassword.dirty||i.confirmPassword.touched)),Gr(1),oo("ngIf",(null==i.registrationForm.errors?null:i.registrationForm.errors.passwordMismatch)&&i.confirmPassword.valid&&i.password.valid),Gr(1),oo("disabled",i.registrationForm.invalid))},dependencies:[Hf,$k,Sw,dT,fT,kw,f_,rb,Pw,EO],styles:["section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}form[_ngcontent-%COMP%]{width:100%}"]})}return n})();function bA(n){return(bA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Rh(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Yp(n){Rh(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||"object"===bA(n)&&"[object Date]"===e?new Date(n.getTime()):"number"==typeof n||"[object Number]"===e?new Date(n):(("string"==typeof n||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Jy(n){if(null===n||!0===n||!1===n)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function xA(n){Rh(1,arguments);var t=Yp(n),r=t.getUTCDay(),i=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function HG(n){Rh(1,arguments);var e=Yp(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=xA(r),o=new Date(0);o.setUTCFullYear(t,0,4),o.setUTCHours(0,0,0,0);var a=xA(o);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}var qG={};function wA(){return qG}function EA(n,e){var t,r,i,o,a,d,m,_;Rh(1,arguments);var C=wA(),T=Jy(null!==(t=null!==(r=null!==(i=null!==(o=e?.weekStartsOn)&&void 0!==o?o:null==e||null===(a=e.locale)||void 0===a||null===(d=a.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==i?i:C.weekStartsOn)&&void 0!==r?r:null===(m=C.locale)||void 0===m||null===(_=m.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==t?t:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var R=Yp(n),L=R.getUTCDay(),G=(L<T?7:0)+L-T;return R.setUTCDate(R.getUTCDate()-G),R.setUTCHours(0,0,0,0),R}function WG(n,e){var t,r,i,o,a,d,m,_;Rh(1,arguments);var C=Yp(n),T=C.getUTCFullYear(),R=wA(),L=Jy(null!==(t=null!==(r=null!==(i=null!==(o=e?.firstWeekContainsDate)&&void 0!==o?o:null==e||null===(a=e.locale)||void 0===a||null===(d=a.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==i?i:R.firstWeekContainsDate)&&void 0!==r?r:null===(m=R.locale)||void 0===m||null===(_=m.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==t?t:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var G=new Date(0);G.setUTCFullYear(T+1,0,L),G.setUTCHours(0,0,0,0);var W=EA(G,e),ve=new Date(0);ve.setUTCFullYear(T,0,L),ve.setUTCHours(0,0,0,0);var _e=EA(ve,e);return C.getTime()>=W.getTime()?T+1:C.getTime()>=_e.getTime()?T:T-1}function Ga(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}const g__y=function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Ga("yy"===t?i%100:i,t.length)},g__M=function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):Ga(r+1,2)},g__d=function(e,t){return Ga(e.getUTCDate(),t.length)},g__h=function(e,t){return Ga(e.getUTCHours()%12||12,t.length)},g__H=function(e,t){return Ga(e.getUTCHours(),t.length)},g__m=function(e,t){return Ga(e.getUTCMinutes(),t.length)},g__s=function(e,t){return Ga(e.getUTCSeconds(),t.length)},g__S=function(e,t){var r=t.length,i=e.getUTCMilliseconds();return Ga(Math.floor(i*Math.pow(10,r-3)),t.length)};function XG(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),o=r%60;if(0===o)return t+String(i);var a=e||"";return t+String(i)+a+Ga(o,2)}function ZG(n,e){return n%60==0?(n>0?"-":"+")+Ga(Math.abs(n)/60,2):ev(n,e)}function ev(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n);return r+Ga(Math.floor(i/60),2)+t+Ga(i%60,2)}const Cve={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var i=e.getUTCFullYear();return r.ordinalNumber(i>0?i:1-i,{unit:"year"})}return g__y(e,t)},Y:function(e,t,r,i){var o=WG(e,i),a=o>0?o:1-o;return"YY"===t?Ga(a%100,2):"Yo"===t?r.ordinalNumber(a,{unit:"year"}):Ga(a,t.length)},R:function(e,t){return Ga(HG(e),t.length)},u:function(e,t){return Ga(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Ga(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Ga(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return g__M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return Ga(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var o=function xve(n,e){Rh(1,arguments);var t=Yp(n),r=EA(t,e).getTime()-function vve(n,e){var t,r,i,o,a,d,m,_;Rh(1,arguments);var C=wA(),T=Jy(null!==(t=null!==(r=null!==(i=null!==(o=e?.firstWeekContainsDate)&&void 0!==o?o:null==e||null===(a=e.locale)||void 0===a||null===(d=a.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==i?i:C.firstWeekContainsDate)&&void 0!==r?r:null===(m=C.locale)||void 0===m||null===(_=m.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==t?t:1),R=WG(n,e),L=new Date(0);return L.setUTCFullYear(R,0,T),L.setUTCHours(0,0,0,0),EA(L,e)}(t,e).getTime();return Math.round(r/6048e5)+1}(e,i);return"wo"===t?r.ordinalNumber(o,{unit:"week"}):Ga(o,t.length)},I:function(e,t,r){var i=function yve(n){Rh(1,arguments);var e=Yp(n),t=xA(e).getTime()-function gve(n){Rh(1,arguments);var e=HG(n),t=new Date(0);return t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0),xA(t)}(e).getTime();return Math.round(t/6048e5)+1}(e);return"Io"===t?r.ordinalNumber(i,{unit:"week"}):Ga(i,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):g__d(e,t)},D:function(e,t,r){var i=function mve(n){Rh(1,arguments);var e=Yp(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime();return Math.floor((t-r)/864e5)+1}(e);return"Do"===t?r.ordinalNumber(i,{unit:"dayOfYear"}):Ga(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var o=e.getUTCDay(),a=(o-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ga(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var o=e.getUTCDay(),a=(o-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ga(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),o=0===i?7:i;switch(t){case"i":return String(o);case"ii":return Ga(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var o=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){var o,i=e.getUTCHours();switch(o=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){var o,i=e.getUTCHours();switch(o=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return g__h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):g__H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(i,{unit:"hour"}):Ga(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?r.ordinalNumber(i,{unit:"hour"}):Ga(i,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):g__m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):g__s(e,t)},S:function(e,t){return g__S(e,t)},X:function(e,t,r,i){var a=(i._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return ZG(a);case"XXXX":case"XX":return ev(a);default:return ev(a,":")}},x:function(e,t,r,i){var a=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return ZG(a);case"xxxx":case"xx":return ev(a);default:return ev(a,":")}},O:function(e,t,r,i){var a=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+XG(a,":");default:return"GMT"+ev(a,":")}},z:function(e,t,r,i){var a=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+XG(a,":");default:return"GMT"+ev(a,":")}},t:function(e,t,r,i){return Ga(Math.floor((i._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,r,i){return Ga((i._originalDate||e).getTime(),t.length)}};var YG=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},KG=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const Tve={p:KG,P:function(e,t){var a,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return YG(e,t);switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",YG(i,t)).replace("{{time}}",KG(o,t))}};var Ave=["D","DD"],Mve=["YY","YYYY"];function QG(n,e,t){if("YYYY"===n)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===n)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===n)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===n)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Rve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function FL(n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var zve={date:FL({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:FL({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:FL({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Vve={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function FE(n){return function(e,t){var i;if("formatting"===(null!=t&&t.context?String(t.context):"standalone")&&n.formattingValues){var o=n.defaultFormattingWidth||n.defaultWidth,a=null!=t&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{var d=n.defaultWidth,m=null!=t&&t.width?String(t.width):n.defaultWidth;i=n.values[m]||n.values[d]}return i[n.argumentCallback?n.argumentCallback(e):e]}}function BE(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.width,o=e.match(r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth]);if(!o)return null;var _,a=o[0],d=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(d)?function e0e(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}(d,function(T){return T.test(a)}):function Jve(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}(d,function(T){return T.test(a)});return _=n.valueCallback?n.valueCallback(m):m,{value:_=t.valueCallback?t.valueCallback(_):_,rest:e.slice(a.length)}}}const g0e={code:"en-US",formatDistance:function(e,t,r){var i,o=Rve[e];return i="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i},formatLong:zve,formatRelative:function(e,t,r,i){return Vve[e]},localize:{ordinalNumber:function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:FE({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:FE({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:FE({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:FE({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:FE({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function t0e(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],o=e.match(n.parsePattern);if(!o)return null;var a=n.valueCallback?n.valueCallback(o[0]):o[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:BE({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:BE({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:BE({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:BE({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:BE({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var _0e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,y0e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v0e=/^'([^]*?)'?$/,b0e=/''/g,x0e=/[a-zA-Z]/;function BL(n,e,t){var r,i,o,a,d,m,_,C,T,R,L,G,W,ve,_e,re,Oe,vt;Rh(2,arguments);var Mt=String(e),Kt=wA(),Zt=null!==(r=null!==(i=t?.locale)&&void 0!==i?i:Kt.locale)&&void 0!==r?r:g0e,an=Jy(null!==(o=null!==(a=null!==(d=null!==(m=t?.firstWeekContainsDate)&&void 0!==m?m:null==t||null===(_=t.locale)||void 0===_||null===(C=_.options)||void 0===C?void 0:C.firstWeekContainsDate)&&void 0!==d?d:Kt.firstWeekContainsDate)&&void 0!==a?a:null===(T=Kt.locale)||void 0===T||null===(R=T.options)||void 0===R?void 0:R.firstWeekContainsDate)&&void 0!==o?o:1);if(!(an>=1&&an<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ot=Jy(null!==(L=null!==(G=null!==(W=null!==(ve=t?.weekStartsOn)&&void 0!==ve?ve:null==t||null===(_e=t.locale)||void 0===_e||null===(re=_e.options)||void 0===re?void 0:re.weekStartsOn)&&void 0!==W?W:Kt.weekStartsOn)&&void 0!==G?G:null===(Oe=Kt.locale)||void 0===Oe||null===(vt=Oe.options)||void 0===vt?void 0:vt.weekStartsOn)&&void 0!==L?L:0);if(!(ot>=0&&ot<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Zt.localize)throw new RangeError("locale must contain localize property");if(!Zt.formatLong)throw new RangeError("locale must contain formatLong property");var Er=Yp(n);if(!function hve(n){if(Rh(1,arguments),!function uve(n){return Rh(1,arguments),n instanceof Date||"object"===bA(n)&&"[object Date]"===Object.prototype.toString.call(n)}(n)&&"number"!=typeof n)return!1;var e=Yp(n);return!isNaN(Number(e))}(Er))throw new RangeError("Invalid time value");var _r=function Dve(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}(Er),di=function fve(n,e){return Rh(2,arguments),function dve(n,e){Rh(2,arguments);var t=Yp(n).getTime(),r=Jy(e);return new Date(t+r)}(n,-Jy(e))}(Er,_r),Di={firstWeekContainsDate:an,weekStartsOn:ot,locale:Zt,_originalDate:Er},br=Mt.match(y0e).map(function(qr){var Ln=qr[0];return"p"===Ln||"P"===Ln?(0,Tve[Ln])(qr,Zt.formatLong):qr}).join("").match(_0e).map(function(qr){if("''"===qr)return"'";var Ln=qr[0];if("'"===Ln)return function w0e(n){var e=n.match(v0e);return e?e[1].replace(b0e,"'"):n}(qr);var xr=Cve[Ln];if(xr)return!(null!=t&&t.useAdditionalWeekYearTokens)&&function kve(n){return-1!==Mve.indexOf(n)}(qr)&&QG(qr,e,String(n)),!(null!=t&&t.useAdditionalDayOfYearTokens)&&function Pve(n){return-1!==Ave.indexOf(n)}(qr)&&QG(qr,e,String(n)),xr(di,qr,Zt.localize,Di);if(Ln.match(x0e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ln+"`");return qr}).join("");return br}function E0e(n,e){if(1&n&&(fr(0,"div")(1,"div",5)(2,"p")(3,"strong"),Vr(4,"Fare:"),or(),Vr(5),or(),fr(6,"p")(7,"strong"),Vr(8,"Start Time:"),or(),Vr(9),or(),fr(10,"p")(11,"strong"),Vr(12,"End Time:"),or(),Vr(13),or()(),Da(14,"div",3),or()),2&n){const t=e.$implicit,r=Jl();Gr(5),Yh(" \u09f3",t.fare," "),Gr(4),Yh(" ",r.formatDateTime(t.startTime)," "),Gr(4),Yh(" ",r.formatDateTime(t.endTime)," ")}}let C0e=(()=>{class n{constructor(t){this.authService=t,this.rides=[],this.totalCost=0,this.rideStartTime="",this.rideEndTime=""}ngOnInit(){this.fetchRideHistory(),this.initializeMap()}initializeMap(){Lb.accessToken="pk.eyJ1IjoiYXNpZnVycmFobWFucGlhbCIsImEiOiJjbG5rM2YwYnMwNDk3MnBsa3BzZm9ydWk1In0.T8_ydpW5mGLxlqaTQgrxiQ",this.map=new Lb.Map({container:"map",style:"mapbox://styles/asifurrahmanpial/clnzn9x8w00bk01qmfn9e0zvy",center:[90.41591465744375,23.799395564120303],zoom:14})}fetchRideHistory(){this.authService.getRideHistory().subscribe(t=>{this.rides=t})}formatDateTime(t){return BL(new Date(t),"dd/MM/yyyy hh:mm a")}static#e=this.\u0275fac=function(r){return new(r||n)(he(PD))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-rides"]],decls:6,vars:1,consts:[[1,"ride-details-container"],[1,"bg-white","rounded-lg","shadow-lg","p-4","space-y-4"],[1,"text-lg","font-semibold"],[1,"border-t","border-gray-300"],[4,"ngFor","ngForOf"],[1,"p-4"]],template:function(r,i){1&r&&(fr(0,"div",0)(1,"div",1)(2,"h3",2),Vr(3,"Ride Details"),or(),Da(4,"div",3),Rs(5,E0e,15,3,"div",4),or()()),2&r&&(Gr(5),oo("ngForOf",i.rides))},dependencies:[w4],styles:["#map[_ngcontent-%COMP%]{height:400px}.ride-details-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.ride-details-container[_ngcontent-%COMP%]{padding:1rem}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:1rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;font-weight:600}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;border-top-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity))}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1rem}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;padding:.5rem}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}"]})}return n})(),S0e=(()=>{class n{constructor(t,r){this.ngZone=t,this.router=r,this.barcodeFormat=GG,this.lensFacing=NL,this.formGroup=new Hne({formats:new wT([]),lensFacing:new wT(NL.Back),googleBarcodeScannerModuleInstallState:new wT(0),googleBarcodeScannerModuleInstallProgress:new wT(0)}),this.barcodes=[],this.isSupported=!1,this.isPermissionGranted=!1}ngOnInit(){Fb.isSupported().then(t=>{this.isSupported=t.supported}),Fb.checkPermissions().then(t=>{this.isPermissionGranted="granted"===t.camera}),Fb.removeAllListeners().then(()=>{Fb.addListener("googleBarcodeScannerModuleInstallProgress",t=>{this.ngZone.run(()=>{console.log("googleBarcodeScannerModuleInstallProgress",t);const{state:r,progress:i}=t;this.formGroup.patchValue({googleBarcodeScannerModuleInstallState:r,googleBarcodeScannerModuleInstallProgress:i})})})})}scan(){var t=this;return(0,Aa.Z)(function*(){const r=t.formGroup.get("formats")?.value||[],{barcodes:i}=yield Fb.scan({formats:r});if(t.barcodes=i,i.length>0){const o=i[0].rawValue;console.log("Scanned QR Code Data:",o);const a=t.extractRouteFromURL(o);a&&t.router.navigate([a])}})()}extractRouteFromURL(t){try{const i=new URL(t).pathname;return i.startsWith("/")?i:null}catch{return null}}static#e=this.\u0275fac=function(r){return new(r||n)(he(y),he(Xa))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-qr-scanner"]],decls:4,vars:1,consts:[["slot","fixed","vertical","bottom","horizontal","end"],[3,"disabled","click"],["name","scan"]],template:function(r,i){1&r&&(fr(0,"ion-content")(1,"ion-fab",0)(2,"ion-fab-button",1),Bo("click",function(){return i.scan()}),Da(3,"ion-icon",2),or()()()),2&r&&(Gr(2),oo("disabled",!i.isSupported))},dependencies:[xO,Y6,K6,J6]})}return n})();const I0e=["input"],T0e=["label"],D0e=["*"],A0e=new Ar("mat-checkbox-default-options",{providedIn:"root",factory:JG});function JG(){return{color:"accent",clickAction:"check-indeterminate"}}const M0e={provide:nh,useExisting:Et(()=>tH),multi:!0};class P0e{}let k0e=0;const eH=JG(),R0e=Eie(iR(V$($$(class{constructor(n){this._elementRef=n}}))));let O0e=(()=>{class n extends R0e{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=Fu(t)}constructor(t,r,i,o,a,d,m){super(r),this._changeDetectorRef=i,this._ngZone=o,this._animationMode=d,this._options=m,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new l,this.indeterminateChange=new l,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||eH,this.color=this.defaultColor=this._options.color||eH.color,this.tabIndex=parseInt(a)||0,this.id=this._uniqueId=`${t}${++k0e}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=Fu(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=Fu(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=Fu(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}static#e=this.\u0275fac=function(r){el()};static#t=this.\u0275dir=Kn({type:n,viewQuery:function(r,i){if(1&r&&(jf(I0e,5),jf(T0e,5),jf(oR,5)),2&r){let o;Oc(o=Lc())&&(i._inputElement=o.first),Oc(o=Lc())&&(i._labelElement=o.first),Oc(o=Lc())&&(i.ripple=o.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Bi]})}return n})(),tH=(()=>{class n extends O0e{constructor(t,r,i,o,a,d){super("mat-mdc-checkbox-",t,r,i,o,a,d),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){const r=new P0e;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}static#e=this.\u0275fac=function(r){return new(r||n)(he(er),he(Or),he(y),Rf("tabindex"),he(zf,8),he(A0e,8))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&(hP("id",i.id),gc("tabindex",null)("aria-label",null)("aria-labelledby",null),Rc("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[Is([M0e]),Bi],ngContentSelectors:D0e,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"],["label",""]],template:function(r,i){if(1&r&&(Lr(),fr(0,"div",0),Bo("click",function(a){return i._preventBubblingFromLabel(a)}),fr(1,"div",1,2)(3,"div",3),Bo("click",function(){return i._onTouchTargetClick()}),or(),fr(4,"input",4,5),Bo("blur",function(){return i._onBlur()})("click",function(){return i._onInputClick()})("change",function(a){return i._onInteractionEvent(a)}),or(),Da(6,"div",6),fr(7,"div",7),function Vv(){ro.lFrame.currentNamespace="svg"}(),fr(8,"svg",8),Da(9,"path",9),or(),function bg(){!function z_(){ro.lFrame.currentNamespace=null}()}(),Da(10,"div",10),or(),Da(11,"div",11),or(),fr(12,"label",12,13),Tr(14),or()()),2&r){const o=EI(2);Rc("mdc-form-field--align-end","before"==i.labelPosition),Gr(4),Rc("mdc-checkbox--selected",i.checked),oo("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled)("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex),gc("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("name",i.name)("value",i.value),Gr(7),oo("matRippleTrigger",o)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),Gr(1),oo("for",i.inputId)}},dependencies:[oR],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}html{--mdc-checkbox-disabled-selected-checkmark-color:#fff;--mdc-checkbox-selected-focus-state-layer-opacity:0.16;--mdc-checkbox-selected-hover-state-layer-opacity:0.04;--mdc-checkbox-selected-pressed-state-layer-opacity:0.16;--mdc-checkbox-unselected-focus-state-layer-opacity:0.16;--mdc-checkbox-unselected-hover-state-layer-opacity:0.04;--mdc-checkbox-unselected-pressed-state-layer-opacity:0.16}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),nH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({})}return n})(),F0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[oh,X$,nH,oh,nH]})}return n})(),B0e=(()=>{class n{constructor(t,r,i){this.route=t,this._formBuilder=r,this.router=i,this.Checklist=this._formBuilder.group({pointOne:!1,pointTwo:!1,pointThree:!1}),this.hasBookedRide=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{const r=window.history.state;r&&r.vehicleData&&(this.vehicleData=r.vehicleData)})}isChecklistComplete(){return this.Checklist.controls.pointOne.value&&this.Checklist.controls.pointTwo.value&&this.Checklist.controls.pointThree.value}continueRide(){this.hasBookedRide=!0,this.router.navigate(["/map"],{state:{hasBookedRide:this.hasBookedRide,vehicleData:this.vehicleData}})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Xf),he(Zk),he(Xa))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-book-ride"]],decls:39,vars:14,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"flex","flex-col","items-center","justify-center","max-w-md","mx-auto","p-4","bg-gray-100","rounded-lg","shadow-md"],[1,"text-2xl","md:text-4xl","font-bold","mb-4"],[1,"mb-4",3,"formGroup"],[1,"text-xl","md:text-2xl","font-semibold"],[1,"list-inside","ml-4"],["formControlName","pointOne"],["formControlName","pointTwo"],["formControlName","pointThree"],[1,"mb-4"],[1,"font-semibold"],[1,"space-x-4"],[1,"px-4","py-2","rounded-lg",3,"disabled","click"],[1,"px-4","py-2","bg-red-500","text-white","rounded-lg","hover:bg-red-600"]],template:function(r,i){1&r&&(fr(0,"div",0)(1,"div",1)(2,"h1",2),Vr(3," Thank you for riding Wheel Wizards! "),or(),fr(4,"div",3)(5,"h2",4),Vr(6,"Before you ride:"),or(),fr(7,"ul",5)(8,"mat-checkbox",6),Vr(9," Check the brakes and tires "),or(),fr(10,"mat-checkbox",7),Vr(11," Make sure the seat is adjusted to a comfortable height "),or(),fr(12,"mat-checkbox",8),Vr(13,"Wear a helmet"),or()()(),fr(14,"div",9)(15,"p")(16,"span",10),Vr(17,"Vehicle name:"),or(),Vr(18),or(),fr(19,"p")(20,"span",10),Vr(21,"Vehicle Type:"),or(),Vr(22),or(),fr(23,"p")(24,"span",10),Vr(25,"Service Area:"),or(),Vr(26),or(),fr(27,"p")(28,"span",10),Vr(29,"Rate:"),or(),Vr(30),or()(),fr(31,"div",9)(32,"p"),Vr(33,"Would you like to continue?"),or(),fr(34,"div",11)(35,"button",12),Bo("click",function(){return i.continueRide()}),Vr(36," Yes "),or(),fr(37,"button",13),Vr(38," No "),or()()()()()),2&r&&(Gr(4),oo("formGroup",i.Checklist),Gr(14),Yh(" ",i.vehicleData.title," "),Gr(4),Yh(" ",i.vehicleData.vehicleType," "),Gr(4),Yh(" ",i.vehicleData.serviceZone," "),Gr(4),Yh(" \u09f3",i.vehicleData.fare," "),Gr(5),Rc("bg-blue-500",i.isChecklistComplete())("bg-gray-500",!i.isChecklistComplete())("text-white",i.isChecklistComplete())("text-white",!i.isChecklistComplete()),oo("disabled",!i.isChecklistComplete()))},dependencies:[dT,fT,rb,Pw,tH]})}return n})(),z0e=(()=>{class n{constructor(t){this.router=t;const r=this.router.getCurrentNavigation();if(r&&r.extras.state){const i=r.extras.state;console.log("Ride details:",i.data),this.fare=i.data.fare;const o=Math.floor(i.data.duration/1e3),a=Math.floor(o/3600),d=Math.floor((o-3600*a)/60);this.duration=`${a} hr ${d} min ${o-3600*a-60*d} sec`,this.startTime=BL(new Date(i.data.startTime),"PPpp"),this.endTime=BL(new Date(i.data.endTime),"PPpp"),this.distance=i.data.distance}}static#e=this.\u0275fac=function(r){return new(r||n)(he(Xa))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-ride-summary"]],decls:29,vars:5,consts:[[1,"flex","flex-col","items-center"],[1,"text-3xl","font-bold","mt-8"],[1,"mt-4","p-4","bg-gray-100","rounded-lg"],[1,"flex","justify-between","mb-2"],[1,"font-semibold"]],template:function(r,i){1&r&&(fr(0,"div",0)(1,"h1",1),Vr(2,"Ride Summary"),or(),fr(3,"div",2)(4,"div",3)(5,"span",4),Vr(6,"Fare:"),or(),fr(7,"span",4),Vr(8),or()(),fr(9,"div",3)(10,"span",4),Vr(11,"Duration:"),or(),fr(12,"span",4),Vr(13),or()(),fr(14,"div",3)(15,"span",4),Vr(16,"Start Time:"),or(),fr(17,"span",4),Vr(18),or()(),fr(19,"div",3)(20,"span",4),Vr(21,"End Time:"),or(),fr(22,"span",4),Vr(23),or()(),fr(24,"div",3)(25,"span",4),Vr(26,"Distance:"),or(),fr(27,"span",4),Vr(28),or()()()()),2&r&&(Gr(8),Qg(i.fare),Gr(5),Qg(i.duration),Gr(5),Qg(i.startTime),Gr(5),Qg(i.endTime),Gr(5),Qg(i.distance))}})}return n})();var rH=Ie(9698);const CA=(0,fE.fo)("Stripe",{web:()=>Ie.e(9751).then(Ie.bind(Ie,9751)).then(n=>new n.StripeWeb)}),V0e=[{path:"",redirectTo:"map",pathMatch:"full"},{path:"home",component:Ffe},{path:"camera",component:Nfe},{path:"map",component:qye},{path:"registration",component:ave},{path:"login",component:Xfe},{path:"profile",component:Wye},{path:"ride-history",component:C0e},{path:"qr",component:S0e},{path:"book",component:B0e},{path:"ride-summary",component:z0e},{path:"stripe",component:(()=>{class n{constructor(t){this.http=t,this.data={email:"test@test.com",fare:5},CA.initialize({publishableKey:Nb_stripe_publishableKey})}httpPost(t){return this.http.post("http://127.0.0.1:4000/payment",t).pipe(h_())}paymentSheet(){var t=this;return(0,Aa.Z)(function*(){try{CA.addListener(rH.YG.Completed,()=>{console.log("PaymentSheetEventsEnum.Completed")});const r=t.httpPost(t.data),{client_secret:i}=yield function $0e(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let a,o=!1;n.subscribe({next:d=>{a=d,o=!0},error:i,complete:()=>{o?r(a):t?r(e.defaultValue):i(new Yw)}})})}(r);console.log("client_secret: ",i),yield CA.createPaymentSheet({paymentIntentClientSecret:i,merchantDisplayName:"Technyks"}),console.log("createPaymentSheet");const o=yield CA.presentPaymentSheet();console.log("result: ",o),o&&o.paymentResult===rH.YG.Completed&&t.splitAndJoin(i)}catch(r){console.log(r)}})()}splitAndJoin(t){const r=t.split("_").slice(0,2).join("_");return console.log(r),r}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ew))};static#t=this.\u0275cmp=Zn({type:n,selectors:[["app-stripe"]],decls:7,vars:0,consts:[["color","primary"],[1,"ion-padding"],["expand","block",1,"ion-margin-top",3,"click"]],template:function(r,i){1&r&&(fr(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),Vr(3,"Stripe"),or()()(),fr(4,"ion-content",1)(5,"ion-button",2),Bo("click",function(){return i.paymentSheet()}),Vr(6," Payment Sheet "),or()())},dependencies:[Z6,xO,Q6,e8,t8]})}return n})()}];let U0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n});static#n=this.\u0275inj=Io({imports:[k6.forRoot(V0e),k6]})}return n})();function iH(n,e){return e?t=>Nw(e.pipe(Dh(1),function j0e(){return _n((n,e)=>{n.subscribe(Pn(e,et))})}()),t.pipe(iH(n))):Bn((t,r)=>Fi(n(t,r)).pipe(Dh(1),$T(t)))}const H0e=Vu,W0e=Symbol("__destroy"),oH=Symbol("__decoratorApplied");function sH(n){return"string"==typeof n?Symbol(`__destroy__${n}`):W0e}function aH(n,e){n[e]||(n[e]=new lt)}function lH(n,e){n[e]&&(n[e].next(),n[e].complete(),n[e]=null)}function cH(n){n instanceof me&&n.unsubscribe()}function uH(n,e){return function(){if(n&&n.call(this),lH(this,sH()),e.arrayName&&function Z0e(n){Array.isArray(n)&&n.forEach(cH)}(this[e.arrayName]),e.checkProperties)for(const t in this)e.blackList?.includes(t)||cH(this[t])}}Symbol("CheckerHasBeenSet");function pH(n,e){return t=>{const r=sH(e);"string"==typeof e?function nbe(n,e,t){const r=n[e];aH(n,t),n[e]=function(){r.apply(this,arguments),lH(this,t),n[e]=r}}(n,e,r):aH(n,r);const i=n[r];return t.pipe(ih(i))}}function ibe(n,e){1&n&&(fr(0,"mat-icon",11),Vr(1," menu "),or())}function obe(n,e){1&n&&(fr(0,"mat-icon",11),Vr(1," close "),or())}function sbe(n,e){if(1&n){const t=Ty();fr(0,"button",9),Bo("click",function(){return Gh(t),Jl(),Ou(EI(3).toggle())}),Rs(1,ibe,2,0,"mat-icon",10),Rs(2,obe,2,0,"mat-icon",10),or()}if(2&n){Jl();const t=EI(3);Gr(1),oo("ngIf",!t.opened),Gr(1),oo("ngIf",t.opened)}}let $L=class bF{constructor(e,t,r){this.observer=e,this.router=t,this.authService=r,this.title="client"}ngAfterViewInit(){this.observer.observe(["(max-width: 800px)"]).pipe(function G0e(n,e=TT){const t=lV(n,e);return iH(()=>t)}(1),pH(this)).subscribe(e=>{e.matches?(this.sidenav.mode="over",this.sidenav.close()):(this.sidenav.mode="side",this.sidenav.open())}),this.router.events.pipe(pH(this),yc(e=>e instanceof Wm)).subscribe(()=>{"over"===this.sidenav.mode&&this.sidenav.close()})}logOut(){this.authService.logOut(),this.router.navigateByUrl("/login")}static#e=this.\u0275fac=function(t){return new(t||bF)(he(AT),he(Xa),he(PD))};static#t=this.\u0275cmp=Zn({type:bF,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&jf(pR,5),2&t){let i;Oc(i=Lc())&&(r.sidenav=i.first)}},decls:31,vars:1,consts:[["class","fixed top-4 left-4 z-10 p-2 rounded-full bg-transparent bg-opacity-0 shadow-lg",3,"click",4,"ngIf"],[1,"mat-elevation-z8"],["sidenav","matSidenav"],[1,"name"],["mat-button","","routerLink","/map",1,"menu-button"],["mat-button","","routerLink","/ride-history",1,"menu-button"],["mat-button","","routerLink","/stripe",1,"menu-button"],["mat-button","",1,"menu-button",3,"click"],[1,"content","mat-elevation-z8"],[1,"fixed","top-4","left-4","z-10","p-2","rounded-full","bg-transparent","bg-opacity-0","shadow-lg",3,"click"],["class","text-black bg-transparent",4,"ngIf"],[1,"text-black","bg-transparent"]],template:function(t,r){1&t&&(Rs(0,sbe,3,2,"button",0),fr(1,"mat-sidenav-container")(2,"mat-sidenav",1,2)(4,"h4",3),Vr(5,"John Smith"),or(),Da(6,"mat-divider"),fr(7,"button",4)(8,"mat-icon"),Vr(9,"home"),or(),fr(10,"span"),Vr(11,"Home"),or()(),fr(12,"button",5)(13,"mat-icon"),Vr(14,"info"),or(),fr(15,"span"),Vr(16,"History"),or()(),fr(17,"button",6)(18,"mat-icon"),Vr(19,"info"),or(),fr(20,"span"),Vr(21,"Payment"),or()(),Da(22,"mat-divider"),fr(23,"button",7),Bo("click",function(){return r.logOut()}),fr(24,"mat-icon"),Vr(25,"power_settings_new"),or(),fr(26,"span"),Vr(27,"Log Out"),or()()(),fr(28,"mat-sidenav-content")(29,"div",8),Da(30,"router-outlet"),or()()()),2&t&&oo("ngIf","/login"!==r.router.url&&"/registration"!==r.router.url)},dependencies:[Hf,aO,f_,pR,yV,fR,lR,oV,Vie,n8],styles:["mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#e0e0e0;color:#000;border-radius:10px;padding:16px;text-align:center}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.content[_ngcontent-%COMP%]{height:100vh;overflow:auto}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.menu-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}"]})};$L=Ft([function Q0e(n={}){return e=>{!function q0e(n){return!!n[H0e]}(e)?function Y0e(n,e){n.prototype.ngOnDestroy=uH(n.prototype.ngOnDestroy,e)}(e,n):function K0e(n,e){const t=n.\u0275pipe;t.onDestroy=uH(t.onDestroy,e)}(e,n),function X0e(n){n.prototype[oH]=!0}(e)}}()],$L);let abe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=wo({type:n,bootstrap:[$L]});static#n=this.\u0275inj=Io({imports:[H4,Tre,xne,U0e,cle,vw,Dre,RV,pse,Ooe,J$,eoe,Uie,F0e,Afe.forRoot(),Rfe.forRoot()]})}return n})();var mH=Ie(6635);const gH=(n,e)=>typeof window>"u"?Promise.resolve():(0,mH.p)().then(()=>(0,mH.b)([["ion-icon",[[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32],ariaLabel:[32]}]]],["stripe-payment-request-button",[[4,"stripe-payment-request-button",{paymentMethodEventHandler:[16],shippingOptionEventHandler:[16],shippingAddressEventHandler:[16],publishableKey:[1,"publishable-key"],stripeAccount:[1,"stripe-account"],applicationName:[1,"application-name"],stripeDidLoaded:[1040],loadStripeStatus:[32],stripe:[32],paymentRequestOption:[32],isAvailable:[64],setPaymentMethodEventHandler:[64],setPaymentRequestShippingOptionEventHandler:[64],setPaymentRequestShippingAddressEventHandler:[64],setPaymentRequestOption:[64],initStripe:[64]}]]],["stripe-payment_2",[[0,"stripe-payment",{intentType:[1,"intent-type"],zip:[4],sheetTitle:[1,"sheet-title"],buttonLabel:[1,"button-label"],publishableKey:[1,"publishable-key"],stripeAccount:[1,"stripe-account"],applicationName:[1,"application-name"],showLabel:[4,"show-label"],intentClientSecret:[1,"intent-client-secret"],shouldUseDefaultFormSubmitAction:[4,"should-use-default-form-submit-action"],showPaymentRequestButton:[4,"show-payment-request-button"],handleSubmit:[1040],stripeDidLoaded:[1040],loadStripeStatus:[32],stripe:[32],progress:[32],errorMessage:[32],zipCode:[32],paymentRequestOption:[32],initStripe:[64],updateProgress:[64],setErrorMessage:[64],setPaymentRequestOption:[64]}],[1,"stripe-sheet",{showCloseButton:[4,"show-close-button"],open:[4],toggleModal:[64],openModal:[64],closeModal:[64]}]]],["stripe-payment-sheet",[[0,"stripe-payment-sheet",{publishableKey:[1,"publishable-key"],stripeAccount:[1,"stripe-account"],applicationName:[1,"application-name"],showLabel:[4,"show-label"],sheetTitle:[1,"sheet-title"],buttonLabel:[1,"button-label"],intentClientSecret:[1,"intent-client-secret"],shouldUseDefaultFormSubmitAction:[4,"should-use-default-form-submit-action"],intentType:[1,"intent-type"],handleSubmit:[1040],stripeDidLoaded:[1040],showCloseButton:[4,"show-close-button"],zip:[4],open:[4],getStripePaymentSheetElement:[64],present:[64],updateProgress:[64],destroy:[64],setPaymentRequestButton:[64]}]]]],e)),_H=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g");class __{constructor(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}static parse(e){const t=[],r=(m,_)=>{_.notSelectors.length>0&&!_.element&&0==_.classNames.length&&0==_.attrs.length&&(_.element="*"),m.push(_)};let o,i=new __,a=i,d=!1;for(_H.lastIndex=0;o=_H.exec(e);){if(o[1]){if(d)throw new Error("Nesting :not in a selector is not allowed");d=!0,a=new __,i.notSelectors.push(a)}const m=o[2];if(m){const C=o[3];"#"===C?a.addAttribute("id",m.slice(1)):"."===C?a.addClassName(m.slice(1)):a.setElement(m)}const _=o[4];if(_&&a.addAttribute(a.unescapeAttribute(_),o[6]),o[7]&&(d=!1,a=i),o[8]){if(d)throw new Error("Multiple selectors in :not are not supported");r(t,i),i=a=new __}}return r(t,i),t}unescapeAttribute(e){let t="",r=!1;for(let i=0;i<e.length;i++){const o=e.charAt(i);if("\\"!==o){if("$"===o&&!r)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);r=!1,t+=o}else r=!0}return t}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){const e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){const r=this.escapeAttribute(this.attrs[t]),i=this.attrs[t+1];e+=`[${r}${i?"="+i:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}}var Kf=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Kf||{}),zE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zE||{});const VL_name="custom-elements",UL_name="no-errors-schema";var Ma=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ma||{});function mbe(n){const e=function fbe(n){const e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return[n.element&&"*"!==n.element?n.element:"",...n.attrs,...e]}(n),t=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(r=>function pbe(n){const e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return n.element?[5,n.element,...n.attrs,...e]:n.attrs.length?[3,...n.attrs,...e]:n.classNames&&n.classNames.length?[9,...n.classNames]:[]}(r)):[];return e.concat(...t)}function IA(n){return n?__.parse(n).map(mbe):[]}class $b{static zero(){return new $b([0])}static one(){return new $b([1])}constructor(e){this.digits=e}clone(){return new $b(this.digits.slice())}add(e){const t=this.clone();return t.addToSelf(e),t}addToSelf(e){const t=Math.max(this.digits.length,e.digits.length);let r=0;for(let i=0;i<t;i++){let o=r;i<this.digits.length&&(o+=this.digits[i]),i<e.digits.length&&(o+=e.digits[i]),o>=10?(this.digits[i]=o-10,r=1):(this.digits[i]=o,r=0)}r>0&&(this.digits[t]=1)}toString(){let e="";for(let t=this.digits.length-1;t>=0;t--)e+=this.digits[t];return e}}class yH{constructor(e){this.powerOfTwos=[e]}getValue(){return this.powerOfTwos[0]}multiplyBy(e){const t=$b.zero();return this.multiplyByAndAddTo(e,t),t}multiplyByAndAddTo(e,t){for(let r=0;0!==e;e>>>=1,r++)if(1&e){const i=this.getMultipliedByPowerOfTwo(r);t.addToSelf(i)}}getMultipliedByPowerOfTwo(e){for(let t=this.powerOfTwos.length;t<=e;t++){const r=this.powerOfTwos[t-1];this.powerOfTwos[t]=r.add(r)}return this.powerOfTwos[e]}}let TA;function xH(n){const e=new vbe;return CH(n.nodes.map(r=>r.visit(e,null)).join(""),n.meaning)}class wH{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(r=>r.visit(this)).join(", ")}]`}visitIcu(e,t){const r=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expression}, ${e.type}, ${r.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}}const _be=new wH;class vbe extends wH{visitIcu(e,t){let r=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.type}, ${r.join(", ")}}`}}function $E(n){return(n>>>0).toString(16).padStart(8,"0")}function xbe(n,e,t,r){return n<20?[e&t|~e&r,1518500249]:n<40?[e^t^r,1859775393]:n<60?[e&t|e&r|t&r,2400959708]:[e^t^r,3395469782]}function EH(n){TA??=new TextEncoder;const e=TA.encode(n),t=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=SH(t,e.length,0),i=SH(t,e.length,102072);return 0==r&&(0==i||1==i)&&(r^=319790063,i^=-1801410264),[r,i]}function CH(n,e=""){let t=EH(n);if(e){const o=EH(e);t=function wbe(n,e){const t=n[0],i=e[0],a=TH(n[1],e[1]),d=a[0],m=a[1];return[y_(y_(t,i),d),m]}(function Ebe(n,e){const t=n[0],r=n[1];return[t<<e|r>>>32-e,r<<e|t>>>32-e]}(t,1),o)}return function Ibe(n,e){const t=AH.toThePowerOf(0).multiplyBy(e);return AH.toThePowerOf(4).multiplyByAndAddTo(n,t),t.toString()}(2147483647&t[0],t[1])}function SH(n,e,t){let r=2654435769,i=2654435769,o=0;const a=e-12;for(;o<=a;o+=12){r+=n.getUint32(o,!0),i+=n.getUint32(o+4,!0);const m=IH(r,i,t+=n.getUint32(o+8,!0));r=m[0],i=m[1],t=m[2]}const d=e-o;return t+=e,d>=4?(r+=n.getUint32(o,!0),o+=4,d>=8?(i+=n.getUint32(o,!0),o+=4,d>=9&&(t+=n.getUint8(o++)<<8),d>=10&&(t+=n.getUint8(o++)<<16),11===d&&(t+=n.getUint8(o++)<<24)):(d>=5&&(i+=n.getUint8(o++)),d>=6&&(i+=n.getUint8(o++)<<8),7===d&&(i+=n.getUint8(o++)<<16))):(d>=1&&(r+=n.getUint8(o++)),d>=2&&(r+=n.getUint8(o++)<<8),3===d&&(r+=n.getUint8(o++)<<16)),IH(r,i,t)[2]}function IH(n,e,t){return n-=e,n-=t,e-=t,e-=n^=t>>>13,t-=n,t-=e^=n<<8,n-=e,n-=t^=e>>>13,e-=t,e-=n^=t>>>12,t-=n,t-=e^=n<<16,n-=e,n-=t^=e>>>5,e-=t,e-=n^=t>>>3,t-=n,t-=e^=n<<10,[n,e,t^=e>>>15]}var GL=function(n){return n[n.Little=0]="Little",n[n.Big=1]="Big",n}(GL||{});function y_(n,e){return TH(n,e)[1]}function TH(n,e){const t=(65535&n)+(65535&e),r=(n>>>16)+(e>>>16)+(t>>>16);return[r>>>16,r<<16|65535&t]}function HL(n,e){return n<<e|n>>>32-e}function DH(n,e){return e>=n.length?0:n[e]}function Sbe(n,e,t){let r=0;if(t===GL.Big)for(let i=0;i<4;i++)r+=DH(n,e+i)<<24-8*i;else for(let i=0;i<4;i++)r+=DH(n,e+i)<<8*i;return r}const AH=new class gbe{constructor(e){this.base=e,this.exponents=[new yH($b.one())]}toThePowerOf(e){for(let t=this.exponents.length;t<=e;t++){const r=this.exponents[t-1].multiplyBy(this.base);this.exponents[t]=new yH(r)}return this.exponents[e]}}(256);var qL=function(n){return n[n.None=0]="None",n[n.Const=1]="Const",n}(qL||{});class Vb{constructor(e=qL.None){this.modifiers=e}hasModifier(e){return 0!=(this.modifiers&e)}}var Kp=function(n){return n[n.Dynamic=0]="Dynamic",n[n.Bool=1]="Bool",n[n.String=2]="String",n[n.Int=3]="Int",n[n.Number=4]="Number",n[n.Function=5]="Function",n[n.Inferred=6]="Inferred",n[n.None=7]="None",n}(Kp||{});class eg extends Vb{constructor(e,t){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}}class Qf extends Vb{constructor(e,t,r=null){super(t),this.value=e,this.typeParams=r}visitType(e,t){return e.visitExpressionType(this,t)}}const v_=new eg(Kp.Dynamic),ah=new eg(Kp.Inferred),PH=new eg(Kp.Bool),Ub=(new eg(Kp.Int),new eg(Kp.Number)),WL=new eg(Kp.String),Jf=(new eg(Kp.Function),new eg(Kp.None));var jb=function(n){return n[n.Minus=0]="Minus",n[n.Plus=1]="Plus",n}(jb||{}),Jr=function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n[n.Identical=2]="Identical",n[n.NotIdentical=3]="NotIdentical",n[n.Minus=4]="Minus",n[n.Plus=5]="Plus",n[n.Divide=6]="Divide",n[n.Multiply=7]="Multiply",n[n.Modulo=8]="Modulo",n[n.And=9]="And",n[n.Or=10]="Or",n[n.BitwiseAnd=11]="BitwiseAnd",n[n.Lower=12]="Lower",n[n.LowerEquals=13]="LowerEquals",n[n.Bigger=14]="Bigger",n[n.BiggerEquals=15]="BiggerEquals",n[n.NullishCoalesce=16]="NullishCoalesce",n}(Jr||{});function RH(n,e,t){const r=n.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function kd(n,e){return RH(n,e,(t,r)=>t.isEquivalent(r))}class Za{constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new Rd(this,e,null,t)}key(e,t,r){return new em(this,e,t,r)}callFn(e,t,r){return new lh(this,e,null,t,r)}instantiate(e,t,r){return new iv(this,e,t,r)}conditional(e,t=null,r){return new Jp(this,e,t,null,r)}equals(e,t){return new Os(Jr.Equals,this,e,null,t)}notEquals(e,t){return new Os(Jr.NotEquals,this,e,null,t)}identical(e,t){return new Os(Jr.Identical,this,e,null,t)}notIdentical(e,t){return new Os(Jr.NotIdentical,this,e,null,t)}minus(e,t){return new Os(Jr.Minus,this,e,null,t)}plus(e,t){return new Os(Jr.Plus,this,e,null,t)}divide(e,t){return new Os(Jr.Divide,this,e,null,t)}multiply(e,t){return new Os(Jr.Multiply,this,e,null,t)}modulo(e,t){return new Os(Jr.Modulo,this,e,null,t)}and(e,t){return new Os(Jr.And,this,e,null,t)}bitwiseAnd(e,t,r=!0){return new Os(Jr.BitwiseAnd,this,e,null,t,r)}or(e,t){return new Os(Jr.Or,this,e,null,t)}lower(e,t){return new Os(Jr.Lower,this,e,null,t)}lowerEquals(e,t){return new Os(Jr.LowerEquals,this,e,null,t)}bigger(e,t){return new Os(Jr.Bigger,this,e,null,t)}biggerEquals(e,t){return new Os(Jr.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(qb,e)}nullishCoalesce(e,t){return new Os(Jr.NullishCoalesce,this,e,null,t)}toStmt(){return new nd(this,null)}}class Qp extends Za{constructor(e,t,r){super(t,r),this.name=e}isEquivalent(e){return e instanceof Qp&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}clone(){return new Qp(this.name,this.type,this.sourceSpan)}set(e){return new VE(this.name,e,null,this.sourceSpan)}}class tv extends Za{constructor(e,t,r){super(t,r),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof tv&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new tv(this.expr.clone())}}class zo extends Za{constructor(e,t,r){super(t,r),this.node=e}isEquivalent(e){return e instanceof zo&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}clone(){return new zo(this.node,this.type,this.sourceSpan)}}class VE extends Za{constructor(e,t,r,i){super(r||t.type,i),this.name=e,this.value=t}isEquivalent(e){return e instanceof VE&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteVarExpr(this,t)}clone(){return new VE(this.name,this.value.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new Ld(this.name,this.value,e,t,this.sourceSpan)}toConstDecl(){return this.toDeclStmt(ah,td.Final)}}class nv extends Za{constructor(e,t,r,i,o){super(i||r.type,o),this.receiver=e,this.index=t,this.value=r}isEquivalent(e){return e instanceof nv&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteKeyExpr(this,t)}clone(){return new nv(this.receiver.clone(),this.index.clone(),this.value.clone(),this.type,this.sourceSpan)}}class rv extends Za{constructor(e,t,r,i,o){super(i||r.type,o),this.receiver=e,this.name=t,this.value=r}isEquivalent(e){return e instanceof rv&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWritePropExpr(this,t)}clone(){return new rv(this.receiver.clone(),this.name,this.value.clone(),this.type,this.sourceSpan)}}class lh extends Za{constructor(e,t,r,i,o=!1){super(r,i),this.fn=e,this.args=t,this.pure=o}get receiver(){return this.fn}isEquivalent(e){return e instanceof lh&&this.fn.isEquivalent(e.fn)&&kd(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}clone(){return new lh(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}}class UE extends Za{constructor(e,t,r,i){super(r,i),this.tag=e,this.template=t}isEquivalent(e){return e instanceof UE&&this.tag.isEquivalent(e.tag)&&RH(this.template.elements,e.template.elements,(t,r)=>t.text===r.text)&&kd(this.template.expressions,e.template.expressions)}isConstant(){return!1}visitExpression(e,t){return e.visitTaggedTemplateExpr(this,t)}clone(){return new UE(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}}class iv extends Za{constructor(e,t,r,i){super(r,i),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof iv&&this.classExpr.isEquivalent(e.classExpr)&&kd(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}clone(){return new iv(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}}class ru extends Za{constructor(e,t,r){super(t,r),this.value=e}isEquivalent(e){return e instanceof ru&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}clone(){return new ru(this.value,this.type,this.sourceSpan)}}class jE{constructor(e,t){this.elements=e,this.expressions=t}clone(){return new jE(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}}class GE{constructor(e,t,r){this.text=e,this.sourceSpan=t,this.rawText=r??t?.toString()??XL(AA(e))}clone(){return new GE(this.text,this.sourceSpan,this.rawText)}}class Gb{constructor(e,t){this.text=e,this.sourceSpan=t}}class HE{constructor(e,t,r){this.text=e,this.sourceSpan=t,this.associatedMessage=r}}class DA extends Za{constructor(e,t,r,i,o){super(WL,o),this.metaBlock=e,this.messageParts=t,this.placeHolderNames=r,this.expressions=i}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,t){return e.visitLocalizedString(this,t)}clone(){return new DA(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}|${e}`),this.metaBlock.customId&&(e=`${e}@@${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(t=>{e=`${e}\u241f${t}`}),LH(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){const t=this.placeHolderNames[e-1],r=this.messageParts[e];let i=t.text;return 0===t.associatedMessage?.legacyIds.length&&(i+=`@@${CH(t.associatedMessage.messageString,t.associatedMessage.meaning)}`),LH(i,r.text,this.getMessagePartSourceSpan(e))}}const AA=n=>n.replace(/\\/g,"\\\\"),Rbe=n=>n.replace(/^:/,"\\:"),Obe=n=>n.replace(/:/g,"\\:"),XL=n=>n.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function LH(n,e,t){return""===n?{cooked:e,raw:XL(Rbe(AA(e))),range:t}:{cooked:`:${n}:${e}`,raw:XL(`:${Obe(AA(n))}:${AA(e)}`),range:t}}class tg extends Za{constructor(e,t,r=null,i){super(t,i),this.value=e,this.typeParams=r}isEquivalent(e){return e instanceof tg&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}clone(){return new tg(this.value,this.type,this.typeParams,this.sourceSpan)}}class Jp extends Za{constructor(e,t,r=null,i,o){super(i||t.type,o),this.condition=e,this.falseCase=r,this.trueCase=t}isEquivalent(e){return e instanceof Jp&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&function kH(n,e){return null==n||null==e?n==e:n.isEquivalent(e)}(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}clone(){return new Jp(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}}class qE extends Za{constructor(e,t){super(null,t),this.url=e}isEquivalent(e){return e instanceof qE&&this.url===e.url}isConstant(){return!1}visitExpression(e,t){return e.visitDynamicImportExpr(this,t)}clone(){return new qE(this.url,this.sourceSpan)}}class Hb extends Za{constructor(e,t){super(PH,t),this.condition=e}isEquivalent(e){return e instanceof Hb&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}clone(){return new Hb(this.condition.clone(),this.sourceSpan)}}class jl{constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}clone(){return new jl(this.name,this.type)}}class b_ extends Za{constructor(e,t,r,i,o){super(r,i),this.params=e,this.statements=t,this.name=o}isEquivalent(e){return e instanceof b_&&kd(this.params,e.params)&&kd(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t){return new WE(e,this.params,this.statements,this.type,t,this.sourceSpan)}clone(){return new b_(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}}class ov extends Za{constructor(e,t,r,i,o=!0){super(r||Ub,i),this.operator=e,this.expr=t,this.parens=o}isEquivalent(e){return e instanceof ov&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,t){return e.visitUnaryOperatorExpr(this,t)}clone(){return new ov(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}}class Os extends Za{constructor(e,t,r,i,o,a=!0){super(i||t.type,o),this.operator=e,this.rhs=r,this.parens=a,this.lhs=t}isEquivalent(e){return e instanceof Os&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}clone(){return new Os(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan,this.parens)}}class Rd extends Za{constructor(e,t,r,i){super(r,i),this.receiver=e,this.name=t}get index(){return this.name}isEquivalent(e){return e instanceof Rd&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new rv(this.receiver,this.name,e,null,this.sourceSpan)}clone(){return new Rd(this.receiver.clone(),this.name,this.type,this.sourceSpan)}}class em extends Za{constructor(e,t,r,i){super(r,i),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof em&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new nv(this.receiver,this.index,e,null,this.sourceSpan)}clone(){return new em(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}}class Od extends Za{constructor(e,t,r){super(t,r),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof Od&&kd(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}clone(){return new Od(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}}class sv{constructor(e,t,r){this.key=e,this.value=t,this.quoted=r}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new sv(this.key,this.value.clone(),this.quoted)}}class pf extends Za{constructor(e,t,r){super(t,r),this.entries=e,this.valueType=null,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof pf&&kd(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}clone(){const e=this.entries.map(t=>t.clone());return new pf(e,this.type,this.sourceSpan)}}const av=new ru(null,null,null),qb=new ru(null,ah,null);var td=function(n){return n[n.None=0]="None",n[n.Final=1]="Final",n[n.Private=2]="Private",n[n.Exported=4]="Exported",n[n.Static=8]="Static",n}(td||{});class ZL{constructor(e,t,r){this.text=e,this.multiline=t,this.trailingNewline=r}toString(){return this.multiline?` ${this.text} `:this.text}}class YL extends ZL{constructor(e){super("",!0,!0),this.tags=e}toString(){return function Vbe(n){if(0===n.length)return"";if(1===n.length&&n[0].tagName&&!n[0].text)return`*${zH(n[0])} `;let e="*\n";for(const t of n)e+=" *",e+=zH(t).replace(/\n/g,"\n * "),e+="\n";return e+=" ",e}(this.tags)}}class Wb{constructor(e=td.None,t=null,r){this.modifiers=e,this.sourceSpan=t,this.leadingComments=r}hasModifier(e){return 0!=(this.modifiers&e)}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}}class Ld extends Wb{constructor(e,t,r,i,o,a){super(i,o,a),this.name=e,this.value=t,this.type=r||t&&t.type||null}isEquivalent(e){return e instanceof Ld&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}}class WE extends Wb{constructor(e,t,r,i,o,a,d){super(o,a,d),this.name=e,this.params=t,this.statements=r,this.type=i||null}isEquivalent(e){return e instanceof WE&&kd(this.params,e.params)&&kd(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}}class nd extends Wb{constructor(e,t,r){super(td.None,t,r),this.expr=e}isEquivalent(e){return e instanceof nd&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}}class pl extends Wb{constructor(e,t=null,r){super(td.None,t,r),this.value=e}isEquivalent(e){return e instanceof pl&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}}class PA extends Wb{constructor(e,t,r=[],i,o){super(td.None,i,o),this.condition=e,this.trueCase=t,this.falseCase=r}isEquivalent(e){return e instanceof PA&&this.condition.isEquivalent(e.condition)&&kd(this.trueCase,e.trueCase)&&kd(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}}function go(n,e,t){return new Qp(n,e,t)}function Br(n,e=null,t){return new tg(n,null,e,t)}function iu(n,e,t){return new Qf(n,e,t)}function XE(n){return new tv(n)}function ho(n,e,t){return new Od(n,e,t)}function Bc(n,e=null){return new pf(n.map(t=>new sv(t.key,t.value,t.quoted)),e,null)}function nc(n,e,t,r,i){return new b_(n,e,t,r,i)}function ZE(n,e,t,r,i){return new PA(n,e,t,r,i)}function KL(n,e,t,r){return new UE(n,e,t,r)}function Yt(n,e,t){return new ru(n,e,t)}function QL(n){return n instanceof ru&&null===n.value}function zH(n){let e="";if(n.tagName&&(e+=` @${n.tagName}`),n.text){if(n.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+n.text.replace(/@/g,"\\@")}return e}const $H=go("<unknown>"),jbe={};class kA extends Za{constructor(e){super(e.type),this.resolved=e,this.shared=!1,this.original=e}visitExpression(e,t){return t===jbe?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof kA&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}}class VH{constructor(e=!1){this.isClosureCompilerEnabled=e,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.sharedConstants=new Map,this.nextNameIndex=0}getConstLiteral(e,t){if(e instanceof ru&&!UH(e)||e instanceof kA)return e;const r=Xb.INSTANCE.keyOf(e);let i=this.literals.get(r),o=!1;if(i||(i=new kA(e),this.literals.set(r,i),o=!0),!o&&!i.shared||o&&t){const a=this.freshName();let d,m;this.isClosureCompilerEnabled&&UH(e)?(d=go(a).set(new b_([],[new pl(e)])),m=go(a).callFn([])):(d=go(a).set(e),m=go(a)),this.statements.push(d.toDeclStmt(ah,td.Final)),i.fixup(m)}return i}getSharedConstant(e,t){const r=e.keyOf(t);if(!this.sharedConstants.has(r)){const i=this.freshName();this.sharedConstants.set(r,go(i)),this.statements.push(e.toSharedConstantDeclaration(i,t))}return this.sharedConstants.get(r)}getLiteralFactory(e){if(e instanceof Od){const t=e.entries.map(i=>i.isConstant()?i:$H),r=Xb.INSTANCE.keyOf(ho(t));return this._getLiteralFactory(r,e.entries,i=>ho(i))}{const t=Bc(e.entries.map(i=>({key:i.key,value:i.value.isConstant()?i.value:$H,quoted:i.quoted}))),r=Xb.INSTANCE.keyOf(t);return this._getLiteralFactory(r,e.entries.map(i=>i.value),i=>Bc(i.map((o,a)=>({key:e.entries[a].key,value:o,quoted:e.entries[a].quoted}))))}}_getLiteralFactory(e,t,r){let i=this.literalFactories.get(e);const o=t.filter(a=>!a.isConstant());if(!i){const a=t.map((C,T)=>C.isConstant()?this.getConstLiteral(C,!0):go(`a${T}`)),m=nc(a.filter(Hbe).map(C=>new jl(C.name,v_)),[new pl(r(a))],ah),_=this.freshName();this.statements.push(go(_).set(m).toDeclStmt(ah,td.Final)),i=go(_),this.literalFactories.set(e,i)}return{literalFactory:i,literalFactoryArguments:o}}uniqueName(e){return`${e}${this.nextNameIndex++}`}freshName(){return this.uniqueName("_c")}}class Xb{static#e=this.INSTANCE=new Xb;keyOf(e){if(e instanceof ru&&"string"==typeof e.value)return`"${e.value}"`;if(e instanceof ru)return String(e.value);if(e instanceof Od){const t=[];for(const r of e.entries)t.push(this.keyOf(r));return`[${t.join(",")}]`}if(e instanceof pf){const t=[];for(const r of e.entries){let i=r.key;r.quoted&&(i=`"${i}"`),t.push(i+":"+this.keyOf(r.value))}return`{${t.join(",")}}`}if(e instanceof tg)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof Qp)return`read(${e.name})`;if(e instanceof tv)return`typeof(${this.keyOf(e.expr)})`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}function Hbe(n){return n instanceof Qp}function UH(n){return n instanceof ru&&"string"==typeof n.value&&n.value.length>=50}const xn="@angular/core";let ze=(()=>{class n{static#e=this.NEW_METHOD="factory";static#t=this.TRANSFORM_METHOD="transform";static#n=this.PATCH_DEPS="patchedDeps";static#r=this.core={name:null,moduleName:xn};static#i=this.namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:xn};static#o=this.namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:xn};static#s=this.namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:xn};static#a=this.element={name:"\u0275\u0275element",moduleName:xn};static#l=this.elementStart={name:"\u0275\u0275elementStart",moduleName:xn};static#c=this.elementEnd={name:"\u0275\u0275elementEnd",moduleName:xn};static#u=this.advance={name:"\u0275\u0275advance",moduleName:xn};static#h=this.syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:xn};static#d=this.syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:xn};static#f=this.attribute={name:"\u0275\u0275attribute",moduleName:xn};static#p=this.attributeInterpolate1={name:"\u0275\u0275attributeInterpolate1",moduleName:xn};static#m=this.attributeInterpolate2={name:"\u0275\u0275attributeInterpolate2",moduleName:xn};static#g=this.attributeInterpolate3={name:"\u0275\u0275attributeInterpolate3",moduleName:xn};static#_=this.attributeInterpolate4={name:"\u0275\u0275attributeInterpolate4",moduleName:xn};static#y=this.attributeInterpolate5={name:"\u0275\u0275attributeInterpolate5",moduleName:xn};static#v=this.attributeInterpolate6={name:"\u0275\u0275attributeInterpolate6",moduleName:xn};static#b=this.attributeInterpolate7={name:"\u0275\u0275attributeInterpolate7",moduleName:xn};static#x=this.attributeInterpolate8={name:"\u0275\u0275attributeInterpolate8",moduleName:xn};static#w=this.attributeInterpolateV={name:"\u0275\u0275attributeInterpolateV",moduleName:xn};static#E=this.classProp={name:"\u0275\u0275classProp",moduleName:xn};static#C=this.elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:xn};static#S=this.elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:xn};static#I=this.elementContainer={name:"\u0275\u0275elementContainer",moduleName:xn};static#T=this.styleMap={name:"\u0275\u0275styleMap",moduleName:xn};static#D=this.styleMapInterpolate1={name:"\u0275\u0275styleMapInterpolate1",moduleName:xn};static#A=this.styleMapInterpolate2={name:"\u0275\u0275styleMapInterpolate2",moduleName:xn};static#M=this.styleMapInterpolate3={name:"\u0275\u0275styleMapInterpolate3",moduleName:xn};static#P=this.styleMapInterpolate4={name:"\u0275\u0275styleMapInterpolate4",moduleName:xn};static#k=this.styleMapInterpolate5={name:"\u0275\u0275styleMapInterpolate5",moduleName:xn};static#R=this.styleMapInterpolate6={name:"\u0275\u0275styleMapInterpolate6",moduleName:xn};static#O=this.styleMapInterpolate7={name:"\u0275\u0275styleMapInterpolate7",moduleName:xn};static#L=this.styleMapInterpolate8={name:"\u0275\u0275styleMapInterpolate8",moduleName:xn};static#N=this.styleMapInterpolateV={name:"\u0275\u0275styleMapInterpolateV",moduleName:xn};static#F=this.classMap={name:"\u0275\u0275classMap",moduleName:xn};static#B=this.classMapInterpolate1={name:"\u0275\u0275classMapInterpolate1",moduleName:xn};static#z=this.classMapInterpolate2={name:"\u0275\u0275classMapInterpolate2",moduleName:xn};static#$=this.classMapInterpolate3={name:"\u0275\u0275classMapInterpolate3",moduleName:xn};static#V=this.classMapInterpolate4={name:"\u0275\u0275classMapInterpolate4",moduleName:xn};static#U=this.classMapInterpolate5={name:"\u0275\u0275classMapInterpolate5",moduleName:xn};static#j=this.classMapInterpolate6={name:"\u0275\u0275classMapInterpolate6",moduleName:xn};static#G=this.classMapInterpolate7={name:"\u0275\u0275classMapInterpolate7",moduleName:xn};static#H=this.classMapInterpolate8={name:"\u0275\u0275classMapInterpolate8",moduleName:xn};static#q=this.classMapInterpolateV={name:"\u0275\u0275classMapInterpolateV",moduleName:xn};static#W=this.styleProp={name:"\u0275\u0275styleProp",moduleName:xn};static#X=this.stylePropInterpolate1={name:"\u0275\u0275stylePropInterpolate1",moduleName:xn};static#Z=this.stylePropInterpolate2={name:"\u0275\u0275stylePropInterpolate2",moduleName:xn};static#Y=this.stylePropInterpolate3={name:"\u0275\u0275stylePropInterpolate3",moduleName:xn};static#K=this.stylePropInterpolate4={name:"\u0275\u0275stylePropInterpolate4",moduleName:xn};static#Q=this.stylePropInterpolate5={name:"\u0275\u0275stylePropInterpolate5",moduleName:xn};static#J=this.stylePropInterpolate6={name:"\u0275\u0275stylePropInterpolate6",moduleName:xn};static#ee=this.stylePropInterpolate7={name:"\u0275\u0275stylePropInterpolate7",moduleName:xn};static#te=this.stylePropInterpolate8={name:"\u0275\u0275stylePropInterpolate8",moduleName:xn};static#ne=this.stylePropInterpolateV={name:"\u0275\u0275stylePropInterpolateV",moduleName:xn};static#re=this.nextContext={name:"\u0275\u0275nextContext",moduleName:xn};static#ie=this.resetView={name:"\u0275\u0275resetView",moduleName:xn};static#oe=this.templateCreate={name:"\u0275\u0275template",moduleName:xn};static#se=this.defer={name:"\u0275\u0275defer",moduleName:xn};static#ae=this.text={name:"\u0275\u0275text",moduleName:xn};static#le=this.enableBindings={name:"\u0275\u0275enableBindings",moduleName:xn};static#ce=this.disableBindings={name:"\u0275\u0275disableBindings",moduleName:xn};static#ue=this.getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:xn};static#he=this.textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:xn};static#de=this.textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:xn};static#fe=this.textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:xn};static#pe=this.textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:xn};static#me=this.textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:xn};static#ge=this.textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:xn};static#_e=this.textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:xn};static#ye=this.textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:xn};static#ve=this.textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:xn};static#be=this.textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:xn};static#xe=this.restoreView={name:"\u0275\u0275restoreView",moduleName:xn};static#we=this.pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:xn};static#Ee=this.pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:xn};static#Ce=this.pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:xn};static#Se=this.pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:xn};static#Ie=this.pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:xn};static#Te=this.pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:xn};static#De=this.pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:xn};static#Ae=this.pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:xn};static#Me=this.pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:xn};static#Pe=this.pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:xn};static#ke=this.pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:xn};static#Re=this.pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:xn};static#Oe=this.pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:xn};static#Le=this.pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:xn};static#Ne=this.pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:xn};static#Fe=this.hostProperty={name:"\u0275\u0275hostProperty",moduleName:xn};static#Be=this.property={name:"\u0275\u0275property",moduleName:xn};static#ze=this.propertyInterpolate={name:"\u0275\u0275propertyInterpolate",moduleName:xn};static#$e=this.propertyInterpolate1={name:"\u0275\u0275propertyInterpolate1",moduleName:xn};static#Ve=this.propertyInterpolate2={name:"\u0275\u0275propertyInterpolate2",moduleName:xn};static#Ue=this.propertyInterpolate3={name:"\u0275\u0275propertyInterpolate3",moduleName:xn};static#je=this.propertyInterpolate4={name:"\u0275\u0275propertyInterpolate4",moduleName:xn};static#Ge=this.propertyInterpolate5={name:"\u0275\u0275propertyInterpolate5",moduleName:xn};static#He=this.propertyInterpolate6={name:"\u0275\u0275propertyInterpolate6",moduleName:xn};static#qe=this.propertyInterpolate7={name:"\u0275\u0275propertyInterpolate7",moduleName:xn};static#We=this.propertyInterpolate8={name:"\u0275\u0275propertyInterpolate8",moduleName:xn};static#Xe=this.propertyInterpolateV={name:"\u0275\u0275propertyInterpolateV",moduleName:xn};static#Ze=this.i18n={name:"\u0275\u0275i18n",moduleName:xn};static#Ye=this.i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:xn};static#Ke=this.i18nExp={name:"\u0275\u0275i18nExp",moduleName:xn};static#Qe=this.i18nStart={name:"\u0275\u0275i18nStart",moduleName:xn};static#Je=this.i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:xn};static#et=this.i18nApply={name:"\u0275\u0275i18nApply",moduleName:xn};static#tt=this.i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:xn};static#nt=this.pipe={name:"\u0275\u0275pipe",moduleName:xn};static#rt=this.projection={name:"\u0275\u0275projection",moduleName:xn};static#it=this.projectionDef={name:"\u0275\u0275projectionDef",moduleName:xn};static#ot=this.reference={name:"\u0275\u0275reference",moduleName:xn};static#st=this.inject={name:"\u0275\u0275inject",moduleName:xn};static#at=this.injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:xn};static#lt=this.directiveInject={name:"\u0275\u0275directiveInject",moduleName:xn};static#ct=this.invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:xn};static#ut=this.invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:xn};static#ht=this.templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:xn};static#dt=this.forwardRef={name:"forwardRef",moduleName:xn};static#ft=this.resolveForwardRef={name:"resolveForwardRef",moduleName:xn};static#pt=this.\u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:xn};static#mt=this.declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:xn};static#gt=this.InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:xn};static#_t=this.resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:xn};static#yt=this.resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:xn};static#vt=this.resolveBody={name:"\u0275\u0275resolveBody",moduleName:xn};static#bt=this.defineComponent={name:"\u0275\u0275defineComponent",moduleName:xn};static#xt=this.declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:xn};static#wt=this.setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:xn};static#Et=this.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:xn};static#Ct=this.ViewEncapsulation={name:"ViewEncapsulation",moduleName:xn};static#St=this.ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:xn};static#It=this.FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:xn};static#Tt=this.declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:xn};static#Dt=this.FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:xn};static#At=this.defineDirective={name:"\u0275\u0275defineDirective",moduleName:xn};static#Mt=this.declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:xn};static#Pt=this.DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:xn};static#kt=this.InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:xn};static#Rt=this.InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:xn};static#Ot=this.defineInjector={name:"\u0275\u0275defineInjector",moduleName:xn};static#Lt=this.declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:xn};static#Nt=this.NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:xn};static#Ft=this.ModuleWithProviders={name:"ModuleWithProviders",moduleName:xn};static#Bt=this.defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:xn};static#zt=this.declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:xn};static#$t=this.setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:xn};static#Vt=this.registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:xn};static#Ut=this.PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:xn};static#jt=this.definePipe={name:"\u0275\u0275definePipe",moduleName:xn};static#Gt=this.declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:xn};static#Ht=this.declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:xn};static#qt=this.setClassMetadata={name:"\u0275setClassMetadata",moduleName:xn};static#Wt=this.queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:xn};static#Xt=this.viewQuery={name:"\u0275\u0275viewQuery",moduleName:xn};static#Zt=this.loadQuery={name:"\u0275\u0275loadQuery",moduleName:xn};static#Yt=this.contentQuery={name:"\u0275\u0275contentQuery",moduleName:xn};static#Kt=this.NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:xn};static#Qt=this.InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:xn};static#Jt=this.CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:xn};static#en=this.StandaloneFeature={name:"\u0275\u0275StandaloneFeature",moduleName:xn};static#tn=this.ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:xn};static#nn=this.HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:xn};static#rn=this.InputTransformsFeatureFeature={name:"\u0275\u0275InputTransformsFeature",moduleName:xn};static#in=this.listener={name:"\u0275\u0275listener",moduleName:xn};static#on=this.getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:xn};static#sn=this.sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:xn};static#an=this.sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:xn};static#ln=this.sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:xn};static#cn=this.sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:xn};static#un=this.sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:xn};static#hn=this.sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:xn};static#dn=this.trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:xn};static#fn=this.trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:xn};static#pn=this.validateIframeAttribute={name:"\u0275\u0275validateIframeAttribute",moduleName:xn}}return n})();const qbe=/-+([a-z0-9])/g;function jH(n,e,t){const r=n.indexOf(e);return-1==r?t:[n.slice(0,r).trim(),n.slice(r+1).trim()]}function RA(n){throw new Error(`Internal Error: ${n}`)}function GH(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(GH).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;if(!n.toString)return"object";const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}const Zb=globalThis;class nxe{constructor(e=null){this.file=e,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,r,i){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==r||null==i))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:r,sourceCol0:i}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;const e=new Map,t=[],r=[];Array.from(this.sourcesContent.keys()).forEach((_,C)=>{e.set(_,C),t.push(_),r.push(this.sourcesContent.get(_)||null)});let i="",o=0,a=0,d=0,m=0;return this.lines.forEach(_=>{o=0,i+=_.map(C=>{let T=OA(C.col0-o);return o=C.col0,null!=C.sourceUrl&&(T+=OA(e.get(C.sourceUrl)-a),a=e.get(C.sourceUrl),T+=OA(C.sourceLine0-d),d=C.sourceLine0,T+=OA(C.sourceCol0-m),m=C.sourceCol0),T}).join(","),i+=";"}),i=i.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:t,sourcesContent:r,mappings:i}}toJsComment(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function rxe(n){let e="";const t=function Kbe(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r>=55296&&r<=56319&&n.length>t+1){const i=n.charCodeAt(t+1);i>=56320&&i<=57343&&(t++,r=(r-55296<<10)+i-56320+65536)}r<=127?e.push(r):r<=2047?e.push(r>>6&31|192,63&r|128):r<=65535?e.push(r>>12|224,r>>6&63|128,63&r|128):r<=2097151&&e.push(r>>18&7|240,r>>12&63|128,r>>6&63|128,63&r|128)}return e}(n);for(let r=0;r<t.length;){const i=t[r++],o=r<t.length?t[r++]:null,a=r<t.length?t[r++]:null;e+=YE(i>>2),e+=YE((3&i)<<4|(null===o?0:o>>4)),e+=null===o?"=":YE((15&o)<<2|(null===a?0:a>>6)),e+=null===o||null===a?"=":YE(63&a)}return e}(JSON.stringify(this,null,0)):""}}function OA(n){n=n<0?1+(-n<<1):n<<1;let e="";do{let t=31&n;(n>>=5)>0&&(t|=32),e+=YE(t)}while(n>0);return e}const ixe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function YE(n){if(n<0||n>=64)throw new Error("Can only encode value in the range [0, 63]");return ixe[n]}const oxe=/'|\\|\n|\r|\$/g,sxe=/^[$A-Z_][0-9A-Z_$]*$/i;class HH{constructor(e){this.indent=e,this.partsLength=0,this.parts=[],this.srcSpans=[]}}class eN{static createRoot(){return new eN(0)}constructor(e){this._indent=e,this._lines=[new HH(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return 0===this._currentLine.parts.length}lineLength(){return 2*this._currentLine.indent+this._currentLine.partsLength}print(e,t,r=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),r&&this._lines.push(new HH(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?qH(e.indent)+e.parts.join(""):"").join("\n")}toSourceMapGenerator(e,t=0){const r=new nxe(e);let i=!1;const o=()=>{i||(r.addSource(e," ").addMapping(0,e,0,0),i=!0)};for(let a=0;a<t;a++)r.addLine(),o();return this.sourceLines.forEach((a,d)=>{r.addLine();const m=a.srcSpans,_=a.parts;let C=2*a.indent,T=0;for(;T<m.length&&!m[T];)C+=_[T].length,T++;for(T<m.length&&0===d&&0===C?i=!0:o();T<m.length;){const R=m[T],L=R.start.file,G=R.start.line,W=R.start.col;for(r.addSource(L.url,L.content).addMapping(C,L.url,G,W),C+=_[T].length,T++;T<m.length&&(R===m[T]||!m[T]);)C+=_[T].length,T++}}),r}spanOf(e,t){const r=this._lines[e];if(r){let i=t-qH(r.indent).length;for(let o=0;o<r.parts.length;o++){const a=r.parts[o];if(a.length>i)return r.srcSpans[o];i-=a.length}}return null}get sourceLines(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}class axe{constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,t){if(void 0!==e.leadingComments)for(const r of e.leadingComments)r instanceof YL?t.print(e,`/*${r.toString()}*/`,r.trailingNewline):r.multiline?t.print(e,`/* ${r.text} */`,r.trailingNewline):r.text.split("\n").forEach(i=>{t.println(e,`// ${i}`)})}visitExpressionStmt(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");const r=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!r?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),r&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitWriteVarExpr(e,t){const r=t.lineIsEmpty();return r||t.print(e,"("),t.print(e,`${e.name} = `),e.value.visitExpression(this,t),r||t.print(e,")"),null}visitWriteKeyExpr(e,t){const r=t.lineIsEmpty();return r||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),r||t.print(e,")"),null}visitWritePropExpr(e,t){const r=t.lineIsEmpty();return r||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,`.${e.name} = `),e.value.visitExpression(this,t),r||t.print(e,")"),null}visitInvokeFunctionExpr(e,t){return e.fn.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitTaggedTemplateExpr(e,t){e.tag.visitExpression(this,t),t.print(e,"`"+e.template.elements[0].rawText);for(let r=1;r<e.template.elements.length;r++)t.print(e,"${"),e.template.expressions[r-1].visitExpression(this,t),t.print(e,`}${e.template.elements[r].rawText}`);return t.print(e,"`"),null}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){return t.print(e,e.name),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){const r=e.value;return t.print(e,"string"==typeof r?lv(r,this._escapeDollarInStrings):`${r}`),null}visitLocalizedString(e,t){const r=e.serializeI18nHead();t.print(e,"$localize `"+r.raw);for(let i=1;i<e.messageParts.length;i++)t.print(e,"${"),e.expressions[i-1].visitExpression(this,t),t.print(e,`}${e.serializeI18nTemplatePart(i).raw}`);return t.print(e,"`"),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitDynamicImportExpr(e,t){t.print(e,`import(${e.url})`)}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitUnaryOperatorExpr(e,t){let r;switch(e.operator){case jb.Plus:r="+";break;case jb.Minus:r="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),t.print(e,r),e.expr.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitBinaryOperatorExpr(e,t){let r;switch(e.operator){case Jr.Equals:r="==";break;case Jr.Identical:r="===";break;case Jr.NotEquals:r="!=";break;case Jr.NotIdentical:r="!==";break;case Jr.And:r="&&";break;case Jr.BitwiseAnd:r="&";break;case Jr.Or:r="||";break;case Jr.Plus:r="+";break;case Jr.Minus:r="-";break;case Jr.Divide:r="/";break;case Jr.Multiply:r="*";break;case Jr.Modulo:r="%";break;case Jr.Lower:r="<";break;case Jr.LowerEquals:r="<=";break;case Jr.Bigger:r=">";break;case Jr.BiggerEquals:r=">=";break;case Jr.NullishCoalesce:r="??";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${r} `),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(r=>{t.print(e,`${lv(r.key,this._escapeDollarInStrings,r.quoted)}:`),r.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitAllExpressions(e,t,r){this.visitAllObjects(i=>i.visitExpression(this,t),e,t,r)}visitAllObjects(e,t,r,i){let o=!1;for(let a=0;a<t.length;a++)a>0&&(r.lineLength()>80?(r.print(null,i,!0),o||(r.incIndent(),r.incIndent(),o=!0)):r.print(null,i,!1)),e(t[a]);o&&(r.decIndent(),r.decIndent())}visitAllStatements(e,t){e.forEach(r=>r.visitStatement(this,t))}}function lv(n,e,t=!0){if(null==n)return null;const r=n.replace(oxe,(...o)=>"$"==o[0]?e?"\\$":"$":"\n"==o[0]?"\\n":"\r"==o[0]?"\\r":`\\${o[0]}`);return t||!sxe.test(r)?`'${r}'`:r}function qH(n){let e="";for(let t=0;t<n;t++)e+="  ";return e}function LA(n,e){if(0===e)return iu(n);const t=[];for(let r=0;r<e;r++)t.push(v_);return iu(n,void 0,t)}const WH="@";function XH(n){return`${WH}${n}`}function cxe(n,e){const t=lv(e,!1,!1);return t!==e?`${n}[${t}]`:`${n}.${e}`}function ZH(n,e){return`animation_${n}_${e}`}function wu(n){const e=new zo(n);return{value:e,type:e}}function ep(n,e){const t=ho(n.map(r=>r.value));return e?nc([],[new pl(t)]):t}function tN(n,e){return{expression:n,forwardRef:e}}function Yb({expression:n,forwardRef:e}){switch(e){case 0:case 1:return n;case 2:return function nN(n){return Br(ze.forwardRef).callFn([nc([],[new pl(n)])])}(n)}}var NA=function(n){return n[n.Class=0]="Class",n[n.Function=1]="Function",n}(NA||{}),tm=function(n){return n[n.Directive=0]="Directive",n[n.Component=1]="Component",n[n.Injectable=2]="Injectable",n[n.Pipe=3]="Pipe",n[n.NgModule=4]="NgModule",n}(tm||{});function cv(n){const e=go("t");let t=null;const r=JH(n)?e:new Os(Jr.Or,e,n.type.value);let i=null;null!==n.deps?"invalid"!==n.deps&&(i=new iv(r,QH(n.deps,n.target))):(t=go(`\u0275${n.name}_BaseFactory`),i=t.callFn([r]));const o=[];let a=null;function d(_){const C=go("r");o.push(C.set(av).toDeclStmt());const T=null!==i?C.set(i).toStmt():Br(ze.invalidFactory).callFn([]).toStmt();return o.push(ZE(e,[T],[C.set(_).toStmt()])),C}if(JH(n)){const _=QH(n.delegateDeps,n.target);a=d(new(n.delegateType===NA.Class?iv:lh)(n.delegate,_))}else a=function mxe(n){return void 0!==n.expression}(n)?d(n.expression):i;if(null===a)o.push(Br(ze.invalidFactory).callFn([]).toStmt());else if(null!==t){const _=Br(ze.getInheritedFactory).callFn([n.type.value]),C=new Os(Jr.Or,t,t.set(_));o.push(new pl(C.callFn([r])))}else o.push(new pl(a));let m=nc([new jl("t",v_)],o,ah,void 0,`${n.name}_Factory`);return null!==t&&(m=nc([],[new Ld(t.name),new pl(m)]).callFn([],void 0,!0)),{expression:m,statements:[],type:KH(n)}}function KH(n){const e=null!==n.deps&&"invalid"!==n.deps?function fxe(n){let e=!1;const t=n.map(r=>{const i=function pxe(n){const e=[];return null!==n.attributeNameType&&e.push({key:"attribute",value:n.attributeNameType,quoted:!1}),n.optional&&e.push({key:"optional",value:Yt(!0),quoted:!1}),n.host&&e.push({key:"host",value:Yt(!0),quoted:!1}),n.self&&e.push({key:"self",value:Yt(!0),quoted:!1}),n.skipSelf&&e.push({key:"skipSelf",value:Yt(!0),quoted:!1}),e.length>0?Bc(e):null}(r);return null!==i?(e=!0,i):Yt(null)});return e?iu(ho(t)):Jf}(n.deps):Jf;return iu(Br(ze.FactoryDeclaration,[LA(n.type.type,n.typeArgumentCount),e]))}function QH(n,e){return n.map((t,r)=>function dxe(n,e,t){if(null===n.token)return Br(ze.invalidFactoryDep).callFn([Yt(t)]);if(null===n.attributeNameType){const r=0|(n.self?2:0)|(n.skipSelf?4:0)|(n.host?1:0)|(n.optional?8:0)|(e===tm.Pipe?16:0);let i=0!==r||n.optional?Yt(r):null;const o=[n.token];i&&o.push(i);const a=function gxe(n){switch(n){case tm.Component:case tm.Directive:case tm.Pipe:return ze.directiveInject;default:return ze.inject}}(e);return Br(a).callFn(o)}return Br(ze.injectAttribute).callFn([n.token])}(t,e,r))}function JH(n){return void 0!==n.delegateType}class _xe{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){throw new Error("visit() not implemented for Comment")}}class uv{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}}class FA{constructor(e,t,r){this.value=e,this.sourceSpan=t,this.i18n=r}visit(e){return e.visitBoundText(this)}}class BA{constructor(e,t,r,i,o,a){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=o,this.i18n=a}visit(e){return e.visitTextAttribute(this)}}class zA{constructor(e,t,r,i,o,a,d,m,_){this.name=e,this.type=t,this.securityContext=r,this.value=i,this.unit=o,this.sourceSpan=a,this.keySpan=d,this.valueSpan=m,this.i18n=_}static fromBoundElementProperty(e,t){if(void 0===e.keySpan)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new zA(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,t)}visit(e){return e.visitBoundAttribute(this)}}class $A{constructor(e,t,r,i,o,a,d,m){this.name=e,this.type=t,this.handler=r,this.target=i,this.phase=o,this.sourceSpan=a,this.handlerSpan=d,this.keySpan=m}static fromParsedEvent(e){const t=0===e.type?e.targetOrPhase:null,r=1===e.type?e.targetOrPhase:null;if(void 0===e.keySpan)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new $A(e.name,e.type,e.handler,t,r,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}}class KE{constructor(e,t,r,i,o,a,d,m,_,C){this.name=e,this.attributes=t,this.inputs=r,this.outputs=i,this.children=o,this.references=a,this.sourceSpan=d,this.startSourceSpan=m,this.endSourceSpan=_,this.i18n=C}visit(e){return e.visitElement(this)}}class hv{constructor(e){this.sourceSpan=e}visit(e){return e.visitDeferredTrigger(this)}}class eq extends hv{constructor(e,t){super(t),this.value=e}}class yxe extends hv{}class vxe extends hv{}class bxe extends hv{}class xxe extends hv{constructor(e,t){super(t),this.delay=e}}class wxe extends hv{constructor(e,t){super(t),this.reference=e}}class Exe extends hv{constructor(e,t){super(t),this.reference=e}}class Cxe{constructor(e,t,r,i,o){this.children=e,this.minimumTime=t,this.sourceSpan=r,this.startSourceSpan=i,this.endSourceSpan=o}visit(e){return e.visitDeferredBlockPlaceholder(this)}}class Sxe{constructor(e,t,r,i,o,a){this.children=e,this.afterTime=t,this.minimumTime=r,this.sourceSpan=i,this.startSourceSpan=o,this.endSourceSpan=a}visit(e){return e.visitDeferredBlockLoading(this)}}class Ixe{constructor(e,t,r,i){this.children=e,this.sourceSpan=t,this.startSourceSpan=r,this.endSourceSpan=i}visit(e){return e.visitDeferredBlockError(this)}}class Txe{constructor(e,t,r,i,o,a,d,m,_){this.children=e,this.triggers=t,this.prefetchTriggers=r,this.placeholder=i,this.loading=o,this.error=a,this.sourceSpan=d,this.startSourceSpan=m,this.endSourceSpan=_}visit(e){return e.visitDeferredBlock(this)}}class nm{constructor(e,t,r,i,o,a,d,m,_,C,T,R){this.tagName=e,this.attributes=t,this.inputs=r,this.outputs=i,this.templateAttrs=o,this.children=a,this.references=d,this.variables=m,this.sourceSpan=_,this.startSourceSpan=C,this.endSourceSpan=T,this.i18n=R}visit(e){return e.visitTemplate(this)}}class Dxe{constructor(e,t,r,i){this.selector=e,this.attributes=t,this.sourceSpan=r,this.i18n=i,this.name="ng-content"}visit(e){return e.visitContent(this)}}class tq{constructor(e,t,r,i,o){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=o}visit(e){return e.visitVariable(this)}}class Axe{constructor(e,t,r,i,o){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=o}visit(e){return e.visitReference(this)}}class nq{constructor(e,t,r,i){this.vars=e,this.placeholders=t,this.sourceSpan=r,this.i18n=i}visit(e){return e.visitIcu(this)}}function ou(n,e){const t=[];if(n.visit)for(const r of e)n.visit(r)||r.visit(n);else for(const r of e){const i=r.visit(n);i&&t.push(i)}return t}class ng{constructor(e,t,r,i,o,a){this.nodes=e,this.placeholders=t,this.placeholderToMessage=r,this.meaning=i,this.description=o,this.customId=a,this.legacyIds=[],this.id=this.customId,this.messageString=function Mxe(n){const e=new Pxe;return n.map(r=>r.visit(e)).join("")}(this.nodes),this.sources=e.length?[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:[]}}class rg{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}}class tp{constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}}class Kb{constructor(e,t,r,i,o){this.expression=e,this.type=t,this.cases=r,this.sourceSpan=i,this.expressionPlaceholder=o}visit(e,t){return e.visitIcu(this,t)}}class rN{constructor(e,t,r,i,o,a,d,m,_){this.tag=e,this.attrs=t,this.startName=r,this.closeName=i,this.children=o,this.isVoid=a,this.sourceSpan=d,this.startSourceSpan=m,this.endSourceSpan=_}visit(e,t){return e.visitTagPlaceholder(this,t)}}class ig{constructor(e,t,r){this.value=e,this.name=t,this.sourceSpan=r}visit(e,t){return e.visitPlaceholder(this,t)}}class Qb{constructor(e,t,r){this.value=e,this.name=t,this.sourceSpan=r}visit(e,t){return e.visitIcuPlaceholder(this,t)}}class Pxe{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){const t=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){const t=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}}new class kxe{visitTag(e){const t=this._serializeAttributes(e.attrs);if(0==e.children.length)return`<${e.name}${t}/>`;const r=e.children.map(i=>i.visit(this));return`<${e.name}${t}>${r.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){const t=Object.keys(e).map(r=>`${r}="${e[r]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [\n${e.dtd}\n]>`}};const aN="i18n-",aq="\ufffd";function eC(n){return n instanceof ng}function UA(n){return eC(n)&&1===n.nodes.length&&n.nodes[0]instanceof Kb}function qxe(n){return!!n.i18n}function cq(n){return n.nodes[0]}function jA(n,e=0){return`${aq}${n}${e>0?`:${e}`:""}${aq}`}function Zxe(n=0){let e=n;return()=>e++}function uq(n){const e={};return n.forEach((t,r)=>{e[r]=Yt(t.length>1?`[${t.join("|")}]`:t[0])}),e}function GA(n,e,...t){const r=n.get(e)||[];r.push(...t),n.set(e,r)}function hq(n,e=0,t=0){const r=e,i=new Map,o=n instanceof ng?n.nodes.find(a=>a instanceof tp):n;return o&&o.children.filter(a=>a instanceof ig).forEach((a,d)=>{const m=jA(r+d,t);GA(i,a.name,m)}),i}function lN(n={},e){const t={};return n&&Object.keys(n).length&&Object.keys(n).forEach(r=>t[tC(r,e)]=n[r]),t}function tC(n,e=!0){const t=function sN(n){return n.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}(n);if(!e)return t;const r=t.split("_");if(1===r.length)return n.toLowerCase();let i;/^\d+$/.test(r[r.length-1])&&(i=r.pop());let o=r.shift().toLowerCase();return r.length&&(o+=r.map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join("")),i?`${o}_${i}`:o}function dq(n){return`MSG_${n}`.toUpperCase()}function Yxe(n){return new Ld(n.name,void 0,ah,void 0,n.sourceSpan)}const Kxe=/[-.]/,cN="_t",np="ctx",nC="rf",fq="restoredCtx",t1e=500,n1e=new Set([ze.element,ze.elementStart,ze.elementEnd,ze.elementContainer,ze.elementContainerStart,ze.elementContainerEnd,ze.i18nExp,ze.listener,ze.classProp,ze.syntheticHostListener,ze.hostProperty,ze.syntheticHostProperty,ze.property,ze.propertyInterpolate1,ze.propertyInterpolate2,ze.propertyInterpolate3,ze.propertyInterpolate4,ze.propertyInterpolate5,ze.propertyInterpolate6,ze.propertyInterpolate7,ze.propertyInterpolate8,ze.propertyInterpolateV,ze.attribute,ze.attributeInterpolate1,ze.attributeInterpolate2,ze.attributeInterpolate3,ze.attributeInterpolate4,ze.attributeInterpolate5,ze.attributeInterpolate6,ze.attributeInterpolate7,ze.attributeInterpolate8,ze.attributeInterpolateV,ze.styleProp,ze.stylePropInterpolate1,ze.stylePropInterpolate2,ze.stylePropInterpolate3,ze.stylePropInterpolate4,ze.stylePropInterpolate5,ze.stylePropInterpolate6,ze.stylePropInterpolate7,ze.stylePropInterpolate8,ze.stylePropInterpolateV,ze.textInterpolate,ze.textInterpolate1,ze.textInterpolate2,ze.textInterpolate3,ze.textInterpolate4,ze.textInterpolate5,ze.textInterpolate6,ze.textInterpolate7,ze.textInterpolate8,ze.textInterpolateV]);function dv(n,e,t){return Br(e,null,n).callFn(t,n)}function pq(n,e){let t=null;return()=>(t||(n.push(new Ld(cN,void 0,v_)),t=go(e)),t)}function rC(n){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${n.constructor.name}`)}function Nd(n){return Array.isArray(n)?ho(n.map(Nd)):Yt(n,ah)}function HA(n,e){const t=Object.getOwnPropertyNames(n);return 0===t.length?null:Bc(t.map(r=>{const i=n[r];let o,a,d,m;if("string"==typeof i)o=r,d=r,a=i,m=Nd(a);else if(d=r,o=i.classPropertyName,a=i.bindingPropertyName,!e||a===o&&null==i.transformFunction)m=Nd(a);else{const _=[Nd(a),Nd(o)];null!=i.transformFunction&&_.push(i.transformFunction),m=ho(_)}return{key:d,quoted:Kxe.test(d),value:m}}))}function qA(n){for(;QL(n[n.length-1]);)n.pop();return n}function r1e(n,e){if(Array.isArray(n.predicate)){let t=[];return n.predicate.forEach(r=>{const i=r.split(",").map(o=>Yt(o.trim()));t.push(...i)}),e.getConstLiteral(ho(t),!0)}switch(n.predicate.forwardRef){case 0:case 2:return n.predicate.expression;case 1:return Br(ze.resolveForwardRef).callFn([n.predicate.expression])}}class su{constructor(){this.values=[]}set(e,t){t&&this.values.push({key:e,value:t,quoted:!1})}toLiteralMap(){return Bc(this.values)}}function fv(n){const{expressions:e,strings:t}=n;return 1===e.length&&2===t.length&&""===t[0]&&""===t[1]?1:e.length+t.length}function WA(n){const e=[];let t=null,r=null,i=0;for(const o of n){const a=("function"==typeof o.paramsOrFn?o.paramsOrFn():o.paramsOrFn)??[],d=Array.isArray(a)?a:[a];i<t1e&&r===o.reference&&n1e.has(r)?(t=t.callFn(d,t.sourceSpan),i++):(null!==t&&e.push(t.toStmt()),t=dv(o.span,o.reference,d),r=o.reference,i=0)}return null!==t&&e.push(t.toStmt()),e}function mq(n,e){let t=null;const r={name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:[],target:tm.Injectable};if(void 0!==n.useClass){const d=n.useClass.expression.isEquivalent(n.type.value);let m;void 0!==n.deps&&(m=n.deps),t=void 0!==m?cv({...r,delegate:n.useClass.expression,delegateDeps:m,delegateType:NA.Class}):d?cv(r):{statements:[],expression:_q(n.type.value,n.useClass.expression,e)}}else t=void 0!==n.useFactory?void 0!==n.deps?cv({...r,delegate:n.useFactory,delegateDeps:n.deps||[],delegateType:NA.Function}):{statements:[],expression:nc([],[new pl(n.useFactory.callFn([]))])}:void 0!==n.useValue?cv({...r,expression:n.useValue.expression}):void 0!==n.useExisting?cv({...r,expression:Br(ze.inject).callFn([n.useExisting.expression])}):{statements:[],expression:_q(n.type.value,n.type.value,e)};const i=n.type.value,o=new su;return o.set("token",i),o.set("factory",t.expression),null!==n.providedIn.expression.value&&o.set("providedIn",Yb(n.providedIn)),{expression:Br(ze.\u0275\u0275defineInjectable).callFn([o.toLiteralMap()],void 0,!0),type:gq(n),statements:t.statements}}function gq(n){return new Qf(Br(ze.InjectableDeclaration,[LA(n.type.type,n.typeArgumentCount)]))}function _q(n,e,t){return n.node===e.node?e.prop("\u0275fac"):yq(t?Br(ze.resolveForwardRef).callFn([e]):e)}function yq(n){return nc([new jl("t",v_)],[new pl(n.prop("\u0275fac").callFn([go("t")]))])}const o1e=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];class XA{static fromArray(e){return e?(function s1e(n,e){if(null!=e&&(!Array.isArray(e)||2!=e.length))throw new Error(`Expected '${n}' to be an array, [start, end].`);if(null!=e){const t=e[0],r=e[1];o1e.forEach(i=>{if(i.test(t)||i.test(r))throw new Error(`['${t}', '${r}'] contains unusable interpolation symbol.`)})}}("interpolation",e),new XA(e[0],e[1])):mf}constructor(e,t){this.start=e,this.end=t}}const mf=new XA("{{","}}"),ch=0,uN=9,xq=32,dN=48,Iq=57,nx=65,QA=90,gv=97,sC=122,ip=123,zu=125,Oq=160;function pN(n){return n>=uN&&n<=xq||n==Oq}function sg(n){return dN<=n&&n<=Iq}function t2(n){return n>=gv&&n<=sC||n>=nx&&n<=QA}function Lq(n){return 10===n||13===n}function Nq(n){return dN<=n&&n<=55}function n2(n){return 39===n||34===n||96===n}class _v{constructor(e,t,r,i){this.file=e,this.offset=t,this.line=r,this.col=i}toString(){return null!=this.offset?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){const t=this.file.content,r=t.length;let i=this.offset,o=this.line,a=this.col;for(;i>0&&e<0;)if(i--,e++,10==t.charCodeAt(i)){o--;const m=t.substring(0,i-1).lastIndexOf(String.fromCharCode(10));a=m>0?i-m:i}else a--;for(;i<r&&e>0;){const d=t.charCodeAt(i);i++,e--,10==d?(o++,a=0):a++}return new _v(this.file,i,o,a)}getContext(e,t){const r=this.file.content;let i=this.offset;if(null!=i){i>r.length-1&&(i=r.length-1);let o=i,a=0,d=0;for(;a<e&&i>0&&(i--,a++,"\n"!=r[i]||++d!=t););for(a=0,d=0;a<e&&o<r.length-1&&(o++,a++,"\n"!=r[o]||++d!=t););return{before:r.substring(i,this.offset),after:r.substring(this.offset,o+1)}}return null}}class mN{constructor(e,t){this.content=e,this.url=t}}class ml{constructor(e,t,r=e,i=null){this.start=e,this.end=t,this.fullStart=r,this.details=i}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}var E_=function(n){return n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR",n}(E_||{});class rd{constructor(e,t,r=E_.ERROR){this.span=e,this.msg=t,this.level=r}contextualMessage(){const e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${E_[this.level]} ->]${e.after}")`:this.msg}toString(){const e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}}let b1e=0;function ag(n){return n.replace(/\W/g,"_")}const Fq='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})';class w1e extends axe{constructor(){super(!1)}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitTaggedTemplateExpr(e,t){const r=e.template.elements;return e.tag.visitExpression(this,t),t.print(e,`(${Fq}(`),t.print(e,`[${r.map(i=>lv(i.text,!1)).join(", ")}], `),t.print(e,`[${r.map(i=>lv(i.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(i=>{t.print(e,", "),i.visitExpression(this,t)}),t.print(e,")"),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitLocalizedString(e,t){t.print(e,`$localize(${Fq}(`);const r=[e.serializeI18nHead()];for(let i=1;i<e.messageParts.length;i++)r.push(e.serializeI18nTemplatePart(i));return t.print(e,`[${r.map(i=>lv(i.cooked,!1)).join(", ")}], `),t.print(e,`[${r.map(i=>lv(i.raw,!1)).join(", ")}])`),e.expressions.forEach(i=>{t.print(e,", "),i.visitExpression(this,t)}),t.print(e,")"),null}_visitParams(e,t){this.visitAllObjects(r=>t.print(null,r.name),e,t,",")}}let r2;function Bq(...n){if(!Zb.trustedTypes)return new Function(...n);const r=`(function anonymous(${n.slice(0,-1).join(",")}\n) { ${n[n.length-1]}\n})`,i=Zb.eval(function C1e(n){return function E1e(){if(void 0===r2&&(r2=null,Zb.trustedTypes))try{r2=Zb.trustedTypes.createPolicy("angular#unsafe-jit",{createScript:n=>n})}catch{}return r2}()?.createScript(n)||n}(r));return void 0===i.bind?new Function(...n):(i.toString=()=>r,i.bind(Zb))}class S1e{evaluateStatements(e,t,r,i){const o=new I1e(r),a=eN.createRoot();return t.length>0&&!function T1e(n){return n.isEquivalent(Yt("use strict").toStmt())}(t[0])&&(t=[Yt("use strict").toStmt(),...t]),o.visitAllStatements(t,a),o.createReturnStmt(a),this.evaluateCode(e,a,o.getArgs(),i)}evaluateCode(e,t,r,i){let o=`"use strict";${t.toSource()}\n//# sourceURL=${e}`;const a=[],d=[];for(const _ in r)d.push(r[_]),a.push(_);if(i){const _=Bq(...a.concat("return null;")).toString(),C=_.slice(0,_.indexOf("return null;")).split("\n").length-1;o+=`\n${t.toSourceMapGenerator(e,C).toJsComment()}`}const m=Bq(...a.concat(o));return this.executeFunction(m,d)}executeFunction(e,t){return e(...t)}}class I1e extends w1e{constructor(e){super(),this.refResolver=e,this._evalArgNames=[],this._evalArgValues=[],this._evalExportedVars=[]}createReturnStmt(e){new pl(new pf(this._evalExportedVars.map(r=>new sv(r,go(r),!1)))).visitStatement(this,e)}getArgs(){const e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(td.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(td.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}_emitReferenceToExternal(e,t,r){let i=this._evalArgValues.indexOf(t);if(-1===i){i=this._evalArgValues.length,this._evalArgValues.push(t);const o=function x1e(n){if(!n||!n.reference)return null;const e=n.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let t=GH(e);return t.indexOf("(")>=0?(t="anonymous_"+b1e++,e.__anonymousType=t):t=ag(t),t}({reference:t})||"val";this._evalArgNames.push(`jit_${o}_${i}`)}r.print(e,this._evalArgNames[i])}}function zq(n){const e=new su;return null!==n.providers&&e.set("providers",n.providers),n.imports.length>0&&e.set("imports",ho(n.imports)),{expression:Br(ze.defineInjector).callFn([e.toLiteralMap()],void 0,!0),type:$q(n),statements:[]}}function $q(n){return new Qf(Br(ze.InjectorDeclaration,[new Qf(n.type.type)]))}class D1e{constructor(e){this.context=e}resolveExternalReference(e){if("@angular/core"!==e.moduleName)throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}}var o2=function(n){return n[n.Inline=0]="Inline",n[n.SideEffect=1]="SideEffect",n[n.Omit=2]="Omit",n}(o2||{}),C_=function(n){return n[n.Global=0]="Global",n[n.Local=1]="Local",n}(C_||{});function A1e(n){const e=[],t=new su;if(t.set("type",n.type.value),n.kind===C_.Global?n.bootstrap.length>0&&t.set("bootstrap",ep(n.bootstrap,n.containsForwardDecls)):n.bootstrapExpression&&t.set("bootstrap",n.bootstrapExpression),n.selectorScopeMode===o2.Inline)n.declarations.length>0&&t.set("declarations",ep(n.declarations,n.containsForwardDecls)),n.imports.length>0&&t.set("imports",ep(n.imports,n.containsForwardDecls)),n.exports.length>0&&t.set("exports",ep(n.exports,n.containsForwardDecls));else if(n.selectorScopeMode===o2.SideEffect){const o=function P1e(n){const e=new su;if(n.kind===C_.Global?n.declarations.length>0&&e.set("declarations",ep(n.declarations,n.containsForwardDecls)):n.declarationsExpression&&e.set("declarations",n.declarationsExpression),n.kind===C_.Global?n.imports.length>0&&e.set("imports",ep(n.imports,n.containsForwardDecls)):n.importsExpression&&e.set("imports",n.importsExpression),n.kind===C_.Global?n.exports.length>0&&e.set("exports",ep(n.exports,n.containsForwardDecls)):n.exportsExpression&&e.set("exports",n.exportsExpression),0===Object.keys(e.values).length)return null;const r=function uxe(n){return function YH(n,e){const t=new tg({name:n,moduleName:null}),r=new Os(Jr.Identical,new tv(t),Yt("undefined")),i=new Os(Jr.Or,r,t,void 0,void 0,!0);return new Os(Jr.And,i,e)}("ngJitMode",n)}(new lh(Br(ze.setNgModuleScope),[n.type.value,e.toLiteralMap()])),i=new b_([],[r.toStmt()]);return new lh(i,[]).toStmt()}(n);null!==o&&e.push(o)}return null!==n.schemas&&n.schemas.length>0&&t.set("schemas",ho(n.schemas.map(o=>o.value))),null!==n.id&&(t.set("id",n.id),e.push(Br(ze.registerNgModuleType).callFn([n.type.value,n.id]).toStmt())),{expression:Br(ze.defineNgModule).callFn([t.toLiteralMap()],void 0,!0),type:Vq(n),statements:e}}function Vq(n){if(n.kind===C_.Local)return new Qf(n.type.value);const{type:e,declarations:t,exports:r,imports:i,includeImportTypes:o,publicDeclarationTypes:a}=n;return new Qf(Br(ze.NgModuleDeclaration,[new Qf(e.type),null===a?gN(t):k1e(a),o?gN(i):Jf,gN(r)]))}function gN(n){const e=n.map(t=>XE(t.type));return n.length>0?iu(ho(e)):Jf}function k1e(n){const e=n.map(t=>XE(t));return n.length>0?iu(ho(e)):Jf}function Uq(n){const e=[];return e.push({key:"name",value:Yt(n.pipeName),quoted:!1}),e.push({key:"type",value:n.type.value,quoted:!1}),e.push({key:"pure",value:Yt(n.pure),quoted:!1}),n.isStandalone&&e.push({key:"standalone",value:Yt(!0),quoted:!1}),{expression:Br(ze.definePipe).callFn([Bc(e)],void 0,!0),type:jq(n),statements:[]}}function jq(n){return new Qf(Br(ze.PipeDeclaration,[LA(n.type.type,n.typeArgumentCount),new Qf(new ru(n.pipeName)),new Qf(new ru(n.isStandalone))]))}var yv=function(n){return n[n.Directive=0]="Directive",n[n.Pipe=1]="Pipe",n[n.NgModule=2]="NgModule",n}(yv||{});class _N{constructor(e,t,r,i){this.input=t,this.errLocation=r,this.ctxLocation=i,this.message=`Parser Error: ${e} ${r} [${t}] in ${i}`}}class aC{constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new sp(e+this.start,e+this.end)}}class zc{constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}}class s2 extends zc{constructor(e,t,r){super(e,t),this.nameSpan=r}}class Fd extends zc{visit(e,t=null){}}class S_ extends zc{visit(e,t=null){return e.visitImplicitReceiver(this,t)}}class lC extends S_{visit(e,t=null){return e.visitThisReceiver?.(this,t)}}class cC extends zc{constructor(e,t,r){super(e,t),this.expressions=r}visit(e,t=null){return e.visitChain(this,t)}}class a2 extends zc{constructor(e,t,r,i,o){super(e,t),this.condition=r,this.trueExp=i,this.falseExp=o}visit(e,t=null){return e.visitConditional(this,t)}}class lg extends s2{constructor(e,t,r,i,o){super(e,t,r),this.receiver=i,this.name=o}visit(e,t=null){return e.visitPropertyRead(this,t)}}class l2 extends s2{constructor(e,t,r,i,o,a){super(e,t,r),this.receiver=i,this.name=o,this.value=a}visit(e,t=null){return e.visitPropertyWrite(this,t)}}class c2 extends s2{constructor(e,t,r,i,o){super(e,t,r),this.receiver=i,this.name=o}visit(e,t=null){return e.visitSafePropertyRead(this,t)}}class uC extends zc{constructor(e,t,r,i){super(e,t),this.receiver=r,this.key=i}visit(e,t=null){return e.visitKeyedRead(this,t)}}class hC extends zc{constructor(e,t,r,i){super(e,t),this.receiver=r,this.key=i}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}}class u2 extends zc{constructor(e,t,r,i,o){super(e,t),this.receiver=r,this.key=i,this.value=o}visit(e,t=null){return e.visitKeyedWrite(this,t)}}class dC extends s2{constructor(e,t,r,i,o,a){super(e,t,a),this.exp=r,this.name=i,this.args=o}visit(e,t=null){return e.visitPipe(this,t)}}class id extends zc{constructor(e,t,r){super(e,t),this.value=r}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}}class fC extends zc{constructor(e,t,r){super(e,t),this.expressions=r}visit(e,t=null){return e.visitLiteralArray(this,t)}}class h2 extends zc{constructor(e,t,r,i){super(e,t),this.keys=r,this.values=i}visit(e,t=null){return e.visitLiteralMap(this,t)}}class Eu extends zc{constructor(e,t,r,i){super(e,t),this.strings=r,this.expressions=i}visit(e,t=null){return e.visitInterpolation(this,t)}}class op extends zc{constructor(e,t,r,i,o){super(e,t),this.operation=r,this.left=i,this.right=o}visit(e,t=null){return e.visitBinary(this,t)}}class cg extends op{static createMinus(e,t,r){return new cg(e,t,"-",r,"-",new id(e,t,0),r)}static createPlus(e,t,r){return new cg(e,t,"+",r,"-",r,new id(e,t,0))}constructor(e,t,r,i,o,a,d){super(e,t,o,a,d),this.operator=r,this.expr=i,this.left=null,this.right=null,this.operation=null}visit(e,t=null){return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}}class yN extends zc{constructor(e,t,r){super(e,t),this.expression=r}visit(e,t=null){return e.visitPrefixNot(this,t)}}class d2 extends zc{constructor(e,t,r){super(e,t),this.expression=r}visit(e,t=null){return e.visitNonNullAssert(this,t)}}class vv extends zc{constructor(e,t,r,i,o){super(e,t),this.receiver=r,this.args=i,this.argumentSpan=o}visit(e,t=null){return e.visitCall(this,t)}}class pC extends zc{constructor(e,t,r,i,o){super(e,t),this.receiver=r,this.args=i,this.argumentSpan=o}visit(e,t=null){return e.visitSafeCall(this,t)}}class sp{constructor(e,t){this.start=e,this.end=t}}class _f extends zc{constructor(e,t,r,i,o){super(new aC(0,null===t?0:t.length),new sp(i,null===t?i:i+t.length)),this.ast=e,this.source=t,this.location=r,this.errors=o}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}}class vN{constructor(e,t,r){this.sourceSpan=e,this.key=t,this.value=r}}class R1e{constructor(e,t,r){this.sourceSpan=e,this.key=t,this.value=r}}class O1e{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitKeyedWrite(e,t){this.visit(e.receiver,t),this.visit(e.key,t),this.visit(e.value,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitPropertyWrite(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitAll(e,t){for(const r of e)this.visit(r,t)}}class L1e{visitImplicitReceiver(e,t){return e}visitThisReceiver(e,t){return e}visitInterpolation(e,t){return new Eu(e.span,e.sourceSpan,e.strings,this.visitAll(e.expressions))}visitLiteralPrimitive(e,t){return new id(e.span,e.sourceSpan,e.value)}visitPropertyRead(e,t){return new lg(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}visitPropertyWrite(e,t){return new l2(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,e.value.visit(this))}visitSafePropertyRead(e,t){return new c2(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}visitLiteralArray(e,t){return new fC(e.span,e.sourceSpan,this.visitAll(e.expressions))}visitLiteralMap(e,t){return new h2(e.span,e.sourceSpan,e.keys,this.visitAll(e.values))}visitUnary(e,t){switch(e.operator){case"+":return cg.createPlus(e.span,e.sourceSpan,e.expr.visit(this));case"-":return cg.createMinus(e.span,e.sourceSpan,e.expr.visit(this));default:throw new Error(`Unknown unary operator ${e.operator}`)}}visitBinary(e,t){return new op(e.span,e.sourceSpan,e.operation,e.left.visit(this),e.right.visit(this))}visitPrefixNot(e,t){return new yN(e.span,e.sourceSpan,e.expression.visit(this))}visitNonNullAssert(e,t){return new d2(e.span,e.sourceSpan,e.expression.visit(this))}visitConditional(e,t){return new a2(e.span,e.sourceSpan,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}visitPipe(e,t){return new dC(e.span,e.sourceSpan,e.exp.visit(this),e.name,this.visitAll(e.args),e.nameSpan)}visitKeyedRead(e,t){return new uC(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this))}visitKeyedWrite(e,t){return new u2(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this),e.value.visit(this))}visitCall(e,t){return new vv(e.span,e.sourceSpan,e.receiver.visit(this),this.visitAll(e.args),e.argumentSpan)}visitSafeCall(e,t){return new pC(e.span,e.sourceSpan,e.receiver.visit(this),this.visitAll(e.args),e.argumentSpan)}visitAll(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].visit(this);return t}visitChain(e,t){return new cC(e.span,e.sourceSpan,this.visitAll(e.expressions))}visitSafeKeyedRead(e,t){return new hC(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this))}}class N1e{visitImplicitReceiver(e,t){return e}visitThisReceiver(e,t){return e}visitInterpolation(e,t){const r=this.visitAll(e.expressions);return r!==e.expressions?new Eu(e.span,e.sourceSpan,e.strings,r):e}visitLiteralPrimitive(e,t){return e}visitPropertyRead(e,t){const r=e.receiver.visit(this);return r!==e.receiver?new lg(e.span,e.sourceSpan,e.nameSpan,r,e.name):e}visitPropertyWrite(e,t){const r=e.receiver.visit(this),i=e.value.visit(this);return r!==e.receiver||i!==e.value?new l2(e.span,e.sourceSpan,e.nameSpan,r,e.name,i):e}visitSafePropertyRead(e,t){const r=e.receiver.visit(this);return r!==e.receiver?new c2(e.span,e.sourceSpan,e.nameSpan,r,e.name):e}visitLiteralArray(e,t){const r=this.visitAll(e.expressions);return r!==e.expressions?new fC(e.span,e.sourceSpan,r):e}visitLiteralMap(e,t){const r=this.visitAll(e.values);return r!==e.values?new h2(e.span,e.sourceSpan,e.keys,r):e}visitUnary(e,t){const r=e.expr.visit(this);if(r!==e.expr)switch(e.operator){case"+":return cg.createPlus(e.span,e.sourceSpan,r);case"-":return cg.createMinus(e.span,e.sourceSpan,r);default:throw new Error(`Unknown unary operator ${e.operator}`)}return e}visitBinary(e,t){const r=e.left.visit(this),i=e.right.visit(this);return r!==e.left||i!==e.right?new op(e.span,e.sourceSpan,e.operation,r,i):e}visitPrefixNot(e,t){const r=e.expression.visit(this);return r!==e.expression?new yN(e.span,e.sourceSpan,r):e}visitNonNullAssert(e,t){const r=e.expression.visit(this);return r!==e.expression?new d2(e.span,e.sourceSpan,r):e}visitConditional(e,t){const r=e.condition.visit(this),i=e.trueExp.visit(this),o=e.falseExp.visit(this);return r!==e.condition||i!==e.trueExp||o!==e.falseExp?new a2(e.span,e.sourceSpan,r,i,o):e}visitPipe(e,t){const r=e.exp.visit(this),i=this.visitAll(e.args);return r!==e.exp||i!==e.args?new dC(e.span,e.sourceSpan,r,e.name,i,e.nameSpan):e}visitKeyedRead(e,t){const r=e.receiver.visit(this),i=e.key.visit(this);return r!==e.receiver||i!==e.key?new uC(e.span,e.sourceSpan,r,i):e}visitKeyedWrite(e,t){const r=e.receiver.visit(this),i=e.key.visit(this),o=e.value.visit(this);return r!==e.receiver||i!==e.key||o!==e.value?new u2(e.span,e.sourceSpan,r,i,o):e}visitAll(e){const t=[];let r=!1;for(let i=0;i<e.length;++i){const o=e[i],a=o.visit(this);t[i]=a,r=r||a!==o}return r?t:e}visitChain(e,t){const r=this.visitAll(e.expressions);return r!==e.expressions?new cC(e.span,e.sourceSpan,r):e}visitCall(e,t){const r=e.receiver.visit(this),i=this.visitAll(e.args);return r!==e.receiver||i!==e.args?new vv(e.span,e.sourceSpan,r,i,e.argumentSpan):e}visitSafeCall(e,t){const r=e.receiver.visit(this),i=this.visitAll(e.args);return r!==e.receiver||i!==e.args?new pC(e.span,e.sourceSpan,r,i,e.argumentSpan):e}visitSafeKeyedRead(e,t){const r=e.receiver.visit(this),i=e.key.visit(this);return r!==e.receiver||i!==e.key?new hC(e.span,e.sourceSpan,r,i):e}}class bN{constructor(e,t,r,i,o,a){this.name=e,this.expression=t,this.type=r,this.sourceSpan=i,this.keySpan=o,this.valueSpan=a,this.isLiteral=this.type===ox.LITERAL_ATTR,this.isAnimation=this.type===ox.ANIMATION}}var ox=function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.LITERAL_ATTR=1]="LITERAL_ATTR",n[n.ANIMATION=2]="ANIMATION",n}(ox||{});class Gq{constructor(e,t,r,i,o,a,d){this.name=e,this.targetOrPhase=t,this.type=r,this.handler=i,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=d}}class F1e{constructor(e,t,r,i,o){this.name=e,this.value=t,this.sourceSpan=r,this.keySpan=i,this.valueSpan=o}}class Hq{constructor(e,t,r,i,o,a,d,m){this.name=e,this.type=t,this.securityContext=r,this.value=i,this.unit=o,this.sourceSpan=a,this.keySpan=d,this.valueSpan=m}}class qq{static#e=this.event=go("$event")}function B1e(n,e,t,r,i,o,a){n||(n=new Qq(a));const d=function z1e(n,e){return function U1e(n,e){const t=new H1e(n);return e.visit(t)}(n,e)}({createLiteralArrayConverter:T=>R=>ho(R),createLiteralMapConverter:T=>R=>Bc(T.map((G,W)=>({key:G.key,value:R[W],quoted:G.quoted}))),createPipeConverter:T=>{throw new Error(`Illegal State: Actions are not allowed to contain pipes. Pipe: ${T}`)}},t),m=new wN(n,e,r,!1,i,o),_=[];Kq(d.visit(m,Pa.Statement),_),function j1e(n,e,t){for(let r=n-1;r>=0;r--)t.unshift(Zq(e,r))}(m.temporaryCount,r,_),m.usesImplicitReceiver&&n.notifyImplicitReceiverUse();const C=_.length-1;if(C>=0){const T=_[C];T instanceof nd&&(_[C]=new pl(T.expr))}return _}class $1e{constructor(e,t){this.stmts=e,this.currValExpr=t}}function Wq(n,e,t,r){n||(n=new Qq);const i=new wN(n,e,r,!1),o=t.visit(i,Pa.Expression),a=Xq(i,r);return i.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),new $1e(a,o)}function Xq(n,e){const t=[];for(let r=0;r<n.temporaryCount;r++)t.push(Zq(e,r));return t}function xN(n,e){return`tmp_${n}_${e}`}function Zq(n,e){return new Ld(xN(n,e))}var Pa=function(n){return n[n.Statement=0]="Statement",n[n.Expression=1]="Expression",n}(Pa||{});function Yq(n,e){if(n!==Pa.Expression)throw new Error(`Expected an expression, but saw ${e}`)}function Oh(n,e){return n===Pa.Statement?e.toStmt():e}class H1e extends L1e{constructor(e){super(),this._converterFactory=e}visitPipe(e,t){const r=[e.exp,...e.args].map(i=>i.visit(this,t));return new sx(e.span,e.sourceSpan,r,this._converterFactory.createPipeConverter(e.name,r.length))}visitLiteralArray(e,t){const r=e.expressions.map(i=>i.visit(this,t));return new sx(e.span,e.sourceSpan,r,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}visitLiteralMap(e,t){const r=e.values.map(i=>i.visit(this,t));return new sx(e.span,e.sourceSpan,r,this._converterFactory.createLiteralMapConverter(e.keys))}}class wN{constructor(e,t,r,i,o,a){this._localResolver=e,this._implicitReceiver=t,this.bindingId=r,this.supportsInterpolation=i,this.baseSourceSpan=o,this.implicitReceiverAccesses=a,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}visitUnary(e,t){let r;switch(e.operator){case"+":r=jb.Plus;break;case"-":r=jb.Minus;break;default:throw new Error(`Unsupported operator ${e.operator}`)}return Oh(t,new ov(r,this._visit(e.expr,Pa.Expression),void 0,this.convertSourceSpan(e.span)))}visitBinary(e,t){let r;switch(e.operation){case"+":r=Jr.Plus;break;case"-":r=Jr.Minus;break;case"*":r=Jr.Multiply;break;case"/":r=Jr.Divide;break;case"%":r=Jr.Modulo;break;case"&&":r=Jr.And;break;case"||":r=Jr.Or;break;case"==":r=Jr.Equals;break;case"!=":r=Jr.NotEquals;break;case"===":r=Jr.Identical;break;case"!==":r=Jr.NotIdentical;break;case"<":r=Jr.Lower;break;case">":r=Jr.Bigger;break;case"<=":r=Jr.LowerEquals;break;case">=":r=Jr.BiggerEquals;break;case"??":return this.convertNullishCoalesce(e,t);default:throw new Error(`Unsupported operation ${e.operation}`)}return Oh(t,new Os(r,this._visit(e.left,Pa.Expression),this._visit(e.right,Pa.Expression),void 0,this.convertSourceSpan(e.span)))}visitChain(e,t){return function G1e(n,e){if(n!==Pa.Statement)throw new Error(`Expected a statement, but saw ${e}`)}(t,e),this.visitAll(e.expressions,t)}visitConditional(e,t){return Oh(t,this._visit(e.condition,Pa.Expression).conditional(this._visit(e.trueExp,Pa.Expression),this._visit(e.falseExp,Pa.Expression),this.convertSourceSpan(e.span)))}visitPipe(e,t){throw new Error(`Illegal state: Pipes should have been converted into functions. Pipe: ${e.name}`)}visitImplicitReceiver(e,t){return Yq(t,e),this.usesImplicitReceiver=!0,this._implicitReceiver}visitThisReceiver(e,t){return this.visitImplicitReceiver(e,t)}visitInterpolation(e,t){if(!this.supportsInterpolation)throw new Error("Unexpected interpolation");Yq(t,e);let r=[];for(let o=0;o<e.strings.length-1;o++)r.push(Yt(e.strings[o])),r.push(this._visit(e.expressions[o],Pa.Expression));r.push(Yt(e.strings[e.strings.length-1]));const i=e.strings;return 2===i.length&&""===i[0]&&""===i[1]?r=[r[1]]:e.expressions.length>=9&&(r=[ho(r)]),new q1e(r)}visitKeyedRead(e,t){const r=this.leftMostSafeNode(e);return r?this.convertSafeAccess(e,r,t):Oh(t,this._visit(e.receiver,Pa.Expression).key(this._visit(e.key,Pa.Expression)))}visitKeyedWrite(e,t){const r=this._visit(e.receiver,Pa.Expression),i=this._visit(e.key,Pa.Expression),o=this._visit(e.value,Pa.Expression);return r===this._implicitReceiver&&this._localResolver.maybeRestoreView(),Oh(t,r.key(i).set(o))}visitLiteralArray(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}visitLiteralMap(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}visitLiteralPrimitive(e,t){return Oh(t,Yt(e.value,null==e.value||!0===e.value||!0===e.value?ah:void 0,this.convertSourceSpan(e.span)))}_getLocal(e,t){return this._localResolver.globals?.has(e)&&t instanceof lC?null:this._localResolver.getLocal(e)}visitPrefixNot(e,t){return Oh(t,function FH(n,e){return new Hb(n,e)}(this._visit(e.expression,Pa.Expression)))}visitNonNullAssert(e,t){return Oh(t,this._visit(e.expression,Pa.Expression))}visitPropertyRead(e,t){const r=this.leftMostSafeNode(e);if(r)return this.convertSafeAccess(e,r,t);{let i=null;const o=this.usesImplicitReceiver,a=this._visit(e.receiver,Pa.Expression);return a===this._implicitReceiver&&(i=this._getLocal(e.name,e.receiver),i&&(this.usesImplicitReceiver=o,this.addImplicitReceiverAccess(e.name))),null==i&&(i=a.prop(e.name,this.convertSourceSpan(e.span))),Oh(t,i)}}visitPropertyWrite(e,t){const r=this._visit(e.receiver,Pa.Expression),i=this.usesImplicitReceiver;let o=null;if(r===this._implicitReceiver){const a=this._getLocal(e.name,e.receiver);if(a){if(!(a instanceof Rd))throw new Error(`Cannot assign value "${e.value instanceof lg?e.value.name:void 0}" to template variable "${e.name}". Template variables are read-only.`);o=a,this.usesImplicitReceiver=i,this.addImplicitReceiverAccess(e.name)}}return null===o&&(o=r.prop(e.name,this.convertSourceSpan(e.span))),Oh(t,o.set(this._visit(e.value,Pa.Expression)))}visitSafePropertyRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitSafeKeyedRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitAll(e,t){return e.map(r=>this._visit(r,t))}visitCall(e,t){const r=this.leftMostSafeNode(e);if(r)return this.convertSafeAccess(e,r,t);const i=this.visitAll(e.args,Pa.Expression);if(e instanceof sx)return Oh(t,e.converter(i));const o=e.receiver;if(o instanceof lg&&o.receiver instanceof S_&&!(o.receiver instanceof lC)&&"$any"===o.name){if(1!==i.length)throw new Error(`Invalid call to $any, expected 1 argument but received ${i.length||"none"}`);return Oh(t,i[0])}return Oh(t,this._visit(o,Pa.Expression).callFn(i,this.convertSourceSpan(e.span)))}visitSafeCall(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}_visit(e,t){return this._resultMap.get(e)||(this._nodeMap.get(e)||e).visit(this,t)}convertSafeAccess(e,t,r){let o,i=this._visit(t.receiver,Pa.Expression);this.needsTemporaryInSafeAccess(t.receiver)&&(o=this.allocateTemporary(),i=o.set(i),this._resultMap.set(t.receiver,o));const a=i.isBlank();this._nodeMap.set(t,t instanceof pC?new vv(t.span,t.sourceSpan,t.receiver,t.args,t.argumentSpan):t instanceof hC?new uC(t.span,t.sourceSpan,t.receiver,t.key):new lg(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name));const d=this._visit(e,Pa.Expression);return this._nodeMap.delete(t),o&&this.releaseTemporary(o),Oh(r,a.conditional(av,d))}convertNullishCoalesce(e,t){const r=this._visit(e.left,Pa.Expression),i=this._visit(e.right,Pa.Expression),o=this.allocateTemporary();return this.releaseTemporary(o),Oh(t,o.set(r).notIdentical(av).and(o.notIdentical(Yt(void 0))).conditional(o,i))}leftMostSafeNode(e){const t=(r,i)=>(this._nodeMap.get(i)||i).visit(r);return e.visit({visitUnary:r=>null,visitBinary:r=>null,visitChain:r=>null,visitConditional:r=>null,visitCall(r){return t(this,r.receiver)},visitSafeCall(r){return t(this,r.receiver)||r},visitImplicitReceiver:r=>null,visitThisReceiver:r=>null,visitInterpolation:r=>null,visitKeyedRead(r){return t(this,r.receiver)},visitKeyedWrite:r=>null,visitLiteralArray:r=>null,visitLiteralMap:r=>null,visitLiteralPrimitive:r=>null,visitPipe:r=>null,visitPrefixNot:r=>null,visitNonNullAssert(r){return t(this,r.expression)},visitPropertyRead(r){return t(this,r.receiver)},visitPropertyWrite:r=>null,visitSafePropertyRead(r){return t(this,r.receiver)||r},visitSafeKeyedRead(r){return t(this,r.receiver)||r}})}needsTemporaryInSafeAccess(e){const t=(i,o)=>o&&(this._nodeMap.get(o)||o).visit(i);return e.visit({visitUnary(i){return t(this,i.expr)},visitBinary(i){return t(this,i.left)||t(this,i.right)},visitChain:i=>!1,visitConditional(i){return t(this,i.condition)||t(this,i.trueExp)||t(this,i.falseExp)},visitCall:i=>!0,visitSafeCall:i=>!0,visitImplicitReceiver:i=>!1,visitThisReceiver:i=>!1,visitInterpolation(i){return((i,o)=>o.some(a=>t(i,a)))(this,i.expressions)},visitKeyedRead:i=>!1,visitKeyedWrite:i=>!1,visitLiteralArray:i=>!0,visitLiteralMap:i=>!0,visitLiteralPrimitive:i=>!1,visitPipe:i=>!0,visitPrefixNot(i){return t(this,i.expression)},visitNonNullAssert(i){return t(this,i.expression)},visitPropertyRead:i=>!1,visitPropertyWrite:i=>!1,visitSafePropertyRead:i=>!1,visitSafeKeyedRead:i=>!1})}allocateTemporary(){const e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new Qp(xN(this.bindingId,e))}releaseTemporary(e){if(this._currentTemporary--,e.name!=xN(this.bindingId,this._currentTemporary))throw new Error(`Temporary ${e.name} released out of order`)}convertSourceSpan(e){if(this.baseSourceSpan){const t=this.baseSourceSpan.start.moveBy(e.start),r=this.baseSourceSpan.start.moveBy(e.end),i=this.baseSourceSpan.fullStart.moveBy(e.start);return new ml(t,r,i)}return null}addImplicitReceiverAccess(e){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(e)}}function Kq(n,e){Array.isArray(n)?n.forEach(t=>Kq(t,e)):e.push(n)}function f2(){throw new Error("Unsupported operation")}class q1e extends Za{constructor(e){super(null,null),this.args=e,this.isConstant=f2,this.isEquivalent=f2,this.visitExpression=f2,this.clone=f2}}class Qq{constructor(e){this.globals=e}notifyImplicitReceiverUse(){}maybeRestoreView(){}getLocal(e){return e===qq.event.name?qq.event:null}}class sx extends vv{constructor(e,t,r,i){super(e,t,new Fd(e,t),r,null),this.converter=i}}let p2;function Jq(){return p2||(p2={},m2(Ma.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),m2(Ma.STYLE,["*|style"]),m2(Ma.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","input|src","ins|cite","q|cite","source|src","track|src","video|poster","video|src"]),m2(Ma.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),p2}function m2(n,e){for(const t of e)p2[t.toLowerCase()]=n}const W1e=new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]);function EN(n){return W1e.has(n.toLowerCase())}const X1e=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]);class Z1e{constructor(){this._animationDeclarationKeyframesRe=/(^|\s+)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g}shimCssText(e,t,r=""){const i=[];e=e.replace(awe,d=>{if(d.match(lwe))i.push(d);else{const m=d.match(swe);i.push((m?.join("")??"")+"\n")}return IN}),e=this._insertDirectives(e);const o=this._scopeCssText(e,t,r);let a=0;return o.replace(cwe,()=>i[a++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,t){const r=new Set,i=_2(e,o=>this._scopeLocalKeyframeDeclarations(o,t,r));return _2(i,o=>this._scopeAnimationRule(o,t,r))}_scopeLocalKeyframeDeclarations(e,t,r){return{...e,selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(i,o,a,d,m)=>(r.add(a9(d,a)),`${o}${a}${t}_${d}${a}${m}`))}}_scopeAnimationKeyframe(e,t,r){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(i,o,a,d,m)=>`${o}${a}${d=`${r.has(a9(d,a))?t+"_":""}${d}`}${a}${m}`)}_scopeAnimationRule(e,t,r){let i=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation(?:\s*):(?:\s*))([^;]+)/g,(o,a,d)=>a+d.replace(this._animationDeclarationKeyframesRe,(m,_,C="",T,R)=>T?`${_}${this._scopeAnimationKeyframe(`${C}${T}${C}`,t,r)}`:X1e.has(R)?m:`${_}${this._scopeAnimationKeyframe(R,t,r)}`));return i=i.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(o,a,d)=>`${a}${d.split(",").map(m=>this._scopeAnimationKeyframe(m,t,r)).join(",")}`),{...e,content:i}}_insertPolyfillDirectivesInCssText(e){return e.replace(K1e,function(...t){return t[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(Q1e,(...t)=>{const r=t[0].replace(t[1],"").replace(t[2],"");return t[4]+r})}_scopeCssText(e,t,r){const i=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeKeyframesRelatedCss(e,t),e=this._scopeSelectors(e,t,r)),(e=e+"\n"+i).trim()}_extractUnscopedRulesFromCssText(e){let r,t="";for(e9.lastIndex=0;null!==(r=e9.exec(e));)t+=r[0].replace(r[2],"").replace(r[1],r[4])+"\n\n";return t}_convertColonHost(e){return e.replace(J1e,(t,r,i)=>{if(r){const o=[],a=r.split(",").map(d=>d.trim());for(const d of a){if(!d)break;const m=bv+d.replace(g2,"")+i;o.push(m)}return o.join(",")}return bv+i})}_convertColonHostContext(e){return e.replace(ewe,t=>{const r=[[]];let i;for(;i=twe.exec(t);){const o=(i[1]??"").trim().split(",").map(d=>d.trim()).filter(d=>""!==d),a=r.length;xwe(r,o.length);for(let d=0;d<o.length;d++)for(let m=0;m<a;m++)r[m+d*a].push(o[d]);t=i[2]}return r.map(o=>function bwe(n,e){const t=bv;ax.lastIndex=0;const r=ax.test(e);if(0===n.length)return t+e;const i=[n.pop()||""];for(;n.length>0;){const o=i.length,a=n.pop();for(let d=0;d<o;d++){const m=i[d];i[2*o+d]=m+" "+a,i[o+d]=a+" "+m,i[d]=a+m}}return i.map(o=>r?`${o}${e}`:`${o}${t}${e}, ${o} ${t}${e}`).join(",")}(o,t)).join(", ")})}_convertShadowDOMSelectors(e){return nwe.reduce((t,r)=>t.replace(r," "),e)}_scopeSelectors(e,t,r){return _2(e,i=>{let o=i.selector,a=i.content;return"@"!==i.selector[0]?o=this._scopeSelector(i.selector,t,r):i.selector.startsWith("@media")||i.selector.startsWith("@supports")||i.selector.startsWith("@document")||i.selector.startsWith("@layer")||i.selector.startsWith("@container")||i.selector.startsWith("@scope")?a=this._scopeSelectors(i.content,t,r):(i.selector.startsWith("@font-face")||i.selector.startsWith("@page"))&&(a=this._stripScopingSelectors(i.content)),new DN(o,a)})}_stripScopingSelectors(e){return _2(e,t=>{const r=t.selector.replace(n9," ").replace(t9," ");return new DN(r,t.content)})}_scopeSelector(e,t,r){return e.split(",").map(i=>i.trim().split(n9)).map(i=>{const[o,...a]=i;return[(m=>this._selectorNeedsScoping(m,t)?this._applySelectorScope(m,t,r):m)(o),...a].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+rwe,"m")}_applySimpleSelectorScope(e,t,r){if(ax.lastIndex=0,ax.test(e)){const i=`[${r}]`;return e.replace(t9,(o,a)=>a.replace(/([^:]*)(:*)(.*)/,(d,m,_,C)=>m+i+_+C)).replace(ax,i+" ")}return t+" "+e}_applySelectorScope(e,t,r){const o="["+(t=t.replace(/\[is=([^\]]*)\]/g,(W,...ve)=>ve[0]))+"]",a=W=>{let ve=W.trim();if(!ve)return"";if(W.indexOf(bv)>-1)ve=this._applySimpleSelectorScope(W,t,r);else{const _e=W.replace(ax,"");if(_e.length>0){const re=_e.match(/([^:]*)(:*)(.*)/);re&&(ve=re[1]+o+re[2]+re[3])}}return ve},d=new Y1e(e);let C,m="",_=0;const T=/( |>|\+|~(?!=))\s*/g;let L=!((e=d.content()).indexOf(bv)>-1);for(;null!==(C=T.exec(e));){const W=C[1],ve=e.slice(_,C.index).trim();ve.match(r9)&&e[C.index+1]?.match(/[a-fA-F\d]/)||(L=L||ve.indexOf(bv)>-1,m+=`${L?a(ve):ve} ${W} `,_=T.lastIndex)}const G=e.substring(_);return L=L||G.indexOf(bv)>-1,m+=L?a(G):G,d.restore(m)}_insertPolyfillHostInCssText(e){return e.replace(owe,CN).replace(iwe,g2)}}class Y1e{constructor(e){this.placeholders=[],this.index=0,e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=this._escapeRegexMatches(e,/(\\.)/g),this._content=e.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(t,r,i)=>{const o=`__ph-${this.index}__`;return this.placeholders.push(i),this.index++,r+o})}restore(e){return e.replace(r9,(t,r)=>this.placeholders[+r])}content(){return this._content}_escapeRegexMatches(e,t){return e.replace(t,(r,i)=>{const o=`__ph-${this.index}__`;return this.placeholders.push(i),this.index++,o})}}const K1e=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,Q1e=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,e9=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,g2="-shadowcsshost",CN="-shadowcsscontext",SN="(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",J1e=new RegExp(g2+SN,"gim"),ewe=new RegExp(CN+SN,"gim"),twe=new RegExp(CN+SN,"im"),bv=g2+"-no-combinator",t9=/-shadowcsshost-no-combinator([^\s]*)/,nwe=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],n9=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,rwe="([>\\s~+[.,{:][\\s\\S]*)?$",ax=/-shadowcsshost/gim,iwe=/:host/gim,owe=/:host-context/gim,swe=/\r?\n/g,awe=/\/\*[\s\S]*?\*\//g,lwe=/\/\*\s*#\s*source(Mapping)?URL=/g,IN="%COMMENT%",cwe=new RegExp(IN,"g"),r9=/__ph-(\d+)__/g,TN="%BLOCK%",uwe=new RegExp(`(\\s*(?:${IN}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),hwe=new Map([["{","}"]]),i9="%COMMA_IN_PLACEHOLDER%",o9="%SEMI_IN_PLACEHOLDER%",s9="%COLON_IN_PLACEHOLDER%",dwe=new RegExp(i9,"g"),fwe=new RegExp(o9,"g"),pwe=new RegExp(s9,"g");class DN{constructor(e,t){this.selector=e,this.content=t}}function _2(n,e){const t=function ywe(n){let e=n,t=null;for(let r=0;r<e.length;r++){const i=e[r];if("\\"===i)r++;else if(null!==t)if(i===t)t=null;else{const o=_we[i];o&&(e=`${e.substr(0,r)}${o}${e.substr(r+1)}`,r+=o.length-1)}else("'"===i||'"'===i)&&(t=i)}return e}(n),r=function gwe(n,e,t){const r=[],i=[];let m,_,o=0,a=0,d=-1;for(let C=0;C<n.length;C++){const T=n[C];"\\"===T?C++:T===_?(o--,0===o&&(i.push(n.substring(d,C)),r.push(t),a=C,d=-1,m=_=void 0)):T===m?o++:0===o&&e.has(T)&&(m=T,_=e.get(T),o=1,d=C+1,r.push(n.substring(a,d)))}return-1!==d?(i.push(n.substring(d)),r.push(t)):r.push(n.substring(a)),new mwe(r.join(""),i)}(t,hwe,TN);let i=0;return function vwe(n){let e=n.replace(dwe,",");return e=e.replace(fwe,";"),e=e.replace(pwe,":"),e}(r.escapedString.replace(uwe,(...a)=>{const d=a[2];let m="",_=a[4],C="";_&&_.startsWith("{"+TN)&&(m=r.blocks[i++],_=_.substring(TN.length+1),C="{");const T=e(new DN(d,m));return`${a[1]}${T.selector}${a[3]}${C}${T.content}${_}`}))}class mwe{constructor(e,t){this.escapedString=e,this.blocks=t}}const _we={";":o9,",":i9,":":s9};function a9(n,e){return e?n.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):n}function xwe(n,e){const t=n.length;for(let r=1;r<e;r++)for(let i=0;i<t;i++)n[i+r*t]=n[i].slice(0)}var im=function(n){return n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA",n}(im||{});function od(n){if(":"!=n[0])return[null,n];const e=n.indexOf(":",1);if(-1===e)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[n.slice(1,e),n.slice(e+1)]}function AN(n){return"ng-container"===od(n)[1]}function MN(n){return"ng-content"===od(n)[1]}function PN(n){return null===n?null:od(n)[0]}function kN(n,e){return n?`:${n}:${e}`:e}var Ts=function(n){return n[n.Attribute=0]="Attribute",n[n.ClassName=1]="ClassName",n[n.StyleProperty=2]="StyleProperty",n[n.Property=3]="Property",n[n.Template=4]="Template",n[n.I18n=5]="I18n",n[n.Animation=6]="Animation",n}(Ts||{});const lx=Object.freeze([]);class y2{constructor(){this.known=new Set,this.byKind=new Map,this.projectAs=null}get attributes(){return this.byKind.get(Ts.Attribute)??lx}get classes(){return this.byKind.get(Ts.ClassName)??lx}get styles(){return this.byKind.get(Ts.StyleProperty)??lx}get bindings(){return this.byKind.get(Ts.Property)??lx}get template(){return this.byKind.get(Ts.Template)??lx}get i18n(){return this.byKind.get(Ts.I18n)??lx}add(e,t,r){if(this.known.has(t))return;this.known.add(t);const i=this.arrayFor(e);if(i.push(...function Ewe(n){const[e,t]=od(n),r=Yt(t);return e?[Yt(0),Yt(e),r]:[r]}(t)),e===Ts.Attribute||e===Ts.StyleProperty){if(null===r)throw Error("Attribute & style element attributes must have a value");i.push(r)}}arrayFor(e){return this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e)}}function v2(n){if(!(n instanceof y2))throw new Error("AssertionError: ElementAttributes has already been coalesced into the view constants")}var en=function(n){return n[n.ListEnd=0]="ListEnd",n[n.Statement=1]="Statement",n[n.Variable=2]="Variable",n[n.ElementStart=3]="ElementStart",n[n.Element=4]="Element",n[n.Template=5]="Template",n[n.ElementEnd=6]="ElementEnd",n[n.ContainerStart=7]="ContainerStart",n[n.Container=8]="Container",n[n.ContainerEnd=9]="ContainerEnd",n[n.DisableBindings=10]="DisableBindings",n[n.EnableBindings=11]="EnableBindings",n[n.Text=12]="Text",n[n.Listener=13]="Listener",n[n.InterpolateText=14]="InterpolateText",n[n.Binding=15]="Binding",n[n.Property=16]="Property",n[n.StyleProp=17]="StyleProp",n[n.ClassProp=18]="ClassProp",n[n.StyleMap=19]="StyleMap",n[n.ClassMap=20]="ClassMap",n[n.Advance=21]="Advance",n[n.Pipe=22]="Pipe",n[n.Attribute=23]="Attribute",n[n.HostProperty=24]="HostProperty",n[n.Namespace=25]="Namespace",n}(en||{}),io=function(n){return n[n.LexicalRead=0]="LexicalRead",n[n.Context=1]="Context",n[n.ReadVariable=2]="ReadVariable",n[n.NextContext=3]="NextContext",n[n.Reference=4]="Reference",n[n.GetCurrentView=5]="GetCurrentView",n[n.RestoreView=6]="RestoreView",n[n.ResetView=7]="ResetView",n[n.PureFunctionExpr=8]="PureFunctionExpr",n[n.PureFunctionParameterExpr=9]="PureFunctionParameterExpr",n[n.PipeBinding=10]="PipeBinding",n[n.PipeBindingVariadic=11]="PipeBindingVariadic",n[n.SafePropertyRead=12]="SafePropertyRead",n[n.SafeKeyedRead=13]="SafeKeyedRead",n[n.SafeInvokeFunction=14]="SafeInvokeFunction",n[n.SafeTernaryExpr=15]="SafeTernaryExpr",n[n.EmptyExpr=16]="EmptyExpr",n[n.AssignTemporaryExpr=17]="AssignTemporaryExpr",n[n.ReadTemporaryExpr=18]="ReadTemporaryExpr",n[n.SanitizerExpr=19]="SanitizerExpr",n}(io||{}),Bd=function(n){return n[n.Context=0]="Context",n[n.Identifier=1]="Identifier",n[n.SavedView=2]="SavedView",n}(Bd||{}),I_=function(n){return n[n.Normal=0]="Normal",n[n.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",n}(I_||{}),zd=function(n){return n[n.Html=0]="Html",n[n.Script=1]="Script",n[n.Style=2]="Style",n[n.Url=3]="Url",n[n.ResourceUrl=4]="ResourceUrl",n[n.IframeAttribute=5]="IframeAttribute",n}(zd||{});const l9=Symbol("ConsumesSlot"),c9=Symbol("DependsOnSlotContext"),mC=Symbol("UsesSlotIndex"),gC=Symbol("ConsumesVars"),_C=Symbol("UsesVarOffset"),b2={[l9]:!0,slot:null,numSlotsUsed:1},u9={[mC]:!0,slot:null},xv={[c9]:!0},T_={[gC]:!0};function RN(n){return!0===n[l9]}function h9(n){return!0===n[c9]}function d9(n){return!0===n[gC]}function Cwe(n){return!0===n[_C]}function f9(n){return!0===n[mC]}function D_(n){return{kind:en.Statement,statement:n,...rc}}function yC(n,e,t){return{kind:en.Variable,xref:n,variable:e,initializer:t,...rc}}const rc={debugListId:null,prev:null,next:null};class $u{constructor(e,t){this.strings=e,this.expressions=t}}function p9(n,e,t,r,i,o,a,d){return{kind:en.Binding,bindingKind:e,target:n,name:t,expression:r,unit:i,securityContext:o,isTemplate:a,sourceSpan:d,...rc}}function Iwe(n,e,t,r,i,o,a){return{kind:en.Property,target:n,name:e,expression:t,isAnimationTrigger:r,securityContext:i,sanitizer:null,isTemplate:o,sourceSpan:a,...xv,...T_,...rc}}function Twe(n,e,t,r,i){return{kind:en.StyleProp,target:n,name:e,expression:t,unit:r,sourceSpan:i,...xv,...T_,...rc}}function Dwe(n,e,t,r){return{kind:en.ClassProp,target:n,name:e,expression:t,sourceSpan:r,...xv,...T_,...rc}}function Awe(n,e,t){return{kind:en.StyleMap,target:n,expression:e,sourceSpan:t,...xv,...T_,...rc}}function Mwe(n,e,t){return{kind:en.ClassMap,target:n,expression:e,sourceSpan:t,...xv,...T_,...rc}}function Pwe(n,e,t,r,i,o){return{kind:en.Attribute,target:n,name:e,expression:t,securityContext:r,sanitizer:null,isTemplate:i,sourceSpan:o,...xv,...T_,...rc}}function kwe(n,e){return{kind:en.Advance,delta:n,sourceSpan:e,...rc}}var m9,g9,_9,y9,v9,b9,x9,w9,E9;function ug(n){return n instanceof ic}class ic extends Za{constructor(e=null){super(null,e)}}class wv extends ic{constructor(e){super(),this.name=e,this.kind=io.LexicalRead}visitExpression(e,t){}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(){}clone(){return new wv(this.name)}}class vC extends ic{static#e=m9=mC;constructor(e,t){super(),this.target=e,this.offset=t,this.kind=io.Reference,this[m9]=!0,this.slot=null}visitExpression(){}isEquivalent(e){return e instanceof vC&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new vC(this.target,this.offset);return e.slot=this.slot,e}}class Ev extends ic{constructor(e){super(),this.view=e,this.kind=io.Context}visitExpression(){}isEquivalent(e){return e instanceof Ev&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Ev(this.view)}}class bC extends ic{constructor(){super(),this.kind=io.NextContext,this.steps=1}visitExpression(){}isEquivalent(e){return e instanceof bC&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new bC;return e.steps=this.steps,e}}class x2 extends ic{constructor(){super(),this.kind=io.GetCurrentView}visitExpression(){}isEquivalent(e){return e instanceof x2}isConstant(){return!1}transformInternalExpressions(){}clone(){return new x2}}class xC extends ic{constructor(e){super(),this.view=e,this.kind=io.RestoreView}visitExpression(e,t){"number"!=typeof this.view&&this.view.visitExpression(e,t)}isEquivalent(e){return e instanceof xC&&typeof e.view==typeof this.view&&("number"==typeof this.view?this.view===e.view:this.view.isEquivalent(e.view))}isConstant(){return!1}transformInternalExpressions(e,t){"number"!=typeof this.view&&(this.view=Co(this.view,e,t))}clone(){return new xC(this.view instanceof Za?this.view.clone():this.view)}}class w2 extends ic{constructor(e){super(),this.expr=e,this.kind=io.ResetView}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof w2&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=Co(this.expr,e,t)}clone(){return new w2(this.expr.clone())}}class Cv extends ic{constructor(e){super(),this.xref=e,this.kind=io.ReadVariable,this.name=null}visitExpression(){}isEquivalent(e){return e instanceof Cv&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new Cv(this.xref);return e.name=this.name,e}}class Sv extends ic{static#e=(g9=gC,_9=_C);constructor(e,t){super(),this.kind=io.PureFunctionExpr,this[g9]=!0,this[_9]=!0,this.varOffset=null,this.fn=null,this.body=e,this.args=t}visitExpression(e,t){this.body?.visitExpression(e,t);for(const r of this.args)r.visitExpression(e,t)}isEquivalent(e){return e instanceof Sv&&e.args.length===this.args.length&&null!==e.body&&null!==this.body&&e.body.isEquivalent(this.body)&&e.args.every((t,r)=>t.isEquivalent(this.args[r]))}isConstant(){return!1}transformInternalExpressions(e,t){null!==this.body?this.body=Co(this.body,e,t|Rl.InChildOperation):null!==this.fn&&(this.fn=Co(this.fn,e,t));for(let r=0;r<this.args.length;r++)this.args[r]=Co(this.args[r],e,t)}clone(){const e=new Sv(this.body?.clone()??null,this.args.map(t=>t.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}}class Iv extends ic{constructor(e){super(),this.index=e,this.kind=io.PureFunctionParameterExpr}visitExpression(){}isEquivalent(e){return e instanceof Iv&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new Iv(this.index)}}class cx extends ic{static#e=(y9=mC,v9=gC,b9=_C);constructor(e,t,r){super(),this.target=e,this.name=t,this.args=r,this.kind=io.PipeBinding,this[y9]=!0,this[v9]=!0,this[b9]=!0,this.slot=null,this.varOffset=null}visitExpression(e,t){for(const r of this.args)r.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){for(let r=0;r<this.args.length;r++)this.args[r]=Co(this.args[r],e,t)}clone(){const e=new cx(this.target,this.name,this.args.map(t=>t.clone()));return e.slot=this.slot,e.varOffset=this.varOffset,e}}class E2 extends ic{static#e=(x9=mC,w9=gC,E9=_C);constructor(e,t,r,i){super(),this.target=e,this.name=t,this.args=r,this.numArgs=i,this.kind=io.PipeBindingVariadic,this[x9]=!0,this[w9]=!0,this[E9]=!0,this.slot=null,this.varOffset=null}visitExpression(e,t){this.args.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.args=Co(this.args,e,t)}clone(){const e=new E2(this.target,this.name,this.args.clone(),this.numArgs);return e.slot=this.slot,e.varOffset=this.varOffset,e}}class ux extends ic{constructor(e,t){super(),this.receiver=e,this.name=t,this.kind=io.SafePropertyRead}get index(){return this.name}visitExpression(e,t){this.receiver.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Co(this.receiver,e,t)}clone(){return new ux(this.receiver.clone(),this.name)}}class hx extends ic{constructor(e,t){super(),this.receiver=e,this.index=t,this.kind=io.SafeKeyedRead}visitExpression(e,t){this.receiver.visitExpression(e,t),this.index.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Co(this.receiver,e,t),this.index=Co(this.index,e,t)}clone(){return new hx(this.receiver.clone(),this.index.clone())}}class A_ extends ic{constructor(e,t){super(),this.receiver=e,this.args=t,this.kind=io.SafeInvokeFunction}visitExpression(e,t){this.receiver.visitExpression(e,t);for(const r of this.args)r.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Co(this.receiver,e,t);for(let r=0;r<this.args.length;r++)this.args[r]=Co(this.args[r],e,t)}clone(){return new A_(this.receiver.clone(),this.args.map(e=>e.clone()))}}class dx extends ic{constructor(e,t){super(),this.guard=e,this.expr=t,this.kind=io.SafeTernaryExpr}visitExpression(e,t){this.guard.visitExpression(e,t),this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.guard=Co(this.guard,e,t),this.expr=Co(this.expr,e,t)}clone(){return new dx(this.guard.clone(),this.expr.clone())}}class fx extends ic{constructor(){super(...arguments),this.kind=io.EmptyExpr}visitExpression(e,t){}isEquivalent(e){return e instanceof fx}isConstant(){return!0}clone(){return new fx}transformInternalExpressions(){}}class hg extends ic{constructor(e,t){super(),this.expr=e,this.xref=t,this.kind=io.AssignTemporaryExpr,this.name=null}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=Co(this.expr,e,t)}clone(){const e=new hg(this.expr.clone(),this.xref);return e.name=this.name,e}}class Tv extends ic{constructor(e){super(),this.xref=e,this.kind=io.ReadTemporaryExpr,this.name=null}visitExpression(e,t){}isEquivalent(){return this.xref==this.xref}isConstant(){return!1}transformInternalExpressions(e,t){}clone(){const e=new Tv(this.xref);return e.name=this.name,e}}class wC extends ic{constructor(e){super(),this.fn=e,this.kind=io.SanitizerExpr}visitExpression(e,t){}isEquivalent(e){return e instanceof wC&&e.fn===this.fn}isConstant(){return!0}clone(){return new wC(this.fn)}transformInternalExpressions(){}}function sd(n,e){ad(n,(t,r)=>(e(t,r),t),Rl.None)}var Rl=function(n){return n[n.None=0]="None",n[n.InChildOperation=1]="InChildOperation",n}(Rl||{});function ON(n,e,t){for(let r=0;r<n.expressions.length;r++)n.expressions[r]=Co(n.expressions[r],e,t)}function ad(n,e,t){switch(n.kind){case en.StyleProp:case en.StyleMap:case en.ClassProp:case en.ClassMap:case en.Binding:case en.HostProperty:n.expression instanceof $u?ON(n.expression,e,t):n.expression=Co(n.expression,e,t);break;case en.Property:case en.Attribute:n.expression instanceof $u?ON(n.expression,e,t):n.expression=Co(n.expression,e,t),n.sanitizer=n.sanitizer&&Co(n.sanitizer,e,t);break;case en.InterpolateText:ON(n.interpolation,e,t);break;case en.Statement:!function Rwe(n,e,t){if(n instanceof nd)n.expr=Co(n.expr,e,t);else if(n instanceof pl)n.value=Co(n.value,e,t);else{if(!(n instanceof Ld))throw new Error(`Unhandled statement kind: ${n.constructor.name}`);void 0!==n.value&&(n.value=Co(n.value,e,t))}}(n.statement,e,t);break;case en.Variable:n.initializer=Co(n.initializer,e,t);break;case en.Listener:for(const r of n.handlerOps)ad(r,e,t|Rl.InChildOperation);break;case en.Element:case en.ElementStart:case en.ElementEnd:case en.Container:case en.ContainerStart:case en.ContainerEnd:case en.Template:case en.DisableBindings:case en.EnableBindings:case en.Text:case en.Pipe:case en.Advance:case en.Namespace:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${en[n.kind]}`)}}function Co(n,e,t){if(n instanceof ic)n.transformInternalExpressions(e,t);else if(n instanceof Os)n.lhs=Co(n.lhs,e,t),n.rhs=Co(n.rhs,e,t);else if(n instanceof Rd)n.receiver=Co(n.receiver,e,t);else if(n instanceof em)n.receiver=Co(n.receiver,e,t),n.index=Co(n.index,e,t);else if(n instanceof rv)n.receiver=Co(n.receiver,e,t),n.value=Co(n.value,e,t);else if(n instanceof nv)n.receiver=Co(n.receiver,e,t),n.index=Co(n.index,e,t),n.value=Co(n.value,e,t);else if(n instanceof lh){n.fn=Co(n.fn,e,t);for(let r=0;r<n.args.length;r++)n.args[r]=Co(n.args[r],e,t)}else if(n instanceof Od)for(let r=0;r<n.entries.length;r++)n.entries[r]=Co(n.entries[r],e,t);else if(n instanceof pf)for(let r=0;r<n.entries.length;r++)n.entries[r].value=Co(n.entries[r].value,e,t);else if(n instanceof Jp)n.condition=Co(n.condition,e,t),n.trueCase=Co(n.trueCase,e,t),null!==n.falseCase&&(n.falseCase=Co(n.falseCase,e,t));else if(!(n instanceof Qp||n instanceof tg||n instanceof ru))throw new Error(`Unhandled expression kind: ${n.constructor.name}`);return e(n,t)}let Oi=(()=>{class n{static#e=this.nextListId=0;constructor(){this.debugListId=n.nextListId++,this.head={kind:en.ListEnd,next:null,prev:null,debugListId:this.debugListId},this.tail={kind:en.ListEnd,next:null,prev:null,debugListId:this.debugListId},this.head.next=this.tail,this.tail.prev=this.head}push(t){n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=this.debugListId;const r=this.tail.prev;t.prev=r,r.next=t,t.next=this.tail,this.tail.prev=t}prepend(t){if(0===t.length)return;for(const o of t)n.assertIsNotEnd(o),n.assertIsUnowned(o),o.debugListId=this.debugListId;const r=this.head.next;let i=this.head;for(const o of t)i.next=o,o.prev=i,i=o;i.next=r,r.prev=i}*[Symbol.iterator](){let t=this.head.next;for(;t!==this.tail;){n.assertIsOwned(t,this.debugListId);const r=t.next;yield t,t=r}}*reversed(){let t=this.tail.prev;for(;t!==this.head;){n.assertIsOwned(t,this.debugListId);const r=t.prev;yield t,t=r}}static replace(t,r){n.assertIsNotEnd(t),n.assertIsNotEnd(r),n.assertIsOwned(t),n.assertIsUnowned(r),r.debugListId=t.debugListId,null!==t.prev&&(t.prev.next=r,r.prev=t.prev),null!==t.next&&(t.next.prev=r,r.next=t.next),t.debugListId=null,t.prev=null,t.next=null}static replaceWithMany(t,r){if(0===r.length)return void n.remove(t);n.assertIsNotEnd(t),n.assertIsOwned(t);const i=t.debugListId;t.debugListId=null;for(const C of r)n.assertIsNotEnd(C),n.assertIsUnowned(C);const{prev:o,next:a}=t;t.prev=null,t.next=null;let d=o;for(const C of r)this.assertIsUnowned(C),C.debugListId=i,d.next=C,C.prev=d,C.next=null,d=C;const m=r[0],_=d;null!==o&&(o.next=m,m.prev=t.prev),null!==a&&(a.prev=_,_.next=a)}static remove(t){n.assertIsNotEnd(t),n.assertIsOwned(t),t.prev.next=t.next,t.next.prev=t.prev,t.debugListId=null,t.prev=null,t.next=null}static insertBefore(t,r){if(n.assertIsOwned(r),null===r.prev)throw new Error("AssertionError: illegal operation on list start");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=r.debugListId,t.prev=null,r.prev.next=t,t.prev=r.prev,t.next=r,r.prev=t}static insertAfter(t,r){if(n.assertIsOwned(r),null===r.next)throw new Error("AssertionError: illegal operation on list end");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=r.debugListId,r.next.prev=t,t.next=r.next,t.prev=r,r.next=t}static assertIsUnowned(t){if(null!==t.debugListId)throw new Error(`AssertionError: illegal operation on owned node: ${en[t.kind]}`)}static assertIsOwned(t,r){if(null===t.debugListId)throw new Error(`AssertionError: illegal operation on unowned node: ${en[t.kind]}`);if(void 0!==r&&t.debugListId!==r)throw new Error(`AssertionError: node belongs to the wrong list (expected ${r}, actual ${t.debugListId})`)}static assertIsNotEnd(t){if(t.kind===en.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return n})();const Owe=new Set([en.Element,en.ElementStart,en.Container,en.ContainerStart,en.Template]);function LN(n){return Owe.has(n.kind)}function Bwe(n){return{kind:en.DisableBindings,xref:n,...rc}}function zwe(n){return{kind:en.EnableBindings,xref:n,...rc}}function C9(n,e,t){return{kind:en.Text,xref:n,initialValue:e,sourceSpan:t,...b2,...rc}}function $we(n,e,t){return{kind:en.Listener,target:n,tag:t,name:e,handlerOps:new Oi,handlerFnName:null,consumesDollarEvent:!1,isAnimationListener:!1,animationPhase:null,...rc,...u9}}function Vwe(n,e,t,r){return{kind:en.Listener,target:n,tag:r,name:e,handlerOps:new Oi,handlerFnName:null,consumesDollarEvent:!1,isAnimationListener:!0,animationPhase:t,...rc,...u9}}function Uwe(n,e){return{kind:en.Pipe,xref:n,name:e,...rc,...b2}}var om=function(n){return n[n.HTML=0]="HTML",n[n.SVG=1]="SVG",n[n.Math=2]="Math",n}(om||{});function jwe(n){return{kind:en.Namespace,active:n,...rc}}function Gwe(n,e,t){return{kind:en.HostProperty,name:n,expression:e,sourceSpan:t,...T_,...rc}}class S9{constructor(e){this.xref=e,this.create=new Oi,this.update=new Oi,this.fnName=null,this.vars=null}*ops(){for(const e of this.create)if(yield e,e.kind===en.Listener)for(const t of e.handlerOps)yield t;for(const e of this.update)yield e}}class I9 extends S9{constructor(e,t,r){super(0),this.componentName=e,this.pool=t,this.compatibility=r,this.fnSuffix="HostBindings",this.units=[this],this.nextXrefId=1}get job(){return this}get root(){return this}allocateXrefId(){return this.nextXrefId++}}class T9{get units(){return this.views.values()}constructor(e,t,r){this.componentName=e,this.pool=t,this.compatibility=r,this.fnSuffix="Template",this.nextXrefId=0,this.views=new Map,this.consts=[];const i=new C2(this,this.allocateXrefId(),null);this.views.set(i.xref,i),this.root=i}allocateView(e){const t=new C2(this,this.allocateXrefId(),e);return this.views.set(t.xref,t),t}allocateXrefId(){return this.nextXrefId++}addConst(e){for(let r=0;r<this.consts.length;r++)if(this.consts[r].isEquivalent(e))return r;const t=this.consts.length;return this.consts.push(e),t}}class C2 extends S9{constructor(e,t,r){super(t),this.job=e,this.parent=r,this.contextVariables=new Map,this.decls=null}get compatibility(){return this.job.compatibility}}function D9(n){for(const e of n.units){let t=0;for(const r of e.ops())d9(r)&&(t+=Hwe(r)),sd(r,i=>{ug(i)&&(Cwe(i)&&(i.varOffset=t),d9(i)&&(t+=A9(i)))});e.vars=t}if(n instanceof T9)for(const e of n.views.values())for(const t of e.create){if(t.kind!==en.Template)continue;const r=n.views.get(t.xref);t.vars=r.vars}}function Hwe(n){let e;switch(n.kind){case en.Property:case en.HostProperty:case en.Attribute:return e=1,n.expression instanceof $u&&(e+=n.expression.expressions.length),e;case en.StyleProp:case en.ClassProp:case en.StyleMap:case en.ClassMap:return e=2,n.expression instanceof $u&&(e+=n.expression.expressions.length),e;case en.InterpolateText:return n.interpolation.expressions.length;default:throw new Error(`Unhandled op: ${en[n.kind]}`)}}function A9(n){switch(n.kind){case io.PureFunctionExpr:case io.PipeBinding:return 1+n.args.length;case io.PipeBindingVariadic:return 1+n.numArgs;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${n.constructor.name}`)}}function Xwe(n){if(n instanceof lh&&n.fn instanceof wv&&"$any"===n.fn.name){if(1!==n.args.length)throw new Error("The $any builtin function expects exactly one argument.");return n.args[0]}return n}function M9(n){const e=[];let t=0,r=0,i=0,o=0,a=0,d=null;for(;t<n.length;)switch(n.charCodeAt(t++)){case 40:r++;break;case 41:r--;break;case 39:0===i?i=39:39===i&&92!==n.charCodeAt(t-1)&&(i=0);break;case 34:0===i?i=34:34===i&&92!==n.charCodeAt(t-1)&&(i=0);break;case 58:!d&&0===r&&0===i&&(d=NN(n.substring(a,t-1).trim()),o=t);break;case 59:if(d&&o>0&&0===r&&0===i){const _=n.substring(o,t-1).trim();e.push(d,_),a=t,o=0,d=null}}if(d&&o){const m=n.slice(o).trim();e.push(d,m)}return e}function NN(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function P9(n){const e=new Map;for(const t of n.create)LN(t)&&e.set(t.xref,t);return e}function S2(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function Ywe(n){const e=P9(n);for(const t of n.ops()){let r;switch(t.kind){case en.Attribute:Qwe(n,t,e);break;case en.Property:if(t.isAnimationTrigger)continue;r=S2(e,t.target),v2(r.attributes),r.attributes.add(t.isTemplate?Ts.Template:Ts.Property,t.name,null);break;case en.StyleProp:case en.ClassProp:r=S2(e,t.target),v2(r.attributes),n.compatibility===I_.TemplateDefinitionBuilder&&t.expression instanceof fx&&r.attributes.add(Ts.Property,t.name,null);break;case en.Listener:if(t.isAnimationListener)continue;r=S2(e,t.target),v2(r.attributes),r.attributes.add(Ts.Property,t.name,null)}}}function Qwe(n,e,t){if(e.expression instanceof $u)return;const r=S2(t,e.target);if(v2(r.attributes),"style"===e.name&&function Kwe(n){return n instanceof ru&&"string"==typeof n.value}(e.expression)){if(n.compatibility===I_.TemplateDefinitionBuilder&&e.securityContext!==Ma.NONE)return;const i=M9(e.expression.value);for(let o=0;o<i.length-1;o+=2)r.attributes.add(Ts.StyleProperty,i[o],Yt(i[o+1]));Oi.remove(e)}else(n.compatibility===I_.TemplateDefinitionBuilder?e.expression instanceof ru&&"string"==typeof e.expression.value:e.expression.isConstant())&&(r.attributes.add(e.isTemplate?Ts.Template:Ts.Attribute,e.name,e.expression),Oi.remove(e))}function Jwe(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function k9(n){const e=new Map;for(const t of n.units)for(const r of t.create)LN(r)&&e.set(r.xref,r);for(const t of n.units)for(const r of t.ops())if(r.kind===en.Binding)switch(r.bindingKind){case Ts.Attribute:"ngNonBindable"===r.name?(Oi.remove(r),Jwe(e,r.target).nonBindable=!0):Oi.replace(r,Pwe(r.target,r.name,r.expression,r.securityContext,r.isTemplate,r.sourceSpan));break;case Ts.Property:case Ts.Animation:Oi.replace(r,n instanceof I9?Gwe(r.name,r.expression,r.sourceSpan):Iwe(r.target,r.name,r.expression,r.bindingKind===Ts.Animation,r.securityContext,r.isTemplate,r.sourceSpan));break;case Ts.I18n:case Ts.ClassName:case Ts.StyleProperty:throw new Error(`Unhandled binding of kind ${Ts[r.bindingKind]}`)}}const eEe=new Set([ze.elementStart,ze.elementEnd,ze.element,ze.property,ze.hostProperty,ze.styleProp,ze.attribute,ze.stylePropInterpolate1,ze.stylePropInterpolate2,ze.stylePropInterpolate3,ze.stylePropInterpolate4,ze.stylePropInterpolate5,ze.stylePropInterpolate6,ze.stylePropInterpolate7,ze.stylePropInterpolate8,ze.stylePropInterpolateV,ze.classProp,ze.listener,ze.elementContainerStart,ze.elementContainerEnd,ze.elementContainer,ze.listener]);function R9(n){for(const e of n.units)O9(e.create),O9(e.update)}function O9(n){let e=null;for(const t of n){if(t.kind!==en.Statement||!(t.statement instanceof nd)){e=null;continue}if(!(t.statement.expr instanceof lh&&t.statement.expr.fn instanceof tg)){e=null;continue}const r=t.statement.expr.fn.value;if(eEe.has(r))if(null!==e&&e.instruction===r){const i=e.expression.callFn(t.statement.expr.args,t.statement.expr.sourceSpan,t.statement.expr.pure);e.expression=i,e.op.statement=i.toStmt(),Oi.remove(t)}else e={op:t,instruction:r,expression:t.statement.expr};else e=null}}function nEe({attributes:n,bindings:e,classes:t,i18n:r,projectAs:i,styles:o,template:a}){const d=[...n];return null!==i&&d.push(Yt(5),Yt(i)),t.length>0&&d.push(Yt(1),...t),o.length>0&&d.push(Yt(2),...o),e.length>0&&d.push(Yt(3),...e),a.length>0&&d.push(Yt(4),...a),r.length>0&&d.push(Yt(6),...r),ho(d)}const rEe=new Map([[en.ElementEnd,[en.ElementStart,en.Element]],[en.ContainerEnd,[en.ContainerStart,en.Container]]]);function L9(n){for(const e of n.units)for(const t of e.ops())ad(t,r=>uEe(r,{job:n}),Rl.None),ad(t,hEe,Rl.None)}function yf(n){return n instanceof ov?yf(n.expr):n instanceof Os?yf(n.lhs)||yf(n.rhs):n instanceof Jp?!(!n.falseCase||!yf(n.falseCase))||yf(n.condition)||yf(n.trueCase):n instanceof Hb?yf(n.condition):n instanceof hg?yf(n.expr):n instanceof Rd?yf(n.receiver):n instanceof em?yf(n.receiver)||yf(n.index):n instanceof lh||n instanceof Od||n instanceof pf||n instanceof A_||n instanceof cx}function px(n,e,t){let r;if(yf(n)){const i=t.job.allocateXrefId();r=[new hg(n,i),new Tv(i)]}else r=[n,n.clone()],function sEe(n,e,t){Co(n,r=>{if(r instanceof hg&&e.has(r.xref)){const i=new Tv(r.xref);return t.job.compatibility===I_.TemplateDefinitionBuilder?new hg(i,i.xref):i}return r},Rl.None)}(r[1],function oEe(n){const e=new Set;return Co(n,t=>(t instanceof hg&&e.add(t.xref),t),Rl.None),e}(r[0]),t);return new dx(r[0],e(r[1]))}function N9(n){return function aEe(n){return n instanceof ux||n instanceof hx||n instanceof A_}(n)||function lEe(n){return n instanceof Rd||n instanceof em||n instanceof lh}(n)}function uEe(n,e){if(!N9(n))return n;const t=function cEe(n){if(N9(n)&&n.receiver instanceof dx){let e=n.receiver;for(;e.expr instanceof dx;)e=e.expr;return e}return null}(n);if(t){if(n instanceof lh)return t.expr=t.expr.callFn(n.args),n.receiver;if(n instanceof Rd)return t.expr=t.expr.prop(n.name),n.receiver;if(n instanceof em)return t.expr=t.expr.key(n.index),n.receiver;if(n instanceof A_)return t.expr=px(t.expr,r=>r.callFn(n.args),e),n.receiver;if(n instanceof ux)return t.expr=px(t.expr,r=>r.prop(n.name),e),n.receiver;if(n instanceof hx)return t.expr=px(t.expr,r=>r.key(n.index),e),n.receiver}else{if(n instanceof A_)return px(n.receiver,r=>r.callFn(n.args),e);if(n instanceof ux)return px(n.receiver,r=>r.prop(n.name),e);if(n instanceof hx)return px(n.receiver,r=>r.key(n.index),e)}return n}function hEe(n){return n instanceof dx?new Jp(new Os(Jr.Equals,n.guard,av),av,n.expr):n}function fEe(n){F9(n.root,null)}function F9(n,e){const t=function pEe(n,e){const t={view:n.xref,viewContextVariable:{kind:Bd.Context,name:null,view:n.xref},contextVariables:new Map,references:[],parent:e};for(const r of n.contextVariables.keys())t.contextVariables.set(r,{kind:Bd.Identifier,name:null,identifier:r});for(const r of n.create)switch(r.kind){case en.Element:case en.ElementStart:case en.Template:if(!Array.isArray(r.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let i=0;i<r.localRefs.length;i++)t.references.push({name:r.localRefs[i].name,targetId:r.xref,offset:i,variable:{kind:Bd.Identifier,name:null,identifier:r.localRefs[i].name}})}return t}(n,e);for(const i of n.create)switch(i.kind){case en.Template:F9(n.job.views.get(i.xref),t);break;case en.Listener:i.handlerOps.prepend(FN(n,t))}const r=FN(n,t);n.update.prepend(r)}function FN(n,e){const t=[];e.view!==n.xref&&t.push(yC(n.job.allocateXrefId(),e.viewContextVariable,new bC));for(const[r,i]of n.job.views.get(e.view).contextVariables)t.push(yC(n.job.allocateXrefId(),e.contextVariables.get(r),new Rd(new Ev(e.view),i)));for(const r of e.references)t.push(yC(n.job.allocateXrefId(),r.variable,new vC(r.targetId,r.offset)));return null!==e.parent&&t.push(...FN(n,e.parent)),t}[lh,Od,pf,A_,cx].map(n=>n.constructor.name);const B9="style.",z9="class.";function gEe(n){return n.startsWith("--")}function _Ee(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function $9(n){const e=n.indexOf("!important");-1!==e&&(n=e>0?n.substring(0,e):"");let t=null,r=n;const i=n.lastIndexOf(".");return i>0&&(t=n.slice(i+1),r=n.substring(0,i)),{property:r,suffix:t}}function vEe(n){const e=[];for(const t of n)e.push(Yt(t.name),Yt(t.target));return ho(e)}const xEe=new Map([["&&",Jr.And],[">",Jr.Bigger],[">=",Jr.BiggerEquals],["&",Jr.BitwiseAnd],["/",Jr.Divide],["==",Jr.Equals],["===",Jr.Identical],["<",Jr.Lower],["<=",Jr.LowerEquals],["-",Jr.Minus],["%",Jr.Modulo],["*",Jr.Multiply],["!=",Jr.NotEquals],["!==",Jr.NotIdentical],["??",Jr.NullishCoalesce],["||",Jr.Or],["+",Jr.Plus]]),V9=new Map([["svg",om.SVG],["math",om.Math]]);function U9(n){return null===n?om.HTML:V9.get(n)??om.HTML}function EEe(n,e){return e===om.HTML?n:`:${function wEe(n){for(const[e,t]of V9.entries())if(t===n)return e;return null}(e)}:${n}`}function j9(n){G9(n.root,n.componentName,{index:0},n.compatibility===I_.TemplateDefinitionBuilder)}function G9(n,e,t,r){null===n.fnName&&(n.fnName=ag(`${e}_${n.job.fnSuffix}`));const i=new Map;for(const o of n.ops())switch(o.kind){case en.Property:o.isAnimationTrigger&&(o.name="@"+o.name);break;case en.Listener:if(null===o.handlerFnName){if(null===o.slot)throw new Error("Expected a slot to be assigned");const d=o.tag.replace("-","_");o.isAnimationListener?(o.handlerFnName=ag(`${n.fnName}_${d}_animation_${o.name}_${o.animationPhase}_${o.slot}_listener`),o.name=`@${o.name}.${o.animationPhase}`):o.handlerFnName=ag(`${n.fnName}_${d}_${o.name}_${o.slot}_listener`)}break;case en.Variable:i.set(o.xref,CEe(o.variable,t));break;case en.Template:if(!(n instanceof C2))throw new Error("AssertionError: must be compiling a component");const a=n.job.views.get(o.xref);if(null===o.slot)throw new Error("Expected slot to be assigned");G9(a,`${e}_${EEe(o.tag,o.namespace)}_${o.slot}`,t,r);break;case en.StyleProp:o.name=SEe(o.name),r&&(o.name=H9(o.name));break;case en.ClassProp:r&&(o.name=H9(o.name))}for(const o of n.ops())sd(o,a=>{if(a instanceof Cv&&null===a.name){if(!i.has(a.xref))throw new Error(`Variable ${a.xref} not yet named`);a.name=i.get(a.xref)}})}function CEe(n,e){if(null===n.name)switch(n.kind){case Bd.Context:n.name="ctx_r"+e.index++;break;case Bd.Identifier:n.name=`${n.identifier}_${e.index++}`;break;default:n.name="_r"+e.index++}return n.name}function SEe(n){return n.startsWith("--")?n:NN(n)}function H9(n){const e=n.indexOf("!important");return e>-1?n.substring(0,e):n}function q9(n){for(const e of n){if(!(e.kind===en.Statement&&e.statement instanceof nd&&e.statement.expr instanceof bC))continue;const t=e.statement.expr.steps;let r=!0;for(let i=e.next;i.kind!==en.ListEnd&&r;i=i.next)sd(i,(o,a)=>{if(!ug(o))return o;if(r&&!(a&Rl.InChildOperation))switch(o.kind){case io.NextContext:o.steps+=t,Oi.remove(e),r=!1;break;case io.GetCurrentView:case io.Reference:r=!1}})}}const TEe="ng-container";function MEe(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function W9(n){for(const e of n.units)for(const t of e.ops())ad(t,r=>{if(!(r instanceof Os)||r.operator!==Jr.NullishCoalesce)return r;const i=new hg(r.lhs.clone(),n.allocateXrefId()),o=new Tv(i.xref);return new Jp(new Os(Jr.And,new Os(Jr.NotIdentical,i,av),new Os(Jr.NotIdentical,o,new ru(void 0))),o.clone(),r.rhs)},Rl.None)}function REe(n){for(const e of n.update)sd(e,(t,r)=>{if(ug(t)&&t.kind===io.PipeBinding){if(r&Rl.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(!h9(e))throw new Error(`AssertionError: pipe binding associated with non-slot operation ${en[e.kind]}`);OEe(n,e.target,t)}})}function OEe(n,e,t){for(let r=n.create.head.next;r.kind!==en.ListEnd;r=r.next){if(!RN(r)||r.xref!==e)continue;for(;r.next.kind===en.Pipe;)r=r.next;const i=Uwe(t.target,t.name);return void Oi.insertBefore(i,r.next)}throw new Error(`AssertionError: unable to find insertion point for pipe ${t.name}`)}function EC(n){return e=>e.kind===n}const BN=[{test:EC(en.StyleMap),transform:Y9},{test:EC(en.ClassMap),transform:Y9},{test:EC(en.StyleProp)},{test:EC(en.ClassProp)},{test:n=>(n.kind===en.Property||n.kind===en.HostProperty)&&n.expression instanceof $u},{test:n=>!(n.kind!==en.Property&&n.kind!==en.HostProperty||n.expression instanceof $u)},{test:EC(en.Attribute)}],NEe=new Set([en.StyleMap,en.ClassMap,en.StyleProp,en.ClassProp,en.Property,en.HostProperty,en.Attribute]);function X9(n){for(const e of n.units){let t=[];for(const r of e.update)if(NEe.has(r.kind))t.push(r),Oi.remove(r);else{for(const i of Z9(t))Oi.insertBefore(i,r);t=[]}for(const r of Z9(t))e.update.push(r)}}function Z9(n){const e=Array.from(BN,()=>new Array);for(const t of n)e[BN.findIndex(i=>i.test(t))].push(t);return e.flatMap((t,r)=>{const i=BN[r].transform;return i?i(t):t})}function Y9(n){return n.slice(n.length-1)}function K9(n){for(const e of n.units)for(const t of e.ops())sd(t,r=>{if(!(r instanceof Sv)||null===r.body)return;const i=new FEe(r.args.length);r.fn=n.pool.getSharedConstant(i,r.body),r.body=null})}class FEe extends Xb{constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof Iv?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,t){const r=[];for(let o=0;o<this.numArgs;o++)r.push(new jl("_p"+o));const i=Co(t,o=>o instanceof Iv?go("_p"+o.index):o,Rl.None);return new WE(e,r,[new pl(i)])}}function Q9(n){for(const e of n.units)for(const t of e.update)ad(t,(r,i)=>i&Rl.InChildOperation?r:r instanceof Od?BEe(r):r instanceof pf?zEe(r):r,Rl.None)}function BEe(n){const e=[],t=[];for(const r of n.entries)if(r.isConstant())e.push(r);else{const i=t.length;t.push(r),e.push(new Iv(i))}return new Sv(ho(e),t)}function zEe(n){let e=[];const t=[];for(const r of n.entries)if(r.value.isConstant())e.push(r);else{const i=t.length;t.push(r.value),e.push(new sv(r.key,new Iv(i),r.quoted))}return new Sv(Bc(e),t)}function $Ee(n,e,t,r,i){return I2(ze.element,n,e,t,r,i)}function VEe(n,e,t,r,i){return I2(ze.elementStart,n,e,t,r,i)}function I2(n,e,t,r,i,o){const a=[Yt(e)];return null!==t&&a.push(Yt(t)),null!==i?a.push(Yt(r),Yt(i)):null!==r&&a.push(Yt(r)),$c(n,a,o)}function UEe(n){return $c(ze.elementEnd,[],n)}function jEe(n,e,t,r){return I2(ze.elementContainerStart,n,null,e,t,r)}function GEe(n,e,t,r){return I2(ze.elementContainer,n,null,e,t,r)}function qEe(n,e,t,r,i,o,a){return $c(ze.templateCreate,[Yt(n),e,Yt(t),Yt(r),Yt(i),Yt(o)],a)}function ZEe(n,e){return $c(ze.listener,[Yt(n),e],null)}function YEe(n,e){return $c(ze.pipe,[Yt(n),Yt(e)],null)}function eCe(n,e){return $c(ze.advance,[Yt(n)],e)}function sCe(n,e,t){const r=[Yt(n,null)];return""!==e&&r.push(Yt(e)),$c(ze.text,r,t)}function aCe(n,e,t,r){const i=[Yt(n),e];return null!==t&&i.push(t),$c(ze.property,i,r)}function lCe(n,e,t){const r=[Yt(n),e];return null!==t&&r.push(t),$c(ze.attribute,r,null)}function cCe(n,e,t){const r=[Yt(n),e];return null!==t&&r.push(Yt(t)),$c(ze.styleProp,r,null)}function uCe(n,e){return $c(ze.classProp,[Yt(n),e],null)}function hCe(n){return $c(ze.styleMap,[n],null)}function dCe(n){return $c(ze.classMap,[n],null)}const J9=[ze.pipeBind1,ze.pipeBind2,ze.pipeBind3,ze.pipeBind4];function mCe(n,e,t){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");const r=[];if(1===e.length&&""===n[0]&&""===n[1])r.push(e[0]);else{let i;for(i=0;i<e.length;i++)r.push(Yt(n[i]),e[i]);r.push(Yt(n[i]))}return mx(ECe,[],r,[],t)}function gCe(n,e,t,r,i){const o=CC(e,t),a=[];return null!==r&&a.push(r),mx(CCe,[Yt(n)],o,a,i)}function _Ce(n,e,t,r){const i=CC(e,t),o=[];return null!==r&&o.push(r),mx(ICe,[Yt(n)],i,o,null)}function yCe(n,e,t,r){const i=CC(e,t),o=[];return null!==r&&o.push(Yt(r)),mx(SCe,[Yt(n)],i,o,null)}function vCe(n,e){const t=CC(n,e);return mx(TCe,[],t,[],null)}function bCe(n,e){const t=CC(n,e);return mx(DCe,[],t,[],null)}function xCe(n,e){return $c(ze.hostProperty,[Yt(n),e],null)}function CC(n,e){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");const t=[];if(1===e.length&&""===n[0]&&""===n[1])t.push(e[0]);else{let r;for(r=0;r<e.length;r++)t.push(Yt(n[r]),e[r]);t.push(Yt(n[r]))}return t}function $c(n,e,t){const r=Br(n).callFn(e,t);return D_(new nd(r,t))}const ECe={constant:[ze.textInterpolate,ze.textInterpolate1,ze.textInterpolate2,ze.textInterpolate3,ze.textInterpolate4,ze.textInterpolate5,ze.textInterpolate6,ze.textInterpolate7,ze.textInterpolate8],variable:ze.textInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},CCe={constant:[ze.propertyInterpolate,ze.propertyInterpolate1,ze.propertyInterpolate2,ze.propertyInterpolate3,ze.propertyInterpolate4,ze.propertyInterpolate5,ze.propertyInterpolate6,ze.propertyInterpolate7,ze.propertyInterpolate8],variable:ze.propertyInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},SCe={constant:[ze.styleProp,ze.stylePropInterpolate1,ze.stylePropInterpolate2,ze.stylePropInterpolate3,ze.stylePropInterpolate4,ze.stylePropInterpolate5,ze.stylePropInterpolate6,ze.stylePropInterpolate7,ze.stylePropInterpolate8],variable:ze.stylePropInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},ICe={constant:[ze.attribute,ze.attributeInterpolate1,ze.attributeInterpolate2,ze.attributeInterpolate3,ze.attributeInterpolate4,ze.attributeInterpolate5,ze.attributeInterpolate6,ze.attributeInterpolate7,ze.attributeInterpolate8],variable:ze.attributeInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},TCe={constant:[ze.styleMap,ze.styleMapInterpolate1,ze.styleMapInterpolate2,ze.styleMapInterpolate3,ze.styleMapInterpolate4,ze.styleMapInterpolate5,ze.styleMapInterpolate6,ze.styleMapInterpolate7,ze.styleMapInterpolate8],variable:ze.styleMapInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},DCe={constant:[ze.classMap,ze.classMapInterpolate1,ze.classMapInterpolate2,ze.classMapInterpolate3,ze.classMapInterpolate4,ze.classMapInterpolate5,ze.classMapInterpolate6,ze.classMapInterpolate7,ze.classMapInterpolate8],variable:ze.classMapInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},ACe={constant:[ze.pureFunction0,ze.pureFunction1,ze.pureFunction2,ze.pureFunction3,ze.pureFunction4,ze.pureFunction5,ze.pureFunction6,ze.pureFunction7,ze.pureFunction8],variable:ze.pureFunctionV,mapping:n=>n};function e7(n,e,t,r,i){const o=n.mapping(t.length);if(o<n.constant.length)return Br(n.constant[o]).callFn([...e,...t,...r],i);if(null!==n.variable)return Br(n.variable).callFn([...e,ho(t),...r],i);throw new Error("AssertionError: unable to call variadic function")}function mx(n,e,t,r,i){return D_(e7(n,e,t,r,i).toStmt())}const MCe=new Map([[zd.Html,ze.sanitizeHtml],[zd.IframeAttribute,ze.validateIframeAttribute],[zd.ResourceUrl,ze.sanitizeResourceUrl],[zd.Script,ze.sanitizeScript],[zd.Style,ze.sanitizeStyle],[zd.Url,ze.sanitizeUrl]]);function t7(n){for(const e of n.units)PCe(e,e.create),n7(0,e.update)}function PCe(n,e){for(const t of e)switch(ad(t,r7,Rl.None),t.kind){case en.Text:Oi.replace(t,sCe(t.slot,t.initialValue,t.sourceSpan));break;case en.ElementStart:Oi.replace(t,VEe(t.slot,t.tag,t.attributes,t.localRefs,t.sourceSpan));break;case en.Element:Oi.replace(t,$Ee(t.slot,t.tag,t.attributes,t.localRefs,t.sourceSpan));break;case en.ElementEnd:Oi.replace(t,UEe(t.sourceSpan));break;case en.ContainerStart:Oi.replace(t,jEe(t.slot,t.attributes,t.localRefs,t.sourceSpan));break;case en.Container:Oi.replace(t,GEe(t.slot,t.attributes,t.localRefs,t.sourceSpan));break;case en.ContainerEnd:Oi.replace(t,$c(ze.elementContainerEnd,[],null));break;case en.Template:if(!(n instanceof C2))throw new Error("AssertionError: must be compiling a component");const r=n.job.views.get(t.xref);Oi.replace(t,qEe(t.slot,go(r.fnName),r.decls,r.vars,t.tag,t.attributes,t.sourceSpan));break;case en.DisableBindings:Oi.replace(t,$c(ze.disableBindings,[],null));break;case en.EnableBindings:Oi.replace(t,$c(ze.enableBindings,[],null));break;case en.Pipe:Oi.replace(t,YEe(t.slot,t.name));break;case en.Listener:const i=kCe(0,t.handlerFnName,t.handlerOps,t.consumesDollarEvent);Oi.replace(t,ZEe(t.name,i));break;case en.Variable:if(null===t.variable.name)throw new Error(`AssertionError: unnamed variable ${t.xref}`);Oi.replace(t,D_(new Ld(t.variable.name,t.initializer,void 0,td.Final)));break;case en.Namespace:switch(t.active){case om.HTML:Oi.replace(t,$c(ze.namespaceHTML,[],null));break;case om.SVG:Oi.replace(t,$c(ze.namespaceSVG,[],null));break;case om.Math:Oi.replace(t,$c(ze.namespaceMathML,[],null))}break;case en.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${en[t.kind]}`)}}function n7(n,e){for(const t of e)switch(ad(t,r7,Rl.None),t.kind){case en.Advance:Oi.replace(t,eCe(t.delta,t.sourceSpan));break;case en.Property:Oi.replace(t,t.expression instanceof $u?gCe(t.name,t.expression.strings,t.expression.expressions,t.sanitizer,t.sourceSpan):aCe(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case en.StyleProp:Oi.replace(t,t.expression instanceof $u?yCe(t.name,t.expression.strings,t.expression.expressions,t.unit):cCe(t.name,t.expression,t.unit));break;case en.ClassProp:Oi.replace(t,uCe(t.name,t.expression));break;case en.StyleMap:Oi.replace(t,t.expression instanceof $u?vCe(t.expression.strings,t.expression.expressions):hCe(t.expression));break;case en.ClassMap:Oi.replace(t,t.expression instanceof $u?bCe(t.expression.strings,t.expression.expressions):dCe(t.expression));break;case en.InterpolateText:Oi.replace(t,mCe(t.interpolation.strings,t.interpolation.expressions,t.sourceSpan));break;case en.Attribute:Oi.replace(t,t.expression instanceof $u?_Ce(t.name,t.expression.strings,t.expression.expressions,t.sanitizer):lCe(t.name,t.expression,t.sanitizer));break;case en.HostProperty:if(t.expression instanceof $u)throw new Error("not yet handled");Oi.replace(t,xCe(t.name,t.expression));break;case en.Variable:if(null===t.variable.name)throw new Error(`AssertionError: unnamed variable ${t.xref}`);Oi.replace(t,D_(new Ld(t.variable.name,t.initializer,void 0,td.Final)));break;case en.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${en[t.kind]}`)}}function r7(n){if(!ug(n))return n;switch(n.kind){case io.NextContext:return function nCe(n){return Br(ze.nextContext).callFn(1===n?[]:[Yt(n)])}(n.steps);case io.Reference:return function tCe(n){return Br(ze.reference).callFn([Yt(n)])}(n.slot+1+n.offset);case io.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${n.name}`);case io.RestoreView:if("number"==typeof n.view)throw new Error("AssertionError: unresolved RestoreView");return function iCe(n){return Br(ze.restoreView).callFn([n])}(n.view);case io.ResetView:return function oCe(n){return Br(ze.resetView).callFn([n])}(n.expr);case io.GetCurrentView:return function rCe(){return Br(ze.getCurrentView).callFn([])}();case io.ReadVariable:if(null===n.name)throw new Error(`Read of unnamed variable ${n.xref}`);return go(n.name);case io.ReadTemporaryExpr:if(null===n.name)throw new Error(`Read of unnamed temporary ${n.xref}`);return go(n.name);case io.AssignTemporaryExpr:if(null===n.name)throw new Error(`Assign of unnamed temporary ${n.xref}`);return go(n.name).set(n.expr);case io.PureFunctionExpr:if(null===n.fn)throw new Error("AssertionError: expected PureFunctions to have been extracted");return function wCe(n,e,t){return e7(ACe,[Yt(n),e],t,[],null)}(n.varOffset,n.fn,n.args);case io.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case io.PipeBinding:return function fCe(n,e,t){if(t.length<1||t.length>J9.length)throw new Error("pipeBind() argument count out of bounds");return Br(J9[t.length-1]).callFn([Yt(n),Yt(e),...t])}(n.slot,n.varOffset,n.args);case io.PipeBindingVariadic:return function pCe(n,e,t){return Br(ze.pipeBindV).callFn([Yt(n),Yt(e),t])}(n.slot,n.varOffset,n.args);case io.SanitizerExpr:return Br(MCe.get(n.fn));default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${io[n.kind]}`)}}function kCe(n,e,t,r){n7(0,t);const i=[];for(const a of t){if(a.kind!==en.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${en[a.kind]}`);i.push(a.statement)}const o=[];return r&&o.push(new jl("$event")),nc(o,i,void 0,void 0,e)}function i7(n){for(const e of n.units)zN(e,e.create),zN(e,e.update)}function zN(n,e){const t=new Map;t.set(n.xref,go("ctx"));for(const r of e)switch(r.kind){case en.Variable:r.variable.kind===Bd.Context&&t.set(r.variable.view,new Cv(r.xref));break;case en.Listener:zN(n,r.handlerOps)}for(const r of e)ad(r,i=>{if(i instanceof Ev){if(!t.has(i.view))throw new Error(`No context found for reference to view ${i.view} from view ${n.xref}`);return t.get(i.view)}return i},Rl.None)}function o7(n,e){for(const t of e)t.kind===en.Listener&&ad(t,r=>r instanceof wv&&"$event"===r.name?(t.consumesDollarEvent=!0,new Qp(r.name)):r,Rl.InChildOperation)}function s7(n){for(const e of n.units)$N(e,e.create,null),$N(e,e.update,null)}function $N(n,e,t){const r=new Map;for(const i of e)switch(i.kind){case en.Variable:switch(i.variable.kind){case Bd.Identifier:if(r.has(i.variable.identifier))continue;r.set(i.variable.identifier,i.xref);break;case Bd.SavedView:t={view:i.variable.view,variable:i.xref}}break;case en.Listener:$N(n,i.handlerOps,t)}for(const i of e)i.kind!=en.Listener&&ad(i,(o,a)=>{if(o instanceof wv)return r.has(o.name)?new Cv(r.get(o.name)):new Rd(new Ev(n.job.root.xref),o.name);if(o instanceof xC&&"number"==typeof o.view){if(null===t||t.view!==o.view)throw new Error(`AssertionError: no saved view ${o.view} from view ${n.xref}`);return o.view=new Cv(t.variable),o}return o},Rl.None);for(const i of e)sd(i,o=>{if(o instanceof wv)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${o.name}`)})}const LCe=new Map([[Ma.HTML,zd.Html],[Ma.SCRIPT,zd.Script],[Ma.STYLE,zd.Style],[Ma.URL,zd.Url],[Ma.RESOURCE_URL,zd.ResourceUrl]]);function FCe(n){return(n.kind===en.Element||n.kind===en.ElementStart)&&"iframe"===n.tag.toLowerCase()}function zCe(n,e){e.handlerOps.prepend([yC(n.job.allocateXrefId(),{kind:Bd.Context,name:null,view:n.xref},new xC(n.xref))]);for(const t of e.handlerOps)t.kind===en.Statement&&t.statement instanceof pl&&(t.statement.value=new w2(t.statement.value))}function a7(n){for(const e of n.units)for(const t of e.update)if(t.kind===en.Binding)switch(t.bindingKind){case Ts.ClassName:if(t.expression instanceof $u)throw new Error("Unexpected interpolation in ClassName binding");Oi.replace(t,Dwe(t.target,t.name,t.expression,t.sourceSpan));break;case Ts.StyleProperty:Oi.replace(t,Twe(t.target,t.name,t.expression,t.unit,t.sourceSpan));break;case Ts.Property:case Ts.Template:"style"===t.name?Oi.replace(t,Awe(t.target,t.expression,t.sourceSpan)):"class"===t.name&&Oi.replace(t,Mwe(t.target,t.expression,t.sourceSpan))}}function l7(n){for(const e of n.units){let t=0,r=[];for(const i of e.ops()){const o=new Map;sd(i,C=>{C instanceof Tv&&o.set(C.xref,C)});let a=0;const d=new Set,m=new Set,_=new Map;sd(i,C=>{C instanceof hg?(d.has(C.xref)||(d.add(C.xref),_.set(C.xref,`tmp_${t}_${a++}`)),c7(_,C)):C instanceof Tv&&(o.get(C.xref)===C&&(m.add(C.xref),a--),c7(_,C))}),r.push(...Array.from(new Set(_.values())).map(C=>D_(new Ld(C)))),t++}e.update.prepend(r)}}function c7(n,e){const t=n.get(e.xref);if(void 0===t)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=t}function u7(n){for(const e of n.units){VN(e.create,n.compatibility),VN(e.update,n.compatibility);for(const t of e.create)t.kind===en.Listener&&VN(t.handlerOps,n.compatibility)}}var Lh=function(n){return n[n.None=0]="None",n[n.ViewContextRead=1]="ViewContextRead",n[n.ViewContextWrite=3]="ViewContextWrite",n[n.SideEffectful=4]="SideEffectful",n}(Lh||{});function VN(n,e){const t=new Map,r=new Map,i=new Set,o=new Map;for(const _ of n){if(_.kind===en.Variable){if(t.has(_.xref)||r.has(_.xref))throw new Error(`Should not see two declarations of the same variable: ${_.xref}`);t.set(_.xref,_),r.set(_.xref,0)}o.set(_,VCe(_)),UCe(_,r,i)}let a=!1;for(const _ of n.reversed()){const C=o.get(_);if(_.kind!==en.Variable||0!==r.get(_.xref))C.fences&Lh.ViewContextRead&&(a=!0);else{if(a&&C.fences&Lh.ViewContextWrite||C.fences&Lh.SideEffectful){const T=D_(_.initializer.toStmt());o.set(T,C),Oi.replace(_,T)}else jCe(_,r),Oi.remove(_);o.delete(_),t.delete(_.xref),r.delete(_.xref)}}const d=[];for(const[_,C]of r)1===C&&(i.has(_)||d.push(_));let m;for(;m=d.pop();){const _=t.get(m),C=o.get(_);for(let T=_.next;T.kind!==en.ListEnd;T=T.next){const R=o.get(T);if(R.variablesUsed.has(m)){if(e===I_.TemplateDefinitionBuilder&&!HCe(_,T))break;if(GCe(m,_.initializer,T,C.fences)){R.variablesUsed.delete(m);for(const L of C.variablesUsed)R.variablesUsed.add(L);R.fences|=C.fences,t.delete(m),r.delete(m),o.delete(_),Oi.remove(_)}break}if(!d7(R.fences,C.fences))break}}}function h7(n){switch(n.kind){case io.NextContext:return Lh.ViewContextWrite;case io.RestoreView:return Lh.ViewContextWrite|Lh.SideEffectful;case io.Reference:return Lh.ViewContextRead;default:return Lh.None}}function VCe(n){let e=Lh.None;const t=new Set;return sd(n,r=>{ug(r)&&(r.kind===io.ReadVariable?t.add(r.xref):e|=h7(r))}),{fences:e,variablesUsed:t}}function UCe(n,e,t){sd(n,(r,i)=>{if(!ug(r)||r.kind!==io.ReadVariable)return;const o=e.get(r.xref);void 0!==o&&(e.set(r.xref,o+1),i&Rl.InChildOperation&&t.add(r.xref))})}function jCe(n,e){sd(n,t=>{if(!ug(t)||t.kind!==io.ReadVariable)return;const r=e.get(t.xref);if(void 0!==r){if(0===r)throw new Error(`Inaccurate variable count: ${t.xref} - found another read but count is already 0`);e.set(t.xref,r-1)}})}function d7(n,e){if(n&Lh.ViewContextWrite){if(e&Lh.ViewContextRead)return!1}else if(n&Lh.ViewContextRead&&e&Lh.ViewContextWrite)return!1;return!0}function GCe(n,e,t,r){let i=!1,o=!0;return ad(t,(a,d)=>{if(!ug(a)||i||!o)return a;if(d&Rl.InChildOperation&&r&Lh.ViewContextRead)return a;if(a.kind===io.ReadVariable){if(a.xref===n)return i=!0,e}else{const m=h7(a);o=o&&d7(m,r)}return a},Rl.None),i}function HCe(n,e){switch(n.variable.kind){case Bd.Identifier:return!1;case Bd.Context:return e.kind===en.Variable;default:return!0}}function XCe(n,e){const t=p7(n.root);return f7(n.root,e),t}function f7(n,e){for(const t of n.job.views.values()){if(t.parent!==n.xref)continue;f7(t,e);const r=p7(t);e.statements.push(r.toDeclStmt(r.name))}}function p7(n){if(null===n.fnName)throw new Error(`AssertionError: view ${n.xref} is unnamed`);const e=[];for(const o of n.create){if(o.kind!==en.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${en[o.kind]}`);e.push(o.statement)}const t=[];for(const o of n.update){if(o.kind!==en.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${en[o.kind]}`);t.push(o.statement)}const r=T2(1,e),i=T2(2,t);return nc([new jl("rf"),new jl("ctx")],[...r,...i],void 0,void 0,n.fnName)}function T2(n,e){return 0===e.length?[]:[ZE(new Os(Jr.BitwiseAnd,go("rf"),Yt(n)),e)]}const m7=I_.TemplateDefinitionBuilder;function QCe(n,e){let t;const r=e.expression.ast;t=r instanceof Eu?new $u(r.strings,r.expressions.map(o=>ua(o,n))):ua(r,n);let i=Ts.Property;e.name.startsWith("attr.")&&(e.name=e.name.substring(5),i=Ts.Attribute),n.update.push(p9(n.root.xref,i,e.name,t,null,Ma.NONE,!1,e.sourceSpan))}function UN(n,e){for(const t of e)if(t instanceof KE)JCe(n,t);else if(t instanceof nm)eSe(n,t);else if(t instanceof uv)tSe(n,t);else{if(!(t instanceof FA))throw new Error(`Unsupported template node: ${t.constructor.name}`);nSe(n,t)}}function JCe(n,e){const t={};for(const d of e.attributes)t[d.name]=d.value;const r=n.job.allocateXrefId(),[i,o]=od(e.name),a=function Lwe(n,e,t,r){return{kind:en.ElementStart,xref:e,tag:n,attributes:new y2,localRefs:[],nonBindable:!1,namespace:t,sourceSpan:r,...b2,...rc}}(o,r,U9(i),e.startSourceSpan);n.create.push(a),g7(n,a,e),_7(a,e),UN(n,e.children),n.create.push(function Fwe(n,e){return{kind:en.ElementEnd,xref:n,sourceSpan:e,...rc}}(r,e.endSourceSpan))}function eSe(n,e){const t=n.job.allocateView(n.xref);let r=e.tagName,i="";e.tagName&&([i,r]=od(e.tagName));const o=function Nwe(n,e,t,r){return{kind:en.Template,xref:n,attributes:new y2,tag:e,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:t,sourceSpan:r,...b2,...rc}}(t.xref,r??"ng-template",U9(i),e.startSourceSpan);n.create.push(o),g7(n,o,e),_7(o,e),UN(t,e.children);for(const{name:a,value:d}of e.variables)t.contextVariables.set(a,d)}function tSe(n,e){n.create.push(C9(n.job.allocateXrefId(),e.value,e.sourceSpan))}function nSe(n,e){let t=e.value;if(t instanceof _f&&(t=t.ast),!(t instanceof Eu))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${t.constructor.name}`);const r=n.job.allocateXrefId();n.create.push(C9(r,"",e.sourceSpan)),n.update.push(function Swe(n,e,t){return{kind:en.InterpolateText,target:n,interpolation:e,sourceSpan:t,...xv,...T_,...rc}}(r,new $u(t.strings,t.expressions.map(i=>ua(i,n.job))),e.sourceSpan))}function ua(n,e){if(n instanceof _f)return ua(n.ast,e);if(n instanceof lg)return n.receiver instanceof S_&&!(n.receiver instanceof lC)?new wv(n.name):new Rd(ua(n.receiver,e),n.name);if(n instanceof l2)return new rv(ua(n.receiver,e),n.name,ua(n.value,e));if(n instanceof u2)return new nv(ua(n.receiver,e),ua(n.key,e),ua(n.value,e));if(n instanceof vv){if(n.receiver instanceof S_)throw new Error("Unexpected ImplicitReceiver");return new lh(ua(n.receiver,e),n.args.map(t=>ua(t,e)))}if(n instanceof id)return Yt(n.value);if(n instanceof op){const t=xEe.get(n.operation);if(void 0===t)throw new Error(`AssertionError: unknown binary operator ${n.operation}`);return new Os(t,ua(n.left,e),ua(n.right,e))}if(n instanceof lC)return new Ev(e.root.xref);if(n instanceof uC)return new em(ua(n.receiver,e),ua(n.key,e));if(n instanceof cC)throw new Error("AssertionError: Chain in unknown context");if(n instanceof h2){const t=n.keys.map((r,i)=>new sv(r.key,ua(n.values[i],e),r.quoted));return new pf(t)}if(n instanceof fC)return new Od(n.expressions.map(t=>ua(t,e)));if(n instanceof a2)return new Jp(ua(n.condition,e),ua(n.trueExp,e),ua(n.falseExp,e));if(n instanceof d2)return ua(n.expression,e);if(n instanceof dC)return new cx(e.allocateXrefId(),n.name,[ua(n.exp,e),...n.args.map(t=>ua(t,e))]);if(n instanceof hC)return new hx(ua(n.receiver,e),ua(n.key,e));if(n instanceof c2)return new ux(ua(n.receiver,e),n.name);if(n instanceof pC)return new A_(ua(n.receiver,e),n.args.map(t=>ua(t,e)));if(n instanceof Fd)return new fx;throw new Error(`Unhandled expression type: ${n.constructor.name}`)}function g7(n,e,t){if(t instanceof nm)for(const r of t.templateAttrs)r instanceof BA?D2(n,e.xref,r.name,Yt(r.value),1,null,Ma.NONE,r.sourceSpan,!0):D2(n,e.xref,r.name,r.value,r.type,r.unit,r.securityContext,r.sourceSpan,!0);for(const r of t.attributes)D2(n,e.xref,r.name,Yt(r.value),1,null,Ma.NONE,r.sourceSpan,!1);for(const r of t.inputs)D2(n,e.xref,r.name,r.value,r.type,r.unit,r.securityContext,r.sourceSpan,!1);for(const r of t.outputs){let i;if(1===r.type){if(null===r.phase)throw Error("Animation listener should have a phase");i=Vwe(e.xref,r.name,r.phase,e.tag)}else i=$we(e.xref,r.name,e.tag);let o,a=r.handler;if(a instanceof _f&&(a=a.ast),o=a instanceof cC?a.expressions:[a],0===o.length)throw new Error("Expected listener to have non-empty expression list.");const d=o.map(_=>ua(_,n.job)),m=d.pop();for(const _ of d){const C=D_(new nd(_));i.handlerOps.push(C)}i.handlerOps.push(D_(new pl(m))),n.create.push(i)}}const rSe=new Map([[0,Ts.Property],[1,Ts.Attribute],[2,Ts.ClassName],[3,Ts.StyleProperty],[4,Ts.Animation]]);function D2(n,e,t,r,i,o,a,d,m){let _;r instanceof _f&&(r=r.ast),_=r instanceof Eu?new $u(r.strings,r.expressions.map(T=>ua(T,n.job))):r instanceof zc?ua(r,n.job):r;const C=rSe.get(i);n.update.push(p9(e,C,t,_,o,a,m,d))}function _7(n,e){!function iSe(n){if(!Array.isArray(n))throw new Error("AssertionError: expected an array")}(n.localRefs);for(const{name:t,value:r}of e.references)n.localRefs.push({name:t,target:r})}const y7=!1,A2=2;class v7{constructor(e){this._directiveExpr=e,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}registerBoundInput(e){let t=null,r=e.name;switch(e.type){case 0:t=this.registerInputBasedOnName(r,e.value,e.sourceSpan);break;case 3:t=this.registerStyleInput(r,!1,e.value,e.sourceSpan,e.unit);break;case 2:t=this.registerClassInput(r,!1,e.value,e.sourceSpan)}return!!t}registerInputBasedOnName(e,t,r){let i=null;const o=e.substring(0,6),a="style"===e||"style."===o||"style!"===o;if(a||!a&&("class"===e||"class."===o||"class!"===o)){const m="."!==e.charAt(5),_=e.slice(m?5:6);i=a?this.registerStyleInput(_,m,t,r):this.registerClassInput(_,m,t,r)}return i}registerStyleInput(e,t,r,i,o){if(w7(r))return null;(function cSe(n){return n.startsWith("--")})(e)||(e=NN(e));const{property:a,hasOverrideFlag:d,suffix:m}=x7(e),_={name:a,suffix:o="string"==typeof o&&0!==o.length?o:m,value:r,sourceSpan:i,hasOverrideFlag:d};return t?this._styleMapInput=_:((this._singleStyleInputs=this._singleStyleInputs||[]).push(_),b7(this._stylesIndex,a)),this._lastStylingInput=_,this._firstStylingInput=this._firstStylingInput||_,this._checkForPipes(r),this.hasBindings=!0,_}registerClassInput(e,t,r,i){if(w7(r))return null;const{property:o,hasOverrideFlag:a}=x7(e),d={name:o,value:r,sourceSpan:i,hasOverrideFlag:a,suffix:null};return t?this._classMapInput=d:((this._singleClassInputs=this._singleClassInputs||[]).push(d),b7(this._classesIndex,o)),this._lastStylingInput=d,this._firstStylingInput=this._firstStylingInput||d,this._checkForPipes(r),this.hasBindings=!0,d}_checkForPipes(e){e instanceof _f&&e.ast instanceof dC&&(this.hasBindingsWithPipes=!0)}registerStyleAttr(e){this._initialStyleValues=M9(e),this._hasInitialValues=!0}registerClassAttr(e){this._initialClassValues=e.trim().split(/\s+/g),this._hasInitialValues=!0}populateInitialStylingAttrs(e){if(this._initialClassValues.length){e.push(Yt(1));for(let t=0;t<this._initialClassValues.length;t++)e.push(Yt(this._initialClassValues[t]))}if(this._initialStyleValues.length){e.push(Yt(2));for(let t=0;t<this._initialStyleValues.length;t+=2)e.push(Yt(this._initialStyleValues[t]),Yt(this._initialStyleValues[t+1]))}}assignHostAttrs(e,t){this._directiveExpr&&(e.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(e),t.set("hostAttrs",ho(e)))}buildClassMapInstruction(e){return this._classMapInput?this._buildMapBasedInstruction(e,!0,this._classMapInput):null}buildStyleMapInstruction(e){return this._styleMapInput?this._buildMapBasedInstruction(e,!1,this._styleMapInput):null}_buildMapBasedInstruction(e,t,r){let i=A2;const o=r.value.visit(e);let a;return o instanceof Eu?(i+=o.expressions.length,a=t?function sSe(n){switch(fv(n)){case 1:return ze.classMap;case 3:return ze.classMapInterpolate1;case 5:return ze.classMapInterpolate2;case 7:return ze.classMapInterpolate3;case 9:return ze.classMapInterpolate4;case 11:return ze.classMapInterpolate5;case 13:return ze.classMapInterpolate6;case 15:return ze.classMapInterpolate7;case 17:return ze.classMapInterpolate8;default:return ze.classMapInterpolateV}}(o):function aSe(n){switch(fv(n)){case 1:return ze.styleMap;case 3:return ze.styleMapInterpolate1;case 5:return ze.styleMapInterpolate2;case 7:return ze.styleMapInterpolate3;case 9:return ze.styleMapInterpolate4;case 11:return ze.styleMapInterpolate5;case 13:return ze.styleMapInterpolate6;case 15:return ze.styleMapInterpolate7;case 17:return ze.styleMapInterpolate8;default:return ze.styleMapInterpolateV}}(o)):a=t?ze.classMap:ze.styleMap,{reference:a,calls:[{supportsInterpolation:!0,sourceSpan:r.sourceSpan,allocateBindingSlots:i,params:d=>{const m=d(o);return Array.isArray(m)?m:[m]}}]}}_buildSingleInputs(e,t,r,i,o){const a=[];return t.forEach(d=>{const m=a[a.length-1],_=d.value.visit(r);let C=e,T=A2;_ instanceof Eu&&(T+=_.expressions.length,i&&(C=i(_)));const R={sourceSpan:d.sourceSpan,allocateBindingSlots:T,supportsInterpolation:!!i,params:L=>{const G=[];G.push(Yt(d.name));const W=L(_);return Array.isArray(W)?G.push(...W):G.push(W),!o&&null!==d.suffix&&G.push(Yt(d.suffix)),G}};m&&m.reference===C?m.calls.push(R):a.push({reference:C,calls:[R]})}),a}_buildClassInputs(e){return this._singleClassInputs?this._buildSingleInputs(ze.classProp,this._singleClassInputs,e,null,!0):[]}_buildStyleInputs(e){return this._singleStyleInputs?this._buildSingleInputs(ze.styleProp,this._singleStyleInputs,e,lSe,!1):[]}buildUpdateLevelInstructions(e){const t=[];if(this.hasBindings){const r=this.buildStyleMapInstruction(e);r&&t.push(r);const i=this.buildClassMapInstruction(e);i&&t.push(i),t.push(...this._buildStyleInputs(e)),t.push(...this._buildClassInputs(e))}return t}}function b7(n,e){n.has(e)||n.set(e,n.size)}function x7(n){let e=!1;const t=n.indexOf("!important");-1!==t&&(n=t>0?n.substring(0,t):"",e=!0);let r=null,i=n;const o=n.lastIndexOf(".");return o>0&&(r=n.slice(o+1),i=n.substring(0,o)),{property:i,suffix:r,hasOverrideFlag:e}}function lSe(n){switch(fv(n)){case 1:return ze.styleProp;case 3:return ze.stylePropInterpolate1;case 5:return ze.stylePropInterpolate2;case 7:return ze.stylePropInterpolate3;case 9:return ze.stylePropInterpolate4;case 11:return ze.stylePropInterpolate5;case 13:return ze.stylePropInterpolate6;case 15:return ze.stylePropInterpolate7;case 17:return ze.stylePropInterpolate8;default:return ze.stylePropInterpolateV}}function w7(n){return n instanceof _f&&(n=n.ast),n instanceof Fd}var Vo=function(n){return n[n.Character=0]="Character",n[n.Identifier=1]="Identifier",n[n.PrivateIdentifier=2]="PrivateIdentifier",n[n.Keyword=3]="Keyword",n[n.String=4]="String",n[n.Operator=5]="Operator",n[n.Number=6]="Number",n[n.Error=7]="Error",n}(Vo||{});const uSe=["var","let","as","null","undefined","true","false","if","else","this"];class jN{tokenize(e){const t=new C7(e),r=[];let i=t.scanToken();for(;null!=i;)r.push(i),i=t.scanToken();return r}}class dg{constructor(e,t,r,i,o){this.index=e,this.end=t,this.type=r,this.numValue=i,this.strValue=o}isCharacter(e){return this.type==Vo.Character&&this.numValue==e}isNumber(){return this.type==Vo.Number}isString(){return this.type==Vo.String}isOperator(e){return this.type==Vo.Operator&&this.strValue==e}isIdentifier(){return this.type==Vo.Identifier}isPrivateIdentifier(){return this.type==Vo.PrivateIdentifier}isKeyword(){return this.type==Vo.Keyword}isKeywordLet(){return this.type==Vo.Keyword&&"let"==this.strValue}isKeywordAs(){return this.type==Vo.Keyword&&"as"==this.strValue}isKeywordNull(){return this.type==Vo.Keyword&&"null"==this.strValue}isKeywordUndefined(){return this.type==Vo.Keyword&&"undefined"==this.strValue}isKeywordTrue(){return this.type==Vo.Keyword&&"true"==this.strValue}isKeywordFalse(){return this.type==Vo.Keyword&&"false"==this.strValue}isKeywordThis(){return this.type==Vo.Keyword&&"this"==this.strValue}isError(){return this.type==Vo.Error}toNumber(){return this.type==Vo.Number?this.numValue:-1}toString(){switch(this.type){case Vo.Character:case Vo.Identifier:case Vo.Keyword:case Vo.Operator:case Vo.PrivateIdentifier:case Vo.String:case Vo.Error:return this.strValue;case Vo.Number:return this.numValue.toString();default:return null}}}function E7(n,e,t){return new dg(n,e,Vo.Character,t,String.fromCharCode(t))}function GN(n,e,t){return new dg(n,e,Vo.Operator,0,t)}const HN=new dg(-1,-1,Vo.Character,0,"");class C7{constructor(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}advance(){this.peek=++this.index>=this.length?ch:this.input.charCodeAt(this.index)}scanToken(){const e=this.input,t=this.length;let r=this.peek,i=this.index;for(;r<=xq;){if(++i>=t){r=ch;break}r=e.charCodeAt(i)}if(this.peek=r,this.index=i,i>=t)return null;if(qN(r))return this.scanIdentifier();if(sg(r))return this.scanNumber(i);const o=i;switch(r){case 46:return this.advance(),sg(this.peek)?this.scanNumber(o):E7(o,this.index,46);case 40:case 41:case ip:case zu:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(o,r);case 39:case 34:return this.scanString();case 35:return this.scanPrivateIdentifier();case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(o,String.fromCharCode(r));case 63:return this.scanQuestion(o);case 60:case 62:return this.scanComplexOperator(o,String.fromCharCode(r),61,"=");case 33:case 61:return this.scanComplexOperator(o,String.fromCharCode(r),61,"=",61,"=");case 38:return this.scanComplexOperator(o,"&",38,"&");case 124:return this.scanComplexOperator(o,"|",124,"|");case Oq:for(;pN(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(r)}]`,0)}scanCharacter(e,t){return this.advance(),E7(e,this.index,t)}scanOperator(e,t){return this.advance(),GN(e,this.index,t)}scanComplexOperator(e,t,r,i,o,a){this.advance();let d=t;return this.peek==r&&(this.advance(),d+=i),null!=o&&this.peek==o&&(this.advance(),d+=a),GN(e,this.index,d)}scanIdentifier(){const e=this.index;for(this.advance();WN(this.peek);)this.advance();const t=this.input.substring(e,this.index);return uSe.indexOf(t)>-1?function fSe(n,e,t){return new dg(n,e,Vo.Keyword,0,t)}(e,this.index,t):function hSe(n,e,t){return new dg(n,e,Vo.Identifier,0,t)}(e,this.index,t)}scanPrivateIdentifier(){const e=this.index;if(this.advance(),!qN(this.peek))return this.error("Invalid character [#]",-1);for(;WN(this.peek);)this.advance();const t=this.input.substring(e,this.index);return function dSe(n,e,t){return new dg(n,e,Vo.PrivateIdentifier,0,t)}(e,this.index,t)}scanNumber(e){let t=this.index===e,r=!1;for(this.advance();;){if(!sg(this.peek))if(95===this.peek){if(!sg(this.input.charCodeAt(this.index-1))||!sg(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);r=!0}else if(46===this.peek)t=!1;else{if(101!=(n=this.peek)&&69!=n)break;if(this.advance(),ySe(this.peek)&&this.advance(),!sg(this.peek))return this.error("Invalid exponent",-1);t=!1}this.advance()}var n;let i=this.input.substring(e,this.index);r&&(i=i.replace(/_/g,""));const o=t?function bSe(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}(i):parseFloat(i);return function mSe(n,e,t){return new dg(n,e,Vo.Number,t,"")}(e,this.index,o)}scanString(){const e=this.index,t=this.peek;this.advance();let r="",i=this.index;const o=this.input;for(;this.peek!=t;)if(92==this.peek){let d;if(r+=o.substring(i,this.index),this.advance(),117==this.peek){const m=o.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(m))return this.error(`Invalid unicode escape [\\u${m}]`,0);d=parseInt(m,16);for(let _=0;_<5;_++)this.advance()}else d=vSe(this.peek),this.advance();r+=String.fromCharCode(d),i=this.index}else{if(this.peek==ch)return this.error("Unterminated quote",0);this.advance()}const a=o.substring(i,this.index);return this.advance(),function pSe(n,e,t){return new dg(n,e,Vo.String,0,t)}(e,this.index,r+a)}scanQuestion(e){this.advance();let t="?";return(63===this.peek||46===this.peek)&&(t+=46===this.peek?".":"?",this.advance()),GN(e,this.index,t)}error(e,t){const r=this.index+t;return function gSe(n,e,t){return new dg(n,e,Vo.Error,0,t)}(r,this.index,`Lexer Error: ${e} at column ${r} in expression [${this.input}]`)}}function qN(n){return gv<=n&&n<=sC||nx<=n&&n<=QA||95==n||36==n}function WN(n){return t2(n)||sg(n)||95==n||36==n}function ySe(n){return 45==n||43==n}function vSe(n){switch(n){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return uN;case 118:return 11;default:return n}}class xSe{constructor(e,t,r){this.strings=e,this.expressions=t,this.offsets=r}}class wSe{constructor(e,t,r){this.templateBindings=e,this.warnings=t,this.errors=r}}class S7{constructor(e){this._lexer=e,this.errors=[]}parseAction(e,t,r,i,o=mf){this._checkNoInterpolation(e,r,o);const a=this._stripComments(e),d=this._lexer.tokenize(a);let m=1;t&&(m|=2);const _=new IC(e,r,i,d,m,this.errors,0).parseChain();return new _f(_,e,r,i,this.errors)}parseBinding(e,t,r,i=mf){const o=this._parseBindingAst(e,t,r,i);return new _f(o,e,t,r,this.errors)}checkSimpleExpression(e){const t=new ESe;return e.visit(t),t.errors}parseSimpleBinding(e,t,r,i=mf){const o=this._parseBindingAst(e,t,r,i),a=this.checkSimpleExpression(o);return a.length>0&&this._reportError(`Host binding expression cannot contain ${a.join(" ")}`,e,t),new _f(o,e,t,r,this.errors)}_reportError(e,t,r,i){this.errors.push(new _N(e,t,r,i))}_parseBindingAst(e,t,r,i){this._checkNoInterpolation(e,t,i);const o=this._stripComments(e),a=this._lexer.tokenize(o);return new IC(e,t,r,a,0,this.errors,0).parseChain()}parseTemplateBindings(e,t,r,i,o){const a=this._lexer.tokenize(t);return new IC(t,r,o,a,0,this.errors,0).parseTemplateBindings({source:e,span:new sp(i,i+e.length)})}parseInterpolation(e,t,r,i,o=mf){const{strings:a,expressions:d,offsets:m}=this.splitInterpolation(e,t,i,o);if(0===d.length)return null;const _=[];for(let C=0;C<d.length;++C){const R=this._stripComments(d[C].text),L=this._lexer.tokenize(R),G=new IC(e,t,r,L,0,this.errors,m[C]).parseChain();_.push(G)}return this.createInterpolationAst(a.map(C=>C.text),_,e,t,r)}parseInterpolationExpression(e,t,r){const i=this._stripComments(e),o=this._lexer.tokenize(i),a=new IC(e,t,r,o,0,this.errors,0).parseChain();return this.createInterpolationAst(["",""],[a],e,t,r)}createInterpolationAst(e,t,r,i,o){const a=new aC(0,r.length),d=new Eu(a,a.toAbsolute(o),e,t);return new _f(d,r,i,o,this.errors)}splitInterpolation(e,t,r,i=mf){const o=[],a=[],d=[],m=r?function CSe(n){let e=new Map,t=0,r=0,i=0;for(;i<n.length;){const o=n[i];if(9===o.type){const[a,d]=o.parts;t+=d.length,r+=a.length}else{const a=o.parts.reduce((d,m)=>d+m.length,0);r+=a,t+=a}e.set(r,t),i++}return e}(r):null;let _=0,C=!1,T=!1,{start:R,end:L}=i;for(;_<e.length;)if(C){const G=_,W=G+R.length,ve=this._getInterpolationEndIndex(e,L,W);if(-1===ve){C=!1,T=!0;break}const _e=ve+L.length,re=e.substring(W,ve);0===re.trim().length&&this._reportError("Blank expressions are not allowed in interpolated strings",e,`at column ${_} in`,t),a.push({text:re,start:G,end:_e});const vt=(m?.get(G)??G)+R.length;d.push(vt),_=_e,C=!1}else{const G=_;_=e.indexOf(R,_),-1===_&&(_=e.length);const W=e.substring(G,_);o.push({text:W,start:G,end:_}),C=!0}if(!C)if(T){const G=o[o.length-1];G.text+=e.substring(_),G.end=e.length}else o.push({text:e.substring(_),start:_,end:e.length});return new xSe(o,a,d)}wrapLiteralPrimitive(e,t,r){const i=new aC(0,null==e?0:e.length);return new _f(new id(i,i.toAbsolute(r),e),e,t,r,this.errors)}_stripComments(e){const t=this._commentStart(e);return null!=t?e.substring(0,t):e}_commentStart(e){let t=null;for(let r=0;r<e.length-1;r++){const i=e.charCodeAt(r),o=e.charCodeAt(r+1);if(47===i&&47==o&&null==t)return r;t===i?t=null:null==t&&n2(i)&&(t=i)}return null}_checkNoInterpolation(e,t,{start:r,end:i}){let o=-1,a=-1;for(const d of this._forEachUnquotedChar(e,0))if(-1===o)e.startsWith(r)&&(o=d);else if(a=this._getInterpolationEndIndex(e,i,d),a>-1)break;o>-1&&a>-1&&this._reportError(`Got interpolation (${r}${i}) where expression was expected`,e,`at column ${o} in`,t)}_getInterpolationEndIndex(e,t,r){for(const i of this._forEachUnquotedChar(e,r)){if(e.startsWith(t,i))return i;if(e.startsWith("//",i))return e.indexOf(t,i)}return-1}*_forEachUnquotedChar(e,t){let r=null,i=0;for(let o=t;o<e.length;o++){const a=e[o];!n2(e.charCodeAt(o))||null!==r&&r!==a||i%2!=0?null===r&&(yield o):r=null===r?a:null,i="\\"===a?i+1:0}}}var SC=function(n){return n[n.None=0]="None",n[n.Writable=1]="Writable",n}(SC||{});class IC{constructor(e,t,r,i,o,a,d){this.input=e,this.location=t,this.absoluteOffset=r,this.tokens=i,this.parseFlags=o,this.errors=a,this.offset=d,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=SC.None,this.sourceSpanCache=new Map,this.index=0}peek(e){const t=this.index+e;return t<this.tokens.length?this.tokens[t]:HN}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let r=this.currentEndIndex;if(void 0!==t&&t>this.currentEndIndex&&(r=t),e>r){const i=r;r=e,e=i}return new aC(e,r)}sourceSpan(e,t){const r=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(r)||this.sourceSpanCache.set(r,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(r)}advance(){this.index++}withContext(e,t){this.context|=e;const r=t();return this.context^=e,r}consumeOptionalCharacter(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===HN?"end of input":`token ${e}`}expectIdentifierOrKeyword(){const e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null)}expectIdentifierOrKeywordOrString(){const e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),"")}parseChain(){const e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){const r=this.parsePipe();if(e.push(r),this.consumeOptionalCharacter(59))for(1&this.parseFlags||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else if(this.index<this.tokens.length){const i=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===i)break}}if(0===e.length){const r=this.offset,i=this.offset+this.input.length;return new Fd(this.span(r,i),this.sourceSpan(r,i))}return 1==e.length?e[0]:new cC(this.span(t),this.sourceSpan(t),e)}parsePipe(){const e=this.inputIndex;let t=this.parseExpression();if(this.consumeOptionalOperator("|")){1&this.parseFlags&&this.error("Cannot have a pipe in an action expression");do{const r=this.inputIndex;let o,a,i=this.expectIdentifierOrKeyword();null!==i?o=this.sourceSpan(r):(i="",a=-1!==this.next.index?this.next.index:this.input.length+this.offset,o=new aC(a,a).toAbsolute(this.absoluteOffset));const d=[];for(;this.consumeOptionalCharacter(58);)d.push(this.parseExpression());t=new dC(this.span(e),this.sourceSpan(e,a),t,i,d,o)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){const e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){const r=this.parsePipe();let i;if(this.consumeOptionalCharacter(58))i=this.parsePipe();else{const a=this.input.substring(e,this.inputIndex);this.error(`Conditional expression ${a} requires all 3 expressions`),i=new Fd(this.span(e),this.sourceSpan(e))}return new a2(this.span(e),this.sourceSpan(e),t,r,i)}return t}parseLogicalOr(){const e=this.inputIndex;let t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){const r=this.parseLogicalAnd();t=new op(this.span(e),this.sourceSpan(e),"||",t,r)}return t}parseLogicalAnd(){const e=this.inputIndex;let t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){const r=this.parseNullishCoalescing();t=new op(this.span(e),this.sourceSpan(e),"&&",t,r)}return t}parseNullishCoalescing(){const e=this.inputIndex;let t=this.parseEquality();for(;this.consumeOptionalOperator("??");){const r=this.parseEquality();t=new op(this.span(e),this.sourceSpan(e),"??",t,r)}return t}parseEquality(){const e=this.inputIndex;let t=this.parseRelational();for(;this.next.type==Vo.Operator;){const r=this.next.strValue;switch(r){case"==":case"===":case"!=":case"!==":this.advance();const i=this.parseRelational();t=new op(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseRelational(){const e=this.inputIndex;let t=this.parseAdditive();for(;this.next.type==Vo.Operator;){const r=this.next.strValue;switch(r){case"<":case">":case"<=":case">=":this.advance();const i=this.parseAdditive();t=new op(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseAdditive(){const e=this.inputIndex;let t=this.parseMultiplicative();for(;this.next.type==Vo.Operator;){const r=this.next.strValue;switch(r){case"+":case"-":this.advance();let i=this.parseMultiplicative();t=new op(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parseMultiplicative(){const e=this.inputIndex;let t=this.parsePrefix();for(;this.next.type==Vo.Operator;){const r=this.next.strValue;switch(r){case"*":case"%":case"/":this.advance();let i=this.parsePrefix();t=new op(this.span(e),this.sourceSpan(e),r,t,i);continue}break}return t}parsePrefix(){if(this.next.type==Vo.Operator){const e=this.inputIndex;let r;switch(this.next.strValue){case"+":return this.advance(),r=this.parsePrefix(),cg.createPlus(this.span(e),this.sourceSpan(e),r);case"-":return this.advance(),r=this.parsePrefix(),cg.createMinus(this.span(e),this.sourceSpan(e),r);case"!":return this.advance(),r=this.parsePrefix(),new yN(this.span(e),this.sourceSpan(e),r)}}return this.parseCallChain()}parseCallChain(){const e=this.inputIndex;let t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))t=this.consumeOptionalCharacter(40)?this.parseCall(t,e,!0):this.consumeOptionalCharacter(91)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(91))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(40))t=this.parseCall(t,e,!1);else{if(!this.consumeOptionalOperator("!"))return t;t=new d2(this.span(e),this.sourceSpan(e),t)}}parsePrimary(){const e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;const t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),t}if(this.next.isKeywordNull())return this.advance(),new id(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new id(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new id(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new id(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new lC(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;const t=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new fC(this.span(e),this.sourceSpan(e),t)}if(this.next.isCharacter(ip))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new S_(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){const t=this.next.toNumber();return this.advance(),new id(this.span(e),this.sourceSpan(e),t)}if(this.next.isString()){const t=this.next.toString();return this.advance(),new id(this.span(e),this.sourceSpan(e),t)}return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new Fd(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new Fd(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new Fd(this.span(e),this.sourceSpan(e)))}parseExpressionList(e){const t=[];do{if(this.next.isCharacter(e))break;t.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return t}parseLiteralMap(){const e=[],t=[],r=this.inputIndex;if(this.expectCharacter(ip),!this.consumeOptionalCharacter(zu)){this.rbracesExpected++;do{const i=this.inputIndex,o=this.next.isString(),a=this.expectIdentifierOrKeywordOrString();if(e.push({key:a,quoted:o}),o)this.expectCharacter(58),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(58))t.push(this.parsePipe());else{const d=this.span(i),m=this.sourceSpan(i);t.push(new lg(d,m,m,new S_(d,m),a))}}while(this.consumeOptionalCharacter(44)&&!this.next.isCharacter(zu));this.rbracesExpected--,this.expectCharacter(zu)}return new h2(this.span(r),this.sourceSpan(r),e,t)}parseAccessMember(e,t,r){const i=this.inputIndex,o=this.withContext(SC.Writable,()=>{const m=this.expectIdentifierOrKeyword()??"";return 0===m.length&&this.error("Expected identifier for property access",e.span.end),m}),a=this.sourceSpan(i);let d;if(r)this.consumeOptionalAssignment()?(this.error("The '?.' operator cannot be used in the assignment"),d=new Fd(this.span(t),this.sourceSpan(t))):d=new c2(this.span(t),this.sourceSpan(t),a,e,o);else if(this.consumeOptionalAssignment()){if(!(1&this.parseFlags))return this.error("Bindings cannot contain assignments"),new Fd(this.span(t),this.sourceSpan(t));const m=this.parseConditional();d=new l2(this.span(t),this.sourceSpan(t),a,e,o,m)}else d=new lg(this.span(t),this.sourceSpan(t),a,e,o);return d}parseCall(e,t,r){const i=this.inputIndex;this.rparensExpected++;const o=this.parseCallArguments(),a=this.span(i,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(41),this.rparensExpected--;const d=this.span(t),m=this.sourceSpan(t);return r?new pC(d,m,e,o,a):new vv(d,m,e,o,a)}consumeOptionalAssignment(){return 2&this.parseFlags&&this.next.isOperator("!")&&this.peek(1).isOperator("=")?(this.advance(),this.advance(),!0):this.consumeOptionalOperator("=")}parseCallArguments(){if(this.next.isCharacter(41))return[];const e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return e}expectTemplateBindingKey(){let e="",t=!1;const r=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-")}while(t);return{source:e,span:new sp(r,r+e.length)}}parseTemplateBindings(e){const t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){const r=this.parseLetBinding();if(r)t.push(r);else{const i=this.expectTemplateBindingKey(),o=this.parseAsBinding(i);o?t.push(o):(i.source=e.source+i.source.charAt(0).toUpperCase()+i.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(i)))}this.consumeStatementTerminator()}return new wSe(t,[],this.errors)}parseKeyedReadOrWrite(e,t,r){return this.withContext(SC.Writable,()=>{this.rbracketsExpected++;const i=this.parsePipe();if(i instanceof Fd&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(93),!this.consumeOptionalOperator("="))return r?new hC(this.span(t),this.sourceSpan(t),e,i):new uC(this.span(t),this.sourceSpan(t),e,i);if(!r){const o=this.parseConditional();return new u2(this.span(t),this.sourceSpan(t),e,i,o)}return this.error("The '?.' operator cannot be used in the assignment"),new Fd(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){const t=[];this.consumeOptionalCharacter(58);const r=this.getDirectiveBoundTarget();let i=this.currentAbsoluteOffset;const o=this.parseAsBinding(e);o||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);const a=new sp(e.span.start,i);return t.push(new R1e(a,e,r)),o&&t.push(o),t}getDirectiveBoundTarget(){if(this.next===HN||this.peekKeywordAs()||this.peekKeywordLet())return null;const e=this.parsePipe(),{start:t,end:r}=e.span,i=this.input.substring(t,r);return new _f(e,i,this.location,this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();const t=this.expectTemplateBindingKey();this.consumeStatementTerminator();const r=new sp(e.span.start,this.currentAbsoluteOffset);return new vN(r,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;const e=this.currentAbsoluteOffset;this.advance();const t=this.expectTemplateBindingKey();let r=null;this.consumeOptionalOperator("=")&&(r=this.expectTemplateBindingKey()),this.consumeStatementTerminator();const i=new sp(e,this.currentAbsoluteOffset);return new vN(i,t,r)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(e,t=null){this.errors.push(new _N(e,this.input,this.locationText(t),this.location)),this.skip()}locationText(e=null){return null==e&&(e=this.index),e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let r=`Private identifiers are not supported. Unexpected private identifier: ${e}`;null!==t&&(r+=`, ${t}`),this.error(r)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(59)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(41))&&(this.rbracesExpected<=0||!e.isCharacter(zu))&&(this.rbracketsExpected<=0||!e.isCharacter(93))&&!(this.context&SC.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new _N(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}class ESe extends O1e{constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}}class TC{constructor(e,t){this.sourceSpan=e,this.i18n=t}}class DC extends TC{constructor(e,t,r,i){super(t,i),this.value=e,this.tokens=r}visit(e,t){return e.visitText(this,t)}}class AC extends TC{constructor(e,t,r,i,o,a){super(i,a),this.switchValue=e,this.type=t,this.cases=r,this.switchValueSourceSpan=o}visit(e,t){return e.visitExpansion(this,t)}}class I7{constructor(e,t,r,i,o){this.value=e,this.expression=t,this.sourceSpan=r,this.valueSourceSpan=i,this.expSourceSpan=o}visit(e,t){return e.visitExpansionCase(this,t)}}class M2 extends TC{constructor(e,t,r,i,o,a,d){super(r,d),this.name=e,this.value=t,this.keySpan=i,this.valueSpan=o,this.valueTokens=a}visit(e,t){return e.visitAttribute(this,t)}}class $d extends TC{constructor(e,t,r,i,o,a=null,d){super(i,d),this.name=e,this.attrs=t,this.children=r,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitElement(this,t)}}class MC{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}}class M_{constructor(e,t,r,i=null){this.blocks=e,this.sourceSpan=t,this.startSourceSpan=r,this.endSourceSpan=i}visit(e,t){return e.visitBlockGroup(this,t)}}class P2{constructor(e,t,r,i,o,a=null){this.name=e,this.parameters=t,this.children=r,this.sourceSpan=i,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitBlock(this,t)}}class SSe{constructor(e,t){this.expression=e,this.sourceSpan=t}visit(e,t){return e.visitBlockParameter(this,t)}}function Ji(n,e,t=null){const r=[],i=n.visit?o=>n.visit(o,t)||o.visit(n,t):o=>o.visit(n,t);return e.forEach(o=>{const a=i(o);a&&r.push(a)}),r}class ISe{}const PSe=["[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],T7=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"})),kSe=Array.from(T7).reduce((n,[e,t])=>(n.set(e,t),n),new Map);class XN extends ISe{constructor(){super(),this._schema=new Map,this._eventSchema=new Map,PSe.forEach(e=>{const t=new Map,r=new Set,[i,o]=e.split("|"),a=o.split(","),[d,m]=i.split("^");d.split(",").forEach(C=>{this._schema.set(C.toLowerCase(),t),this._eventSchema.set(C.toLowerCase(),r)});const _=m&&this._schema.get(m.toLowerCase());if(_){for(const[C,T]of _)t.set(C,T);for(const C of this._eventSchema.get(m.toLowerCase()))r.add(C)}a.forEach(C=>{if(C.length>0)switch(C[0]){case"*":r.add(C.substring(1));break;case"!":t.set(C.substring(1),"boolean");break;case"#":t.set(C.substring(1),"number");break;case"%":t.set(C.substring(1),"object");break;default:t.set(C,"string")}})})}hasProperty(e,t,r){if(r.some(o=>o.name===UL_name))return!0;if(e.indexOf("-")>-1){if(AN(e)||MN(e))return!1;if(r.some(o=>o.name===VL_name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(t)}hasElement(e,t){return!!(t.some(r=>r.name===UL_name)||e.indexOf("-")>-1&&(AN(e)||MN(e)||t.some(r=>r.name===VL_name)))||this._schema.has(e.toLowerCase())}securityContext(e,t,r){r&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let i=Jq()[e+"|"+t];return i||(i=Jq()["*|"+t],i||Ma.NONE)}getMappedPropName(e){return T7.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...\nIf '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){const t=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(t.keys()).map(r=>kSe.get(r)??r)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return function Wbe(n){return n.replace(qbe,(...e)=>e[1].toUpperCase())}(e)}normalizeAnimationStyleValue(e,t,r){let i="";const o=r.toString().trim();let a=null;if(function RSe(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==r&&"0"!==r)if("number"==typeof r)i="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&(a=`Please provide a CSS unit value for ${t}:${r}`)}return{error:a,value:o+i}}}class Oo{constructor({closedByChildren:e,implicitNamespacePrefix:t,contentType:r=im.PARSABLE_DATA,closedByParent:i=!1,isVoid:o=!1,ignoreFirstLf:a=!1,preventNamespaceInheritance:d=!1,canSelfClose:m=!1}={}){this.closedByChildren={},this.closedByParent=!1,e&&e.length>0&&e.forEach(_=>this.closedByChildren[_]=!0),this.isVoid=o,this.closedByParent=i||o,this.implicitNamespacePrefix=t||null,this.contentType=r,this.ignoreFirstLf=a,this.preventNamespaceInheritance=d,this.canSelfClose=m??o}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return"object"==typeof this.contentType?(void 0===e?void 0:this.contentType[e])??this.contentType.default:this.contentType}}let D7,gx;function A7(n){return gx||(D7=new Oo({canSelfClose:!0}),gx={base:new Oo({isVoid:!0}),meta:new Oo({isVoid:!0}),area:new Oo({isVoid:!0}),embed:new Oo({isVoid:!0}),link:new Oo({isVoid:!0}),img:new Oo({isVoid:!0}),input:new Oo({isVoid:!0}),param:new Oo({isVoid:!0}),hr:new Oo({isVoid:!0}),br:new Oo({isVoid:!0}),source:new Oo({isVoid:!0}),track:new Oo({isVoid:!0}),wbr:new Oo({isVoid:!0}),p:new Oo({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Oo({closedByChildren:["tbody","tfoot"]}),tbody:new Oo({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Oo({closedByChildren:["tbody"],closedByParent:!0}),tr:new Oo({closedByChildren:["tr"],closedByParent:!0}),td:new Oo({closedByChildren:["td","th"],closedByParent:!0}),th:new Oo({closedByChildren:["td","th"],closedByParent:!0}),col:new Oo({isVoid:!0}),svg:new Oo({implicitNamespacePrefix:"svg"}),foreignObject:new Oo({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new Oo({implicitNamespacePrefix:"math"}),li:new Oo({closedByChildren:["li"],closedByParent:!0}),dt:new Oo({closedByChildren:["dt","dd"]}),dd:new Oo({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Oo({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Oo({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Oo({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Oo({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Oo({closedByChildren:["optgroup"],closedByParent:!0}),option:new Oo({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Oo({ignoreFirstLf:!0}),listing:new Oo({ignoreFirstLf:!0}),style:new Oo({contentType:im.RAW_TEXT}),script:new Oo({contentType:im.RAW_TEXT}),title:new Oo({contentType:{default:im.ESCAPABLE_RAW_TEXT,svg:im.PARSABLE_DATA}}),textarea:new Oo({contentType:im.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},(new XN).allKnownElementNames().forEach(e=>{!gx.hasOwnProperty(e)&&null===PN(e)&&(gx[e]=new Oo({canSelfClose:!1}))})),gx[n]??gx[n.toLowerCase()]??D7}const k2={AElig:"\xc6",AMP:"&",amp:"&",Aacute:"\xc1",Abreve:"\u0102",Acirc:"\xc2",Acy:"\u0410",Afr:"\u{1d504}",Agrave:"\xc0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2a53",Aogon:"\u0104",Aopf:"\u{1d538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xc5",angst:"\xc5",Ascr:"\u{1d49c}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xc3",Auml:"\xc4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2ae7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212c",Bscr:"\u212c",bernou:"\u212c",Beta:"\u0392",Bfr:"\u{1d505}",Bopf:"\u{1d539}",Breve:"\u02d8",breve:"\u02d8",Bumpeq:"\u224e",HumpDownHump:"\u224e",bump:"\u224e",CHcy:"\u0427",COPY:"\xa9",copy:"\xa9",Cacute:"\u0106",Cap:"\u22d2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212d",Cfr:"\u212d",Ccaron:"\u010c",Ccedil:"\xc7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010a",Cedilla:"\xb8",cedil:"\xb8",CenterDot:"\xb7",centerdot:"\xb7",middot:"\xb7",Chi:"\u03a7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201d",rdquo:"\u201d",rdquor:"\u201d",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2a74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222f",DoubleContourIntegral:"\u222f",ContourIntegral:"\u222e",conint:"\u222e",oint:"\u222e",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2a2f",Cscr:"\u{1d49e}",Cup:"\u22d3",CupCap:"\u224d",asympeq:"\u224d",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040f",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21a1",Dashv:"\u2ae4",DoubleLeftTee:"\u2ae4",Dcaron:"\u010e",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1d507}",DiacriticalAcute:"\xb4",acute:"\xb4",DiacriticalDot:"\u02d9",dot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",dblac:"\u02dd",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02dc",tilde:"\u02dc",Diamond:"\u22c4",diam:"\u22c4",diamond:"\u22c4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1d53b}",Dot:"\xa8",DoubleDot:"\xa8",die:"\xa8",uml:"\xa8",DotDot:"\u20dc",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21d3",Downarrow:"\u21d3",dArr:"\u21d3",DoubleLeftArrow:"\u21d0",Leftarrow:"\u21d0",lArr:"\u21d0",DoubleLeftRightArrow:"\u21d4",Leftrightarrow:"\u21d4",hArr:"\u21d4",iff:"\u21d4",DoubleLongLeftArrow:"\u27f8",Longleftarrow:"\u27f8",xlArr:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",Longleftrightarrow:"\u27fa",xhArr:"\u27fa",DoubleLongRightArrow:"\u27f9",Longrightarrow:"\u27f9",xrArr:"\u27f9",DoubleRightArrow:"\u21d2",Implies:"\u21d2",Rightarrow:"\u21d2",rArr:"\u21d2",DoubleRightTee:"\u22a8",vDash:"\u22a8",DoubleUpArrow:"\u21d1",Uparrow:"\u21d1",uArr:"\u21d1",DoubleUpDownArrow:"\u21d5",Updownarrow:"\u21d5",vArr:"\u21d5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",duarr:"\u21f5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",leftharpoondown:"\u21bd",lhard:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",rhard:"\u21c1",rightharpoondown:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",top:"\u22a4",DownTeeArrow:"\u21a7",mapstodown:"\u21a7",Dscr:"\u{1d49f}",Dstrok:"\u0110",ENG:"\u014a",ETH:"\xd0",Eacute:"\xc9",Ecaron:"\u011a",Ecirc:"\xca",Ecy:"\u042d",Edot:"\u0116",Efr:"\u{1d508}",Egrave:"\xc8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25fb",EmptyVerySmallSquare:"\u25ab",Eogon:"\u0118",Eopf:"\u{1d53c}",Epsilon:"\u0395",Equal:"\u2a75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21cc",rightleftharpoons:"\u21cc",rlhar:"\u21cc",Escr:"\u2130",expectation:"\u2130",Esim:"\u2a73",Eta:"\u0397",Euml:"\xcb",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1d509}",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",blacksquare:"\u25aa",squarf:"\u25aa",squf:"\u25aa",Fopf:"\u{1d53d}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03dc",Gbreve:"\u011e",Gcedil:"\u0122",Gcirc:"\u011c",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1d50a}",Gg:"\u22d9",ggg:"\u22d9",Gopf:"\u{1d53e}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22db",gel:"\u22db",gtreqless:"\u22db",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2a7e",geqslant:"\u2a7e",ges:"\u2a7e",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1d4a2}",Gt:"\u226b",NestedGreaterGreater:"\u226b",gg:"\u226b",HARDcy:"\u042a",Hacek:"\u02c7",caron:"\u02c7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210c",Poincareplane:"\u210c",HilbertSpace:"\u210b",Hscr:"\u210b",hamilt:"\u210b",Hopf:"\u210d",quaternions:"\u210d",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224f",bumpe:"\u224f",bumpeq:"\u224f",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xcd",Icirc:"\xce",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xcc",Imacr:"\u012a",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222c",Integral:"\u222b",int:"\u222b",Intersection:"\u22c2",bigcap:"\u22c2",xcap:"\u22c2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012e",Iopf:"\u{1d540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xcf",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1d50d}",Jopf:"\u{1d541}",Jscr:"\u{1d4a5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040c",Kappa:"\u039a",Kcedil:"\u0136",Kcy:"\u041a",Kfr:"\u{1d50e}",Kopf:"\u{1d542}",Kscr:"\u{1d4a6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039b",Lang:"\u27ea",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219e",twoheadleftarrow:"\u219e",Lcaron:"\u013d",Lcedil:"\u013b",Lcy:"\u041b",LeftAngleBracket:"\u27e8",lang:"\u27e8",langle:"\u27e8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21e4",larrb:"\u21e4",LeftArrowRightArrow:"\u21c6",leftrightarrows:"\u21c6",lrarr:"\u21c6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27e6",lobrk:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",dharl:"\u21c3",downharpoonleft:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",lfloor:"\u230a",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294e",LeftTee:"\u22a3",dashv:"\u22a3",LeftTeeArrow:"\u21a4",mapstoleft:"\u21a4",LeftTeeVector:"\u295a",LeftTriangle:"\u22b2",vartriangleleft:"\u22b2",vltri:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",ltrie:"\u22b4",trianglelefteq:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",uharl:"\u21bf",upharpoonleft:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",leftharpoonup:"\u21bc",lharu:"\u21bc",LeftVectorBar:"\u2952",LessEqualGreater:"\u22da",leg:"\u22da",lesseqgtr:"\u22da",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2aa1",LessSlantEqual:"\u2a7d",leqslant:"\u2a7d",les:"\u2a7d",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1d50f}",Ll:"\u22d8",Lleftarrow:"\u21da",lAarr:"\u21da",Lmidot:"\u013f",LongLeftArrow:"\u27f5",longleftarrow:"\u27f5",xlarr:"\u27f5",LongLeftRightArrow:"\u27f7",longleftrightarrow:"\u27f7",xharr:"\u27f7",LongRightArrow:"\u27f6",longrightarrow:"\u27f6",xrarr:"\u27f6",Lopf:"\u{1d543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21b0",lsh:"\u21b0",Lstrok:"\u0141",Lt:"\u226a",NestedLessLess:"\u226a",ll:"\u226a",Map:"\u2905",Mcy:"\u041c",MediumSpace:"\u205f",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1d510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1d544}",Mu:"\u039c",NJcy:"\u040a",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041d",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",ZeroWidthSpace:"\u200b",NewLine:"\n",Nfr:"\u{1d511}",NoBreak:"\u2060",NonBreakingSpace:"\xa0",nbsp:"\xa0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2aec",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226f",ngt:"\u226f",ngtr:"\u226f",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",nGtv:"\u226b\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224e\u0338",nbump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",nbumpe:"\u224f\u0338",NotLeftTriangle:"\u22ea",nltri:"\u22ea",ntriangleleft:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",nltrie:"\u22ec",ntrianglelefteq:"\u22ec",NotLess:"\u226e",nless:"\u226e",nlt:"\u226e",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226a\u0338",nLtv:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",npre:"\u2aaf\u0338",npreceq:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",nprcue:"\u22e0",NotReverseElement:"\u220c",notni:"\u220c",notniva:"\u220c",NotRightTriangle:"\u22eb",nrtri:"\u22eb",ntriangleright:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",nrtrie:"\u22ed",ntrianglerighteq:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",nsqsube:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",nsqsupe:"\u22e3",NotSubset:"\u2282\u20d2",nsubset:"\u2282\u20d2",vnsub:"\u2282\u20d2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",nsce:"\u2ab0\u0338",nsucceq:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",nsccue:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",nsupset:"\u2283\u20d2",vnsup:"\u2283\u20d2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1d4a9}",Ntilde:"\xd1",Nu:"\u039d",OElig:"\u0152",Oacute:"\xd3",Ocirc:"\xd4",Ocy:"\u041e",Odblac:"\u0150",Ofr:"\u{1d512}",Ograve:"\xd2",Omacr:"\u014c",Omega:"\u03a9",ohm:"\u03a9",Omicron:"\u039f",Oopf:"\u{1d546}",OpenCurlyDoubleQuote:"\u201c",ldquo:"\u201c",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2a54",Oscr:"\u{1d4aa}",Oslash:"\xd8",Otilde:"\xd5",Otimes:"\u2a37",Ouml:"\xd6",OverBar:"\u203e",oline:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",tbrk:"\u23b4",OverParenthesis:"\u23dc",PartialD:"\u2202",part:"\u2202",Pcy:"\u041f",Pfr:"\u{1d513}",Phi:"\u03a6",Pi:"\u03a0",PlusMinus:"\xb1",plusmn:"\xb1",pm:"\xb1",Popf:"\u2119",primes:"\u2119",Pr:"\u2abb",Precedes:"\u227a",pr:"\u227a",prec:"\u227a",PrecedesEqual:"\u2aaf",pre:"\u2aaf",preceq:"\u2aaf",PrecedesSlantEqual:"\u227c",prcue:"\u227c",preccurlyeq:"\u227c",PrecedesTilde:"\u227e",precsim:"\u227e",prsim:"\u227e",Prime:"\u2033",Product:"\u220f",prod:"\u220f",Proportional:"\u221d",prop:"\u221d",propto:"\u221d",varpropto:"\u221d",vprop:"\u221d",Pscr:"\u{1d4ab}",Psi:"\u03a8",QUOT:'"',quot:'"',Qfr:"\u{1d514}",Qopf:"\u211a",rationals:"\u211a",Qscr:"\u{1d4ac}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xae",circledR:"\xae",reg:"\xae",Racute:"\u0154",Rang:"\u27eb",Rarr:"\u21a0",twoheadrightarrow:"\u21a0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211c",Rfr:"\u211c",real:"\u211c",realpart:"\u211c",ReverseElement:"\u220b",SuchThat:"\u220b",ni:"\u220b",niv:"\u220b",ReverseEquilibrium:"\u21cb",leftrightharpoons:"\u21cb",lrhar:"\u21cb",ReverseUpEquilibrium:"\u296f",duhar:"\u296f",Rho:"\u03a1",RightAngleBracket:"\u27e9",rang:"\u27e9",rangle:"\u27e9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21e5",rarrb:"\u21e5",RightArrowLeftArrow:"\u21c4",rightleftarrows:"\u21c4",rlarr:"\u21c4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27e7",robrk:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",dharr:"\u21c2",downharpoonright:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rfloor:"\u230b",RightTee:"\u22a2",vdash:"\u22a2",RightTeeArrow:"\u21a6",map:"\u21a6",mapsto:"\u21a6",RightTeeVector:"\u295b",RightTriangle:"\u22b3",vartriangleright:"\u22b3",vrtri:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",rtrie:"\u22b5",trianglerighteq:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",uharr:"\u21be",upharpoonright:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",rharu:"\u21c0",rightharpoonup:"\u21c0",RightVectorBar:"\u2953",Ropf:"\u211d",reals:"\u211d",RoundImplies:"\u2970",Rrightarrow:"\u21db",rAarr:"\u21db",Rscr:"\u211b",realine:"\u211b",Rsh:"\u21b1",rsh:"\u21b1",RuleDelayed:"\u29f4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042c",Sacute:"\u015a",Sc:"\u2abc",Scaron:"\u0160",Scedil:"\u015e",Scirc:"\u015c",Scy:"\u0421",Sfr:"\u{1d516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03a3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1d54a}",Sqrt:"\u221a",radic:"\u221a",Square:"\u25a1",squ:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228f",sqsub:"\u228f",sqsubset:"\u228f",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1d4ae}",Star:"\u22c6",sstarf:"\u22c6",Sub:"\u22d0",Subset:"\u22d0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227b",sc:"\u227b",succ:"\u227b",SucceedsEqual:"\u2ab0",sce:"\u2ab0",succeq:"\u2ab0",SucceedsSlantEqual:"\u227d",sccue:"\u227d",succcurlyeq:"\u227d",SucceedsTilde:"\u227f",scsim:"\u227f",succsim:"\u227f",Sum:"\u2211",sum:"\u2211",Sup:"\u22d1",Supset:"\u22d1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xde",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040b",TScy:"\u0426",Tab:"\t",Tau:"\u03a4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1d517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223c",sim:"\u223c",thicksim:"\u223c",thksim:"\u223c",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1d54b}",TripleDot:"\u20db",tdot:"\u20db",Tscr:"\u{1d4af}",Tstrok:"\u0166",Uacute:"\xda",Uarr:"\u219f",Uarrocir:"\u2949",Ubrcy:"\u040e",Ubreve:"\u016c",Ucirc:"\xdb",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1d518}",Ugrave:"\xd9",Umacr:"\u016a",UnderBar:"_",lowbar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",bbrk:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",bigcup:"\u22c3",xcup:"\u22c3",UnionPlus:"\u228e",uplus:"\u228e",Uogon:"\u0172",Uopf:"\u{1d54c}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",udarr:"\u21c5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296e",udhar:"\u296e",UpTee:"\u22a5",bot:"\u22a5",bottom:"\u22a5",perp:"\u22a5",UpTeeArrow:"\u21a5",mapstoup:"\u21a5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",Uring:"\u016e",Uscr:"\u{1d4b0}",Utilde:"\u0168",Uuml:"\xdc",VDash:"\u22ab",Vbar:"\u2aeb",Vcy:"\u0412",Vdash:"\u22a9",Vdashl:"\u2ae6",Vee:"\u22c1",bigvee:"\u22c1",xvee:"\u22c1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200a",hairsp:"\u200a",Vfr:"\u{1d519}",Vopf:"\u{1d54d}",Vscr:"\u{1d4b1}",Vvdash:"\u22aa",Wcirc:"\u0174",Wedge:"\u22c0",bigwedge:"\u22c0",xwedge:"\u22c0",Wfr:"\u{1d51a}",Wopf:"\u{1d54e}",Wscr:"\u{1d4b2}",Xfr:"\u{1d51b}",Xi:"\u039e",Xopf:"\u{1d54f}",Xscr:"\u{1d4b3}",YAcy:"\u042f",YIcy:"\u0407",YUcy:"\u042e",Yacute:"\xdd",Ycirc:"\u0176",Ycy:"\u042b",Yfr:"\u{1d51c}",Yopf:"\u{1d550}",Yscr:"\u{1d4b4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017d",Zcy:"\u0417",Zdot:"\u017b",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1d4b5}",aacute:"\xe1",abreve:"\u0103",ac:"\u223e",mstpos:"\u223e",acE:"\u223e\u0333",acd:"\u223f",acirc:"\xe2",acy:"\u0430",aelig:"\xe6",afr:"\u{1d51e}",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03b1",amacr:"\u0101",amalg:"\u2a3f",and:"\u2227",wedge:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",angle:"\u2220",ange:"\u29a4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angzarr:"\u237c",aogon:"\u0105",aopf:"\u{1d552}",apE:"\u2a70",apacir:"\u2a6f",ape:"\u224a",approxeq:"\u224a",apid:"\u224b",apos:"'",aring:"\xe5",ascr:"\u{1d4b6}",ast:"*",midast:"*",atilde:"\xe3",auml:"\xe4",awint:"\u2a11",bNot:"\u2aed",backcong:"\u224c",bcong:"\u224c",backepsilon:"\u03f6",bepsi:"\u03f6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223d",bsim:"\u223d",backsimeq:"\u22cd",bsime:"\u22cd",barvee:"\u22bd",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23b6",bcy:"\u0431",bdquo:"\u201e",ldquor:"\u201e",bemptyv:"\u29b0",beta:"\u03b2",beth:"\u2136",between:"\u226c",twixt:"\u226c",bfr:"\u{1d51f}",bigcirc:"\u25ef",xcirc:"\u25ef",bigodot:"\u2a00",xodot:"\u2a00",bigoplus:"\u2a01",xoplus:"\u2a01",bigotimes:"\u2a02",xotime:"\u2a02",bigsqcup:"\u2a06",xsqcup:"\u2a06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25bd",xdtri:"\u25bd",bigtriangleup:"\u25b3",xutri:"\u25b3",biguplus:"\u2a04",xuplus:"\u2a04",bkarow:"\u290d",rbarr:"\u290d",blacklozenge:"\u29eb",lozf:"\u29eb",blacktriangle:"\u25b4",utrif:"\u25b4",blacktriangledown:"\u25be",dtrif:"\u25be",blacktriangleleft:"\u25c2",ltrif:"\u25c2",blacktriangleright:"\u25b8",rtrif:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bnot:"\u2310",bopf:"\u{1d553}",bowtie:"\u22c8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255d",boxUR:"\u255a",boxUl:"\u255c",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256c",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256b",boxVl:"\u2562",boxVr:"\u255f",boxbox:"\u29c9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250c",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252c",boxhu:"\u2534",boxminus:"\u229f",minusb:"\u229f",boxplus:"\u229e",plusb:"\u229e",boxtimes:"\u22a0",timesb:"\u22a0",boxuL:"\u255b",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256a",boxvL:"\u2561",boxvR:"\u255e",boxvh:"\u253c",boxvl:"\u2524",boxvr:"\u251c",brvbar:"\xa6",bscr:"\u{1d4b7}",bsemi:"\u204f",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2aae",cacute:"\u0107",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",caps:"\u2229\ufe00",caret:"\u2041",ccaps:"\u2a4d",ccaron:"\u010d",ccedil:"\xe7",ccirc:"\u0109",ccups:"\u2a4c",ccupssm:"\u2a50",cdot:"\u010b",cemptyv:"\u29b2",cent:"\xa2",cfr:"\u{1d520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03c7",cir:"\u25cb",cirE:"\u29c3",circ:"\u02c6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21ba",olarr:"\u21ba",circlearrowright:"\u21bb",orarr:"\u21bb",circledS:"\u24c8",oS:"\u24c8",circledast:"\u229b",oast:"\u229b",circledcirc:"\u229a",ocir:"\u229a",circleddash:"\u229d",odash:"\u229d",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2a6d",copf:"\u{1d554}",copysr:"\u2117",crarr:"\u21b5",cross:"\u2717",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",curlyeqprec:"\u22de",cuesc:"\u22df",curlyeqsucc:"\u22df",cularr:"\u21b6",curvearrowleft:"\u21b6",cularrp:"\u293d",cup:"\u222a",cupbrcap:"\u2a48",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curvearrowright:"\u21b7",curarrm:"\u293c",curlyvee:"\u22ce",cuvee:"\u22ce",curlywedge:"\u22cf",cuwed:"\u22cf",curren:"\xa4",cwint:"\u2231",cylcty:"\u232d",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290f",rBarr:"\u290f",dcaron:"\u010f",dcy:"\u0434",ddarr:"\u21ca",downdownarrows:"\u21ca",ddotseq:"\u2a77",eDDot:"\u2a77",deg:"\xb0",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",dfr:"\u{1d521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03dd",gammad:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",djcy:"\u0452",dlcorn:"\u231e",llcorner:"\u231e",dlcrop:"\u230d",dollar:"$",dopf:"\u{1d555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22a1",sdotb:"\u22a1",drcorn:"\u231f",lrcorner:"\u231f",drcrop:"\u230c",dscr:"\u{1d4b9}",dscy:"\u0455",dsol:"\u29f6",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",triangledown:"\u25bf",dwangle:"\u29a6",dzcy:"\u045f",dzigrarr:"\u27ff",eacute:"\xe9",easter:"\u2a6e",ecaron:"\u011b",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xea",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044d",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1d522}",eg:"\u2a9a",egrave:"\xe8",egs:"\u2a96",eqslantgtr:"\u2a96",egsdot:"\u2a98",el:"\u2a99",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",eqslantless:"\u2a95",elsdot:"\u2a97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014b",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",epsilon:"\u03b5",epsiv:"\u03f5",straightepsilon:"\u03f5",varepsilon:"\u03f5",equals:"=",equest:"\u225f",questeq:"\u225f",equivDD:"\u2a78",eqvparsl:"\u29e5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212f",eta:"\u03b7",eth:"\xf0",euml:"\xeb",euro:"\u20ac",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",ffr:"\u{1d523}",filig:"\ufb01",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",fopf:"\u{1d557}",fork:"\u22d4",pitchfork:"\u22d4",forkv:"\u2ad9",fpartint:"\u2a0d",frac12:"\xbd",half:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1d4bb}",gEl:"\u2a8c",gtreqqless:"\u2a8c",gacute:"\u01f5",gamma:"\u03b3",gap:"\u2a86",gtrapprox:"\u2a86",gbreve:"\u011f",gcirc:"\u011d",gcy:"\u0433",gdot:"\u0121",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",gfr:"\u{1d524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2a92",gla:"\u2aa5",glj:"\u2aa4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gneq:"\u2a88",gnsim:"\u22e7",gopf:"\u{1d558}",gscr:"\u210a",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtrdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrarr:"\u2978",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",hardcy:"\u044a",harrcir:"\u2948",harrw:"\u21ad",leftrightsquigarrow:"\u21ad",hbar:"\u210f",hslash:"\u210f",planck:"\u210f",plankv:"\u210f",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22b9",hfr:"\u{1d525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",larrhk:"\u21a9",hookrightarrow:"\u21aa",rarrhk:"\u21aa",hopf:"\u{1d559}",horbar:"\u2015",hscr:"\u{1d4bd}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xed",icirc:"\xee",icy:"\u0438",iecy:"\u0435",iexcl:"\xa1",ifr:"\u{1d526}",igrave:"\xec",iiiint:"\u2a0c",qint:"\u2a0c",iiint:"\u222d",tint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012b",imath:"\u0131",inodot:"\u0131",imof:"\u22b7",imped:"\u01b5",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",intcal:"\u22ba",intercal:"\u22ba",intlarhk:"\u2a17",intprod:"\u2a3c",iprod:"\u2a3c",iocy:"\u0451",iogon:"\u012f",iopf:"\u{1d55a}",iota:"\u03b9",iquest:"\xbf",iscr:"\u{1d4be}",isinE:"\u22f9",isindot:"\u22f5",isins:"\u22f4",isinsv:"\u22f3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xef",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1d527}",jmath:"\u0237",jopf:"\u{1d55b}",jscr:"\u{1d4bf}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03ba",kappav:"\u03f0",varkappa:"\u03f0",kcedil:"\u0137",kcy:"\u043a",kfr:"\u{1d528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045c",kopf:"\u{1d55c}",kscr:"\u{1d4c0}",lAtail:"\u291b",lBarr:"\u290e",lEg:"\u2a8b",lesseqqgtr:"\u2a8b",lHar:"\u2962",lacute:"\u013a",laemptyv:"\u29b4",lambda:"\u03bb",langd:"\u2991",lap:"\u2a85",lessapprox:"\u2a85",laquo:"\xab",larrbfs:"\u291f",larrfs:"\u291d",larrlp:"\u21ab",looparrowleft:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",leftarrowtail:"\u21a2",lat:"\u2aab",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",lcaron:"\u013e",lcedil:"\u013c",lcy:"\u043b",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21c7",llarr:"\u21c7",leftthreetimes:"\u22cb",lthree:"\u22cb",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessdot:"\u22d6",ltdot:"\u22d6",lfisht:"\u297c",lfr:"\u{1d529}",lgE:"\u2a91",lharul:"\u296a",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296b",lltri:"\u25fa",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lneq:"\u2a87",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",longmapsto:"\u27fc",xmap:"\u27fc",looparrowright:"\u21ac",rarrlp:"\u21ac",lopar:"\u2985",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",loz:"\u25ca",lozenge:"\u25ca",lpar:"(",lparlt:"\u2993",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\u{1d4c1}",lsime:"\u2a8d",lsimg:"\u2a8f",lsquor:"\u201a",sbquo:"\u201a",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltrPar:"\u2996",ltri:"\u25c3",triangleleft:"\u25c3",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",mDDot:"\u223a",macr:"\xaf",strns:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25ae",mcomma:"\u2a29",mcy:"\u043c",mdash:"\u2014",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",midcir:"\u2af0",minus:"\u2212",minusdu:"\u2a2a",mlcp:"\u2adb",models:"\u22a7",mopf:"\u{1d55e}",mscr:"\u{1d4c2}",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nGg:"\u22d9\u0338",nGt:"\u226b\u20d2",nLeftarrow:"\u21cd",nlArr:"\u21cd",nLeftrightarrow:"\u21ce",nhArr:"\u21ce",nLl:"\u22d8\u0338",nLt:"\u226a\u20d2",nRightarrow:"\u21cf",nrArr:"\u21cf",nVDash:"\u22af",nVdash:"\u22ae",nacute:"\u0144",nang:"\u2220\u20d2",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",natur:"\u266e",natural:"\u266e",ncap:"\u2a43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",ncy:"\u043d",ndash:"\u2013",neArr:"\u21d7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1d52b}",nharr:"\u21ae",nleftrightarrow:"\u21ae",nhpar:"\u2af2",nis:"\u22fc",nisd:"\u22fa",njcy:"\u045a",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219a",nleftarrow:"\u219a",nldr:"\u2025",nopf:"\u{1d55f}",not:"\xac",notinE:"\u22f9\u0338",notindot:"\u22f5\u0338",notinvb:"\u22f7",notinvc:"\u22f6",notnivb:"\u22fe",notnivc:"\u22fd",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",nrarr:"\u219b",nrightarrow:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nscr:"\u{1d4c3}",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsubseteqq:"\u2ac5\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupseteqq:"\u2ac6\u0338",ntilde:"\xf1",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22ad",nvHarr:"\u2904",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwArr:"\u21d6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xf3",ocirc:"\xf4",ocy:"\u043e",odblac:"\u0151",odiv:"\u2a38",odsold:"\u29bc",oelig:"\u0153",ofcir:"\u29bf",ofr:"\u{1d52c}",ogon:"\u02db",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",olcir:"\u29be",olcross:"\u29bb",olt:"\u29c0",omacr:"\u014d",omega:"\u03c9",omicron:"\u03bf",omid:"\u29b6",oopf:"\u{1d560}",opar:"\u29b7",operp:"\u29b9",or:"\u2228",vee:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oslash:"\xf8",osol:"\u2298",otilde:"\xf5",otimesas:"\u2a36",ouml:"\xf6",ovbar:"\u233d",para:"\xb6",parsim:"\u2af3",parsl:"\u2afd",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1d52d}",phi:"\u03c6",phiv:"\u03d5",straightphi:"\u03d5",varphi:"\u03d5",phone:"\u260e",pi:"\u03c0",piv:"\u03d6",varpi:"\u03d6",planckh:"\u210e",plus:"+",plusacir:"\u2a23",pluscir:"\u2a22",plusdu:"\u2a25",pluse:"\u2a72",plussim:"\u2a26",plustwo:"\u2a27",pointint:"\u2a15",popf:"\u{1d561}",pound:"\xa3",prE:"\u2ab3",prap:"\u2ab7",precapprox:"\u2ab7",precnapprox:"\u2ab9",prnap:"\u2ab9",precneqq:"\u2ab5",prnE:"\u2ab5",precnsim:"\u22e8",prnsim:"\u22e8",prime:"\u2032",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prurel:"\u22b0",pscr:"\u{1d4c5}",psi:"\u03c8",puncsp:"\u2008",qfr:"\u{1d52e}",qopf:"\u{1d562}",qprime:"\u2057",qscr:"\u{1d4c6}",quatint:"\u2a16",quest:"?",rAtail:"\u291c",rHar:"\u2964",race:"\u223d\u0331",racute:"\u0155",raemptyv:"\u29b3",rangd:"\u2992",range:"\u29a5",raquo:"\xbb",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21a3",rightarrowtail:"\u21a3",rarrw:"\u219d",rightsquigarrow:"\u219d",ratail:"\u291a",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21b3",rect:"\u25ad",rfisht:"\u297d",rfr:"\u{1d52f}",rharul:"\u296c",rho:"\u03c1",rhov:"\u03f1",varrho:"\u03f1",rightrightarrows:"\u21c9",rrarr:"\u21c9",rightthreetimes:"\u22cc",rthree:"\u22cc",ring:"\u02da",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",ropar:"\u2986",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rsaquo:"\u203a",rscr:"\u{1d4c7}",rtimes:"\u22ca",rtri:"\u25b9",triangleright:"\u25b9",rtriltri:"\u29ce",ruluhar:"\u2968",rx:"\u211e",sacute:"\u015b",scE:"\u2ab4",scap:"\u2ab8",succapprox:"\u2ab8",scaron:"\u0161",scedil:"\u015f",scirc:"\u015d",scnE:"\u2ab6",succneqq:"\u2ab6",scnap:"\u2aba",succnapprox:"\u2aba",scnsim:"\u22e9",succnsim:"\u22e9",scpolint:"\u2a13",scy:"\u0441",sdot:"\u22c5",sdote:"\u2a66",seArr:"\u21d8",sect:"\xa7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1d530}",sharp:"\u266f",shchcy:"\u0449",shcy:"\u0448",shy:"\xad",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",varsigma:"\u03c2",simdot:"\u2a6a",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",smashp:"\u2a33",smeparsl:"\u29e4",smile:"\u2323",ssmile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\ufe00",sqcups:"\u2294\ufe00",sscr:"\u{1d4c8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2ac5",subseteqq:"\u2ac5",subdot:"\u2abd",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subsetneqq:"\u2acb",subne:"\u228a",subsetneq:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",sung:"\u266a",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supE:"\u2ac6",supseteqq:"\u2ac6",supdot:"\u2abe",supdsub:"\u2ad8",supedot:"\u2ac4",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supsetneqq:"\u2acc",supne:"\u228b",supsetneq:"\u228b",supplus:"\u2ac0",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swArr:"\u21d9",swnwar:"\u292a",szlig:"\xdf",target:"\u2316",tau:"\u03c4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1d531}",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",vartheta:"\u03d1",thorn:"\xfe",times:"\xd7",timesbar:"\u2a31",timesd:"\u2a30",topbot:"\u2336",topcir:"\u2af1",topf:"\u{1d565}",topfork:"\u2ada",tprime:"\u2034",triangle:"\u25b5",utri:"\u25b5",triangleq:"\u225c",trie:"\u225c",tridot:"\u25ec",triminus:"\u2a3a",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",tscr:"\u{1d4c9}",tscy:"\u0446",tshcy:"\u045b",tstrok:"\u0167",uHar:"\u2963",uacute:"\xfa",ubrcy:"\u045e",ubreve:"\u016d",ucirc:"\xfb",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297e",ufr:"\u{1d532}",ugrave:"\xf9",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",umacr:"\u016b",uogon:"\u0173",uopf:"\u{1d566}",upsi:"\u03c5",upsilon:"\u03c5",upuparrows:"\u21c8",uuarr:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",uring:"\u016f",urtri:"\u25f9",uscr:"\u{1d4ca}",utdot:"\u22f0",utilde:"\u0169",uuml:"\xfc",uwangle:"\u29a7",vBar:"\u2ae8",vBarv:"\u2ae9",vangrt:"\u299c",varsubsetneq:"\u228a\ufe00",vsubne:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",vsubnE:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",vsupne:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vsupnE:"\u2acc\ufe00",vcy:"\u0432",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",vfr:"\u{1d533}",vopf:"\u{1d567}",vscr:"\u{1d4cb}",vzigzag:"\u299a",wcirc:"\u0175",wedbar:"\u2a5f",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1d534}",wopf:"\u{1d568}",wscr:"\u{1d4cc}",xfr:"\u{1d535}",xi:"\u03be",xnis:"\u22fb",xopf:"\u{1d569}",xscr:"\u{1d4cd}",yacute:"\xfd",yacy:"\u044f",ycirc:"\u0177",ycy:"\u044b",yen:"\xa5",yfr:"\u{1d536}",yicy:"\u0457",yopf:"\u{1d56a}",yscr:"\u{1d4ce}",yucy:"\u044e",yuml:"\xff",zacute:"\u017a",zcaron:"\u017e",zcy:"\u0437",zdot:"\u017c",zeta:"\u03b6",zfr:"\u{1d537}",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\u{1d56b}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"},M7="\ue500";k2.ngsp=M7;class ZN extends rd{constructor(e,t,r){super(r,e),this.tokenType=t}}class OSe{constructor(e,t,r){this.tokens=e,this.errors=t,this.nonNormalizedIcuExpressions=r}}const NSe=/\r\n?/g;function PC(n){return`Unexpected character "${n===ch?"EOF":String.fromCharCode(n)}"`}function P7(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}var YN=function(n){return n.HEX="hexadecimal",n.DEC="decimal",n}(YN||{});class KN{constructor(e){this.error=e}}class BSe{constructor(e,t,r){this._getTagDefinition=t,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=r.tokenizeExpansionForms||!1,this._interpolationConfig=r.interpolationConfig||mf,this._leadingTriviaCodePoints=r.leadingTriviaChars&&r.leadingTriviaChars.map(o=>o.codePointAt(0)||0);const i=r.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=r.escapedString?new O2(e,i):new kC(e,i),this._preserveLineEndings=r.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=r.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=r.tokenizeBlocks||!1;try{this._cursor.init()}catch(o){this.handleError(o)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(NSe,"\n")}tokenize(){for(;this._cursor.peek()!==ch;){const e=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(e):this._attemptCharCode(45)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(47)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeBlocks&&this._attemptStr("{#")?this._consumeBlockGroupOpen(e):this._tokenizeBlocks&&this._attemptStr("{/")?this._consumeBlockGroupClose(e):this._tokenizeBlocks&&this._attemptStr("{:")?this._consumeBlock(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(t){this.handleError(t)}}this._beginToken(24),this._endToken([])}_consumeBlockGroupOpen(e){this._beginToken(25,e);const t=this._cursor.clone();this._attemptCharCodeUntilFn(r=>!R2(r)),this._endToken([this._cursor.getChars(t)]),this._consumeBlockParameters(),this._beginToken(26),this._requireCharCode(zu),this._endToken([])}_consumeBlockGroupClose(e){this._beginToken(27,e);const t=this._cursor.clone();this._attemptCharCodeUntilFn(i=>!R2(i));const r=this._cursor.getChars(t);this._requireCharCode(zu),this._endToken([r])}_consumeBlock(e){this._beginToken(29,e);const t=this._cursor.clone();this._attemptCharCodeUntilFn(r=>!R2(r)),this._endToken([this._cursor.getChars(t)]),this._consumeBlockParameters(),this._beginToken(30),this._requireCharCode(zu),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(O7);this._cursor.peek()!==zu&&this._cursor.peek()!==ch;){this._beginToken(28);const e=this._cursor.clone();let t=null,r=0;for(;59!==this._cursor.peek()&&this._cursor.peek()!==ch||null!==t;){const i=this._cursor.peek();if(92===i)this._cursor.advance();else if(i===t)t=null;else if(null===t&&n2(i))t=i;else if(i===ip&&null===t)r++;else if(i===zu&&null===t){if(0===r)break;r>0&&r--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(O7)}}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(function USe(n){return n!==zu}(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===zu){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,t=this._cursor.clone()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t){if(null===this._currentTokenStart)throw new ZN("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(t));if(null===this._currentTokenType)throw new ZN("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));const r={type:this._currentTokenType,parts:e,sourceSpan:(t??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(r),this._currentTokenStart=null,this._currentTokenType=null,r}_createError(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');const r=new ZN(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new KN(r)}handleError(e){if(e instanceof QN&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),!(e instanceof KN))throw e;this.errors.push(e.error)}_attemptCharCode(e){return this._cursor.peek()===e&&(this._cursor.advance(),!0)}_attemptCharCodeCaseInsensitive(e){return!!function jSe(n,e){return R7(n)===R7(e)}(this._cursor.peek(),e)&&(this._cursor.advance(),!0)}_requireCharCode(e){const t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(PC(this._cursor.peek()),this._cursor.getSpan(t))}_attemptStr(e){const t=e.length;if(this._cursor.charsLeft()<t)return!1;const r=this._cursor.clone();for(let i=0;i<t;i++)if(!this._attemptCharCode(e.charCodeAt(i)))return this._cursor=r,!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){const t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(PC(this._cursor.peek()),this._cursor.getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,t){const r=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(r)<t)throw this._createError(PC(this._cursor.peek()),this._cursor.getSpan(r))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){const e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_consumeEntity(e){this._beginToken(9);const t=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(35)){const r=this._attemptCharCode(120)||this._attemptCharCode(88),i=this._cursor.clone();if(this._attemptCharCodeUntilFn($Se),59!=this._cursor.peek())throw this._cursor.advance(),this._createError(function FSe(n,e){return`Unable to parse entity "${e}" - ${n} character reference entities must end with ";"`}(r?YN.HEX:YN.DEC,this._cursor.getChars(t)),this._cursor.getSpan());const o=this._cursor.getChars(i);this._cursor.advance();try{const a=parseInt(o,r?16:10);this._endToken([String.fromCharCode(a),this._cursor.getChars(t)])}catch{throw this._createError(P7(this._cursor.getChars(t)),this._cursor.getSpan())}}else{const r=this._cursor.clone();if(this._attemptCharCodeUntilFn(VSe),59!=this._cursor.peek())this._beginToken(e,t),this._cursor=r,this._endToken(["&"]);else{const i=this._cursor.getChars(r);this._cursor.advance();const o=k2[i];if(!o)throw this._createError(P7(i),this._cursor.getSpan(t));this._endToken([o,`&${i};`])}}}_consumeRawText(e,t){this._beginToken(e?6:7);const r=[];for(;;){const i=this._cursor.clone(),o=t();if(this._cursor=i,o)break;e&&38===this._cursor.peek()?(this._endToken([this._processCarriageReturns(r.join(""))]),r.length=0,this._consumeEntity(6),this._beginToken(6)):r.push(this._readChar())}this._endToken([this._processCarriageReturns(r.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("--\x3e")),this._beginToken(11),this._requireStr("--\x3e"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);const t=this._cursor.clone();this._attemptUntilChar(62);const r=this._cursor.getChars(t);this._cursor.advance(),this._endToken([r])}_consumePrefixAndName(){const e=this._cursor.clone();let t="";for(;58!==this._cursor.peek()&&!(((n=this._cursor.peek())<gv||sC<n)&&(n<nx||QA<n)&&(n<dN||n>Iq));)this._cursor.advance();var n;let r;return 58===this._cursor.peek()?(t=this._cursor.getChars(e),this._cursor.advance(),r=this._cursor.clone()):r=e,this._requireCharCodeUntilFn(k7,""===t?0:1),[t,this._cursor.getChars(r)]}_consumeTagOpen(e){let t,r,i;try{if(!t2(this._cursor.peek()))throw this._createError(PC(this._cursor.peek()),this._cursor.getSpan(e));for(i=this._consumeTagOpenStart(e),r=i.parts[0],t=i.parts[1],this._attemptCharCodeUntilFn(ld);47!==this._cursor.peek()&&62!==this._cursor.peek()&&60!==this._cursor.peek()&&this._cursor.peek()!==ch;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(ld),this._attemptCharCode(61)&&(this._attemptCharCodeUntilFn(ld),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(ld);this._consumeTagOpenEnd()}catch(a){if(a instanceof KN)return void(i?i.type=4:(this._beginToken(5,e),this._endToken(["<"])));throw a}const o=this._getTagDefinition(t).getContentType(r);o===im.RAW_TEXT?this._consumeRawTextWithTagClose(r,t,!1):o===im.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(r,t,!0)}_consumeRawTextWithTagClose(e,t,r){this._consumeRawText(r,()=>!!(this._attemptCharCode(60)&&this._attemptCharCode(47)&&(this._attemptCharCodeUntilFn(ld),this._attemptStrCaseInsensitive(t)))&&(this._attemptCharCodeUntilFn(ld),this._attemptCharCode(62))),this._beginToken(3),this._requireCharCodeUntilFn(i=>62===i,3),this._cursor.advance(),this._endToken([e,t])}_consumeTagOpenStart(e){this._beginToken(0,e);const t=this._consumePrefixAndName();return this._endToken(t)}_consumeAttributeName(){const e=this._cursor.peek();if(39===e||34===e)throw this._createError(PC(e),this._cursor.getSpan());this._beginToken(14);const t=this._consumePrefixAndName();this._endToken(t)}_consumeAttributeValue(){if(39===this._cursor.peek()||34===this._cursor.peek()){const e=this._cursor.peek();this._consumeQuote(e);const t=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,t,t),this._consumeQuote(e)}else{const e=()=>k7(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){const e=this._attemptCharCode(47)?2:1;this._beginToken(e),this._requireCharCode(62),this._endToken([])}_consumeTagClose(e){this._beginToken(3,e),this._attemptCharCodeUntilFn(ld);const t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(ld),this._requireCharCode(62),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(ip),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);const e=this._readUntil(44),t=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{const i=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(i)}this._requireCharCode(44),this._attemptCharCodeUntilFn(ld),this._beginToken(7);const r=this._readUntil(44);this._endToken([r]),this._requireCharCode(44),this._attemptCharCodeUntilFn(ld)}_consumeExpansionCaseStart(){this._beginToken(20);const e=this._readUntil(ip).trim();this._endToken([e]),this._attemptCharCodeUntilFn(ld),this._beginToken(21),this._requireCharCode(ip),this._endToken([]),this._attemptCharCodeUntilFn(ld),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(zu),this._endToken([]),this._attemptCharCodeUntilFn(ld),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(zu),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,t,r,i){this._beginToken(e);const o=[];for(;!r();){const a=this._cursor.clone();this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(this._endToken([this._processCarriageReturns(o.join(""))],a),o.length=0,this._consumeInterpolation(t,a,i),this._beginToken(e)):38===this._cursor.peek()?(this._endToken([this._processCarriageReturns(o.join(""))]),o.length=0,this._consumeEntity(e),this._beginToken(e)):o.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(o.join(""))])}_consumeInterpolation(e,t,r){const i=[];this._beginToken(e,t),i.push(this._interpolationConfig.start);const o=this._cursor.clone();let a=null,d=!1;for(;this._cursor.peek()!==ch&&(null===r||!r());){const m=this._cursor.clone();if(this._isTagStart())return this._cursor=m,i.push(this._getProcessedChars(o,m)),void this._endToken(i);if(null===a){if(this._attemptStr(this._interpolationConfig.end))return i.push(this._getProcessedChars(o,m)),i.push(this._interpolationConfig.end),void this._endToken(i);this._attemptStr("//")&&(d=!0)}const _=this._cursor.peek();this._cursor.advance(),92===_?this._cursor.advance():_===a?a=null:!d&&null===a&&n2(_)&&(a=_)}i.push(this._getProcessedChars(o,this._cursor)),this._endToken(i)}_getProcessedChars(e,t){return this._processCarriageReturns(t.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._isBlockStart()||this._cursor.peek()===ch||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===zu&&this._isInExpansionCase()))}_isTagStart(){if(60===this._cursor.peek()){const e=this._cursor.clone();e.advance();const t=e.peek();if(gv<=t&&t<=sC||nx<=t&&t<=QA||47===t||33===t)return!0}return!1}_isBlockStart(){if(this._tokenizeBlocks&&this._cursor.peek()===ip){const e=this._cursor.clone();e.advance();const t=e.peek();if(33!==t&&47!==t&&58!==t)return!1;if(e.advance(),R2(e.peek()))return!0}return!1}_readUntil(e){const t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}_isInExpansionCase(){return this._expansionCaseStack.length>0&&21===this._expansionCaseStack[this._expansionCaseStack.length-1]}_isInExpansionForm(){return this._expansionCaseStack.length>0&&19===this._expansionCaseStack[this._expansionCaseStack.length-1]}isExpansionFormStart(){if(this._cursor.peek()!==ip)return!1;if(this._interpolationConfig){const e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}}function ld(n){return!pN(n)||n===ch}function k7(n){return pN(n)||62===n||60===n||47===n||39===n||34===n||61===n||n===ch}function $Se(n){return 59===n||n===ch||!function y1e(n){return n>=gv&&n<=102||n>=nx&&n<=70||sg(n)}(n)}function VSe(n){return 59===n||n===ch||!t2(n)}function R7(n){return n>=gv&&n<=sC?n-gv+nx:n}function R2(n){return t2(n)||sg(n)||95===n}function O7(n){return 59!==n&&ld(n)}class kC{constructor(e,t){if(e instanceof kC){this.file=e.file,this.input=e.input,this.end=e.end;const r=e.state;this.state={peek:r.peek,offset:r.offset,line:r.line,column:r.column}}else{if(!t)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=t.endPos,this.state={peek:-1,offset:t.startPos,line:t.startLine,column:t.startCol}}}clone(){return new kC(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,t){let r=e=e||this;if(t)for(;this.diff(e)>0&&-1!==t.indexOf(e.peek());)r===e&&(e=e.clone()),e.advance();const i=this.locationFromCursor(e),o=this.locationFromCursor(this),a=r!==e?this.locationFromCursor(r):i;return new ml(i,o,a)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new QN('Unexpected character "EOF"',this);const t=this.charAt(e.offset);10===t?(e.line++,e.column=0):Lq(t)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?ch:this.charAt(e.offset)}locationFromCursor(e){return new _v(e.file,e.state.offset,e.state.line,e.state.column)}}class O2 extends kC{constructor(e,t){e instanceof O2?(super(e),this.internalState={...e.internalState}):(super(e,t),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new O2(this)}getChars(e){const t=e.clone();let r="";for(;t.internalState.offset<this.internalState.offset;)r+=String.fromCodePoint(t.peek()),t.advance();return r}processEscapeSequence(){const e=()=>this.internalState.peek;if(92===e())if(this.internalState={...this.state},this.advanceState(this.internalState),110===e())this.state.peek=10;else if(114===e())this.state.peek=13;else if(118===e())this.state.peek=11;else if(116===e())this.state.peek=uN;else if(98===e())this.state.peek=8;else if(102===e())this.state.peek=12;else if(117===e())if(this.advanceState(this.internalState),e()===ip){this.advanceState(this.internalState);const t=this.clone();let r=0;for(;e()!==zu;)this.advanceState(this.internalState),r++;this.state.peek=this.decodeHexDigits(t,r)}else{const t=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,4)}else if(120===e()){this.advanceState(this.internalState);const t=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,2)}else if(Nq(e())){let t="",r=0,i=this.clone();for(;Nq(e())&&r<3;)i=this.clone(),t+=String.fromCodePoint(e()),this.advanceState(this.internalState),r++;this.state.peek=parseInt(t,8),this.internalState=i.internalState}else Lq(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,t){const r=this.input.slice(e.internalState.offset,e.internalState.offset+t),i=parseInt(r,16);if(isNaN(i))throw e.state=e.internalState,new QN("Invalid hexadecimal escape sequence",e);return i}}class QN{constructor(e,t){this.msg=e,this.cursor=t}}class Nh extends rd{static create(e,t,r){return new Nh(e,t,r)}constructor(e,t,r){super(t,r),this.elementName=e}}class RC{constructor(e,t){this.rootNodes=e,this.errors=t}}class HSe{constructor(e){this.getTagDefinition=e}parse(e,t,r){const i=function LSe(n,e,t,r={}){const i=new BSe(new mN(n,e),t,r);return i.tokenize(),new OSe(function GSe(n){const e=[];let t;for(let r=0;r<n.length;r++){const i=n[r];t&&5===t.type&&5===i.type||t&&16===t.type&&16===i.type?(t.parts[0]+=i.parts[0],t.sourceSpan.end=i.sourceSpan.end):(t=i,e.push(t))}return e}(i.tokens),i.errors,i.nonNormalizedIcuExpressions)}(e,t,this.getTagDefinition,r),o=new JN(i.tokens,this.getTagDefinition);return o.build(),new RC(o.rootNodes,i.errors.concat(o.errors))}}class JN{constructor(e,t){this.tokens=e,this.getTagDefinition=t,this._index=-1,this._containerStack=[],this.rootNodes=[],this.errors=[],this._advance()}build(){for(;24!==this._peek.type;)0===this._peek.type||4===this._peek.type?this._consumeStartTag(this._advance()):3===this._peek.type?this._consumeEndTag(this._advance()):12===this._peek.type?(this._closeVoidElement(),this._consumeCdata(this._advance())):10===this._peek.type?(this._closeVoidElement(),this._consumeComment(this._advance())):5===this._peek.type||7===this._peek.type||6===this._peek.type?(this._closeVoidElement(),this._consumeText(this._advance())):19===this._peek.type?this._consumeExpansion(this._advance()):25===this._peek.type?(this._closeVoidElement(),this._consumeBlockGroupOpen(this._advance())):29===this._peek.type?(this._closeVoidElement(),this._consumeBlock(this._advance(),30)):27===this._peek.type?(this._closeVoidElement(),this._consumeBlockGroupClose(this._advance())):this._advance()}_advance(){const e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){const t=this._advanceIf(7),r=this._advanceIf(11),i=null!=t?t.parts[0].trim():null,o=null==r?e.sourceSpan:new ml(e.sourceSpan.start,r.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new MC(i,o))}_consumeExpansion(e){const t=this._advance(),r=this._advance(),i=[];for(;20===this._peek.type;){const a=this._parseExpansionCase();if(!a)return;i.push(a)}if(23!==this._peek.type)return void this.errors.push(Nh.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));const o=new ml(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new AC(t.parts[0],r.parts[0],i,o,t.sourceSpan)),this._advance()}_parseExpansionCase(){const e=this._advance();if(21!==this._peek.type)return this.errors.push(Nh.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;const t=this._advance(),r=this._collectExpansionExpTokens(t);if(!r)return null;const i=this._advance();r.push({type:24,parts:[],sourceSpan:i.sourceSpan});const o=new JN(r,this.getTagDefinition);if(o.build(),o.errors.length>0)return this.errors=this.errors.concat(o.errors),null;const a=new ml(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart),d=new ml(t.sourceSpan.start,i.sourceSpan.end,t.sourceSpan.fullStart);return new I7(e.parts[0],o.rootNodes,a,e.sourceSpan,d)}_collectExpansionExpTokens(e){const t=[],r=[21];for(;;){if((19===this._peek.type||21===this._peek.type)&&r.push(this._peek.type),22===this._peek.type){if(!L7(r,21))return this.errors.push(Nh.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(r.pop(),0===r.length)return t}if(23===this._peek.type){if(!L7(r,19))return this.errors.push(Nh.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;r.pop()}if(24===this._peek.type)return this.errors.push(Nh.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){const t=[e],r=e.sourceSpan;let i=e.parts[0];if(i.length>0&&"\n"===i[0]){const o=this._getContainer();if(o instanceof M_)return this.errors.push(Nh.create(null,r,"Text cannot be placed directly inside of a block group.")),null;null!=o&&0===o.children.length&&this.getTagDefinition(o.name).ignoreFirstLf&&(i=i.substring(1),t[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[i]})}for(;8===this._peek.type||5===this._peek.type||9===this._peek.type;)e=this._advance(),t.push(e),i+=8===e.type?e.parts.join("").replace(/&([^;]+);/g,N7):9===e.type?e.parts[0]:e.parts.join("");i.length>0&&this._addToParent(new DC(i,new ml(r.start,e.sourceSpan.end,r.fullStart,r.details),t))}_closeVoidElement(){const e=this._getContainer();e instanceof $d&&this.getTagDefinition(e.name).isVoid&&this._containerStack.pop()}_consumeStartTag(e){const[t,r]=e.parts,i=[];for(;14===this._peek.type;)i.push(this._consumeAttr(this._advance()));const o=this._getElementFullName(t,r,this._getClosestParentElement());let a=!1;if(2===this._peek.type){this._advance(),a=!0;const R=this.getTagDefinition(o);R.canSelfClose||null!==PN(o)||R.isVoid||this.errors.push(Nh.create(o,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))}else 1===this._peek.type&&(this._advance(),a=!1);const d=this._peek.sourceSpan.fullStart,m=new ml(e.sourceSpan.start,d,e.sourceSpan.fullStart),_=new ml(e.sourceSpan.start,d,e.sourceSpan.fullStart),C=new $d(o,i,[],m,_,void 0),T=this._getContainer();this._pushContainer(C,T instanceof $d&&this.getTagDefinition(T.name).isClosedByChild(C.name)),a?this._popContainer(o,$d,m):4===e.type&&(this._popContainer(o,$d,null),this.errors.push(Nh.create(o,m,`Opening tag "${o}" not terminated.`)))}_pushContainer(e,t){t&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeEndTag(e){const t=this._getElementFullName(e.parts[0],e.parts[1],this._getClosestParentElement());this.getTagDefinition(t).isVoid?this.errors.push(Nh.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`)):this._popContainer(t,$d,e.sourceSpan)||this.errors.push(Nh.create(t,e.sourceSpan,`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`))}_popContainer(e,t,r){let i=!1;for(let o=this._containerStack.length-1;o>=0;o--){const a=this._containerStack[o];if((a instanceof M_?a.blocks[0]?.name:a.name)===e&&a instanceof t)return a.endSourceSpan=r,a.sourceSpan.end=null!==r?r.end:a.sourceSpan.end,this._containerStack.splice(o,this._containerStack.length-o),!i;(a instanceof M_||a instanceof $d&&!this.getTagDefinition(a.name).closedByParent)&&(i=!0)}return!1}_consumeAttr(e){const t=kN(e.parts[0],e.parts[1]);let r=e.sourceSpan.end;15===this._peek.type&&this._advance();let i="";const o=[];let a,d;if(16===this._peek.type)for(a=this._peek.sourceSpan,d=this._peek.sourceSpan.end;16===this._peek.type||17===this._peek.type||9===this._peek.type;){const C=this._advance();o.push(C),i+=17===C.type?C.parts.join("").replace(/&([^;]+);/g,N7):9===C.type?C.parts[0]:C.parts.join(""),d=r=C.sourceSpan.end}15===this._peek.type&&(r=this._advance().sourceSpan.end);const _=a&&d&&new ml(a.start,d,a.fullStart);return new M2(t,i,new ml(e.sourceSpan.start,r,e.sourceSpan.fullStart),e.sourceSpan,_,o.length>0?o:void 0,void 0)}_consumeBlockGroupOpen(e){const t=this._peek.sourceSpan.fullStart,r=new ml(e.sourceSpan.start,t,e.sourceSpan.fullStart),i=new ml(e.sourceSpan.start,t,e.sourceSpan.fullStart),o=new M_([],r,i,null);this._pushContainer(o,!1);const a=this._consumeBlock(e,26);i.end=a.startSourceSpan.end}_consumeBlock(e,t){this._conditionallyClosePreviousBlock();const r=[];for(;28===this._peek.type;){const _=this._advance();r.push(new SSe(_.parts[0],_.sourceSpan))}this._peek.type===t&&this._advance();const i=this._peek.sourceSpan.fullStart,o=new ml(e.sourceSpan.start,i,e.sourceSpan.fullStart),a=new ml(e.sourceSpan.start,i,e.sourceSpan.fullStart),d=new P2(e.parts[0],r,[],o,a),m=this._getContainer();return m instanceof M_?(m.blocks.push(d),this._containerStack.push(d)):this.errors.push(Nh.create(d.name,d.sourceSpan,"Blocks can only be placed inside of block groups.")),d}_consumeBlockGroupClose(e){const t=e.parts[0],r=this._getContainer();this._conditionallyClosePreviousBlock(),this._popContainer(t,M_,e.sourceSpan)||this.errors.push(Nh.create(t,e.sourceSpan,`Unexpected closing block "${t}". ${r instanceof $d?`There is an unclosed "${r.name}" HTML tag named that may have to be closed first.`:"The block may have been closed earlier."}`))}_conditionallyClosePreviousBlock(){const e=this._getContainer();if(e instanceof P2){const t=e.children.length?e.children[e.children.length-1]:null,r=null===t?null:new ml(t.sourceSpan.end,t.sourceSpan.end);this._popContainer(e.name,P2,r)}}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestParentElement(){for(let e=this._containerStack.length-1;e>-1;e--)if(this._containerStack[e]instanceof $d)return this._containerStack[e];return null}_addToParent(e){const t=this._getContainer();null===t?this.rootNodes.push(e):t instanceof M_?this.errors.push(Nh.create(null,e.sourceSpan,"Block groups can only contain blocks.")):t.children.push(e)}_getElementFullName(e,t,r){if(""===e&&""===(e=this.getTagDefinition(t).implicitNamespacePrefix||"")&&null!=r){const i=od(r.name)[1];this.getTagDefinition(i).preventNamespaceInheritance||(e=PN(r.name))}return kN(e,t)}}function L7(n,e){return n.length>0&&n[n.length-1]===e}function N7(n,e){return void 0!==k2[e]?k2[e]||n:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):n}class F7 extends HSe{constructor(){super(A7)}parse(e,t,r){return super.parse(e,t,r)}}const B7="ngPreserveWhitespaces",qSe=new Set(["pre","template","textarea","script","style"]),z7=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",WSe=new RegExp(`[^${z7}]`),XSe=new RegExp(`[${z7}]{2,}`,"g");function $7(n){return n.replace(new RegExp(M7,"g")," ")}class V7{visitElement(e,t){return qSe.has(e.name)||function ZSe(n){return n.some(e=>e.name===B7)}(e.attrs)?new $d(e.name,Ji(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new $d(e.name,e.attrs,eF(this,e.children),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}visitAttribute(e,t){return e.name!==B7?e:null}visitText(e,t){if(e.value.match(WSe)||t&&(t.prev instanceof AC||t.next instanceof AC)){const o=e.tokens.map(d=>5===d.type?function YSe({type:n,parts:e,sourceSpan:t}){return{type:n,parts:[U7(e[0])],sourceSpan:t}}(d):d),a=U7(e.value);return new DC(a,e.sourceSpan,o,e.i18n)}return null}visitComment(e,t){return e}visitExpansion(e,t){return e}visitExpansionCase(e,t){return e}visitBlockGroup(e,t){return new M_(eF(this,e.blocks),e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitBlock(e,t){return new P2(e.name,e.parameters,eF(this,e.children),e.sourceSpan,e.startSourceSpan)}visitBlockParameter(e,t){return e}}function U7(n){return $7(n).replace(XSe," ")}function eF(n,e){const t=[];return e.forEach((r,i)=>{const a=r.visit(n,{prev:e[i-1],next:e[i+1]});a&&t.push(a)}),t}function L2(n,e=!1){return Bc(Object.keys(n).map(t=>({key:t,quoted:e,value:n[t]})))}const j7=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function G7(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),j7.has(n+"|"+e)||j7.has("*|"+e)}class tIe{constructor(e,t,r,i){this._exprParser=e,this._interpolationConfig=t,this._schemaRegistry=r,this.errors=i}get interpolationConfig(){return this._interpolationConfig}createBoundHostProperties(e,t){const r=[];for(const i of Object.keys(e)){const o=e[i];"string"==typeof o?this.parsePropertyBinding(i,o,!0,t,t.start.offset,void 0,[],r,t):this._reportError(`Value of the host property binding "${i}" needs to be a string representing an expression but got "${o}" (${typeof o})`,t)}return r}createDirectiveHostEventAsts(e,t){const r=[];for(const i of Object.keys(e)){const o=e[i];"string"==typeof o?this.parseEvent(i,o,!1,t,t,[],r,t):this._reportError(`Value of the host listener "${i}" needs to be a string representing an expression but got "${o}" (${typeof o})`,t)}return r}parseInterpolation(e,t,r){const i=t.start.toString(),o=t.fullStart.offset;try{const a=this._exprParser.parseInterpolation(e,i,o,r,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,t),a}catch(a){return this._reportError(`${a}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",i,o)}}parseInterpolationExpression(e,t){const r=t.start.toString(),i=t.start.offset;try{const o=this._exprParser.parseInterpolationExpression(e,r,i);return o&&this._reportExpressionParserErrors(o.errors,t),o}catch(o){return this._reportError(`${o}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",r,i)}}parseInlineTemplateBinding(e,t,r,i,o,a,d,m){const C=this._parseTemplateBindings(e,t,r,r.start.offset+1,i);for(const T of C){const R=P_(r,T.sourceSpan),L=T.key.source,G=P_(r,T.key.span);if(T instanceof vN){const W=T.value?T.value.source:"$implicit",ve=T.value?P_(r,T.value.span):void 0;d.push(new F1e(L,W,R,G,ve))}else if(T.value){const W=m?R:r,ve=P_(r,T.value.ast.sourceSpan);this._parsePropertyAst(L,T.value,W,G,ve,o,a)}else o.push([L,""]),this.parseLiteralAttr(L,null,G,i,void 0,o,a,G)}}_parseTemplateBindings(e,t,r,i,o){const a=r.start.toString();try{const d=this._exprParser.parseTemplateBindings(e,t,a,i,o);return this._reportExpressionParserErrors(d.errors,r),d.warnings.forEach(m=>{this._reportError(m,r,E_.WARNING)}),d.templateBindings}catch(d){return this._reportError(`${d}`,r),[]}}parseLiteralAttr(e,t,r,i,o,a,d,m){nF(e)?(e=e.substring(1),void 0!==m&&(m=P_(m,new sp(m.start.offset+1,m.end.offset))),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',r,E_.ERROR),this._parseAnimation(e,t,r,i,m,o,a,d)):d.push(new bN(e,this._exprParser.wrapLiteralPrimitive(t,"",i),ox.LITERAL_ATTR,r,m,o))}parsePropertyBinding(e,t,r,i,o,a,d,m,_){0===e.length&&this._reportError("Property name is missing in binding",i);let C=!1;e.startsWith("animate-")?(C=!0,e=e.substring(8),void 0!==_&&(_=P_(_,new sp(_.start.offset+8,_.end.offset)))):nF(e)&&(C=!0,e=e.substring(1),void 0!==_&&(_=P_(_,new sp(_.start.offset+1,_.end.offset)))),C?this._parseAnimation(e,t,i,o,_,a,d,m):this._parsePropertyAst(e,this.parseBinding(t,r,a||i,o),i,_,a,d,m)}parsePropertyInterpolation(e,t,r,i,o,a,d,m){const _=this.parseInterpolation(t,i||r,m);return!!_&&(this._parsePropertyAst(e,_,r,d,i,o,a),!0)}_parsePropertyAst(e,t,r,i,o,a,d){a.push([e,t.source]),d.push(new bN(e,t,ox.DEFAULT,r,i,o))}_parseAnimation(e,t,r,i,o,a,d,m){0===e.length&&this._reportError("Animation trigger is missing",r);const _=this.parseBinding(t||"undefined",!1,a||r,i);d.push([e,_.source]),m.push(new bN(e,_,ox.ANIMATION,r,o,a))}parseBinding(e,t,r,i){const o=(r&&r.start||"(unknown)").toString();try{const a=t?this._exprParser.parseSimpleBinding(e,o,i,this._interpolationConfig):this._exprParser.parseBinding(e,o,i,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,r),a}catch(a){return this._reportError(`${a}`,r),this._exprParser.wrapLiteralPrimitive("ERROR",o,i)}}createBoundElementProperty(e,t,r=!1,i=!0){if(t.isAnimation)return new Hq(t.name,4,Ma.NONE,t.expression,null,t.sourceSpan,t.keySpan,t.valueSpan);let a,o=null,d=null;const m=t.name.split(".");let _;if(m.length>1)if("attr"==m[0]){d=m.slice(1).join("."),r||this._validatePropertyOrAttributeName(d,t.sourceSpan,!0),_=rF(this._schemaRegistry,e,d,!0);const C=d.indexOf(":");if(C>-1){const T=d.substring(0,C),R=d.substring(C+1);d=kN(T,R)}a=1}else"class"==m[0]?(d=m[1],a=2,_=[Ma.NONE]):"style"==m[0]&&(o=m.length>2?m[2]:null,d=m[1],a=3,_=[Ma.STYLE]);if(null===d){const C=this._schemaRegistry.getMappedPropName(t.name);d=i?C:t.name,_=rF(this._schemaRegistry,e,C,!1),a=0,r||this._validatePropertyOrAttributeName(C,t.sourceSpan,!1)}return new Hq(d,a,_[0],t.expression,o,t.sourceSpan,t.keySpan,t.valueSpan)}parseEvent(e,t,r,i,o,a,d,m){0===e.length&&this._reportError("Event name is missing in binding",i),nF(e)?(e=e.slice(1),void 0!==m&&(m=P_(m,new sp(m.start.offset+1,m.end.offset))),this._parseAnimationEvent(e,t,r,i,o,d,m)):this._parseRegularEvent(e,t,r,i,o,a,d,m)}calcPossibleSecurityContexts(e,t,r){const i=this._schemaRegistry.getMappedPropName(t);return rF(this._schemaRegistry,e,i,r)}_parseAnimationEvent(e,t,r,i,o,a,d){const m=function Zbe(n,e){return jH(n,".",e)}(e,[e,""]),_=m[0],C=m[1].toLowerCase(),T=this._parseAction(t,r,o);a.push(new Gq(_,C,1,T,i,o,d)),0===_.length&&this._reportError("Animation event name is missing in binding",i),C?"start"!==C&&"done"!==C&&this._reportError(`The provided animation output phase value "${C}" for "@${_}" is not supported (use start or done)`,i):this._reportError(`The animation trigger output event (@${_}) is missing its phase value name (start or done are currently supported)`,i)}_parseRegularEvent(e,t,r,i,o,a,d,m){const[_,C]=function Xbe(n,e){return jH(n,":",e)}(e,[null,e]),T=this._parseAction(t,r,o);a.push([e,T.source]),d.push(new Gq(C,_,0,T,i,o,m))}_parseAction(e,t,r){const i=(r&&r.start||"(unknown").toString(),o=r&&r.start?r.start.offset:0;try{const a=this._exprParser.parseAction(e,t,i,o,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,r),!a||a.ast instanceof Fd?(this._reportError("Empty expressions are not allowed",r),this._exprParser.wrapLiteralPrimitive("ERROR",i,o)):a}catch(a){return this._reportError(`${a}`,r),this._exprParser.wrapLiteralPrimitive("ERROR",i,o)}}_reportError(e,t,r=E_.ERROR){this.errors.push(new rd(t,e,r))}_reportExpressionParserErrors(e,t){for(const r of e)this._reportError(r.message,t)}_validatePropertyOrAttributeName(e,t,r){const i=r?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);i.error&&this._reportError(i.msg,t,E_.ERROR)}}function nF(n){return"@"==n[0]}function rF(n,e,t,r){const i=[];return __.parse(e).forEach(o=>{const a=o.element?[o.element]:n.allKnownElementNames(),d=new Set(o.notSelectors.filter(_=>_.isElementSelector()).map(_=>_.element)),m=a.filter(_=>!d.has(_));i.push(...m.map(_=>n.securityContext(_,t,r)))}),0===i.length?[Ma.NONE]:Array.from(new Set(i)).sort()}function P_(n,e){const t=e.start-n.start.offset,r=e.end-n.end.offset;return new ml(n.start.moveBy(t),n.end.moveBy(r),n.fullStart.moveBy(t),n.details)}const rIe=/^([^:/?#]+):/;function q7(n){let e=null,t=null,r=null,i=!1,o="";n.attrs.forEach(m=>{const _=m.name.toLowerCase();"select"==_?e=m.value:"href"==_?t=m.value:"rel"==_?r=m.value:"ngNonBindable"==m.name?i=!0:"ngProjectAs"==m.name&&m.value.length>0&&(o=m.value)}),e=function pIe(n){return null===n||0===n.length?"*":n}(e);const a=n.name.toLowerCase();let d=Vd.OTHER;return MN(a)?d=Vd.NG_CONTENT:"style"==a?d=Vd.STYLE:"script"==a?d=Vd.SCRIPT:"link"==a&&"stylesheet"==r&&(d=Vd.STYLESHEET),new fIe(d,e,t,i,o)}var Vd=function(n){return n[n.NG_CONTENT=0]="NG_CONTENT",n[n.STYLE=1]="STYLE",n[n.STYLESHEET=2]="STYLESHEET",n[n.SCRIPT=3]="SCRIPT",n[n.OTHER=4]="OTHER",n}(Vd||{});class fIe{constructor(e,t,r,i,o){this.type=e,this.selectAttr=t,this.hrefAttr=r,this.nonBindable=i,this.projectAs=o}}const mIe=/^\d+(ms|s)?$/,gIe=/^\s$/,W7=new Map([[ip,zu],[91,93],[40,41]]);var cd=function(n){return n.IDLE="idle",n.TIMER="timer",n.INTERACTION="interaction",n.IMMEDIATE="immediate",n.HOVER="hover",n.VIEWPORT="viewport",n}(cd||{});function X7({expression:n,sourceSpan:e},t,r){const i=n.indexOf("when");if(-1===i)return r.push(new rd(e,'Could not find "when" keyword in expression')),null;const o=OC(n,i+1),a=t.parseBinding(n.slice(o),!1,e,e.start.offset+o);return new eq(a,e)}function Z7({expression:n,sourceSpan:e},t){const r=n.indexOf("on");if(-1===r)return t.push(new rd(e,'Could not find "on" keyword in expression')),[];const i=OC(n,r+1);return new _Ie(n,i,e,t).parse()}class _Ie{constructor(e,t,r,i){this.expression=e,this.start=t,this.span=r,this.errors=i,this.index=0,this.triggers=[],this.tokens=(new jN).tokenize(e.slice(t))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){const e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(44))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(40)){this.advance();const t=this.errors.length,r=this.consumeParameters();if(this.errors.length!==t)break;this.consumeTrigger(e,r),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}return this.triggers}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1||this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,t){const r=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),i=r.moveBy(this.token().end-e.index),o=new ml(r,i);try{switch(e.toString()){case cd.IDLE:this.triggers.push(function yIe(n,e){if(n.length>0)throw new Error(`"${cd.IDLE}" trigger cannot have parameters`);return new yxe(e)}(t,o));break;case cd.TIMER:this.triggers.push(function vIe(n,e){if(1!==n.length)throw new Error(`"${cd.TIMER}" trigger must have exactly one parameter`);const t=N2(n[0]);if(null===t)throw new Error(`Could not parse time value of trigger "${cd.TIMER}"`);return new xxe(t,e)}(t,o));break;case cd.INTERACTION:this.triggers.push(function bIe(n,e){if(n.length>1)throw new Error(`"${cd.INTERACTION}" trigger can only have zero or one parameters`);return new wxe(n[0]??null,e)}(t,o));break;case cd.IMMEDIATE:this.triggers.push(function xIe(n,e){if(n.length>0)throw new Error(`"${cd.IMMEDIATE}" trigger cannot have parameters`);return new vxe(e)}(t,o));break;case cd.HOVER:this.triggers.push(function wIe(n,e){if(n.length>0)throw new Error(`"${cd.HOVER}" trigger cannot have parameters`);return new bxe(e)}(t,o));break;case cd.VIEWPORT:this.triggers.push(function EIe(n,e){if(n.length>1)throw new Error(`"${cd.VIEWPORT}" trigger can only have zero or one parameters`);return new Exe(n[0]??null,e)}(t,o));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(a){this.error(e,a.message)}}consumeParameters(){const e=[];if(!this.token().isCharacter(40))return this.unexpectedToken(this.token()),e;this.advance();const t=[];let r="";for(;this.index<this.tokens.length;){const i=this.token();if(i.isCharacter(41)&&0===t.length){r.length&&e.push(r);break}i.type===Vo.Character&&W7.has(i.numValue)&&t.push(W7.get(i.numValue)),t.length>0&&i.isCharacter(t[t.length-1])&&t.pop(),0===t.length&&i.isCharacter(44)&&r.length>0?(e.push(r),r="",this.advance()):(r+=this.tokenText(),this.advance())}return(!this.token().isCharacter(41)||t.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(44)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenText(){return this.expression.slice(this.start+this.token().index,this.start+this.token().end)}error(e,t){const r=this.span.start.moveBy(this.start+e.index),i=r.moveBy(e.end-e.index);this.errors.push(new rd(new ml(r,i),t))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}}function OC(n,e=0){let t=!1;for(let r=e;r<n.length;r++)if(gIe.test(n[r]))t=!0;else if(t)return r;return-1}function N2(n){const e=n.match(mIe);if(!e)return null;const[t,r]=e;return parseInt(t)*("s"===r?1e3:1)}const CIe=/^prefetch\s+when\s/,SIe=/^prefetch\s+on\s/,Y7=/^minimum\s/,IIe=/^after\s/,TIe=/^when\s/,DIe=/^on\s/;var sm=function(n){return n.PLACEHOLDER="placeholder",n.LOADING="loading",n.ERROR="error",n}(sm||{});function PIe(n,e){let t=null;for(const r of n.parameters){if(!Y7.test(r.expression))throw new Error(`Unrecognized parameter in "${sm.PLACEHOLDER}" block: "${r.expression}"`);{const i=N2(r.expression.slice(OC(r.expression)));if(null===i)throw new Error('Could not parse time value of parameter "minimum"');t=i}}return new Cxe(Ji(e,n.children),t,n.sourceSpan,n.startSourceSpan,n.endSourceSpan)}function kIe(n,e){let t=null,r=null;for(const i of n.parameters)if(IIe.test(i.expression)){const o=N2(i.expression.slice(OC(i.expression)));if(null===o)throw new Error('Could not parse time value of parameter "after"');t=o}else{if(!Y7.test(i.expression))throw new Error(`Unrecognized parameter in "${sm.LOADING}" block: "${i.expression}"`);{const o=N2(i.expression.slice(OC(i.expression)));if(null===o)throw new Error('Could not parse time value of parameter "minimum"');r=o}}return new Sxe(Ji(e,n.children),t,r,n.sourceSpan,n.startSourceSpan,n.endSourceSpan)}function RIe(n,e){if(n.parameters.length>0)throw new Error(`"${sm.ERROR}" block cannot have parameters`);return new Ixe(Ji(e,n.children),n.sourceSpan,n.startSourceSpan,n.endSourceSpan)}const LIe=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,k__BANANA_BOX={start:"[(",end:")]"},k__PROPERTY={start:"[",end:"]"},k__EVENT={start:"(",end:")"};class BIe{constructor(e,t){this.bindingParser=e,this.options=t,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.commentNodes=[],this.inI18nBlock=!1}visitElement(e){const t=eC(e.i18n);t&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);const r=q7(e);if(r.type===Vd.SCRIPT)return null;if(r.type===Vd.STYLE){const ve=function jIe(n){return 1===n.children.length&&n.children[0]instanceof DC?n.children[0].value:null}(e);return null!==ve&&this.styles.push(ve),null}if(r.type===Vd.STYLESHEET&&function nIe(n){if(null==n||0===n.length||"/"==n[0])return!1;const e=n.match(rIe);return null===e||"package"==e[1]||"asset"==e[1]}(r.hrefAttr))return this.styleUrls.push(r.hrefAttr),null;const i=function wwe(n){return"ng-template"===od(n)[1]}(e.name),o=[],a=[],d=[],m=[],_=[],C={},T=[],R=[];let G,W,L=!1;for(const ve of e.attrs){let _e=!1;const re=rW(ve.name);let Oe=!1;if(ve.i18n&&(C[ve.name]=ve.i18n),re.startsWith("*")){L&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",ve.sourceSpan),Oe=!0,L=!0;const vt=ve.value,Mt=re.substring(1),Kt=[];this.bindingParser.parseInlineTemplateBinding(Mt,vt,ve.sourceSpan,ve.valueSpan?ve.valueSpan.start.offset:ve.sourceSpan.start.offset+ve.name.length,[],T,Kt,!0),R.push(...Kt.map(an=>new tq(an.name,an.value,an.sourceSpan,an.keySpan,an.valueSpan)))}else _e=this.parseAttribute(i,ve,[],o,a,d,m);!_e&&!Oe&&_.push(this.visitAttribute(ve))}if(G=r.nonBindable?Ji($Ie,e.children).flat(1/0):Ji(this,e.children),r.type===Vd.NG_CONTENT){e.children&&!e.children.every(re=>function VIe(n){return n instanceof DC&&0==n.value.trim().length}(re)||function UIe(n){return n instanceof MC}(re))&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);const ve=r.selectAttr,_e=e.attrs.map(re=>this.visitAttribute(re));W=new Dxe(ve,_e,e.sourceSpan,e.i18n),this.ngContentSelectors.push(ve)}else if(i){const ve=this.extractAttributes(e.name,o,C);W=new nm(e.name,_,ve.bound,a,[],G,m,d,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{const ve=this.extractAttributes(e.name,o,C);W=new KE(e.name,_,ve.bound,a,G,m,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(L){const ve=this.extractAttributes("ng-template",T,C),_e=[];ve.literal.forEach(Mt=>_e.push(Mt)),ve.bound.forEach(Mt=>_e.push(Mt));const re=W instanceof KE?{attributes:W.attributes,inputs:W.inputs,outputs:W.outputs}:{attributes:[],inputs:[],outputs:[]};W=new nm(W instanceof nm?null:W.name,re.attributes,re.inputs,re.outputs,_e,[W],[],R,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,i&&t?void 0:e.i18n)}return t&&(this.inI18nBlock=!1),W}visitAttribute(e){return new BA(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!eC(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);const t=e.i18n,r={},i={};return Object.keys(t.placeholders).forEach(o=>{const a=t.placeholders[o];if(o.startsWith("VAR_")){const d=o.trim(),m=this.bindingParser.parseInterpolationExpression(a.text,a.sourceSpan);r[d]=new FA(m,a.sourceSpan)}else i[o]=this._visitTextWithInterpolation(a.text,a.sourceSpan,null)}),new nq(r,i,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new _xe(e.value||"",e.sourceSpan)),null}visitBlockGroup(e,t){const r=e.blocks[0];if(!r)return this.reportError("Block group must have at least one block.",e.sourceSpan),null;if("defer"===r.name&&this.options.enabledBlockTypes.has(r.name)){const{node:i,errors:o}=function AIe(n,e,t){const r=[],[i,...o]=n.blocks,{triggers:a,prefetchTriggers:d}=function OIe(n,e,t){const r=[],i=[];for(const o of n)if(TIe.test(o.expression)){const a=X7(o,e,t);null!==a&&r.push(a)}else if(DIe.test(o.expression))r.push(...Z7(o,t));else if(CIe.test(o.expression)){const a=X7(o,e,t);null!==a&&i.push(a)}else SIe.test(o.expression)?i.push(...Z7(o,t)):t.push(new rd(o.sourceSpan,"Unrecognized trigger"));return{triggers:r,prefetchTriggers:i}}(i.parameters,t,r),{placeholder:m,loading:_,error:C}=function MIe(n,e,t){let r=null,i=null,o=null;for(const a of n)try{switch(a.name){case sm.PLACEHOLDER:null!==r?e.push(new rd(a.startSourceSpan,`"defer" block can only have one "${sm.PLACEHOLDER}" block`)):r=PIe(a,t);break;case sm.LOADING:null!==i?e.push(new rd(a.startSourceSpan,`"defer" block can only have one "${sm.LOADING}" block`)):i=kIe(a,t);break;case sm.ERROR:null!==o?e.push(new rd(a.startSourceSpan,`"defer" block can only have one "${sm.ERROR}" block`)):o=RIe(a,t);break;default:e.push(new rd(a.startSourceSpan,`Unrecognized block "${a.name}"`))}}catch(d){e.push(new rd(a.startSourceSpan,d.message))}return{placeholder:r,loading:i,error:o}}(o,r,e);return{node:new Txe(Ji(e,i.children),a,d,m,_,C,n.sourceSpan,n.startSourceSpan,n.endSourceSpan),errors:r}}(e,this,this.bindingParser);return this.errors.push(...o),i}return this.reportError(`Unrecognized block "${r.name}".`,r.sourceSpan),null}visitBlock(e,t){}visitBlockParameter(e,t){}extractAttributes(e,t,r){const i=[],o=[];return t.forEach(a=>{const d=r[a.name];if(a.isLiteral)o.push(new BA(a.name,a.expression.source||"",a.sourceSpan,a.keySpan,a.valueSpan,d));else{const m=this.bindingParser.createBoundElementProperty(e,a,!0,!1);i.push(zA.fromBoundElementProperty(m,d))}}),{bound:i,literal:o}}parseAttribute(e,t,r,i,o,a,d){const m=rW(t.name),_=t.value,C=t.sourceSpan,T=t.valueSpan?t.valueSpan.start.offset:C.start.offset;function R(_e,re,Oe){const Mt=_e.start.moveBy(re.length+(t.name.length-m.length)),Kt=Mt.moveBy(Oe.length);return new ml(Mt,Kt,Mt,Oe)}const L=m.match(LIe);if(L){if(null!=L[1]){const _e=L[7],re=R(C,L[1],_e);this.bindingParser.parsePropertyBinding(_e,_,!1,C,T,t.valueSpan,r,i,re)}else if(L[2])if(e){const _e=L[7],re=R(C,L[2],_e);this.parseVariable(_e,_,C,re,t.valueSpan,a)}else this.reportError('"let-" is only supported on ng-template elements.',C);else if(L[3]){const _e=L[7],re=R(C,L[3],_e);this.parseReference(_e,_,C,re,t.valueSpan,d)}else if(L[4]){const _e=[],re=L[7],Oe=R(C,L[4],re);this.bindingParser.parseEvent(re,_,!1,C,t.valueSpan||C,r,_e,Oe),iF(_e,o)}else if(L[5]){const _e=L[7],re=R(C,L[5],_e);this.bindingParser.parsePropertyBinding(_e,_,!1,C,T,t.valueSpan,r,i,re),this.parseAssignmentEvent(_e,_,C,t.valueSpan,r,o,re)}else if(L[6]){const _e=R(C,"",m);this.bindingParser.parseLiteralAttr(m,_,C,T,t.valueSpan,r,i,_e)}return!0}let G=null;if(m.startsWith(k__BANANA_BOX.start)?G=k__BANANA_BOX:m.startsWith(k__PROPERTY.start)?G=k__PROPERTY:m.startsWith(k__EVENT.start)&&(G=k__EVENT),null!==G&&m.endsWith(G.end)&&m.length>G.start.length+G.end.length){const _e=m.substring(G.start.length,m.length-G.end.length),re=R(C,G.start,_e);if(G.start===k__BANANA_BOX.start)this.bindingParser.parsePropertyBinding(_e,_,!1,C,T,t.valueSpan,r,i,re),this.parseAssignmentEvent(_e,_,C,t.valueSpan,r,o,re);else if(G.start===k__PROPERTY.start)this.bindingParser.parsePropertyBinding(_e,_,!1,C,T,t.valueSpan,r,i,re);else{const Oe=[];this.bindingParser.parseEvent(_e,_,!1,C,t.valueSpan||C,r,Oe,re),iF(Oe,o)}return!0}const W=R(C,"",m);return this.bindingParser.parsePropertyInterpolation(m,_,C,t.valueSpan,r,i,W,t.valueTokens??null)}_visitTextWithInterpolation(e,t,r,i){const o=$7(e),a=this.bindingParser.parseInterpolation(o,t,r);return a?new FA(a,t,i):new uv(o,t)}parseVariable(e,t,r,i,o,a){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',r):0===e.length&&this.reportError("Variable does not have a name",r),a.push(new tq(e,t,r,i,o))}parseReference(e,t,r,i,o,a){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',r):0===e.length?this.reportError("Reference does not have a name",r):a.some(d=>d.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,r),a.push(new Axe(e,t,r,i,o))}parseAssignmentEvent(e,t,r,i,o,a,d){const m=[];this.bindingParser.parseEvent(`${e}Change`,`${t} =$event`,!0,r,i||r,o,m,d),iF(m,a)}reportError(e,t,r=E_.ERROR){this.errors.push(new rd(t,e,r))}}const $Ie=new class zIe{visitElement(e){const t=q7(e);if(t.type===Vd.SCRIPT||t.type===Vd.STYLE||t.type===Vd.STYLESHEET)return null;const r=Ji(this,e.children,null);return new KE(e.name,Ji(this,e.attrs),[],[],r,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitComment(e){return null}visitAttribute(e){return new BA(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new uv(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlockGroup(e,t){const r=Ji(this,e.blocks);return null!==e.endSourceSpan&&r.push(new uv(e.endSourceSpan.toString(),e.endSourceSpan)),r}visitBlock(e,t){return[new uv(e.startSourceSpan.toString(),e.startSourceSpan),...Ji(this,e.children)]}visitBlockParameter(e,t){return null}};function rW(n){return/^data-/i.test(n)?n.substring(5):n}function iF(n,e){e.push(...n.map(t=>$A.fromParsedEvent(t)))}var fg=function(n){return n[n.ELEMENT=0]="ELEMENT",n[n.TEMPLATE=1]="TEMPLATE",n}(fg||{});class oF{constructor(e,t,r=0,i=null,o,a){this.index=e,this.ref=t,this.level=r,this.templateIndex=i,this.meta=o,this.registry=a,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=a||function GIe(){return{getUniqueId:Zxe(),icus:new Map}}(),this.id=this._registry.getUniqueId()}appendTag(e,t,r,i){t.isVoid&&i||GA(this.placeholders,t.isVoid||!i?t.startName:t.closeName,{type:e,index:r,ctx:this.id,isVoid:t.isVoid,closed:i})}get icus(){return this._registry.icus}get isRoot(){return 0===this.level}get isResolved(){return 0===this._unresolvedCtxCount}getSerializedPlaceholders(){const e=new Map;return this.placeholders.forEach((t,r)=>e.set(r,t.map(HIe))),e}appendBinding(e){this.bindings.add(e)}appendIcu(e,t){GA(this._registry.icus,e,t)}appendBoundText(e){hq(e,this.bindings.size,this.id).forEach((r,i)=>GA(this.placeholders,i,...r))}appendTemplate(e,t){this.appendTag(fg.TEMPLATE,e,t,!1),this.appendTag(fg.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}appendElement(e,t,r){this.appendTag(fg.ELEMENT,e,t,r)}appendProjection(e,t){this.appendTag(fg.ELEMENT,e,t,!1),this.appendTag(fg.ELEMENT,e,t,!0)}forkChildContext(e,t,r){return new oF(e,this.ref,this.level+1,t,r,this._registry)}reconcileChildContext(e){["start","close"].forEach(r=>{const a=(this.placeholders.get(e.meta[`${r}Name`])||[]).find(oW(this.id,e.templateIndex));a&&(a.ctx=e.id)}),e.placeholders.forEach((r,i)=>{const o=this.placeholders.get(i);if(!o)return void this.placeholders.set(i,r);const a=o.findIndex(oW(e.id,e.templateIndex));if(a>=0){const d=i.startsWith("CLOSE");i.endsWith("NG-TEMPLATE")?o.splice(a+(d?0:1),0,...r):(r[d?r.length-1:0].tmpl=o[a],o.splice(a,1,...r))}else o.push(...r);this.placeholders.set(i,o)}),this._unresolvedCtxCount--}}function sF(n,e,t,r){return jA(`${r?"/":""}${n}${e}`,t)}function iW(n,{index:e,ctx:t,isVoid:r},i){return r?sF(n,e,t)+sF(n,e,t,!0):sF(n,e,t,i)}function oW(n,e){return t=>"object"==typeof t&&t.type===fg.TEMPLATE&&t.index===e&&t.ctx===n}function HIe(n){const e=(r,i)=>iW("#",r,i),t=(r,i)=>iW("*",r,i);switch(n.type){case fg.ELEMENT:return n.closed?e(n,!0)+(n.tmpl?t(n.tmpl,!0):""):n.tmpl?t(n.tmpl)+e(n)+(n.isVoid?t(n.tmpl,!0):""):e(n);case fg.TEMPLATE:return t(n,n.closed);default:return n}}const WIe=new class qIe{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){const t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}formatPh(e){return`{${tC(e,!1)}}`}};function sW(n){return n.visit(WIe)}const aW={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"};class XIe{constructor(){this._placeHolderNameCounts={},this._signatureToName={}}getStartTagPlaceholderName(e,t,r){const i=this._hashTag(e,t,r);if(this._signatureToName[i])return this._signatureToName[i];const o=e.toUpperCase(),a=aW[o]||`TAG_${o}`,d=this._generateUniqueName(r?a:`START_${a}`);return this._signatureToName[i]=d,d}getCloseTagPlaceholderName(e){const t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];const r=e.toUpperCase(),o=this._generateUniqueName(`CLOSE_${aW[r]||`TAG_${r}`}`);return this._signatureToName[t]=o,o}getPlaceholderName(e,t){const r=e.toUpperCase(),i=`PH: ${r}=${t}`;if(this._signatureToName[i])return this._signatureToName[i];const o=this._generateUniqueName(r);return this._signatureToName[i]=o,o}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}_hashTag(e,t,r){return`<${e}`+Object.keys(t).sort().map(d=>` ${d}=${t[d]}`).join("")+(r?"/>":`></${e}>`)}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;const r=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=r+1,`${e}_${r}`}}const ZIe=new S7(new jN);function YIe(n,e){return e}class KIe{constructor(e,t){this._expressionParser=e,this._interpolationConfig=t}toI18nMessage(e,t="",r="",i="",o){const a={isIcu:1==e.length&&e[0]instanceof AC,icuDepth:0,placeholderRegistry:new XIe,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:o||YIe},d=Ji(this,e,a);return new ng(d,a.placeholderToContent,a.placeholderToMessage,t,r,i)}visitElement(e,t){const r=Ji(this,e.children,t),i={};e.attrs.forEach(_=>{i[_.name]=_.value});const o=A7(e.name).isVoid,a=t.placeholderRegistry.getStartTagPlaceholderName(e.name,i,o);t.placeholderToContent[a]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let d="";o||(d=t.placeholderRegistry.getCloseTagPlaceholderName(e.name),t.placeholderToContent[d]={text:`</${e.name}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});const m=new rN(e.name,i,a,d,r,o,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,m)}visitAttribute(e,t){const r=void 0===e.valueTokens||1===e.valueTokens.length?new rg(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,r)}visitText(e,t){const r=1===e.tokens.length?new rg(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,r)}visitComment(e,t){return null}visitExpansion(e,t){t.icuDepth++;const r={},i=new Kb(e.switchValue,e.type,r,e.sourceSpan);if(e.cases.forEach(d=>{r[d.value]=new tp(d.expression.map(m=>m.visit(this,t)),d.expSourceSpan)}),t.icuDepth--,t.isIcu||t.icuDepth>0){const d=t.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return i.expressionPlaceholder=d,t.placeholderToContent[d]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},t.visitNodeFn(e,i)}const o=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[o]=this.toI18nMessage([e],"","","",void 0);const a=new Qb(i,o,e.sourceSpan);return t.visitNodeFn(e,a)}visitExpansionCase(e,t){throw new Error("Unreachable code")}visitBlockGroup(e,t){const r=Ji(this,e.blocks,t),i=new tp(r,e.sourceSpan);return t.visitNodeFn(e,i)}visitBlock(e,t){const r=Ji(this,e.children,t),i=new tp(r,e.sourceSpan);return t.visitNodeFn(e,i)}visitBlockParameter(e,t){}_visitTextWithInterpolation(e,t,r,i){const o=[];let a=!1;for(const d of e)switch(d.type){case 8:case 17:a=!0;const m=d.parts[1],_=m.split(tTe)[2]||"INTERPOLATION",C=r.placeholderRegistry.getPlaceholderName(_,m);r.placeholderToContent[C]={text:d.parts.join(""),sourceSpan:d.sourceSpan},o.push(new ig(m,C,d.sourceSpan));break;default:if(d.parts[0].length>0){const T=o[o.length-1];T instanceof rg?(T.value+=d.parts[0],T.sourceSpan=new ml(T.sourceSpan.start,d.sourceSpan.end,T.sourceSpan.fullStart,T.sourceSpan.details)):o.push(new rg(d.parts[0],d.sourceSpan))}}return a?(function QIe(n,e){if(e instanceof ng&&(function JIe(n){const e=n.nodes;if(1!==e.length||!(e[0]instanceof tp))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}(e),e=e.nodes[0]),e instanceof tp){!function eTe(n,e){if(n.length!==e.length)throw new Error("The number of i18n message children changed between first and second pass.");if(n.some((t,r)=>e[r].constructor!==t.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}(e.children,n);for(let t=0;t<n.length;t++)n[t].sourceSpan=e.children[t].sourceSpan}}(o,i),new tp(o,t)):o[0]}}const tTe=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;class pg extends rd{constructor(e,t){super(e,t)}}const rTe=(n,e)=>(n instanceof TC&&(e instanceof Qb&&n.i18n instanceof ng&&(e.previousMessage=n.i18n),n.i18n=e),e);class cW{constructor(e=mf,t=!1,r=!1){this.interpolationConfig=e,this.keepI18nAttrs=t,this.enableI18nLegacyMessageIdFormat=r,this.hasI18nMeta=!1,this._errors=[]}_generateI18nMessage(e,t="",r){const{meaning:i,description:o,customId:a}=this._parseMetadata(t),m=function lW(n){const e=new KIe(ZIe,n);return(t,r,i,o,a)=>e.toI18nMessage(t,r,i,o,a)}(this.interpolationConfig)(e,i,o,a,r);return this._setMessageId(m,t),this._setLegacyIds(m,t),m}visitAllWithErrors(e){const t=e.map(r=>r.visit(this,null));return new RC(t,this._errors)}visitElement(e){let t;if(function Wxe(n){return n.attrs.some(e=>function lq(n){return"i18n"===n||n.startsWith(aN)}(e.name))}(e)){this.hasI18nMeta=!0;const r=[],i={};for(const o of e.attrs)if("i18n"===o.name)t=this._generateI18nMessage(e.children,e.i18n||o.value,rTe),0===t.nodes.length&&(t=void 0),e.i18n=t;else if(o.name.startsWith(aN)){const a=o.name.slice(5);G7(e.name,a)?this._reportError(o,`Translating attribute '${a}' is disallowed for security reasons.`):i[a]=o.value}else r.push(o);if(Object.keys(i).length)for(const o of r){const a=i[o.name];void 0!==a&&o.value&&(o.i18n=this._generateI18nMessage([o],o.i18n||a))}this.keepI18nAttrs||(e.attrs=r)}return Ji(this,e.children,t),e}visitExpansion(e,t){let r;const i=e.i18n;if(this.hasI18nMeta=!0,i instanceof Qb){const o=i.name;r=this._generateI18nMessage([e],i),cq(r).name=o,null!==t&&(t.placeholderToMessage[o]=r)}else r=this._generateI18nMessage([e],t||i);return e.i18n=r,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlockGroup(e,t){return Ji(this,e.blocks,t),e}visitBlock(e,t){return Ji(this,e.children,t),e}visitBlockParameter(e,t){return e}_parseMetadata(e){return"string"==typeof e?function sTe(n=""){let e,t,r;if(n=n.trim()){const i=n.indexOf(oTe),o=n.indexOf(iTe);let a;[a,e]=i>-1?[n.slice(0,i),n.slice(i+2)]:[n,""],[t,r]=o>-1?[a.slice(0,o),a.slice(o+1)]:["",a]}return{customId:e,meaning:t,description:r}}(e):e instanceof ng?e:{}}_setMessageId(e,t){e.id||(e.id=t instanceof ng&&t.id||function jL(n){return n.id||xH(n)}(e))}_setLegacyIds(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[(n=e,function bbe(n){TA??=new TextEncoder;const e=[...TA.encode(n)],t=function Cbe(n,e){const t=n.length+3>>>2,r=[];for(let i=0;i<t;i++)r[i]=Sbe(n,4*i,e);return r}(e,GL.Big),r=8*e.length,i=new Uint32Array(80);let o=1732584193,a=4023233417,d=2562383102,m=271733878,_=3285377520;t[r>>5]|=128<<24-r%32,t[15+(r+64>>9<<4)]=r;for(let C=0;C<t.length;C+=16){const T=o,R=a,L=d,G=m,W=_;for(let ve=0;ve<80;ve++){i[ve]=ve<16?t[C+ve]:HL(i[ve-3]^i[ve-8]^i[ve-14]^i[ve-16],1);const _e=xbe(ve,a,d,m),re=_e[0],Oe=_e[1],vt=[HL(o,5),re,_,Oe,i[ve]].reduce(y_);_=m,m=d,d=HL(a,30),a=o,o=vt}o=y_(o,T),a=y_(a,R),d=y_(d,L),m=y_(m,G),_=y_(_,W)}return $E(o)+$E(a)+$E(d)+$E(m)+$E(_)}(function ybe(n){return n.map(e=>e.visit(_be,null))}(n.nodes).join("")+`[${n.meaning}]`)),xH(e)];else if("string"!=typeof t){const r=t instanceof ng?t:t instanceof Qb?t.previousMessage:void 0;e.legacyIds=r?r.legacyIds:[]}var n}_reportError(e,t){this._errors.push(new pg(e.sourceSpan,t))}}const iTe="|",oTe="@@";function cTe(n,e,t,r){const i=function dTe(n){return n.nodes.map(e=>e.visit(hTe,null)).join("")}(e),o=[Yt(i)];Object.keys(r).length&&(o.push(L2(lN(r,!0),!0)),o.push(L2({original_code:Bc(Object.keys(r).map(m=>({key:tC(m),quoted:!0,value:Yt(e.placeholders[m]?e.placeholders[m].sourceSpan.toString():e.placeholderToMessage[m].nodes.map(_=>_.sourceSpan.toString()).join(""))})))})));const a=t.set(go("goog.getMsg").callFn(o)).toConstDecl();return a.addLeadingComment(function aTe(n){const e=[];return e.push(n.description?{tagName:"desc",text:n.description}:{tagName:"suppress",text:"{msgDescriptions}"}),n.meaning&&e.push({tagName:"meaning",text:n.meaning}),function NH(n=[]){return new YL(n)}(e)}(e)),[a,new nd(n.set(t))]}const hTe=new class uTe{formatPh(e){return`{$${tC(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){return sW(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}};function fTe(n,e,t){const{messageParts:r,placeHolders:i}=function mTe(n){const e=[],t=new pTe(n.placeholderToMessage,e);return n.nodes.forEach(r=>r.visit(t)),function _Te(n){const e=[],t=[];n[0]instanceof HE&&e.push(aF(n[0].sourceSpan.start));for(let r=0;r<n.length;r++){const i=n[r];i instanceof Gb?e.push(i):(t.push(i),n[r-1]instanceof HE&&e.push(aF(n[r-1].sourceSpan.end)))}return n[n.length-1]instanceof HE&&e.push(aF(n[n.length-1].sourceSpan.end)),{messageParts:e,placeHolders:t}}(e)}(e),o=function gTe(n){const e=n.nodes[0];return new ml(e.sourceSpan.fullStart,n.nodes[n.nodes.length-1].sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}(e),a=i.map(_=>t[_.text]),d=function BH(n,e,t,r,i){return new DA(n,e,t,r,i)}(e,r,i,a,o),m=n.set(d);return[new nd(m)]}class pTe{constructor(e,t){this.placeholderToMessage=e,this.pieces=t}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Gb)this.pieces[this.pieces.length-1].text+=e.value;else{const t=new ml(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Gb(e.value,t))}}visitContainer(e){e.children.forEach(t=>t.visit(this))}visitIcu(e){this.pieces.push(new Gb(sW(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,t,r){return new HE(tC(e,!1),t,r)}}function aF(n){return new Gb("",new ml(n,n))}const uW=new Set(["$event"]),lF=new Map([["window",ze.resolveWindow],["document",ze.resolveDocument],["body",ze.resolveBody]]),bTe=[" ","\n","\r","\t"];function R_(n,e){return ZE(go(nC).bitwiseAnd(Yt(n),null,!1),e)}function hW(n,e=null,t=null){const{type:r,name:i,target:o,phase:a,handler:d}=n;if(o&&!lF.has(o))throw new Error(`Unexpected global target '${o}' defined for '${i}' event.\n        Supported list of global targets: ${Array.from(lF.keys())}.`);const m="$event",_=new Set,C=null===t||0===t.bindingLevel?go(np):t.getOrCreateSharedContextVar(0),T=B1e(t,C,d,"b",n.handlerSpan,_,uW),R=[],L=t?.variableDeclarations(),G=t?.restoreViewStatement();if(L&&R.push(...L),R.push(...T),G){R.unshift(G);const vt=R[R.length-1];vt instanceof pl?R[R.length-1]=new pl(dv(vt.value.sourceSpan,ze.resetView,[vt.value])):R.push(new nd(dv(null,ze.resetView,[])))}const W=1===r?function lxe(n,e){return`${WH}${n}.${e}`}(i,a):i,ve=e&&ag(e),_e=[];_.has(m)&&_e.push(new jl(m,v_));const re=nc(_e,R,ah,null,ve),Oe=[Yt(W),re];return o&&Oe.push(Yt(!1),Br(lF.get(o))),Oe}class cF{constructor(e,t,r=0,i,o,a,d,m,_,C,T,R=function xTe(){return{prepareStatements:[],constExpressions:[],i18nVarRefsCache:new Map}}()){this.constantPool=e,this.level=r,this.contextName=i,this.i18nContext=o,this.templateIndex=a,this.templateName=d,this._namespace=m,this.i18nUseExternalIds=C,this.deferBlocks=T,this._constants=R,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._nestedTemplateFns=[],this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=rC,this.visitVariable=rC,this.visitTextAttribute=rC,this.visitBoundAttribute=rC,this.visitBoundEvent=rC,this._bindingScope=t.nestedScope(r),this.fileBasedI18nSuffix=_.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new dW(e,()=>this.allocateDataSlot(),L=>this.allocatePureFunctionSlots(L),(L,G,W,ve)=>{this._bindingScope.set(this.level,G,ve),this.creationInstruction(null,ze.pipe,[Yt(W),Yt(L)])})}buildTemplateFunction(e,t,r=0,i){this._ngContentSelectorsOffset=r,this._namespace!==ze.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach(L=>this.registerContextVariables(L));const o=this.i18nContext||eC(i)&&!UA(i)&&!(function kTe(n){return 1===n.length&&n[0]instanceof KE}(e)&&e[0].i18n===i),a=hF(e);if(o&&this.i18nStart(null,i,a),ou(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach(L=>L()),0===this.level&&this._ngContentReservedSlots.length){const L=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){const G=this._ngContentReservedSlots.map(W=>"*"!==W?IA(W):W);L.push(this.constantPool.getConstLiteral(Nd(G),!0))}this.creationInstruction(null,ze.projectionDef,L,!0)}o&&this.i18nEnd(null,a);const d=WA(this._creationCodeFns),m=WA(this._updateCodeFns),_=this._bindingScope.viewSnapshotStatements(),C=this._bindingScope.variableDeclarations().concat(this._tempVariables),T=d.length>0?[R_(1,_.concat(d))]:[],R=m.length>0?[R_(2,C.concat(m))]:[];return nc([new jl(nC,Ub),new jl(np,null)],[...this._prefixCode,...T,...R],ah,null,this.templateName)}getLocal(e){return this._bindingScope.get(e)}notifyImplicitReceiverUse(){this._bindingScope.notifyImplicitReceiverUse()}maybeRestoreView(){this._bindingScope.maybeRestoreView()}i18nTranslate(e,t={},r,i){const o=r||this.i18nGenerateMainBlockVar(),d=function LTe(n,e,t,r={},i){const o=[Yxe(e),ZE(XE(go(yW)).notIdentical(Yt("undefined",WL)).and(go(yW)),cTe(e,n,t,r),fTe(e,n,lN(r,!1)))];return i&&o.push(new nd(e.set(i(e)))),o}(e,o,this.i18nGenerateClosureVar(e.id),t,i);return this._constants.prepareStatements.push(...d),o}registerContextVariables(e){const t=this._bindingScope.freshReferenceName(),r=this.level,i=go(e.name+t);this._bindingScope.set(r,e.name,i,1,(o,a)=>{let d;return o.bindingLevel===r?o.isListenerScope()&&o.hasRestoreViewVariable()?(d=go(fq),o.notifyRestoredViewContextUse()):d=go(np):d=o.getSharedContextName(r)||uF(a),[i.set(d.prop(e.value||"$implicit")).toConstDecl()]})}i18nAppendBindings(e){e.length>0&&e.forEach(t=>this.i18n.appendBinding(t))}i18nBindProps(e){const t={};return Object.keys(e).forEach(r=>{const i=e[r];if(i instanceof uv)t[r]=Yt(i.value);else{const o=i.value.visit(this._valueConverter);if(this.allocateBindingSlots(o),o instanceof Eu){const{strings:a,expressions:d}=o,{id:m,bindings:_}=this.i18n,C=function Xxe(n,e=0,t=0){if(!n.length)return"";let r="";const i=n.length-1;for(let o=0;o<i;o++)r+=`${n[o]}${jA(e+o,t)}`;return r+=n[i],r}(a,_.size,m);this.i18nAppendBindings(d),t[r]=Yt(C)}}}),t}i18nGenerateMainBlockVar(){return go(this.constantPool.uniqueName("i18n_"))}i18nGenerateClosureVar(e){let t;const r=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){const i=dq("EXTERNAL_"),o=this.constantPool.uniqueName(r);t=`${i}${ag(e)}$$${o}`}else{const i=dq(r);t=this.constantPool.uniqueName(i)}return go(t)}i18nUpdateRef(e){const{icus:t,meta:r,isRoot:i,isResolved:o,isEmitted:a}=e;if(i&&o&&!a&&!UA(r)){e.isEmitted=!0;const d=e.getSerializedPlaceholders();let T,m={},_=d.size?uq(d):{};t.size&&t.forEach((R,L)=>{if(1===R.length)_[L]=R[0];else{const G=jA(`I18N_EXP_${L}`);_[L]=Yt(G),m[L]=ho(R)}}),(Array.from(d.values()).some(R=>R.length>1)||Object.keys(m).length)&&(T=R=>{const L=[R];return Object.keys(m).length&&L.push(L2(m,!0)),dv(null,ze.i18nPostprocess,L)}),this.i18nTranslate(r,_,e.ref,T)}}i18nStart(e=null,t,r){const i=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(i,this.templateIndex,t):new oF(i,this.i18nGenerateMainBlockVar(),0,this.templateIndex,t);const{id:o,ref:a}=this.i18n,d=[Yt(i),this.addToConsts(a)];o>0&&d.push(Yt(o)),this.creationInstruction(e,r?ze.i18n:ze.i18nStart,d)}i18nEnd(e=null,t){if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);const{index:r,bindings:i}=this.i18n;if(i.size){for(const o of i)this.updateInstructionWithAdvance(this.getConstCount()-1,e,ze.i18nExp,()=>this.convertPropertyBinding(o));this.updateInstruction(e,ze.i18nApply,[Yt(r)])}t||this.creationInstruction(e,ze.i18nEnd),this.i18n=null}i18nAttributesInstruction(e,t,r){let i=!1;const o=[];if(t.forEach(a=>{const d=a.i18n,m=a.value.visit(this._valueConverter);if(this.allocateBindingSlots(m),m instanceof Eu){const C=uq(hq(d));o.push(Yt(a.name),this.i18nTranslate(d,C)),m.expressions.forEach(T=>{i=!0,this.updateInstructionWithAdvance(e,r,ze.i18nExp,()=>this.convertPropertyBinding(T))})}}),o.length>0){const a=Yt(this.allocateDataSlot()),d=this.addToConsts(ho(o));this.creationInstruction(r,ze.i18nAttributes,[a,d]),i&&this.updateInstruction(r,ze.i18nApply,[a])}}getNamespaceInstruction(e){switch(e){case"math":return ze.namespaceMathML;case"svg":return ze.namespaceSVG;default:return ze.namespaceHTML}}addNamespaceInstruction(e,t){this._namespace=e,this.creationInstruction(t.startSourceSpan,e)}interpolatedUpdateInstruction(e,t,r,i,o,a){this.updateInstructionWithAdvance(t,i.sourceSpan,e,()=>[Yt(r),...this.getUpdateInstructionArguments(o),...a])}visitContent(e){const t=this.allocateDataSlot(),r=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,i=[Yt(t)];this._ngContentReservedSlots.push(e.selector);const o=e.attributes.filter(d=>"select"!==d.name.toLowerCase()),a=this.getAttributeExpressions(e.name,o,[],[]);a.length>0?i.push(Yt(r),ho(a)):0!==r&&i.push(Yt(r)),this.creationInstruction(e.sourceSpan,ze.projection,i),this.i18n&&this.i18n.appendProjection(e.i18n,t)}visitElement(e){const t=this.allocateDataSlot(),r=new v7(null);let i=!1;const o=eC(e.i18n)&&!UA(e.i18n),a=[],[d,m]=od(e.name),_=AN(e.name);for(const ot of e.attributes){const{name:Er,value:_r}=ot;"ngNonBindable"===Er?i=!0:"style"===Er?r.registerStyleAttr(_r):"class"===Er?r.registerClassAttr(_r):a.push(ot)}const C=[Yt(t)];_||C.push(Yt(m));const T=[],R=[];e.inputs.forEach(ot=>{r.registerBoundInput(ot)||(0===ot.type&&ot.i18n?R.push(ot):T.push(ot))});const L=this.getAttributeExpressions(e.name,a,T,e.outputs,r,[],R);C.push(this.addAttrsToConsts(L));const G=this.prepareRefsArray(e.references);C.push(this.addToConsts(G));const W=this._namespace,ve=this.getNamespaceInstruction(d);ve!==W&&this.addNamespaceInstruction(ve,e),this.i18n&&this.i18n.appendElement(e.i18n,t);const _e=!o&&this.i18n?!hF(e.children):e.children.length>0,re=!r.hasBindingsWithPipes&&0===e.outputs.length&&0===R.length&&!_e,Oe=!re&&hF(e.children);if(re)this.creationInstruction(e.sourceSpan,_?ze.elementContainer:ze.element,qA(C));else{if(this.creationInstruction(e.startSourceSpan,_?ze.elementContainerStart:ze.elementStart,qA(C)),i&&this.creationInstruction(e.startSourceSpan,ze.disableBindings),R.length>0&&this.i18nAttributesInstruction(t,R,e.startSourceSpan??e.sourceSpan),e.outputs.length>0)for(const ot of e.outputs)this.creationInstruction(ot.sourceSpan,ze.listener,this.prepareListenerParameter(e.name,ot,t));o&&this.i18nStart(e.startSourceSpan,e.i18n,Oe)}const vt=r.buildUpdateLevelInstructions(this._valueConverter),Mt=vt.length-1;for(let ot=0;ot<=Mt;ot++)this._bindingSlots+=this.processStylingUpdateInstruction(t,vt[ot]);const Kt=Yt(void 0),Zt=[],an=[];T.forEach(ot=>{const Er=ot.type;if(4===Er){const _r=ot.value.visit(this._valueConverter),di=!(_r instanceof id&&!_r.value);this.allocateBindingSlots(_r),Zt.push({span:ot.sourceSpan,paramsOrFn:z2(()=>di?this.convertPropertyBinding(_r):Kt,XH(ot.name))})}else{if(ot.i18n)return;const _r=ot.value.visit(this._valueConverter);if(void 0!==_r){const di=[],[Di,br]=od(ot.name);let Ln=_W(ot.securityContext,1===Er);if(Ln||function OTe(n){return"iframe"===n.toLowerCase()}(e.name)&&EN(ot.name)&&(Ln=Br(ze.validateIframeAttribute)),Ln&&di.push(Ln),Di){const xr=Yt(Di);Ln?di.push(xr):di.push(Yt(null),xr)}if(this.allocateBindingSlots(_r),0===Er)_r instanceof Eu?this.interpolatedUpdateInstruction(mW(_r),t,br,ot,_r,di):Zt.push({span:ot.sourceSpan,paramsOrFn:z2(()=>this.convertPropertyBinding(_r),br,di)});else if(1===Er)if(_r instanceof Eu&&fv(_r)>1)this.interpolatedUpdateInstruction(function DTe(n){switch(fv(n)){case 3:return ze.attributeInterpolate1;case 5:return ze.attributeInterpolate2;case 7:return ze.attributeInterpolate3;case 9:return ze.attributeInterpolate4;case 11:return ze.attributeInterpolate5;case 13:return ze.attributeInterpolate6;case 15:return ze.attributeInterpolate7;case 17:return ze.attributeInterpolate8;default:return ze.attributeInterpolateV}}(_r),t,br,ot,_r,di);else{const xr=_r instanceof Eu?_r.expressions[0]:_r;an.push({span:ot.sourceSpan,paramsOrFn:z2(()=>this.convertPropertyBinding(xr),br,di)})}else this.updateInstructionWithAdvance(t,ot.sourceSpan,ze.classProp,()=>[Yt(t),Yt(br),this.convertPropertyBinding(_r),...di])}}});for(const ot of Zt)this.updateInstructionWithAdvance(t,ot.span,ze.property,ot.paramsOrFn);for(const ot of an)this.updateInstructionWithAdvance(t,ot.span,ze.attribute,ot.paramsOrFn);if(ou(this,e.children),!o&&this.i18n&&this.i18n.appendElement(e.i18n,t,!0),!re){const ot=e.endSourceSpan??e.sourceSpan;o&&this.i18nEnd(ot,Oe),i&&this.creationInstruction(ot,ze.enableBindings),this.creationInstruction(ot,_?ze.elementContainerEnd:ze.elementEnd)}}visitTemplate(e){const t="ng-template",r=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(e.i18n,r);const i=e.tagName?od(e.tagName)[1]:e.tagName,o=`${this.contextName}${e.tagName?"_"+ag(e.tagName):""}_${r}`,a=`${o}_Template`,d=[Yt(r),go(a),Yt(i)],m=this.getAttributeExpressions(t,e.attributes,e.inputs,e.outputs,void 0,e.templateAttrs);if(d.push(this.addAttrsToConsts(m)),e.references&&e.references.length){const C=this.prepareRefsArray(e.references);d.push(this.addToConsts(C)),d.push(Br(ze.templateRefExtractor))}const _=new cF(this.constantPool,this._bindingScope,this.level+1,o,this.i18n,r,a,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this.deferBlocks,this._constants);if(this._nestedTemplateFns.push(()=>{const C=_.buildTemplateFunction(e.children,e.variables,this._ngContentReservedSlots.length+this._ngContentSelectorsOffset,e.i18n);this.constantPool.statements.push(C.toDeclStmt(a)),_._ngContentReservedSlots.length&&this._ngContentReservedSlots.push(..._._ngContentReservedSlots)}),this.creationInstruction(e.sourceSpan,ze.templateCreate,()=>(d.splice(2,0,Yt(_.getConstCount()),Yt(_.getVarCount())),qA(d))),this.templatePropertyBindings(r,e.templateAttrs),i===t){const[C,T]=function Jbe(n,e){const t=[],r=[];for(const i of n)(e(i)?t:r).push(i);return[t,r]}(e.inputs,qxe);C.length>0&&this.i18nAttributesInstruction(r,C,e.startSourceSpan??e.sourceSpan),T.length>0&&this.templatePropertyBindings(r,T);for(const R of e.outputs)this.creationInstruction(R.sourceSpan,ze.listener,this.prepareListenerParameter("ng_template",R,r))}}visitBoundText(e){if(this.i18n){const i=e.value.visit(this._valueConverter);return this.allocateBindingSlots(i),void(i instanceof Eu&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(i.expressions)))}const t=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,ze.text,[Yt(t)]);const r=e.value.visit(this._valueConverter);this.allocateBindingSlots(r),r instanceof Eu?this.updateInstructionWithAdvance(t,e.sourceSpan,function ATe(n){switch(fv(n)){case 1:return ze.textInterpolate;case 3:return ze.textInterpolate1;case 5:return ze.textInterpolate2;case 7:return ze.textInterpolate3;case 9:return ze.textInterpolate4;case 11:return ze.textInterpolate5;case 13:return ze.textInterpolate6;case 15:return ze.textInterpolate7;case 17:return ze.textInterpolate8;default:return ze.textInterpolateV}}(r),()=>this.getUpdateInstructionArguments(r)):RA("Text nodes should be interpolated and never bound directly.")}visitText(e){this.i18n||this.creationInstruction(e.sourceSpan,ze.text,[Yt(this.allocateDataSlot()),Yt(e.value)])}visitIcu(e){let t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));const r=this.i18n,i=this.i18nBindProps(e.vars),o=this.i18nBindProps(e.placeholders),a=e.i18n,d=m=>{const C=lN({...i,...o},!1);return dv(null,ze.i18nPostprocess,[m,L2(C,!0)])};if(UA(r.meta))this.i18nTranslate(a,{},r.ref,d);else{const m=this.i18nTranslate(a,{},void 0,d);r.appendIcu(cq(a).name,m)}return t&&this.i18nEnd(null,!0),null}visitDeferredBlock(e){const t=this.allocateDataSlot(),r=this.deferBlocks.get(e),o=`${this.contextName}_Defer_${t}_DepsFn`,a=[Yt(t),r?go(o):qb];if(r){const d=[];for(const C of r)if(C.isDeferrable){const T=nc([new jl("m",v_)],[new pl(go("m").prop(C.symbolName))]),L=new qE(C.importPath).prop("then").callFn([T]);d.push(L)}else d.push(C.type);const m=[];m.push(new pl(ho(d)));const _=nc([],m,ah,null,o);this.constantPool.statements.push(_.toDeclStmt(o))}this.creationInstruction(e.sourceSpan,ze.defer,()=>qA(a))}visitDeferredTrigger(e){}visitDeferredBlockPlaceholder(e){}visitDeferredBlockError(e){}visitDeferredBlockLoading(e){}allocateDataSlot(){return this._dataIndex++}getConstCount(){return this._dataIndex}getVarCount(){return this._pureFunctionSlots}getConsts(){return this._constants}getNgContentSelectors(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(Nd(this._ngContentReservedSlots),!0):null}bindingContext(){return""+this._bindingContext++}templatePropertyBindings(e,t){const r=[];for(const i of t){if(!(i instanceof zA))continue;const o=i.value.visit(this._valueConverter);if(void 0!==o)if(this.allocateBindingSlots(o),o instanceof Eu){const a=[];this.interpolatedUpdateInstruction(mW(o),e,i.name,i,o,a)}else r.push({span:i.sourceSpan,paramsOrFn:z2(()=>this.convertPropertyBinding(o),i.name)})}for(const i of r)this.updateInstructionWithAdvance(e,i.span,ze.property,i.paramsOrFn)}instructionFn(e,t,r,i,o=!1){e[o?"unshift":"push"]({span:t,reference:r,paramsOrFn:i})}processStylingUpdateInstruction(e,t){let r=0;if(t)for(const i of t.calls)r+=i.allocateBindingSlots,this.updateInstructionWithAdvance(e,i.sourceSpan,t.reference,()=>i.params(o=>i.supportsInterpolation&&o instanceof Eu?this.getUpdateInstructionArguments(o):this.convertPropertyBinding(o)));return r}creationInstruction(e,t,r,i){this.instructionFn(this._creationCodeFns,e,t,r||[],i)}updateInstructionWithAdvance(e,t,r,i){this.addAdvanceInstructionIfNecessary(e,t),this.updateInstruction(t,r,i)}updateInstruction(e,t,r){this.instructionFn(this._updateCodeFns,e,t,r||[])}addAdvanceInstructionIfNecessary(e,t){if(e!==this._currentIndex){const r=e-this._currentIndex;if(r<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,t,ze.advance,[Yt(r)]),this._currentIndex=e}}allocatePureFunctionSlots(e){const t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}allocateBindingSlots(e){this._bindingSlots+=e instanceof Eu?e.expressions.length:1}getImplicitReceiverExpr(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?go(np):this._bindingScope.getOrCreateSharedContextVar(0)}convertPropertyBinding(e){const t=Wq(this,this.getImplicitReceiverExpr(),e,this.bindingContext()),r=t.currValExpr;return this._tempVariables.push(...t.stmts),r}getUpdateInstructionArguments(e){const{args:t,stmts:r}=function V1e(n,e,t,r){const i=new wN(n,e,r,!0),o=i.visitInterpolation(t,Pa.Expression);return i.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),{stmts:Xq(i,r),args:o.args}}(this,this.getImplicitReceiverExpr(),e,this.bindingContext());return this._tempVariables.push(...r),t}getAttributeExpressions(e,t,r,i,o,a=[],d=[]){const m=new Set,_=[];let C;for(const R of t)if("ngProjectAs"===R.name&&(C=R),R.i18n){const{i18nVarRefsCache:L}=this._constants;let G;L.has(R.i18n)?G=L.get(R.i18n):(G=this.i18nTranslate(R.i18n),L.set(R.i18n,G)),_.push(Yt(R.name),G)}else _.push(...pW(R.name),PTe(e,R));function T(R,L){"string"==typeof R?m.has(R)||(_.push(...pW(R)),void 0!==L&&_.push(L),m.add(R)):_.push(Yt(R))}if(C&&_.push(...function TTe(n){const e=IA(n.value)[0];return[Yt(5),Nd(e)]}(C)),o&&o.populateInitialStylingAttrs(_),r.length||i.length){const R=_.length;for(let L=0;L<r.length;L++){const G=r[L];4!==G.type&&1!==G.type&&T(G.name)}for(let L=0;L<i.length;L++){const G=i[L];1!==G.type&&T(G.name)}_.length!==R&&_.splice(R,0,Yt(3))}return a.length&&(_.push(Yt(4)),a.forEach(R=>T(R.name))),d.length&&(_.push(Yt(6)),d.forEach(R=>T(R.name))),_}addToConsts(e){if(QL(e))return qb;const t=this._constants.constExpressions;for(let r=0;r<t.length;r++)if(t[r].isEquivalent(e))return Yt(r);return Yt(t.push(e)-1)}addAttrsToConsts(e){return e.length>0?this.addToConsts(ho(e)):qb}prepareRefsArray(e){return e&&0!==e.length?Nd(e.flatMap(r=>{const i=this.allocateDataSlot(),o=this._bindingScope.freshReferenceName(),a=this.level,d=go(o);return this._bindingScope.set(a,r.name,d,0,(m,_)=>{const C=_>0?[uF(_).toStmt()]:[],T=d.set(Br(ze.reference).callFn([Yt(i)]));return C.concat(T.toConstDecl())},!0),[r.name,r.value]})):qb}prepareListenerParameter(e,t,r){return()=>{const i=t.name,o=1===t.type?ZH(i,t.phase):ag(i),a=`${this.templateName}_${e}_${o}_${r}_listener`,d=this._bindingScope.nestedScope(this._bindingScope.bindingLevel,uW);return hW(t,a,d)}}}class dW extends N1e{constructor(e,t,r,i){super(),this.constantPool=e,this.allocateSlot=t,this.allocatePureFunctionSlots=r,this.definePipe=i,this._pipeBindExprs=[]}visitPipe(e,t){const r=this.allocateSlot(),i=`PIPE:${r}`,o=this.allocatePureFunctionSlots(2+e.args.length),a=new lg(e.span,e.sourceSpan,e.nameSpan,new S_(e.span,e.sourceSpan),i),{identifier:d,isVarLength:m}=function ETe(n){const e=wTe[n.length];return{identifier:e||ze.pipeBindV,isVarLength:!e}}(e.args);this.definePipe(e.name,i,r,Br(d));const _=[e.exp,...e.args],C=this.visitAll(m?[new fC(e.span,e.sourceSpan,_)]:_),T=new vv(e.span,e.sourceSpan,a,[new id(e.span,e.sourceSpan,r),new id(e.span,e.sourceSpan,o),...C],null);return this._pipeBindExprs.push(T),T}updatePipeSlotOffsets(e){this._pipeBindExprs.forEach(t=>{t.args[1].value+=e})}visitLiteralArray(e,t){return new sx(e.span,e.sourceSpan,this.visitAll(e.expressions),r=>{const i=ho(r);return fW(this.constantPool,i,this.allocatePureFunctionSlots)})}visitLiteralMap(e,t){return new sx(e.span,e.sourceSpan,this.visitAll(e.values),r=>{const i=Bc(r.map((o,a)=>({key:e.keys[a].key,value:o,quoted:e.keys[a].quoted})));return fW(this.constantPool,i,this.allocatePureFunctionSlots)})}}const wTe=[ze.pipeBind1,ze.pipeBind2,ze.pipeBind3,ze.pipeBind4],CTe=[ze.pureFunction0,ze.pureFunction1,ze.pureFunction2,ze.pureFunction3,ze.pureFunction4,ze.pureFunction5,ze.pureFunction6,ze.pureFunction7,ze.pureFunction8];function uF(n){return Br(ze.nextContext).callFn(n>1?[Yt(n)]:[])}function fW(n,e,t){const{literalFactory:r,literalFactoryArguments:i}=n.getLiteralFactory(e),o=t(1+i.length),{identifier:a,isVarLength:d}=function STe(n){const e=CTe[n.length];return{identifier:e||ze.pureFunctionV,isVarLength:!e}}(i),m=[Yt(o),r];return d?m.push(ho(i)):m.push(...i),Br(a).callFn(m)}function pW(n){const[e,t]=od(n),r=Yt(t);return e?[Yt(0),Yt(e),r]:[r]}const _x="$$shared_ctx$$";class F2{static createRootScope(){return new F2}constructor(e=0,t=null,r){if(this.bindingLevel=e,this.parent=t,this.globals=r,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null,this.usesRestoredViewContext=!1,void 0!==r)for(const i of r)this.set(0,i,go(i))}get(e){let t=this;for(;t;){let r=t.map.get(e);if(null!=r)return t!==this&&(r={retrievalLevel:r.retrievalLevel,lhs:r.lhs,declareLocalCallback:r.declareLocalCallback,declare:!1,priority:r.priority},this.map.set(e,r),this.maybeGenerateSharedContextVar(r),this.maybeRestoreView()),r.declareLocalCallback&&!r.declare&&(r.declare=!0),r.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}set(e,t,r,i=0,o,a){if(this.map.has(t)){if(a)return this;RA(`The name ${t} is already defined in scope to be ${this.map.get(t)}`)}return this.map.set(t,{retrievalLevel:e,lhs:r,declare:!1,declareLocalCallback:o,priority:i}),this}getLocal(e){return this.get(e)}notifyImplicitReceiverUse(){0!==this.bindingLevel&&(this.map.get(_x+0).declare=!0)}nestedScope(e,t){const r=new F2(e,this,t);return e>0&&r.generateSharedContextVar(0),r}getOrCreateSharedContextVar(e){const t=_x+e;return this.map.has(t)||this.generateSharedContextVar(e),this.map.get(t).lhs}getSharedContextName(e){const t=this.map.get(_x+e);return t&&t.declare?t.lhs:null}maybeGenerateSharedContextVar(e){if(1===e.priority&&e.retrievalLevel<this.bindingLevel){const t=this.map.get(_x+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}generateSharedContextVar(e){const t=go(np+this.freshReferenceName());this.map.set(_x+e,{retrievalLevel:e,lhs:t,declareLocalCallback:(r,i)=>[t.set(uF(i)).toConstDecl()],declare:!1,priority:2})}getComponentProperty(e){const t=this.map.get(_x+0);return t.declare=!0,this.maybeRestoreView(),t.lhs.prop(e)}maybeRestoreView(){this.isListenerScope()&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=go(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}restoreViewStatement(){if(this.restoreViewVariable){const e=dv(null,ze.restoreView,[this.restoreViewVariable]);return this.usesRestoredViewContext?go(fq).set(e).toConstDecl():e.toStmt()}return null}viewSnapshotStatements(){return this.restoreViewVariable?[this.restoreViewVariable.set(dv(null,ze.getCurrentView,[])).toConstDecl()]:[]}isListenerScope(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}variableDeclarations(){let e=0;return Array.from(this.map.values()).filter(t=>t.declare).sort((t,r)=>r.retrievalLevel-t.retrievalLevel||r.priority-t.priority).reduce((t,r)=>{const i=this.bindingLevel-r.retrievalLevel,o=r.declareLocalCallback(this,i-e);return e=i,t.concat(o)},[])}freshReferenceName(){let e=this;for(;e.parent;)e=e.parent;return"_r"+e.referenceNameIndex++}hasRestoreViewVariable(){return!!this.restoreViewVariable}notifyRestoredViewContextUse(){this.usesRestoredViewContext=!0}}function mW(n){switch(fv(n)){case 1:return ze.propertyInterpolate;case 3:return ze.propertyInterpolate1;case 5:return ze.propertyInterpolate2;case 7:return ze.propertyInterpolate3;case 9:return ze.propertyInterpolate4;case 11:return ze.propertyInterpolate5;case 13:return ze.propertyInterpolate6;case 15:return ze.propertyInterpolate7;case 17:return ze.propertyInterpolate8;default:return ze.propertyInterpolateV}}const gW=new XN;function B2(n=mf){return new tIe(new S7(new jN),n,gW,[])}function _W(n,e){switch(n){case Ma.HTML:return Br(ze.sanitizeHtml);case Ma.SCRIPT:return Br(ze.sanitizeScript);case Ma.STYLE:return e?Br(ze.sanitizeStyle):null;case Ma.URL:return Br(ze.sanitizeUrl);case Ma.RESOURCE_URL:return Br(ze.sanitizeResourceUrl);default:return null}}function PTe(n,e){const t=Nd(e.value);if(!G7(n,e.name))return t;switch(gW.securityContext(n,e.name,!0)){case Ma.HTML:return KL(Br(ze.trustConstantHtml),new jE([new GE(e.value)],[]),void 0,e.valueSpan);case Ma.RESOURCE_URL:return KL(Br(ze.trustConstantResourceUrl),new jE([new GE(e.value)],[]),void 0,e.valueSpan);default:return t}}function RTe(n){return n instanceof uv||n instanceof FA||n instanceof nq}function hF(n){return n.every(RTe)}function z2(n,e,t){return()=>{const r=n(),i=Array.isArray(r)?r:[r];return t&&i.push(...t),e&&i.unshift(Yt(e)),i}}const yW="ngI18nClosureMode";const FTe=/attr\.([^\]]+)/;function bW(n,e,t){const r=new su,i=IA(n.selector);return r.set("type",n.type.value),i.length>0&&r.set("selectors",Nd(i)),n.queries.length>0&&r.set("contentQueries",function HTe(n,e,t){const r=[],i=[],o=pq(i,cN);for(const d of n){r.push(Br(ze.contentQuery).callFn([go("dirIndex"),...EW(d,e)]).toStmt());const m=o(),_=Br(ze.loadQuery).callFn([]),C=Br(ze.queryRefresh).callFn([m.set(_)]),T=go(np).prop(d.propertyName).set(d.first?m.prop("first"):m);i.push(C.and(T).toStmt())}const a=t?`${t}_ContentQueries`:null;return nc([new jl(nC,Ub),new jl(np,null),new jl("dirIndex",null)],[R_(1,r),R_(2,i)],ah,null,a)}(n.queries,e,n.name)),n.viewQueries.length&&r.set("viewQuery",function XTe(n,e,t){const r=[],i=[],o=pq(i,cN);n.forEach(d=>{const m=Br(ze.viewQuery).callFn(EW(d,e));r.push(m.toStmt());const _=o(),C=Br(ze.loadQuery).callFn([]),T=Br(ze.queryRefresh).callFn([_.set(C)]),R=go(np).prop(d.propertyName).set(d.first?_.prop("first"):_);i.push(T.and(R).toStmt())});const a=t?`${t}_Query`:null;return nc([new jl(nC,Ub),new jl(np,null)],[R_(1,r),R_(2,i)],ah,null,a)}(n.viewQueries,e,n.name)),r.set("hostBindings",function ZTe(n,e,t,r,i,o,a){const d=t.createBoundHostProperties(n.properties,e),m=t.createDirectiveHostEventAsts(n.listeners,e);if(y7){const ot=function KCe(n,e,t){const r=new I9(n.componentName,t,m7);for(const i of n.properties??[])QCe(r,i);for(const i of n.events??[]);return r}({componentName:o,properties:d,events:m},0,r);!function WCe(n){(function mEe(n){for(const e of n.update)if(e.kind===en.Binding)if(e.name.startsWith(B9)){e.bindingKind=Ts.StyleProperty,e.name=e.name.substring(B9.length),gEe(e.name)&&(e.name=_Ee(e.name));const{property:t,suffix:r}=$9(e.name);e.name=t,e.unit=r}else e.name.startsWith("style!")?e.name="style":e.name.startsWith(z9)&&(e.bindingKind=Ts.ClassName,e.name=$9(e.name.substring(z9.length)).property)})(n),a7(n),k9(n),Q9(n),W9(n),L9(n),l7(n),D9(n),u7(n),s7(n),i7(n),j9(n),K9(n),X9(n),t7(n),R9(n)}(ot);const Er=ot.root.vars;return null!==Er&&Er>0&&a.set("hostVars",Yt(Er)),function ZCe(n){if(null===n.fnName)throw new Error("AssertionError: host binding function is unnamed");const e=[];for(const o of n.create){if(o.kind!==en.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${en[o.kind]}`);e.push(o.statement)}const t=[];for(const o of n.update){if(o.kind!==en.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${en[o.kind]}`);t.push(o.statement)}if(0===e.length&&0===t.length)return null;const r=T2(1,e),i=T2(2,t);return nc([new jl("rf"),new jl("ctx")],[...r,...i],void 0,void 0,n.fnName)}(ot)}const _=go(np),C=new v7(_),{styleAttr:T,classAttr:R}=n.specialAttributes;void 0!==T&&C.registerStyleAttr(T),void 0!==R&&C.registerClassAttr(R);const L=[],G=[],W=[],ve=e;m&&m.length&&L.push(...function QTe(n,e){const t=[],r=[],i=[];for(const o of n){let a=o.name&&ag(o.name);const d=1===o.type?ZH(a,o.targetOrPhase):a,m=e&&a?`${e}_${d}_HostBindingHandler`:null,_=hW($A.fromParsedEvent(o),m);1==o.type?r.push(_):t.push(_)}for(const o of r)i.push({reference:ze.syntheticHostListener,paramsOrFn:o,span:null});for(const o of t)i.push({reference:ze.listener,paramsOrFn:o,span:null});return i}(m,o));const _e=[];let Oe,re=0;d&&d.forEach(ot=>{C.registerInputBasedOnName(ot.name,ot.expression,ve)?re+=A2:(_e.push(ot),re++)});const vt=()=>(Oe||(Oe=new dW(r,()=>RA("Unexpected node"),Er=>{const _r=re;return re+=Er,_r},()=>RA("Unexpected pipe"))),Oe),Mt=[],Kt=[],Zt=[];for(const ot of _e){const Er=ot.expression.visit(vt()),_r=IW(_,Er),{bindingName:di,instruction:Di,isAttribute:br}=KTe(ot),qr=t.calcPossibleSecurityContexts(i,di,br).filter(Ur=>Ur!==Ma.NONE);let Ln=null;qr.length&&(Ln=2===qr.length&&qr.indexOf(Ma.URL)>-1&&qr.indexOf(Ma.RESOURCE_URL)>-1?Br(ze.sanitizeUrlOrResourceUrl):_W(qr[0],br));const xr=[Yt(di),_r.currValExpr];Ln?xr.push(Ln):EN(di)&&xr.push(Br(ze.validateIframeAttribute)),W.push(..._r.stmts),Di===ze.hostProperty?Mt.push(xr):Di===ze.attribute?Kt.push(xr):Di===ze.syntheticHostProperty?Zt.push(xr):G.push({reference:Di,paramsOrFn:xr,span:null})}for(const ot of Mt)G.push({reference:ze.hostProperty,paramsOrFn:ot,span:null});for(const ot of Kt)G.push({reference:ze.attribute,paramsOrFn:ot,span:null});for(const ot of Zt)G.push({reference:ze.syntheticHostProperty,paramsOrFn:ot,span:null});const an=function GTe(n){const e=[];for(let t of Object.getOwnPropertyNames(n)){const r=n[t];e.push(Yt(t),r)}return e}(n.attributes);if(C.assignHostAttrs(an,a),C.hasBindings&&C.buildUpdateLevelInstructions(vt()).forEach(ot=>{for(const Er of ot.calls)re+=Math.max(Er.allocateBindingSlots-A2,0),G.push({reference:ot.reference,paramsOrFn:YTe(Er,_,IW),span:null})}),re&&a.set("hostVars",Yt(re)),L.length>0||G.length>0){const ot=o?`${o}_HostBindings`:null,Er=[];return L.length>0&&Er.push(R_(1,WA(L))),G.length>0&&Er.push(R_(2,W.concat(WA(G)))),nc([new jl(nC,Ub),new jl(np,null)],Er,ah,null,ot)}return null}(n.host,n.typeSourceSpan,t,e,n.selector||"",n.name,r)),r.set("inputs",HA(n.inputs,!0)),r.set("outputs",HA(n.outputs)),null!==n.exportAs&&r.set("exportAs",ho(n.exportAs.map(o=>Yt(o)))),n.isStandalone&&r.set("standalone",Yt(!0)),n.isSignal&&r.set("signals",Yt(!0)),r}function xW(n,e){const t=[],r=e.providers,i=e.viewProviders,o=Object.keys(e.inputs);if(r||i){const a=[r||new Od([])];i&&a.push(i),t.push(Br(ze.ProvidersFeature).callFn(a))}for(const a of o)if(null!==e.inputs[a].transformFunction){t.push(Br(ze.InputTransformsFeatureFeature));break}e.usesInheritance&&t.push(Br(ze.InheritDefinitionFeature)),e.fullInheritance&&t.push(Br(ze.CopyDefinitionFeature)),e.lifecycle.usesOnChanges&&t.push(Br(ze.NgOnChangesFeature)),e.hasOwnProperty("template")&&e.isStandalone&&t.push(Br(ze.StandaloneFeature)),e.hostDirectives?.length&&t.push(Br(ze.HostDirectivesFeature).callFn([rDe(e.hostDirectives)])),t.length&&n.set("features",ho(t))}function VTe(n,e,t){const r=bW(n,e,t);xW(r,n);const i=n.selector&&__.parse(n.selector),o=i&&i[0];if(o){const T=o.getAttrs();T.length&&r.set("attrs",e.getConstLiteral(ho(T.map(R=>Yt(null!=R?R:void 0))),!0))}const a=n.name,d=a?`${a}_Template`:null,m=n.changeDetection;if(y7){const T=function YCe(n,e,t){const r=new T9(n,t,m7);return UN(r.root,e),r}(n.name,n.template.nodes,e);!function qCe(n){(function bEe(n){for(const[e,t]of n.views){let r=om.HTML;for(const i of t.create)i.kind!==en.Element&&i.kind!==en.ElementStart||i.namespace!==r&&(Oi.insertBefore(jwe(i.namespace),i),r=i.namespace)}})(n),a7(n),k9(n),function Zwe(n){for(const[e,t]of n.views)Ywe(t)}(n),function RCe(n){for(const e of n.units)for(const t of e.update)switch(t.kind){case en.Attribute:case en.Binding:case en.ClassProp:case en.ClassMap:case en.Property:case en.StyleProp:case en.StyleMap:t.expression instanceof fx&&Oi.remove(t)}}(n),function AEe(n){for(const e of n.units){let t=!1;for(const r of e.create)switch(r.kind){case en.Template:t=!0;break;case en.ElementStart:case en.Element:case en.ContainerStart:case en.Container:t=!1;break;case en.Listener:t&&Oi.remove(r)}}}(n),function kEe(n){for(const e of n.views.values())REe(e)}(n),function LEe(n){for(const e of n.views.values())for(const t of e.update)ad(t,r=>!(r instanceof cx)||r.args.length<=4?r:new E2(r.target,r.name,ho(r.args),r.args.length),Rl.None)}(n),Q9(n),fEe(n),function BCe(n){for(const e of n.views.values()){e.create.prepend([yC(e.job.allocateXrefId(),{kind:Bd.SavedView,name:null,view:e.xref},new x2)]);for(const t of e.create){if(t.kind!==en.Listener)continue;let r=e!==n.root;if(!r)for(const i of t.handlerOps)sd(i,o=>{o instanceof vC&&(r=!0)});r&&zCe(e,t)}}}(n),function Wwe(n){for(const[e,t]of n.views)for(const r of t.ops())ad(r,Xwe,Rl.None)}(n),function OCe(n){for(const[e,t]of n.views)o7(0,t.create),o7(0,t.update)}(n),s7(n),i7(n),function NCe(n){for(const[e,t]of n.views){const r=P9(t);let i;for(const o of t.update)switch(o.kind){case en.Property:case en.Attribute:if(i=LCe.get(o.securityContext)||null,o.sanitizer=i?new wC(i):null,null===o.sanitizer){const a=r.get(o.target);if(void 0===a)throw Error("Property should have an element-like owner");FCe(a)&&EN(o.name)&&(o.sanitizer=new wC(zd.IframeAttribute))}}}}(n),function yEe(n){for(const e of n.views.values())for(const t of e.create)switch(t.kind){case en.ElementStart:case en.Element:case en.Template:if(!Array.isArray(t.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(t.numSlotsUsed+=t.localRefs.length,t.localRefs.length>0){const r=vEe(t.localRefs);t.localRefs=n.addConst(r)}else t.localRefs=null}}(n),function tEe(n){for(const[e,t]of n.views)for(const r of t.create){if(r.kind!==en.ElementStart&&r.kind!==en.Element&&r.kind!==en.Template)continue;if(!(r.attributes instanceof y2))continue;const i=nEe(r.attributes);r.attributes=i.entries.length>0?n.addConst(i):null}}(n),W9(n),L9(n),l7(n),function $Ce(n){const e=new Map;for(const[t,r]of n.views){let i=0;for(const o of r.create)RN(o)&&(o.slot=i,e.set(o.xref,o.slot),i+=o.numSlotsUsed);r.decls=i}for(const[t,r]of n.views)for(const i of r.ops()){if(i.kind===en.Template){const o=n.views.get(i.xref);i.decls=o.decls}if(f9(i)&&null===i.slot){if(!e.has(i.target))throw new Error(`AssertionError: no slot allocated for ${en[i.kind]} target ${i.target}`);i.slot=e.get(i.target)}sd(i,o=>{if(ug(o)&&f9(o)&&null===o.slot){if(!e.has(o.target))throw new Error(`AssertionError: no slot allocated for ${o.constructor.name} target ${o.target}`);o.slot=e.get(o.target)}})}}(n),D9(n),function dEe(n){for(const[e,t]of n.views){const r=new Map;for(const o of t.create)if(RN(o)){if(null===o.slot)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls");r.set(o.xref,o.slot)}let i=0;for(const o of t.update){if(!h9(o))continue;if(!r.has(o.target))throw new Error(`AssertionError: reference to unknown slot for var ${o.target}`);const a=r.get(o.target);if(i!==a){const d=a-i;if(d<0)throw new Error("AssertionError: slot counter should never need to move backwards");Oi.insertBefore(kwe(d,o.sourceSpan),o),i=a}}}}(n),u7(n),j9(n),function IEe(n){for(const e of n.views.values()){for(const t of e.create)t.kind===en.Listener&&q9(t.handlerOps);q9(e.update)}}(n),function DEe(n){for(const[e,t]of n.views){const r=new Set;for(const i of t.create)i.kind===en.ElementStart&&i.tag===TEe&&(i.kind=en.ContainerStart,r.add(i.xref)),i.kind===en.ElementEnd&&r.has(i.xref)&&(i.kind=en.ContainerEnd)}}(n),function iEe(n){for(const[e,t]of n.views)for(const r of t.create){const i=rEe.get(r.kind);if(void 0===i)continue;const[o,a]=i;null!==r.prev&&r.prev.kind===o&&(r.prev.kind=a,Oi.remove(r))}}(n),function PEe(n){const e=new Map;for(const t of n.units)for(const r of t.create)LN(r)&&e.set(r.xref,r);for(const[t,r]of n.views)for(const i of r.create)(i.kind===en.ElementStart||i.kind===en.ContainerStart)&&i.nonBindable&&Oi.insertAfter(Bwe(i.xref),i),(i.kind===en.ElementEnd||i.kind===en.ContainerEnd)&&MEe(e,i.xref).nonBindable&&Oi.insertBefore(zwe(i.xref),i)}(n),K9(n),function qwe(n){for(const e of n.views.values())for(const t of e.update)sd(t,r=>{if(!(r instanceof E2&&r.args instanceof Sv))return r;if(null===r.varOffset||null===r.args.varOffset)throw new Error("Must run after variable counting");r.varOffset=r.args.varOffset,r.args.varOffset=r.varOffset+A9(r)})}(n),X9(n),t7(n),R9(n)}(T);const R=XCe(T,e);r.set("decls",Yt(T.root.decls)),r.set("vars",Yt(T.root.vars)),T.consts.length>0&&r.set("consts",ho(T.consts)),r.set("template",R)}else{const T=n.template,R=new cF(e,F2.createRootScope(),0,a,null,null,d,ze.namespaceHTML,n.relativeContextFilePath,n.i18nUseExternalIds,n.deferBlocks),L=R.buildTemplateFunction(T.nodes,[]),G=R.getNgContentSelectors();G&&r.set("ngContentSelectors",G),r.set("decls",Yt(R.getConstCount())),r.set("vars",Yt(R.getVarCount()));const{constExpressions:W,prepareStatements:ve}=R.getConsts();if(W.length>0){let _e=ho(W);ve.length>0&&(_e=nc([],[...ve,new pl(_e)])),r.set("consts",_e)}r.set("template",L)}if(n.declarations.length>0&&r.set("dependencies",function UTe(n,e){switch(e){case 0:return n;case 1:return nc([],[new pl(n)]);case 2:const t=n.prop("map").callFn([Br(ze.resolveForwardRef)]);return nc([],[new pl(t)])}}(ho(n.declarations.map(T=>T.type)),n.declarationListEmitMode)),null===n.encapsulation&&(n.encapsulation=Kf.Emulated),n.styles&&n.styles.length){const R=(n.encapsulation==Kf.Emulated?function nDe(n,e,t){const r=new Z1e;return n.map(i=>r.shimCssText(i,e,t))}(n.styles,"_ngcontent-%COMP%","_nghost-%COMP%"):n.styles).reduce((L,G)=>(G.trim().length>0&&L.push(e.getConstLiteral(Yt(G))),L),[]);R.length>0&&r.set("styles",ho(R))}else n.encapsulation===Kf.Emulated&&(n.encapsulation=Kf.None);return n.encapsulation!==Kf.Emulated&&r.set("encapsulation",Yt(n.encapsulation)),null!==n.animations&&r.set("data",Bc([{key:"animation",value:n.animations,quoted:!1}])),null!=m&&m!==zE.Default&&r.set("changeDetection",Yt(m)),{expression:Br(ze.defineComponent).callFn([r.toLiteralMap()],void 0,!0),type:wW(n),statements:[]}}function wW(n){const e=CW(n);return e.push(fF(n.template.ngContentSelectors)),e.push(iu(Yt(n.isStandalone))),e.push(TW(n)),n.isSignal&&e.push(iu(Yt(n.isSignal))),iu(Br(ze.ComponentDeclaration,e))}function EW(n,e){const t=[r1e(n,e),Yt(jTe(n))];return n.read&&t.push(n.read),t}function jTe(n){return(n.descendants?1:0)|(n.static?2:0)|(n.emitDistinctChangesOnly?4:0)}function qTe(n){return iu(Yt(n))}function dF(n){return Bc(Object.keys(n).map(t=>({key:t,value:Yt(Array.isArray(n[t])?n[t][0]:n[t]),quoted:!0})))}function fF(n){return n.length>0?iu(ho(n.map(e=>Yt(e)))):Jf}function CW(n){const e=null!==n.selector?n.selector.replace(/\n/g,""):null;return[LA(n.type.type,n.typeArgumentCount),null!==e?qTe(e):Jf,null!==n.exportAs?fF(n.exportAs):Jf,iu(WTe(n)),iu(dF(n.outputs)),fF(n.queries.map(t=>t.propertyName))]}function WTe(n){return Bc(Object.keys(n.inputs).map(e=>{const t=n.inputs[e];return{key:e,value:Bc([{key:"alias",value:Yt(t.bindingPropertyName),quoted:!0},{key:"required",value:Yt(t.required),quoted:!0}]),quoted:!0}}))}function SW(n){const e=CW(n);return e.push(Jf),e.push(iu(Yt(n.isStandalone))),e.push(TW(n)),n.isSignal&&e.push(iu(Yt(n.isSignal))),iu(Br(ze.DirectiveDeclaration,e))}function IW(n,e){return Wq(null,n,e,"b")}function YTe(n,e,t){return n.params(r=>t(e,r).currValExpr)}function KTe(n){let t,e=n.name;const r=e.match(FTe);return r?(e=r[1],t=ze.attribute):n.isAnimation?(e=XH(e),t=ze.syntheticHostProperty):t=ze.hostProperty,{bindingName:e,instruction:t,isAttribute:!!r}}const JTe=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function TW(n){return n.hostDirectives?.length?iu(ho(n.hostDirectives.map(e=>Bc([{key:"directive",value:XE(e.directive.type),quoted:!1},{key:"inputs",value:dF(e.inputs||{}),quoted:!1},{key:"outputs",value:dF(e.outputs||{}),quoted:!1}])))):Jf}function rDe(n){const e=[];let t=!1;for(const r of n){if(r.inputs||r.outputs){const i=[{key:"directive",value:r.directive.type,quoted:!1}];if(r.inputs){const o=$2(r.inputs);o&&i.push({key:"inputs",value:o,quoted:!1})}if(r.outputs){const o=$2(r.outputs);o&&i.push({key:"outputs",value:o,quoted:!1})}e.push(Bc(i))}else e.push(r.directive.type);r.isForwardReference&&(t=!0)}return t?new b_([],[new pl(ho(e))]):ho(e)}function $2(n){const e=[];for(const t in n)n.hasOwnProperty(t)&&e.push(Yt(t),Yt(n[t]));return e.length>0?ho(e):null}class iDe{}class oDe{constructor(e=new S1e){this.jitEvaluator=e,this.FactoryTarget=tm,this.ResourceLoader=iDe,this.elementSchemaRegistry=new XN}compilePipe(e,t,r){const o=Uq({name:r.name,type:wu(r.type),typeArgumentCount:0,deps:null,pipeName:r.pipeName,pure:r.pure,isStandalone:r.isStandalone});return this.jitExpression(o.expression,e,t,[])}compilePipeDeclaration(e,t,r){const o=Uq(function bDe(n){return{name:n.type.name,type:wu(n.type),typeArgumentCount:0,pipeName:n.name,deps:null,pure:n.pure??!0,isStandalone:n.isStandalone??!1}}(r));return this.jitExpression(o.expression,e,t,[])}compileInjectable(e,t,r){const{expression:i,statements:o}=mq({name:r.name,type:wu(r.type),typeArgumentCount:r.typeArgumentCount,providedIn:FW(r.providedIn),useClass:yx(r,"useClass"),useFactory:NW(r,"useFactory"),useValue:yx(r,"useValue"),useExisting:yx(r,"useExisting"),deps:r.deps?.map(BW)},!0);return this.jitExpression(i,e,t,o)}compileInjectableDeclaration(e,t,r){const{expression:i,statements:o}=mq({name:r.type.name,type:wu(r.type),typeArgumentCount:0,providedIn:FW(r.providedIn),useClass:yx(r,"useClass"),useFactory:NW(r,"useFactory"),useValue:yx(r,"useValue"),useExisting:yx(r,"useExisting"),deps:r.deps?.map(zW)},!0);return this.jitExpression(i,e,t,o)}compileInjector(e,t,r){const o=zq({name:r.name,type:wu(r.type),providers:r.providers&&r.providers.length>0?new zo(r.providers):null,imports:r.imports.map(a=>new zo(a))});return this.jitExpression(o.expression,e,t,[])}compileInjectorDeclaration(e,t,r){const i=function xDe(n){return{name:n.type.name,type:wu(n.type),providers:void 0!==n.providers&&n.providers.length>0?new zo(n.providers):null,imports:void 0!==n.imports?n.imports.map(e=>new zo(e)):[]}}(r),o=zq(i);return this.jitExpression(o.expression,e,t,[])}compileNgModule(e,t,r){const o=A1e({kind:C_.Global,type:wu(r.type),bootstrap:r.bootstrap.map(wu),declarations:r.declarations.map(wu),publicDeclarationTypes:null,imports:r.imports.map(wu),includeImportTypes:!0,exports:r.exports.map(wu),selectorScopeMode:o2.Inline,containsForwardDecls:!1,schemas:r.schemas?r.schemas.map(wu):null,id:r.id?new zo(r.id):null});return this.jitExpression(o.expression,e,t,[])}compileNgModuleDeclaration(e,t,r){const i=function M1e(n){const e=new su;return e.set("type",new zo(n.type)),void 0!==n.bootstrap&&e.set("bootstrap",new zo(n.bootstrap)),void 0!==n.declarations&&e.set("declarations",new zo(n.declarations)),void 0!==n.imports&&e.set("imports",new zo(n.imports)),void 0!==n.exports&&e.set("exports",new zo(n.exports)),void 0!==n.schemas&&e.set("schemas",new zo(n.schemas)),void 0!==n.id&&e.set("id",new zo(n.id)),Br(ze.defineNgModule).callFn([e.toLiteralMap()])}(r);return this.jitExpression(i,e,t,[])}compileDirective(e,t,r){const i=kW(r);return this.compileDirectiveFromMeta(e,t,i)}compileDirectiveDeclaration(e,t,r){const o=RW(r,this.createParseSourceSpan("Directive",r.type.name,t));return this.compileDirectiveFromMeta(e,t,o)}compileDirectiveFromMeta(e,t,r){const i=new VH,a=function $Te(n,e,t){const r=bW(n,e,t);return xW(r,n),{expression:Br(ze.defineDirective).callFn([r.toLiteralMap()],void 0,!0),type:SW(n),statements:[]}}(r,i,B2());return this.jitExpression(a.expression,e,t,i.statements)}compileComponent(e,t,r){const{template:i,interpolation:o}=LW(r.template,r.name,t,r.preserveWhitespaces,r.interpolation),a={...r,...kW(r),selector:r.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:i,declarations:r.declarations.map(cDe),declarationListEmitMode:0,deferBlocks:new Map,deferrableDeclToImportDecl:new Map,styles:[...r.styles,...i.styles],encapsulation:r.encapsulation,interpolation:o,changeDetection:r.changeDetection,animations:null!=r.animations?new zo(r.animations):null,viewProviders:null!=r.viewProviders?new zo(r.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0};return this.compileComponentFromMeta(e,`ng:///${r.name}.js`,a)}compileComponentDeclaration(e,t,r){const o=function lDe(n,e,t){const{template:r,interpolation:i}=LW(n.template,n.type.name,t,n.preserveWhitespaces??!1,n.interpolation),o=[];if(n.dependencies)for(const a of n.dependencies)switch(a.kind){case"directive":case"component":o.push(pF(a));break;case"pipe":o.push(hDe(a))}else(n.components||n.directives||n.pipes)&&(n.components&&o.push(...n.components.map(a=>pF(a,!0))),n.directives&&o.push(...n.directives.map(a=>pF(a))),n.pipes&&o.push(...function uDe(n){return n?Object.keys(n).map(e=>({kind:yv.Pipe,name:e,type:new zo(n[e])})):[]}(n.pipes)));return{...RW(n,e),template:r,styles:n.styles??[],declarations:o,viewProviders:void 0!==n.viewProviders?new zo(n.viewProviders):null,animations:void 0!==n.animations?new zo(n.animations):null,deferBlocks:new Map,deferrableDeclToImportDecl:new Map,changeDetection:n.changeDetection??zE.Default,encapsulation:n.encapsulation??Kf.Emulated,interpolation:i,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0}}(r,this.createParseSourceSpan("Component",r.type.name,t),t);return this.compileComponentFromMeta(e,t,o)}compileComponentFromMeta(e,t,r){const i=new VH,a=VTe(r,i,B2(r.interpolation));return this.jitExpression(a.expression,e,t,i.statements)}compileFactory(e,t,r){const i=cv({name:r.name,type:wu(r.type),typeArgumentCount:r.typeArgumentCount,deps:(n=r.deps,null==n?null:n.map(BW)),target:r.target});var n;return this.jitExpression(i.expression,e,t,i.statements)}compileFactoryDeclaration(e,t,r){const i=cv({name:r.type.name,type:wu(r.type),typeArgumentCount:0,deps:Array.isArray(r.deps)?r.deps.map(zW):r.deps,target:r.target});return this.jitExpression(i.expression,e,t,i.statements)}createParseSourceSpan(e,t,r){return function v1e(n,e,t){const i=new mN("",`in ${n} ${e} in ${t}`);return new ml(new _v(i,-1,-1,-1),new _v(i,-1,-1,-1))}(e,t,r)}jitExpression(e,t,r,i){const o=[...i,new Ld("$def",e,void 0,td.Exported)];return this.jitEvaluator.evaluateStatements(r,o,new D1e(t),!0).$def}}function AW(n){return{...n,predicate:PW(n.predicate),read:n.read?new zo(n.read):null,static:n.static,emitDistinctChangesOnly:n.emitDistinctChangesOnly}}function MW(n){return{propertyName:n.propertyName,first:n.first??!1,predicate:PW(n.predicate),descendants:n.descendants??!1,read:n.read?new zo(n.read):null,static:n.static??!1,emitDistinctChangesOnly:n.emitDistinctChangesOnly??!0}}function PW(n){return Array.isArray(n)?n:tN(new zo(n),1)}function kW(n){const e=function vDe(n){return n.reduce((e,t)=>{if("string"==typeof t){const[r,i]=VW(t);e[i]={bindingPropertyName:r,classPropertyName:i,required:!1,transformFunction:null}}else e[t.name]={bindingPropertyName:t.alias||t.name,classPropertyName:t.name,required:t.required||!1,transformFunction:null!=t.transform?new zo(t.transform):null};return e},{})}(n.inputs||[]),t=mF(n.outputs||[]),r=n.propMetadata,i={},o={};for(const a in r)r.hasOwnProperty(a)&&r[a].forEach(d=>{gDe(d)?i[a]={bindingPropertyName:d.alias||a,classPropertyName:a,required:d.required||!1,transformFunction:null!=d.transform?new zo(d.transform):null}:_De(d)&&(o[a]=d.alias||a)});return{...n,typeArgumentCount:0,typeSourceSpan:n.typeSourceSpan,type:wu(n.type),deps:null,host:fDe(n.propMetadata,n.typeSourceSpan,n.host),inputs:{...e,...i},outputs:{...t,...o},queries:n.queries.map(AW),providers:null!=n.providers?new zo(n.providers):null,viewQueries:n.viewQueries.map(AW),fullInheritance:!1,hostDirectives:OW(n)}}function RW(n,e){return{name:n.type.name,type:wu(n.type),typeSourceSpan:e,selector:n.selector??null,inputs:n.inputs?yDe(n.inputs):{},outputs:n.outputs??{},host:sDe(n.host),queries:(n.queries??[]).map(MW),viewQueries:(n.viewQueries??[]).map(MW),providers:void 0!==n.providers?new zo(n.providers):null,exportAs:n.exportAs??null,usesInheritance:n.usesInheritance??!1,lifecycle:{usesOnChanges:n.usesOnChanges??!1},deps:null,typeArgumentCount:0,fullInheritance:!1,isStandalone:n.isStandalone??!1,isSignal:n.isSignal??!1,hostDirectives:OW(n)}}function sDe(n={}){return{attributes:aDe(n.attributes??{}),listeners:n.listeners??{},properties:n.properties??{},specialAttributes:{classAttr:n.classAttribute,styleAttr:n.styleAttribute}}}function OW(n){return n.hostDirectives?.length?n.hostDirectives.map(e=>"function"==typeof e?{directive:wu(e),inputs:null,outputs:null,isForwardReference:!1}:{directive:wu(e.directive),isForwardReference:!1,inputs:e.inputs?mF(e.inputs):null,outputs:e.outputs?mF(e.outputs):null}):null}function aDe(n){const e={};for(const t of Object.keys(n))e[t]=new zo(n[t]);return e}function cDe(n){return{...n,type:new zo(n.type)}}function pF(n,e=null){return{kind:yv.Directive,isComponent:e||"component"===n.kind,selector:n.selector,type:new zo(n.type),inputs:n.inputs??[],outputs:n.outputs??[],exportAs:n.exportAs??null}}function hDe(n){return{kind:yv.Pipe,name:n.name,type:new zo(n.type)}}function LW(n,e,t,r,i){const o=i?XA.fromArray(i):mf,a=function MTe(n,e,t={}){const{interpolationConfig:r,preserveWhitespaces:i,enableI18nLegacyMessageIdFormat:o}=t,a=B2(r),m=(new F7).parse(n,e,{leadingTriviaChars:bTe,...t,tokenizeExpansionForms:!0,tokenizeBlocks:null!=t.enabledBlockTypes&&t.enabledBlockTypes.size>0});if(!t.alwaysAttemptHtmlToR3AstConversion&&m.errors&&m.errors.length>0){const Oe={interpolationConfig:r,preserveWhitespaces:i,errors:m.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(Oe.commentNodes=[]),Oe}let _=m.rootNodes;const C=new cW(r,!i,o),T=C.visitAllWithErrors(_);if(!t.alwaysAttemptHtmlToR3AstConversion&&T.errors&&T.errors.length>0){const Oe={interpolationConfig:r,preserveWhitespaces:i,errors:T.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(Oe.commentNodes=[]),Oe}_=T.rootNodes,i||(_=Ji(new V7,_),C.hasI18nMeta&&(_=Ji(new cW(r,!1),_)));const{nodes:R,errors:L,styleUrls:G,styles:W,ngContentSelectors:ve,commentNodes:_e}=function FIe(n,e,t){const r=new BIe(e,t),a={nodes:Ji(r,n),errors:e.errors.concat(r.errors),styleUrls:r.styleUrls,styles:r.styles,ngContentSelectors:r.ngContentSelectors};return t.collectCommentNodes&&(a.commentNodes=r.commentNodes),a}(_,a,{collectCommentNodes:!!t.collectCommentNodes,enabledBlockTypes:t.enabledBlockTypes||new Set});L.push(...m.errors,...T.errors);const re={interpolationConfig:r,preserveWhitespaces:i,errors:L.length>0?L:null,nodes:R,styleUrls:G,styles:W,ngContentSelectors:ve};return t.collectCommentNodes&&(re.commentNodes=_e),re}(n,t,{preserveWhitespaces:r,interpolationConfig:o,enabledBlockTypes:undefined});if(null!==a.errors){const d=a.errors.map(m=>m.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${d}`)}return{template:a,interpolation:o}}function yx(n,e){if(n.hasOwnProperty(e))return tN(new zo(n[e]),0)}function NW(n,e){if(n.hasOwnProperty(e))return new zo(n[e])}function FW(n){return tN("function"==typeof n?new zo(n):new ru(n??null),0)}function BW(n){const e=null!=n.attribute,t=null===n.token?null:new zo(n.token);return $W(e?new zo(n.attribute):t,e,n.host,n.optional,n.self,n.skipSelf)}function zW(n){const e=n.attribute??!1;return $W(null===n.token?null:new zo(n.token),e,n.host??!1,n.optional??!1,n.self??!1,n.skipSelf??!1)}function $W(n,e,t,r,i,o){return{token:n,attributeNameType:e?Yt("unknown"):null,host:t,optional:r,self:i,skipSelf:o}}function fDe(n,e,t){const r=function eDe(n){const e={},t={},r={},i={};for(const o of Object.keys(n)){const a=n[o],d=o.match(JTe);if(null===d)switch(o){case"class":if("string"!=typeof a)throw new Error("Class binding must be string");i.classAttr=a;break;case"style":if("string"!=typeof a)throw new Error("Style binding must be string");i.styleAttr=a;break;default:e[o]="string"==typeof a?Yt(a):a}else if(null!=d[1]){if("string"!=typeof a)throw new Error("Property binding must be string");r[d[1]]=a}else if(null!=d[2]){if("string"!=typeof a)throw new Error("Event binding must be string");t[d[2]]=a}}return{attributes:e,listeners:t,properties:r,specialAttributes:i}}(t||{}),i=function tDe(n,e){const t=B2();return t.createDirectiveHostEventAsts(n.listeners,e),t.createBoundHostProperties(n.properties,e),t.errors}(r,e);if(i.length)throw new Error(i.map(o=>o.msg).join("\n"));for(const o in n)n.hasOwnProperty(o)&&n[o].forEach(a=>{pDe(a)?r.properties[a.hostPropertyName||o]=cxe("this",o):mDe(a)&&(r.listeners[a.eventName||o]=`${o}(${(a.args||[]).join(",")})`)});return r}function pDe(n){return"HostBinding"===n.ngMetadataName}function mDe(n){return"HostListener"===n.ngMetadataName}function gDe(n){return"Input"===n.ngMetadataName}function _De(n){return"Output"===n.ngMetadataName}function yDe(n){return Object.keys(n).reduce((e,t)=>{const r=n[t];return e[t]="string"==typeof r?{bindingPropertyName:r,classPropertyName:r,transformFunction:null,required:!1}:{bindingPropertyName:r[0],classPropertyName:r[1],transformFunction:r[2]?new zo(r[2]):null,required:!1},e},{})}function mF(n){return n.reduce((e,t)=>{const[r,i]=VW(t);return e[i]=r,e},{})}function VW(n){const[e,t]=n.split(":",2).map(r=>r.trim());return[t??e,e]}new class Qbe{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}("16.2.9"),new class RDe{constructor(){this.closedByParent=!1,this.implicitNamespacePrefix=null,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return im.PARSABLE_DATA}},function wDe(n){(n.ng||(n.ng={})).\u0275compilerFacade=new oDe}(Zb),window.console.log=()=>{},Gte().bootstrapModule(abe).then(()=>gH(window)).catch(n=>console.error(n)),gH(window)},1568:(An,Lt,Ie)=>{"use strict";var Fe=Ie(8570);function tt(g){var me=[1/0,1/0,-1/0,-1/0];return Fe.coordEach(g,function(Be){me[0]>Be[0]&&(me[0]=Be[0]),me[1]>Be[1]&&(me[1]=Be[1]),me[2]<Be[0]&&(me[2]=Be[0]),me[3]<Be[1]&&(me[3]=Be[1])}),me}tt.default=tt,Lt.Z=tt},621:(An,Lt)=>{"use strict";function Ie(ae,we,oe){void 0===oe&&(oe={});var je={type:"Feature"};return(0===oe.id||oe.id)&&(je.id=oe.id),oe.bbox&&(je.bbox=oe.bbox),je.properties=we||{},je.geometry=ae,je}function Fe(ae,we,oe){if(void 0===oe&&(oe={}),!ae)throw new Error("coordinates is required");if(!Array.isArray(ae))throw new Error("coordinates must be an Array");if(ae.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!J(ae[0])||!J(ae[1]))throw new Error("coordinates must contain numbers");return Ie({type:"Point",coordinates:ae},we,oe)}function g(ae,we,oe){void 0===oe&&(oe={});for(var je=0,Te=ae;je<Te.length;je++){var K=Te[je];if(K.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var qe=0;qe<K[K.length-1].length;qe++)if(K[K.length-1][qe]!==K[0][qe])throw new Error("First and last Position are not equivalent.")}return Ie({type:"Polygon",coordinates:ae},we,oe)}function Be(ae,we,oe){if(void 0===oe&&(oe={}),ae.length<2)throw new Error("coordinates must be an array of two or more positions");return Ie({type:"LineString",coordinates:ae},we,oe)}function We(ae,we){void 0===we&&(we={});var oe={type:"FeatureCollection"};return we.id&&(oe.id=we.id),we.bbox&&(oe.bbox=we.bbox),oe.features=ae,oe}function ht(ae,we,oe){return void 0===oe&&(oe={}),Ie({type:"MultiLineString",coordinates:ae},we,oe)}function Wt(ae,we,oe){return void 0===oe&&(oe={}),Ie({type:"MultiPoint",coordinates:ae},we,oe)}function Xe(ae,we,oe){return void 0===oe&&(oe={}),Ie({type:"MultiPolygon",coordinates:ae},we,oe)}function Bt(ae,we){void 0===we&&(we="kilometers");var oe=Lt.factors[we];if(!oe)throw new Error(we+" units is invalid");return ae*oe}function ce(ae,we){void 0===we&&(we="kilometers");var oe=Lt.factors[we];if(!oe)throw new Error(we+" units is invalid");return ae/oe}function Q(ae){return ae%(2*Math.PI)*180/Math.PI}function J(ae){return!isNaN(ae)&&null!==ae&&!Array.isArray(ae)}Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.earthRadius=6371008.8,Lt.factors={centimeters:100*Lt.earthRadius,centimetres:100*Lt.earthRadius,degrees:Lt.earthRadius/111325,feet:3.28084*Lt.earthRadius,inches:39.37*Lt.earthRadius,kilometers:Lt.earthRadius/1e3,kilometres:Lt.earthRadius/1e3,meters:Lt.earthRadius,metres:Lt.earthRadius,miles:Lt.earthRadius/1609.344,millimeters:1e3*Lt.earthRadius,millimetres:1e3*Lt.earthRadius,nauticalmiles:Lt.earthRadius/1852,radians:1,yards:1.0936*Lt.earthRadius},Lt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Lt.earthRadius,yards:1.0936133},Lt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Lt.feature=Ie,Lt.geometry=function de(ae,we,oe){switch(void 0===oe&&(oe={}),ae){case"Point":return Fe(we).geometry;case"LineString":return Be(we).geometry;case"Polygon":return g(we).geometry;case"MultiPoint":return Wt(we).geometry;case"MultiLineString":return ht(we).geometry;case"MultiPolygon":return Xe(we).geometry;default:throw new Error(ae+" is invalid")}},Lt.point=Fe,Lt.points=function tt(ae,we,oe){return void 0===oe&&(oe={}),We(ae.map(function(je){return Fe(je,we)}),oe)},Lt.polygon=g,Lt.polygons=function me(ae,we,oe){return void 0===oe&&(oe={}),We(ae.map(function(je){return g(je,we)}),oe)},Lt.lineString=Be,Lt.lineStrings=function Ne(ae,we,oe){return void 0===oe&&(oe={}),We(ae.map(function(je){return Be(je,we)}),oe)},Lt.featureCollection=We,Lt.multiLineString=ht,Lt.multiPoint=Wt,Lt.multiPolygon=Xe,Lt.geometryCollection=function et(ae,we,oe){return void 0===oe&&(oe={}),Ie({type:"GeometryCollection",geometries:ae},we,oe)},Lt.round=function He(ae,we){if(void 0===we&&(we=0),we&&!(we>=0))throw new Error("precision must be a positive number");var oe=Math.pow(10,we||0);return Math.round(ae*oe)/oe},Lt.radiansToLength=Bt,Lt.lengthToRadians=ce,Lt.lengthToDegrees=function Ce(ae,we){return Q(ce(ae,we))},Lt.bearingToAzimuth=function te(ae){var we=ae%360;return we<0&&(we+=360),we},Lt.radiansToDegrees=Q,Lt.degreesToRadians=function ne(ae){return ae%360*Math.PI/180},Lt.convertLength=function Re(ae,we,oe){if(void 0===we&&(we="kilometers"),void 0===oe&&(oe="kilometers"),!(ae>=0))throw new Error("length must be a positive number");return Bt(ce(ae,we),oe)},Lt.convertArea=function ie(ae,we,oe){if(void 0===we&&(we="meters"),void 0===oe&&(oe="kilometers"),!(ae>=0))throw new Error("area must be a positive number");var je=Lt.areaFactors[we];if(!je)throw new Error("invalid original units");var Te=Lt.areaFactors[oe];if(!Te)throw new Error("invalid final units");return ae/je*Te},Lt.isNumber=J,Lt.isObject=function xe(ae){return!!ae&&ae.constructor===Object},Lt.validateBBox=function ee(ae){if(!ae)throw new Error("bbox is required");if(!Array.isArray(ae))throw new Error("bbox must be an Array");if(4!==ae.length&&6!==ae.length)throw new Error("bbox must be an Array of 4 or 6 numbers");ae.forEach(function(we){if(!J(we))throw new Error("bbox must only contain numbers")})},Lt.validateId=function pe(ae){if(!ae)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof ae))throw new Error("id must be a number or a string")}},8570:(An,Lt,Ie)=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});var de=Ie(621);function Fe(ne,Re,ie){if(null!==ne)for(var J,xe,ee,pe,ae,we,oe,K,je=0,Te=0,qe=ne.type,Me="FeatureCollection"===qe,Je="Feature"===qe,Ue=Me?ne.features.length:1,le=0;le<Ue;le++){ae=(K=!!(oe=Me?ne.features[le].geometry:Je?ne.geometry:ne)&&"GeometryCollection"===oe.type)?oe.geometries.length:1;for(var Qe=0;Qe<ae;Qe++){var lt=0,dn=0;if(null!==(pe=K?oe.geometries[Qe]:oe)){we=pe.coordinates;var Xt=pe.type;switch(je=!ie||"Polygon"!==Xt&&"MultiPolygon"!==Xt?0:1,Xt){case null:break;case"Point":if(!1===Re(we,Te,le,lt,dn))return!1;Te++,lt++;break;case"LineString":case"MultiPoint":for(J=0;J<we.length;J++){if(!1===Re(we[J],Te,le,lt,dn))return!1;Te++,"MultiPoint"===Xt&&lt++}"LineString"===Xt&&lt++;break;case"Polygon":case"MultiLineString":for(J=0;J<we.length;J++){for(xe=0;xe<we[J].length-je;xe++){if(!1===Re(we[J][xe],Te,le,lt,dn))return!1;Te++}"MultiLineString"===Xt&&lt++,"Polygon"===Xt&&dn++}"Polygon"===Xt&&lt++;break;case"MultiPolygon":for(J=0;J<we.length;J++){for(dn=0,xe=0;xe<we[J].length;xe++){for(ee=0;ee<we[J][xe].length-je;ee++){if(!1===Re(we[J][xe][ee],Te,le,lt,dn))return!1;Te++}dn++}lt++}break;case"GeometryCollection":for(J=0;J<pe.geometries.length;J++)if(!1===Fe(pe.geometries[J],Re,ie))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g(ne,Re){var ie;switch(ne.type){case"FeatureCollection":for(ie=0;ie<ne.features.length&&!1!==Re(ne.features[ie].properties,ie);ie++);break;case"Feature":Re(ne.properties,0)}}function Be(ne,Re){if("Feature"===ne.type)Re(ne,0);else if("FeatureCollection"===ne.type)for(var ie=0;ie<ne.features.length&&!1!==Re(ne.features[ie],ie);ie++);}function ht(ne,Re){var ie,J,xe,ee,pe,ae,we,oe,je,Te,K=0,qe="FeatureCollection"===ne.type,Me="Feature"===ne.type,Je=qe?ne.features.length:1;for(ie=0;ie<Je;ie++){for(oe=qe?ne.features[ie].properties:Me?ne.properties:{},je=qe?ne.features[ie].bbox:Me?ne.bbox:void 0,Te=qe?ne.features[ie].id:Me?ne.id:void 0,pe=(we=!!(ae=qe?ne.features[ie].geometry:Me?ne.geometry:ne)&&"GeometryCollection"===ae.type)?ae.geometries.length:1,xe=0;xe<pe;xe++)if(null!==(ee=we?ae.geometries[xe]:ae))switch(ee.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===Re(ee,K,oe,je,Te))return!1;break;case"GeometryCollection":for(J=0;J<ee.geometries.length;J++)if(!1===Re(ee.geometries[J],K,oe,je,Te))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===Re(null,K,oe,je,Te))return!1;K++}}function Xe(ne,Re){ht(ne,function(ie,J,xe,ee,pe){var we,ae=null===ie?null:ie.type;switch(ae){case null:case"Point":case"LineString":case"Polygon":return!1!==Re(de.feature(ie,xe,{bbox:ee,id:pe}),J,0)&&void 0}switch(ae){case"MultiPoint":we="Point";break;case"MultiLineString":we="LineString";break;case"MultiPolygon":we="Polygon"}for(var oe=0;oe<ie.coordinates.length;oe++)if(!1===Re(de.feature({type:we,coordinates:ie.coordinates[oe]},xe),J,oe))return!1})}function He(ne,Re){Xe(ne,function(ie,J,xe){var ee=0;if(ie.geometry){var pe=ie.geometry.type;if("Point"!==pe&&"MultiPoint"!==pe){var ae,we=0,oe=0,je=0;if(!1===Fe(ie,function(Te,K,qe,Me,Je){if(void 0===ae||J>we||Me>oe||Je>je)return ae=Te,we=J,oe=Me,je=Je,void(ee=0);var Ue=de.lineString([ae,Te],ie.properties);if(!1===Re(Ue,J,xe,Je,ee))return!1;ee++,ae=Te}))return!1}}})}function ce(ne,Re){if(!ne)throw new Error("geojson is required");Xe(ne,function(ie,J,xe){if(null!==ie.geometry){var pe=ie.geometry.coordinates;switch(ie.geometry.type){case"LineString":if(!1===Re(ie,J,xe,0,0))return!1;break;case"Polygon":for(var ae=0;ae<pe.length;ae++)if(!1===Re(de.lineString(pe[ae],ie.properties),J,xe,ae))return!1}}})}Lt.coordAll=function We(ne){var Re=[];return Fe(ne,function(ie){Re.push(ie)}),Re},Lt.coordEach=Fe,Lt.coordReduce=function tt(ne,Re,ie,J){var xe=ie;return Fe(ne,function(ee,pe,ae,we,oe){xe=0===pe&&void 0===ie?ee:Re(xe,ee,pe,ae,we,oe)},J),xe},Lt.featureEach=Be,Lt.featureReduce=function Ne(ne,Re,ie){var J=ie;return Be(ne,function(xe,ee){J=0===ee&&void 0===ie?xe:Re(J,xe,ee)}),J},Lt.findPoint=function Q(ne,Re){if(!de.isObject(Re=Re||{}))throw new Error("options is invalid");var ae,ie=Re.featureIndex||0,J=Re.multiFeatureIndex||0,xe=Re.geometryIndex||0,ee=Re.coordIndex||0,pe=Re.properties;switch(ne.type){case"FeatureCollection":ie<0&&(ie=ne.features.length+ie),pe=pe||ne.features[ie].properties,ae=ne.features[ie].geometry;break;case"Feature":pe=pe||ne.properties,ae=ne.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ae=ne;break;default:throw new Error("geojson is invalid")}if(null===ae)return null;var we=ae.coordinates;switch(ae.type){case"Point":return de.point(we,pe,Re);case"MultiPoint":return J<0&&(J=we.length+J),de.point(we[J],pe,Re);case"LineString":return ee<0&&(ee=we.length+ee),de.point(we[ee],pe,Re);case"Polygon":return xe<0&&(xe=we.length+xe),ee<0&&(ee=we[xe].length+ee),de.point(we[xe][ee],pe,Re);case"MultiLineString":return J<0&&(J=we.length+J),ee<0&&(ee=we[J].length+ee),de.point(we[J][ee],pe,Re);case"MultiPolygon":return J<0&&(J=we.length+J),xe<0&&(xe=we[J].length+xe),ee<0&&(ee=we[J][xe].length-ee),de.point(we[J][xe][ee],pe,Re)}throw new Error("geojson is invalid")},Lt.findSegment=function te(ne,Re){if(!de.isObject(Re=Re||{}))throw new Error("options is invalid");var ae,ie=Re.featureIndex||0,J=Re.multiFeatureIndex||0,xe=Re.geometryIndex||0,ee=Re.segmentIndex||0,pe=Re.properties;switch(ne.type){case"FeatureCollection":ie<0&&(ie=ne.features.length+ie),pe=pe||ne.features[ie].properties,ae=ne.features[ie].geometry;break;case"Feature":pe=pe||ne.properties,ae=ne.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ae=ne;break;default:throw new Error("geojson is invalid")}if(null===ae)return null;var we=ae.coordinates;switch(ae.type){case"Point":case"MultiPoint":return null;case"LineString":return ee<0&&(ee=we.length+ee-1),de.lineString([we[ee],we[ee+1]],pe,Re);case"Polygon":return xe<0&&(xe=we.length+xe),ee<0&&(ee=we[xe].length+ee-1),de.lineString([we[xe][ee],we[xe][ee+1]],pe,Re);case"MultiLineString":return J<0&&(J=we.length+J),ee<0&&(ee=we[J].length+ee-1),de.lineString([we[J][ee],we[J][ee+1]],pe,Re);case"MultiPolygon":return J<0&&(J=we.length+J),xe<0&&(xe=we[J].length+xe),ee<0&&(ee=we[J][xe].length-ee-1),de.lineString([we[J][xe][ee],we[J][xe][ee+1]],pe,Re)}throw new Error("geojson is invalid")},Lt.flattenEach=Xe,Lt.flattenReduce=function et(ne,Re,ie){var J=ie;return Xe(ne,function(xe,ee,pe){J=0===ee&&0===pe&&void 0===ie?xe:Re(J,xe,ee,pe)}),J},Lt.geomEach=ht,Lt.geomReduce=function Wt(ne,Re,ie){var J=ie;return ht(ne,function(xe,ee,pe,ae,we){J=0===ee&&void 0===ie?xe:Re(J,xe,ee,pe,ae,we)}),J},Lt.lineEach=ce,Lt.lineReduce=function Ce(ne,Re,ie){var J=ie;return ce(ne,function(xe,ee,pe,ae){J=0===ee&&void 0===ie?xe:Re(J,xe,ee,pe,ae)}),J},Lt.propEach=g,Lt.propReduce=function me(ne,Re,ie){var J=ie;return g(ne,function(xe,ee){J=0===ee&&void 0===ie?xe:Re(J,xe,ee)}),J},Lt.segmentEach=He,Lt.segmentReduce=function Bt(ne,Re,ie){var J=ie,xe=!1;return He(ne,function(ee,pe,ae,we,oe){J=!1===xe&&void 0===ie?ee:Re(J,ee,pe,ae,we,oe),xe=!0}),J}},1098:(An,Lt,Ie)=>{"use strict";var de=Ie(491),Fe=Ie(5436),tt=Fe(de("String.prototype.indexOf"));An.exports=function(me,Be){var Ne=de(me,!!Be);return"function"==typeof Ne&&tt(me,".prototype.")>-1?Fe(Ne):Ne}},5436:(An,Lt,Ie)=>{"use strict";var de=Ie(5333),Fe=Ie(491),tt=Fe("%Function.prototype.apply%"),g=Fe("%Function.prototype.call%"),me=Fe("%Reflect.apply%",!0)||de.call(g,tt),Be=Fe("%Object.getOwnPropertyDescriptor%",!0),Ne=Fe("%Object.defineProperty%",!0),We=Fe("%Math.max%");if(Ne)try{Ne({},"a",{value:1})}catch{Ne=null}An.exports=function(Xe){var et=me(de,g,arguments);return Be&&Ne&&Be(et,"length").configurable&&Ne(et,"length",{value:1+We(0,Xe.length-(arguments.length-1))}),et};var ht=function(){return me(de,tt,arguments)};Ne?Ne(An.exports,"apply",{value:ht}):An.exports.apply=ht},3664:(An,Lt,Ie)=>{"use strict";var de=Ie(938),Fe=Ie(7935),tt=Ie(4179),g=Ie(6138).orient2d;function me(ie,J,xe){J=Math.max(0,void 0===J?2:J),xe=xe||0;var ee=function Bt(ie){for(var J=ie[0],xe=ie[0],ee=ie[0],pe=ie[0],ae=0;ae<ie.length;ae++){var we=ie[ae];we[0]<J[0]&&(J=we),we[0]>ee[0]&&(ee=we),we[1]<xe[1]&&(xe=we),we[1]>pe[1]&&(pe=we)}var oe=[J,xe,ee,pe],je=oe.slice();for(ae=0;ae<ie.length;ae++)tt(ie[ae],oe)||je.push(ie[ae]);return function Re(ie){ie.sort(ne);for(var J=[],xe=0;xe<ie.length;xe++){for(;J.length>=2&&Xe(J[J.length-2],J[J.length-1],ie[xe])<=0;)J.pop();J.push(ie[xe])}for(var ee=[],pe=ie.length-1;pe>=0;pe--){for(;ee.length>=2&&Xe(ee[ee.length-2],ee[ee.length-1],ie[pe])<=0;)ee.pop();ee.push(ie[pe])}return ee.pop(),J.pop(),J.concat(ee)}(je)}(ie),pe=new de(16);pe.toBBox=function(dn){return{minX:dn[0],minY:dn[1],maxX:dn[0],maxY:dn[1]}},pe.compareMinX=function(dn,Xt){return dn[0]-Xt[0]},pe.compareMinY=function(dn,Xt){return dn[1]-Xt[1]},pe.load(ie);for(var oe,ae=[],we=0;we<ee.length;we++){var je=ee[we];pe.remove(je),oe=ce(je,oe),ae.push(oe)}var Te=new de(16);for(we=0;we<ae.length;we++)Te.insert(He(ae[we]));for(var K=J*J,qe=xe*xe;ae.length;){var Me=ae.shift(),Je=Me.p,Ue=Me.next.p,le=Ce(Je,Ue);if(!(le<qe)){var Qe=le/K;(je=Be(pe,Me.prev.p,Je,Ue,Me.next.next.p,Qe,Te))&&Math.min(Ce(je,Je),Ce(je,Ue))<=Qe&&(ae.push(Me),ae.push(ce(je,Me)),pe.remove(je),Te.remove(Me),Te.insert(He(Me)),Te.insert(He(Me.next)))}}Me=oe;var lt=[];do{lt.push(Me.p),Me=Me.next}while(Me!==oe);return lt.push(Me.p),lt}function Be(ie,J,xe,ee,pe,ae,we){for(var oe=new Fe([],Ne),je=ie.data;je;){for(var Te=0;Te<je.children.length;Te++){var K=je.children[Te],qe=je.leaf?te(K,xe,ee):We(xe,ee,K);qe>ae||oe.push({node:K,dist:qe})}for(;oe.length&&!oe.peek().node.children;){var Me=oe.pop(),Je=Me.node,Ue=te(Je,J,xe),le=te(Je,ee,pe);if(Me.dist<Ue&&Me.dist<le&&Wt(xe,Je,we)&&Wt(ee,Je,we))return Je}(je=oe.pop())&&(je=je.node)}return null}function Ne(ie,J){return ie.dist-J.dist}function We(ie,J,xe){if(ht(ie,xe)||ht(J,xe))return 0;var ee=Q(ie[0],ie[1],J[0],J[1],xe.minX,xe.minY,xe.maxX,xe.minY);if(0===ee)return 0;var pe=Q(ie[0],ie[1],J[0],J[1],xe.minX,xe.minY,xe.minX,xe.maxY);if(0===pe)return 0;var ae=Q(ie[0],ie[1],J[0],J[1],xe.maxX,xe.minY,xe.maxX,xe.maxY);if(0===ae)return 0;var we=Q(ie[0],ie[1],J[0],J[1],xe.minX,xe.maxY,xe.maxX,xe.maxY);return 0===we?0:Math.min(ee,pe,ae,we)}function ht(ie,J){return ie[0]>=J.minX&&ie[0]<=J.maxX&&ie[1]>=J.minY&&ie[1]<=J.maxY}function Wt(ie,J,xe){for(var ee=Math.min(ie[0],J[0]),pe=Math.min(ie[1],J[1]),ae=Math.max(ie[0],J[0]),we=Math.max(ie[1],J[1]),oe=xe.search({minX:ee,minY:pe,maxX:ae,maxY:we}),je=0;je<oe.length;je++)if(et(oe[je].p,oe[je].next.p,ie,J))return!1;return!0}function Xe(ie,J,xe){return g(ie[0],ie[1],J[0],J[1],xe[0],xe[1])}function et(ie,J,xe,ee){return ie!==ee&&J!==xe&&Xe(ie,J,xe)>0!=Xe(ie,J,ee)>0&&Xe(xe,ee,ie)>0!=Xe(xe,ee,J)>0}function He(ie){var J=ie.p,xe=ie.next.p;return ie.minX=Math.min(J[0],xe[0]),ie.minY=Math.min(J[1],xe[1]),ie.maxX=Math.max(J[0],xe[0]),ie.maxY=Math.max(J[1],xe[1]),ie}function ce(ie,J){var xe={p:ie,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return J?(xe.next=J.next,xe.prev=J,J.next.prev=xe,J.next=xe):(xe.prev=xe,xe.next=xe),xe}function Ce(ie,J){var xe=ie[0]-J[0],ee=ie[1]-J[1];return xe*xe+ee*ee}function te(ie,J,xe){var ee=J[0],pe=J[1],ae=xe[0]-ee,we=xe[1]-pe;if(0!==ae||0!==we){var oe=((ie[0]-ee)*ae+(ie[1]-pe)*we)/(ae*ae+we*we);oe>1?(ee=xe[0],pe=xe[1]):oe>0&&(ee+=ae*oe,pe+=we*oe)}return(ae=ie[0]-ee)*ae+(we=ie[1]-pe)*we}function Q(ie,J,xe,ee,pe,ae,we,oe){var _n,Pn,Qn,jt,je=xe-ie,Te=ee-J,K=we-pe,qe=oe-ae,Me=ie-pe,Je=J-ae,Ue=je*je+Te*Te,le=je*K+Te*qe,Qe=K*K+qe*qe,lt=je*Me+Te*Je,dn=K*Me+qe*Je,Xt=Ue*Qe-le*le,mr=Xt,Tn=Xt;0===Xt?(Pn=0,mr=1,jt=dn,Tn=Qe):(jt=Ue*dn-le*lt,(Pn=le*dn-Qe*lt)<0?(Pn=0,jt=dn,Tn=Qe):Pn>mr&&(Pn=mr,jt=dn+le,Tn=Qe)),jt<0?(jt=0,-lt<0?Pn=0:-lt>Ue?Pn=mr:(Pn=-lt,mr=Ue)):jt>Tn&&(jt=Tn,-lt+le<0?Pn=0:-lt+le>Ue?Pn=mr:(Pn=-lt+le,mr=Ue));var jn=(1-(Qn=0===jt?0:jt/Tn))*pe+Qn*we-((1-(_n=0===Pn?0:Pn/mr))*ie+_n*xe),Pt=(1-Qn)*ae+Qn*oe-((1-_n)*J+_n*ee);return jn*jn+Pt*Pt}function ne(ie,J){return ie[0]===J[0]?ie[1]-J[1]:ie[0]-J[0]}Fe.default&&(Fe=Fe.default),An.exports=me,An.exports.default=me},938:function(An){An.exports=function(){"use strict";function Lt(ce,Ce,te,Q,ne){!function Re(ie,J,xe,ee,pe){for(;ee>xe;){if(ee-xe>600){var ae=ee-xe+1,we=J-xe+1,oe=Math.log(ae),je=.5*Math.exp(2*oe/3),Te=.5*Math.sqrt(oe*je*(ae-je)/ae)*(we-ae/2<0?-1:1);Re(ie,J,Math.max(xe,Math.floor(J-we*je/ae+Te)),Math.min(ee,Math.floor(J+(ae-we)*je/ae+Te)),pe)}var Me=ie[J],Je=xe,Ue=ee;for(Ie(ie,xe,J),pe(ie[ee],Me)>0&&Ie(ie,xe,ee);Je<Ue;){for(Ie(ie,Je,Ue),Je++,Ue--;pe(ie[Je],Me)<0;)Je++;for(;pe(ie[Ue],Me)>0;)Ue--}0===pe(ie[xe],Me)?Ie(ie,xe,Ue):Ie(ie,++Ue,ee),Ue<=J&&(xe=Ue+1),J<=Ue&&(ee=Ue-1)}}(ce,Ce,te||0,Q||ce.length-1,ne||de)}function Ie(ce,Ce,te){var Q=ce[Ce];ce[Ce]=ce[te],ce[te]=Q}function de(ce,Ce){return ce<Ce?-1:ce>Ce?1:0}var Fe=function(ce){void 0===ce&&(ce=9),this._maxEntries=Math.max(4,ce),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function tt(ce,Ce,te){if(!te)return Ce.indexOf(ce);for(var Q=0;Q<Ce.length;Q++)if(te(ce,Ce[Q]))return Q;return-1}function g(ce,Ce){me(ce,0,ce.children.length,Ce,ce)}function me(ce,Ce,te,Q,ne){ne||(ne=He(null)),ne.minX=1/0,ne.minY=1/0,ne.maxX=-1/0,ne.maxY=-1/0;for(var Re=Ce;Re<te;Re++){var ie=ce.children[Re];Be(ne,ce.leaf?Q(ie):ie)}return ne}function Be(ce,Ce){return ce.minX=Math.min(ce.minX,Ce.minX),ce.minY=Math.min(ce.minY,Ce.minY),ce.maxX=Math.max(ce.maxX,Ce.maxX),ce.maxY=Math.max(ce.maxY,Ce.maxY),ce}function Ne(ce,Ce){return ce.minX-Ce.minX}function We(ce,Ce){return ce.minY-Ce.minY}function ht(ce){return(ce.maxX-ce.minX)*(ce.maxY-ce.minY)}function Wt(ce){return ce.maxX-ce.minX+(ce.maxY-ce.minY)}function Xe(ce,Ce){return ce.minX<=Ce.minX&&ce.minY<=Ce.minY&&Ce.maxX<=ce.maxX&&Ce.maxY<=ce.maxY}function et(ce,Ce){return Ce.minX<=ce.maxX&&Ce.minY<=ce.maxY&&Ce.maxX>=ce.minX&&Ce.maxY>=ce.minY}function He(ce){return{children:ce,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bt(ce,Ce,te,Q,ne){for(var Re=[Ce,te];Re.length;)if(!((te=Re.pop())-(Ce=Re.pop())<=Q)){var ie=Ce+Math.ceil((te-Ce)/Q/2)*Q;Lt(ce,ie,Ce,te,ne),Re.push(Ce,ie,ie,te)}}return Fe.prototype.all=function(){return this._all(this.data,[])},Fe.prototype.search=function(ce){var Ce=this.data,te=[];if(!et(ce,Ce))return te;for(var Q=this.toBBox,ne=[];Ce;){for(var Re=0;Re<Ce.children.length;Re++){var ie=Ce.children[Re],J=Ce.leaf?Q(ie):ie;et(ce,J)&&(Ce.leaf?te.push(ie):Xe(ce,J)?this._all(ie,te):ne.push(ie))}Ce=ne.pop()}return te},Fe.prototype.collides=function(ce){var Ce=this.data;if(!et(ce,Ce))return!1;for(var te=[];Ce;){for(var Q=0;Q<Ce.children.length;Q++){var ne=Ce.children[Q],Re=Ce.leaf?this.toBBox(ne):ne;if(et(ce,Re)){if(Ce.leaf||Xe(ce,Re))return!0;te.push(ne)}}Ce=te.pop()}return!1},Fe.prototype.load=function(ce){if(!ce||!ce.length)return this;if(ce.length<this._minEntries){for(var Ce=0;Ce<ce.length;Ce++)this.insert(ce[Ce]);return this}var te=this._build(ce.slice(),0,ce.length-1,0);if(this.data.children.length)if(this.data.height===te.height)this._splitRoot(this.data,te);else{if(this.data.height<te.height){var Q=this.data;this.data=te,te=Q}this._insert(te,this.data.height-te.height-1,!0)}else this.data=te;return this},Fe.prototype.insert=function(ce){return ce&&this._insert(ce,this.data.height-1),this},Fe.prototype.clear=function(){return this.data=He([]),this},Fe.prototype.remove=function(ce,Ce){if(!ce)return this;for(var te,Q,ne,Re=this.data,ie=this.toBBox(ce),J=[],xe=[];Re||J.length;){if(Re||(Re=J.pop(),Q=J[J.length-1],te=xe.pop(),ne=!0),Re.leaf){var ee=tt(ce,Re.children,Ce);if(-1!==ee)return Re.children.splice(ee,1),J.push(Re),this._condense(J),this}ne||Re.leaf||!Xe(Re,ie)?Q?(te++,Re=Q.children[te],ne=!1):Re=null:(J.push(Re),xe.push(te),te=0,Q=Re,Re=Re.children[0])}return this},Fe.prototype.toBBox=function(ce){return ce},Fe.prototype.compareMinX=function(ce,Ce){return ce.minX-Ce.minX},Fe.prototype.compareMinY=function(ce,Ce){return ce.minY-Ce.minY},Fe.prototype.toJSON=function(){return this.data},Fe.prototype.fromJSON=function(ce){return this.data=ce,this},Fe.prototype._all=function(ce,Ce){for(var te=[];ce;)ce.leaf?Ce.push.apply(Ce,ce.children):te.push.apply(te,ce.children),ce=te.pop();return Ce},Fe.prototype._build=function(ce,Ce,te,Q){var ne,Re=te-Ce+1,ie=this._maxEntries;if(Re<=ie)return g(ne=He(ce.slice(Ce,te+1)),this.toBBox),ne;Q||(Q=Math.ceil(Math.log(Re)/Math.log(ie)),ie=Math.ceil(Re/Math.pow(ie,Q-1))),(ne=He([])).leaf=!1,ne.height=Q;var J=Math.ceil(Re/ie),xe=J*Math.ceil(Math.sqrt(ie));Bt(ce,Ce,te,xe,this.compareMinX);for(var ee=Ce;ee<=te;ee+=xe){var pe=Math.min(ee+xe-1,te);Bt(ce,ee,pe,J,this.compareMinY);for(var ae=ee;ae<=pe;ae+=J){var we=Math.min(ae+J-1,pe);ne.children.push(this._build(ce,ae,we,Q-1))}}return g(ne,this.toBBox),ne},Fe.prototype._chooseSubtree=function(ce,Ce,te,Q){for(;Q.push(Ce),!Ce.leaf&&Q.length-1!==te;){for(var ne=1/0,Re=1/0,ie=void 0,J=0;J<Ce.children.length;J++){var xe=Ce.children[J],ee=ht(xe),pe=(ae=ce,we=xe,(Math.max(we.maxX,ae.maxX)-Math.min(we.minX,ae.minX))*(Math.max(we.maxY,ae.maxY)-Math.min(we.minY,ae.minY))-ee);pe<Re?(Re=pe,ne=ee<ne?ee:ne,ie=xe):pe===Re&&ee<ne&&(ne=ee,ie=xe)}Ce=ie||Ce.children[0]}var ae,we;return Ce},Fe.prototype._insert=function(ce,Ce,te){var Q=te?ce:this.toBBox(ce),ne=[],Re=this._chooseSubtree(Q,this.data,Ce,ne);for(Re.children.push(ce),Be(Re,Q);Ce>=0&&ne[Ce].children.length>this._maxEntries;)this._split(ne,Ce),Ce--;this._adjustParentBBoxes(Q,ne,Ce)},Fe.prototype._split=function(ce,Ce){var te=ce[Ce],Q=te.children.length,ne=this._minEntries;this._chooseSplitAxis(te,ne,Q);var Re=this._chooseSplitIndex(te,ne,Q),ie=He(te.children.splice(Re,te.children.length-Re));ie.height=te.height,ie.leaf=te.leaf,g(te,this.toBBox),g(ie,this.toBBox),Ce?ce[Ce-1].children.push(ie):this._splitRoot(te,ie)},Fe.prototype._splitRoot=function(ce,Ce){this.data=He([ce,Ce]),this.data.height=ce.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},Fe.prototype._chooseSplitIndex=function(ce,Ce,te){for(var Q,ne,Re,ie,J,xe,ee,pe=1/0,ae=1/0,we=Ce;we<=te-Ce;we++){var oe=me(ce,0,we,this.toBBox),je=me(ce,we,te,this.toBBox),Te=(ne=oe,Re=je,void 0,void 0,void 0,void 0,ie=Math.max(ne.minX,Re.minX),J=Math.max(ne.minY,Re.minY),xe=Math.min(ne.maxX,Re.maxX),ee=Math.min(ne.maxY,Re.maxY),Math.max(0,xe-ie)*Math.max(0,ee-J)),K=ht(oe)+ht(je);Te<pe?(pe=Te,Q=we,ae=K<ae?K:ae):Te===pe&&K<ae&&(ae=K,Q=we)}return Q||te-Ce},Fe.prototype._chooseSplitAxis=function(ce,Ce,te){var Q=ce.leaf?this.compareMinX:Ne,ne=ce.leaf?this.compareMinY:We;this._allDistMargin(ce,Ce,te,Q)<this._allDistMargin(ce,Ce,te,ne)&&ce.children.sort(Q)},Fe.prototype._allDistMargin=function(ce,Ce,te,Q){ce.children.sort(Q);for(var ne=this.toBBox,Re=me(ce,0,Ce,ne),ie=me(ce,te-Ce,te,ne),J=Wt(Re)+Wt(ie),xe=Ce;xe<te-Ce;xe++){var ee=ce.children[xe];Be(Re,ce.leaf?ne(ee):ee),J+=Wt(Re)}for(var pe=te-Ce-1;pe>=Ce;pe--){var ae=ce.children[pe];Be(ie,ce.leaf?ne(ae):ae),J+=Wt(ie)}return J},Fe.prototype._adjustParentBBoxes=function(ce,Ce,te){for(var Q=te;Q>=0;Q--)Be(Ce[Q],ce)},Fe.prototype._condense=function(ce){for(var Ce=ce.length-1,te=void 0;Ce>=0;Ce--)0===ce[Ce].children.length?Ce>0?(te=ce[Ce-1].children).splice(te.indexOf(ce[Ce]),1):this.clear():g(ce[Ce],this.toBBox)},Fe}()},3970:(An,Lt,Ie)=>{var de=Ie(7809),Fe=Ie(8147),tt=Ie(314),g=Ie(4720),me=Ie(1139),Be=Ie(2365),Ne=Date.prototype.getTime;function ht(et){return null==et}function Wt(et){return!(!et||"object"!=typeof et||"number"!=typeof et.length||"function"!=typeof et.copy||"function"!=typeof et.slice||et.length>0&&"number"!=typeof et[0])}An.exports=function We(et,He,Bt){var ce=Bt||{};return!!(ce.strict?tt(et,He):et===He)||(!et||!He||"object"!=typeof et&&"object"!=typeof He?ce.strict?tt(et,He):et==He:function Xe(et,He,Bt){var ce,Ce;if(typeof et!=typeof He||ht(et)||ht(He)||et.prototype!==He.prototype||Fe(et)!==Fe(He))return!1;var te=g(et),Q=g(He);if(te!==Q)return!1;if(te||Q)return et.source===He.source&&me(et)===me(He);if(Be(et)&&Be(He))return Ne.call(et)===Ne.call(He);var ne=Wt(et),Re=Wt(He);if(ne!==Re)return!1;if(ne||Re){if(et.length!==He.length)return!1;for(ce=0;ce<et.length;ce++)if(et[ce]!==He[ce])return!1;return!0}if(typeof et!=typeof He)return!1;try{var ie=de(et),J=de(He)}catch{return!1}if(ie.length!==J.length)return!1;for(ie.sort(),J.sort(),ce=ie.length-1;ce>=0;ce--)if(ie[ce]!=J[ce])return!1;for(ce=ie.length-1;ce>=0;ce--)if(!We(et[Ce=ie[ce]],He[Ce],Bt))return!1;return!0}(et,He,ce))}},9224:(An,Lt,Ie)=>{"use strict";var de=Ie(2486)(),Fe=Ie(491),tt=de&&Fe("%Object.defineProperty%",!0);if(tt)try{tt({},"a",{value:1})}catch{tt=!1}var g=Fe("%SyntaxError%"),me=Fe("%TypeError%"),Be=Ie(9262);An.exports=function(We,ht,Wt){if(!We||"object"!=typeof We&&"function"!=typeof We)throw new me("`obj` must be an object or a function`");if("string"!=typeof ht&&"symbol"!=typeof ht)throw new me("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new me("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new me("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new me("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new me("`loose`, if provided, must be a boolean");var Xe=arguments.length>3?arguments[3]:null,et=arguments.length>4?arguments[4]:null,He=arguments.length>5?arguments[5]:null,Bt=arguments.length>6&&arguments[6],ce=!!Be&&Be(We,ht);if(tt)tt(We,ht,{configurable:null===He&&ce?ce.configurable:!He,enumerable:null===Xe&&ce?ce.enumerable:!Xe,value:Wt,writable:null===et&&ce?ce.writable:!et});else{if(!Bt&&(Xe||et||He))throw new g("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");We[ht]=Wt}}},1648:(An,Lt,Ie)=>{"use strict";var de=Ie(7809),Fe="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),tt=Object.prototype.toString,g=Array.prototype.concat,me=Ie(9224),Ne=Ie(2486)(),We=function(Wt,Xe,et,He){if(Xe in Wt)if(!0===He){if(Wt[Xe]===et)return}else if(!function(Wt){return"function"==typeof Wt&&"[object Function]"===tt.call(Wt)}(He)||!He())return;Ne?me(Wt,Xe,et,!0):me(Wt,Xe,et)},ht=function(Wt,Xe){var et=arguments.length>2?arguments[2]:{},He=de(Xe);Fe&&(He=g.call(He,Object.getOwnPropertySymbols(Xe)));for(var Bt=0;Bt<He.length;Bt+=1)We(Wt,He[Bt],Xe[He[Bt]],et[He[Bt]])};ht.supportsDescriptors=!!Ne,An.exports=ht},7649:An=>{function Lt(Ie,de,Fe,tt){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(Ie,de,Fe,tt)}Lt.prototype.run=function(Ie,de,Fe,tt){this._init(Ie,de,Fe,tt);for(var g=0;g<this._datasetLength;g++)if(1!==this._visited[g]){this._visited[g]=1;var me=this._regionQuery(g);if(me.length<this.minPts)this.noise.push(g);else{var Be=this.clusters.length;this.clusters.push([]),this._addToCluster(g,Be),this._expandCluster(Be,me)}}return this.clusters},Lt.prototype._init=function(Ie,de,Fe,tt){if(Ie){if(!(Ie instanceof Array))throw Error("Dataset must be of type array, "+typeof Ie+" given");this.dataset=Ie,this.clusters=[],this.noise=[],this._datasetLength=Ie.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}de&&(this.epsilon=de),Fe&&(this.minPts=Fe),tt&&(this.distance=tt)},Lt.prototype._expandCluster=function(Ie,de){for(var Fe=0;Fe<de.length;Fe++){var tt=de[Fe];if(1!==this._visited[tt]){this._visited[tt]=1;var g=this._regionQuery(tt);g.length>=this.minPts&&(de=this._mergeArrays(de,g))}1!==this._assigned[tt]&&this._addToCluster(tt,Ie)}},Lt.prototype._addToCluster=function(Ie,de){this.clusters[de].push(Ie),this._assigned[Ie]=1},Lt.prototype._regionQuery=function(Ie){for(var de=[],Fe=0;Fe<this._datasetLength;Fe++)this.distance(this.dataset[Ie],this.dataset[Fe])<this.epsilon&&de.push(Fe);return de},Lt.prototype._mergeArrays=function(Ie,de){for(var Fe=de.length,tt=0;tt<Fe;tt++){var g=de[tt];Ie.indexOf(g)<0&&Ie.push(g)}return Ie},Lt.prototype._euclideanDistance=function(Ie,de){for(var Fe=0,tt=Math.min(Ie.length,de.length);tt--;)Fe+=(Ie[tt]-de[tt])*(Ie[tt]-de[tt]);return Math.sqrt(Fe)},An.exports&&(An.exports=Lt)},442:An=>{function Lt(Ie,de,Fe){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(Ie,de,Fe)}Lt.prototype.init=function(Ie,de,Fe){this.assignments=[],this.centroids=[],typeof Ie<"u"&&(this.dataset=Ie),typeof de<"u"&&(this.k=de),typeof Fe<"u"&&(this.distance=Fe)},Lt.prototype.run=function(Ie,de){this.init(Ie,de);for(var Fe=this.dataset.length,tt=0;tt<this.k;tt++)this.centroids[tt]=this.randomCentroid();for(var g=!0;g;){g=this.assign();for(var me=0;me<this.k;me++){for(var Be=new Array(Wt),Ne=0,We=0;We<Wt;We++)Be[We]=0;for(var ht=0;ht<Fe;ht++){var Wt=this.dataset[ht].length;if(me===this.assignments[ht]){for(We=0;We<Wt;We++)Be[We]+=this.dataset[ht][We];Ne++}}if(Ne>0){for(We=0;We<Wt;We++)Be[We]/=Ne;this.centroids[me]=Be}else this.centroids[me]=this.randomCentroid(),g=!0}}return this.getClusters()},Lt.prototype.randomCentroid=function(){var de,Fe,Ie=this.dataset.length-1;do{Fe=Math.round(Math.random()*Ie),de=this.dataset[Fe]}while(this.centroids.indexOf(de)>=0);return de},Lt.prototype.assign=function(){for(var Fe,Ie=!1,de=this.dataset.length,tt=0;tt<de;tt++)(Fe=this.argmin(this.dataset[tt],this.centroids,this.distance))!=this.assignments[tt]&&(this.assignments[tt]=Fe,Ie=!0);return Ie},Lt.prototype.getClusters=function(){for(var de,Ie=new Array(this.k),Fe=0;Fe<this.assignments.length;Fe++)typeof Ie[de=this.assignments[Fe]]>"u"&&(Ie[de]=[]),Ie[de].push(Fe);return Ie},Lt.prototype.argmin=function(Ie,de,Fe){for(var Be,tt=Number.MAX_VALUE,g=0,me=de.length,Ne=0;Ne<me;Ne++)(Be=Fe(Ie,de[Ne]))<tt&&(tt=Be,g=Ne);return g},Lt.prototype.distance=function(Ie,de){for(var Fe=0,tt=Math.min(Ie.length,de.length);tt--;){var g=Ie[tt]-de[tt];Fe+=g*g}return Math.sqrt(Fe)},An.exports&&(An.exports=Lt)},2195:(An,Lt,Ie)=>{if(An.exports)var de=Ie(6216);function Fe(tt,g,me,Be){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(tt,g,me,Be)}Fe.prototype.run=function(tt,g,me,Be){this._init(tt,g,me,Be);for(var Ne=0,We=this.dataset.length;Ne<We;Ne++)if(1!==this._processed[Ne]){this._processed[Ne]=1,this.clusters.push([Ne]);var ht=this.clusters.length-1;this._orderedList.push(Ne);var Wt=new de(null,null,"asc"),Xe=this._regionQuery(Ne);void 0!==this._distanceToCore(Ne)&&(this._updateQueue(Ne,Xe,Wt),this._expandCluster(ht,Wt))}return this.clusters},Fe.prototype.getReachabilityPlot=function(){for(var tt=[],g=0,me=this._orderedList.length;g<me;g++){var Be=this._orderedList[g];tt.push([Be,this._reachability[Be]])}return tt},Fe.prototype._init=function(tt,g,me,Be){if(tt){if(!(tt instanceof Array))throw Error("Dataset must be of type array, "+typeof tt+" given");this.dataset=tt,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}g&&(this.epsilon=g),me&&(this.minPts=me),Be&&(this.distance=Be)},Fe.prototype._updateQueue=function(tt,g,me){var Be=this;this._coreDistance=this._distanceToCore(tt),g.forEach(function(Ne){if(void 0===Be._processed[Ne]){var We=Be.distance(Be.dataset[tt],Be.dataset[Ne]),ht=Math.max(Be._coreDistance,We);void 0===Be._reachability[Ne]?(Be._reachability[Ne]=ht,me.insert(Ne,ht)):ht<Be._reachability[Ne]&&(Be._reachability[Ne]=ht,me.remove(Ne),me.insert(Ne,ht))}})},Fe.prototype._expandCluster=function(tt,g){for(var me=g.getElements(),Be=0,Ne=me.length;Be<Ne;Be++){var We=me[Be];if(void 0===this._processed[We]){var ht=this._regionQuery(We);this._processed[We]=1,this.clusters[tt].push(We),this._orderedList.push(We),void 0!==this._distanceToCore(We)&&(this._updateQueue(We,ht,g),this._expandCluster(tt,g))}}},Fe.prototype._distanceToCore=function(tt){for(var g=this.epsilon,me=0;me<g;me++)if(this._regionQuery(tt,me).length>=this.minPts)return me},Fe.prototype._regionQuery=function(tt,g){g=g||this.epsilon;for(var me=[],Be=0,Ne=this.dataset.length;Be<Ne;Be++)this.distance(this.dataset[tt],this.dataset[Be])<g&&me.push(Be);return me},Fe.prototype._euclideanDistance=function(tt,g){for(var me=0,Be=Math.min(tt.length,g.length);Be--;)me+=(tt[Be]-g[Be])*(tt[Be]-g[Be]);return Math.sqrt(me)},An.exports&&(An.exports=Fe)},6216:An=>{function Lt(Ie,de,Fe){this._queue=[],this._priorities=[],this._sorting="desc",this._init(Ie,de,Fe)}Lt.prototype.insert=function(Ie,de){for(var Fe=this._queue.length,tt=Fe;tt--;){var g=this._priorities[tt];"desc"===this._sorting?de>g&&(Fe=tt):de<g&&(Fe=tt)}this._insertAt(Ie,de,Fe)},Lt.prototype.remove=function(Ie){for(var de=this._queue.length;de--;)if(Ie===this._queue[de]){this._queue.splice(de,1),this._priorities.splice(de,1);break}},Lt.prototype.forEach=function(Ie){this._queue.forEach(Ie)},Lt.prototype.getElements=function(){return this._queue},Lt.prototype.getElementPriority=function(Ie){return this._priorities[Ie]},Lt.prototype.getPriorities=function(){return this._priorities},Lt.prototype.getElementsWithPriorities=function(){for(var Ie=[],de=0,Fe=this._queue.length;de<Fe;de++)Ie.push([this._queue[de],this._priorities[de]]);return Ie},Lt.prototype._init=function(Ie,de,Fe){if(Ie&&de){if(this._queue=[],this._priorities=[],Ie.length!==de.length)throw new Error("Arrays must have the same length");for(var tt=0;tt<Ie.length;tt++)this.insert(Ie[tt],de[tt])}Fe&&(this._sorting=Fe)},Lt.prototype._insertAt=function(Ie,de,Fe){this._queue.length===Fe?(this._queue.push(Ie),this._priorities.push(de)):(this._queue.splice(Fe,0,Ie),this._priorities.splice(Fe,0,de))},An.exports&&(An.exports=Lt)},3367:(An,Lt,Ie)=>{An.exports&&(An.exports={DBSCAN:Ie(7649),KMEANS:Ie(442),OPTICS:Ie(2195),PriorityQueue:Ie(6216)})},9145:An=>{"use strict";function Lt(K,qe,Me){Me=Me||2;var lt,dn,Xt,_n,Pn,Qn,jt,Je=qe&&qe.length,Ue=Je?qe[0]*Me:K.length,le=Ie(K,0,Ue,Me,!0),Qe=[];if(!le||le.next===le.prev)return Qe;if(Je&&(le=function Ne(K,qe,Me,Je){var le,Qe,Xt,Ue=[];for(le=0,Qe=qe.length;le<Qe;le++)(Xt=Ie(K,qe[le]*Je,le<Qe-1?qe[le+1]*Je:K.length,Je,!1))===Xt.next&&(Xt.steiner=!0),Ue.push(ce(Xt));for(Ue.sort(We),le=0;le<Ue.length;le++)Me=ht(Ue[le],Me);return Me}(K,qe,le,Me)),K.length>80*Me){lt=Xt=K[0],dn=_n=K[1];for(var mr=Me;mr<Ue;mr+=Me)(Pn=K[mr])<lt&&(lt=Pn),(Qn=K[mr+1])<dn&&(dn=Qn),Pn>Xt&&(Xt=Pn),Qn>_n&&(_n=Qn);jt=0!==(jt=Math.max(Xt-lt,_n-dn))?32767/jt:0}return Fe(le,Qe,Me,lt,dn,jt,0),Qe}function Ie(K,qe,Me,Je,Ue){var le,Qe;if(Ue===Te(K,qe,Me,Je)>0)for(le=qe;le<Me;le+=Je)Qe=we(le,K[le],K[le+1],Qe);else for(le=Me-Je;le>=qe;le-=Je)Qe=we(le,K[le],K[le+1],Qe);return Qe&&ne(Qe,Qe.next)&&(oe(Qe),Qe=Qe.next),Qe}function de(K,qe){if(!K)return K;qe||(qe=K);var Je,Me=K;do{if(Je=!1,Me.steiner||!ne(Me,Me.next)&&0!==Q(Me.prev,Me,Me.next))Me=Me.next;else{if(oe(Me),(Me=qe=Me.prev)===Me.next)break;Je=!0}}while(Je||Me!==qe);return qe}function Fe(K,qe,Me,Je,Ue,le,Qe){if(K){!Qe&&le&&function et(K,qe,Me,Je){var Ue=K;do{0===Ue.z&&(Ue.z=Bt(Ue.x,Ue.y,qe,Me,Je)),Ue.prevZ=Ue.prev,Ue.nextZ=Ue.next,Ue=Ue.next}while(Ue!==K);Ue.prevZ.nextZ=null,Ue.prevZ=null,function He(K){var qe,Me,Je,Ue,le,Qe,lt,dn,Xt=1;do{for(Me=K,K=null,le=null,Qe=0;Me;){for(Qe++,Je=Me,lt=0,qe=0;qe<Xt&&(lt++,Je=Je.nextZ);qe++);for(dn=Xt;lt>0||dn>0&&Je;)0!==lt&&(0===dn||!Je||Me.z<=Je.z)?(Ue=Me,Me=Me.nextZ,lt--):(Ue=Je,Je=Je.nextZ,dn--),le?le.nextZ=Ue:K=Ue,Ue.prevZ=le,le=Ue;Me=Je}le.nextZ=null,Xt*=2}while(Qe>1)}(Ue)}(K,Je,Ue,le);for(var dn,Xt,lt=K;K.prev!==K.next;)if(dn=K.prev,Xt=K.next,le?g(K,Je,Ue,le):tt(K))qe.push(dn.i/Me|0),qe.push(K.i/Me|0),qe.push(Xt.i/Me|0),oe(K),K=Xt.next,lt=Xt.next;else if((K=Xt)===lt){Qe?1===Qe?Fe(K=me(de(K),qe,Me),qe,Me,Je,Ue,le,2):2===Qe&&Be(K,qe,Me,Je,Ue,le):Fe(de(K),qe,Me,Je,Ue,le,1);break}}}function tt(K){var qe=K.prev,Me=K,Je=K.next;if(Q(qe,Me,Je)>=0)return!1;for(var Ue=qe.x,le=Me.x,Qe=Je.x,lt=qe.y,dn=Me.y,Xt=Je.y,_n=Ue<le?Ue<Qe?Ue:Qe:le<Qe?le:Qe,Pn=lt<dn?lt<Xt?lt:Xt:dn<Xt?dn:Xt,Qn=Ue>le?Ue>Qe?Ue:Qe:le>Qe?le:Qe,jt=lt>dn?lt>Xt?lt:Xt:dn>Xt?dn:Xt,mr=Je.next;mr!==qe;){if(mr.x>=_n&&mr.x<=Qn&&mr.y>=Pn&&mr.y<=jt&&Ce(Ue,lt,le,dn,Qe,Xt,mr.x,mr.y)&&Q(mr.prev,mr,mr.next)>=0)return!1;mr=mr.next}return!0}function g(K,qe,Me,Je){var Ue=K.prev,le=K,Qe=K.next;if(Q(Ue,le,Qe)>=0)return!1;for(var lt=Ue.x,dn=le.x,Xt=Qe.x,_n=Ue.y,Pn=le.y,Qn=Qe.y,jt=lt<dn?lt<Xt?lt:Xt:dn<Xt?dn:Xt,mr=_n<Pn?_n<Qn?_n:Qn:Pn<Qn?Pn:Qn,Tn=lt>dn?lt>Xt?lt:Xt:dn>Xt?dn:Xt,Vn=_n>Pn?_n>Qn?_n:Qn:Pn>Qn?Pn:Qn,un=Bt(jt,mr,qe,Me,Je),Ft=Bt(Tn,Vn,qe,Me,Je),Cn=K.prevZ,jn=K.nextZ;Cn&&Cn.z>=un&&jn&&jn.z<=Ft;){if(Cn.x>=jt&&Cn.x<=Tn&&Cn.y>=mr&&Cn.y<=Vn&&Cn!==Ue&&Cn!==Qe&&Ce(lt,_n,dn,Pn,Xt,Qn,Cn.x,Cn.y)&&Q(Cn.prev,Cn,Cn.next)>=0||(Cn=Cn.prevZ,jn.x>=jt&&jn.x<=Tn&&jn.y>=mr&&jn.y<=Vn&&jn!==Ue&&jn!==Qe&&Ce(lt,_n,dn,Pn,Xt,Qn,jn.x,jn.y)&&Q(jn.prev,jn,jn.next)>=0))return!1;jn=jn.nextZ}for(;Cn&&Cn.z>=un;){if(Cn.x>=jt&&Cn.x<=Tn&&Cn.y>=mr&&Cn.y<=Vn&&Cn!==Ue&&Cn!==Qe&&Ce(lt,_n,dn,Pn,Xt,Qn,Cn.x,Cn.y)&&Q(Cn.prev,Cn,Cn.next)>=0)return!1;Cn=Cn.prevZ}for(;jn&&jn.z<=Ft;){if(jn.x>=jt&&jn.x<=Tn&&jn.y>=mr&&jn.y<=Vn&&jn!==Ue&&jn!==Qe&&Ce(lt,_n,dn,Pn,Xt,Qn,jn.x,jn.y)&&Q(jn.prev,jn,jn.next)>=0)return!1;jn=jn.nextZ}return!0}function me(K,qe,Me){var Je=K;do{var Ue=Je.prev,le=Je.next.next;!ne(Ue,le)&&Re(Ue,Je,Je.next,le)&&ee(Ue,le)&&ee(le,Ue)&&(qe.push(Ue.i/Me|0),qe.push(Je.i/Me|0),qe.push(le.i/Me|0),oe(Je),oe(Je.next),Je=K=le),Je=Je.next}while(Je!==K);return de(Je)}function Be(K,qe,Me,Je,Ue,le){var Qe=K;do{for(var lt=Qe.next.next;lt!==Qe.prev;){if(Qe.i!==lt.i&&te(Qe,lt)){var dn=ae(Qe,lt);return Qe=de(Qe,Qe.next),dn=de(dn,dn.next),Fe(Qe,qe,Me,Je,Ue,le,0),void Fe(dn,qe,Me,Je,Ue,le,0)}lt=lt.next}Qe=Qe.next}while(Qe!==K)}function We(K,qe){return K.x-qe.x}function ht(K,qe){var Me=function Wt(K,qe){var Qe,Me=qe,Je=K.x,Ue=K.y,le=-1/0;do{if(Ue<=Me.y&&Ue>=Me.next.y&&Me.next.y!==Me.y){var lt=Me.x+(Ue-Me.y)*(Me.next.x-Me.x)/(Me.next.y-Me.y);if(lt<=Je&&lt>le&&(le=lt,Qe=Me.x<Me.next.x?Me:Me.next,lt===Je))return Qe}Me=Me.next}while(Me!==qe);if(!Qe)return null;var Qn,dn=Qe,Xt=Qe.x,_n=Qe.y,Pn=1/0;Me=Qe;do{Je>=Me.x&&Me.x>=Xt&&Je!==Me.x&&Ce(Ue<_n?Je:le,Ue,Xt,_n,Ue<_n?le:Je,Ue,Me.x,Me.y)&&(Qn=Math.abs(Ue-Me.y)/(Je-Me.x),ee(Me,K)&&(Qn<Pn||Qn===Pn&&(Me.x>Qe.x||Me.x===Qe.x&&Xe(Qe,Me)))&&(Qe=Me,Pn=Qn)),Me=Me.next}while(Me!==dn);return Qe}(K,qe);if(!Me)return qe;var Je=ae(Me,K);return de(Je,Je.next),de(Me,Me.next)}function Xe(K,qe){return Q(K.prev,K,qe.prev)<0&&Q(qe.next,K,K.next)<0}function Bt(K,qe,Me,Je,Ue){return(K=1431655765&((K=858993459&((K=252645135&((K=16711935&((K=(K-Me)*Ue|0)|K<<8))|K<<4))|K<<2))|K<<1))|(qe=1431655765&((qe=858993459&((qe=252645135&((qe=16711935&((qe=(qe-Je)*Ue|0)|qe<<8))|qe<<4))|qe<<2))|qe<<1))<<1}function ce(K){var qe=K,Me=K;do{(qe.x<Me.x||qe.x===Me.x&&qe.y<Me.y)&&(Me=qe),qe=qe.next}while(qe!==K);return Me}function Ce(K,qe,Me,Je,Ue,le,Qe,lt){return(Ue-Qe)*(qe-lt)>=(K-Qe)*(le-lt)&&(K-Qe)*(Je-lt)>=(Me-Qe)*(qe-lt)&&(Me-Qe)*(le-lt)>=(Ue-Qe)*(Je-lt)}function te(K,qe){return K.next.i!==qe.i&&K.prev.i!==qe.i&&!function xe(K,qe){var Me=K;do{if(Me.i!==K.i&&Me.next.i!==K.i&&Me.i!==qe.i&&Me.next.i!==qe.i&&Re(Me,Me.next,K,qe))return!0;Me=Me.next}while(Me!==K);return!1}(K,qe)&&(ee(K,qe)&&ee(qe,K)&&function pe(K,qe){var Me=K,Je=!1,Ue=(K.x+qe.x)/2,le=(K.y+qe.y)/2;do{Me.y>le!=Me.next.y>le&&Me.next.y!==Me.y&&Ue<(Me.next.x-Me.x)*(le-Me.y)/(Me.next.y-Me.y)+Me.x&&(Je=!Je),Me=Me.next}while(Me!==K);return Je}(K,qe)&&(Q(K.prev,K,qe.prev)||Q(K,qe.prev,qe))||ne(K,qe)&&Q(K.prev,K,K.next)>0&&Q(qe.prev,qe,qe.next)>0)}function Q(K,qe,Me){return(qe.y-K.y)*(Me.x-qe.x)-(qe.x-K.x)*(Me.y-qe.y)}function ne(K,qe){return K.x===qe.x&&K.y===qe.y}function Re(K,qe,Me,Je){var Ue=J(Q(K,qe,Me)),le=J(Q(K,qe,Je)),Qe=J(Q(Me,Je,K)),lt=J(Q(Me,Je,qe));return!!(Ue!==le&&Qe!==lt||0===Ue&&ie(K,Me,qe)||0===le&&ie(K,Je,qe)||0===Qe&&ie(Me,K,Je)||0===lt&&ie(Me,qe,Je))}function ie(K,qe,Me){return qe.x<=Math.max(K.x,Me.x)&&qe.x>=Math.min(K.x,Me.x)&&qe.y<=Math.max(K.y,Me.y)&&qe.y>=Math.min(K.y,Me.y)}function J(K){return K>0?1:K<0?-1:0}function ee(K,qe){return Q(K.prev,K,K.next)<0?Q(K,qe,K.next)>=0&&Q(K,K.prev,qe)>=0:Q(K,qe,K.prev)<0||Q(K,K.next,qe)<0}function ae(K,qe){var Me=new je(K.i,K.x,K.y),Je=new je(qe.i,qe.x,qe.y),Ue=K.next,le=qe.prev;return K.next=qe,qe.prev=K,Me.next=Ue,Ue.prev=Me,Je.next=Me,Me.prev=Je,le.next=Je,Je.prev=le,Je}function we(K,qe,Me,Je){var Ue=new je(K,qe,Me);return Je?(Ue.next=Je.next,Ue.prev=Je,Je.next.prev=Ue,Je.next=Ue):(Ue.prev=Ue,Ue.next=Ue),Ue}function oe(K){K.next.prev=K.prev,K.prev.next=K.next,K.prevZ&&(K.prevZ.nextZ=K.nextZ),K.nextZ&&(K.nextZ.prevZ=K.prevZ)}function je(K,qe,Me){this.i=K,this.x=qe,this.y=Me,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Te(K,qe,Me,Je){for(var Ue=0,le=qe,Qe=Me-Je;le<Me;le+=Je)Ue+=(K[Qe]-K[le])*(K[le+1]+K[Qe+1]),Qe=le;return Ue}An.exports=Lt,An.exports.default=Lt,Lt.deviation=function(K,qe,Me,Je){var Ue=qe&&qe.length,Qe=Math.abs(Te(K,0,Ue?qe[0]*Me:K.length,Me));if(Ue)for(var lt=0,dn=qe.length;lt<dn;lt++)Qe-=Math.abs(Te(K,qe[lt]*Me,lt<dn-1?qe[lt+1]*Me:K.length,Me));var Pn=0;for(lt=0;lt<Je.length;lt+=3){var Qn=Je[lt]*Me,jt=Je[lt+1]*Me,mr=Je[lt+2]*Me;Pn+=Math.abs((K[Qn]-K[mr])*(K[jt+1]-K[Qn+1])-(K[Qn]-K[jt])*(K[mr+1]-K[Qn+1]))}return 0===Qe&&0===Pn?0:Math.abs((Pn-Qe)/Qe)},Lt.flatten=function(K){for(var qe=K[0][0].length,Me={vertices:[],holes:[],dimensions:qe},Je=0,Ue=0;Ue<K.length;Ue++){for(var le=0;le<K[Ue].length;le++)for(var Qe=0;Qe<qe;Qe++)Me.vertices.push(K[Ue][le][Qe]);Ue>0&&Me.holes.push(Je+=K[Ue-1].length)}return Me}},238:An=>{"use strict";var Ie=Object.prototype.toString,de=Math.max,tt=function(Ne,We){for(var ht=[],Wt=0;Wt<Ne.length;Wt+=1)ht[Wt]=Ne[Wt];for(var Xe=0;Xe<We.length;Xe+=1)ht[Xe+Ne.length]=We[Xe];return ht};An.exports=function(Ne){var We=this;if("function"!=typeof We||"[object Function]"!==Ie.apply(We))throw new TypeError("Function.prototype.bind called on incompatible "+We);for(var Wt,ht=function(Ne,We){for(var ht=[],Wt=1,Xe=0;Wt<Ne.length;Wt+=1,Xe+=1)ht[Xe]=Ne[Wt];return ht}(arguments),et=de(0,We.length-ht.length),He=[],Bt=0;Bt<et;Bt++)He[Bt]="$"+Bt;if(Wt=Function("binder","return function ("+function(Be,Ne){for(var We="",ht=0;ht<Be.length;ht+=1)We+=Be[ht],ht+1<Be.length&&(We+=",");return We}(He)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof Wt){var Ce=We.apply(this,tt(ht,arguments));return Object(Ce)===Ce?Ce:this}return We.apply(Ne,tt(ht,arguments))}),We.prototype){var ce=function(){};ce.prototype=We.prototype,Wt.prototype=new ce,ce.prototype=null}return Wt}},5333:(An,Lt,Ie)=>{"use strict";var de=Ie(238);An.exports=Function.prototype.bind||de},1552:An=>{"use strict";var Lt=function(){return"string"==typeof function(){}.name},Ie=Object.getOwnPropertyDescriptor;if(Ie)try{Ie([],"length")}catch{Ie=null}Lt.functionsHaveConfigurableNames=function(){if(!Lt()||!Ie)return!1;var tt=Ie(function(){},"name");return!!tt&&!!tt.configurable};var de=Function.prototype.bind;Lt.boundFunctionsHaveNames=function(){return Lt()&&"function"==typeof de&&""!==function(){}.bind().name},An.exports=Lt},3198:(An,Lt,Ie)=>{var de=Ie(3970),Fe=function(Be){this.precision=Be&&Be.precision?Be.precision:17,this.direction=!(!Be||!Be.direction)&&Be.direction,this.pseudoNode=!(!Be||!Be.pseudoNode)&&Be.pseudoNode,this.objectComparator=Be&&Be.objectComparator?Be.objectComparator:me};function tt(Be){return Be.coordinates.map(function(Ne){return{type:Be.type.replace("Multi",""),coordinates:Ne}})}function g(Be,Ne){return Be.hasOwnProperty("coordinates")?Be.coordinates.length===Ne.coordinates.length:Be.length===Ne.length}function me(Be,Ne){return de(Be,Ne,{strict:!0})}Fe.prototype.compare=function(Be,Ne){if(Be.type!==Ne.type||!g(Be,Ne))return!1;switch(Be.type){case"Point":return this.compareCoord(Be.coordinates,Ne.coordinates);case"LineString":return this.compareLine(Be.coordinates,Ne.coordinates,0,!1);case"Polygon":return this.comparePolygon(Be,Ne);case"Feature":return this.compareFeature(Be,Ne);default:if(0===Be.type.indexOf("Multi")){var We=this,ht=tt(Be),Wt=tt(Ne);return ht.every(function(Xe){return this.some(function(et){return We.compare(Xe,et)})},Wt)}}return!1},Fe.prototype.compareCoord=function(Be,Ne){if(Be.length!==Ne.length)return!1;for(var We=0;We<Be.length;We++)if(Be[We].toFixed(this.precision)!==Ne[We].toFixed(this.precision))return!1;return!0},Fe.prototype.compareLine=function(Be,Ne,We,ht){if(!g(Be,Ne))return!1;var Wt=this.pseudoNode?Be:this.removePseudo(Be),Xe=this.pseudoNode?Ne:this.removePseudo(Ne);if(!ht||this.compareCoord(Wt[0],Xe[0])||(Xe=this.fixStartIndex(Xe,Wt))){var et=this.compareCoord(Wt[We],Xe[We]);return this.direction||et?this.comparePath(Wt,Xe):!!this.compareCoord(Wt[We],Xe[Xe.length-(1+We)])&&this.comparePath(Wt.slice().reverse(),Xe)}},Fe.prototype.fixStartIndex=function(Be,Ne){for(var We,ht=-1,Wt=0;Wt<Be.length;Wt++)if(this.compareCoord(Be[Wt],Ne[0])){ht=Wt;break}return ht>=0&&(We=[].concat(Be.slice(ht,Be.length),Be.slice(1,ht+1))),We},Fe.prototype.comparePath=function(Be,Ne){var We=this;return Be.every(function(ht,Wt){return We.compareCoord(ht,this[Wt])},Ne)},Fe.prototype.comparePolygon=function(Be,Ne){if(this.compareLine(Be.coordinates[0],Ne.coordinates[0],1,!0)){var We=Be.coordinates.slice(1,Be.coordinates.length),ht=Ne.coordinates.slice(1,Ne.coordinates.length),Wt=this;return We.every(function(Xe){return this.some(function(et){return Wt.compareLine(Xe,et,1,!0)})},ht)}return!1},Fe.prototype.compareFeature=function(Be,Ne){return!(Be.id!==Ne.id||!this.objectComparator(Be.properties,Ne.properties)||!this.compareBBox(Be,Ne))&&this.compare(Be.geometry,Ne.geometry)},Fe.prototype.compareBBox=function(Be,Ne){return!!(!Be.bbox&&!Ne.bbox||Be.bbox&&Ne.bbox&&this.compareCoord(Be.bbox,Ne.bbox))},Fe.prototype.removePseudo=function(Be){return Be},An.exports=Fe},5665:(An,Lt,Ie)=>{var de=Ie(7571),Fe=Ie(621),tt=Ie(8570),g=Ie(1568).Z,me=tt.featureEach,We=Fe.featureCollection;function ht(Wt){var Xe=new de(Wt);return Xe.insert=function(et){if("Feature"!==et.type)throw new Error("invalid feature");return et.bbox=et.bbox?et.bbox:g(et),de.prototype.insert.call(this,et)},Xe.load=function(et){var He=[];return Array.isArray(et)?et.forEach(function(Bt){if("Feature"!==Bt.type)throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:g(Bt),He.push(Bt)}):me(et,function(Bt){if("Feature"!==Bt.type)throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:g(Bt),He.push(Bt)}),de.prototype.load.call(this,He)},Xe.remove=function(et,He){if("Feature"!==et.type)throw new Error("invalid feature");return et.bbox=et.bbox?et.bbox:g(et),de.prototype.remove.call(this,et,He)},Xe.clear=function(){return de.prototype.clear.call(this)},Xe.search=function(et){var He=de.prototype.search.call(this,this.toBBox(et));return We(He)},Xe.collides=function(et){return de.prototype.collides.call(this,this.toBBox(et))},Xe.all=function(){var et=de.prototype.all.call(this);return We(et)},Xe.toJSON=function(){return de.prototype.toJSON.call(this)},Xe.fromJSON=function(et){return de.prototype.fromJSON.call(this,et)},Xe.toBBox=function(et){var He;if(et.bbox)He=et.bbox;else if(Array.isArray(et)&&4===et.length)He=et;else if(Array.isArray(et)&&6===et.length)He=[et[0],et[1],et[3],et[4]];else if("Feature"===et.type)He=g(et);else{if("FeatureCollection"!==et.type)throw new Error("invalid geojson");He=g(et)}return{minX:He[0],minY:He[1],maxX:He[2],maxY:He[3]}},Xe}An.exports=ht,An.exports.default=ht},7571:function(An){An.exports=function(){"use strict";function Lt(ce,Ce,te,Q,ne){!function Re(ie,J,xe,ee,pe){for(;ee>xe;){if(ee-xe>600){var ae=ee-xe+1,we=J-xe+1,oe=Math.log(ae),je=.5*Math.exp(2*oe/3),Te=.5*Math.sqrt(oe*je*(ae-je)/ae)*(we-ae/2<0?-1:1);Re(ie,J,Math.max(xe,Math.floor(J-we*je/ae+Te)),Math.min(ee,Math.floor(J+(ae-we)*je/ae+Te)),pe)}var Me=ie[J],Je=xe,Ue=ee;for(Ie(ie,xe,J),pe(ie[ee],Me)>0&&Ie(ie,xe,ee);Je<Ue;){for(Ie(ie,Je,Ue),Je++,Ue--;pe(ie[Je],Me)<0;)Je++;for(;pe(ie[Ue],Me)>0;)Ue--}0===pe(ie[xe],Me)?Ie(ie,xe,Ue):Ie(ie,++Ue,ee),Ue<=J&&(xe=Ue+1),J<=Ue&&(ee=Ue-1)}}(ce,Ce,te||0,Q||ce.length-1,ne||de)}function Ie(ce,Ce,te){var Q=ce[Ce];ce[Ce]=ce[te],ce[te]=Q}function de(ce,Ce){return ce<Ce?-1:ce>Ce?1:0}var Fe=function(ce){void 0===ce&&(ce=9),this._maxEntries=Math.max(4,ce),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function tt(ce,Ce,te){if(!te)return Ce.indexOf(ce);for(var Q=0;Q<Ce.length;Q++)if(te(ce,Ce[Q]))return Q;return-1}function g(ce,Ce){me(ce,0,ce.children.length,Ce,ce)}function me(ce,Ce,te,Q,ne){ne||(ne=He(null)),ne.minX=1/0,ne.minY=1/0,ne.maxX=-1/0,ne.maxY=-1/0;for(var Re=Ce;Re<te;Re++){var ie=ce.children[Re];Be(ne,ce.leaf?Q(ie):ie)}return ne}function Be(ce,Ce){return ce.minX=Math.min(ce.minX,Ce.minX),ce.minY=Math.min(ce.minY,Ce.minY),ce.maxX=Math.max(ce.maxX,Ce.maxX),ce.maxY=Math.max(ce.maxY,Ce.maxY),ce}function Ne(ce,Ce){return ce.minX-Ce.minX}function We(ce,Ce){return ce.minY-Ce.minY}function ht(ce){return(ce.maxX-ce.minX)*(ce.maxY-ce.minY)}function Wt(ce){return ce.maxX-ce.minX+(ce.maxY-ce.minY)}function Xe(ce,Ce){return ce.minX<=Ce.minX&&ce.minY<=Ce.minY&&Ce.maxX<=ce.maxX&&Ce.maxY<=ce.maxY}function et(ce,Ce){return Ce.minX<=ce.maxX&&Ce.minY<=ce.maxY&&Ce.maxX>=ce.minX&&Ce.maxY>=ce.minY}function He(ce){return{children:ce,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bt(ce,Ce,te,Q,ne){for(var Re=[Ce,te];Re.length;)if(!((te=Re.pop())-(Ce=Re.pop())<=Q)){var ie=Ce+Math.ceil((te-Ce)/Q/2)*Q;Lt(ce,ie,Ce,te,ne),Re.push(Ce,ie,ie,te)}}return Fe.prototype.all=function(){return this._all(this.data,[])},Fe.prototype.search=function(ce){var Ce=this.data,te=[];if(!et(ce,Ce))return te;for(var Q=this.toBBox,ne=[];Ce;){for(var Re=0;Re<Ce.children.length;Re++){var ie=Ce.children[Re],J=Ce.leaf?Q(ie):ie;et(ce,J)&&(Ce.leaf?te.push(ie):Xe(ce,J)?this._all(ie,te):ne.push(ie))}Ce=ne.pop()}return te},Fe.prototype.collides=function(ce){var Ce=this.data;if(!et(ce,Ce))return!1;for(var te=[];Ce;){for(var Q=0;Q<Ce.children.length;Q++){var ne=Ce.children[Q],Re=Ce.leaf?this.toBBox(ne):ne;if(et(ce,Re)){if(Ce.leaf||Xe(ce,Re))return!0;te.push(ne)}}Ce=te.pop()}return!1},Fe.prototype.load=function(ce){if(!ce||!ce.length)return this;if(ce.length<this._minEntries){for(var Ce=0;Ce<ce.length;Ce++)this.insert(ce[Ce]);return this}var te=this._build(ce.slice(),0,ce.length-1,0);if(this.data.children.length)if(this.data.height===te.height)this._splitRoot(this.data,te);else{if(this.data.height<te.height){var Q=this.data;this.data=te,te=Q}this._insert(te,this.data.height-te.height-1,!0)}else this.data=te;return this},Fe.prototype.insert=function(ce){return ce&&this._insert(ce,this.data.height-1),this},Fe.prototype.clear=function(){return this.data=He([]),this},Fe.prototype.remove=function(ce,Ce){if(!ce)return this;for(var te,Q,ne,Re=this.data,ie=this.toBBox(ce),J=[],xe=[];Re||J.length;){if(Re||(Re=J.pop(),Q=J[J.length-1],te=xe.pop(),ne=!0),Re.leaf){var ee=tt(ce,Re.children,Ce);if(-1!==ee)return Re.children.splice(ee,1),J.push(Re),this._condense(J),this}ne||Re.leaf||!Xe(Re,ie)?Q?(te++,Re=Q.children[te],ne=!1):Re=null:(J.push(Re),xe.push(te),te=0,Q=Re,Re=Re.children[0])}return this},Fe.prototype.toBBox=function(ce){return ce},Fe.prototype.compareMinX=function(ce,Ce){return ce.minX-Ce.minX},Fe.prototype.compareMinY=function(ce,Ce){return ce.minY-Ce.minY},Fe.prototype.toJSON=function(){return this.data},Fe.prototype.fromJSON=function(ce){return this.data=ce,this},Fe.prototype._all=function(ce,Ce){for(var te=[];ce;)ce.leaf?Ce.push.apply(Ce,ce.children):te.push.apply(te,ce.children),ce=te.pop();return Ce},Fe.prototype._build=function(ce,Ce,te,Q){var ne,Re=te-Ce+1,ie=this._maxEntries;if(Re<=ie)return g(ne=He(ce.slice(Ce,te+1)),this.toBBox),ne;Q||(Q=Math.ceil(Math.log(Re)/Math.log(ie)),ie=Math.ceil(Re/Math.pow(ie,Q-1))),(ne=He([])).leaf=!1,ne.height=Q;var J=Math.ceil(Re/ie),xe=J*Math.ceil(Math.sqrt(ie));Bt(ce,Ce,te,xe,this.compareMinX);for(var ee=Ce;ee<=te;ee+=xe){var pe=Math.min(ee+xe-1,te);Bt(ce,ee,pe,J,this.compareMinY);for(var ae=ee;ae<=pe;ae+=J){var we=Math.min(ae+J-1,pe);ne.children.push(this._build(ce,ae,we,Q-1))}}return g(ne,this.toBBox),ne},Fe.prototype._chooseSubtree=function(ce,Ce,te,Q){for(;Q.push(Ce),!Ce.leaf&&Q.length-1!==te;){for(var ne=1/0,Re=1/0,ie=void 0,J=0;J<Ce.children.length;J++){var xe=Ce.children[J],ee=ht(xe),pe=(ae=ce,we=xe,(Math.max(we.maxX,ae.maxX)-Math.min(we.minX,ae.minX))*(Math.max(we.maxY,ae.maxY)-Math.min(we.minY,ae.minY))-ee);pe<Re?(Re=pe,ne=ee<ne?ee:ne,ie=xe):pe===Re&&ee<ne&&(ne=ee,ie=xe)}Ce=ie||Ce.children[0]}var ae,we;return Ce},Fe.prototype._insert=function(ce,Ce,te){var Q=te?ce:this.toBBox(ce),ne=[],Re=this._chooseSubtree(Q,this.data,Ce,ne);for(Re.children.push(ce),Be(Re,Q);Ce>=0&&ne[Ce].children.length>this._maxEntries;)this._split(ne,Ce),Ce--;this._adjustParentBBoxes(Q,ne,Ce)},Fe.prototype._split=function(ce,Ce){var te=ce[Ce],Q=te.children.length,ne=this._minEntries;this._chooseSplitAxis(te,ne,Q);var Re=this._chooseSplitIndex(te,ne,Q),ie=He(te.children.splice(Re,te.children.length-Re));ie.height=te.height,ie.leaf=te.leaf,g(te,this.toBBox),g(ie,this.toBBox),Ce?ce[Ce-1].children.push(ie):this._splitRoot(te,ie)},Fe.prototype._splitRoot=function(ce,Ce){this.data=He([ce,Ce]),this.data.height=ce.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},Fe.prototype._chooseSplitIndex=function(ce,Ce,te){for(var Q,ne,Re,ie,J,xe,ee,pe=1/0,ae=1/0,we=Ce;we<=te-Ce;we++){var oe=me(ce,0,we,this.toBBox),je=me(ce,we,te,this.toBBox),Te=(ne=oe,Re=je,void 0,void 0,void 0,void 0,ie=Math.max(ne.minX,Re.minX),J=Math.max(ne.minY,Re.minY),xe=Math.min(ne.maxX,Re.maxX),ee=Math.min(ne.maxY,Re.maxY),Math.max(0,xe-ie)*Math.max(0,ee-J)),K=ht(oe)+ht(je);Te<pe?(pe=Te,Q=we,ae=K<ae?K:ae):Te===pe&&K<ae&&(ae=K,Q=we)}return Q||te-Ce},Fe.prototype._chooseSplitAxis=function(ce,Ce,te){var Q=ce.leaf?this.compareMinX:Ne,ne=ce.leaf?this.compareMinY:We;this._allDistMargin(ce,Ce,te,Q)<this._allDistMargin(ce,Ce,te,ne)&&ce.children.sort(Q)},Fe.prototype._allDistMargin=function(ce,Ce,te,Q){ce.children.sort(Q);for(var ne=this.toBBox,Re=me(ce,0,Ce,ne),ie=me(ce,te-Ce,te,ne),J=Wt(Re)+Wt(ie),xe=Ce;xe<te-Ce;xe++){var ee=ce.children[xe];Be(Re,ce.leaf?ne(ee):ee),J+=Wt(Re)}for(var pe=te-Ce-1;pe>=Ce;pe--){var ae=ce.children[pe];Be(ie,ce.leaf?ne(ae):ae),J+=Wt(ie)}return J},Fe.prototype._adjustParentBBoxes=function(ce,Ce,te){for(var Q=te;Q>=0;Q--)Be(Ce[Q],ce)},Fe.prototype._condense=function(ce){for(var Ce=ce.length-1,te=void 0;Ce>=0;Ce--)0===ce[Ce].children.length?Ce>0?(te=ce[Ce-1].children).splice(te.indexOf(ce[Ce]),1):this.clear():g(ce[Ce],this.toBBox)},Fe}()},491:(An,Lt,Ie)=>{"use strict";var de,Fe=SyntaxError,tt=Function,g=TypeError,me=function(je){try{return tt('"use strict"; return ('+je+").constructor;")()}catch{}},Be=Object.getOwnPropertyDescriptor;if(Be)try{Be({},"")}catch{Be=null}var Ne=function(){throw new g},We=Be?function(){try{return Ne}catch{try{return Be(arguments,"callee").get}catch{return Ne}}}():Ne,ht=Ie(6152)(),Wt=Ie(9028)(),Xe=Object.getPrototypeOf||(Wt?function(je){return je.__proto__}:null),et={},He=typeof Uint8Array>"u"||!Xe?de:Xe(Uint8Array),Bt={"%AggregateError%":typeof AggregateError>"u"?de:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?de:ArrayBuffer,"%ArrayIteratorPrototype%":ht&&Xe?Xe([][Symbol.iterator]()):de,"%AsyncFromSyncIteratorPrototype%":de,"%AsyncFunction%":et,"%AsyncGenerator%":et,"%AsyncGeneratorFunction%":et,"%AsyncIteratorPrototype%":et,"%Atomics%":typeof Atomics>"u"?de:Atomics,"%BigInt%":typeof BigInt>"u"?de:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?de:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?de:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?de:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?de:Float32Array,"%Float64Array%":typeof Float64Array>"u"?de:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?de:FinalizationRegistry,"%Function%":tt,"%GeneratorFunction%":et,"%Int8Array%":typeof Int8Array>"u"?de:Int8Array,"%Int16Array%":typeof Int16Array>"u"?de:Int16Array,"%Int32Array%":typeof Int32Array>"u"?de:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ht&&Xe?Xe(Xe([][Symbol.iterator]())):de,"%JSON%":"object"==typeof JSON?JSON:de,"%Map%":typeof Map>"u"?de:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ht||!Xe?de:Xe((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?de:Promise,"%Proxy%":typeof Proxy>"u"?de:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?de:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?de:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ht||!Xe?de:Xe((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?de:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ht&&Xe?Xe(""[Symbol.iterator]()):de,"%Symbol%":ht?Symbol:de,"%SyntaxError%":Fe,"%ThrowTypeError%":We,"%TypedArray%":He,"%TypeError%":g,"%Uint8Array%":typeof Uint8Array>"u"?de:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?de:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?de:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?de:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?de:WeakMap,"%WeakRef%":typeof WeakRef>"u"?de:WeakRef,"%WeakSet%":typeof WeakSet>"u"?de:WeakSet};if(Xe)try{null.error}catch(je){var ce=Xe(Xe(je));Bt["%Error.prototype%"]=ce}var Ce=function je(Te){var K;if("%AsyncFunction%"===Te)K=me("async function () {}");else if("%GeneratorFunction%"===Te)K=me("function* () {}");else if("%AsyncGeneratorFunction%"===Te)K=me("async function* () {}");else if("%AsyncGenerator%"===Te){var qe=je("%AsyncGeneratorFunction%");qe&&(K=qe.prototype)}else if("%AsyncIteratorPrototype%"===Te){var Me=je("%AsyncGenerator%");Me&&Xe&&(K=Xe(Me.prototype))}return Bt[Te]=K,K},te={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Q=Ie(5333),ne=Ie(836),Re=Q.call(Function.call,Array.prototype.concat),ie=Q.call(Function.apply,Array.prototype.splice),J=Q.call(Function.call,String.prototype.replace),xe=Q.call(Function.call,String.prototype.slice),ee=Q.call(Function.call,RegExp.prototype.exec),pe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ae=/\\(\\)?/g,oe=function(Te,K){var Me,qe=Te;if(ne(te,qe)&&(qe="%"+(Me=te[qe])[0]+"%"),ne(Bt,qe)){var Je=Bt[qe];if(Je===et&&(Je=Ce(qe)),typeof Je>"u"&&!K)throw new g("intrinsic "+Te+" exists, but is not available. Please file an issue!");return{alias:Me,name:qe,value:Je}}throw new Fe("intrinsic "+Te+" does not exist!")};An.exports=function(Te,K){if("string"!=typeof Te||0===Te.length)throw new g("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof K)throw new g('"allowMissing" argument must be a boolean');if(null===ee(/^%?[^%]*%?$/,Te))throw new Fe("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var qe=function(Te){var K=xe(Te,0,1),qe=xe(Te,-1);if("%"===K&&"%"!==qe)throw new Fe("invalid intrinsic syntax, expected closing `%`");if("%"===qe&&"%"!==K)throw new Fe("invalid intrinsic syntax, expected opening `%`");var Me=[];return J(Te,pe,function(Je,Ue,le,Qe){Me[Me.length]=le?J(Qe,ae,"$1"):Ue||Je}),Me}(Te),Me=qe.length>0?qe[0]:"",Je=oe("%"+Me+"%",K),Ue=Je.name,le=Je.value,Qe=!1,lt=Je.alias;lt&&(Me=lt[0],ie(qe,Re([0,1],lt)));for(var dn=1,Xt=!0;dn<qe.length;dn+=1){var _n=qe[dn],Pn=xe(_n,0,1),Qn=xe(_n,-1);if(('"'===Pn||"'"===Pn||"`"===Pn||'"'===Qn||"'"===Qn||"`"===Qn)&&Pn!==Qn)throw new Fe("property names with quotes must have matching quotes");if(("constructor"===_n||!Xt)&&(Qe=!0),ne(Bt,Ue="%"+(Me+="."+_n)+"%"))le=Bt[Ue];else if(null!=le){if(!(_n in le)){if(!K)throw new g("base intrinsic for "+Te+" exists, but the property is not available.");return}if(Be&&dn+1>=qe.length){var jt=Be(le,_n);le=(Xt=!!jt)&&"get"in jt&&!("originalValue"in jt.get)?jt.get:le[_n]}else Xt=ne(le,_n),le=le[_n];Xt&&!Qe&&(Bt[Ue]=le)}}return le}},9262:(An,Lt,Ie)=>{"use strict";var Fe=Ie(491)("%Object.getOwnPropertyDescriptor%",!0);if(Fe)try{Fe([],"length")}catch{Fe=null}An.exports=Fe},2486:(An,Lt,Ie)=>{"use strict";var Fe=Ie(491)("%Object.defineProperty%",!0),tt=function(){if(Fe)try{return Fe({},"a",{value:1}),!0}catch{return!1}return!1};tt.hasArrayLengthDefineBug=function(){if(!tt())return null;try{return 1!==Fe([],"length",{value:1}).length}catch{return!0}},An.exports=tt},9028:An=>{"use strict";var Lt={foo:{}},Ie=Object;An.exports=function(){return{__proto__:Lt}.foo===Lt.foo&&!({__proto__:null}instanceof Ie)}},6152:(An,Lt,Ie)=>{"use strict";var de=typeof Symbol<"u"&&Symbol,Fe=Ie(5441);An.exports=function(){return"function"==typeof de&&"function"==typeof Symbol&&"symbol"==typeof de("foo")&&"symbol"==typeof Symbol("bar")&&Fe()}},5441:An=>{"use strict";An.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Ie={},de=Symbol("test"),Fe=Object(de);if("string"==typeof de||"[object Symbol]"!==Object.prototype.toString.call(de)||"[object Symbol]"!==Object.prototype.toString.call(Fe))return!1;for(de in Ie[de]=42,Ie)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Ie).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Ie).length)return!1;var g=Object.getOwnPropertySymbols(Ie);if(1!==g.length||g[0]!==de||!Object.prototype.propertyIsEnumerable.call(Ie,de))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var me=Object.getOwnPropertyDescriptor(Ie,de);if(42!==me.value||!0!==me.enumerable)return!1}return!0}},8041:(An,Lt,Ie)=>{"use strict";var de=Ie(5441);An.exports=function(){return de()&&!!Symbol.toStringTag}},836:(An,Lt,Ie)=>{"use strict";var de=Function.prototype.call,Fe=Object.prototype.hasOwnProperty,tt=Ie(5333);An.exports=tt.call(de,Fe)},8147:(An,Lt,Ie)=>{"use strict";var de=Ie(8041)(),tt=Ie(1098)("Object.prototype.toString"),g=function(We){return!(de&&We&&"object"==typeof We&&Symbol.toStringTag in We)&&"[object Arguments]"===tt(We)},me=function(We){return!!g(We)||null!==We&&"object"==typeof We&&"number"==typeof We.length&&We.length>=0&&"[object Array]"!==tt(We)&&"[object Function]"===tt(We.callee)},Be=function(){return g(arguments)}();g.isLegacyArguments=me,An.exports=Be?g:me},2365:(An,Lt,Ie)=>{"use strict";var de=Date.prototype.getDay,tt=Object.prototype.toString,me=Ie(8041)();An.exports=function(Ne){return"object"==typeof Ne&&null!==Ne&&(me?function(Ne){try{return de.call(Ne),!0}catch{return!1}}(Ne):"[object Date]"===tt.call(Ne))}},4720:(An,Lt,Ie)=>{"use strict";var tt,g,me,Be,de=Ie(1098),Fe=Ie(8041)();if(Fe){tt=de("Object.prototype.hasOwnProperty"),g=de("RegExp.prototype.exec"),me={};var Ne=function(){throw me};Be={toString:Ne,valueOf:Ne},"symbol"==typeof Symbol.toPrimitive&&(Be[Symbol.toPrimitive]=Ne)}var We=de("Object.prototype.toString"),ht=Object.getOwnPropertyDescriptor;An.exports=Fe?function(et){if(!et||"object"!=typeof et)return!1;var He=ht(et,"lastIndex");if(!He||!tt(He,"value"))return!1;try{g(et,Be)}catch(ce){return ce===me}}:function(et){return!(!et||"object"!=typeof et&&"function"!=typeof et)&&"[object RegExp]"===We(et)}},9422:An=>{An.exports=function Fe(tt,g,me){function Be(ht,Wt){if(!g[ht]){if(!tt[ht]){if(Ne)return Ne(ht,!0);var et=new Error("Cannot find module '"+ht+"'");throw et.code="MODULE_NOT_FOUND",et}var He=g[ht]={exports:{}};tt[ht][0].call(He.exports,function(Bt){return Be(tt[ht][1][Bt]||Bt)},He,He.exports,Fe,tt,g,me)}return g[ht].exports}for(var Ne=void 0,We=0;We<me.length;We++)Be(me[We]);return Be}({1:[function(Fe,tt,g){(function(me){"use strict";var Ne,Be=me.MutationObserver||me.WebKitMutationObserver;if(Be){var We=0,ht=new Be(Bt),Wt=me.document.createTextNode("");ht.observe(Wt,{characterData:!0}),Ne=function(){Wt.data=We=++We%2}}else if(!me.setImmediate&&typeof me.MessageChannel<"u"){var Xe=new me.MessageChannel;Xe.port1.onmessage=Bt,Ne=function(){Xe.port2.postMessage(0)}}else Ne="document"in me&&"onreadystatechange"in me.document.createElement("script")?function(){var Ce=me.document.createElement("script");Ce.onreadystatechange=function(){Bt(),Ce.onreadystatechange=null,Ce.parentNode.removeChild(Ce),Ce=null},me.document.documentElement.appendChild(Ce)}:function(){setTimeout(Bt,0)};var et,He=[];function Bt(){et=!0;for(var Ce,te,Q=He.length;Q;){for(te=He,He=[],Ce=-1;++Ce<Q;)te[Ce]();Q=He.length}et=!1}tt.exports=function ce(Ce){1===He.push(Ce)&&!et&&Ne()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(Fe,tt,g){"use strict";var me=Fe(1);function Be(){}var Ne={},We=["REJECTED"],ht=["FULFILLED"],Wt=["PENDING"];function Xe(ie){if("function"!=typeof ie)throw new TypeError("resolver must be a function");this.state=Wt,this.queue=[],this.outcome=void 0,ie!==Be&&ce(this,ie)}function et(ie,J,xe){this.promise=ie,"function"==typeof J&&(this.onFulfilled=J,this.callFulfilled=this.otherCallFulfilled),"function"==typeof xe&&(this.onRejected=xe,this.callRejected=this.otherCallRejected)}function He(ie,J,xe){me(function(){var ee;try{ee=J(xe)}catch(pe){return Ne.reject(ie,pe)}ee===ie?Ne.reject(ie,new TypeError("Cannot resolve promise with itself")):Ne.resolve(ie,ee)})}function Bt(ie){var J=ie&&ie.then;if(ie&&("object"==typeof ie||"function"==typeof ie)&&"function"==typeof J)return function(){J.apply(ie,arguments)}}function ce(ie,J){var xe=!1;function ee(oe){xe||(xe=!0,Ne.reject(ie,oe))}function pe(oe){xe||(xe=!0,Ne.resolve(ie,oe))}var we=Ce(function ae(){J(pe,ee)});"error"===we.status&&ee(we.value)}function Ce(ie,J){var xe={};try{xe.value=ie(J),xe.status="success"}catch(ee){xe.status="error",xe.value=ee}return xe}tt.exports=Xe,Xe.prototype.catch=function(ie){return this.then(null,ie)},Xe.prototype.then=function(ie,J){if("function"!=typeof ie&&this.state===ht||"function"!=typeof J&&this.state===We)return this;var xe=new this.constructor(Be);return this.state!==Wt?He(xe,this.state===ht?ie:J,this.outcome):this.queue.push(new et(xe,ie,J)),xe},et.prototype.callFulfilled=function(ie){Ne.resolve(this.promise,ie)},et.prototype.otherCallFulfilled=function(ie){He(this.promise,this.onFulfilled,ie)},et.prototype.callRejected=function(ie){Ne.reject(this.promise,ie)},et.prototype.otherCallRejected=function(ie){He(this.promise,this.onRejected,ie)},Ne.resolve=function(ie,J){var xe=Ce(Bt,J);if("error"===xe.status)return Ne.reject(ie,xe.value);var ee=xe.value;if(ee)ce(ie,ee);else{ie.state=ht,ie.outcome=J;for(var pe=-1,ae=ie.queue.length;++pe<ae;)ie.queue[pe].callFulfilled(J)}return ie},Ne.reject=function(ie,J){ie.state=We,ie.outcome=J;for(var xe=-1,ee=ie.queue.length;++xe<ee;)ie.queue[xe].callRejected(J);return ie},Xe.resolve=function te(ie){return ie instanceof this?ie:Ne.resolve(new this(Be),ie)},Xe.reject=function Q(ie){var J=new this(Be);return Ne.reject(J,ie)},Xe.all=function ne(ie){var J=this;if("[object Array]"!==Object.prototype.toString.call(ie))return this.reject(new TypeError("must be an array"));var xe=ie.length,ee=!1;if(!xe)return this.resolve([]);for(var pe=new Array(xe),ae=0,we=-1,oe=new this(Be);++we<xe;)je(ie[we],we);return oe;function je(Te,K){J.resolve(Te).then(function qe(Me){pe[K]=Me,++ae===xe&&!ee&&(ee=!0,Ne.resolve(oe,pe))},function(Me){ee||(ee=!0,Ne.reject(oe,Me))})}},Xe.race=function Re(ie){var J=this;if("[object Array]"!==Object.prototype.toString.call(ie))return this.reject(new TypeError("must be an array"));var xe=ie.length,ee=!1;if(!xe)return this.resolve([]);for(var pe=-1,ae=new this(Be);++pe<xe;)J.resolve(ie[pe]).then(function(je){ee||(ee=!0,Ne.resolve(ae,je))},function(je){ee||(ee=!0,Ne.reject(ae,je))});return ae}},{1:1}],3:[function(Fe,tt,g){(function(me){"use strict";"function"!=typeof me.Promise&&(me.Promise=Fe(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(Fe,tt,g){"use strict";var me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ze){return typeof Ze}:function(Ze){return Ze&&"function"==typeof Symbol&&Ze.constructor===Symbol&&Ze!==Symbol.prototype?"symbol":typeof Ze};var We=function Ne(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function Wt(Ze,$t){Ze=Ze||[],$t=$t||{};try{return new Blob(Ze,$t)}catch(Nt){if("TypeError"!==Nt.name)throw Nt;for(var rt=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),Tt=0;Tt<Ze.length;Tt+=1)rt.append(Ze[Tt]);return rt.getBlob($t.type)}}typeof Promise>"u"&&Fe(3);var Xe=Promise;function et(Ze,$t){$t&&Ze.then(function(yt){$t(null,yt)},function(yt){$t(yt)})}function He(Ze,$t,yt){"function"==typeof $t&&Ze.then($t),"function"==typeof yt&&Ze.catch(yt)}function Bt(Ze){return"string"!=typeof Ze&&(console.warn(Ze+" used as a key, but it is not a string."),Ze=String(Ze)),Ze}function ce(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var Ce="local-forage-detect-blob-support",te=void 0,Q={},ne=Object.prototype.toString,Re="readonly",ie="readwrite";function J(Ze){for(var $t=Ze.length,yt=new ArrayBuffer($t),rt=new Uint8Array(yt),Tt=0;Tt<$t;Tt++)rt[Tt]=Ze.charCodeAt(Tt);return yt}function ee(Ze){return"boolean"==typeof te?Xe.resolve(te):function xe(Ze){return new Xe(function($t){var yt=Ze.transaction(Ce,ie),rt=Wt([""]);yt.objectStore(Ce).put(rt,"key"),yt.onabort=function(Tt){Tt.preventDefault(),Tt.stopPropagation(),$t(!1)},yt.oncomplete=function(){var Tt=navigator.userAgent.match(/Chrome\/(\d+)/),Nt=navigator.userAgent.match(/Edge\//);$t(Nt||!Tt||parseInt(Tt[1],10)>=43)}}).catch(function(){return!1})}(Ze).then(function($t){return te=$t})}function pe(Ze){var $t=Q[Ze.name],yt={};yt.promise=new Xe(function(rt,Tt){yt.resolve=rt,yt.reject=Tt}),$t.deferredOperations.push(yt),$t.dbReady=$t.dbReady?$t.dbReady.then(function(){return yt.promise}):yt.promise}function ae(Ze){var yt=Q[Ze.name].deferredOperations.pop();if(yt)return yt.resolve(),yt.promise}function we(Ze,$t){var rt=Q[Ze.name].deferredOperations.pop();if(rt)return rt.reject($t),rt.promise}function oe(Ze,$t){return new Xe(function(yt,rt){if(Q[Ze.name]=Q[Ze.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},Ze.db){if(!$t)return yt(Ze.db);pe(Ze),Ze.db.close()}var Tt=[Ze.name];$t&&Tt.push(Ze.version);var Nt=We.open.apply(We,Tt);$t&&(Nt.onupgradeneeded=function(ue){var ye=Nt.result;try{ye.createObjectStore(Ze.storeName),ue.oldVersion<=1&&ye.createObjectStore(Ce)}catch(nt){if("ConstraintError"!==nt.name)throw nt;console.warn('The database "'+Ze.name+'" has been upgraded from version '+ue.oldVersion+" to version "+ue.newVersion+', but the storage "'+Ze.storeName+'" already exists.')}}),Nt.onerror=function(ue){ue.preventDefault(),rt(Nt.error)},Nt.onsuccess=function(){var ue=Nt.result;ue.onversionchange=function(ye){ye.target.close()},yt(ue),ae(Ze)}})}function je(Ze){return oe(Ze,!1)}function Te(Ze){return oe(Ze,!0)}function K(Ze,$t){if(!Ze.db)return!0;var yt=!Ze.db.objectStoreNames.contains(Ze.storeName),Tt=Ze.version>Ze.db.version;if(Ze.version<Ze.db.version&&(Ze.version!==$t&&console.warn('The database "'+Ze.name+"\" can't be downgraded from version "+Ze.db.version+" to version "+Ze.version+"."),Ze.version=Ze.db.version),Tt||yt){if(yt){var Nt=Ze.db.version+1;Nt>Ze.version&&(Ze.version=Nt)}return!0}return!1}function Me(Ze){return Wt([J(atob(Ze.data))],{type:Ze.type})}function Je(Ze){return Ze&&Ze.__local_forage_encoded_blob}function Ue(Ze){var $t=this,yt=$t._initReady().then(function(){var rt=Q[$t._dbInfo.name];if(rt&&rt.dbReady)return rt.dbReady});return He(yt,Ze,Ze),yt}function Qe(Ze,$t,yt,rt){void 0===rt&&(rt=1);try{var Tt=Ze.db.transaction(Ze.storeName,$t);yt(null,Tt)}catch(Nt){if(rt>0&&(!Ze.db||"InvalidStateError"===Nt.name||"NotFoundError"===Nt.name))return Xe.resolve().then(function(){if(!Ze.db||"NotFoundError"===Nt.name&&!Ze.db.objectStoreNames.contains(Ze.storeName)&&Ze.version<=Ze.db.version)return Ze.db&&(Ze.version=Ze.db.version+1),Te(Ze)}).then(function(){return function le(Ze){pe(Ze);for(var $t=Q[Ze.name],yt=$t.forages,rt=0;rt<yt.length;rt++){var Tt=yt[rt];Tt._dbInfo.db&&(Tt._dbInfo.db.close(),Tt._dbInfo.db=null)}return Ze.db=null,je(Ze).then(function(Nt){return Ze.db=Nt,K(Ze)?Te(Ze):Nt}).then(function(Nt){Ze.db=$t.db=Nt;for(var ue=0;ue<yt.length;ue++)yt[ue]._dbInfo.db=Nt}).catch(function(Nt){throw we(Ze,Nt),Nt})}(Ze).then(function(){Qe(Ze,$t,yt,rt-1)})}).catch(yt);yt(Nt)}}var Ft={_driver:"asyncStorage",_initStorage:function dn(Ze){var $t=this,yt={db:null};if(Ze)for(var rt in Ze)yt[rt]=Ze[rt];var Tt=Q[yt.name];Tt||(Q[yt.name]=Tt={forages:[],db:null,dbReady:null,deferredOperations:[]}),Tt.forages.push($t),$t._initReady||($t._initReady=$t.ready,$t.ready=Ue);var Nt=[];function ue(){return Xe.resolve()}for(var ye=0;ye<Tt.forages.length;ye++){var nt=Tt.forages[ye];nt!==$t&&Nt.push(nt._initReady().catch(ue))}var xt=Tt.forages.slice(0);return Xe.all(Nt).then(function(){return yt.db=Tt.db,je(yt)}).then(function(Le){return yt.db=Le,K(yt,$t._defaultConfig.version)?Te(yt):Le}).then(function(Le){yt.db=Tt.db=Le,$t._dbInfo=yt;for(var dt=0;dt<xt.length;dt++){var Rt=xt[dt];Rt!==$t&&(Rt._dbInfo.db=yt.db,Rt._dbInfo.version=yt.version)}})},_support:function ht(){try{if(!We||!We.open)return!1;var Ze=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),$t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!Ze||$t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function _n(Ze,$t){var yt=this,rt=new Xe(function(Tt,Nt){yt.ready().then(function(){Qe(yt._dbInfo,Re,function(ue,ye){if(ue)return Nt(ue);try{var xt=ye.objectStore(yt._dbInfo.storeName).openCursor(),Le=1;xt.onsuccess=function(){var dt=xt.result;if(dt){var Rt=dt.value;Je(Rt)&&(Rt=Me(Rt));var sn=Ze(Rt,dt.key,Le++);void 0!==sn?Tt(sn):dt.continue()}else Tt()},xt.onerror=function(){Nt(xt.error)}}catch(dt){Nt(dt)}})}).catch(Nt)});return et(rt,$t),rt},getItem:function Xt(Ze,$t){var yt=this;Ze=Bt(Ze);var rt=new Xe(function(Tt,Nt){yt.ready().then(function(){Qe(yt._dbInfo,Re,function(ue,ye){if(ue)return Nt(ue);try{var xt=ye.objectStore(yt._dbInfo.storeName).get(Ze);xt.onsuccess=function(){var Le=xt.result;void 0===Le&&(Le=null),Je(Le)&&(Le=Me(Le)),Tt(Le)},xt.onerror=function(){Nt(xt.error)}}catch(Le){Nt(Le)}})}).catch(Nt)});return et(rt,$t),rt},setItem:function Pn(Ze,$t,yt){var rt=this;Ze=Bt(Ze);var Tt=new Xe(function(Nt,ue){var ye;rt.ready().then(function(){return ye=rt._dbInfo,"[object Blob]"===ne.call($t)?ee(ye.db).then(function(nt){return nt?$t:function qe(Ze){return new Xe(function($t,yt){var rt=new FileReader;rt.onerror=yt,rt.onloadend=function(Tt){var Nt=btoa(Tt.target.result||"");$t({__local_forage_encoded_blob:!0,data:Nt,type:Ze.type})},rt.readAsBinaryString(Ze)})}($t)}):$t}).then(function(nt){Qe(rt._dbInfo,ie,function(xt,Le){if(xt)return ue(xt);try{var dt=Le.objectStore(rt._dbInfo.storeName);null===nt&&(nt=void 0);var Rt=dt.put(nt,Ze);Le.oncomplete=function(){void 0===nt&&(nt=null),Nt(nt)},Le.onabort=Le.onerror=function(){ue(Rt.error?Rt.error:Rt.transaction.error)}}catch(sn){ue(sn)}})}).catch(ue)});return et(Tt,yt),Tt},removeItem:function Qn(Ze,$t){var yt=this;Ze=Bt(Ze);var rt=new Xe(function(Tt,Nt){yt.ready().then(function(){Qe(yt._dbInfo,ie,function(ue,ye){if(ue)return Nt(ue);try{var xt=ye.objectStore(yt._dbInfo.storeName).delete(Ze);ye.oncomplete=function(){Tt()},ye.onerror=function(){Nt(xt.error)},ye.onabort=function(){Nt(xt.error?xt.error:xt.transaction.error)}}catch(Le){Nt(Le)}})}).catch(Nt)});return et(rt,$t),rt},clear:function jt(Ze){var $t=this,yt=new Xe(function(rt,Tt){$t.ready().then(function(){Qe($t._dbInfo,ie,function(Nt,ue){if(Nt)return Tt(Nt);try{var nt=ue.objectStore($t._dbInfo.storeName).clear();ue.oncomplete=function(){rt()},ue.onabort=ue.onerror=function(){Tt(nt.error?nt.error:nt.transaction.error)}}catch(xt){Tt(xt)}})}).catch(Tt)});return et(yt,Ze),yt},length:function mr(Ze){var $t=this,yt=new Xe(function(rt,Tt){$t.ready().then(function(){Qe($t._dbInfo,Re,function(Nt,ue){if(Nt)return Tt(Nt);try{var nt=ue.objectStore($t._dbInfo.storeName).count();nt.onsuccess=function(){rt(nt.result)},nt.onerror=function(){Tt(nt.error)}}catch(xt){Tt(xt)}})}).catch(Tt)});return et(yt,Ze),yt},key:function Tn(Ze,$t){var yt=this,rt=new Xe(function(Tt,Nt){Ze<0?Tt(null):yt.ready().then(function(){Qe(yt._dbInfo,Re,function(ue,ye){if(ue)return Nt(ue);try{var nt=ye.objectStore(yt._dbInfo.storeName),xt=!1,Le=nt.openKeyCursor();Le.onsuccess=function(){var dt=Le.result;dt?0===Ze||xt?Tt(dt.key):(xt=!0,dt.advance(Ze)):Tt(null)},Le.onerror=function(){Nt(Le.error)}}catch(dt){Nt(dt)}})}).catch(Nt)});return et(rt,$t),rt},keys:function Vn(Ze){var $t=this,yt=new Xe(function(rt,Tt){$t.ready().then(function(){Qe($t._dbInfo,Re,function(Nt,ue){if(Nt)return Tt(Nt);try{var nt=ue.objectStore($t._dbInfo.storeName).openKeyCursor(),xt=[];nt.onsuccess=function(){var Le=nt.result;Le?(xt.push(Le.key),Le.continue()):rt(xt)},nt.onerror=function(){Tt(nt.error)}}catch(Le){Tt(Le)}})}).catch(Tt)});return et(yt,Ze),yt},dropInstance:function un(Ze,$t){$t=ce.apply(this,arguments);var Tt,yt=this.config();return(Ze="function"!=typeof Ze&&Ze||{}).name||(Ze.name=Ze.name||yt.name,Ze.storeName=Ze.storeName||yt.storeName),et(Tt=Ze.name?(Ze.name===yt.name&&this._dbInfo.db?Xe.resolve(this._dbInfo.db):je(Ze).then(function(ye){var nt=Q[Ze.name],xt=nt.forages;nt.db=ye;for(var Le=0;Le<xt.length;Le++)xt[Le]._dbInfo.db=ye;return ye})).then(Ze.storeName?function(ye){if(ye.objectStoreNames.contains(Ze.storeName)){var nt=ye.version+1;pe(Ze);var xt=Q[Ze.name],Le=xt.forages;ye.close();for(var dt=0;dt<Le.length;dt++){var Rt=Le[dt];Rt._dbInfo.db=null,Rt._dbInfo.version=nt}return new Xe(function(yn,Et){var kn=We.open(Ze.name,nt);kn.onerror=function(zr){kn.result.close(),Et(zr)},kn.onupgradeneeded=function(){kn.result.deleteObjectStore(Ze.storeName)},kn.onsuccess=function(){var zr=kn.result;zr.close(),yn(zr)}}).then(function(yn){xt.db=yn;for(var Et=0;Et<Le.length;Et++){var kn=Le[Et];kn._dbInfo.db=yn,ae(kn._dbInfo)}}).catch(function(yn){throw(we(Ze,yn)||Xe.resolve()).catch(function(){}),yn})}}:function(ye){pe(Ze);var nt=Q[Ze.name],xt=nt.forages;ye.close();for(var Le=0;Le<xt.length;Le++)xt[Le]._dbInfo.db=null;return new Xe(function(sn,yn){var Et=We.deleteDatabase(Ze.name);Et.onerror=function(){var kn=Et.result;kn&&kn.close(),yn(Et.error)},Et.onblocked=function(){console.warn('dropInstance blocked for database "'+Ze.name+'" until all open connections are closed')},Et.onsuccess=function(){var kn=Et.result;kn&&kn.close(),sn(kn)}}).then(function(sn){nt.db=sn;for(var yn=0;yn<xt.length;yn++)ae(xt[yn]._dbInfo)}).catch(function(sn){throw(we(Ze,sn)||Xe.resolve()).catch(function(){}),sn})}):Xe.reject("Invalid arguments"),$t),Tt}};var jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pe=/^~~local_forage_type~([^~]+)~/,Ae="__lfsc__:",ut="arbf",kt="blob",_i=Object.prototype.toString;function Ni(Ze){var rt,Nt,ue,ye,nt,$t=.75*Ze.length,yt=Ze.length,Tt=0;"="===Ze[Ze.length-1]&&($t--,"="===Ze[Ze.length-2]&&$t--);var xt=new ArrayBuffer($t),Le=new Uint8Array(xt);for(rt=0;rt<yt;rt+=4)Nt=jn.indexOf(Ze[rt]),ue=jn.indexOf(Ze[rt+1]),ye=jn.indexOf(Ze[rt+2]),nt=jn.indexOf(Ze[rt+3]),Le[Tt++]=Nt<<2|ue>>4,Le[Tt++]=(15&ue)<<4|ye>>2,Le[Tt++]=(3&ye)<<6|63&nt;return xt}function zi(Ze){var rt,$t=new Uint8Array(Ze),yt="";for(rt=0;rt<$t.length;rt+=3)yt+=jn[$t[rt]>>2],yt+=jn[(3&$t[rt])<<4|$t[rt+1]>>4],yt+=jn[(15&$t[rt+1])<<2|$t[rt+2]>>6],yt+=jn[63&$t[rt+2]];return $t.length%3==2?yt=yt.substring(0,yt.length-1)+"=":$t.length%3==1&&(yt=yt.substring(0,yt.length-2)+"=="),yt}var De={serialize:function yo(Ze,$t){var yt="";if(Ze&&(yt=_i.call(Ze)),Ze&&("[object ArrayBuffer]"===yt||Ze.buffer&&"[object ArrayBuffer]"===_i.call(Ze.buffer))){var rt,Tt=Ae;Ze instanceof ArrayBuffer?(rt=Ze,Tt+=ut):(rt=Ze.buffer,"[object Int8Array]"===yt?Tt+="si08":"[object Uint8Array]"===yt?Tt+="ui08":"[object Uint8ClampedArray]"===yt?Tt+="uic8":"[object Int16Array]"===yt?Tt+="si16":"[object Uint16Array]"===yt?Tt+="ur16":"[object Int32Array]"===yt?Tt+="si32":"[object Uint32Array]"===yt?Tt+="ui32":"[object Float32Array]"===yt?Tt+="fl32":"[object Float64Array]"===yt?Tt+="fl64":$t(new Error("Failed to get type for BinaryArray"))),$t(Tt+zi(rt))}else if("[object Blob]"===yt){var Nt=new FileReader;Nt.onload=function(){var ue="~~local_forage_type~"+Ze.type+"~"+zi(this.result);$t(Ae+kt+ue)},Nt.readAsArrayBuffer(Ze)}else try{$t(JSON.stringify(Ze))}catch(ue){console.error("Couldn't convert value into a JSON string: ",Ze),$t(null,ue)}},deserialize:function _t(Ze){if(Ze.substring(0,9)!==Ae)return JSON.parse(Ze);var rt,$t=Ze.substring(13),yt=Ze.substring(9,13);if(yt===kt&&Pe.test($t)){var Tt=$t.match(Pe);rt=Tt[1],$t=$t.substring(Tt[0].length)}var Nt=Ni($t);switch(yt){case ut:return Nt;case kt:return Wt([Nt],{type:rt});case"si08":return new Int8Array(Nt);case"ui08":return new Uint8Array(Nt);case"uic8":return new Uint8ClampedArray(Nt);case"si16":return new Int16Array(Nt);case"ur16":return new Uint16Array(Nt);case"si32":return new Int32Array(Nt);case"ui32":return new Uint32Array(Nt);case"fl32":return new Float32Array(Nt);case"fl64":return new Float64Array(Nt);default:throw new Error("Unkown type: "+yt)}},stringToBuffer:Ni,bufferToString:zi};function ke(Ze,$t,yt,rt){Ze.executeSql("CREATE TABLE IF NOT EXISTS "+$t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],yt,rt)}function It(Ze,$t,yt,rt,Tt,Nt){Ze.executeSql(yt,rt,Tt,function(ue,ye){ye.code===ye.SYNTAX_ERR?ue.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[$t.storeName],function(nt,xt){xt.rows.length?Nt(nt,ye):ke(nt,$t,function(){nt.executeSql(yt,rt,Tt,Nt)},Nt)},Nt):Nt(ue,ye)},Nt)}function Qt(Ze,$t,yt,rt){var Tt=this;Ze=Bt(Ze);var Nt=new Xe(function(ue,ye){Tt.ready().then(function(){void 0===$t&&($t=null);var nt=$t,xt=Tt._dbInfo;xt.serializer.serialize($t,function(Le,dt){dt?ye(dt):xt.db.transaction(function(Rt){It(Rt,xt,"INSERT OR REPLACE INTO "+xt.storeName+" (key, value) VALUES (?, ?)",[Ze,Le],function(){ue(nt)},function(sn,yn){ye(yn)})},function(Rt){if(Rt.code===Rt.QUOTA_ERR){if(rt>0)return void ue(Qt.apply(Tt,[Ze,nt,yt,rt-1]));ye(Rt)}})})}).catch(ye)});return et(Nt,yt),Nt}var Kr={_driver:"webSQLStorage",_initStorage:function gt(Ze){var $t=this,yt={db:null};if(Ze)for(var rt in Ze)yt[rt]="string"!=typeof Ze[rt]?Ze[rt].toString():Ze[rt];var Tt=new Xe(function(Nt,ue){try{yt.db=openDatabase(yt.name,String(yt.version),yt.description,yt.size)}catch(ye){return ue(ye)}yt.db.transaction(function(ye){ke(ye,yt,function(){$t._dbInfo=yt,Nt()},function(nt,xt){ue(xt)})},ue)});return yt.serializer=De,Tt},_support:function Cn(){return"function"==typeof openDatabase}(),iterate:function nn(Ze,$t){var yt=this,rt=new Xe(function(Tt,Nt){yt.ready().then(function(){var ue=yt._dbInfo;ue.db.transaction(function(ye){It(ye,ue,"SELECT * FROM "+ue.storeName,[],function(nt,xt){for(var Le=xt.rows,dt=Le.length,Rt=0;Rt<dt;Rt++){var sn=Le.item(Rt),yn=sn.value;if(yn&&(yn=ue.serializer.deserialize(yn)),void 0!==(yn=Ze(yn,sn.key,Rt+1)))return void Tt(yn)}Tt()},function(nt,xt){Nt(xt)})})}).catch(Nt)});return et(rt,$t),rt},getItem:function ct(Ze,$t){var yt=this;Ze=Bt(Ze);var rt=new Xe(function(Tt,Nt){yt.ready().then(function(){var ue=yt._dbInfo;ue.db.transaction(function(ye){It(ye,ue,"SELECT * FROM "+ue.storeName+" WHERE key = ? LIMIT 1",[Ze],function(nt,xt){var Le=xt.rows.length?xt.rows.item(0).value:null;Le&&(Le=ue.serializer.deserialize(Le)),Tt(Le)},function(nt,xt){Nt(xt)})})}).catch(Nt)});return et(rt,$t),rt},setItem:function Dt(Ze,$t,yt){return Qt.apply(this,[Ze,$t,yt,1])},removeItem:function hn(Ze,$t){var yt=this;Ze=Bt(Ze);var rt=new Xe(function(Tt,Nt){yt.ready().then(function(){var ue=yt._dbInfo;ue.db.transaction(function(ye){It(ye,ue,"DELETE FROM "+ue.storeName+" WHERE key = ?",[Ze],function(){Tt()},function(nt,xt){Nt(xt)})})}).catch(Nt)});return et(rt,$t),rt},clear:function qn(Ze){var $t=this,yt=new Xe(function(rt,Tt){$t.ready().then(function(){var Nt=$t._dbInfo;Nt.db.transaction(function(ue){It(ue,Nt,"DELETE FROM "+Nt.storeName,[],function(){rt()},function(ye,nt){Tt(nt)})})}).catch(Tt)});return et(yt,Ze),yt},length:function nr(Ze){var $t=this,yt=new Xe(function(rt,Tt){$t.ready().then(function(){var Nt=$t._dbInfo;Nt.db.transaction(function(ue){It(ue,Nt,"SELECT COUNT(key) as c FROM "+Nt.storeName,[],function(ye,nt){var xt=nt.rows.item(0).c;rt(xt)},function(ye,nt){Tt(nt)})})}).catch(Tt)});return et(yt,Ze),yt},key:function Xn(Ze,$t){var yt=this,rt=new Xe(function(Tt,Nt){yt.ready().then(function(){var ue=yt._dbInfo;ue.db.transaction(function(ye){It(ye,ue,"SELECT key FROM "+ue.storeName+" WHERE id = ? LIMIT 1",[Ze+1],function(nt,xt){var Le=xt.rows.length?xt.rows.item(0).key:null;Tt(Le)},function(nt,xt){Nt(xt)})})}).catch(Nt)});return et(rt,$t),rt},keys:function bi(Ze){var $t=this,yt=new Xe(function(rt,Tt){$t.ready().then(function(){var Nt=$t._dbInfo;Nt.db.transaction(function(ue){It(ue,Nt,"SELECT key FROM "+Nt.storeName,[],function(ye,nt){for(var xt=[],Le=0;Le<nt.rows.length;Le++)xt.push(nt.rows.item(Le).key);rt(xt)},function(ye,nt){Tt(nt)})})}).catch(Tt)});return et(yt,Ze),yt},dropInstance:function ai(Ze,$t){$t=ce.apply(this,arguments);var yt=this.config();(Ze="function"!=typeof Ze&&Ze||{}).name||(Ze.name=Ze.name||yt.name,Ze.storeName=Ze.storeName||yt.storeName);var Tt,rt=this;return et(Tt=Ze.name?new Xe(function(Nt){var ue;ue=Ze.name===yt.name?rt._dbInfo.db:openDatabase(Ze.name,"","",0),Nt(Ze.storeName?{db:ue,storeNames:[Ze.storeName]}:function Si(Ze){return new Xe(function($t,yt){Ze.transaction(function(rt){rt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Tt,Nt){for(var ue=[],ye=0;ye<Nt.rows.length;ye++)ue.push(Nt.rows.item(ye).name);$t({db:Ze,storeNames:ue})},function(Tt,Nt){yt(Nt)})},function(rt){yt(rt)})})}(ue))}).then(function(Nt){return new Xe(function(ue,ye){Nt.db.transaction(function(nt){function xt(sn){return new Xe(function(yn,Et){nt.executeSql("DROP TABLE IF EXISTS "+sn,[],function(){yn()},function(kn,zr){Et(zr)})})}for(var Le=[],dt=0,Rt=Nt.storeNames.length;dt<Rt;dt++)Le.push(xt(Nt.storeNames[dt]));Xe.all(Le).then(function(){ue()}).catch(function(sn){ye(sn)})},function(nt){ye(nt)})})}):Xe.reject("Invalid arguments"),$t),Tt}};function Fi(Ze,$t){var yt=Ze.name+"/";return Ze.storeName!==$t.storeName&&(yt+=Ze.storeName+"/"),yt}function Ct(){return!function bt(){var Ze="_localforage_support_test";try{return localStorage.setItem(Ze,!0),localStorage.removeItem(Ze),!1}catch{return!0}}()||localStorage.length>0}var oi={_driver:"localStorageWrapper",_initStorage:function on(Ze){var yt={};if(Ze)for(var rt in Ze)yt[rt]=Ze[rt];return yt.keyPrefix=Fi(Ze,this._defaultConfig),Ct()?(this._dbInfo=yt,yt.serializer=De,Xe.resolve()):Xe.reject()},_support:function Ii(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function $n(Ze,$t){var yt=this,rt=yt.ready().then(function(){for(var Tt=yt._dbInfo,Nt=Tt.keyPrefix,ue=Nt.length,ye=localStorage.length,nt=1,xt=0;xt<ye;xt++){var Le=localStorage.key(xt);if(0===Le.indexOf(Nt)){var dt=localStorage.getItem(Le);if(dt&&(dt=Tt.serializer.deserialize(dt)),void 0!==(dt=Ze(dt,Le.substring(ue),nt++)))return dt}}});return et(rt,$t),rt},getItem:function Sn(Ze,$t){var yt=this;Ze=Bt(Ze);var rt=yt.ready().then(function(){var Tt=yt._dbInfo,Nt=localStorage.getItem(Tt.keyPrefix+Ze);return Nt&&(Nt=Tt.serializer.deserialize(Nt)),Nt});return et(rt,$t),rt},setItem:function yi(Ze,$t,yt){var rt=this;Ze=Bt(Ze);var Tt=rt.ready().then(function(){void 0===$t&&($t=null);var Nt=$t;return new Xe(function(ue,ye){var nt=rt._dbInfo;nt.serializer.serialize($t,function(xt,Le){if(Le)ye(Le);else try{localStorage.setItem(nt.keyPrefix+Ze,xt),ue(Nt)}catch(dt){("QuotaExceededError"===dt.name||"NS_ERROR_DOM_QUOTA_REACHED"===dt.name)&&ye(dt),ye(dt)}})})});return et(Tt,yt),Tt},removeItem:function Bn(Ze,$t){var yt=this;Ze=Bt(Ze);var rt=yt.ready().then(function(){localStorage.removeItem(yt._dbInfo.keyPrefix+Ze)});return et(rt,$t),rt},clear:function ln(Ze){var $t=this,yt=$t.ready().then(function(){for(var rt=$t._dbInfo.keyPrefix,Tt=localStorage.length-1;Tt>=0;Tt--){var Nt=localStorage.key(Tt);0===Nt.indexOf(rt)&&localStorage.removeItem(Nt)}});return et(yt,Ze),yt},length:function Dr(Ze){var yt=this.keys().then(function(rt){return rt.length});return et(yt,Ze),yt},key:function Yn(Ze,$t){var yt=this,rt=yt.ready().then(function(){var Nt,Tt=yt._dbInfo;try{Nt=localStorage.key(Ze)}catch{Nt=null}return Nt&&(Nt=Nt.substring(Tt.keyPrefix.length)),Nt});return et(rt,$t),rt},keys:function ir(Ze){var $t=this,yt=$t.ready().then(function(){for(var rt=$t._dbInfo,Tt=localStorage.length,Nt=[],ue=0;ue<Tt;ue++){var ye=localStorage.key(ue);0===ye.indexOf(rt.keyPrefix)&&Nt.push(ye.substring(rt.keyPrefix.length))}return Nt});return et(yt,Ze),yt},dropInstance:function Pr(Ze,$t){if($t=ce.apply(this,arguments),!(Ze="function"!=typeof Ze&&Ze||{}).name){var yt=this.config();Ze.name=Ze.name||yt.name,Ze.storeName=Ze.storeName||yt.storeName}var Tt,rt=this;return et(Tt=Ze.name?new Xe(function(Nt){Nt(Ze.storeName?Fi(Ze,rt._defaultConfig):Ze.name+"/")}).then(function(Nt){for(var ue=localStorage.length-1;ue>=0;ue--){var ye=localStorage.key(ue);0===ye.indexOf(Nt)&&localStorage.removeItem(ye)}}):Xe.reject("Invalid arguments"),$t),Tt}},to=function($t,yt){return $t===yt||"number"==typeof $t&&"number"==typeof yt&&isNaN($t)&&isNaN(yt)},Vi=function($t,yt){for(var rt=$t.length,Tt=0;Tt<rt;){if(to($t[Tt],yt))return!0;Tt++}return!1},So=Array.isArray||function(Ze){return"[object Array]"===Object.prototype.toString.call(Ze)},so={},Ns={},Lo={INDEXEDDB:Ft,WEBSQL:Kr,LOCALSTORAGE:oi},no=[Lo.INDEXEDDB._driver,Lo.WEBSQL._driver,Lo.LOCALSTORAGE._driver],li=["dropInstance"],Mn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(li),gl={description:"",driver:no.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function vs(Ze,$t){Ze[$t]=function(){var yt=arguments;return Ze.ready().then(function(){return Ze[$t].apply(Ze,yt)})}}function bs(){for(var Ze=1;Ze<arguments.length;Ze++){var $t=arguments[Ze];if($t)for(var yt in $t)$t.hasOwnProperty(yt)&&(arguments[0][yt]=So($t[yt])?$t[yt].slice():$t[yt])}return arguments[0]}var Mo=function(){function Ze($t){for(var yt in function Be(Ze,$t){if(!(Ze instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Ze),Lo)if(Lo.hasOwnProperty(yt)){var rt=Lo[yt],Tt=rt._driver;this[yt]=Tt,so[Tt]||this.defineDriver(rt)}this._defaultConfig=bs({},gl),this._config=bs({},this._defaultConfig,$t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Ze.prototype.config=function(yt){if("object"===(typeof yt>"u"?"undefined":me(yt))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var rt in yt){if("storeName"===rt&&(yt[rt]=yt[rt].replace(/\W/g,"_")),"version"===rt&&"number"!=typeof yt[rt])return new Error("Database version must be a number.");this._config[rt]=yt[rt]}return!("driver"in yt)||!yt.driver||this.setDriver(this._config.driver)}return"string"==typeof yt?this._config[yt]:this._config},Ze.prototype.defineDriver=function(yt,rt,Tt){var Nt=new Xe(function(ue,ye){try{var nt=yt._driver,xt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!yt._driver)return void ye(xt);for(var Le=Mn.concat("_initStorage"),dt=0,Rt=Le.length;dt<Rt;dt++){var sn=Le[dt];if((!Vi(li,sn)||yt[sn])&&"function"!=typeof yt[sn])return void ye(xt)}!function(){for(var ui=function(jr){return function(){var Mi=new Error("Method "+jr+" is not implemented by the current driver"),Ds=Xe.reject(Mi);return et(Ds,arguments[arguments.length-1]),Ds}},ao=0,_o=li.length;ao<_o;ao++){var tn=li[ao];yt[tn]||(yt[tn]=ui(tn))}}();var kn=function(ui){so[nt]&&console.info("Redefining LocalForage driver: "+nt),so[nt]=yt,Ns[nt]=ui,ue()};"_support"in yt?yt._support&&"function"==typeof yt._support?yt._support().then(kn,ye):kn(!!yt._support):kn(!0)}catch(zr){ye(zr)}});return He(Nt,rt,Tt),Nt},Ze.prototype.driver=function(){return this._driver||null},Ze.prototype.getDriver=function(yt,rt,Tt){var Nt=so[yt]?Xe.resolve(so[yt]):Xe.reject(new Error("Driver not found."));return He(Nt,rt,Tt),Nt},Ze.prototype.getSerializer=function(yt){var rt=Xe.resolve(De);return He(rt,yt),rt},Ze.prototype.ready=function(yt){var rt=this,Tt=rt._driverSet.then(function(){return null===rt._ready&&(rt._ready=rt._initDriver()),rt._ready});return He(Tt,yt,yt),Tt},Ze.prototype.setDriver=function(yt,rt,Tt){var Nt=this;So(yt)||(yt=[yt]);var ue=this._getSupportedDrivers(yt);function ye(){Nt._config.driver=Nt.driver()}function nt(dt){return Nt._extend(dt),ye(),Nt._ready=Nt._initStorage(Nt._config),Nt._ready}var Le=null!==this._driverSet?this._driverSet.catch(function(){return Xe.resolve()}):Xe.resolve();return this._driverSet=Le.then(function(){var dt=ue[0];return Nt._dbInfo=null,Nt._ready=null,Nt.getDriver(dt).then(function(Rt){Nt._driver=Rt._driver,ye(),Nt._wrapLibraryMethodsWithReady(),Nt._initDriver=function xt(dt){return function(){var Rt=0;return function sn(){for(;Rt<dt.length;){var yn=dt[Rt];return Rt++,Nt._dbInfo=null,Nt._ready=null,Nt.getDriver(yn).then(nt).catch(sn)}ye();var Et=new Error("No available storage method found.");return Nt._driverSet=Xe.reject(Et),Nt._driverSet}()}}(ue)})}).catch(function(){ye();var dt=new Error("No available storage method found.");return Nt._driverSet=Xe.reject(dt),Nt._driverSet}),He(this._driverSet,rt,Tt),this._driverSet},Ze.prototype.supports=function(yt){return!!Ns[yt]},Ze.prototype._extend=function(yt){bs(this,yt)},Ze.prototype._getSupportedDrivers=function(yt){for(var rt=[],Tt=0,Nt=yt.length;Tt<Nt;Tt++){var ue=yt[Tt];this.supports(ue)&&rt.push(ue)}return rt},Ze.prototype._wrapLibraryMethodsWithReady=function(){for(var yt=0,rt=Mn.length;yt<rt;yt++)vs(this,Mn[yt])},Ze.prototype.createInstance=function(yt){return new Ze(yt)},Ze}(),El=new Mo;tt.exports=El},{3:3}]},{},[4])(4)},2574:function(An){An.exports=function(){"use strict";var Lt,Ie,de;function Fe(g,me){if(Lt)if(Ie){var Be="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Lt+")(sharedChunk); ("+Ie+")(sharedChunk); self.onerror = null;",Ne={};Lt(Ne),de=me(Ne),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(de.workerUrl=window.URL.createObjectURL(new Blob([Be],{type:"text/javascript"})))}else Ie=me;else Lt=me}return Fe(0,function(g){var me=typeof self<"u"?self:{},Be="2.15.0";let Ne;const We={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Ne){const l=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ne=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):l}catch{Ne=l}}return Ne},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!We.API_URL)return null;try{const l=new URL(We.API_URL);return"api.mapbox.cn"===l.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===l.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ht={supported:!1,testSupport:function(l){!et&&Xe&&(He?Bt(l):Wt=l)}};let Wt,Xe,et=!1,He=!1;function Bt(l){const s=l.createTexture();l.bindTexture(l.TEXTURE_2D,s);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,Xe),l.isContextLost())return;ht.supported=!0}catch{}l.deleteTexture(s),et=!0}me.document&&(Xe=me.document.createElement("img"),Xe.onload=function(){Wt&&Bt(Wt),Wt=null,He=!0},Xe.onerror=function(){et=!0,Wt=null},Xe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ce="01";function Ce(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var te=Q;function Q(l,s,u,p){this.cx=3*l,this.bx=3*(u-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=u,this.p2y=p}Q.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(void 0===s&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var u=l,p=0;p<8;p++){var y=this.sampleCurveX(u)-l;if(Math.abs(y)<s)return u;var E=this.sampleCurveDerivativeX(u);if(Math.abs(E)<1e-6)break;u-=y/E}var I=0,P=1;for(u=l,p=0;p<20&&(y=this.sampleCurveX(u),!(Math.abs(y-l)<s));p++)l>y?I=u:P=u,u=.5*(P-I)+I;return u},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};var ne=Ce(te),Re=ie;function ie(l,s){this.x=l,this.y=s}ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,s){return this.clone()._rotateAround(l,s)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var s=l.x-this.x,u=l.y-this.y;return s*s+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,s){return Math.atan2(this.x*s-this.y*l,this.x*l+this.y*s)},_matMult:function(l){var s=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=s,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var s=Math.cos(l),u=Math.sin(l),p=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=p,this},_rotateAround:function(l,s){var u=Math.cos(l),p=Math.sin(l),y=s.y+p*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-p*(this.y-s.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ie.convert=function(l){return l instanceof ie?l:Array.isArray(l)?new ie(l[0],l[1]):l};var J=Ce(Re);const xe=Math.PI/180,ee=180/Math.PI;function pe(l){return l*xe}function ae(l){return l*ee}const we=[[0,0],[1,0],[1,1],[0,1]];function oe(l){if(l<=0)return 0;if(l>=1)return 1;const s=l*l,u=s*l;return 4*(l<.5?u:3*(l-s)+u-.75)}function je(l,s,u,p){const y=new ne(l,s,u,p);return function(E){return y.solve(E)}}const Te=je(.25,.1,.25,1);function K(l,s,u){return Math.min(u,Math.max(s,l))}function qe(l,s,u){return(u=K((u-l)/(s-l),0,1))*u*(3-2*u)}function Me(l,s,u){const p=u-s,y=((l-s)%p+p)%p+s;return y===s?u:y}function Je(l,s,u){if(!l.length)return u(null,[]);let p=l.length;const y=new Array(l.length);let E=null;l.forEach((I,P)=>{s(I,(O,N)=>{O&&(E=O),y[P]=N,0==--p&&u(E,y)})})}function Ue(l){const s=[];for(const u in l)s.push(l[u]);return s}function le(l,...s){for(const u of s)for(const p in u)l[p]=u[p];return l}let Qe=1;function lt(){return Qe++}function dn(){return function l(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function Xt(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function _n(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function Pn(l,s){l.forEach(u=>{s[u]&&(s[u]=s[u].bind(s))})}function Qn(l,s){return-1!==l.indexOf(s,l.length-s.length)}function jt(l,s,u){const p={};for(const y in l)p[y]=s.call(u||this,l[y],y,l);return p}function mr(l,s,u){const p={};for(const y in l)s.call(u||this,l[y],y,l)&&(p[y]=l[y]);return p}function Tn(l){return Array.isArray(l)?l.map(Tn):"object"==typeof l&&l?jt(l,Tn):l}const Vn={};function un(l){Vn[l]||(typeof console<"u"&&console.warn(l),Vn[l]=!0)}function Ft(l,s,u){return(u.y-l.y)*(s.x-l.x)>(s.y-l.y)*(u.x-l.x)}function Cn(l){let s=0;for(let u,p,y=0,E=l.length,I=E-1;y<E;I=y++)u=l[y],p=l[I],s+=(p.x-u.x)*(u.y+p.y);return s}function jn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Pt(l){const s={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,y,E)=>{const I=y||E;return s[p]=!I||I.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s}let Pe=null;function Ae(l){if(null==Pe){const s=l.navigator?l.navigator.userAgent:null;Pe=!!l.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Pe}function Se(l){try{const s=me[l];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}}function ut(l,s){return[l[4*s],l[4*s+1],l[4*s+2],l[4*s+3]]}const kt="mapbox-tiles";let Fn,vn,cn=500,Nn=50;function Yr(){try{return me.caches}catch{}}function si(){Yr()&&!Fn&&(Fn=me.caches.open(kt))}function sr(l){const s=l.indexOf("?");if(s<0)return l;const p=function(y){const E=y.indexOf("?");return E>0?y.slice(E+1).split("&"):[]}(l).filter(y=>{const E=y.split("=");return"language"===E[0]||"worldview"===E[0]});return p.length?`${l.slice(0,s)}?${p.join("&")}`:l.slice(0,s)}let Cr=1/0;const Ei={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ei);class Hr extends Error{constructor(s,u,p){401===u&&nn(p)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const _i=jn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===me.location.protocol?me.parent:me).location.href,Ni=function(l,s){if(!(/^file:/.test(u=l.url)||/^file:/.test(_i())&&!/^\w+:/.test(u))){if(me.fetch&&me.Request&&me.AbortController&&me.Request.prototype.hasOwnProperty("signal"))return function(p,y){const E=new me.AbortController,I=new me.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:_i(),referrerPolicy:p.referrerPolicy,signal:E.signal});let P=!1,O=!1;const N=($=I.url).indexOf("sku=")>0&&nn($);var $;"json"===p.type&&I.headers.set("Accept","application/json");const U=(Y,se,be)=>{if(O)return;if(Y&&"SecurityError"!==Y.message&&un(Y.toString()),se&&be)return H(se);const Ge=Date.now();me.fetch(I).then(mt=>{if(mt.ok){const Ot=N?mt.clone():null;return H(mt,Ot,Ge)}return y(new Hr(mt.statusText,mt.status,p.url))}).catch(mt=>{"AbortError"!==mt.name&&y(new Error(`${mt.message} ${p.url}`))})},H=(Y,se,be)=>{("arrayBuffer"===p.type?Y.arrayBuffer():"json"===p.type?Y.json():Y.text()).then(Ge=>{O||(se&&be&&function(mt,Ot,pt){if(si(),!Fn)return;const At={status:Ot.status,statusText:Ot.statusText,headers:new me.Headers};Ot.headers.forEach((En,fn)=>At.headers.set(fn,En));const zt=Pt(Ot.headers.get("Cache-Control")||"");if(zt["no-store"])return;zt["max-age"]&&At.headers.set("Expires",new Date(pt+1e3*zt["max-age"]).toUTCString());const Vt=At.headers.get("Expires");Vt&&(new Date(Vt).getTime()-pt<42e4||function(En,fn){if(void 0===vn)try{new Response(new ReadableStream),vn=!0}catch{vn=!1}vn?fn(En.body):En.blob().then(fn)}(Ot,En=>{const fn=new me.Response(En,At);si(),Fn&&Fn.then(zn=>zn.put(sr(mt.url),fn)).catch(zn=>un(zn.message))}))}(I,se,be),P=!0,y(null,Ge,Y.headers.get("Cache-Control"),Y.headers.get("Expires")))}).catch(Ge=>{O||y(new Error(Ge.message))})};return N?function(Y,se){if(si(),!Fn)return se(null);const be=sr(Y.url);Fn.then(Ge=>{Ge.match(be).then(mt=>{const Ot=function(pt){if(!pt)return!1;const At=new Date(pt.headers.get("Expires")||0),zt=Pt(pt.headers.get("Cache-Control")||"");return At>Date.now()&&!zt["no-cache"]}(mt);Ge.delete(be),Ot&&Ge.put(be,mt.clone()),se(null,mt,Ot)}).catch(se)}).catch(se)}(I,U):U(null,null),{cancel:()=>{O=!0,P||E.abort()}}}(l,s);if(jn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,s,void 0,!0)}var u;return function(p,y){const E=new me.XMLHttpRequest;E.open(p.method||"GET",p.url,!0),"arrayBuffer"===p.type&&(E.responseType="arraybuffer");for(const I in p.headers)E.setRequestHeader(I,p.headers[I]);return"json"===p.type&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials="include"===p.credentials,E.onerror=()=>{y(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||0===E.status)&&null!==E.response){let I=E.response;if("json"===p.type)try{I=JSON.parse(E.response)}catch(P){return y(P)}y(null,I,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else y(new Hr(E.statusText,E.status,p.url))},E.send(p.body),{cancel:()=>E.abort()}}(l,s)},zi=function(l,s){return Ni(le(l,{type:"arrayBuffer"}),s)};function yo(l){const s=me.document.createElement("a");return s.href=l,s.protocol===me.document.location.protocol&&s.host===me.document.location.host}const _t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let De,ke;De=[],ke=0;const gt=function(l,s){if(ht.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),ke>=We.MAX_PARALLEL_IMAGE_REQUESTS){const E={requestParameters:l,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return De.push(E),E}ke++;let u=!1;const p=()=>{if(!u)for(u=!0,ke--;De.length&&ke<We.MAX_PARALLEL_IMAGE_REQUESTS;){const E=De.shift(),{requestParameters:I,callback:P,cancelled:O}=E;O||(E.cancel=gt(I,P).cancel)}},y=zi(l,(E,I,P,O)=>{p(),E?s(E):I&&(me.createImageBitmap?function(N,$){const U=new me.Blob([new Uint8Array(N)],{type:"image/png"});me.createImageBitmap(U).then(H=>{$(null,H)}).catch(H=>{$(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(I,(N,$)=>s(N,$,P,O)):function(N,$){const U=new me.Image,H=me.URL;U.onload=()=>{$(null,U),H.revokeObjectURL(U.src),U.onload=null,me.requestAnimationFrame(()=>{U.src=_t})},U.onerror=()=>$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Y=new me.Blob([new Uint8Array(N)],{type:"image/png"});U.src=N.byteLength?H.createObjectURL(Y):_t}(I,(N,$)=>s(N,$,P,O)))});return{cancel:()=>{y.cancel(),p()}}},It="NO_ACCESS_TOKEN";function ct(l){return 0===l.indexOf("mapbox:")}function nn(l){return We.API_URL_REGEX.test(l)}function Qt(l){return We.API_CDN_URL_REGEX.test(l)}function Dt(l){return We.API_STYLE_REGEX.test(l)&&!hn(l)}function hn(l){return We.API_SPRITE_REGEX.test(l)}const qn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nr(l){const s=l.match(qn);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function Xn(l){const s=l.params.length?`?${l.params.join("&")}`:"";return`${l.protocol}://${l.authority}${l.path}${s}`}const bi="mapbox.eventData";function Si(l){if(!l)return null;const s=l.split(".");if(!s||3!==s.length)return null;try{return JSON.parse(decodeURIComponent(me.atob(s[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ai{constructor(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(s){const u=Si(We.ACCESS_TOKEN);let p="";return p=u&&u.u?me.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(y,E)=>String.fromCharCode(+("0x"+E)))):We.ACCESS_TOKEN||"",s?`${bi}.${s}:${p}`:`${bi}:${p}`}fetchEventData(){const s=Se("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(s)try{const y=me.localStorage.getItem(u);y&&(this.eventData=JSON.parse(y));const E=me.localStorage.getItem(p);E&&(this.anonId=E)}catch{un("Unable to read from LocalStorage")}}saveEventData(){const s=Se("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(s)try{me.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&me.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{un("Unable to write to LocalStorage")}}processRequests(s){}postEvent(s,u,p,y){if(!We.EVENTS_URL)return;const E=nr(We.EVENTS_URL);E.params.push(`access_token=${y||We.ACCESS_TOKEN||""}`);const I={event:this.type,created:new Date(s).toISOString()},P=u?le(I,u):I,O={url:Xn(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([P])};var $;this.pendingRequest=($=N=>{this.pendingRequest=null,p(N),this.saveEventData(),this.processRequests(y)},Ni(le(O,{method:"POST"}),$))}queueRequest(s,u){this.queue.push(s),this.processRequests(u)}}const Kr=new class extends ai{constructor(l){super("appUserTurnstile"),this._customAccessToken=l}postTurnstileEvent(l,s){We.EVENTS_URL&&We.ACCESS_TOKEN&&Array.isArray(l)&&l.some(u=>ct(u)||nn(u))&&this.queueRequest(Date.now(),s)}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const s=Si(We.ACCESS_TOKEN),u=s?s.u:We.ACCESS_TOKEN;let p=u!==this.eventData.tokenU;_n(this.anonId)||(this.anonId=dn(),p=!0);const y=this.queue.shift();if(this.eventData.lastSuccess){const E=new Date(this.eventData.lastSuccess),I=new Date(y),P=(y-this.eventData.lastSuccess)/864e5;p=p||P>=1||P<-1||E.getDate()!==I.getDate()}else p=!0;p?this.postEvent(y,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Be,skuId:ce,"enabled.telemetry":!1,userId:this.anonId},E=>{E||(this.eventData.lastSuccess=y,this.eventData.tokenU=u)},l):this.processRequests()}},Ii=Kr.postTurnstileEvent.bind(Kr),Fi=new class extends ai{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(l,s,u,p){this.skuToken=s,this.errorCb=p,We.EVENTS_URL&&(u||We.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},u):this.errorCb(new Error(It)))}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{id:s,timestamp:u}=this.queue.shift();s&&this.success[s]||(this.anonId||this.fetchEventData(),_n(this.anonId)||(this.anonId=dn()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Be,skuId:ce,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):s&&(this.success[s]=!0)},l))}},bt=Fi.postMapLoadEvent.bind(Fi),Ct=new class extends ai{constructor(){super("gljs.performance")}postPerformanceEvent(l,s){We.EVENTS_URL&&(l||We.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:s},l)}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:s,performanceData:u}=this.queue.shift(),p=function(y){const E=me.performance.getEntriesByType("resource"),I=me.performance.getEntriesByType("mark"),P=function(H){const Y={};if(H)for(const se in H)if("other"!==se)for(const be of H[se]){const Ge=`${se}ResolveRangeMin`,mt=`${se}ResolveRangeMax`,Ot=`${se}RequestCount`,pt=`${se}RequestCachedCount`;Y[Ge]=Math.min(Y[Ge]||1/0,be.startTime),Y[mt]=Math.max(Y[mt]||-1/0,be.responseEnd);const At=zt=>{void 0===Y[zt]&&(Y[zt]=0),++Y[zt]};void 0!==be.transferSize&&0===be.transferSize&&At(pt),At(Ot)}return Y}(function(H,Y){const se={};if(H)for(const be of H){const Ge=Y(be);void 0===se[Ge]&&(se[Ge]=[]),se[Ge].push(be)}return se}(E,Dr)),O=me.devicePixelRatio,N=me.navigator.connection||me.navigator.mozConnection||me.navigator.webkitConnection,$={counters:[],metadata:[],attributes:[]},U=(H,Y,se)=>{null!=se&&H.push({name:Y,value:se.toString()})};for(const H in P)U($.counters,H,P[H]);if(y.interactionRange[0]!==1/0&&y.interactionRange[1]!==-1/0&&(U($.counters,"interactionRangeMin",y.interactionRange[0]),U($.counters,"interactionRangeMax",y.interactionRange[1])),I)for(const H of Object.keys(Yn)){const Y=Yn[H],se=I.find(be=>be.name===Y);se&&U($.counters,Y,se.startTime)}return U($.counters,"visibilityHidden",y.visibilityHidden),U($.attributes,"style",function(H){if(H)for(const Y of H){const se=Y.name.split("?")[0];if(Dt(se)){const be=se.split("/").slice(-2);if(2===be.length)return`mapbox://styles/${be[0]}/${be[1]}`}}}(E)),U($.attributes,"terrainEnabled",y.terrainEnabled?"true":"false"),U($.attributes,"fogEnabled",y.fogEnabled?"true":"false"),U($.attributes,"projection",y.projection),U($.attributes,"zoom",y.zoom),U($.metadata,"devicePixelRatio",O),U($.metadata,"connectionEffectiveType",N?N.effectiveType:void 0),U($.metadata,"navigatorUserAgent",me.navigator.userAgent),U($.metadata,"screenWidth",me.screen.width),U($.metadata,"screenHeight",me.screen.height),U($.metadata,"windowWidth",me.innerWidth),U($.metadata,"windowHeight",me.innerHeight),U($.metadata,"mapWidth",y.width/O),U($.metadata,"mapHeight",y.height/O),U($.metadata,"webglRenderer",y.renderer),U($.metadata,"webglVendor",y.vendor),U($.metadata,"sdkVersion",Be),U($.metadata,"sdkIdentifier","mapbox-gl-js"),$}(u);for(const y of p.metadata);for(const y of p.counters);for(const y of p.attributes);this.postEvent(s,p,()=>{},l)}},on=Ct.postPerformanceEvent.bind(Ct),ln=new class extends ai{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(l,s,u,p){if(!We.API_URL||!We.SESSION_PATH)return;const y=nr(We.API_URL+We.SESSION_PATH);y.params.push(`sku=${s||""}`),y.params.push(`access_token=${p||We.ACCESS_TOKEN||""}`);const E={url:Xn(y),headers:{"Content-Type":"text/plain"}};var P;this.pendingRequest=(P=I=>{this.pendingRequest=null,u(I),this.saveEventData(),this.processRequests(p)},Ni(le(E,{method:"GET"}),P))}getSessionAPI(l,s,u,p){this.skuToken=s,this.errorCb=p,We.SESSION_PATH&&We.API_URL&&(u||We.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},u):this.errorCb(new Error(It)))}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{id:s,timestamp:u}=this.queue.shift();s&&this.success[s]||this.getSession(u,this.skuToken,p=>{p?this.errorCb(p):s&&(this.success[s]=!0)},l)}},Sn=ln.getSessionAPI.bind(ln),$n=new Set,Yn={create:"create",load:"load",fullLoad:"fullLoad"},ir={mark(l){me.performance.mark(l)},measure(l,s,u){me.performance.measure(l,s,u)}};function Dr(l){const s=l.name.split("?")[0];return Qt(s)&&s.includes("mapbox-gl.js")?"javascript":Qt(s)&&s.includes("mapbox-gl.css")?"css":We.API_FONTS_REGEX.test(s)?"fontRange":hn(s)?"sprite":Dt(s)?"style":We.API_TILEJSON_REGEX.test(s)?"tilejson":"other"}const Bn=me.performance;function yi(l){const s=l?l.url.toString():void 0;return Bn.getEntriesByName(s)}let Pr,oi,to,Vi;const So={now:()=>void 0!==to?to:me.performance.now(),setNow(l){to=l},restoreNow(){to=void 0},frame(l){const s=me.requestAnimationFrame(l);return{cancel:()=>me.cancelAnimationFrame(s)}},getImageData(l,s=0){const{width:u,height:p}=l;Vi||(Vi=me.document.createElement("canvas"));const y=Vi.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(u>Vi.width||p>Vi.height)&&(Vi.width=u,Vi.height=p),y.clearRect(-s,-s,u+2*s,p+2*s),y.drawImage(l,0,0,u,p),y.getImageData(-s,-s,u+2*s,p+2*s)},resolveURL:l=>(Pr||(Pr=me.document.createElement("a")),Pr.href=l,Pr.href),get devicePixelRatio(){return me.devicePixelRatio},get prefersReducedMotion(){return!!me.matchMedia&&(null==oi&&(oi=me.matchMedia("(prefers-reduced-motion: reduce)")),oi.matches)}};function so(l,s,u){u[l]&&-1!==u[l].indexOf(s)||(u[l]=u[l]||[],u[l].push(s))}function Ns(l,s,u){if(u&&u[l]){const p=u[l].indexOf(s);-1!==p&&u[l].splice(p,1)}}class Lo{constructor(s,u={}){le(this,u),this.type=s}}class no extends Lo{constructor(s,u={}){super("error",le({error:s},u))}}class li{on(s,u){return this._listeners=this._listeners||{},so(s,u,this._listeners),this}off(s,u){return Ns(s,u,this._listeners),Ns(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},so(s,u,this._oneTimeListeners),this):new Promise(p=>this.once(s,p))}fire(s,u){"string"==typeof s&&(s=new Lo(s,u||{}));const p=s.type;if(this.listens(p)){s.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const P of y)P.call(this,s);const E=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const P of E)Ns(p,P,this._oneTimeListeners),P.call(this,s);const I=this._eventedParent;I&&(le(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),I.fire(s))}else s instanceof no&&console.error(s.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}var Mn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function gl(l,...s){for(const u of s)for(const p in u)l[p]=u[p];return l}function vs(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function bs(l){if(Array.isArray(l))return l.map(bs);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const s={};for(const u in l)s[u]=bs(l[u]);return s}return vs(l)}class Mo extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}var El=Mo;class Ze{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[p,y]of u)this.bindings[p]=y}concat(s){return new Ze(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}var $t=Ze;const yt={kind:"null"},rt={kind:"number"},Tt={kind:"string"},Nt={kind:"boolean"},ue={kind:"color"},ye={kind:"object"},nt={kind:"value"},xt={kind:"collator"},Le={kind:"formatted"},dt={kind:"resolvedImage"};function Rt(l,s){return{kind:"array",itemType:l,N:s}}function sn(l){if("array"===l.kind){const s=sn(l.itemType);return"number"==typeof l.N?`array<${s}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${s}>`}return l.kind}const yn=[yt,rt,Tt,Nt,ue,Le,ye,Rt(nt),dt];function Et(l,s){if("error"===s.kind)return null;if("array"===l.kind){if("array"===s.kind&&(0===s.N&&"value"===s.itemType.kind||!Et(l.itemType,s.itemType))&&("number"!=typeof l.N||l.N===s.N))return null}else{if(l.kind===s.kind)return null;if("value"===l.kind)for(const u of yn)if(!Et(u,s))return null}return`Expected ${sn(l)} but found ${sn(s)} instead.`}function kn(l,s){return s.some(u=>u.kind===l.kind)}function zr(l,s){return s.some(u=>"null"===u?null===l:"array"===u?Array.isArray(l):"object"===u?l&&!Array.isArray(l)&&"object"==typeof l:u===typeof l)}var ui,ao={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _o(l){return(l=Math.round(l))<0?0:l>255?255:l}function tn(l){return _o("%"===l[l.length-1]?parseFloat(l)/100*255:parseInt(l))}function $i(l){return(s="%"===l[l.length-1]?parseFloat(l)/100:parseFloat(l))<0?0:s>1?1:s;var s}function jr(l,s,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?l+(s-l)*u*6:2*u<1?s:3*u<2?l+(s-l)*(2/3-u)*6:l}try{ui={}.parseCSSColor=function(l){var s,u=l.replace(/ /g,"").toLowerCase();if(u in ao)return ao[u].slice();if("#"===u[0])return 4===u.length?(s=parseInt(u.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:7===u.length&&(s=parseInt(u.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var p=u.indexOf("("),y=u.indexOf(")");if(-1!==p&&y+1===u.length){var E=u.substr(0,p),I=u.substr(p+1,y-(p+1)).split(","),P=1;switch(E){case"rgba":if(4!==I.length)return null;P=$i(I.pop());case"rgb":return 3!==I.length?null:[tn(I[0]),tn(I[1]),tn(I[2]),P];case"hsla":if(4!==I.length)return null;P=$i(I.pop());case"hsl":if(3!==I.length)return null;var O=(parseFloat(I[0])%360+360)%360/360,N=$i(I[1]),$=$i(I[2]),U=$<=.5?$*(N+1):$+N-$*N,H=2*$-U;return[_o(255*jr(H,U,O+1/3)),_o(255*jr(H,U,O)),_o(255*jr(H,U,O-1/3)),P];default:return null}}return null}}catch{}class Mi{constructor(s,u,p,y=1){this.r=s,this.g=u,this.b=p,this.a=y}static parse(s){if(!s)return;if(s instanceof Mi)return s;if("string"!=typeof s)return;const u=ui(s);return u?new Mi(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[s,u,p,y]=this.toArray();return`rgba(${Math.round(s)},${Math.round(u)},${Math.round(p)},${y})`}toArray(){const{r:s,g:u,b:p,a:y}=this;return 0===y?[0,0,0,0]:[255*s/y,255*u/y,255*p/y,y]}toArray01(){const{r:s,g:u,b:p,a:y}=this;return 0===y?[0,0,0,0]:[s/y,u/y,p/y,y]}toArray01PremultipliedAlpha(){const{r:s,g:u,b:p,a:y}=this;return[s,u,p,y]}}Mi.black=new Mi(0,0,0,1),Mi.white=new Mi(1,1,1,1),Mi.transparent=new Mi(0,0,0,0),Mi.red=new Mi(1,0,0,1),Mi.blue=new Mi(0,0,1,1);var Ds=Mi;class Cl{constructor(s,u,p){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Su{constructor(s,u,p,y,E){this.text=s.normalize?s.normalize():s,this.image=u,this.scale=p,this.fontStack=y,this.textColor=E}}class Ks{constructor(s){this.sections=s}static fromString(s){return new Ks([new Su(s,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(s=>0!==s.text.length||s.image&&0!==s.image.name.length)}static factory(s){return s instanceof Ks?s:Ks.fromString(s)}toString(){return 0===this.sections.length?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const u of this.sections){if(u.image){s.push(["image",u.image.name]);continue}s.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),s.push(p)}return s}}class Pi{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Pi({name:s,available:!1}):null}serialize(){return["image",this.name]}}function bf(l,s,u,p){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof s&&s>=0&&s<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[l,s,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[l,s,u,p]:[l,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ka(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof Ds||l instanceof Cl||l instanceof Ks||l instanceof Pi)return!0;if(Array.isArray(l)){for(const s of l)if(!ka(s))return!1;return!0}if("object"==typeof l){for(const s in l)if(!ka(l[s]))return!1;return!0}return!1}function Ea(l){if(null===l)return yt;if("string"==typeof l)return Tt;if("boolean"==typeof l)return Nt;if("number"==typeof l)return rt;if(l instanceof Ds)return ue;if(l instanceof Cl)return xt;if(l instanceof Ks)return Le;if(l instanceof Pi)return dt;if(Array.isArray(l)){const s=l.length;let u;for(const p of l){const y=Ea(p);if(u){if(u===y)continue;u=nt;break}u=y}return Rt(u||nt,s)}return ye}function Gl(l){const s=typeof l;return null===l?"":"string"===s||"number"===s||"boolean"===s?String(l):l instanceof Ds||l instanceof Ks||l instanceof Pi?l.toString():JSON.stringify(l)}class Hs{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(2!==s.length)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!ka(s[1]))return u.error("invalid value");const p=s[1];let y=Ea(p);const E=u.expectedType;return"array"!==y.kind||0!==y.N||!E||"array"!==E.kind||"number"==typeof E.N&&0!==E.N||(y=E),new Hs(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ds?["rgba"].concat(this.value.toArray()):this.value instanceof Ks?this.value.serialize():this.value}}var Ya=Hs,Ka=class{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}};const xc={string:Tt,number:rt,boolean:Nt,object:ye};class au{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let p,y=1;const E=s[0];if("array"===E){let P,O;if(s.length>2){const N=s[1];if("string"!=typeof N||!(N in xc)||"object"===N)return u.error('The item type argument of "array" must be one of string, number, boolean',1);P=xc[N],y++}else P=nt;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=s[2],y++}p=Rt(P,O)}else p=xc[E];const I=[];for(;y<s.length;y++){const P=u.parse(s[y],y,nt);if(!P)return null;I.push(P)}return new au(p,I)}evaluate(s){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(s);if(!Et(this.type,Ea(p)))return p;if(u===this.args.length-1)throw new Ka(`Expected value to be of type ${sn(this.type)}, but found ${sn(Ea(p))} instead.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,u=[s.kind];if("array"===s.kind){const p=s.itemType;if("string"===p.kind||"number"===p.kind||"boolean"===p.kind){u.push(p.kind);const y=s.N;("number"==typeof y||this.args.length>1)&&u.push(y)}}return u.concat(this.args.map(p=>p.serialize()))}}var Hl=au;class wc{constructor(s){this.type=Le,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const p=s[1];if(!Array.isArray(p)&&"object"==typeof p)return u.error("First argument must be an image or text section.");const y=[];let E=!1;for(let I=1;I<=s.length-1;++I){const P=s[I];if(E&&"object"==typeof P&&!Array.isArray(P)){E=!1;let O=null;if(P["font-scale"]&&(O=u.parse(P["font-scale"],1,rt),!O))return null;let N=null;if(P["text-font"]&&(N=u.parse(P["text-font"],1,Rt(Tt)),!N))return null;let $=null;if(P["text-color"]&&($=u.parse(P["text-color"],1,ue),!$))return null;const U=y[y.length-1];U.scale=O,U.font=N,U.textColor=$}else{const O=u.parse(s[I],1,nt);if(!O)return null;const N=O.type.kind;if("string"!==N&&"value"!==N&&"null"!==N&&"resolvedImage"!==N)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,y.push({content:O,scale:null,font:null,textColor:null})}}return new wc(y)}evaluate(s){return new Ks(this.sections.map(u=>{const p=u.content.evaluate(s);return Ea(p)===dt?new Su("",p,null,null,null):new Su(Gl(p),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const u of this.sections){s.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),s.push(p)}return s}}class da{constructor(s){this.type=dt,this.input=s}static parse(s,u){if(2!==s.length)return u.error("Expected two arguments.");const p=u.parse(s[1],1,Tt);return p?new da(p):u.error("No image name provided.")}evaluate(s){const u=this.input.evaluate(s),p=Pi.fromString(u);return p&&s.availableImages&&(p.available=s.availableImages.indexOf(u)>-1),p}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Vc={"to-boolean":Nt,"to-color":ue,"to-number":rt,"to-string":Tt};class xi{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const p=s[0];if(("to-boolean"===p||"to-string"===p)&&2!==s.length)return u.error("Expected one argument.");const y=Vc[p],E=[];for(let I=1;I<s.length;I++){const P=u.parse(s[I],I,nt);if(!P)return null;E.push(P)}return new xi(y,E)}evaluate(s){if("boolean"===this.type.kind)return!!this.args[0].evaluate(s);if("color"===this.type.kind){let u,p;for(const y of this.args){if(u=y.evaluate(s),p=null,u instanceof Ds)return u;if("string"==typeof u){const E=s.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:bf(u[0],u[1],u[2],u[3]),!p))return new Ds(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Ka(p||`Could not parse color from value '${"string"==typeof u?u:String(JSON.stringify(u))}'`)}if("number"===this.type.kind){let u=null;for(const p of this.args){if(u=p.evaluate(s),null===u)return 0;const y=Number(u);if(!isNaN(y))return y}throw new Ka(`Could not convert ${JSON.stringify(u)} to number.`)}return"formatted"===this.type.kind?Ks.fromString(Gl(this.args[0].evaluate(s))):"resolvedImage"===this.type.kind?Pi.fromString(Gl(this.args[0].evaluate(s))):Gl(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if("formatted"===this.type.kind)return new wc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new da(this.args[0]).serialize();const s=[`to-${this.type.kind}`];return this.eachChild(u=>{s.push(u.serialize())}),s}}var qs=xi;const Fs=["Unknown","Point","LineString","Polygon"];var xf=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Fs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const l=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:u,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*s-l[0])+this.featureDistanceData.bearing[1]*(p*s-l[1])}return 0}parseColor(l){let s=this._parseColorCache[l];return s||(s=this._parseColorCache[l]=Ds.parse(l)),s}};class yr{constructor(s,u,p,y){this.name=s,this.type=u,this._evaluate=p,this.args=y}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,u){const p=s[0],y=yr.definitions[p];if(!y)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(y)?y[0]:y.type,I=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,P=I.filter(([N])=>!Array.isArray(N)||N.length===s.length-1);let O=null;for(const[N,$]of P){O=new Fh(u.registry,u.path,null,u.scope);const U=[];let H=!1;for(let Y=1;Y<s.length;Y++){const se=s[Y],be=Array.isArray(N)?N[Y-1]:N.type,Ge=O.parse(se,1+U.length,be);if(!Ge){H=!0;break}U.push(Ge)}if(!H)if(Array.isArray(N)&&N.length!==U.length)O.error(`Expected ${N.length} arguments, but found ${U.length} instead.`);else{for(let Y=0;Y<U.length;Y++){const se=Array.isArray(N)?N[Y]:N.type,be=U[Y];O.concat(Y+1).checkSubtype(se,be.type)}if(0===O.errors.length)return new yr(p,E,$,U)}}if(1===P.length)u.errors.push(...O.errors);else{const N=(P.length?P:I).map(([U])=>{return H=U,Array.isArray(H)?`(${H.map(sn).join(", ")})`:`(${sn(H.type)}...)`;var H}).join(" | "),$=[];for(let U=1;U<s.length;U++){const H=u.parse(s[U],1+$.length);if(!H)return null;$.push(sn(H.type))}u.error(`Expected arguments of type ${N}, but found (${$.join(", ")}) instead.`)}return null}static register(s,u){yr.definitions=u;for(const p in u)s[p]=yr}}var Uc=yr;class Io{constructor(s,u,p){this.type=xt,this.locale=p,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(2!==s.length)return u.error("Expected one argument.");const p=s[1];if("object"!=typeof p||Array.isArray(p))return u.error("Collator options argument must be an object.");const y=u.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,Nt);if(!y)return null;const E=u.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,Nt);if(!E)return null;let I=null;return p.locale&&(I=u.parse(p.locale,1,Tt),!I)?null:new Io(y,E,I)}evaluate(s){return new Cl(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}const jc=8192;function sl(l,s){l[0]=Math.min(l[0],s[0]),l[1]=Math.min(l[1],s[1]),l[2]=Math.max(l[2],s[0]),l[3]=Math.max(l[3],s[1])}function oc(l,s){return!(l[0]<=s[0]||l[2]>=s[2]||l[1]<=s[1]||l[3]>=s[3])}function qa(l,s){const u=(180+l[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(u*y*jc),Math.round(p*y*jc)]}function Iu(l,s,u){const p=l[0]-s[0],y=l[1]-s[1],E=l[0]-u[0],I=l[1]-u[1];return p*I-E*y==0&&p*E<=0&&y*I<=0}function Ol(l,s){let u=!1;for(let I=0,P=s.length;I<P;I++){const O=s[I];for(let N=0,$=O.length;N<$-1;N++){if(Iu(l,O[N],O[N+1]))return!1;(y=O[N])[1]>(p=l)[1]!=(E=O[N+1])[1]>p[1]&&p[0]<(E[0]-y[0])*(p[1]-y[1])/(E[1]-y[1])+y[0]&&(u=!u)}}var p,y,E;return u}function uh(l,s){for(let u=0;u<s.length;u++)if(Ol(l,s[u]))return!0;return!1}function Ws(l,s,u,p){const y=p[0]-u[0],E=p[1]-u[1],I=(l[0]-u[0])*E-y*(l[1]-u[1]),P=(s[0]-u[0])*E-y*(s[1]-u[1]);return I>0&&P<0||I<0&&P>0}function ii(l,s,u){for(const N of u)for(let $=0;$<N.length-1;++$)if((P=[(I=N[$+1])[0]-(E=N[$])[0],I[1]-E[1]])[0]*(O=[(y=s)[0]-(p=l)[0],y[1]-p[1]])[1]-P[1]*O[0]!=0&&Ws(p,y,E,I)&&Ws(E,I,p,y))return!0;var p,y,E,I,P,O;return!1}function ti(l,s){for(let u=0;u<l.length;++u)if(!Ol(l[u],s))return!1;for(let u=0;u<l.length-1;++u)if(ii(l[u],l[u+1],s))return!1;return!0}function ud(l,s){for(let u=0;u<s.length;u++)if(ti(l,s[u]))return!0;return!1}function _l(l,s,u){const p=[];for(let y=0;y<l.length;y++){const E=[];for(let I=0;I<l[y].length;I++){const P=qa(l[y][I],u);sl(s,P),E.push(P)}p.push(E)}return p}function na(l,s,u){const p=[];for(let y=0;y<l.length;y++){const E=_l(l[y],s,u);p.push(E)}return p}function Tu(l,s,u,p){if(l[0]<u[0]||l[0]>u[2]){const y=.5*p;let E=l[0]-u[0]>y?-p:u[0]-l[0]>y?p:0;0===E&&(E=l[0]-u[2]>y?-p:u[2]-l[0]>y?p:0),l[0]+=E}sl(s,l)}function wf(l,s,u,p){const y=Math.pow(2,p.z)*jc,E=[p.x*jc,p.y*jc],I=[];if(!l)return I;for(const P of l)for(const O of P){const N=[O.x+E[0],O.y+E[1]];Tu(N,s,u,y),I.push(N)}return I}function xs(l,s,u,p){const y=Math.pow(2,p.z)*jc,E=[p.x*jc,p.y*jc],I=[];if(!l)return I;for(const O of l){const N=[];for(const $ of O){const U=[$.x+E[0],$.y+E[1]];sl(s,U),N.push(U)}I.push(N)}if(s[2]-s[0]<=y/2){(P=s)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const O of I)for(const N of O)Tu(N,s,u,y)}var P;return I}class Ud{constructor(s,u){this.type=Nt,this.geojson=s,this.geometries=u}static parse(s,u){if(2!==s.length)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(ka(s[1])){const p=s[1];if("FeatureCollection"===p.type)for(let y=0;y<p.features.length;++y){const E=p.features[y].geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new Ud(p,p.features[y].geometry)}else if("Feature"===p.type){const y=p.geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new Ud(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new Ud(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(u,p){const y=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(!I)return!1;if("Polygon"===p.type){const P=_l(p.coordinates,E,I),O=wf(u.geometry(),y,E,I);if(!oc(y,E))return!1;for(const N of O)if(!Ol(N,P))return!1}if("MultiPolygon"===p.type){const P=na(p.coordinates,E,I),O=wf(u.geometry(),y,E,I);if(!oc(y,E))return!1;for(const N of O)if(!uh(N,P))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(u,p){const y=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(!I)return!1;if("Polygon"===p.type){const P=_l(p.coordinates,E,I),O=xs(u.geometry(),y,E,I);if(!oc(y,E))return!1;for(const N of O)if(!ti(N,P))return!1}if("MultiPolygon"===p.type){const P=na(p.coordinates,E,I),O=xs(u.geometry(),y,E,I);if(!oc(y,E))return!1;for(const N of O)if(!ud(N,P))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var vo=Ud;function Ll(l){if(l instanceof Uc&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof vo)return!1;let s=!0;return l.eachChild(u=>{s&&!Ll(u)&&(s=!1)}),s}function To(l){if(l instanceof Uc&&"feature-state"===l.name)return!1;let s=!0;return l.eachChild(u=>{s&&!To(u)&&(s=!1)}),s}function lu(l,s){if(l instanceof Uc&&s.indexOf(l.name)>=0)return!1;let u=!0;return l.eachChild(p=>{u&&!lu(p,s)&&(u=!1)}),u}class al{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(2!==s.length||"string"!=typeof s[1])return u.error("'var' expression requires exactly one string literal argument.");const p=s[1];return u.scope.has(p)?new al(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var lm=al;class qi{constructor(s,u=[],p,y=new $t,E=[]){this.registry=s,this.path=u,this.key=u.map(I=>`[${I}]`).join(""),this.scope=y,this.errors=E,this.expectedType=p}parse(s,u,p,y,E={}){return u?this.concat(u,p,y)._parse(s,E):this._parse(s,E)}_parse(s,u){function p(y,E,I){return"assert"===I?new Hl(E,[y]):"coerce"===I?new qs(E,[y]):y}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=s[0];if("string"!=typeof y)return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[y];if(E){let I=E.parse(s,this);if(!I)return null;if(this.expectedType){const P=this.expectedType,O=I.type;if("string"!==P.kind&&"number"!==P.kind&&"boolean"!==P.kind&&"object"!==P.kind&&"array"!==P.kind||"value"!==O.kind)if("color"!==P.kind&&"formatted"!==P.kind&&"resolvedImage"!==P.kind||"value"!==O.kind&&"string"!==O.kind){if(this.checkSubtype(P,O))return null}else I=p(I,P,u.typeAnnotation||"coerce");else I=p(I,P,u.typeAnnotation||"assert")}if(!(I instanceof Ya)&&"resolvedImage"!==I.type.kind&&As(I)){const P=new xf;try{I=new Ya(I.type,I.evaluate(P))}catch(O){return this.error(O.message),null}}return I}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,p){const y="number"==typeof s?this.path.concat(s):this.path,E=p?this.scope.concat(p):this.scope;return new qi(this.registry,y,u||null,E,this.errors)}error(s,...u){const p=`${this.key}${u.map(y=>`[${y}]`).join("")}`;this.errors.push(new El(p,s))}checkSubtype(s,u){const p=Et(s,u);return p&&this.error(p),p}}var Fh=qi;function As(l){if(l instanceof lm)return As(l.boundExpression);if(l instanceof Uc&&"error"===l.name||l instanceof Io||l instanceof vo)return!1;const s=l instanceof qs||l instanceof Hl;let u=!0;return l.eachChild(p=>{u=s?u&&As(p):u&&p instanceof Ya}),!!u&&Ll(l)&&lu(l,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function hd(l,s){const u=l.length-1;let p,y,E=0,I=u,P=0;for(;E<=I;)if(P=Math.floor((E+I)/2),p=l[P],y=l[P+1],p<=s){if(P===u||s<y)return P;E=P+1}else{if(!(p>s))throw new Ka("Input is not a number.");I=P-1}return 0}class yl{constructor(s,u,p){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[y,E]of p)this.labels.push(y),this.outputs.push(E)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(s[1],1,rt);if(!p)return null;const y=[];let E=null;u.expectedType&&"value"!==u.expectedType.kind&&(E=u.expectedType);for(let I=1;I<s.length;I+=2){const P=1===I?-1/0:s[I],O=s[I+1],N=I,$=I+1;if("number"!=typeof P)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(y.length&&y[y.length-1][0]>=P)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const U=u.parse(O,$,E);if(!U)return null;E=E||U.type,y.push([P,U])}return new yl(E,p,y)}evaluate(s){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(s);const y=this.input.evaluate(s);if(y<=u[0])return p[0].evaluate(s);const E=u.length;return y>=u[E-1]?p[E-1].evaluate(s):p[hd(u,y)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s}}var Bh=yl;function lo(l,s,u){return l*(1-u)+s*u}var Ec=Object.freeze({__proto__:null,array:function(l,s,u){return l.map((p,y)=>lo(p,s[y],u))},color:function(l,s,u){return new Ds(lo(l.r,s.r,u),lo(l.g,s.g,u),lo(l.b,s.b,u),lo(l.a,s.a,u))},number:lo});const dd=4/29,Nl=6/29,Sl=3*Nl*Nl,Ca=Nl*Nl*Nl,L_=Math.PI/180,hh=180/Math.PI;function Du(l){return l>Ca?Math.pow(l,1/3):l/Sl+dd}function pn(l){return l>Nl?l*l*l:Sl*(l-dd)}function Au(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function rr(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Wl(l){const s=rr(l.r),u=rr(l.g),p=rr(l.b),y=Du((.4124564*s+.3575761*u+.1804375*p)/.95047),E=Du((.2126729*s+.7151522*u+.072175*p)/1);return{l:116*E-16,a:500*(y-E),b:200*(E-Du((.0193339*s+.119192*u+.9503041*p)/1.08883)),alpha:l.a}}function Cc(l){let s=(l.l+16)/116,u=isNaN(l.a)?s:s+l.a/500,p=isNaN(l.b)?s:s-l.b/200;return s=1*pn(s),u=.95047*pn(u),p=1.08883*pn(p),new Ds(Au(3.2404542*u-1.5371385*s-.4985314*p),Au(-.969266*u+1.8760108*s+.041556*p),Au(.0556434*u-.2040259*s+1.0572252*p),l.alpha)}function cu(l,s,u){const p=s-l;return l+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const Sc={forward:Wl,reverse:Cc,interpolate:function(l,s,u){return{l:lo(l.l,s.l,u),a:lo(l.a,s.a,u),b:lo(l.b,s.b,u),alpha:lo(l.alpha,s.alpha,u)}}},fa={forward:function(l){const{l:s,a:u,b:p}=Wl(l),y=Math.atan2(p,u)*hh;return{h:y<0?y+360:y,c:Math.sqrt(u*u+p*p),l:s,alpha:l.a}},reverse:function(l){const s=l.h*L_,u=l.c;return Cc({l:l.l,a:Math.cos(s)*u,b:Math.sin(s)*u,alpha:l.alpha})},interpolate:function(l,s,u){return{h:cu(l.h,s.h,u),c:lo(l.c,s.c,u),l:lo(l.l,s.l,u),alpha:lo(l.alpha,s.alpha,u)}}};var lp=Object.freeze({__proto__:null,hcl:fa,lab:Sc});class Xl{constructor(s,u,p,y,E){this.type=s,this.operator=u,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[I,P]of E)this.labels.push(I),this.outputs.push(P)}static interpolationFactor(s,u,p,y){let E=0;if("exponential"===s.name)E=Ra(u,s.base,p,y);else if("linear"===s.name)E=Ra(u,1,p,y);else if("cubic-bezier"===s.name){const I=s.controlPoints;E=new ne(I[0],I[1],I[2],I[3]).solve(Ra(u,1,p,y))}return E}static parse(s,u){let[p,y,E,...I]=s;if(!Array.isArray(y)||0===y.length)return u.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){const N=y[1];if("number"!=typeof N)return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:N}}else{if("cubic-bezier"!==y[0])return u.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const N=y.slice(1);if(4!==N.length||N.some($=>"number"!=typeof $||$<0||$>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:N}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,rt),!E)return null;const P=[];let O=null;"interpolate-hcl"===p||"interpolate-lab"===p?O=ue:u.expectedType&&"value"!==u.expectedType.kind&&(O=u.expectedType);for(let N=0;N<I.length;N+=2){const $=I[N],U=I[N+1],H=N+3,Y=N+4;if("number"!=typeof $)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(P.length&&P[P.length-1][0]>=$)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const se=u.parse(U,Y,O);if(!se)return null;O=O||se.type,P.push([$,se])}return"number"===O.kind||"color"===O.kind||"array"===O.kind&&"number"===O.itemType.kind&&"number"==typeof O.N?new Xl(O,p,y,E,P):u.error(`Type ${sn(O)} is not interpolatable.`)}evaluate(s){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(s);const y=this.input.evaluate(s);if(y<=u[0])return p[0].evaluate(s);const E=u.length;if(y>=u[E-1])return p[E-1].evaluate(s);const I=hd(u,y),P=Xl.interpolationFactor(this.interpolation,y,u[I],u[I+1]),O=p[I].evaluate(s),N=p[I+1].evaluate(s);return"interpolate"===this.operator?Ec[this.type.kind.toLowerCase()](O,N,P):"interpolate-hcl"===this.operator?fa.reverse(fa.interpolate(fa.forward(O),fa.forward(N),P)):Sc.reverse(Sc.interpolate(Sc.forward(O),Sc.forward(N),P))}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,s,this.input.serialize()];for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function Ra(l,s,u,p){const y=p-u,E=l-u;return 0===y?0:1===s?E/y:(Math.pow(s,E)-1)/(Math.pow(s,y)-1)}var Bs=Xl;class Sa{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let p=null;const y=u.expectedType;y&&"value"!==y.kind&&(p=y);const E=[];for(const P of s.slice(1)){const O=u.parse(P,1+E.length,p,void 0,{typeAnnotation:"omit"});if(!O)return null;p=p||O.type,E.push(O)}const I=y&&E.some(P=>Et(y,P.type));return new Sa(I?nt:p,E)}evaluate(s){let u,p=null,y=0;for(const E of this.args){if(y++,p=E.evaluate(s),p&&p instanceof Pi&&!p.available&&(u||(u=p),p=null,y===this.args.length))return u;if(null!==p)break}return p}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(u=>{s.push(u.serialize())}),s}}var Po=Sa;class Oa{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const p=[];for(let E=1;E<s.length-1;E+=2){const I=s[E];if("string"!=typeof I)return u.error(`Expected string, but found ${typeof I} instead.`,E);if(/[^a-zA-Z0-9_]/.test(I))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const P=u.parse(s[E+1],E+1);if(!P)return null;p.push([I,P])}const y=u.parse(s[s.length-1],s.length-1,u.expectedType,p);return y?new Oa(p,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[u,p]of this.bindings)s.push(u,p.serialize());return s.push(this.result.serialize()),s}}var Ef=Oa;class Vu{constructor(s,u,p){this.type=s,this.index=u,this.input=p}static parse(s,u){if(3!==s.length)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,rt),y=u.parse(s[2],2,Rt(u.expectedType||nt));return p&&y?new Vu(y.type.itemType,p,y):null}evaluate(s){const u=this.index.evaluate(s),p=this.input.evaluate(s);if(u<0)throw new Ka(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new Ka(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new Ka(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var fd=Vu;class uu{constructor(s,u){this.type=Nt,this.needle=s,this.haystack=u}static parse(s,u){if(3!==s.length)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,nt),y=u.parse(s[2],2,nt);return p&&y?kn(p.type,[Nt,Tt,rt,yt,nt])?new uu(p,y):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${sn(p.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),p=this.haystack.evaluate(s);if(null==p)return!1;if(!zr(u,["boolean","string","number","null"]))throw new Ka(`Expected first argument to be of type boolean, string, number or null, but found ${sn(Ea(u))} instead.`);if(!zr(p,["string","array"]))throw new Ka(`Expected second argument to be of type array or string, but found ${sn(Ea(p))} instead.`);return p.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var dh=uu;class hu{constructor(s,u,p){this.type=rt,this.needle=s,this.haystack=u,this.fromIndex=p}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,nt),y=u.parse(s[2],2,nt);if(!p||!y)return null;if(!kn(p.type,[Nt,Tt,rt,yt,nt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${sn(p.type)} instead`);if(4===s.length){const E=u.parse(s[3],3,rt);return E?new hu(p,y,E):null}return new hu(p,y)}evaluate(s){const u=this.needle.evaluate(s),p=this.haystack.evaluate(s);if(!zr(u,["boolean","string","number","null"]))throw new Ka(`Expected first argument to be of type boolean, string, number or null, but found ${sn(Ea(u))} instead.`);if(!zr(p,["string","array"]))throw new Ka(`Expected second argument to be of type array or string, but found ${sn(Ea(p))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(s);return p.indexOf(u,y)}return p.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Gc=hu;class Ia{constructor(s,u,p,y,E,I){this.inputType=s,this.type=u,this.input=p,this.cases=y,this.outputs=E,this.otherwise=I}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let p,y;u.expectedType&&"value"!==u.expectedType.kind&&(y=u.expectedType);const E={},I=[];for(let N=2;N<s.length-1;N+=2){let $=s[N];const U=s[N+1];Array.isArray($)||($=[$]);const H=u.concat(N);if(0===$.length)return H.error("Expected at least one branch label.");for(const se of $){if("number"!=typeof se&&"string"!=typeof se)return H.error("Branch labels must be numbers or strings.");if("number"==typeof se&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof se&&Math.floor(se)!==se)return H.error("Numeric branch labels must be integer values.");if(p){if(H.checkSubtype(p,Ea(se)))return null}else p=Ea(se);if(void 0!==E[String(se)])return H.error("Branch labels must be unique.");E[String(se)]=I.length}const Y=u.parse(U,N,y);if(!Y)return null;y=y||Y.type,I.push(Y)}const P=u.parse(s[1],1,nt);if(!P)return null;const O=u.parse(s[s.length-1],s.length-1,y);return O?"value"!==P.type.kind&&u.concat(1).checkSubtype(p,P.type)?null:new Ia(p,y,P,E,I,O):null}evaluate(s){const u=this.input.evaluate(s);return(Ea(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],y={};for(const I of u){const P=y[this.cases[I]];void 0===P?(y[this.cases[I]]=p.length,p.push([this.cases[I],[I]])):p[P][1].push(I)}const E=I=>"number"===this.inputType.kind?Number(I):I;for(const[I,P]of p)s.push(1===P.length?E(P[0]):P.map(E)),s.push(this.outputs[I].serialize());return s.push(this.otherwise.serialize()),s}}var pd=Ia;class Qa{constructor(s,u,p){this.type=s,this.branches=u,this.otherwise=p}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&"value"!==u.expectedType.kind&&(p=u.expectedType);const y=[];for(let I=1;I<s.length-1;I+=2){const P=u.parse(s[I],I,Nt);if(!P)return null;const O=u.parse(s[I+1],I+1,p);if(!O)return null;y.push([P,O]),p=p||O.type}const E=u.parse(s[s.length-1],s.length-1,p);return E?new Qa(p,y,E):null}evaluate(s){for(const[u,p]of this.branches)if(u.evaluate(s))return p.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,p]of this.branches)s(u),s(p);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(u=>{s.push(u.serialize())}),s}}var Zl=Qa;class Hc{constructor(s,u,p,y){this.type=s,this.input=u,this.beginIndex=p,this.endIndex=y}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,nt),y=u.parse(s[2],2,rt);if(!p||!y)return null;if(!kn(p.type,[Rt(nt),Tt,nt]))return u.error(`Expected first argument to be of type array or string, but found ${sn(p.type)} instead`);if(4===s.length){const E=u.parse(s[3],3,rt);return E?new Hc(p.type,p,y,E):null}return new Hc(p.type,p,y)}evaluate(s){const u=this.input.evaluate(s),p=this.beginIndex.evaluate(s);if(!zr(u,["string","array"]))throw new Ka(`Expected first argument to be of type array or string, but found ${sn(Ea(u))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(s);return u.slice(p,y)}return u.slice(p)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Cf=Hc;function Uu(l,s){return"=="===l||"!="===l?"boolean"===s.kind||"string"===s.kind||"number"===s.kind||"null"===s.kind||"value"===s.kind:"string"===s.kind||"number"===s.kind||"value"===s.kind}function Mu(l,s,u,p){return 0===p.compare(s,u)}function sc(l,s,u){const p="=="!==l&&"!="!==l;return class rX{constructor(E,I,P){this.type=Nt,this.lhs=E,this.rhs=I,this.collator=P,this.hasUntypedArgument="value"===E.type.kind||"value"===I.type.kind}static parse(E,I){if(3!==E.length&&4!==E.length)return I.error("Expected two or three arguments.");const P=E[0];let O=I.parse(E[1],1,nt);if(!O)return null;if(!Uu(P,O.type))return I.concat(1).error(`"${P}" comparisons are not supported for type '${sn(O.type)}'.`);let N=I.parse(E[2],2,nt);if(!N)return null;if(!Uu(P,N.type))return I.concat(2).error(`"${P}" comparisons are not supported for type '${sn(N.type)}'.`);if(O.type.kind!==N.type.kind&&"value"!==O.type.kind&&"value"!==N.type.kind)return I.error(`Cannot compare types '${sn(O.type)}' and '${sn(N.type)}'.`);p&&("value"===O.type.kind&&"value"!==N.type.kind?O=new Hl(N.type,[O]):"value"!==O.type.kind&&"value"===N.type.kind&&(N=new Hl(O.type,[N])));let $=null;if(4===E.length){if("string"!==O.type.kind&&"string"!==N.type.kind&&"value"!==O.type.kind&&"value"!==N.type.kind)return I.error("Cannot use collator to compare non-string types.");if($=I.parse(E[3],3,xt),!$)return null}return new rX(O,N,$)}evaluate(E){const I=this.lhs.evaluate(E),P=this.rhs.evaluate(E);if(p&&this.hasUntypedArgument){const O=Ea(I),N=Ea(P);if(O.kind!==N.kind||"string"!==O.kind&&"number"!==O.kind)throw new Ka(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${O.kind}, ${N.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const O=Ea(I),N=Ea(P);if("string"!==O.kind||"string"!==N.kind)return s(E,I,P)}return this.collator?u(E,I,P,this.collator.evaluate(E)):s(E,I,P)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}serialize(){const E=[l];return this.eachChild(I=>{E.push(I.serialize())}),E}}}const ll=sc("==",function(l,s,u){return s===u},Mu),La=sc("!=",function(l,s,u){return s!==u},function(l,s,u,p){return!Mu(0,s,u,p)}),Il=sc("<",function(l,s,u){return s<u},function(l,s,u,p){return p.compare(s,u)<0}),cm=sc(">",function(l,s,u){return s>u},function(l,s,u,p){return p.compare(s,u)>0}),fh=sc("<=",function(l,s,u){return s<=u},function(l,s,u,p){return p.compare(s,u)<=0}),zh=sc(">=",function(l,s,u){return s>=u},function(l,s,u,p){return p.compare(s,u)>=0});class Na{constructor(s,u,p,y,E,I){this.type=Tt,this.number=s,this.locale=u,this.currency=p,this.unit=y,this.minFractionDigits=E,this.maxFractionDigits=I}static parse(s,u){if(3!==s.length)return u.error("Expected two arguments.");const p=u.parse(s[1],1,rt);if(!p)return null;const y=s[2];if("object"!=typeof y||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");let E=null;if(y.locale&&(E=u.parse(y.locale,1,Tt),!E))return null;let I=null;if(y.currency&&(I=u.parse(y.currency,1,Tt),!I))return null;let P=null;if(y.unit&&(P=u.parse(y.unit,1,Tt),!P))return null;let O=null;if(y["min-fraction-digits"]&&(O=u.parse(y["min-fraction-digits"],1,rt),!O))return null;let N=null;return y["max-fraction-digits"]&&(N=u.parse(y["max-fraction-digits"],1,rt),!N)?null:new Na(p,E,I,P,O,N)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class Ta{constructor(s){this.type=rt,this.input=s}static parse(s,u){if(2!==s.length)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const p=u.parse(s[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?u.error(`Expected argument of type string or array, but found ${sn(p.type)} instead.`):new Ta(p):null}evaluate(s){const u=this.input.evaluate(s);if("string"==typeof u||Array.isArray(u))return u.length;throw new Ka(`Expected value to be of type string or array, but found ${sn(Ea(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(u=>{s.push(u.serialize())}),s}}const Ic={"==":ll,"!=":La,">":cm,"<":Il,">=":zh,"<=":fh,array:Hl,at:fd,boolean:Hl,case:Zl,coalesce:Po,collator:Io,format:wc,image:da,in:dh,"index-of":Gc,interpolate:Bs,"interpolate-hcl":Bs,"interpolate-lab":Bs,length:Ta,let:Ef,literal:Ya,match:pd,number:Hl,"number-format":Na,object:Hl,slice:Cf,step:Bh,string:Hl,"to-boolean":qs,"to-color":qs,"to-number":qs,"to-string":qs,var:lm,within:vo};function ac(l,[s,u,p,y]){s=s.evaluate(l),u=u.evaluate(l),p=p.evaluate(l);const E=y?y.evaluate(l):1,I=bf(s,u,p,E);if(I)throw new Ka(I);return new Ds(s/255*E,u/255*E,p/255*E,E)}function Pu(l,s){return l in s}function ju(l,s){const u=s[l];return void 0===u?null:u}function Zn(l){return{type:l}}Uc.register(Ic,{error:[{kind:"error"},[Tt],(l,[s])=>{throw new Ka(s.evaluate(l))}],typeof:[Tt,[nt],(l,[s])=>sn(Ea(s.evaluate(l)))],"to-rgba":[Rt(rt,4),[ue],(l,[s])=>s.evaluate(l).toArray()],rgb:[ue,[rt,rt,rt],ac],rgba:[ue,[rt,rt,rt,rt],ac],has:{type:Nt,overloads:[[[Tt],(l,[s])=>Pu(s.evaluate(l),l.properties())],[[Tt,ye],(l,[s,u])=>Pu(s.evaluate(l),u.evaluate(l))]]},get:{type:nt,overloads:[[[Tt],(l,[s])=>ju(s.evaluate(l),l.properties())],[[Tt,ye],(l,[s,u])=>ju(s.evaluate(l),u.evaluate(l))]]},"feature-state":[nt,[Tt],(l,[s])=>ju(s.evaluate(l),l.featureState||{})],properties:[ye,[],l=>l.properties()],"geometry-type":[Tt,[],l=>l.geometryType()],id:[nt,[],l=>l.id()],zoom:[rt,[],l=>l.globals.zoom],pitch:[rt,[],l=>l.globals.pitch||0],"distance-from-center":[rt,[],l=>l.distanceFromCenter()],"heatmap-density":[rt,[],l=>l.globals.heatmapDensity||0],"line-progress":[rt,[],l=>l.globals.lineProgress||0],"sky-radial-progress":[rt,[],l=>l.globals.skyRadialProgress||0],accumulated:[nt,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[rt,Zn(rt),(l,s)=>{let u=0;for(const p of s)u+=p.evaluate(l);return u}],"*":[rt,Zn(rt),(l,s)=>{let u=1;for(const p of s)u*=p.evaluate(l);return u}],"-":{type:rt,overloads:[[[rt,rt],(l,[s,u])=>s.evaluate(l)-u.evaluate(l)],[[rt],(l,[s])=>-s.evaluate(l)]]},"/":[rt,[rt,rt],(l,[s,u])=>s.evaluate(l)/u.evaluate(l)],"%":[rt,[rt,rt],(l,[s,u])=>s.evaluate(l)%u.evaluate(l)],ln2:[rt,[],()=>Math.LN2],pi:[rt,[],()=>Math.PI],e:[rt,[],()=>Math.E],"^":[rt,[rt,rt],(l,[s,u])=>Math.pow(s.evaluate(l),u.evaluate(l))],sqrt:[rt,[rt],(l,[s])=>Math.sqrt(s.evaluate(l))],log10:[rt,[rt],(l,[s])=>Math.log(s.evaluate(l))/Math.LN10],ln:[rt,[rt],(l,[s])=>Math.log(s.evaluate(l))],log2:[rt,[rt],(l,[s])=>Math.log(s.evaluate(l))/Math.LN2],sin:[rt,[rt],(l,[s])=>Math.sin(s.evaluate(l))],cos:[rt,[rt],(l,[s])=>Math.cos(s.evaluate(l))],tan:[rt,[rt],(l,[s])=>Math.tan(s.evaluate(l))],asin:[rt,[rt],(l,[s])=>Math.asin(s.evaluate(l))],acos:[rt,[rt],(l,[s])=>Math.acos(s.evaluate(l))],atan:[rt,[rt],(l,[s])=>Math.atan(s.evaluate(l))],min:[rt,Zn(rt),(l,s)=>Math.min(...s.map(u=>u.evaluate(l)))],max:[rt,Zn(rt),(l,s)=>Math.max(...s.map(u=>u.evaluate(l)))],abs:[rt,[rt],(l,[s])=>Math.abs(s.evaluate(l))],round:[rt,[rt],(l,[s])=>{const u=s.evaluate(l);return u<0?-Math.round(-u):Math.round(u)}],floor:[rt,[rt],(l,[s])=>Math.floor(s.evaluate(l))],ceil:[rt,[rt],(l,[s])=>Math.ceil(s.evaluate(l))],"filter-==":[Nt,[Tt,nt],(l,[s,u])=>l.properties()[s.value]===u.value],"filter-id-==":[Nt,[nt],(l,[s])=>l.id()===s.value],"filter-type-==":[Nt,[Tt],(l,[s])=>l.geometryType()===s.value],"filter-<":[Nt,[Tt,nt],(l,[s,u])=>{const p=l.properties()[s.value],y=u.value;return typeof p==typeof y&&p<y}],"filter-id-<":[Nt,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u<p}],"filter->":[Nt,[Tt,nt],(l,[s,u])=>{const p=l.properties()[s.value],y=u.value;return typeof p==typeof y&&p>y}],"filter-id->":[Nt,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u>p}],"filter-<=":[Nt,[Tt,nt],(l,[s,u])=>{const p=l.properties()[s.value],y=u.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[Nt,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u<=p}],"filter->=":[Nt,[Tt,nt],(l,[s,u])=>{const p=l.properties()[s.value],y=u.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[Nt,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u>=p}],"filter-has":[Nt,[nt],(l,[s])=>s.value in l.properties()],"filter-has-id":[Nt,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[Nt,[Rt(Tt)],(l,[s])=>s.value.indexOf(l.geometryType())>=0],"filter-id-in":[Nt,[Rt(nt)],(l,[s])=>s.value.indexOf(l.id())>=0],"filter-in-small":[Nt,[Tt,Rt(nt)],(l,[s,u])=>u.value.indexOf(l.properties()[s.value])>=0],"filter-in-large":[Nt,[Tt,Rt(nt)],(l,[s,u])=>function(p,y,E,I){for(;E<=I;){const P=E+I>>1;if(y[P]===p)return!0;y[P]>p?I=P-1:E=P+1}return!1}(l.properties()[s.value],u.value,0,u.value.length-1)],all:{type:Nt,overloads:[[[Nt,Nt],(l,[s,u])=>s.evaluate(l)&&u.evaluate(l)],[Zn(Nt),(l,s)=>{for(const u of s)if(!u.evaluate(l))return!1;return!0}]]},any:{type:Nt,overloads:[[[Nt,Nt],(l,[s,u])=>s.evaluate(l)||u.evaluate(l)],[Zn(Nt),(l,s)=>{for(const u of s)if(u.evaluate(l))return!0;return!1}]]},"!":[Nt,[Nt],(l,[s])=>!s.evaluate(l)],"is-supported-script":[Nt,[Tt],(l,[s])=>{const u=l.globals&&l.globals.isSupportedScript;return!u||u(s.evaluate(l))}],upcase:[Tt,[Tt],(l,[s])=>s.evaluate(l).toUpperCase()],downcase:[Tt,[Tt],(l,[s])=>s.evaluate(l).toLowerCase()],concat:[Tt,Zn(nt),(l,s)=>s.map(u=>Gl(u.evaluate(l))).join("")],"resolved-locale":[Tt,[xt],(l,[s])=>s.evaluate(l).resolvedLocale()]});var cl=Ic;function cp(l){return{result:"success",value:l}}function ra(l){return{result:"error",value:l}}function wo(l){return"data-driven"===l["property-type"]}function lc(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function pa(l){return!!l.expression&&l.expression.interpolated}function Kn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function ma(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function po(l){return l}function ws(l,s){const u="color"===s.type,p=l.stops&&"object"==typeof l.stops[0][0],y=p||!(p||void 0!==l.property),E=l.type||(pa(s)?"exponential":"interval");if(u&&((l=gl({},l)).stops&&(l.stops=l.stops.map(N=>[N[0],Ds.parse(N[1])])),l.default=Ds.parse(l.default?l.default:s.default)),l.colorSpace&&"rgb"!==l.colorSpace&&!lp[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let I,P,O;if("exponential"===E)I=No;else if("interval"===E)I=oa;else if("categorical"===E){I=Fa,P=Object.create(null);for(const N of l.stops)P[N[0]]=N[1];O=typeof l.stops[0][0]}else{if("identity"!==E)throw new Error(`Unknown function type "${E}"`);I=up}if(p){const N={},$=[];for(let Y=0;Y<l.stops.length;Y++){const se=l.stops[Y],be=se[0].zoom;void 0===N[be]&&(N[be]={zoom:be,type:l.type,property:l.property,default:l.default,stops:[]},$.push(be)),N[be].stops.push([se[0].value,se[1]])}const U=[];for(const Y of $)U.push([N[Y].zoom,ws(N[Y],s)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:Bs.interpolationFactor.bind(void 0,H),zoomStops:U.map(Y=>Y[0]),evaluate:({zoom:Y},se)=>No({stops:U,base:l.base},s,Y).evaluate(Y,se)}}if(y){const N="exponential"===E?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Bs.interpolationFactor.bind(void 0,N),zoomStops:l.stops.map($=>$[0]),evaluate:({zoom:$})=>I(l,s,$,P,O)}}return{kind:"source",evaluate(N,$){const U=$&&$.properties?$.properties[l.property]:void 0;return void 0===U?ia(l.default,s.default):I(l,s,U,P,O)}}}function ia(l,s,u){return void 0!==l?l:void 0!==s?s:void 0!==u?u:void 0}function Fa(l,s,u,p,y){return ia(typeof u===y?p[u]:void 0,l.default,s.default)}function oa(l,s,u){if("number"!==Kn(u))return ia(l.default,s.default);const p=l.stops.length;if(1===p||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[p-1][0])return l.stops[p-1][1];const y=hd(l.stops.map(E=>E[0]),u);return l.stops[y][1]}function No(l,s,u){const p=void 0!==l.base?l.base:1;if("number"!==Kn(u))return ia(l.default,s.default);const y=l.stops.length;if(1===y||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[y-1][0])return l.stops[y-1][1];const E=hd(l.stops.map($=>$[0]),u),I=function($,U,H,Y){const se=Y-H,be=$-H;return 0===se?0:1===U?be/se:(Math.pow(U,be)-1)/(Math.pow(U,se)-1)}(u,p,l.stops[E][0],l.stops[E+1][0]),P=l.stops[E][1],O=l.stops[E+1][1];let N=Ec[s.type]||po;if(l.colorSpace&&"rgb"!==l.colorSpace){const $=lp[l.colorSpace];N=(U,H)=>$.reverse($.interpolate($.forward(U),$.forward(H),I))}return"function"==typeof P.evaluate?{evaluate(...$){const U=P.evaluate.apply(void 0,$),H=O.evaluate.apply(void 0,$);if(void 0!==U&&void 0!==H)return N(U,H,I)}}:N(P,O,I)}function up(l,s,u){return"color"===s.type?u=Ds.parse(u):"formatted"===s.type?u=Ks.fromString(u.toString()):"resolvedImage"===s.type?u=Pi.fromString(u.toString()):Kn(u)===s.type||"enum"===s.type&&s.values[u]||(u=void 0),ia(u,l.default,s.default)}class $h{constructor(s,u){var p;this.expression=s,this._warningHistory={},this._evaluator=new xf,this._defaultValue=u?"color"===(p=u).type&&(ma(p.default)||Array.isArray(p.default))?new Ds(0,0,0,0):"color"===p.type?Ds.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=u&&"enum"===u.type?u.values:null}evaluateWithoutErrorHandling(s,u,p,y,E,I,P,O){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=y||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=I,this._evaluator.featureTileCoord=P||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(s,u,p,y,E,I,P,O){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=I||null,this._evaluator.featureTileCoord=P||null,this._evaluator.featureDistanceData=O||null;try{const N=this.expression.evaluate(this._evaluator);if(null==N||"number"==typeof N&&N!=N)return this._defaultValue;if(this._enumValues&&!(N in this._enumValues))throw new Ka(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(N)} instead.`);return N}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}}}function Ba(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in cl}function Tc(l,s){const u=new Fh(cl,[],s?function(y){const E={color:ue,string:Tt,number:rt,enum:Tt,boolean:Nt,formatted:Le,resolvedImage:dt};return"array"===y.type?Rt(E[y.value]||nt,y.length):E[y.type]}(s):void 0),p=u.parse(l,void 0,void 0,void 0,s&&"string"===s.type?{typeAnnotation:"coerce"}:void 0);return p?cp(new $h(p,s)):ra(u.errors)}class sa{constructor(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent="constant"!==s&&!To(u.expression)}evaluateWithoutErrorHandling(s,u,p,y,E,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,p,y,E,I)}evaluate(s,u,p,y,E,I){return this._styleExpression.evaluate(s,u,p,y,E,I)}}class Fr{constructor(s,u,p,y){this.kind=s,this.zoomStops=p,this._styleExpression=u,this.isStateDependent="camera"!==s&&!To(u.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,u,p,y,E,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,p,y,E,I)}evaluate(s,u,p,y,E,I){return this._styleExpression.evaluate(s,u,p,y,E,I)}interpolationFactor(s,u,p){return this.interpolationType?Bs.interpolationFactor(this.interpolationType,s,u,p):0}}function Ri(l,s){if("error"===(l=Tc(l,s)).result)return l;const u=l.value.expression,p=Ll(u);if(!p&&!wo(s))return ra([new El("","data expressions not supported")]);const y=lu(u,["zoom","pitch","distance-from-center"]);if(!y&&!lc(s))return ra([new El("","zoom expressions not supported")]);const E=Es(u);return E||y?E instanceof El?ra([E]):E instanceof Bs&&!pa(s)?ra([new El("",'"interpolate" expressions cannot be used with this property')]):cp(E?new Fr(p?"camera":"composite",l.value,E.labels,E instanceof Bs?E.interpolation:void 0):new sa(p?"constant":"source",l.value)):ra([new El("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Wi{constructor(s,u){this._parameters=s,this._specification=u,gl(this,ws(this._parameters,this._specification))}static deserialize(s){return new Wi(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Es(l){let s=null;if(l instanceof Ef)s=Es(l.result);else if(l instanceof Po){for(const u of l.args)if(s=Es(u),s)break}else(l instanceof Bh||l instanceof Bs)&&l.input instanceof Uc&&"zoom"===l.input.name&&(s=l);return s instanceof El||l.eachChild(u=>{const p=Es(u);p instanceof El?s=p:!s&&p?s=new El("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&p&&s!==p&&(s=new El("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}class Sr{constructor(s,u,p,y){this.message=(s?`${s}: `:"")+p,y&&(this.identifier=y),null!=u&&u.__line__&&(this.line=u.__line__)}}function mo(l){const s=l.key,u=l.value,p=l.valueSpec||{},y=l.objectElementValidators||{},E=l.style,I=l.styleSpec;let P=[];const O=Kn(u);if("object"!==O)return[new Sr(s,u,`object expected, ${O} found`)];for(const N in u){const $=N.split(".")[0];let U;y[$]?U=y[$]:p[$]?U=z:y["*"]?U=y["*"]:p["*"]&&(U=z),U?P=P.concat(U({key:(s&&`${s}.`)+N,value:u[N],valueSpec:p[$]||p["*"],style:E,styleSpec:I,object:u,objectKey:N},u)):P.push(new Sr(s,u[N],`unknown property "${N}"`))}for(const N in p)y[N]||p[N].required&&void 0===p[N].default&&void 0===u[N]&&P.push(new Sr(s,u,`missing required property "${N}"`));return P}function ph(l){const s=l.value,u=l.valueSpec,p=l.style,y=l.styleSpec,E=l.key,I=l.arrayElementValidator||z;if("array"!==Kn(s))return[new Sr(E,s,`array expected, ${Kn(s)} found`)];if(u.length&&s.length!==u.length)return[new Sr(E,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new Sr(E,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let P={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};y.$version<7&&(P.function=u.function),"object"===Kn(u.value)&&(P=u.value);let O=[];for(let N=0;N<s.length;N++)O=O.concat(I({array:s,arrayIndex:N,value:s[N],valueSpec:P,style:p,styleSpec:y,key:`${E}[${N}]`}));return O}function Xs(l){const s=l.key,u=l.value,p=l.valueSpec;let y=Kn(u);if("number"===y&&u!=u&&(y="NaN"),"number"!==y)return[new Sr(s,u,`number expected, ${y} found`)];if("minimum"in p){let E=p.minimum;if("array"===Kn(p.minimum)&&(E=p.minimum[l.arrayIndex]),u<E)return[new Sr(s,u,`${u} is less than the minimum value ${E}`)]}if("maximum"in p){let E=p.maximum;if("array"===Kn(p.maximum)&&(E=p.maximum[l.arrayIndex]),u>E)return[new Sr(s,u,`${u} is greater than the maximum value ${E}`)]}return[]}function Cs(l){const s=l.valueSpec,u=vs(l.value.type);let p,y,E,I={};const P="categorical"!==u&&void 0===l.value.property,O=!P,N="array"===Kn(l.value.stops)&&"array"===Kn(l.value.stops[0])&&"object"===Kn(l.value.stops[0][0]),$=mo({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(Y){if("identity"===u)return[new Sr(Y.key,Y.value,'identity function may not have a "stops" property')];let se=[];const be=Y.value;return se=se.concat(ph({key:Y.key,value:be,valueSpec:Y.valueSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:U})),"array"===Kn(be)&&0===be.length&&se.push(new Sr(Y.key,be,"array must have at least one stop")),se},default:function(Y){return z({key:Y.key,value:Y.value,valueSpec:s,style:Y.style,styleSpec:Y.styleSpec})}}});return"identity"===u&&P&&$.push(new Sr(l.key,l.value,'missing required property "property"')),"identity"===u||l.value.stops||$.push(new Sr(l.key,l.value,'missing required property "stops"')),"exponential"===u&&l.valueSpec.expression&&!pa(l.valueSpec)&&$.push(new Sr(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(O&&!wo(l.valueSpec)?$.push(new Sr(l.key,l.value,"property functions not supported")):P&&!lc(l.valueSpec)&&$.push(new Sr(l.key,l.value,"zoom functions not supported"))),"categorical"!==u&&!N||void 0!==l.value.property||$.push(new Sr(l.key,l.value,'"property" property is required')),$;function U(Y){let se=[];const be=Y.value,Ge=Y.key;if("array"!==Kn(be))return[new Sr(Ge,be,`array expected, ${Kn(be)} found`)];if(2!==be.length)return[new Sr(Ge,be,`array length 2 expected, length ${be.length} found`)];if(N){if("object"!==Kn(be[0]))return[new Sr(Ge,be,`object expected, ${Kn(be[0])} found`)];if(void 0===be[0].zoom)return[new Sr(Ge,be,"object stop key must have zoom")];if(void 0===be[0].value)return[new Sr(Ge,be,"object stop key must have value")];const mt=vs(be[0].zoom);if("number"!=typeof mt)return[new Sr(Ge,be[0].zoom,"stop zoom values must be numbers")];if(E&&E>mt)return[new Sr(Ge,be[0].zoom,"stop zoom values must appear in ascending order")];mt!==E&&(E=mt,y=void 0,I={}),se=se.concat(mo({key:`${Ge}[0]`,value:be[0],valueSpec:{zoom:{}},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Xs,value:H}}))}else se=se.concat(H({key:`${Ge}[0]`,value:be[0],valueSpec:{},style:Y.style,styleSpec:Y.styleSpec},be));return Ba(bs(be[1]))?se.concat([new Sr(`${Ge}[1]`,be[1],"expressions are not allowed in function stops.")]):se.concat(z({key:`${Ge}[1]`,value:be[1],valueSpec:s,style:Y.style,styleSpec:Y.styleSpec}))}function H(Y,se){const be=Kn(Y.value),Ge=vs(Y.value),mt=null!==Y.value?Y.value:se;if(p){if(be!==p)return[new Sr(Y.key,mt,`${be} stop domain type must match previous stop domain type ${p}`)]}else p=be;if("number"!==be&&"string"!==be&&"boolean"!==be&&"number"!=typeof Ge&&"string"!=typeof Ge&&"boolean"!=typeof Ge)return[new Sr(Y.key,mt,"stop domain value must be a number, string, or boolean")];if("number"!==be&&"categorical"!==u){let Ot=`number expected, ${be} found`;return wo(s)&&void 0===u&&(Ot+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Sr(Y.key,mt,Ot)]}return"categorical"!==u||"number"!==be||"number"==typeof Ge&&isFinite(Ge)&&Math.floor(Ge)===Ge?"categorical"!==u&&"number"===be&&"number"==typeof Ge&&"number"==typeof y&&void 0!==y&&Ge<y?[new Sr(Y.key,mt,"stop domain values must appear in ascending order")]:(y=Ge,"categorical"===u&&Ge in I?[new Sr(Y.key,mt,"stop domain values must be unique")]:(I[Ge]=!0,[])):[new Sr(Y.key,mt,`integer expected, found ${String(Ge)}`)]}}function za(l){const s=("property"===l.expressionContext?Ri:Tc)(bs(l.value),l.valueSpec);if("error"===s.result)return s.value.map(p=>new Sr(`${l.key}${p.key}`,l.value,p.message));const u=s.value.expression||s.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!u.outputDefined())return[new Sr(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!To(u))return[new Sr(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext)return Ti(u,l);if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!lu(u,["zoom","feature-state"]))return[new Sr(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!Ll(u))return[new Sr(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ti(l,s){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(s.valueSpec&&s.valueSpec.expression)for(const y of s.valueSpec.expression.parameters)u.delete(y);if(0===u.size)return[];const p=[];return l instanceof Uc&&u.has(l.name)?[new Sr(s.key,s.value,`["${l.name}"] expression is not supported in a filter for a ${s.object.type} layer with id: ${s.object.id}`)]:(l.eachChild(y=>{p.push(...Ti(y,s))}),p)}function mh(l){const s=l.key,u=l.value,p=l.valueSpec,y=[];return Array.isArray(p.values)?-1===p.values.indexOf(vs(u))&&y.push(new Sr(s,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):-1===Object.keys(p.values).indexOf(vs(u))&&y.push(new Sr(s,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),y}function Vh(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const s of l.slice(1))if(!Vh(s)&&"boolean"!=typeof s)return!1;return!0;default:return!0}}function gh(l,s="fill"){if(null==l)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Vh(l)||(l=ul(l));const u=l;let p=!0;try{p=function(N){if(!Yl(N))return N;let $=bs(N);return Tl($),$=Wa($),$}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(u,null,2)}\n        `)}const y=Mn[`filter_${s}`],E=Tc(p,y);let I=null;if("error"===E.result)throw new Error(E.value.map(N=>`${N.key}: ${N.message}`).join(", "));I=(N,$,U)=>E.value.evaluate(N,$,{},U);let P=null,O=null;if(p!==u){const N=Tc(u,y);if("error"===N.result)throw new Error(N.value.map($=>`${$.key}: ${$.message}`).join(", "));P=($,U,H,Y,se)=>N.value.evaluate($,U,{},H,void 0,void 0,Y,se),O=!Ll(N.value.expression)}return{filter:I,dynamicFilter:P||void 0,needGeometry:Uh(p),needFeature:!!O}}function Wa(l){if(!Array.isArray(l))return l;const s=function(u){if(Fl.has(u[0]))for(let p=1;p<u.length;p++)if(Yl(u[p]))return!0;return u}(l);return!0===s?s:s.map(u=>Wa(u))}function Tl(l){let s=!1;const u=[];if("case"===l[0]){for(let p=1;p<l.length-1;p+=2)s=s||Yl(l[p]),u.push(l[p+1]);u.push(l[l.length-1])}else if("match"===l[0]){s=s||Yl(l[1]);for(let p=2;p<l.length-1;p+=2)u.push(l[p+1]);u.push(l[l.length-1])}else if("step"===l[0]){s=s||Yl(l[1]);for(let p=1;p<l.length-1;p+=2)u.push(l[p+1])}s&&(l.length=0,l.push("any",...u));for(let p=1;p<l.length;p++)Tl(l[p])}function Yl(l){if(!Array.isArray(l))return!1;if("pitch"===(s=l[0])||"distance-from-center"===s)return!0;var s;for(let u=1;u<l.length;u++)if(Yl(l[u]))return!0;return!1}const Fl=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function md(l,s){return l<s?-1:l>s?1:0}function Uh(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let s=1;s<l.length;s++)if(Uh(l[s]))return!0;return!1}function ul(l){if(!l)return!0;const s=l[0];return l.length<=1?"any"!==s:"=="===s?cc(l[1],l[2],"=="):"!="===s?Mr(cc(l[1],l[2],"==")):"<"===s||">"===s||"<="===s||">="===s?cc(l[1],l[2],s):"any"===s?(u=l.slice(1),["any"].concat(u.map(ul))):"all"===s?["all"].concat(l.slice(1).map(ul)):"none"===s?["all"].concat(l.slice(1).map(ul).map(Mr)):"in"===s?du(l[1],l.slice(2)):"!in"===s?Mr(du(l[1],l.slice(2))):"has"===s?Dc(l[1]):"!has"===s?Mr(Dc(l[1])):"within"!==s||l;var u}function cc(l,s,u){switch(l){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,l,s]}}function du(l,s){if(0===s.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",l,["literal",s.sort(md)]]:["filter-in-small",l,["literal",s]]}}function Dc(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Mr(l){return["!",l]}function fu(l){return Vh(bs(l.value))?za(gl({},l,{expressionContext:"filter",valueSpec:l.styleSpec[`filter_${l.layerType||"fill"}`]})):pu(l)}function pu(l){const s=l.value,u=l.key;if("array"!==Kn(s))return[new Sr(u,s,`array expected, ${Kn(s)} found`)];const p=l.styleSpec;let y,E=[];if(s.length<1)return[new Sr(u,s,"filter array must have at least 1 element")];switch(E=E.concat(mh({key:`${u}[0]`,value:s[0],valueSpec:p.filter_operator,style:l.style,styleSpec:l.styleSpec})),vs(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===vs(s[1])&&E.push(new Sr(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":3!==s.length&&E.push(new Sr(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(y=Kn(s[1]),"string"!==y&&E.push(new Sr(`${u}[1]`,s[1],`string expected, ${y} found`)));for(let I=2;I<s.length;I++)y=Kn(s[I]),"$type"===vs(s[1])?E=E.concat(mh({key:`${u}[${I}]`,value:s[I],valueSpec:p.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==y&&"number"!==y&&"boolean"!==y&&E.push(new Sr(`${u}[${I}]`,s[I],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let I=1;I<s.length;I++)E=E.concat(pu({key:`${u}[${I}]`,value:s[I],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":y=Kn(s[1]),2!==s.length?E.push(new Sr(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):"string"!==y&&E.push(new Sr(`${u}[1]`,s[1],`string expected, ${y} found`));break;case"within":y=Kn(s[1]),2!==s.length?E.push(new Sr(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):"object"!==y&&E.push(new Sr(`${u}[1]`,s[1],`object expected, ${y} found`))}return E}function ku(l,s){const u=l.key,p=l.style,y=l.styleSpec,E=l.value,I=l.objectKey,P=y[`${s}_${l.layerType}`];if(!P)return[];const O=I.match(/^(.*)-transition$/);if("paint"===s&&O&&P[O[1]]&&P[O[1]].transition)return z({key:u,value:E,valueSpec:y.transition,style:p,styleSpec:y});const N=l.valueSpec||P[I];if(!N)return[new Sr(u,E,`unknown property "${I}"`)];let $;if("string"===Kn(E)&&wo(N)&&!N.tokens&&($=/^{([^}]+)}$/.exec(E))){const H=`\`{ "type": "identity", "property": ${$?JSON.stringify($[1]):'"_"'} }\``;return[new Sr(u,E,`"${I}" does not support interpolation syntax\nUse an identity property function instead: ${H}.`)]}const U=[];return"symbol"===l.layerType&&("text-field"===I&&p&&!p.glyphs&&U.push(new Sr(u,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===I&&ma(bs(E))&&"identity"===vs(E.type)&&U.push(new Sr(u,E,'"text-font" does not support identity functions'))),U.concat(z({key:l.key,value:E,valueSpec:N,style:p,styleSpec:y,expressionContext:"property",propertyType:s,propertyKey:I}))}function ga(l){return ku(l,"paint")}function gd(l){return ku(l,"layout")}function Ja(l){let s=[];const u=l.value,p=l.key,y=l.style,E=l.styleSpec;u.type||u.ref||s.push(new Sr(p,u,'either "type" or "ref" is required'));let I=vs(u.type);const P=vs(u.ref);if(u.id){const O=vs(u.id);for(let N=0;N<l.arrayIndex;N++){const $=y.layers[N];vs($.id)===O&&s.push(new Sr(p,u.id,`duplicate layer id "${u.id}", previously used at line ${$.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach(N=>{N in u&&s.push(new Sr(p,u[N],`"${N}" is prohibited for ref layers`))}),y.layers.forEach(N=>{vs(N.id)===P&&(O=N)}),O?O.ref?s.push(new Sr(p,u.ref,"ref cannot reference another ref layer")):I=vs(O.type):"string"==typeof P&&s.push(new Sr(p,u.ref,`ref layer "${P}" not found`))}else if("background"!==I&&"sky"!==I)if(u.source){const O=y.sources&&y.sources[u.source],N=O&&vs(O.type);O?"vector"===N&&"raster"===I?s.push(new Sr(p,u.source,`layer "${u.id}" requires a raster source`)):"raster"===N&&"raster"!==I?s.push(new Sr(p,u.source,`layer "${u.id}" requires a vector source`)):"vector"!==N||u["source-layer"]?"raster-dem"===N&&"hillshade"!==I?s.push(new Sr(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==I||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||"geojson"===N&&O.lineMetrics||s.push(new Sr(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Sr(p,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new Sr(p,u.source,`source "${u.source}" not found`))}else s.push(new Sr(p,u,'missing required property "source"'));return s=s.concat(mo({key:p,value:u,valueSpec:E.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>z({key:`${p}.type`,value:u.type,valueSpec:E.layer.type,style:l.style,styleSpec:l.styleSpec,object:u,objectKey:"type"}),filter:O=>fu(gl({layerType:I},O)),layout:O=>mo({layer:u,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":N=>gd(gl({layerType:I},N))}}),paint:O=>mo({layer:u,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":N=>ga(gl({layerType:I},N))}})}})),s}function ko(l){const s=l.value,u=l.key,p=Kn(s);return"string"!==p?[new Sr(u,s,`string expected, ${p} found`)]:[]}const vl={promoteId:function({key:l,value:s}){if("string"===Kn(s))return ko({key:l,value:s});{const u=[];for(const p in s)u.push(...ko({key:`${l}.${p}`,value:s[p]}));return u}}};function Sf(l){const s=l.value,u=l.key,p=l.styleSpec,y=l.style;if(!s.type)return[new Sr(u,s,'"type" is required')];const E=vs(s.type);let I;switch(E){case"vector":case"raster":case"raster-dem":return I=mo({key:u,value:s,valueSpec:p[`source_${E.replace("-","_")}`],style:l.style,styleSpec:p,objectElementValidators:vl}),I;case"geojson":if(I=mo({key:u,value:s,valueSpec:p.source_geojson,style:y,styleSpec:p,objectElementValidators:vl}),s.cluster)for(const P in s.clusterProperties){const[O,N]=s.clusterProperties[P],$="string"==typeof O?[O,["accumulated"],["get",P]]:O;I.push(...za({key:`${u}.${P}.map`,value:N,expressionContext:"cluster-map"})),I.push(...za({key:`${u}.${P}.reduce`,value:$,expressionContext:"cluster-reduce"}))}return I;case"video":return mo({key:u,value:s,valueSpec:p.source_video,style:y,styleSpec:p});case"image":return mo({key:u,value:s,valueSpec:p.source_image,style:y,styleSpec:p});case"canvas":return[new Sr(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return mh({key:`${u}.type`,value:s.type,valueSpec:{values:c(p)},style:y,styleSpec:p})}}function c(l){return l.source.reduce((s,u)=>{const p=l[u];return"enum"===p.type.type&&(s=s.concat(Object.keys(p.type.values))),s},[])}function f(l){const s=l.value,u=l.styleSpec,p=u.light,y=l.style;let E=[];const I=Kn(s);if(void 0===s)return E;if("object"!==I)return E=E.concat([new Sr("light",s,`object expected, ${I} found`)]),E;for(const P in s){const O=P.match(/^(.*)-transition$/);E=E.concat(O&&p[O[1]]&&p[O[1]].transition?z({key:P,value:s[P],valueSpec:u.transition,style:y,styleSpec:u}):p[P]?z({key:P,value:s[P],valueSpec:p[P],style:y,styleSpec:u}):[new Sr(P,s[P],`unknown property "${P}"`)])}return E}function b(l){const s=l.value,u=l.key,p=l.style,y=l.styleSpec,E=y.terrain;let I=[];const P=Kn(s);if(void 0===s)return I;if("object"!==P)return I=I.concat([new Sr("terrain",s,`object expected, ${P} found`)]),I;for(const O in s){const N=O.match(/^(.*)-transition$/);I=I.concat(N&&E[N[1]]&&E[N[1]].transition?z({key:O,value:s[O],valueSpec:y.transition,style:p,styleSpec:y}):E[O]?z({key:O,value:s[O],valueSpec:E[O],style:p,styleSpec:y}):[new Sr(O,s[O],`unknown property "${O}"`)])}if(s.source){const O=p.sources&&p.sources[s.source],N=O&&vs(O.type);O?"raster-dem"!==N&&I.push(new Sr(u,s.source,`terrain cannot be used with a source of type ${String(N)}, it only be used with a "raster-dem" source type`)):I.push(new Sr(u,s.source,`source "${s.source}" not found`))}else I.push(new Sr(u,s,'terrain is missing required property "source"'));return I}function w(l){const s=l.value,u=l.style,p=l.styleSpec,y=p.fog;let E=[];const I=Kn(s);if(void 0===s)return E;if("object"!==I)return E=E.concat([new Sr("fog",s,`object expected, ${I} found`)]),E;for(const P in s){const O=P.match(/^(.*)-transition$/);E=E.concat(O&&y[O[1]]&&y[O[1]].transition?z({key:P,value:s[P],valueSpec:p.transition,style:u,styleSpec:p}):y[P]?z({key:P,value:s[P],valueSpec:y[P],style:u,styleSpec:p}):[new Sr(P,s[P],`unknown property "${P}"`)])}return E}const M={"*":()=>[],array:ph,boolean:function(l){const s=l.value,u=l.key,p=Kn(s);return"boolean"!==p?[new Sr(u,s,`boolean expected, ${p} found`)]:[]},number:Xs,color:function(l){const s=l.key,u=l.value,p=Kn(u);return"string"!==p?[new Sr(s,u,`color expected, ${p} found`)]:null===ui(u)?[new Sr(s,u,`color expected, "${u}" found`)]:[]},enum:mh,filter:fu,function:Cs,layer:Ja,object:mo,source:Sf,light:f,terrain:b,fog:w,string:ko,formatted:function(l){return 0===ko(l).length?[]:za(l)},resolvedImage:function(l){return 0===ko(l).length?[]:za(l)},projection:function(l){const s=l.value,u=l.styleSpec,p=u.projection,y=l.style;let E=[];const I=Kn(s);if("object"===I)for(const P in s)E=E.concat(z({key:P,value:s[P],valueSpec:p[P],style:y,styleSpec:u}));else"string"!==I&&(E=E.concat([new Sr("projection",s,`object or string expected, ${I} found`)]));return E}};function z(l){const s=l.value,u=l.valueSpec,p=l.styleSpec;return u.expression&&ma(vs(s))?Cs(l):u.expression&&Ba(bs(s))?za(l):u.type&&M[u.type]?M[u.type](l):mo(gl({},l,{valueSpec:u.type?p[u.type]:u}))}function j(l){const s=l.value,u=l.key,p=ko(l);return p.length||(-1===s.indexOf("{fontstack}")&&p.push(new Sr(u,s,'"glyphs" url must include a "{fontstack}" token')),-1===s.indexOf("{range}")&&p.push(new Sr(u,s,'"glyphs" url must include a "{range}" token'))),p}function Ee(l,s=Mn){return gn(z({key:"",value:l,valueSpec:s.$root,styleSpec:s,style:l,objectElementValidators:{glyphs:j,"*":()=>[]}}))}const at=l=>gn(ga(l)),Ut=l=>gn(gd(l));function gn(l){return l.slice().sort((s,u)=>s.line&&u.line?s.line-u.line:0)}function Rn(l,s){let u=!1;if(s&&s.length)for(const p of s)l.fire(new no(new Error(p.message))),u=!0;return u}var Ir=$r,wr=3;function $r(l,s,u){var p=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var y=new Int32Array(this.arrayBuffer);l=y[0],this.d=(s=y[1])+2*(u=y[2]);for(var E=0;E<this.d*this.d;E++){var I=y[wr+E],P=y[wr+E+1];p.push(I===P?null:y.subarray(I,P))}var O=y[wr+p.length+1];this.keys=y.subarray(y[wr+p.length],O),this.bboxes=y.subarray(O),this.insert=this._insertReadonly}else{this.d=s+2*u;for(var N=0;N<this.d*this.d;N++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=l,this.padding=u,this.scale=s/l,this.uid=0;var $=u/s*l;this.min=-$,this.max=l+$}$r.prototype.insert=function(l,s,u,p,y){this._forEachCell(s,u,p,y,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(y)},$r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$r.prototype._insertCell=function(l,s,u,p,y,E){this.cells[y].push(E)},$r.prototype.query=function(l,s,u,p,y){var E=this.min,I=this.max;if(l<=E&&s<=E&&I<=u&&I<=p&&!y)return Array.prototype.slice.call(this.keys);var P=[];return this._forEachCell(l,s,u,p,this._queryCell,P,{},y),P},$r.prototype._queryCell=function(l,s,u,p,y,E,I,P){var O=this.cells[y];if(null!==O)for(var N=this.keys,$=this.bboxes,U=0;U<O.length;U++){var H=O[U];if(void 0===I[H]){var Y=4*H;(P?P($[Y+0],$[Y+1],$[Y+2],$[Y+3]):l<=$[Y+2]&&s<=$[Y+3]&&u>=$[Y+0]&&p>=$[Y+1])?(I[H]=!0,E.push(N[H])):I[H]=!1}}},$r.prototype._forEachCell=function(l,s,u,p,y,E,I,P){for(var O=this._convertToCellCoord(l),N=this._convertToCellCoord(s),$=this._convertToCellCoord(u),U=this._convertToCellCoord(p),H=O;H<=$;H++)for(var Y=N;Y<=U;Y++){var se=this.d*Y+H;if((!P||P(this._convertFromCellCoord(H),this._convertFromCellCoord(Y),this._convertFromCellCoord(H+1),this._convertFromCellCoord(Y+1)))&&y.call(this,l,s,u,p,se,E,I,P))return}},$r.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},$r.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},$r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,s=wr+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var y=new Int32Array(s+u+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var E=s,I=0;I<l.length;I++){var P=l[I];y[wr+I]=E,y.set(P,E),E+=P.length}return y[wr+l.length]=E,y.set(this.keys,E),y[wr+l.length+1]=E+=this.keys.length,y.set(this.bboxes,E),E+=this.bboxes.length,y.buffer};var fi=Ce(Ir);const Eo={};function vr(l,s,u={}){Object.defineProperty(l,"_classRegistryKey",{value:s,writeable:!1}),Eo[s]={klass:l,omit:u.omit||[]}}vr(Object,"Object"),fi.serialize=function(l,s){const u=l.toArrayBuffer();return s&&s.push(u),{buffer:u}},fi.deserialize=function(l){return new fi(l.buffer)},Object.defineProperty(fi,"name",{value:"Grid"}),vr(fi,"Grid"),vr(Ds,"Color"),vr(Error,"Error"),vr(Hr,"AJAXError"),vr(Pi,"ResolvedImage"),vr(Wi,"StylePropertyFunction"),vr($h,"StyleExpression",{omit:["_evaluator"]}),vr(Fr,"ZoomDependentExpression"),vr(sa,"ZoomConstantExpression"),vr(Uc,"CompoundExpression",{omit:["_evaluate"]});for(const l in cl)Eo[cl[l]._classRegistryKey]||vr(cl[l],`Expression${l}`);function bl(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function mu(l){return me.ImageBitmap&&l instanceof me.ImageBitmap}function qc(l,s){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(bl(l)||mu(l))return s&&s.push(l),l;if(ArrayBuffer.isView(l)){const u=l;return s&&s.push(u.buffer),u}if(l instanceof me.ImageData)return s&&s.push(l.data.buffer),l;if(Array.isArray(l)){const u=[];for(const p of l)u.push(qc(p,s));return u}if("object"==typeof l){const u=l.constructor,p=u._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const y=u.serialize?u.serialize(l,s):{};if(!u.serialize){for(const E in l)l.hasOwnProperty(E)&&(Eo[p].omit.indexOf(E)>=0||(y[E]=qc(l[E],s)));l instanceof Error&&(y.message=l.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof l)}function jh(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||bl(l)||mu(l)||ArrayBuffer.isView(l)||l instanceof me.ImageData)return l;if(Array.isArray(l))return l.map(jh);if("object"==typeof l){const s=l.$name||"Object",{klass:u}=Eo[s];if(!u)throw new Error(`can't deserialize unregistered class ${s}`);if(u.deserialize)return u.deserialize(l);const p=Object.create(u.prototype);for(const y of Object.keys(l))"$name"!==y&&(p[y]=jh(l[y]));return p}throw new Error("can't deserialize object of type "+typeof l)}const Nr={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Mv(l){for(const s of l)if(kv(s.charCodeAt(0)))return!0;return!1}function Pv(l){for(const s of l)if(!N_(s.charCodeAt(0)))return!1;return!0}function N_(l){return!(Nr.Arabic(l)||Nr["Arabic Supplement"](l)||Nr["Arabic Extended-A"](l)||Nr["Arabic Presentation Forms-A"](l)||Nr["Arabic Presentation Forms-B"](l))}function kv(l){return!(746!==l&&747!==l&&(l<4352||!(Nr["Bopomofo Extended"](l)||Nr.Bopomofo(l)||Nr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Nr["CJK Compatibility Ideographs"](l)||Nr["CJK Compatibility"](l)||Nr["CJK Radicals Supplement"](l)||Nr["CJK Strokes"](l)||!(!Nr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||Nr["CJK Unified Ideographs Extension A"](l)||Nr["CJK Unified Ideographs"](l)||Nr["Enclosed CJK Letters and Months"](l)||Nr["Hangul Compatibility Jamo"](l)||Nr["Hangul Jamo Extended-A"](l)||Nr["Hangul Jamo Extended-B"](l)||Nr["Hangul Jamo"](l)||Nr["Hangul Syllables"](l)||Nr.Hiragana(l)||Nr["Ideographic Description Characters"](l)||Nr.Kanbun(l)||Nr["Kangxi Radicals"](l)||Nr["Katakana Phonetic Extensions"](l)||Nr.Katakana(l)&&12540!==l||!(!Nr["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!Nr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Nr["Unified Canadian Aboriginal Syllabics"](l)||Nr["Unified Canadian Aboriginal Syllabics Extended"](l)||Nr["Vertical Forms"](l)||Nr["Yijing Hexagram Symbols"](l)||Nr["Yi Syllables"](l)||Nr["Yi Radicals"](l))))}function bx(l){return!(kv(l)||(s=l,Nr["Latin-1 Supplement"](s)&&(167===s||169===s||174===s||177===s||188===s||189===s||190===s||215===s||247===s)||Nr["General Punctuation"](s)&&(8214===s||8224===s||8225===s||8240===s||8241===s||8251===s||8252===s||8258===s||8263===s||8264===s||8265===s||8273===s)||Nr["Letterlike Symbols"](s)||Nr["Number Forms"](s)||Nr["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||9003===s||s>=9085&&s<=9114||s>=9150&&s<=9165||9167===s||s>=9169&&s<=9179||s>=9186&&s<=9215)||Nr["Control Pictures"](s)&&9251!==s||Nr["Optical Character Recognition"](s)||Nr["Enclosed Alphanumerics"](s)||Nr["Geometric Shapes"](s)||Nr["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Nr["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Nr["CJK Symbols and Punctuation"](s)||Nr.Katakana(s)||Nr["Private Use Area"](s)||Nr["CJK Compatibility Forms"](s)||Nr["Small Form Variants"](s)||Nr["Halfwidth and Fullwidth Forms"](s)||8734===s||8756===s||8757===s||s>=9984&&s<=10087||s>=10102&&s<=10131||65532===s||65533===s));var s}function xx(l){return l>=1424&&l<=2303||Nr["Arabic Presentation Forms-A"](l)||Nr["Arabic Presentation Forms-B"](l)}function If(l,s){return!(!s&&xx(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Nr.Khmer(l))}function jd(l){for(const s of l)if(xx(s.charCodeAt(0)))return!0;return!1}const Rv="deferred",Ov="loading",Bl="loaded";let _d=null,x="unavailable",h=null;const v=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(x="error"),_d&&_d(l)};function S(){D.fire(new Lo("pluginStateChange",{pluginStatus:x,pluginURL:h}))}const D=new li,k=function(){return x},F=function(){if(x!==Rv||!h)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");x=Ov,S(),h&&zi({url:h},l=>{l?v(l):(x=Bl,S())})},B={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>x===Bl||null!=B.applyArabicShaping,isLoading:()=>x===Ov,setState(l){x=l.pluginStatus,h=l.pluginURL},isParsed:()=>null!=B.applyArabicShaping&&null!=B.processBidirectionalText&&null!=B.processStyledBidirectionalText,getPluginURL:()=>h};class V{constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(s){return function(u,p){for(const y of u)if(!If(y.charCodeAt(0),p))return!1;return!0}(s,B.isLoaded())}}class X{constructor(s,u){this.property=s,this.value=u,this.expression=function(p,y){if(ma(p))return new Wi(p,y);if(Ba(p)){const E=Ri(p,y);if("error"===E.result)throw new Error(E.value.map(I=>`${I.key}: ${I.message}`).join(", "));return E.value}{let E=p;return"string"==typeof p&&"color"===y.type&&(E=Ds.parse(p)),{kind:"constant",evaluate:()=>E}}}(void 0===u?s.specification.default:u,s.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(s,u,p){return this.property.possiblyEvaluate(this,s,u,p)}}class q{constructor(s){this.property=s,this.value=new X(s,void 0)}transitioned(s,u){return new Ve(this.property,this.value,u,le({},s.transition,this.transition),s.now)}untransitioned(){return new Ve(this.property,this.value,null,{},0)}}class fe{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Tn(this._values[s].value.value)}setValue(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new q(this._values[s].property)),this._values[s].value=new X(this._values[s].property,null===u?void 0:Tn(u))}getTransition(s){return Tn(this._values[s].transition)}setTransition(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new q(this._values[s].property)),this._values[s].transition=Tn(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(s[u]=p);const y=this.getTransition(u);void 0!==y&&(s[`${u}-transition`]=y)}return s}transitioned(s,u){const p=new Ye(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(s,u._values[y]);return p}untransitioned(){const s=new Ye(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class Ve{constructor(s,u,p,y,E){const I=y.delay||0,P=y.duration||0;E=E||0,this.property=s,this.value=u,this.begin=E+I,this.end=this.begin+P,s.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(s,u,p){const y=s.now||0,E=this.value.possiblyEvaluate(s,u,p),I=this.prior;if(I){if(y>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(y<this.begin)return I.possiblyEvaluate(s,u,p);{const P=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(s,u,p),E,oe(P))}}return E}}class Ye{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,p){const y=new ft(this._properties);for(const E of Object.keys(this._values))y._values[E]=this._values[E].possiblyEvaluate(s,u,p);return y}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class it{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return Tn(this._values[s].value)}setValue(s,u){this._values[s]=new X(this._values[s].property,null===u?void 0:Tn(u))}serialize(){const s={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(s[u]=p)}return s}possiblyEvaluate(s,u,p){const y=new ft(this._properties);for(const E of Object.keys(this._values))y._values[E]=this._values[E].possiblyEvaluate(s,u,p);return y}}class st{constructor(s,u,p){this.property=s,this.value=u,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(s){return"constant"===this.value.kind?this.value.value:s}evaluate(s,u,p,y){return this.property.evaluate(this.value,this.parameters,s,u,p,y)}}class ft{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class ge{constructor(s){this.specification=s}possiblyEvaluate(s,u){return s.expression.evaluate(u)}interpolate(s,u,p){const y=Ec[this.specification.type];return y?y(s,u,p):s}}class Ke{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,p,y){return new st(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(u,null,{},p,y)}:s.expression,u)}interpolate(s,u,p){if("constant"!==s.value.kind||"constant"!==u.value.kind)return s;if(void 0===s.value.value||void 0===u.value.value)return new st(this,{kind:"constant",value:void 0},s.parameters);const y=Ec[this.specification.type];return y?new st(this,{kind:"constant",value:y(s.value.value,u.value.value,p)},s.parameters):s}evaluate(s,u,p,y,E,I){return"constant"===s.kind?s.value:s.evaluate(u,p,y,E,I)}}class wt{constructor(s){this.specification=s}possiblyEvaluate(s,u,p,y){return!!s.expression.evaluate(u,null,{},p,y)}interpolate(){return!1}}class St{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new V(0,{});for(const p in s){const y=s[p];y.specification.overridable&&this.overridableProperties.push(p);const E=this.defaultPropertyValues[p]=new X(y,void 0),I=this.defaultTransitionablePropertyValues[p]=new q(y);this.defaultTransitioningPropertyValues[p]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=E.possiblyEvaluate(u)}}}function Ht(l,s){return 256*(l=K(Math.floor(l),0,255))+K(Math.floor(s),0,255)}vr(Ke,"DataDrivenProperty"),vr(ge,"DataConstantProperty"),vr(wt,"ColorRampProperty");const qt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Gt{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class rn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Jt(l,s=1){let u=0,p=0;return{members:l.map(y=>{const E=qt[y.type].BYTES_PER_ELEMENT,I=u=wn(u,Math.max(s,E)),P=y.components||1;return p=Math.max(p,E),u+=E*P,{name:y.name,type:y.type,components:P,offset:I}}),size:wn(u,Math.max(p,s)),alignment:s}}function wn(l,s){return Math.ceil(l/s)*s}class ur extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const p=this.length;return this.resize(p+1),this.emplace(p,s,u)}emplace(s,u,p){const y=2*s;return this.int16[y+0]=u,this.int16[y+1]=p,s}}ur.prototype.bytesPerElement=4,vr(ur,"StructArrayLayout2i4");class mn extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p){const y=this.length;return this.resize(y+1),this.emplace(y,s,u,p)}emplace(s,u,p,y){const E=3*s;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=y,s}}mn.prototype.bytesPerElement=6,vr(mn,"StructArrayLayout3i6");class Gn extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,y){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,y)}emplace(s,u,p,y,E){const I=4*s;return this.int16[I+0]=u,this.int16[I+1]=p,this.int16[I+2]=y,this.int16[I+3]=E,s}}Gn.prototype.bytesPerElement=8,vr(Gn,"StructArrayLayout4i8");class Dn extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I,P){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,p,y,E,I,P)}emplace(s,u,p,y,E,I,P,O){const N=6*s,$=12*s,U=3*s;return this.int16[N+0]=u,this.int16[N+1]=p,this.uint8[$+4]=y,this.uint8[$+5]=E,this.uint8[$+6]=I,this.uint8[$+7]=P,this.float32[U+2]=O,s}}Dn.prototype.bytesPerElement=12,vr(Dn,"StructArrayLayout2i4ub1f12");class ar extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,y){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,y)}emplace(s,u,p,y,E){const I=4*s;return this.float32[I+0]=u,this.float32[I+1]=p,this.float32[I+2]=y,this.float32[I+3]=E,s}}ar.prototype.bytesPerElement=16,vr(ar,"StructArrayLayout4f16");class bn extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,p,y,E)}emplace(s,u,p,y,E,I){const P=6*s,O=3*s;return this.uint16[P+0]=u,this.uint16[P+1]=p,this.uint16[P+2]=y,this.uint16[P+3]=E,this.float32[O+2]=I,s}}bn.prototype.bytesPerElement=12,vr(bn,"StructArrayLayout4ui1f12");class Un extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,y){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,y)}emplace(s,u,p,y,E){const I=4*s;return this.uint16[I+0]=u,this.uint16[I+1]=p,this.uint16[I+2]=y,this.uint16[I+3]=E,s}}Un.prototype.bytesPerElement=8,vr(Un,"StructArrayLayout4ui8");class cr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,s,u,p,y,E,I)}emplace(s,u,p,y,E,I,P){const O=6*s;return this.int16[O+0]=u,this.int16[O+1]=p,this.int16[O+2]=y,this.int16[O+3]=E,this.int16[O+4]=I,this.int16[O+5]=P,s}}cr.prototype.bytesPerElement=12,vr(cr,"StructArrayLayout6i12");class Jn extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I,P,O,N,$,U,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,s,u,p,y,E,I,P,O,N,$,U,H)}emplace(s,u,p,y,E,I,P,O,N,$,U,H,Y){const se=12*s;return this.int16[se+0]=u,this.int16[se+1]=p,this.int16[se+2]=y,this.int16[se+3]=E,this.uint16[se+4]=I,this.uint16[se+5]=P,this.uint16[se+6]=O,this.uint16[se+7]=N,this.int16[se+8]=$,this.int16[se+9]=U,this.int16[se+10]=H,this.int16[se+11]=Y,s}}Jn.prototype.bytesPerElement=24,vr(Jn,"StructArrayLayout4i4ui4i24");class hr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,s,u,p,y,E,I)}emplace(s,u,p,y,E,I,P){const O=10*s,N=5*s;return this.int16[O+0]=u,this.int16[O+1]=p,this.int16[O+2]=y,this.float32[N+2]=E,this.float32[N+3]=I,this.float32[N+4]=P,s}}hr.prototype.bytesPerElement=20,vr(hr,"StructArrayLayout3i3f20");class vi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}vi.prototype.bytesPerElement=4,vr(vi,"StructArrayLayout1ul4");class Ui extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I,P,O,N,$,U,H,Y){const se=this.length;return this.resize(se+1),this.emplace(se,s,u,p,y,E,I,P,O,N,$,U,H,Y)}emplace(s,u,p,y,E,I,P,O,N,$,U,H,Y,se){const be=20*s,Ge=10*s;return this.int16[be+0]=u,this.int16[be+1]=p,this.int16[be+2]=y,this.int16[be+3]=E,this.int16[be+4]=I,this.float32[Ge+3]=P,this.float32[Ge+4]=O,this.float32[Ge+5]=N,this.float32[Ge+6]=$,this.int16[be+14]=U,this.uint32[Ge+8]=H,this.uint16[be+18]=Y,this.uint16[be+19]=se,s}}Ui.prototype.bytesPerElement=40,vr(Ui,"StructArrayLayout5i4f1i1ul2ui40");class Wr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I,P){const O=this.length;return this.resize(O+1),this.emplace(O,s,u,p,y,E,I,P)}emplace(s,u,p,y,E,I,P,O){const N=8*s;return this.int16[N+0]=u,this.int16[N+1]=p,this.int16[N+2]=y,this.int16[N+4]=E,this.int16[N+5]=I,this.int16[N+6]=P,this.int16[N+7]=O,s}}Wr.prototype.bytesPerElement=16,vr(Wr,"StructArrayLayout3i2i2i16");class ei extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,p,y,E)}emplace(s,u,p,y,E,I){const P=4*s,O=8*s;return this.float32[P+0]=u,this.float32[P+1]=p,this.float32[P+2]=y,this.int16[O+6]=E,this.int16[O+7]=I,s}}ei.prototype.bytesPerElement=16,vr(ei,"StructArrayLayout2f1f2i16");class co extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,y){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,y)}emplace(s,u,p,y,E){const I=12*s,P=3*s;return this.uint8[I+0]=u,this.uint8[I+1]=p,this.float32[P+1]=y,this.float32[P+2]=E,s}}co.prototype.bytesPerElement=12,vr(co,"StructArrayLayout2ub2f12");class uo extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p){const y=this.length;return this.resize(y+1),this.emplace(y,s,u,p)}emplace(s,u,p,y){const E=3*s;return this.float32[E+0]=u,this.float32[E+1]=p,this.float32[E+2]=y,s}}uo.prototype.bytesPerElement=12,vr(uo,"StructArrayLayout3f12");class hi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p){const y=this.length;return this.resize(y+1),this.emplace(y,s,u,p)}emplace(s,u,p,y){const E=3*s;return this.uint16[E+0]=u,this.uint16[E+1]=p,this.uint16[E+2]=y,s}}hi.prototype.bytesPerElement=6,vr(hi,"StructArrayLayout3ui6");class ms extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge,mt,Ot,pt,At,zt){const Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge,mt,Ot,pt,At,zt)}emplace(s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge,mt,Ot,pt,At,zt,Vt){const En=30*s,fn=15*s,zn=60*s;return this.int16[En+0]=u,this.int16[En+1]=p,this.int16[En+2]=y,this.float32[fn+2]=E,this.float32[fn+3]=I,this.uint16[En+8]=P,this.uint16[En+9]=O,this.uint32[fn+5]=N,this.uint32[fn+6]=$,this.uint32[fn+7]=U,this.uint16[En+16]=H,this.uint16[En+17]=Y,this.uint16[En+18]=se,this.float32[fn+10]=be,this.float32[fn+11]=Ge,this.uint8[zn+48]=mt,this.uint8[zn+49]=Ot,this.uint8[zn+50]=pt,this.uint32[fn+13]=At,this.int16[En+28]=zt,this.uint8[zn+58]=Vt,s}}ms.prototype.bytesPerElement=60,vr(ms,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class zs extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge,mt,Ot,pt,At,zt,Vt,En,fn,zn,lr,In,Hn,Wn,tr){const pr=this.length;return this.resize(pr+1),this.emplace(pr,s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge,mt,Ot,pt,At,zt,Vt,En,fn,zn,lr,In,Hn,Wn,tr)}emplace(s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge,mt,Ot,pt,At,zt,Vt,En,fn,zn,lr,In,Hn,Wn,tr,pr){const On=38*s,kr=19*s;return this.int16[On+0]=u,this.int16[On+1]=p,this.int16[On+2]=y,this.float32[kr+2]=E,this.float32[kr+3]=I,this.int16[On+8]=P,this.int16[On+9]=O,this.int16[On+10]=N,this.int16[On+11]=$,this.int16[On+12]=U,this.int16[On+13]=H,this.uint16[On+14]=Y,this.uint16[On+15]=se,this.uint16[On+16]=be,this.uint16[On+17]=Ge,this.uint16[On+18]=mt,this.uint16[On+19]=Ot,this.uint16[On+20]=pt,this.uint16[On+21]=At,this.uint16[On+22]=zt,this.uint16[On+23]=Vt,this.uint16[On+24]=En,this.uint16[On+25]=fn,this.uint16[On+26]=zn,this.uint16[On+27]=lr,this.uint16[On+28]=In,this.uint32[kr+15]=Hn,this.float32[kr+16]=Wn,this.float32[kr+17]=tr,this.float32[kr+18]=pr,s}}zs.prototype.bytesPerElement=76,vr(zs,"StructArrayLayout3i2f6i15ui1ul3f76");class Zs extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}Zs.prototype.bytesPerElement=4,vr(Zs,"StructArrayLayout1f4");class Ms extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,y,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,p,y,E)}emplace(s,u,p,y,E,I){const P=5*s;return this.float32[P+0]=u,this.float32[P+1]=p,this.float32[P+2]=y,this.float32[P+3]=E,this.float32[P+4]=I,s}}Ms.prototype.bytesPerElement=20,vr(Ms,"StructArrayLayout5f20");class Ac extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,y){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,y)}emplace(s,u,p,y,E){const I=6*s;return this.uint32[3*s+0]=u,this.uint16[I+2]=p,this.uint16[I+3]=y,this.uint16[I+4]=E,s}}Ac.prototype.bytesPerElement=12,vr(Ac,"StructArrayLayout1ul3ui12");class _a extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const p=this.length;return this.resize(p+1),this.emplace(p,s,u)}emplace(s,u,p){const y=2*s;return this.uint16[y+0]=u,this.uint16[y+1]=p,s}}_a.prototype.bytesPerElement=4,vr(_a,"StructArrayLayout2ui4");class Ru extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}Ru.prototype.bytesPerElement=2,vr(Ru,"StructArrayLayout1ui2");class _h extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const p=this.length;return this.resize(p+1),this.emplace(p,s,u)}emplace(s,u,p){const y=2*s;return this.float32[y+0]=u,this.float32[y+1]=p,s}}_h.prototype.bytesPerElement=8,vr(_h,"StructArrayLayout2f8");class ji extends Gt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ji.prototype.size=40;class Ps extends Ui{get(s){return new ji(this,s)}}vr(Ps,"CollisionBoxArray");class Do extends Gt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}Do.prototype.size=60;class gs extends ms{get(s){return new Do(this,s)}}vr(gs,"PlacedSymbolArray");class Wc extends Gt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(s){this._structArray.uint32[this._pos4+15]=s}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Wc.prototype.size=76;class aa extends zs{get(s){return new Wc(this,s)}}vr(aa,"SymbolInstanceArray");class zl extends Zs{getoffsetX(s){return this.float32[1*s+0]}}vr(zl,"GlyphOffsetArray");class Mc extends ur{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}vr(Mc,"SymbolLineVertexArray");class Tf extends Gt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Tf.prototype.size=12;class um extends Ac{get(s){return new Tf(this,s)}}vr(um,"FeatureIndexArray");class yd extends _a{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}vr(yd,"FillExtrusionCentroidArray");const Xc=Jt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Gd=Jt([{name:"a_dash",components:4,type:"Uint16"}]);var gg={exports:{}},zC=function(l,s){var u,p,y,E,I,P,O,N;for(p=l.length-(u=3&l.length),y=s,I=3432918353,P=461845907,N=0;N<p;)O=255&l.charCodeAt(N)|(255&l.charCodeAt(++N))<<8|(255&l.charCodeAt(++N))<<16|(255&l.charCodeAt(++N))<<24,++N,y=27492+(65535&(E=5*(65535&(y=(y^=O=(65535&(O=(O=(65535&O)*I+(((O>>>16)*I&65535)<<16)&4294967295)<<15|O>>>17))*P+(((O>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(O=0,u){case 3:O^=(255&l.charCodeAt(N+2))<<16;case 2:O^=(255&l.charCodeAt(N+1))<<8;case 1:y^=O=(65535&(O=(O=(65535&(O^=255&l.charCodeAt(N)))*I+(((O>>>16)*I&65535)<<16)&4294967295)<<15|O>>>17))*P+(((O>>>16)*P&65535)<<16)&4294967295}return y^=l.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0},ro=function(l,s){for(var u,p=l.length,y=s^p,E=0;p>=4;)u=1540483477*(65535&(u=255&l.charCodeAt(E)|(255&l.charCodeAt(++E))<<8|(255&l.charCodeAt(++E))<<16|(255&l.charCodeAt(++E))<<24))+((1540483477*(u>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++E;switch(p){case 3:y^=(255&l.charCodeAt(E+2))<<16;case 2:y^=(255&l.charCodeAt(E+1))<<8;case 1:y=1540483477*(65535&(y^=255&l.charCodeAt(E)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};gg.exports=zC,gg.exports.murmur3=zC,gg.exports.murmur2=ro;var Lv=Ce(gg.exports);class Ex{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,u,p,y){this.ids.push($C(s)),this.positions.push(u,p,y)}getPositions(s){const u=$C(s);let p=0,y=this.ids.length-1;for(;p<y;){const I=p+y>>1;this.ids[I]>=u?y=I:p=I+1}const E=[];for(;this.ids[p]===u;)E.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return E}static serialize(s,u){const p=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Cx(p,y,0,p.length-1),u&&u.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(s){const u=new Ex;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u}}function $C(l){const s=+l;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:Lv(String(l))}function Cx(l,s,u,p){for(;u<p;){const y=l[u+p>>1];let E=u-1,I=p+1;for(;;){do{E++}while(l[E]<y);do{I--}while(l[I]>y);if(E>=I)break;Nv(l,E,I),Nv(s,3*E,3*I),Nv(s,3*E+1,3*I+1),Nv(s,3*E+2,3*I+2)}I-u<p-I?(Cx(l,s,u,I),u=I+1):(Cx(l,s,I+1,p),p=I)}}function Nv(l,s,u){const p=l[s];l[s]=l[u],l[u]=p}vr(Ex,"FeaturePositionMap");class Hd{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,u),this.initialized=!0),!!this.location}}class Df extends Hd{constructor(s){super(s),this.current=0}set(s,u,p){this.fetchUniformLocation(s,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class VC extends Hd{constructor(s){super(s),this.current=[0,0,0,0]}set(s,u,p){this.fetchUniformLocation(s,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class UC extends Hd{constructor(s){super(s),this.current=Ds.transparent}set(s,u,p){this.fetchUniformLocation(s,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const j2=new Float32Array(16),G2=new Float32Array(9),H2=new Float32Array(4);function dr(l){return[Ht(255*l.r,255*l.g),Ht(255*l.b,255*l.a)]}class Fo{constructor(s,u,p){this.value=s,this.uniformNames=u.map(y=>`u_${y}`),this.type=p}setUniform(s,u,p,y,E){u.set(s,E,y.constantOr(this.value))}getBinding(s,u){return"color"===this.type?new UC(s):new Df(s)}}class Gh{constructor(s,u){this.uniformNames=u.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,u,p,y,E){const I="u_pattern"===E||"u_dash"===E?this.pattern:"u_pixel_ratio"===E?this.pixelRatio:null;I&&u.set(s,E,I)}getBinding(s,u){return"u_pattern"===u||"u_dash"===u?new VC(s):new Df(s)}}class Ou{constructor(s,u,p,y){this.expression=s,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,u,p,y,E,I){const P=this.paintVertexArray.length,O=this.expression.evaluate(new V(0),u,{},E,y,I);this.paintVertexArray.resize(s),this._setPaintValue(P,s,O)}updatePaintArray(s,u,p,y,E){const I=this.expression.evaluate({zoom:0},p,y,void 0,E);this._setPaintValue(s,u,I)}_setPaintValue(s,u,p){if("color"===this.type){const y=dr(p);for(let E=s;E<u;E++)this.paintVertexArray.emplace(E,y[0],y[1])}else{for(let y=s;y<u;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class $a{constructor(s,u,p,y,E,I){this.expression=s,this.uniformNames=u.map(P=>`u_${P}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(P=>({name:`a_${P}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(s,u,p,y,E,I){const P=this.expression.evaluate(new V(this.zoom),u,{},E,y,I),O=this.expression.evaluate(new V(this.zoom+1),u,{},E,y,I),N=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(N,s,P,O)}updatePaintArray(s,u,p,y,E){const I=this.expression.evaluate({zoom:this.zoom},p,y,void 0,E),P=this.expression.evaluate({zoom:this.zoom+1},p,y,void 0,E);this._setPaintValue(s,u,I,P)}_setPaintValue(s,u,p,y){if("color"===this.type){const E=dr(p),I=dr(y);for(let P=s;P<u;P++)this.paintVertexArray.emplace(P,E[0],E[1],I[0],I[1])}else{for(let E=s;E<u;E++)this.paintVertexArray.emplace(E,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u,p,y,E){const I=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,P=K(this.expression.interpolationFactor(I,this.zoom,this.zoom+1),0,1);u.set(s,E,P)}getBinding(s,u){return new Df(s)}}class Af{constructor(s,u,p,y,E){this.expression=s,this.layerId=E,this.paintVertexAttributes=("array"===p?Gd:Xc).members;for(let I=0;I<u.length;++I);this.paintVertexArray=new y}populatePaintArray(s,u,p){const y=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(y,s,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(s,u,p,y,E,I){this._setPaintValues(s,u,p.patterns&&p.patterns[this.layerId],I)}_setPaintValues(s,u,p,y){if(!y||!p)return;const E=y[p];if(!E)return;const{tl:I,br:P,pixelRatio:O}=E;for(let N=s;N<u;N++)this.paintVertexArray.emplace(N,I[0],I[1],P[0],P[1],O)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hh{constructor(s,u,p=(()=>!0)){this.binders={},this._buffers=[];const y=[];for(const E in s.paint._values){if(!p(E))continue;const I=s.paint.get(E);if(!(I instanceof st&&wo(I.property.specification)))continue;const P=Ix(E,s.type),O=I.value,N=I.property.specification.type,$=!!I.property.useIntegerZoom,U="line-dasharray"===E||E.endsWith("pattern"),H="line-dasharray"===E&&"constant"!==s.layout.get("line-cap").value.kind;if("constant"!==O.kind||H)if("source"===O.kind||H||U){const Y=Tx(E,N,"source");this.binders[E]=U?new Af(O,P,N,Y,s.id):new Ou(O,P,N,Y),y.push(`/a_${E}`)}else{const Y=Tx(E,N,"composite");this.binders[E]=new $a(O,P,N,$,u,Y),y.push(`/z_${E}`)}else this.binders[E]=U?new Gh(O.value,P):new Fo(O.value,P,N),y.push(`/u_${E}`)}this.cacheKey=y.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof Ou||u instanceof $a?u.maxValue:0}populatePaintArrays(s,u,p,y,E,I){for(const P in this.binders){const O=this.binders[P];(O instanceof Ou||O instanceof $a||O instanceof Af)&&O.populatePaintArray(s,u,p,y,E,I)}}setConstantPatternPositions(s){for(const u in this.binders){const p=this.binders[u];p instanceof Gh&&p.setConstantPatternPositions(s)}}updatePaintArrays(s,u,p,y,E,I){let P=!1;for(const O in s){const N=u.getPositions(O);for(const $ of N){const U=p.feature($.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof Ou||Y instanceof $a||Y instanceof Af)&&!0===Y.expression.isStateDependent){const se=y.paint.get(H);Y.expression=se.value,Y.updatePaintArray($.start,$.end,U,s[O],E,I),P=!0}}}}return P}defines(){const s=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Fo||p instanceof Gh)&&s.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Ou||p instanceof $a||p instanceof Af)for(let y=0;y<p.paintVertexAttributes.length;y++)s.push(p.paintVertexAttributes[y].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Fo||p instanceof Gh||p instanceof $a)for(const y of p.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const u=[];for(const p in this.binders){const y=this.binders[p];if(y instanceof Fo||y instanceof Gh||y instanceof $a)for(const E of y.uniformNames)u.push({name:E,property:p,binding:y.getBinding(s,E)})}return u}setUniforms(s,u,p,y,E){for(const{name:I,property:P,binding:O}of p)this.binders[P].setUniform(s,O,E,y.get(P),I)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const u=this.binders[s];(u instanceof Ou||u instanceof $a||u instanceof Af)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(s){for(const u in this.binders){const p=this.binders[u];(p instanceof Ou||p instanceof $a||p instanceof Af)&&p.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof Ou||u instanceof $a||u instanceof Af)&&u.destroy()}}}class gu{constructor(s,u,p=(()=>!0)){this.programConfigurations={};for(const y of s)this.programConfigurations[y.id]=new Hh(y,u,p);this.needsUpload=!1,this._featureMap=new Ex,this._bufferOffset=0}populatePaintArrays(s,u,p,y,E,I,P){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(s,u,y,E,I,P);void 0!==u.id&&this._featureMap.add(u.id,p,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,p,y,E){for(const I of p)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(s,this._featureMap,u,I,y,E)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const Sx={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ix(l,s){return Sx[l]||[l.replace(`${s}-`,"").replace(/-/g,"_")]}const q2={"line-pattern":{source:bn,composite:bn},"fill-pattern":{source:bn,composite:bn},"fill-extrusion-pattern":{source:bn,composite:bn},"line-dasharray":{source:Un,composite:Un}},xF={color:{source:_h,composite:ar},number:{source:Zs,composite:_h}};function Tx(l,s,u){const p=q2[l];return p&&p[u]||xF[s][u]}vr(Fo,"ConstantBinder"),vr(Gh,"PatternConstantBinder"),vr(Ou,"SourceExpressionBinder"),vr(Af,"PatternCompositeBinder"),vr($a,"CompositeExpressionBinder"),vr(Hh,"ProgramConfiguration",{omit:["_buffers"]}),vr(gu,"ProgramConfigurationSet");const _u="-transition";class uc extends li{constructor(s,u){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==s.type&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,"background"!==s.type&&"sky"!==s.type&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),u.layout&&(this._unevaluatedLayout=new it(u.layout)),u.paint)){this._transitionablePaint=new fe(u.paint);for(const p in s.paint)this.setPaintProperty(p,s.paint[p],{validate:!1});for(const p in s.layout)this.setLayoutProperty(p,s.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ft(u.paint)}}getLayoutProperty(s){return"visibility"===s?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u,p={}){null!=u&&this._validate(Ut,`layers.${this.id}.layout.${s}`,s,u,p)||("visibility"!==s?this._unevaluatedLayout.setValue(s,u):this.visibility=u)}getPaintProperty(s){return Qn(s,_u)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u,p={}){if(null!=u&&this._validate(at,`layers.${this.id}.paint.${s}`,s,u,p))return!1;if(Qn(s,_u))return this._transitionablePaint.setTransition(s.slice(0,-11),u||void 0),!1;{const y=this._transitionablePaint._values[s],E=y.value.isDataDriven(),I=y.value;this._transitionablePaint.setValue(s,u),this._handleSpecialPaintPropertyUpdate(s);const P=this._transitionablePaint._values[s].value,O=P.isDataDriven(),N=Qn(s,"pattern")||"line-dasharray"===s;return O||E||N||this._handleOverridablePaintPropertyUpdate(s,I,P)}}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getProgramConfiguration(s){return null}_handleOverridablePaintPropertyUpdate(s,u,p){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||"none"===this.visibility}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),mr(s,(u,p)=>!(void 0===u||"layout"===p&&!Object.keys(u).length||"paint"===p&&!Object.keys(u).length))}_validate(s,u,p,y,E={}){return(!E||!1!==E.validate)&&Rn(this,s.call(Ee,{key:u,layerType:this.type,objectKey:p,value:y,styleSpec:Mn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof st&&wo(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=gh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const jC=Jt([{name:"a_pos",components:2,type:"Int16"}],4),yg=Jt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Qs{constructor(s=[]){this.segments=s}prepareSegment(s,u,p,y){let E=this.segments[this.segments.length-1];return s>Qs.MAX_VERTEX_ARRAY_LENGTH&&un(`Max vertices per segment is ${Qs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!E||E.vertexLength+s>Qs.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==y)&&(E={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==y&&(E.sortKey=y),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,p,y){return new Qs([{vertexOffset:s,primitiveOffset:u,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}Qs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vr(Qs,"SegmentVector");var Ci=8192;class Mf{constructor(s,u){s&&(u?this.setSouthWest(s).setNorthEast(u):4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof jo?new jo(s.lng,s.lat):jo.convert(s),this}setSouthWest(s){return this._sw=s instanceof jo?new jo(s.lng,s.lat):jo.convert(s),this}extend(s){const u=this._sw,p=this._ne;let y,E;if(s instanceof jo)y=s,E=s;else{if(!(s instanceof Mf))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Mf.convert(s)):this.extend(jo.convert(s)):"object"==typeof s&&null!==s&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(jo.convert(s)):this;if(y=s._sw,E=s._ne,!y||!E)return this}return u||p?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),p.lng=Math.max(E.lng,p.lng),p.lat=Math.max(E.lat,p.lat)):(this._sw=new jo(y.lng,y.lat),this._ne=new jo(E.lng,E.lat)),this}getCenter(){return new jo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new jo(this.getWest(),this.getNorth())}getSouthEast(){return new jo(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:u,lat:p}=jo.convert(s);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y}static convert(s){return!s||s instanceof Mf?s:new Mf(s)}}var Fv=1e-6,Gu=typeof Float32Array<"u"?Float32Array:Array;function Bv(){var l=new Gu(9);return Gu!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function zv(l,s,u){var p=s[0],y=s[1],E=s[2],I=s[3],P=s[4],O=s[5],N=s[6],$=s[7],U=s[8],H=u[0],Y=u[1],se=u[2],be=u[3],Ge=u[4],mt=u[5],Ot=u[6],pt=u[7],At=u[8];return l[0]=H*p+Y*I+se*N,l[1]=H*y+Y*P+se*$,l[2]=H*E+Y*O+se*U,l[3]=be*p+Ge*I+mt*N,l[4]=be*y+Ge*P+mt*$,l[5]=be*E+Ge*O+mt*U,l[6]=Ot*p+pt*I+At*N,l[7]=Ot*y+pt*P+At*$,l[8]=Ot*E+pt*O+At*U,l}function qh(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function F_(l,s){var u=s[0],p=s[1],y=s[2],E=s[3],I=s[4],P=s[5],O=s[6],N=s[7],$=s[8],U=s[9],H=s[10],Y=s[11],se=s[12],be=s[13],Ge=s[14],mt=s[15],Ot=u*P-p*I,pt=u*O-y*I,At=u*N-E*I,zt=p*O-y*P,Vt=p*N-E*P,En=y*N-E*O,fn=$*be-U*se,zn=$*Ge-H*se,lr=$*mt-Y*se,In=U*Ge-H*be,Hn=U*mt-Y*be,Wn=H*mt-Y*Ge,tr=Ot*Wn-pt*Hn+At*In+zt*lr-Vt*zn+En*fn;return tr?(l[0]=(P*Wn-O*Hn+N*In)*(tr=1/tr),l[1]=(y*Hn-p*Wn-E*In)*tr,l[2]=(be*En-Ge*Vt+mt*zt)*tr,l[3]=(H*Vt-U*En-Y*zt)*tr,l[4]=(O*lr-I*Wn-N*zn)*tr,l[5]=(u*Wn-y*lr+E*zn)*tr,l[6]=(Ge*At-se*En-mt*pt)*tr,l[7]=($*En-H*At+Y*pt)*tr,l[8]=(I*Hn-P*lr+N*fn)*tr,l[9]=(p*lr-u*Hn-E*fn)*tr,l[10]=(se*Vt-be*At+mt*Ot)*tr,l[11]=(U*At-$*Vt-Y*Ot)*tr,l[12]=(P*zn-I*In-O*fn)*tr,l[13]=(u*In-p*zn+y*fn)*tr,l[14]=(be*pt-se*zt-Ge*Ot)*tr,l[15]=($*zt-U*pt+H*Ot)*tr,l):null}function hm(l,s,u){var p=s[0],y=s[1],E=s[2],I=s[3],P=s[4],O=s[5],N=s[6],$=s[7],U=s[8],H=s[9],Y=s[10],se=s[11],be=s[12],Ge=s[13],mt=s[14],Ot=s[15],pt=u[0],At=u[1],zt=u[2],Vt=u[3];return l[0]=pt*p+At*P+zt*U+Vt*be,l[1]=pt*y+At*O+zt*H+Vt*Ge,l[2]=pt*E+At*N+zt*Y+Vt*mt,l[3]=pt*I+At*$+zt*se+Vt*Ot,l[4]=(pt=u[4])*p+(At=u[5])*P+(zt=u[6])*U+(Vt=u[7])*be,l[5]=pt*y+At*O+zt*H+Vt*Ge,l[6]=pt*E+At*N+zt*Y+Vt*mt,l[7]=pt*I+At*$+zt*se+Vt*Ot,l[8]=(pt=u[8])*p+(At=u[9])*P+(zt=u[10])*U+(Vt=u[11])*be,l[9]=pt*y+At*O+zt*H+Vt*Ge,l[10]=pt*E+At*N+zt*Y+Vt*mt,l[11]=pt*I+At*$+zt*se+Vt*Ot,l[12]=(pt=u[12])*p+(At=u[13])*P+(zt=u[14])*U+(Vt=u[15])*be,l[13]=pt*y+At*O+zt*H+Vt*Ge,l[14]=pt*E+At*N+zt*Y+Vt*mt,l[15]=pt*I+At*$+zt*se+Vt*Ot,l}function vg(l,s,u){var p,y,E,I,P,O,N,$,U,H,Y,se,be=u[0],Ge=u[1],mt=u[2];return s===l?(l[12]=s[0]*be+s[4]*Ge+s[8]*mt+s[12],l[13]=s[1]*be+s[5]*Ge+s[9]*mt+s[13],l[14]=s[2]*be+s[6]*Ge+s[10]*mt+s[14],l[15]=s[3]*be+s[7]*Ge+s[11]*mt+s[15]):(y=s[1],E=s[2],I=s[3],P=s[4],O=s[5],N=s[6],$=s[7],U=s[8],H=s[9],Y=s[10],se=s[11],l[0]=p=s[0],l[1]=y,l[2]=E,l[3]=I,l[4]=P,l[5]=O,l[6]=N,l[7]=$,l[8]=U,l[9]=H,l[10]=Y,l[11]=se,l[12]=p*be+P*Ge+U*mt+s[12],l[13]=y*be+O*Ge+H*mt+s[13],l[14]=E*be+N*Ge+Y*mt+s[14],l[15]=I*be+$*Ge+se*mt+s[15]),l}function Pf(l,s,u){var p=u[0],y=u[1],E=u[2];return l[0]=s[0]*p,l[1]=s[1]*p,l[2]=s[2]*p,l[3]=s[3]*p,l[4]=s[4]*y,l[5]=s[5]*y,l[6]=s[6]*y,l[7]=s[7]*y,l[8]=s[8]*E,l[9]=s[9]*E,l[10]=s[10]*E,l[11]=s[11]*E,l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l}function $v(l,s,u){var p=Math.sin(u),y=Math.cos(u),E=s[4],I=s[5],P=s[6],O=s[7],N=s[8],$=s[9],U=s[10],H=s[11];return s!==l&&(l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[4]=E*y+N*p,l[5]=I*y+$*p,l[6]=P*y+U*p,l[7]=O*y+H*p,l[8]=N*y-E*p,l[9]=$*y-I*p,l[10]=U*y-P*p,l[11]=H*y-O*p,l}function B_(l,s,u){var p=Math.sin(u),y=Math.cos(u),E=s[0],I=s[1],P=s[2],O=s[3],N=s[8],$=s[9],U=s[10],H=s[11];return s!==l&&(l[4]=s[4],l[5]=s[5],l[6]=s[6],l[7]=s[7],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=E*y-N*p,l[1]=I*y-$*p,l[2]=P*y-U*p,l[3]=O*y-H*p,l[8]=E*p+N*y,l[9]=I*p+$*y,l[10]=P*p+U*y,l[11]=O*p+H*y,l}function Dx(l,s){return l[0]=s[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=s[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Ax(l,s,u){var p,y,E,I=u[0],P=u[1],O=u[2],N=Math.hypot(I,P,O);return N<Fv?null:(I*=N=1/N,P*=N,O*=N,p=Math.sin(s),y=Math.cos(s),l[0]=I*I*(E=1-y)+y,l[1]=P*I*E+O*p,l[2]=O*I*E-P*p,l[3]=0,l[4]=I*P*E-O*p,l[5]=P*P*E+y,l[6]=O*P*E+I*p,l[7]=0,l[8]=I*O*E+P*p,l[9]=P*O*E-I*p,l[10]=O*O*E+y,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}Math.hypot||(Math.hypot=function(){for(var l=0,s=arguments.length;s--;)l+=arguments[s]*arguments[s];return Math.sqrt(l)});var Mx=hm;function Px(){var l=new Gu(3);return Gu!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function GC(l){var s=new Gu(3);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s}function hc(l){return Math.hypot(l[0],l[1],l[2])}function Wh(l,s,u){var p=new Gu(3);return p[0]=l,p[1]=s,p[2]=u,p}function Js(l,s,u){return l[0]=s[0]+u[0],l[1]=s[1]+u[1],l[2]=s[2]+u[2],l}function Vv(l,s,u){return l[0]=s[0]-u[0],l[1]=s[1]-u[1],l[2]=s[2]-u[2],l}function HC(l,s,u){return l[0]=s[0]*u[0],l[1]=s[1]*u[1],l[2]=s[2]*u[2],l}function bg(l,s,u){return l[0]=Math.min(s[0],u[0]),l[1]=Math.min(s[1],u[1]),l[2]=Math.min(s[2],u[2]),l}function z_(l,s,u){return l[0]=Math.max(s[0],u[0]),l[1]=Math.max(s[1],u[1]),l[2]=Math.max(s[2],u[2]),l}function Hu(l,s,u){return l[0]=s[0]*u,l[1]=s[1]*u,l[2]=s[2]*u,l}function xg(l,s,u,p){return l[0]=s[0]+u[0]*p,l[1]=s[1]+u[1]*p,l[2]=s[2]+u[2]*p,l}function dc(l,s){var u=s[0],p=s[1],y=s[2],E=u*u+p*p+y*y;return E>0&&(E=1/Math.sqrt(E)),l[0]=s[0]*E,l[1]=s[1]*E,l[2]=s[2]*E,l}function fc(l,s){return l[0]*s[0]+l[1]*s[1]+l[2]*s[2]}function kx(l,s,u){var p=s[0],y=s[1],E=s[2],I=u[0],P=u[1],O=u[2];return l[0]=y*O-E*P,l[1]=E*I-p*O,l[2]=p*P-y*I,l}function Va(l,s,u){var p=s[0],y=s[1],E=s[2],I=u[3]*p+u[7]*y+u[11]*E+u[15];return l[0]=(u[0]*p+u[4]*y+u[8]*E+u[12])/(I=I||1),l[1]=(u[1]*p+u[5]*y+u[9]*E+u[13])/I,l[2]=(u[2]*p+u[6]*y+u[10]*E+u[14])/I,l}function $_(l,s,u){var p=u[0],y=u[1],E=u[2],I=s[0],P=s[1],O=s[2],N=y*O-E*P,$=E*I-p*O,U=p*P-y*I,H=y*U-E*$,Y=E*N-p*U,se=p*$-y*N,be=2*u[3];return $*=be,U*=be,Y*=2,se*=2,l[0]=I+(N*=be)+(H*=2),l[1]=P+$+Y,l[2]=O+U+se,l}var dp,yh=Vv,qC=HC,WC=hc;function XC(l,s,u){return l[0]=s[0]*u,l[1]=s[1]*u,l[2]=s[2]*u,l[3]=s[3]*u,l}function dm(l,s){var u=s[0],p=s[1],y=s[2],E=s[3],I=u*u+p*p+y*y+E*E;return I>0&&(I=1/Math.sqrt(I)),l[0]=u*I,l[1]=p*I,l[2]=y*I,l[3]=E*I,l}function vd(l,s,u){var p=s[0],y=s[1],E=s[2],I=s[3];return l[0]=u[0]*p+u[4]*y+u[8]*E+u[12]*I,l[1]=u[1]*p+u[5]*y+u[9]*E+u[13]*I,l[2]=u[2]*p+u[6]*y+u[10]*E+u[14]*I,l[3]=u[3]*p+u[7]*y+u[11]*E+u[15]*I,l}function ZC(){var l=new Gu(4);return Gu!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function W2(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l}function Uv(l,s,u){u*=.5;var p=s[0],y=s[1],E=s[2],I=s[3],P=Math.sin(u),O=Math.cos(u);return l[0]=p*O+I*P,l[1]=y*O+E*P,l[2]=E*O-y*P,l[3]=I*O-p*P,l}function X2(l,s,u){u*=.5;var p=s[0],y=s[1],E=s[2],I=s[3],P=Math.sin(u),O=Math.cos(u);return l[0]=p*O-E*P,l[1]=y*O+I*P,l[2]=E*O+p*P,l[3]=I*O-y*P,l}Px(),dp=new Gu(4),Gu!=Float32Array&&(dp[0]=0,dp[1]=0,dp[2]=0,dp[3]=0);var Z2=dm;Px(),Wh(1,0,0),Wh(0,1,0),ZC(),ZC(),Bv();const Y2=Jt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:K2}=Y2,Q2=Jt([{name:"a_pos_3",components:3,type:"Int16"}]);var fm=Jt([{name:"a_pos",type:"Int16",components:2}]);class pm{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,p){const y=fc(u,this.dir);if(Math.abs(y)<1e-6)return!1;const E=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1]+(s[2]-this.pos[2])*u[2])/y;return p[0]=this.pos[0]+this.dir[0]*E,p[1]=this.pos[1]+this.dir[1]*E,p[2]=this.pos[2]+this.dir[2]*E,!0}closestPointOnSphere(s,u,p){if(be=(Y=this.pos)[0],Ge=Y[1],mt=Y[2],Ot=(se=s)[0],pt=se[1],At=se[2],Math.abs(be-Ot)<=Fv*Math.max(1,Math.abs(be),Math.abs(Ot))&&Math.abs(Ge-pt)<=Fv*Math.max(1,Math.abs(Ge),Math.abs(pt))&&Math.abs(mt-At)<=Fv*Math.max(1,Math.abs(mt),Math.abs(At))||0===u)return p[0]=p[1]=p[2]=0,!1;var Y,se,be,Ge,mt,Ot,pt,At;const[y,E,I]=this.dir,P=this.pos[0]-s[0],O=this.pos[1]-s[1],N=this.pos[2]-s[2],$=y*y+E*E+I*I,U=2*(P*y+O*E+N*I),H=U*U-4*$*(P*P+O*O+N*N-u*u);if(H<0){const Y=Math.max(-U/2,0),se=P+y*Y,be=O+E*Y,Ge=N+I*Y,mt=Math.hypot(se,be,Ge);return p[0]=se*u/mt,p[1]=be*u/mt,p[2]=Ge*u/mt,!1}{const Y=(-U-Math.sqrt(H))/(2*$);if(Y<0){const se=Math.hypot(P,O,N);return p[0]=P*u/se,p[1]=O*u/se,p[2]=N*u/se,!1}return p[0]=P+y*Y,p[1]=O+E*Y,p[2]=N+I*Y,!0}}}class Rx{constructor(s,u,p,y,E){this.TL=s,this.TR=u,this.BR=p,this.BL=y,this.horizon=E}static fromInvProjectionMatrix(s,u,p){const y=[-1,1,1],E=[1,1,1],I=[1,-1,1],P=[-1,-1,1],O=Va(y,y,s),N=Va(E,E,s),$=Va(I,I,s),U=Va(P,P,s);return new Rx(O,N,$,U,u/p)}}class mm{constructor(s,u){this.points=s,this.planes=u}static fromInvProjectionMatrix(s,u,p,y){const E=Math.pow(2,p),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{const N=vd([],O,s),$=1/N[3]/u*E;return(U=N)[0]=(H=N)[0]*(Y=[$,$,y?1/N[3]:$,$])[0],U[1]=H[1]*Y[1],U[2]=H[2]*Y[2],U[3]=H[3]*Y[3],U;var U,H,Y}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{const N=dc([],kx([],yh([],I[O[0]],I[O[1]]),yh([],I[O[2]],I[O[1]]))),$=-fc(N,I[O[1]]);return N.concat($)});return new mm(I,P)}}class Pc{static fromPoints(s){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const y of s)bg(u,u,y),z_(p,p,y);return new Pc(u,p)}static applyTransform(s,u){const p=s.getCorners();for(let y=0;y<p.length;++y)Va(p[y],p[y],u);return Pc.fromPoints(p)}constructor(s,u){this.min=s,this.max=u,this.center=Hu([],Js([],this.min,this.max),.5)}quadrant(s){const u=[s%2==0,s<2],p=GC(this.min),y=GC(this.max);for(let E=0;E<u.length;E++)p[E]=u[E]?this.min[E]:this.center[E],y[E]=u[E]?this.center[E]:this.max[E];return y[2]=this.max[2],new Pc(p,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,u=this.max;return[[s[0],s[1],s[2]],[u[0],s[1],s[2]],[u[0],u[1],s[2]],[s[0],u[1],s[2]],[s[0],s[1],u[2]],[u[0],s[1],u[2]],[u[0],u[1],u[2]],[s[0],u[1],u[2]]]}intersects(s){const u=this.getCorners();let p=!0;for(let y=0;y<s.planes.length;y++){const E=s.planes[y];let I=0;for(let P=0;P<u.length;P++)I+=fc(E,u[P])+E[3]>=0;if(0===I)return 0;I!==u.length&&(p=!1)}if(p)return 2;for(let y=0;y<3;y++){let E=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let P=0;P<s.points.length;P++){const O=s.points[P][y]-this.min[y];E=Math.min(E,O),I=Math.max(I,O)}if(I<0||E>this.max[y]-this.min[y])return 0}return 1}}const wg=5,J2=6,bd=Ci/Math.PI/2,YC=16383,qu=[64,32,16],Xh=-bd,Lu=bd,Ox=[new Pc([Xh,Xh,Xh],[Lu,Lu,Lu]),new Pc([Xh,Xh,Xh],[0,0,Lu]),new Pc([0,Xh,Xh],[Lu,0,Lu]),new Pc([Xh,0,Xh],[0,Lu,Lu]),new Pc([0,0,Xh],[Lu,Lu,Lu])];function V_(l){return l*bd/qd}function U_(l,s,u,p=!0){const y=Hu([],l._camera.position,l.worldSize),E=[s,u,1,1];vd(E,E,l.pixelMatrixInverse),XC(E,E,1/E[3]);const I=dc([],yh([],E,y)),P=l.globeMatrix,O=[P[12],P[13],P[14]],N=yh([],O,y),$=hc(N),U=dc([],N),H=l.worldSize/(2*Math.PI),Y=fc(U,I),se=Math.asin(H/$);if(se<Math.acos(Y)){if(!p)return null;const lr=[],In=[];Hu(lr,I,$/Y),dc(In,yh(In,lr,N)),dc(I,Js(I,N,Hu(I,In,Math.tan(se)*$)))}const be=[];new pm(y,I).closestPointOnSphere(O,H,be);const Ge=dc([],ut(P,0)),mt=dc([],ut(P,1)),Ot=dc([],ut(P,2)),pt=fc(Ge,be),At=fc(mt,be),zt=fc(Ot,be),Vt=ae(Math.asin(-At/H));let En=ae(Math.atan2(pt,zt));En=l.center.lng+function(lr,In){const Hn=(In-lr+180)%360-180;return Hn<-180?Hn+360:Hn}(l.center.lng,En);const fn=Xd(En),zn=K(Of(Vt),0,1);return new Tg(fn,zn)}class Lx{constructor(s,u,p){this.a=yh([],s,p),this.b=yh([],u,p),this.center=p;const y=dc([],this.a),E=dc([],this.b);this.angle=Math.acos(fc(y,E))}}function Nx(l,s){if(0===l.angle)return null;let u;return u=0===l.a[s]?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[s]/l.a[s]/Math.sin(l.angle)-1/Math.tan(l.angle)),u<0||u>1?null:function(p,y,E,I){const P=Math.sin(E);return p*(Math.sin((1-I)*E)/P)+y*(Math.sin(I*E)/P)}(l.a[s],l.b[s],l.angle,K(u,0,1))+l.center[s]}function xd(l){if(l.z<=1)return Ox[l.z+2*l.y+l.x];const s=kf(_m(l));return Pc.fromPoints(s)}function fp(l,s,u){return Hu(l,l,1-u),xg(l,l,s,u)}function Fx(l,s){const u=mp(s.zoom);if(0===u)return xd(l);const p=_m(l),y=kf(p),E=Xd(p.getWest())*s.worldSize,I=Xd(p.getEast())*s.worldSize,P=Of(p.getNorth())*s.worldSize,O=Of(p.getSouth())*s.worldSize,N=[E,P,0],$=[I,P,0],U=[E,O,0],H=[I,O,0],Y=F_([],s.globeMatrix);return Va(N,N,Y),Va($,$,Y),Va(U,U,Y),Va(H,H,Y),y[0]=fp(y[0],U,u),y[1]=fp(y[1],H,u),y[2]=fp(y[2],$,u),y[3]=fp(y[3],N,u),Pc.fromPoints(y)}function Bx(l,s,u){for(const p of l)Va(p,p,s),Hu(p,p,u)}function _m({x:l,y:s,z:u}){const p=1/(1<<u),y=new jo(Zh(l*p),Zc((s+1)*p)),E=new jo(Zh((l+1)*p),Zc(s*p));return new Mf(y,E)}function kf(l){const s=pe(l.getNorth()),u=pe(l.getSouth()),p=Math.cos(s),y=Math.cos(u),E=Math.sin(s),I=Math.sin(u),P=l.getWest(),O=l.getEast();return[Eg(y,I,P),Eg(y,I,O),Eg(p,E,O),Eg(p,E,P)]}function Eg(l,s,u,p=bd){return u=pe(u),[l*Math.sin(u)*p,-s*p,l*Math.cos(u)*p]}function ym(l,s,u){return Eg(Math.cos(pe(l)),Math.sin(pe(l)),s,u)}function Cg(l,s,u,p){const y=1<<u.z,E=(l/Ci+u.x)/y;return ym(Zc((s/Ci+u.y)/y),Zh(E),p)}function pp({min:l,max:s}){return YC/Math.max(s[0]-l[0],s[1]-l[1],s[2]-l[2])}const KC=new Float64Array(16);function pc(l){const s=pp(l),u=Dx(KC,[s,s,s]);return vg(u,u,((p=[])[0]=-(y=l.min)[0],p[1]=-y[1],p[2]=-y[2],p));var p,y}function zx(l){const s=(p=l.min,(u=KC)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=p[0],u[13]=p[1],u[14]=p[2],u[15]=1,u);var u,p;const y=1/pp(l);return Pf(s,s,[y,y,y])}function la(l,s,u,p,y){const E=function(O){const N=Ci/(2*Math.PI);return O/(2*Math.PI)/N}(u),I=[l,s,-u/(2*Math.PI)],P=qh(new Float64Array(16));return vg(P,P,I),Pf(P,P,[E,E,E]),$v(P,P,pe(-y)),B_(P,P,pe(-p)),P}function mp(l){return qe(wg,J2,l)}function QC(l,s){const u=ym(s.lat,s.lng);return I=(y=Vv([],function(se){const be=ym(se._center.lat,se._center.lng);let Ge=kx([],Wh(0,1,0),be);const mt=Ax([],-se.angle,be);Ge=Va(Ge,Ge,mt),Ax(mt,-se._pitch,Ge);const Ot=dc([],be);return Hu(Ot,Ot,V_(se.cameraToCenterDistance/se.pixelsPerMeter)),Va(Ot,Ot,mt),Js([],be,Ot)}(l),u))[0],P=y[1],O=y[2],N=(E=u)[0],$=E[1],U=E[2],Y=(H=Math.sqrt(I*I+P*P+O*O)*Math.sqrt(N*N+$*$+U*U))&&fc(y,E)/H,Math.acos(Math.min(Math.max(Y,-1),1));var y,E,I,P,O,N,$,U,H,Y}function jv(l,s){return QC(l,s)>Math.PI/2*1.01}const Rf=pe(85),Sg=Math.cos(Rf),Ig=Math.sin(Rf),qd=6371008.8,$x=2*Math.PI*qd;class Wd{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wd(Me(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,p=this.lat*u,y=s.lat*u,E=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((s.lng-this.lng)*u);return qd*Math.acos(Math.min(E,1))}toBounds(s=0){const u=360*s/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new Mf(new Wd(this.lng-p,this.lat-u),new Wd(this.lng+p,this.lat+u))}toEcef(s){const u=V_(s);return ym(this.lat,this.lng,bd+u)}static convert(s){if(s instanceof Wd)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new Wd(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new Wd(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var jo=Wd;function JC(l){return $x*Math.cos(l*Math.PI/180)}function Xd(l){return(180+l)/360}function Of(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Zd(l,s){return l/JC(s)}function Zh(l){return 360*l-180}function Zc(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function tM(l,s){return l*JC(Zc(s))}const Yc=85.051129;function vm(l){return 1/Math.cos(l*Math.PI/180)}class Tg{constructor(s,u,p=0){this.x=+s,this.y=+u,this.z=+p}static fromLngLat(s,u=0){const p=jo.convert(s);return new Tg(Xd(p.lng),Of(p.lat),Zd(u,p.lat))}toLngLat(){return new jo(Zh(this.x),Zc(this.y))}toAltitude(){return tM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$x*vm(Zc(this.y))}}function Vx(l,s,u,p,y,E,I,P,O){const N=(s+p)/2,$=(u+y)/2,U=new J(N,$);P(U),function(H,Y,se,be,Ge,mt){const Ot=se-Ge,pt=be-mt;return Math.abs((be-Y)*Ot-(se-H)*pt)/Math.hypot(Ot,pt)}(U.x,U.y,E.x,E.y,I.x,I.y)>=O?(Vx(l,s,u,N,$,E,U,P,O),Vx(l,N,$,p,y,U,I,P,O)):l.push(I)}function Kl(l,s,u){let p=l[0],y=p.x,E=p.y;s(p);const I=[p];for(let P=1;P<l.length;P++){const O=l[P],{x:N,y:$}=O;s(O),Vx(I,y,E,N,$,p,O,s,u),y=N,E=$,p=O}return I}function Ux(l,s,u,p){if(p(s,u)){const y=s.add(u)._mult(.5);Ux(l,s,y,p),Ux(l,y,u,p)}else l.push(u)}function j_(l,s){let u=l[0];const p=[u];for(let y=1;y<l.length;y++){const E=l[y];Ux(p,u,E,s),u=E}return p}const jx=Math.pow(2,14)-1,vh=-jx-1;function Dg(l,s){const u=Math.round(l.x*s),p=Math.round(l.y*s);return l.x=K(u,vh,jx),l.y=K(p,vh,jx),(u<l.x||u>l.x+1||p<l.y||p>l.y+1)&&un("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function Yd(l,s,u){const p=l.loadGeometry(),y=l.extent,E=Ci/y;if(s&&u&&u.projection.isReprojectedInTileSpace){const I=1<<s.z,{scale:P,x:O,y:N,projection:$}=u,U=H=>{const Y=Zh((s.x+H.x/y)/I),se=Zc((s.y+H.y/y)/I),be=$.project(Y,se);H.x=(be.x*P-O)*y,H.y=(be.y*P-N)*y};for(let H=0;H<p.length;H++)if(1!==l.type)p[H]=Kl(p[H],U,1);else{const Y=[];for(const se of p[H])se.x<0||se.x>=y||se.y<0||se.y>=y||(U(se),Y.push(se));p[H]=Y}}for(const I of p)for(const P of I)Dg(P,E);return p}function Kd(l,s){return{type:l.type,id:l.id,properties:l.properties,geometry:s?Yd(l):[]}}function gp(l,s,u,p,y){l.emplaceBack(2*s+(p+1)/2,2*u+(y+1)/2)}function Gv(l,s,u){l.emplaceBack(s.x,s.y,s.z,16384*u[0],16384*u[1],16384*u[2])}class eS{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new ur,this.indexArray=new hi,this.segments=new Qs,this.programConfigurations=new gu(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,p,y){const E=this.layers[0],I=[];let P=null;"circle"===E.type&&(P=E.layout.get("circle-sort-key"));for(const{feature:N,id:$,index:U,sourceLayerIndex:H}of s){const Y=this.layers[0]._featureFilter.needGeometry,se=Kd(N,Y);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),se,p))continue;const be=P?P.evaluate(se,{},p):void 0,Ge={id:$,properties:N.properties,type:N.type,sourceLayerIndex:H,index:U,geometry:Y?se.geometry:Yd(N,p,y),patterns:{},sortKey:be};I.push(Ge)}P&&I.sort((N,$)=>N.sortKey-$.sortKey);let O=null;"globe"===y.projection.name&&(this.globeExtVertexArray=new cr,O=y.projection);for(const N of I){const{geometry:$,index:U,sourceLayerIndex:H}=N,Y=s[U].feature;this.addFeature(N,$,U,u.availableImages,p,O),u.featureIndex.insert(Y,$,U,H,this.index)}}update(s,u,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,jC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,yg.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,u,p,y,E,I){for(const P of u)for(const O of P){const N=O.x,$=O.y;if(N<0||N>=Ci||$<0||$>=Ci)continue;if(I){const Y=I.projectTilePoint(N,$,E),se=I.upVector(E,N,$),be=this.globeExtVertexArray;Gv(be,Y,se),Gv(be,Y,se),Gv(be,Y,se),Gv(be,Y,se)}const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),H=U.vertexLength;gp(this.layoutVertexArray,N,$,-1,-1),gp(this.layoutVertexArray,N,$,1,-1),gp(this.layoutVertexArray,N,$,1,1),gp(this.layoutVertexArray,N,$,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+2,H+3),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,{},y,E)}}function tS(l,s){for(let u=0;u<l.length;u++)if(bm(s,l[u]))return!0;for(let u=0;u<s.length;u++)if(bm(l,s[u]))return!0;return!!_p(l,s)}function wF(l,s,u){return!!bm(l,s)||!!Hv(s,l,u)}function Wu(l,s){if(1===l.length)return rS(s,l[0]);for(let u=0;u<s.length;u++){const p=s[u];for(let y=0;y<p.length;y++)if(bm(l,p[y]))return!0}for(let u=0;u<l.length;u++)if(rS(s,l[u]))return!0;for(let u=0;u<s.length;u++)if(_p(l,s[u]))return!0;return!1}function Gx(l,s,u){if(l.length>1){if(_p(l,s))return!0;for(let p=0;p<s.length;p++)if(Hv(s[p],l,u))return!0}for(let p=0;p<l.length;p++)if(Hv(l[p],s,u))return!0;return!1}function _p(l,s){if(0===l.length||0===s.length)return!1;for(let u=0;u<l.length-1;u++){const p=l[u],y=l[u+1];for(let E=0;E<s.length-1;E++)if(EF(p,y,s[E],s[E+1]))return!0}return!1}function EF(l,s,u,p){return Ft(l,u,p)!==Ft(s,u,p)&&Ft(l,s,u)!==Ft(l,s,p)}function Hv(l,s,u){const p=u*u;if(1===s.length)return l.distSqr(s[0])<p;for(let y=1;y<s.length;y++)if(nS(l,s[y-1],s[y])<p)return!0;return!1}function nS(l,s,u){const p=s.distSqr(u);if(0===p)return l.distSqr(s);const y=((l.x-s.x)*(u.x-s.x)+(l.y-s.y)*(u.y-s.y))/p;return l.distSqr(y<0?s:y>1?u:u.sub(s)._mult(y)._add(s))}function rS(l,s){let u,p,y,E=!1;for(let I=0;I<l.length;I++){u=l[I];for(let P=0,O=u.length-1;P<u.length;O=P++)p=u[P],y=u[O],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(E=!E)}return E}function bm(l,s){let u=!1;for(let p=0,y=l.length-1;p<l.length;y=p++){const E=l[p],I=l[y];E.y>s.y!=I.y>s.y&&s.x<(I.x-E.x)*(s.y-E.y)/(I.y-E.y)+E.x&&(u=!u)}return u}function iS(l,s,u,p,y){for(const I of l)if(s<=I.x&&u<=I.y&&p>=I.x&&y>=I.y)return!0;const E=[new J(s,u),new J(s,y),new J(p,y),new J(p,u)];if(l.length>2)for(const I of E)if(bm(l,I))return!0;for(let I=0;I<l.length-1;I++)if(nM(l[I],l[I+1],E))return!0;return!1}function nM(l,s,u){const p=u[0],y=u[2];if(l.x<p.x&&s.x<p.x||l.x>y.x&&s.x>y.x||l.y<p.y&&s.y<p.y||l.y>y.y&&s.y>y.y)return!1;const E=Ft(l,s,u[0]);return E!==Ft(l,s,u[1])||E!==Ft(l,s,u[2])||E!==Ft(l,s,u[3])}function Ag(l,s,u){const p=s.paint.get(l).value;return"constant"===p.kind?p.value:u.programConfigurations.get(s.id).getMaxValue(l)}function Mg(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function G_(l,s,u,p,y){if(!s[0]&&!s[1])return l;const E=J.convert(s)._mult(y);"viewport"===u&&E._rotate(-p);const I=[];for(let P=0;P<l.length;P++)I.push(l[P].sub(E));return I}function oS(l,s,u,p){const y=J.convert(l)._mult(p);return"viewport"===s&&y._rotate(-u),y}vr(eS,"CircleBucket",{omit:["layers"]});const xm=new St({"circle-sort-key":new Ke(Mn.layout_circle["circle-sort-key"])});var rM={paint:new St({"circle-radius":new Ke(Mn.paint_circle["circle-radius"]),"circle-color":new Ke(Mn.paint_circle["circle-color"]),"circle-blur":new Ke(Mn.paint_circle["circle-blur"]),"circle-opacity":new Ke(Mn.paint_circle["circle-opacity"]),"circle-translate":new ge(Mn.paint_circle["circle-translate"]),"circle-translate-anchor":new ge(Mn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ge(Mn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ge(Mn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ke(Mn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ke(Mn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ke(Mn.paint_circle["circle-stroke-opacity"])}),layout:xm};function Pg(l,s,u,p,y,E,I,P,O){if(E&&l.queryGeometry.isAboveHorizon)return!1;E&&(O*=l.pixelToTileUnitsFactor);const N=l.tileID.canonical,$=u.projection.upVectorScale(N,u.center.lat,u.worldSize).metersToTile;for(const U of s)for(const H of U){const Y=H.add(P),se=y&&u.elevation?u.elevation.exaggeration()*y.getElevationAt(Y.x,Y.y,!0):0,be=u.projection.projectTilePoint(Y.x,Y.y,N);if(se>0){const pt=u.projection.upVector(N,Y.x,Y.y);be.x+=pt[0]*$*se,be.y+=pt[1]*$*se,be.z+=pt[2]*$*se}const Ge=E?Y:iM(be.x,be.y,be.z,p),mt=E?l.tilespaceRays.map(pt=>qv(pt,se)):l.queryGeometry.screenGeometry,Ot=vd([],[be.x,be.y,be.z,1],p);if(!I&&E?O*=Ot[3]/u.cameraToCenterDistance:I&&!E&&(O*=u.cameraToCenterDistance/Ot[3]),E){const pt=Zc((H.y/Ci+N.y)/(1<<N.z));O/=u.projection.pixelsPerMeter(pt,1)/Zd(1,pt)}if(wF(mt,Ge,O))return!0}return!1}function iM(l,s,u,p){const y=vd([],[l,s,u,1],p);return new J(y[0]/y[3],y[1]/y[3])}const Hx=Wh(0,0,0),qx=Wh(0,0,1);function qv(l,s){const u=Px();return Hx[2]=s,l.intersectsPlane(Hx,qx,u),new J(u[0],u[1])}class Wx extends eS{}function sS(l,{width:s,height:u},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*u*p)throw new RangeError("mismatched image size")}else y=new Uint8Array(s*u*p);return l.width=s,l.height=u,l.data=y,l}function aS(l,s,u){const{width:p,height:y}=s;p===l.width&&y===l.height||(yp(l,s,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,p),height:Math.min(l.height,y)},u),l.width=p,l.height=y,l.data=s.data)}function yp(l,s,u,p,y,E){if(0===y.width||0===y.height)return s;if(y.width>l.width||y.height>l.height||u.x>l.width-y.width||u.y>l.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||p.x>s.width-y.width||p.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const I=l.data,P=s.data;for(let O=0;O<y.height;O++){const N=((u.y+O)*l.width+u.x)*E,$=((p.y+O)*s.width+p.x)*E;for(let U=0;U<y.width*E;U++)P[$+U]=I[N+U]}return s}vr(Wx,"HeatmapBucket",{omit:["layers"]});class bh{constructor(s,u){sS(this,s,1,u)}resize(s){aS(this,new bh(s),1)}clone(){return new bh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,p,y,E){yp(s,u,p,y,E,1)}}class Xu{constructor(s,u){sS(this,s,4,u)}resize(s){aS(this,new Xu(s),4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Xu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,p,y,E){yp(s,u,p,y,E,4)}}vr(bh,"AlphaImage"),vr(Xu,"RGBAImage");var CF={paint:new St({"heatmap-radius":new Ke(Mn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ke(Mn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ge(Mn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wt(Mn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ge(Mn.paint_heatmap["heatmap-opacity"])})};function Wv(l){const s={},u=l.resolution||256,p=l.clips?l.clips.length:1,y=l.image||new Xu({width:u,height:p}),E=(I,P,O)=>{s[l.evaluationKey]=O;const N=l.expression.evaluate(s);y.data[I+P+0]=Math.floor(255*N.r/N.a),y.data[I+P+1]=Math.floor(255*N.g/N.a),y.data[I+P+2]=Math.floor(255*N.b/N.a),y.data[I+P+3]=Math.floor(255*N.a)};if(l.clips)for(let I=0,P=0;I<p;++I,P+=4*u)for(let O=0,N=0;O<u;O++,N+=4){const $=O/(u-1),{start:U,end:H}=l.clips[I];E(P,N,U*(1-$)+H*$)}else for(let I=0,P=0;I<u;I++,P+=4)E(0,P,I/(u-1));return y}var oM={paint:new St({"hillshade-illumination-direction":new ge(Mn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ge(Mn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ge(Mn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ge(Mn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ge(Mn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ge(Mn.paint_hillshade["hillshade-accent-color"])})};const SF=Jt([{name:"a_pos",components:2,type:"Int16"}],4),{members:sM}=SF;var Xx={exports:{}};function Xv(l,s,u){u=u||2;var p,y,E,I,P,O,N,$=s&&s.length,U=$?s[0]*u:l.length,H=H_(l,0,U,u,!0),Y=[];if(!H||H.next===H.prev)return Y;if($&&(H=function(be,Ge,mt,Ot){var pt,At,zt,Vt=[];for(pt=0,At=Ge.length;pt<At;pt++)(zt=H_(be,Ge[pt]*Ot,pt<At-1?Ge[pt+1]*Ot:be.length,Ot,!1))===zt.next&&(zt.steiner=!0),Vt.push(DF(zt));for(Vt.sort(aM),pt=0;pt<Vt.length;pt++)mt=lM(Vt[pt],mt);return mt}(l,s,H,u)),l.length>80*u){p=E=l[0],y=I=l[1];for(var se=u;se<U;se+=u)(P=l[se])<p&&(p=P),(O=l[se+1])<y&&(y=O),P>E&&(E=P),O>I&&(I=O);N=0!==(N=Math.max(E-p,I-y))?32767/N:0}return q_(H,Y,u,p,y,N,0),Y}function H_(l,s,u,p,y){var E,I;if(y===wp(l,s,u,p)>0)for(E=s;E<u;E+=p)I=Qx(E,l[E],l[E+1],I);else for(E=u-p;E>=s;E-=p)I=Qx(E,l[E],l[E+1],I);return I&&Yx(I,I.next)&&(kg(I),I=I.next),I}function vp(l,s){if(!l)return l;s||(s=l);var u,p=l;do{if(u=!1,p.steiner||!Yx(p,p.next)&&0!==Dl(p.prev,p,p.next))p=p.next;else{if(kg(p),(p=s=p.prev)===p.next)break;u=!0}}while(u||p!==s);return s}function q_(l,s,u,p,y,E,I){if(l){!I&&E&&function($,U,H,Y){var se=$;do{0===se.z&&(se.z=uS(se.x,se.y,U,H,Y)),se.prevZ=se.prev,se.nextZ=se.next,se=se.next}while(se!==$);se.prevZ.nextZ=null,se.prevZ=null,function(be){var Ge,mt,Ot,pt,At,zt,Vt,En,fn=1;do{for(mt=be,be=null,At=null,zt=0;mt;){for(zt++,Ot=mt,Vt=0,Ge=0;Ge<fn&&(Vt++,Ot=Ot.nextZ);Ge++);for(En=fn;Vt>0||En>0&&Ot;)0!==Vt&&(0===En||!Ot||mt.z<=Ot.z)?(pt=mt,mt=mt.nextZ,Vt--):(pt=Ot,Ot=Ot.nextZ,En--),At?At.nextZ=pt:be=pt,pt.prevZ=At,At=pt;mt=Ot}At.nextZ=null,fn*=2}while(zt>1)}(se)}(l,p,y,E);for(var P,O,N=l;l.prev!==l.next;)if(P=l.prev,O=l.next,E?IF(l,p,y,E):lS(l))s.push(P.i/u|0),s.push(l.i/u|0),s.push(O.i/u|0),kg(l),l=O.next,N=O.next;else if((l=O)===N){I?1===I?q_(l=cS(vp(l),s,u),s,u,p,y,E,2):2===I&&TF(l,s,u,p,y,E):q_(vp(l),s,u,p,y,E,1);break}}}function lS(l){var s=l.prev,u=l,p=l.next;if(Dl(s,u,p)>=0)return!1;for(var y=s.x,E=u.x,I=p.x,P=s.y,O=u.y,N=p.y,$=y<E?y<I?y:I:E<I?E:I,U=P<O?P<N?P:N:O<N?O:N,H=y>E?y>I?y:I:E>I?E:I,Y=P>O?P>N?P:N:O>N?O:N,se=p.next;se!==s;){if(se.x>=$&&se.x<=H&&se.y>=U&&se.y<=Y&&bp(y,P,E,O,I,N,se.x,se.y)&&Dl(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function IF(l,s,u,p){var y=l.prev,E=l,I=l.next;if(Dl(y,E,I)>=0)return!1;for(var P=y.x,O=E.x,N=I.x,$=y.y,U=E.y,H=I.y,Y=P<O?P<N?P:N:O<N?O:N,se=$<U?$<H?$:H:U<H?U:H,be=P>O?P>N?P:N:O>N?O:N,Ge=$>U?$>H?$:H:U>H?U:H,mt=uS(Y,se,s,u,p),Ot=uS(be,Ge,s,u,p),pt=l.prevZ,At=l.nextZ;pt&&pt.z>=mt&&At&&At.z<=Ot;){if(pt.x>=Y&&pt.x<=be&&pt.y>=se&&pt.y<=Ge&&pt!==y&&pt!==I&&bp(P,$,O,U,N,H,pt.x,pt.y)&&Dl(pt.prev,pt,pt.next)>=0||(pt=pt.prevZ,At.x>=Y&&At.x<=be&&At.y>=se&&At.y<=Ge&&At!==y&&At!==I&&bp(P,$,O,U,N,H,At.x,At.y)&&Dl(At.prev,At,At.next)>=0))return!1;At=At.nextZ}for(;pt&&pt.z>=mt;){if(pt.x>=Y&&pt.x<=be&&pt.y>=se&&pt.y<=Ge&&pt!==y&&pt!==I&&bp(P,$,O,U,N,H,pt.x,pt.y)&&Dl(pt.prev,pt,pt.next)>=0)return!1;pt=pt.prevZ}for(;At&&At.z<=Ot;){if(At.x>=Y&&At.x<=be&&At.y>=se&&At.y<=Ge&&At!==y&&At!==I&&bp(P,$,O,U,N,H,At.x,At.y)&&Dl(At.prev,At,At.next)>=0)return!1;At=At.nextZ}return!0}function cS(l,s,u){var p=l;do{var y=p.prev,E=p.next.next;!Yx(y,E)&&cM(y,p,p.next,E)&&xp(y,E)&&xp(E,y)&&(s.push(y.i/u|0),s.push(p.i/u|0),s.push(E.i/u|0),kg(p),kg(p.next),p=l=E),p=p.next}while(p!==l);return vp(p)}function TF(l,s,u,p,y,E){var I=l;do{for(var P=I.next.next;P!==I.prev;){if(I.i!==P.i&&AF(I,P)){var O=W_(I,P);return I=vp(I,I.next),O=vp(O,O.next),q_(I,s,u,p,y,E,0),void q_(O,s,u,p,y,E,0)}P=P.next}I=I.next}while(I!==l)}function aM(l,s){return l.x-s.x}function lM(l,s){var u=function(y,E){var I,P=E,O=y.x,N=y.y,$=-1/0;do{if(N<=P.y&&N>=P.next.y&&P.next.y!==P.y){var U=P.x+(N-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(U<=O&&U>$&&($=U,I=P.x<P.next.x?P:P.next,U===O))return I}P=P.next}while(P!==E);if(!I)return null;var H,Y=I,se=I.x,be=I.y,Ge=1/0;P=I;do{O>=P.x&&P.x>=se&&O!==P.x&&bp(N<be?O:$,N,se,be,N<be?$:O,N,P.x,P.y)&&(H=Math.abs(N-P.y)/(O-P.x),xp(P,y)&&(H<Ge||H===Ge&&(P.x>I.x||P.x===I.x&&Zx(I,P)))&&(I=P,Ge=H)),P=P.next}while(P!==Y);return I}(l,s);if(!u)return s;var p=W_(u,l);return vp(p,p.next),vp(u,u.next)}function Zx(l,s){return Dl(l.prev,l,s.prev)<0&&Dl(s.next,l,l.next)<0}function uS(l,s,u,p,y){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-u)*y|0)|l<<8))|l<<4))|l<<2))|l<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-p)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function DF(l){var s=l,u=l;do{(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next}while(s!==l);return u}function bp(l,s,u,p,y,E,I,P){return(y-I)*(s-P)>=(l-I)*(E-P)&&(l-I)*(p-P)>=(u-I)*(s-P)&&(u-I)*(E-P)>=(y-I)*(p-P)}function AF(l,s){return l.next.i!==s.i&&l.prev.i!==s.i&&!function(u,p){var y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==p.i&&y.next.i!==p.i&&cM(y,y.next,u,p))return!0;y=y.next}while(y!==u);return!1}(l,s)&&(xp(l,s)&&xp(s,l)&&function(u,p){var y=u,E=!1,I=(u.x+p.x)/2,P=(u.y+p.y)/2;do{y.y>P!=y.next.y>P&&y.next.y!==y.y&&I<(y.next.x-y.x)*(P-y.y)/(y.next.y-y.y)+y.x&&(E=!E),y=y.next}while(y!==u);return E}(l,s)&&(Dl(l.prev,l,s.prev)||Dl(l,s.prev,s))||Yx(l,s)&&Dl(l.prev,l,l.next)>0&&Dl(s.prev,s,s.next)>0)}function Dl(l,s,u){return(s.y-l.y)*(u.x-s.x)-(s.x-l.x)*(u.y-s.y)}function Yx(l,s){return l.x===s.x&&l.y===s.y}function cM(l,s,u,p){var y=Zv(Dl(l,s,u)),E=Zv(Dl(l,s,p)),I=Zv(Dl(u,p,l)),P=Zv(Dl(u,p,s));return y!==E&&I!==P||!(0!==y||!Kx(l,u,s))||!(0!==E||!Kx(l,p,s))||!(0!==I||!Kx(u,l,p))||!(0!==P||!Kx(u,s,p))}function Kx(l,s,u){return s.x<=Math.max(l.x,u.x)&&s.x>=Math.min(l.x,u.x)&&s.y<=Math.max(l.y,u.y)&&s.y>=Math.min(l.y,u.y)}function Zv(l){return l>0?1:l<0?-1:0}function xp(l,s){return Dl(l.prev,l,l.next)<0?Dl(l,s,l.next)>=0&&Dl(l,l.prev,s)>=0:Dl(l,s,l.prev)<0||Dl(l,l.next,s)<0}function W_(l,s){var u=new Yv(l.i,l.x,l.y),p=new Yv(s.i,s.x,s.y),y=l.next,E=s.prev;return l.next=s,s.prev=l,u.next=y,y.prev=u,p.next=u,u.prev=p,E.next=p,p.prev=E,p}function Qx(l,s,u,p){var y=new Yv(l,s,u);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function kg(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Yv(l,s,u){this.i=l,this.x=s,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wp(l,s,u,p){for(var y=0,E=s,I=u-p;E<u;E+=p)y+=(l[I]-l[E])*(l[E+1]+l[I+1]),I=E;return y}Xx.exports=Xv,Xx.exports.default=Xv,Xv.deviation=function(l,s,u,p){var y=s&&s.length,E=Math.abs(wp(l,0,y?s[0]*u:l.length,u));if(y)for(var I=0,P=s.length;I<P;I++)E-=Math.abs(wp(l,s[I]*u,I<P-1?s[I+1]*u:l.length,u));var O=0;for(I=0;I<p.length;I+=3){var N=p[I]*u,$=p[I+1]*u,U=p[I+2]*u;O+=Math.abs((l[N]-l[U])*(l[$+1]-l[N+1])-(l[N]-l[$])*(l[U+1]-l[N+1]))}return 0===E&&0===O?0:Math.abs((O-E)/E)},Xv.flatten=function(l){for(var s=l[0][0].length,u={vertices:[],holes:[],dimensions:s},p=0,y=0;y<l.length;y++){for(var E=0;E<l[y].length;E++)for(var I=0;I<s;I++)u.vertices.push(l[y][E][I]);y>0&&u.holes.push(p+=l[y-1].length)}return u};var Kv=Ce(Xx.exports);function hS(l,s,u,p,y){X_(l,s,u||0,p||l.length-1,y||Cp)}function X_(l,s,u,p,y){for(;p>u;){if(p-u>600){var E=p-u+1,I=s-u+1,P=Math.log(E),O=.5*Math.exp(2*P/3),N=.5*Math.sqrt(P*O*(E-O)/E)*(I-E/2<0?-1:1);X_(l,s,Math.max(u,Math.floor(s-I*O/E+N)),Math.min(p,Math.floor(s+(E-I)*O/E+N)),y)}var $=l[s],U=u,H=p;for(Ep(l,u,s),y(l[p],$)>0&&Ep(l,u,p);U<H;){for(Ep(l,U,H),U++,H--;y(l[U],$)<0;)U++;for(;y(l[H],$)>0;)H--}0===y(l[u],$)?Ep(l,u,H):Ep(l,++H,p),H<=s&&(u=H+1),s<=H&&(p=H-1)}}function Ep(l,s,u){var p=l[s];l[s]=l[u],l[u]=p}function Cp(l,s){return l<s?-1:l>s?1:0}function Jx(l,s){const u=l.length;if(u<=1)return[l];const p=[];let y,E;for(let I=0;I<u;I++){const P=Cn(l[I]);0!==P&&(l[I].area=Math.abs(P),void 0===E&&(E=P<0),E===P<0?(y&&p.push(y),y=[l[I]]):y.push(l[I]))}if(y&&p.push(y),s>1)for(let I=0;I<p.length;I++)p[I].length<=s||(hS(p[I],s,1,p[I].length-1,uM),p[I]=p[I].slice(0,s));return p}function uM(l,s){return s.area-l.area}function e1(l,s,u){const p=u.patternDependencies;let y=!1;for(const E of s){const I=E.paint.get(`${l}-pattern`);I.isConstant()||(y=!0);const P=I.constantOr(null);P&&(y=!0,p[P]=!0)}return y}function Qv(l,s,u,p,y){const E=y.patternDependencies;for(const I of s){const P=I.paint.get(`${l}-pattern`).value;if("constant"!==P.kind){let O=P.evaluate({zoom:p},u,{},y.availableImages);O=O&&O.name?O.name:O,E[O]=!0,u.patterns[I.id]=O}}return u}class Rg{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ur,this.indexArray=new hi,this.indexArray2=new _a,this.programConfigurations=new gu(s.layers,s.zoom),this.segments=new Qs,this.segments2=new Qs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection}populate(s,u,p,y){this.hasPattern=e1("fill",this.layers,u);const E=this.layers[0].layout.get("fill-sort-key"),I=[];for(const{feature:P,id:O,index:N,sourceLayerIndex:$}of s){const U=this.layers[0]._featureFilter.needGeometry,H=Kd(P,U);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),H,p))continue;const Y=E?E.evaluate(H,{},p,u.availableImages):void 0,se={id:O,properties:P.properties,type:P.type,sourceLayerIndex:$,index:N,geometry:U?H.geometry:Yd(P,p,y),patterns:{},sortKey:Y};I.push(se)}E&&I.sort((P,O)=>P.sortKey-O.sortKey);for(const P of I){const{geometry:O,index:N,sourceLayerIndex:$}=P;if(this.hasPattern){const U=Qv("fill",this.layers,P,this.zoom,u);this.patternFeatures.push(U)}else this.addFeature(P,O,N,p,{},u.availableImages);u.featureIndex.insert(s[N].feature,O,N,$,this.index)}}update(s,u,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,y)}addFeatures(s,u,p,y,E){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,u,p,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,sM),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,u,p,y,E,I=[]){for(const P of Jx(u,500)){let O=0;for(const se of P)O+=se.length;const N=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),$=N.vertexLength,U=[],H=[];for(const se of P){if(0===se.length)continue;se!==P[0]&&H.push(U.length/2);const be=this.segments2.prepareSegment(se.length,this.layoutVertexArray,this.indexArray2),Ge=be.vertexLength;this.layoutVertexArray.emplaceBack(se[0].x,se[0].y),this.indexArray2.emplaceBack(Ge+se.length-1,Ge),U.push(se[0].x),U.push(se[0].y);for(let mt=1;mt<se.length;mt++)this.layoutVertexArray.emplaceBack(se[mt].x,se[mt].y),this.indexArray2.emplaceBack(Ge+mt-1,Ge+mt),U.push(se[mt].x),U.push(se[mt].y);be.vertexLength+=se.length,be.primitiveLength+=se.length}const Y=Kv(U,H);for(let se=0;se<Y.length;se+=3)this.indexArray.emplaceBack($+Y[se],$+Y[se+1],$+Y[se+2]);N.vertexLength+=O,N.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,E,I,y)}}vr(Rg,"FillBucket",{omit:["layers","patternFeatures"]});const hM=new St({"fill-sort-key":new Ke(Mn.layout_fill["fill-sort-key"])});var dM={paint:new St({"fill-antialias":new ge(Mn.paint_fill["fill-antialias"]),"fill-opacity":new Ke(Mn.paint_fill["fill-opacity"]),"fill-color":new Ke(Mn.paint_fill["fill-color"]),"fill-outline-color":new Ke(Mn.paint_fill["fill-outline-color"]),"fill-translate":new ge(Mn.paint_fill["fill-translate"]),"fill-translate-anchor":new ge(Mn.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ke(Mn.paint_fill["fill-pattern"])}),layout:hM};const fM=Jt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),dS=Jt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),pM=Jt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:mM}=fM;var kc={},t1=Re,n1=Sp;function Sp(l,s,u,p,y){this.properties={},this.extent=u,this.type=0,this._pbf=l,this._geometry=-1,this._keys=p,this._values=y,l.readFields(yu,this,s)}function yu(l,s,u){1==l?s.id=u.readVarint():2==l?function(p,y){for(var E=p.readVarint()+p.pos;p.pos<E;){var I=y._keys[p.readVarint()],P=y._values[p.readVarint()];y.properties[I]=P}}(u,s):3==l?s.type=u.readVarint():4==l&&(s._geometry=u.pos)}function Z_(l){for(var s,u,p=0,y=0,E=l.length,I=E-1;y<E;I=y++)p+=((u=l[I]).x-(s=l[y]).x)*(s.y+u.y);return p}Sp.types=["Unknown","Point","LineString","Polygon"],Sp.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var s,u=l.readVarint()+l.pos,p=1,y=0,E=0,I=0,P=[];l.pos<u;){if(y<=0){var O=l.readVarint();p=7&O,y=O>>3}if(y--,1===p||2===p)E+=l.readSVarint(),I+=l.readSVarint(),1===p&&(s&&P.push(s),s=[]),s.push(new t1(E,I));else{if(7!==p)throw new Error("unknown command "+p);s&&s.push(s[0].clone())}}return s&&P.push(s),P},Sp.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var s=l.readVarint()+l.pos,u=1,p=0,y=0,E=0,I=1/0,P=-1/0,O=1/0,N=-1/0;l.pos<s;){if(p<=0){var $=l.readVarint();u=7&$,p=$>>3}if(p--,1===u||2===u)(y+=l.readSVarint())<I&&(I=y),y>P&&(P=y),(E+=l.readSVarint())<O&&(O=E),E>N&&(N=E);else if(7!==u)throw new Error("unknown command "+u)}return[I,O,P,N]},Sp.prototype.toGeoJSON=function(l,s,u){var p,y,E=this.extent*Math.pow(2,u),I=this.extent*l,P=this.extent*s,O=this.loadGeometry(),N=Sp.types[this.type];function $(Y){for(var se=0;se<Y.length;se++){var be=Y[se];Y[se]=[360*(be.x+I)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+P)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(p=0;p<O.length;p++)U[p]=O[p][0];$(O=U);break;case 2:for(p=0;p<O.length;p++)$(O[p]);break;case 3:for(O=function(Y){var se=Y.length;if(se<=1)return[Y];for(var be,Ge,mt=[],Ot=0;Ot<se;Ot++){var pt=Z_(Y[Ot]);0!==pt&&(void 0===Ge&&(Ge=pt<0),Ge===pt<0?(be&&mt.push(be),be=[Y[Ot]]):be.push(Y[Ot]))}return be&&mt.push(be),mt}(O),p=0;p<O.length;p++)for(y=0;y<O[p].length;y++)$(O[p][y])}1===O.length?O=O[0]:N="Multi"+N;var H={type:"Feature",geometry:{type:N,coordinates:O},properties:this.properties};return"id"in this&&(H.id=this.id),H};var fS=n1,r1=pS;function pS(l,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(mS,this,s),this.length=this._features.length}function mS(l,s,u){15===l?s.version=u.readVarint():1===l?s.name=u.readString():5===l?s.extent=u.readVarint():2===l?s._features.push(u.pos):3===l?s._keys.push(u.readString()):4===l&&s._values.push(function(p){for(var y=null,E=p.readVarint()+p.pos;p.pos<E;){var I=p.readVarint()>>3;y=1===I?p.readString():2===I?p.readFloat():3===I?p.readDouble():4===I?p.readVarint64():5===I?p.readVarint():6===I?p.readSVarint():7===I?p.readBoolean():null}return y}(u))}pS.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var s=this._pbf.readVarint()+this._pbf.pos;return new fS(this._pbf,s,this.extent,this._keys,this._values)};var gM=r1;function gS(l,s,u){if(3===l){var p=new gM(u,u.readVarint()+u.pos);p.length&&(s[p.name]=p)}}var o1=kc.VectorTile=function(l,s){this.layers=l.readFields(gS,{},s)},Y_=kc.VectorTileFeature=n1;function Jv(l,s,u,p){const y=[],E=0===p?(I,P,O,N,$,U)=>{I.push(new J(U,O+(U-P)/(N-P)*($-O)))}:(I,P,O,N,$,U)=>{I.push(new J(P+(U-O)/($-O)*(N-P),U))};for(const I of l){const P=[];for(const O of I){if(O.length<=2)continue;const N=[];for(let H=0;H<O.length-1;H++){const Y=O[H].x,se=O[H].y,be=O[H+1].x,Ge=O[H+1].y,mt=0===p?Y:se,Ot=0===p?be:Ge;mt<s?Ot>s&&E(N,Y,se,be,Ge,s):mt>u?Ot<u&&E(N,Y,se,be,Ge,u):N.push(O[H]),Ot<s&&mt>=s&&E(N,Y,se,be,Ge,s),Ot>u&&mt<=u&&E(N,Y,se,be,Ge,u)}let $=O[O.length-1];const U=0===p?$.x:$.y;U>=s&&U<=u&&N.push($),N.length&&($=N[N.length-1],N[0].x===$.x&&N[0].y===$.y||N.push(N[0]),P.push(N))}P.length&&y.push(P)}return y}kc.VectorTileLayer=r1;const _M=Y_.types,s1=Math.pow(2,13);function wm(l,s,u,p,y,E,I,P){l.emplaceBack((s<<1)+I,(u<<1)+E,(Math.floor(p*s1)<<1)+y,Math.round(P))}function K_(l,s,u){l.emplaceBack(s.x,s.y,s.z,16384*u[0],16384*u[1],16384*u[2])}class Og{constructor(){this.acc=new J(0,0),this.polyCount=[]}startRing(s){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new J(s.x,s.y),this.max=new J(s.x,s.y))}append(s,u){this.currentPolyCount.edges++,this.acc._add(s);const p=this.min,y=this.max;s.x<p.x?p.x=s.x:s.x>y.x&&(y.x=s.x),s.y<p.y?p.y=s.y:s.y>y.y&&(y.y=s.y),((0===s.x||s.x===Ci)&&s.x===u.x)!=((0===s.y||s.y===Ci)&&s.y===u.y)&&this.processBorderOverlap(s,u),u.x<0!=s.x<0&&this.addBorderIntersection(0,lo(u.y,s.y,(0-u.x)/(s.x-u.x))),u.x>Ci!=s.x>Ci&&this.addBorderIntersection(1,lo(u.y,s.y,(Ci-u.x)/(s.x-u.x))),u.y<0!=s.y<0&&this.addBorderIntersection(2,lo(u.x,s.x,(0-u.y)/(s.y-u.y))),u.y>Ci!=s.y>Ci&&this.addBorderIntersection(3,lo(u.x,s.x,(Ci-u.y)/(s.y-u.y)))}addBorderIntersection(s,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[s];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(s,u){if(s.x===u.x){if(s.y===u.y)return;const p=0===s.x?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,s.y)}else{const p=0===s.y?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,s.x)}}centroid(){const s=this.polyCount.reduce((u,p)=>u+p.edges,0);return 0!==s?this.acc.div(s)._round():new J(0,0)}span(){return new J(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((s,u)=>s+ +(u[0]!==Number.MAX_VALUE),0)}}class Q_{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.layoutVertexArray=new Gn,this.centroidVertexArray=new yd,this.indexArray=new hi,this.programConfigurations=new gu(s.layers,s.zoom),this.segments=new Qs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=s.enableTerrain}populate(s,u,p,y){this.features=[],this.hasPattern=e1("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(E){const I=Math.exp(Math.PI*(1-E.y/(1<<E.z)*2));return 80150034*I/(I*I+1)/Ci/(1<<E.z)}(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:E,id:I,index:P,sourceLayerIndex:O}of s){const N=this.layers[0]._featureFilter.needGeometry,$=Kd(E,N);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),$,p))continue;const U={id:I,sourceLayerIndex:O,index:P,geometry:N?$.geometry:Yd(E,p,y),properties:E.properties,type:E.type,patterns:{}},H=this.layoutVertexArray.length;this.hasPattern?this.features.push(Qv("fill-extrusion",this.layers,U,this.zoom,u)):this.addFeature(U,U.geometry,P,p,{},u.availableImages,y),u.featureIndex.insert(E,U.geometry,P,O,this.index,H)}this.sortBorders()}addFeatures(s,u,p,y,E){for(const I of this.features){const{geometry:P}=I;this.addFeature(I,P,I.index,u,p,y,E)}this.sortBorders()}update(s,u,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,mM),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,pM.members,!0))),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,dS.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,p,y,E,I,P){const O=[new J(0,0),new J(Ci,Ci)],N=P.projection,$="globe"===N.name,U=this.enableTerrain&&!$?new Og:null,H="Polygon"===_M[s.type];$&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new cr);const Y=Jx(u,500);for(let mt=Y.length-1;mt>=0;mt--){const Ot=Y[mt];(0===Ot.length||(se=Ot[0]).every(pt=>pt.x<=0)||se.every(pt=>pt.x>=Ci)||se.every(pt=>pt.y<=0)||se.every(pt=>pt.y>=Ci))&&Y.splice(mt,1)}var se;let be;if($)be=e0(Y,O,y);else{be=[];for(const mt of Y)be.push({polygon:mt,bounds:O})}const Ge=H?this.edgeRadius:0;for(const{polygon:mt,bounds:Ot}of be){let pt=0,At=0;for(const Vt of mt)H&&!Vt[0].equals(Vt[Vt.length-1])&&Vt.push(Vt[0]),At+=H?Vt.length-1:Vt.length;const zt=this.segments.prepareSegment((H?5:4)*At,this.layoutVertexArray,this.indexArray);if(H){const Vt=[],En=[];pt=zt.vertexLength;for(const zn of mt){let lr,In;zn.length&&zn!==mt[0]&&En.push(Vt.length/2),lr=zn[1].sub(zn[0])._perp()._unit();for(let Hn=1;Hn<zn.length;Hn++){const Wn=zn[Hn],tr=zn[Hn===zn.length-1?1:Hn+1];let{x:pr,y:On}=Wn;if(Ge){In=tr.sub(Wn)._perp()._unit();const kr=lr.add(In)._unit(),Xr=Ge*Math.min(4,1/(lr.x*kr.x+lr.y*kr.y));pr+=Xr*kr.x,On+=Xr*kr.y,lr=In}wm(this.layoutVertexArray,pr,On,0,0,1,1,0),zt.vertexLength++,Vt.push(Wn.x,Wn.y),$&&K_(this.layoutVertexExtArray,N.projectTilePoint(pr,On,y),N.upVector(y,pr,On))}}const fn=Kv(Vt,En);for(let zn=0;zn<fn.length;zn+=3)this.indexArray.emplaceBack(pt+fn[zn],pt+fn[zn+2],pt+fn[zn+1]),zt.primitiveLength++}for(const Vt of mt){U&&Vt.length&&U.startRing(Vt[0]);let En,fn,zn,lr=Vt.length>4&&Em(Vt[Vt.length-2],Vt[0],Vt[1]),In=Ge?yS(Vt[Vt.length-2],Vt[0],Vt[1],Ge):0;fn=Vt[1].sub(Vt[0])._perp()._unit();let Hn=!0;for(let Wn=1,tr=0;Wn<Vt.length;Wn++){let pr=Vt[Wn-1],On=Vt[Wn];const kr=Vt[Wn===Vt.length-1?1:Wn+1];if(U&&H&&U.currentPolyCount.top++,l1(On,pr,Ot)){Ge&&(fn=kr.sub(On)._perp()._unit(),Hn=!Hn);continue}U&&U.append(On,pr);const Xr=On.sub(pr)._perp(),Rr=Xr.x/(Math.abs(Xr.x)+Math.abs(Xr.y)),Yi=Xr.y>0?1:0,gr=pr.dist(On);if(tr+gr>32768&&(tr=0),Ge){zn=kr.sub(On)._perp()._unit();let Gi=a1(pr,On,kr,_S(fn,zn),Ge);isNaN(Gi)&&(Gi=0);const ki=On.sub(pr)._unit();pr=pr.add(ki.mult(In))._round(),On=On.add(ki.mult(-Gi))._round(),In=Gi,fn=zn}const wi=zt.vertexLength,Ki=Vt.length>4&&Em(pr,On,kr);let Ro=J_(tr,lr,Hn);if(wm(this.layoutVertexArray,pr.x,pr.y,Rr,Yi,0,0,Ro),wm(this.layoutVertexArray,pr.x,pr.y,Rr,Yi,0,1,Ro),tr+=gr,Ro=J_(tr,Ki,!Hn),lr=Ki,wm(this.layoutVertexArray,On.x,On.y,Rr,Yi,0,0,Ro),wm(this.layoutVertexArray,On.x,On.y,Rr,Yi,0,1,Ro),zt.vertexLength+=4,this.indexArray.emplaceBack(wi+0,wi+1,wi+2),this.indexArray.emplaceBack(wi+1,wi+3,wi+2),zt.primitiveLength+=2,Ge){const Gi=pt+(1===Wn?Vt.length-2:Wn-2),ki=1===Wn?pt:Gi+1;if(this.indexArray.emplaceBack(wi+1,Gi,wi+3),this.indexArray.emplaceBack(Gi,ki,wi+3),zt.primitiveLength+=2,void 0===En&&(En=wi),!l1(kr,Vt[Wn],Ot)){const Vs=Wn===Vt.length-1?En:zt.vertexLength;this.indexArray.emplaceBack(wi+2,wi+3,Vs),this.indexArray.emplaceBack(wi+3,Vs+1,Vs),this.indexArray.emplaceBack(wi+3,ki,Vs+1),zt.primitiveLength+=3}Hn=!Hn}if($){const Gi=this.layoutVertexExtArray,ki=N.projectTilePoint(pr.x,pr.y,y),Vs=N.projectTilePoint(On.x,On.y,y),Qi=N.upVector(y,pr.x,pr.y),Xi=N.upVector(y,On.x,On.y);K_(Gi,ki,Qi),K_(Gi,ki,Qi),K_(Gi,Vs,Xi),K_(Gi,Vs,Xi)}}H&&(pt+=Vt.length-1)}}if(U&&U.polyCount.length>0){if(U.borders){U.vertexArrayOffset=this.centroidVertexArray.length;const mt=U.borders,Ot=this.featuresOnBorder.push(U)-1;for(let pt=0;pt<4;pt++)mt[pt][0]!==Number.MAX_VALUE&&this.borders[pt].push(Ot)}this.encodeCentroid(U.borders?void 0:U.centroid(),U)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,E,I,y)}sortBorders(){for(let s=0;s<4;s++)this.borders[s].sort((u,p)=>this.featuresOnBorder[u].borders[s][0]-this.featuresOnBorder[p].borders[s][0])}encodeCentroid(s,u,p=!0){let y,E;if(s)if(0!==s.y){const P=u.span()._mult(this.tileToMeter);y=(Math.max(s.x,1)<<3)+Math.min(7,Math.round(P.x/10)),E=(Math.max(s.y,1)<<3)+Math.min(7,Math.round(P.y/10))}else y=Math.ceil(7*(s.x+450)),E=0;else y=0,E=+p;let I=p?this.centroidVertexArray.length:u.vertexArrayOffset;for(const P of u.polyCount){p&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*P.edges+P.top);for(let O=0;O<P.top;O++)this.centroidVertexArray.emplace(I++,y,E);for(let O=0;O<2*P.edges;O++)this.centroidVertexArray.emplace(I++,0,E),this.centroidVertexArray.emplace(I++,y,E)}}}function _S(l,s){const u=l.add(s)._unit();return l.x*u.x+l.y*u.y}function yS(l,s,u,p){const y=s.sub(l)._perp()._unit(),E=u.sub(s)._perp()._unit();return a1(l,s,u,_S(y,E),p)}function a1(l,s,u,p,y){const E=Math.sqrt(1-p*p);return Math.min(l.dist(s)/3,s.dist(u)/3,y*E/p)}function l1(l,s,u){return l.x<u[0].x&&s.x<u[0].x||l.x>u[1].x&&s.x>u[1].x||l.y<u[0].y&&s.y<u[0].y||l.y>u[1].y&&s.y>u[1].y}function Em(l,s,u){if(l.x<0||l.x>=Ci||s.x<0||s.x>=Ci||u.x<0||u.x>=Ci)return!1;const p=u.sub(s),y=p.perp(),E=l.sub(s);return(p.x*E.x+p.y*E.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(E.x*E.x+E.y*E.y))>-.866&&y.x*E.x+y.y*E.y<0}function J_(l,s,u){const p=s?2|l:-3&l;return u?1|p:-2&p}function c1(){const l=Math.PI/32,s=Math.tan(l),u=qd;return u*Math.sqrt(1+2*s*s)-u}function e0(l,s,u){const p=1<<u.z,y=Zh(u.x/p),E=Zh((u.x+1)/p),I=Zc(u.y/p),P=Zc((u.y+1)/p);return function(O,N,$,U,H=0,Y){const se=[];if(!O.length||!$||!U)return se;const be=(Vt,En)=>{for(const fn of Vt)se.push({polygon:fn,bounds:En})},Ge=Math.ceil(Math.log2($)),mt=Math.ceil(Math.log2(U)),Ot=Ge-mt,pt=[];for(let Vt=0;Vt<Math.abs(Ot);Vt++)pt.push(Ot>0?0:1);for(let Vt=0;Vt<Math.min(Ge,mt);Vt++)pt.push(0),pt.push(1);let At=O;if(At=Jv(At,N[0].y-H,N[1].y+H,1),At=Jv(At,N[0].x-H,N[1].x+H,0),!At.length)return se;const zt=[];for(pt.length?zt.push({polygons:At,bounds:N,depth:0}):be(At,N);zt.length;){const Vt=zt.pop(),En=Vt.depth,fn=pt[En],zn=Vt.bounds[0],lr=Vt.bounds[1],In=0===fn?zn.x:zn.y,Hn=0===fn?lr.x:lr.y,Wn=Y?Y(fn,In,Hn):.5*(In+Hn),tr=Jv(Vt.polygons,In-H,Wn+H,fn),pr=Jv(Vt.polygons,Wn-H,Hn+H,fn);if(tr.length){const On=[zn,new J(0===fn?Wn:lr.x,1===fn?Wn:lr.y)];pt.length>En+1?zt.push({polygons:tr,bounds:On,depth:En+1}):be(tr,On)}if(pr.length){const On=[new J(0===fn?Wn:zn.x,1===fn?Wn:zn.y),lr];pt.length>En+1?zt.push({polygons:pr,bounds:On,depth:En+1}):be(pr,On)}}return se}(l,s,Math.ceil((E-y)/11.25),Math.ceil((I-P)/11.25),1,(O,N,$)=>{if(0===O)return.5*(N+$);{const U=Zc((u.y+N/Ci)/p);return(Of(.5*(Zc((u.y+$/Ci)/p)+U))*p-u.y)*Ci}})}vr(Q_,"FillExtrusionBucket",{omit:["layers","features"]}),vr(Og,"PartMetadata");const t0=new St({"fill-extrusion-edge-radius":new ge(Mn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var yM={paint:new St({"fill-extrusion-opacity":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ke(Mn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ke(Mn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ke(Mn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ke(Mn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new ge(Mn["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:t0};function vS(l,s,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[l*p-2*Math.PI*6378137/2,s*p-2*Math.PI*6378137/2]}class n0{constructor(s,u,p){this.z=s,this.x=u,this.y=p,this.key=ey(0,s,s,u,p)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u){const p=(I=this.y,P=this.z,O=vS(256*(E=this.x),256*(I=Math.pow(2,P)-I-1),P),N=vS(256*(E+1),256*(I+1),P),O[0]+","+O[1]+","+N[0]+","+N[1]),y=function(E,I,P){let O,N="";for(let $=E;$>0;$--)O=1<<$-1,N+=(I&O?1:0)+(P&O?2:0);return N}(this.z,this.x,this.y);var E,I,P,O,N;return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===u?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class bS{constructor(s,u){this.wrap=s,this.canonical=u,this.key=ey(s,u.z,u.z,u.x,u.y)}}class vu{constructor(s,u,p,y,E){this.overscaledZ=s,this.wrap=u,this.canonical=new n0(p,+y,+E),this.key=0===u&&s===p?this.canonical.key:ey(u,s,p,y,E)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const u=this.canonical.z-s;return s>this.canonical.z?new vu(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vu(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u=!0){if(this.overscaledZ===s&&u)return this.key;if(s>this.canonical.z)return ey(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-s;return ey(this.wrap*+u,s,s,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new vu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new vu(u,this.wrap,u,p,y),new vu(u,this.wrap,u,p+1,y),new vu(u,this.wrap,u,p,y+1),new vu(u,this.wrap,u,p+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new vu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new vu(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new bS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ey(l,s,u,p,y){const E=1<<Math.min(u,22);let I=E*(y%E)+p%E;return l&&u<22&&(I+=E*E*((l<0?-2*l-1:2*l)%(1<<2*(22-u)))),16*(32*I+u)+(s-u)}vr(n0,"CanonicalTileID"),vr(vu,"OverscaledTileID",{omit:["projMatrix"]});class Cm extends J{constructor(s,u,p){super(s,u),this.z=p}}function Ip(l,s){return l.x*s.x+l.y*s.y}function r0(l,s){if(1===l.length){let u=0;const p=s[u++];let y;for(;!y||p.equals(y);)if(y=s[u++],!y)return 1/0;for(;u<s.length;u++){const E=s[u],I=l[0],P=y.sub(p),O=E.sub(p),N=I.sub(p),$=Ip(P,P),U=Ip(P,O),H=Ip(O,O),Y=Ip(N,P),se=Ip(N,O),be=$*H-U*U,Ge=(H*Y-U*se)/be,mt=($*se-U*Y)/be,Ot=p.z*(1-Ge-mt)+y.z*Ge+E.z*mt;if(isFinite(Ot))return Ot}return 1/0}{let u=1/0;for(const p of s)u=Math.min(u,p.z);return u}}function o0(l,s,u,p,y,E,I,P){const O=I*y.getElevationAt(l,s,!0,!0),N=0!==E[0],$=N?0===E[1]?I*(E[0]/7-450):I*function(U,H,Y){const se=Math.floor(H[0]/8),be=Math.floor(H[1]/8),Ge=10*(H[0]-8*se),mt=10*(H[1]-8*be),Ot=U.getElevationAt(se,be,!0,!0),pt=U.getMeterToDEM(Y),At=Math.floor(.5*(Ge*pt-1)),zt=Math.floor(.5*(mt*pt-1)),Vt=U.tileCoordToPixel(se,be),En=2*At+1,fn=2*zt+1,zn=(Xr=En,Rr=fn,[(pr=U).getElevationAtPixel(On=Vt.x-At,kr=Vt.y-zt,!0),pr.getElevationAtPixel(On+Rr,kr,!0),pr.getElevationAtPixel(On,kr+Rr,!0),pr.getElevationAtPixel(On+Xr,kr+Rr,!0)]),lr=Math.abs(zn[0]-zn[1]),In=Math.abs(zn[2]-zn[3]),Hn=Math.abs(zn[0]-zn[2])+Math.abs(zn[1]-zn[3]),Wn=Math.min(.25,.5*pt*(lr+In)/En),tr=Math.min(.25,.5*pt*Hn/fn);var pr,On,kr,Xr,Rr;return Ot+Math.max(Wn*Ge,tr*mt)}(y,E,P):O;return{base:O+(0===u)?-1:u,top:N?Math.max($+p,O+u+2):O+p}}const vM=Jt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:bM}=vM,u1=Jt([{name:"a_packed",components:4,type:"Float32"}]),{members:xS}=u1,Sm=Y_.types,wS=Math.cos(Math.PI/180*37.5);class ty{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Dn,this.layoutVertexArray2=new ar,this.indexArray=new hi,this.programConfigurations=new gu(s.layers,s.zoom),this.segments=new Qs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,p,y){this.hasPattern=e1("line",this.layers,u);const E=this.layers[0].layout.get("line-sort-key"),I=[];for(const{feature:$,id:U,index:H,sourceLayerIndex:Y}of s){const se=this.layers[0]._featureFilter.needGeometry,be=Kd($,se);if(!this.layers[0]._featureFilter.filter(new V(this.zoom),be,p))continue;const Ge=E?E.evaluate(be,{},p):void 0,mt={id:U,properties:$.properties,type:$.type,sourceLayerIndex:Y,index:H,geometry:se?be.geometry:Yd($,p,y),patterns:{},sortKey:Ge};I.push(mt)}E&&I.sort(($,U)=>$.sortKey-U.sortKey);const{lineAtlas:P,featureIndex:O}=u,N=this.addConstantDashes(P);for(const $ of I){const{geometry:U,index:H,sourceLayerIndex:Y}=$;if(N&&this.addFeatureDashes($,P),this.hasPattern){const se=Qv("line",this.layers,$,this.zoom,u);this.patternFeatures.push(se)}else this.addFeature($,U,H,p,P.positions,u.availableImages);O.insert(s[H].feature,U,H,Y,this.index)}}addConstantDashes(s){let u=!1;for(const p of this.layers){const y=p.paint.get("line-dasharray").value,E=p.layout.get("line-cap").value;if("constant"!==y.kind||"constant"!==E.kind)u=!0;else{const I=E.value,P=y.value;if(!P)continue;s.addDash(P,I)}}return u}addFeatureDashes(s,u){const p=this.zoom;for(const y of this.layers){const E=y.paint.get("line-dasharray").value,I=y.layout.get("line-cap").value;if("constant"===E.kind&&"constant"===I.kind)continue;let P,O;if("constant"===E.kind){if(P=E.value,!P)continue}else P=E.evaluate({zoom:p},s);O="constant"===I.kind?I.value:I.evaluate({zoom:p},s),u.addDash(P,O),s.patterns[y.id]=u.getKey(P,O)}}update(s,u,p,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,y)}addFeatures(s,u,p,y,E){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,u,p,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,xS)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,bM),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,p,y,E,I){const P=this.layers[0].layout,O=P.get("line-join").evaluate(s,{}),N=P.get("line-cap").evaluate(s,{}),$=P.get("line-miter-limit"),U=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const H of u)this.addLine(H,s,O,N,$,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,E,I,y)}addLine(s,u,p,y,E,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let mt=0;mt<s.length-1;mt++)this.totalDistance+=s[mt].dist(s[mt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P="Polygon"===Sm[u.type];let O=s.length;for(;O>=2&&s[O-1].equals(s[O-2]);)O--;let N=0;for(;N<O-1&&s[N].equals(s[N+1]);)N++;if(O<(P?3:2))return;"bevel"===p&&(E=1.05);const $=this.overscaling<=16?15*Ci/(512*this.overscaling):0,U=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let H,Y,se,be,Ge;this.e1=this.e2=-1,P&&(H=s[O-2],Ge=s[N].sub(H)._unit()._perp());for(let mt=N;mt<O;mt++){if(se=mt===O-1?P?s[N+1]:void 0:s[mt+1],se&&s[mt].equals(se))continue;Ge&&(be=Ge),H&&(Y=H),H=s[mt],Ge=se?se.sub(H)._unit()._perp():be,be=be||Ge;let Ot=be.add(Ge);0===Ot.x&&0===Ot.y||Ot._unit();const pt=be.x*Ge.x+be.y*Ge.y,At=Ot.x*Ge.x+Ot.y*Ge.y,zt=0!==At?1/At:1/0,Vt=2*Math.sqrt(2-2*At),En=At<wS&&Y&&se,fn=be.x*Ge.y-be.y*Ge.x>0;if(En&&mt>N){const In=H.dist(Y);if(In>2*$){const Hn=H.sub(H.sub(Y)._mult($/In)._round());this.updateDistance(Y,Hn),this.addCurrentVertex(Hn,be,0,0,U),Y=Hn}}const zn=Y&&se;let lr=zn?p:P?"butt":y;if(zn&&"round"===lr&&(zt<I?lr="miter":zt<=2&&(lr="fakeround")),"miter"===lr&&zt>E&&(lr="bevel"),"bevel"===lr&&(zt>2&&(lr="flipbevel"),zt<E&&(lr="miter")),Y&&this.updateDistance(Y,H),"miter"===lr)Ot._mult(zt),this.addCurrentVertex(H,Ot,0,0,U);else if("flipbevel"===lr){if(zt>100)Ot=Ge.mult(-1);else{const In=zt*be.add(Ge).mag()/be.sub(Ge).mag();Ot._perp()._mult(In*(fn?-1:1))}this.addCurrentVertex(H,Ot,0,0,U),this.addCurrentVertex(H,Ot.mult(-1),0,0,U)}else if("bevel"===lr||"fakeround"===lr){const In=-Math.sqrt(zt*zt-1),Hn=fn?In:0,Wn=fn?0:In;if(Y&&this.addCurrentVertex(H,be,Hn,Wn,U),"fakeround"===lr){const tr=Math.round(180*Vt/Math.PI/20);for(let pr=1;pr<tr;pr++){let On=pr/tr;if(.5!==On){const Xr=On-.5;On+=On*Xr*(On-1)*((1.0904+pt*(pt*(3.55645-1.43519*pt)-3.2452))*Xr*Xr+(.848013+pt*(.215638*pt-1.06021)))}const kr=Ge.sub(be)._mult(On)._add(be)._unit()._mult(fn?-1:1);this.addHalfVertex(H,kr.x,kr.y,!1,fn,0,U)}}se&&this.addCurrentVertex(H,Ge,-Hn,-Wn,U)}else if("butt"===lr)this.addCurrentVertex(H,Ot,0,0,U);else if("square"===lr){const In=Y?1:-1;Y||this.addCurrentVertex(H,Ot,In,In,U),this.addCurrentVertex(H,Ot,0,0,U),Y&&this.addCurrentVertex(H,Ot,In,In,U)}else"round"===lr&&(Y&&(this.addCurrentVertex(H,be,0,0,U),this.addCurrentVertex(H,be,1,1,U,!0)),se&&(this.addCurrentVertex(H,Ge,-1,-1,U,!0),this.addCurrentVertex(H,Ge,0,0,U)));if(En&&mt<O-1){const In=H.dist(se);if(In>2*$){const Hn=H.add(se.sub(H)._mult($/In)._round());this.updateDistance(H,Hn),this.addCurrentVertex(Hn,Ge,0,0,U),H=Hn}}}}addCurrentVertex(s,u,p,y,E,I=!1){const P=u.y*y-u.x,O=-u.y-u.x*y;this.addHalfVertex(s,u.x+u.y*p,u.y-u.x*p,I,!1,p,E),this.addHalfVertex(s,P,O,I,!0,-y,E)}addHalfVertex({x:s,y:u},p,y,E,I,P,O){this.layoutVertexArray.emplaceBack((s<<1)+(E?1:0),(u<<1)+(I?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(0===P?0:P<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const N=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,N),O.primitiveLength++),I?this.e2=N:this.e1=N}updateScaledDistance(){if(this.lineClips){const s=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=s*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(s,u){this.distance+=s.dist(u),this.updateScaledDistance()}}vr(ty,"LineBucket",{omit:["layers","patternFeatures"]});const xM=new St({"line-cap":new Ke(Mn.layout_line["line-cap"]),"line-join":new Ke(Mn.layout_line["line-join"]),"line-miter-limit":new ge(Mn.layout_line["line-miter-limit"]),"line-round-limit":new ge(Mn.layout_line["line-round-limit"]),"line-sort-key":new Ke(Mn.layout_line["line-sort-key"])});var wM={paint:new St({"line-opacity":new Ke(Mn.paint_line["line-opacity"]),"line-color":new Ke(Mn.paint_line["line-color"]),"line-translate":new ge(Mn.paint_line["line-translate"]),"line-translate-anchor":new ge(Mn.paint_line["line-translate-anchor"]),"line-width":new Ke(Mn.paint_line["line-width"]),"line-gap-width":new Ke(Mn.paint_line["line-gap-width"]),"line-offset":new Ke(Mn.paint_line["line-offset"]),"line-blur":new Ke(Mn.paint_line["line-blur"]),"line-dasharray":new Ke(Mn.paint_line["line-dasharray"]),"line-pattern":new Ke(Mn.paint_line["line-pattern"]),"line-gradient":new wt(Mn.paint_line["line-gradient"]),"line-trim-offset":new ge(Mn.paint_line["line-trim-offset"])}),layout:xM};const ny=new class extends Ke{possiblyEvaluate(l,s){return s=new V(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(l,s)}evaluate(l,s,u,p){return s=le({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(l,s,u,p)}}(wM.paint.properties["line-width"].specification);function ES(l,s){return s>0?s+2*l:l}ny.useIntegerZoom=!0;const CS=Jt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),SS=Jt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),IS=Jt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Jt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const h1=Jt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),TS=Jt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Jt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ry=Jt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),iy=Jt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Jt([{name:"triangle",components:3,type:"Uint16"}]),Jt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Jt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Jt([{type:"Float32",name:"offsetX"}]),Jt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ql=24;const xh=128;function Lg(l,s){const{expression:u}=s;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new V(l+1))};if("source"===u.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:y}=u;let E=0;for(;E<p.length&&p[E]<=l;)E++;E=Math.max(0,E-1);let I=E;for(;I<p.length&&p[I]<l+1;)I++;I=Math.min(p.length-1,I);const P=p[E],O=p[I];return"composite"===u.kind?{kind:"composite",minZoom:P,maxZoom:O,interpolationType:y}:{kind:"camera",minZoom:P,maxZoom:O,minSize:u.evaluate(new V(P)),maxSize:u.evaluate(new V(O)),interpolationType:y}}}function oy(l,{uSize:s,uSizeT:u},{lowerSize:p,upperSize:y}){return"source"===l.kind?p/xh:"composite"===l.kind?lo(p/xh,y/xh,u):s}function Tp(l,s){let u=0,p=0;if("constant"===l.kind)p=l.layoutSize;else if("source"!==l.kind){const{interpolationType:y,minZoom:E,maxZoom:I}=l,P=y?K(Bs.interpolationFactor(y,s,E,I),0,1):0;"camera"===l.kind?p=lo(l.minSize,l.maxSize,P):u=P}return{uSizeT:u,uSize:p}}var sy=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:xh,evaluateSizeForFeature:oy,evaluateSizeForZoom:Tp,getSizeData:Lg});function EM(l,s,u){return l.sections.forEach(p=>{p.text=function(y,E,I){const P=E.layout.get("text-transform").evaluate(I,{});return"uppercase"===P?y=y.toLocaleUpperCase():"lowercase"===P&&(y=y.toLocaleLowerCase()),B.applyArabicShaping&&(y=B.applyArabicShaping(y)),y}(p.text,s,u)}),l}const Ng={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function CM(l){return"\ufe36"===l||"\ufe48"===l||"\ufe38"===l||"\ufe44"===l||"\ufe42"===l||"\ufe3e"===l||"\ufe3c"===l||"\ufe3a"===l||"\ufe18"===l||"\ufe40"===l||"\ufe10"===l||"\ufe13"===l||"\ufe14"===l||"\uff40"===l||"\uffe3"===l||"\ufe11"===l||"\ufe12"===l}function SM(l){return"\ufe35"===l||"\ufe47"===l||"\ufe37"===l||"\ufe43"===l||"\ufe41"===l||"\ufe3d"===l||"\ufe3b"===l||"\ufe39"===l||"\ufe17"===l||"\ufe3f"===l}var DS=ks,d1=function(l,s,u,p,y){var E,I,P=8*y-p-1,O=(1<<P)-1,N=O>>1,$=-7,U=u?y-1:0,H=u?-1:1,Y=l[s+U];for(U+=H,E=Y&(1<<-$)-1,Y>>=-$,$+=P;$>0;E=256*E+l[s+U],U+=H,$-=8);for(I=E&(1<<-$)-1,E>>=-$,$+=p;$>0;I=256*I+l[s+U],U+=H,$-=8);if(0===E)E=1-N;else{if(E===O)return I?NaN:1/0*(Y?-1:1);I+=Math.pow(2,p),E-=N}return(Y?-1:1)*I*Math.pow(2,E-p)},f1=function(l,s,u,p,y,E){var I,P,O,N=8*E-y-1,$=(1<<N)-1,U=$>>1,H=23===y?Math.pow(2,-24)-Math.pow(2,-77):0,Y=p?0:E-1,se=p?1:-1,be=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(P=isNaN(s)?1:0,I=$):(I=Math.floor(Math.log(s)/Math.LN2),s*(O=Math.pow(2,-I))<1&&(I--,O*=2),(s+=I+U>=1?H/O:H*Math.pow(2,1-U))*O>=2&&(I++,O/=2),I+U>=$?(P=0,I=$):I+U>=1?(P=(s*O-1)*Math.pow(2,y),I+=U):(P=s*Math.pow(2,U-1)*Math.pow(2,y),I=0));y>=8;l[u+Y]=255&P,Y+=se,P/=256,y-=8);for(I=I<<y|P,N+=y;N>0;l[u+Y]=255&I,Y+=se,I/=256,N-=8);l[u+Y-se]|=128*be};function ks(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}ks.Varint=0,ks.Fixed64=1,ks.Bytes=2,ks.Fixed32=5;var ay=4294967296,Im=1/ay,AS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Lf(l){return l.type===ks.Bytes?l.readVarint()+l.pos:l.pos+1}function MS(l,s,u){var p=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));u.realloc(p);for(var y=u.pos-1;y>=l;y--)u.buf[y+p]=u.buf[y]}function p1(l,s){for(var u=0;u<l.length;u++)s.writeVarint(l[u])}function IM(l,s){for(var u=0;u<l.length;u++)s.writeSVarint(l[u])}function Fg(l,s){for(var u=0;u<l.length;u++)s.writeFloat(l[u])}function s0(l,s){for(var u=0;u<l.length;u++)s.writeDouble(l[u])}function m1(l,s){for(var u=0;u<l.length;u++)s.writeBoolean(l[u])}function PS(l,s){for(var u=0;u<l.length;u++)s.writeFixed32(l[u])}function kS(l,s){for(var u=0;u<l.length;u++)s.writeSFixed32(l[u])}function RS(l,s){for(var u=0;u<l.length;u++)s.writeFixed64(l[u])}function Tm(l,s){for(var u=0;u<l.length;u++)s.writeSFixed64(l[u])}function a0(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+16777216*l[s+3]}function Bg(l,s,u){l[u]=s,l[u+1]=s>>>8,l[u+2]=s>>>16,l[u+3]=s>>>24}function OS(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+(l[s+3]<<24)}ks.prototype={destroy:function(){this.buf=null},readFields:function(l,s,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),y=p>>3,E=this.pos;this.type=7&p,l(y,s,this),this.pos===E&&this.skip(p)}return s},readMessage:function(l,s){return this.readFields(l,s,this.readVarint()+this.pos)},readFixed32:function(){var l=a0(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=OS(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=a0(this.buf,this.pos)+a0(this.buf,this.pos+4)*ay;return this.pos+=8,l},readSFixed64:function(){var l=a0(this.buf,this.pos)+OS(this.buf,this.pos+4)*ay;return this.pos+=8,l},readFloat:function(){var l=d1(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=d1(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var s,u,p=this.buf;return s=127&(u=p[this.pos++]),u<128?s:(s|=(127&(u=p[this.pos++]))<<7,u<128?s:(s|=(127&(u=p[this.pos++]))<<14,u<128?s:(s|=(127&(u=p[this.pos++]))<<21,u<128?s:function(y,E,I){var P,O,N=I.buf;if(P=(112&(O=N[I.pos++]))>>4,O<128||(P|=(127&(O=N[I.pos++]))<<3,O<128)||(P|=(127&(O=N[I.pos++]))<<10,O<128)||(P|=(127&(O=N[I.pos++]))<<17,O<128)||(P|=(127&(O=N[I.pos++]))<<24,O<128)||(P|=(1&(O=N[I.pos++]))<<31,O<128))return function ly(l,s,u){return u?4294967296*s+(l>>>0):4294967296*(s>>>0)+(l>>>0)}(y,P,E);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(u=p[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,s=this.pos;return this.pos=l,l-s>=12&&AS?AS.decode(this.buf.subarray(s,l)):function(u,p,y){for(var E="",I=p;I<y;){var P,O,N,$=u[I],U=null,H=$>239?4:$>223?3:$>191?2:1;if(I+H>y)break;1===H?$<128&&(U=$):2===H?128==(192&(P=u[I+1]))&&(U=(31&$)<<6|63&P)<=127&&(U=null):3===H?(O=u[I+2],128==(192&(P=u[I+1]))&&128==(192&O)&&((U=(15&$)<<12|(63&P)<<6|63&O)<=2047||U>=55296&&U<=57343)&&(U=null)):4===H&&(O=u[I+2],N=u[I+3],128==(192&(P=u[I+1]))&&128==(192&O)&&128==(192&N)&&((U=(15&$)<<18|(63&P)<<12|(63&O)<<6|63&N)<=65535||U>=1114112)&&(U=null)),null===U?(U=65533,H=1):U>65535&&(U-=65536,E+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),E+=String.fromCharCode(U),I+=H}return E}(this.buf,s,l)},readBytes:function(){var l=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,l);return this.pos=l,s},readPackedVarint:function(l,s){if(this.type!==ks.Bytes)return l.push(this.readVarint(s));var u=Lf(this);for(l=l||[];this.pos<u;)l.push(this.readVarint(s));return l},readPackedSVarint:function(l){if(this.type!==ks.Bytes)return l.push(this.readSVarint());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==ks.Bytes)return l.push(this.readBoolean());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==ks.Bytes)return l.push(this.readFloat());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==ks.Bytes)return l.push(this.readDouble());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==ks.Bytes)return l.push(this.readFixed32());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==ks.Bytes)return l.push(this.readSFixed32());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==ks.Bytes)return l.push(this.readFixed64());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==ks.Bytes)return l.push(this.readSFixed64());var s=Lf(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed64());return l},skip:function(l){var s=7&l;if(s===ks.Varint)for(;this.buf[this.pos++]>127;);else if(s===ks.Bytes)this.pos=this.readVarint()+this.pos;else if(s===ks.Fixed32)this.pos+=4;else{if(s!==ks.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(l,s){this.writeVarint(l<<3|s)},realloc:function(l){for(var s=this.length||16;s<this.pos+l;)s*=2;if(s!==this.length){var u=new Uint8Array(s);u.set(this.buf),this.buf=u,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Bg(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Bg(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Bg(this.buf,-1&l,this.pos),Bg(this.buf,Math.floor(l*Im),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Bg(this.buf,-1&l,this.pos),Bg(this.buf,Math.floor(l*Im),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(s,u){var p,y,E,P;if(s>=0?(p=s%4294967296|0,y=s/4294967296|0):(y=~(-s/4294967296),4294967295^(p=~(-s%4294967296))?p=p+1|0:(p=0,y=y+1|0)),s>=0x10000000000000000||s<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),E=p,(P=u).buf[P.pos++]=127&E|128,E>>>=7,P.buf[P.pos++]=127&E|128,E>>>=7,P.buf[P.pos++]=127&E|128,E>>>=7,P.buf[P.pos++]=127&E|128,P.buf[P.pos]=127&(E>>>=7),function(E,I){var P=(7&E)<<4;I.buf[I.pos++]|=P|((E>>>=3)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E)))))}(y,u)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var s=this.pos;this.pos=function(p,y,E){for(var I,P,O=0;O<y.length;O++){if((I=y.charCodeAt(O))>55295&&I<57344){if(!P){I>56319||O+1===y.length?(p[E++]=239,p[E++]=191,p[E++]=189):P=I;continue}if(I<56320){p[E++]=239,p[E++]=191,p[E++]=189,P=I;continue}I=P-55296<<10|I-56320|65536,P=null}else P&&(p[E++]=239,p[E++]=191,p[E++]=189,P=null);I<128?p[E++]=I:(I<2048?p[E++]=I>>6|192:(I<65536?p[E++]=I>>12|224:(p[E++]=I>>18|240,p[E++]=I>>12&63|128),p[E++]=I>>6&63|128),p[E++]=63&I|128)}return E}(this.buf,l,this.pos);var u=this.pos-s;u>=128&&MS(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeFloat:function(l){this.realloc(4),f1(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),f1(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var s=l.length;this.writeVarint(s),this.realloc(s);for(var u=0;u<s;u++)this.buf[this.pos++]=l[u]},writeRawMessage:function(l,s){this.pos++;var u=this.pos;l(s,this);var p=this.pos-u;p>=128&&MS(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(l,s,u){this.writeTag(l,ks.Bytes),this.writeRawMessage(s,u)},writePackedVarint:function(l,s){s.length&&this.writeMessage(l,p1,s)},writePackedSVarint:function(l,s){s.length&&this.writeMessage(l,IM,s)},writePackedBoolean:function(l,s){s.length&&this.writeMessage(l,m1,s)},writePackedFloat:function(l,s){s.length&&this.writeMessage(l,Fg,s)},writePackedDouble:function(l,s){s.length&&this.writeMessage(l,s0,s)},writePackedFixed32:function(l,s){s.length&&this.writeMessage(l,PS,s)},writePackedSFixed32:function(l,s){s.length&&this.writeMessage(l,kS,s)},writePackedFixed64:function(l,s){s.length&&this.writeMessage(l,RS,s)},writePackedSFixed64:function(l,s){s.length&&this.writeMessage(l,Tm,s)},writeBytesField:function(l,s){this.writeTag(l,ks.Bytes),this.writeBytes(s)},writeFixed32Field:function(l,s){this.writeTag(l,ks.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(l,s){this.writeTag(l,ks.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(l,s){this.writeTag(l,ks.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(l,s){this.writeTag(l,ks.Fixed64),this.writeSFixed64(s)},writeVarintField:function(l,s){this.writeTag(l,ks.Varint),this.writeVarint(s)},writeSVarintField:function(l,s){this.writeTag(l,ks.Varint),this.writeSVarint(s)},writeStringField:function(l,s){this.writeTag(l,ks.Bytes),this.writeString(s)},writeFloatField:function(l,s){this.writeTag(l,ks.Fixed32),this.writeFloat(s)},writeDoubleField:function(l,s){this.writeTag(l,ks.Fixed64),this.writeDouble(s)},writeBooleanField:function(l,s){this.writeVarintField(l,!!s)}};var l0=Ce(DS);const g1=3;function wh(l,s,u){s.glyphs=[],1===l&&u.readMessage(Qd,s)}function Qd(l,s,u){if(3===l){const{id:p,bitmap:y,width:E,height:I,left:P,top:O,advance:N}=u.readMessage(TM,{});s.glyphs.push({id:p,bitmap:new bh({width:E+2*g1,height:I+2*g1},y),metrics:{width:E,height:I,left:P,top:O,advance:N}})}else 4===l?s.ascender=u.readSVarint():5===l&&(s.descender=u.readSVarint())}function TM(l,s,u){1===l?s.id=u.readVarint():2===l?s.bitmap=u.readBytes():3===l?s.width=u.readVarint():4===l?s.height=u.readVarint():5===l?s.left=u.readSVarint():6===l?s.top=u.readSVarint():7===l&&(s.advance=u.readVarint())}const LS=g1;function _1(l){let s=0,u=0;for(const I of l)s+=I.w*I.h,u=Math.max(u,I.w);l.sort((I,P)=>P.h-I.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let y=0,E=0;for(const I of l)for(let P=p.length-1;P>=0;P--){const O=p[P];if(!(I.w>O.w||I.h>O.h)){if(I.x=O.x,I.y=O.y,E=Math.max(E,I.y+I.h),y=Math.max(y,I.x+I.w),I.w===O.w&&I.h===O.h){const N=p.pop();P<p.length&&(p[P]=N)}else I.h===O.h?(O.x+=I.w,O.w-=I.w):I.w===O.w?(O.y+=I.h,O.h-=I.h):(p.push({x:O.x+I.w,y:O.y,w:O.w-I.w,h:I.h}),O.y+=I.h,O.h-=I.h);break}}return{w:y,h:E,fill:s/(y*E)||0}}const Nu=1;class y1{constructor(s,{pixelRatio:u,version:p,stretchX:y,stretchY:E,content:I}){this.paddedRect=s,this.pixelRatio=u,this.stretchX=y,this.stretchY=E,this.content=I,this.version=p}get tl(){return[this.paddedRect.x+Nu,this.paddedRect.y+Nu]}get br(){return[this.paddedRect.x+this.paddedRect.w-Nu,this.paddedRect.y+this.paddedRect.h-Nu]}get displaySize(){return[(this.paddedRect.w-2*Nu)/this.pixelRatio,(this.paddedRect.h-2*Nu)/this.pixelRatio]}}class NS{constructor(s,u){const p={},y={};this.haveRenderCallbacks=[];const E=[];this.addImages(s,p,E),this.addImages(u,y,E);const{w:I,h:P}=_1(E),O=new Xu({width:I||1,height:P||1});for(const N in s){const $=s[N],U=p[N].paddedRect;Xu.copy($.data,O,{x:0,y:0},{x:U.x+Nu,y:U.y+Nu},$.data)}for(const N in u){const $=u[N],U=y[N].paddedRect,H=U.x+Nu,Y=U.y+Nu,se=$.data.width,be=$.data.height;Xu.copy($.data,O,{x:0,y:0},{x:H,y:Y},$.data),Xu.copy($.data,O,{x:0,y:be-1},{x:H,y:Y-1},{width:se,height:1}),Xu.copy($.data,O,{x:0,y:0},{x:H,y:Y+be},{width:se,height:1}),Xu.copy($.data,O,{x:se-1,y:0},{x:H-1,y:Y},{width:1,height:be}),Xu.copy($.data,O,{x:0,y:0},{x:H+se,y:Y},{width:1,height:be})}this.image=O,this.iconPositions=p,this.patternPositions=y}addImages(s,u,p){for(const y in s){const E=s[y],I={x:0,y:0,w:E.data.width+2*Nu,h:E.data.height+2*Nu};p.push(I),u[y]=new y1(I,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(s,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>s.hasImage(p)),s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in s.updatedImages)this.patchUpdatedImage(this.iconPositions[p],s.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],s.getImage(p),u)}patchUpdatedImage(s,u,p){if(!s||!u||s.version===u.version)return;s.version=u.version;const[y,E]=s.tl;p.update(u.data,void 0,{x:y,y:E})}}vr(y1,"ImagePosition"),vr(NS,"ImageAtlas");const Zu={horizontal:1,vertical:2,horizontalOnly:3},FS=-17;class cy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,u){const p=new cy;return p.scale=s||1,p.fontStack=u,p}static forImage(s){const u=new cy;return u.imageName=s,u}}class zg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u){const p=new zg;for(let y=0;y<s.sections.length;y++){const E=s.sections[y];E.image?p.addImageSection(E):p.addTextSection(E,u)}return p}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(s){this.text=function(u,p){let y="";for(let E=0;E<u.length;E++){const I=u.charCodeAt(E+1)||null,P=u.charCodeAt(E-1)||null;y+=!p&&(I&&bx(I)&&!Ng[u[E+1]]||P&&bx(P)&&!Ng[u[E-1]])||!Ng[u[E]]?u[E]:Ng[u[E]]}return y}(this.text,s)}trim(){let s=0;for(let p=0;p<this.text.length&&Dm[this.text.charCodeAt(p)];p++)s++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=s&&Dm[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const p=new zg;return p.text=this.text.substring(s,u),p.sectionIndex=this.sectionIndex.slice(s,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(cy.forText(s.scale,s.fontStack||u));const p=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(p)}addImageSection(s){const u=s.image?s.image.name:"";if(0===u.length)return void un("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(cy.forImage(u)),this.sectionIndex.push(this.sections.length-1)):un("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function v1(l,s,u,p,y,E,I,P,O,N,$,U,H,Y,se){const be=zg.fromFeature(l,y);U===Zu.vertical&&be.verticalizePunctuation(H);let Ge=[];const mt=function(Vt,En,fn,zn,lr,In){if(!Vt)return[];const Hn=[],Wn=function(kr,Xr,Rr,Yi,gr,wi){let Ki=0;for(let Ro=0;Ro<kr.length();Ro++){const Gi=kr.getSection(Ro);Ki+=$g(kr.getCharCode(Ro),Gi,Yi,gr,Xr,wi)}return Ki/Math.max(1,Math.ceil(Ki/Rr))}(Vt,En,fn,zn,lr,In),tr=Vt.text.indexOf("\u200b")>=0;let pr=0;for(let kr=0;kr<Vt.length();kr++){const Xr=Vt.getSection(kr),Rr=Vt.getCharCode(kr);if(Dm[Rr]||(pr+=$g(Rr,Xr,zn,lr,En,In)),kr<Vt.length()-1){const Yi=!((On=Rr)<11904||!(Nr["Bopomofo Extended"](On)||Nr.Bopomofo(On)||Nr["CJK Compatibility Forms"](On)||Nr["CJK Compatibility Ideographs"](On)||Nr["CJK Compatibility"](On)||Nr["CJK Radicals Supplement"](On)||Nr["CJK Strokes"](On)||Nr["CJK Symbols and Punctuation"](On)||Nr["CJK Unified Ideographs Extension A"](On)||Nr["CJK Unified Ideographs"](On)||Nr["Enclosed CJK Letters and Months"](On)||Nr["Halfwidth and Fullwidth Forms"](On)||Nr.Hiragana(On)||Nr["Ideographic Description Characters"](On)||Nr["Kangxi Radicals"](On)||Nr["Katakana Phonetic Extensions"](On)||Nr.Katakana(On)||Nr["Vertical Forms"](On)||Nr["Yi Radicals"](On)||Nr["Yi Syllables"](On)));(Nf[Rr]||Yi||Xr.imageName)&&Hn.push(x1(kr+1,pr,Wn,Hn,BS(Rr,Vt.getCharCode(kr+1),Yi&&tr),!1))}}var On;return DM(x1(Vt.length(),pr,Wn,Hn,0,!0))}(be,N,E,s,p,Y),{processBidirectionalText:Ot,processStyledBidirectionalText:pt}=B;if(Ot&&1===be.sections.length){const Vt=Ot(be.toString(),mt);for(const En of Vt){const fn=new zg;fn.text=En,fn.sections=be.sections;for(let zn=0;zn<En.length;zn++)fn.sectionIndex.push(0);Ge.push(fn)}}else if(pt){const Vt=pt(be.text,be.sectionIndex,mt);for(const En of Vt){const fn=new zg;fn.text=En[0],fn.sectionIndex=En[1],fn.sections=be.sections,Ge.push(fn)}}else Ge=function(Vt,En){const fn=[],zn=Vt.text;let lr=0;for(const In of En)fn.push(Vt.substring(lr,In)),lr=In;return lr<zn.length&&fn.push(Vt.substring(lr,zn.length)),fn}(be,mt);const At=[],zt={positionedLines:At,text:be.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:U,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Vt,En,fn,zn,lr,In,Hn,Wn,tr,pr,On,kr){let Xr=0,Rr=0,Yi=0;const gr="right"===Wn?1:"left"===Wn?0:.5;let wi=!1;for(const Qi of lr){const Xi=Qi.getSections();for(const Us of Xi){if(Us.imageName)continue;const ea=En[Us.fontStack];if(ea&&(wi=void 0!==ea.ascender&&void 0!==ea.descender,!wi))break}if(!wi)break}let Ki=0;for(const Qi of lr){Qi.trim();const Xi=Qi.getMaxScale(),Us=(Xi-1)*Ql,ea={positionedGlyphs:[],lineOffset:0};Vt.positionedLines[Ki]=ea;const Ys=ea.positionedGlyphs;let js=0;if(!Qi.length()){Rr+=In,++Ki;continue}let mi=0,Gr=0;for(let he=0;he<Qi.length();he++){const el=Qi.getSection(he),xl=Qi.getSectionIndex(he),ya=Qi.getCharCode(he);let bo=el.scale,tl=null,Ss=null,Kc=null,nl=Ql,$l=0;const Ml=!(tr===Zu.horizontal||!On&&!kv(ya)||On&&(Dm[ya]||(Ro=ya,Nr.Arabic(Ro)||Nr["Arabic Supplement"](Ro)||Nr["Arabic Extended-A"](Ro)||Nr["Arabic Presentation Forms-A"](Ro)||Nr["Arabic Presentation Forms-B"](Ro))));if(el.imageName){const Qc=zn[el.imageName];if(!Qc)continue;Kc=el.imageName,Vt.iconsInText=Vt.iconsInText||!0,Ss=Qc.paddedRect;const Pl=Qc.displaySize;bo=bo*Ql/kr,tl={width:Pl[0],height:Pl[1],left:Nu,top:-LS,advance:Ml?Pl[1]:Pl[0],localGlyph:!1},$l=wi?-tl.height*bo:FS+Xi*Ql-Pl[1]*bo,nl=tl.advance;const Cd=(Ml?Pl[0]:Pl[1])*bo-Ql*Xi;Cd>0&&Cd>js&&(js=Cd)}else{const Qc=fn[el.fontStack];if(!Qc)continue;Qc[ya]&&(Ss=Qc[ya]);const Pl=En[el.fontStack];if(!Pl)continue;const Cd=Pl.glyphs[ya];if(!Cd)continue;if(tl=Cd.metrics,nl=8203!==ya?Ql:0,wi){const Zg=void 0!==Pl.ascender?Math.abs(Pl.ascender):0,Ey=void 0!==Pl.descender?Math.abs(Pl.descender):0,Yg=(Zg+Ey)*bo;mi<Yg&&(mi=Yg,Gr=(Zg-Ey)/2*bo),$l=-Zg*bo}else $l=FS+(Xi-bo)*Ql}Ml?(Vt.verticalizable=!0,Ys.push({glyph:ya,imageName:Kc,x:Xr,y:Rr+$l,vertical:Ml,scale:bo,localGlyph:tl.localGlyph,fontStack:el.fontStack,sectionIndex:xl,metrics:tl,rect:Ss}),Xr+=nl*bo+pr):(Ys.push({glyph:ya,imageName:Kc,x:Xr,y:Rr+$l,vertical:Ml,scale:bo,localGlyph:tl.localGlyph,fontStack:el.fontStack,sectionIndex:xl,metrics:tl,rect:Ss}),Xr+=tl.advance*bo+pr)}0!==Ys.length&&(Yi=Math.max(Xr-pr,Yi),wi?AM(Ys,gr,js,Gr,In*Xi/2):AM(Ys,gr,js,0,In/2)),Xr=0;const hl=In*Xi+js;ea.lineOffset=Math.max(js,Us),Rr+=hl,++Ki}var Ro;const Gi=Rr,{horizontalAlign:ki,verticalAlign:Vs}=zS(Hn);(function(Qi,Xi,Us,ea,Ys,js){const mi=(Xi-Us)*Ys,Gr=-js*ea;for(const hl of Qi)for(const he of hl.positionedGlyphs)he.x+=mi,he.y+=Gr})(Vt.positionedLines,gr,ki,Vs,Yi,Gi),Vt.top+=-Vs*Gi,Vt.bottom=Vt.top+Gi,Vt.left+=-ki*Yi,Vt.right=Vt.left+Yi,Vt.hasBaseline=wi}(zt,s,u,p,Ge,I,P,O,U,N,H,se),!function(Vt){for(const En of Vt)if(0!==En.positionedGlyphs.length)return!1;return!0}(At)&&zt}const Dm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Nf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function $g(l,s,u,p,y,E){if(s.imageName){const I=p[s.imageName];return I?I.displaySize[0]*s.scale*Ql/E+y:0}{const I=u[s.fontStack],P=I&&I.glyphs[l];return P?P.metrics.advance*s.scale+y:0}}function b1(l,s,u,p){const y=Math.pow(l-s,2);return p?l<s?y/2:2*y:y+Math.abs(u)*u}function BS(l,s,u){let p=0;return 10===l&&(p-=1e4),u&&(p+=150),40!==l&&65288!==l||(p+=50),41!==s&&65289!==s||(p+=50),p}function x1(l,s,u,p,y,E){let I=null,P=b1(s,u,y,E);for(const O of p){const N=b1(s-O.x,u,y,E)+O.badness;N<=P&&(I=O,P=N)}return{index:l,x:s,priorBreak:I,badness:P}}function DM(l){return l?DM(l.priorBreak).concat(l.index):[]}function zS(l){let s=.5,u=.5;switch(l){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function AM(l,s,u,p,y){if(!(s||u||p||y))return;const E=l.length-1,I=l[E],P=(I.x+I.metrics.advance*I.scale)*s;for(let O=0;O<=E;O++)l[O].x-=P,l[O].y+=u+p+y}function w1(l,s,u){const{horizontalAlign:p,verticalAlign:y}=zS(u),E=s[0]-l.displaySize[0]*p,I=s[1]-l.displaySize[1]*y;return{image:l,top:I,bottom:I+l.displaySize[1],left:E,right:E+l.displaySize[0]}}function c0(l,s,u,p,y,E){const I=l.image;let P;if(I.content){const Ge=I.content,mt=I.pixelRatio||1;P=[Ge[0]/mt,Ge[1]/mt,I.displaySize[0]-Ge[2]/mt,I.displaySize[1]-Ge[3]/mt]}const O=s.left*E,N=s.right*E;let $,U,H,Y;"width"===u||"both"===u?(Y=y[0]+O-p[3],U=y[0]+N+p[1]):(Y=y[0]+(O+N-I.displaySize[0])/2,U=Y+I.displaySize[0]);const se=s.top*E,be=s.bottom*E;return"height"===u||"both"===u?($=y[1]+se-p[0],H=y[1]+be+p[2]):($=y[1]+(se+be-I.displaySize[1])/2,H=$+I.displaySize[1]),{image:I,top:$,right:U,bottom:H,left:Y,collisionPadding:P}}class Dp extends J{constructor(s,u,p,y,E){super(s,u),this.angle=y,this.z=p,void 0!==E&&(this.segment=E)}clone(){return new Dp(this.x,this.y,this.z,this.angle,this.segment)}}function MM(l,s,u,p,y){if(void 0===s.segment)return!0;let E=s,I=s.segment+1,P=0;for(;P>-u/2;){if(I--,I<0)return!1;P-=l[I].dist(E),E=l[I]}P+=l[I].dist(l[I+1]),I++;const O=[];let N=0;for(;P<u/2;){const $=l[I],U=l[I+1];if(!U)return!1;let H=l[I-1].angleTo($)-$.angleTo(U);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:P,angleDelta:H}),N+=H;P-O[0].distance>p;)N-=O.shift().angleDelta;if(N>y)return!1;I++,P+=$.dist(U)}return!0}function E1(l){let s=0;for(let u=0;u<l.length-1;u++)s+=l[u].dist(l[u+1]);return s}function $S(l,s,u){return l?.6*s*u:0}function VS(l,s){return Math.max(l?l.right-l.left:0,s?s.right-s.left:0)}function PM(l,s,u,p,y,E){const I=$S(u,y,E),P=VS(u,p)*E;let O=0;const N=E1(l)/2;for(let $=0;$<l.length-1;$++){const U=l[$],H=l[$+1],Y=U.dist(H);if(O+Y>N){const se=(N-O)/Y,be=lo(U.x,H.x,se),Ge=lo(U.y,H.y,se),mt=new Dp(be,Ge,0,H.angleTo(U),$);return!I||MM(l,mt,P,I,s)?mt:void 0}O+=Y}}function kM(l,s,u,p,y,E,I,P,O){const N=$S(p,E,I),$=VS(p,y),U=$*I,H=0===l[0].x||l[0].x===O||0===l[0].y||l[0].y===O;return s-U<s/4&&(s=U+s/4),C1(l,H?s/2*P%s:($/2+2*E)*I*P%s,s,N,u,U,H,!1,O)}function C1(l,s,u,p,y,E,I,P,O){const N=E/2,$=E1(l);let U=0,H=s-u,Y=[];for(let se=0;se<l.length-1;se++){const be=l[se],Ge=l[se+1],mt=be.dist(Ge),Ot=Ge.angleTo(be);for(;H+u<U+mt;){H+=u;const pt=(H-U)/mt,At=lo(be.x,Ge.x,pt),zt=lo(be.y,Ge.y,pt);if(At>=0&&At<O&&zt>=0&&zt<O&&H-N>=0&&H+N<=$){const Vt=new Dp(At,zt,0,Ot,se);Vt._round(),p&&!MM(l,Vt,E,p,y)||Y.push(Vt)}}U+=mt}return P||Y.length||I||(Y=C1(l,U/2,u,p,y,E,I,!0,O)),Y}function uy(l,s,u,p,y){const E=[];for(let I=0;I<l.length;I++){const P=l[I];let O;for(let N=0;N<P.length-1;N++){let $=P[N],U=P[N+1];$.x<s&&U.x<s||($.x<s?$=new J(s,$.y+(s-$.x)/(U.x-$.x)*(U.y-$.y))._round():U.x<s&&(U=new J(s,$.y+(s-$.x)/(U.x-$.x)*(U.y-$.y))._round()),$.y<u&&U.y<u||($.y<u?$=new J($.x+(u-$.y)/(U.y-$.y)*(U.x-$.x),u)._round():U.y<u&&(U=new J($.x+(u-$.y)/(U.y-$.y)*(U.x-$.x),u)._round()),$.x>=p&&U.x>=p||($.x>=p?$=new J(p,$.y+(p-$.x)/(U.x-$.x)*(U.y-$.y))._round():U.x>=p&&(U=new J(p,$.y+(p-$.x)/(U.x-$.x)*(U.y-$.y))._round()),$.y>=y&&U.y>=y||($.y>=y?$=new J($.x+(y-$.y)/(U.y-$.y)*(U.x-$.x),y)._round():U.y>=y&&(U=new J($.x+(y-$.y)/(U.y-$.y)*(U.x-$.x),y)._round()),O&&$.equals(O[O.length-1])||(O=[$],E.push(O)),O.push(U)))))}}return E}vr(Dp,"Anchor");const Vg=1e20;function u0(l,s,u,p,y,E,I,P,O){for(let N=s;N<s+p;N++)US(l,u*E+N,E,y,I,P,O);for(let N=u;N<u+y;N++)US(l,N*E+s,1,p,I,P,O)}function US(l,s,u,p,y,E,I){E[0]=0,I[0]=-Vg,I[1]=Vg,y[0]=l[s];for(let P=1,O=0,N=0;P<p;P++){y[P]=l[s+P*u];const $=P*P;do{const U=E[O];N=(y[P]-y[U]+$-U*U)/(P-U)/2}while(N<=I[O]&&--O>-1);O++,E[O]=P,I[O]=N,I[O+1]=Vg}for(let P=0,O=0;P<p;P++){for(;I[O+1]<P;)O++;const N=E[O],$=P-N;l[s+P*u]=y[N]+$*$}}const Ua=2,S1={none:0,ideographs:1,all:2};class Ug{constructor(s,u,p){this.requestManager=s,this.localGlyphMode=u,this.localFontFamily=p,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s){this.url=s}getGlyphs(s,u){const p=[];for(const y in s)for(const E of s[y])p.push({stack:y,id:E});Je(p,({stack:y,id:E},I)=>{let P=this.entries[y];P||(P=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let O=P.glyphs[E];if(void 0!==O)return void I(null,{stack:y,id:E,glyph:O});if(O=this._tinySDF(P,y,E),O)return P.glyphs[E]=O,void I(null,{stack:y,id:E,glyph:O});const N=Math.floor(E/256);if(256*N>65535)return void I(new Error("glyphs > 65535 not supported"));if(P.ranges[N])return void I(null,{stack:y,id:E,glyph:O});let $=P.requests[N];$||($=P.requests[N]=[],Ug.loadGlyphRange(y,N,this.url,this.requestManager,(U,H)=>{if(H){P.ascender=H.ascender,P.descender=H.descender;for(const Y in H.glyphs)this._doesCharSupportLocalGlyph(+Y)||(P.glyphs[+Y]=H.glyphs[+Y]);P.ranges[N]=!0}for(const Y of $)Y(U,H);delete P.requests[N]})),$.push((U,H)=>{U?I(U):H&&I(null,{stack:y,id:E,glyph:H.glyphs[E]||null})})},(y,E)=>{if(y)u(y);else if(E){const I={};for(const{stack:P,id:O,glyph:N}of E)void 0===I[P]&&(I[P]={}),void 0===I[P].glyphs&&(I[P].glyphs={}),I[P].glyphs[O]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics},I[P].ascender=this.entries[P].ascender,I[P].descender=this.entries[P].descender;u(null,I)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==S1.none&&(this.localGlyphMode===S1.all?!!this.localFontFamily:!!this.localFontFamily&&(Nr["CJK Unified Ideographs"](s)||Nr["Hangul Syllables"](s)||Nr.Hiragana(s)||Nr.Katakana(s)||Nr["CJK Symbols and Punctuation"](s)))}_tinySDF(s,u,p){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let E=s.tinySDF;if(!E){let be="400";/bold/i.test(u)?be="900":/medium/i.test(u)?be="500":/light/i.test(u)&&(be="200"),E=s.tinySDF=new Ug.TinySDF({fontFamily:y,fontWeight:be,fontSize:24*Ua,buffer:3*Ua,radius:8*Ua}),E.fontWeight=be}if(this.localGlyphs[E.fontWeight][p])return this.localGlyphs[E.fontWeight][p];const I=String.fromCharCode(p),{data:P,width:O,height:N,glyphWidth:$,glyphHeight:U,glyphLeft:H,glyphTop:Y,glyphAdvance:se}=E.draw(I);return this.localGlyphs[E.fontWeight][p]={id:p,bitmap:new bh({width:O,height:N},P),metrics:{width:$/Ua,height:U/Ua,left:H/Ua,top:Y/Ua-27,advance:se/Ua,localGlyph:!0}}}}Ug.loadGlyphRange=function(l,s,u,p,y){const E=256*s,I=E+255,P=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",`${E}-${I}`),Ei.Glyphs);zi(P,(O,N)=>{if(O)y(O);else if(N){const $={},U=new l0(N).readFields(wh,{});for(const H of U.glyphs)$[H.id]=H;y(null,{glyphs:$,ascender:U.ascender,descender:U.descender})}})},Ug.TinySDF=class{constructor({fontSize:l=24,buffer:s=3,radius:u=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:E="normal",fontStyle:I="normal"}={}){this.buffer=s,this.cutoff=p,this.radius=u;const P=this.size=l+4*s,O=this._createCanvas(P),N=this.ctx=O.getContext("2d",{willReadFrequently:!0});N.font=`${I} ${E} ${l}px ${y}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(l){const s=document.createElement("canvas");return s.width=s.height=l,s}draw(l){const{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:E}=this.ctx.measureText(l),I=Math.ceil(u),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-y))),O=Math.min(this.size-this.buffer,I+Math.ceil(p)),N=P+2*this.buffer,$=O+2*this.buffer,U=Math.max(N*$,0),H=new Uint8ClampedArray(U),Y={data:H,width:N,height:$,glyphWidth:P,glyphHeight:O,glyphTop:I,glyphLeft:0,glyphAdvance:s};if(0===P||0===O)return Y;const{ctx:se,buffer:be,gridInner:Ge,gridOuter:mt}=this;se.clearRect(be,be,P,O),se.fillText(l,be,be+I);const Ot=se.getImageData(be,be,P,O);mt.fill(Vg,0,U),Ge.fill(0,0,U);for(let pt=0;pt<O;pt++)for(let At=0;At<P;At++){const zt=Ot.data[4*(pt*P+At)+3]/255;if(0===zt)continue;const Vt=(pt+be)*N+At+be;if(1===zt)mt[Vt]=0,Ge[Vt]=Vg;else{const En=.5-zt;mt[Vt]=En>0?En*En:0,Ge[Vt]=En<0?En*En:0}}u0(mt,0,0,N,$,N,this.f,this.v,this.z),u0(Ge,be,be,P,O,N,this.f,this.v,this.z);for(let pt=0;pt<U;pt++){const At=Math.sqrt(mt[pt])-Math.sqrt(Ge[pt]);H[pt]=Math.round(255-255*(At/this.radius+this.cutoff))}return Y}};const Ap=Nu;function I1(l,s,u,p){const y=[],E=l.image,I=E.pixelRatio,P=E.paddedRect.w-2*Ap,O=E.paddedRect.h-2*Ap,N=l.right-l.left,$=l.bottom-l.top,U=E.stretchX||[[0,P]],H=E.stretchY||[[0,O]],Y=(In,Hn)=>In+Hn[1]-Hn[0],se=U.reduce(Y,0),be=H.reduce(Y,0),Ge=P-se,mt=O-be;let Ot=0,pt=se,At=0,zt=be,Vt=0,En=Ge,fn=0,zn=mt;if(E.content&&p){const In=E.content;Ot=h0(U,0,In[0]),At=h0(H,0,In[1]),pt=h0(U,In[0],In[2]),zt=h0(H,In[1],In[3]),Vt=In[0]-Ot,fn=In[1]-At,En=In[2]-In[0]-pt,zn=In[3]-In[1]-zt}const lr=(In,Hn,Wn,tr)=>{const pr=d0(In.stretch-Ot,pt,N,l.left),On=f0(In.fixed-Vt,En,In.stretch,se),kr=d0(Hn.stretch-At,zt,$,l.top),Xr=f0(Hn.fixed-fn,zn,Hn.stretch,be),Rr=d0(Wn.stretch-Ot,pt,N,l.left),Yi=f0(Wn.fixed-Vt,En,Wn.stretch,se),gr=d0(tr.stretch-At,zt,$,l.top),wi=f0(tr.fixed-fn,zn,tr.stretch,be),Ki=new J(pr,kr),Ro=new J(Rr,kr),Gi=new J(Rr,gr),ki=new J(pr,gr),Vs=new J(On/I,Xr/I),Qi=new J(Yi/I,wi/I),Xi=s*Math.PI/180;if(Xi){const Ys=Math.sin(Xi),js=Math.cos(Xi),mi=[js,-Ys,Ys,js];Ki._matMult(mi),Ro._matMult(mi),ki._matMult(mi),Gi._matMult(mi)}const Us=In.stretch+In.fixed,ea=Hn.stretch+Hn.fixed;return{tl:Ki,tr:Ro,bl:ki,br:Gi,tex:{x:E.paddedRect.x+Ap+Us,y:E.paddedRect.y+Ap+ea,w:Wn.stretch+Wn.fixed-Us,h:tr.stretch+tr.fixed-ea},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vs,pixelOffsetBR:Qi,minFontScaleX:En/I/N,minFontScaleY:zn/I/$,isSDF:u}};if(p&&(E.stretchX||E.stretchY)){const In=jS(U,Ge,se),Hn=jS(H,mt,be);for(let Wn=0;Wn<In.length-1;Wn++){const tr=In[Wn],pr=In[Wn+1];for(let On=0;On<Hn.length-1;On++)y.push(lr(tr,Hn[On],pr,Hn[On+1]))}}else y.push(lr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:O+1}));return y}function h0(l,s,u){let p=0;for(const y of l)p+=Math.max(s,Math.min(u,y[1]))-Math.max(s,Math.min(u,y[0]));return p}function jS(l,s,u){const p=[{fixed:-Ap,stretch:0}];for(const[y,E]of l){const I=p[p.length-1];p.push({fixed:y-I.stretch,stretch:I.stretch}),p.push({fixed:y-I.stretch,stretch:I.stretch+(E-y)})}return p.push({fixed:s+Ap,stretch:u}),p}function d0(l,s,u,p){return l/s*u+p}function f0(l,s,u,p){return l-s*u/p}function GS(l,s,u,p){const y=s+l.positionedLines[p].lineOffset;return 0===p?u+y/2:u+(y+(s+l.positionedLines[p-1].lineOffset))/2}class MF{constructor(s=[],u=PF){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const s=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:p}=this,y=u[s];for(;s>0;){const E=s-1>>1,I=u[E];if(p(y,I)>=0)break;u[s]=I,s=E}u[s]=y}_down(s){const{data:u,compare:p}=this,y=this.length>>1,E=u[s];for(;s<y;){let I=1+(s<<1),P=u[I];const O=I+1;if(O<this.length&&p(u[O],P)<0&&(I=O,P=u[O]),p(P,E)>=0)break;u[s]=P,s=I}u[s]=E}}function PF(l,s){return l<s?-1:l>s?1:0}function hy(l,s=1,u=!1){let p=1/0,y=1/0,E=-1/0,I=-1/0;const P=l[0];for(let Y=0;Y<P.length;Y++){const se=P[Y];(!Y||se.x<p)&&(p=se.x),(!Y||se.y<y)&&(y=se.y),(!Y||se.x>E)&&(E=se.x),(!Y||se.y>I)&&(I=se.y)}const O=Math.min(E-p,I-y);let N=O/2;const $=new MF([],Ar);if(0===O)return new J(p,y);for(let Y=p;Y<E;Y+=O)for(let se=y;se<I;se+=O)$.push(new Jd(Y+N,se+N,N,l));let U=function(Y){let se=0,be=0,Ge=0;const mt=Y[0];for(let Ot=0,pt=mt.length,At=pt-1;Ot<pt;At=Ot++){const zt=mt[Ot],Vt=mt[At],En=zt.x*Vt.y-Vt.x*zt.y;be+=(zt.x+Vt.x)*En,Ge+=(zt.y+Vt.y)*En,se+=3*En}return new Jd(be/se,Ge/se,0,Y)}(l),H=$.length;for(;$.length;){const Y=$.pop();(Y.d>U.d||!U.d)&&(U=Y,u&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,H)),Y.max-U.d<=s||(N=Y.h/2,$.push(new Jd(Y.p.x-N,Y.p.y-N,N,l)),$.push(new Jd(Y.p.x+N,Y.p.y-N,N,l)),$.push(new Jd(Y.p.x-N,Y.p.y+N,N,l)),$.push(new Jd(Y.p.x+N,Y.p.y+N,N,l)),H+=4)}return u&&(console.log(`num probes: ${H}`),console.log(`best distance: ${U.d}`)),U.p}function Ar(l,s){return s.max-l.max}class Jd{constructor(s,u,p,y){this.p=new J(s,u),this.h=p,this.d=function(E,I){let P=!1,O=1/0;for(let N=0;N<I.length;N++){const $=I[N];for(let U=0,H=$.length,Y=H-1;U<H;Y=U++){const se=$[U],be=$[Y];se.y>E.y!=be.y>E.y&&E.x<(be.x-se.x)*(E.y-se.y)/(be.y-se.y)+se.x&&(P=!P),O=Math.min(O,nS(E,se,be))}}return(P?1:-1)*Math.sqrt(O)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const Am=7,p0=Number.POSITIVE_INFINITY,T1=Math.sqrt(2);function m0(l,[s,u]){let p=0,y=0;if(u===p0){s<0&&(s=0);const E=s/T1;switch(l){case"top-right":case"top-left":y=E-Am;break;case"bottom-right":case"bottom-left":y=-E+Am;break;case"bottom":y=-s+Am;break;case"top":y=s-Am}switch(l){case"top-right":case"bottom-right":p=-E;break;case"top-left":case"bottom-left":p=E;break;case"left":p=s;break;case"right":p=-s}}else{switch(s=Math.abs(s),u=Math.abs(u),l){case"top-right":case"top-left":case"top":y=u-Am;break;case"bottom-right":case"bottom-left":case"bottom":y=-u+Am}switch(l){case"top-right":case"bottom-right":case"right":p=-s;break;case"top-left":case"bottom-left":case"left":p=s}}return[p,y]}function RM(l,s,u,p,y,E,I,P,O,N){l.createArrays(),l.tilePixelRatio=Ci/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const $=l.layers[0].layout,U=l.layers[0]._unevaluatedLayout._values,H={};if("composite"===l.textSizeData.kind){const{minZoom:be,maxZoom:Ge}=l.textSizeData;H.compositeTextSizes=[U["text-size"].possiblyEvaluate(new V(be),P),U["text-size"].possiblyEvaluate(new V(Ge),P)]}if("composite"===l.iconSizeData.kind){const{minZoom:be,maxZoom:Ge}=l.iconSizeData;H.compositeIconSizes=[U["icon-size"].possiblyEvaluate(new V(be),P),U["icon-size"].possiblyEvaluate(new V(Ge),P)]}H.layoutTextSize=U["text-size"].possiblyEvaluate(new V(O+1),P),H.layoutIconSize=U["icon-size"].possiblyEvaluate(new V(O+1),P),H.textMaxSize=U["text-size"].possiblyEvaluate(new V(18),P);const Y="map"===$.get("text-rotation-alignment")&&"point"!==$.get("symbol-placement"),se=$.get("text-size");for(const be of l.features){const Ge=$.get("text-font").evaluate(be,{},P).join(","),mt=se.evaluate(be,{},P),Ot=H.layoutTextSize.evaluate(be,{},P),pt=(H.layoutIconSize.evaluate(be,{},P),{horizontal:{},vertical:void 0}),At=be.text;let zt,Vt=[0,0];if(At){const zn=At.toString(),lr=$.get("text-letter-spacing").evaluate(be,{},P)*Ql,In=$.get("text-line-height").evaluate(be,{},P)*Ql,Hn=Pv(zn)?lr:0,Wn=$.get("text-anchor").evaluate(be,{},P),tr=$.get("text-variable-anchor");if(!tr){const Rr=$.get("text-radial-offset").evaluate(be,{},P);Vt=Rr?m0(Wn,[Rr*Ql,p0]):$.get("text-offset").evaluate(be,{},P).map(Yi=>Yi*Ql)}let pr=Y?"center":$.get("text-justify").evaluate(be,{},P);const On="point"===$.get("symbol-placement"),kr=On?$.get("text-max-width").evaluate(be,{},P)*Ql:1/0,Xr=Rr=>{l.allowVerticalPlacement&&Mv(zn)&&(pt.vertical=v1(At,s,u,y,Ge,kr,In,Wn,Rr,Hn,Vt,Zu.vertical,!0,Ot,mt))};if(!Y&&tr){const Rr="auto"===pr?tr.map(gr=>g0(gr)):[pr];let Yi=!1;for(let gr=0;gr<Rr.length;gr++){const wi=Rr[gr];if(!pt.horizontal[wi])if(Yi)pt.horizontal[wi]=pt.horizontal[0];else{const Ki=v1(At,s,u,y,Ge,kr,In,"center",wi,Hn,Vt,Zu.horizontal,!1,Ot,mt);Ki&&(pt.horizontal[wi]=Ki,Yi=1===Ki.positionedLines.length)}}Xr("left")}else{if("auto"===pr&&(pr=g0(Wn)),On||$.get("text-writing-mode").indexOf("horizontal")>=0||!Mv(zn)){const Rr=v1(At,s,u,y,Ge,kr,In,Wn,pr,Hn,Vt,Zu.horizontal,!1,Ot,mt);Rr&&(pt.horizontal[pr]=Rr)}Xr(On?"left":pr)}}let En=!1;if(be.icon&&be.icon.name){const zn=p[be.icon.name];zn&&(zt=w1(y[be.icon.name],$.get("icon-offset").evaluate(be,{},P),$.get("icon-anchor").evaluate(be,{},P)),En=zn.sdf,void 0===l.sdfIcons?l.sdfIcons=zn.sdf:l.sdfIcons!==zn.sdf&&un("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zn.pixelRatio!==l.pixelRatio||0!==$.get("icon-rotate").constantOr(1))&&(l.iconsNeedLinear=!0))}const fn=qS(pt.horizontal)||pt.vertical;l.iconsInText||(l.iconsInText=!!fn&&fn.iconsInText),(fn||zt)&&HS(l,be,pt,zt,p,H,Ot,0,Vt,En,I,P,N)}E&&l.generateCollisionDebugBuffers(O,l.collisionBoxArray)}function g0(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function HS(l,s,u,p,y,E,I,P,O,N,$,U,H){let Y=E.textMaxSize.evaluate(s,{},U);void 0===Y&&(Y=I);const se=l.layers[0].layout,be=se.get("icon-offset").evaluate(s,{},U),Ge=qS(u.horizontal)||u.vertical,mt="globe"===H.name,Ot=Ql,pt=I/Ot,At=l.tilePixelRatio*Y/Ot,zt=(Wn=l.overscaling,l.zoom>18&&Wn>2&&(Wn>>=1),Math.max(Ci/(512*Wn),1)*se.get("symbol-spacing")),Vt=se.get("text-padding")*l.tilePixelRatio,En=se.get("icon-padding")*l.tilePixelRatio,fn=pe(se.get("text-max-angle")),zn="map"===se.get("text-rotation-alignment")&&"point"!==se.get("symbol-placement"),lr="map"===se.get("icon-rotation-alignment")&&"point"!==se.get("symbol-placement"),In=se.get("symbol-placement"),Hn=zt/2;var Wn;const tr=se.get("icon-text-fit");let pr;p&&"none"!==tr&&(l.allowVerticalPlacement&&u.vertical&&(pr=c0(p,u.vertical,tr,se.get("icon-text-fit-padding"),be,pt)),Ge&&(p=c0(p,Ge,tr,se.get("icon-text-fit-padding"),be,pt)));const On=(kr,Xr,Rr)=>{if(Xr.x<0||Xr.x>=Ci||Xr.y<0||Xr.y>=Ci)return;let Yi=null;if(mt){const{x:gr,y:wi,z:Ki}=H.projectTilePoint(Xr.x,Xr.y,Rr);Yi={anchor:new Dp(gr,wi,Ki,0,void 0),up:H.upVector(Rr,Xr.x,Xr.y)}}!function(gr,wi,Ki,Ro,Gi,ki,Vs,Qi,Xi,Us,ea,Ys,js,mi,Gr,hl,he,el,xl,ya,bo,tl,Ss,Kc,nl){const $l=gr.addToLineVertexArray(wi,Ro);let Ml,Qc,Pl,Cd,Zg,Ey,Yg,aI=0,lI=0,cI=0,uI=0,M0=-1,P0=-1;const rf={};let hI=Lv("");const mc=Ki?Ki.anchor:wi;let Z1=0,Y1=0;if(void 0===Xi._unevaluatedLayout.getValue("text-radial-offset")?[Z1,Y1]=Xi.layout.get("text-offset").evaluate(bo,{},nl).map(Ju=>Ju*Ql):(Z1=Xi.layout.get("text-radial-offset").evaluate(bo,{},nl)*Ql,Y1=p0),gr.allowVerticalPlacement&&Gi.vertical){const Ju=Gi.vertical;if(Gr)Ey=y0(Ju),Qi&&(Yg=y0(Qi));else{const eh=Xi.layout.get("text-rotate").evaluate(bo,{},nl)+90;Pl=jg(Us,mc,wi,ea,Ys,js,Ju,mi,eh,hl),Qi&&(Cd=jg(Us,mc,wi,ea,Ys,js,Qi,el,eh))}}if(ki){const Ju=Xi.layout.get("icon-rotate").evaluate(bo,{},nl),eh="none"!==Xi.layout.get("icon-text-fit"),Sy=I1(ki,Ju,Ss,eh),k0=Qi?I1(Qi,Ju,Ss,eh):void 0;Qc=jg(Us,mc,wi,ea,Ys,js,ki,el,Ju),aI=4*Sy.length;const fI=gr.iconSizeData;let Fm=null;"source"===fI.kind?(Fm=[xh*Xi.layout.get("icon-size").evaluate(bo,{},nl)],Fm[0]>Mm&&un(`${gr.layerIds[0]}: Value for "icon-size" is >= ${Mp}. Reduce your "icon-size".`)):"composite"===fI.kind&&(Fm=[xh*tl.compositeIconSizes[0].evaluate(bo,{},nl),xh*tl.compositeIconSizes[1].evaluate(bo,{},nl)],(Fm[0]>Mm||Fm[1]>Mm)&&un(`${gr.layerIds[0]}: Value for "icon-size" is >= ${Mp}. Reduce your "icon-size".`)),gr.addSymbols(gr.icon,Sy,Fm,ya,xl,bo,!1,Ki,wi,$l.lineStartIndex,$l.lineLength,-1,Kc,nl),M0=gr.icon.placedSymbolArray.length-1,k0&&(lI=4*k0.length,gr.addSymbols(gr.icon,k0,Fm,ya,xl,bo,Zu.vertical,Ki,wi,$l.lineStartIndex,$l.lineLength,-1,Kc,nl),P0=gr.icon.placedSymbolArray.length-1)}for(const Ju in Gi.horizontal){const eh=Gi.horizontal[Ju];Ml||(hI=Lv(eh.text),Gr?Zg=y0(eh):Ml=jg(Us,mc,wi,ea,Ys,js,eh,mi,Xi.layout.get("text-rotate").evaluate(bo,{},nl),hl));const Sy=1===eh.positionedLines.length;if(cI+=_0(gr,Ki,wi,eh,Vs,Xi,Gr,bo,hl,$l,Gi.vertical?Zu.horizontal:Zu.horizontalOnly,Sy?Object.keys(Gi.horizontal):[Ju],rf,M0,tl,Kc,nl),Sy)break}Gi.vertical&&(uI+=_0(gr,Ki,wi,Gi.vertical,Vs,Xi,Gr,bo,hl,$l,Zu.vertical,["vertical"],rf,P0,tl,Kc,nl));let Nm=-1;const Cy=(Ju,eh)=>Ju?Math.max(Ju,eh):eh;Nm=Cy(Zg,Nm),Nm=Cy(Ey,Nm),Nm=Cy(Yg,Nm);const dI=Nm>-1?1:0;gr.glyphOffsetArray.length>=ef.MAX_GLYPHS&&un("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==bo.sortKey&&gr.addToSortKeyRanges(gr.symbolInstances.length,bo.sortKey),gr.symbolInstances.emplaceBack(mc.x,mc.y,mc.z,wi.x,wi.y,rf.right>=0?rf.right:-1,rf.center>=0?rf.center:-1,rf.left>=0?rf.left:-1,rf.vertical>=0?rf.vertical:-1,M0,P0,hI,void 0!==Ml?Ml:gr.collisionBoxArray.length,void 0!==Ml?Ml+1:gr.collisionBoxArray.length,void 0!==Pl?Pl:gr.collisionBoxArray.length,void 0!==Pl?Pl+1:gr.collisionBoxArray.length,void 0!==Qc?Qc:gr.collisionBoxArray.length,void 0!==Qc?Qc+1:gr.collisionBoxArray.length,Cd||gr.collisionBoxArray.length,Cd?Cd+1:gr.collisionBoxArray.length,ea,cI,uI,aI,lI,dI,0,Z1,Y1,Nm)}(l,Xr,Yi,kr,u,p,y,pr,l.layers[0],l.collisionBoxArray,s.index,s.sourceLayerIndex,l.index,Vt,zn,O,0,En,lr,be,s,E,N,$,U)};if("line"===In)for(const kr of uy(s.geometry,0,0,Ci,Ci)){const Xr=kM(kr,zt,fn,u.vertical||Ge,p,Ot,At,l.overscaling,Ci);for(const Rr of Xr)Ge&&WS(l,Ge.text,Hn,Rr)||On(kr,Rr,U)}else if("line-center"===In){for(const kr of s.geometry)if(kr.length>1){const Xr=PM(kr,fn,u.vertical||Ge,p,Ot,At);Xr&&On(kr,Xr,U)}}else if("Polygon"===s.type)for(const kr of Jx(s.geometry,0)){const Xr=hy(kr,16);On(kr[0],new Dp(Xr.x,Xr.y,0,0,void 0),U)}else if("LineString"===s.type)for(const kr of s.geometry)On(kr,new Dp(kr[0].x,kr[0].y,0,0,void 0),U);else if("Point"===s.type)for(const kr of s.geometry)for(const Xr of kr)On([Xr],new Dp(Xr.x,Xr.y,0,0,void 0),U)}const Mp=255,Mm=Mp*xh;function _0(l,s,u,p,y,E,I,P,O,N,$,U,H,Y,se,be,Ge){const mt=function(At,zt,Vt,En,fn,zn,lr,In){const Hn=[];if(0===zt.positionedLines.length)return Hn;const Wn=En.layout.get("text-rotate").evaluate(zn,{})*Math.PI/180,tr=function(Rr){const Yi=Rr[0],gr=Rr[1],wi=Yi*gr;return wi>0?[Yi,-gr]:wi<0?[-Yi,gr]:0===Yi?[gr,Yi]:[gr,-Yi]}(Vt);let pr=Math.abs(zt.top-zt.bottom);for(const Rr of zt.positionedLines)pr-=Rr.lineOffset;const On=zt.positionedLines.length,kr=pr/On;let Xr=zt.top-Vt[1];for(let Rr=0;Rr<On;++Rr){const Yi=zt.positionedLines[Rr];Xr=GS(zt,kr,Xr,Rr);for(const gr of Yi.positionedGlyphs){if(!gr.rect)continue;const wi=gr.rect||{};let Ki=LS+1,Ro=!0,Gi=1,ki=0;if(gr.imageName){const Ss=lr[gr.imageName];if(!Ss)continue;if(Ss.sdf){un("SDF images are not supported in formatted text and will be ignored.");continue}Ro=!1,Gi=Ss.pixelRatio,Ki=Nu/Gi}const Vs=(fn||In)&&gr.vertical,Qi=gr.metrics.advance*gr.scale/2,Xi=gr.metrics,Us=gr.rect;if(null===Us)continue;In&&zt.verticalizable&&(ki=gr.imageName?Qi-gr.metrics.width*gr.scale/2:0);const ea=fn?[gr.x+Qi,gr.y]:[0,0];let Ys=[0,0],js=[0,0],mi=!1;fn||(Vs?(js=[gr.x+Qi+tr[0],gr.y+tr[1]-ki],mi=!0):Ys=[gr.x+Qi+Vt[0],gr.y+Vt[1]-ki]);const Gr=Us.w*gr.scale/(Gi*(gr.localGlyph?Ua:1)),hl=Us.h*gr.scale/(Gi*(gr.localGlyph?Ua:1));let he,el,xl,ya;if(Vs){const Ss=gr.y-Xr,Kc=new J(-Qi,Qi-Ss),nl=-Math.PI/2,$l=new J(...js);he=new J(-Qi+Ys[0],Ys[1]),he._rotateAround(nl,Kc)._add($l),he.x+=-Ss+Qi,he.y-=(Xi.left-Ki)*gr.scale;const Ml=gr.imageName?Xi.advance*gr.scale:Ql*gr.scale,Qc=String.fromCharCode(gr.glyph);CM(Qc)?he.x+=(1-Ki)*gr.scale:SM(Qc)?he.x+=Ml-Xi.height*gr.scale+(-Ki-1)*gr.scale:he.x+=gr.imageName||Xi.width+2*Ki===Us.w&&Xi.height+2*Ki===Us.h?(Ml-hl)/2:(Ml-(Xi.height+2*Ki)*gr.scale)/2,el=new J(he.x,he.y-Gr),xl=new J(he.x+hl,he.y),ya=new J(he.x+hl,he.y-Gr)}else{const Ss=(Xi.left-Ki)*gr.scale-Qi+Ys[0],Kc=(-Xi.top-Ki)*gr.scale+Ys[1],nl=Ss+Gr,$l=Kc+hl;he=new J(Ss,Kc),el=new J(nl,Kc),xl=new J(Ss,$l),ya=new J(nl,$l)}if(Wn){let Ss;Ss=fn?new J(0,0):mi?new J(tr[0],tr[1]):new J(Vt[0],Vt[1]),he._rotateAround(Wn,Ss),el._rotateAround(Wn,Ss),xl._rotateAround(Wn,Ss),ya._rotateAround(Wn,Ss)}const bo=new J(0,0),tl=new J(0,0);Hn.push({tl:he,tr:el,bl:xl,br:ya,tex:wi,writingMode:zt.writingMode,glyphOffset:ea,sectionIndex:gr.sectionIndex,isSDF:Ro,pixelOffsetTL:bo,pixelOffsetBR:tl,minFontScaleX:0,minFontScaleY:0})}}return Hn}(0,p,O,E,I,P,y,l.allowVerticalPlacement),Ot=l.textSizeData;let pt=null;"source"===Ot.kind?(pt=[xh*E.layout.get("text-size").evaluate(P,{},Ge)],pt[0]>Mm&&un(`${l.layerIds[0]}: Value for "text-size" is >= ${Mp}. Reduce your "text-size".`)):"composite"===Ot.kind&&(pt=[xh*se.compositeTextSizes[0].evaluate(P,{},Ge),xh*se.compositeTextSizes[1].evaluate(P,{},Ge)],(pt[0]>Mm||pt[1]>Mm)&&un(`${l.layerIds[0]}: Value for "text-size" is >= ${Mp}. Reduce your "text-size".`)),l.addSymbols(l.text,mt,pt,O,I,P,$,s,u,N.lineStartIndex,N.lineLength,Y,be,Ge);for(const At of U)H[At]=l.text.placedSymbolArray.length-1;return 4*mt.length}function qS(l){for(const s in l)return l[s];return null}function jg(l,s,u,p,y,E,I,P,O,N){let $=I.top,U=I.bottom,H=I.left,Y=I.right;const se=I.collisionPadding;if(se&&(H-=se[0],$-=se[1],Y+=se[2],U+=se[3]),O){const be=new J(H,$),Ge=new J(Y,$),mt=new J(H,U),Ot=new J(Y,U),pt=pe(O);let At=new J(0,0);N&&(At=new J(N[0],N[1])),be._rotateAround(pt,At),Ge._rotateAround(pt,At),mt._rotateAround(pt,At),Ot._rotateAround(pt,At),H=Math.min(be.x,Ge.x,mt.x,Ot.x),Y=Math.max(be.x,Ge.x,mt.x,Ot.x),$=Math.min(be.y,Ge.y,mt.y,Ot.y),U=Math.max(be.y,Ge.y,mt.y,Ot.y)}return l.emplaceBack(s.x,s.y,s.z,u.x,u.y,H,$,Y,U,P,p,y,E),l.length-1}function y0(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const s=l.bottom-l.top;return s>0?Math.max(10,s):null}function WS(l,s,u,p){const y=l.compareText;if(s in y){const E=y[s];for(let I=E.length-1;I>=0;I--)if(p.dist(E[I])<u)return!0}else y[s]=[];return y[s].push(p),!1}function Pp(l,s){const u=l.fovAboveCenter,p=l.elevation?l.elevation.getMinElevationBelowMSL()*s:0,y=(l._camera.position[2]*l.worldSize-p)/Math.cos(l._pitch),E=Math.sin(u)*y/Math.sin(Math.max(Math.PI/2-l._pitch-u,.01)),I=Math.sin(l._pitch)*E+y;return Math.min(1.01*I,y*(1/l._horizonShift))}function Pm(l,s){if(!s.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:s};const u=Math.pow(2,-l.z),p=l.x*u,y=(l.x+1)*u,E=l.y*u,I=(l.y+1)*u,P=Zh(p),O=Zh(y),N=Zc(E),$=Zc(I),U=s.project(P,N),H=s.project(O,N),Y=s.project(O,$),se=s.project(P,$);let be=Math.min(U.x,H.x,Y.x,se.x),Ge=Math.min(U.y,H.y,Y.y,se.y),mt=Math.max(U.x,H.x,Y.x,se.x),Ot=Math.max(U.y,H.y,Y.y,se.y);const pt=u/16;function At(Vt,En,fn,zn,lr,In){const Hn=(fn+lr)/2,Wn=(zn+In)/2,tr=s.project(Zh(Hn),Zc(Wn)),pr=Math.max(0,be-tr.x,Ge-tr.y,tr.x-mt,tr.y-Ot);be=Math.min(be,tr.x),mt=Math.max(mt,tr.x),Ge=Math.min(Ge,tr.y),Ot=Math.max(Ot,tr.y),pr>pt&&(At(Vt,tr,fn,zn,Hn,Wn),At(tr,En,Hn,Wn,lr,In))}At(U,H,p,E,y,E),At(H,Y,y,E,y,I),At(Y,se,y,I,p,I),At(se,U,p,I,p,E),be-=pt,Ge-=pt,mt+=pt,Ot+=pt;const zt=1/Math.max(mt-be,Ot-Ge);return{scale:zt,x:be*zt,y:Ge*zt,x2:mt*zt,y2:Ot*zt,projection:s}}const D1=qh(new Float32Array(16));class wd{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,u){return{x:0,y:0,z:0}}unproject(s,u){return new jo(0,0)}projectTilePoint(s,u,p){return{x:s,y:u,z:0}}locationPoint(s,u,p=!0){return s._coordinatePoint(s.locationCoordinate(u),p)}pixelsPerMeter(s,u){return Zd(1,s)*u}pixelSpaceConversion(s,u,p){return 1}farthestPixelDistance(s){return Pp(s,s.pixelsPerMeter)}pointCoordinate(s,u,p,y){const E=s.horizonLineFromTop(!1),I=new J(u,Math.max(E,p));return s.rayIntersectionCoordinate(s.pointRayIntersection(I,y))}pointCoordinate3D(s,u,p){const y=new J(u,p);if(s.elevation)return s.elevation.pointCoordinate(y);{const E=this.pointCoordinate(s,y.x,y.y,0);return[E.x,E.y,E.z]}}isPointAboveHorizon(s,u){if(s.elevation)return!this.pointCoordinate3D(s,u.x,u.y);const p=s.horizonLineFromTop();return u.y<p}createInversionMatrix(s,u){return D1}createTileMatrix(s,u,p){let y,E,I;const P=p.canonical,O=qh(new Float64Array(16));if(this.isReprojectedInTileSpace){const N=Pm(P,this);y=1,E=N.x+p.wrap*N.scale,I=N.y,Pf(O,O,[y/N.scale,y/N.scale,s.pixelsPerMeter/u])}else y=u/s.zoomScale(P.z),E=(P.x+Math.pow(2,P.z)*p.wrap)*y,I=P.y*y;return vg(O,O,[E,I,0]),Pf(O,O,[y/Ci,y/Ci,1]),O}upVector(s,u,p){return[0,0,1]}upVectorScale(s,u,p){return{metersToTile:1}}}class OM extends wd{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[u,p]=this.parallels=s.parallels||[29.5,45.5],y=Math.sin(pe(u));this.n=(y+Math.sin(pe(p)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(s,u){const{n:p,c:y,r0:E}=this,I=pe(s-this.center[0]),P=pe(u),O=Math.sqrt(y-2*p*Math.sin(P))/p;return{x:O*Math.sin(I*p),y:O*Math.cos(I*p)-E,z:0}}unproject(s,u){const{n:p,c:y,r0:E}=this,I=E+u;let P=Math.atan2(s,Math.abs(I))*Math.sign(I);I*p<0&&(P-=Math.PI*Math.sign(s)*Math.sign(I));const O=pe(this.center[0])*p;P=Me(P,-Math.PI-O,Math.PI-O);const N=K(ae(P/p)+this.center[0],-180,180),$=Math.asin(K((y-(s*s+I*I)*p*p)/(2*p),-1,1)),U=K(ae($),-Yc,Yc);return new jo(N,U)}}const km=1.340264,kp=-.081106,Al=893e-6,Rp=.003796,Gg=Math.sqrt(3)/2;class LM extends wd{project(s,u){u=u/180*Math.PI,s=s/180*Math.PI;const p=Math.asin(Gg*Math.sin(u)),y=p*p,E=y*y*y;return{x:.5*(s*Math.cos(p)/(Gg*(km+3*kp*y+E*(7*Al+9*Rp*y)))/Math.PI+.5),y:1-.5*(p*(km+kp*y+E*(Al+Rp*y))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,y=p*p,E=y*y*y;for(let $,U,H,Y=0;Y<12&&(U=p*(km+kp*y+E*(Al+Rp*y))-u,H=km+3*kp*y+E*(7*Al+9*Rp*y),$=U/H,p=K(p-$,-Math.PI/3,Math.PI/3),y=p*p,E=y*y*y,!(Math.abs($)<1e-12));++Y);const I=Gg*s*(km+3*kp*y+E*(7*Al+9*Rp*y))/Math.cos(p),P=Math.asin(Math.sin(p)/Gg),O=K(180*I/Math.PI,-180,180),N=K(180*P/Math.PI,-Yc,Yc);return new jo(O,N)}}class NM extends wd{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){return{x:.5+s/360,y:.5-u/360,z:0}}unproject(s,u){const p=360*(s-.5),y=K(360*(.5-u),-Yc,Yc);return new jo(p,y)}}const Rm=Math.PI/2;function Ff(l){return Math.tan((Rm+l)/2)}class FM extends wd{constructor(s){super(s),this.center=s.center||[0,30];const[u,p]=this.parallels=s.parallels||[30,30];let y=pe(u),E=pe(p);this.southernCenter=y+E<0,this.southernCenter&&(y=-y,E=-E);const I=Math.cos(y),P=Ff(y);this.n=y===E?Math.sin(y):Math.log(I/Math.cos(E))/Math.log(Ff(E)/P),this.f=I*Math.pow(Ff(y),this.n)/this.n}project(s,u){u=pe(u),this.southernCenter&&(u=-u),s=pe(s-this.center[0]);const p=1e-6,{n:y,f:E}=this;E>0?u<-Rm+p&&(u=-Rm+p):u>Rm-p&&(u=Rm-p);const I=E/Math.pow(Ff(u),y);let P=I*Math.sin(y*s),O=E-I*Math.cos(y*s);return P=.5*(P/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:P,y:this.southernCenter?O:1-O,z:0}}unproject(s,u){s=(2*s-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:y}=this,E=y-u,I=Math.sign(E),P=Math.sign(p)*Math.sqrt(s*s+E*E);let O=Math.atan2(s,Math.abs(E))*I;E*p<0&&(O-=Math.PI*Math.sign(s)*I);const N=K(ae(O/p)+this.center[0],-180,180),$=K(ae(2*Math.atan(Math.pow(y/P,1/p))-Rm),-Yc,Yc);return new jo(N,this.southernCenter?-$:$)}}class XS extends wd{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,u){return{x:Xd(s),y:Of(u),z:0}}unproject(s,u){const p=Zh(s),y=Zc(u);return new jo(p,y)}}const ZS=pe(Yc);class A1 extends wd{project(s,u){const p=(u=pe(u))*u,y=p*p;return{x:.5*((s=pe(s))*(.8707-.131979*p+y*(y*(.003971*p-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+y*(.028874*p-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,y=25,E=0,I=p*p;do{I=p*p;const N=I*I;E=(p*(1.007226+I*(.015085+N*(.028874*I-.044475-.005916*N)))-u)/(1.007226+I*(.045255+N*(.259866*I-.311325-.005916*11*N))),p=K(p-E,-ZS,ZS)}while(Math.abs(E)>1e-6&&--y>0);I=p*p;const P=K(ae(s/(.8707+I*(I*(I*I*I*(.003971-.001529*I)-.013791)-.131979))),-180,180),O=ae(p);return new jo(P,O)}}const dy=pe(Yc);class BM extends wd{project(s,u){u=pe(u),s=pe(s);const p=Math.cos(u),y=2/Math.PI,E=Math.acos(p*Math.cos(s/2)),I=Math.sin(E)/E,P=.5*(s*y+2*p*Math.sin(s/2)/I)||0,O=.5*(u+Math.sin(u)/I)||0;return{x:.5*(P/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(s,u){let p=s=(2*s-.5)*Math.PI,y=u=(2*(1-u)-1)*Math.PI,E=25;const I=1e-6;let P=0,O=0;do{const N=Math.cos(y),$=Math.sin(y),U=2*$*N,H=$*$,Y=N*N,se=Math.cos(p/2),be=Math.sin(p/2),Ge=2*se*be,mt=be*be,Ot=1-Y*se*se,pt=Ot?1/Ot:0,At=Ot?Math.acos(N*se)*Math.sqrt(1/Ot):0,zt=.5*(2*At*N*be+2*p/Math.PI)-s,Vt=.5*(At*$+y)-u,En=.5*pt*(Y*mt+At*N*se*H)+1/Math.PI,fn=pt*(Ge*U/4-At*$*be),zn=.125*pt*(U*be-At*$*Y*Ge),lr=.5*pt*(H*se+At*mt*N)+.5,In=fn*zn-lr*En;P=(Vt*fn-zt*lr)/In,O=(zt*zn-Vt*En)/In,p=K(p-P,-Math.PI,Math.PI),y=K(y-O,-dy,dy)}while((Math.abs(P)>I||Math.abs(O)>I)&&--E>0);return new jo(ae(p),ae(y))}}class M1 extends wd{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(pe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){const{scale:p,cosPhi:y}=this;return{x:pe(s)*y*p+.5,y:-Math.sin(pe(u))/y*p+.5,z:0}}unproject(s,u){const{scale:p,cosPhi:y}=this,E=-(u-.5)/p,I=K(ae((s-.5)/p)/y,-180,180),P=Math.asin(K(E*y,-1,1)),O=K(ae(P),-Yc,Yc);return new jo(I,O)}}class Bf extends XS{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,u,p){const y=Cg(s,u,p);return Va(y,y,pc(xd(p))),{x:y[0],y:y[1],z:y[2]}}locationPoint(s,u){const p=ym(u.lat,u.lng),y=dc([],p),E=s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(u),s._centerAltitude):s._centerAltitude;xg(p,p,y,Zd(1,0)*Ci*E);const I=qh(new Float64Array(16));return hm(I,s.pixelMatrix,s.globeMatrix),Va(p,p,I),new J(p[0],p[1])}pixelsPerMeter(s,u){return Zd(1,0)*u}pixelSpaceConversion(s,u,p){const y=Zd(1,s)*u,E=lo(Zd(1,45)*u,y,p);return this.pixelsPerMeter(s,u)/E}createTileMatrix(s,u,p){const y=zx(xd(p.canonical));return hm(new Float64Array(16),s.globeMatrix,y)}createInversionMatrix(s,u){const{center:p}=s,y=pc(xd(u));return B_(y,y,pe(p.lng)),$v(y,y,pe(p.lat)),Pf(y,y,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(s,u,p,y){return U_(s,u,p,!0)||new Tg(0,0)}pointCoordinate3D(s,u,p){const y=this.pointCoordinate(s,u,p,0);return[y.x,y.y,y.z]}isPointAboveHorizon(s,u){return!U_(s,u.x,u.y,!1)}farthestPixelDistance(s){const u=function(y,E){const I=y.cameraToCenterDistance,P=y._centerAltitude*E,O=y._camera,N=y._camera.forward(),$=Js([],Hu([],N,-I),[0,0,P]),U=y.worldSize/(2*Math.PI),H=[0,0,-U],Y=y.width/y.height,se=Math.tan(y.fovAboveCenter),be=Hu([],O.up(),se),Ge=Hu([],O.right(),se*Y),mt=dc([],Js([],Js([],N,be),Ge)),Ot=[];let pt;if(new pm($,mt).closestPointOnSphere(H,U,Ot)){const At=Js([],Ot,H),zt=yh([],At,$);pt=Math.cos(y.fovAboveCenter)*hc(zt)}else{const At=yh([],$,H),zt=yh([],H,$);dc(zt,zt);const Vt=hc(At)-U;pt=Math.sqrt(Vt*(Vt+2*U));const En=Math.acos(pt/(U+Vt))-Math.acos(fc(N,zt));pt*=Math.cos(En)}return 1.01*pt}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),p=mp(s.zoom);if(p>0){const y=Pp(s,Zd(1,s.center.lat)*s.worldSize),E=s.worldSize/(2*Math.PI),I=Math.max(s.width,s.height)/s.worldSize*Math.PI;return lo(u,y+E*(1-Math.cos(I)),Math.pow(p,10))}return u}upVector(s,u,p){return Cg(u,p,s,1)}upVectorScale(s){return{metersToTile:V_(pp(xd(s)))}}}function zM(l){const s=l.parallels,u=!!s&&Math.abs(s[0]+s[1])<.01;switch(l.name){case"mercator":return new XS(l);case"equirectangular":return new NM(l);case"naturalEarth":return new A1(l);case"equalEarth":return new LM(l);case"winkelTripel":return new BM(l);case"albers":return u?new M1(l):new OM(l);case"lambertConformalConic":return u?new M1(l):new FM(l);case"globe":return new Bf(l)}throw new Error(`Invalid projection name: ${l.name}`)}const zf=Y_.types,P1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function v0(l,s,u,p,y,E,I,P,O,N,$,U,H){const Y=P?Math.min(Mm,Math.round(P[0])):0,se=P?Math.min(Mm,Math.round(P[1])):0;l.emplaceBack(s,u,Math.round(32*p),Math.round(32*y),E,I,(Y<<1)+(O?1:0),se,16*N,16*$,256*U,256*H)}function k1(l,s,u,p,y,E,I){l.emplaceBack(s,u,p,y,E,I)}function R1(l,s,u,p,y){l.emplaceBack(s,u,p,y),l.emplaceBack(s,u,p,y),l.emplaceBack(s,u,p,y),l.emplaceBack(s,u,p,y)}function b0(l){for(const s of l.sections)if(jd(s.text))return!0;return!1}class O1{constructor(s){this.layoutVertexArray=new Jn,this.indexArray=new hi,this.programConfigurations=s,this.segments=new Qs,this.dynamicLayoutVertexArray=new ar,this.opacityVertexArray=new vi,this.placedSymbolArray=new gs,this.globeExtVertexArray=new hr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(s,u,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,CS.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,IS.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,P1,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,SS.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}vr(O1,"SymbolBuffers");class fy{constructor(s,u,p){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new p,this.segments=new Qs,this.collisionVertexArray=new co,this.collisionVertexArrayExt=new uo}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,h1.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,TS.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}vr(fy,"CollisionBuffers");class ef{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(I=>I.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qh([]),this.placementViewportMatrix=qh([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Lg(this.zoom,u["text-size"]),this.iconSizeData=Lg(this.zoom,u["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),E=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==E&&void 0!==y.constantOr(1),this.sortFeaturesByY=("viewport-y"===E||"auto"===E&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(I=>Zu[I]),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=s.sourceID,this.projection=s.projection}createArrays(){this.text=new O1(new gu(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new O1(new gu(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new zl,this.lineVertexArray=new Mc,this.symbolInstances=new aa}calculateGlyphDependencies(s,u,p,y,E){for(let I=0;I<s.length;I++)if(u[s.charCodeAt(I)]=!0,y&&E){const P=Ng[s.charAt(I)];P&&(u[P.charCodeAt(0)]=!0)}}populate(s,u,p,y){const E=this.layers[0],I=E.layout,P="globe"===this.projection.name,O=I.get("text-font"),N=I.get("text-field"),$=I.get("icon-image"),U=("constant"!==N.value.kind||N.value.value instanceof Ks&&!N.value.value.isEmpty()||N.value.value.toString().length>0)&&("constant"!==O.value.kind||O.value.value.length>0),H="constant"!==$.value.kind||!!$.value.value||Object.keys($.parameters).length>0,Y=I.get("symbol-sort-key");if(this.features=[],!U&&!H)return;const se=u.iconDependencies,be=u.glyphDependencies,Ge=u.availableImages,mt=new V(this.zoom);for(const{feature:Ot,id:pt,index:At,sourceLayerIndex:zt}of s){const Vt=E._featureFilter.needGeometry,En=Kd(Ot,Vt);if(!E._featureFilter.filter(mt,En,p))continue;if(Vt||(En.geometry=Yd(Ot,p,y)),P&&1!==Ot.type&&p.z<=5){const In=En.geometry,Hn=.98078528056,Wn=(tr,pr)=>fc(Cg(tr.x,tr.y,p,1),Cg(pr.x,pr.y,p,1))<Hn;for(let tr=0;tr<In.length;tr++)In[tr]=j_(In[tr],Wn)}let fn,zn;if(U){const In=E.getValueAndResolveTokens("text-field",En,p,Ge),Hn=Ks.factory(In);b0(Hn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===k()||this.hasRTLText&&B.isParsed())&&(fn=EM(Hn,E,En))}if(H){const In=E.getValueAndResolveTokens("icon-image",En,p,Ge);zn=In instanceof Pi?In:Pi.fromString(In)}if(!fn&&!zn)continue;const lr=this.sortFeaturesByKey?Y.evaluate(En,{},p):void 0;if(this.features.push({id:pt,text:fn,icon:zn,index:At,sourceLayerIndex:zt,geometry:En.geometry,properties:Ot.properties,type:zf[Ot.type],sortKey:lr}),zn&&(se[zn.name]=!0),fn){const In=O.evaluate(En,{},p).join(","),Hn="map"===I.get("text-rotation-alignment")&&"point"!==I.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Zu.vertical)>=0;for(const Wn of fn.sections)if(Wn.image)se[Wn.image.name]=!0;else{const tr=Mv(fn.toString()),pr=Wn.fontStack||In,On=be[pr]=be[pr]||{};this.calculateGlyphDependencies(Wn.text,On,Hn,this.allowVerticalPlacement,tr)}}}"line"===I.get("symbol-placement")&&(this.features=function(Ot){const pt={},At={},zt=[];let Vt=0;function En(In){zt.push(Ot[In]),Vt++}function fn(In,Hn,Wn){const tr=At[In];return delete At[In],At[Hn]=tr,zt[tr].geometry[0].pop(),zt[tr].geometry[0]=zt[tr].geometry[0].concat(Wn[0]),tr}function zn(In,Hn,Wn){const tr=pt[Hn];return delete pt[Hn],pt[In]=tr,zt[tr].geometry[0].shift(),zt[tr].geometry[0]=Wn[0].concat(zt[tr].geometry[0]),tr}function lr(In,Hn,Wn){const tr=Wn?Hn[0][Hn[0].length-1]:Hn[0][0];return`${In}:${tr.x}:${tr.y}`}for(let In=0;In<Ot.length;In++){const Hn=Ot[In],Wn=Hn.geometry,tr=Hn.text?Hn.text.toString():null;if(!tr){En(In);continue}const pr=lr(tr,Wn),On=lr(tr,Wn,!0);if(pr in At&&On in pt&&At[pr]!==pt[On]){const kr=zn(pr,On,Wn),Xr=fn(pr,On,zt[kr].geometry);delete pt[pr],delete At[On],At[lr(tr,zt[Xr].geometry,!0)]=Xr,zt[kr].geometry=null}else pr in At?fn(pr,On,Wn):On in pt?zn(pr,On,Wn):(En(In),pt[pr]=Vt-1,At[On]=Vt-1)}return zt.filter(In=>In.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ot,pt)=>Ot.sortKey-pt.sortKey)}update(s,u,p,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,p,y),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,p,y))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=zM(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const p=this.lineVertexArray.length;if(void 0!==s.segment)for(const{x:y,y:E}of u)this.lineVertexArray.emplaceBack(y,E);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(s,u,p,y,E,I,P,O,N,$,U,H,Y,se){const be=s.indexArray,Ge=s.layoutVertexArray,mt=s.globeExtVertexArray,Ot=s.segments.prepareSegment(4*u.length,Ge,be,this.canOverlap?I.sortKey:void 0),pt=this.glyphOffsetArray.length,At=Ot.vertexLength,zt=this.allowVerticalPlacement&&P===Zu.vertical?Math.PI/2:0,Vt=I.text&&I.text.sections;for(let fn=0;fn<u.length;fn++){const{tl:zn,tr:lr,bl:In,br:Hn,tex:Wn,pixelOffsetTL:tr,pixelOffsetBR:pr,minFontScaleX:On,minFontScaleY:kr,glyphOffset:Xr,isSDF:Rr,sectionIndex:Yi}=u[fn],gr=Ot.vertexLength,wi=Xr[1];if(v0(Ge,N.x,N.y,zn.x,wi+zn.y,Wn.x,Wn.y,p,Rr,tr.x,tr.y,On,kr),v0(Ge,N.x,N.y,lr.x,wi+lr.y,Wn.x+Wn.w,Wn.y,p,Rr,pr.x,tr.y,On,kr),v0(Ge,N.x,N.y,In.x,wi+In.y,Wn.x,Wn.y+Wn.h,p,Rr,tr.x,pr.y,On,kr),v0(Ge,N.x,N.y,Hn.x,wi+Hn.y,Wn.x+Wn.w,Wn.y+Wn.h,p,Rr,pr.x,pr.y,On,kr),O){const{x:Ki,y:Ro,z:Gi}=O.anchor,[ki,Vs,Qi]=O.up;k1(mt,Ki,Ro,Gi,ki,Vs,Qi),k1(mt,Ki,Ro,Gi,ki,Vs,Qi),k1(mt,Ki,Ro,Gi,ki,Vs,Qi),k1(mt,Ki,Ro,Gi,ki,Vs,Qi),R1(s.dynamicLayoutVertexArray,Ki,Ro,Gi,zt)}else R1(s.dynamicLayoutVertexArray,N.x,N.y,N.z,zt);be.emplaceBack(gr,gr+1,gr+2),be.emplaceBack(gr+1,gr+2,gr+3),Ot.vertexLength+=4,Ot.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xr[0]),fn!==u.length-1&&Yi===u[fn+1].sectionIndex||s.programConfigurations.populatePaintArrays(Ge.length,I,I.index,{},Y,se,Vt&&Vt[Yi])}const En=O?O.anchor:N;s.placedSymbolArray.emplaceBack(En.x,En.y,En.z,N.x,N.y,pt,this.glyphOffsetArray.length-pt,At,$,U,N.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],P,0,!1,0,H,0)}_commitLayoutVertex(s,u,p,y,E,I,P){s.emplaceBack(u,p,y,E,I,Math.round(P.x),Math.round(P.y))}_addCollisionDebugVertices(s,u,p,y,E,I,P){const O=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),N=O.vertexLength,$=P.tileAnchorX,U=P.tileAnchorY;for(let Y=0;Y<4;Y++)p.collisionVertexArray.emplaceBack(0,0,0,0);p.collisionVertexArrayExt.emplaceBack(u,-s.padding,-s.padding),p.collisionVertexArrayExt.emplaceBack(u,s.padding,-s.padding),p.collisionVertexArrayExt.emplaceBack(u,s.padding,s.padding),p.collisionVertexArrayExt.emplaceBack(u,-s.padding,s.padding),this._commitLayoutVertex(p.layoutVertexArray,y,E,I,$,U,new J(s.x1,s.y1)),this._commitLayoutVertex(p.layoutVertexArray,y,E,I,$,U,new J(s.x2,s.y1)),this._commitLayoutVertex(p.layoutVertexArray,y,E,I,$,U,new J(s.x2,s.y2)),this._commitLayoutVertex(p.layoutVertexArray,y,E,I,$,U,new J(s.x1,s.y2)),O.vertexLength+=4;const H=p.indexArray;H.emplaceBack(N,N+1),H.emplaceBack(N+1,N+2),H.emplaceBack(N+2,N+3),H.emplaceBack(N+3,N),O.primitiveLength+=4}_addTextDebugCollisionBoxes(s,u,p,y,E,I){for(let P=y;P<E;P++){const O=p.get(P),N=this.getSymbolInstanceTextSize(s,I,u,P);this._addCollisionDebugVertices(O,N,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,I)}}_addIconDebugCollisionBoxes(s,u,p,y,E,I){for(let P=y;P<E;P++){const O=p.get(P),N=this.getSymbolInstanceIconSize(s,u,I.placedIconSymbolIndex);this._addCollisionDebugVertices(O,N,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,I)}}generateCollisionDebugBuffers(s,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fy(Wr,ry.members,_a),this.iconCollisionBox=new fy(Wr,ry.members,_a);const p=Tp(this.iconSizeData,s),y=Tp(this.textSizeData,s);for(let E=0;E<this.symbolInstances.length;E++){const I=this.symbolInstances.get(E);this._addTextDebugCollisionBoxes(y,s,u,I.textBoxStartIndex,I.textBoxEndIndex,I),this._addTextDebugCollisionBoxes(y,s,u,I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I),this._addIconDebugCollisionBoxes(p,s,u,I.iconBoxStartIndex,I.iconBoxEndIndex,I),this._addIconDebugCollisionBoxes(p,s,u,I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I)}}getSymbolInstanceTextSize(s,u,p,y){const E=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:y),I=oy(this.textSizeData,s,E)/Ql;return this.tilePixelRatio*I}getSymbolInstanceIconSize(s,u,p){const y=this.icon.placedSymbolArray.get(p),E=oy(this.iconSizeData,s,y);return this.tilePixelRatio*E}_commitDebugCollisionVertexUpdate(s,u,p){s.emplaceBack(u,-p,-p),s.emplaceBack(u,p,-p),s.emplaceBack(u,p,p),s.emplaceBack(u,-p,p)}_updateTextDebugCollisionBoxes(s,u,p,y,E,I){for(let P=y;P<E;P++){const O=p.get(P),N=this.getSymbolInstanceTextSize(s,I,u,P);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,N,O.padding)}}_updateIconDebugCollisionBoxes(s,u,p,y,E,I){for(let P=y;P<E;P++){const O=p.get(P),N=this.getSymbolInstanceIconSize(s,u,I);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,N,O.padding)}}updateCollisionDebugBuffers(s,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=Tp(this.iconSizeData,s),y=Tp(this.textSizeData,s);for(let E=0;E<this.symbolInstances.length;E++){const I=this.symbolInstances.get(E);this._updateTextDebugCollisionBoxes(y,s,u,I.textBoxStartIndex,I.textBoxEndIndex,I),this._updateTextDebugCollisionBoxes(y,s,u,I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I),this._updateIconDebugCollisionBoxes(p,s,u,I.iconBoxStartIndex,I.iconBoxEndIndex,I.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(p,s,u,I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,u,p,y,E,I,P,O,N){const $={};if(u<p){const{x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At,featureIndex:zt}=s.get(u);$.textBox={x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At},$.textFeatureIndex=zt}if(y<E){const{x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At,featureIndex:zt}=s.get(y);$.verticalTextBox={x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At},$.verticalTextFeatureIndex=zt}if(I<P){const{x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At,featureIndex:zt}=s.get(I);$.iconBox={x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At},$.iconFeatureIndex=zt}if(O<N){const{x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At,featureIndex:zt}=s.get(O);$.verticalIconBox={x1:U,y1:H,x2:Y,y2:se,padding:be,projectedAnchorX:Ge,projectedAnchorY:mt,projectedAnchorZ:Ot,tileAnchorX:pt,tileAnchorY:At},$.verticalIconFeatureIndex=zt}return $}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,u){const p=s.placedSymbolArray.get(u),y=p.vertexStartIndex+4*p.numGlyphs;for(let E=p.vertexStartIndex;E<y;E+=4)s.indexArray.emplaceBack(E,E+1,E+2),s.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const u=Math.sin(s),p=Math.cos(s),y=[],E=[],I=[];for(let P=0;P<this.symbolInstances.length;++P){I.push(P);const O=this.symbolInstances.get(P);y.push(0|Math.round(u*O.tileAnchorX+p*O.tileAnchorY)),E.push(O.featureIndex)}return I.sort((P,O)=>y[P]-y[O]||E[O]-E[P]),I}addToSortKeyRanges(s,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:E,leftJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:P,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:N}=p;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),E>=0&&E!==y&&this.addIndicesForPlacedSymbol(this.text,E),I>=0&&I!==E&&I!==y&&this.addIndicesForPlacedSymbol(this.text,I),P>=0&&this.addIndicesForPlacedSymbol(this.text,P),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),N>=0&&this.addIndicesForPlacedSymbol(this.icon,N)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}vr(ef,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ef.MAX_GLYPHS=65535,ef.addDynamicAttributes=R1;const Hg=new St({"symbol-placement":new ge(Mn.layout_symbol["symbol-placement"]),"symbol-spacing":new ge(Mn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ge(Mn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ke(Mn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ge(Mn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ge(Mn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ge(Mn.layout_symbol["icon-ignore-placement"]),"icon-optional":new ge(Mn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ge(Mn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ke(Mn.layout_symbol["icon-size"]),"icon-text-fit":new ge(Mn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ge(Mn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ke(Mn.layout_symbol["icon-image"]),"icon-rotate":new Ke(Mn.layout_symbol["icon-rotate"]),"icon-padding":new ge(Mn.layout_symbol["icon-padding"]),"icon-keep-upright":new ge(Mn.layout_symbol["icon-keep-upright"]),"icon-offset":new Ke(Mn.layout_symbol["icon-offset"]),"icon-anchor":new Ke(Mn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ge(Mn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ge(Mn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ge(Mn.layout_symbol["text-rotation-alignment"]),"text-field":new Ke(Mn.layout_symbol["text-field"]),"text-font":new Ke(Mn.layout_symbol["text-font"]),"text-size":new Ke(Mn.layout_symbol["text-size"]),"text-max-width":new Ke(Mn.layout_symbol["text-max-width"]),"text-line-height":new Ke(Mn.layout_symbol["text-line-height"]),"text-letter-spacing":new Ke(Mn.layout_symbol["text-letter-spacing"]),"text-justify":new Ke(Mn.layout_symbol["text-justify"]),"text-radial-offset":new Ke(Mn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ge(Mn.layout_symbol["text-variable-anchor"]),"text-anchor":new Ke(Mn.layout_symbol["text-anchor"]),"text-max-angle":new ge(Mn.layout_symbol["text-max-angle"]),"text-writing-mode":new ge(Mn.layout_symbol["text-writing-mode"]),"text-rotate":new Ke(Mn.layout_symbol["text-rotate"]),"text-padding":new ge(Mn.layout_symbol["text-padding"]),"text-keep-upright":new ge(Mn.layout_symbol["text-keep-upright"]),"text-transform":new Ke(Mn.layout_symbol["text-transform"]),"text-offset":new Ke(Mn.layout_symbol["text-offset"]),"text-allow-overlap":new ge(Mn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ge(Mn.layout_symbol["text-ignore-placement"]),"text-optional":new ge(Mn.layout_symbol["text-optional"])});var py={paint:new St({"icon-opacity":new Ke(Mn.paint_symbol["icon-opacity"]),"icon-color":new Ke(Mn.paint_symbol["icon-color"]),"icon-halo-color":new Ke(Mn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ke(Mn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ke(Mn.paint_symbol["icon-halo-blur"]),"icon-translate":new ge(Mn.paint_symbol["icon-translate"]),"icon-translate-anchor":new ge(Mn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ke(Mn.paint_symbol["text-opacity"]),"text-color":new Ke(Mn.paint_symbol["text-color"],{runtimeType:ue,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Ke(Mn.paint_symbol["text-halo-color"]),"text-halo-width":new Ke(Mn.paint_symbol["text-halo-width"]),"text-halo-blur":new Ke(Mn.paint_symbol["text-halo-blur"]),"text-translate":new ge(Mn.paint_symbol["text-translate"]),"text-translate-anchor":new ge(Mn.paint_symbol["text-translate-anchor"])}),layout:Hg};class x0{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:yt,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}vr(x0,"FormatSectionOverride",{omit:["defaultValue"]});class Op extends uc{constructor(s){super(s,py)}recalculate(s,u){super.recalculate(s,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const E of p)y.indexOf(E)<0&&y.push(E);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(s,u,p,y){const E=this.layout.get(s).evaluate(u,{},p,y),I=this._unevaluatedLayout._values[s];return I.isDataDriven()||Ba(I.value)||!E?E:(P=u.properties,E.replace(/{([^{}]+)}/g,(N,$)=>$ in P?String(P[$]):""));var P}createBucket(s){return new ef(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of py.paint.overridableProperties){if(!Op.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),p=new x0(u),y=new $h(p,u.property.specification);let E=null;E="constant"===u.value.kind||"source"===u.value.kind?new sa("source",y):new Fr("composite",y,u.value.zoomStops,u.value._interpolationType),this.paint._values[s]=new st(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&Op.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const p=s.get("text-field"),y=py.paint.properties[u];let E=!1;const I=P=>{for(const O of P)if(y.overrides&&y.overrides.hasOverride(O))return void(E=!0)};if("constant"===p.value.kind&&p.value.value instanceof Ks)I(p.value.value.sections);else if("source"===p.value.kind){const P=N=>{E||(N instanceof Ya&&Ea(N.value)===Le?I(N.value.sections):N instanceof wc?I(N.sections):N.eachChild(P))},O=p.value;O._styleExpression&&P(O._styleExpression.expression)}return E}getProgramConfiguration(s){return new Hh(this,s)}}var w0={paint:new St({"background-color":new ge(Mn.paint_background["background-color"]),"background-pattern":new ge(Mn.paint_background["background-pattern"]),"background-opacity":new ge(Mn.paint_background["background-opacity"])})},qg={paint:new St({"raster-opacity":new ge(Mn.paint_raster["raster-opacity"]),"raster-hue-rotate":new ge(Mn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ge(Mn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ge(Mn.paint_raster["raster-brightness-max"]),"raster-saturation":new ge(Mn.paint_raster["raster-saturation"]),"raster-contrast":new ge(Mn.paint_raster["raster-contrast"]),"raster-resampling":new ge(Mn.paint_raster["raster-resampling"]),"raster-fade-duration":new ge(Mn.paint_raster["raster-fade-duration"])})};class L1 extends uc{constructor(s){super(s,{}),this.implementation=s}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}var N1={paint:new St({"sky-type":new ge(Mn.paint_sky["sky-type"]),"sky-atmosphere-sun":new ge(Mn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ge(Mn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ge(Mn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ge(Mn.paint_sky["sky-gradient-radius"]),"sky-gradient":new wt(Mn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ge(Mn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ge(Mn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ge(Mn.paint_sky["sky-opacity"])})};function Wg(l,s,u){const p=[0,0,1],y=W2([]);return X2(y,y,u?-pe(l)+Math.PI:pe(l)),Uv(y,y,-pe(s)),$_(p,p,y),dc(p,p)}const kF={circle:class extends uc{constructor(l){super(l,rM)}createBucket(l){return new eS(l)}queryRadius(l){const s=l;return Ag("circle-radius",this,s)+Ag("circle-stroke-width",this,s)+Mg(this.paint.get("circle-translate"))}queryIntersectsFeature(l,s,u,p,y,E,I,P){const O=oS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),N=this.paint.get("circle-radius").evaluate(s,u)+this.paint.get("circle-stroke-width").evaluate(s,u);return Pg(l,p,E,I,P,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),O,N)}getProgramIds(){return["circle"]}getProgramConfiguration(l){return new Hh(this,l)}},heatmap:class extends uc{createBucket(l){return new Wx(l)}constructor(l){super(l,CF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"heatmap-color"===l&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return Ag("heatmap-radius",this,l)}queryIntersectsFeature(l,s,u,p,y,E,I,P){const O=this.paint.get("heatmap-radius").evaluate(s,u);return Pg(l,p,E,I,P,!0,!0,new J(0,0),O)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(l){return new Hh(this,l)}},hillshade:class extends uc{constructor(l){super(l,oM)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends uc{constructor(l){super(l,dM)}getProgramIds(){const l=this.paint.get("fill-pattern"),s=l&&l.constantOr(1),u=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(l){return new Hh(this,l)}recalculate(l,s){super.recalculate(l,s);const u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Rg(l)}queryRadius(){return Mg(this.paint.get("fill-translate"))}queryIntersectsFeature(l,s,u,p,y,E){return!l.queryGeometry.isAboveHorizon&&Wu(G_(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}},"fill-extrusion":class extends uc{constructor(l){super(l,yM)}createBucket(l){return new Q_(l)}queryRadius(){return Mg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(l){return new Hh(this,l)}queryIntersectsFeature(l,s,u,p,y,E,I,P,O){const N=oS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),$=this.paint.get("fill-extrusion-height").evaluate(s,u),U=this.paint.get("fill-extrusion-base").evaluate(s,u),H=[0,0],Y=P&&E.elevation,se=E.elevation?E.elevation.exaggeration():1,be=l.tile.getBucket(this);if(Y&&be instanceof Q_){const At=be.centroidVertexArray,zt=O+1;zt<At.length&&(H[0]=At.geta_centroid_pos0(zt),H[1]=At.geta_centroid_pos1(zt))}if(0===H[0]&&1===H[1])return!1;"globe"===E.projection.name&&(p=e0([p],[new J(0,0),new J(Ci,Ci)],l.tileID.canonical).map(At=>At.polygon).flat());const Ge=Y?P:null,[mt,Ot]=(zt=p,Vt=U,En=$,fn=N,zn=I,lr=Ge,In=H,Hn=se,Wn=E.center.lat,"globe"===(At=E).projection.name?function(pr,On,kr,Xr,Rr,Yi,gr,wi,Ki,Ro,Gi){const ki=[],Vs=[],Qi=pr.projection.upVectorScale(Gi,pr.center.lat,pr.worldSize).metersToTile,Xi=[0,0,0,1],Us=[0,0,0,1],ea=(js,mi,Gr,hl)=>{js[0]=mi,js[1]=Gr,js[2]=hl,js[3]=1},Ys=c1();kr>0&&(kr+=Ys),Xr+=Ys;for(const js of On){const mi=[],Gr=[];for(const hl of js){const he=hl.x+Rr.x,el=hl.y+Rr.y,xl=pr.projection.projectTilePoint(he,el,Gi),ya=pr.projection.upVector(Gi,hl.x,hl.y);let bo=kr,tl=Xr;if(gr){const Ss=o0(he,el,kr,Xr,gr,wi,Ki,Ro);bo+=Ss.base,tl+=Ss.top}0!==kr?ea(Xi,xl.x+ya[0]*Qi*bo,xl.y+ya[1]*Qi*bo,xl.z+ya[2]*Qi*bo):ea(Xi,xl.x,xl.y,xl.z),ea(Us,xl.x+ya[0]*Qi*tl,xl.y+ya[1]*Qi*tl,xl.z+ya[2]*Qi*tl),Va(Xi,Xi,Yi),Va(Us,Us,Yi),mi.push(new Cm(Xi[0],Xi[1],Xi[2])),Gr.push(new Cm(Us[0],Us[1],Us[2]))}ki.push(mi),Vs.push(Gr)}return[ki,Vs]}(At,zt,Vt,En,fn,zn,lr,In,Hn,Wn,l.tileID.canonical):lr?function(pr,On,kr,Xr,Rr,Yi,gr,wi,Ki){const Ro=[],Gi=[],ki=[0,0,0,1];for(const Vs of pr){const Qi=[],Xi=[];for(const Us of Vs){const ea=Us.x+Xr.x,Ys=Us.y+Xr.y,js=o0(ea,Ys,On,kr,Yi,gr,wi,Ki);ki[0]=ea,ki[1]=Ys,ki[2]=js.base,ki[3]=1,vd(ki,ki,Rr),ki[3]=Math.max(ki[3],1e-5);const mi=new Cm(ki[0]/ki[3],ki[1]/ki[3],ki[2]/ki[3]);ki[0]=ea,ki[1]=Ys,ki[2]=js.top,ki[3]=1,vd(ki,ki,Rr),ki[3]=Math.max(ki[3],1e-5);const Gr=new Cm(ki[0]/ki[3],ki[1]/ki[3],ki[2]/ki[3]);Qi.push(mi),Xi.push(Gr)}Ro.push(Qi),Gi.push(Xi)}return[Ro,Gi]}(zt,Vt,En,fn,zn,lr,In,Hn,Wn):function(pr,On,kr,Xr,Rr){const Yi=[],gr=[],wi=Rr[8]*On,Ki=Rr[9]*On,Ro=Rr[10]*On,Gi=Rr[11]*On,ki=Rr[8]*kr,Vs=Rr[9]*kr,Qi=Rr[10]*kr,Xi=Rr[11]*kr;for(const Us of pr){const ea=[],Ys=[];for(const js of Us){const mi=js.x+Xr.x,Gr=js.y+Xr.y,hl=Rr[0]*mi+Rr[4]*Gr+Rr[12],he=Rr[1]*mi+Rr[5]*Gr+Rr[13],el=Rr[2]*mi+Rr[6]*Gr+Rr[14],xl=Rr[3]*mi+Rr[7]*Gr+Rr[15],ya=hl+wi,bo=he+Ki,tl=el+Ro,Ss=Math.max(xl+Gi,1e-5),Kc=hl+ki,nl=he+Vs,$l=el+Qi,Ml=Math.max(xl+Xi,1e-5);ea.push(new Cm(ya/Ss,bo/Ss,tl/Ss)),Ys.push(new Cm(Kc/Ml,nl/Ml,$l/Ml))}Yi.push(ea),gr.push(Ys)}return[Yi,gr]}(zt,Vt,En,fn,zn)),pt=l.queryGeometry;var At,zt,Vt,En,fn,zn,lr,In,Hn,Wn;return function(At,zt,Vt){let En=1/0;Wu(Vt,zt)&&(En=r0(Vt,zt[0]));for(let fn=0;fn<zt.length;fn++){const zn=zt[fn],lr=At[fn];for(let In=0;In<zn.length-1;In++){const Hn=zn[In],Wn=[Hn,zn[In+1],lr[In+1],lr[In],Hn];tS(Vt,Wn)&&(En=Math.min(En,r0(Vt,Wn)))}}return En!==1/0&&En}(mt,Ot,pt.isPointQuery()?pt.screenBounds:pt.screenGeometry)}},line:class extends uc{constructor(l){super(l,wM),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if("line-gradient"===l){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof Bh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,s){super.recalculate(l,s),this.paint._values["line-floorwidth"]=ny.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new ty(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(l){return new Hh(this,l)}queryRadius(l){const s=l,u=ES(Ag("line-width",this,s),Ag("line-gap-width",this,s)),p=Ag("line-offset",this,s);return u/2+Math.abs(p)+Mg(this.paint.get("line-translate"))}queryIntersectsFeature(l,s,u,p,y,E){if(l.queryGeometry.isAboveHorizon)return!1;const I=G_(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),P=l.pixelToTileUnitsFactor/2*ES(this.paint.get("line-width").evaluate(s,u),this.paint.get("line-gap-width").evaluate(s,u)),O=this.paint.get("line-offset").evaluate(s,u);return O&&(p=function(N,$){const U=[],H=new J(0,0);for(let Y=0;Y<N.length;Y++){const se=N[Y],be=[];for(let Ge=0;Ge<se.length;Ge++){const mt=se[Ge],Ot=se[Ge+1],pt=0===Ge?H:mt.sub(se[Ge-1])._unit()._perp(),At=Ge===se.length-1?H:Ot.sub(mt)._unit()._perp(),zt=pt._add(At)._unit();zt._mult(1/(zt.x*At.x+zt.y*At.y)),be.push(zt._mult($)._add(mt))}U.push(be)}return U}(p,O*l.pixelToTileUnitsFactor)),function(N,$,U){for(let H=0;H<$.length;H++){const Y=$[H];if(N.length>=3)for(let se=0;se<Y.length;se++)if(bm(N,Y[se]))return!0;if(Gx(N,Y,U))return!0}return!1}(I,p,P)}isTileClipped(){return!0}},symbol:Op,background:class extends uc{constructor(l){super(l,w0)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends uc{constructor(l){super(l,qg)}getProgramIds(){return["raster"]}},sky:class extends uc{constructor(l){super(l,N1),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"sky-gradient"===l?this._updateColorRamp():"sky-atmosphere-sun"!==l&&"sky-atmosphere-halo-color"!==l&&"sky-atmosphere-color"!==l&&"sky-atmosphere-sun-intensity"!==l||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Wv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(l,s){if("atmosphere"===this.paint.get("sky-type")){const p=this.paint.get("sky-atmosphere-sun"),y=!p,E=l.style.light,I=E.properties.get("position");return y&&"viewport"===E.properties.get("anchor")&&un("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?Wg(I.azimuthal,90-I.polar,s):Wg(p[0],90-p[1],s)}const u=this.paint.get("sky-gradient-center");return Wg(u[0],90-u[1],s)}is3D(){return!1}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return"atmosphere"===l?["skyboxCapture","skybox"]:"gradient"===l?["skyboxGradient"]:null}}};class Om{constructor(s,u,p,y){this.context=s,this.format=p,this.texture=s.gl.createTexture(),this.update(u,y)}update(s,u,p){const{width:y,height:E}=s,{context:I}=this,{gl:P}=I,{HTMLImageElement:O,HTMLCanvasElement:N,HTMLVideoElement:$,ImageData:U,ImageBitmap:H}=me;if(P.bindTexture(P.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!u||!1!==u.premultiply)),p||this.size&&this.size[0]===y&&this.size[1]===E){const{x:Y,y:se}=p||{x:0,y:0};s instanceof O||s instanceof N||s instanceof $||s instanceof U||H&&s instanceof H?P.texSubImage2D(P.TEXTURE_2D,0,Y,se,P.RGBA,P.UNSIGNED_BYTE,s):P.texSubImage2D(P.TEXTURE_2D,0,Y,se,y,E,P.RGBA,P.UNSIGNED_BYTE,s.data)}else this.size=[y,E],s instanceof O||s instanceof N||s instanceof $||s instanceof U||H&&s instanceof H?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,s):P.texImage2D(P.TEXTURE_2D,0,this.format,y,E,0,this.format,P.UNSIGNED_BYTE,s.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&P.generateMipmap(P.TEXTURE_2D)}bind(s,u){const{context:p}=this,{gl:y}=p;y.bindTexture(y.TEXTURE_2D,this.texture),s!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap?s===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_NEAREST:s),this.filter=s),u!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class my{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class $M{constructor(){this.tasks={},this.taskQueue=[],Pn(["process"],this),this.invoker=new my(this.process),this.nextId=0}add(s,u){const p=this.nextId++,y=function({type:E,isSymbolTile:I,zoom:P}){return P=P||0,"message"===E?0:"maybePrepare"!==E||I?"parseTile"!==E||I?"parseTile"===E&&I?300-P:"maybePrepare"===E&&I?400-P:500:200-P:100-P}(u);if(0===y){jn();try{s()}finally{}return{cancel:()=>{}}}return this.tasks[p]={fn:s,metadata:u,priority:y,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){jn();try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const s=this.pick();if(null===s)return;const u=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let s=null,u=1/0;for(let y=0;y<this.taskQueue.length;y++){const E=this.tasks[this.taskQueue[y]];E.priority<u&&(u=E.priority,s=y)}if(null===s)return null;const p=this.taskQueue[s];return this.taskQueue.splice(s,1),p}remove(){this.invoker.remove()}}class F1{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const p=s[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const VM=["tile","layer","source","sourceLayer","state"];class YS{constructor(s,u,p,y,E){this.type="Feature",this._vectorTileFeature=s,this._z=u,this._x=p,this._y=y,this.properties=s.properties,this.id=E}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(s.id=this.id);for(const u of VM)void 0!==this[u]&&(s[u]=this[u]);return s}}const Lp=new Uint16Array(8184);for(let l=0;l<2046;l++){let s=l+2,u=0,p=0,y=0,E=0,I=0,P=0;for(1&s?y=E=I=32:u=p=P=32;(s>>=1)>1;){const N=u+y>>1,$=p+E>>1;1&s?(y=u,E=p,u=I,p=P):(u=y,p=E,y=I,E=P),I=N,P=$}const O=4*l;Lp[O+0]=u,Lp[O+1]=p,Lp[O+2]=y,Lp[O+3]=E}const tf=new Uint16Array(2178),Lm=new Uint8Array(1089),E0=new Uint16Array(1089);function gy(l){return 0===l?-.03125:32===l?.03125:0}var C0=Jt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const KS={type:2,extent:Ci,loadGeometry:()=>[[new J(0,0),new J(Ci+1,0),new J(Ci+1,Ci+1),new J(0,Ci+1),new J(0,0)]]};class S0{constructor(s,u,p,y,E){this.tileID=s,this.uid=lt(),this.uses=0,this.tileSize=u,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=E,this.expiredRequestCount=0,this.state="loading",y&&y.transform&&(this.projection=y.transform.projection)}registerFadeDuration(s){const u=s+this.timeAdded;u<So.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Pm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(s,u,p){if(this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,E){const I={};if(!E)return I;for(const P of y){const O=P.layerIds.map(N=>E.getLayer(N)).filter(Boolean);if(0!==O.length){P.layers=O,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(N=>O.filter($=>$.id===N)[0]));for(const N of O)I[N.id]=P}}return I}(s.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const E=this.buckets[y];if(E instanceof ef){if(this.hasSymbolBuckets=!0,!p)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const E=this.buckets[y];if(E instanceof ef&&E.hasRTLText){this.hasRTLText=!0,B.isLoading()||B.isLoaded()||"deferred"!==k()||F();break}}this.queryPadding=0;for(const y in this.buckets){const E=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(E))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),s.lineAtlas&&(this.lineAtlas=s.lineAtlas)}else this.collisionBoxArray=new Ps}unloadVectorData(){if(this.hasData()){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(s){return this.buckets[s.id]}upload(s){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(s)}const u=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Om(s,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Om(s,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Om(s,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,u,p,y,E,I,P,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:y,pixelPosMatrix:P,transform:I,params:E,tileTransform:this.tileTransform},s,u,p):{}}querySourceFeatures(s,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),E=u?u.sourceLayer:"",I=y._geojsonTileLayer||y[E];if(!I)return;const P=gh(u&&u.filter),{z:O,x:N,y:$}=this.tileID.canonical,U={z:O,x:N,y:$};for(let H=0;H<I.length;H++){const Y=I.feature(H);if(P.needGeometry){const Ge=Kd(Y,!0);if(!P.filter(new V(this.tileID.overscaledZ),Ge,this.tileID.canonical))continue}else if(!P.filter(new V(this.tileID.overscaledZ),Y))continue;const se=p.getId(Y,E),be=new YS(Y,O,N,$,se);be.tile=U,s.push(be)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const u=this.expirationTime;if(s.cacheControl){const p=Pt(s.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const E=this.expirationTime-u;E?this.expirationTime=p+Math.max(E,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length||!u)return;const p=this.latestFeatureIndex.loadVTLayers(),y=u.style.listImages();for(const E in this.buckets){if(!u.style.hasLayer(E))continue;const I=this.buckets[E],P=I.layers[0].sourceLayer||"_geojsonTileLayer",O=p[P],N=s[P];if(!O||!N||0===Object.keys(N).length)continue;if(I.update(N,O,y,this.imageAtlas&&this.imageAtlas.patternPositions||{}),I instanceof ty||I instanceof Rg){const U=u.style._getSourceCache(I.layers[0].source);u._terrain&&u._terrain.enabled&&U&&I.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(U.id,this.tileID)}const $=u&&u.style&&u.style.getLayer(E);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(I)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<So.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=So.now()+s}setTexture(s,u){const p=u.context,y=p.gl;this.texture=this.texture||u.getTileTexture(s.width),this.texture?this.texture.update(s,{useMipmap:!0}):(this.texture=new Om(p,s,y.RGBA,{useMipmap:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE))}setDependencies(s,u){const p={};for(const y of u)p[y]=!0;this.dependencies[s]=p}hasDependency(s,u){for(const p of s){const y=this.dependencies[p];if(y)for(const E of u)if(y[E])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(s,u){if(!u||"mercator"===u.name||this._tileDebugBuffer)return;const p=Yd(KS,this.tileID.canonical,this.tileTransform)[0],y=new ur,E=new Ru;for(let I=0;I<p.length;I++){const{x:P,y:O}=p[I];y.emplaceBack(P,O),E.emplaceBack(I)}E.emplaceBack(0),this._tileDebugIndexBuffer=s.createIndexBuffer(E),this._tileDebugBuffer=s.createVertexBuffer(y,fm.members),this._tileDebugSegments=Qs.simpleSegment(0,0,y.length,E.length)}_makeTileBoundsBuffers(s,u){if(this._tileBoundsBuffer||!u||"mercator"===u.name)return;const p=Yd(KS,this.tileID.canonical,this.tileTransform)[0];let y,E;if(this.isRaster){const I=function(P,O){const N=Pm(P,O),$=Math.pow(2,P.z);for(let Ge=0;Ge<33;Ge++)for(let mt=0;mt<33;mt++){const Ot=Zh((P.x+(mt+gy(mt))/32)/$),pt=Zc((P.y+(Ge+gy(Ge))/32)/$),At=O.project(Ot,pt),zt=33*Ge+mt;tf[2*zt+0]=Math.round((At.x*N.scale-N.x)*Ci),tf[2*zt+1]=Math.round((At.y*N.scale-N.y)*Ci)}Lm.fill(0),E0.fill(0);for(let Ge=2045;Ge>=0;Ge--){const mt=4*Ge,Ot=Lp[mt+0],pt=Lp[mt+1],At=Lp[mt+2],zt=Lp[mt+3],Vt=Ot+At>>1,En=pt+zt>>1,fn=Vt+En-pt,zn=En+Ot-Vt,lr=33*pt+Ot,In=33*zt+At,Hn=33*En+Vt,Wn=Math.hypot((tf[2*lr+0]+tf[2*In+0])/2-tf[2*Hn+0],(tf[2*lr+1]+tf[2*In+1])/2-tf[2*Hn+1])>=16;Lm[Hn]=Lm[Hn]||(Wn?1:0),Ge<1022&&(Lm[Hn]=Lm[Hn]||Lm[33*(pt+zn>>1)+(Ot+fn>>1)]||Lm[33*(zt+zn>>1)+(At+fn>>1)])}const U=new Gn,H=new hi;let Y=0;function se(Ge,mt){const Ot=33*mt+Ge;return 0===E0[Ot]&&(U.emplaceBack(tf[2*Ot+0],tf[2*Ot+1],Ge*Ci/32,mt*Ci/32),E0[Ot]=++Y),E0[Ot]-1}function be(Ge,mt,Ot,pt,At,zt){const Vt=Ge+Ot>>1,En=mt+pt>>1;if(Math.abs(Ge-At)+Math.abs(mt-zt)>1&&Lm[33*En+Vt])be(At,zt,Ge,mt,Vt,En),be(Ot,pt,At,zt,Vt,En);else{const fn=se(Ge,mt),zn=se(Ot,pt),lr=se(At,zt);H.emplaceBack(fn,zn,lr)}}return be(0,0,32,32,32,0),be(32,32,0,0,0,32),{vertices:U,indices:H}}(this.tileID.canonical,u);y=I.vertices,E=I.indices}else{y=new Gn,E=new hi;for(const{x:P,y:O}of p)y.emplaceBack(P,O,0,0);const I=Kv(y.int16,void 0,4);for(let P=0;P<I.length;P+=3)E.emplaceBack(I[P],I[P+1],I[P+2])}this._tileBoundsBuffer=s.createVertexBuffer(y,C0.members),this._tileBoundsIndexBuffer=s.createIndexBuffer(E),this._tileBoundsSegments=Qs.simpleSegment(0,0,y.length,E.length)}_makeGlobeTileDebugBuffers(s,u){const p=u.projection;if(!p||"globe"!==p.name||u.freezeTileCoverage)return;const y=this.tileID.canonical,E=pc(Fx(y,u)),I=mp(u.zoom);let P;I>0&&(P=F_(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(s,y,u,E,P,I),this._makeGlobeTileDebugTextBuffer(s,y,u,E,P,I)}_globePoint(s,u,p,y,E,I,P){let O=Cg(s,u,p);if(I){const N=1<<p.z,$=Xd(y.center.lng),U=Of(y.center.lat),H=(p.x+.5)/N-$;let Y=0;H>.5?Y=-1:H<-.5&&(Y=1);let se=(s/Ci+p.x)/N+Y,be=(u/Ci+p.y)/N;se=(se-$)*y._pixelsPerMercatorPixel+$,be=(be-U)*y._pixelsPerMercatorPixel+U;const Ge=[se*y.worldSize,be*y.worldSize,0];Va(Ge,Ge,I),O=fp(O,Ge,P)}return Va(O,O,E)}_makeGlobeTileDebugBorderBuffer(s,u,p,y,E,I){const P=new ur,O=new Ru,N=new mn,$=(H,Y,se,be,Ge)=>{const mt=(se-H)/(Ge-1),Ot=(be-Y)/(Ge-1),pt=P.length;for(let At=0;At<Ge;At++){const zt=H+At*mt,Vt=Y+At*Ot;P.emplaceBack(zt,Vt);const En=this._globePoint(zt,Vt,u,p,y,E,I);N.emplaceBack(En[0],En[1],En[2]),O.emplaceBack(pt+At)}},U=Ci;$(0,0,U,0,16),$(U,0,U,U,16),$(U,U,0,U,16),$(0,U,0,0,16),this._tileDebugIndexBuffer=s.createIndexBuffer(O),this._tileDebugBuffer=s.createVertexBuffer(P,fm.members),this._globeTileDebugBorderBuffer=s.createVertexBuffer(N,Q2.members),this._tileDebugSegments=Qs.simpleSegment(0,0,P.length,O.length)}_makeGlobeTileDebugTextBuffer(s,u,p,y,E,I){const P=Ci/4,O=new ur,N=new hi,$=new mn,U=25;N.reserve(32),O.reserve(U),$.reserve(U);const H=(Y,se)=>U*Y+se;for(let Y=0;Y<U;Y++){const se=Y*P;for(let be=0;be<U;be++){const Ge=be*P;O.emplaceBack(Ge,se);const mt=this._globePoint(Ge,se,u,p,y,E,I);$.emplaceBack(mt[0],mt[1],mt[2])}}for(let Y=0;Y<4;Y++)for(let se=0;se<4;se++){const be=H(Y,se),Ge=H(Y,se+1),mt=H(Y+1,se),Ot=H(Y+1,se+1);N.emplaceBack(be,Ge,mt),N.emplaceBack(mt,Ge,Ot)}this._tileDebugTextIndexBuffer=s.createIndexBuffer(N),this._tileDebugTextBuffer=s.createVertexBuffer(O,fm.members),this._globeTileDebugTextBuffer=s.createVertexBuffer($,Q2.members),this._tileDebugTextSegments=Qs.simpleSegment(0,0,U,32)}}class B1{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,u,p){const y=String(u);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},le(this.stateChanges[s][y],p),null===this.deletedStates[s]){this.deletedStates[s]={};for(const E in this.state[s])E!==y&&(this.deletedStates[s][E]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][y]){this.deletedStates[s][y]={};for(const E in this.state[s][y])p[E]||(this.deletedStates[s][y][E]=null)}else for(const E in p)this.deletedStates[s]&&this.deletedStates[s][y]&&null===this.deletedStates[s][y][E]&&delete this.deletedStates[s][y][E]}removeFeatureState(s,u,p){if(null===this.deletedStates[s])return;const y=String(u);if(this.deletedStates[s]=this.deletedStates[s]||{},p&&void 0!==u)null!==this.deletedStates[s][y]&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][p]=null);else if(void 0!==u)if(this.stateChanges[s]&&this.stateChanges[s][y])for(p in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][p]=null;else this.deletedStates[s][y]=null;else this.deletedStates[s]=null}getState(s,u){const p=String(u),y=le({},(this.state[s]||{})[p],(this.stateChanges[s]||{})[p]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const E=this.deletedStates[s][u];if(null===E)return{};for(const I in E)delete y[I]}return y}initializeTileState(s,u){s.setFeatureState(this.state,u)}coalesceChanges(s,u){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const E={};for(const I in this.stateChanges[y])this.state[y][I]||(this.state[y][I]={}),le(this.state[y][I],this.stateChanges[y][I]),E[I]=this.state[y][I];p[y]=E}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const E={};if(null===this.deletedStates[y])for(const I in this.state[y])E[I]={},this.state[y][I]={};else for(const I in this.deletedStates[y]){if(null===this.deletedStates[y][I])this.state[y][I]={};else if(this.state[y][I])for(const P of Object.keys(this.deletedStates[y][I]))delete this.state[y][I][P];E[I]=this.state[y][I]}p[y]=p[y]||{},le(p[y],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const y in s)s[y].setFeatureState(p,u)}}class _y{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,u){const p=this.toIdx(s,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(s,u){return this.leaves[this.toIdx(s,u)]}toIdx(s,u){return u*this.size+s}}function QS(l,s,u,p){let y=0,E=Number.MAX_VALUE;for(let I=0;I<3;I++)if(Math.abs(p[I])<1e-15){if(u[I]<l[I]||u[I]>s[I])return null}else{const P=1/p[I];let O=(l[I]-u[I])*P,N=(s[I]-u[I])*P;if(O>N){const $=O;O=N,N=$}if(O>y&&(y=O),N<E&&(E=N),y>E)return null}return y}function z1(l,s,u,p,y,E,I,P,O,N,$){const U=p-l,H=y-s,Y=E-u,se=I-l,be=P-s,Ge=O-u,mt=$[1]*Ge-$[2]*be,Ot=$[2]*se-$[0]*Ge,pt=$[0]*be-$[1]*se,At=U*mt+H*Ot+Y*pt;if(Math.abs(At)<1e-15)return null;const zt=1/At,Vt=N[0]-l,En=N[1]-s,fn=N[2]-u,zn=(Vt*mt+En*Ot+fn*pt)*zt;if(zn<0||zn>1)return null;const lr=En*Y-fn*H,In=fn*U-Vt*Y,Hn=Vt*H-En*U,Wn=($[0]*lr+$[1]*In+$[2]*Hn)*zt;return Wn<0||zn+Wn>1?null:(se*lr+be*In+Ge*Hn)*zt}function JS(l,s,u){return(l-s)/(u-s)}function $1(l,s,u,p,y,E,I,P,O){const N=1<<u,$=E-p,U=I-y,H=(l+1)/N*$+p,Y=(s+0)/N*U+y,se=(s+1)/N*U+y;P[0]=(l+0)/N*$+p,P[1]=Y,O[0]=H,O[1]=se}class UM{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(E){const I=Math.ceil(Math.log2(E.dim/8)),P=[];let O=Math.ceil(Math.pow(2,I));const N=1/O,$=(Y,se,be,Ge,mt)=>{const Ot=Ge?1:0,pt=(Y+1)*be-Ot,At=se*be,zt=(se+1)*be-Ot;mt[0]=Y*be,mt[1]=At,mt[2]=pt,mt[3]=zt};let U=new _y(O);const H=[];for(let Y=0;Y<O*O;Y++){$(Y%O,Math.floor(Y/O),N,!1,H);const se=Eh(H[0],H[1],E),be=Eh(H[2],H[1],E),Ge=Eh(H[2],H[3],E),mt=Eh(H[0],H[3],E);U.minimums.push(Math.min(se,be,Ge,mt)),U.maximums.push(Math.max(se,be,Ge,mt)),U.leaves.push(1)}for(P.push(U),O/=2;O>=1;O/=2){const Y=P[P.length-1];U=new _y(O);for(let se=0;se<O*O;se++){$(se%O,Math.floor(se/O),2,!0,H);const be=Y.getElevation(H[0],H[1]),Ge=Y.getElevation(H[2],H[1]),mt=Y.getElevation(H[2],H[3]),Ot=Y.getElevation(H[0],H[3]),pt=Y.isLeaf(H[0],H[1]),At=Y.isLeaf(H[2],H[1]),zt=Y.isLeaf(H[2],H[3]),Vt=Y.isLeaf(H[0],H[3]),En=Math.min(be.min,Ge.min,mt.min,Ot.min),fn=Math.max(be.max,Ge.max,mt.max,Ot.max),zn=pt&&At&&zt&&Vt;U.maximums.push(fn),U.minimums.push(En),U.leaves.push(fn-En<=5&&zn?1:0)}P.push(U)}return P}(this.dem),p=u.length-1,y=u[p];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(s,u,p,y,E,I,P=1){return QS([s,u,-100],[p,y,this.maximums[0]*P],E,I)}raycast(s,u,p,y,E,I,P=1){if(!this.nodeCount)return null;const O=this.raycastRoot(s,u,p,y,E,I,P);if(null==O)return null;const N=[],$=[],U=[],H=[],Y=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;Y.length>0;){const{idx:se,t:be,nodex:Ge,nodey:mt,depth:Ot}=Y.pop();if(this.leaves[se]){$1(Ge,mt,Ot,s,u,p,y,U,H);const At=1<<Ot,zt=(Ge+0)/At,Vt=(Ge+1)/At,En=(mt+0)/At,fn=(mt+1)/At,zn=Eh(zt,En,this.dem)*P,lr=Eh(Vt,En,this.dem)*P,In=Eh(Vt,fn,this.dem)*P,Hn=Eh(zt,fn,this.dem)*P,Wn=z1(U[0],U[1],zn,H[0],U[1],lr,H[0],H[1],In,E,I),tr=z1(H[0],H[1],In,U[0],H[1],Hn,U[0],U[1],zn,E,I),pr=Math.min(null!==Wn?Wn:Number.MAX_VALUE,null!==tr?tr:Number.MAX_VALUE);if(pr!==Number.MAX_VALUE)return pr;{const On=xg([],E,I,be);if(eI(zn,lr,Hn,In,JS(On[0],U[0],H[0]),JS(On[1],U[1],H[1]))>=On[2])return be}continue}let pt=0;for(let At=0;At<this._siblingOffset.length;At++){$1((Ge<<1)+this._siblingOffset[At][0],(mt<<1)+this._siblingOffset[At][1],Ot+1,s,u,p,y,U,H),U[2]=-100,H[2]=this.maximums[this.childOffsets[se]+At]*P;const zt=QS(U,H,E,I);if(null!=zt){const Vt=zt;N[At]=Vt;let En=!1;for(let fn=0;fn<pt&&!En;fn++)Vt>=N[$[fn]]&&($.splice(fn,0,At),En=!0);En||($[pt]=At),pt++}}for(let At=0;At<pt;At++){const zt=$[At];Y.push({idx:this.childOffsets[se]+zt,t:N[zt],nodex:(Ge<<1)+this._siblingOffset[zt][0],nodey:(mt<<1)+this._siblingOffset[zt][1],depth:Ot+1})}}return null}_addNode(s,u,p){return this.minimums.push(s),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(s,u,p,y,E){if(1===s[y].isLeaf(u,p))return;this.childOffsets[E]||(this.childOffsets[E]=this.nodeCount);const I=y-1,P=s[I];let O=0,N=0;for(let $=0;$<this._siblingOffset.length;$++){const U=2*u+this._siblingOffset[$][0],H=2*p+this._siblingOffset[$][1],Y=P.getElevation(U,H),se=P.isLeaf(U,H),be=this._addNode(Y.min,Y.max,se);se&&(O|=1<<$),N||(N=be)}for(let $=0;$<this._siblingOffset.length;$++)O&1<<$||this._construct(s,2*u+this._siblingOffset[$][0],2*p+this._siblingOffset[$][1],I,N+$)}}function eI(l,s,u,p,y,E){return lo(lo(l,u,E),lo(s,p,E),y)}function Eh(l,s,u){const p=u.dim,y=K(l*p-.5,0,p-1),E=K(s*p-.5,0,p-1),I=Math.floor(y),P=Math.floor(E),O=Math.min(I+1,p-1),N=Math.min(P+1,p-1);return eI(u.get(I,P),u.get(O,P),u.get(I,N),u.get(O,N),y-I,E-P)}const tI={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Xg(l,s,u){return(256*l*256+256*s+u)/10-1e4}function er(l,s,u){return 256*l+s+u/256-32768}class I0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,u,p,y=!1,E=!1){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return un(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const I=this.dim=u.height-2,P=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=p||"mapbox",this.borderReady=y,!y){for(let O=0;O<I;O++)P[this._idx(-1,O)]=P[this._idx(0,O)],P[this._idx(I,O)]=P[this._idx(I-1,O)],P[this._idx(O,-1)]=P[this._idx(O,0)],P[this._idx(O,I)]=P[this._idx(O,I-1)];P[this._idx(-1,-1)]=P[this._idx(0,0)],P[this._idx(I,-1)]=P[this._idx(I-1,0)],P[this._idx(-1,I)]=P[this._idx(0,I-1)],P[this._idx(I,I)]=P[this._idx(I-1,I-1)],E&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new UM(this)}get(s,u,p=!1){p&&(s=K(s,-1,this.dim),u=K(u,-1,this.dim));const y=4*this._idx(s,u);return("terrarium"===this.encoding?er:Xg)(this.pixels[y],this.pixels[y+1],this.pixels[y+2])}static getUnpackVector(s){return tI[s]}get unpackVector(){return tI[this.encoding]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}static pack(s,u){const p=[0,0,0,0],y=I0.getUnpackVector(u);let E=Math.floor((s+y[3])/y[2]);return p[2]=E%256,E=Math.floor(E/256),p[1]=E%256,E=Math.floor(E/256),p[0]=E,p}getPixels(){return new Xu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,u,p){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=u*this.dim,E=u*this.dim+this.dim,I=p*this.dim,P=p*this.dim+this.dim;switch(u){case-1:y=E-1;break;case 1:E=y+1}switch(p){case-1:I=P-1;break;case 1:P=I+1}const O=-u*this.dim,N=-p*this.dim;for(let $=I;$<P;$++)for(let U=y;U<E;U++){const H=4*this._idx(U,$),Y=4*this._idx(U+O,$+N);this.pixels[H+0]=s.pixels[Y+0],this.pixels[H+1]=s.pixels[Y+1],this.pixels[H+2]=s.pixels[Y+2],this.pixels[H+3]=s.pixels[Y+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}vr(I0,"DEMData"),vr(UM,"DemMinMaxQuadTree",{omit:["dem"]});class yy{constructor(s,u){this.max=s,this.onRemove=u,this.reset()}reset(){for(const s in this.data)for(const u of this.data[s])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(s,u,p){const y=s.wrapped().key;void 0===this.data[y]&&(this.data[y]=[]);const E={value:u,timeout:void 0};if(void 0!==p&&(E.timeout=setTimeout(()=>{this.remove(s,E)},p)),this.data[y].push(E),this.order.push(y),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const u=this.data[s].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),u.value}getByKey(s){const u=this.data[s];return u?u[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,u){if(!this.has(s))return this;const p=s.wrapped().key,y=void 0===u?0:this.data[p].indexOf(u),E=this.data[p][y];return this.data[p].splice(y,1),E.timeout&&clearTimeout(E.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(E.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(s){const u=[];for(const p in this.data)for(const y of this.data[p])s(y.value)||u.push(y);for(const p of u)this.remove(p.value.tileID,p)}}class Ku{constructor(s,u,p){this.func=s,this.mask=u,this.range=p}}Ku.ReadOnly=!1,Ku.ReadWrite=!0,Ku.disabled=new Ku(519,Ku.ReadOnly,[0,1]);class U1{constructor(s,u,p,y,E,I){this.test=s,this.ref=u,this.mask=p,this.fail=y,this.depthFail=E,this.pass=I}}U1.disabled=new U1({func:519,mask:0},0,0,7680,7680,7680);class bu{constructor(s,u,p){this.blendFunction=s,this.blendColor=u,this.mask=p}}bu.Replace=[1,0],bu.disabled=new bu(bu.Replace,Ds.transparent,[!1,!1,!1,!1]),bu.unblended=new bu(bu.Replace,Ds.transparent,[!0,!0,!0,!0]),bu.alphaBlended=new bu([1,771],Ds.transparent,[!0,!0,!0,!0]);class nf{constructor(s,u,p){this.enable=s,this.mode=u,this.frontFace=p}}nf.disabled=new nf(!1,1029,2305),nf.backCCW=new nf(!0,1029,2305),nf.backCW=new nf(!0,1029,2304),nf.frontCW=new nf(!0,1028,2304),nf.frontCCW=new nf(!0,1028,2305);class $f extends li{constructor(s,u,p){super(),this.id=s,this._onlySymbols=p,u.on("data",y=>{"source"===y.dataType&&"metadata"===y.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===y.dataType&&"content"===y.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new yy(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new B1,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(s){this.map=s,this._minTileCacheSize=void 0===this._minTileCacheSize&&s?s._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&s?s._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const s in this._tiles){const u=this._tiles[s];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(s,u){return s.isSymbolTile=this._onlySymbols,this._source.loadTile(s,u)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){if(this._source.abortTile)return this._source.abortTile(s,()=>{})}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(s),p.prepare(this.map.style.imageManager)}}getIds(){return Ue(this._tiles).map(s=>s.tileID).sort(G1).map(s=>s.key)}getRenderableIds(s){const u=[];for(const p in this._tiles)this._isIdRenderable(+p,s)&&u.push(this._tiles[p]);return s?u.sort((p,y)=>{const E=p.tileID,I=y.tileID,P=new J(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),O=new J(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-I.overscaledZ||O.y-P.y||O.x-P.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(G1).map(p=>p.key)}hasRenderableParent(s){const u=this.findLoadedParent(s,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(s,u){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(u||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(+s,"reloading")}}_reloadTile(s,u){const p=this._tiles[s];p&&("loading"!==p.state&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,s,u)))}_tileLoaded(s,u,p,y){if(y)if(s.state="errored",404!==y.status)this._source.fire(new no(y,{tile:s}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const E=this.map.painter.terrain;this.update(this.transform,E.getScaledDemTileSize(),!0),E.resetTileLookupCache(this.id)}else this.update(this.transform);else s.timeAdded=So.now(),"expired"===p&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(u,s),"raster-dem"===this._source.type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),this._source.fire(new Lo("data",{dataType:"source",tile:s,coord:s.tileID,sourceCacheId:this.id}))}_backfillDEM(s){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const E=u[y];if(s.neighboringTiles&&s.neighboringTiles[E]){const I=this.getTileByID(E);p(s,I),p(I,s)}}function p(y,E){if(!y.dem||y.dem.borderReady)return;y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0;let I=E.tileID.canonical.x-y.tileID.canonical.x;const P=E.tileID.canonical.y-y.tileID.canonical.y,O=Math.pow(2,y.tileID.canonical.z),N=E.tileID.key;0===I&&0===P||Math.abs(P)>1||(Math.abs(I)>1&&(1===Math.abs(I+O)?I+=O:1===Math.abs(I-O)&&(I-=O)),E.dem&&y.dem&&(y.dem.backfillBorder(E.dem,I,P),y.neighboringTiles&&y.neighboringTiles[N]&&(y.neighboringTiles[N].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,u,p,y){for(const E in this._tiles){let I=this._tiles[E];if(y[E]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>p)continue;let P=I.tileID;for(;I&&I.tileID.overscaledZ>u+1;){const N=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[N.key],I&&I.hasData()&&(P=N)}let O=P;for(;O.overscaledZ>u;)if(O=O.scaledTo(O.overscaledZ-1),s[O.key]){y[P.key]=P;break}}}findLoadedParent(s,u){if(s.key in this._loadedParentTiles){const p=this._loadedParentTiles[s.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=s.overscaledZ-1;p>=u;p--){const y=s.scaledTo(p),E=this._getLoadedTile(y);if(E)return E}}_getLoadedTile(s){const u=this._tiles[s.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?s.wrapped().key:s.canonical.key)}updateCacheSize(s,u){u=u||this._source.tileSize;const p=Math.ceil(s.width/u)+1,y=Math.ceil(s.height/u)+1,E=Math.floor(p*y*5),I="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,E):E,P="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(P)}handleWrapJump(s){const u=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,u){const p={};for(const y in this._tiles){const E=this._tiles[y];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),p[E.tileID.key]=E}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(+y,this._tiles[y])}}update(s,u,p){if(this.transform=s,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;let y;this.updateCacheSize(s,u),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(P=>new vu(P.canonical.z,P.wrap,P.canonical.z,P.canonical.x,P.canonical.y)):(y=s.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(y=y.filter(P=>this._source.hasTile(P)))):y=[];const E=this._updateRetainedTiles(y);if(nI(this._source.type)&&0!==y.length){const P={},O={},N=Object.keys(E);for(const U of N){const H=E[U],Y=this._tiles[U];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=So.now())continue;const se=this.findLoadedParent(H,Math.max(H.overscaledZ-$f.maxOverzooming,this._source.minzoom));se&&(this._addTile(se.tileID),P[se.tileID.key]=se.tileID),O[U]=H}const $=y[y.length-1].overscaledZ;for(const U in this._tiles){const H=this._tiles[U];if(E[U]||!H.hasData())continue;let Y=H.tileID;for(;Y.overscaledZ>$;){Y=Y.scaledTo(Y.overscaledZ-1);const se=this._tiles[Y.key];if(se&&se.hasData()&&O[Y.key]){E[U]=H.tileID;break}}}for(const U in P)E[U]||(this._coveredTiles[U]=!0,E[U]=P[U])}for(const P in E)this._tiles[P].clearFadeHold();const I=function(P,O){const N=[];for(const $ in P)$ in O||N.push($);return N}(this._tiles,E);for(const P of I){const O=this._tiles[P];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(+P)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(+s)}_updateRetainedTiles(s){const u={};if(0===s.length)return u;const p={},y=s.reduce((N,$)=>Math.min(N,$.overscaledZ),1/0),E=s[0].overscaledZ,I=Math.max(E-$f.maxOverzooming,this._source.minzoom),P=Math.max(E+$f.maxUnderzooming,this._source.minzoom),O={};for(const N of s){const $=this._addTile(N);u[N.key]=N,$.hasData()||y<this._source.maxzoom&&(O[N.key]=N)}this._retainLoadedChildren(O,y,P,u);for(const N of s){let $=this._tiles[N.key];if($.hasData())continue;if(N.canonical.z>=this._source.maxzoom){const H=N.children(this._source.maxzoom)[0],Y=this.getTile(H);if(Y&&Y.hasData()){u[H.key]=H;continue}}else{const H=N.children(this._source.maxzoom);if(u[H[0].key]&&u[H[1].key]&&u[H[2].key]&&u[H[3].key])continue}let U=$.wasRequested();for(let H=N.overscaledZ-1;H>=I;--H){const Y=N.scaledTo(H);if(p[Y.key]||(p[Y.key]=!0,$=this.getTile(Y),!$&&U&&($=this._addTile(Y)),$&&(u[Y.key]=Y,U=$.wasRequested(),$.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const u=[];let p,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}u.push(y.key);const E=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(E),p)break;y=E}for(const E of u)this._loadedParentTiles[E]=p}}_addTile(s){let u=this._tiles[s.key];if(u)return u;u=this._cache.getAndRemove(s),u&&(this._setTileReloadTimer(s.key,u),u.tileID=s,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,u)));const p=!!u;if(!p){const y=this.map?this.map.painter:null;u=new S0(s,this._source.tileSize*s.overscaleFactor(),this.transform.tileZoom,y,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,s.key,u.state))}return u?(u.uses++,this._tiles[s.key]=u,p||this._source.fire(new Lo("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(s,u){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const p=u.getExpiryTimeout();p&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},p))}_removeTile(s){const u=this._tiles[s];u&&(u.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(+s);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(s,u,p){const y=[],E=this.transform;if(!E)return y;const I="globe"===E.projection.name,P=Xd(E.center.lng);for(const O in this._tiles){const N=this._tiles[O];if(p&&N.clearQueryDebugViz(),N.holdingForFade())continue;let $;if(I){const U=N.tileID.canonical;if(0===U.z){const H=[Math.abs(K(P,...by(U,-1))-P),Math.abs(K(P,...by(U,1))-P)];$=[0,2*H.indexOf(Math.min(...H))-1]}else{const H=[Math.abs(K(P,...by(U,-1))-P),Math.abs(K(P,...by(U,0))-P),Math.abs(K(P,...by(U,1))-P)];$=[H.indexOf(Math.min(...H))-1]}}else $=[0];for(const U of $){const H=s.containsTile(N,E,u,U);H&&y.push(H)}}return y}getVisibleCoordinates(s){const u=this.getRenderableIds(s).map(p=>this._tiles[p].tileID);for(const p of u)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(nI(this._source.type))for(const s in this._tiles){const u=this._tiles[s];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=So.now())return!0}return!1}setFeatureState(s,u,p){this._state.updateState(s=s||"_geojsonTileLayer",u,p)}removeFeatureState(s,u,p){this._state.removeFeatureState(s=s||"_geojsonTileLayer",u,p)}getFeatureState(s,u){return this._state.getState(s=s||"_geojsonTileLayer",u)}setDependencies(s,u,p){const y=this._tiles[s];y&&y.setDependencies(u,p)}reloadTilesForDependencies(s,u){for(const p in this._tiles)this._tiles[p].hasDependency(s,u)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(s,u))}_preloadTiles(s,u){if(!this._sourceLoaded){const P=()=>{this._sourceLoaded&&(this._source.off("data",P),this._preloadTiles(s,u))};return void this._source.on("data",P)}const p=new Map,y=Array.isArray(s)?s:[s],E=this.map.painter.terrain,I=this.usedForTerrain&&E?E.getScaledDemTileSize():this._source.tileSize;for(const P of y){const O=P.coveringTiles({tileSize:I,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const N of O)p.set(N.key,N);this.usedForTerrain&&P.updateElevation(!1)}Je(Array.from(p.values()),(P,O)=>{const N=new S0(P,this._source.tileSize*P.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(N,$=>{"raster-dem"===this._source.type&&N.dem&&this._backfillDEM(N),O($,N)})},u)}}function G1(l,s){const u=Math.abs(2*l.wrap)-+(l.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return l.overscaledZ-s.overscaledZ||p-u||s.canonical.y-l.canonical.y||s.canonical.x-l.canonical.x}function nI(l){return"raster"===l||"image"===l||"video"===l||"custom"===l}function by(l,s){const u=1<<l.z;return[l.x/u+s,(l.x+1)/u+s]}$f.maxOverzooming=10,$f.maxUnderzooming=3;class xy{constructor(s,u,p){this._demTile=s,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(s,u,p){const y=p||s.findDEMTileFor(u);if(!y||!y.dem)return;const E=y.dem,I=y.tileID,P=1<<u.canonical.z-I.canonical.z;return new xy(y,y.tileSize/Ci/P,[(u.canonical.x/P-I.canonical.x)*E.dim,(u.canonical.y/P-I.canonical.y)*E.dim])}tileCoordToPixel(s,u){const p=u*this._scale+this._offset[1],y=Math.floor(s*this._scale+this._offset[0]),E=Math.floor(p);return new J(y,E)}getElevationAt(s,u,p,y){const E=s*this._scale+this._offset[0],I=u*this._scale+this._offset[1],P=Math.floor(E),O=Math.floor(I),N=this._dem;return y=!!y,p?lo(lo(N.get(P,O,y),N.get(P,O+1,y),I-O),lo(N.get(P+1,O,y),N.get(P+1,O+1,y),I-O),E-P):N.get(P,O,y)}getElevationAtPixel(s,u,p){return this._dem.get(s,u,!!p)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Zd(1,s)*this._dem.stride}}class rI{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new fi(Ci,16,0),this.featureIndexArray=new um,this.promoteId=u}insert(s,u,p,y,E,I=0){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,E,I);const O=this.grid;for(let N=0;N<u.length;N++){const $=u[N],U=[1/0,1/0,-1/0,-1/0];for(let H=0;H<$.length;H++){const Y=$[H];U[0]=Math.min(U[0],Y.x),U[1]=Math.min(U[1],Y.y),U[2]=Math.max(U[2],Y.x),U[3]=Math.max(U[3],Y.y)}U[0]<Ci&&U[1]<Ci&&U[2]>=0&&U[3]>=0&&O.insert(P,U[0],U[1],U[2],U[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new o1(new l0(this.rawTileData)).layers,this.sourceLayerCoder=new F1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,u,p,y){this.loadVTLayers();const E=s.params||{},I=gh(E.filter),P=s.tileResult,O=s.transform,N=P.bufferedTilespaceBounds,$=this.grid.query(N.min.x,N.min.y,N.max.x,N.max.y,(se,be,Ge,mt)=>iS(P.bufferedTilespaceGeometry,se,be,Ge,mt));$.sort(jM);let U=null;O.elevation&&$.length>0&&(U=xy.create(O.elevation,this.tileID));const H={};let Y;for(let se=0;se<$.length;se++){const be=$[se];if(be===Y)continue;Y=be;const Ge=this.featureIndexArray.get(be);let mt=null;this.loadMatchingFeature(H,Ge,I,E.layers,E.availableImages,u,p,y,(Ot,pt,At,zt=0)=>(mt||(mt=Yd(Ot,this.tileID.canonical,s.tileTransform)),pt.queryIntersectsFeature(P,Ot,At,mt,this.z,s.transform,s.pixelPosMatrix,U,zt)))}return H}loadMatchingFeature(s,u,p,y,E,I,P,O,N){const{featureIndex:$,bucketIndex:U,sourceLayerIndex:H,layoutVertexArrayOffset:Y}=u,se=this.bucketLayerIDs[U];if(y&&!function(Ot,pt){for(let At=0;At<Ot.length;At++)if(pt.indexOf(Ot[At])>=0)return!0;return!1}(y,se))return;const be=this.sourceLayerCoder.decode(H),Ge=this.vtLayers[be].feature($);if(p.needGeometry){const Ot=Kd(Ge,!0);if(!p.filter(new V(this.tileID.overscaledZ),Ot,this.tileID.canonical))return}else if(!p.filter(new V(this.tileID.overscaledZ),Ge))return;const mt=this.getId(Ge,be);for(let Ot=0;Ot<se.length;Ot++){const pt=se[Ot];if(y&&y.indexOf(pt)<0)continue;const At=I[pt];if(!At)continue;let zt={};void 0!==mt&&O&&(zt=O.getState(At.sourceLayer||"_geojsonTileLayer",mt));const Vt=le({},P[pt]);Vt.paint=H1(Vt.paint,At.paint,Ge,zt,E),Vt.layout=H1(Vt.layout,At.layout,Ge,zt,E);const En=!N||N(Ge,At,zt,Y);if(!En)continue;const fn=new YS(Ge,this.z,this.x,this.y,mt);fn.layer=Vt;let zn=s[pt];void 0===zn&&(zn=s[pt]=[]),zn.push({featureIndex:$,feature:fn,intersectionZ:En})}}lookupSymbolFeatures(s,u,p,y,E,I,P,O){const N={};this.loadVTLayers();const $=gh(E);for(const U of s)this.loadMatchingFeature(N,{bucketIndex:p,sourceLayerIndex:y,featureIndex:U,layoutVertexArrayOffset:0},$,I,P,O,u);return N}loadFeature(s){const{featureIndex:u,sourceLayerIndex:p}=s;this.loadVTLayers();const y=this.sourceLayerCoder.decode(p),E=this.vtFeatures[y];if(E[u])return E[u];const I=this.vtLayers[y].feature(u);return E[u]=I,I}hasLayer(s){for(const u of this.bucketLayerIDs)for(const p of u)if(s===p)return!0;return!1}getId(s,u){let p=s.id;if(this.promoteId){const y="string"==typeof this.promoteId?this.promoteId:this.promoteId[u];null!=y&&(p=s.properties[y]),"boolean"==typeof p&&(p=Number(p))}return p}}function H1(l,s,u,p,y){return jt(l,(E,I)=>{const P=s instanceof ft?s.get(I):null;return P&&P.evaluate?P.evaluate(u,p,y):P})}function jM(l,s){return s-l}vr(rI,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class iI{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.image=new bh({width:s,height:u}),this.positions={},this.uploaded=!1}getDash(s,u){const p=this.getKey(s,u);return this.positions[p]}trim(){const s=this.width,u=this.height=Xt(this.nextRow);this.image.resize({width:s,height:u})}getKey(s,u){return s.join(",")+u}getDashRanges(s,u,p){const y=[];let E=s.length%2==1?-s[s.length-1]*p:0,I=s[0]*p,P=!0;y.push({left:E,right:I,isDash:P,zeroLength:0===s[0]});let O=s[0];for(let N=1;N<s.length;N++){P=!P;const $=s[N];E=O*p,O+=$,I=O*p,y.push({left:E,right:I,isDash:P,zeroLength:0===$})}return y}addRoundDash(s,u,p){const y=u/2;for(let E=-p;E<=p;E++){const I=this.width*(this.nextRow+p+E);let P=0,O=s[P];for(let N=0;N<this.width;N++){N/O.right>1&&(O=s[++P]);const $=Math.abs(N-O.left),U=Math.abs(N-O.right),H=Math.min($,U);let Y;const se=E/p*(y+1);if(O.isDash){const be=y-Math.abs(se);Y=Math.sqrt(H*H+be*be)}else Y=y-Math.sqrt(H*H+se*se);this.image.data[I+N]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(s,u){for(let O=s.length-1;O>=0;--O){const N=s[O],$=s[O+1];N.zeroLength?s.splice(O,1):$&&$.isDash===N.isDash&&($.left=N.left,s.splice(O,1))}const p=s[0],y=s[s.length-1];p.isDash===y.isDash&&(p.left=y.left-this.width,y.right=p.right+this.width);const E=this.width*this.nextRow;let I=0,P=s[I];for(let O=0;O<this.width;O++){O/P.right>1&&(P=s[++I]);const N=Math.abs(O-P.left),$=Math.abs(O-P.right),U=Math.min(N,$);this.image.data[E+O]=Math.max(0,Math.min(255,(P.isDash?U:-U)+u+128))}}addDash(s,u){const p=this.getKey(s,u);if(this.positions[p])return this.positions[p];const y="round"===u,E=y?7:0,I=2*E+1;if(this.nextRow+I>this.height)return un("LineAtlas out of space"),null;0===s.length&&s.push(1);let P=0;for(let $=0;$<s.length;$++)s[$]<0&&(un("Negative value is found in line dasharray, replacing values with 0"),s[$]=0),P+=s[$];if(0!==P){const $=this.width/P,U=this.getDashRanges(s,this.width,$);y?this.addRoundDash(U,$,E):this.addRegularDash(U,"square"===u?.5*$:0)}const O=this.nextRow+E;this.nextRow+=I;const N={tl:[O,E],br:[P,0]};return this.positions[p]=N,N}}vr(iI,"LineAtlas");const GM=1*Ua;class q1{constructor(s){const u={},p=[];for(const P in s){const O=s[P],N=u[P]={};for(const $ in O.glyphs){const U=O.glyphs[+$];if(!U||0===U.bitmap.width||0===U.bitmap.height)continue;const H=U.metrics.localGlyph?GM:1,Y={x:0,y:0,w:U.bitmap.width+2*H,h:U.bitmap.height+2*H};p.push(Y),N[$]=Y}}const{w:y,h:E}=_1(p),I=new bh({width:y||1,height:E||1});for(const P in s){const O=s[P];for(const N in O.glyphs){const $=O.glyphs[+N];if(!$||0===$.bitmap.width||0===$.bitmap.height)continue;const U=u[P][N],H=$.metrics.localGlyph?GM:1;bh.copy($.bitmap,I,{x:0,y:0},{x:U.x+H,y:U.y+H},$.bitmap)}}this.image=I,this.positions=u}}vr(q1,"GlyphAtlas");class oI{constructor(s){this.tileID=new vu(s.tileID.overscaledZ,s.tileID.wrap,s.tileID.canonical.z,s.tileID.canonical.x,s.tileID.canonical.y),this.tileZoom=s.tileZoom,this.uid=s.uid,this.zoom=s.zoom,this.canonical=s.tileID.canonical,this.pixelRatio=s.pixelRatio,this.tileSize=s.tileSize,this.source=s.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=s.showCollisionBoxes,this.collectResourceTiming=!!s.collectResourceTiming,this.returnDependencies=!!s.returnDependencies,this.promoteId=s.promoteId,this.enableTerrain=!!s.enableTerrain,this.isSymbolTile=s.isSymbolTile,this.tileTransform=Pm(s.tileID.canonical,s.projection),this.projection=s.projection}parse(s,u,p,y,E){this.status="parsing",this.data=s,this.collisionBoxArray=new Ps;const I=new F1(Object.keys(s.layers).sort()),P=new rI(this.tileID,this.promoteId);P.bucketLayerIDs=[];const O={},N=new iI(256,256),$={featureIndex:P,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:N,availableImages:p},U=u.familiesBySource[this.source];for(const zt in U){const Vt=s.layers[zt];if(!Vt)continue;let En=!1,fn=!1;for(const In of U[zt])"symbol"===In[0].type?En=!0:fn=!0;if(!0===this.isSymbolTile&&!En||!1===this.isSymbolTile&&!fn)continue;1===Vt.version&&un(`Vector tile source "${this.source}" layer "${zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const zn=I.encode(zt),lr=[];for(let In=0;In<Vt.length;In++){const Hn=Vt.feature(In),Wn=P.getId(Hn,zt);lr.push({feature:Hn,id:Wn,index:In,sourceLayerIndex:zn})}for(const In of U[zt]){const Hn=In[0];void 0!==this.isSymbolTile&&"symbol"===Hn.type!==this.isSymbolTile||Hn.minzoom&&this.zoom<Math.floor(Hn.minzoom)||Hn.maxzoom&&this.zoom>=Hn.maxzoom||"none"!==Hn.visibility&&($s(In,this.zoom,p),(O[Hn.id]=Hn.createBucket({index:P.bucketLayerIDs.length,layers:In,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:p})).populate(lr,$,this.tileID.canonical,this.tileTransform),P.bucketLayerIDs.push(In.map(Wn=>Wn.id)))}}let H,Y,se,be;N.trim();const Ge={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},mt=()=>{if(H)return E(H);if(Y&&se&&be){const zt=new q1(Y),Vt=new NS(se,be);for(const En in O){const fn=O[En];fn instanceof ef?($s(fn.layers,this.zoom,p),RM(fn,Y,zt.positions,se,Vt.iconPositions,this.showCollisionBoxes,p,this.tileID.canonical,this.tileZoom,this.projection)):fn.hasPattern&&(fn instanceof ty||fn instanceof Rg||fn instanceof Q_)&&($s(fn.layers,this.zoom,p),fn.addFeatures($,this.tileID.canonical,Vt.patternPositions,p,this.tileTransform))}this.status="done",E(null,{buckets:Ue(O).filter(En=>!En.isEmpty()),featureIndex:P,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zt.image,lineAtlas:N,imageAtlas:Vt,glyphMap:this.returnDependencies?Y:null,iconMap:this.returnDependencies?se:null,glyphPositions:this.returnDependencies?zt.positions:null})}},Ot=jt($.glyphDependencies,zt=>Object.keys(zt).map(Number));Object.keys(Ot).length?y.send("getGlyphs",{uid:this.uid,stacks:Ot},(zt,Vt)=>{H||(H=zt,Y=Vt,mt())},void 0,!1,Ge):Y={};const pt=Object.keys($.iconDependencies);pt.length?y.send("getImages",{icons:pt,source:this.source,tileID:this.tileID,type:"icons"},(zt,Vt)=>{H||(H=zt,se=Vt,mt())},void 0,!1,Ge):se={};const At=Object.keys($.patternDependencies);At.length?y.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"patterns"},(zt,Vt)=>{H||(H=zt,be=Vt,mt())},void 0,!1,Ge):be={},mt()}}function $s(l,s,u){const p=new V(s);for(const y of l)y.recalculate(p,u)}class W1{constructor(s){this.entries={},this.scheduler=s}request(s,u,p,y){const E=this.entries[s]=this.entries[s]||{callbacks:[]};if(E.result){const[I,P]=E.result;return this.scheduler?this.scheduler.add(()=>{y(I,P)},u):y(I,P),()=>{}}return E.callbacks.push(y),E.cancel||(E.cancel=p((I,P)=>{E.result=[I,P];for(const O of E.callbacks)this.scheduler?this.scheduler.add(()=>{O(I,P)},u):O(I,P);setTimeout(()=>delete this.entries[s],3e3)})),()=>{E.result||(E.callbacks=E.callbacks.filter(I=>I!==y),E.callbacks.length||(E.cancel(),delete this.entries[s]))}}}function HM(l,s,u){const p=JSON.stringify(l.request);return l.data&&(this.deduped.entries[p]={result:[null,l.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},y=>{const E=zi(l.request,(I,P,O,N)=>{I?y(I):P&&y(null,{vectorTile:u?void 0:new o1(new l0(P)),rawData:P,cacheControl:O,expires:N})});return()=>{E.cancel(),y()}},s)}const T0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qu{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(s,0,2);if(219!==u)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(1!==y)throw new Error(`Got v${y} data when expected v1.`);const E=T0[15&p];if(!E)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(s,2,1),[P]=new Uint32Array(s,4,1);return new Qu(P,I,E,s)}constructor(s,u=64,p=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const E=T0.indexOf(this.ArrayType),I=2*s*this.ArrayType.BYTES_PER_ELEMENT,P=s*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-P%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+P+O,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+I+P+O),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+P+O,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=s,this.coords[this._pos++]=u,p}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return wy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:I,nodeSize:P}=this,O=[0,E.length-1,0],N=[];for(;O.length;){const $=O.pop()||0,U=O.pop()||0,H=O.pop()||0;if(U-H<=P){for(let Ge=H;Ge<=U;Ge++){const mt=I[2*Ge],Ot=I[2*Ge+1];mt>=s&&mt<=p&&Ot>=u&&Ot<=y&&N.push(E[Ge])}continue}const Y=H+U>>1,se=I[2*Y],be=I[2*Y+1];se>=s&&se<=p&&be>=u&&be<=y&&N.push(E[Y]),(0===$?s<=se:u<=be)&&(O.push(H),O.push(Y-1),O.push(1-$)),(0===$?p>=se:y>=be)&&(O.push(Y+1),O.push(U),O.push(1-$))}return N}within(s,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:E,nodeSize:I}=this,P=[0,y.length-1,0],O=[],N=p*p;for(;P.length;){const $=P.pop()||0,U=P.pop()||0,H=P.pop()||0;if(U-H<=I){for(let Ge=H;Ge<=U;Ge++)A0(E[2*Ge],E[2*Ge+1],s,u)<=N&&O.push(y[Ge]);continue}const Y=H+U>>1,se=E[2*Y],be=E[2*Y+1];A0(se,be,s,u)<=N&&O.push(y[Y]),(0===$?s-p<=se:u-p<=be)&&(P.push(H),P.push(Y-1),P.push(1-$)),(0===$?s+p>=se:u+p>=be)&&(P.push(Y+1),P.push(U),P.push(1-$))}return O}}function wy(l,s,u,p,y,E){if(y-p<=u)return;const I=p+y>>1;sI(l,s,I,p,y,E),wy(l,s,u,p,I-1,1-E),wy(l,s,u,I+1,y,1-E)}function sI(l,s,u,p,y,E){for(;y>p;){if(y-p>600){const N=y-p+1,$=u-p+1,U=Math.log(N),H=.5*Math.exp(2*U/3),Y=.5*Math.sqrt(U*H*(N-H)/N)*($-N/2<0?-1:1);sI(l,s,u,Math.max(p,Math.floor(u-$*H/N+Y)),Math.min(y,Math.floor(u+(N-$)*H/N+Y)),E)}const I=s[2*u+E];let P=p,O=y;for(D0(l,s,p,u),s[2*y+E]>I&&D0(l,s,p,y);P<O;){for(D0(l,s,P,O),P++,O--;s[2*P+E]<I;)P++;for(;s[2*O+E]>I;)O--}s[2*p+E]===I?D0(l,s,p,O):(O++,D0(l,s,O,y)),O<=u&&(p=O+1),u<=O&&(y=O-1)}}function D0(l,s,u,p){X1(l,u,p),X1(s,2*u,2*p),X1(s,2*u+1,2*p+1)}function X1(l,s,u){const p=l[s];l[s]=l[u],l[u]=p}function A0(l,s,u,p){const y=l-u,E=s-p;return y*y+E*E}g.ARRAY_TYPE=Gu,g.AUTH_ERR_MSG=It,g.Aabb=Pc,g.Actor=class{constructor(l,s,u){this.target=l,this.parent=s,this.mapId=u,this.callbacks={},this.cancelCallbacks={},Pn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=jn()?l:me,this.scheduler=new $M}send(l,s,u,p,y=!1,E){const I=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=E,this.callbacks[I]=u);const P=Ae(this.globalScope)?void 0:[];return this.target.postMessage({id:I,type:l,hasCallback:!!u,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:qc(s,P)},P),{cancel:()=>{u&&delete this.callbacks[I],this.target.postMessage({id:I,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(l){const s=l.data,u=s.id;if(u&&(!s.targetMapId||this.mapId===s.targetMapId))if("<cancel>"===s.type){const p=this.cancelCallbacks[u];delete this.cancelCallbacks[u],p&&p.cancel()}else if(s.mustQueue||jn()){const p=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,s),p&&p.metadata||{type:"message"})}else this.processTask(u,s)}processTask(l,s){if("<response>"===s.type){const u=this.callbacks[l];delete this.callbacks[l],u&&(s.error?u(jh(s.error)):u(null,jh(s.data)))}else{const u=Ae(this.globalScope)?void 0:[],p=s.hasCallback?(E,I)=>{delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:E?qc(E):null,data:qc(I,u)},u)}:E=>{},y=jh(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,y,p);else if(this.parent.getWorkerSource){const E=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,E[0],y.source)[E[1]](y,p)}else p(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},g.CanonicalTileID=n0,g.Color=Ds,g.ColorMode=bu,g.CullFaceMode=nf,g.DEMData=I0,g.DataConstantProperty=ge,g.DedupedRequest=W1,g.DepthMode=Ku,g.EXTENT=Ci,g.Elevation=class{isDataAvailableAtPoint(l){const s=this._source();if(this.isUsingMockSource()||!s||l.y<0||l.y>1)return!1;const u=s.getSource().maxzoom,p=1<<u,y=Math.floor(l.x),E=Math.floor((l.x-y)*p),I=Math.floor(l.y*p),P=this.findDEMTileFor(new vu(u,y,u,E,I));return!(!P||!P.dem)}getAtPointOrZero(l,s=0){return this.getAtPoint(l,s)||0}getAtPoint(l,s,u=!0){if(this.isUsingMockSource())return null;null==s&&(s=null);const p=this._source();if(!p||l.y<0||l.y>1)return s;const y=p.getSource().maxzoom,E=1<<y,I=Math.floor(l.x),P=l.x-I,O=new vu(y,I,y,Math.floor(P*E),Math.floor(l.y*E)),N=this.findDEMTileFor(O);if(!N||!N.dem)return s;const $=N.dem,U=1<<N.tileID.canonical.z,H=(P*U-N.tileID.canonical.x)*$.dim,Y=(l.y*U-N.tileID.canonical.y)*$.dim,se=Math.floor(H),be=Math.floor(Y);return(u?this.exaggeration():1)*lo(lo($.get(se,be),$.get(se,be+1),Y-be),lo($.get(se+1,be),$.get(se+1,be+1),Y-be),H-se)}getAtTileOffset(l,s,u){const p=1<<l.canonical.z;return this.getAtPointOrZero(new Tg(l.wrap+(l.canonical.x+s/Ci)/p,(l.canonical.y+u/Ci)/p))}getAtTileOffsetFunc(l,s,u,p){return y=>{const E=this.getAtTileOffset(l,y.x,y.y),I=p.upVector(l.canonical,y.x,y.y);return Hu(I,I,E*p.upVectorScale(l.canonical,s,u).metersToTile),I}}getForTilePoints(l,s,u,p){if(this.isUsingMockSource())return!1;const y=xy.create(this,l,p);return!!y&&(s.forEach(E=>{E[2]=this.exaggeration()*y.getElevationAt(E[0],E[1],u)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(l);if(!s||!s.dem)return null;const u=s.dem.tree,p=s.tileID,y=1<<l.canonical.z-p.canonical.z;let E=l.canonical.x/y-p.canonical.x,I=l.canonical.y/y-p.canonical.y,P=0;for(let O=0;O<l.canonical.z-p.canonical.z&&!u.leaves[P];O++){E*=2,I*=2;const N=2*Math.floor(I)+Math.floor(E);P=u.childOffsets[P]+N,E%=1,I%=1}return{min:this.exaggeration()*u.minimums[P],max:this.exaggeration()*u.maximums[P]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,s,u){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},g.ErrorEvent=no,g.EvaluationParameters=V,g.Event=Lo,g.Evented=li,g.FillExtrusionBucket=Q_,g.Frustum=mm,g.FrustumCorners=Rx,g.GLOBE_RADIUS=bd,g.GLOBE_SCALE_MATCH_LATITUDE=45,g.GLOBE_ZOOM_THRESHOLD_MAX=J2,g.GLOBE_ZOOM_THRESHOLD_MIN=wg,g.GlobeSharedBuffers=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const l of this._wireframeSegments)l.destroy()}}_fillGridMeshWithLods(l,s){const u=new ur,p=new hi,y=[],E=l+1+2,I=s[0]+1,P=s[0]+1+(1+s.length),O=(N,$,U)=>{let H=N===E-1?N-2:0===N?N:N-1;return H+=U?24575:0,[H,$]};for(let N=0;N<E;++N)u.emplaceBack(...O(N,0,!0));for(let N=0;N<I;++N)for(let $=0;$<E;++$)u.emplaceBack(...O($,N,(0===$||$===E-1)&&!0));for(let N=0;N<s.length;++N){const $=s[N];for(let U=0;U<E;++U)u.emplaceBack(...O(U,$,!0))}for(let N=0;N<s.length;++N){const $=p.length,U=s[N]+1+2,H=new hi;for(let be=0;be<U-1;be++){const Ge=be===U-2,mt=Ge?E*(P-s.length+N-be):E;for(let Ot=0;Ot<E-1;Ot++){const pt=be*E+Ot;0===be||Ge||0===Ot||Ot===E-2?(H.emplaceBack(pt+1,pt,pt+mt),H.emplaceBack(pt+mt,pt+mt+1,pt+1)):(p.emplaceBack(pt+1,pt,pt+mt),p.emplaceBack(pt+mt,pt+mt+1,pt+1))}}const Y=Qs.simpleSegment(0,$,u.length,p.length-$);for(let be=0;be<H.uint16.length;be+=3)p.emplaceBack(H.uint16[be],H.uint16[be+1],H.uint16[be+2]);const se=Qs.simpleSegment(0,$,u.length,p.length-$);y.push({withoutSkirts:Y,withSkirts:se})}return{vertices:u,indices:p,segments:y}}_createGrid(l){const s=this._fillGridMeshWithLods(64,qu);this._gridSegments=s.segments,this._gridBuffer=l.createVertexBuffer(s.vertices,fm.members),this._gridIndexBuffer=l.createIndexBuffer(s.indices,!0)}_createPoles(l){const s=new hi;for(let y=0;y<=64;y++)s.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=l.createIndexBuffer(s,!0);const u=new Ms,p=new Ms;this._poleSegments=[];for(let y=0,E=0;y<wg;y++){const I=360/(1<<y);u.emplaceBack(0,-bd,0,.5,0),p.emplaceBack(0,-bd,0,.5,1);for(let P=0;P<=64;P++){const O=P/64,N=lo(0,I,O),[$,U,H]=Eg(Sg,Ig,N,bd);u.emplaceBack($,U,H,O,0),p.emplaceBack($,U,H,O,1)}this._poleSegments.push(Qs.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(u,K2,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(p,K2,!1)}getGridBuffers(l,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}getWirefameBuffers(l,s){if(!this._wireframeSegments){const u=new _a,p=64,y=p+1+2,E=1;this._wireframeSegments=[];for(let I=0,P=0;I<qu.length;I++){const O=qu[I];for(let $=E;$<O+E;$++)for(let U=E;U<p+E;U++){const H=$*y+U;u.emplaceBack(H,H+1),u.emplaceBack(H,H+y),u.emplaceBack(H,H+y+1)}const N=O*p*3;this._wireframeSegments.push(Qs.simpleSegment(0,P,(O+1)*y,N)),P+=N}this._wireframeIndexBuffer=l.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[s]]}},g.GlyphManager=Ug,g.ImagePosition=y1,g.KDBush=Qu,g.LivePerformanceUtils=ir,g.LngLat=jo,g.LngLatBounds=Mf,g.LocalGlyphMode=S1,g.MAX_MERCATOR_LATITUDE=Yc,g.MercatorCoordinate=Tg,g.ONE_EM=Ql,g.OverscaledTileID=vu,g.PerformanceMarkers=Yn,g.Point=J,g.Properties=St,g.RGBAImage=Xu,g.Ray=pm,g.RequestManager=class{constructor(l,s,u){this._transformRequestFn=l,this._customAccessToken=s,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const l=function(){let s="";for(let u=0;u<10;u++)s+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,s].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,s){return this._transformRequestFn&&this._transformRequestFn(l,s)||{url:l}}normalizeStyleURL(l,s){if(!ct(l))return l;const u=nr(l);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||s)}normalizeGlyphsURL(l,s){if(!ct(l))return l;const u=nr(l);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||s)}normalizeSourceURL(l,s,u,p){if(!ct(l))return l;const y=nr(l);return y.path=`/v4/${y.authority}.json`,y.params.push("secure"),u&&y.params.push(`language=${u}`),p&&y.params.push(`worldview=${p}`),this._makeAPIURL(y,this._customAccessToken||s)}normalizeSpriteURL(l,s,u,p){const y=nr(l);return ct(l)?(y.path=`/styles/v1${y.path}/sprite${s}${u}`,this._makeAPIURL(y,this._customAccessToken||p)):(y.path+=`${s}${u}`,Xn(y))}normalizeTileURL(l,s,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!ct(l))return l;const p=nr(l);p.path=p.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${s||u&&"raster"!==p.authority&&512===u?"@2x":""}${ht.supported?".webp":"$1"}`),"raster"===p.authority?p.path=`/${We.RASTER_URL_PREFIX}${p.path}`:(p.path=p.path.replace(/^.+\/v4\//,"/"),p.path=`/${We.TILE_URL_VERSION}${p.path}`);const y=this._customAccessToken||function(E){for(const I of E){const P=I.match(/^access_token=(.*)$/);if(P)return P[1]}return null}(p.params)||We.ACCESS_TOKEN;return We.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&p.params.push(`sku=${this._skuToken}`),this._makeAPIURL(p,y)}canonicalizeTileURL(l,s){const u=nr(l);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return l;let p="mapbox://";u.path.match(/^\/raster\/v1\//)?p+=`raster/${u.path.replace(`/${We.RASTER_URL_PREFIX}/`,"")}`:p+=`tiles/${u.path.replace(`/${We.TILE_URL_VERSION}/`,"")}`;let y=u.params;return s&&(y=y.filter(E=>!E.match(/^access_token=/))),y.length&&(p+=`?${y.join("&")}`),p}canonicalizeTileset(l,s){const u=!!s&&ct(s),p=[];for(const y of l.tiles||[])nn(y)?p.push(this.canonicalizeTileURL(y,u)):p.push(y);return p}_makeAPIURL(l,s){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",p=nr(We.API_URL);if(l.protocol=p.protocol,l.authority=p.authority,"http"===l.protocol){const y=l.params.indexOf("secure");y>=0&&l.params.splice(y,1)}if("/"!==p.path&&(l.path=`${p.path}${l.path}`),!We.REQUIRE_ACCESS_TOKEN)return Xn(l);if(s=s||We.ACCESS_TOKEN,!this._silenceAuthErrors){if(!s)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if("s"===s[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return l.params=l.params.filter(y=>-1===y.indexOf("access_token")),l.params.push(`access_token=${s||""}`),Xn(l)}},g.ResourceType=Ei,g.SegmentVector=Qs,g.SourceCache=$f,g.StencilMode=U1,g.StructArrayLayout1ui2=Ru,g.StructArrayLayout2f1f2i16=ei,g.StructArrayLayout2i4=ur,g.StructArrayLayout2ui4=_a,g.StructArrayLayout3f12=uo,g.StructArrayLayout3ui6=hi,g.StructArrayLayout4i8=Gn,g.StructArrayLayout5f20=Ms,g.Texture=Om,g.Tile=S0,g.Transitionable=fe,g.Uniform1f=Df,g.Uniform1i=class extends Hd{constructor(l){super(l),this.current=0}set(l,s,u){this.fetchUniformLocation(l,s)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},g.Uniform2f=class extends Hd{constructor(l){super(l),this.current=[0,0]}set(l,s,u){this.fetchUniformLocation(l,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},g.Uniform3f=class extends Hd{constructor(l){super(l),this.current=[0,0,0]}set(l,s,u){this.fetchUniformLocation(l,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},g.Uniform4f=VC,g.UniformColor=UC,g.UniformMatrix2f=class extends Hd{constructor(l){super(l),this.current=H2}set(l,s,u){if(this.fetchUniformLocation(l,s))for(let p=0;p<4;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}},g.UniformMatrix3f=class extends Hd{constructor(l){super(l),this.current=G2}set(l,s,u){if(this.fetchUniformLocation(l,s))for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}},g.UniformMatrix4f=class extends Hd{constructor(l){super(l),this.current=j2}set(l,s,u){if(this.fetchUniformLocation(l,s)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let p=1;p<16;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},g.UnwrappedTileID=bS,g.ValidationError=Sr,g.VectorTileFeature=Y_,g.VectorTileWorkerSource=class extends li{constructor(l,s,u,p,y){super(),this.actor=l,this.layerIndex=s,this.availableImages=u,this.loadVectorData=y||HM,this.loading={},this.loaded={},this.deduped=new W1(l.scheduler),this.isSpriteLoaded=p,this.scheduler=l.scheduler}loadTile(l,s){const u=l.uid,p=l&&l.request,y=p&&p.collectResourceTiming,E=this.loading[u]=new oI(l);E.abort=this.loadVectorData(l,(I,P)=>{const O=!this.loading[u];if(delete this.loading[u],O||I||!P)return E.status="done",O||(this.loaded[u]=E),s(I);const N=P.rawData,$={};P.expires&&($.expires=P.expires),P.cacheControl&&($.cacheControl=P.cacheControl),E.vectorTile=P.vectorTile||new o1(new l0(N));const U=()=>{E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,(H,Y)=>{if(H||!Y)return s(H);const se={};if(y){const be=yi(p);be.length>0&&(se.resourceTiming=JSON.parse(JSON.stringify(be)))}s(null,le({rawTileData:N.slice(0)},Y,$,se))})};this.isSpriteLoaded?U():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(U,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom}):U()}),this.loaded=this.loaded||{},this.loaded[u]=E})}reloadTile(l,s){const u=this.loaded,p=l.uid,y=this;if(u&&u[p]){const E=u[p];E.showCollisionBoxes=l.showCollisionBoxes,E.enableTerrain=!!l.enableTerrain,E.projection=l.projection,E.tileTransform=Pm(l.tileID.canonical,l.projection);const I=(P,O)=>{const N=E.reloadCallback;N&&(delete E.reloadCallback,E.parse(E.vectorTile,y.layerIndex,this.availableImages,y.actor,N)),s(P,O)};"parsing"===E.status?E.reloadCallback=I:"done"===E.status&&(E.vectorTile?E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,I):I())}}abortTile(l,s){const u=l.uid,p=this.loading[u];p&&(p.abort&&p.abort(),delete this.loading[u]),s()}removeTile(l,s){const u=this.loaded,p=l.uid;u&&u[p]&&delete u[p],s()}},g.WritingMode=Zu,g.ZoomDependentExpression=Fr,g.add=Js,g.addDynamicAttributes=R1,g.adjoint=function(l,s){var u=s[0],p=s[1],y=s[2],E=s[3],I=s[4],P=s[5],O=s[6],N=s[7],$=s[8];return l[0]=I*$-P*N,l[1]=y*N-p*$,l[2]=p*P-y*I,l[3]=P*O-E*$,l[4]=u*$-y*O,l[5]=y*E-u*P,l[6]=E*N-I*O,l[7]=p*O-u*N,l[8]=u*I-p*E,l},g.asyncAll=Je,g.bezier=je,g.bindAll=Pn,g.boundsAttributes=C0,g.bufferConvexPolygon=function(l,s){const u=[];for(let p=0;p<l.length;p++){const y=Me(p-1,-1,l.length-1),E=Me(p+1,-1,l.length-1),I=l[p],P=l[E],O=l[y].sub(I).unit(),N=P.sub(I).unit(),$=N.angleWithSep(O.x,O.y),U=O.add(N).unit().mult(-1*s/Math.sin($/2));u.push(I.add(U))}return u},g.cacheEntryPossiblyAdded=function(l){Cr++,Cr>Nn&&(l.getActor().send("enforceCacheSizeLimit",cn),Cr=0)},g.calculateGlobeLabelMatrix=function(l,s){const{x:u,y:p}=l.point,y=la(u,p,l.worldSize/l._pixelsPerMercatorPixel,0,0);return hm(y,y,zx(xd(s)))},g.calculateGlobeMatrix=function(l){const{x:s,y:u}=l.point,{lng:p,lat:y}=l._center;return la(s,u,l.worldSize,p,y)},g.calculateGlobeMercatorMatrix=function(l){const s=l.pixelsPerMeter,u=s/Zd(1,l.center.lat),p=qh(new Float64Array(16));return vg(p,p,[l.point.x,l.point.y,0]),Pf(p,p,[u,u,s]),Float32Array.from(p)},g.circumferenceAtLatitude=JC,g.clamp=K,g.clearTileCache=function(l){if(!Yr())return;const s=me.caches.delete(kt);l&&s.catch(l).then(()=>l())},g.clipLine=uy,g.clone=function(l){var s=new Gu(16);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],s},g.clone$1=Tn,g.collisionCircleLayout=iy,g.config=We,g.conjugate=function(l,s){return l[0]=-s[0],l[1]=-s[1],l[2]=-s[2],l[3]=s[3],l},g.create=function(){var l=new Gu(16);return Gu!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},g.create$1=Bv,g.createExpression=Tc,g.createLayout=Jt,g.createStyleLayer=function(l){return"custom"===l.type?new L1(l):new kF[l.type](l)},g.cross=kx,g.degToRad=pe,g.distance=function(l,s){return Math.hypot(s[0]-l[0],s[1]-l[1],s[2]-l[2])},g.div=function(l,s,u){return l[0]=s[0]/u[0],l[1]=s[1]/u[1],l[2]=s[2]/u[2],l},g.dot=fc,g.earthRadius=qd,g.ease=Te,g.easeCubicInOut=oe,g.ecefToLatLng=function([l,s,u]){const p=Math.hypot(l,s,u),y=Math.atan2(l,u),E=.5*Math.PI-Math.acos(-s/p);return new jo(ae(y),ae(E))},g.emitValidationErrors=Rn,g.endsWith=Qn,g.enforceCacheSizeLimit=function(l){si(),Fn&&Fn.then(s=>{s.keys().then(u=>{for(let p=0;p<u.length-l;p++)s.delete(u[p])})})},g.evaluateSizeForFeature=oy,g.evaluateSizeForZoom=Tp,g.evaluateVariableOffset=m0,g.evented=D,g.exactEquals=function(l,s){return l[0]===s[0]&&l[1]===s[1]&&l[2]===s[2]&&l[3]===s[3]},g.exactEquals$1=function(l,s){return l[0]===s[0]&&l[1]===s[1]&&l[2]===s[2]},g.exported=So,g.exported$1=ht,g.extend=le,g.extend$1=gl,g.fillExtrusionHeightLift=c1,g.filterObject=mr,g.fromMat4=function(l,s){return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[4],l[4]=s[5],l[5]=s[6],l[6]=s[8],l[7]=s[9],l[8]=s[10],l},g.fromQuat=function(l,s){var u=s[0],p=s[1],y=s[2],E=s[3],I=u+u,P=p+p,O=y+y,N=u*I,$=p*I,U=p*P,H=y*I,Y=y*P,se=y*O,be=E*I,Ge=E*P,mt=E*O;return l[0]=1-U-se,l[1]=$+mt,l[2]=H-Ge,l[3]=0,l[4]=$-mt,l[5]=1-N-se,l[6]=Y+be,l[7]=0,l[8]=H+Ge,l[9]=Y-be,l[10]=1-N-U,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},g.fromRotation=function(l,s){var u=Math.sin(s),p=Math.cos(s);return l[0]=p,l[1]=u,l[2]=0,l[3]=-u,l[4]=p,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},g.fromScaling=Dx,g.furthestTileCorner=function(l){const s=Math.round((l+45+360)%360/90)%4;return we[s]},g.getAABBPointSquareDist=function(l,s,u){let p=0;for(let y=0;y<2;++y){const E=u?u[y]:0;l[y]>E&&(p+=(l[y]-E)*(l[y]-E)),s[y]<E&&(p+=(E-s[y])*(E-s[y]))}return p},g.getAnchorAlignment=zS,g.getAnchorJustification=g0,g.getBounds=function(l){let s=1/0,u=1/0,p=-1/0,y=-1/0;for(const E of l)s=Math.min(s,E.x),u=Math.min(u,E.y),p=Math.max(p,E.x),y=Math.max(y,E.y);return{min:new J(s,u),max:new J(p,y)}},g.getColumn=ut,g.getDefaultExportFromCjs=Ce,g.getGridMatrix=function(l,s,u,p){const y=s.getNorth(),E=s.getSouth(),I=s.getWest(),P=s.getEast(),O=1<<l.z,N=P-I,$=y-E,U=N/64,H=-$/qu[u],Y=[0,U,0,H,0,0,y,I,0];if(l.z>0){const se=180/p;zv(Y,Y,[se/N+1,0,0,0,se/$+1,0,-.5*se/U,.5*se/H,1])}return Y[2]=O,Y[5]=l.x,Y[8]=l.y,Y},g.getImage=gt,g.getJSON=function(l,s){return Ni(le(l,{type:"json"}),s)},g.getLatitudinalLod=function(l){const s=Yc-5;l=K(l,-s,s)/s*90;const u=Math.pow(Math.abs(Math.sin(pe(l))),3);return Math.round(u*(qu.length-1))},g.getMapSessionAPI=Sn,g.getPerformanceMeasurement=yi,g.getProjection=zM,g.getRTLTextPluginStatus=k,g.getReferrer=_i,g.getTilePoint=function(l,{x:s,y:u},p=0){return new J(((s-p)*l.scale-l.x)*Ci,(u*l.scale-l.y)*Ci)},g.getTileVec3=function(l,s,u=0){return Wh(((s.x-u)*l.scale-l.x)*Ci,(s.y*l.scale-l.y)*Ci,tM(s.z,s.y))},g.getVideo=function(l,s){const u=me.document.createElement("video");u.muted=!0,u.onloadstart=function(){s(null,u)};for(let p=0;p<l.length;p++){const y=me.document.createElement("source");yo(l[p])||(u.crossOrigin="Anonymous"),y.src=l[p],u.appendChild(y)}return{cancel:()=>{}}},g.globeCenterToScreenPoint=function(l){const s=[0,0,0],u=qh(new Float64Array(16));return hm(u,l.pixelMatrix,l.globeMatrix),Va(s,s,u),new J(s[0],s[1])},g.globeDenormalizeECEF=zx,g.globeECEFOrigin=function(l,s){const u=[0,0,0];return Va(u,u,pc(xd(s.canonical))),Va(u,u,l),u},g.globeMetersToEcef=V_,g.globeNormalizeECEF=pc,g.globePixelsToTileUnits=function(l,s){return Ci/(512*Math.pow(2,l))*pp(xd(s))},g.globePoleMatrixForTile=function(l,s,u){const p=qh(new Float64Array(16)),y=(s/(1<<l)-.5)*Math.PI*2;return B_(p,u.globeMatrix,y),Float32Array.from(p)},g.globeTileBounds=xd,g.globeTiltAtLngLat=QC,g.globeToMercatorTransition=mp,g.globeUseCustomAntiAliasing=function(l,s,u){const p=mp(u.zoom),y=l.style.map._antialias,E=!!s.extStandardDerivatives,I=s.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return 0===p&&!y&&!I&&E},g.identity=qh,g.identity$1=W2,g.invert=F_,g.isFullscreen=function(){return!!me.document.fullscreenElement||!!me.document.webkitFullscreenElement},g.isLngLatBehindGlobe=jv,g.isMapAuthenticated=function(l){return $n.has(l)},g.isMapboxURL=ct,g.isSafariWithAntialiasingBug=function(l){const s=l.navigator?l.navigator.userAgent:null;return!!Ae(l)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},g.latFromMercatorY=Zc,g.latLngToECEF=ym,g.len=WC,g.length=hc,g.length$1=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},g.lngFromMercatorX=Zh,g.loadVectorTile=HM,g.makeRequest=Ni,g.mapValue=function(l,s,u,p,y){return K((l-s)/(u-s)*(y-p)+p,p,y)},g.mercatorScale=vm,g.mercatorXfromLng=Xd,g.mercatorYfromLat=Of,g.mercatorZfromAltitude=Zd,g.mul=Mx,g.mul$1=qC,g.multiply=hm,g.multiply$1=zv,g.multiply$2=HC,g.nextPowerOfTwo=Xt,g.normalize=dc,g.normalize$1=Z2,g.normalize$2=dm,g.number=lo,g.ortho=function(l,s,u,p,y,E,I){var P=1/(s-u),O=1/(p-y),N=1/(E-I);return l[0]=-2*P,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*O,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*N,l[11]=0,l[12]=(s+u)*P,l[13]=(y+p)*O,l[14]=(I+E)*N,l[15]=1,l},g.pbf=DS,g.perspective=function(l,s,u,p,y){var E,I=1/Math.tan(s/2);return l[0]=I/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=y&&y!==1/0?(l[10]=(y+p)*(E=1/(p-y)),l[14]=2*y*p*E):(l[10]=-1,l[14]=-2*p),l},g.pick=function(l,s){const u={};for(let p=0;p<s.length;p++){const y=s[p];y in l&&(u[y]=l[y])}return u},g.plugin=B,g.pointGeometry=Re,g.polesInViewport=function(l){const s=qh(new Float64Array(16));hm(s,l.pixelMatrix,l.globeMatrix);const u=[0,Xh,0],p=[0,Lu,0];return Va(u,u,s),Va(p,p,s),[u[0]>0&&u[0]<=l.width&&u[1]>0&&u[1]<=l.height&&!jv(l,new jo(l.center.lat,90)),p[0]>0&&p[0]<=l.width&&p[1]>0&&p[1]<=l.height&&!jv(l,new jo(l.center.lat,-90))]},g.polygonContainsPoint=bm,g.polygonIntersectsBox=iS,g.polygonIntersectsPolygon=tS,g.polygonizeBounds=function(l,s,u=0,p=!0){const y=new J(u,u),E=l.sub(y),I=s.add(y),P=[E,new J(I.x,E.y),I,new J(E.x,I.y)];return p&&P.push(E.clone()),P},g.posAttributes=fm,g.postMapLoadEvent=bt,g.postPerformanceEvent=on,g.postTurnstileEvent=Ii,g.potpack=_1,g.prevPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},g.radToDeg=ae,g.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],g.registerForPluginStateChange=function(l){return l({pluginStatus:x,pluginURL:h}),D.on("pluginStateChange",l),l},g.removeAuthState=function(l){$n.delete(l)},g.renderColorRamp=Wv,g.resample=Kl,g.rotateX=$v,g.rotateX$1=Uv,g.rotateY=B_,g.rotateY$1=X2,g.rotateZ=function(l,s,u){var p=Math.sin(u),y=Math.cos(u),E=s[0],I=s[1],P=s[2],O=s[3],N=s[4],$=s[5],U=s[6],H=s[7];return s!==l&&(l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=E*y+N*p,l[1]=I*y+$*p,l[2]=P*y+U*p,l[3]=O*y+H*p,l[4]=N*y-E*p,l[5]=$*y-I*p,l[6]=U*y-P*p,l[7]=H*y-O*p,l},g.rotateZ$1=function(l,s,u){u*=.5;var p=s[0],y=s[1],E=s[2],I=s[3],P=Math.sin(u),O=Math.cos(u);return l[0]=p*O+y*P,l[1]=y*O-p*P,l[2]=E*O+I*P,l[3]=I*O-E*P,l},g.scale=Pf,g.scale$1=XC,g.scale$2=Hu,g.scaleAndAdd=xg,g.set=function(l,s,u,p){return l[0]=s,l[1]=u,l[2]=p,l},g.setCacheLimits=function(l,s){cn=l,Nn=s},g.setColumn=function(l,s,u){l[4*s+0]=u[0],l[4*s+1]=u[1],l[4*s+2]=u[2],l[4*s+3]=u[3]},g.setRTLTextPlugin=function(l,s,u=!1){if(x===Rv||x===Ov||x===Bl)throw new Error("setRTLTextPlugin cannot be called multiple times.");h=So.resolveURL(l),x=Rv,_d=s,S(),u||F()},g.smoothstep=qe,g.spec=Mn,g.squaredLength=function(l){var s=l[0],u=l[1],p=l[2];return s*s+u*u+p*p},g.storeAuthState=function(l,s){s?$n.add(l):$n.delete(l)},g.sub=yh,g.subtract=Vv,g.symbolSize=sy,g.tileAABB=function(l,s,u,p,y,E,I,P,O){if("globe"===O.name)return function eM(l,s,u){const p=s/l.worldSize,y=l.globeMatrix;if(u.z<=1){const fn=xd(u).getCorners();return Bx(fn,y,p),Pc.fromPoints(fn)}const E=_m(u),I=kf(E);Bx(I,y,p);const P=Number.MAX_VALUE,O=[-P,-P,-P],N=[P,P,P];if(E.contains(l.center)){for(const lr of I)bg(N,N,lr),z_(O,O,lr);O[2]=0;const fn=l.point,zn=[fn.x*p,fn.y*p,0];return bg(N,N,zn),z_(O,O,zn),new Pc(N,O)}const $=[y[12]*p,y[13]*p,y[14]*p],U=E.getCenter(),H=K(l.center.lat,-Yc,Yc),Y=K(U.lat,-Yc,Yc),se=Xd(l.center.lng),be=Of(H);let Ge=se-Xd(U.lng);const mt=be-Of(Y);Ge>.5?Ge-=1:Ge<-.5&&(Ge+=1);let Ot=0;Math.abs(Ge)>Math.abs(mt)?Ot=Ge>=0?1:3:(Ot=mt>=0?0:2,xg($,$,[y[4]*p,y[5]*p,y[6]*p],-Math.sin(pe(mt>=0?E.getSouth():E.getNorth()))*bd));const pt=I[Ot],At=I[(Ot+1)%4],zt=new Lx(pt,At,$),Vt=[Nx(zt,0)||pt[0],Nx(zt,1)||pt[1],Nx(zt,2)||pt[2]],En=mp(l.zoom);if(En>0){const fn=function({x:lr,y:In,z:Hn},Wn,tr,pr,On){const kr=1/(1<<Hn);let Xr=lr*kr,Rr=Xr+kr,Yi=In*kr,gr=Yi+kr,wi=0;const Ki=(Xr+Rr)/2-pr;return Ki>.5?wi=-1:Ki<-.5&&(wi=1),Xr=((Xr+wi)*Wn-(pr*=Wn))*tr+pr,Rr=((Rr+wi)*Wn-pr)*tr+pr,Yi=(Yi*Wn-(On*=Wn))*tr+On,gr=(gr*Wn-On)*tr+On,[[Xr,gr,0],[Rr,gr,0],[Rr,Yi,0],[Xr,Yi,0]]}(u,s,l._pixelsPerMercatorPixel,se,be);for(let lr=0;lr<I.length;lr++)fp(I[lr],fn[lr],En);const zn=Js([],fn[Ot],fn[(Ot+1)%4]);Hu(zn,zn,.5),fp(Vt,zn,En)}for(const fn of I)bg(N,N,fn),z_(O,O,fn);return N[2]=Math.min(pt[2],At[2]),bg(N,N,Vt),z_(O,O,Vt),new Pc(N,O)}(l,s,new n0(u,p,y));const N=Pm({z:u,x:p,y},O);return new Pc([(E+N.x/N.scale)*s,s*(N.y/N.scale),I],[(E+N.x2/N.scale)*s,s*(N.y2/N.scale),P])},g.tileCornersToBounds=_m,g.tileTransform=Pm,g.transformMat3=function(l,s,u){var p=s[0],y=s[1],E=s[2];return l[0]=p*u[0]+y*u[3]+E*u[6],l[1]=p*u[1]+y*u[4]+E*u[7],l[2]=p*u[2]+y*u[5]+E*u[8],l},g.transformMat4=Va,g.transformMat4$1=vd,g.transformQuat=$_,g.transitionTileAABBinECEF=Fx,g.translate=vg,g.transpose=function(l,s){if(l===s){var u=s[1],p=s[2],y=s[5];l[1]=s[3],l[2]=s[6],l[3]=u,l[5]=s[7],l[6]=p,l[7]=y}else l[0]=s[0],l[1]=s[3],l[2]=s[6],l[3]=s[1],l[4]=s[4],l[5]=s[7],l[6]=s[2],l[7]=s[5],l[8]=s[8];return l},g.triggerPluginCompletionEvent=v,g.uniqueId=lt,g.updateGlobeVertexNormal=function(l,s,u,p,y){const E=5*s+2;l.float32[E+0]=u,l.float32[E+1]=p,l.float32[E+2]=y},g.validateCustomStyleLayer=function(l){const s=[],u=l.id;return void 0===u&&s.push({message:`layers.${u}: missing required property "id"`}),void 0===l.render&&s.push({message:`layers.${u}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},g.validateFilter=l=>gn(fu(l)),g.validateFog=l=>gn(w(l)),g.validateLayer=l=>gn(Ja(l)),g.validateLight=l=>gn(f(l)),g.validateSource=l=>gn(Sf(l)),g.validateStyle=Ee,g.validateTerrain=l=>gn(b(l)),g.values=Ue,g.vectorTile=kc,g.version=Be,g.warnOnce=un,g.window=me,g.wrap=Me}),Fe(0,function(g){function me(_t){if("number"==typeof _t||"boolean"==typeof _t||"string"==typeof _t||null==_t)return JSON.stringify(_t);if(Array.isArray(_t)){let ke="[";for(const gt of _t)ke+=`${me(gt)},`;return`${ke}]`}let De="{";for(const ke of Object.keys(_t).sort())De+=`${ke}:${me(_t[ke])},`;return`${De}}`}function Be(_t){let De="";for(const ke of g.refProperties)De+=`/${me(_t[ke])}`;return De}class Ne{constructor(De){this.keyCache={},De&&this.replace(De)}replace(De){this._layerConfigs={},this._layers={},this.update(De,[])}update(De,ke){for(const It of De)this._layerConfigs[It.id]=It,(this._layers[It.id]=g.createStyleLayer(It)).compileFilter(),this.keyCache[It.id]&&delete this.keyCache[It.id];for(const It of ke)delete this.keyCache[It],delete this._layerConfigs[It],delete this._layers[It];this.familiesBySource={};const gt=function(It,ct){const nn={};for(let Dt=0;Dt<It.length;Dt++){const hn=ct&&ct[It[Dt].id]||Be(It[Dt]);ct&&(ct[It[Dt].id]=hn);let qn=nn[hn];qn||(qn=nn[hn]=[]),qn.push(It[Dt])}const Qt=[];for(const Dt in nn)Qt.push(nn[Dt]);return Qt}(g.values(this._layerConfigs),this.keyCache);for(const It of gt){const ct=It.map(nr=>this._layers[nr.id]),nn=ct[0];if("none"===nn.visibility)continue;const Qt=nn.source||"";let Dt=this.familiesBySource[Qt];Dt||(Dt=this.familiesBySource[Qt]={});const hn=nn.sourceLayer||"_geojsonTileLayer";let qn=Dt[hn];qn||(qn=Dt[hn]=[]),qn.push(ct)}}}class We{loadTile(De,ke){const{uid:gt,encoding:It,rawImageData:ct,padding:nn,buildQuadTree:Qt}=De,Dt=g.window.ImageBitmap&&ct instanceof g.window.ImageBitmap?this.getImageData(ct,nn):ct;ke(null,new g.DEMData(gt,Dt,It,nn<1,Qt))}getImageData(De,ke){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(De.width,De.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=De.width,this.offscreenCanvas.height=De.height,this.offscreenCanvasContext.drawImage(De,0,0,De.width,De.height);const gt=this.offscreenCanvasContext.getImageData(-ke,-ke,De.width+2*ke,De.height+2*ke);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),gt}}function ht(_t,De){if(0!==_t.length){Wt(_t[0],De);for(var ke=1;ke<_t.length;ke++)Wt(_t[ke],!De)}}function Wt(_t,De){for(var ke=0,gt=0,It=0,ct=_t.length,nn=ct-1;It<ct;nn=It++){var Qt=(_t[It][0]-_t[nn][0])*(_t[nn][1]+_t[It][1]),Dt=ke+Qt;gt+=Math.abs(ke)>=Math.abs(Qt)?ke-Dt+Qt:Qt-Dt+ke,ke=Dt}ke+gt>=0!=!!De&&_t.reverse()}var Xe=g.getDefaultExportFromCjs(function _t(De,ke){var gt,It=De&&De.type;if("FeatureCollection"===It)for(gt=0;gt<De.features.length;gt++)_t(De.features[gt],ke);else if("GeometryCollection"===It)for(gt=0;gt<De.geometries.length;gt++)_t(De.geometries[gt],ke);else if("Feature"===It)_t(De.geometry,ke);else if("Polygon"===It)ht(De.coordinates,ke);else if("MultiPolygon"===It)for(gt=0;gt<De.coordinates.length;gt++)ht(De.coordinates[gt],ke);return De});const et=g.VectorTileFeature.prototype.toGeoJSON;var He={exports:{}},Bt=g.pointGeometry,ce=g.vectorTile.VectorTileFeature,Ce=te;function te(_t,De){this.options=De||{},this.features=_t,this.length=_t.length}function Q(_t,De){this.id="number"==typeof _t.id?_t.id:void 0,this.type=_t.type,this.rawGeometry=1===_t.type?[_t.geometry]:_t.geometry,this.properties=_t.tags,this.extent=De||4096}te.prototype.feature=function(_t){return new Q(this.features[_t],this.options.extent)},Q.prototype.loadGeometry=function(){var _t=this.rawGeometry;this.geometry=[];for(var De=0;De<_t.length;De++){for(var ke=_t[De],gt=[],It=0;It<ke.length;It++)gt.push(new Bt(ke[It][0],ke[It][1]));this.geometry.push(gt)}return this.geometry},Q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _t=this.geometry,De=1/0,ke=-1/0,gt=1/0,It=-1/0,ct=0;ct<_t.length;ct++)for(var nn=_t[ct],Qt=0;Qt<nn.length;Qt++){var Dt=nn[Qt];De=Math.min(De,Dt.x),ke=Math.max(ke,Dt.x),gt=Math.min(gt,Dt.y),It=Math.max(It,Dt.y)}return[De,gt,ke,It]},Q.prototype.toGeoJSON=ce.prototype.toGeoJSON;var ne=g.pbf,Re=Ce;function ie(_t){var De=new ne;return function(ke,gt){for(var It in ke.layers)gt.writeMessage(3,J,ke.layers[It])}(_t,De),De.finish()}function J(_t,De){var ke;De.writeVarintField(15,_t.version||1),De.writeStringField(1,_t.name||""),De.writeVarintField(5,_t.extent||4096);var gt={keys:[],values:[],keycache:{},valuecache:{}};for(ke=0;ke<_t.length;ke++)gt.feature=_t.feature(ke),De.writeMessage(2,xe,gt);var It=gt.keys;for(ke=0;ke<It.length;ke++)De.writeStringField(3,It[ke]);var ct=gt.values;for(ke=0;ke<ct.length;ke++)De.writeMessage(4,oe,ct[ke])}function xe(_t,De){var ke=_t.feature;void 0!==ke.id&&De.writeVarintField(1,ke.id),De.writeMessage(2,ee,_t),De.writeVarintField(3,ke.type),De.writeMessage(4,we,ke)}function ee(_t,De){var ke=_t.feature,gt=_t.keys,It=_t.values,ct=_t.keycache,nn=_t.valuecache;for(var Qt in ke.properties){var Dt=ke.properties[Qt],hn=ct[Qt];if(null!==Dt){void 0===hn&&(gt.push(Qt),ct[Qt]=hn=gt.length-1),De.writeVarint(hn);var qn=typeof Dt;"string"!==qn&&"boolean"!==qn&&"number"!==qn&&(Dt=JSON.stringify(Dt));var nr=qn+":"+Dt,Xn=nn[nr];void 0===Xn&&(It.push(Dt),nn[nr]=Xn=It.length-1),De.writeVarint(Xn)}}}function pe(_t,De){return(De<<3)+(7&_t)}function ae(_t){return _t<<1^_t>>31}function we(_t,De){for(var ke=_t.loadGeometry(),gt=_t.type,It=0,ct=0,nn=ke.length,Qt=0;Qt<nn;Qt++){var Dt=ke[Qt],hn=1;1===gt&&(hn=Dt.length),De.writeVarint(pe(1,hn));for(var qn=3===gt?Dt.length-1:Dt.length,nr=0;nr<qn;nr++){1===nr&&1!==gt&&De.writeVarint(pe(2,qn-1));var Xn=Dt[nr].x-It,bi=Dt[nr].y-ct;De.writeVarint(ae(Xn)),De.writeVarint(ae(bi)),It+=Xn,ct+=bi}3===gt&&De.writeVarint(pe(7,1))}}function oe(_t,De){var ke=typeof _t;"string"===ke?De.writeStringField(1,_t):"boolean"===ke?De.writeBooleanField(7,_t):"number"===ke&&(_t%1!=0?De.writeDoubleField(3,_t):_t<0?De.writeSVarintField(6,_t):De.writeVarintField(5,_t))}He.exports=ie,He.exports.fromVectorTileJs=ie,He.exports.fromGeojsonVt=function(_t,De){De=De||{};var ke={};for(var gt in _t)ke[gt]=new Re(_t[gt].features,De),ke[gt].name=gt,ke[gt].version=De.version,ke[gt].extent=De.extent;return ie({layers:ke})},He.exports.GeoJSONWrapper=Re;var je=g.getDefaultExportFromCjs(He.exports);const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_t=>_t},K=Math.fround||(qe=new Float32Array(1),_t=>(qe[0]=+_t,qe[0]));var qe;const Me=3,Je=5,Ue=6;class le{constructor(De){this.options=Object.assign(Object.create(Te),De),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(De){const{log:ke,minZoom:gt,maxZoom:It}=this.options;ke&&console.time("total time");const ct=`prepare ${De.length} points`;ke&&console.time(ct),this.points=De;const nn=[];for(let Dt=0;Dt<De.length;Dt++){const hn=De[Dt];if(!hn.geometry)continue;const[qn,nr]=hn.geometry.coordinates,Xn=K(dn(qn)),bi=K(Xt(nr));nn.push(Xn,bi,1/0,Dt,-1,1),this.options.reduce&&nn.push(0)}let Qt=this.trees[It+1]=this._createTree(nn);ke&&console.timeEnd(ct);for(let Dt=It;Dt>=gt;Dt--){const hn=+Date.now();Qt=this.trees[Dt]=this._createTree(this._cluster(Qt,Dt)),ke&&console.log("z%d: %d clusters in %dms",Dt,Qt.numItems,+Date.now()-hn)}return ke&&console.timeEnd("total time"),this}getClusters(De,ke){let gt=((De[0]+180)%360+360)%360-180;const It=Math.max(-90,Math.min(90,De[1]));let ct=180===De[2]?180:((De[2]+180)%360+360)%360-180;const nn=Math.max(-90,Math.min(90,De[3]));if(De[2]-De[0]>=360)gt=-180,ct=180;else if(gt>ct){const nr=this.getClusters([gt,It,180,nn],ke),Xn=this.getClusters([-180,It,ct,nn],ke);return nr.concat(Xn)}const Qt=this.trees[this._limitZoom(ke)],Dt=Qt.range(dn(gt),Xt(nn),dn(ct),Xt(It)),hn=Qt.data,qn=[];for(const nr of Dt){const Xn=this.stride*nr;qn.push(hn[Xn+Je]>1?Qe(hn,Xn,this.clusterProps):this.points[hn[Xn+Me]])}return qn}getChildren(De){const ke=this._getOriginId(De),gt=this._getOriginZoom(De),It="No cluster with the specified id.",ct=this.trees[gt];if(!ct)throw new Error(It);const nn=ct.data;if(ke*this.stride>=nn.length)throw new Error(It);const Qt=this.options.radius/(this.options.extent*Math.pow(2,gt-1)),Dt=ct.within(nn[ke*this.stride],nn[ke*this.stride+1],Qt),hn=[];for(const qn of Dt){const nr=qn*this.stride;nn[nr+4]===De&&hn.push(nn[nr+Je]>1?Qe(nn,nr,this.clusterProps):this.points[nn[nr+Me]])}if(0===hn.length)throw new Error(It);return hn}getLeaves(De,ke,gt){const It=[];return this._appendLeaves(It,De,ke=ke||10,gt=gt||0,0),It}getTile(De,ke,gt){const It=this.trees[this._limitZoom(De)],ct=Math.pow(2,De),{extent:nn,radius:Qt}=this.options,Dt=Qt/nn,hn=(gt-Dt)/ct,qn=(gt+1+Dt)/ct,nr={features:[]};return this._addTileFeatures(It.range((ke-Dt)/ct,hn,(ke+1+Dt)/ct,qn),It.data,ke,gt,ct,nr),0===ke&&this._addTileFeatures(It.range(1-Dt/ct,hn,1,qn),It.data,ct,gt,ct,nr),ke===ct-1&&this._addTileFeatures(It.range(0,hn,Dt/ct,qn),It.data,-1,gt,ct,nr),nr.features.length?nr:null}getClusterExpansionZoom(De){let ke=this._getOriginZoom(De)-1;for(;ke<=this.options.maxZoom;){const gt=this.getChildren(De);if(ke++,1!==gt.length)break;De=gt[0].properties.cluster_id}return ke}_appendLeaves(De,ke,gt,It,ct){const nn=this.getChildren(ke);for(const Qt of nn){const Dt=Qt.properties;if(Dt&&Dt.cluster?ct+Dt.point_count<=It?ct+=Dt.point_count:ct=this._appendLeaves(De,Dt.cluster_id,gt,It,ct):ct<It?ct++:De.push(Qt),De.length===gt)break}return ct}_createTree(De){const ke=new g.KDBush(De.length/this.stride|0,this.options.nodeSize,Float32Array);for(let gt=0;gt<De.length;gt+=this.stride)ke.add(De[gt],De[gt+1]);return ke.finish(),ke.data=De,ke}_addTileFeatures(De,ke,gt,It,ct,nn){for(const Qt of De){const Dt=Qt*this.stride,hn=ke[Dt+Je]>1;let qn,nr,Xn;if(hn)qn=lt(ke,Dt,this.clusterProps),nr=ke[Dt],Xn=ke[Dt+1];else{const ai=this.points[ke[Dt+Me]];qn=ai.properties;const[Kr,Ii]=ai.geometry.coordinates;nr=dn(Kr),Xn=Xt(Ii)}const bi={type:1,geometry:[[Math.round(this.options.extent*(nr*ct-gt)),Math.round(this.options.extent*(Xn*ct-It))]],tags:qn};let Si;Si=hn||this.options.generateId?ke[Dt+Me]:this.points[ke[Dt+Me]].id,void 0!==Si&&(bi.id=Si),nn.features.push(bi)}}_limitZoom(De){return Math.max(this.options.minZoom,Math.min(Math.floor(+De),this.options.maxZoom+1))}_cluster(De,ke){const{radius:gt,extent:It,reduce:ct,minPoints:nn}=this.options,Qt=gt/(It*Math.pow(2,ke)),Dt=De.data,hn=[],qn=this.stride;for(let nr=0;nr<Dt.length;nr+=qn){if(Dt[nr+2]<=ke)continue;Dt[nr+2]=ke;const Xn=Dt[nr],bi=Dt[nr+1],Si=De.within(Dt[nr],Dt[nr+1],Qt),ai=Dt[nr+Je];let Kr=ai;for(const Ii of Si){const Fi=Ii*qn;Dt[Fi+2]>ke&&(Kr+=Dt[Fi+Je])}if(Kr>ai&&Kr>=nn){let Ii,Fi=Xn*ai,bt=bi*ai,Ct=-1;const on=((nr/qn|0)<<5)+(ke+1)+this.points.length;for(const ln of Si){const Sn=ln*qn;if(Dt[Sn+2]<=ke)continue;Dt[Sn+2]=ke;const $n=Dt[Sn+Je];Fi+=Dt[Sn]*$n,bt+=Dt[Sn+1]*$n,Dt[Sn+4]=on,ct&&(Ii||(Ii=this._map(Dt,nr,!0),Ct=this.clusterProps.length,this.clusterProps.push(Ii)),ct(Ii,this._map(Dt,Sn)))}Dt[nr+4]=on,hn.push(Fi/Kr,bt/Kr,1/0,on,-1,Kr),ct&&hn.push(Ct)}else{for(let Ii=0;Ii<qn;Ii++)hn.push(Dt[nr+Ii]);if(Kr>1)for(const Ii of Si){const Fi=Ii*qn;if(!(Dt[Fi+2]<=ke)){Dt[Fi+2]=ke;for(let bt=0;bt<qn;bt++)hn.push(Dt[Fi+bt])}}}}return hn}_getOriginId(De){return De-this.points.length>>5}_getOriginZoom(De){return(De-this.points.length)%32}_map(De,ke,gt){if(De[ke+Je]>1){const nn=this.clusterProps[De[ke+Ue]];return gt?Object.assign({},nn):nn}const It=this.points[De[ke+Me]].properties,ct=this.options.map(It);return gt&&ct===It?Object.assign({},ct):ct}}function Qe(_t,De,ke){return{type:"Feature",id:_t[De+Me],properties:lt(_t,De,ke),geometry:{type:"Point",coordinates:[(gt=_t[De],360*(gt-.5)),_n(_t[De+1])]}};var gt}function lt(_t,De,ke){const gt=_t[De+Je],It=gt>=1e4?`${Math.round(gt/1e3)}k`:gt>=1e3?Math.round(gt/100)/10+"k":gt,ct=_t[De+Ue],nn=-1===ct?{}:Object.assign({},ke[ct]);return Object.assign(nn,{cluster:!0,cluster_id:_t[De+Me],point_count:gt,point_count_abbreviated:It})}function dn(_t){return _t/360+.5}function Xt(_t){const De=Math.sin(_t*Math.PI/180),ke=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return ke<0?0:ke>1?1:ke}function _n(_t){const De=(180-360*_t)*Math.PI/180;return 360*Math.atan(Math.exp(De))/Math.PI-90}function Pn(_t,De,ke,gt){for(var It,ct=gt,nn=ke-De>>1,Qt=ke-De,Dt=_t[De],hn=_t[De+1],qn=_t[ke],nr=_t[ke+1],Xn=De+3;Xn<ke;Xn+=3){var bi=Qn(_t[Xn],_t[Xn+1],Dt,hn,qn,nr);if(bi>ct)It=Xn,ct=bi;else if(bi===ct){var Si=Math.abs(Xn-nn);Si<Qt&&(It=Xn,Qt=Si)}}ct>gt&&(It-De>3&&Pn(_t,De,It,gt),_t[It+2]=ct,ke-It>3&&Pn(_t,It,ke,gt))}function Qn(_t,De,ke,gt,It,ct){var nn=It-ke,Qt=ct-gt;if(0!==nn||0!==Qt){var Dt=((_t-ke)*nn+(De-gt)*Qt)/(nn*nn+Qt*Qt);Dt>1?(ke=It,gt=ct):Dt>0&&(ke+=nn*Dt,gt+=Qt*Dt)}return(nn=_t-ke)*nn+(Qt=De-gt)*Qt}function jt(_t,De,ke,gt){var It={id:void 0===_t?null:_t,type:De,geometry:ke,tags:gt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ct){var nn=ct.geometry,Qt=ct.type;if("Point"===Qt||"MultiPoint"===Qt||"LineString"===Qt)mr(ct,nn);else if("Polygon"===Qt||"MultiLineString"===Qt)for(var Dt=0;Dt<nn.length;Dt++)mr(ct,nn[Dt]);else if("MultiPolygon"===Qt)for(Dt=0;Dt<nn.length;Dt++)for(var hn=0;hn<nn[Dt].length;hn++)mr(ct,nn[Dt][hn])}(It),It}function mr(_t,De){for(var ke=0;ke<De.length;ke+=3)_t.minX=Math.min(_t.minX,De[ke]),_t.minY=Math.min(_t.minY,De[ke+1]),_t.maxX=Math.max(_t.maxX,De[ke]),_t.maxY=Math.max(_t.maxY,De[ke+1])}function Tn(_t,De,ke,gt){if(De.geometry){var It=De.geometry.coordinates,ct=De.geometry.type,nn=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2),Qt=[],Dt=De.id;if(ke.promoteId?Dt=De.properties[ke.promoteId]:ke.generateId&&(Dt=gt||0),"Point"===ct)Vn(It,Qt);else if("MultiPoint"===ct)for(var hn=0;hn<It.length;hn++)Vn(It[hn],Qt);else if("LineString"===ct)un(It,Qt,nn,!1);else if("MultiLineString"===ct){if(ke.lineMetrics){for(hn=0;hn<It.length;hn++)un(It[hn],Qt=[],nn,!1),_t.push(jt(Dt,"LineString",Qt,De.properties));return}Ft(It,Qt,nn,!1)}else if("Polygon"===ct)Ft(It,Qt,nn,!0);else{if("MultiPolygon"!==ct){if("GeometryCollection"===ct){for(hn=0;hn<De.geometry.geometries.length;hn++)Tn(_t,{id:Dt,geometry:De.geometry.geometries[hn],properties:De.properties},ke,gt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(hn=0;hn<It.length;hn++){var qn=[];Ft(It[hn],qn,nn,!0),Qt.push(qn)}}_t.push(jt(Dt,ct,Qt,De.properties))}}function Vn(_t,De){De.push(Cn(_t[0])),De.push(jn(_t[1])),De.push(0)}function un(_t,De,ke,gt){for(var It,ct,nn=0,Qt=0;Qt<_t.length;Qt++){var Dt=Cn(_t[Qt][0]),hn=jn(_t[Qt][1]);De.push(Dt),De.push(hn),De.push(0),Qt>0&&(nn+=gt?(It*hn-Dt*ct)/2:Math.sqrt(Math.pow(Dt-It,2)+Math.pow(hn-ct,2))),It=Dt,ct=hn}var qn=De.length-3;De[2]=1,Pn(De,0,qn,ke),De[qn+2]=1,De.size=Math.abs(nn),De.start=0,De.end=De.size}function Ft(_t,De,ke,gt){for(var It=0;It<_t.length;It++){var ct=[];un(_t[It],ct,ke,gt),De.push(ct)}}function Cn(_t){return _t/360+.5}function jn(_t){var De=Math.sin(_t*Math.PI/180),ke=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return ke<0?0:ke>1?1:ke}function Pt(_t,De,ke,gt,It,ct,nn,Qt){if(gt/=De,ct>=(ke/=De)&&nn<gt)return _t;if(nn<ke||ct>=gt)return null;for(var Dt=[],hn=0;hn<_t.length;hn++){var qn=_t[hn],nr=qn.geometry,Xn=qn.type,bi=0===It?qn.minX:qn.minY,Si=0===It?qn.maxX:qn.maxY;if(bi>=ke&&Si<gt)Dt.push(qn);else if(!(Si<ke||bi>=gt)){var ai=[];if("Point"===Xn||"MultiPoint"===Xn)Pe(nr,ai,ke,gt,It);else if("LineString"===Xn)Ae(nr,ai,ke,gt,It,!1,Qt.lineMetrics);else if("MultiLineString"===Xn)ut(nr,ai,ke,gt,It,!1);else if("Polygon"===Xn)ut(nr,ai,ke,gt,It,!0);else if("MultiPolygon"===Xn)for(var Kr=0;Kr<nr.length;Kr++){var Ii=[];ut(nr[Kr],Ii,ke,gt,It,!0),Ii.length&&ai.push(Ii)}if(ai.length){if(Qt.lineMetrics&&"LineString"===Xn){for(Kr=0;Kr<ai.length;Kr++)Dt.push(jt(qn.id,Xn,ai[Kr],qn.tags));continue}"LineString"!==Xn&&"MultiLineString"!==Xn||(1===ai.length?(Xn="LineString",ai=ai[0]):Xn="MultiLineString"),"Point"!==Xn&&"MultiPoint"!==Xn||(Xn=3===ai.length?"Point":"MultiPoint"),Dt.push(jt(qn.id,Xn,ai,qn.tags))}}}return Dt.length?Dt:null}function Pe(_t,De,ke,gt,It){for(var ct=0;ct<_t.length;ct+=3){var nn=_t[ct+It];nn>=ke&&nn<=gt&&(De.push(_t[ct]),De.push(_t[ct+1]),De.push(_t[ct+2]))}}function Ae(_t,De,ke,gt,It,ct,nn){for(var Qt,Dt,hn=Se(_t),qn=0===It?cn:Nn,nr=_t.start,Xn=0;Xn<_t.length-3;Xn+=3){var bi=_t[Xn],Si=_t[Xn+1],ai=_t[Xn+2],Kr=_t[Xn+3],Ii=_t[Xn+4],Fi=0===It?bi:Si,bt=0===It?Kr:Ii,Ct=!1;nn&&(Qt=Math.sqrt(Math.pow(bi-Kr,2)+Math.pow(Si-Ii,2))),Fi<ke?bt>ke&&(Dt=qn(hn,bi,Si,Kr,Ii,ke),nn&&(hn.start=nr+Qt*Dt)):Fi>gt?bt<gt&&(Dt=qn(hn,bi,Si,Kr,Ii,gt),nn&&(hn.start=nr+Qt*Dt)):kt(hn,bi,Si,ai),bt<ke&&Fi>=ke&&(Dt=qn(hn,bi,Si,Kr,Ii,ke),Ct=!0),bt>gt&&Fi<=gt&&(Dt=qn(hn,bi,Si,Kr,Ii,gt),Ct=!0),!ct&&Ct&&(nn&&(hn.end=nr+Qt*Dt),De.push(hn),hn=Se(_t)),nn&&(nr+=Qt)}var on=_t.length-3;bi=_t[on],Si=_t[on+1],ai=_t[on+2],(Fi=0===It?bi:Si)>=ke&&Fi<=gt&&kt(hn,bi,Si,ai),on=hn.length-3,ct&&on>=3&&(hn[on]!==hn[0]||hn[on+1]!==hn[1])&&kt(hn,hn[0],hn[1],hn[2]),hn.length&&De.push(hn)}function Se(_t){var De=[];return De.size=_t.size,De.start=_t.start,De.end=_t.end,De}function ut(_t,De,ke,gt,It,ct){for(var nn=0;nn<_t.length;nn++)Ae(_t[nn],De,ke,gt,It,ct,!1)}function kt(_t,De,ke,gt){_t.push(De),_t.push(ke),_t.push(gt)}function cn(_t,De,ke,gt,It,ct){var nn=(ct-De)/(gt-De);return _t.push(ct),_t.push(ke+(It-ke)*nn),_t.push(1),nn}function Nn(_t,De,ke,gt,It,ct){var nn=(ct-ke)/(It-ke);return _t.push(De+(gt-De)*nn),_t.push(ct),_t.push(1),nn}function Fn(_t,De){for(var ke=[],gt=0;gt<_t.length;gt++){var It,ct=_t[gt],nn=ct.type;if("Point"===nn||"MultiPoint"===nn||"LineString"===nn)It=vn(ct.geometry,De);else if("MultiLineString"===nn||"Polygon"===nn){It=[];for(var Qt=0;Qt<ct.geometry.length;Qt++)It.push(vn(ct.geometry[Qt],De))}else if("MultiPolygon"===nn)for(It=[],Qt=0;Qt<ct.geometry.length;Qt++){for(var Dt=[],hn=0;hn<ct.geometry[Qt].length;hn++)Dt.push(vn(ct.geometry[Qt][hn],De));It.push(Dt)}ke.push(jt(ct.id,nn,It,ct.tags))}return ke}function vn(_t,De){var ke=[];ke.size=_t.size,void 0!==_t.start&&(ke.start=_t.start,ke.end=_t.end);for(var gt=0;gt<_t.length;gt+=3)ke.push(_t[gt]+De,_t[gt+1],_t[gt+2]);return ke}function Yr(_t,De){if(_t.transformed)return _t;var ke,gt,It,ct=1<<_t.z,nn=_t.x,Qt=_t.y;for(ke=0;ke<_t.features.length;ke++){var Dt=_t.features[ke],hn=Dt.geometry,qn=Dt.type;if(Dt.geometry=[],1===qn)for(gt=0;gt<hn.length;gt+=2)Dt.geometry.push(si(hn[gt],hn[gt+1],De,ct,nn,Qt));else for(gt=0;gt<hn.length;gt++){var nr=[];for(It=0;It<hn[gt].length;It+=2)nr.push(si(hn[gt][It],hn[gt][It+1],De,ct,nn,Qt));Dt.geometry.push(nr)}}return _t.transformed=!0,_t}function si(_t,De,ke,gt,It,ct){return[Math.round(ke*(_t*gt-It)),Math.round(ke*(De*gt-ct))]}function sr(_t,De,ke,gt,It){for(var ct=De===It.maxZoom?0:It.tolerance/((1<<De)*It.extent),nn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ke,y:gt,z:De,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Qt=0;Qt<_t.length;Qt++){nn.numFeatures++,Cr(nn,_t[Qt],ct,It);var Dt=_t[Qt].minX,hn=_t[Qt].minY,qn=_t[Qt].maxX,nr=_t[Qt].maxY;Dt<nn.minX&&(nn.minX=Dt),hn<nn.minY&&(nn.minY=hn),qn>nn.maxX&&(nn.maxX=qn),nr>nn.maxY&&(nn.maxY=nr)}return nn}function Cr(_t,De,ke,gt){var It=De.geometry,ct=De.type,nn=[];if("Point"===ct||"MultiPoint"===ct)for(var Qt=0;Qt<It.length;Qt+=3)nn.push(It[Qt]),nn.push(It[Qt+1]),_t.numPoints++,_t.numSimplified++;else if("LineString"===ct)Ei(nn,It,_t,ke,!1,!1);else if("MultiLineString"===ct||"Polygon"===ct)for(Qt=0;Qt<It.length;Qt++)Ei(nn,It[Qt],_t,ke,"Polygon"===ct,0===Qt);else if("MultiPolygon"===ct)for(var Dt=0;Dt<It.length;Dt++){var hn=It[Dt];for(Qt=0;Qt<hn.length;Qt++)Ei(nn,hn[Qt],_t,ke,!0,0===Qt)}if(nn.length){var qn=De.tags||null;if("LineString"===ct&&gt.lineMetrics){for(var nr in qn={},De.tags)qn[nr]=De.tags[nr];qn.mapbox_clip_start=It.start/It.size,qn.mapbox_clip_end=It.end/It.size}var Xn={geometry:nn,type:"Polygon"===ct||"MultiPolygon"===ct?3:"LineString"===ct||"MultiLineString"===ct?2:1,tags:qn};null!==De.id&&(Xn.id=De.id),_t.features.push(Xn)}}function Ei(_t,De,ke,gt,It,ct){var nn=gt*gt;if(gt>0&&De.size<(It?nn:gt))ke.numPoints+=De.length/3;else{for(var Qt=[],Dt=0;Dt<De.length;Dt+=3)(0===gt||De[Dt+2]>nn)&&(ke.numSimplified++,Qt.push(De[Dt]),Qt.push(De[Dt+1])),ke.numPoints++;It&&function(hn,qn){for(var nr=0,Xn=0,bi=hn.length,Si=bi-2;Xn<bi;Si=Xn,Xn+=2)nr+=(hn[Xn]-hn[Si])*(hn[Xn+1]+hn[Si+1]);if(nr>0===qn)for(Xn=0,bi=hn.length;Xn<bi/2;Xn+=2){var ai=hn[Xn],Kr=hn[Xn+1];hn[Xn]=hn[bi-2-Xn],hn[Xn+1]=hn[bi-1-Xn],hn[bi-2-Xn]=ai,hn[bi-1-Xn]=Kr}}(Qt,ct),_t.push(Qt)}}function Hr(_t,De){var ke=(De=this.options=function(It,ct){for(var nn in ct)It[nn]=ct[nn];return It}(Object.create(this.options),De)).debug;if(ke&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");var It,ct,nn,Qt,Dt,hn,gt=function(It,ct){var nn=[];if("FeatureCollection"===It.type)for(var Qt=0;Qt<It.features.length;Qt++)Tn(nn,It.features[Qt],ct,Qt);else Tn(nn,"Feature"===It.type?It:{geometry:It},ct);return nn}(_t,De);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Qt=It=gt,Dt=Pt(It,1,-1-(nn=(ct=De).buffer/ct.extent),nn,0,-1,2,ct),hn=Pt(It,1,1-nn,2+nn,0,-1,2,ct),(Dt||hn)&&(Qt=Pt(It,1,-nn,1+nn,0,-1,2,ct)||[],Dt&&(Qt=Fn(Dt,1).concat(Qt)),hn&&(Qt=Qt.concat(Fn(hn,-1)))),(gt=Qt).length&&this.splitTile(gt,0,0,0),ke&&(gt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _i(_t,De,ke){return 32*((1<<_t)*ke+De)+_t}function Ni(_t,De){const ke=_t.tileID.canonical;if(!this._geoJSONIndex)return De(null,null);const gt=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!gt)return De(null,null);const It=new class{constructor(nn){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.EXTENT,this.length=nn.length,this._features=nn}feature(nn){return new class{constructor(Qt){this._feature=Qt,this.extent=g.EXTENT,this.type=Qt.type,this.properties=Qt.tags,"id"in Qt&&!isNaN(Qt.id)&&(this.id=parseInt(Qt.id,10))}loadGeometry(){if(1===this._feature.type){const Qt=[];for(const Dt of this._feature.geometry)Qt.push([new g.Point(Dt[0],Dt[1])]);return Qt}{const Qt=[];for(const Dt of this._feature.geometry){const hn=[];for(const qn of Dt)hn.push(new g.Point(qn[0],qn[1]));Qt.push(hn)}return Qt}}toGeoJSON(Qt,Dt,hn){return et.call(this,Qt,Dt,hn)}}(this._features[nn])}}(gt.features);let ct=je(It);0===ct.byteOffset&&ct.byteLength===ct.buffer.byteLength||(ct=new Uint8Array(ct)),De(null,{vectorTile:It,rawData:ct.buffer})}Hr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Hr.prototype.splitTile=function(_t,De,ke,gt,It,ct,nn){for(var Qt=[_t,De,ke,gt],Dt=this.options,hn=Dt.debug;Qt.length;){gt=Qt.pop(),ke=Qt.pop(),De=Qt.pop(),_t=Qt.pop();var qn=1<<De,nr=_i(De,ke,gt),Xn=this.tiles[nr];if(!Xn&&(hn>1&&console.time("creation"),Xn=this.tiles[nr]=sr(_t,De,ke,gt,Dt),this.tileCoords.push({z:De,x:ke,y:gt}),hn)){hn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,ke,gt,Xn.numFeatures,Xn.numPoints,Xn.numSimplified),console.timeEnd("creation"));var bi="z"+De;this.stats[bi]=(this.stats[bi]||0)+1,this.total++}if(Xn.source=_t,It){if(De===Dt.maxZoom||De===It)continue;var Si=1<<It-De;if(ke!==Math.floor(ct/Si)||gt!==Math.floor(nn/Si))continue}else if(De===Dt.indexMaxZoom||Xn.numPoints<=Dt.indexMaxPoints)continue;if(Xn.source=null,0!==_t.length){hn>1&&console.time("clipping");var ai,Kr,Ii,Fi,bt,Ct,on=.5*Dt.buffer/Dt.extent,ln=.5-on,Sn=.5+on,$n=1+on;ai=Kr=Ii=Fi=null,bt=Pt(_t,qn,ke-on,ke+Sn,0,Xn.minX,Xn.maxX,Dt),Ct=Pt(_t,qn,ke+ln,ke+$n,0,Xn.minX,Xn.maxX,Dt),_t=null,bt&&(ai=Pt(bt,qn,gt-on,gt+Sn,1,Xn.minY,Xn.maxY,Dt),Kr=Pt(bt,qn,gt+ln,gt+$n,1,Xn.minY,Xn.maxY,Dt),bt=null),Ct&&(Ii=Pt(Ct,qn,gt-on,gt+Sn,1,Xn.minY,Xn.maxY,Dt),Fi=Pt(Ct,qn,gt+ln,gt+$n,1,Xn.minY,Xn.maxY,Dt),Ct=null),hn>1&&console.timeEnd("clipping"),Qt.push(ai||[],De+1,2*ke,2*gt),Qt.push(Kr||[],De+1,2*ke,2*gt+1),Qt.push(Ii||[],De+1,2*ke+1,2*gt),Qt.push(Fi||[],De+1,2*ke+1,2*gt+1)}}},Hr.prototype.getTile=function(_t,De,ke){var gt=this.options,It=gt.extent,ct=gt.debug;if(_t<0||_t>24)return null;var nn=1<<_t,Qt=_i(_t,De=(De%nn+nn)%nn,ke);if(this.tiles[Qt])return Yr(this.tiles[Qt],It);ct>1&&console.log("drilling down to z%d-%d-%d",_t,De,ke);for(var Dt,hn=_t,qn=De,nr=ke;!Dt&&hn>0;)hn--,qn=Math.floor(qn/2),nr=Math.floor(nr/2),Dt=this.tiles[_i(hn,qn,nr)];return Dt&&Dt.source?(ct>1&&console.log("found parent tile z%d-%d-%d",hn,qn,nr),ct>1&&console.time("drilling down"),this.splitTile(Dt.source,hn,qn,nr,_t,De,ke),ct>1&&console.timeEnd("drilling down"),this.tiles[Qt]?Yr(this.tiles[Qt],It):null):null};class zi extends g.VectorTileWorkerSource{constructor(De,ke,gt,It,ct){super(De,ke,gt,It,Ni),ct&&(this.loadGeoJSON=ct)}loadData(De,ke){const gt=De&&De.request,It=gt&&gt.collectResourceTiming;this.loadGeoJSON(De,(ct,nn)=>{if(ct||!nn)return ke(ct);if("object"!=typeof nn)return ke(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));{Xe(nn,!0);try{if(De.filter){const Dt=g.createExpression(De.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Dt.result)throw new Error(Dt.value.map(qn=>`${qn.key}: ${qn.message}`).join(", "));nn={type:"FeatureCollection",features:nn.features.filter(qn=>Dt.value.evaluate({zoom:0},qn))}}this._geoJSONIndex=De.cluster?new le(function({superclusterOptions:Dt,clusterProperties:hn}){if(!hn||!Dt)return Dt;const qn={},nr={},Xn={accumulated:null,zoom:0},bi={properties:null},Si=Object.keys(hn);for(const ai of Si){const[Kr,Ii]=hn[ai],Fi=g.createExpression(Ii),bt=g.createExpression("string"==typeof Kr?[Kr,["accumulated"],["get",ai]]:Kr);qn[ai]=Fi.value,nr[ai]=bt.value}return Dt.map=ai=>{bi.properties=ai;const Kr={};for(const Ii of Si)Kr[Ii]=qn[Ii].evaluate(Xn,bi);return Kr},Dt.reduce=(ai,Kr)=>{bi.properties=Kr;for(const Ii of Si)Xn.accumulated=ai[Ii],ai[Ii]=nr[Ii].evaluate(Xn,bi)},Dt}(De)).load(nn.features):new Hr(Dt=nn,De.geojsonVtOptions)}catch(Dt){return ke(Dt)}this.loaded={};const Qt={};if(It){const Dt=g.getPerformanceMeasurement(gt);Dt&&(Qt.resourceTiming={},Qt.resourceTiming[De.source]=JSON.parse(JSON.stringify(Dt)))}ke(null,Qt)}var Dt})}reloadTile(De,ke){const gt=this.loaded;return gt&&gt[De.uid]?super.reloadTile(De,ke):this.loadTile(De,ke)}loadGeoJSON(De,ke){if(De.request)g.getJSON(De.request,ke);else{if("string"!=typeof De.data)return ke(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));try{return ke(null,JSON.parse(De.data))}catch{return ke(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(De,ke){try{ke(null,this._geoJSONIndex.getClusterExpansionZoom(De.clusterId))}catch(gt){ke(gt)}}getClusterChildren(De,ke){try{ke(null,this._geoJSONIndex.getChildren(De.clusterId))}catch(gt){ke(gt)}}getClusterLeaves(De,ke){try{ke(null,this._geoJSONIndex.getLeaves(De.clusterId,De.limit,De.offset))}catch(gt){ke(gt)}}}class yo{constructor(De){this.self=De,this.actor=new g.Actor(De,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=g.getProjection({name:"mercator"}),this.workerSourceTypes={vector:g.VectorTileWorkerSource,geojson:zi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ke,gt)=>{if(this.workerSourceTypes[ke])throw new Error(`Worker source with name "${ke}" already registered.`);this.workerSourceTypes[ke]=gt},this.self.registerRTLTextPlugin=ke=>{if(g.plugin.isParsed())throw new Error("RTL text plugin already registered.");g.plugin.applyArabicShaping=ke.applyArabicShaping,g.plugin.processBidirectionalText=ke.processBidirectionalText,g.plugin.processStyledBidirectionalText=ke.processStyledBidirectionalText}}clearCaches(De,ke,gt){delete this.layerIndexes[De],delete this.availableImages[De],delete this.workerSources[De],delete this.demWorkerSources[De],gt()}checkIfReady(De,ke,gt){gt()}setReferrer(De,ke){this.referrer=ke}spriteLoaded(De,ke){this.isSpriteLoaded[De]=ke;for(const gt in this.workerSources[De]){const It=this.workerSources[De][gt];for(const ct in It)It[ct]instanceof g.VectorTileWorkerSource&&(It[ct].isSpriteLoaded=ke,It[ct].fire(new g.Event("isSpriteLoaded")))}}setImages(De,ke,gt){this.availableImages[De]=ke;for(const It in this.workerSources[De]){const ct=this.workerSources[De][It];for(const nn in ct)ct[nn].availableImages=ke}gt()}enableTerrain(De,ke,gt){this.terrain=ke,gt()}setProjection(De,ke){this.projections[De]=g.getProjection(ke)}setLayers(De,ke,gt){this.getLayerIndex(De).replace(ke),gt()}updateLayers(De,ke,gt){this.getLayerIndex(De).update(ke.layers,ke.removedIds),gt()}loadTile(De,ke,gt){const It=this.enableTerrain?g.extend({enableTerrain:this.terrain},ke):ke;It.projection=this.projections[De]||this.defaultProjection,this.getWorkerSource(De,ke.type,ke.source).loadTile(It,gt)}loadDEMTile(De,ke,gt){const It=this.enableTerrain?g.extend({buildQuadTree:this.terrain},ke):ke;this.getDEMWorkerSource(De,ke.source).loadTile(It,gt)}reloadTile(De,ke,gt){const It=this.enableTerrain?g.extend({enableTerrain:this.terrain},ke):ke;It.projection=this.projections[De]||this.defaultProjection,this.getWorkerSource(De,ke.type,ke.source).reloadTile(It,gt)}abortTile(De,ke,gt){this.getWorkerSource(De,ke.type,ke.source).abortTile(ke,gt)}removeTile(De,ke,gt){this.getWorkerSource(De,ke.type,ke.source).removeTile(ke,gt)}removeSource(De,ke,gt){if(!this.workerSources[De]||!this.workerSources[De][ke.type]||!this.workerSources[De][ke.type][ke.source])return;const It=this.workerSources[De][ke.type][ke.source];delete this.workerSources[De][ke.type][ke.source],void 0!==It.removeSource?It.removeSource(ke,gt):gt()}loadWorkerSource(De,ke,gt){try{this.self.importScripts(ke.url),gt()}catch(It){gt(It.toString())}}syncRTLPluginState(De,ke,gt){try{g.plugin.setState(ke);const It=g.plugin.getPluginURL();if(g.plugin.isLoaded()&&!g.plugin.isParsed()&&null!=It){this.self.importScripts(It);const ct=g.plugin.isParsed();gt(ct?void 0:new Error(`RTL Text Plugin failed to import scripts from ${It}`),ct)}}catch(It){gt(It.toString())}}getAvailableImages(De){let ke=this.availableImages[De];return ke||(ke=[]),ke}getLayerIndex(De){let ke=this.layerIndexes[De];return ke||(ke=this.layerIndexes[De]=new Ne),ke}getWorkerSource(De,ke,gt){return this.workerSources[De]||(this.workerSources[De]={}),this.workerSources[De][ke]||(this.workerSources[De][ke]={}),this.workerSources[De][ke][gt]||(this.workerSources[De][ke][gt]=new this.workerSourceTypes[ke]({send:(ct,nn,Qt,Dt,hn,qn)=>{this.actor.send(ct,nn,Qt,De,hn,qn)},scheduler:this.actor.scheduler},this.getLayerIndex(De),this.getAvailableImages(De),this.isSpriteLoaded[De])),this.workerSources[De][ke][gt]}getDEMWorkerSource(De,ke){return this.demWorkerSources[De]||(this.demWorkerSources[De]={}),this.demWorkerSources[De][ke]||(this.demWorkerSources[De][ke]=new We),this.demWorkerSources[De][ke]}enforceCacheSizeLimit(De,ke){g.enforceCacheSizeLimit(ke)}getWorkerPerformanceMetrics(De,ke,gt){gt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new yo(self)),yo}),Fe(0,function(g){function me(x,h){if(Array.isArray(x)){if(!Array.isArray(h)||x.length!==h.length)return!1;for(let v=0;v<x.length;v++)if(!me(x[v],h[v]))return!1;return!0}if("object"==typeof x&&null!==x&&null!==h){if("object"!=typeof h||Object.keys(x).length!==Object.keys(h).length)return!1;for(const v in x)if(!me(x[v],h[v]))return!1;return!0}return x===h}var Be=Ne;function Ne(x){return h=x,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,D,k=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(k);try{D=new Worker(F),S=!0}catch{S=!1}return D&&D.terminate(),URL.revokeObjectURL(F),S}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var S=document.createElement("canvas");S.width=S.height=1;var D=S.getContext("2d");if(!D)return!1;var k=D.getImageData(0,0,1,1);return k&&k.width===S.width}()||(void 0===We[v=h&&h.failIfMajorPerformanceCaveat]&&(We[v]=function(S){var D,F,B,V,k=(F=S,B=document.createElement("canvas"),(V=Object.create(Ne.webGLContextAttributes)).failIfMajorPerformanceCaveat=F,B.getContext("webgl",V)||B.getContext("experimental-webgl",V));if(!k)return!1;try{D=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!D||k.isContextLost())&&(k.shaderSource(D,"void main() {}"),k.compileShader(D),!0===k.getShaderParameter(D,k.COMPILE_STATUS))}(v)),!We[v]||document.documentMode));var h,v}var We={};function ht(x,h,v){const S=g.window.document.createElement(x);return void 0!==h&&(S.className=h),v&&v.appendChild(S),S}function Wt(x,h,v){const S=g.window.document.createElementNS("http://www.w3.org/2000/svg",x);for(const D of Object.keys(h))S.setAttributeNS(null,D,h[D]);return v&&v.appendChild(S),S}Ne.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Xe=g.window.document&&g.window.document.documentElement.style,et=Xe&&void 0!==Xe.userSelect?"userSelect":"WebkitUserSelect";let He;function Bt(){Xe&&et&&(He=Xe[et],Xe[et]="none")}function ce(){Xe&&et&&(Xe[et]=He)}function Ce(x){x.preventDefault(),x.stopPropagation(),g.window.removeEventListener("click",Ce,!0)}function te(){g.window.addEventListener("click",Ce,!0),g.window.setTimeout(()=>{g.window.removeEventListener("click",Ce,!0)},0)}function Q(x,h){const v=x.getBoundingClientRect();return ie(x,v,h)}function ne(x,h){const v=x.getBoundingClientRect(),S=[];for(let D=0;D<h.length;D++)S.push(ie(x,v,h[D]));return S}function Re(x){return void 0!==g.window.InstallTrigger&&2===x.button&&x.ctrlKey&&g.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:x.button}function ie(x,h,v){const S=x.offsetWidth===h.width?1:x.offsetWidth/h.width;return new g.Point((v.clientX-h.left)*S,(v.clientY-h.top)*S)}function J(x,h){var v=h[0],S=h[1],D=h[2],k=h[3],F=v*k-D*S;return F?(x[0]=k*(F=1/F),x[1]=-S*F,x[2]=-D*F,x[3]=v*F,x):null}function xe(x){const{userImage:h}=x;return!!(h&&h.render&&h.render())&&(x.data.replace(new Uint8Array(h.data.buffer)),!0)}class ee extends g.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new g.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(h){if(this.loaded!==h&&(this.loaded=h,h)){for(const{ids:v,callback:S}of this.requestors)this._notify(v,S);this.requestors=[]}}hasImage(h){return!!this.getImage(h)}getImage(h){return this.images[h]}addImage(h,v){this._validate(h,v)&&(this.images[h]=v)}_validate(h,v){let S=!0;return this._validateStretch(v.stretchX,v.data&&v.data.width)||(this.fire(new g.ErrorEvent(new Error(`Image "${h}" has invalid "stretchX" value`))),S=!1),this._validateStretch(v.stretchY,v.data&&v.data.height)||(this.fire(new g.ErrorEvent(new Error(`Image "${h}" has invalid "stretchY" value`))),S=!1),this._validateContent(v.content,v)||(this.fire(new g.ErrorEvent(new Error(`Image "${h}" has invalid "content" value`))),S=!1),S}_validateStretch(h,v){if(!h)return!0;let S=0;for(const D of h){if(D[0]<S||D[1]<D[0]||v<D[1])return!1;S=D[1]}return!0}_validateContent(h,v){return!(h&&(4!==h.length||h[0]<0||v.data.width<h[0]||h[1]<0||v.data.height<h[1]||h[2]<0||v.data.width<h[2]||h[3]<0||v.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))}updateImage(h,v){v.version=this.images[h].version+1,this.images[h]=v,this.updatedImages[h]=!0}removeImage(h){const v=this.images[h];delete this.images[h],delete this.patterns[h],v.userImage&&v.userImage.onRemove&&v.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(h,v){let S=!0;if(!this.isLoaded())for(const D of h)this.images[D]||(S=!1);this.isLoaded()||S?this._notify(h,v):this.requestors.push({ids:h,callback:v})}_notify(h,v){const S={};for(const D of h){this.images[D]||this.fire(new g.Event("styleimagemissing",{id:D}));const k=this.images[D];k?S[D]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:!(!k.userImage||!k.userImage.render)}:g.warnOnce(`Image "${D}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}v(null,S)}getPixelSize(){const{width:h,height:v}=this.atlasImage;return{width:h,height:v}}getPattern(h){const v=this.patterns[h],S=this.getImage(h);if(!S)return null;if(v&&v.position.version===S.version)return v.position;if(v)v.position.version=S.version;else{const D={w:S.data.width+2,h:S.data.height+2,x:0,y:0},k=new g.ImagePosition(D,S);this.patterns[h]={bin:D,position:k}}return this._updatePatternAtlas(),this.patterns[h].position}bind(h){const v=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new g.Texture(h,this.atlasImage,v.RGBA),this.atlasTexture&&this.atlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(){const h=[];for(const k in this.patterns)h.push(this.patterns[k].bin);const{w:v,h:S}=g.potpack(h),D=this.atlasImage;D.resize({width:v||1,height:S||1});for(const k in this.patterns){const{bin:F}=this.patterns[k],B=F.x+1,V=F.y+1,X=this.images[k].data,q=X.width,fe=X.height;g.RGBAImage.copy(X,D,{x:0,y:0},{x:B,y:V},{width:q,height:fe}),g.RGBAImage.copy(X,D,{x:0,y:fe-1},{x:B,y:V-1},{width:q,height:1}),g.RGBAImage.copy(X,D,{x:0,y:0},{x:B,y:V+fe},{width:q,height:1}),g.RGBAImage.copy(X,D,{x:q-1,y:0},{x:B-1,y:V},{width:1,height:fe}),g.RGBAImage.copy(X,D,{x:0,y:0},{x:B+q,y:V},{width:1,height:fe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(h){for(const v of h){if(this.callbackDispatchedThisFrame[v])continue;this.callbackDispatchedThisFrame[v]=!0;const S=this.images[v];xe(S)&&this.updateImage(v,S)}}}const pe=new g.Properties({anchor:new g.DataConstantProperty(g.spec.light.anchor),position:new class{constructor(){this.specification=g.spec.light.position}possiblyEvaluate(x,h){return function([v,S,D]){const k=g.degToRad(S+90),F=g.degToRad(D);return{x:v*Math.cos(k)*Math.sin(F),y:v*Math.sin(k)*Math.sin(F),z:v*Math.cos(F),azimuthal:S,polar:D}}(x.expression.evaluate(h))}interpolate(x,h,v){return{x:g.number(x.x,h.x,v),y:g.number(x.y,h.y,v),z:g.number(x.z,h.z,v),azimuthal:g.number(x.azimuthal,h.azimuthal,v),polar:g.number(x.polar,h.polar,v)}}},color:new g.DataConstantProperty(g.spec.light.color),intensity:new g.DataConstantProperty(g.spec.light.intensity)});class ae extends g.Evented{constructor(h){super(),this._transitionable=new g.Transitionable(pe),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(h,v={}){if(!this._validate(g.validateLight,h,v))for(const S in h){const D=h[S];g.endsWith(S,"-transition")?this._transitionable.setTransition(S.slice(0,-11),D):this._transitionable.setValue(S,D)}}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}_validate(h,v,S){return(!S||!1!==S.validate)&&g.emitValidationErrors(this,h.call(g.validateStyle,g.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:g.spec})))}}const we=new g.Properties({source:new g.DataConstantProperty(g.spec.terrain.source),exaggeration:new g.DataConstantProperty(g.spec.terrain.exaggeration)});let oe=class extends g.Evented{constructor(x,h){super(),this._transitionable=new g.Transitionable(we),this.set(x),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=h}get(){return this._transitionable.serialize()}set(x){for(const h in x){const v=x[h];g.endsWith(h,"-transition")?this._transitionable.setTransition(h.slice(0,-11),v):this._transitionable.setValue(h,v)}}updateTransitions(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(x){this.properties=this._transitioning.possiblyEvaluate(x)}};function je(x,h,v,S){const D=g.smoothstep(45,65,v),[k,F]=Te(x,S),B=g.length(h);let V=1-Math.min(1,Math.exp((B-k)/(F-k)*-6));return V*=V*V,V=Math.min(1,1.00747*V),V*D*x.alpha}function Te(x,h){const v=.5/Math.tan(.5*h);return[x.range[0]+v,x.range[1]+v]}const K=new g.Properties({range:new g.DataConstantProperty(g.spec.fog.range),color:new g.DataConstantProperty(g.spec.fog.color),"high-color":new g.DataConstantProperty(g.spec.fog["high-color"]),"space-color":new g.DataConstantProperty(g.spec.fog["space-color"]),"horizon-blend":new g.DataConstantProperty(g.spec.fog["horizon-blend"]),"star-intensity":new g.DataConstantProperty(g.spec.fog["star-intensity"])});class qe extends g.Evented{constructor(h,v){super(),this._transitionable=new g.Transitionable(K),this.set(h),this._transitioning=this._transitionable.untransitioned(),this._transform=v}get state(){const h=this._transform,v="globe"===h.projection.name,S=g.globeToMercatorTransition(h.zoom),D=this.properties.get("range"),k=[.5,3];return{range:v?[g.number(k[0],D[0],S),g.number(k[1],D[1],S)]:D,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(h,v={}){if(!this._validate(g.validateFog,h,v)){for(const S of Object.keys(g.spec.fog))h&&void 0===h[S]&&(h[S]=g.spec.fog[S].default);for(const S in h){const D=h[S];g.endsWith(S,"-transition")?this._transitionable.setTransition(S.slice(0,-11),D):this._transitionable.setValue(S,D)}}}getOpacity(h){if(!this._transform.projection.supportsFog)return 0;const v=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:g.smoothstep(45,65,h))*v.a}getOpacityAtLatLng(h,v){return this._transform.projection.supportsFog?function(S,D,k){const F=g.MercatorCoordinate.fromLngLat(D),B=k.elevation?k.elevation.getAtPointOrZero(F):0,V=[F.x,F.y,B];return g.transformMat4(V,V,k.mercatorFogMatrix),je(S,V,k.pitch,k._fov)}(this.state,h,v):0}getFovAdjustedRange(h){return this._transform.projection.supportsFog?Te(this.state,h):[0,1]}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}_validate(h,v,S){return(!S||!1!==S.validate)&&g.emitValidationErrors(this,h.call(g.validateStyle,g.extend({value:v,style:{glyphs:!0,sprite:!0},styleSpec:g.spec})))}}class Me{constructor(h,v){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=g.uniqueId();const S=this.workerPool.acquire(this.id);for(let D=0;D<S.length;D++){const k=new Me.Actor(S[D],v,this.id);k.name=`Worker ${D}`,this.actors.push(k)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(h,v,S){g.asyncAll(this.actors,(D,k)=>{D.send(h,v,k)},S=S||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(h=>{h.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Je(x,h,v){return h*(g.EXTENT/(x.tileSize*Math.pow(2,v-x.tileID.overscaledZ)))}Me.Actor=g.Actor;class Ue{constructor(h,v,S,D){this.screenBounds=h,this.cameraPoint=v,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=S,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,D)}static createFromScreenPoints(h,v){let S,D;if(h instanceof g.Point||"number"==typeof h[0]){const k=g.Point.convert(h);S=[k],D=v.isPointAboveHorizon(k)}else{const k=g.Point.convert(h[0]),F=g.Point.convert(h[1]);S=[k,F],D=g.polygonizeBounds(k,F).every(B=>v.isPointAboveHorizon(B))}return new Ue(S,v.getCameraPoint(),D,v)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(h){return g.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],h)}bufferedCameraGeometry(h){const v=this.screenBounds[0],S=1===this.screenBounds.length?this.screenBounds[0].add(new g.Point(1,1)):this.screenBounds[1],D=g.polygonizeBounds(v,S,0,!1);return this.cameraPoint.y>S.y&&(this.cameraPoint.x>v.x&&this.cameraPoint.x<S.x?D.splice(3,0,this.cameraPoint):this.cameraPoint.x>=S.x?D[2]=this.cameraPoint:this.cameraPoint.x<=v.x&&(D[3]=this.cameraPoint)),g.bufferConvexPolygon(D,h)}bufferedCameraGeometryGlobe(h){const v=this.screenBounds[0],S=1===this.screenBounds.length?this.screenBounds[0].add(new g.Point(1,1)):this.screenBounds[1],D=g.polygonizeBounds(v,S,h),k=this.cameraPoint.clone();switch(3*((k.y>v.y)+(k.y>S.y))+((k.x>v.x)+(k.x>S.x))){case 0:D[0]=k,D[4]=k.clone();break;case 1:D.splice(1,0,k);break;case 2:D[1]=k;break;case 3:D.splice(4,0,k);break;case 5:D.splice(2,0,k);break;case 6:D[3]=k;break;case 7:D.splice(3,0,k);break;case 8:D[2]=k}return D}containsTile(h,v,S,D=0){const k=h.queryPadding/v._pixelsPerMercatorPixel+1,F=S?this._bufferedCameraMercator(k,v):this._bufferedScreenMercator(k,v);let B=h.tileID.wrap+(F.unwrapped?D:0);const V=F.polygon.map(ft=>g.getTilePoint(h.tileTransform,ft,B));if(!g.polygonIntersectsBox(V,0,0,g.EXTENT,g.EXTENT))return;B=h.tileID.wrap+(this.screenGeometryMercator.unwrapped?D:0);const X=this.screenGeometryMercator.polygon.map(ft=>g.getTileVec3(h.tileTransform,ft,B)),q=X.map(ft=>new g.Point(ft[0],ft[1])),fe=v.getFreeCameraOptions().position||new g.MercatorCoordinate(0,0,0),Ve=g.getTileVec3(h.tileTransform,fe,B),Ye=X.map(ft=>{const ge=g.sub(ft,ft,Ve);return g.normalize(ge,ge),new g.Ray(Ve,ge)}),it=Je(h,1,v.zoom)*v._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:q,tilespaceRays:Ye,bufferedTilespaceGeometry:V,bufferedTilespaceBounds:(st=g.getBounds(V),st.min.x=g.clamp(st.min.x,0,g.EXTENT),st.min.y=g.clamp(st.min.y,0,g.EXTENT),st.max.x=g.clamp(st.max.x,0,g.EXTENT),st.max.y=g.clamp(st.max.y,0,g.EXTENT),st),tile:h,tileID:h.tileID,pixelToTileUnitsFactor:it};var st}_bufferedScreenMercator(h,v){const S=lt(h);if(this._screenRaycastCache[S])return this._screenRaycastCache[S];{let D;return D="globe"===v.projection.name?this._projectAndResample(this.bufferedScreenGeometry(h),v):{polygon:this.bufferedScreenGeometry(h).map(k=>v.pointCoordinate3D(k)),unwrapped:!0},this._screenRaycastCache[S]=D,D}}_bufferedCameraMercator(h,v){const S=lt(h);if(this._cameraRaycastCache[S])return this._cameraRaycastCache[S];{let D;return D="globe"===v.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(h),v):{polygon:this.bufferedCameraGeometry(h).map(k=>v.pointCoordinate3D(k)),unwrapped:!0},this._cameraRaycastCache[S]=D,D}}_projectAndResample(h,v){const S=function(k,F){const B=g.multiply([],F.pixelMatrix,F.globeMatrix),V=[0,-g.GLOBE_RADIUS,0,1],X=[0,g.GLOBE_RADIUS,0,1],q=[0,0,0,1];g.transformMat4$1(V,V,B),g.transformMat4$1(X,X,B),g.transformMat4$1(q,q,B);const fe=new g.Point(V[0]/V[3],V[1]/V[3]),Ve=new g.Point(X[0]/X[3],X[1]/X[3]),Ye=g.polygonContainsPoint(k,fe)&&V[3]<q[3],it=g.polygonContainsPoint(k,Ve)&&X[3]<q[3];if(!Ye&&!it)return null;const st=function(Gt,rn,Jt){for(let wn=1;wn<Gt.length;wn++){const ur=Qe(rn.pointCoordinate3D(Gt[wn-1]).x),mn=Qe(rn.pointCoordinate3D(Gt[wn]).x);if(Jt<0){if(ur<mn)return{idx:wn,t:-ur/(mn-1-ur)}}else if(mn<ur)return{idx:wn,t:(1-ur)/(mn+1-ur)}}return null}(k,F,Ye?-1:1);if(!st)return null;const{idx:ft,t:ge}=st;let Ke=ft>1?le(k.slice(0,ft),F):[],wt=ft<k.length?le(k.slice(ft),F):[];Ke=Ke.map(Gt=>new g.Point(Qe(Gt.x),Gt.y)),wt=wt.map(Gt=>new g.Point(Qe(Gt.x),Gt.y));const St=[...Ke];0===St.length&&St.push(wt[wt.length-1]);const Ht=g.number(St[St.length-1].y,(0===wt.length?Ke[0]:wt[0]).y,ge);let qt;return qt=Ye?[new g.Point(0,Ht),new g.Point(0,0),new g.Point(1,0),new g.Point(1,Ht)]:[new g.Point(1,Ht),new g.Point(1,1),new g.Point(0,1),new g.Point(0,Ht)],St.push(...qt),0===wt.length?St.push(Ke[0]):St.push(...wt),{polygon:St.map(Gt=>new g.MercatorCoordinate(Gt.x,Gt.y)),unwrapped:!1}}(h,v);if(S)return S;const D=function(k,F){let B=!1,V=-1/0,X=0;for(let fe=0;fe<k.length-1;fe++)k[fe].x>V&&(V=k[fe].x,X=fe);for(let fe=0;fe<k.length-1;fe++){const Ve=(X+fe)%(k.length-1),Ye=k[Ve],it=k[Ve+1];Math.abs(Ye.x-it.x)>.5&&(Ye.x<it.x?(Ye.x+=1,0===Ve&&(k[k.length-1].x+=1)):(it.x+=1,Ve+1===k.length-1&&(k[0].x+=1)),B=!0)}const q=g.mercatorXfromLng(F.center.lng);return B&&q<Math.abs(q-1)&&k.forEach(fe=>{fe.x-=1}),{polygon:k,unwrapped:B}}(le(h,v).map(k=>new g.Point(Qe(k.x),k.y)),v);return{polygon:D.polygon.map(k=>new g.MercatorCoordinate(k.x,k.y)),unwrapped:D.unwrapped}}}function le(x,h){return g.resample(x,v=>{const S=h.pointCoordinate3D(v);v.x=S.x,v.y=S.y},1/256)}function Qe(x){return x<0?1+x%1:x%1}function lt(x){return 100*x|0}function dn(x,h,v,S,D){const k=function(F,B){if(F)return D(F);if(B){x.url&&B.tiles&&x.tiles&&delete x.tiles;const V=g.pick(g.extend(B,x),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(V.vectorLayers=B.vector_layers,V.vectorLayerIds=V.vectorLayers.map(X=>X.id)),V.tiles=h.canonicalizeTileset(V,x.url),D(null,V)}};return x.url?g.getJSON(h.transformRequest(h.normalizeSourceURL(x.url,null,v,S),g.ResourceType.Source),k):g.exported.frame(()=>k(null,x))}class Xt{constructor(h,v,S){this.bounds=g.LngLatBounds.convert(this.validateBounds(h)),this.minzoom=v||0,this.maxzoom=S||24}validateBounds(h){return Array.isArray(h)&&4===h.length?[Math.max(-180,h[0]),Math.max(-90,h[1]),Math.min(180,h[2]),Math.min(90,h[3])]:[-180,-90,180,90]}contains(h){const v=Math.pow(2,h.z),S=Math.floor(g.mercatorXfromLng(this.bounds.getWest())*v),D=Math.floor(g.mercatorYfromLat(this.bounds.getNorth())*v),k=Math.ceil(g.mercatorXfromLng(this.bounds.getEast())*v),F=Math.ceil(g.mercatorYfromLat(this.bounds.getSouth())*v);return h.x>=S&&h.x<k&&h.y>=D&&h.y<F}}class _n{constructor(h,v,S){this.context=h;const D=h.gl;this.buffer=D.createBuffer(),this.dynamicDraw=!!S,this.context.unbindVAO(),h.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||v.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(h){const v=this.context.gl;this.context.unbindVAO(),this.bind(),v.bufferSubData(v.ELEMENT_ARRAY_BUFFER,0,h.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qn{constructor(h,v,S,D){this.length=v.length,this.attributes=S,this.itemSize=v.bytesPerElement,this.dynamicDraw=D,this.context=h;const k=h.gl;this.buffer=k.createBuffer(),h.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||v.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(h){const v=this.context.gl;this.bind(),v.bufferSubData(v.ARRAY_BUFFER,0,h.arrayBuffer)}enableAttributes(h,v){for(let S=0;S<this.attributes.length;S++){const D=v.attributes[this.attributes[S].name];void 0!==D&&h.enableVertexAttribArray(D)}}setVertexAttribPointers(h,v,S){for(let D=0;D<this.attributes.length;D++){const k=this.attributes[D],F=v.attributes[k.name];void 0!==F&&h.vertexAttribPointer(F,k.components,h[Pn[k.type]],!1,this.itemSize,k.offset+this.itemSize*(S||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class jt{constructor(h){this.gl=h.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(h){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mr extends jt{getDefault(){return g.Color.transparent}set(h){const v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)}}class Tn extends jt{getDefault(){return 1}set(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)}}class Vn extends jt{getDefault(){return 0}set(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)}}class un extends jt{getDefault(){return[!0,!0,!0,!0]}set(h){const v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)}}class Ft extends jt{getDefault(){return!0}set(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)}}class Cn extends jt{getDefault(){return 255}set(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)}}class jn extends jt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(h){const v=this.current;(h.func!==v.func||h.ref!==v.ref||h.mask!==v.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)}}class Pt extends jt{getDefault(){const h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]}set(h){const v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)}}class Pe extends jt{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;h?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),this.current=h,this.dirty=!1}}class Ae extends jt{getDefault(){return[0,1]}set(h){const v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)}}class Se extends jt{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;h?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),this.current=h,this.dirty=!1}}class ut extends jt{getDefault(){return this.gl.LESS}set(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)}}class kt extends jt{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;h?v.enable(v.BLEND):v.disable(v.BLEND),this.current=h,this.dirty=!1}}class cn extends jt{getDefault(){const h=this.gl;return[h.ONE,h.ZERO]}set(h){const v=this.current;(h[0]!==v[0]||h[1]!==v[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)}}class Nn extends jt{getDefault(){return g.Color.transparent}set(h){const v=this.current;(h.r!==v.r||h.g!==v.g||h.b!==v.b||h.a!==v.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)}}class Fn extends jt{getDefault(){return this.gl.FUNC_ADD}set(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)}}class vn extends jt{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;h?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),this.current=h,this.dirty=!1}}class Yr extends jt{getDefault(){return this.gl.BACK}set(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)}}class si extends jt{getDefault(){return this.gl.CCW}set(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)}}let sr,Cr=class extends jt{getDefault(){return null}set(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)}};class Ei extends jt{getDefault(){return this.gl.TEXTURE0}set(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)}}class Hr extends jt{getDefault(){const h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]}set(h){const v=this.current;(h[0]!==v[0]||h[1]!==v[1]||h[2]!==v[2]||h[3]!==v[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)}}class _i extends jt{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,h),this.current=h,this.dirty=!1}}class Ni extends jt{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.bindRenderbuffer(v.RENDERBUFFER,h),this.current=h,this.dirty=!1}}class zi extends jt{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.bindTexture(v.TEXTURE_2D,h),this.current=h,this.dirty=!1}}class yo extends jt{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}}class _t extends jt{getDefault(){return null}set(h){const v=this.gl;v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1}}class De extends jt{constructor(h){super(h),this.vao=h.extVertexArrayObject}getDefault(){return null}set(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)}}class ke extends jt{getDefault(){return 4}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}}class gt extends jt{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}}class It extends jt{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const v=this.gl;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}}class ct extends jt{constructor(h,v){super(h),this.context=h,this.parent=v}getDefault(){return null}}class nn extends ct{setDirty(){this.dirty=!0}set(h){if(h===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}}class Qt extends ct{attachment(){return this.gl.DEPTH_ATTACHMENT}set(h){if(h===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const v=this.gl;v.framebufferRenderbuffer(v.FRAMEBUFFER,this.attachment(),v.RENDERBUFFER,h),this.current=h,this.dirty=!1}}class Dt extends Qt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class hn{constructor(h,v,S,D){this.context=h,this.width=v,this.height=S;const k=this.framebuffer=h.gl.createFramebuffer();this.colorAttachment=new nn(h,k),D&&(this.depthAttachment=new Qt(h,k))}destroy(){const h=this.context.gl,v=this.colorAttachment.get();if(v&&h.deleteTexture(v),this.depthAttachment){const S=this.depthAttachment.get();S&&h.deleteRenderbuffer(S)}h.deleteFramebuffer(this.framebuffer)}}class qn{constructor(h,v=!1){if(this.gl=h,this.isWebGL2=v,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),v){const S=h;this.extVertexArrayObject={createVertexArrayOES:S.createVertexArray.bind(h),deleteVertexArrayOES:S.deleteVertexArray.bind(h),bindVertexArrayOES:S.bindVertexArray.bind(h)}}this.clearColor=new mr(this),this.clearDepth=new Tn(this),this.clearStencil=new Vn(this),this.colorMask=new un(this),this.depthMask=new Ft(this),this.stencilMask=new Cn(this),this.stencilFunc=new jn(this),this.stencilOp=new Pt(this),this.stencilTest=new Pe(this),this.depthRange=new Ae(this),this.depthTest=new Se(this),this.depthFunc=new ut(this),this.blend=new kt(this),this.blendFunc=new cn(this),this.blendColor=new Nn(this),this.blendEquation=new Fn(this),this.cullFace=new vn(this),this.cullFaceSide=new Yr(this),this.frontFace=new si(this),this.program=new Cr(this),this.activeTexture=new Ei(this),this.viewport=new Hr(this),this.bindFramebuffer=new _i(this),this.bindRenderbuffer=new Ni(this),this.bindTexture=new zi(this),this.bindVertexBuffer=new yo(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new De(this),this.pixelStoreUnpack=new ke(this),this.pixelStoreUnpackPremultiplyAlpha=new gt(this),this.pixelStoreUnpackFlipY=new It(this),this.extTextureFilterAnisotropic=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=h.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=h.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=h.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=h.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),v||(this.extTextureHalfFloat=h.getExtension("OES_texture_half_float")),(v||this.extTextureHalfFloat&&h.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=h.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=v||h.getExtension("OES_standard_derivatives"),this.extTimerQuery=h.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=h.getParameter(h.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(h,v){return new _n(this,h,v)}createVertexBuffer(h,v,S){return new Qn(this,h,v,S)}createRenderbuffer(h,v,S){const D=this.gl,k=D.createRenderbuffer();return this.bindRenderbuffer.set(k),D.renderbufferStorage(D.RENDERBUFFER,h,v,S),this.bindRenderbuffer.set(null),k}createFramebuffer(h,v,S){return new hn(this,h,v,S)}clear({color:h,depth:v,stencil:S}){const D=this.gl;let k=0;h&&(k|=D.COLOR_BUFFER_BIT,this.clearColor.set(h),this.colorMask.set([!0,!0,!0,!0])),void 0!==v&&(k|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(v),this.depthMask.set(!0)),void 0!==S&&(k|=D.STENCIL_BUFFER_BIT,this.clearStencil.set(S),this.stencilMask.set(255)),D.clear(k)}setCullFace(h){!1===h.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(h.mode),this.frontFace.set(h.frontFace))}setDepthMode(h){h.func!==this.gl.ALWAYS||h.mask?(this.depthTest.set(!0),this.depthFunc.set(h.func),this.depthMask.set(h.mask),this.depthRange.set(h.range)):this.depthTest.set(!1)}setStencilMode(h){h.test.func!==this.gl.ALWAYS||h.mask?(this.stencilTest.set(!0),this.stencilMask.set(h.mask),this.stencilOp.set([h.fail,h.depthFail,h.pass]),this.stencilFunc.set({func:h.test.func,ref:h.ref,mask:h.test.mask})):this.stencilTest.set(!1)}setColorMode(h){me(h.blendFunction,g.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(h.blendFunction),this.blendColor.set(h.blendColor)),this.colorMask.set(h.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class nr extends g.Evented{constructor(h,v,S,D){if(super(),this.id=h,this.dispatcher=S,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,g.extend(this,g.pick(v,["url","scheme","tileSize","promoteId"])),this._options=g.extend({type:"vector"},v),this._collectResourceTiming=v.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D),this._tileWorkers={},this._deduped=new g.DedupedRequest}load(h){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"}));const v=Array.isArray(this.map._language)?this.map._language.join():this.map._language,S=this.map._worldview;this._tileJSONRequest=dn(this._options,this.map._requestManager,v,S,(D,k)=>{this._tileJSONRequest=null,this._loaded=!0,D?(v&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${v}`),S&&2!==S.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${S}`),this.fire(new g.ErrorEvent(D))):k&&(g.extend(this,k),k.bounds&&(this.tileBounds=new Xt(k.bounds,this.minzoom,this.maxzoom)),g.postTurnstileEvent(k.tiles,this.map._requestManager._customAccessToken),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))),h&&h(D)})}loaded(){return this._loaded}hasTile(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)}onAdd(h){this.map=h,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(h){return this._options.tiles=h,this.reload(),this}setUrl(h){return this.url=h,this._options.url=h,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return g.extend({},this._options)}loadTile(h,v){const S=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),D={request:this.map._requestManager.transformRequest(S,g.ResourceType.Tile),data:void 0,uid:h.uid,tileID:h.tileID,tileZoom:h.tileZoom,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:g.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:h.isSymbolTile};if(D.request.collectResourceTiming=this._collectResourceTiming,h.actor&&"expired"!==h.state)"loading"===h.state?h.reloadCallback=v:h.request=h.actor.send("reloadTile",D,k.bind(this));else if(h.actor=this._tileWorkers[S]=this._tileWorkers[S]||this.dispatcher.getActor(),this.dispatcher.ready)h.request=h.actor.send("loadTile",D,k.bind(this),void 0,!0);else{const F=g.loadVectorTile.call({deduped:this._deduped},D,(B,V)=>{B||!V?k.call(this,B):(D.data={cacheControl:V.cacheControl,expires:V.expires,rawData:V.rawData.slice(0)},h.actor&&h.actor.send("loadTile",D,k.bind(this),void 0,!0))},!0);h.request={cancel:F}}function k(F,B){return delete h.request,h.aborted?v(null):F&&404!==F.status?v(F):(B&&B.resourceTiming&&(h.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&h.setExpiryData(B),h.loadVectorData(B,this.map.painter),g.cacheEntryPossiblyAdded(this.dispatcher),v(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}}abortTile(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id})}unloadTile(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Xn extends g.Evented{constructor(h,v,S,D){super(),this.id=h,this.dispatcher=S,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=g.extend({type:"raster"},v),g.extend(this,g.pick(v,["url","scheme","tileSize"]))}load(h){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dn(this._options,this.map._requestManager,null,null,(v,S)=>{this._tileJSONRequest=null,this._loaded=!0,v?this.fire(new g.ErrorEvent(v)):S&&(g.extend(this,S),S.bounds&&(this.tileBounds=new Xt(S.bounds,this.minzoom,this.maxzoom)),g.postTurnstileEvent(S.tiles),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))),h&&h(v)})}loaded(){return this._loaded}onAdd(h){this.map=h,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(h){return this._options.tiles=h,this.reload(),this}setUrl(h){return this.url=h,this._options.url=h,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return g.extend({},this._options)}hasTile(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)}loadTile(h,v){const S=g.exported.devicePixelRatio>=2,D=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),S,this.tileSize);h.request=g.getImage(this.map._requestManager.transformRequest(D,g.ResourceType.Tile),(k,F,B,V)=>(delete h.request,h.aborted?(h.state="unloaded",v(null)):k?(h.state="errored",v(k)):F?(this.map._refreshExpiredTiles&&h.setExpiryData({cacheControl:B,expires:V}),h.setTexture(F,this.map.painter),h.state="loaded",g.cacheEntryPossiblyAdded(this.dispatcher),void v(null)):v(null)))}static loadTileData(h,v,S){h.setTexture(v,S)}static unloadTileData(h,v){h.texture&&v.saveTileTexture(h.texture)}abortTile(h,v){h.request&&(h.request.cancel(),delete h.request),v()}unloadTile(h,v){h.texture&&this.map.painter.saveTileTexture(h.texture),v()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function bi(x,h,v,S,D,k,F,B){const V=[x,v,D,h,S,k,1,1,1],X=[F,B,1],q=g.adjoint([],V),[fe,Ve,Ye]=g.transformMat3(X,X,g.transpose(q,q));return g.multiply$1(V,[fe,0,0,0,Ve,0,0,0,Ye],V)}class Si extends g.Evented{constructor(h,v,S,D){super(),this.id=h,this.dispatcher=S,this.coordinates=v.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=v,this._dirty=!1}load(h,v){this._loaded=v||!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=g.getImage(this.map._requestManager.transformRequest(this.url,g.ResourceType.Image),(S,D)=>{if(this._imageRequest=null,this._loaded=!0,S)this.fire(new g.ErrorEvent(S));else if(D){const{HTMLImageElement:k}=g.window;this.image=D instanceof k?g.exported.getImageData(D):D,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,h&&(this.coordinates=h),this._finishLoading()}})}loaded(){return this._loaded}updateImage(h){return this.image&&h.url?(this._imageRequest&&h.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=h.url,this.load(h.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(h){this.map=h,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(h){this.coordinates=h,this._boundsArray=void 0;const v=h.map(g.MercatorCoordinate.fromLngLat);return this.tileID=function(S){let D=1/0,k=1/0,F=-1/0,B=-1/0;for(const fe of S)D=Math.min(D,fe.x),k=Math.min(k,fe.y),F=Math.max(F,fe.x),B=Math.max(B,fe.y);const V=Math.max(F-D,B-k),X=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),q=Math.pow(2,X);return new g.CanonicalTileID(X,Math.floor((D+F)/2*q),Math.floor((k+B)/2*q))}(v),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(h){for(const V in this.tiles){const X=this.tiles[V];"loaded"!==X.state&&(X.state="loaded",X.texture=this.texture)}if(this._boundsArray)return;const v=g.tileTransform(this.tileID,this.map.transform.projection),[S,D,k,F]=this.coordinates.map(V=>{const X=v.projection.project(V[0],V[1]);return g.getTilePoint(v,X)._round()});this.perspectiveTransform=function(V,X,q,fe,Ve,Ye,it,st,ft,ge){const Ke=bi(0,0,V,0,0,X,V,X),wt=bi(q,fe,Ve,Ye,it,st,ft,ge);return g.multiply$1(wt,g.adjoint(Ke,Ke),wt),[wt[6]/wt[8]*V/g.EXTENT,wt[7]/wt[8]*X/g.EXTENT]}(this.width,this.height,S.x,S.y,D.x,D.y,F.x,F.y,k.x,k.y);const B=this._boundsArray=new g.StructArrayLayout4i8;B.emplaceBack(S.x,S.y,0,0),B.emplaceBack(D.x,D.y,g.EXTENT,0),B.emplaceBack(F.x,F.y,0,g.EXTENT),B.emplaceBack(k.x,k.y,g.EXTENT,g.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=h.createVertexBuffer(B,g.boundsAttributes.members),this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const h=this.map.painter.context,v=h.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new g.Texture(h,this.image,v.RGBA),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(h)}loadTile(h,v){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},v(null)):(h.state="errored",v(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ai={vector:nr,raster:Xn,"raster-dem":class extends Xn{constructor(x,h,v,S){super(x,h,v,S),this.type="raster-dem",this.maxzoom=22,this._options=g.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}loadTile(x,h){const v=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function S(D,k){D&&(x.state="errored",h(D)),k&&(x.dem=k,x.dem.onDeserialize(),x.needsHillshadePrepare=!0,x.needsDEMTextureUpload=!0,x.state="loaded",h(null))}x.request=g.getImage(this.map._requestManager.transformRequest(v,g.ResourceType.Tile),function(D,k,F,B){if(delete x.request,x.aborted)x.state="unloaded",h(null);else if(D)x.state="errored",h(D);else if(k){this.map._refreshExpiredTiles&&x.setExpiryData({cacheControl:F,expires:B});const V=g.window.ImageBitmap&&k instanceof g.window.ImageBitmap&&(null==sr&&(sr=g.window.OffscreenCanvas&&new g.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof g.window.createImageBitmap),sr),X=1-(k.width-g.prevPowerOfTwo(k.width))/2;X<1||x.neighboringTiles||(x.neighboringTiles=this._getNeighboringTiles(x.tileID));const q=V?k:g.exported.getImageData(k,X),fe={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:q,encoding:this.encoding,padding:X};x.actor&&"expired"!==x.state||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",fe,S.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(x){const h=x.canonical,v=Math.pow(2,h.z),S=(h.x-1+v)%v,D=0===h.x?x.wrap-1:x.wrap,k=(h.x+1+v)%v,F=h.x+1===v?x.wrap+1:x.wrap,B={};return B[new g.OverscaledTileID(x.overscaledZ,D,h.z,S,h.y).key]={backfilled:!1},B[new g.OverscaledTileID(x.overscaledZ,F,h.z,k,h.y).key]={backfilled:!1},h.y>0&&(B[new g.OverscaledTileID(x.overscaledZ,D,h.z,S,h.y-1).key]={backfilled:!1},B[new g.OverscaledTileID(x.overscaledZ,x.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},B[new g.OverscaledTileID(x.overscaledZ,F,h.z,k,h.y-1).key]={backfilled:!1}),h.y+1<v&&(B[new g.OverscaledTileID(x.overscaledZ,D,h.z,S,h.y+1).key]={backfilled:!1},B[new g.OverscaledTileID(x.overscaledZ,x.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},B[new g.OverscaledTileID(x.overscaledZ,F,h.z,k,h.y+1).key]={backfilled:!1}),B}unloadTile(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded"}},geojson:class extends g.Evented{constructor(x,h,v,S){super(),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=v.getActor(),this.setEventedParent(S),this._data=h.data,this._options=g.extend({},h),this._collectResourceTiming=h.collectResourceTiming,void 0!==h.maxzoom&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const D=g.EXTENT/this.tileSize;this.workerOptions=g.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(void 0!==h.buffer?h.buffer:128)*D,tolerance:(void 0!==h.tolerance?h.tolerance:.375)*D,extent:g.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:void 0!==h.clusterMaxZoom?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:g.EXTENT,radius:(void 0!==h.clusterRadius?h.clusterRadius:50)*D,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}onAdd(x){this.map=x,this.setData(this._data)}setData(x){return this._data=x,this._updateWorkerData(),this}getClusterExpansionZoom(x,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},h),this}getClusterChildren(x,h){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},h),this}getClusterLeaves(x,h,v,S){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:h,offset:v},S),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new g.Event("dataloading",{dataType:"source"})),this._loaded=!1;const x=g.extend({},this.workerOptions),h=this._data;"string"==typeof h?(x.request=this.map._requestManager.transformRequest(g.exported.resolveURL(h),g.ResourceType.Source),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(h),this._pendingLoad=this.actor.send(`${this.type}.loadData`,x,(v,S)=>{if(this._loaded=!0,this._pendingLoad=null,v)this.fire(new g.ErrorEvent(v));else{const D={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&S&&S.resourceTiming&&S.resourceTiming[this.id]&&(D.resourceTiming=S.resourceTiming[this.id]),this.fire(new g.Event("data",D)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(x,h){const v=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(v,{type:this.type,uid:x.uid,tileID:x.tileID,tileZoom:x.tileZoom,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:g.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(S,D)=>(delete x.request,x.unloadVectorData(),x.aborted?h(null):S?h(S):(x.loadVectorData(D,this.map.painter,"reloadTile"===v),h(null))),void 0,"loadTile"===v)}abortTile(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0}unloadTile(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return g.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Si{constructor(x,h,v,S){super(x,h,v,S),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const x=this.options;this.urls=[];for(const h of x.urls)this.urls.push(this.map._requestManager.transformRequest(h,g.ResourceType.Source).url);g.getVideo(this.urls,(h,v)=>{this._loaded=!0,h?this.fire(new g.ErrorEvent(h)):v&&(this.video=v,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(x){if(this.video){const h=this.video.seekable;x<h.start(0)||x>h.end(0)?this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=x}}getVideo(){return this.video}onAdd(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const x=this.map.painter.context,h=x.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new g.Texture(x,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(x)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Si,canvas:class extends Si{constructor(x,h,v,S){super(x,h,v,S),h.coordinates?Array.isArray(h.coordinates)&&4===h.coordinates.length&&!h.coordinates.some(D=>!Array.isArray(D)||2!==D.length||D.some(k=>"number"!=typeof k))||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'missing required property "coordinates"'))),h.animate&&"boolean"!=typeof h.animate&&this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'optional "animate" property must be a boolean value'))),h.canvas?"string"==typeof h.canvas||h.canvas instanceof g.window.HTMLCanvasElement||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'missing required property "canvas"'))),this.options=h,this.animate=void 0===h.animate||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof g.window.HTMLCanvasElement?this.options.canvas:g.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new g.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const h=this.map.painter.context;this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new g.Texture(h,this.canvas,h.gl.RGBA,{premultiply:!0}),this._prepareData(h)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const x of[this.canvas.width,this.canvas.height])if(isNaN(x)||x<=0)return!0;return!1}},custom:class extends g.Evented{constructor(x,h,v,S){super(),this.id=x,this.type="custom",this._dataType="raster",this._dispatcher=v,this._implementation=h,this.setEventedParent(S),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new g.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new g.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Xt(this._implementation.bounds,this.minzoom,this.maxzoom)),h.update=this._update.bind(this),h.clearTiles=this._clearTiles.bind(this),h.coveringTiles=this._coveringTiles.bind(this),g.extend(this,g.pick(h,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return g.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(x){this._map=x,this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(x),this.load()}onRemove(x){this._implementation.onRemove&&this._implementation.onRemove(x)}hasTile(x){if(this._implementation.hasTile){const{x:h,y:v,z:S}=x.canonical;return this._implementation.hasTile({x:h,y:v,z:S})}return!this.tileBounds||this.tileBounds.contains(x.canonical)}loadTile(x,h){const{x:v,y:S,z:D}=x.tileID.canonical,k=new g.window.AbortController;x.request=Promise.resolve(this._implementation.loadTile({x:v,y:S,z:D},{signal:k.signal})).then(function(F){return delete x.request,x.aborted?(x.state="unloaded",h(null)):void 0===F?(x.state="errored",h(null)):null===F?(this.loadTileData(x,{width:this.tileSize,height:this.tileSize,data:null}),x.state="loaded",h(null)):(B=F)instanceof g.window.ImageData||B instanceof g.window.HTMLCanvasElement||B instanceof g.window.ImageBitmap||B instanceof g.window.HTMLImageElement?(this.loadTileData(x,F),x.state="loaded",void h(null)):(x.state="errored",h(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var B}.bind(this)).catch(F=>{20!==F.code&&(x.state="errored",h(F))}),x.request.cancel=()=>k.abort()}loadTileData(x,h){Xn.loadTileData(x,h,this._map.painter)}unloadTileData(x){Xn.unloadTileData(x,this._map.painter)}unloadTile(x,h){if(this.unloadTileData(x),this._implementation.unloadTile){const{x:v,y:S,z:D}=x.tileID.canonical;this._implementation.unloadTile({x:v,y:S,z:D})}h()}abortTile(x,h){x.request&&x.request.cancel&&(x.request.cancel(),delete x.request),h()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(x=>({x:x.canonical.x,y:x.canonical.y,z:x.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Kr=function(x,h,v,S){const D=new ai[h.type](x,h,v,S);if(D.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${D.id}`);return g.bindAll(["load","abort","unload","serialize","prepare"],D),D};function Ii(x,h){const v=g.identity([]);return g.scale(v,v,[.5*x.width,.5*-x.height,1]),g.translate(v,v,[1,-1,0]),g.multiply(v,v,x.calculateProjMatrix(h.toUnwrapped())),Float32Array.from(v)}function Fi(x,h,v,S,D,k,F,B=!1){const V=x.tilesIn(S,F,B);V.sort(Ct);const X=[];for(const fe of V)X.push({wrappedTileID:fe.tile.tileID.wrapped().key,queryResults:fe.tile.queryRenderedFeatures(h,v,x._state,fe,D,k,Ii(x.transform,fe.tile.tileID),B)});const q=function(fe){const Ve={},Ye={};for(const it of fe){const st=it.queryResults,ft=it.wrappedTileID,ge=Ye[ft]=Ye[ft]||{};for(const Ke in st){const wt=st[Ke],St=ge[Ke]=ge[Ke]||{},Ht=Ve[Ke]=Ve[Ke]||[];for(const qt of wt)St[qt.featureIndex]||(St[qt.featureIndex]=!0,Ht.push(qt))}}return Ve}(X);for(const fe in q)q[fe].forEach(Ve=>{const Ye=Ve.feature,it=Ye.layer;it&&"background"!==it.type&&"sky"!==it.type&&(Ye.source=it.source,it["source-layer"]&&(Ye.sourceLayer=it["source-layer"]),Ye.state=void 0!==Ye.id?x.getFeatureState(it["source-layer"],Ye.id):{})});return q}function bt(x,h){const v=x.getRenderableIds().map(k=>x.getTileByID(k)),S=[],D={};for(let k=0;k<v.length;k++){const F=v[k],B=F.tileID.canonical.key;D[B]||(D[B]=!0,F.querySourceFeatures(S,h))}return S}function Ct(x,h){const v=x.tileID,S=h.tileID;return v.overscaledZ-S.overscaledZ||v.canonical.y-S.canonical.y||v.wrap-S.wrap||v.canonical.x-S.canonical.x}function on(){return null!=_d.workerClass?new _d.workerClass:new g.window.Worker(_d.workerUrl)}const ln="mapboxgl_preloaded_worker_pool";class Sn{constructor(){this.active={}}acquire(h){if(!this.workers)for(this.workers=[];this.workers.length<Sn.workerCount;)this.workers.push(new on);return this.active[h]=!0,this.workers.slice()}release(h){delete this.active[h],0===this.numActive()&&(this.workers.forEach(v=>{v.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ln]}numActive(){return Object.keys(this.active).length}}let $n;function Yn(){return $n||($n=new Sn),$n}function ir(x,h){const v={};for(const S in x)"ref"!==S&&(v[S]=x[S]);return g.refProperties.forEach(S=>{S in h&&(v[S]=h[S])}),v}function Dr(x){x=x.slice();const h=Object.create(null);for(let v=0;v<x.length;v++)h[x[v].id]=x[v];for(let v=0;v<x.length;v++)"ref"in x[v]&&(x[v]=ir(x[v],h[x[v].ref]));return x}Sn.workerCount=2;const Bn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function yi(x,h,v){v.push({command:Bn.addSource,args:[x,h[x]]})}function Pr(x,h,v){h.push({command:Bn.removeSource,args:[x]}),v[x]=!0}function oi(x,h,v,S){Pr(x,v,S),yi(x,h,v)}function to(x,h,v){let S;for(S in x[v])if(x[v].hasOwnProperty(S)&&"data"!==S&&!me(x[v][S],h[v][S]))return!1;for(S in h[v])if(h[v].hasOwnProperty(S)&&"data"!==S&&!me(x[v][S],h[v][S]))return!1;return!0}function Vi(x,h,v,S,D,k){let F;for(F in h=h||{},x=x||{})x.hasOwnProperty(F)&&(me(x[F],h[F])||v.push({command:k,args:[S,F,h[F],D]}));for(F in h)h.hasOwnProperty(F)&&!x.hasOwnProperty(F)&&(me(x[F],h[F])||v.push({command:k,args:[S,F,h[F],D]}))}function So(x){return x.id}function so(x,h){return x[h.id]=h,x}class Ns{constructor(h,v){this.reset(h,v)}reset(h,v){this.points=h||[],this._distances=[0];for(let S=1;S<this.points.length;S++)this._distances[S]=this._distances[S-1]+this.points[S].dist(this.points[S-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(v||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(h){if(1===this.points.length)return this.points[0];h=g.clamp(h,0,1);let v=1,S=this._distances[v];const D=h*this.paddedLength+this.padding;for(;S<D&&v<this._distances.length;)S=this._distances[++v];const k=v-1,F=this._distances[k],B=S-F,V=B>0?(D-F)/B:0;return this.points[k].mult(1-V).add(this.points[v].mult(V))}}class Lo{constructor(h,v,S){const D=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(h/S),this.yCellCount=Math.ceil(v/S);for(let F=0;F<this.xCellCount*this.yCellCount;F++)D.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=h,this.height=v,this.xScale=this.xCellCount/h,this.yScale=this.yCellCount/v,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(h,v,S,D,k){this._forEachCell(v,S,D,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(h),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(D),this.bboxes.push(k)}insertCircle(h,v,S,D){this._forEachCell(v-D,S-D,v+D,S+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(h),this.circles.push(v),this.circles.push(S),this.circles.push(D)}_insertBoxCell(h,v,S,D,k,F){this.boxCells[k].push(F)}_insertCircleCell(h,v,S,D,k,F){this.circleCells[k].push(F)}_query(h,v,S,D,k,F){if(S<0||h>this.width||D<0||v>this.height)return!k&&[];const B=[];if(h<=0&&v<=0&&this.width<=S&&this.height<=D){if(k)return!0;for(let V=0;V<this.boxKeys.length;V++)B.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const X=this.circles[3*V],q=this.circles[3*V+1],fe=this.circles[3*V+2];B.push({key:this.circleKeys[V],x1:X-fe,y1:q-fe,x2:X+fe,y2:q+fe})}return F?B.filter(F):B}return this._forEachCell(h,v,S,D,this._queryCell,B,{hitTest:k,seenUids:{box:{},circle:{}}},F),k?B.length>0:B}_queryCircle(h,v,S,D,k){const F=h-S,B=h+S,V=v-S,X=v+S;if(B<0||F>this.width||X<0||V>this.height)return!D&&[];const q=[];return this._forEachCell(F,V,B,X,this._queryCellCircle,q,{hitTest:D,circle:{x:h,y:v,radius:S},seenUids:{box:{},circle:{}}},k),D?q.length>0:q}query(h,v,S,D,k){return this._query(h,v,S,D,!1,k)}hitTest(h,v,S,D,k){return this._query(h,v,S,D,!0,k)}hitTestCircle(h,v,S,D){return this._queryCircle(h,v,S,!0,D)}_queryCell(h,v,S,D,k,F,B,V){const X=B.seenUids,q=this.boxCells[k];if(null!==q){const Ve=this.bboxes;for(const Ye of q)if(!X.box[Ye]){X.box[Ye]=!0;const it=4*Ye;if(h<=Ve[it+2]&&v<=Ve[it+3]&&S>=Ve[it+0]&&D>=Ve[it+1]&&(!V||V(this.boxKeys[Ye]))){if(B.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[Ye],x1:Ve[it],y1:Ve[it+1],x2:Ve[it+2],y2:Ve[it+3]})}}}const fe=this.circleCells[k];if(null!==fe){const Ve=this.circles;for(const Ye of fe)if(!X.circle[Ye]){X.circle[Ye]=!0;const it=3*Ye;if(this._circleAndRectCollide(Ve[it],Ve[it+1],Ve[it+2],h,v,S,D)&&(!V||V(this.circleKeys[Ye]))){if(B.hitTest)return F.push(!0),!0;{const st=Ve[it],ft=Ve[it+1],ge=Ve[it+2];F.push({key:this.circleKeys[Ye],x1:st-ge,y1:ft-ge,x2:st+ge,y2:ft+ge})}}}}}_queryCellCircle(h,v,S,D,k,F,B,V){const X=B.circle,q=B.seenUids,fe=this.boxCells[k];if(null!==fe){const Ye=this.bboxes;for(const it of fe)if(!q.box[it]){q.box[it]=!0;const st=4*it;if(this._circleAndRectCollide(X.x,X.y,X.radius,Ye[st+0],Ye[st+1],Ye[st+2],Ye[st+3])&&(!V||V(this.boxKeys[it])))return F.push(!0),!0}}const Ve=this.circleCells[k];if(null!==Ve){const Ye=this.circles;for(const it of Ve)if(!q.circle[it]){q.circle[it]=!0;const st=3*it;if(this._circlesCollide(Ye[st],Ye[st+1],Ye[st+2],X.x,X.y,X.radius)&&(!V||V(this.circleKeys[it])))return F.push(!0),!0}}}_forEachCell(h,v,S,D,k,F,B,V){const X=this._convertToXCellCoord(h),q=this._convertToYCellCoord(v),fe=this._convertToXCellCoord(S),Ve=this._convertToYCellCoord(D);for(let Ye=X;Ye<=fe;Ye++)for(let it=q;it<=Ve;it++)if(k.call(this,h,v,S,D,this.xCellCount*it+Ye,F,B,V))return}_convertToXCellCoord(h){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(h*this.xScale)))}_convertToYCellCoord(h){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(h*this.yScale)))}_circlesCollide(h,v,S,D,k,F){const B=D-h,V=k-v,X=S+F;return X*X>B*B+V*V}_circleAndRectCollide(h,v,S,D,k,F,B){const V=(F-D)/2,X=Math.abs(h-(D+V));if(X>V+S)return!1;const q=(B-k)/2,fe=Math.abs(v-(k+q));if(fe>q+S)return!1;if(X<=V||fe<=q)return!0;const Ve=X-V,Ye=fe-q;return Ve*Ve+Ye*Ye<=S*S}}const no={unknown:0,flipRequired:1,flipNotRequired:2},li=Math.tan(85*Math.PI/180);function Mn(x,h,v,S,D,k,F){const B=g.create();if(v)if("globe"===k.name){const V=g.calculateGlobeLabelMatrix(D,h);g.multiply(B,B,V)}else{const V=J([],F);B[0]=V[0],B[1]=V[1],B[4]=V[2],B[5]=V[3],S||g.rotateZ(B,B,D.angle)}else g.multiply(B,D.labelPlaneMatrix,x);return B}function gl(x,h,v,S,D,k,F){const B=Mn(x,h,v,S,D,k,F);return"globe"===k.name&&v||(B[2]=B[6]=B[10]=B[14]=0),B}function vs(x,h,v,S,D,k,F){if(v){if("globe"===k.name){const B=Mn(x,h,v,S,D,k,F);return g.invert(B,B),g.multiply(B,x,B),B}{const B=g.clone(x),V=g.identity([]);return V[0]=F[0],V[1]=F[1],V[4]=F[2],V[5]=F[3],g.multiply(B,B,V),S||g.rotateZ(B,B,-D.angle),B}}return D.glCoordMatrix}function bs(x,h,v,S){const D=[x,h,v,1];v?g.transformMat4$1(D,D,S):nt(D,D,S);const k=D[3];return D[0]/=k,D[1]/=k,D[2]/=k,D}function Mo(x,h){return Math.min(.5+x/h*.5,1.5)}function El(x,h){const v=x[0]/x[3],S=x[1]/x[3];return v>=-h[0]&&v<=h[0]&&S>=-h[1]&&S<=h[1]}function Ze(x,h,v,S,D,k,F,B,V,X){const q=v.transform,fe=S?x.textSizeData:x.iconSizeData,Ve=g.evaluateSizeForZoom(fe,v.transform.zoom),Ye="globe"===q.projection.name,it=[256/v.width*2+1,256/v.height*2+1],st=S?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;st.clear();let ft=null;Ye&&(ft=S?x.text.globeExtVertexArray:x.icon.globeExtVertexArray);const ge=x.lineVertexArray,Ke=S?x.text.placedSymbolArray:x.icon.placedSymbolArray,wt=v.transform.width/v.transform.height;let St,Ht=!1;for(let qt=0;qt<Ke.length;qt++){const Gt=Ke.get(qt),{numGlyphs:rn,writingMode:Jt}=Gt;if(Jt!==g.WritingMode.vertical||Ht||St===g.WritingMode.horizontal||(Ht=!0),St=Jt,(Gt.hidden||Jt===g.WritingMode.vertical)&&!Ht){ye(rn,st);continue}Ht=!1;const wn=new g.Point(Gt.tileAnchorX,Gt.tileAnchorY);let{x:ur,y:mn,z:Gn}=q.projection.projectTilePoint(wn.x,wn.y,X.canonical);if(V){const[Ui,Wr,ei]=V(wn);ur+=Ui,mn+=Wr,Gn+=ei}const Dn=[ur,mn,Gn,1];if(g.transformMat4$1(Dn,Dn,h),!El(Dn,it)){ye(rn,st);continue}const ar=Mo(v.transform.cameraToCenterDistance,Dn[3]),bn=g.evaluateSizeForFeature(fe,Ve,Gt),Un=F?bn/ar:bn*ar,cr=bs(ur,mn,Gn,D);if(cr[3]<=0){ye(rn,st);continue}let Jn={};const hr=F?null:V,vi=rt(Gt,Un,!1,B,h,D,k,x.glyphOffsetArray,ge,st,ft,cr,wn,Jn,wt,hr,q.projection,X,F);Ht=vi.useVertical,hr&&vi.needsFlipping&&(Jn={}),(vi.notEnoughRoom||Ht||vi.needsFlipping&&rt(Gt,Un,!0,B,h,D,k,x.glyphOffsetArray,ge,st,ft,cr,wn,Jn,wt,hr,q.projection,X,F).notEnoughRoom)&&ye(rn,st)}S?(x.text.dynamicLayoutVertexBuffer.updateData(st),ft&&x.text.globeExtVertexBuffer.updateData(ft)):(x.icon.dynamicLayoutVertexBuffer.updateData(st),ft&&x.icon.globeExtVertexBuffer.updateData(ft))}function $t(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st){const{lineStartIndex:ft,glyphStartIndex:ge,segment:Ke}=B,wt=ge+B.numGlyphs,St=ft+B.lineLength,Ht=h.getoffsetX(ge),qt=h.getoffsetX(wt-1),Gt=ue(x*Ht,v,S,D,k,F,Ke,ft,St,V,X,q,fe,Ve,!0,Ye,it,st);if(!Gt)return null;const rn=ue(x*qt,v,S,D,k,F,Ke,ft,St,V,X,q,fe,Ve,!0,Ye,it,st);return rn?{first:Gt,last:rn}:null}function yt(x,h,v,S){return x===g.WritingMode.horizontal&&Math.abs(S)>Math.abs(v)?{useVertical:!0}:x===g.WritingMode.vertical?S>0?{needsFlipping:!0}:null:h!==no.unknown&&(0===(D=v)||Math.abs(S/D)>li)?h===no.flipRequired?{needsFlipping:!0}:null:v<0?{needsFlipping:!0}:null;var D}function rt(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st,ft,ge,Ke){const wt=h/24,St=x.lineOffsetX*wt,Ht=x.lineOffsetY*wt,{lineStartIndex:qt,glyphStartIndex:Gt,numGlyphs:rn,segment:Jt,writingMode:wn,flipState:ur}=x,mn=qt+x.lineLength,Gn=Dn=>{if(q){const[cr,Jn,hr]=Dn.up,vi=X.length;g.updateGlobeVertexNormal(q,vi+0,cr,Jn,hr),g.updateGlobeVertexNormal(q,vi+1,cr,Jn,hr),g.updateGlobeVertexNormal(q,vi+2,cr,Jn,hr),g.updateGlobeVertexNormal(q,vi+3,cr,Jn,hr)}const[ar,bn,Un]=Dn.point;g.addDynamicAttributes(X,ar,bn,Un,Dn.angle)};if(rn>1){const Dn=$t(wt,B,St,Ht,v,fe,Ve,x,V,k,Ye,st,!1,ft,ge,Ke);if(!Dn)return{notEnoughRoom:!0};if(S&&!v){let[ar,bn,Un]=Dn.first.point,[cr,Jn,hr]=Dn.last.point;[ar,bn]=bs(ar,bn,Un,F),[cr,Jn]=bs(cr,Jn,hr,F);const vi=yt(wn,ur,(cr-ar)*it,Jn-bn);if(x.flipState=vi&&vi.needsFlipping?no.flipRequired:no.flipNotRequired,vi)return vi}Gn(Dn.first);for(let ar=Gt+1;ar<Gt+rn-1;ar++){const bn=ue(wt*B.getoffsetX(ar),St,Ht,v,fe,Ve,Jt,qt,mn,V,k,Ye,st,!1,!1,ft,ge,Ke);if(!bn)return X.length-=4*(ar-Gt),{notEnoughRoom:!0};Gn(bn)}Gn(Dn.last)}else{if(S&&!v){const ar=bs(Ve.x,Ve.y,0,D),bn=qt+Jt+1,Un=new g.Point(V.getx(bn),V.gety(bn)),cr=bs(Un.x,Un.y,0,D),Jn=cr[3]>0?cr:Nt(Ve,Un,ar,1,D,void 0,ft,ge.canonical),hr=yt(wn,ur,(Jn[0]-ar[0])*it,Jn[1]-ar[1]);if(x.flipState=hr&&hr.needsFlipping?no.flipRequired:no.flipNotRequired,hr)return hr}const Dn=ue(wt*B.getoffsetX(Gt),St,Ht,v,fe,Ve,Jt,qt,mn,V,k,Ye,st,!1,!1,ft,ge,Ke);if(!Dn)return{notEnoughRoom:!0};Gn(Dn)}return{}}function Tt(x,h,v,S,D){const{x:k,y:F,z:B}=S.projectTilePoint(x.x,x.y,h);if(!D)return bs(k,F,B,v);const[V,X,q]=D(x);return bs(k+V,F+X,B+q,v)}function Nt(x,h,v,S,D,k,F,B){const V=Tt(x.sub(h)._unit()._add(x),B,D,F,k);return g.sub(V,v,V),g.normalize(V,V),g.scaleAndAdd(V,v,V,S)}function ue(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st,ft,ge){const Ke=S?x-h:x+h;let wt=Ke>0?1:-1,St=0;S&&(wt*=-1,St=Math.PI),wt<0&&(St+=Math.PI);let Ht=B+F+(wt>0?0:1)|0,qt=D,Gt=D,rn=0,Jt=0;const wn=Math.abs(Ke),ur=[],mn=[];let Gn=k,Dn=Gn;const ar=()=>Nt(Dn,Gn,Gt,wn-rn+1,q,Ve,st,ft.canonical);for(;rn+Jt<=wn;){if(Ht+=wt,Ht<B||Ht>=V)return null;if(Gt=qt,Dn=Gn,ur.push(Gt),Ye&&mn.push(Dn),Gn=new g.Point(X.getx(Ht),X.gety(Ht)),qt=fe[Ht],!qt){const ei=Tt(Gn,ft.canonical,q,st,Ve);qt=ei[3]>0?fe[Ht]=ei:ar()}rn+=Jt,Jt=g.distance(Gt,qt)}it&&Ve&&(fe[Ht]&&(qt=ar(),Jt=g.distance(Gt,qt)),fe[Ht]=qt);const bn=(wn-rn)/Jt,Un=Gn.sub(Dn)._mult(bn)._add(Dn),cr=g.sub([],qt,Gt),Jn=g.scaleAndAdd([],Gt,cr,bn);let hr=[0,0,1],vi=cr[0],Ui=cr[1];if(ge&&(hr=st.upVector(ft.canonical,Un.x,Un.y),0!==hr[0]||0!==hr[1]||1!==hr[2])){const ei=[hr[2],0,-hr[0]],co=g.cross([],hr,ei);g.normalize(ei,ei),g.normalize(co,co),vi=g.dot(cr,ei),Ui=g.dot(cr,co)}if(v){const ei=g.cross([],hr,cr);g.normalize(ei,ei),g.scaleAndAdd(Jn,Jn,ei,v*wt)}const Wr=St+Math.atan2(Ui,vi);return ur.push(Jn),Ye&&mn.push(Un),{point:Jn,angle:Wr,path:ur,tilePath:mn,up:hr}}function ye(x,h){const v=h.length,S=v+4*x;h.resize(S),h.float32.fill(-1/0,4*v,4*S)}function nt(x,h,v){const S=h[0],D=h[1];return x[0]=v[0]*S+v[4]*D+v[12],x[1]=v[1]*S+v[5]*D+v[13],x[3]=v[3]*S+v[7]*D+v[15],x}const xt=100;class Le{constructor(h,v,S=new Lo(h.width+200,h.height+200,25),D=new Lo(h.width+200,h.height+200,25)){this.transform=h,this.grid=S,this.ignoredGrid=D,this.pitchfactor=Math.cos(h._pitch)*h.cameraToCenterDistance,this.screenRightBoundary=h.width+xt,this.screenBottomBoundary=h.height+xt,this.gridRightBoundary=h.width+200,this.gridBottomBoundary=h.height+200,this.fogState=v}placeCollisionBox(h,v,S,D,k,F,B,V){let X=S.projectedAnchorX,q=S.projectedAnchorY,fe=S.projectedAnchorZ;const Ve=S.elevation,Ye=S.tileID,it=h.getProjection();if(Ve&&Ye){const[qt,Gt,rn]=it.upVector(Ye.canonical,S.tileAnchorX,S.tileAnchorY),Jt=it.upVectorScale(Ye.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;X+=qt*Ve*Jt,q+=Gt*Ve*Jt,fe+=rn*Ve*Jt}const st=this.projectAndGetPerspectiveRatio(B,X,q,fe,S.tileID,"globe"===it.name||!!Ve||this.transform.pitch>0,it),ft=F*st.perspectiveRatio,ge=(S.x1*v+D.x-S.padding)*ft+st.point.x,Ke=(S.y1*v+D.y-S.padding)*ft+st.point.y,wt=(S.x2*v+D.x+S.padding)*ft+st.point.x,St=(S.y2*v+D.y+S.padding)*ft+st.point.y,Ht=st.perspectiveRatio<=.55||st.occluded;return!this.isInsideGrid(ge,Ke,wt,St)||!k&&this.grid.hitTest(ge,Ke,wt,St,V)||Ht?{box:[],offscreen:!1,occluded:st.occluded}:{box:[ge,Ke,wt,St],offscreen:this.isOffscreen(ge,Ke,wt,St),occluded:!1}}placeCollisionCircles(h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st){const ft=[],ge=this.transform.elevation,Ke=h.getProjection(),wt=ge?ge.getAtTileOffsetFunc(st,this.transform.center.lat,this.transform.worldSize,Ke):null,St=new g.Point(S.tileAnchorX,S.tileAnchorY);let{x:Ht,y:qt,z:Gt}=Ke.projectTilePoint(St.x,St.y,st.canonical);if(wt){const[Un,cr,Jn]=wt(St);Ht+=Un,qt+=cr,Gt+=Jn}const rn="globe"===Ke.name,Jt=this.projectAndGetPerspectiveRatio(B,Ht,qt,Gt,st,rn||!!ge||this.transform.pitch>0,Ke),{perspectiveRatio:wn}=Jt,ur=(fe?F/wn:F*wn)/g.ONE_EM,mn=bs(Ht,qt,Gt,V),Gn=Jt.signedDistanceFromCamera>0?$t(ur,k,S.lineOffsetX*ur,S.lineOffsetY*ur,!1,mn,St,S,D,V,{},ge&&!fe?wt:null,fe&&!!ge,Ke,st,fe):null;let Dn=!1,ar=!1,bn=!0;if(Gn&&!Jt.occluded){const Un=.5*Ye*wn+it,cr=new g.Point(-100,-100),Jn=new g.Point(this.screenRightBoundary,this.screenBottomBoundary),hr=new Ns,{first:vi,last:Ui}=Gn,Wr=vi.path.length;let ei=[];for(let hi=Wr-1;hi>=1;hi--)ei.push(vi.path[hi]);for(let hi=1;hi<Ui.path.length;hi++)ei.push(Ui.path[hi]);const co=2.5*Un;X&&(ei=ei.map(([hi,ms,zs],Zs)=>(wt&&!rn&&(zs=wt(Zs<Wr-1?vi.tilePath[Wr-1-Zs]:Ui.tilePath[Zs-Wr+2])[2]),bs(hi,ms,zs,X))),ei.some(hi=>hi[3]<=0)&&(ei=[]));let uo=[];if(ei.length>0){let hi=1/0,ms=-1/0,zs=1/0,Zs=-1/0;for(const Ms of ei)hi=Math.min(hi,Ms[0]),zs=Math.min(zs,Ms[1]),ms=Math.max(ms,Ms[0]),Zs=Math.max(Zs,Ms[1]);ms>=cr.x&&hi<=Jn.x&&Zs>=cr.y&&zs<=Jn.y&&(uo=[ei.map(Ms=>new g.Point(Ms[0],Ms[1]))],(hi<cr.x||ms>Jn.x||zs<cr.y||Zs>Jn.y)&&(uo=g.clipLine(uo,cr.x,cr.y,Jn.x,Jn.y)))}for(const hi of uo){hr.reset(hi,.25*Un);let ms=0;ms=hr.length<=.5*Un?1:Math.ceil(hr.paddedLength/co)+1;for(let zs=0;zs<ms;zs++){const Zs=zs/Math.max(ms-1,1),Ms=hr.lerp(Zs),Ac=Ms.x+xt,_a=Ms.y+xt;ft.push(Ac,_a,Un,0);const Ru=Ac-Un,_h=_a-Un,ji=Ac+Un,Ps=_a+Un;if(bn=bn&&this.isOffscreen(Ru,_h,ji,Ps),ar=ar||this.isInsideGrid(Ru,_h,ji,Ps),!v&&this.grid.hitTestCircle(Ac,_a,Un,Ve)&&(Dn=!0,!q))return{circles:[],offscreen:!1,collisionDetected:Dn,occluded:!1}}}}return{circles:!q&&Dn||!ar?[]:ft,offscreen:bn,collisionDetected:Dn,occluded:Jt.occluded}}queryRenderedSymbols(h){if(0===h.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const v=[];let S=1/0,D=1/0,k=-1/0,F=-1/0;for(const q of h){const fe=new g.Point(q.x+xt,q.y+xt);S=Math.min(S,fe.x),D=Math.min(D,fe.y),k=Math.max(k,fe.x),F=Math.max(F,fe.y),v.push(fe)}const B=this.grid.query(S,D,k,F).concat(this.ignoredGrid.query(S,D,k,F)),V={},X={};for(const q of B){const fe=q.key;if(void 0===V[fe.bucketInstanceId]&&(V[fe.bucketInstanceId]={}),V[fe.bucketInstanceId][fe.featureIndex])continue;const Ve=[new g.Point(q.x1,q.y1),new g.Point(q.x2,q.y1),new g.Point(q.x2,q.y2),new g.Point(q.x1,q.y2)];g.polygonIntersectsPolygon(v,Ve)&&(V[fe.bucketInstanceId][fe.featureIndex]=!0,void 0===X[fe.bucketInstanceId]&&(X[fe.bucketInstanceId]=[]),X[fe.bucketInstanceId].push(fe.featureIndex))}return X}insertCollisionBox(h,v,S,D,k){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:D,collisionGroupID:k},h[0],h[1],h[2],h[3])}insertCollisionCircles(h,v,S,D,k){const F=v?this.ignoredGrid:this.grid,B={bucketInstanceId:S,featureIndex:D,collisionGroupID:k};for(let V=0;V<h.length;V+=4)F.insertCircle(B,h[V],h[V+1],h[V+2])}projectAndGetPerspectiveRatio(h,v,S,D,k,F,B){const V=[v,S,D,1];let X=!1;D||this.transform.pitch>0?(g.transformMat4$1(V,V,h),this.fogState&&k&&"globe"!==B.name&&(X=function(Ve,Ye,it,st,ft,ge){const Ke=ge.calculateFogTileMatrix(ft),wt=[Ye,it,st];return g.transformMat4(wt,wt,Ke),je(Ve,wt,ge.pitch,ge._fov)}(this.fogState,v,S,D,k.toUnwrapped(),this.transform)>.9)):nt(V,V,h);const q=V[3];return{point:new g.Point((V[0]/q+1)/2*this.transform.width+xt,(-V[1]/q+1)/2*this.transform.height+xt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(B)/q*.5,1.5),signedDistanceFromCamera:q,occluded:F&&V[2]>q||X}}isOffscreen(h,v,S,D){return S<xt||h>=this.screenRightBoundary||D<xt||v>this.screenBottomBoundary}isInsideGrid(h,v,S,D){return S>=0&&h<this.gridRightBoundary&&D>=0&&v<this.gridBottomBoundary}getViewportMatrix(){const h=g.identity([]);return g.translate(h,h,[-100,-100,0]),h}}function dt(x,h,v){const S=h.createTileMatrix(x,x.worldSize,v.toUnwrapped());return g.multiply(new Float32Array(16),x.projMatrix,S)}function Rt(x,h,v){if(h.projection.name===v.projection.name)return x.projMatrix;const S=v.clone();return S.setProjection(h.projection),dt(S,h.getProjection(),x)}function sn(x,h,v){return h.name===v.projection.name?x.projMatrix:dt(v,h,x)}class yn{constructor(h,v,S,D){this.opacity=h?Math.max(0,Math.min(1,h.opacity+(h.placed?v:-v))):D&&S?1:0,this.placed=S}isHidden(){return 0===this.opacity&&!this.placed}}class Et{constructor(h,v,S,D,k,F=!1){this.text=new yn(h?h.text:null,v,S,k),this.icon=new yn(h?h.icon:null,v,D,k),this.clipped=F}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class kn{constructor(h,v,S,D=!1){this.text=h,this.icon=v,this.skipFade=S,this.clipped=D}}class zr{constructor(){this.invProjMatrix=g.create(),this.viewportMatrix=g.create(),this.circles=[]}}class ui{constructor(h,v,S,D,k){this.bucketInstanceId=h,this.featureIndex=v,this.sourceLayerIndex=S,this.bucketIndex=D,this.tileID=k}}class ao{constructor(h){this.crossSourceCollisions=h,this.maxGroupID=0,this.collisionGroups={}}get(h){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[h]){const v=++this.maxGroupID;this.collisionGroups[h]={ID:v,predicate:S=>S.collisionGroupID===v}}return this.collisionGroups[h]}}function _o(x,h,v,S,D){const{horizontalAlign:k,verticalAlign:F}=g.getAnchorAlignment(x),B=-(k-.5)*h,V=-(F-.5)*v,X=g.evaluateVariableOffset(x,S);return new g.Point(B+X[0]*D,V+X[1]*D)}function tn(x,h,v,S,D){const k=new g.Point(x,h);return v&&k._rotate(S?D:-D),k}class $i{constructor(h,v,S,D,k){this.transform=h.clone(),this.projection=h.projection.name,this.collisionIndex=new Le(this.transform,k),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new ao(S),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(h,v,S,D){const k=S.getBucket(v),F=S.latestFeatureIndex;if(!k||!F||v.id!==k.layerIds[0])return;const B=k.layers[0].layout,V=S.collisionBoxArray,X=Math.pow(2,this.transform.zoom-S.tileID.overscaledZ),q=S.tileSize/g.EXTENT,fe=S.tileID.toUnwrapped();this.transform.setProjection(k.projection);const Ve=(Ye=S.tileID,it=k.getProjection(),st=this.transform,it.name===this.projection?st.calculateProjMatrix(Ye.toUnwrapped()):dt(st,it,Ye));var Ye,it,st;const ft="map"===B.get("text-pitch-alignment"),ge="map"===B.get("text-rotation-alignment");v.compileFilter();const Ke=v.dynamicFilter(),wt=v.dynamicFilterNeedsFeature(),St=this.transform.calculatePixelsToTileUnitsMatrix(S),Ht=gl(Ve,S.tileID.canonical,ft,ge,this.transform,k.getProjection(),St);let qt=null;if(ft){const Jt=vs(Ve,S.tileID.canonical,ft,ge,this.transform,k.getProjection(),St);qt=g.multiply([],this.transform.labelPlaneMatrix,Jt)}let Gt=null;Ke&&S.latestFeatureIndex&&(Gt={unwrappedTileID:fe,dynamicFilter:Ke,dynamicFilterNeedsFeature:wt,featureIndex:S.latestFeatureIndex}),this.retainedQueryData[k.bucketInstanceId]=new ui(k.bucketInstanceId,F,k.sourceLayerIndex,k.index,S.tileID);const rn={bucket:k,layout:B,posMatrix:Ve,textLabelPlaneMatrix:Ht,labelToScreenMatrix:qt,clippingData:Gt,scale:X,textPixelRatio:q,holdingForFade:S.holdingForFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:g.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:g.evaluateSizeForZoom(k.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(D)for(const Jt of k.sortKeyRanges){const{sortKey:wn,symbolInstanceStart:ur,symbolInstanceEnd:mn}=Jt;h.push({sortKey:wn,symbolInstanceStart:ur,symbolInstanceEnd:mn,parameters:rn})}else h.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:rn})}attemptAnchorPlacement(h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st,ft,ge,Ke){const{textOffset0:wt,textOffset1:St,crossTileID:Ht}=Ve,qt=[wt,St],Gt=_o(h,S,D,qt,k),rn=this.collisionIndex.placeCollisionBox(it,k,v,tn(Gt.x,Gt.y,F,B,this.transform.angle),fe,V,X,q.predicate);if(ft){const Jt=it.getSymbolInstanceIconSize(Ke,this.transform.zoom,Ve.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(it,Jt,ft,tn(Gt.x,Gt.y,F,B,this.transform.angle),fe,V,X,q.predicate).box.length)return}if(rn.box.length>0){let Jt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ht]&&this.prevPlacement.placements[Ht]&&this.prevPlacement.placements[Ht].text&&(Jt=this.prevPlacement.variableOffsets[Ht].anchor),this.variableOffsets[Ht]={textOffset:qt,width:S,height:D,anchor:h,textScale:k,prevAnchor:Jt},this.markUsedJustification(it,h,Ve,st),it.allowVerticalPlacement&&(this.markUsedOrientation(it,st,Ve),this.placedOrientations[Ht]=st),{shift:Gt,placedGlyphBoxes:rn}}}placeLayerBucketPart(h,v,S,D){const{bucket:k,layout:F,posMatrix:B,textLabelPlaneMatrix:V,labelToScreenMatrix:X,clippingData:q,textPixelRatio:fe,holdingForFade:Ve,collisionBoxArray:Ye,partiallyEvaluatedTextSize:it,partiallyEvaluatedIconSize:st,collisionGroup:ft}=h.parameters,ge=F.get("text-optional"),Ke=F.get("icon-optional"),wt=F.get("text-allow-overlap"),St=F.get("icon-allow-overlap"),Ht="map"===F.get("text-rotation-alignment"),qt="map"===F.get("text-pitch-alignment"),Gt="none"!==F.get("icon-text-fit"),rn="viewport-y"===F.get("symbol-z-order");this.transform.setProjection(k.projection);let Jt=wt&&(St||!k.hasIconData()||Ke),wn=St&&(wt||!k.hasTextData()||ge);!k.collisionArrays&&Ye&&k.deserializeCollisionBoxes(Ye),S&&D&&k.updateCollisionDebugBuffers(this.transform.zoom,Ye);const ur=(mn,Gn,Dn)=>{const{crossTileID:ar,numVerticalGlyphVertices:bn}=mn;if(q){const ji={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ps=null;if(q.dynamicFilterNeedsFeature){const Do=this.retainedQueryData[k.bucketInstanceId];Ps=q.featureIndex.loadFeature({featureIndex:mn.featureIndex,bucketIndex:Do.bucketIndex,sourceLayerIndex:Do.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,q.dynamicFilter)(ji,Ps,this.retainedQueryData[k.bucketInstanceId].tileID.canonical,new g.Point(mn.tileAnchorX,mn.tileAnchorY),this.transform.calculateDistanceTileData(q.unwrappedTileID)))return this.placements[ar]=new kn(!1,!1,!1,!0),void v.add(ar)}if(v.has(ar))return;if(Ve)return void(this.placements[ar]=new kn(!1,!1,!1));let Un=!1,cr=!1,Jn=!0,hr=!1,vi=!1,Ui=null,Wr={box:null,offscreen:null,occluded:null},ei={box:null,offscreen:null,occluded:null},co=null,uo=null,hi=null,ms=0,zs=0,Zs=0;Dn.textFeatureIndex?ms=Dn.textFeatureIndex:mn.useRuntimeCollisionCircles&&(ms=mn.featureIndex),Dn.verticalTextFeatureIndex&&(zs=Dn.verticalTextFeatureIndex);const Ms=ji=>{ji.tileID=this.retainedQueryData[k.bucketInstanceId].tileID;const Ps=this.transform.elevation;(Ps||ji.elevation)&&(ji.elevation=Ps?Ps.getAtTileOffset(ji.tileID,ji.tileAnchorX,ji.tileAnchorY):0)},Ac=Dn.textBox;if(Ac){Ms(Ac);const ji=Do=>{let gs=g.WritingMode.horizontal;if(k.allowVerticalPlacement&&!Do&&this.prevPlacement){const Wc=this.prevPlacement.placedOrientations[ar];Wc&&(this.placedOrientations[ar]=Wc,gs=Wc,this.markUsedOrientation(k,gs,mn))}return gs},Ps=(Do,gs)=>{if(k.allowVerticalPlacement&&bn>0&&Dn.verticalTextBox){for(const Wc of k.writingModes)if(Wc===g.WritingMode.vertical?(Wr=gs(),ei=Wr):Wr=Do(),Wr&&Wr.box&&Wr.box.length)break}else Wr=Do()};if(F.get("text-variable-anchor")){let Do=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ar]){const aa=this.prevPlacement.variableOffsets[ar];Do.indexOf(aa.anchor)>0&&(Do=Do.filter(zl=>zl!==aa.anchor),Do.unshift(aa.anchor))}const gs=(aa,zl,Mc)=>{const Tf=k.getSymbolInstanceTextSize(it,mn,this.transform.zoom,Gn),um=(aa.x2-aa.x1)*Tf+2*aa.padding,yd=(aa.y2-aa.y1)*Tf+2*aa.padding,Xc=Gt&&!St?zl:null;Xc&&Ms(Xc);let Gd={box:[],offscreen:!1,occluded:!1};const gg=wt?2*Do.length:Do.length;for(let hp=0;hp<gg;++hp){const _g=this.attemptAnchorPlacement(Do[hp%Do.length],aa,um,yd,Tf,Ht,qt,fe,B,ft,hp>=Do.length,mn,Gn,k,Mc,Xc,it,st);if(_g&&(Gd=_g.placedGlyphBoxes,Gd&&Gd.box&&Gd.box.length)){Un=!0,Ui=_g.shift;break}}return Gd};Ps(()=>gs(Ac,Dn.iconBox,g.WritingMode.horizontal),()=>{const aa=Dn.verticalTextBox;return aa&&Ms(aa),k.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&bn>0&&aa?gs(aa,Dn.verticalIconBox,g.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Wr&&(Un=Wr.box,Jn=Wr.offscreen,hr=Wr.occluded);const Wc=ji(!(!Wr||!Wr.box));if(!Un&&this.prevPlacement){const aa=this.prevPlacement.variableOffsets[ar];aa&&(this.variableOffsets[ar]=aa,this.markUsedJustification(k,aa.anchor,mn,Wc))}}else{const Do=(gs,Wc)=>{const aa=k.getSymbolInstanceTextSize(it,mn,this.transform.zoom,Gn),zl=this.collisionIndex.placeCollisionBox(k,aa,gs,new g.Point(0,0),wt,fe,B,ft.predicate);return zl&&zl.box&&zl.box.length&&(this.markUsedOrientation(k,Wc,mn),this.placedOrientations[ar]=Wc),zl};Ps(()=>Do(Ac,g.WritingMode.horizontal),()=>{const gs=Dn.verticalTextBox;return k.allowVerticalPlacement&&bn>0&&gs?(Ms(gs),Do(gs,g.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),ji(!!(Wr&&Wr.box&&Wr.box.length))}}if(co=Wr,Un=co&&co.box&&co.box.length>0,Jn=co&&co.offscreen,hr=co&&co.occluded,mn.useRuntimeCollisionCircles){const ji=k.text.placedSymbolArray.get(mn.centerJustifiedTextSymbolIndex>=0?mn.centerJustifiedTextSymbolIndex:mn.verticalPlacedTextSymbolIndex),Ps=g.evaluateSizeForFeature(k.textSizeData,it,ji),Do=F.get("text-padding");uo=this.collisionIndex.placeCollisionCircles(k,wt,ji,k.lineVertexArray,k.glyphOffsetArray,Ps,B,V,X,S,qt,ft.predicate,mn.collisionCircleDiameter*Ps/g.ONE_EM,Do,this.retainedQueryData[k.bucketInstanceId].tileID),Un=wt||uo.circles.length>0&&!uo.collisionDetected,Jn=Jn&&uo.offscreen,hr=uo.occluded}if(Dn.iconFeatureIndex&&(Zs=Dn.iconFeatureIndex),Dn.iconBox){const ji=Ps=>{Ms(Ps);const Do=Gt&&Ui?tn(Ui.x,Ui.y,Ht,qt,this.transform.angle):new g.Point(0,0),gs=k.getSymbolInstanceIconSize(st,this.transform.zoom,mn.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(k,gs,Ps,Do,St,fe,B,ft.predicate)};ei&&ei.box&&ei.box.length&&Dn.verticalIconBox?(hi=ji(Dn.verticalIconBox),cr=hi.box.length>0):(hi=ji(Dn.iconBox),cr=hi.box.length>0),Jn=Jn&&hi.offscreen,vi=hi.occluded}const _a=ge||0===mn.numHorizontalGlyphVertices&&0===bn,Ru=Ke||0===mn.numIconVertices;if(_a||Ru?Ru?_a||(cr=cr&&Un):Un=cr&&Un:cr=Un=cr&&Un,Un&&co&&co.box&&this.collisionIndex.insertCollisionBox(co.box,F.get("text-ignore-placement"),k.bucketInstanceId,ei&&ei.box&&zs?zs:ms,ft.ID),cr&&hi&&this.collisionIndex.insertCollisionBox(hi.box,F.get("icon-ignore-placement"),k.bucketInstanceId,Zs,ft.ID),uo&&(Un&&this.collisionIndex.insertCollisionCircles(uo.circles,F.get("text-ignore-placement"),k.bucketInstanceId,ms,ft.ID),S)){const ji=k.bucketInstanceId;let Ps=this.collisionCircleArrays[ji];void 0===Ps&&(Ps=this.collisionCircleArrays[ji]=new zr);for(let Do=0;Do<uo.circles.length;Do+=4)Ps.circles.push(uo.circles[Do+0]),Ps.circles.push(uo.circles[Do+1]),Ps.circles.push(uo.circles[Do+2]),Ps.circles.push(uo.collisionDetected?1:0)}const _h="globe"!==k.projection.name;Jt=Jt&&(_h||!hr),wn=wn&&(_h||!vi),this.placements[ar]=new kn(Un||Jt,cr||wn,Jn||k.justReloaded),v.add(ar)};if(rn){const mn=k.getSortedSymbolIndexes(this.transform.angle);for(let Gn=mn.length-1;Gn>=0;--Gn){const Dn=mn[Gn];ur(k.symbolInstances.get(Dn),Dn,k.collisionArrays[Dn])}}else for(let mn=h.symbolInstanceStart;mn<h.symbolInstanceEnd;mn++)ur(k.symbolInstances.get(mn),mn,k.collisionArrays[mn]);if(S&&k.bucketInstanceId in this.collisionCircleArrays){const mn=this.collisionCircleArrays[k.bucketInstanceId];g.invert(mn.invProjMatrix,B),mn.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(h,v,S,D){const{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:F,rightJustifiedTextSymbolIndex:B,verticalPlacedTextSymbolIndex:V,crossTileID:X}=S,q=g.getAnchorJustification(v),fe=D===g.WritingMode.vertical?V:"left"===q?k:"center"===q?F:"right"===q?B:-1;k>=0&&(h.text.placedSymbolArray.get(k).crossTileID=fe>=0&&k!==fe?0:X),F>=0&&(h.text.placedSymbolArray.get(F).crossTileID=fe>=0&&F!==fe?0:X),B>=0&&(h.text.placedSymbolArray.get(B).crossTileID=fe>=0&&B!==fe?0:X),V>=0&&(h.text.placedSymbolArray.get(V).crossTileID=fe>=0&&V!==fe?0:X)}markUsedOrientation(h,v,S){const D=v===g.WritingMode.horizontal||v===g.WritingMode.horizontalOnly?v:0,k=v===g.WritingMode.vertical?v:0,{leftJustifiedTextSymbolIndex:F,centerJustifiedTextSymbolIndex:B,rightJustifiedTextSymbolIndex:V,verticalPlacedTextSymbolIndex:X}=S,q=h.text.placedSymbolArray;F>=0&&(q.get(F).placedOrientation=D),B>=0&&(q.get(B).placedOrientation=D),V>=0&&(q.get(V).placedOrientation=D),X>=0&&(q.get(X).placedOrientation=k)}commit(h){this.commitTime=h,this.zoomAtLastRecencyCheck=this.transform.zoom;const v=this.prevPlacement;let S=!1;this.prevZoomAdjustment=v?v.zoomAdjustment(this.transform.zoom):0;const D=v?v.symbolFadeChange(h):1,k=v?v.opacities:{},F=v?v.variableOffsets:{},B=v?v.placedOrientations:{};for(const V in this.placements){const X=this.placements[V],q=k[V];q?(this.opacities[V]=new Et(q,D,X.text,X.icon,null,X.clipped),S=S||X.text!==q.text.placed||X.icon!==q.icon.placed):(this.opacities[V]=new Et(null,D,X.text,X.icon,X.skipFade,X.clipped),S=S||X.text||X.icon)}for(const V in k){const X=k[V];if(!this.opacities[V]){const q=new Et(X,D,!1,!1);q.isHidden()||(this.opacities[V]=q,S=S||X.text.placed||X.icon.placed)}}for(const V in F)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=F[V]);for(const V in B)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=B[V]);S?this.lastPlacementChangeTime=h:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=v?v.lastPlacementChangeTime:h)}updateLayerOpacities(h,v){const S=new Set;for(const D of v){const k=D.getBucket(h);k&&D.latestFeatureIndex&&h.id===k.layerIds[0]&&this.updateBucketOpacities(k,S,D.collisionBoxArray)}}updateBucketOpacities(h,v,S){h.hasTextData()&&h.text.opacityVertexArray.clear(),h.hasIconData()&&h.icon.opacityVertexArray.clear(),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexArray.clear(),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexArray.clear();const D=h.layers[0].layout,k=!!h.layers[0].dynamicFilter(),F=new Et(null,0,!1,!1,!0),B=D.get("text-allow-overlap"),V=D.get("icon-allow-overlap"),X=D.get("text-variable-anchor"),q="map"===D.get("text-rotation-alignment"),fe="map"===D.get("text-pitch-alignment"),Ve="none"!==D.get("icon-text-fit"),Ye=new Et(null,0,B&&(V||!h.hasIconData()||D.get("icon-optional")),V&&(B||!h.hasTextData()||D.get("text-optional")),!0);!h.collisionArrays&&S&&(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData())&&h.deserializeCollisionBoxes(S);const it=(ft,ge,Ke)=>{for(let wt=0;wt<ge/4;wt++)ft.opacityVertexArray.emplaceBack(Ke)};let st=0;for(let ft=0;ft<h.symbolInstances.length;ft++){const ge=h.symbolInstances.get(ft),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:wt,crossTileID:St,numIconVertices:Ht}=ge,qt=v.has(St);let Gt=this.opacities[St];qt?Gt=F:Gt||(Gt=Ye,this.opacities[St]=Gt),v.add(St);const rn=Ke>0||wt>0,Jt=Ht>0,wn=this.placedOrientations[St],ur=wn===g.WritingMode.vertical,mn=wn===g.WritingMode.horizontal||wn===g.WritingMode.horizontalOnly;if(!rn&&!Jt||Gt.isHidden()||st++,rn){const Gn=ka(Gt.text);it(h.text,Ke,ur?Ea:Gn),it(h.text,wt,mn?Ea:Gn);const Dn=Gt.text.isHidden(),{leftJustifiedTextSymbolIndex:ar,centerJustifiedTextSymbolIndex:bn,rightJustifiedTextSymbolIndex:Un,verticalPlacedTextSymbolIndex:cr}=ge,Jn=h.text.placedSymbolArray,hr=Dn||ur?1:0;ar>=0&&(Jn.get(ar).hidden=hr),bn>=0&&(Jn.get(bn).hidden=hr),Un>=0&&(Jn.get(Un).hidden=hr),cr>=0&&(Jn.get(cr).hidden=Dn||mn?1:0);const vi=this.variableOffsets[St];vi&&this.markUsedJustification(h,vi.anchor,ge,wn);const Ui=this.placedOrientations[St];Ui&&(this.markUsedJustification(h,"left",ge,Ui),this.markUsedOrientation(h,Ui,ge))}if(Jt){const Gn=ka(Gt.icon),{placedIconSymbolIndex:Dn,verticalPlacedIconSymbolIndex:ar}=ge,bn=h.icon.placedSymbolArray,Un=Gt.icon.isHidden()?1:0;Dn>=0&&(it(h.icon,Ht,ur?Ea:Gn),bn.get(Dn).hidden=Un),ar>=0&&(it(h.icon,ge.numVerticalIconVertices,mn?Ea:Gn),bn.get(ar).hidden=Un)}if(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData()){const Gn=h.collisionArrays[ft];if(Gn){let Dn=new g.Point(0,0),ar=!0;if(Gn.textBox||Gn.verticalTextBox){if(X){const Un=this.variableOffsets[St];Un?(Dn=_o(Un.anchor,Un.width,Un.height,Un.textOffset,Un.textScale),q&&Dn._rotate(fe?this.transform.angle:-this.transform.angle)):ar=!1}k&&(ar=!Gt.clipped),Gn.textBox&&jr(h.textCollisionBox.collisionVertexArray,Gt.text.placed,!ar||ur,Dn.x,Dn.y),Gn.verticalTextBox&&jr(h.textCollisionBox.collisionVertexArray,Gt.text.placed,!ar||mn,Dn.x,Dn.y)}const bn=ar&&!(mn||!Gn.verticalIconBox);Gn.iconBox&&jr(h.iconCollisionBox.collisionVertexArray,Gt.icon.placed,bn,Ve?Dn.x:0,Ve?Dn.y:0),Gn.verticalIconBox&&jr(h.iconCollisionBox.collisionVertexArray,Gt.icon.placed,!bn,Ve?Dn.x:0,Ve?Dn.y:0)}}}if(h.fullyClipped=0===st,h.sortFeatures(this.transform.angle),this.retainedQueryData[h.bucketInstanceId]&&(this.retainedQueryData[h.bucketInstanceId].featureSortOrder=h.featureSortOrder),h.hasTextData()&&h.text.opacityVertexBuffer&&h.text.opacityVertexBuffer.updateData(h.text.opacityVertexArray),h.hasIconData()&&h.icon.opacityVertexBuffer&&h.icon.opacityVertexBuffer.updateData(h.icon.opacityVertexArray),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexBuffer&&h.iconCollisionBox.collisionVertexBuffer.updateData(h.iconCollisionBox.collisionVertexArray),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexBuffer&&h.textCollisionBox.collisionVertexBuffer.updateData(h.textCollisionBox.collisionVertexArray),h.bucketInstanceId in this.collisionCircleArrays){const ft=this.collisionCircleArrays[h.bucketInstanceId];h.placementInvProjMatrix=ft.invProjMatrix,h.placementViewportMatrix=ft.viewportMatrix,h.collisionCircleArray=ft.circles,delete this.collisionCircleArrays[h.bucketInstanceId]}}symbolFadeChange(h){return 0===this.fadeDuration?1:(h-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(h){return Math.max(0,(this.transform.zoom-h)/1.5)}hasTransitions(h){return this.stale||h-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(h,v){const S=this.zoomAtLastRecencyCheck===v?1-this.zoomAdjustment(v):1;return this.zoomAtLastRecencyCheck=v,this.commitTime+this.fadeDuration*S>h}setStale(){this.stale=!0}}function jr(x,h,v,S,D){x.emplaceBack(h?1:0,v?1:0,S||0,D||0),x.emplaceBack(h?1:0,v?1:0,S||0,D||0),x.emplaceBack(h?1:0,v?1:0,S||0,D||0),x.emplaceBack(h?1:0,v?1:0,S||0,D||0)}const Mi=Math.pow(2,25),Ds=Math.pow(2,24),Cl=Math.pow(2,17),Su=Math.pow(2,16),Ks=Math.pow(2,9),Pi=Math.pow(2,8),bf=Math.pow(2,1);function ka(x){if(0===x.opacity&&!x.placed)return 0;if(1===x.opacity&&x.placed)return 4294967295;const h=x.placed?1:0,v=Math.floor(127*x.opacity);return v*Mi+h*Ds+v*Cl+h*Su+v*Ks+h*Pi+v*bf+h}const Ea=0;class Gl{constructor(h){this._sortAcrossTiles="viewport-y"!==h.layout.get("symbol-z-order")&&void 0!==h.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(h,v,S,D,k){const F=this._bucketParts;for(;this._currentTileIndex<h.length;)if(v.getBucketParts(F,D,h[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((B,V)=>B.sortKey-V.sortKey));this._currentPartIndex<F.length;){const B=F[this._currentPartIndex];if(v.placeLayerBucketPart(B,this._seenCrossTileIDs,S,0===B.symbolInstanceStart),this._currentPartIndex++,k())return!0}return!1}}class Hs{constructor(h,v,S,D,k,F,B,V){this.placement=new $i(h,k,F,B,V),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(h,v,S){const D=g.exported.now(),k=()=>{const F=g.exported.now()-D;return!this._forceFullPlacement&&F>2};for(;this._currentPlacementIndex>=0;){const F=v[h[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if("symbol"===F.type&&(!F.minzoom||F.minzoom<=B)&&(!F.maxzoom||F.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new Gl(F)),this._inProgressLayer.continuePlacement(S[F.source],this.placement,this._showCollisionBoxes,F,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(h){return this.placement.commit(h),this.placement}}const Ya=512/g.EXTENT/2;class Ka{constructor(h,v,S){this.tileID=h,this.bucketInstanceId=S,this.index=new g.KDBush(v.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const D=h.canonical.x*g.EXTENT,k=h.canonical.y*g.EXTENT;for(let F=0;F<v.length;F++){const{key:B,crossTileID:V,tileAnchorX:X,tileAnchorY:q}=v.get(F),fe=Math.floor((D+X)*Ya),Ve=Math.floor((k+q)*Ya);this.index.add(fe,Ve),this.keys.push(B),this.crossTileIDs.push(V)}this.index.finish()}findMatches(h,v,S){const D=this.tileID.canonical.z<v.canonical.z?1:Math.pow(2,this.tileID.canonical.z-v.canonical.z),k=Ya/Math.pow(2,v.canonical.z-this.tileID.canonical.z),F=v.canonical.x*g.EXTENT,B=v.canonical.y*g.EXTENT;for(let V=0;V<h.length;V++){const X=h.get(V);if(X.crossTileID)continue;const{key:q,tileAnchorX:fe,tileAnchorY:Ve}=X,Ye=Math.floor((F+fe)*k),it=Math.floor((B+Ve)*k),st=this.index.range(Ye-D,it-D,Ye+D,it+D);for(const ft of st){const ge=this.crossTileIDs[ft];if(this.keys[ft]===q&&!S.has(ge)){S.add(ge),X.crossTileID=ge;break}}}}}class xc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class au{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(h){const v=Math.round((h-this.lng)/360);if(0!==v)for(const S in this.indexes){const D=this.indexes[S],k={};for(const F in D){const B=D[F];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+v),k[B.tileID.key]=B}this.indexes[S]=k}this.lng=h}addBucket(h,v,S){if(this.indexes[h.overscaledZ]&&this.indexes[h.overscaledZ][h.key]){if(this.indexes[h.overscaledZ][h.key].bucketInstanceId===v.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(h.overscaledZ,this.indexes[h.overscaledZ][h.key])}for(let k=0;k<v.symbolInstances.length;k++)v.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[h.overscaledZ]||(this.usedCrossTileIDs[h.overscaledZ]=new Set);const D=this.usedCrossTileIDs[h.overscaledZ];for(const k in this.indexes){const F=this.indexes[k];if(Number(k)>h.overscaledZ)for(const B in F){const V=F[B];V.tileID.isChildOf(h)&&V.findMatches(v.symbolInstances,h,D)}else{const B=F[h.scaledTo(Number(k)).key];B&&B.findMatches(v.symbolInstances,h,D)}}for(let k=0;k<v.symbolInstances.length;k++){const F=v.symbolInstances.get(k);F.crossTileID||(F.crossTileID=S.generate(),D.add(F.crossTileID))}return void 0===this.indexes[h.overscaledZ]&&(this.indexes[h.overscaledZ]={}),this.indexes[h.overscaledZ][h.key]=new Ka(h,v.symbolInstances,v.bucketInstanceId),!0}removeBucketCrossTileIDs(h,v){for(const S of v.crossTileIDs)this.usedCrossTileIDs[h].delete(S)}removeStaleBuckets(h){let v=!1;for(const S in this.indexes){const D=this.indexes[S];for(const k in D)h[D[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(S,D[k]),delete D[k],v=!0)}return v}}class Hl{constructor(){this.layerIndexes={},this.crossTileIDs=new xc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(h,v,S,D){let k=this.layerIndexes[h.id];void 0===k&&(k=this.layerIndexes[h.id]=new au);let F=!1;const B={};"globe"!==D.name&&k.handleWrapJump(S);for(const V of v){const X=V.getBucket(h);X&&h.id===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(V.tileID,X,this.crossTileIDs)&&(F=!0),B[X.bucketInstanceId]=!0)}return k.removeStaleBuckets(B)&&(F=!0),F}pruneUnusedLayers(h){const v={};h.forEach(S=>{v[S]=!0});for(const S in this.layerIndexes)v[S]||delete this.layerIndexes[S]}}const wc=(x,h)=>g.emitValidationErrors(x,h&&h.filter(v=>"source.canvas"!==v.identifier)),da=g.pick(Bn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Vc=g.pick(Bn,["setCenter","setZoom","setBearing","setPitch"]),xi={version:8,layers:[],sources:{}},qs={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Fs extends g.Evented{constructor(h,v={}){super(),this.map=h,this.dispatcher=new Me(Yn(),this),this.imageManager=new ee,this.imageManager.setEventedParent(this),this.glyphManager=new g.GlyphManager(h._requestManager,v.localFontFamily?g.LocalGlyphMode.all:v.localIdeographFontFamily?g.LocalGlyphMode.ideographs:g.LocalGlyphMode.none,v.localFontFamily||v.localIdeographFontFamily),this.crossTileSymbolIndex=new Hl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",g.getReferrer());const S=this;this._rtlTextPluginCallback=Fs.registerForPluginStateChange(D=>{S.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(k,F)=>{if(g.triggerPluginCompletionEvent(k),F&&F.every(B=>B))for(const B in S._sourceCaches){const V=S._sourceCaches[B],X=V.getSource().type;"vector"!==X&&"geojson"!==X||V.reload()}})}),this.on("data",D=>{if("source"!==D.dataType||"metadata"!==D.sourceDataType)return;const k=this.getSource(D.sourceId);if(k&&k.vectorLayerIds)for(const F in this._layers){const B=this._layers[F];B.source===k.id&&this._validateLayer(B)}})}loadURL(h,v={}){this.fire(new g.Event("dataloading",{dataType:"style"}));const S="boolean"==typeof v.validate?v.validate:!g.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,v.accessToken);const D=this.map._requestManager.transformRequest(h,g.ResourceType.Style);this._request=g.getJSON(D,(k,F)=>{this._request=null,k?this.fire(new g.ErrorEvent(k)):F&&this._load(F,S)})}loadJSON(h,v={}){this.fire(new g.Event("dataloading",{dataType:"style"})),this._request=g.exported.frame(()=>{this._request=null,this._load(h,!1!==v.validate)})}loadEmpty(){this.fire(new g.Event("dataloading",{dataType:"style"})),this._load(xi,!1)}_updateLayerCount(h,v){const S=v?1:-1;h.is3D()&&(this._num3DLayers+=S),"circle"===h.type&&(this._numCircleLayers+=S),"symbol"===h.type&&(this._numSymbolLayers+=S)}_load(h,v){if(v&&wc(this,g.validateStyle(h)))return;this._loaded=!0,this.stylesheet=g.clone$1(h),this._updateMapProjection();for(const D in h.sources)this.addSource(D,h.sources[D],{validate:!1});this._changed=!1,h.sprite?this._loadSprite(h.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(h.glyphs);const S=Dr(this.stylesheet.layers);this._order=S.map(D=>D.id),this._layers={},this._serializedLayers={};for(const D of S){const k=g.createStyleLayer(D);k.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ae(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new g.Event("data",{dataType:"style"})),this.fire(new g.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(h){h?this.stylesheet.projection=h:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(h){this._spriteRequest=function(v,S,D){let k,F,B;const V=g.exported.devicePixelRatio>1?"@2x":"";let X=g.getJSON(S.transformRequest(S.normalizeSpriteURL(v,V,".json"),g.ResourceType.SpriteJSON),(Ve,Ye)=>{X=null,B||(B=Ve,k=Ye,fe())}),q=g.getImage(S.transformRequest(S.normalizeSpriteURL(v,V,".png"),g.ResourceType.SpriteImage),(Ve,Ye)=>{q=null,B||(B=Ve,F=Ye,fe())});function fe(){if(B)D(B);else if(k&&F){const Ve=g.exported.getImageData(F),Ye={};for(const it in k){const{width:st,height:ft,x:ge,y:Ke,sdf:wt,pixelRatio:St,stretchX:Ht,stretchY:qt,content:Gt}=k[it],rn=new g.RGBAImage({width:st,height:ft});g.RGBAImage.copy(Ve,rn,{x:ge,y:Ke},{x:0,y:0},{width:st,height:ft}),Ye[it]={data:rn,pixelRatio:St,sdf:wt,stretchX:Ht,stretchY:qt,content:Gt}}D(null,Ye)}}return{cancel(){X&&(X.cancel(),X=null),q&&(q.cancel(),q=null)}}}(h,this.map._requestManager,(v,S)=>{if(this._spriteRequest=null,v)this.fire(new g.ErrorEvent(v));else if(S)for(const D in S)this.imageManager.addImage(D,S[D]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new g.Event("data",{dataType:"style"}))})}_validateLayer(h){const v=this.getSource(h.source);if(!v)return;const S=h.sourceLayer;S&&("geojson"===v.type||v.vectorLayerIds&&-1===v.vectorLayerIds.indexOf(S))&&this.fire(new g.ErrorEvent(new Error(`Source layer "${S}" does not exist on source "${v.id}" as specified by style layer "${h.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const h in this._sourceCaches)if(!this._sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(h){const v=[];for(const S of h){const D=this._layers[S];"custom"!==D.type&&v.push(D.serialize())}return v}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const h in this._sourceCaches)if(this._sourceCaches[h].hasTransition())return!0;for(const h in this._layers)if(this._layers[h].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(h){return!!this.terrain&&("function"==typeof h.isLayerDraped?h.isLayerDraped():qs[h.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(h){if(!this._loaded)return;const v=this._changed;if(this._changed){const D=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(D.length||k.length)&&this._updateWorkerLayers(D,k);for(const F in this._updatedSources){const B=this._updatedSources[F];"reload"===B?this._reloadSource(F):"clear"===B&&this._clearSource(F)}this._updateTilesForChangedImages();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(h);this.light.updateTransitions(h),this.fog&&this.fog.updateTransitions(h),this._resetUpdates()}const S={};for(const D in this._sourceCaches){const k=this._sourceCaches[D];S[D]=k.used,k.used=!1}for(const D of this._order){const k=this._layers[D];if(k.recalculate(h,this._availableImages),!k.isHidden(h.zoom)){const B=this._getLayerSourceCache(k);B&&(B.used=!0)}const F=this.map.painter;if(F){const B=k.getProgramIds();if(!B)continue;const V=k.getProgramConfiguration(h.zoom);for(const X of B)F.useProgram(X,V)}}for(const D in S){const k=this._sourceCaches[D];S[D]!==k.used&&k.getSource().fire(new g.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light.recalculate(h),this.terrain&&this.terrain.recalculate(h),this.fog&&this.fog.recalculate(h),this.z=h.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),v&&this.fire(new g.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const h=Object.keys(this._changedImages);if(h.length){for(const v in this._sourceCaches)this._sourceCaches[v].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}}_updateWorkerLayers(h,v){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:v})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(h){if(this._checkLoaded(),wc(this,g.validateStyle(h)))return!1;(h=g.clone$1(h)).layers=Dr(h.layers);const v=function(D,k){if(!D)return[{command:Bn.setStyle,args:[k]}];let F=[];try{if(!me(D.version,k.version))return[{command:Bn.setStyle,args:[k]}];me(D.center,k.center)||F.push({command:Bn.setCenter,args:[k.center]}),me(D.zoom,k.zoom)||F.push({command:Bn.setZoom,args:[k.zoom]}),me(D.bearing,k.bearing)||F.push({command:Bn.setBearing,args:[k.bearing]}),me(D.pitch,k.pitch)||F.push({command:Bn.setPitch,args:[k.pitch]}),me(D.sprite,k.sprite)||F.push({command:Bn.setSprite,args:[k.sprite]}),me(D.glyphs,k.glyphs)||F.push({command:Bn.setGlyphs,args:[k.glyphs]}),me(D.transition,k.transition)||F.push({command:Bn.setTransition,args:[k.transition]}),me(D.light,k.light)||F.push({command:Bn.setLight,args:[k.light]}),me(D.fog,k.fog)||F.push({command:Bn.setFog,args:[k.fog]}),me(D.projection,k.projection)||F.push({command:Bn.setProjection,args:[k.projection]});const B={},V=[];!function(fe,Ve,Ye,it){let st;for(st in Ve=Ve||{},fe=fe||{})fe.hasOwnProperty(st)&&(Ve.hasOwnProperty(st)||Pr(st,Ye,it));for(st in Ve){if(!Ve.hasOwnProperty(st))continue;const ft=Ve[st];fe.hasOwnProperty(st)?me(fe[st],ft)||("geojson"===fe[st].type&&"geojson"===ft.type&&to(fe,Ve,st)?Ye.push({command:Bn.setGeoJSONSourceData,args:[st,ft.data]}):oi(st,Ve,Ye,it)):yi(st,Ve,Ye)}}(D.sources,k.sources,V,B);const X=[];D.layers&&D.layers.forEach(fe=>{fe.source&&B[fe.source]?F.push({command:Bn.removeLayer,args:[fe.id]}):X.push(fe)});let q=D.terrain;q&&B[q.source]&&(F.push({command:Bn.setTerrain,args:[void 0]}),q=void 0),F=F.concat(V),me(q,k.terrain)||F.push({command:Bn.setTerrain,args:[k.terrain]}),function(fe,Ve,Ye){Ve=Ve||[];const it=(fe=fe||[]).map(So),st=Ve.map(So),ft=fe.reduce(so,{}),ge=Ve.reduce(so,{}),Ke=it.slice(),wt=Object.create(null);let St,Ht,qt,Gt,rn,Jt,wn;for(St=0,Ht=0;St<it.length;St++)qt=it[St],ge.hasOwnProperty(qt)?Ht++:(Ye.push({command:Bn.removeLayer,args:[qt]}),Ke.splice(Ke.indexOf(qt,Ht),1));for(St=0,Ht=0;St<st.length;St++)qt=st[st.length-1-St],Ke[Ke.length-1-St]!==qt&&(ft.hasOwnProperty(qt)?(Ye.push({command:Bn.removeLayer,args:[qt]}),Ke.splice(Ke.lastIndexOf(qt,Ke.length-Ht),1)):Ht++,Jt=Ke[Ke.length-St],Ye.push({command:Bn.addLayer,args:[ge[qt],Jt]}),Ke.splice(Ke.length-St,0,qt),wt[qt]=!0);for(St=0;St<st.length;St++)if(qt=st[St],Gt=ft[qt],rn=ge[qt],!wt[qt]&&!me(Gt,rn))if(me(Gt.source,rn.source)&&me(Gt["source-layer"],rn["source-layer"])&&me(Gt.type,rn.type)){for(wn in Vi(Gt.layout,rn.layout,Ye,qt,null,Bn.setLayoutProperty),Vi(Gt.paint,rn.paint,Ye,qt,null,Bn.setPaintProperty),me(Gt.filter,rn.filter)||Ye.push({command:Bn.setFilter,args:[qt,rn.filter]}),me(Gt.minzoom,rn.minzoom)&&me(Gt.maxzoom,rn.maxzoom)||Ye.push({command:Bn.setLayerZoomRange,args:[qt,rn.minzoom,rn.maxzoom]}),Gt)Gt.hasOwnProperty(wn)&&"layout"!==wn&&"paint"!==wn&&"filter"!==wn&&"metadata"!==wn&&"minzoom"!==wn&&"maxzoom"!==wn&&(0===wn.indexOf("paint.")?Vi(Gt[wn],rn[wn],Ye,qt,wn.slice(6),Bn.setPaintProperty):me(Gt[wn],rn[wn])||Ye.push({command:Bn.setLayerProperty,args:[qt,wn,rn[wn]]}));for(wn in rn)rn.hasOwnProperty(wn)&&!Gt.hasOwnProperty(wn)&&"layout"!==wn&&"paint"!==wn&&"filter"!==wn&&"metadata"!==wn&&"minzoom"!==wn&&"maxzoom"!==wn&&(0===wn.indexOf("paint.")?Vi(Gt[wn],rn[wn],Ye,qt,wn.slice(6),Bn.setPaintProperty):me(Gt[wn],rn[wn])||Ye.push({command:Bn.setLayerProperty,args:[qt,wn,rn[wn]]}))}else Ye.push({command:Bn.removeLayer,args:[qt]}),Jt=Ke[Ke.lastIndexOf(qt)+1],Ye.push({command:Bn.addLayer,args:[rn,Jt]})}(X,k.layers,F)}catch(B){console.warn("Unable to compute style diff:",B),F=[{command:Bn.setStyle,args:[k]}]}return F}(this.serialize(),h).filter(D=>!(D.command in Vc));if(0===v.length)return!1;const S=v.filter(D=>!(D.command in da));if(S.length>0)throw new Error(`Unimplemented: ${S.map(D=>D.command).join(", ")}.`);return v.forEach(D=>{"setTransition"!==D.command&&"setProjection"!==D.command&&this[D.command].apply(this,D.args)}),this.stylesheet=h,this._updateMapProjection(),!0}addImage(h,v){return this.getImage(h)?this.fire(new g.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(h,v),this._afterImageUpdated(h),this)}updateImage(h,v){this.imageManager.updateImage(h,v)}getImage(h){return this.imageManager.getImage(h)}removeImage(h){return this.getImage(h)?(this.imageManager.removeImage(h),this._afterImageUpdated(h),this):this.fire(new g.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(h,v,S={}){if(this._checkLoaded(),void 0!==this.getSource(h))throw new Error("There is already a source with this ID");if(!v.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(v).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(v.type)>=0&&this._validate(g.validateSource,`sources.${h}`,v,null,S))return;this.map&&this.map._collectResourceTiming&&(v.collectResourceTiming=!0);const D=Kr(h,v,this.dispatcher,this);D.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(h),source:D.serialize(),sourceId:h}));const k=F=>{const B=(F?"symbol:":"other:")+h,V=this._sourceCaches[B]=new g.SourceCache(B,D,F);(F?this._symbolSourceCaches:this._otherSourceCaches)[h]=V,V.style=this,V.onAdd(this.map)};k(!1),"vector"!==v.type&&"geojson"!==v.type||k(!0),D.onAdd&&D.onAdd(this.map),this._changed=!0}removeSource(h){this._checkLoaded();const v=this.getSource(h);if(!v)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===h)return this.fire(new g.ErrorEvent(new Error(`Source "${h}" cannot be removed while layer "${D}" is using it.`)));if(this.terrain&&this.terrain.get().source===h)return this.fire(new g.ErrorEvent(new Error(`Source "${h}" cannot be removed while terrain is using it.`)));const S=this._getSourceCaches(h);for(const D of S)delete this._sourceCaches[D.id],delete this._updatedSources[D.id],D.fire(new g.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:D.getSource().id})),D.setEventedParent(null),D.clearTiles();return delete this._otherSourceCaches[h],delete this._symbolSourceCaches[h],v.setEventedParent(null),v.onRemove&&v.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(h,v){this._checkLoaded(),this.getSource(h).setData(v),this._changed=!0}getSource(h){const v=this._getSourceCache(h);return v&&v.getSource()}_getSources(){const h=[];for(const v in this._otherSourceCaches){const S=this._getSourceCache(v);S&&h.push(S.getSource())}return h}addLayer(h,v,S={}){this._checkLoaded();const D=h.id;if(this.getLayer(D))return void this.fire(new g.ErrorEvent(new Error(`Layer with id "${D}" already exists on this map`)));let k;if("custom"===h.type){if(wc(this,g.validateCustomStyleLayer(h)))return;k=g.createStyleLayer(h)}else{if("object"==typeof h.source&&(this.addSource(D,h.source),h=g.clone$1(h),h=g.extend(h,{source:D})),this._validate(g.validateLayer,`layers.${D}`,h,{arrayIndex:-1},S))return;k=g.createStyleLayer(h),this._validateLayer(k),k.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}const F=v?this._order.indexOf(v):this._order.length;if(v&&-1===F)return void this.fire(new g.ErrorEvent(new Error(`Layer with id "${v}" does not exist on this map.`)));this._order.splice(F,0,D),this._layerOrderChanged=!0,this._layers[D]=k;const B=this._getLayerSourceCache(k);if(this._removedLayers[D]&&k.source&&B&&"custom"!==k.type){const V=this._removedLayers[D];delete this._removedLayers[D],V.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",B.pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(h,v){if(this._checkLoaded(),this._changed=!0,!this._layers[h])return void this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be moved.`)));if(h===v)return;const S=this._order.indexOf(h);this._order.splice(S,1);const D=v?this._order.indexOf(v):this._order.length;v&&-1===D?this.fire(new g.ErrorEvent(new Error(`Layer with id "${v}" does not exist on this map.`))):(this._order.splice(D,0,h),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(h){this._checkLoaded();const v=this._layers[h];if(!v)return void this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be removed.`)));v.setEventedParent(null),this._updateLayerCount(v,!1);const S=this._order.indexOf(h);this._order.splice(S,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=v,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],v.onRemove&&v.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(h){return this._layers[h]}hasLayer(h){return h in this._layers}hasLayerType(h){for(const v in this._layers)if(this._layers[v].type===h)return!0;return!1}setLayerZoomRange(h,v,S){this._checkLoaded();const D=this.getLayer(h);D?D.minzoom===v&&D.maxzoom===S||(null!=v&&(D.minzoom=v),null!=S&&(D.maxzoom=S),this._updateLayer(D)):this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(h,v,S={}){this._checkLoaded();const D=this.getLayer(h);if(D){if(!me(D.filter,v))return null==v?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(g.validateFilter,`layers.${D.id}.filter`,v,{layerType:D.type},S)||(D.filter=g.clone$1(v),this._updateLayer(D)))}else this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be filtered.`)))}getFilter(h){const v=this.getLayer(h);return v&&g.clone$1(v.filter)}setLayoutProperty(h,v,S,D={}){this._checkLoaded();const k=this.getLayer(h);k?me(k.getLayoutProperty(v),S)||(k.setLayoutProperty(v,S,D),this._updateLayer(k)):this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(h,v){const S=this.getLayer(h);if(S)return S.getLayoutProperty(v);this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style.`)))}setPaintProperty(h,v,S,D={}){this._checkLoaded();const k=this.getLayer(h);k?me(k.getPaintProperty(v),S)||(k.setPaintProperty(v,S,D)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new g.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(h,v){const S=this.getLayer(h);return S&&S.getPaintProperty(v)}setFeatureState(h,v){this._checkLoaded();const S=h.source,D=h.sourceLayer,k=this.getSource(S);if(!k)return void this.fire(new g.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`)));const F=k.type;if("geojson"===F&&D)return void this.fire(new g.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===F&&!D)return void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===h.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided.")));const B=this._getSourceCaches(S);for(const V of B)V.setFeatureState(D,h.id,v)}removeFeatureState(h,v){this._checkLoaded();const S=h.source,D=this.getSource(S);if(!D)return void this.fire(new g.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`)));const k=D.type,F="vector"===k?h.sourceLayer:void 0;if("vector"===k&&!F)return void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(v&&"string"!=typeof h.id&&"number"!=typeof h.id)return void this.fire(new g.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const B=this._getSourceCaches(S);for(const V of B)V.removeFeatureState(F,h.id,v)}getFeatureState(h){this._checkLoaded();const v=h.source,S=h.sourceLayer,D=this.getSource(v);if(D){if("vector"!==D.type||S)return void 0===h.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(v)[0].getFeatureState(S,h.id);this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new g.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)))}getTransition(){return g.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const h={};for(const v in this._sourceCaches){const S=this._sourceCaches[v].getSource();h[S.id]||(h[S.id]=S.serialize())}return g.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:h,layers:this._serializeLayers(this._order)},v=>void 0!==v)}_updateLayer(h){this._updatedLayers[h.id]=!0;const v=this._getLayerSourceCache(h);h.source&&!this._updatedSources[h.source]&&v&&"raster"!==v.getSource().type&&(this._updatedSources[h.source]="reload",v.pause()),this._changed=!0,h.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(h){const v=F=>"fill-extrusion"===this._layers[F].type,S={},D=[];for(let F=this._order.length-1;F>=0;F--){const B=this._order[F];if(v(B)){S[B]=F;for(const V of h){const X=V[B];if(X)for(const q of X)D.push(q)}}}D.sort((F,B)=>B.intersectionZ-F.intersectionZ);const k=[];for(let F=this._order.length-1;F>=0;F--){const B=this._order[F];if(v(B))for(let V=D.length-1;V>=0;V--){const X=D[V].feature;if(S[X.layer.id]<F)break;k.push(X),D.pop()}else for(const V of h){const X=V[B];if(X)for(const q of X)k.push(q.feature)}}return k}queryRenderedFeatures(h,v,S){v&&v.filter&&this._validate(g.validateFilter,"queryRenderedFeatures.filter",v.filter,null,v);const D={};if(v&&v.layers){if(!Array.isArray(v.layers))return this.fire(new g.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const V of v.layers){const X=this._layers[V];if(!X)return this.fire(new g.ErrorEvent(new Error(`The layer '${V}' does not exist in the map's style and cannot be queried for features.`))),[];D[X.source]=!0}}const k=[];v.availableImages=this._availableImages;const F=v&&v.layers?v.layers.some(V=>{const X=this.getLayer(V);return X&&X.is3D()}):this.has3DLayers(),B=Ue.createFromScreenPoints(h,S);for(const V in this._sourceCaches){const X=this._sourceCaches[V].getSource().id;v.layers&&!D[X]||k.push(Fi(this._sourceCaches[V],this._layers,this._serializedLayers,B,v,S,F,!!this.map._showQueryGeometry))}return this.placement&&k.push(function(V,X,q,fe,Ve,Ye,it){const st={},ft=Ye.queryRenderedSymbols(fe),ge=[];for(const Ke of Object.keys(ft).map(Number))ge.push(it[Ke]);ge.sort(Ct);for(const Ke of ge){const wt=Ke.featureIndex.lookupSymbolFeatures(ft[Ke.bucketInstanceId],X,Ke.bucketIndex,Ke.sourceLayerIndex,Ve.filter,Ve.layers,Ve.availableImages,V);for(const St in wt){const Ht=st[St]=st[St]||[],qt=wt[St];qt.sort((Gt,rn)=>{const Jt=Ke.featureSortOrder;if(Jt){const wn=Jt.indexOf(Gt.featureIndex);return Jt.indexOf(rn.featureIndex)-wn}return rn.featureIndex-Gt.featureIndex});for(const Gt of qt)Ht.push(Gt)}}for(const Ke in st)st[Ke].forEach(wt=>{const St=wt.feature,Ht=q(V[Ke]);if(!Ht)return;const qt=Ht.getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=qt});return st}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),B.screenGeometry,v,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(h,v){v&&v.filter&&this._validate(g.validateFilter,"querySourceFeatures.filter",v.filter,null,v);const S=this._getSourceCaches(h);let D=[];for(const k of S)D=D.concat(bt(k,v));return D}addSourceType(h,v,S){return Fs.getSourceType(h)?S(new Error(`A source type called "${h}" already exists.`)):(Fs.setSourceType(h,v),v.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:v.workerSourceURL},S):S(null,null))}getLight(){return this.light.getLight()}setLight(h,v={}){this._checkLoaded();const S=this.light.getLight();let D=!1;for(const F in h)if(!me(h[F],S[F])){D=!0;break}if(!D)return;const k=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(h,v),this.light.updateTransitions(k)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(h,v=1){if(this._checkLoaded(),!h)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let S=h;if(1===v){if("object"==typeof S.source){const D="terrain-dem-src";this.addSource(D,S.source),S=g.clone$1(S),S=g.extend(S,{source:D})}if(this._validate(g.validateTerrain,"terrain",S))return}if(!this.terrain||this.terrain&&v!==this.terrain.drapeRenderMode){if(!S)return;this._createTerrain(S,v)}else{const D=this.terrain,k=D.get();for(const F of Object.keys(g.spec.terrain))!S.hasOwnProperty(F)&&g.spec.terrain[F].default&&(S[F]=g.spec.terrain[F].default);for(const F in S)if(!me(S[F],k[F])){D.set(S),this.stylesheet.terrain=S;const B=this._setTransitionParameters({duration:0});D.updateTransitions(B);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(h){const v=this.fog=new qe(h,this.map.transform);this.stylesheet.fog=h;const S=this._setTransitionParameters({duration:0});v.updateTransitions(S)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const h of this.map._markers)h._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(h){if(this._checkLoaded(),!h)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const v=this.fog,S=v.get();0===Object.keys(h).length&&v.set(h);for(const D in h)if(!me(h[D],S[D])){v.set(h),this.stylesheet.fog=h;const k=this._setTransitionParameters({duration:0});v.updateTransitions(k);break}}else this._createFog(h);this._markersNeedUpdate=!0}_setTransitionParameters(h){return{now:g.exported.now(),transition:g.extend(h,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const h=this._order.filter(S=>this.isLayerDraped(this._layers[S])),v=this._order.filter(S=>!this.isLayerDraped(this._layers[S]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...h),this._drapedFirstOrder.push(...v)}_createTerrain(h,v){const S=this.terrain=new oe(h,v);this.stylesheet.terrain=h,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const D=this._setTransitionParameters({duration:0});S.updateTransitions(D)}_force3DLayerUpdate(){for(const h in this._layers){const v=this._layers[h];"fill-extrusion"===v.type&&this._updateLayer(v)}}_forceSymbolLayerUpdate(){for(const h in this._layers){const v=this._layers[h];"symbol"===v.type&&this._updateLayer(v)}}_validate(h,v,S,D,k={}){return(!k||!1!==k.validate)&&wc(this,h.call(g.validateStyle,g.extend({key:v,style:this.serialize(),value:S,styleSpec:g.spec},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),g.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this._sourceCaches)this._sourceCaches[h].clearTiles(),this._sourceCaches[h].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(h){const v=this._getSourceCaches(h);for(const S of v)S.clearTiles()}_reloadSource(h){const v=this._getSourceCaches(h);for(const S of v)S.resume(),S.reload()}_reloadSources(){for(const h of this._getSources())h.reload&&h.reload()}_updateSources(h){for(const v in this._sourceCaches)this._sourceCaches[v].update(h)}_generateCollisionBoxes(){for(const h in this._sourceCaches){const v=this._sourceCaches[h];v.resume(),v.reload()}}_updatePlacement(h,v,S,D,k=!1){let F=!1,B=!1;const V={};for(const X of this._order){const q=this._layers[X];if("symbol"!==q.type)continue;if(!V[q.source]){const Ve=this._getLayerSourceCache(q);if(!Ve)continue;V[q.source]=Ve.getRenderableIds(!0).map(Ye=>Ve.getTileByID(Ye)).sort((Ye,it)=>it.tileID.overscaledZ-Ye.tileID.overscaledZ||(Ye.tileID.isLessThan(it.tileID)?-1:1))}const fe=this.crossTileSymbolIndex.addLayer(q,V[q.source],h.center.lng,h.projection);F=F||fe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),k=k||this._layerOrderChanged||0===S,this._layerOrderChanged&&this.fire(new g.Event("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.exported.now(),h.zoom))&&(this.pauseablePlacement=new Hs(h,this._order,k,v,S,D,this.placement,this.fog&&h.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.exported.now()),B=!0),F&&this.pauseablePlacement.placement.setStale()),B||F)for(const X of this._order){const q=this._layers[X];"symbol"===q.type&&this.placement.updateLayerOpacities(q,V[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.exported.now())}_releaseSymbolFadeTiles(){for(const h in this._sourceCaches)this._sourceCaches[h].releaseSymbolFadeTiles()}getImages(h,v,S){this.imageManager.getImages(v.icons,S),this._updateTilesForChangedImages();const D=k=>{k&&k.setDependencies(v.tileID.key,v.type,v.icons)};D(this._otherSourceCaches[v.source]),D(this._symbolSourceCaches[v.source])}getGlyphs(h,v,S){this.glyphManager.getGlyphs(v.stacks,S)}getResource(h,v,S){return g.makeRequest(v,S)}_getSourceCache(h){return this._otherSourceCaches[h]}_getLayerSourceCache(h){return"symbol"===h.type?this._symbolSourceCaches[h.source]:this._otherSourceCaches[h.source]}_getSourceCaches(h){const v=[];return this._otherSourceCaches[h]&&v.push(this._otherSourceCaches[h]),this._symbolSourceCaches[h]&&v.push(this._symbolSourceCaches[h]),v}_isSourceCacheLoaded(h){const v=this._getSourceCaches(h);return 0===v.length?(this.fire(new g.ErrorEvent(new Error(`There is no source with ID '${h}'`))),!1):v.every(S=>S.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Fs.getSourceType=function(x){return ai[x]},Fs.setSourceType=function(x,h){ai[x]=h},Fs.registerForPluginStateChange=g.registerForPluginStateChange;var xf="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",yr="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Uc="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Io="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",jc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let sl={},oc={};const qa=[];ii(xf,qa),ii(Uc,qa),ii(Io,qa),ii(jc,qa),sl=ti("",Uc),oc=ti(jc,Io);const Iu=ti("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ol=xf,uh="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Ws={background:ti("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:ti("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:ti("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:ti("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ti("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:ti("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ti("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ti("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:ti("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:ti("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:ti("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:ti("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:ti("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:ti("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:ti("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ti("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:ti("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:ti("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:ti("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:ti("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:ti("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:ti("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:ti("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:ti("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ti("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",yr),skyboxGradient:ti("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",yr),skyboxCapture:ti("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ti("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:ti("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function ii(x,h){const v=x.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let S of v)if(S=S.trim(),"#"===S[0]&&S.includes("if")&&!S.includes("endif")){S=S.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const D=S.split(" ");for(const k of D)h.includes(k)||h.push(k)}}function ti(x,h){const v=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,S=h.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),D={},k=[...qa];return ii(x,k),ii(h,k),{fragmentSource:x=x.replace(v,(F,B,V,X,q)=>(D[q]=!0,"define"===B?`\n#ifndef HAS_UNIFORM_u_${q}\nvarying ${V} ${X} ${q};\n#else\nuniform ${V} ${X} u_${q};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${q}\n    ${V} ${X} ${q} = u_${q};\n#endif\n`)),vertexSource:h=h.replace(v,(F,B,V,X,q)=>{const fe="float"===X?"vec2":"vec4",Ve=q.match(/color/)?"color":fe;return D[q]?"define"===B?`\n#ifndef HAS_UNIFORM_u_${q}\nuniform lowp float u_${q}_t;\nattribute ${V} ${fe} a_${q};\nvarying ${V} ${X} ${q};\n#else\nuniform ${V} ${X} u_${q};\n#endif\n`:"vec4"===Ve?`\n#ifndef HAS_UNIFORM_u_${q}\n    ${q} = a_${q};\n#else\n    ${V} ${X} ${q} = u_${q};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${q}\n    ${q} = unpack_mix_${Ve}(a_${q}, u_${q}_t);\n#else\n    ${V} ${X} ${q} = u_${q};\n#endif\n`:"define"===B?`\n#ifndef HAS_UNIFORM_u_${q}\nuniform lowp float u_${q}_t;\nattribute ${V} ${fe} a_${q};\n#else\nuniform ${V} ${X} u_${q};\n#endif\n`:"vec4"===Ve?`\n#ifndef HAS_UNIFORM_u_${q}\n    ${V} ${X} ${q} = a_${q};\n#else\n    ${V} ${X} ${q} = u_${q};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${q}\n    ${V} ${X} ${q} = unpack_mix_${Ve}(a_${q}, u_${q}_t);\n#else\n    ${V} ${X} ${q} = u_${q};\n#endif\n`}),staticAttributes:S,usedDefines:k}}class ud{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(h,v,S,D,k,F,B){this.context=h;let V=this.boundPaintVertexBuffers.length!==D.length;for(let q=0;!V&&q<D.length;q++)this.boundPaintVertexBuffers[q]!==D[q]&&(V=!0);let X=this.boundDynamicVertexBuffers.length!==B.length;for(let q=0;!X&&q<B.length;q++)this.boundDynamicVertexBuffers[q]!==B[q]&&(X=!0);if(!h.extVertexArrayObject||!this.vao||this.boundProgram!==v||this.boundLayoutVertexBuffer!==S||V||X||this.boundIndexBuffer!==k||this.boundVertexOffset!==F)this.freshBind(v,S,D,k,F,B);else{h.bindVertexArrayOES.set(this.vao);for(const q of B)q&&q.bind();k&&k.dynamicDraw&&k.bind()}}freshBind(h,v,S,D,k,F){let B;const V=h.numAttributes,X=this.context,q=X.gl;if(X.extVertexArrayObject)this.vao&&this.destroy(),this.vao=X.extVertexArrayObject.createVertexArrayOES(),X.bindVertexArrayOES.set(this.vao),B=0,this.boundProgram=h,this.boundLayoutVertexBuffer=v,this.boundPaintVertexBuffers=S,this.boundIndexBuffer=D,this.boundVertexOffset=k,this.boundDynamicVertexBuffers=F;else{B=X.currentNumAttributes||0;for(let fe=V;fe<B;fe++)q.disableVertexAttribArray(fe)}v.enableAttributes(q,h),v.bind(),v.setVertexAttribPointers(q,h,k);for(const fe of S)fe.enableAttributes(q,h),fe.bind(),fe.setVertexAttribPointers(q,h,k);for(const fe of F)fe&&(fe.enableAttributes(q,h),fe.bind(),fe.setVertexAttribPointers(q,h,k));D&&D.bind(),X.currentNumAttributes=V}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function _l(x,h){const v=Math.pow(2,h.canonical.z),S=h.canonical.y;return[new g.MercatorCoordinate(0,S/v).toLngLat().lat,new g.MercatorCoordinate(0,(S+1)/v).toLngLat().lat]}function na(x,h,v,S,D,k,F){const B=x.context,V=B.gl,X=v.fbo;if(!X)return;x.prepareDrawTile();const q=x.useProgram("hillshade");B.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,X.colorAttachment.get());const fe=((st,ft,ge,Ke)=>{const wt=ge.paint.get("hillshade-shadow-color"),St=ge.paint.get("hillshade-highlight-color"),Ht=ge.paint.get("hillshade-accent-color");let qt=ge.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ge.paint.get("hillshade-illumination-anchor")&&(qt-=st.transform.angle);const Gt=!st.options.moving;return{u_matrix:Ke||st.transform.calculateProjMatrix(ft.tileID.toUnwrapped(),Gt),u_image:0,u_latrange:_l(0,ft.tileID),u_light:[ge.paint.get("hillshade-exaggeration"),qt],u_shadow:wt,u_highlight:St,u_accent:Ht}})(x,v,S,x.terrain?h.projMatrix:null);x.prepareDrawProgram(B,q,h.toUnwrapped());const{tileBoundsBuffer:Ve,tileBoundsIndexBuffer:Ye,tileBoundsSegments:it}=x.getTileBoundsBuffers(v);q.draw(B,V.TRIANGLES,D,k,F,g.CullFaceMode.disabled,fe,S.id,Ve,Ye,it)}function Tu(x,h,v){if(!h.needsDEMTextureUpload)return;const S=x.context,D=S.gl;S.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||x.getTileTexture(v.stride);const k=v.getPixels();h.demTexture?h.demTexture.update(k,{premultiply:!1}):h.demTexture=new g.Texture(S,k,D.RGBA,{premultiply:!1}),h.needsDEMTextureUpload=!1}function wf(x,h,v,S,D,k){const F=x.context,B=F.gl;if(!h.dem)return;const V=h.dem;if(F.activeTexture.set(B.TEXTURE1),Tu(x,h,V),!h.demTexture)return;h.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);const X=V.dim;F.activeTexture.set(B.TEXTURE0);let q=h.fbo;if(!q){const it=new g.Texture(F,{width:X,height:X,data:null},B.RGBA);it.bind(B.LINEAR,B.CLAMP_TO_EDGE),q=h.fbo=F.createFramebuffer(X,X,!0),q.colorAttachment.set(it.texture)}F.bindFramebuffer.set(q.framebuffer),F.viewport.set([0,0,X,X]);const{tileBoundsBuffer:fe,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Ye}=x.getMercatorTileBoundsBuffers();x.useProgram("hillshadePrepare").draw(F,B.TRIANGLES,S,D,k,g.CullFaceMode.disabled,((it,st)=>{const ft=st.stride,ge=g.create();return g.ortho(ge,0,g.EXTENT,-g.EXTENT,0,0,1),g.translate(ge,ge,[0,-g.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[ft,ft],u_zoom:it.overscaledZ,u_unpack:st.unpackVector}})(h.tileID,V),v.id,fe,Ve,Ye),h.needsHillshadePrepare=!1}const xs=x=>({u_matrix:new g.UniformMatrix4f(x),u_image0:new g.Uniform1i(x),u_skirt_height:new g.Uniform1f(x)}),Ud=(x,h)=>({u_matrix:x,u_image0:0,u_skirt_height:h}),vo=(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it)=>({u_proj_matrix:Float32Array.from(x),u_globe_matrix:h,u_normalize_matrix:Float32Array.from(S),u_merc_matrix:v,u_zoom_transition:D,u_merc_center:k,u_image0:0,u_frustum_tl:F,u_frustum_tr:B,u_frustum_br:V,u_frustum_bl:X,u_globe_pos:q,u_globe_radius:fe,u_viewport:Ve,u_grid_matrix:it?Float32Array.from(it):new Float32Array(9),u_skirt_height:Ye});function Ll(x,h){return null!=x&&null!=h&&!(!x.hasData()||!h.hasData())&&null!=x.demTexture&&null!=h.demTexture&&x.tileID.key!==h.tileID.key}const To=new class{constructor(){this.operations={}}newMorphing(x,h,v,S,D){if(x in this.operations){const k=this.operations[x];k.to.tileID.key!==v.tileID.key&&(k.queued=v)}else this.operations[x]={startTime:S,phase:0,duration:D,from:h,to:v,queued:null}}getMorphValuesForProxy(x){if(!(x in this.operations))return null;const h=this.operations[x];return{from:h.from,to:h.to,phase:h.phase}}update(x){for(const h in this.operations){const v=this.operations[h];for(v.phase=(x-v.startTime)/v.duration;v.phase>=1||!this._validOp(v);)if(!this._nextOp(v,x)){delete this.operations[h];break}}}_nextOp(x,h){return!!x.queued&&(x.from=x.to,x.to=x.queued,x.queued=null,x.phase=0,x.startTime=h,!0)}_validOp(x){return x.from.hasData()&&x.to.hasData()}},lu={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function al(x){return 6*Math.pow(1.5,22-x)}function lm(x,h){const v=1<<x.z;return!h&&(0===x.x||x.x===v-1)||0===x.y||x.y===v-1}const qi=x=>({u_matrix:x});function Fh(x,h,v,S,D){if(D>0){const k=g.exported.now(),F=(k-x.timeAdded)/D,B=h?(k-h.timeAdded)/D:-1,V=v.getSource(),X=S.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),q=!h||Math.abs(h.tileID.overscaledZ-X)>Math.abs(x.tileID.overscaledZ-X),fe=q&&x.refreshedUponExpiration?1:g.clamp(q?F:1-B,0,1);return x.refreshedUponExpiration&&F>=1&&(x.refreshedUponExpiration=!1),h?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}class As extends g.SourceCache{constructor(h){const v={type:"raster-dem",maxzoom:h.transform.maxZoom},S=new Me(Yn(),null),D=Kr("mock-dem",v,S,h.style);super("mock-dem",D,!1),D.setEventedParent(this),this._sourceLoaded=!0}_loadTile(h,v){h.state="loaded",v(null)}}class hd extends g.SourceCache{constructor(h){const v=Kr("proxy",{type:"geojson",maxzoom:h.transform.maxZoom},new Me(Yn(),null),h.style);super("proxy",v,!1),v.setEventedParent(this),this.map=this.getSource().map=h,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(h,v,S){if(h.freezeTileCoverage)return;this.transform=h;const D=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((k,F)=>{if(k[F.key]="",!this._tiles[F.key]){const B=new g.Tile(F,this._source.tileSize*F.overscaleFactor(),h.tileZoom);B.state="loaded",this._tiles[F.key]=B}return k},{});for(const k in this._tiles)k in D||(this.freeFBO(k),this._tiles[k].unloadVectorData(),delete this._tiles[k])}freeFBO(h){const v=this.proxyCachedFBO[h];if(void 0!==v){const S=Object.values(v);this.renderCachePool.push(...S),delete this.proxyCachedFBO[h]}}deallocRenderCache(){this.renderCache.forEach(h=>h.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class yl extends g.OverscaledTileID{constructor(h,v,S){super(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y),this.proxyTileKey=v,this.projMatrix=S}}class Bh extends g.Elevation{constructor(h,v){super(),this.painter=h,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[S,D,k]=function(V){const X=new g.StructArrayLayout2i4,q=new g.StructArrayLayout3ui6;X.reserve(17161),q.reserve(33800);const Ve=g.EXTENT/128,Ye=g.EXTENT+Ve/2,it=Ye+Ve;for(let ft=-Ve;ft<it;ft+=Ve)for(let ge=-Ve;ge<it;ge+=Ve){const Ke=ge<0||ge>Ye||ft<0||ft>Ye?24575:0,wt=g.clamp(Math.round(ge),0,g.EXTENT),St=g.clamp(Math.round(ft),0,g.EXTENT);X.emplaceBack(wt+Ke,St)}const st=(ft,ge)=>{const Ke=131*ge+ft;q.emplaceBack(Ke+1,Ke,Ke+131),q.emplaceBack(Ke+131,Ke+131+1,Ke+1)};for(let ft=1;ft<129;ft++)for(let ge=1;ge<129;ge++)st(ge,ft);return[0,129].forEach(ft=>{for(let ge=0;ge<130;ge++)st(ge,ft),st(ft,ge)}),[X,q,32768]}(),F=h.context;this.gridBuffer=F.createVertexBuffer(S,g.posAttributes.members),this.gridIndexBuffer=F.createIndexBuffer(D),this.gridSegments=g.SegmentVector.simpleSegment(0,0,S.length,D.length),this.gridNoSkirtSegments=g.SegmentVector.simpleSegment(0,0,S.length,k),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new hd(v.map),this.orthoMatrix=g.create(),g.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,g.EXTENT,0,g.EXTENT,0,1);const B=F.gl;this._overlapStencilMode=new g.StencilMode({func:B.GEQUAL,mask:255},0,255,B.KEEP,B.KEEP,B.REPLACE),this._previousZoom=h.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=v,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new As(v.map)}set style(h){h.on("data",this._onStyleDataEvent.bind(this)),h.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=h,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(h,v,S){if(h&&h.terrain){this._style!==h&&(this.style=h),this.enabled=!0;const D=h.terrain.properties;this.sourceCache=0===h.terrain.drapeRenderMode?this._mockSourceCache:h._getSourceCache(D.get("source")),this._exaggeration=D.get("exaggeration");const k=()=>{this.sourceCache.used&&g.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const F=this.getScaledDemTileSize();this.sourceCache.update(v,F,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,k(),this._initializing=!0),k(),v.updateElevation(!0,S),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(v),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(h){this._findCoveringTileCache[h]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const h=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==h.efficiency&&g.warnOnce(`Terrain render cache efficiency is not optimal (${h.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${h.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(h){h.coord&&"source"===h.dataType?this._clearRenderCacheForTile(h.sourceCacheId,h.coord):"style"===h.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const h in this._style._sourceCaches)this._style._sourceCaches[h].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(h=>h.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const h=2*this.proxySourceCache.getSource().tileSize;return[h,h]}set useVertexMorphing(h){this._useVertexMorphing=h}updateTileBinding(h){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const v=this.proxySourceCache,S=this.painter.transform;this._initializing&&(this._initializing=0===S._centerAltitude&&-1===this.getAtPointOrZero(g.MercatorCoordinate.fromLngLat(S.center),-1),this._emptyDEMTextureDirty=!this._initializing);const D=this.proxyCoords=v.getIds().map(V=>{const X=v.getTileByID(V).tileID;return X.projMatrix=S.calculateProjMatrix(X.toUnwrapped()),X});(function(V,X){const q=X.transform.pointCoordinate(X.transform.getCameraPoint()),fe=new g.Point(q.x,q.y);V.sort((Ve,Ye)=>{if(Ye.overscaledZ-Ve.overscaledZ)return Ye.overscaledZ-Ve.overscaledZ;const it=new g.Point(Ve.canonical.x+(1<<Ve.canonical.z)*Ve.wrap,Ve.canonical.y),st=new g.Point(Ye.canonical.x+(1<<Ye.canonical.z)*Ye.wrap,Ye.canonical.y),ft=fe.mult(1<<Ve.canonical.z);return ft.x-=.5,ft.y-=.5,ft.distSqr(it)-ft.distSqr(st)})})(D,this.painter),this._previousZoom=S.zoom;const k=this.proxyToSource||{};this.proxyToSource={},D.forEach(V=>{this.proxyToSource[V.key]={}}),this.terrainTileForTile={};const F=this._style._sourceCaches;for(const V in F){const X=F[V];if(!X.used||(X!==this.sourceCache&&this.resetTileLookupCache(X.id),this._setupProxiedCoordsForOrtho(X,h[V],k),X.usedForTerrain))continue;const q=h[V];X.getSource().reparseOverscaled&&this._assignTerrainTiles(q)}this.proxiedCoords[v.id]=D.map(V=>new yl(V,V.key,this.orthoMatrix)),this._assignTerrainTiles(D),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(k),this.renderingToTexture=!1,this._updateTimestamp=g.exported.now();const B={};this._visibleDemTiles=[];for(const V of this.proxyCoords){const X=this.terrainTileForTile[V.key];if(!X)continue;const q=X.tileID.key;q in B||(this._visibleDemTiles.push(X),B[q]=q)}}_assignTerrainTiles(h){this._initializing||h.forEach(v=>{if(this.terrainTileForTile[v.key])return;const S=this._findTileCoveringTileID(v,this.sourceCache);S&&(this.terrainTileForTile[v.key]=S)})}_prepareDEMTextures(){const h=this.painter.context,v=h.gl;for(const S in this.terrainTileForTile){const D=this.terrainTileForTile[S],k=D.dem;!k||D.demTexture&&!D.needsDEMTextureUpload||(h.activeTexture.set(v.TEXTURE1),Tu(this.painter,D,k))}}_prepareDemTileUniforms(h,v,S,D){if(!v||null==v.demTexture)return!1;const k=h.tileID.canonical,F=Math.pow(2,v.tileID.canonical.z-k.z),B=D||"";return S[`u_dem_tl${B}`]=[k.x*F%1,k.y*F%1],S[`u_dem_scale${B}`]=F,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const h=this.painter.context,v=h.gl;if(!this._emptyDepthBufferTexture){const S=new g.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new g.Texture(h,S,v.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let h=0;const v=this._visibleDemTiles.reduce((S,D)=>{if(!D.dem)return S;const k=D.dem.tree.minimums[0];return k>0&&h++,S+k},0);return h?v/h:0}_updateEmptyDEMTexture(){const h=this.painter.context,v=h.gl;h.activeTexture.set(v.TEXTURE2);const S=this._getLoadedAreaMinimum(),D=new g.RGBAImage({width:1,height:1},new Uint8Array(g.DEMData.pack(S,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let k=this._emptyDEMTexture;return k?k.update(D,{premultiply:!1}):k=this._emptyDEMTexture=new g.Texture(h,D,v.RGBA,{premultiply:!1}),k}setupElevationDraw(h,v,S){const D=this.painter.context,k=D.gl,F=(B=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:g.DEMData.getUnpackVector(B),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var B;F.u_dem_size=this.sourceCache.getSource().tileSize,F.u_exaggeration=this.exaggeration();let V=null,X=null,q=1;if(S&&S.morphing&&this._useVertexMorphing){const fe=S.morphing.srcDemTile,Ve=S.morphing.dstDemTile;q=S.morphing.phase,fe&&Ve&&(this._prepareDemTileUniforms(h,fe,F,"_prev")&&(X=fe),this._prepareDemTileUniforms(h,Ve,F)&&(V=Ve))}if(X&&V?(D.activeTexture.set(k.TEXTURE2),V.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),D.activeTexture.set(k.TEXTURE4),X.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),F.u_dem_lerp=q):(V=this.terrainTileForTile[h.tileID.key],D.activeTexture.set(k.TEXTURE2),(this._prepareDemTileUniforms(h,V,F)?V.demTexture:this.emptyDEMTexture).bind(k.NEAREST,k.CLAMP_TO_EDGE)),D.activeTexture.set(k.TEXTURE3),S&&S.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),this._depthFBO&&(F.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),F.u_depth_size_inv=[1,1]),S&&S.useMeterToDem&&V){const fe=(1<<V.tileID.canonical.z)*g.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;F.u_meter_to_dem=fe}if(S&&S.labelPlaneMatrixInv&&(F.u_label_plane_matrix_inv=S.labelPlaneMatrixInv),v.setTerrainUniformValues(D,F),"globe"===this.painter.transform.projection.name){const fe=this.globeUniformValues(this.painter.transform,h.tileID.canonical,S&&S.useDenormalizedUpVectorScale);v.setGlobeUniformValues(D,fe)}}globeUniformValues(h,v,S){const D=h.projection;return{u_tile_tl_up:D.upVector(v,0,0),u_tile_tr_up:D.upVector(v,g.EXTENT,0),u_tile_br_up:D.upVector(v,g.EXTENT,g.EXTENT),u_tile_bl_up:D.upVector(v,0,g.EXTENT),u_tile_up_scale:S?g.globeMetersToEcef(1):D.upVectorScale(v,h.center.lat,h.worldSize).metersToTile}}renderToBackBuffer(h){const v=this.painter,S=this.painter.context;0!==h.length&&(S.bindFramebuffer.set(null),S.viewport.set([0,0,v.width,v.height]),v.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(D,k,F,B,V){if("globe"===D.transform.projection.name)!function(X,q,fe,Ve,Ye){const it=X.context,st=it.gl;let ft,ge;const Ke=X.options.showTerrainWireframe?2:0,wt=X.transform,St=g.globeUseCustomAntiAliasing(X,it,wt),Ht=(ar,bn)=>{if(ge===ar)return;const Un=[lu[ar],"PROJECTION_GLOBE_VIEW"];St&&Un.push("CUSTOM_ANTIALIASING"),bn&&Un.push(lu[Ke]),ft=X.useProgram("globeRaster",null,Un),ge=ar},qt=X.colorModeForRenderPass(),Gt=new g.DepthMode(st.LEQUAL,g.DepthMode.ReadWrite,X.depthRangeFor3D);To.update(Ye);const rn=g.calculateGlobeMercatorMatrix(wt),Jt=[g.mercatorXfromLng(wt.center.lng),g.mercatorYfromLat(wt.center.lat)],wn=Ke?[!1,!0]:[!1],ur=X.globeSharedBuffers,mn=[wt.width*g.exported.devicePixelRatio,wt.height*g.exported.devicePixelRatio],Gn=Float32Array.from(wt.globeMatrix),Dn={useDenormalizedUpVectorScale:!0};if(wn.forEach(ar=>{const bn=X.transform,Un=al(bn.zoom)*q.exaggeration();ge=-1;const cr=ar?st.LINES:st.TRIANGLES;for(const Jn of Ve){const hr=fe.getTile(Jn),vi=g.StencilMode.disabled,Ui=q.prevTerrainTileForTile[Jn.key],Wr=q.terrainTileForTile[Jn.key];Ll(Ui,Wr)&&To.newMorphing(Jn.key,Ui,Wr,Ye,250),it.activeTexture.set(st.TEXTURE0),hr.texture.bind(st.LINEAR,st.CLAMP_TO_EDGE);const ei=To.getMorphValuesForProxy(Jn.key),co=ei?1:0;ei&&g.extend$1(Dn,{morphing:{srcDemTile:ei.from,dstDemTile:ei.to,phase:g.easeCubicInOut(ei.phase)}});const uo=g.tileCornersToBounds(Jn.canonical),hi=g.getLatitudinalLod(uo.getCenter().lat),ms=g.getGridMatrix(Jn.canonical,uo,hi,bn.worldSize/bn._pixelsPerMercatorPixel),zs=g.globeNormalizeECEF(g.globeTileBounds(Jn.canonical)),Zs=vo(bn.projMatrix,Gn,rn,zs,g.globeToMercatorTransition(bn.zoom),Jt,bn.frustumCorners.TL,bn.frustumCorners.TR,bn.frustumCorners.BR,bn.frustumCorners.BL,bn.globeCenterInViewSpace,bn.globeRadius,mn,Un,ms);if(Ht(co,ar),q.setupElevationDraw(hr,ft,Dn),X.prepareDrawProgram(it,ft,Jn.toUnwrapped()),ur){const[Ms,Ac,_a]=ar?ur.getWirefameBuffers(X.context,hi):ur.getGridBuffers(hi,0!==Un);ft.draw(it,cr,Gt,vi,qt,g.CullFaceMode.backCCW,Zs,"globe_raster",Ms,Ac,_a)}}}),ur){const ar=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];St&&ar.push("CUSTOM_ANTIALIASING"),ft=X.useProgram("globeRaster",null,ar);for(const bn of Ve){const{x:Un,y:cr,z:Jn}=bn.canonical,hr=0===cr,vi=cr===(1<<Jn)-1,[Ui,Wr,ei,co]=ur.getPoleBuffers(Jn);if(co&&(hr||vi)){const uo=fe.getTile(bn);it.activeTexture.set(st.TEXTURE0),uo.texture.bind(st.LINEAR,st.CLAMP_TO_EDGE);let hi=g.globePoleMatrixForTile(Jn,Un,wt);const ms=g.globeNormalizeECEF(g.globeTileBounds(bn.canonical)),zs=(Zs,Ms)=>Zs.draw(it,st.TRIANGLES,Gt,g.StencilMode.disabled,qt,g.CullFaceMode.disabled,vo(wt.projMatrix,hi,hi,ms,0,Jt,wt.frustumCorners.TL,wt.frustumCorners.TR,wt.frustumCorners.BR,wt.frustumCorners.BL,wt.globeCenterInViewSpace,wt.globeRadius,mn,0),"globe_pole_raster",Ms,ei,co);q.setupElevationDraw(uo,ft,Dn),X.prepareDrawProgram(it,ft,bn.toUnwrapped()),hr&&zs(ft,Ui),vi&&(hi=g.scale(g.create(),hi,[1,-1,1]),zs(ft,Wr))}}}}(D,k,F,B,V);else{const X=D.context,q=X.gl;let fe,Ve;const Ye=D.options.showTerrainWireframe?2:0,it=(wt,St)=>{if(Ve===wt)return;const Ht=[lu[wt]];St&&Ht.push(lu[Ye]),fe=D.useProgram("terrainRaster",null,Ht),Ve=wt},st=D.colorModeForRenderPass(),ft=new g.DepthMode(q.LEQUAL,g.DepthMode.ReadWrite,D.depthRangeFor3D);To.update(V);const ge=D.transform,Ke=al(ge.zoom)*k.exaggeration();(Ye?[!1,!0]:[!1]).forEach(wt=>{Ve=-1;const St=wt?q.LINES:q.TRIANGLES,[Ht,qt]=wt?k.getWirefameBuffer():[k.gridIndexBuffer,k.gridSegments];for(const Gt of B){const rn=F.getTile(Gt),Jt=g.StencilMode.disabled,wn=k.prevTerrainTileForTile[Gt.key],ur=k.terrainTileForTile[Gt.key];Ll(wn,ur)&&To.newMorphing(Gt.key,wn,ur,V,250),X.activeTexture.set(q.TEXTURE0),rn.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const mn=To.getMorphValuesForProxy(Gt.key),Gn=mn?1:0;let Dn;mn&&(Dn={morphing:{srcDemTile:mn.from,dstDemTile:mn.to,phase:g.easeCubicInOut(mn.phase)}});const ar=Ud(Gt.projMatrix,lm(Gt.canonical,ge.renderWorldCopies)?Ke/10:Ke);it(Gn,wt),k.setupElevationDraw(rn,fe,Dn),D.prepareDrawProgram(X,fe,Gt.toUnwrapped()),fe.draw(X,St,ft,Jt,st,g.CullFaceMode.backCCW,ar,"terrain_raster",k.gridBuffer,Ht,qt)}})}}(v,this,this.proxySourceCache,h,this._updateTimestamp),this.renderingToTexture=!0,v.gpuTimingDeferredRenderEnd(),h.splice(0,h.length))}renderBatch(h){if(0===this._drapedRenderBatches.length)return h+1;this.renderingToTexture=!0;const v=this.painter,S=this.painter.context,D=this.proxySourceCache,k=this.proxiedCoords[D.id],F=this._drapedRenderBatches.shift(),B=[],V=v.style.order;let X=0;for(const q of k){const fe=D.getTileByID(q.proxyTileKey),Ve=D.proxyCachedFBO[q.key]?D.proxyCachedFBO[q.key][h]:void 0,Ye=void 0!==Ve?D.renderCache[Ve]:this.pool[X++],it=void 0!==Ve;if(fe.texture=Ye.tex,it&&!Ye.dirty){B.push(fe.tileID);continue}let st;S.bindFramebuffer.set(Ye.fb.framebuffer),this.renderedToTile=!1,Ye.dirty&&(S.clear({color:g.Color.transparent,stencil:0}),Ye.dirty=!1);for(let ft=F.start;ft<=F.end;++ft){const ge=v.style._layers[V[ft]];if(ge.isHidden(v.transform.zoom))continue;const Ke=v.style._getLayerSourceCache(ge),wt=Ke?this.proxyToSource[q.key][Ke.id]:[q];if(!wt)continue;const St=wt;S.viewport.set([0,0,Ye.fb.width,Ye.fb.height]),st!==(Ke?Ke.id:null)&&(this._setupStencil(Ye,wt,ge,Ke),st=Ke?Ke.id:null),v.renderLayer(v,Ke,ge,St)}this.renderedToTile?(Ye.dirty=!0,B.push(fe.tileID)):it||--X,5===X&&(X=0,this.renderToBackBuffer(B))}return this.renderToBackBuffer(B),this.renderingToTexture=!1,S.bindFramebuffer.set(null),S.viewport.set([0,0,v.width,v.height]),F.end+1}postRender(){}renderCacheEfficiency(h){const v=h.order.length;if(0===v)return{efficiency:100};let S,D=0,k=0,F=!1;for(let B=0;B<v;++B){const V=h._layers[h.order[B]];this._style.isLayerDraped(V)?(F&&++D,++k):F||(F=!0,S=V.id)}return 0===k?{efficiency:100}:{efficiency:100*(1-D/k),firstUndrapedLayer:S}}getMinElevationBelowMSL(){let h=0;return this._visibleDemTiles.filter(v=>v.dem).forEach(v=>{h=Math.min(h,v.dem.tree.minimums[0])}),0===h?h:(h-30)*this._exaggeration}raycast(h,v,S){if(!this._visibleDemTiles)return null;const D=this._visibleDemTiles.filter(k=>k.dem).map(k=>{const F=k.tileID,B=1<<F.overscaledZ,{x:V,y:X}=F.canonical,q=V/B,fe=(V+1)/B,Ve=X/B,Ye=(X+1)/B;return{minx:q,miny:Ve,maxx:fe,maxy:Ye,t:k.dem.tree.raycastRoot(q,Ve,fe,Ye,h,v,S),tile:k}});D.sort((k,F)=>(null!==k.t?k.t:Number.MAX_VALUE)-(null!==F.t?F.t:Number.MAX_VALUE));for(const k of D){if(null==k.t)return null;const F=k.tile.dem.tree.raycast(k.minx,k.miny,k.maxx,k.maxy,h,v,S);if(null!=F)return F}return null}_createFBO(){const h=this.painter.context,v=h.gl,S=this.drapeBufferSize;h.activeTexture.set(v.TEXTURE0);const D=new g.Texture(h,{width:S[0],height:S[1],data:null},v.RGBA);D.bind(v.LINEAR,v.CLAMP_TO_EDGE);const k=h.createFramebuffer(S[0],S[1],!1);return k.colorAttachment.set(D.texture),k.depthAttachment=new Dt(h,k.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=h.createRenderbuffer(h.gl.DEPTH_STENCIL,S[0],S[1]),this._stencilRef=0,k.depthAttachment.set(this._sharedDepthStencil),h.clear({stencil:0})):k.depthAttachment.set(this._sharedDepthStencil),h.extTextureFilterAnisotropic&&!h.extTextureFilterAnisotropicForceOff&&v.texParameterf(v.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax),{fb:k,tex:D,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const h in this._style._sourceCaches)if(this._style._sourceCaches[h].hasTransition())return!0;return this._style.order.some(h=>{const v=this._style._layers[h],S=v.isHidden(this.painter.transform.zoom);return"custom"===v.type?!S&&v.shouldRedrape():!S&&v.hasTransition()})}_clearLineLayersFromRenderCache(){let h=!1;for(const S of this._style._getSources())if(S instanceof nr){h=!0;break}if(!h)return;const v={};for(let S=0;S<this._style.order.length;++S){const D=this._style._layers[this._style.order[S]],k=this._style._getLayerSourceCache(D);if(k&&!v[k.id]&&!D.isHidden(this.painter.transform.zoom)&&"line"===D.type&&D.widthExpression()instanceof g.ZoomDependentExpression){v[k.id]=!0;for(const F of this.proxyCoords){const B=this.proxyToSource[F.key][k.id];if(B)for(const V of B)this._clearRenderCacheForTile(k.id,V)}}}}_clearRasterLayersFromRenderCache(){let h=!1;for(const S in this._style._sourceCaches)if(this._style._sourceCaches[S]._source instanceof Xn){h=!0;break}if(!h)return;const v={};for(let S=0;S<this._style.order.length;++S){const D=this._style._layers[this._style.order[S]],k=this._style._getLayerSourceCache(D);if(!k||v[k.id]||D.isHidden(this.painter.transform.zoom)||"raster"!==D.type)continue;const F=D.paint.get("raster-fade-duration");for(const B of this.proxyCoords){const V=this.proxyToSource[B.key][k.id];if(V)for(const X of V){const q=Fh(k.getTile(X),k.findLoadedParent(X,0),k,this.painter.transform,F);(1!==q.opacity||0!==q.mix)&&this._clearRenderCacheForTile(k.id,X)}}}}_setupDrapedRenderBatches(){const h=this._style.order,v=h.length;if(0===v)return;const S=[];let D,k=0,F=this._style._layers[h[k]];for(;!this._style.isLayerDraped(F)&&F.isHidden(this.painter.transform.zoom)&&++k<v;)F=this._style._layers[h[k]];for(;k<v;++k){const B=this._style._layers[h[k]];B.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(B)?void 0===D&&(D=k):void 0!==D&&(S.push({start:D,end:k-1}),D=void 0))}void 0!==D&&S.push({start:D,end:k-1}),this._drapedRenderBatches=S}_setupRenderCache(h){const v=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,v.renderCache.length>v.renderCachePool.length){const F=Object.values(v.proxyCachedFBO);v.proxyCachedFBO={};for(let B=0;B<F.length;++B){const V=Object.values(F[B]);v.renderCachePool.push(...V)}}return}this._clearRasterLayersFromRenderCache();const S=this.proxyCoords,D=this._tilesDirty;for(let F=S.length-1;F>=0;F--){const B=S[F];if(v.getTileByID(B.key),void 0!==v.proxyCachedFBO[B.key]){const V=h[B.key],X=this.proxyToSource[B.key];let q=0;for(const fe in X){const Ve=X[fe],Ye=V[fe];if(!Ye||Ye.length!==Ve.length||Ve.some((it,st)=>it!==Ye[st]||D[fe]&&D[fe].hasOwnProperty(it.key))){q=-1;break}++q}for(const fe in v.proxyCachedFBO[B.key])v.renderCache[v.proxyCachedFBO[B.key][fe]].dirty=q<0||q!==Object.values(V).length}}const k=[...this._drapedRenderBatches];k.sort((F,B)=>B.end-B.start-(F.end-F.start));for(const F of k)for(const B of S){if(v.proxyCachedFBO[B.key])continue;let V=v.renderCachePool.pop();void 0===V&&v.renderCache.length<50&&(V=v.renderCache.length,v.renderCache.push(this._createFBO())),void 0!==V&&(v.proxyCachedFBO[B.key]={},v.proxyCachedFBO[B.key][F.start]=V,v.renderCache[V].dirty=!0)}this._tilesDirty={}}_setupStencil(h,v,S,D){if(!D||!this._sourceTilesOverlap[D.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const k=this.painter.context,F=k.gl;if(v.length<=1)return void(this._overlapStencilType=!1);let B;if(S.isTileClipped())B=v.length,this._overlapStencilMode.test={func:F.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(v[0].overscaledZ>v[v.length-1].overscaledZ))return void(this._overlapStencilType=!1);B=1,this._overlapStencilMode.test={func:F.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+B>255&&(k.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=B,this._overlapStencilMode.ref=this._stencilRef,S.isTileClipped()&&this._renderTileClippingMasks(v,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(h){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[h.key]),this._overlapStencilMode):g.StencilMode.disabled}_renderTileClippingMasks(h,v){const S=this.painter,D=this.painter.context,k=D.gl;S._tileClippingMaskIDs={},D.setColorMode(g.ColorMode.disabled),D.setDepthMode(g.DepthMode.disabled);const F=S.useProgram("clippingMask");for(const B of h){const V=S._tileClippingMaskIDs[B.key]=--v;F.draw(D,k.TRIANGLES,g.DepthMode.disabled,new g.StencilMode({func:k.ALWAYS,mask:0},V,255,k.KEEP,k.KEEP,k.REPLACE),g.ColorMode.disabled,g.CullFaceMode.disabled,qi(B.projMatrix),"$clipping",S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}}pointCoordinate(h){const v=this.painter.transform;if(h.x<0||h.x>v.width||h.y<0||h.y>v.height)return null;const S=[h.x,h.y,1,1];g.transformMat4$1(S,S,v.pixelMatrixInverse),g.scale$1(S,S,1/S[3]),S[0]/=v.worldSize,S[1]/=v.worldSize;const D=v._camera.position,k=g.mercatorZfromAltitude(1,v.center.lat),F=[D[0],D[1],D[2]/k,0],B=g.subtract([],S.slice(0,3),F);g.normalize(B,B);const V=this.raycast(F,B,this._exaggeration);return null!==V&&V?(g.scaleAndAdd(F,F,B,V),F[3]=F[2],F[2]*=k,F):null}drawDepth(){const h=this.painter,v=h.context,S=this.proxySourceCache,D=Math.ceil(h.width),k=Math.ceil(h.height);if(!this._depthFBO||this._depthFBO.width===D&&this._depthFBO.height===k||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const F=v.gl,B=v.createFramebuffer(D,k,!0);v.activeTexture.set(F.TEXTURE0);const V=new g.Texture(v,{width:D,height:k,data:null},F.RGBA);V.bind(F.NEAREST,F.CLAMP_TO_EDGE),B.colorAttachment.set(V.texture);const X=v.createRenderbuffer(v.gl.DEPTH_COMPONENT16,D,k);B.depthAttachment.set(X),this._depthFBO=B,this._depthTexture=V}v.bindFramebuffer.set(this._depthFBO.framebuffer),v.viewport.set([0,0,D,k]),function(F,B,V,X){if("globe"===F.transform.projection.name)return;const q=F.context,fe=q.gl;q.clear({depth:1});const Ve=F.useProgram("terrainDepth"),Ye=new g.DepthMode(fe.LESS,g.DepthMode.ReadWrite,F.depthRangeFor3D);for(const it of X){const st=V.getTile(it),ft=Ud(it.projMatrix,0);B.setupElevationDraw(st,Ve),Ve.draw(q,fe.TRIANGLES,Ye,g.StencilMode.disabled,g.ColorMode.unblended,g.CullFaceMode.backCCW,ft,"terrain_depth",B.gridBuffer,B.gridIndexBuffer,B.gridNoSkirtSegments)}}(h,this,S,this.proxyCoords)}_setupProxiedCoordsForOrtho(h,v,S){if(h.getSource()instanceof Si)return this._setupProxiedCoordsForImageSource(h,v,S);this._findCoveringTileCache[h.id]=this._findCoveringTileCache[h.id]||{};const D=this.proxiedCoords[h.id]=[],k=this.proxyCoords;for(let B=0;B<k.length;B++){const V=k[B],X=this._findTileCoveringTileID(V,h);if(X){const q=this._createProxiedId(V,X,S[V.key]&&S[V.key][h.id]);D.push(q),this.proxyToSource[V.key][h.id]=[q]}}let F=!1;for(let B=0;B<v.length;B++){const V=h.getTile(v[B]);if(!V||!V.hasData())continue;const X=this._findTileCoveringTileID(V.tileID,this.proxySourceCache);if(X&&X.tileID.canonical.z!==V.tileID.canonical.z){const q=this.proxyToSource[X.tileID.key][h.id],fe=this._createProxiedId(X.tileID,V,S[X.tileID.key]&&S[X.tileID.key][h.id]);q?q.splice(q.length-1,0,fe):this.proxyToSource[X.tileID.key][h.id]=[fe],D.push(fe),F=!0}}this._sourceTilesOverlap[h.id]=F}_setupProxiedCoordsForImageSource(h,v,S){if(!h.getSource().loaded())return;const D=this.proxiedCoords[h.id]=[],k=this.proxyCoords,F=h.getSource(),B=new g.Point(F.tileID.x,F.tileID.y)._div(1<<F.tileID.z),V=F.coordinates.map(g.MercatorCoordinate.fromLngLat).reduce((q,fe)=>(q.min.x=Math.min(q.min.x,fe.x-B.x),q.min.y=Math.min(q.min.y,fe.y-B.y),q.max.x=Math.max(q.max.x,fe.x-B.x),q.max.y=Math.max(q.max.y,fe.y-B.y),q),{min:new g.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new g.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),X=(q,fe)=>{const Ve=q.wrap+q.canonical.x/(1<<q.canonical.z),Ye=q.canonical.y/(1<<q.canonical.z),it=g.EXTENT/(1<<q.canonical.z),st=fe.wrap+fe.canonical.x/(1<<fe.canonical.z),ft=fe.canonical.y/(1<<fe.canonical.z);return Ve+it<st+V.min.x||Ve>st+V.max.x||Ye+it<ft+V.min.y||Ye>ft+V.max.y};for(let q=0;q<k.length;q++){const fe=k[q];for(let Ve=0;Ve<v.length;Ve++){const Ye=h.getTile(v[Ve]);if(!Ye||!Ye.hasData()||X(fe,Ye.tileID))continue;const it=this._createProxiedId(fe,Ye,S[fe.key]&&S[fe.key][h.id]),st=this.proxyToSource[fe.key][h.id];st?st.push(it):this.proxyToSource[fe.key][h.id]=[it],D.push(it)}}}_createProxiedId(h,v,S){let D=this.orthoMatrix;if(S){const k=S.find(F=>F.key===v.tileID.key);if(k)return k}if(v.tileID.key!==h.key){const k=h.canonical.z-v.tileID.canonical.z;let F,B,V;D=g.create();const X=v.tileID.wrap-h.wrap<<h.overscaledZ;k>0?(F=g.EXTENT>>k,B=F*((v.tileID.canonical.x<<k)-h.canonical.x+X),V=F*((v.tileID.canonical.y<<k)-h.canonical.y)):(F=g.EXTENT<<-k,B=g.EXTENT*(v.tileID.canonical.x-(h.canonical.x+X<<-k)),V=g.EXTENT*(v.tileID.canonical.y-(h.canonical.y<<-k))),g.ortho(D,0,F,0,F,0,1),g.translate(D,D,[B,V,0])}return new yl(v.tileID,h.key,D)}_findTileCoveringTileID(h,v){let S=v.getTile(h);if(S&&S.hasData())return S;const D=this._findCoveringTileCache[v.id],k=D[h.key];if(S=k?v.getTileByID(k):null,S&&S.hasData()||null===k)return S;let F=S?S.tileID:h,B=F.overscaledZ;const V=v.getSource().minzoom,X=[];if(!k){const fe=v.getSource().maxzoom;if(h.canonical.z>=fe){const Ve=h.canonical.z-fe;v.getSource().reparseOverscaled?(B=Math.max(h.canonical.z+2,v.transform.tileZoom),F=new g.OverscaledTileID(B,h.wrap,fe,h.canonical.x>>Ve,h.canonical.y>>Ve)):0!==Ve&&(B=fe,F=new g.OverscaledTileID(B,h.wrap,fe,h.canonical.x>>Ve,h.canonical.y>>Ve))}F.key!==h.key&&(X.push(F.key),S=v.getTile(F))}const q=fe=>{X.forEach(Ve=>{D[Ve]=fe}),X.length=0};for(B-=1;B>=V&&(!S||!S.hasData());B--){S&&q(S.tileID.key);const fe=F.calculateScaledKey(B);if(S=v.getTileByID(fe),S&&S.hasData())break;const Ve=D[fe];if(null===Ve)break;void 0===Ve?X.push(fe):S=v.getTileByID(Ve)}return q(S?S.tileID.key:null),S&&S.hasData()?S:null}findDEMTileFor(h){return this.enabled?this._findTileCoveringTileID(h,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(h,v){let S=this._tilesDirty[h];S||(S=this._tilesDirty[h]={}),S[v.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const h=function(v){let S=0;const D=new g.StructArrayLayout2ui4,k=131;for(let F=1;F<129;F++){for(let B=1;B<129;B++)S=F*k+B,D.emplaceBack(S,S+1),D.emplaceBack(S,S+k),D.emplaceBack(S+1,S+k),128===F&&D.emplaceBack(S+k,S+k+1);D.emplaceBack(S+1,S+1+k)}return D}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(h),this.wireframeSegments=g.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,h.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class lo{static cacheKey(h,v,S,D){let k=`${v}${D?D.cacheKey:""}`;for(const F of S)h.usedDefines.includes(F)&&(k+=`/${F}`);return k}constructor(h,v,S,D,k,F){const B=h.gl;this.program=B.createProgram();const V=function(ge){const Ke=[];for(let wt=0;wt<ge.length;wt++){if(null===ge[wt])continue;const St=ge[wt].split(" ");Ke.push(St.pop())}return Ke}(S.staticAttributes),X=D?D.getBinderAttributes():[],q=V.concat(X);let fe=D?D.defines():[];fe=fe.concat(F.map(ge=>`#define ${ge}`));const Ve=h.isWebGL2?"#version 300 es\n":"",Ye=Ve+fe.concat(h.extStandardDerivatives&&0===Ve.length?"#extension GL_OES_standard_derivatives : enable\n".concat(uh):uh,uh,Ol,Iu.fragmentSource,oc.fragmentSource,S.fragmentSource).join("\n"),it=Ve+fe.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ol,Iu.vertexSource,oc.vertexSource,sl.vertexSource,S.vertexSource).join("\n"),st=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(st,Ye),B.compileShader(st),B.attachShader(this.program,st);const ft=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())this.failedToCreate=!0;else{B.shaderSource(ft,it),B.compileShader(ft),B.attachShader(this.program,ft),this.attributes={},this.numAttributes=q.length;for(let ge=0;ge<this.numAttributes;ge++)q[ge]&&(B.bindAttribLocation(this.program,ge,q[ge]),this.attributes[q[ge]]=ge);B.linkProgram(this.program),B.deleteShader(ft),B.deleteShader(st),this.fixedUniforms=k(h),this.binderUniforms=D?D.getUniforms(h):[],F.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new g.Uniform1i(ge=h),u_dem_prev:new g.Uniform1i(ge),u_dem_unpack:new g.Uniform4f(ge),u_dem_tl:new g.Uniform2f(ge),u_dem_scale:new g.Uniform1f(ge),u_dem_tl_prev:new g.Uniform2f(ge),u_dem_scale_prev:new g.Uniform1f(ge),u_dem_size:new g.Uniform1f(ge),u_dem_lerp:new g.Uniform1f(ge),u_exaggeration:new g.Uniform1f(ge),u_depth:new g.Uniform1i(ge),u_depth_size_inv:new g.Uniform2f(ge),u_meter_to_dem:new g.Uniform1f(ge),u_label_plane_matrix_inv:new g.UniformMatrix4f(ge)}),F.includes("GLOBE")&&(this.globeUniforms=(ge=>({u_tile_tl_up:new g.Uniform3f(ge),u_tile_tr_up:new g.Uniform3f(ge),u_tile_br_up:new g.Uniform3f(ge),u_tile_bl_up:new g.Uniform3f(ge),u_tile_up_scale:new g.Uniform1f(ge)}))(h)),F.includes("FOG")&&(this.fogUniforms=(ge=>({u_fog_matrix:new g.UniformMatrix4f(ge),u_fog_range:new g.Uniform2f(ge),u_fog_color:new g.Uniform4f(ge),u_fog_horizon_blend:new g.Uniform1f(ge),u_fog_temporal_offset:new g.Uniform1f(ge),u_frustum_tl:new g.Uniform3f(ge),u_frustum_tr:new g.Uniform3f(ge),u_frustum_br:new g.Uniform3f(ge),u_frustum_bl:new g.Uniform3f(ge),u_globe_pos:new g.Uniform3f(ge),u_globe_radius:new g.Uniform1f(ge),u_globe_transition:new g.Uniform1f(ge),u_is_globe:new g.Uniform1i(ge),u_viewport:new g.Uniform2f(ge)}))(h))}var ge}setTerrainUniformValues(h,v){if(!this.terrainUniforms)return;const S=this.terrainUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const D in v)S[D]&&S[D].set(this.program,D,v[D])}}setGlobeUniformValues(h,v){if(!this.globeUniforms)return;const S=this.globeUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const D in v)S[D]&&S[D].set(this.program,D,v[D])}}setFogUniformValues(h,v){if(!this.fogUniforms)return;const S=this.fogUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const D in v)S[D].set(this.program,D,v[D])}}draw(h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st){const ft=h.gl;if(this.failedToCreate)return;h.program.set(this.program),h.setDepthMode(S),h.setStencilMode(D),h.setColorMode(k),h.setCullFace(F);for(const Ke of Object.keys(this.fixedUniforms))this.fixedUniforms[Ke].set(this.program,Ke,B[Ke]);it&&it.setUniforms(this.program,h,this.binderUniforms,Ve,{zoom:Ye});const ge={[ft.LINES]:2,[ft.TRIANGLES]:3,[ft.LINE_STRIP]:1}[v];for(const Ke of fe.get()){const wt=Ke.vaos||(Ke.vaos={});(wt[V]||(wt[V]=new ud)).bind(h,this,X,it?it.getPaintVertexBuffers():[],q,Ke.vertexOffset,st||[]),ft.drawElements(v,Ke.primitiveLength*ge,ft.UNSIGNED_SHORT,Ke.primitiveOffset*ge*2)}}}function Ec(x,h){const v=Math.pow(2,h.tileID.overscaledZ),S=h.tileSize*Math.pow(2,x.transform.tileZoom)/v,D=S*(h.tileID.canonical.x+h.tileID.wrap*v),k=S*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_tile_units_to_pixels:1/Je(h,1,x.transform.tileZoom),u_pixel_coord_upper:[D>>16,k>>16],u_pixel_coord_lower:[65535&D,65535&k]}}const fo=g.create(),ql=(x,h,v,S,D,k,F,B,V,X,q)=>{const fe=h.style.light,Ve=fe.properties.get("position"),Ye=[Ve.x,Ve.y,Ve.z],it=g.create$1();"viewport"===fe.properties.get("anchor")&&(g.fromRotation(it,-h.transform.angle),g.transformMat3(Ye,Ye,it));const st=fe.properties.get("color"),ft=h.transform,ge={u_matrix:x,u_lightpos:Ye,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[st.r,st.g,st.b],u_vertical_gradient:+v,u_opacity:S,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:fo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:D,u_edge_radius:k};return"globe"===ft.projection.name&&(ge.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],ge.u_zoom_transition=V,ge.u_inv_rot_matrix=q,ge.u_merc_center=X,ge.u_up_dir=ft.projection.upVector(new g.CanonicalTileID(0,0,0),X[0]*g.EXTENT,X[1]*g.EXTENT),ge.u_height_lift=B),ge},dd=(x,h,v,S,D,k,F,B,V,X,q,fe)=>{const Ve=ql(x,h,v,S,D,k,F,V,X,q,fe),Ye={u_height_factor:-Math.pow(2,F.overscaledZ)/B.tileSize/8};return g.extend(Ve,Ec(h,B),Ye)},Nl=x=>({u_matrix:x}),Sl=(x,h,v)=>g.extend(Nl(x),Ec(h,v)),Ca=(x,h)=>({u_matrix:x,u_world:h}),L_=(x,h,v,S)=>g.extend(Sl(x,h,v),{u_world:S}),hh=g.create(),Du=(x,h,v,S,D,k)=>{const F=x.transform,B="globe"===F.projection.name;let V;if("map"===k.paint.get("circle-pitch-alignment"))if(B){const q=g.globePixelsToTileUnits(F.zoom,h.canonical)*F._pixelsPerMercatorPixel;V=Float32Array.from([q,0,0,q])}else V=F.calculatePixelsToTileUnitsMatrix(v);else V=new Float32Array([F.pixelsToGLUnits[0],0,0,F.pixelsToGLUnits[1]]);const X={u_camera_to_center_distance:F.cameraToCenterDistance,u_matrix:x.translatePosMatrix(h.projMatrix,v,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_device_pixel_ratio:g.exported.devicePixelRatio,u_extrude_scale:V,u_inv_rot_matrix:hh,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(B){X.u_inv_rot_matrix=S,X.u_merc_center=D,X.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],X.u_zoom_transition=g.globeToMercatorTransition(F.zoom);const q=D[0]*g.EXTENT,fe=D[1]*g.EXTENT;X.u_up_dir=F.projection.upVector(new g.CanonicalTileID(0,0,0),q,fe)}return X},pn=x=>{const h=[];return"map"===x.paint.get("circle-pitch-alignment")&&h.push("PITCH_WITH_MAP"),"map"===x.paint.get("circle-pitch-scale")&&h.push("SCALE_WITH_MAP"),h},Au=(x,h,v,S)=>{const D=g.EXTENT/v.tileSize;return{u_matrix:x,u_camera_to_center_distance:h.getCameraToCenterDistance(S),u_extrude_scale:[h.pixelsToGLUnits[0]/D,h.pixelsToGLUnits[1]/D]}},rr=(x,h,v=1)=>({u_matrix:x,u_color:h,u_overlay:0,u_overlay_scale:v}),Wl=g.create(),Cc=(x,h,v,S,D,k,F)=>{const B=x.transform,V="globe"===B.projection.name,X=V?g.globePixelsToTileUnits(B.zoom,h.canonical)*B._pixelsPerMercatorPixel:Je(v,1,k),q={u_matrix:h.projMatrix,u_extrude_scale:X,u_intensity:F,u_inv_rot_matrix:Wl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(V){q.u_inv_rot_matrix=S,q.u_merc_center=D,q.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],q.u_zoom_transition=g.globeToMercatorTransition(B.zoom);const fe=D[0]*g.EXTENT,Ve=D[1]*g.EXTENT;q.u_up_dir=B.projection.upVector(new g.CanonicalTileID(0,0,0),fe,Ve)}return q},cu=(x,h,v,S,D,k,F)=>{const B=x.transform,V=B.calculatePixelsToTileUnitsMatrix(h);return{u_matrix:lp(x,h,v,S),u_pixels_to_tile_units:V,u_device_pixel_ratio:k,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:D,u_texsize:Xl(v)?h.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:fa(h,x.transform),u_alpha_discard_threshold:0,u_trim_offset:F}},Sc=(x,h,v,S,D)=>{const k=x.transform;return{u_matrix:lp(x,h,v,S),u_texsize:h.imageAtlasTexture.size,u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(h),u_device_pixel_ratio:D,u_image:0,u_tile_units_to_pixels:fa(h,k),u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function fa(x,h){return 1/Je(x,1,h.tileZoom)}function lp(x,h,v,S){return x.translatePosMatrix(S||h.tileID.projMatrix,h,v.paint.get("line-translate"),v.paint.get("line-translate-anchor"))}function Xl(x){const h=x.paint.get("line-dasharray").value;return h.value||"constant"!==h.kind}const Ra=(x,h,v,S,D,k)=>{return{u_matrix:x,u_tl_parent:h,u_scale_parent:v,u_fade_t:S.mix,u_opacity:S.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(B=D.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(F=D.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:Bs(D.paint.get("raster-hue-rotate")),u_perspective_transform:k};var F,B};function Bs(x){x*=Math.PI/180;const h=Math.sin(x),v=Math.cos(x);return[(2*v+1)/3,(-Math.sqrt(3)*h-v+1)/3,(Math.sqrt(3)*h-v+1)/3]}const Sa=g.create(),Po=(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st)=>{const ft=D.transform,ge={u_is_size_zoom_constant:+("constant"===x||"source"===x),u_is_size_feature_constant:+("constant"===x||"camera"===x),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:ft.cameraToCenterDistance,u_rotate_symbol:+v,u_aspect_ratio:ft.width/ft.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:F,u_coord_matrix:B,u_is_text:+V,u_pitch_with_map:+S,u_texsize:X,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Sa,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Sa,u_up_vector:[0,-1,0]};return"globe"===st.name&&(ge.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],ge.u_zoom_transition=fe,ge.u_inv_rot_matrix=Ye,ge.u_merc_center=Ve,ge.u_camera_forward=ft._camera.forward(),ge.u_ecef_origin=g.globeECEFOrigin(ft.globeMatrix,q.toUnwrapped()),ge.u_tile_matrix=Float32Array.from(ft.globeMatrix),ge.u_up_vector=it),ge},Oa=(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st,ft)=>g.extend(Po(x,h,v,S,D,k,F,B,V,X,fe,Ve,Ye,it,st,ft),{u_gamma_scale:S?D.transform.cameraToCenterDistance*Math.cos(D.terrain?0:D.transform._pitch):1,u_device_pixel_ratio:g.exported.devicePixelRatio,u_is_halo:+q}),Ef=(x,h,v,S,D,k,F,B,V,X,q,fe,Ve,Ye,it,st)=>g.extend(Oa(x,h,v,S,D,k,F,B,!0,V,!0,q,fe,Ve,Ye,it,st),{u_texsize_icon:X,u_texture_icon:1}),Vu=(x,h,v)=>({u_matrix:x,u_opacity:h,u_color:v}),fd=(x,h,v,S,D)=>g.extend(function(k,F,B){const V=F.imageManager.getPattern(k.toString()),{width:X,height:q}=F.imageManager.getPixelSize(),fe=Math.pow(2,B.tileID.overscaledZ),Ve=B.tileSize*Math.pow(2,F.transform.tileZoom)/fe,Ye=Ve*(B.tileID.canonical.x+B.tileID.wrap*fe),it=Ve*B.tileID.canonical.y;return{u_image:0,u_pattern_tl:V.tl,u_pattern_br:V.br,u_texsize:[X,q],u_pattern_size:V.displaySize,u_tile_units_to_pixels:1/Je(B,1,F.transform.tileZoom),u_pixel_coord_upper:[Ye>>16,it>>16],u_pixel_coord_lower:[65535&Ye,65535&it]}}(S,v,D),{u_matrix:x,u_opacity:h}),uu={fillExtrusion:x=>({u_matrix:new g.UniformMatrix4f(x),u_lightpos:new g.Uniform3f(x),u_lightintensity:new g.Uniform1f(x),u_lightcolor:new g.Uniform3f(x),u_vertical_gradient:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x),u_edge_radius:new g.Uniform1f(x),u_ao:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_up_dir:new g.Uniform3f(x),u_height_lift:new g.Uniform1f(x)}),fillExtrusionPattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_lightpos:new g.Uniform3f(x),u_lightintensity:new g.Uniform1f(x),u_lightcolor:new g.Uniform3f(x),u_vertical_gradient:new g.Uniform1f(x),u_height_factor:new g.Uniform1f(x),u_edge_radius:new g.Uniform1f(x),u_ao:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_up_dir:new g.Uniform3f(x),u_height_lift:new g.Uniform1f(x),u_image:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x)}),fill:x=>({u_matrix:new g.UniformMatrix4f(x)}),fillPattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_image:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x)}),fillOutline:x=>({u_matrix:new g.UniformMatrix4f(x),u_world:new g.Uniform2f(x)}),fillOutlinePattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_world:new g.Uniform2f(x),u_image:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x)}),circle:x=>({u_camera_to_center_distance:new g.Uniform1f(x),u_extrude_scale:new g.UniformMatrix2f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_up_dir:new g.Uniform3f(x)}),collisionBox:x=>({u_matrix:new g.UniformMatrix4f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_extrude_scale:new g.Uniform2f(x)}),collisionCircle:x=>({u_matrix:new g.UniformMatrix4f(x),u_inv_matrix:new g.UniformMatrix4f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_viewport_size:new g.Uniform2f(x)}),debug:x=>({u_color:new g.UniformColor(x),u_matrix:new g.UniformMatrix4f(x),u_overlay:new g.Uniform1i(x),u_overlay_scale:new g.Uniform1f(x)}),clippingMask:x=>({u_matrix:new g.UniformMatrix4f(x)}),heatmap:x=>({u_extrude_scale:new g.Uniform1f(x),u_intensity:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_up_dir:new g.Uniform3f(x)}),heatmapTexture:x=>({u_image:new g.Uniform1i(x),u_color_ramp:new g.Uniform1i(x),u_opacity:new g.Uniform1f(x)}),hillshade:x=>({u_matrix:new g.UniformMatrix4f(x),u_image:new g.Uniform1i(x),u_latrange:new g.Uniform2f(x),u_light:new g.Uniform2f(x),u_shadow:new g.UniformColor(x),u_highlight:new g.UniformColor(x),u_accent:new g.UniformColor(x)}),hillshadePrepare:x=>({u_matrix:new g.UniformMatrix4f(x),u_image:new g.Uniform1i(x),u_dimension:new g.Uniform2f(x),u_zoom:new g.Uniform1f(x),u_unpack:new g.Uniform4f(x)}),line:x=>({u_matrix:new g.UniformMatrix4f(x),u_pixels_to_tile_units:new g.UniformMatrix2f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_units_to_pixels:new g.Uniform2f(x),u_dash_image:new g.Uniform1i(x),u_gradient_image:new g.Uniform1i(x),u_image_height:new g.Uniform1f(x),u_texsize:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x),u_alpha_discard_threshold:new g.Uniform1f(x),u_trim_offset:new g.Uniform2f(x)}),linePattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_texsize:new g.Uniform2f(x),u_pixels_to_tile_units:new g.UniformMatrix2f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_image:new g.Uniform1i(x),u_units_to_pixels:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x),u_alpha_discard_threshold:new g.Uniform1f(x)}),raster:x=>({u_matrix:new g.UniformMatrix4f(x),u_tl_parent:new g.Uniform2f(x),u_scale_parent:new g.Uniform1f(x),u_fade_t:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x),u_image0:new g.Uniform1i(x),u_image1:new g.Uniform1i(x),u_brightness_low:new g.Uniform1f(x),u_brightness_high:new g.Uniform1f(x),u_saturation_factor:new g.Uniform1f(x),u_contrast_factor:new g.Uniform1f(x),u_spin_weights:new g.Uniform3f(x),u_perspective_transform:new g.Uniform2f(x)}),symbolIcon:x=>({u_is_size_zoom_constant:new g.Uniform1i(x),u_is_size_feature_constant:new g.Uniform1i(x),u_size_t:new g.Uniform1f(x),u_size:new g.Uniform1f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_rotate_symbol:new g.Uniform1i(x),u_aspect_ratio:new g.Uniform1f(x),u_fade_change:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_label_plane_matrix:new g.UniformMatrix4f(x),u_coord_matrix:new g.UniformMatrix4f(x),u_is_text:new g.Uniform1i(x),u_pitch_with_map:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_camera_forward:new g.Uniform3f(x),u_tile_matrix:new g.UniformMatrix4f(x),u_up_vector:new g.Uniform3f(x),u_ecef_origin:new g.Uniform3f(x),u_texture:new g.Uniform1i(x)}),symbolSDF:x=>({u_is_size_zoom_constant:new g.Uniform1i(x),u_is_size_feature_constant:new g.Uniform1i(x),u_size_t:new g.Uniform1f(x),u_size:new g.Uniform1f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_rotate_symbol:new g.Uniform1i(x),u_aspect_ratio:new g.Uniform1f(x),u_fade_change:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_label_plane_matrix:new g.UniformMatrix4f(x),u_coord_matrix:new g.UniformMatrix4f(x),u_is_text:new g.Uniform1i(x),u_pitch_with_map:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_texture:new g.Uniform1i(x),u_gamma_scale:new g.Uniform1f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_camera_forward:new g.Uniform3f(x),u_tile_matrix:new g.UniformMatrix4f(x),u_up_vector:new g.Uniform3f(x),u_ecef_origin:new g.Uniform3f(x),u_is_halo:new g.Uniform1i(x)}),symbolTextAndIcon:x=>({u_is_size_zoom_constant:new g.Uniform1i(x),u_is_size_feature_constant:new g.Uniform1i(x),u_size_t:new g.Uniform1f(x),u_size:new g.Uniform1f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_rotate_symbol:new g.Uniform1i(x),u_aspect_ratio:new g.Uniform1f(x),u_fade_change:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_label_plane_matrix:new g.UniformMatrix4f(x),u_coord_matrix:new g.UniformMatrix4f(x),u_is_text:new g.Uniform1i(x),u_pitch_with_map:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_texsize_icon:new g.Uniform2f(x),u_texture:new g.Uniform1i(x),u_texture_icon:new g.Uniform1i(x),u_gamma_scale:new g.Uniform1f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_is_halo:new g.Uniform1i(x)}),background:x=>({u_matrix:new g.UniformMatrix4f(x),u_opacity:new g.Uniform1f(x),u_color:new g.UniformColor(x)}),backgroundPattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_opacity:new g.Uniform1f(x),u_image:new g.Uniform1i(x),u_pattern_tl:new g.Uniform2f(x),u_pattern_br:new g.Uniform2f(x),u_texsize:new g.Uniform2f(x),u_pattern_size:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x)}),terrainRaster:xs,terrainDepth:xs,skybox:x=>({u_matrix:new g.UniformMatrix4f(x),u_sun_direction:new g.Uniform3f(x),u_cubemap:new g.Uniform1i(x),u_opacity:new g.Uniform1f(x),u_temporal_offset:new g.Uniform1f(x)}),skyboxGradient:x=>({u_matrix:new g.UniformMatrix4f(x),u_color_ramp:new g.Uniform1i(x),u_center_direction:new g.Uniform3f(x),u_radius:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x),u_temporal_offset:new g.Uniform1f(x)}),skyboxCapture:x=>({u_matrix_3f:new g.UniformMatrix3f(x),u_sun_direction:new g.Uniform3f(x),u_sun_intensity:new g.Uniform1f(x),u_color_tint_r:new g.Uniform4f(x),u_color_tint_m:new g.Uniform4f(x),u_luminance:new g.Uniform1f(x)}),globeRaster:x=>({u_proj_matrix:new g.UniformMatrix4f(x),u_globe_matrix:new g.UniformMatrix4f(x),u_normalize_matrix:new g.UniformMatrix4f(x),u_merc_matrix:new g.UniformMatrix4f(x),u_zoom_transition:new g.Uniform1f(x),u_merc_center:new g.Uniform2f(x),u_image0:new g.Uniform1i(x),u_grid_matrix:new g.UniformMatrix3f(x),u_skirt_height:new g.Uniform1f(x),u_frustum_tl:new g.Uniform3f(x),u_frustum_tr:new g.Uniform3f(x),u_frustum_br:new g.Uniform3f(x),u_frustum_bl:new g.Uniform3f(x),u_globe_pos:new g.Uniform3f(x),u_globe_radius:new g.Uniform1f(x),u_viewport:new g.Uniform2f(x)}),globeAtmosphere:x=>({u_frustum_tl:new g.Uniform3f(x),u_frustum_tr:new g.Uniform3f(x),u_frustum_br:new g.Uniform3f(x),u_frustum_bl:new g.Uniform3f(x),u_horizon:new g.Uniform1f(x),u_transition:new g.Uniform1f(x),u_fadeout_range:new g.Uniform1f(x),u_color:new g.Uniform4f(x),u_high_color:new g.Uniform4f(x),u_space_color:new g.Uniform4f(x),u_star_intensity:new g.Uniform1f(x),u_star_density:new g.Uniform1f(x),u_star_size:new g.Uniform1f(x),u_temporal_offset:new g.Uniform1f(x),u_horizon_angle:new g.Uniform1f(x),u_rotation_matrix:new g.UniformMatrix4f(x)})};let dh;function hu(x,h,v,S,D,k,F){const B=x.context,V=B.gl,X=x.transform,q=x.useProgram("collisionBox"),fe=[];let Ve=0,Ye=0;for(let St=0;St<S.length;St++){const Ht=S[St],qt=h.getTile(Ht),Gt=qt.getBucket(v);if(!Gt)continue;const rn=Rt(Ht,Gt,X);let Jt=rn;0===D[0]&&0===D[1]||(Jt=x.translatePosMatrix(rn,qt,D,k));const wn=F?Gt.textCollisionBox:Gt.iconCollisionBox,ur=Gt.collisionCircleArray;if(ur.length>0){const mn=g.create(),Gn=Jt;g.mul(mn,Gt.placementInvProjMatrix,X.glCoordMatrix),g.mul(mn,mn,Gt.placementViewportMatrix),fe.push({circleArray:ur,circleOffset:Ye,transform:Gn,invTransform:mn,projection:Gt.getProjection()}),Ve+=ur.length/4,Ye=Ve}wn&&(x.terrain&&x.terrain.setupElevationDraw(qt,q),q.draw(B,V.LINES,g.DepthMode.disabled,g.StencilMode.disabled,x.colorModeForRenderPass(),g.CullFaceMode.disabled,Au(Jt,X,qt,Gt.getProjection()),v.id,wn.layoutVertexBuffer,wn.indexBuffer,wn.segments,null,X.zoom,null,[wn.collisionVertexBuffer,wn.collisionVertexBufferExt]))}if(!F||!fe.length)return;const it=x.useProgram("collisionCircle"),st=new g.StructArrayLayout2f1f2i16;st.resize(4*Ve),st._trim();let ft=0;for(const St of fe)for(let Ht=0;Ht<St.circleArray.length/4;Ht++){const qt=4*Ht,Gt=St.circleArray[qt+0],rn=St.circleArray[qt+1],Jt=St.circleArray[qt+2],wn=St.circleArray[qt+3];st.emplace(ft++,Gt,rn,Jt,wn,0),st.emplace(ft++,Gt,rn,Jt,wn,1),st.emplace(ft++,Gt,rn,Jt,wn,2),st.emplace(ft++,Gt,rn,Jt,wn,3)}(!dh||dh.length<2*Ve)&&(dh=function(St){const Ht=2*St,qt=new g.StructArrayLayout3ui6;qt.resize(Ht),qt._trim();for(let Gt=0;Gt<Ht;Gt++){const rn=6*Gt;qt.uint16[rn+0]=4*Gt+0,qt.uint16[rn+1]=4*Gt+1,qt.uint16[rn+2]=4*Gt+2,qt.uint16[rn+3]=4*Gt+2,qt.uint16[rn+4]=4*Gt+3,qt.uint16[rn+5]=4*Gt+0}return qt}(Ve));const ge=B.createIndexBuffer(dh,!0),Ke=B.createVertexBuffer(st,g.collisionCircleLayout.members,!0);for(const St of fe){const Ht={u_matrix:St.transform,u_inv_matrix:St.invTransform,u_camera_to_center_distance:(wt=X).getCameraToCenterDistance(St.projection),u_viewport_size:[wt.width,wt.height]};it.draw(B,V.TRIANGLES,g.DepthMode.disabled,g.StencilMode.disabled,x.colorModeForRenderPass(),g.CullFaceMode.disabled,Ht,v.id,Ke,ge,g.SegmentVector.simpleSegment(0,2*St.circleOffset,St.circleArray.length,St.circleArray.length/2),null,X.zoom)}var wt;Ke.destroy(),ge.destroy()}const Gc=g.create();function Ia({width:x,height:h,anchor:v,textOffset:S,textScale:D},k){const{horizontalAlign:F,verticalAlign:B}=g.getAnchorAlignment(v),V=-(F-.5)*x,X=-(B-.5)*h,q=g.evaluateVariableOffset(v,S);return new g.Point((V/D+q[0])*k,(X/D+q[1])*k)}function pd(x,h,v,S,D,k,F,B,V,X,q){const fe=x.text.placedSymbolArray,Ve=x.text.dynamicLayoutVertexArray,Ye=x.icon.dynamicLayoutVertexArray,it={},st=x.getProjection(),ft=sn(B,st,k),ge=k.elevation,Ke=st.upVectorScale(B.canonical,k.center.lat,k.worldSize).metersToTile;Ve.clear();for(let wt=0;wt<fe.length;wt++){const St=fe.get(wt),{tileAnchorX:Ht,tileAnchorY:qt,numGlyphs:Gt}=St,rn=St.hidden||!St.crossTileID||x.allowVerticalPlacement&&!St.placedOrientation?null:S[St.crossTileID];if(rn){let Jt=0,wn=0,ur=0;if(ge){const hr=ge?ge.getAtTileOffset(B,Ht,qt):0,[vi,Ui,Wr]=st.upVector(B.canonical,Ht,qt);Jt=hr*vi*Ke,wn=hr*Ui*Ke,ur=hr*Wr*Ke}let[mn,Gn,Dn,ar]=bs(St.projectedAnchorX+Jt,St.projectedAnchorY+wn,St.projectedAnchorZ+ur,v?ft:F);const bn=Mo(k.getCameraToCenterDistance(st),ar);let Un=D.evaluateSizeForFeature(x.textSizeData,X,St)*bn/g.ONE_EM;v&&(Un*=x.tilePixelRatio/V);const cr=Ia(rn,Un);v?(({x:mn,y:Gn,z:Dn}=st.projectTilePoint(Ht+cr.x,qt+cr.y,B.canonical)),[mn,Gn,Dn]=bs(mn+Jt,Gn+wn,Dn+ur,F)):(h&&cr._rotate(-k.angle),mn+=cr.x,Gn+=cr.y,Dn=0);const Jn=x.allowVerticalPlacement&&St.placedOrientation===g.WritingMode.vertical?Math.PI/2:0;for(let hr=0;hr<Gt;hr++)g.addDynamicAttributes(Ve,mn,Gn,Dn,Jn);q&&St.associatedIconIndex>=0&&(it[St.associatedIconIndex]={x:mn,y:Gn,z:Dn,angle:Jn})}else ye(Gt,Ve)}if(q){Ye.clear();const wt=x.icon.placedSymbolArray;for(let St=0;St<wt.length;St++){const Ht=wt.get(St),{numGlyphs:qt}=Ht,Gt=it[St];if(Ht.hidden||!Gt)ye(qt,Ye);else{const{x:rn,y:Jt,z:wn,angle:ur}=Gt;for(let mn=0;mn<qt;mn++)g.addDynamicAttributes(Ye,rn,Jt,wn,ur)}}x.icon.dynamicLayoutVertexBuffer.updateData(Ye)}x.text.dynamicLayoutVertexBuffer.updateData(Ve)}function Qa(x,h,v){return v.iconsInText&&h?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function Zl(x,h,v,S,D,k,F,B,V,X,q,fe){const Ve=x.context,Ye=Ve.gl,it=x.transform,st="map"===B,ft="map"===V,ge=st&&"point"!==v.layout.get("symbol-placement"),Ke=st&&!ft&&!ge,wt=void 0!==v.layout.get("symbol-sort-key").constantOr(1);let St=!1;const Ht=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),qt=[g.mercatorXfromLng(it.center.lng),g.mercatorYfromLat(it.center.lat)],Gt=v.layout.get("text-variable-anchor"),rn="globe"===it.projection.name,Jt=[],wn=[0,-1,0];let ur=wn;!rn&&!it.mercatorFromTransition||st||(ur=function(mn){const Gn=mn._camera.getWorldToCamera(mn.worldSize,1),Dn=g.multiply([],Gn,mn.globeMatrix);g.invert(Dn,Dn);const ar=[0,0,0],bn=[0,1,0,0];return g.transformMat4$1(bn,bn,Dn),ar[0]=bn[0],ar[1]=bn[1],ar[2]=bn[2],g.normalize(ar,ar),ar}(it));for(const mn of S){const Gn=h.getTile(mn),Dn=Gn.getBucket(v);if(!Dn||"mercator"===Dn.projection.name&&rn)continue;const ar=D?Dn.text:Dn.icon;if(!ar||Dn.fullyClipped||!ar.segments.get().length)continue;const bn=ar.programConfigurations.get(v.id),Un=D||Dn.sdfIcons,cr=D?Dn.textSizeData:Dn.iconSizeData,Jn=ft||0!==it.pitch,hr=g.evaluateSizeForZoom(cr,it.zoom);let vi,Ui,Wr,ei,co=[0,0],uo=null;if(D)Ui=Gn.glyphAtlasTexture,Wr=Ye.LINEAR,vi=Gn.glyphAtlasTexture.size,Dn.iconsInText&&(co=Gn.imageAtlasTexture.size,uo=Gn.imageAtlasTexture,ei=Jn||x.options.rotating||x.options.zooming||"composite"===cr.kind||"camera"===cr.kind?Ye.LINEAR:Ye.NEAREST);else{const yd=1!==v.layout.get("icon-size").constantOr(0)||Dn.iconsNeedLinear;Ui=Gn.imageAtlasTexture,Wr=Un||x.options.rotating||x.options.zooming||yd||Jn?Ye.LINEAR:Ye.NEAREST,vi=Gn.imageAtlasTexture.size}const hi="globe"===Dn.projection.name,ms=hi?ur:wn,zs=hi?g.globeToMercatorTransition(it.zoom):0,Zs=sn(mn,Dn.getProjection(),it),Ms=it.calculatePixelsToTileUnitsMatrix(Gn),Ac=Mn(Zs,Gn.tileID.canonical,ft,st,it,Dn.getProjection(),Ms),_a=x.terrain&&ft&&ge?g.invert(g.create(),Ac):Gc,Ru=vs(Zs,Gn.tileID.canonical,ft,st,it,Dn.getProjection(),Ms),_h=Gt&&Dn.hasTextData(),ji="none"!==v.layout.get("icon-text-fit")&&_h&&Dn.hasIconData();if(ge){const yd=it.elevation,Xc=yd?yd.getAtTileOffsetFunc(mn,it.center.lat,it.worldSize,Dn.getProjection()):null,Gd=gl(Zs,Gn.tileID.canonical,ft,st,it,Dn.getProjection(),Ms);Ze(Dn,Zs,x,D,Gd,Ru,ft,X,Xc,mn)}const Ps=ge||D&&Gt||ji,Do=x.translatePosMatrix(Zs,Gn,k,F),gs=Ps?Gc:Ac,Wc=x.translatePosMatrix(Ru,Gn,k,F,!0),aa=Dn.getProjection().createInversionMatrix(it,mn.canonical),zl=[];x.terrainRenderModeElevated()&&ft&&zl.push("PITCH_WITH_MAP_TERRAIN"),hi&&zl.push("PROJECTION_GLOBE_VIEW"),Ps&&zl.push("PROJECTED_POS_ON_VIEWPORT");const Mc=Un&&0!==v.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1);let Tf;Tf=Un?Dn.iconsInText?Ef(cr.kind,hr,Ke,ft,x,Do,gs,Wc,vi,co,mn,zs,qt,aa,ms,Dn.getProjection()):Oa(cr.kind,hr,Ke,ft,x,Do,gs,Wc,D,vi,!0,mn,zs,qt,aa,ms,Dn.getProjection()):Po(cr.kind,hr,Ke,ft,x,Do,gs,Wc,D,vi,mn,zs,qt,aa,ms,Dn.getProjection());const um={program:x.useProgram(Qa(Un,D,Dn),bn,zl),buffers:ar,uniformValues:Tf,atlasTexture:Ui,atlasTextureIcon:uo,atlasInterpolation:Wr,atlasInterpolationIcon:ei,isSDF:Un,hasHalo:Mc,tile:Gn,labelPlaneMatrixInv:_a};if(wt&&Dn.canOverlap){St=!0;const yd=ar.segments.get();for(const Xc of yd)Jt.push({segments:new g.SegmentVector([Xc]),sortKey:Xc.sortKey,state:um})}else Jt.push({segments:ar.segments,sortKey:0,state:um})}St&&Jt.sort((mn,Gn)=>mn.sortKey-Gn.sortKey);for(const mn of Jt){const Gn=mn.state;if(x.terrain&&x.terrain.setupElevationDraw(Gn.tile,Gn.program,{useDepthForOcclusion:!rn,labelPlaneMatrixInv:Gn.labelPlaneMatrixInv}),Ve.activeTexture.set(Ye.TEXTURE0),Gn.atlasTexture.bind(Gn.atlasInterpolation,Ye.CLAMP_TO_EDGE),Gn.atlasTextureIcon&&(Ve.activeTexture.set(Ye.TEXTURE1),Gn.atlasTextureIcon&&Gn.atlasTextureIcon.bind(Gn.atlasInterpolationIcon,Ye.CLAMP_TO_EDGE)),Gn.isSDF){const Dn=Gn.uniformValues;Gn.hasHalo&&(Dn.u_is_halo=1,Hc(Gn.buffers,mn.segments,v,x,Gn.program,Ht,q,fe,Dn)),Dn.u_is_halo=0}Hc(Gn.buffers,mn.segments,v,x,Gn.program,Ht,q,fe,Gn.uniformValues)}}function Hc(x,h,v,S,D,k,F,B,V){const X=S.context,q=[x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer,x.globeExtVertexBuffer];D.draw(X,X.gl.TRIANGLES,k,F,B,g.CullFaceMode.disabled,V,v.id,x.layoutVertexBuffer,x.indexBuffer,h,v.paint,S.transform.zoom,x.programConfigurations.get(v.id),q)}function Cf(x,h,v,S,D,k,F){const B=x.context.gl,V=v.paint.get("fill-pattern"),X=V&&V.constantOr(1);let q,fe,Ve,Ye,it;F?(fe=X&&!v.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=B.LINES):(fe=X?"fillPattern":"fill",q=B.TRIANGLES);for(const st of S){const ft=h.getTile(st);if(X&&!ft.patternsLoaded())continue;const ge=ft.getBucket(v);if(!ge)continue;x.prepareDrawTile();const Ke=ge.programConfigurations.get(v.id),wt=x.useProgram(fe,Ke);X&&(x.context.activeTexture.set(B.TEXTURE0),ft.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ke.updatePaintBuffers());const St=V.constantOr(null);if(St&&ft.imageAtlas){const qt=ft.imageAtlas.patternPositions[St.toString()];qt&&Ke.setConstantPatternPositions(qt)}const Ht=x.translatePosMatrix(st.projMatrix,ft,v.paint.get("fill-translate"),v.paint.get("fill-translate-anchor"));if(F){Ye=ge.indexBuffer2,it=ge.segments2;const qt=x.terrain&&x.terrain.renderingToTexture?x.terrain.drapeBufferSize:[B.drawingBufferWidth,B.drawingBufferHeight];Ve="fillOutlinePattern"===fe&&X?L_(Ht,x,ft,qt):Ca(Ht,qt)}else Ye=ge.indexBuffer,it=ge.segments,Ve=X?Sl(Ht,x,ft):Nl(Ht);x.prepareDrawProgram(x.context,wt,st.toUnwrapped()),wt.draw(x.context,q,D,x.stencilModeForClipping(st),k,g.CullFaceMode.disabled,Ve,v.id,ge.layoutVertexBuffer,Ye,it,v.paint,x.transform.zoom,Ke)}}function Uu(x,h,v,S,D,k,F){const B=x.context,V=B.gl,X=x.transform,q=v.paint.get("fill-extrusion-pattern"),fe=q.constantOr(1),Ve=v.paint.get("fill-extrusion-opacity"),Ye=[v.paint.get("fill-extrusion-ambient-occlusion-intensity"),v.paint.get("fill-extrusion-ambient-occlusion-radius")],it=v.layout.get("fill-extrusion-edge-radius"),st=it>0&&!v.paint.get("fill-extrusion-rounded-roof"),ft=st?0:it,ge="globe"===X.projection.name?g.fillExtrusionHeightLift():0,Ke="globe"===X.projection.name,wt=Ke?g.globeToMercatorTransition(X.zoom):0,St=[g.mercatorXfromLng(X.center.lng),g.mercatorYfromLat(X.center.lat)],Ht=[];Ke&&Ht.push("PROJECTION_GLOBE_VIEW"),Ye[0]>0&&Ht.push("FAUX_AO"),st&&Ht.push("ZERO_ROOF_RADIUS");for(const qt of S){const Gt=h.getTile(qt),rn=Gt.getBucket(v);if(!rn||rn.projection.name!==X.projection.name)continue;const Jt=rn.programConfigurations.get(v.id),wn=x.useProgram(fe?"fillExtrusionPattern":"fillExtrusion",Jt,Ht);if(x.terrain){const Un=x.terrain;if(x.style.terrainSetForDrapingOnly())Un.setupElevationDraw(Gt,wn,{useMeterToDem:!0});else{if(!rn.enableTerrain)continue;if(Un.setupElevationDraw(Gt,wn,{useMeterToDem:!0}),Mu(B,h,qt,rn,v,Un),!rn.centroidVertexBuffer){const cr=wn.attributes.a_centroid_pos;void 0!==cr&&V.vertexAttrib2f(cr,0,0)}}}fe&&(x.context.activeTexture.set(V.TEXTURE0),Gt.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Jt.updatePaintBuffers());const ur=q.constantOr(null);if(ur&&Gt.imageAtlas){const Un=Gt.imageAtlas.patternPositions[ur.toString()];Un&&Jt.setConstantPatternPositions(Un)}const mn=x.translatePosMatrix(qt.projMatrix,Gt,v.paint.get("fill-extrusion-translate"),v.paint.get("fill-extrusion-translate-anchor")),Gn=X.projection.createInversionMatrix(X,qt.canonical),Dn=v.paint.get("fill-extrusion-vertical-gradient"),ar=fe?dd(mn,x,Dn,Ve,Ye,ft,qt,Gt,ge,wt,St,Gn):ql(mn,x,Dn,Ve,Ye,ft,qt,ge,wt,St,Gn);x.prepareDrawProgram(B,wn,qt.toUnwrapped());const bn=[];x.terrain&&bn.push(rn.centroidVertexBuffer),Ke&&bn.push(rn.layoutVertexExtBuffer),wn.draw(B,B.gl.TRIANGLES,D,k,F,g.CullFaceMode.backCCW,ar,v.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,v.paint,x.transform.zoom,Jt,bn)}}function Mu(x,h,v,S,D,k){const F=[ge=>{let Ke=ge.canonical.x-1,wt=ge.wrap;return Ke<0&&(Ke=(1<<ge.canonical.z)-1,wt--),new g.OverscaledTileID(ge.overscaledZ,wt,ge.canonical.z,Ke,ge.canonical.y)},ge=>{let Ke=ge.canonical.x+1,wt=ge.wrap;return Ke===1<<ge.canonical.z&&(Ke=0,wt++),new g.OverscaledTileID(ge.overscaledZ,wt,ge.canonical.z,Ke,ge.canonical.y)},ge=>new g.OverscaledTileID(ge.overscaledZ,ge.wrap,ge.canonical.z,ge.canonical.x,(0===ge.canonical.y?1<<ge.canonical.z:ge.canonical.y)-1),ge=>new g.OverscaledTileID(ge.overscaledZ,ge.wrap,ge.canonical.z,ge.canonical.x,ge.canonical.y===(1<<ge.canonical.z)-1?0:ge.canonical.y+1)],B=ge=>{const Ke=h.getSource().minzoom,wt=Ht=>{const qt=h.getTileByID(Ht);if(qt&&qt.hasData())return qt.getBucket(D)},St=[0,-1,1];for(const Ht of St){if(ge.overscaledZ+Ht<Ke)continue;const qt=wt(ge.calculateScaledKey(ge.overscaledZ+Ht));if(qt)return qt}},V=[0,0,0],X=(ge,Ke)=>(V[0]=Math.min(ge.min.y,Ke.min.y),V[1]=Math.max(ge.max.y,Ke.max.y),V[2]=g.EXTENT-Ke.min.x>ge.max.x?Ke.min.x-g.EXTENT:ge.max.x,V),q=(ge,Ke)=>(V[0]=Math.min(ge.min.x,Ke.min.x),V[1]=Math.max(ge.max.x,Ke.max.x),V[2]=g.EXTENT-Ke.min.y>ge.max.y?Ke.min.y-g.EXTENT:ge.max.y,V),fe=[(ge,Ke)=>X(ge,Ke),(ge,Ke)=>X(Ke,ge),(ge,Ke)=>q(ge,Ke),(ge,Ke)=>q(Ke,ge)],Ve=new g.Point(0,0);let Ye,it,st;const ft=(ge,Ke,wt,St,Ht)=>{const qt=[[St?wt:ge,St?ge:wt,0],[St?wt:Ke,St?Ke:wt,0]],Gt=Ht<0?g.EXTENT+Ht:Ht,rn=[St?Gt:(ge+Ke)/2,St?(ge+Ke)/2:Gt,0];return 0===wt&&Ht<0||0!==wt&&Ht>0?k.getForTilePoints(st,[rn],!0,it):qt.push(rn),k.getForTilePoints(v,qt,!0,Ye),Math.max(qt[0][2],qt[1][2],rn[2])/k.exaggeration()};for(let ge=0;ge<4;ge++){const Ke=(ge<2?1:5)-ge,wt=S.borders[ge];if(0===wt.length)continue;const St=st=F[ge](v),Ht=B(St);if(!(Ht&&Ht instanceof g.FillExtrusionBucket&&Ht.enableTerrain)||S.borderDoneWithNeighborZ[ge]===Ht.canonical.z&&Ht.borderDoneWithNeighborZ[Ke]===S.canonical.z||(it=k.findDEMTileFor(St),!it||!it.dem))continue;if(!Ye){const Jt=k.findDEMTileFor(v);if(!Jt||!Jt.dem)return;Ye=Jt}const qt=Ht.borders[Ke];let Gt=0;const rn=Ht.borderDoneWithNeighborZ[Ke]!==S.canonical.z;if(S.canonical.z===Ht.canonical.z){for(let Jt=0;Jt<wt.length;Jt++){const wn=S.featuresOnBorder[wt[Jt]],ur=wn.borders[ge];let mn;for(;Gt<qt.length&&(mn=Ht.featuresOnBorder[qt[Gt]],!(mn.borders[Ke][1]>ur[0]+3));)rn&&Ht.encodeCentroid(void 0,mn,!1),Gt++;if(mn&&Gt<qt.length){const Gn=Gt;let Dn=0;for(;!(mn.borders[Ke][0]>ur[1]-3)&&(Dn++,++Gt!==qt.length);)mn=Ht.featuresOnBorder[qt[Gt]];if(mn=Ht.featuresOnBorder[qt[Gn]],wn.intersectsCount()>1||mn.intersectsCount()>1||1!==Dn){1!==Dn&&(Gt=Gn),S.encodeCentroid(void 0,wn,!1),rn&&Ht.encodeCentroid(void 0,mn,!1);continue}const ar=fe[ge](wn,mn),bn=ge%2?g.EXTENT-1:0;Ve.x=ft(ar[0],Math.min(g.EXTENT-1,ar[1]),bn,ge<2,ar[2]),Ve.y=0,S.encodeCentroid(Ve,wn,!1),rn&&Ht.encodeCentroid(Ve,mn,!1)}else S.encodeCentroid(void 0,wn,!1)}S.borderDoneWithNeighborZ[ge]=Ht.canonical.z,S.needsCentroidUpdate=!0,rn&&(Ht.borderDoneWithNeighborZ[Ke]=S.canonical.z,Ht.needsCentroidUpdate=!0)}else{for(const Jt of wt)S.encodeCentroid(void 0,S.featuresOnBorder[Jt],!1);if(rn){for(const Jt of qt)Ht.encodeCentroid(void 0,Ht.featuresOnBorder[Jt],!1);Ht.borderDoneWithNeighborZ[Ke]=S.canonical.z,Ht.needsCentroidUpdate=!0}S.borderDoneWithNeighborZ[ge]=Ht.canonical.z,S.needsCentroidUpdate=!0}}(S.needsCentroidUpdate||!S.centroidVertexBuffer&&0!==S.centroidVertexArray.length)&&S.uploadCentroid(x)}const sc=new g.Color(1,0,0,1),ll=new g.Color(0,1,0,1),La=new g.Color(0,0,1,1),Il=new g.Color(1,0,1,1),cm=new g.Color(0,1,1,1);function fh(x,h,v){const S=x.context,D=x.transform,k=S.gl,F="globe"===D.projection.name,B=F?["PROJECTION_GLOBE_VIEW"]:null;let V=v.projMatrix;if(F&&g.globeToMercatorTransition(D.zoom)>0){const wn=g.transitionTileAABBinECEF(v.canonical,D),ur=g.globeDenormalizeECEF(wn);V=g.multiply(new Float32Array(16),D.globeMatrix,ur),g.multiply(V,D.projMatrix,V)}const X=x.useProgram("debug",null,B),q=h.getTileByID(v.key);x.terrain&&x.terrain.setupElevationDraw(q,X);const fe=g.DepthMode.disabled,Ve=g.StencilMode.disabled,Ye=x.colorModeForRenderPass();S.activeTexture.set(k.TEXTURE0),x.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),F?q._makeGlobeTileDebugBuffers(x.context,D):q._makeDebugTileBoundsBuffers(x.context,D.projection);const st=q._tileDebugBuffer||x.debugBuffer,ft=q._tileDebugIndexBuffer||x.debugIndexBuffer,ge=q._tileDebugSegments||x.debugSegments;X.draw(S,k.LINE_STRIP,fe,Ve,Ye,g.CullFaceMode.disabled,rr(V,g.Color.red),"$debug",st,ft,ge,null,null,null,[q._globeTileDebugBorderBuffer]);const Ke=q.latestRawTileData,wt=Math.floor((Ke&&Ke.byteLength||0)/1024),St=h.getTile(v).tileSize,Ht=512/Math.min(St,512)*(v.overscaledZ/D.zoom)*.5;let qt=v.canonical.toString();v.overscaledZ!==v.canonical.z&&(qt+=` => ${v.overscaledZ}`),qt+=` ${wt}kb`,function(wn,ur){wn.initDebugOverlayCanvas();const mn=wn.debugOverlayCanvas,Gn=wn.context.gl,Dn=wn.debugOverlayCanvas.getContext("2d");Dn.clearRect(0,0,mn.width,mn.height),Dn.shadowColor="white",Dn.shadowBlur=2,Dn.lineWidth=1.5,Dn.strokeStyle="white",Dn.textBaseline="top",Dn.font="bold 36px Open Sans, sans-serif",Dn.fillText(ur,5,5),Dn.strokeText(ur,5,5),wn.debugOverlayTexture.update(mn),wn.debugOverlayTexture.bind(Gn.LINEAR,Gn.CLAMP_TO_EDGE)}(x,qt);const Gt=q._tileDebugTextBuffer||x.debugBuffer,rn=q._tileDebugTextIndexBuffer||x.quadTriangleIndexBuffer,Jt=q._tileDebugTextSegments||x.debugSegments;X.draw(S,k.TRIANGLES,fe,Ve,g.ColorMode.alphaBlended,g.CullFaceMode.disabled,rr(V,g.Color.transparent,Ht),"$debug",Gt,rn,Jt,null,null,null,[q._globeTileDebugTextBuffer])}function zh(x,h,v,S){Ta(x,0,h+v/2,x.transform.width,v,S)}function Na(x,h,v,S){Ta(x,h-v/2,0,v,x.transform.height,S)}function Ta(x,h,v,S,D,k){const F=x.context,B=F.gl;B.enable(B.SCISSOR_TEST),B.scissor(h*g.exported.devicePixelRatio,v*g.exported.devicePixelRatio,S*g.exported.devicePixelRatio,D*g.exported.devicePixelRatio),F.clear({color:k}),B.disable(B.SCISSOR_TEST)}const Ic=g.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ac}=Ic;function Pu(x,h,v,S){x.emplaceBack(h,v,S)}class ju{constructor(h){this.vertexArray=new g.StructArrayLayout3f12,this.indices=new g.StructArrayLayout3ui6,Pu(this.vertexArray,-1,-1,1),Pu(this.vertexArray,1,-1,1),Pu(this.vertexArray,-1,1,1),Pu(this.vertexArray,1,1,1),Pu(this.vertexArray,-1,-1,-1),Pu(this.vertexArray,1,-1,-1),Pu(this.vertexArray,-1,1,-1),Pu(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=h.createVertexBuffer(this.vertexArray,ac),this.indexBuffer=h.createIndexBuffer(this.indices),this.segment=g.SegmentVector.simpleSegment(0,0,36,12)}}function Zn(x,h,v,S,D,k){const F=x.gl,B=h.paint.get("sky-atmosphere-color"),V=h.paint.get("sky-atmosphere-halo-color"),X=h.paint.get("sky-atmosphere-sun-intensity"),q={u_matrix_3f:g.fromMat4(g.create$1(),S),u_sun_direction:D,u_sun_intensity:X,u_color_tint_r:[(it=B).r,it.g,it.b,it.a],u_color_tint_m:[(st=V).r,st.g,st.b,st.a],u_luminance:5e-5};var it,st;F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+k,h.skyboxTexture,0),v.draw(x,F.TRIANGLES,g.DepthMode.disabled,g.StencilMode.disabled,g.ColorMode.unblended,g.CullFaceMode.frontCW,q,"skyboxCapture",h.skyboxGeometry.vertexBuffer,h.skyboxGeometry.indexBuffer,h.skyboxGeometry.segment)}const cl=g.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class cp{constructor(h){const v=new g.StructArrayLayout5f20;v.emplaceBack(-1,1,1,0,0),v.emplaceBack(1,1,1,1,0),v.emplaceBack(1,-1,1,1,1),v.emplaceBack(-1,-1,1,0,1);const S=new g.StructArrayLayout3ui6;S.emplaceBack(0,1,2),S.emplaceBack(2,3,0),this.vertexBuffer=h.createVertexBuffer(v,cl.members),this.indexBuffer=h.createIndexBuffer(S),this.segments=g.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ra={symbol:function(x,h,v,S,D){if("translucent"!==x.renderPass)return;const k=g.StencilMode.disabled,F=x.colorModeForRenderPass();v.layout.get("text-variable-anchor")&&function(B,V,X,q,fe,Ve,Ye){const it=V.transform,st="map"===fe,ft="map"===Ve;for(const ge of B){const Ke=q.getTile(ge),wt=Ke.getBucket(X);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const St=g.evaluateSizeForZoom(wt.textSizeData,it.zoom),Ht=sn(ge,wt.getProjection(),it),qt=it.calculatePixelsToTileUnitsMatrix(Ke),Gt=Mn(Ht,Ke.tileID.canonical,ft,st,it,wt.getProjection(),qt),rn="none"!==X.layout.get("icon-text-fit")&&wt.hasIconData();if(St){const Jt=Math.pow(2,it.zoom-Ke.tileID.overscaledZ);pd(wt,st,ft,Ye,g.symbolSize,it,Gt,ge,Jt,St,rn)}}}(S,x,v,h,v.layout.get("text-rotation-alignment"),v.layout.get("text-pitch-alignment"),D),0!==v.paint.get("icon-opacity").constantOr(1)&&Zl(x,h,v,S,!1,v.paint.get("icon-translate"),v.paint.get("icon-translate-anchor"),v.layout.get("icon-rotation-alignment"),v.layout.get("icon-pitch-alignment"),v.layout.get("icon-keep-upright"),k,F),0!==v.paint.get("text-opacity").constantOr(1)&&Zl(x,h,v,S,!0,v.paint.get("text-translate"),v.paint.get("text-translate-anchor"),v.layout.get("text-rotation-alignment"),v.layout.get("text-pitch-alignment"),v.layout.get("text-keep-upright"),k,F),h.map.showCollisionBoxes&&(hu(x,h,v,S,v.paint.get("text-translate"),v.paint.get("text-translate-anchor"),!0),hu(x,h,v,S,v.paint.get("icon-translate"),v.paint.get("icon-translate-anchor"),!1))},circle:function(x,h,v,S){if("translucent"!==x.renderPass)return;const D=v.paint.get("circle-opacity"),k=v.paint.get("circle-stroke-width"),F=v.paint.get("circle-stroke-opacity"),B=void 0!==v.layout.get("circle-sort-key").constantOr(1);if(0===D.constantOr(1)&&(0===k.constantOr(1)||0===F.constantOr(1)))return;const V=x.context,X=V.gl,q=x.transform,fe=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),Ve=g.StencilMode.disabled,Ye=x.colorModeForRenderPass(),it="globe"===q.projection.name,st=[g.mercatorXfromLng(q.center.lng),g.mercatorYfromLat(q.center.lat)],ft=[];for(let Ke=0;Ke<S.length;Ke++){const wt=S[Ke],St=h.getTile(wt),Ht=St.getBucket(v);if(!Ht||Ht.projection.name!==q.projection.name)continue;const qt=Ht.programConfigurations.get(v.id),Gt=pn(v);it&&Gt.push("PROJECTION_GLOBE_VIEW");const rn=x.useProgram("circle",qt,Gt),Jt=Ht.layoutVertexBuffer,wn=Ht.globeExtVertexBuffer,ur=Ht.indexBuffer,mn=q.projection.createInversionMatrix(q,wt.canonical),Gn={programConfiguration:qt,program:rn,layoutVertexBuffer:Jt,globeExtVertexBuffer:wn,indexBuffer:ur,uniformValues:Du(x,wt,St,mn,st,v),tile:St};if(B){const Dn=Ht.segments.get();for(const ar of Dn)ft.push({segments:new g.SegmentVector([ar]),sortKey:ar.sortKey,state:Gn})}else ft.push({segments:Ht.segments,sortKey:0,state:Gn})}B&&ft.sort((Ke,wt)=>Ke.sortKey-wt.sortKey);const ge={useDepthForOcclusion:!it};for(const Ke of ft){const{programConfiguration:wt,program:St,layoutVertexBuffer:Ht,globeExtVertexBuffer:qt,indexBuffer:Gt,uniformValues:rn,tile:Jt}=Ke.state,wn=Ke.segments;x.terrain&&x.terrain.setupElevationDraw(Jt,St,ge),x.prepareDrawProgram(V,St,Jt.tileID.toUnwrapped()),St.draw(V,X.TRIANGLES,fe,Ve,Ye,g.CullFaceMode.disabled,rn,v.id,Ht,Gt,wn,v.paint,q.zoom,wt,[qt])}},heatmap:function(x,h,v,S){if(0!==v.paint.get("heatmap-opacity"))if("offscreen"===x.renderPass){const D=x.context,k=D.gl,F=g.StencilMode.disabled,B=new g.ColorMode([k.ONE,k.ONE],g.Color.transparent,[!0,!0,!0,!0]);(function(Ye,it,st,ft){const ge=Ye.gl,Ke=it.width*ft,wt=it.height*ft;Ye.activeTexture.set(ge.TEXTURE1),Ye.viewport.set([0,0,Ke,wt]);let St=st.heatmapFbo;if(!St||St&&(St.width!==Ke||St.height!==wt)){St&&St.destroy();const Ht=ge.createTexture();ge.bindTexture(ge.TEXTURE_2D,Ht),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),St=st.heatmapFbo=Ye.createFramebuffer(Ke,wt,!1),function(qt,Gt,rn,Jt,wn,ur){const mn=qt.gl;mn.texImage2D(mn.TEXTURE_2D,0,qt.isWebGL2&&qt.extRenderToTextureHalfFloat?mn.RGBA16F:mn.RGBA,wn,ur,0,mn.RGBA,qt.extRenderToTextureHalfFloat?qt.isWebGL2?mn.HALF_FLOAT:qt.extTextureHalfFloat.HALF_FLOAT_OES:mn.UNSIGNED_BYTE,null),Jt.colorAttachment.set(rn)}(Ye,0,Ht,St,Ke,wt)}else ge.bindTexture(ge.TEXTURE_2D,St.colorAttachment.get()),Ye.bindFramebuffer.set(St.framebuffer)})(D,x,v,"globe"===x.transform.projection.name?.5:.25),D.clear({color:g.Color.transparent});const V=x.transform,X="globe"===V.projection.name,q=X?["PROJECTION_GLOBE_VIEW"]:null,fe=X?g.CullFaceMode.frontCCW:g.CullFaceMode.disabled,Ve=[g.mercatorXfromLng(V.center.lng),g.mercatorYfromLat(V.center.lat)];for(let Ye=0;Ye<S.length;Ye++){const it=S[Ye];if(h.hasRenderableParent(it))continue;const st=h.getTile(it),ft=st.getBucket(v);if(!ft||ft.projection.name!==V.projection.name)continue;const ge=ft.programConfigurations.get(v.id),Ke=x.useProgram("heatmap",ge,q),{zoom:wt}=x.transform;x.terrain&&x.terrain.setupElevationDraw(st,Ke),x.prepareDrawProgram(D,Ke,it.toUnwrapped());const St=V.projection.createInversionMatrix(V,it.canonical);Ke.draw(D,k.TRIANGLES,g.DepthMode.disabled,F,B,fe,Cc(x,it,st,St,Ve,wt,v.paint.get("heatmap-intensity")),v.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,v.paint,x.transform.zoom,ge,X?[ft.globeExtVertexBuffer]:null)}D.viewport.set([0,0,x.width,x.height])}else"translucent"===x.renderPass&&(x.context.setColorMode(x.colorModeForRenderPass()),function(D,k){const F=D.context,B=F.gl,V=k.heatmapFbo;if(!V)return;F.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,V.colorAttachment.get()),F.activeTexture.set(B.TEXTURE1);let X=k.colorRampTexture;X||(X=k.colorRampTexture=new g.Texture(F,k.colorRamp,B.RGBA)),X.bind(B.LINEAR,B.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(F,B.TRIANGLES,g.DepthMode.disabled,g.StencilMode.disabled,D.colorModeForRenderPass(),g.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:k.paint.get("heatmap-opacity")},k.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,k.paint,D.transform.zoom)}(x,v))},line:function(x,h,v,S){if("translucent"!==x.renderPass)return;const D=v.paint.get("line-opacity"),k=v.paint.get("line-width");if(0===D.constantOr(1)||0===k.constantOr(1))return;const F=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),B=x.colorModeForRenderPass(),V=x.terrain&&x.terrain.renderingToTexture?1:g.exported.devicePixelRatio,X=v.paint.get("line-dasharray"),q=X.constantOr(1),fe=v.layout.get("line-cap"),Ve=v.paint.get("line-pattern"),Ye=Ve.constantOr(1),it=v.paint.get("line-gradient"),st=Ye?"linePattern":"line",ft=x.context,ge=ft.gl,Ke=(St=>{const Ht=[];Xl(St)&&Ht.push("RENDER_LINE_DASH"),St.paint.get("line-gradient")&&Ht.push("RENDER_LINE_GRADIENT");const qt=St.paint.get("line-trim-offset");0===qt[0]&&0===qt[1]||Ht.push("RENDER_LINE_TRIM_OFFSET");const Gt=St.paint.get("line-pattern").constantOr(1),rn=1!==St.paint.get("line-opacity").constantOr(1);return!Gt&&rn&&Ht.push("RENDER_LINE_ALPHA_DISCARD"),Ht})(v);let wt=Ke.includes("RENDER_LINE_ALPHA_DISCARD");x.terrain&&x.terrain.clipOrMaskOverlapStencilType()&&(wt=!1);for(const St of S){const Ht=h.getTile(St);if(Ye&&!Ht.patternsLoaded())continue;const qt=Ht.getBucket(v);if(!qt)continue;x.prepareDrawTile();const Gt=qt.programConfigurations.get(v.id),rn=x.useProgram(st,Gt,Ke),Jt=Ve.constantOr(null);if(Jt&&Ht.imageAtlas){const Un=Ht.imageAtlas.patternPositions[Jt.toString()];Un&&Gt.setConstantPatternPositions(Un)}const wn=X.constantOr(null),ur=fe.constantOr(null);if(!Ye&&wn&&ur&&Ht.lineAtlas){const Un=Ht.lineAtlas.getDash(wn,ur);Un&&Gt.setConstantPatternPositions(Un)}let[mn,Gn]=v.paint.get("line-trim-offset");("round"===ur||"square"===ur)&&mn!==Gn&&(0===mn&&(mn-=1),1===Gn&&(Gn+=1));const Dn=x.terrain?St.projMatrix:null,ar=Ye?Sc(x,Ht,v,Dn,V):cu(x,Ht,v,Dn,qt.lineClipsArray.length,V,[mn,Gn]);if(it){const Un=qt.gradients[v.id];let cr=Un.texture;if(v.gradientVersion!==Un.version){let Jn=256;if(v.stepInterpolant){const hr=h.getSource().maxzoom,vi=St.canonical.z===hr?Math.ceil(1<<x.transform.maxZoom-St.canonical.z):1;Jn=g.clamp(g.nextPowerOfTwo(qt.maxLineLength/g.EXTENT*1024*vi),256,ft.maxTextureSize)}Un.gradient=g.renderColorRamp({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:Jn,image:Un.gradient||void 0,clips:qt.lineClipsArray}),Un.texture?Un.texture.update(Un.gradient):Un.texture=new g.Texture(ft,Un.gradient,ge.RGBA),Un.version=v.gradientVersion,cr=Un.texture}ft.activeTexture.set(ge.TEXTURE1),cr.bind(v.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}q&&(ft.activeTexture.set(ge.TEXTURE0),Ht.lineAtlasTexture.bind(ge.LINEAR,ge.REPEAT),Gt.updatePaintBuffers()),Ye&&(ft.activeTexture.set(ge.TEXTURE0),Ht.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Gt.updatePaintBuffers()),x.prepareDrawProgram(ft,rn,St.toUnwrapped());const bn=Un=>{rn.draw(ft,ge.TRIANGLES,F,Un,B,g.CullFaceMode.disabled,ar,v.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,v.paint,x.transform.zoom,Gt,[qt.layoutVertexBuffer2])};if(wt){const Un=x.stencilModeForClipping(St).ref;0===Un&&x.terrain&&ft.clear({stencil:0});const cr={func:ge.EQUAL,mask:255};ar.u_alpha_discard_threshold=.8,bn(new g.StencilMode(cr,Un,255,ge.KEEP,ge.KEEP,ge.INVERT)),ar.u_alpha_discard_threshold=0,bn(new g.StencilMode(cr,Un,255,ge.KEEP,ge.KEEP,ge.KEEP))}else bn(x.stencilModeForClipping(St))}wt&&(x.resetStencilClippingMasks(),x.terrain&&ft.clear({stencil:0}))},fill:function(x,h,v,S){const D=v.paint.get("fill-color"),k=v.paint.get("fill-opacity");if(0===k.constantOr(1))return;const F=x.colorModeForRenderPass(),B=v.paint.get("fill-pattern"),V=x.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===D.constantOr(g.Color.transparent).a&&1===k.constantOr(0)?"opaque":"translucent";if(x.renderPass===V){const X=x.depthModeForSublayer(1,"opaque"===x.renderPass?g.DepthMode.ReadWrite:g.DepthMode.ReadOnly);Cf(x,h,v,S,X,F,!1)}if("translucent"===x.renderPass&&v.paint.get("fill-antialias")){const X=x.depthModeForSublayer(v.getPaintProperty("fill-outline-color")?2:0,g.DepthMode.ReadOnly);Cf(x,h,v,S,X,F,!0)}},"fill-extrusion":function(x,h,v,S){const D=v.paint.get("fill-extrusion-opacity");if(0!==D&&"translucent"===x.renderPass){const k=new g.DepthMode(x.context.gl.LEQUAL,g.DepthMode.ReadWrite,x.depthRangeFor3D);if(1!==D||v.paint.get("fill-extrusion-pattern").constantOr(1))Uu(x,h,v,S,k,g.StencilMode.disabled,g.ColorMode.disabled),Uu(x,h,v,S,k,x.stencilModeFor3D(),x.colorModeForRenderPass()),x.resetStencilClippingMasks();else{const F=x.colorModeForRenderPass();Uu(x,h,v,S,k,g.StencilMode.disabled,F)}}},hillshade:function(x,h,v,S){if("offscreen"!==x.renderPass&&"translucent"!==x.renderPass)return;const D=x.context,k=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),F=x.colorModeForRenderPass(),B=x.terrain&&x.terrain.renderingToTexture,[V,X]="translucent"!==x.renderPass||B?[{},S]:x.stencilConfigForOverlap(S);for(const q of X){const fe=h.getTile(q);if(fe.needsHillshadePrepare&&"offscreen"===x.renderPass)wf(x,fe,v,k,g.StencilMode.disabled,F);else if("translucent"===x.renderPass){const Ve=B&&x.terrain?x.terrain.stencilModeForRTTOverlap(q):V[q.overscaledZ];na(x,q,fe,v,k,Ve,F)}}D.viewport.set([0,0,x.width,x.height]),x.resetStencilClippingMasks()},raster:function(x,h,v,S,D,k){if("translucent"!==x.renderPass||0===v.paint.get("raster-opacity")||!S.length)return;const F=x.context,B=F.gl,V=h.getSource(),X=x.useProgram("raster"),q=x.colorModeForRenderPass(),fe=x.terrain&&x.terrain.renderingToTexture,[Ve,Ye]=V instanceof Si||fe?[{},S]:x.stencilConfigForOverlap(S),it=Ye[Ye.length-1].overscaledZ,st=!x.options.moving;for(const ft of Ye){const ge=fe?g.DepthMode.disabled:x.depthModeForSublayer(ft.overscaledZ-it,1===v.paint.get("raster-opacity")?g.DepthMode.ReadWrite:g.DepthMode.ReadOnly,B.LESS),Ke=ft.toUnwrapped(),wt=h.getTile(ft);if(fe&&(!wt||!wt.hasData()))continue;const St=fe?ft.projMatrix:x.transform.calculateProjMatrix(Ke,st),Ht=x.terrain&&fe?x.terrain.stencilModeForRTTOverlap(ft):Ve[ft.overscaledZ],qt=k?0:v.paint.get("raster-fade-duration");wt.registerFadeDuration(qt);const Gt=h.findLoadedParent(ft,0),rn=Fh(wt,Gt,h,x.transform,qt);let Jt,wn;x.terrain&&x.terrain.prepareDrawTile();const ur="nearest"===v.paint.get("raster-resampling")?B.NEAREST:B.LINEAR;F.activeTexture.set(B.TEXTURE0),wt.texture.bind(ur,B.CLAMP_TO_EDGE),F.activeTexture.set(B.TEXTURE1),Gt?(Gt.texture.bind(ur,B.CLAMP_TO_EDGE),Jt=Math.pow(2,Gt.tileID.overscaledZ-wt.tileID.overscaledZ),wn=[wt.tileID.canonical.x*Jt%1,wt.tileID.canonical.y*Jt%1]):wt.texture.bind(ur,B.CLAMP_TO_EDGE),wt.texture.useMipmap&&F.extTextureFilterAnisotropic&&x.transform.pitch>20&&B.texParameterf(B.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const mn=Ra(St,wn||[0,0],Jt||1,rn,v,V instanceof Si?V.perspectiveTransform:[0,0]);if(x.prepareDrawProgram(F,X,Ke),V instanceof Si)V.boundsBuffer&&V.boundsSegments&&X.draw(F,B.TRIANGLES,ge,g.StencilMode.disabled,q,g.CullFaceMode.disabled,mn,v.id,V.boundsBuffer,x.quadTriangleIndexBuffer,V.boundsSegments);else{const{tileBoundsBuffer:Gn,tileBoundsIndexBuffer:Dn,tileBoundsSegments:ar}=x.getTileBoundsBuffers(wt);X.draw(F,B.TRIANGLES,ge,Ht,q,g.CullFaceMode.disabled,mn,v.id,Gn,Dn,ar)}}x.resetStencilClippingMasks()},background:function(x,h,v,S){const D=v.paint.get("background-color"),k=v.paint.get("background-opacity");if(0===k)return;const F=x.context,B=F.gl,V=x.transform,X=V.tileSize,q=v.paint.get("background-pattern");if(x.isPatternMissing(q))return;const fe=!q&&1===D.a&&1===k&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==fe)return;const Ve=g.StencilMode.disabled,Ye=x.depthModeForSublayer(0,"opaque"===fe?g.DepthMode.ReadWrite:g.DepthMode.ReadOnly),it=x.colorModeForRenderPass(),st=x.useProgram(q?"backgroundPattern":"background");let ft,ge=S;ge||(ft=x.getBackgroundTiles(),ge=Object.values(ft).map(Ke=>Ke.tileID)),q&&(F.activeTexture.set(B.TEXTURE0),x.imageManager.bind(x.context));for(const Ke of ge){const wt=Ke.toUnwrapped(),St=S?Ke.projMatrix:x.transform.calculateProjMatrix(wt);x.prepareDrawTile();const Ht=h?h.getTile(Ke):ft?ft[Ke.key]:new g.Tile(Ke,X,V.zoom,x),qt=q?fd(St,k,x,q,{tileID:Ke,tileSize:X}):Vu(St,k,D);x.prepareDrawProgram(F,st,wt);const{tileBoundsBuffer:Gt,tileBoundsIndexBuffer:rn,tileBoundsSegments:Jt}=x.getTileBoundsBuffers(Ht);st.draw(F,B.TRIANGLES,Ye,Ve,it,g.CullFaceMode.disabled,qt,v.id,Gt,rn,Jt)}},sky:function(x,h,v){const S=x.transform,D="mercator"===S.projection.name||"globe"===S.projection.name?1:g.smoothstep(7,8,S.zoom),k=v.paint.get("sky-opacity")*D;if(0===k)return;const F=x.context,B=v.paint.get("sky-type"),V=new g.DepthMode(F.gl.LEQUAL,g.DepthMode.ReadOnly,[0,1]),X=x.frameCounter/1e3%1;"atmosphere"===B?"offscreen"===x.renderPass?v.needsSkyboxCapture(x)&&(function(q,fe,Ve,Ye){const it=q.context,st=it.gl;let ft=fe.skyboxFbo;if(!ft){ft=fe.skyboxFbo=it.createFramebuffer(32,32,!1),fe.skyboxGeometry=new ju(it),fe.skyboxTexture=it.gl.createTexture(),st.bindTexture(st.TEXTURE_CUBE_MAP,fe.skyboxTexture),st.texParameteri(st.TEXTURE_CUBE_MAP,st.TEXTURE_WRAP_S,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_CUBE_MAP,st.TEXTURE_WRAP_T,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_CUBE_MAP,st.TEXTURE_MIN_FILTER,st.LINEAR),st.texParameteri(st.TEXTURE_CUBE_MAP,st.TEXTURE_MAG_FILTER,st.LINEAR);for(let St=0;St<6;++St)st.texImage2D(st.TEXTURE_CUBE_MAP_POSITIVE_X+St,0,st.RGBA,32,32,0,st.RGBA,st.UNSIGNED_BYTE,null)}it.bindFramebuffer.set(ft.framebuffer),it.viewport.set([0,0,32,32]);const ge=fe.getCenter(q,!0),Ke=q.useProgram("skyboxCapture"),wt=new Float64Array(16);g.identity(wt),g.rotateY(wt,wt,.5*-Math.PI),Zn(it,fe,Ke,wt,ge,0),g.identity(wt),g.rotateY(wt,wt,.5*Math.PI),Zn(it,fe,Ke,wt,ge,1),g.identity(wt),g.rotateX(wt,wt,.5*-Math.PI),Zn(it,fe,Ke,wt,ge,2),g.identity(wt),g.rotateX(wt,wt,.5*Math.PI),Zn(it,fe,Ke,wt,ge,3),g.identity(wt),Zn(it,fe,Ke,wt,ge,4),g.identity(wt),g.rotateY(wt,wt,Math.PI),Zn(it,fe,Ke,wt,ge,5),it.viewport.set([0,0,q.width,q.height])}(x,v),v.markSkyboxValid(x)):"sky"===x.renderPass&&function(q,fe,Ve,Ye,it){const st=q.context,ft=st.gl,ge=q.transform,Ke=q.useProgram("skybox");st.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_CUBE_MAP,fe.skyboxTexture);const wt={u_matrix:ge.skyboxMatrix,u_sun_direction:fe.getCenter(q,!1),u_cubemap:0,u_opacity:Ye,u_temporal_offset:it};q.prepareDrawProgram(st,Ke),Ke.draw(st,ft.TRIANGLES,Ve,g.StencilMode.disabled,q.colorModeForRenderPass(),g.CullFaceMode.backCW,wt,"skybox",fe.skyboxGeometry.vertexBuffer,fe.skyboxGeometry.indexBuffer,fe.skyboxGeometry.segment)}(x,v,V,k,X):"gradient"===B&&"sky"===x.renderPass&&function(q,fe,Ve,Ye,it){const st=q.context,ft=st.gl,ge=q.transform,Ke=q.useProgram("skyboxGradient");fe.skyboxGeometry||(fe.skyboxGeometry=new ju(st)),st.activeTexture.set(ft.TEXTURE0);let wt=fe.colorRampTexture;wt||(wt=fe.colorRampTexture=new g.Texture(st,fe.colorRamp,ft.RGBA)),wt.bind(ft.LINEAR,ft.CLAMP_TO_EDGE);const St=(Ht=ge.skyboxMatrix,qt=fe.getCenter(q,!1),Gt=fe.paint.get("sky-gradient-radius"),rn=Ye,Jt=it,{u_matrix:Ht,u_color_ramp:0,u_center_direction:qt,u_radius:g.degToRad(Gt),u_opacity:rn,u_temporal_offset:Jt});var Ht,qt,Gt,rn,Jt;q.prepareDrawProgram(st,Ke),Ke.draw(st,ft.TRIANGLES,Ve,g.StencilMode.disabled,q.colorModeForRenderPass(),g.CullFaceMode.backCW,St,"skyboxGradient",fe.skyboxGeometry.vertexBuffer,fe.skyboxGeometry.indexBuffer,fe.skyboxGeometry.segment)}(x,v,V,k,X)},debug:function(x,h,v){for(let S=0;S<v.length;S++)fh(x,h,v[S])},custom:function(x,h,v,S){const D=x.context,k=v.implementation;if(!x.transform.projection.unsupportedLayers||!x.transform.projection.unsupportedLayers.includes("custom")||x.terrain&&(x.terrain.renderingToTexture||"offscreen"===x.renderPass)&&v.isLayerDraped()){if("offscreen"===x.renderPass){const F=k.prerender;if(F){if(x.setCustomLayerDefaults(),D.setColorMode(x.colorModeForRenderPass()),"globe"===x.transform.projection.name){const B=x.transform.pointMerc;F.call(k,D.gl,x.transform.customLayerMatrix(),x.transform.getProjection(),x.transform.globeToMercatorMatrix(),g.globeToMercatorTransition(x.transform.zoom),[B.x,B.y],x.transform.pixelsPerMeterRatio)}else F.call(k,D.gl,x.transform.customLayerMatrix());D.setDirty(),x.setBaseState()}}else if("translucent"===x.renderPass){if(x.terrain&&x.terrain.renderingToTexture){const B=k.renderToTile;if(B){const V=S[0].canonical,X=new g.MercatorCoordinate(V.x+S[0].wrap*(1<<V.z),V.y,V.z);D.setDepthMode(g.DepthMode.disabled),D.setStencilMode(g.StencilMode.disabled),D.setColorMode(x.colorModeForRenderPass()),x.setCustomLayerDefaults(),B.call(k,D.gl,X),D.setDirty(),x.setBaseState()}return}x.setCustomLayerDefaults(),D.setColorMode(x.colorModeForRenderPass()),D.setStencilMode(g.StencilMode.disabled);const F="3d"===k.renderingMode?new g.DepthMode(x.context.gl.LEQUAL,g.DepthMode.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,g.DepthMode.ReadOnly);if(D.setDepthMode(F),"globe"===x.transform.projection.name){const B=x.transform.pointMerc;k.render(D.gl,x.transform.customLayerMatrix(),x.transform.getProjection(),x.transform.globeToMercatorMatrix(),g.globeToMercatorTransition(x.transform.zoom),[B.x,B.y],x.transform.pixelsPerMeterRatio)}else k.render(D.gl,x.transform.customLayerMatrix());D.setDirty(),x.setBaseState(),D.bindFramebuffer.set(null)}}else g.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class wo{constructor(h,v,S=!1){this.context=new qn(h,S),this.transform=v,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=g.SourceCache.maxUnderzooming+g.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(h,v){const S=!!h&&!!h.terrain&&this.transform.projection.supportsTerrain;if(!(S||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Bh(this,h));const D=this._terrain;this.transform.elevation=S?D:null,D.update(h,this.transform,v)}_updateFog(h){const v=h.fog;if(!v||"globe"===this.transform.projection.name||v.getOpacity(this.transform.pitch)<1||v.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[S,D]=v.getFovAdjustedRange(this.transform._fov);if(S>D)return void(this.transform.fogCullDistSq=null);const k=S+.78*(D-S);this.transform.fogCullDistSq=k*k}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(h,v){if(this.width=h*g.exported.devicePixelRatio,this.height=v*g.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style.order)this.style._layers[S].resize()}setup(){const h=this.context,v=new g.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(g.EXTENT,0),v.emplaceBack(0,g.EXTENT),v.emplaceBack(g.EXTENT,g.EXTENT),this.tileExtentBuffer=h.createVertexBuffer(v,g.posAttributes.members),this.tileExtentSegments=g.SegmentVector.simpleSegment(0,0,4,2);const S=new g.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(g.EXTENT,0),S.emplaceBack(0,g.EXTENT),S.emplaceBack(g.EXTENT,g.EXTENT),this.debugBuffer=h.createVertexBuffer(S,g.posAttributes.members),this.debugSegments=g.SegmentVector.simpleSegment(0,0,4,5);const D=new g.StructArrayLayout2i4;D.emplaceBack(-1,-1),D.emplaceBack(1,-1),D.emplaceBack(-1,1),D.emplaceBack(1,1),this.viewportBuffer=h.createVertexBuffer(D,g.posAttributes.members),this.viewportSegments=g.SegmentVector.simpleSegment(0,0,4,2);const k=new g.StructArrayLayout4i8;k.emplaceBack(0,0,0,0),k.emplaceBack(g.EXTENT,0,g.EXTENT,0),k.emplaceBack(0,g.EXTENT,0,g.EXTENT),k.emplaceBack(g.EXTENT,g.EXTENT,g.EXTENT,g.EXTENT),this.mercatorBoundsBuffer=h.createVertexBuffer(k,g.boundsAttributes.members),this.mercatorBoundsSegments=g.SegmentVector.simpleSegment(0,0,4,2);const F=new g.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=h.createIndexBuffer(F);const B=new g.StructArrayLayout1ui2;for(const X of[0,1,3,2,0])B.emplaceBack(X);this.debugIndexBuffer=h.createIndexBuffer(B),this.emptyTexture=new g.Texture(h,new g.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),h.gl.RGBA),this.identityMat=g.create();const V=this.context.gl;this.stencilClearMode=new g.StencilMode({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO),this.loadTimeStamps.push(g.window.performance.now()),this.atmosphereBuffer=new cp(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(h){return h._makeTileBoundsBuffers(this.context,this.transform.projection),h._tileBoundsBuffer?{tileBoundsBuffer:h._tileBoundsBuffer,tileBoundsIndexBuffer:h._tileBoundsIndexBuffer,tileBoundsSegments:h._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const h=this.context,v=h.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(h,v.TRIANGLES,g.DepthMode.disabled,this.stencilClearMode,g.ColorMode.disabled,g.CullFaceMode.disabled,qi(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(h,v,S){if(!v||this.currentStencilSource===v.id||!h.isTileClipped()||!S||0===S.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let B=!1;for(const V of S)if(void 0===this._tileClippingMaskIDs[V.key]){B=!0;break}if(!B)return}this.currentStencilSource=v.id;const D=this.context,k=D.gl;this.nextStencilID+S.length>256&&this.clearStencil(),D.setColorMode(g.ColorMode.disabled),D.setDepthMode(g.DepthMode.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const B of S){const V=v.getTile(B),X=this._tileClippingMaskIDs[B.key]=this.nextStencilID++,{tileBoundsBuffer:q,tileBoundsIndexBuffer:fe,tileBoundsSegments:Ve}=this.getTileBoundsBuffers(V);F.draw(D,k.TRIANGLES,g.DepthMode.disabled,new g.StencilMode({func:k.ALWAYS,mask:0},X,255,k.KEEP,k.KEEP,k.REPLACE),g.ColorMode.disabled,g.CullFaceMode.disabled,qi(B.projMatrix),"$clipping",q,fe,Ve)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const h=this.nextStencilID++,v=this.context.gl;return new g.StencilMode({func:v.NOTEQUAL,mask:255},h,255,v.KEEP,v.KEEP,v.REPLACE)}stencilModeForClipping(h){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(h);const v=this.context.gl;return new g.StencilMode({func:v.EQUAL,mask:255},this._tileClippingMaskIDs[h.key],0,v.KEEP,v.KEEP,v.REPLACE)}stencilConfigForOverlap(h){const v=this.context.gl,S=h.sort((F,B)=>B.overscaledZ-F.overscaledZ),D=S[S.length-1].overscaledZ,k=S[0].overscaledZ-D+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const F={};for(let B=0;B<k;B++)F[B+D]=new g.StencilMode({func:v.GEQUAL,mask:255},B+this.nextStencilID,255,v.KEEP,v.KEEP,v.REPLACE);return this.nextStencilID+=k,[F,S]}return[{[D]:g.StencilMode.disabled},S]}colorModeForRenderPass(){const h=this.context.gl;return this._showOverdrawInspector?new g.ColorMode([h.CONSTANT_COLOR,h.ONE],new g.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?g.ColorMode.unblended:g.ColorMode.alphaBlended}depthModeForSublayer(h,v,S){if(!this.opaquePassEnabledForLayer())return g.DepthMode.disabled;const D=1-((1+this.currentLayer)*this.numSublayers+h)*this.depthEpsilon;return new g.DepthMode(S||this.context.gl.LEQUAL,v,[D,D])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(h,v){this.style=h,this.options=v,this.imageManager=h.imageManager,this.glyphManager=h.glyphManager,this.symbolFadeChange=h.placement.symbolFadeChange(g.exported.now()),this.imageManager.beginFrame();const S=this.style.order,D=this.style._sourceCaches;for(const X in D){const q=D[X];q.used&&q.prepare(this.context)}const k={},F={},B={};for(const X in D){const q=D[X];k[X]=q.getVisibleCoordinates(),F[X]=k[X].slice().reverse(),B[X]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let X=0;X<S.length;X++)if(this.style._layers[S[X]].is3D()){this.opaquePassCutoff=X;break}if(this.terrain&&(this.terrain.updateTileBinding(B),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new g.GlobeSharedBuffers(this.context)),!g.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const X of S){const q=this.style._layers[X],fe=h._getLayerSourceCache(q);if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const Ve=fe?F[fe.id]:void 0;("custom"===q.type||q.isSky()||Ve&&Ve.length)&&this.renderLayer(this,fe,q,Ve)}this.depthRangeFor3D=[0,1-(h.order.length+2)*this.numSublayers*this.depthEpsilon];const V=this.terrain;if(V&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&V.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:v.showOverdrawInspector?g.Color.black:g.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=v.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const X=this.style._layers[S[this.currentLayer]],q=h._getLayerSourceCache(X);if(X.isSky())continue;const fe=q?F[q.id]:void 0;this._renderTileClippingMasks(X,q,fe),this.renderLayer(this,q,X,fe)}if(this.style.fog&&this.transform.projection.supportsFog&&function(X,q){const fe=X.context,Ve=fe.gl,Ye=X.transform,it=new g.DepthMode(Ve.LEQUAL,g.DepthMode.ReadOnly,[0,1]),st=X.useProgram("globeAtmosphere",null,"globe"===Ye.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ft=g.globeToMercatorTransition(Ye.zoom),ge=q.properties.get("color").toArray01(),Ke=q.properties.get("high-color").toArray01(),wt=q.properties.get("space-color").toArray01PremultipliedAlpha(),St=g.identity$1([]);g.rotateY$1(St,St,-g.degToRad(Ye._center.lng)),g.rotateX$1(St,St,g.degToRad(Ye._center.lat)),g.rotateZ$1(St,St,Ye.angle),g.rotateX$1(St,St,-Ye._pitch);const Ht=g.fromQuat(new Float32Array(16),St),qt=g.mapValue(q.properties.get("star-intensity"),0,1,0,.25),rn=g.mapValue(q.properties.get("horizon-blend"),0,1,5e-4,.25),Jt=g.globeUseCustomAntiAliasing(X,fe,Ye)&&5e-4===rn?Ye.worldSize/(2*Math.PI*1.025)-1:Ye.globeRadius,wn=X.frameCounter/1e3%1,ur=g.length(Ye.globeCenterInViewSpace),mn=Math.sqrt(Math.pow(ur,2)-Math.pow(Jt,2)),Gn=Math.acos(mn/ur),Dn={u_frustum_tl:Ye.frustumCorners.TL,u_frustum_tr:Ye.frustumCorners.TR,u_frustum_br:Ye.frustumCorners.BR,u_frustum_bl:Ye.frustumCorners.BL,u_horizon:Ye.frustumCorners.horizon,u_transition:ft,u_fadeout_range:rn,u_color:ge,u_high_color:Ke,u_space_color:wt,u_star_intensity:qt,u_star_size:5*g.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:wn,u_horizon_angle:Gn,u_rotation_matrix:Ht};X.prepareDrawProgram(fe,st);const ar=X.atmosphereBuffer;ar&&st.draw(fe,Ve.TRIANGLES,it,g.StencilMode.disabled,g.ColorMode.alphaBlended,g.CullFaceMode.backCW,Dn,"skybox",ar.vertexBuffer,ar.indexBuffer,ar.segments)}(this,this.style.fog),this.renderPass="sky",(g.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const X=this.style._layers[S[this.currentLayer]],q=h._getLayerSourceCache(X);X.isSky()&&this.renderLayer(this,q,X,q?F[q.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<S.length;){const X=this.style._layers[S[this.currentLayer]],q=h._getLayerSourceCache(X);if(X.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(X)){if(X.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const fe=q?("symbol"===X.type?B:F)[q.id]:void 0;this._renderTileClippingMasks(X,q,q?k[q.id]:void 0),this.renderLayer(this,q,X,fe),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let X=null;g.values(this.style._layers).forEach(q=>{const fe=h._getLayerSourceCache(q);fe&&!q.isHidden(this.transform.zoom)&&(!X||X.getSource().maxzoom<fe.getSource().maxzoom)&&(X=fe)}),X&&this.options.showTileBoundaries&&ra.debug(this,X,X.getVisibleCoordinates())}this.options.showPadding&&function(X){const q=X.transform.padding;zh(X,X.transform.height-(q.top||0),3,sc),zh(X,q.bottom||0,3,ll),Na(X,q.left||0,3,La),Na(X,X.transform.width-(q.right||0),3,Il);const fe=X.transform.centerPoint;var Ve,Ye,it,st;Ta(Ve=X,(Ye=fe.x)-1,(it=X.transform.height-fe.y)-10,2,20,st=cm),Ta(Ve,Ye-10,it-1,20,2,st)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(g.window.performance.now()),this.saveCanvasCopy())}renderLayer(h,v,S,D){S.isHidden(this.transform.zoom)||("background"===S.type||"sky"===S.type||"custom"===S.type||D&&D.length)&&(this.id=S.id,this.gpuTimingStart(S),(!h.transform.projection.unsupportedLayers||!h.transform.projection.unsupportedLayers.includes(S.type)||h.terrain&&"custom"===S.type)&&ra[S.type](h,v,S,D,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(h){if(!this.options.gpuTiming)return;const v=this.context.extTimerQuery;let S=this.gpuTimers[h.id];S||(S=this.gpuTimers[h.id]={calls:0,cpuTime:0,query:v.createQueryEXT()}),S.calls++,v.beginQueryEXT(v.TIME_ELAPSED_EXT,S.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const h=this.context.extTimerQuery,v=h.createQueryEXT();this.deferredRenderGpuTimeQueries.push(v),h.beginQueryEXT(h.TIME_ELAPSED_EXT,v)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}collectGpuTimers(){const h=this.gpuTimers;return this.gpuTimers={},h}collectDeferredRenderGpuQueries(){const h=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],h}queryGpuTimers(h){const v={};for(const S in h){const D=h[S],k=this.context.extTimerQuery,F=k.getQueryObjectEXT(D.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(D.query),v[S]=F}return v}queryGpuTimeDeferredRender(h){if(!this.options.gpuTimingDeferredRender)return 0;const v=this.context.extTimerQuery;let S=0;for(const D of h)S+=v.getQueryObjectEXT(D,v.QUERY_RESULT_EXT)/1e6,v.deleteQueryEXT(D);return S}translatePosMatrix(h,v,S,D,k){if(!S[0]&&!S[1])return h;const F=k?"map"===D?this.transform.angle:0:"viewport"===D?-this.transform.angle:0;if(F){const X=Math.sin(F),q=Math.cos(F);S=[S[0]*q-S[1]*X,S[0]*X+S[1]*q]}const B=[k?S[0]:Je(v,S[0],this.transform.zoom),k?S[1]:Je(v,S[1],this.transform.zoom),0],V=new Float32Array(16);return g.translate(V,h,B),V}saveTileTexture(h){const v=this._tileTextures[h.size[0]];v?v.push(h):this._tileTextures[h.size[0]]=[h]}getTileTexture(h){const v=this._tileTextures[h];return v&&v.length>0?v.pop():null}isPatternMissing(h){return null===h||void 0!==h&&!this.imageManager.getPattern(h.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const h=this.terrain&&this.terrain.renderingToTexture,v=this.terrain&&0===this.terrain.exaggeration(),S=this.style&&this.style.fog,D=[];return this.terrainRenderModeElevated()&&D.push("TERRAIN"),"globe"===this.transform.projection.name&&D.push("GLOBE"),v&&D.push("ZERO_EXAGGERATION"),S&&!h&&0!==S.getOpacity(this.transform.pitch)&&D.push("FOG"),h&&D.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&D.push("OVERDRAW_INSPECTOR"),D}useProgram(h,v,S){this.cache=this.cache||{};const D=S||[],k=this.currentGlobalDefines().concat(D),F=lo.cacheKey(Ws[h],h,k,v);return this.cache[F]||(this.cache[F]=new lo(this.context,h,Ws[h],v,uu[h],k)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const h=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(h.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=g.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new g.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(h,v,S){if(this.terrain&&this.terrain.renderingToTexture)return;const D=this.style.fog;if(D){const k=D.getOpacity(this.transform.pitch),F=((B,V,X,q,fe,Ve,Ye,it,st,ft,ge)=>{const Ke=B.transform,wt=V.properties.get("color").toArray01();wt[3]=q;const St=B.frameCounter/1e3%1;return{u_fog_matrix:X?Ke.calculateFogTileMatrix(X):B.identityMat,u_fog_range:V.getFovAdjustedRange(Ke._fov),u_fog_color:wt,u_fog_horizon_blend:V.properties.get("horizon-blend"),u_fog_temporal_offset:St,u_frustum_tl:fe,u_frustum_tr:Ve,u_frustum_br:Ye,u_frustum_bl:it,u_globe_pos:st,u_globe_radius:ft,u_viewport:ge,u_globe_transition:g.globeToMercatorTransition(Ke.zoom),u_is_globe:+("globe"===Ke.projection.name)}})(this,D,S,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*g.exported.devicePixelRatio,this.transform.height*g.exported.devicePixelRatio]);v.setFogUniformValues(h,F)}}setTileLoadedFlag(h){this.tileLoaded=h}saveCanvasCopy(){const h=this.canvasCopy();h&&(this.frameCopies.push(h),this.tileLoaded=!1)}canvasCopy(){const h=this.context.gl,v=h.createTexture();return h.bindTexture(h.TEXTURE_2D,v),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,0,0,h.drawingBufferWidth,h.drawingBufferHeight,0),v}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const h=this.style&&this.style.fog;return!!h&&0!==h.getOpacity(this.transform.pitch)}getBackgroundTiles(){const h=this._backgroundTiles,v=this._backgroundTiles={},S=this.transform.coveringTiles({tileSize:512});for(const D of S)v[D.key]=h[D.key]||new g.Tile(D,512,this.transform.tileZoom,this);return v}clearBackgroundTiles(){this._backgroundTiles={}}}class lc{constructor(h=0,v=0,S=0,D=0){if(isNaN(h)||h<0||isNaN(v)||v<0||isNaN(S)||S<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=h,this.bottom=v,this.left=S,this.right=D}interpolate(h,v,S){return null!=v.top&&null!=h.top&&(this.top=g.number(h.top,v.top,S)),null!=v.bottom&&null!=h.bottom&&(this.bottom=g.number(h.bottom,v.bottom,S)),null!=v.left&&null!=h.left&&(this.left=g.number(h.left,v.left,S)),null!=v.right&&null!=h.right&&(this.right=g.number(h.right,v.right,S)),this}getCenter(h,v){const S=g.clamp((this.left+h-this.right)/2,0,h),D=g.clamp((this.top+v-this.bottom)/2,0,v);return new g.Point(S,D)}equals(h){return this.top===h.top&&this.bottom===h.bottom&&this.left===h.left&&this.right===h.right}clone(){return new lc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function pa(x,h){const v=g.getColumn(x,3);g.fromQuat(x,h),g.setColumn(x,3,v)}function Kn(x,h){const v=g.identity$1([]);return g.rotateZ$1(v,v,-h),g.rotateX$1(v,v,-x),v}function ma(x,h){const v=[x[0],x[1],0],S=[h[0],h[1],0];if(g.length(v)>=1e-15){const F=g.normalize([],v);g.scale$2(S,F,g.dot(S,F)),h[0]=S[0],h[1]=S[1]}const D=g.cross([],h,x);if(g.len(D)<1e-15)return null;const k=Math.atan2(-D[1],D[0]);return Kn(Math.atan2(Math.sqrt(x[0]*x[0]+x[1]*x[1]),-x[2]),k)}class po{constructor(h,v){this.position=h,this.orientation=v}get position(){return this._position}set position(h){if(h){const v=h instanceof g.MercatorCoordinate?h:new g.MercatorCoordinate(h[0],h[1],h[2]);this._renderWorldCopies&&(v.x=g.wrap(v.x,0,1)),this._position=v}else this._position=null}lookAtPoint(h,v){if(this.orientation=null,!this.position)return;const S=this.position,D=this._elevation?this._elevation.getAtPointOrZero(g.MercatorCoordinate.fromLngLat(h)):0,k=g.MercatorCoordinate.fromLngLat(h,D),F=[k.x-S.x,k.y-S.y,k.z-S.z];v||(v=[0,0,1]),v[2]=Math.abs(v[2]),this.orientation=ma(F,v)}setPitchBearing(h,v){this.orientation=Kn(g.degToRad(h),g.degToRad(-v))}}class ws{constructor(h,v){this._transform=g.identity([]),this.orientation=v,this.position=h}get mercatorPosition(){const h=this.position;return new g.MercatorCoordinate(h[0],h[1],h[2])}get position(){const h=g.getColumn(this._transform,3);return[h[0],h[1],h[2]]}set position(h){var v;h&&g.setColumn(this._transform,3,[(v=h)[0],v[1],v[2],1])}get orientation(){return this._orientation}set orientation(h){this._orientation=h||g.identity$1([]),h&&pa(this._transform,this._orientation)}getPitchBearing(){const h=this.forward(),v=this.right();return{bearing:Math.atan2(-v[1],v[0]),pitch:Math.atan2(Math.sqrt(h[0]*h[0]+h[1]*h[1]),-h[2])}}setPitchBearing(h,v){this._orientation=Kn(h,v),pa(this._transform,this._orientation)}forward(){const h=g.getColumn(this._transform,2);return[-h[0],-h[1],-h[2]]}up(){const h=g.getColumn(this._transform,1);return[-h[0],-h[1],-h[2]]}right(){const h=g.getColumn(this._transform,0);return[h[0],h[1],h[2]]}getCameraToWorld(h,v){const S=new Float64Array(16);return g.invert(S,this.getWorldToCamera(h,v)),S}getWorldToCameraPosition(h,v,S){const D=this.position;g.scale$2(D,D,-h);const k=new Float64Array(16);return g.fromScaling(k,[S,S,S]),g.translate(k,k,D),k[10]*=v,k}getWorldToCamera(h,v){const S=new Float64Array(16),D=new Float64Array(4),k=this.position;return g.conjugate(D,this._orientation),g.scale$2(k,k,-h),g.fromQuat(S,D),g.translate(S,S,k),S[1]*=-1,S[5]*=-1,S[9]*=-1,S[13]*=-1,S[8]*=v,S[9]*=v,S[10]*=v,S[11]*=v,S}getCameraToClipPerspective(h,v,S,D){const k=new Float64Array(16);return g.perspective(k,h,v,S,D),k}getDistanceToElevation(h,v=!1){const S=0===h?0:g.mercatorZfromAltitude(h,v?g.latFromMercatorY(this.position[1]):this.position[1]),D=this.forward();return(S-this.position[2])/D[2]}clone(){return new ws([...this.position],[...this.orientation])}}function ia(x,h){const v=oa(x.projection,x.zoom,x.width,x.height),S=function(k,F,B,V,X){const q=new g.LngLat(B.lng-180*No,B.lat),fe=new g.LngLat(B.lng+180*No,B.lat),Ve=k.project(q.lng,q.lat),Ye=k.project(fe.lng,fe.lat),it=-Math.atan2(Ye.y-Ve.y,Ye.x-Ve.x),st=g.MercatorCoordinate.fromLngLat(B);st.y=g.clamp(st.y,-1+No,1-No);const ft=st.toLngLat(),ge=k.project(ft.lng,ft.lat),Ke=g.MercatorCoordinate.fromLngLat(ft);Ke.x+=No;const wt=Ke.toLngLat(),St=k.project(wt.lng,wt.lat),Ht=$h(St.x-ge.x,St.y-ge.y,it),qt=g.MercatorCoordinate.fromLngLat(ft);qt.y+=No;const Gt=qt.toLngLat(),rn=k.project(Gt.lng,Gt.lat),Jt=$h(rn.x-ge.x,rn.y-ge.y,it),wn=Math.abs(Ht.x)/Math.abs(Jt.y),ur=g.identity([]);g.rotateZ(ur,ur,-it*(1-(X?0:V)));const mn=g.identity([]);return g.scale(mn,mn,[1,1-(1-wn)*V,1]),mn[4]=-Jt.x/Jt.y*V,g.rotateZ(mn,mn,it),g.multiply(mn,ur,mn),mn}(x.projection,0,x.center,v,h),D=Fa(x);return g.scale(S,S,[D,D,1]),S}function Fa(x){const h=x.projection,v=oa(x.projection,x.zoom,x.width,x.height),S=up(h,x.center),D=up(h,g.LngLat.convert(h.center));return Math.pow(2,S*v+(1-v)*D)}function oa(x,h,v,S,D=1/0){const k=x.range;if(!k)return 0;const F=Math.min(D,Math.max(v,S)),B=Math.log(F/1024)/Math.LN2;return g.smoothstep(k[0]+B,k[1]+B,h)}const No=1/4e4;function up(x,h){const v=g.clamp(h.lat,-g.MAX_MERCATOR_LATITUDE,g.MAX_MERCATOR_LATITUDE),S=new g.LngLat(h.lng-180*No,v),D=new g.LngLat(h.lng+180*No,v),k=x.project(S.lng,v),F=x.project(D.lng,v),B=g.MercatorCoordinate.fromLngLat(S),V=g.MercatorCoordinate.fromLngLat(D),X=F.x-k.x,q=F.y-k.y,fe=V.x-B.x,Ve=V.y-B.y,Ye=Math.sqrt((fe*fe+Ve*Ve)/(X*X+q*q));return Math.log(Ye)/Math.LN2}function $h(x,h,v){const S=Math.cos(v),D=Math.sin(v);return{x:x*S-h*D,y:x*D+h*S}}class Ba{constructor(h,v,S,D,k,F,B){this.tileSize=512,this._renderWorldCopies=void 0===k||k,this._minZoom=h||0,this._maxZoom=v||22,this._minPitch=S??0,this._maxPitch=D??60,this.setProjection(F),this.setMaxBounds(B),this.width=0,this.height=0,this._center=new g.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new lc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ws,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const h=new Ba(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return h._elevation=this._elevation,h._centerAltitude=this._centerAltitude,h._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,h.tileSize=this.tileSize,h.mercatorFromTransition=this.mercatorFromTransition,h.width=this.width,h.height=this.height,h.cameraElevationReference=this.cameraElevationReference,h._center=this._center,h._setZoom(this.zoom),h._seaLevelZoom=this._seaLevelZoom,h.angle=this.angle,h._fov=this._fov,h._pitch=this._pitch,h._nearZ=this._nearZ,h._farZ=this._farZ,h._averageElevation=this._averageElevation,h._unmodified=this._unmodified,h._edgeInsets=this._edgeInsets.clone(),h._camera=this._camera.clone(),h._calcMatrices(),h.freezeTileCoverage=this.freezeTileCoverage,h.frustumCorners=this.frustumCorners,h}get elevation(){return this._elevation}set elevation(h){this._elevation!==h&&(this._elevation=h,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(h,v=!1){const S=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||S)&&this._updateCameraOnTerrain(),(h||S)&&this._constrainCamera(v),this._calcMatrices()}getProjection(){return g.pick(this.projection,["name","center","parallels"])}setProjection(h){this.projectionOptions=h||{name:"mercator"};const v=this.projection?this.getProjection():void 0;this.projection=g.getProjection(this.projectionOptions);const S=!me(v,this.getProjection());return S&&this._calcMatrices(),this.mercatorFromTransition=!1,S}setMercatorFromTransition(){const h=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=g.getProjection({name:"mercator"});const v=h!==this.projection.name;return v&&this._calcMatrices(),v}get minZoom(){return this._minZoom}set minZoom(h){this._minZoom!==h&&(this._minZoom=h,this.zoom=Math.max(this.zoom,h))}get maxZoom(){return this._maxZoom}set maxZoom(h){this._maxZoom!==h&&(this._maxZoom=h,this.zoom=Math.min(this.zoom,h))}get minPitch(){return this._minPitch}set minPitch(h){this._minPitch!==h&&(this._minPitch=h,this.pitch=Math.max(this.pitch,h))}get maxPitch(){return this._maxPitch}set maxPitch(h){this._maxPitch!==h&&(this._maxPitch=h,this.pitch=Math.min(this.pitch,h))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(h){void 0===h?h=!0:null===h&&(h=!1),this._renderWorldCopies=h}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const h=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(h))}get cameraWorldSize(){const h=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(h))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return g.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new g.Point(this.width,this.height)}get bearing(){return g.wrap(this.rotation,-180,180)}set bearing(h){this.rotation=h}get rotation(){return-this.angle/Math.PI*180}set rotation(h){const v=-h*Math.PI/180;var S,D,k,F,B,V,X,q,fe,Ve;this.angle!==v&&(this._unmodified=!1,this.angle=v,this._calcMatrices(),this.rotationMatrix=(S=new g.ARRAY_TYPE(4),g.ARRAY_TYPE!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S),D=this.rotationMatrix,F=this.angle,B=(k=this.rotationMatrix)[0],V=k[1],X=k[2],q=k[3],fe=Math.sin(F),Ve=Math.cos(F),D[0]=B*Ve+X*fe,D[1]=V*Ve+q*fe,D[2]=B*-fe+X*Ve,D[3]=V*-fe+q*Ve)}get pitch(){return this._pitch/Math.PI*180}set pitch(h){const v=g.clamp(h,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==v&&(this._unmodified=!1,this._pitch=v,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const h=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/h)}set fov(h){h=Math.max(.01,Math.min(60,h)),this._fov!==h&&(this._unmodified=!1,this._fov=g.degToRad(h),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(h){this._averageElevation=h,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(h){const v=Math.min(Math.max(h,this.minZoom),this.maxZoom);this._zoom!==v&&(this._unmodified=!1,this._setZoom(v),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(h){this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const h=this._elevation;this._centerAltitude=h.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=h.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const h=this._elevation,v=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],S=this.horizonLineFromTop();let D=0,k=0;for(let F=0;F<v.length;F++){const B=new g.Point(v[F][0]*this.width,S+v[F][1]*(this.height-S)),V=h.pointCoordinate(B);if(!V)continue;const X=1/Math.hypot(V[0]-this._camera.position[0],V[1]-this._camera.position[1]);D+=V[3]*X,k+=X}return 0===k?NaN:D/k}get center(){return this._center}set center(h){h.lat===this._center.lat&&h.lng===this._center.lng||(this._unmodified=!1,this._center=h,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const h=this._seaLevelZoom,v=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),S=this.pixelsPerMeter/this.worldSize*v,D=this._mercatorZfromZoom(h),k=this._mercatorZfromZoom(this._maxZoom),F=Math.max(D-S,k);this._setZoom(this._zoomFromMercatorZ(F))}get padding(){return this._edgeInsets.toJSON()}set padding(h){this._edgeInsets.equals(h)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,h,1),this._calcMatrices())}computeZoomRelativeTo(h){const v=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,h.toAltitude()));let S;S=h.z<this._camera.position[2]?[v.x,v.y,v.z]:[h.x,h.y,h.z];const D=g.length(g.sub([],this._camera.position,S));return g.clamp(this._zoomFromMercatorZ(D),this._minZoom,this._maxZoom)}setFreeCameraOptions(h){if(!this.height||!h.position&&!h.orientation)return;this._updateCameraState();let v=!1;if(h.orientation&&!g.exactEquals(h.orientation,this._camera.orientation)&&(v=this._setCameraOrientation(h.orientation)),h.position){const S=[h.position.x,h.position.y,h.position.z];g.exactEquals$1(S,this._camera.position)||(this._setCameraPosition(S),v=!0)}v&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const h=this._camera.position,v=new po;return v.position=new g.MercatorCoordinate(h[0],h[1],h[2]),v.orientation=this._camera.orientation,v._elevation=this.elevation,v._renderWorldCopies=this.renderWorldCopies,v}_setCameraOrientation(h){if(!g.length$1(h))return!1;g.normalize$1(h,h);const v=g.transformQuat([],[0,0,-1],h),S=g.transformQuat([],[0,-1,0],h);if(S[2]<0)return!1;const D=ma(v,S);return!!D&&(this._camera.orientation=D,!0)}_setCameraPosition(h){const v=this.zoomScale(this.minZoom)*this.tileSize,S=this.zoomScale(this.maxZoom)*this.tileSize,D=this.cameraToCenterDistance;h[2]=g.clamp(h[2],D/S,D/v),this._camera.position=h}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(h){return this._edgeInsets.equals(h)}interpolatePadding(h,v,S){this._unmodified=!1,this._edgeInsets.interpolate(h,v,S),this._constrain(),this._calcMatrices()}coveringZoomLevel(h){const v=(h.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/h.tileSize));return Math.max(0,v)}getVisibleUnwrappedCoordinates(h){const v=[new g.UnwrappedTileID(0,h)];if(this.renderWorldCopies){const S=this.pointCoordinate(new g.Point(0,0)),D=this.pointCoordinate(new g.Point(this.width,0)),k=this.pointCoordinate(new g.Point(this.width,this.height)),F=this.pointCoordinate(new g.Point(0,this.height)),B=Math.floor(Math.min(S.x,D.x,k.x,F.x)),V=Math.floor(Math.max(S.x,D.x,k.x,F.x)),X=1;for(let q=B-X;q<=V+X;q++)0!==q&&v.push(new g.UnwrappedTileID(q,h))}return v}coveringTiles(h){let v=this.coveringZoomLevel(h);const S=v,D=this.elevation&&!h.isTerrainDEM,k="mercator"===this.projection.name;if(void 0!==h.minzoom&&v<h.minzoom)return[];void 0!==h.maxzoom&&v>h.maxzoom&&(v=h.maxzoom);const F=this.locationCoordinate(this.center),B=this.center.lat,V=1<<v,X=[V*F.x,V*F.y,0],q="globe"===this.projection.name,fe=!q,Ve=g.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v,fe),Ye=q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),it=V*g.mercatorZfromAltitude(1,this.center.lat),st=this._camera.position[2]/g.mercatorZfromAltitude(1,this.center.lat),ft=[V*Ye.x,V*Ye.y,st*(fe?1:it)],ge=this.cameraToCenterDistance/h.tileSize*(h.roundZoom?1:.502),Ke=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?v:0,wt=h.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,St=h.isTerrainDEM?-wt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ht=this.projection.isReprojectedInTileSpace?Fa(this):1,qt=bn=>{const cr=new g.MercatorCoordinate(bn.x+25e-6,bn.y,bn.z),Jn=new g.MercatorCoordinate(bn.x,bn.y+25e-6,bn.z),hr=bn.toLngLat(),vi=cr.toLngLat(),Ui=Jn.toLngLat(),Wr=this.locationCoordinate(hr),ei=this.locationCoordinate(vi),co=this.locationCoordinate(Ui),uo=Math.hypot(ei.x-Wr.x,ei.y-Wr.y),hi=Math.hypot(co.x-Wr.x,co.y-Wr.y);return Math.sqrt(uo*hi)*Ht/25e-6},Gt=bn=>{const Un=wt,cr=St;return{aabb:g.tileAABB(this,V,0,0,0,bn,cr,Un,this.projection),zoom:0,x:0,y:0,minZ:cr,maxZ:Un,wrap:bn,fullyVisible:!1}},rn=[];let Jt=[];const wn=v,ur=h.reparseOverscaled?S:v,mn=bn=>bn*bn,Gn=mn((st-this._centerAltitude)*it),Dn=bn=>{if(!this._elevation||!bn.tileID||!k)return;const Un=this._elevation.getMinMaxForTile(bn.tileID),cr=bn.aabb;Un?(cr.min[2]=Un.min,cr.max[2]=Un.max,cr.center[2]=(cr.min[2]+cr.max[2])/2):(bn.shouldSplit=ar(bn),bn.shouldSplit||(cr.min[2]=cr.max[2]=cr.center[2]=this._centerAltitude))},ar=bn=>{if(bn.zoom<Ke)return!0;if(bn.zoom===wn)return!1;if(null!=bn.shouldSplit)return bn.shouldSplit;const Un=bn.aabb.distanceX(ft),cr=bn.aabb.distanceY(ft);let Jn=Gn,hr=1;if(q){Jn=mn(bn.aabb.distanceZ(ft));const Wr=Math.pow(2,bn.zoom),ei=g.latFromMercatorY((bn.y+1)/Wr),co=g.latFromMercatorY(bn.y/Wr),uo=Math.min(Math.max(B,ei),co),hi=g.circumferenceAtLatitude(uo)/g.circumferenceAtLatitude(B);if(hr=uo===B?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,hi/this._mercatorScaleRatio),this.zoom<=g.GLOBE_ZOOM_THRESHOLD_MIN&&bn.zoom===wn-1&&hi>=.9)return!0}else if(D&&(Jn=mn(bn.aabb.distanceZ(ft)*it)),this.projection.isReprojectedInTileSpace&&S<=5){const Wr=Math.pow(2,bn.zoom),ei=qt(new g.MercatorCoordinate((bn.x+.5)/Wr,(bn.y+.5)/Wr));hr=ei>.85?1:ei}const vi=Un*Un+cr*cr+Jn;return vi<mn((1<<wn-bn.zoom)*ge*hr*((Wr,ei)=>{if(ei*mn(.707)<Wr)return 1;const co=Math.sqrt(ei/Wr);return co/(1.4144271570014144+(Math.pow(1.1,co-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Jn,Gn),vi))};if(this.renderWorldCopies)for(let bn=1;bn<=3;bn++)rn.push(Gt(-bn)),rn.push(Gt(bn));for(rn.push(Gt(0));rn.length>0;){const bn=rn.pop(),Un=bn.x,cr=bn.y;let Jn=bn.fullyVisible;if(!Jn){const hr=bn.aabb.intersects(Ve);if(0===hr)continue;Jn=2===hr}if(bn.zoom!==wn&&ar(bn))for(let hr=0;hr<4;hr++){const vi=(Un<<1)+hr%2,Ui=(cr<<1)+(hr>>1),Wr={aabb:k?bn.aabb.quadrant(hr):g.tileAABB(this,V,bn.zoom+1,vi,Ui,bn.wrap,bn.minZ,bn.maxZ,this.projection),zoom:bn.zoom+1,x:vi,y:Ui,wrap:bn.wrap,fullyVisible:Jn,tileID:void 0,shouldSplit:void 0,minZ:bn.minZ,maxZ:bn.maxZ};D&&!q&&(Wr.tileID=new g.OverscaledTileID(bn.zoom+1===wn?ur:bn.zoom+1,bn.wrap,bn.zoom+1,vi,Ui),Dn(Wr)),rn.push(Wr)}else{const hr=bn.zoom===wn?ur:bn.zoom;if(h.minzoom&&h.minzoom>hr)continue;const vi=X[0]-(.5+Un+(bn.wrap<<bn.zoom))*(1<<v-bn.zoom),Ui=X[1]-.5-cr,Wr=bn.tileID?bn.tileID:new g.OverscaledTileID(hr,bn.wrap,bn.zoom,Un,cr);Jt.push({tileID:Wr,distanceSq:vi*vi+Ui*Ui})}}if(this.fogCullDistSq){const bn=this.fogCullDistSq,Un=this.horizonLineFromTop();Jt=Jt.filter(cr=>{const Jn=[0,0,0,1],hr=[g.EXTENT,g.EXTENT,0,1],vi=this.calculateFogTileMatrix(cr.tileID.toUnwrapped());g.transformMat4$1(Jn,Jn,vi),g.transformMat4$1(hr,hr,vi);const Ui=g.getAABBPointSquareDist(Jn,hr);if(0===Ui)return!0;let Wr=!1;const ei=this._elevation;if(ei&&Ui>bn&&0!==Un){const co=this.calculateProjMatrix(cr.tileID.toUnwrapped());let uo;h.isTerrainDEM||(uo=ei.getMinMaxForTile(cr.tileID)),uo||(uo={min:St,max:wt});const hi=g.furthestTileCorner(this.rotation),ms=[hi[0]*g.EXTENT,hi[1]*g.EXTENT,uo.max];g.transformMat4(ms,ms,co),Wr=(1-ms[1])*this.height*.5<Un}return Ui<bn||Wr})}return Jt.sort((bn,Un)=>bn.distanceSq-Un.distanceSq).map(bn=>bn.tileID)}resize(h,v){this.width=h,this.height=v,this.pixelsToGLUnits=[2/h,-2/v],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(h){return Math.pow(2,h)}scaleZoom(h){return Math.log(h)/Math.LN2}project(h){const v=g.clamp(h.lat,-g.MAX_MERCATOR_LATITUDE,g.MAX_MERCATOR_LATITUDE),S=this.projection.project(h.lng,v);return new g.Point(S.x*this.worldSize,S.y*this.worldSize)}unproject(h){return this.projection.unproject(h.x/this.worldSize,h.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/g.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(h,v){let S,D;const k=this.centerPoint;if("globe"===this.projection.name){const B=this.worldSize;S=(v.x-k.x)/B,D=(v.y-k.y)/B}else{const B=this.pointCoordinate(v),V=this.pointCoordinate(k);S=B.x-V.x,D=B.y-V.y}const F=this.locationCoordinate(h);this.setLocation(new g.MercatorCoordinate(F.x-S,F.y-D))}setLocation(h){this.center=this.coordinateLocation(h),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(h){return this.projection.locationPoint(this,h)}locationPoint3D(h){return this.projection.locationPoint(this,h,!0)}pointLocation(h){return this.coordinateLocation(this.pointCoordinate(h))}pointLocation3D(h){return this.coordinateLocation(this.pointCoordinate3D(h))}locationCoordinate(h,v){const S=v?g.mercatorZfromAltitude(v,h.lat):void 0,D=this.projection.project(h.lng,h.lat);return new g.MercatorCoordinate(D.x,D.y,S)}coordinateLocation(h){return this.projection.unproject(h.x,h.y)}pointRayIntersection(h,v){const S=v??this._centerAltitude,D=[h.x,h.y,0,1],k=[h.x,h.y,1,1];g.transformMat4$1(D,D,this.pixelMatrixInverse),g.transformMat4$1(k,k,this.pixelMatrixInverse);const F=k[3];g.scale$1(D,D,1/D[3]),g.scale$1(k,k,1/F);const B=D[2],V=k[2];return{p0:D,p1:k,t:B===V?0:(S-B)/(V-B)}}screenPointToMercatorRay(h){const v=[h.x,h.y,0,1],S=[h.x,h.y,1,1];return g.transformMat4$1(v,v,this.pixelMatrixInverse),g.transformMat4$1(S,S,this.pixelMatrixInverse),g.scale$1(v,v,1/v[3]),g.scale$1(S,S,1/S[3]),v[2]=g.mercatorZfromAltitude(v[2],this._center.lat)*this.worldSize,S[2]=g.mercatorZfromAltitude(S[2],this._center.lat)*this.worldSize,g.scale$1(v,v,1/this.worldSize),g.scale$1(S,S,1/this.worldSize),new g.Ray([v[0],v[1],v[2]],g.normalize([],g.sub([],S,v)))}rayIntersectionCoordinate(h){const{p0:v,p1:S,t:D}=h,k=g.mercatorZfromAltitude(v[2],this._center.lat),F=g.mercatorZfromAltitude(S[2],this._center.lat);return new g.MercatorCoordinate(g.number(v[0],S[0],D)/this.worldSize,g.number(v[1],S[1],D)/this.worldSize,g.number(k,F,D))}pointCoordinate(h,v=this._centerAltitude){return this.projection.pointCoordinate(this,h.x,h.y,v)}pointCoordinate3D(h){if(!this.elevation)return this.pointCoordinate(h);let v=this.projection.pointCoordinate3D(this,h.x,h.y);if(v)return new g.MercatorCoordinate(v[0],v[1],v[2]);let S=0,D=this.horizonLineFromTop();if(h.y>D)return this.pointCoordinate(h);const k=.02*D,F=h.clone();for(let B=0;B<10&&D-S>k;B++){F.y=g.number(S,D,.66);const V=this.projection.pointCoordinate3D(this,F.x,F.y);V?(D=F.y,v=V):S=F.y}return v?new g.MercatorCoordinate(v[0],v[1],v[2]):this.pointCoordinate(h)}isPointAboveHorizon(h){return this.projection.isPointAboveHorizon(this,h)}isPointOnSurface(h){if(h.y<0||h.y>this.height||h.x<0||h.x>this.width)return!1;if(this.elevation||this.zoom>=g.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(h);const v=this.pointCoordinate(h);return v.y>=0&&v.y<=1}_coordinatePoint(h,v){const S=v&&this.elevation?this.elevation.getAtPointOrZero(h,this._centerAltitude):this._centerAltitude,D=[h.x*this.worldSize,h.y*this.worldSize,S+h.toAltitude(),1];return g.transformMat4$1(D,D,this.pixelMatrix),D[3]>0?new g.Point(D[0]/D[3],D[1]/D[3]):new g.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:h,left:v}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,k=this.pointLocation3D(new g.Point(v,h)),F=this.pointLocation3D(new g.Point(D,h)),B=this.pointLocation3D(new g.Point(D,S)),V=this.pointLocation3D(new g.Point(v,S));let X=Math.min(k.lng,F.lng,B.lng,V.lng),q=Math.max(k.lng,F.lng,B.lng,V.lng),fe=Math.min(k.lat,F.lat,B.lat,V.lat),Ve=Math.max(k.lat,F.lat,B.lat,V.lat);const Ye=Math.pow(2,-this.zoom)/16*270,it="globe"===this.projection.name?1:4,st=(ft,ge,Ke,wt,St)=>{const Ht=(ft+Ke)/2,qt=(ge+wt)/2,Gt=new g.Point(Ht,qt),{lng:rn,lat:Jt}=this.pointLocation3D(Gt),wn=Math.max(0,X-rn,fe-Jt,rn-q,Jt-Ve);X=Math.min(X,rn),q=Math.max(q,rn),fe=Math.min(fe,Jt),Ve=Math.max(Ve,Jt),(St<it||wn>Ye)&&(st(ft,ge,Ht,qt,St+1),st(Ht,qt,Ke,wt,St+1))};if(st(v,h,D,h,1),st(D,h,D,S,1),st(D,S,v,S,1),st(v,S,v,h,1),"globe"===this.projection.name){const[ft,ge]=g.polesInViewport(this);ft?(Ve=90,q=180,X=-180):ge&&(fe=-90,q=180,X=-180)}return new g.LngLatBounds(new g.LngLat(X,fe),new g.LngLat(q,Ve))}_getBoundsRectangular(h,v){const{top:S,left:D}=this._edgeInsets,k=this.height-this._edgeInsets.bottom,F=this.width-this._edgeInsets.right,B=new g.Point(D,S),V=new g.Point(F,S),X=new g.Point(F,k),q=new g.Point(D,k);let fe=this.pointCoordinate(B,h),Ve=this.pointCoordinate(V,h);const Ye=this.pointCoordinate(X,v),it=this.pointCoordinate(q,v),st=(ft,ge)=>(ge.y-ft.y)/(ge.x-ft.x);return fe.y>1&&Ve.y>=0?fe=new g.MercatorCoordinate((1-it.y)/st(it,fe)+it.x,1):fe.y<0&&Ve.y<=1&&(fe=new g.MercatorCoordinate(-it.y/st(it,fe)+it.x,0)),Ve.y>1&&fe.y>=0?Ve=new g.MercatorCoordinate((1-Ye.y)/st(Ye,Ve)+Ye.x,1):Ve.y<0&&fe.y<=1&&(Ve=new g.MercatorCoordinate(-Ye.y/st(Ye,Ve)+Ye.x,0)),(new g.LngLatBounds).extend(this.coordinateLocation(fe)).extend(this.coordinateLocation(Ve)).extend(this.coordinateLocation(it)).extend(this.coordinateLocation(Ye))}_getBoundsRectangularTerrain(){const h=this.elevation;if(!h.visibleDemTiles.length||h.isUsingMockSource())return this._getBoundsRectangular(0,0);const v=h.visibleDemTiles.reduce((S,D)=>{if(D.dem){const k=D.dem.tree;S.min=Math.min(S.min,k.minimums[0]),S.max=Math.max(S.max,k.maximums[0])}return S},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(v.min*h.exaggeration(),v.max*h.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(h=!0){const v=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,S=this.height/2-v*(1-this._horizonShift);return h?Math.max(0,S):S}getMaxBounds(){return this.maxBounds}setMaxBounds(h){this.maxBounds=h,this.minLat=-g.MAX_MERCATOR_LATITUDE,this.maxLat=g.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,h&&(this.minLat=h.getSouth(),this.maxLat=h.getNorth(),this.minLng=h.getWest(),this.maxLng=h.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=g.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=g.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=g.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=g.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(h,v){return this.projection.createTileMatrix(this,v,h)}calculateDistanceTileData(h){const v=h.key,S=this._distanceTileDataCache;if(S[v])return S[v];const D=h.canonical,k=1/this.height,F=this.cameraWorldSize,B=F/this.zoomScale(D.z),V=(D.x+Math.pow(2,D.z)*h.wrap)*B,X=D.y*B,q=this.point;q.x*=F/this.worldSize,q.y*=F/this.worldSize;const fe=this.angle,Ve=Math.sin(-fe),Ye=-Math.cos(-fe);return S[v]={bearing:[Ve,Ye],center:[(q.x-V)*k,(q.y-X)*k],scale:B/g.EXTENT*k},S[v]}calculateFogTileMatrix(h){const v=h.key,S=this._fogTileMatrixCache;if(S[v])return S[v];const D=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,h);return g.multiply(D,this.worldToFogMatrix,D),S[v]=new Float32Array(D),S[v]}calculateProjMatrix(h,v=!1){const S=h.key,D=v?this._alignedProjMatrixCache:this._projMatrixCache;if(D[S])return D[S];const k=this.calculatePosMatrix(h,this.worldSize);return g.multiply(k,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:v?this.alignedProjMatrix:this.projMatrix,k),D[S]=new Float32Array(k),D[S]}calculatePixelsToTileUnitsMatrix(h){const v=h.tileID.key,S=this._pixelsToTileUnitsCache;if(S[v])return S[v];const D=function(k,F){const{scale:B}=k.tileTransform,V=B*g.EXTENT/(k.tileSize*Math.pow(2,F.zoom-k.tileID.overscaledZ+k.tileID.canonical.z));return X=new Float32Array(4),Ve=(q=F.inverseAdjustmentMatrix)[1],Ye=q[2],it=q[3],ft=(fe=[V,V])[1],X[0]=q[0]*(st=fe[0]),X[1]=Ve*st,X[2]=Ye*ft,X[3]=it*ft,X;var X,q,fe,Ve,Ye,it,st,ft}(h,this);return S[v]=D,S[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const h=1/this.worldSize,v=g.fromScaling([],[h,h,h]);return g.multiply(v,v,this.globeMatrix),v}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const h=this._elevation;this._updateCameraState();const v=g.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(v),D=this._camera.forward(),k=g.mercatorZfromAltitude(1,this._center.lat);S[2]/=k,D[2]/=k,g.normalize(D,D);const F=h.raycast(S,D,h.exaggeration());if(F){const B=g.scaleAndAdd([],S,D,F),V=new g.MercatorCoordinate(B[0],B[1],g.mercatorZfromAltitude(B[2],g.latFromMercatorY(B[1]))),X=(V.z+g.length([V.x-S[0],V.y-S[1],V.z-S[2]*k]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(X),this._centerAltitude=V.toAltitude(),this._center=this.coordinateLocation(V),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(h=!1){if(!this._elevation)return;const v=this._elevation,S=g.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,D=this._computeCameraPosition(S),k=v.getAtPointOrZero(new g.MercatorCoordinate(...D)),F=this.pixelsPerMeter/this.worldSize*k,B=this._minimumHeightOverTerrain(),V=D[2]-F;if(V<=B)if(V<0||h){const X=this.locationCoordinate(this._center,this._centerAltitude),q=[D[0],D[1],X.z-D[2]],fe=g.length(q);q[2]-=(B-V)/this._pixelsPerMercatorPixel;const Ve=g.length(q);if(0===Ve)return;g.scale$2(q,q,fe/Ve*this._pixelsPerMercatorPixel),this._camera.position=[D[0],D[1],X.z*this._pixelsPerMercatorPixel-q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const h="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||h){const Ve=this.center;return Ve.lat=g.clamp(Ve.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!h)&&(Ve.lng=g.clamp(Ve.lng,this.minLng,this.maxLng)),this.center=Ve,void(this._constraining=!1)}const v=this._unmodified,{x:S,y:D}=this.point;let k=0,F=S,B=D;const V=this.width/2,X=this.height/2,q=this.worldMinY*this.scale,fe=this.worldMaxY*this.scale;if(D-X<q&&(B=q+X),D+X>fe&&(B=fe-X),fe-q<this.height&&(k=Math.max(k,this.height/(fe-q)),B=(fe+q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ve=this.worldMinX*this.scale,Ye=this.worldMaxX*this.scale,it=this.worldSize/2-(Ve+Ye)/2;F=(S+it+this.worldSize)%this.worldSize-it,F-V<Ve&&(F=Ve+V),F+V>Ye&&(F=Ye-V),Ye-Ve<this.width&&(k=Math.max(k,this.width/(Ye-Ve)),F=(Ye+Ve)/2)}F===S&&B===D||(this.center=this.unproject(new g.Point(F,B))),k&&(this.zoom+=this.scaleZoom(k)),this._constrainCamera(),this._unmodified=v,this._constraining=!1}_minZoomForBounds(){let h=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(h=Math.max(h,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),h}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const h=this.centerOffset,v=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=g.mercatorZfromAltitude(1,this.center.lat)/g.mercatorZfromAltitude(1,g.GLOBE_SCALE_MATCH_LATITUDE));const S=oa(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,S),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const D="meters"===this.projection.zAxisUnit?v:1,k=this._camera.getWorldToCamera(this.worldSize,D),F=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);F[8]=2*-h.x/this.width,F[9]=2*h.y/this.height;let B=g.mul([],F,k);if(this.projection.isReprojectedInTileSpace){const qt=this.locationCoordinate(this.center),Gt=g.identity([]);g.translate(Gt,Gt,[qt.x*this.worldSize,qt.y*this.worldSize,0]),g.multiply(Gt,Gt,ia(this)),g.translate(Gt,Gt,[-qt.x*this.worldSize,-qt.y*this.worldSize,0]),g.multiply(B,B,Gt),this.inverseAdjustmentMatrix=function(rn){const Jt=ia(rn,!0);return J([],[Jt[0],Jt[1],Jt[4],Jt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=g.scale([],B,[this.worldSize,this.worldSize,this.worldSize/D,1]),this.projMatrix=B,this.invProjMatrix=g.invert(new Float64Array(16),this.projMatrix);const V=g.invert([],F);this.frustumCorners=g.FrustumCorners.fromInvProjectionMatrix(V,this.horizonLineFromTop(),this.height);const X=new Float32Array(16);g.identity(X),g.scale(X,X,[1,-1,1]),g.rotateX(X,X,this._pitch),g.rotateZ(X,X,this.angle);const q=g.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),fe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;q[8]=2*-h.x/this.width,q[9]=2*(h.y+fe)/this.height,this.skyboxMatrix=g.multiply(X,q,X);const Ve=this.point,Ye=Ve.x,it=Ve.y,st=this.width%2/2,ft=this.height%2/2,ge=Math.cos(this.angle),Ke=Math.sin(this.angle),wt=Ye-Math.round(Ye)+ge*st+Ke*ft,St=it-Math.round(it)+ge*ft+Ke*st,Ht=new Float64Array(B);if(g.translate(Ht,Ht,[wt>.5?wt-1:wt,St>.5?St-1:St,0]),this.alignedProjMatrix=Ht,B=g.create(),g.scale(B,B,[this.width/2,-this.height/2,1]),g.translate(B,B,[1,-1,0]),this.labelPlaneMatrix=B,B=g.create(),g.scale(B,B,[1,-1,1]),g.translate(B,B,[-1,-1,0]),g.scale(B,B,[2/this.width,2/this.height,1]),this.glCoordMatrix=B,this.pixelMatrix=g.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},B=g.invert(new Float64Array(16),this.pixelMatrix),!B)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=B,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=g.calculateGlobeMatrix(this);const qt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=g.transformMat4(qt,qt,k),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=B;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const h=this.cameraWorldSizeForFog,v=this.cameraPixelsPerMeter,S=this._camera.position,D=1/this.height/this._pixelsPerMercatorPixel,k=[h,h,v];g.scale$2(k,k,D),g.scale$2(S,S,-1),g.multiply$2(S,S,k);const F=g.create();g.translate(F,F,S),g.scale(F,F,k),this.mercatorFogMatrix=F,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(h,v,D)}_computeCameraPosition(h){const v=(h=h||this.pixelsPerMeter)/this.pixelsPerMeter,S=this._camera.forward(),D=this.point,k=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*v-h/this.worldSize*this._centerAltitude;return[D.x/this.worldSize-S[0]*k,D.y/this.worldSize-S[1]*k,h/this.worldSize*this._centerAltitude-S[2]*k]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(h){const v=this._maxCameraBoundsDistance()*Math.cos(this._pitch),S=this._camera.position[2],D=h[2];let k=1;this.projection.wrap&&(this.center=this.center.wrap()),D>0&&(k=Math.min((v-S)/D,1)),this._camera.position=g.scaleAndAdd([],this._camera.position,h,k),this._updateStateFromCamera()}_updateStateFromCamera(){const h=this._camera.position,v=this._camera.forward(),{pitch:S,bearing:D}=this._camera.getPitchBearing(),k=g.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,F=this._mercatorZfromZoom(this._maxZoom)*Math.cos(g.degToRad(this._maxPitch)),B=Math.max((h[2]-k)/Math.cos(S),F),V=this._zoomFromMercatorZ(B);g.scaleAndAdd(h,h,v,B),this._pitch=g.clamp(S,g.degToRad(this.minPitch),g.degToRad(this.maxPitch)),this.angle=g.wrap(D,-Math.PI,Math.PI),this._setZoom(g.clamp(V,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new g.MercatorCoordinate(h[0],h[1],h[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(h){return Math.pow(2,h)*this.tileSize}_mercatorZfromZoom(h){return this.cameraToCenterDistance/this._worldSizeFromZoom(h)}_minimumHeightOverTerrain(){const h=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(h)}_zoomFromMercatorZ(h){return this.scaleZoom(this.cameraToCenterDistance/(h*this.tileSize))}zoomFromMercatorZAdjusted(h){let v=0,S=g.GLOBE_ZOOM_THRESHOLD_MAX,D=0,k=1/0;for(;S-v>1e-6&&S>v;){const F=v+.5*(S-v),B=this.tileSize*Math.pow(2,F),V=this.getCameraToCenterDistance(this.projection,F,B),X=this.scaleZoom(V/(h*this.tileSize)),q=Math.abs(F-X);q<k&&(k=q,D=F),F<X?v=F:S=F}return D}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(g.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(h,v){const S=Math.min(h.x,v.x),D=Math.max(h.x,v.x),k=Math.min(h.y,v.y),F=Math.max(h.y,v.y);if(k<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const B=[new g.Point(S,k),new g.Point(D,F),new g.Point(S,F),new g.Point(D,k)],V=this.renderWorldCopies?-3:0,X=this.renderWorldCopies?4:1;for(const q of B){const fe=this.pointRayIntersection(q);if(fe.t<0)return!0;const Ve=this.rayIntersectionCoordinate(fe);if(Ve.x<V||Ve.y<0||Ve.x>X||Ve.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+g.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new g.Point(0,0),new g.Point(this.width,this.height))}zoomDeltaToMovement(h,v){const S=g.length(g.sub([],this._camera.position,h)),D=this._zoomFromMercatorZ(S)+v;return S-this._mercatorZfromZoom(D)}getCameraPoint(){if("globe"===this.projection.name){const h=function([v,S,D],k){const F=[v,S,D,1];g.transformMat4$1(F,F,k);const B=F[3]=Math.max(F[3],1e-6);return F[0]/=B,F[1]/=B,F[2]/=B,F}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new g.Point(h[0],h[1])}{const h=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new g.Point(0,h))}}getCameraToCenterDistance(h,v=this.zoom,S=this.worldSize){const D=oa(h,v,this.width,this.height,1024),k=h.pixelSpaceConversion(this.center.lat,S,D);return.5/Math.tan(.5*this._fov)*this.height*k}getWorldToCameraMatrix(){const h=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&g.multiply(h,h,this.globeMatrix),h}}function Tc(x,h){let v=!1,S=null;const D=()=>{S=null,v&&(x(),S=setTimeout(D,h),v=!1)};return()=>(v=!0,S||D(),S)}class sa{constructor(h){this._hashName=h&&encodeURIComponent(h),g.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Tc(this._updateHashUnthrottled.bind(this),300)}addTo(h){return this._map=h,g.window.addEventListener("hashchange",this._onHashChange,!1),h.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),g.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const h=this._map;if(!h)return"";const v=Fr(h);if(this._hashName){const S=this._hashName;let D=!1;const k=g.window.location.hash.slice(1).split("&").map(F=>{const B=F.split("=")[0];return B===S?(D=!0,`${B}=${v}`):F}).filter(F=>F);return D||k.push(`${S}=${v}`),`#${k.join("&")}`}return`#${v}`}_getCurrentHash(){const h=g.window.location.hash.replace("#","");if(this._hashName){let v;return h.split("&").map(S=>S.split("=")).forEach(S=>{S[0]===this._hashName&&(v=S)}),(v&&v[1]||"").split("/")}return h.split("/")}_onHashChange(){const h=this._map;if(!h)return!1;const v=this._getCurrentHash();if(v.length>=3&&!v.some(S=>isNaN(S))){const S=h.dragRotate.isEnabled()&&h.touchZoomRotate.isEnabled()?+(v[3]||0):h.getBearing();return h.jumpTo({center:[+v[2],+v[1]],zoom:+v[0],bearing:S,pitch:+(v[4]||0)}),!0}return!1}_updateHashUnthrottled(){const h=g.window.location.href.replace(/(#.+)?$/,this.getHashString());g.window.history.replaceState(g.window.history.state,null,h)}}function Fr(x,h){const v=x.getCenter(),S=Math.round(100*x.getZoom())/100,D=Math.ceil((S*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,D),F=Math.round(v.lng*k)/k,B=Math.round(v.lat*k)/k,V=x.getBearing(),X=x.getPitch();let q=h?`/${F}/${B}/${S}`:`${S}/${B}/${F}`;return(V||X)&&(q+="/"+Math.round(10*V)/10),X&&(q+=`/${Math.round(X)}`),q}const Ri={linearity:.3,easing:g.bezier(0,0,.3,1)},Wi=g.extend({deceleration:2500,maxSpeed:1400},Ri),Es=g.extend({deceleration:20,maxSpeed:1400},Ri),Sr=g.extend({deceleration:1e3,maxSpeed:360},Ri),mo=g.extend({deceleration:1e3,maxSpeed:90},Ri);class ph{constructor(h){this._map=h,this.clear()}clear(){this._inertiaBuffer=[]}record(h){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.exported.now(),settings:h})}_drainInertiaBuffer(){const h=this._inertiaBuffer,v=g.exported.now();for(;h.length>0&&v-h[0].time>160;)h.shift()}_onMoveEnd(h){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const v={zoom:0,bearing:0,pitch:0,pan:new g.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)v.zoom+=k.zoomDelta||0,v.bearing+=k.bearingDelta||0,v.pitch+=k.pitchDelta||0,k.panDelta&&v.pan._add(k.panDelta),k.around&&(v.around=k.around),k.pinchAround&&(v.pinchAround=k.pinchAround);const S=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(v.pan.mag()){const k=Cs(v.pan.mag(),S,g.extend({},Wi,h||{}));D.offset=v.pan.mult(k.amount/v.pan.mag()),D.center=this._map.transform.center,Xs(D,k)}if(v.zoom){const k=Cs(v.zoom,S,Es);D.zoom=this._map.transform.zoom+k.amount,Xs(D,k)}if(v.bearing){const k=Cs(v.bearing,S,Sr);D.bearing=this._map.transform.bearing+g.clamp(k.amount,-179,179),Xs(D,k)}if(v.pitch){const k=Cs(v.pitch,S,mo);D.pitch=this._map.transform.pitch+k.amount,Xs(D,k)}if(D.zoom||D.bearing){const k=void 0===v.pinchAround?v.around:v.pinchAround;D.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),D.noMoveStart=!0,D}}function Xs(x,h){(!x.duration||x.duration<h.duration)&&(x.duration=h.duration,x.easing=h.easing)}function Cs(x,h,v){const{maxSpeed:S,linearity:D,deceleration:k}=v,F=g.clamp(x*D/(h/1e3),-S,S),B=Math.abs(F)/(k*D);return{easing:v.easing,duration:1e3*B,amount:F*(B/2)}}class za extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,v,S,D={}){const k=Q(v.getCanvasContainer(),S),F=v.unproject(k);super(h,g.extend({point:k,lngLat:F,originalEvent:S},D)),this._defaultPrevented=!1,this.target=v}}class Ti extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,v,S){const D="touchend"===h?S.changedTouches:S.touches,k=ne(v.getCanvasContainer(),D),F=k.map(V=>v.unproject(V)),B=k.reduce((V,X,q,fe)=>V.add(X.div(fe.length)),new g.Point(0,0));super(h,{points:k,point:B,lngLats:F,lngLat:v.unproject(B),originalEvent:S}),this._defaultPrevented=!1}}class mh extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,v,S){super(h,{originalEvent:S}),this._defaultPrevented=!1}}class Vh{constructor(h,v){this._map=h,this._clickTolerance=v.clickTolerance}reset(){this._mousedownPos=void 0}wheel(h){return this._firePreventable(new mh(h.type,this._map,h))}mousedown(h,v){return this._mousedownPos=v,this._firePreventable(new za(h.type,this._map,h))}mouseup(h){this._map.fire(new za(h.type,this._map,h))}preclick(h){const v=g.extend({},h);v.type="preclick",this._map.fire(new za(v.type,this._map,v))}click(h,v){this._mousedownPos&&this._mousedownPos.dist(v)>=this._clickTolerance||(this.preclick(h),this._map.fire(new za(h.type,this._map,h)))}dblclick(h){return this._firePreventable(new za(h.type,this._map,h))}mouseover(h){this._map.fire(new za(h.type,this._map,h))}mouseout(h){this._map.fire(new za(h.type,this._map,h))}touchstart(h){return this._firePreventable(new Ti(h.type,this._map,h))}touchmove(h){this._map.fire(new Ti(h.type,this._map,h))}touchend(h){this._map.fire(new Ti(h.type,this._map,h))}touchcancel(h){this._map.fire(new Ti(h.type,this._map,h))}_firePreventable(h){if(this._map.fire(h),h.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gh{constructor(h){this._map=h}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(h){this._map.fire(new za(h.type,this._map,h))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new za("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(h){this._delayContextMenu?this._contextMenuEvent=h:this._map.fire(new za(h.type,this._map,h)),this._map.listens("contextmenu")&&h.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wa{constructor(h,v){this._map=h,this._el=h.getCanvasContainer(),this._container=h.getContainer(),this._clickTolerance=v.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(h,v){this.isEnabled()&&h.shiftKey&&0===h.button&&(Bt(),this._startPos=this._lastPos=v,this._active=!0)}mousemoveWindow(h,v){if(!this._active)return;const S=v,D=this._startPos,k=this._lastPos;if(!D||!k||k.equals(S)||!this._box&&S.dist(D)<this._clickTolerance)return;this._lastPos=S,this._box||(this._box=ht("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",h));const F=Math.min(D.x,S.x),B=Math.max(D.x,S.x),V=Math.min(D.y,S.y),X=Math.max(D.y,S.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${F}px,${V}px)`,this._box.style.width=B-F+"px",this._box.style.height=X-V+"px")})}mouseupWindow(h,v){if(!this._active)return;const S=this._startPos,D=v;if(S&&0===h.button){if(this.reset(),te(),S.x!==D.x||S.y!==D.y)return this._map.fire(new g.Event("boxzoomend",{originalEvent:h})),{cameraAnimation:k=>k.fitScreenCoordinates(S,D,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",h)}}keydown(h){this._active&&27===h.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",h))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ce(),delete this._startPos,delete this._lastPos}_fireEvent(h,v){return this._map.fire(new g.Event(h,{originalEvent:v}))}}function Tl(x,h){const v={};for(let S=0;S<x.length;S++)v[x[S].identifier]=h[S];return v}class Yl{constructor(h){this.reset(),this.numTouches=h.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(h,v,S){(this.centroid||S.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=h.timeStamp),S.length===this.numTouches&&(this.centroid=function(D){const k=new g.Point(0,0);for(const F of D)k._add(F);return k.div(D.length)}(v),this.touches=Tl(S,v)))}touchmove(h,v,S){if(this.aborted||!this.centroid)return;const D=Tl(S,v);for(const k in this.touches){const F=D[k];(!F||F.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(h,v,S){if((!this.centroid||h.timeStamp-this.startTime>500)&&(this.aborted=!0),0===S.length){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class Fl{constructor(h){this.singleTap=new Yl(h),this.numTaps=h.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(h,v,S){this.singleTap.touchstart(h,v,S)}touchmove(h,v,S){this.singleTap.touchmove(h,v,S)}touchend(h,v,S){const D=this.singleTap.touchend(h,v,S);if(D){const k=h.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(D)<30;if(k&&F||this.reset(),this.count++,this.lastTime=h.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class md{constructor(){this._zoomIn=new Fl({numTouches:1,numTaps:2}),this._zoomOut=new Fl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(h,v,S){this._zoomIn.touchstart(h,v,S),this._zoomOut.touchstart(h,v,S)}touchmove(h,v,S){this._zoomIn.touchmove(h,v,S),this._zoomOut.touchmove(h,v,S)}touchend(h,v,S){const D=this._zoomIn.touchend(h,v,S),k=this._zoomOut.touchend(h,v,S);return D?(this._active=!0,h.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(D)},{originalEvent:h})}):k?(this._active=!0,h.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(k)},{originalEvent:h})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Uh={0:1,2:2};class ul{constructor(h){this.reset(),this._clickTolerance=h.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(h,v){return!1}_move(h,v){return{}}mousedown(h,v){if(this._lastPoint)return;const S=Re(h);this._correctButton(h,S)&&(this._lastPoint=v,this._eventButton=S)}mousemoveWindow(h,v){const S=this._lastPoint;if(S)if(h.preventDefault(),null!=this._eventButton&&function(D,k){const F=Uh[k];return void 0===D.buttons||(D.buttons&F)!==F}(h,this._eventButton))this.reset();else if(this._moved||!(v.dist(S)<this._clickTolerance))return this._moved=!0,this._lastPoint=v,this._move(S,v)}mouseupWindow(h){this._lastPoint&&Re(h)===this._eventButton&&(this._moved&&te(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cc extends ul{mousedown(h,v){super.mousedown(h,v),this._lastPoint&&(this._active=!0)}_correctButton(h,v){return 0===v&&!h.ctrlKey}_move(h,v){return{around:v,panDelta:v.sub(h)}}}class du extends ul{_correctButton(h,v){return 0===v&&h.ctrlKey||2===v}_move(h,v){const S=.8*(v.x-h.x);if(S)return this._active=!0,{bearingDelta:S}}contextmenu(h){h.preventDefault()}}class Dc extends ul{_correctButton(h,v){return 0===v&&h.ctrlKey||2===v}_move(h,v){const S=-.5*(v.y-h.y);if(S)return this._active=!0,{pitchDelta:S}}contextmenu(h){h.preventDefault()}}class Mr{constructor(h,v){this._map=h,this._el=h.getCanvasContainer(),this._minTouches=1,this._clickTolerance=v.clickTolerance||1,this.reset(),g.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new g.Point(0,0)}touchstart(h,v,S){return this._calculateTransform(h,v,S)}touchmove(h,v,S){if(this._active&&!(S.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===S.length&&!g.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return h.cancelable&&h.preventDefault(),this._calculateTransform(h,v,S)}}touchend(h,v,S){this._calculateTransform(h,v,S),this._active&&S.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(h,v,S){S.length>0&&(this._active=!0);const D=Tl(S,v),k=new g.Point(0,0),F=new g.Point(0,0);let B=0;for(const X in D){const q=D[X],fe=this._touches[X];fe&&(k._add(q),F._add(q.sub(fe)),B++,D[X]=q)}if(this._touches=D,B<this._minTouches||!F.mag())return;const V=F.div(B);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(B),panDelta:V}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ht("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class fu{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(h){}_move(h,v,S){return{}}touchstart(h,v,S){this._firstTwoTouches||S.length<2||(this._firstTwoTouches=[S[0].identifier,S[1].identifier],this._start([v[0],v[1]]))}touchmove(h,v,S){const D=this._firstTwoTouches;if(!D)return;h.preventDefault();const[k,F]=D,B=pu(S,v,k),V=pu(S,v,F);if(!B||!V)return;const X=this._aroundCenter?null:B.add(V).div(2);return this._move([B,V],X,h)}touchend(h,v,S){if(!this._firstTwoTouches)return;const[D,k]=this._firstTwoTouches,F=pu(S,v,D),B=pu(S,v,k);F&&B||(this._active&&te(),this.reset())}touchcancel(){this.reset()}enable(h){this._enabled=!0,this._aroundCenter=!!h&&"center"===h.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function pu(x,h,v){for(let S=0;S<x.length;S++)if(x[S].identifier===v)return h[S]}function ku(x,h){return Math.log(x/h)/Math.LN2}class ga extends fu{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(h){this._startDistance=this._distance=h[0].dist(h[1])}_move(h,v){const S=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(ku(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ku(this._distance,S),pinchAround:v}}}function gd(x,h){return 180*x.angleWith(h)/Math.PI}class Ja extends fu{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])}_move(h,v){const S=this._vector;if(this._vector=h[0].sub(h[1]),S&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:gd(this._vector,S),pinchAround:v}}_isBelowThreshold(h){this._minDiameter=Math.min(this._minDiameter,h.mag());const v=25/(Math.PI*this._minDiameter)*360,S=this._startVector;if(!S)return!1;const D=gd(h,S);return Math.abs(D)<v}}function ko(x){return Math.abs(x.y)>Math.abs(x.x)}class vl extends fu{constructor(h){super(),this._map=h}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(h){this._lastPoints=h,ko(h[0].sub(h[1]))&&(this._valid=!1)}_move(h,v,S){const D=this._lastPoints;if(!D)return;const k=h[0].sub(D[0]),F=h[1].sub(D[1]);return this._map._cooperativeGestures&&!g.isFullscreen()&&S.touches.length<3||(this._valid=this.gestureBeginsVertically(k,F,S.timeStamp),!this._valid)?void 0:(this._lastPoints=h,this._active=!0,{pitchDelta:(k.y+F.y)/2*-.5})}gestureBeginsVertically(h,v,S){if(void 0!==this._valid)return this._valid;const D=h.mag()>=2,k=v.mag()>=2;if(!D&&!k)return;if(!D||!k)return null==this._firstMove&&(this._firstMove=S),S-this._firstMove<100&&void 0;const F=h.y>0==v.y>0;return ko(h)&&ko(v)&&F}}const Sf={panStep:100,bearingStep:15,pitchStep:10};class c{constructor(){const h=Sf;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(h){if(h.altKey||h.ctrlKey||h.metaKey)return;let v=0,S=0,D=0,k=0,F=0;switch(h.keyCode){case 61:case 107:case 171:case 187:v=1;break;case 189:case 109:case 173:v=-1;break;case 37:h.shiftKey?S=-1:(h.preventDefault(),k=-1);break;case 39:h.shiftKey?S=1:(h.preventDefault(),k=1);break;case 38:h.shiftKey?D=1:(h.preventDefault(),F=-1);break;case 40:h.shiftKey?D=-1:(h.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(S=0,D=0),{cameraAnimation:B=>{const V=B.getZoom();B.easeTo({duration:300,easeId:"keyboardHandler",easing:f,zoom:v?Math.round(V)+v*(h.shiftKey?2:1):V,bearing:B.getBearing()+S*this._bearingStep,pitch:B.getPitch()+D*this._pitchStep,offset:[-k*this._panStep,-F*this._panStep],center:B.getCenter()},{originalEvent:h})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function f(x){return x*(2-x)}const b=4.000244140625;class w{constructor(h,v){this._map=h,this._el=h.getCanvasContainer(),this._handler=v,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,g.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(h){this._defaultZoomRate=h}setWheelZoomRate(h){this._wheelZoomRate=h}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(h){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!h&&"center"===h.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(h){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(h.ctrlKey||h.metaKey||this.isZooming()||g.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let v=h.deltaMode===g.window.WheelEvent.DOM_DELTA_LINE?40*h.deltaY:h.deltaY;const S=g.exported.now(),D=S-(this._lastWheelEventTime||0);this._lastWheelEventTime=S,0!==v&&v%b==0?this._type="wheel":0!==v&&Math.abs(v)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=v,this._timeout=setTimeout(this._onTimeout,40,h)):this._type||(this._type=Math.abs(D*v)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,v+=this._lastValue)),h.shiftKey&&v&&(v/=4),this._type&&(this._lastWheelEvent=h,this._delta-=v,this._active||this._start(h)),h.preventDefault()}_onTimeout(h){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)}_start(h){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const v=Q(this._el,h);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:v,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const h=this._map.transform;"wheel"===this._type&&h.projection.wrap&&(h._center.lng>=180||h._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const v=()=>h._terrainEnabled()&&this._aroundCoord?h.computeZoomRelativeTo(this._aroundCoord):h.zoom;if(0!==this._delta){const V="wheel"===this._type&&Math.abs(this._delta)>b?this._wheelZoomRate:this._defaultZoomRate;let X=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&0!==X&&(X=1/X);const q=v(),fe=Math.pow(2,q),Ve="number"==typeof this._targetZoom?h.zoomScale(this._targetZoom):fe;this._targetZoom=Math.min(h.maxZoom,Math.max(h.minZoom,h.scaleZoom(Ve*X))),"wheel"===this._type&&(this._startZoom=q,this._easing=this._smoothOutEasing(200)),this._delta=0}const S="number"==typeof this._targetZoom?this._targetZoom:v(),D=this._startZoom,k=this._easing;let F,B=!1;if("wheel"===this._type&&D&&k){const V=Math.min((g.exported.now()-this._lastWheelEventTime)/200,1),X=k(V);F=g.number(D,S,X),V<1?this._frameId||(this._frameId=!0):B=!0}else F=S,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:F-v(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(h){let v=g.ease;if(this._prevEase){const S=this._prevEase,D=(g.exported.now()-S.start)/S.duration,k=S.easing(D+.01)-S.easing(D),F=.27/Math.sqrt(k*k+1e-4)*.01,B=Math.sqrt(.0729-F*F);v=g.bezier(F,B,.25,1)}return this._prevEase={start:g.exported.now(),duration:h,easing:v},v}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ht("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(g.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class M{constructor(h,v){this._clickZoom=h,this._tapZoom=v}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class z{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(h,v){return h.preventDefault(),{cameraAnimation:S=>{S.easeTo({duration:300,zoom:S.getZoom()+(h.shiftKey?-1:1),around:S.unproject(v)},{originalEvent:h})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class j{constructor(){this._tap=new Fl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(h,v,S){this._swipePoint||(this._tapTime&&h.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?S.length>0&&(this._swipePoint=v[0],this._swipeTouch=S[0].identifier):this._tap.touchstart(h,v,S))}touchmove(h,v,S){if(this._tapTime){if(this._swipePoint){if(S[0].identifier!==this._swipeTouch)return;const D=v[0],k=D.y-this._swipePoint.y;return this._swipePoint=D,h.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(h,v,S)}touchend(h,v,S){this._tapTime?this._swipePoint&&0===S.length&&this.reset():this._tap.touchend(h,v,S)&&(this._tapTime=h.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ee{constructor(h,v,S){this._el=h,this._mousePan=v,this._touchPan=S}enable(h){this._inertiaOptions=h||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class at{constructor(h,v,S){this._pitchWithRotate=h.pitchWithRotate,this._mouseRotate=v,this._mousePitch=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ut{constructor(h,v,S,D){this._el=h,this._touchZoom=v,this._touchRotate=S,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(h){this._touchZoom.enable(h),this._rotationDisabled||this._touchRotate.enable(h),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const gn=x=>x.zoom||x.drag||x.pitch||x.rotate;class Rn extends g.Event{}class Ir{constructor(){this.constants=[1,1,.01],this.radius=0}setup(h,v){const S=g.sub([],v,h);this.radius=g.length(S[2]<0?g.div([],S,this.constants):[S[0],S[1],0])}projectRay(h){g.div(h,h,this.constants),g.normalize(h,h),g.mul$1(h,h,this.constants);const v=g.scale$2([],h,this.radius);if(v[2]>0){const S=g.scale$2([],[0,0,1],g.dot(v,[0,0,1])),D=g.scale$2([],g.normalize([],[v[0],v[1],0]),this.radius),k=g.add([],v,g.scale$2([],g.sub([],g.add([],D,S),v),2));v[0]=k[0],v[1]=k[1]}return v}}function wr(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class $r{constructor(h,v){this._map=h,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ph(h),this._bearingSnap=v.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ir,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(v),g.bindAll(["handleEvent","handleWindowEvent"],this);const S=this._el;this._listeners=[[S,"touchstart",{passive:!0}],[S,"touchmove",{passive:!1}],[S,"touchend",void 0],[S,"touchcancel",void 0],[S,"mousedown",void 0],[S,"mousemove",void 0],[S,"mouseup",void 0],[g.window.document,"mousemove",{capture:!0}],[g.window.document,"mouseup",void 0],[S,"mouseover",void 0],[S,"mouseout",void 0],[S,"dblclick",void 0],[S,"click",void 0],[S,"keydown",{capture:!1}],[S,"keyup",void 0],[S,"wheel",{passive:!1}],[S,"contextmenu",void 0],[g.window,"blur",void 0]];for(const[D,k,F]of this._listeners)D.addEventListener(k,D===g.window.document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[h,v,S]of this._listeners)h.removeEventListener(v,h===g.window.document?this.handleWindowEvent:this.handleEvent,S)}_addDefaultHandlers(h){const v=this._map,S=v.getCanvasContainer();this._add("mapEvent",new Vh(v,h));const D=v.boxZoom=new Wa(v,h);this._add("boxZoom",D);const k=new md,F=new z;v.doubleClickZoom=new M(F,k),this._add("tapZoom",k),this._add("clickZoom",F);const B=new j;this._add("tapDragZoom",B);const V=v.touchPitch=new vl(v);this._add("touchPitch",V);const X=new du(h),q=new Dc(h);v.dragRotate=new at(h,X,q),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);const fe=new cc(h),Ve=new Mr(v,h);v.dragPan=new Ee(S,fe,Ve),this._add("mousePan",fe),this._add("touchPan",Ve,["touchZoom","touchRotate"]);const Ye=new Ja,it=new ga;v.touchZoomRotate=new Ut(S,it,Ye,B),this._add("touchRotate",Ye,["touchPan","touchZoom"]),this._add("touchZoom",it,["touchPan","touchRotate"]),this._add("blockableMapEvent",new gh(v));const st=v.scrollZoom=new w(v,this);this._add("scrollZoom",st,["mousePan"]);const ft=v.keyboard=new c;this._add("keyboard",ft);for(const ge of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])h.interactive&&h[ge]&&v[ge].enable(h[ge])}_add(h,v,S){this._handlers.push({handlerName:h,handler:v,allowed:S}),this._handlersById[h]=v}stop(h){if(!this._updatingCamera){for(const{handler:v}of this._handlers)v.reset();this._inertia.clear(),this._fireEvents({},{},h),this._changes=[]}}isActive(){for(const{handler:h}of this._handlers)if(h.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gn(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(h,v,S){for(const D in h)if(D!==S&&(!v||v.indexOf(D)<0))return!0;return!1}handleWindowEvent(h){this.handleEvent(h,`${h.type}Window`)}_getMapTouches(h){const v=[];for(const S of h)this._el.contains(S.target)&&v.push(S);return v}handleEvent(h,v){this._updatingCamera=!0;const S="renderFrame"===h.type,D=S?void 0:h,k={needsRenderFrame:!1},F={},B={},V=h.touches?this._getMapTouches(h.touches):void 0,X=V?ne(this._el,V):S?void 0:Q(this._el,h);for(const{handlerName:Ve,handler:Ye,allowed:it}of this._handlers){if(!Ye.isEnabled())continue;let st;this._blockedByActive(B,it,Ve)?Ye.reset():Ye[v||h.type]&&(st=Ye[v||h.type](h,X,V),this.mergeHandlerResult(k,F,st,Ve,D),st&&st.needsRenderFrame&&this._triggerRenderFrame()),(st||Ye.isActive())&&(B[Ve]=Ye)}const q={};for(const Ve in this._previousActiveHandlers)B[Ve]||(q[Ve]=D);this._previousActiveHandlers=B,(Object.keys(q).length||wr(k))&&(this._changes.push([k,F,q]),this._triggerRenderFrame()),(Object.keys(B).length||wr(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:fe}=k;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))}mergeHandlerResult(h,v,S,D,k){if(!S)return;g.extend(h,S);const F={handlerName:D,originalEvent:S.originalEvent||k};void 0!==S.zoomDelta&&(v.zoom=F),void 0!==S.panDelta&&(v.drag=F),void 0!==S.pitchDelta&&(v.pitch=F),void 0!==S.bearingDelta&&(v.rotate=F)}_applyChanges(){const h={},v={},S={};for(const[D,k,F]of this._changes)D.panDelta&&(h.panDelta=(h.panDelta||new g.Point(0,0))._add(D.panDelta)),D.zoomDelta&&(h.zoomDelta=(h.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(h.bearingDelta=(h.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(h.pitchDelta=(h.pitchDelta||0)+D.pitchDelta),void 0!==D.around&&(h.around=D.around),void 0!==D.aroundCoord&&(h.aroundCoord=D.aroundCoord),void 0!==D.pinchAround&&(h.pinchAround=D.pinchAround),D.noInertia&&(h.noInertia=D.noInertia),g.extend(v,k),g.extend(S,F);this._updateMapTransform(h,v,S),this._changes=[]}_updateMapTransform(h,v,S){const D=this._map,k=D.transform,F=Ke=>[Ke.x,Ke.y,Ke.z];if((Ke=>{const wt=this._eventsInProgress.drag;return wt&&!this._handlersById[wt.handlerName].isActive()})()&&!wr(h)){const Ke=k.zoom;k.cameraElevationReference="sea",k.recenterOnTerrain(),k.cameraElevationReference="ground",Ke!==k.zoom&&this._map._update(!0)}if(k._isCameraConstrained&&D._stop(!0),!wr(h))return void this._fireEvents(v,S,!0);let{panDelta:B,zoomDelta:V,bearingDelta:X,pitchDelta:q,around:fe,aroundCoord:Ve,pinchAround:Ye}=h;k._isCameraConstrained&&(V>0&&(V=0),k._isCameraConstrained=!1),void 0!==Ye&&(fe=Ye),(V||(Ke=>v.drag&&!this._eventsInProgress.drag)())&&fe&&(this._dragOrigin=F(k.pointCoordinate3D(fe)),this._trackingEllipsoid.setup(k._camera.position,this._dragOrigin)),k.cameraElevationReference="sea",D._stop(!0),fe=fe||D.transform.centerPoint,X&&(k.bearing+=X),q&&(k.pitch+=q),k._updateCameraState();const it=[0,0,0];if(B)if("mercator"===k.projection.name){const Ke=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(fe).dir),wt=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(fe.sub(B)).dir);it[0]=wt[0]-Ke[0],it[1]=wt[1]-Ke[1]}else{const Ke=k.pointCoordinate(fe);if("globe"===k.projection.name){B=B.rotate(-k.angle);const wt=k._pixelsPerMercatorPixel/k.worldSize;it[0]=-B.x*g.mercatorScale(g.latFromMercatorY(Ke.y))*wt,it[1]=-B.y*g.mercatorScale(k.center.lat)*wt}else{const wt=k.pointCoordinate(fe.sub(B));Ke&&wt&&(it[0]=wt.x-Ke.x,it[1]=wt.y-Ke.y)}}const st=k.zoom,ft=[0,0,0];if(V){const Ke=F(Ve||k.pointCoordinate3D(fe)),wt={dir:g.normalize([],g.sub([],Ke,k._camera.position))};if(wt.dir[2]<0){const St=k.zoomDeltaToMovement(Ke,V);g.scale$2(ft,wt.dir,St)}}const ge=g.add(it,it,ft);k._translateCameraConstrained(ge),V&&Math.abs(k.zoom-st)>1e-4&&k.recenterOnTerrain(),k.cameraElevationReference="ground",this._map._update(),h.noInertia||this._inertia.record(h),this._fireEvents(v,S,!0)}_fireEvents(h,v,S){const D=gn(this._eventsInProgress),k=gn(h),F={};for(const q in h){const{originalEvent:fe}=h[q];this._eventsInProgress[q]||(F[`${q}start`]=fe),this._eventsInProgress[q]=h[q]}!D&&k&&this._fireEvent("movestart",k.originalEvent);for(const q in F)this._fireEvent(q,F[q]);k&&this._fireEvent("move",k.originalEvent);for(const q in h){const{originalEvent:fe}=h[q];this._fireEvent(q,fe)}const B={};let V;for(const q in this._eventsInProgress){const{handlerName:fe,originalEvent:Ve}=this._eventsInProgress[q];this._handlersById[fe].isActive()||(delete this._eventsInProgress[q],V=v[fe]||Ve,B[`${q}end`]=V)}for(const q in B)this._fireEvent(q,B[q]);const X=gn(this._eventsInProgress);if(S&&(D||k)&&!X){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fe=Ve=>0!==Ve&&-this._bearingSnap<Ve&&Ve<this._bearingSnap;q?(fe(q.bearing||this._map.getBearing())&&(q.bearing=0),this._map.easeTo(q,{originalEvent:V})):(this._map.fire(new g.Event("moveend",{originalEvent:V})),fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(h,v){this._map.fire(new g.Event(h,v?{originalEvent:v}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(h=>{this._frameId=void 0,this.handleEvent(new Rn("renderFrame",{timeStamp:h})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const fi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Eo extends g.Evented{constructor(h,v){super(),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=v.bearingSnap,this._respectPrefersReducedMotion=!1!==v.respectPrefersReducedMotion,g.bindAll(["_renderFrameCallback"],this)}getCenter(){return new g.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(h,v){return this.jumpTo({center:h},v)}panBy(h,v,S){return h=g.Point.convert(h).mult(-1),this.panTo(this.transform.center,g.extend({offset:h},v),S)}panTo(h,v,S){return this.easeTo(g.extend({center:h},v),S)}getZoom(){return this.transform.zoom}setZoom(h,v){return this.jumpTo({zoom:h},v),this}zoomTo(h,v,S){return this.easeTo(g.extend({zoom:h},v),S)}zoomIn(h,v){return this.zoomTo(this.getZoom()+1,h,v),this}zoomOut(h,v){return this.zoomTo(this.getZoom()-1,h,v),this}getBearing(){return this.transform.bearing}setBearing(h,v){return this.jumpTo({bearing:h},v),this}getPadding(){return this.transform.padding}setPadding(h,v){return this.jumpTo({padding:h},v),this}rotateTo(h,v,S){return this.easeTo(g.extend({bearing:h},v),S)}resetNorth(h,v){return this.rotateTo(0,g.extend({duration:1e3},h),v),this}resetNorthPitch(h,v){return this.easeTo(g.extend({bearing:0,pitch:0,duration:1e3},h),v),this}snapToNorth(h,v){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,v):this}getPitch(){return this.transform.pitch}setPitch(h,v){return this.jumpTo({pitch:h},v),this}cameraForBounds(h,v){h=g.LngLatBounds.convert(h);const S=v&&v.bearing||0,D=v&&v.pitch||0,k=h.getNorthWest(),F=h.getSouthEast();return this._cameraForBounds(this.transform,k,F,S,D,v)}_extendCameraOptions(h){const v={top:0,bottom:0,right:0,left:0};if("number"==typeof(h=g.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding){const S=h.padding;h.padding={top:S,bottom:S,right:S,left:S}}return h.padding=g.extend(v,h.padding),h}_minimumAABBFrustumDistance(h,v){const S=v.max[0]-v.min[0],D=v.max[1]-v.min[1];return S/D>h.aspect?S/(2*Math.tan(.5*h.fovX)*h.aspect):D/(2*Math.tan(.5*h.fovY)*h.aspect)}_cameraForBoundsOnGlobe(h,v,S,D,k,F){const B=h.clone(),V=this._extendCameraOptions(F);B.bearing=D,B.pitch=k;const X=g.LngLat.convert(v),q=g.LngLat.convert(S),fe=.5*(X.lat+q.lat),Ve=.5*(X.lng+q.lng),Ye=g.latLngToECEF(fe,Ve),it=g.normalize([],Ye),st=g.normalize([],g.cross([],it,[0,1,0])),ft=g.cross([],st,it),ge=[st[0],st[1],st[2],0,ft[0],ft[1],ft[2],0,it[0],it[1],it[2],0,0,0,0,1],Ke=[Ye,g.latLngToECEF(X.lat,X.lng),g.latLngToECEF(q.lat,X.lng),g.latLngToECEF(q.lat,q.lng),g.latLngToECEF(X.lat,q.lng),g.latLngToECEF(fe,X.lng),g.latLngToECEF(fe,q.lng),g.latLngToECEF(X.lat,Ve),g.latLngToECEF(q.lat,Ve)];let wt=g.Aabb.fromPoints(Ke.map(Jn=>[g.dot(st,Jn),g.dot(ft,Jn),g.dot(it,Jn)]));const St=g.transformMat4([],wt.center,ge);0===g.squaredLength(St)&&g.set(St,0,0,1),g.normalize(St,St),g.scale$2(St,St,g.GLOBE_RADIUS),B.center=g.ecefToLatLng(St);const Ht=B.getWorldToCameraMatrix(),qt=g.invert(new Float64Array(16),Ht);wt=g.Aabb.applyTransform(wt,g.multiply([],Ht,ge)),g.transformMat4(St,St,Ht);const Gt=.5*(wt.max[2]-wt.min[2]),rn=this._minimumAABBFrustumDistance(B,wt),Jt=g.scale$2([],[0,0,1],Gt),wn=g.add(Jt,St,Jt),ur=rn+(0===B.pitch?0:g.distance(St,wn)),mn=B.globeCenterInViewSpace,Gn=g.sub([],St,[mn[0],mn[1],mn[2]]);g.normalize(Gn,Gn),g.scale$2(Gn,Gn,ur);const Dn=g.add([],St,Gn);g.transformMat4(Dn,Dn,qt);const ar=g.earthRadius/g.GLOBE_RADIUS,bn=g.length(Dn),Un=g.mercatorZfromAltitude(Math.max(bn*ar-g.earthRadius,Number.EPSILON),0),cr=Math.min(B.zoomFromMercatorZAdjusted(Un),V.maxZoom);return cr>.5*(g.GLOBE_ZOOM_THRESHOLD_MIN+g.GLOBE_ZOOM_THRESHOLD_MAX)?(B.setProjection({name:"mercator"}),B.zoom=cr,this._cameraForBounds(B,v,S,D,k,F)):{center:B.center,zoom:cr,bearing:D,pitch:k}}queryTerrainElevation(h,v){const S=this.transform.elevation;return S?(v=g.extend({},{exaggerated:!0},v),S.getAtPoint(g.MercatorCoordinate.fromLngLat(h),null,v.exaggerated)):null}_cameraForBounds(h,v,S,D,k,F){if("globe"===h.projection.name)return this._cameraForBoundsOnGlobe(h,v,S,D,k,F);const B=h.clone(),V=this._extendCameraOptions(F),X=B.padding;B.bearing=D,B.pitch=k;const q=g.LngLat.convert(v),fe=g.LngLat.convert(S),Ve=new g.LngLat(q.lng,fe.lat),Ye=new g.LngLat(fe.lng,q.lat),it=B.project(q),st=B.project(fe),ft=this.queryTerrainElevation(q),ge=this.queryTerrainElevation(fe),Ke=this.queryTerrainElevation(Ve),wt=this.queryTerrainElevation(Ye),St=[[it.x,it.y,Math.min(ft||0,ge||0,Ke||0,wt||0)],[st.x,st.y,Math.max(ft||0,ge||0,Ke||0,wt||0)]];let Ht=g.Aabb.fromPoints(St);const qt=B.getWorldToCameraMatrix(),Gt=g.invert(new Float64Array(16),qt);Ht=g.Aabb.applyTransform(Ht,qt);const rn=g.sub([],Ht.max,Ht.min),Jt=X.left||0,wn=X.right||0,ur=X.bottom||0,mn=X.top||0,{left:Gn,right:Dn,top:ar,bottom:bn}=V.padding,Un=.5*(Jt+wn),cr=.5*(mn+ur),Jn=Math.min(B.scaleZoom(B.scale*Math.min((B.width-(Jt+wn+Gn+Dn))/rn[0],(B.height-(ur+mn+bn+ar))/rn[1])),V.maxZoom),hr=B.scale/B.zoomScale(Jn);Ht=new g.Aabb([Ht.min[0]-(Gn+Un)*hr,Ht.min[1]-(bn+cr)*hr,Ht.min[2]],[Ht.max[0]+(Dn+Un)*hr,Ht.max[1]+(ar+cr)*hr,Ht.max[2]]);const vi=.5*rn[2],Ui=this._minimumAABBFrustumDistance(B,Ht),Wr=[0,0,1,0];g.transformMat4$1(Wr,Wr,qt),g.normalize$2(Wr,Wr);const ei=g.scale$2([],Wr,Ui+vi),co=g.add([],Ht.center,ei),uo=("number"==typeof V.offset.x&&"number"==typeof V.offset.y?new g.Point(V.offset.x,V.offset.y):g.Point.convert(V.offset)).rotate(-g.degToRad(D));Ht.center[0]-=uo.x*hr,Ht.center[1]+=uo.y*hr,g.transformMat4(Ht.center,Ht.center,Gt),g.transformMat4(co,co,Gt);const hi=[Ht.center[0],Ht.center[1],co[2]*B.pixelsPerMeter];g.scale$2(hi,hi,1/B.worldSize);const ms=g.lngFromMercatorX(hi[0]),zs=g.latFromMercatorY(hi[1]),Zs=Math.min(B._zoomFromMercatorZ(hi[2]),V.maxZoom),Ms=new g.LngLat(ms,zs);return B.mercatorFromTransition&&Zs<.5*(g.GLOBE_ZOOM_THRESHOLD_MIN+g.GLOBE_ZOOM_THRESHOLD_MAX)?(B.setProjection({name:"globe"}),B.zoom=Zs,this._cameraForBounds(B,v,S,D,k,F)):{center:Ms,zoom:Zs,bearing:D,pitch:k}}fitBounds(h,v,S){const D=this.cameraForBounds(h,v);return this._fitInternal(D,v,S)}fitScreenCoordinates(h,v,S,D,k){const F=g.Point.convert(h),B=g.Point.convert(v),V=new g.Point(Math.min(F.x,B.x),Math.min(F.y,B.y)),X=new g.Point(Math.max(F.x,B.x),Math.max(F.y,B.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(F,B))return this;const q=this.transform.pointLocation3D(V),fe=this.transform.pointLocation3D(X),Ve=this.transform.pointLocation3D(new g.Point(V.x,X.y)),Ye=this.transform.pointLocation3D(new g.Point(X.x,V.y)),it=[Math.min(q.lng,fe.lng,Ve.lng,Ye.lng),Math.min(q.lat,fe.lat,Ve.lat,Ye.lat)],st=[Math.max(q.lng,fe.lng,Ve.lng,Ye.lng),Math.max(q.lat,fe.lat,Ve.lat,Ye.lat)],ft=D&&D.pitch?D.pitch:this.getPitch(),ge=this._cameraForBounds(this.transform,it,st,S,ft,D);return this._fitInternal(ge,D,k)}_fitInternal(h,v,S){return h?(delete(v=g.extend(h,v)).padding,v.linear?this.easeTo(v,S):this.flyTo(v,S)):this}jumpTo(h,v){this.stop();const S=h.preloadOnly?this.transform.clone():this.transform;let D=!1,k=!1,F=!1;return"zoom"in h&&S.zoom!==+h.zoom&&(D=!0,S.zoom=+h.zoom),void 0!==h.center&&(S.center=g.LngLat.convert(h.center)),"bearing"in h&&S.bearing!==+h.bearing&&(k=!0,S.bearing=+h.bearing),"pitch"in h&&S.pitch!==+h.pitch&&(F=!0,S.pitch=+h.pitch),null==h.padding||S.isPaddingEqual(h.padding)||(S.padding=h.padding),h.preloadOnly?(this._preloadTiles(S),this):(this.fire(new g.Event("movestart",v)).fire(new g.Event("move",v)),D&&this.fire(new g.Event("zoomstart",v)).fire(new g.Event("zoom",v)).fire(new g.Event("zoomend",v)),k&&this.fire(new g.Event("rotatestart",v)).fire(new g.Event("rotate",v)).fire(new g.Event("rotateend",v)),F&&this.fire(new g.Event("pitchstart",v)).fire(new g.Event("pitch",v)).fire(new g.Event("pitchend",v)),this.fire(new g.Event("moveend",v)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||g.warnOnce(fi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(h,v){const S=this.transform;if(!S.projection.supportsFreeCamera)return g.warnOnce(fi),this;this.stop();const D=S.zoom,k=S.pitch,F=S.bearing;S.setFreeCameraOptions(h);const B=D!==S.zoom,V=k!==S.pitch,X=F!==S.bearing;return this.fire(new g.Event("movestart",v)).fire(new g.Event("move",v)),B&&this.fire(new g.Event("zoomstart",v)).fire(new g.Event("zoom",v)).fire(new g.Event("zoomend",v)),X&&this.fire(new g.Event("rotatestart",v)).fire(new g.Event("rotate",v)).fire(new g.Event("rotateend",v)),V&&this.fire(new g.Event("pitchstart",v)).fire(new g.Event("pitch",v)).fire(new g.Event("pitchend",v)),this.fire(new g.Event("moveend",v)),this}easeTo(h,v){this._stop(!1,h.easeId),(!1===(h=g.extend({offset:[0,0],duration:500,easing:g.ease},h)).animate||this._prefersReducedMotion(h))&&(h.duration=0);const S=this.transform,D=this.getZoom(),k=this.getBearing(),F=this.getPitch(),B=this.getPadding(),V="zoom"in h?+h.zoom:D,X="bearing"in h?this._normalizeBearing(h.bearing,k):k,q="pitch"in h?+h.pitch:F,fe="padding"in h?h.padding:S.padding,Ve=g.Point.convert(h.offset);let Ye,it,st;if("globe"===S.projection.name){const Jt=g.MercatorCoordinate.fromLngLat(S.center),wn=Ve.rotate(-S.angle);Jt.x+=wn.x/S.worldSize,Jt.y+=wn.y/S.worldSize;const ur=Jt.toLngLat(),mn=g.LngLat.convert(h.center||ur);this._normalizeCenter(mn),Ye=S.centerPoint.add(wn),it=new g.Point(Jt.x,Jt.y).mult(S.worldSize),st=new g.Point(g.mercatorXfromLng(mn.lng),g.mercatorYfromLat(mn.lat)).mult(S.worldSize).sub(it)}else{Ye=S.centerPoint.add(Ve);const Jt=S.pointLocation(Ye),wn=g.LngLat.convert(h.center||Jt);this._normalizeCenter(wn),it=S.project(Jt),st=S.project(wn).sub(it)}const ft=S.zoomScale(V-D);let ge,Ke;h.around&&(ge=g.LngLat.convert(h.around),Ke=S.locationPoint(ge));const wt=this._zooming||V!==D,St=this._rotating||k!==X,Ht=this._pitching||q!==F,qt=!S.isPaddingEqual(fe),Gt=Jt=>wn=>{if(wt&&(Jt.zoom=g.number(D,V,wn)),St&&(Jt.bearing=g.number(k,X,wn)),Ht&&(Jt.pitch=g.number(F,q,wn)),qt&&(Jt.interpolatePadding(B,fe,wn),Ye=Jt.centerPoint.add(Ve)),ge)Jt.setLocationAtPoint(ge,Ke);else{const ur=Jt.zoomScale(Jt.zoom-D),mn=V>D?Math.min(2,ft):Math.max(.5,ft),Gn=Math.pow(mn,1-wn),Dn=Jt.unproject(it.add(st.mult(wn*Gn)).mult(ur));Jt.setLocationAtPoint(Jt.renderWorldCopies?Dn.wrap():Dn,Ye)}return h.preloadOnly||this._fireMoveEvents(v),Jt};if(h.preloadOnly){const Jt=this._emulate(Gt,h.duration,S);return this._preloadTiles(Jt),this}const rn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=wt,this._rotating=St,this._pitching=Ht,this._padding=qt,this._easeId=h.easeId,this._prepareEase(v,h.noMoveStart,rn),this._ease(Gt(S),Jt=>{S.recenterOnTerrain(),this._afterEase(v,Jt)},h),this}_prepareEase(h,v,S={}){this._moving=!0,this.transform.cameraElevationReference="sea",v||S.moving||this.fire(new g.Event("movestart",h)),this._zooming&&!S.zooming&&this.fire(new g.Event("zoomstart",h)),this._rotating&&!S.rotating&&this.fire(new g.Event("rotatestart",h)),this._pitching&&!S.pitching&&this.fire(new g.Event("pitchstart",h))}_fireMoveEvents(h){this.fire(new g.Event("move",h)),this._zooming&&this.fire(new g.Event("zoom",h)),this._rotating&&this.fire(new g.Event("rotate",h)),this._pitching&&this.fire(new g.Event("pitch",h))}_afterEase(h,v){if(this._easeId&&v&&this._easeId===v)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const S=this._zooming,D=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,S&&this.fire(new g.Event("zoomend",h)),D&&this.fire(new g.Event("rotateend",h)),k&&this.fire(new g.Event("pitchend",h)),this.fire(new g.Event("moveend",h))}flyTo(h,v){if(this._prefersReducedMotion(h)){const Jn=g.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Jn,v)}this.stop(),h=g.extend({offset:[0,0],speed:1.2,curve:1.42,easing:g.ease},h);const S=this.transform,D=this.getZoom(),k=this.getBearing(),F=this.getPitch(),B=this.getPadding(),V="zoom"in h?g.clamp(+h.zoom,S.minZoom,S.maxZoom):D,X="bearing"in h?this._normalizeBearing(h.bearing,k):k,q="pitch"in h?+h.pitch:F,fe="padding"in h?h.padding:S.padding,Ve=S.zoomScale(V-D),Ye=g.Point.convert(h.offset);let it=S.centerPoint.add(Ye);const st=S.pointLocation(it),ft=g.LngLat.convert(h.center||st);this._normalizeCenter(ft);const ge=S.project(st),Ke=S.project(ft).sub(ge);let wt=h.curve;const St=Math.max(S.width,S.height),Ht=St/Ve,qt=Ke.mag();if("minZoom"in h){const Jn=g.clamp(Math.min(h.minZoom,D,V),S.minZoom,S.maxZoom),hr=St/S.zoomScale(Jn-D);wt=Math.sqrt(hr/qt*2)}const Gt=wt*wt;function rn(Jn){const hr=(Ht*Ht-St*St+(Jn?-1:1)*Gt*Gt*qt*qt)/(2*(Jn?Ht:St)*Gt*qt);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Jt(Jn){return(Math.exp(Jn)-Math.exp(-Jn))/2}function wn(Jn){return(Math.exp(Jn)+Math.exp(-Jn))/2}const ur=rn(0);let mn=function(Jn){return wn(ur)/wn(ur+wt*Jn)},Gn=function(Jn){return St*((wn(ur)*(Jt(hr=ur+wt*Jn)/wn(hr))-Jt(ur))/Gt)/qt;var hr},Dn=(rn(1)-ur)/wt;if(Math.abs(qt)<1e-6||!isFinite(Dn)){if(Math.abs(St-Ht)<1e-6)return this.easeTo(h,v);const Jn=Ht<St?-1:1;Dn=Math.abs(Math.log(Ht/St))/wt,Gn=function(){return 0},mn=function(hr){return Math.exp(Jn*wt*hr)}}h.duration="duration"in h?+h.duration:1e3*Dn/("screenSpeed"in h?+h.screenSpeed/wt:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0);const ar=k!==X,bn=q!==F,Un=!S.isPaddingEqual(fe),cr=Jn=>hr=>{const vi=hr*Dn,Ui=1/mn(vi);Jn.zoom=1===hr?V:D+Jn.scaleZoom(Ui),ar&&(Jn.bearing=g.number(k,X,hr)),bn&&(Jn.pitch=g.number(F,q,hr)),Un&&(Jn.interpolatePadding(B,fe,hr),it=Jn.centerPoint.add(Ye));const Wr=1===hr?ft:Jn.unproject(ge.add(Ke.mult(Gn(vi))).mult(Ui));return Jn.setLocationAtPoint(Jn.renderWorldCopies?Wr.wrap():Wr,it),Jn._updateCameraOnTerrain(),h.preloadOnly||this._fireMoveEvents(v),Jn};if(h.preloadOnly){const Jn=this._emulate(cr,h.duration,S);return this._preloadTiles(Jn),this}return this._zooming=!0,this._rotating=ar,this._pitching=bn,this._padding=Un,this._prepareEase(v,!1),this._ease(cr(S),()=>this._afterEase(v),h),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(h,v){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const S=this._onEaseEnd;this._onEaseEnd=void 0,S.call(this,v)}if(!h){const S=this.handlers;S&&S.stop(!1)}return this}_ease(h,v,S){!1===S.animate||0===S.duration?(h(1),v()):(this._easeStart=g.exported.now(),this._easeOptions=S,this._onEaseFrame=h,this._onEaseEnd=v,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const h=Math.min((g.exported.now()-this._easeStart)/this._easeOptions.duration,1),v=this._onEaseFrame;v&&v(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(h,v){h=g.wrap(h,-180,180);const S=Math.abs(h-v);return Math.abs(h-360-v)<S&&(h-=360),Math.abs(h+360-v)<S&&(h+=360),h}_normalizeCenter(h){const v=this.transform;if(!v.renderWorldCopies||v.maxBounds)return;const S=h.lng-v.center.lng;h.lng+=S>180?-360:S<-180?360:0}_prefersReducedMotion(h){return this._respectPrefersReducedMotion&&g.exported.prefersReducedMotion&&!(h&&h.essential)}_emulate(h,v,S){const D=Math.ceil(15*v/1e3),k=[],F=h(S.clone());for(let B=0;B<=D;B++){const V=F(B/D);k.push(V.clone())}return k}}class vr{constructor(h={}){this.options=h,g.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(h){const v=this.options&&this.options.compact;return this._map=h,this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ht("button","mapboxgl-ctrl-attrib-button",this._container),ht("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ht("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),v&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===v&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(h,v){const S=this._map._getUIString(`AttributionControl.${v}`);h.setAttribute("aria-label",S),h.removeAttribute("title"),h.firstElementChild&&h.firstElementChild.setAttribute("title",S)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let h=this._editLink;h||(h=this._editLink=this._container.querySelector(".mapbox-improve-map"));const v=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||g.config.ACCESS_TOKEN}];if(h){const S=v.reduce((D,k,F)=>(k.value&&(D+=`${k.key}=${k.value}${F<v.length-1?"&":""}`),D),"?");h.href=`${g.config.FEEDBACK_URL}/${S}#${Fr(this._map,!0)}`,h.rel="noopener nofollow",this._setElementTitle(h,"MapFeedback")}}_updateData(h){!h||"metadata"!==h.sourceDataType&&"visibility"!==h.sourceDataType&&"style"!==h.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let h=[];if(this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const v=this._map.style._sourceCaches;for(const D in v){const k=v[D];if(k.used){const F=k.getSource();F.attribution&&h.indexOf(F.attribution)<0&&h.push(F.attribution)}}h.sort((D,k)=>D.length-k.length),h=h.filter((D,k)=>{for(let F=k+1;F<h.length;F++)if(h[F].indexOf(D)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?h=[...this.options.customAttribution,...h]:h.unshift(this.options.customAttribution));const S=h.join(" | ");S!==this._attribHTML&&(this._attribHTML=S,h.length?(this._innerContainer.innerHTML=S,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class bl{constructor(){g.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(h){this._map=h,this._container=ht("div","mapboxgl-ctrl");const v=ht("a","mapboxgl-ctrl-logo");return v.target="_blank",v.rel="noopener nofollow",v.href="https://www.mapbox.com/",v.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),v.setAttribute("rel","noopener nofollow"),this._container.appendChild(v),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(h){h&&"metadata"!==h.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const h=this._map.style._sourceCaches;if(0===Object.entries(h).length)return!0;for(const v in h){const S=h[v].getSource();if(S.hasOwnProperty("mapbox_logo")&&!S.mapbox_logo)return!1}return!0}_updateCompact(){const h=this._container.children;if(h.length){const v=h[0];this._map.getCanvasContainer().offsetWidth<250?v.classList.add("mapboxgl-compact"):v.classList.remove("mapboxgl-compact")}}}class mu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(h){const v=++this._id;return this._queue.push({callback:h,id:v,cancelled:!1}),v}remove(h){const v=this._currentlyRunning,S=v?this._queue.concat(v):this._queue;for(const D of S)if(D.id===h)return void(D.cancelled=!0)}run(h=0){const v=this._currentlyRunning=this._queue;this._queue=[];for(const S of v)if(!S.cancelled&&(S.callback(h),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function qc(x,h,v){if(x=new g.LngLat(x.lng,x.lat),h){const S=new g.LngLat(x.lng-360,x.lat),D=new g.LngLat(x.lng+360,x.lat),k=360*Math.ceil(Math.abs(x.lng-v.center.lng)/360),F=v.locationPoint(x).distSqr(h),B=h.x<0||h.y<0||h.x>v.width||h.y>v.height;v.locationPoint(S).distSqr(h)<F&&(B||Math.abs(S.lng-v.center.lng)<k)?x=S:v.locationPoint(D).distSqr(h)<F&&(B||Math.abs(D.lng-v.center.lng)<k)&&(x=D)}for(;Math.abs(x.lng-v.center.lng)>180;){const S=v.locationPoint(x);if(S.x>=0&&S.y>=0&&S.x<=v.width&&S.y<=v.height)break;x.lng>v.center.lng?x.lng-=360:x.lng+=360}return x}const jh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Nr extends g.Evented{constructor(h,v){if(super(),(h instanceof g.window.HTMLElement||v)&&(h=g.extend({element:h},v)),g.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&h.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=h&&h.occludedOpacity||.2,h&&h.element)this._element=h.element,this._offset=g.Point.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=ht("div");const D=41,k=27,F=Wt("svg",{display:"block",height:D*this._scale+"px",width:k*this._scale+"px",viewBox:`0 0 ${k} ${D}`},this._element),B=Wt("radialGradient",{id:"shadowGradient"},Wt("defs",{},F));Wt("stop",{offset:"10%","stop-opacity":.4},B),Wt("stop",{offset:"100%","stop-opacity":.05},B),Wt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},F),Wt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},F),Wt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},F),Wt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},F),this._offset=g.Point.convert(h&&h.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()});const S=this._element.classList;for(const D in jh)S.remove(`mapboxgl-marker-anchor-${D}`);S.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(h){return h===this._map||(this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._updateMoving),h.on("moveend",this._update),h.on("remove",this._clearFadeTimer),h._addMarker(this),this.setDraggable(this._draggable),this._update(),h.on("click",this._onMapClick)),this}remove(){const h=this._map;return h&&(h.off("click",this._onMapClick),h.off("move",this._updateMoving),h.off("moveend",this._update),h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler),h.off("mouseup",this._onUp),h.off("touchend",this._onUp),h.off("mousemove",this._onMove),h.off("touchmove",this._onMove),h.off("remove",this._clearFadeTimer),h._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(h){return this._lngLat=g.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(24.6+D)],"bottom-right":[-D,-1*(24.6+D)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=h,h._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(h){const v=h.code,S=h.charCode||h.keyCode;"Space"!==v&&"Enter"!==v&&32!==S&&13!==S||this.togglePopup()}_onMapClick(h){const v=h.originalEvent.target,S=this._element;this._popup&&(v===S||S.contains(v))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const h=this._popup;return h?(h.isOpen()?(h.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(h.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const h=this._map,v=this._pos;if(!h||!v)return!1;const S=h.unproject(v),D=h.getFreeCameraOptions();if(!D.position)return!1;const k=D.position.toLngLat();return k.distanceTo(S)<.9*k.distanceTo(this._lngLat)}_evaluateOpacity(){const h=this._map;if(!h)return;const v=this._pos;if(!v||v.x<0||v.x>h.transform.width||v.y<0||v.y>h.transform.height)return void this._clearFadeTimer();const S=h.unproject(v);let D;h._showingGlobe()&&g.isLngLatBehindGlobe(h.transform,this._lngLat)?D=0:(D=1-h._queryFogOpacity(S),h.transform._terrainEnabled()&&h.getTerrain()&&this._behindTerrain()&&(D*=this._occludedOpacity)),this._element.style.opacity=`${D}`,this._element.style.pointerEvents=D>0?"auto":"none",this._popup&&this._popup._setOpacity(D),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const h=this._pos;if(!h||!this._map)return;const v=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${h.x}px,${h.y}px)\n            ${jh[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${v.x}px,${v.y}px)\n        `}_calculateXYTransform(){const h=this._pos,v=this._map,S=this.getPitchAlignment();if(!v||!h||"map"!==S)return"";if(!v._showingGlobe()){const V=v.getPitch();return V?`rotateX(${V}deg)`:""}const D=g.radToDeg(g.globeTiltAtLngLat(v.transform,this._lngLat)),k=h.sub(g.globeCenterToScreenPoint(v.transform)),F=Math.abs(k.x)+Math.abs(k.y);if(0===F)return"";const B=D/F;return`rotateX(${-k.y*B}deg) rotateY(${k.x*B}deg)`}_calculateZTransform(){const h=this._pos,v=this._map;if(!v||!h)return"";let S=0;const D=this.getRotationAlignment();if("map"===D)if(v._showingGlobe()){const k=v.project(new g.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),F=v.project(new g.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(k);S=g.radToDeg(Math.atan2(F.y,F.x))-90}else S=-v.getBearing();else if("horizon"===D){const k=g.smoothstep(4,6,v.getZoom()),F=g.globeCenterToScreenPoint(v.transform);F.y+=k*v.transform.height;const B=h.sub(F),V=g.radToDeg(Math.atan2(B.y,B.x));S=(V>90?V-270:V+90)*(1-k)}return S+=this._rotation,S?`rotateZ(${S}deg)`:""}_update(h){g.window.cancelAnimationFrame(this._updateFrameId);const v=this._map;v&&(v.transform.renderWorldCopies&&(this._lngLat=qc(this._lngLat,this._pos,v.transform)),this._pos=v.project(this._lngLat),!0===h?this._updateFrameId=g.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),v._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(v._showingGlobe()||v.getTerrain()||v.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(h){return this._offset=g.Point.convert(h),this._update(),this}_onMove(h){const v=this._map;if(!v)return;const S=this._pointerdownPos,D=this._positionDelta;if(S&&D){if(!this._isDragging){const k=this._clickTolerance||v._clickTolerance;if(h.point.dist(S)<k)return;this._isDragging=!0}this._pos=h.point.sub(D),this._lngLat=v.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new g.Event("dragstart"))),this.fire(new g.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const h=this._map;h&&(h.off("mousemove",this._onMove),h.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new g.Event("dragend")),this._state="inactive"}_addDragHandler(h){const v=this._map,S=this._pos;v&&S&&this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(S),this._pointerdownPos=h.point,this._state="pending",v.on("mousemove",this._onMove),v.on("touchmove",this._onMove),v.once("mouseup",this._onUp),v.once("touchend",this._onUp))}setDraggable(h){this._draggable=!!h;const v=this._map;return v&&(h?(v.on("mousedown",this._addDragHandler),v.on("touchstart",this._addDragHandler)):(v.off("mousedown",this._addDragHandler),v.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(h){return this._rotation=h||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(h){return this._rotationAlignment=h||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(h){return this._pitchAlignment=h||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(h){return this._occludedOpacity=h||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Mv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Pv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function N_(x=new g.Point(0,0),h="bottom"){if("number"==typeof x){const v=Math.round(Math.sqrt(.5*Math.pow(x,2)));switch(h){case"top":return new g.Point(0,x);case"top-left":return new g.Point(v,v);case"top-right":return new g.Point(-v,v);case"bottom":return new g.Point(0,-x);case"bottom-left":return new g.Point(v,-v);case"bottom-right":return new g.Point(-v,-v);case"left":return new g.Point(x,0);case"right":return new g.Point(-x,0)}return new g.Point(0,0)}return x instanceof g.Point||Array.isArray(x)?g.Point.convert(x):g.Point.convert(x[h]||[0,0])}class kv{constructor(h){this.jumpTo(h)}getValue(h){if(h<=this._startTime)return this._start;if(h>=this._endTime)return this._end;const v=g.easeCubicInOut((h-this._startTime)/(this._endTime-this._startTime));return this._start*(1-v)+this._end*v}isEasing(h){return h>=this._startTime&&h<=this._endTime}jumpTo(h){this._startTime=-1/0,this._endTime=-1/0,this._start=h,this._end=h}easeTo(h,v,S){this._start=this.getValue(v),this._end=h,this._startTime=v,this._endTime=v+S}}const bx={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},xx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},If={showCompass:!0,showZoom:!0,visualizePitch:!1};class jd{constructor(h,v,S=!1){this._clickTolerance=10,this.element=v,this.mouseRotate=new du({clickTolerance:h.dragRotate._mouseRotate._clickTolerance}),this.map=h,S&&(this.mousePitch=new Dc({clickTolerance:h.dragRotate._mousePitch._clickTolerance})),g.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),v.addEventListener("mousedown",this.mousedown),v.addEventListener("touchstart",this.touchstart,{passive:!1}),v.addEventListener("touchmove",this.touchmove),v.addEventListener("touchend",this.touchend),v.addEventListener("touchcancel",this.reset)}down(h,v){this.mouseRotate.mousedown(h,v),this.mousePitch&&this.mousePitch.mousedown(h,v),Bt()}move(h,v){const S=this.map,D=this.mouseRotate.mousemoveWindow(h,v),k=D&&D.bearingDelta;if(k&&S.setBearing(S.getBearing()+k),this.mousePitch){const F=this.mousePitch.mousemoveWindow(h,v),B=F&&F.pitchDelta;B&&S.setPitch(S.getPitch()+B)}}off(){const h=this.element;h.removeEventListener("mousedown",this.mousedown),h.removeEventListener("touchstart",this.touchstart,{passive:!1}),h.removeEventListener("touchmove",this.touchmove),h.removeEventListener("touchend",this.touchend),h.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ce(),g.window.removeEventListener("mousemove",this.mousemove),g.window.removeEventListener("mouseup",this.mouseup)}mousedown(h){this.down(g.extend({},h,{ctrlKey:!0,preventDefault:()=>h.preventDefault()}),Q(this.element,h)),g.window.addEventListener("mousemove",this.mousemove),g.window.addEventListener("mouseup",this.mouseup)}mousemove(h){this.move(h,Q(this.element,h))}mouseup(h){this.mouseRotate.mouseupWindow(h),this.mousePitch&&this.mousePitch.mouseupWindow(h),this.offTemp()}touchstart(h){1!==h.targetTouches.length?this.reset():(this._startPos=this._lastPos=ne(this.element,h.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>h.preventDefault()},this._startPos))}touchmove(h){1!==h.targetTouches.length?this.reset():(this._lastPos=ne(this.element,h.targetTouches)[0],this.move({preventDefault:()=>h.preventDefault()},this._lastPos))}touchend(h){0===h.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Rv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ov={maxWidth:100,unit:"metric"},Bl={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},_d={version:g.version,supported:Be,setRTLTextPlugin:g.setRTLTextPlugin,getRTLTextPluginStatus:g.getRTLTextPluginStatus,Map:class extends Eo{constructor(x){if(g.LivePerformanceUtils.mark(g.PerformanceMarkers.create),null!=(x=g.extend({},xx,x)).minZoom&&null!=x.maxZoom&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=x.minPitch&&null!=x.maxPitch&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=x.minPitch&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=x.maxPitch&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(x.antialias&&g.isSafariWithAntialiasingBug(g.window)&&(x.antialias=!1,g.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ba(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),x),this._interactive=x.interactive,this._minTileCacheSize=x.minTileCacheSize,this._maxTileCacheSize=x.maxTileCacheSize,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._useWebGL2=x.useWebGL2,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=x.crossSourceCollisions,this._collectResourceTiming=x.collectResourceTiming,this._optimizeForTerrain=x.optimizeForTerrain,this._language=this._parseLanguage(x.language),this._worldview=x.worldview,this._renderTaskQueue=new mu,this._domRenderTaskQueue=new mu,this._controls=[],this._markers=[],this._popups=[],this._mapId=g.uniqueId(),this._locale=g.extend({},bx,x.locale),this._clickTolerance=x.clickTolerance,this._cooperativeGestures=x.cooperativeGestures,this._performanceMetricsCollection=x.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new kv(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new g.RequestManager(x.transformRequest,x.accessToken,x.testMode),this._silenceAuthErrors=!!x.testMode,"string"==typeof x.container){if(this._container=g.window.document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof g.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(this._container.childNodes.length>0&&g.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),x.maxBounds&&this.setMaxBounds(x.maxBounds),g.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==g.window&&(g.window.addEventListener("online",this._onWindowOnline,!1),g.window.addEventListener("resize",this._onWindowResize,!1),g.window.addEventListener("orientationchange",this._onWindowResize,!1),g.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),g.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new $r(this,x),this._localFontFamily=x.localFontFamily,this._localIdeographFontFamily=x.localIdeographFontFamily,x.style&&this.setStyle(x.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),x.projection&&this.setProjection(x.projection),this._hash=x.hash&&new sa("string"==typeof x.hash&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,g.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),x.attributionControl&&this.addControl(new vr({customAttribution:x.customAttribution})),this._logoControl=new bl,this.addControl(this._logoControl,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update("style"===h.dataType),this.fire(new g.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new g.Event(`${h.dataType}dataloading`,h))})}_getMapId(){return this._mapId}addControl(x,h){if(void 0===h&&(h=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const v=x.onAdd(this);this._controls.push(x);const S=this._controlPositions[h];return-1!==h.indexOf("bottom")?S.insertBefore(v,S.firstChild):S.appendChild(v),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const h=this._controls.indexOf(x);return h>-1&&this._controls.splice(h,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(x){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const h=!this._moving;return h&&this.fire(new g.Event("movestart",x)).fire(new g.Event("move",x)),this.fire(new g.Event("resize",x)),h&&this.fire(new g.Event("moveend",x)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(x){return this.transform.setMaxBounds(g.LngLatBounds.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x?this.setZoom(x):this.fire(new g.Event("zoomstart")).fire(new g.Event("zoom")).fire(new g.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x?this.setZoom(x):this.fire(new g.Event("zoomstart")).fire(new g.Event("zoom")).fire(new g.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x?this.setPitch(x):this.fire(new g.Event("pitchstart")).fire(new g.Event("pitch")).fire(new g.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x?this.setPitch(x):this.fire(new g.Event("pitchstart")).fire(new g.Event("pitch")).fire(new g.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(x){return"auto"===x?g.window.navigator.language:Array.isArray(x)?0===x.length?void 0:x.map(h=>"auto"===h?g.window.navigator.language:h):x}setLanguage(x){const h=this._parseLanguage(x);if(!this.style||h===this._language)return this;this._language=h,this.style._reloadSources();for(const v of this._controls)v._setLanguage&&v._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(x){return this.style&&x!==this._worldview?(this._worldview=x,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(x){return this._lazyInitEmptyStyle(),x?"string"==typeof x&&(x={name:x}):x=null,this._useExplicitProjection=!!x,this._prioritizeAndUpdateProjection(x,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const x=this.transform,h=x.projection.name;let v;"globe"===h&&x.zoom>=g.GLOBE_ZOOM_THRESHOLD_MAX?(x.setMercatorFromTransition(),v=!0):"mercator"===h&&x.zoom<g.GLOBE_ZOOM_THRESHOLD_MAX&&(x.setProjection({name:"globe"}),v=!0),v&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(x,h){return this._updateProjection(x||h||{name:"mercator"})}_updateProjection(x){let h;if(h="globe"===x.name&&this.transform.zoom>=g.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(x),this.style.applyProjectionUpdate(),h){this.painter.clearBackgroundTiles();for(const v in this.style._sourceCaches)this.style._sourceCaches[v].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(x){return this.transform.locationPoint3D(g.LngLat.convert(x))}unproject(x){return this.transform.pointLocation3D(g.Point.convert(x))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(x,h,v){if("mouseenter"===x||"mouseover"===x){let S=!1;const D=F=>{const B=h.filter(X=>this.getLayer(X)),V=B.length?this.queryRenderedFeatures(F.point,{layers:B}):[];V.length?S||(S=!0,v.call(this,new za(x,this,F.originalEvent,{features:V}))):S=!1},k=()=>{S=!1};return{layers:new Set(h),listener:v,delegates:{mousemove:D,mouseout:k}}}if("mouseleave"===x||"mouseout"===x){let S=!1;const D=F=>{const B=h.filter(V=>this.getLayer(V));(B.length?this.queryRenderedFeatures(F.point,{layers:B}):[]).length?S=!0:S&&(S=!1,v.call(this,new za(x,this,F.originalEvent)))},k=F=>{S&&(S=!1,v.call(this,new za(x,this,F.originalEvent)))};return{layers:new Set(h),listener:v,delegates:{mousemove:D,mouseout:k}}}{const S=D=>{const k=h.filter(B=>this.getLayer(B)),F=k.length?this.queryRenderedFeatures(D.point,{layers:k}):[];F.length&&(D.features=F,v.call(this,D),delete D.features)};return{layers:new Set(h),listener:v,delegates:{[x]:S}}}}on(x,h,v){if(void 0===v)return super.on(x,h);Array.isArray(h)||(h=[h]);const S=this._createDelegatedListener(x,h,v);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(S);for(const D in S.delegates)this.on(D,S.delegates[D]);return this}once(x,h,v){if(void 0===v)return super.once(x,h);Array.isArray(h)||(h=[h]);const S=this._createDelegatedListener(x,h,v);for(const D in S.delegates)this.once(D,S.delegates[D]);return this}off(x,h,v){if(void 0===v)return super.off(x,h);h=new Set(Array.isArray(h)?h:[h]);const S=(k,F)=>{if(k.size!==F.size)return!1;for(const B of k)if(!F.has(B))return!1;return!0},D=this._delegatedListeners?this._delegatedListeners[x]:void 0;return D&&(k=>{for(let F=0;F<k.length;F++){const B=k[F];if(B.listener===v&&S(B.layers,h)){for(const V in B.delegates)this.off(V,B.delegates[V]);return k.splice(F,1),this}}})(D),this}queryRenderedFeatures(x,h){return this.style?(void 0!==h||void 0===x||x instanceof g.Point||Array.isArray(x)||(h=x,x=void 0),this.style.queryRenderedFeatures(x=x||[[0,0],[this.transform.width,this.transform.height]],h=h||{},this.transform)):[]}querySourceFeatures(x,h){return this.style.querySourceFeatures(x,h)}isPointOnSurface(x){const{name:h}=this.transform.projection;return"globe"!==h&&"mercator"!==h&&g.warnOnce(`${h} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(g.Point.convert(x))}setStyle(x,h){return!1!==(h=g.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},h)).diff&&h.localIdeographFontFamily===this._localIdeographFontFamily&&h.localFontFamily===this._localFontFamily&&this.style&&x?(this._diffStyle(x,h),this):(this._localIdeographFontFamily=h.localIdeographFontFamily,this._localFontFamily=h.localFontFamily,this._updateStyle(x,h))}_getUIString(x){const h=this._locale[x];if(null==h)throw new Error(`Missing UI string '${x}'`);return h}_updateStyle(x,h){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),x&&(this.style=new Fs(this,h||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof x?this.style.loadURL(x):this.style.loadJSON(x)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Fs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,h){if("string"==typeof x){const v=this._requestManager.normalizeStyleURL(x),S=this._requestManager.transformRequest(v,g.ResourceType.Style);g.getJSON(S,(D,k)=>{D?this.fire(new g.ErrorEvent(D)):k&&this._updateDiff(k,h)})}else"object"==typeof x&&this._updateDiff(x,h)}_updateDiff(x,h){try{this.style.setState(x)&&this._update(!0)}catch(v){g.warnOnce(`Unable to perform style diff: ${v.message||v.error||v}.  Rebuilding the style from scratch.`),this._updateStyle(x,h)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(g.warnOnce("There is no style added to the map."),!1)}addSource(x,h){return this._lazyInitEmptyStyle(),this.style.addSource(x,h),this._update(!0)}isSourceLoaded(x){return!!this.style&&this.style._isSourceCacheLoaded(x)}areTilesLoaded(){const x=this.style&&this.style._sourceCaches;for(const h in x){const v=x[h]._tiles;for(const S in v){const D=v[S];if("loaded"!==D.state&&"errored"!==D.state)return!1}}return!0}addSourceType(x,h,v){this._lazyInitEmptyStyle(),this.style.addSourceType(x,h,v)}removeSource(x){return this.style.removeSource(x),this._updateTerrain(),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,h,{pixelRatio:v=1,sdf:S=!1,stretchX:D,stretchY:k,content:F}={}){if(this._lazyInitEmptyStyle(),h instanceof g.window.HTMLImageElement||g.window.ImageBitmap&&h instanceof g.window.ImageBitmap){const{width:B,height:V,data:X}=g.exported.getImageData(h);this.style.addImage(x,{data:new g.RGBAImage({width:B,height:V},X),pixelRatio:v,stretchX:D,stretchY:k,content:F,sdf:S,version:0})}else if(void 0===h.width||void 0===h.height)this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:B,height:V}=h,X=h;this.style.addImage(x,{data:new g.RGBAImage({width:B,height:V},new Uint8Array(X.data)),pixelRatio:v,stretchX:D,stretchY:k,content:F,sdf:S,version:0,userImage:X}),X.onAdd&&X.onAdd(this,x)}}updateImage(x,h){const v=this.style.getImage(x);if(!v)return void this.fire(new g.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=h instanceof g.window.HTMLImageElement||g.window.ImageBitmap&&h instanceof g.window.ImageBitmap?g.exported.getImageData(h):h,{width:D,height:k}=S;void 0!==D&&void 0!==k?D===v.data.width&&k===v.data.height?(v.data.replace(S.data,!(h instanceof g.window.HTMLImageElement||g.window.ImageBitmap&&h instanceof g.window.ImageBitmap)),this.style.updateImage(x,v)):this.fire(new g.ErrorEvent(new Error(`The width and height of the updated image (${D}, ${k})\n                must be that same as the previous version of the image\n                (${v.data.width}, ${v.data.height})`))):this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new g.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x,h){g.getImage(this._requestManager.transformRequest(x,g.ResourceType.Image),(v,S)=>{h(v,S instanceof g.window.HTMLImageElement?g.exported.getImageData(S):S)})}listImages(){return this.style.listImages()}addLayer(x,h){return this._lazyInitEmptyStyle(),this.style.addLayer(x,h),this._update(!0)}moveLayer(x,h){return this.style.moveLayer(x,h),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}setLayerZoomRange(x,h,v){return this.style.setLayerZoomRange(x,h,v),this._update(!0)}setFilter(x,h,v={}){return this.style.setFilter(x,h,v),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,h,v,S={}){return this.style.setPaintProperty(x,h,v,S),this._update(!0)}getPaintProperty(x,h){return this.style.getPaintProperty(x,h)}setLayoutProperty(x,h,v,S={}){return this.style.setLayoutProperty(x,h,v,S),this._update(!0)}getLayoutProperty(x,h){return this.style.getLayoutProperty(x,h)}setLight(x,h={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,h),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(x){return this._lazyInitEmptyStyle(),!x&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(x),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(x){return this._lazyInitEmptyStyle(),this.style.setFog(x),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(x){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(g.LngLat.convert(x),this.transform):0}setFeatureState(x,h){return this.style.setFeatureState(x,h),this._update()}removeFeatureState(x,h){return this.style.removeFeatureState(x,h),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}_updateContainerDimensions(){if(!this._container)return;const x=this._container.getBoundingClientRect().width||400,h=this._container.getBoundingClientRect().height||300;let v,S,D,k=this._container;for(;k&&(!S||!D);){const F=g.window.getComputedStyle(k).transform;F&&"none"!==F&&(v=F.match(/matrix.*\((.+)\)/)[1].split(", "),v[0]&&"0"!==v[0]&&"1"!==v[0]&&(S=v[0]),v[3]&&"0"!==v[3]&&"1"!==v[3]&&(D=v[3])),k=k.parentElement}this._containerWidth=S?Math.abs(x/S):x,this._containerHeight=D?Math.abs(h/D):h}_detectMissingCSS(){"rgb(250, 128, 114)"!==g.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&g.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const x=this._container;x.classList.add("mapboxgl-map"),(this._missingCSSCanary=ht("div","mapboxgl-canary",x)).style.visibility="hidden",this._detectMissingCSS();const h=this._canvasContainer=ht("div","mapboxgl-canvas-container",x);this._interactive&&h.classList.add("mapboxgl-interactive"),this._canvas=ht("canvas","mapboxgl-canvas",h),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const v=this._controlContainer=ht("div","mapboxgl-control-container",x),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(D=>{S[D]=ht("div",`mapboxgl-ctrl-${D}`,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,h){const v=g.exported.devicePixelRatio||1;this._canvas.width=v*Math.ceil(x),this._canvas.height=v*Math.ceil(h),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${h}px`}_addMarker(x){this._markers.push(x)}_removeMarker(x){const h=this._markers.indexOf(x);-1!==h&&this._markers.splice(h,1)}_addPopup(x){this._popups.push(x)}_removePopup(x){const h=this._popups.indexOf(x);-1!==h&&this._popups.splice(h,1)}_setupPainter(){const x=g.extend({},Be.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),h=this._useWebGL2&&this._canvas.getContext("webgl2",x),v=h||this._canvas.getContext("webgl",x)||this._canvas.getContext("experimental-webgl",x);v?(this._useWebGL2&&!h&&g.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),g.storeAuthState(v,!0),this.painter=new wo(v,this.transform,!!h),this.on("data",S=>{"source"===S.dataType&&this.painter.setTileLoadedFlag(!0)}),g.exported$1.testSupport(v)):this.fire(new g.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(x){x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new g.Event("webglcontextlost",{originalEvent:x}))}_contextRestored(x){this._setupPainter(),this.resize(),this._update(),this.fire(new g.Event("webglcontextrestored",{originalEvent:x}))}_onMapScroll(x){if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_requestDomTask(x){!this.loaded()||this.loaded()&&!this.isMoving()?x():this._domRenderTaskQueue.add(x)}_render(x){let h;const v=this.painter.context.extTimerQuery,S=g.exported.now();if(this.listens("gpu-timing-frame")&&(h=v.createQueryEXT(),v.beginQueryEXT(v.TIME_ELAPSED_EXT,h)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],g.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],g.window.performance.now())),this._renderTaskQueue.run(x),this._domRenderTaskQueue.run(x),this._removed)return;this._updateProjectionTransition();const D=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const B=this.transform.zoom,V=this.transform.pitch,X=g.exported.now(),q=new g.EvaluationParameters(B,{now:X,fadeDuration:D,pitch:V,transition:this.style.getTransition()});this.style.update(q)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(S),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):k=this._updateAverageElevation(S),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,D,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:D,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new g.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new g.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),h){const B=g.exported.now()-S;v.endQueryEXT(v.TIME_ELAPSED_EXT,h),setTimeout(()=>{const V=v.getQueryObjectEXT(h,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(h),this.fire(new g.Event("gpu-timing-frame",{cpuTime:B,gpuTime:V})),g.window.performance.mark("frame-gpu",{startTime:S,detail:{gpuTime:V}})},50)}if(this.listens("gpu-timing-layer")){const B=this.painter.collectGpuTimers();setTimeout(()=>{const V=this.painter.queryGpuTimers(B);this.fire(new g.Event("gpu-timing-layer",{layerTimes:V}))},50)}if(this.listens("gpu-timing-deferred-render")){const B=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const V=this.painter.queryGpuTimeDeferredRender(B);this.fire(new g.Event("gpu-timing-deferred-render",{gpuTime:V}))},50)}const F=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(F||this._repaint)this.triggerRepaint();else{const B=!this.isMoving()&&this.loaded();if(B&&(k=this._updateAverageElevation(S,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),B&&(this.fire(new g.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const V=this._calculateSpeedIndex();this.fire(new g.Event("speedindexcompleted",{speedIndex:V})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||F||(this._fullyLoaded=!0,g.LivePerformanceUtils.mark(g.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&g.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(x){for(const h of this._markers)x&&!this.getRenderWorldCopies()&&(h._lngLat=h._lngLat.wrap()),h._update();for(const h of this._popups)!x||this.getRenderWorldCopies()||h._trackPointer||(h._lngLat=h._lngLat.wrap()),h._update()}_updateAverageElevation(x,h=!1){const v=S=>(this.transform.averageElevation=S,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&v(0);if((h||x-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(x)){const S=this.transform.averageElevation;let D=this.transform.sampleAverageElevation(),k=!1;this.transform.elevation&&(k=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(D)?D=0:this._averageElevationLastSampledAt=x;const F=Math.abs(S-D);if(F>1){if(this._isInitialLoad||k)return this._averageElevation.jumpTo(D),v(D);this._averageElevation.easeTo(D,x,300)}else if(F>1e-4)return this._averageElevation.jumpTo(D),v(D)}return!!this._averageElevation.isEasing(x)&&v(this._averageElevation.getValue(x))}_authenticate(){g.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,x=>{if(x&&(x.message===g.AUTH_ERR_MSG||401===x.status)){const h=this.painter.context.gl;g.storeAuthState(h,!1),this._logoControl instanceof bl&&this._logoControl._updateLogo(),h&&h.clear(h.DEPTH_BUFFER_BIT|h.COLOR_BUFFER_BIT|h.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new g.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),g.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const x=this._isDragging();this.painter.updateTerrain(this.style,x)}_calculateSpeedIndex(){const x=this.painter.canvasCopy(),h=this.painter.getCanvasCopiesAndTimestamps();h.timeStamps.push(performance.now());const v=this.painter.context.gl,S=v.createFramebuffer();function D(k){v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,k,0);const F=new Uint8Array(v.drawingBufferWidth*v.drawingBufferHeight*4);return v.readPixels(0,0,v.drawingBufferWidth,v.drawingBufferHeight,v.RGBA,v.UNSIGNED_BYTE,F),F}return v.bindFramebuffer(v.FRAMEBUFFER,S),this._canvasPixelComparison(D(x),h.canvasCopies.map(D),h.timeStamps)}_canvasPixelComparison(x,h,v){let S=v[1]-v[0];const D=x.length/4;for(let k=0;k<h.length;k++){const F=h[k];let B=0;for(let V=0;V<F.length;V+=4)F[V]===x[V]&&F[V+1]===x[V+1]&&F[V+2]===x[V+2]&&F[V+3]===x[V+3]&&(B+=1);S+=(v[k+2]-v[k+1])*(1-B/D)}return S}remove(){this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==g.window&&(g.window.removeEventListener("resize",this._onWindowResize,!1),g.window.removeEventListener("orientationchange",this._onWindowResize,!1),g.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),g.window.removeEventListener("online",this._onWindowOnline,!1),g.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),g.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new g.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(x){this._renderNextFrame=this._renderNextFrame||x,this.style&&!this._frame&&(this._frame=g.exported.frame(h=>{const v=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,v&&this._render(h)}))}_preloadTiles(x){const h=this.style?Object.values(this.style._sourceCaches):[];return g.asyncAll(h,(v,S)=>v._preloadTiles(x,S),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(x){this._trackResize&&this.resize({originalEvent:x})._update()}_onVisibilityChange(){"hidden"===g.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(x){this._showTerrainWireframe!==x&&(this._showTerrainWireframe=x,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(x){this._speedIndexTiming!==x&&(this._speedIndexTiming=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(x){this._showTileAABBs!==x&&(this._showTileAABBs=x,x&&this._update())}_setCacheLimits(x,h){g.setCacheLimits(x,h)}get version(){return g.version}},NavigationControl:class{constructor(x){this.options=g.extend({},If,x),this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",h=>h.preventDefault()),this.options.showZoom&&(g.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",h=>{this._map&&this._map.zoomIn({},{originalEvent:h})}),ht("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",h=>{this._map&&this._map.zoomOut({},{originalEvent:h})}),ht("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(g.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",h=>{const v=this._map;v&&(this.options.visualizePitch?v.resetNorthPitch({},{originalEvent:h}):v.resetNorth({},{originalEvent:h}))}),this._compassIcon=ht("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const x=this._map;if(!x)return;const h=x.getZoom(),v=h===x.getMaxZoom(),S=h===x.getMinZoom();this._zoomInButton.disabled=v,this._zoomOutButton.disabled=S,this._zoomInButton.setAttribute("aria-disabled",v.toString()),this._zoomOutButton.setAttribute("aria-disabled",S.toString())}_rotateCompassArrow(){const x=this._map;if(!x)return;const h=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(x.transform.pitch*(Math.PI/180)),.5)}) rotateX(${x.transform.pitch}deg) rotateZ(${x.transform.angle*(180/Math.PI)}deg)`:`rotate(${x.transform.angle*(180/Math.PI)}deg)`;x._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=h)})}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),x.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&x.on("pitch",this._rotateCompassArrow),x.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jd(x,this._compass,this.options.visualizePitch)),this._container}onRemove(){const x=this._map;x&&(this._container.remove(),this.options.showZoom&&x.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&x.off("pitch",this._rotateCompassArrow),x.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(x,h){const v=ht("button",x,this._container);return v.type="button",v.addEventListener("click",h),v}_setButtonTitle(x,h){if(!this._map)return;const v=this._map._getUIString(`NavigationControl.${h}`);x.setAttribute("aria-label",v),x.firstElementChild&&x.firstElementChild.setAttribute("title",v)}},GeolocateControl:class extends g.Evented{constructor(x){super(),this.options=g.extend({geolocation:g.window.navigator.geolocation},Rv,x),g.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Tc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(x){return this._map=x,this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(x){const h=(v=!!this.options.geolocation)=>{this._supportsGeolocation=v,x(v)};void 0!==this._supportsGeolocation?x(this._supportsGeolocation):void 0!==g.window.navigator.permissions?g.window.navigator.permissions.query({name:"geolocation"}).then(v=>h("denied"!==v.state)).catch(()=>h()):h()}_isOutOfMapMaxBounds(x){const h=this._map.getMaxBounds(),v=x.coords;return!!h&&(v.longitude<h.getWest()||v.longitude>h.getEast()||v.latitude<h.getSouth()||v.latitude>h.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new g.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(x),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new g.Event("geolocate",x)),this._finish()}}_updateCamera(x){const h=new g.LngLat(x.coords.longitude,x.coords.latitude),v=x.coords.accuracy,S=this._map.getBearing(),D=g.extend({bearing:S},this.options.fitBoundsOptions);this._map.fitBounds(h.toBounds(v),D,{geolocateSource:!0})}_updateMarker(x){if(x){const h=new g.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const x=this._map.transform,h=g.mercatorZfromAltitude(1,x._center.lat)*x.worldSize,v=Math.ceil(2*this._accuracy*h);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(x){if(this._map){if(this.options.trackUserLocation)if(1===x.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===x.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new g.Event("error",x)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(x){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=ht("button","mapboxgl-ctrl-geolocate",this._container),ht("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===x){g.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ht("div","mapboxgl-user-location"),this._dotElement.appendChild(ht("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ht("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Nr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ht("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||"ACTIVE_LOCK"!==this._watchState||h.originalEvent&&"resize"===h.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new g.Event("trackuserlocationend")))})}}_onDeviceOrientation(x){this._userLocationDotMarker&&(x.webkitCompassHeading?this._heading=x.webkitCompassHeading:!0===x.absolute&&(this._heading=-1*x.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return g.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new g.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new g.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new g.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(x={maximumAge:6e5,timeout:0},this._noTimeout=!0):(x=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,x),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const x=()=>{g.window.addEventListener("ondeviceorientationabsolute"in g.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==g.window.DeviceMotionEvent&&"function"==typeof g.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(h=>{"granted"===h&&x()}).catch(console.error):x()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),g.window.removeEventListener("deviceorientation",this._onDeviceOrientation),g.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:vr,ScaleControl:class{constructor(x){this.options=g.extend({},Ov,x),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),g.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const x=this.options.maxWidth||100,h=this._map,v=h._containerHeight/2,S=h._containerWidth/2-x/2,D=h.unproject([S,v]),k=h.unproject([S+x,v]),F=D.distanceTo(k);if("imperial"===this.options.unit){const B=3.2808*F;B>5280?this._setScale(x,B/5280,"mile"):this._setScale(x,B,"foot")}else"nautical"===this.options.unit?this._setScale(x,F/1852,"nautical-mile"):F>=1e3?this._setScale(x,F/1e3,"kilometer"):this._setScale(x,F,"meter")}_setScale(x,h,v){this._map._requestDomTask(()=>{const S=function(k){const F=Math.pow(10,`${Math.floor(k)}`.length-1);let B=k/F;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(V){const X=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*X)/X}(B),F*B}(h),D=S/h;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==v?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:v}).format(S):`${S}&nbsp;${Bl[v]}`,this._container.style.width=x*D+"px"})}onAdd(x){return this._map=x,this._language=x.getLanguage(),this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-scale",x.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(x){this._language=x,this._update()}setUnit(x){this.options.unit=x,this._update()}},FullscreenControl:class{constructor(x){this._fullscreen=!1,x&&x.container&&(x.container instanceof g.window.HTMLElement?this._container=x.container:g.warnOnce("Full screen control 'container' must be a DOM element.")),g.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in g.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in g.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=ht("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",g.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,g.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!g.window.document.fullscreenEnabled&&!g.window.document.webkitFullscreenEnabled)}_setupUI(){const x=this._fullscreenButton=ht("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ht("span","mapboxgl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),g.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",x)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(g.window.document.fullscreenElement||g.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?g.window.document.exitFullscreen?g.window.document.exitFullscreen():g.window.document.webkitCancelFullScreen&&g.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends g.Evented{constructor(x){super(),this.options=g.extend(Object.create(Mv),x),g.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(x&&x.className?x.className.trim().split(/\s+/):[])}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&x.on("preclick",this._onClose),this.options.closeOnMove&&x.on("move",this._onClose),x.on("remove",this.remove),this._update(),x._addPopup(this),this._focusFirstElement(),this._trackPointer?(x.on("mousemove",this._onMouseEvent),x.on("mouseup",this._onMouseEvent),x._canvasContainer.classList.add("mapboxgl-track-pointer")):x.on("move",this._update),this.fire(new g.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const x=this._map;return x&&(x.off("move",this._update),x.off("move",this._onClose),x.off("preclick",this._onClose),x.off("click",this._onClose),x.off("remove",this.remove),x.off("mousemove",this._onMouseEvent),x.off("mouseup",this._onMouseEvent),x.off("drag",this._onMouseEvent),x._canvasContainer&&x._canvasContainer.classList.remove("mapboxgl-track-pointer"),x._removePopup(this),this._map=void 0),this.fire(new g.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(x){this._lngLat=g.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update();const h=this._map;return h&&(h.on("move",this._update),h.off("mousemove",this._onMouseEvent),h._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const x=this._map;return x&&(x.off("move",this._update),x.on("mousemove",this._onMouseEvent),x.on("drag",this._onMouseEvent),x._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(g.window.document.createTextNode(x))}setHTML(x){const h=g.window.document.createDocumentFragment(),v=g.window.document.createElement("body");let S;for(v.innerHTML=x;S=v.firstChild,S;)h.appendChild(S);return this.setDOMContent(h)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){let h=this._content;if(h)for(;h.hasChildNodes();)h.firstChild&&h.removeChild(h.firstChild);else h=this._content=ht("div","mapboxgl-popup-content",this._container||void 0);if(h.appendChild(x),this.options.closeButton){const v=this._closeButton=ht("button","mapboxgl-popup-close-button",h);v.type="button",v.setAttribute("aria-label","Close popup"),v.setAttribute("aria-hidden","true"),v.innerHTML="&#215;",v.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(x){return this._classList.add(x),this._updateClassList(),this}removeClassName(x){return this._classList.delete(x),this._updateClassList(),this}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){let h;return this._classList.delete(x)?h=!1:(this._classList.add(x),h=!0),this._updateClassList(),h}_onMouseEvent(x){this._update(x.point)}_getAnchor(x){if(this.options.anchor)return this.options.anchor;const h=this._map,v=this._container,S=this._pos;if(!h||!v||!S)return"bottom";const D=v.offsetWidth,k=v.offsetHeight,F=S.x<D/2,B=S.x>h.transform.width-D/2;if(S.y+x<k)return F?"top-left":B?"top-right":"top";if(S.y>h.transform.height-k){if(F)return"bottom-left";if(B)return"bottom-right"}return F?"left":B?"right":"bottom"}_updateClassList(){const x=this._container;if(!x)return;const h=[...this._classList];h.push("mapboxgl-popup"),this._anchor&&h.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&h.push("mapboxgl-popup-track-pointer"),x.className=h.join(" ")}_update(x){const h=this._map,v=this._content;if(!h||!this._lngLat&&!this._trackPointer||!v)return;let S=this._container;if(S||(S=this._container=ht("div","mapboxgl-popup",h.getContainer()),this._tip=ht("div","mapboxgl-popup-tip",S),S.appendChild(v)),this.options.maxWidth&&S.style.maxWidth!==this.options.maxWidth&&(S.style.maxWidth=this.options.maxWidth),h.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=qc(this._lngLat,this._pos,h.transform)),!this._trackPointer||x){const D=this._pos=this._trackPointer&&x?x:h.project(this._lngLat),k=N_(this.options.offset),F=this._anchor=this._getAnchor(k.y),B=N_(this.options.offset,F),V=D.add(B).round();h._requestDomTask(()=>{this._container&&F&&(this._container.style.transform=`${jh[F]} translate(${V.x}px,${V.y}px)`)})}if(!this._marker&&h._showingGlobe()){const D=g.isLngLatBehindGlobe(h.transform,this._lngLat)?0:1;this._setOpacity(D)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(Pv);x&&x.focus()}_onClose(){this.remove()}_setOpacity(x){this._container&&(this._container.style.opacity=`${x}`),this._content&&(this._content.style.pointerEvents=x?"auto":"none")}},Marker:Nr,Style:Fs,LngLat:g.LngLat,LngLatBounds:g.LngLatBounds,Point:g.Point,MercatorCoordinate:g.MercatorCoordinate,FreeCameraOptions:po,Evented:g.Evented,config:g.config,prewarm:function(){Yn().acquire(ln)},clearPrewarmedResources:function(){const x=$n;x&&(x.isPreloaded()&&1===x.numActive()?(x.release(ln),$n=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return g.config.ACCESS_TOKEN},set accessToken(x){g.config.ACCESS_TOKEN=x},get baseApiUrl(){return g.config.API_URL},set baseApiUrl(x){g.config.API_URL=x},get workerCount(){return Sn.workerCount},set workerCount(x){Sn.workerCount=x},get maxParallelImageRequests(){return g.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(x){g.config.MAX_PARALLEL_IMAGE_REQUESTS=x},clearStorage(x){g.clearTileCache(x)},workerUrl:"",workerClass:null,setNow:g.exported.setNow,restoreNow:g.exported.restoreNow};return _d}),de}()},4772:An=>{"use strict";var Lt=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;An.exports=function tt(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var me={},Be=0;Be<10;Be++)me["_"+String.fromCharCode(Be)]=Be;if("0123456789"!==Object.getOwnPropertyNames(me).map(function(ht){return me[ht]}).join(""))return!1;var We={};return"abcdefghijklmnopqrst".split("").forEach(function(ht){We[ht]=ht}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},We)).join("")}catch{return!1}}()?Object.assign:function(g,me){for(var Be,We,Ne=function Fe(g){if(null==g)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}(g),ht=1;ht<arguments.length;ht++){for(var Wt in Be=Object(arguments[ht]))Ie.call(Be,Wt)&&(Ne[Wt]=Be[Wt]);if(Lt){We=Lt(Be);for(var Xe=0;Xe<We.length;Xe++)de.call(Be,We[Xe])&&(Ne[We[Xe]]=Be[We[Xe]])}}return Ne}},4246:An=>{"use strict";var Lt=function(Ie){return Ie!=Ie};An.exports=function(de,Fe){return 0===de&&0===Fe?1/de==1/Fe:!!(de===Fe||Lt(de)&&Lt(Fe))}},314:(An,Lt,Ie)=>{"use strict";var de=Ie(1648),Fe=Ie(5436),tt=Ie(4246),g=Ie(1353),me=Ie(3090),Be=Fe(g(),Object);de(Be,{getPolyfill:g,implementation:tt,shim:me}),An.exports=Be},1353:(An,Lt,Ie)=>{"use strict";var de=Ie(4246);An.exports=function(){return"function"==typeof Object.is?Object.is:de}},3090:(An,Lt,Ie)=>{"use strict";var de=Ie(1353),Fe=Ie(1648);An.exports=function(){var g=de();return Fe(Object,{is:g},{is:function(){return Object.is!==g}}),g}},7972:(An,Lt,Ie)=>{"use strict";var de;if(!Object.keys){var Fe=Object.prototype.hasOwnProperty,tt=Object.prototype.toString,g=Ie(9637),me=Object.prototype.propertyIsEnumerable,Be=!me.call({toString:null},"toString"),Ne=me.call(function(){},"prototype"),We=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ht=function(He){var Bt=He.constructor;return Bt&&Bt.prototype===He},Wt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Xe=function(){if(typeof window>"u")return!1;for(var He in window)try{if(!Wt["$"+He]&&Fe.call(window,He)&&null!==window[He]&&"object"==typeof window[He])try{ht(window[He])}catch{return!0}}catch{return!0}return!1}();de=function(Bt){var ce=null!==Bt&&"object"==typeof Bt,Ce="[object Function]"===tt.call(Bt),te=g(Bt),Q=ce&&"[object String]"===tt.call(Bt),ne=[];if(!ce&&!Ce&&!te)throw new TypeError("Object.keys called on a non-object");var Re=Ne&&Ce;if(Q&&Bt.length>0&&!Fe.call(Bt,0))for(var ie=0;ie<Bt.length;++ie)ne.push(String(ie));if(te&&Bt.length>0)for(var J=0;J<Bt.length;++J)ne.push(String(J));else for(var xe in Bt)(!Re||"prototype"!==xe)&&Fe.call(Bt,xe)&&ne.push(String(xe));if(Be)for(var ee=function(He){if(typeof window>"u"||!Xe)return ht(He);try{return ht(He)}catch{return!1}}(Bt),pe=0;pe<We.length;++pe)(!ee||"constructor"!==We[pe])&&Fe.call(Bt,We[pe])&&ne.push(We[pe]);return ne}}An.exports=de},7809:(An,Lt,Ie)=>{"use strict";var de=Array.prototype.slice,Fe=Ie(9637),tt=Object.keys,g=tt?function(Ne){return tt(Ne)}:Ie(7972),me=Object.keys;g.shim=function(){if(Object.keys){var Ne=function(){var We=Object.keys(arguments);return We&&We.length===arguments.length}(1,2);Ne||(Object.keys=function(ht){return Fe(ht)?me(de.call(ht)):me(ht)})}else Object.keys=g;return Object.keys||g},An.exports=g},9637:An=>{"use strict";var Lt=Object.prototype.toString;An.exports=function(de){var Fe=Lt.call(de),tt="[object Arguments]"===Fe;return tt||(tt="[object Array]"!==Fe&&null!==de&&"object"==typeof de&&"number"==typeof de.length&&de.length>=0&&"[object Function]"===Lt.call(de.callee)),tt}},4018:An=>{An.exports=function(Ie,de,Fe,tt){var g=Ie[0],me=Ie[1],Be=!1;void 0===Fe&&(Fe=0),void 0===tt&&(tt=de.length);for(var Ne=(tt-Fe)/2,We=0,ht=Ne-1;We<Ne;ht=We++){var Wt=de[Fe+2*We+0],Xe=de[Fe+2*We+1],He=de[Fe+2*ht+1];Xe>me!=He>me&&g<(de[Fe+2*ht+0]-Wt)*(me-Xe)/(He-Xe)+Wt&&(Be=!Be)}return Be}},4179:(An,Lt,Ie)=>{var de=Ie(4018),Fe=Ie(8875);An.exports=function(g,me,Be,Ne){return me.length>0&&Array.isArray(me[0])?Fe(g,me,Be,Ne):de(g,me,Be,Ne)},An.exports.nested=Fe,An.exports.flat=de},8875:An=>{An.exports=function(Ie,de,Fe,tt){var g=Ie[0],me=Ie[1],Be=!1;void 0===Fe&&(Fe=0),void 0===tt&&(tt=de.length);for(var Ne=tt-Fe,We=0,ht=Ne-1;We<Ne;ht=We++){var Wt=de[We+Fe][0],Xe=de[We+Fe][1],He=de[ht+Fe][1];Xe>me!=He>me&&g<(de[ht+Fe][0]-Wt)*(me-Xe)/(He-Xe)+Wt&&(Be=!Be)}return Be}},8464:function(An){An.exports=function(){"use strict";function Lt(Pt,Pe){if(!(Pt instanceof Pe))throw new TypeError("Cannot call a class as a function")}function Ie(Pt,Pe){for(var Ae=0;Ae<Pe.length;Ae++){var Se=Pe[Ae];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(Pt,Se.key,Se)}}function de(Pt,Pe,Ae){return Pe&&Ie(Pt.prototype,Pe),Ae&&Ie(Pt,Ae),Pt}var Fe=function Pt(Pe,Ae){this.next=null,this.key=Pe,this.data=Ae,this.left=null,this.right=null};function tt(Pt,Pe){return Pt>Pe?1:Pt<Pe?-1:0}function g(Pt,Pe,Ae){for(var Se=new Fe(null,null),ut=Se,kt=Se;;){var cn=Ae(Pt,Pe.key);if(cn<0){if(null===Pe.left)break;if(Ae(Pt,Pe.left.key)<0&&(Pe.left=(Nn=Pe.left).right,Nn.right=Pe,null===(Pe=Nn).left))break;kt.left=Pe,kt=Pe,Pe=Pe.left}else{if(!(cn>0))break;if(null===Pe.right)break;var Nn;if(Ae(Pt,Pe.right.key)>0&&(Pe.right=(Nn=Pe.right).left,Nn.left=Pe,null===(Pe=Nn).right))break;ut.right=Pe,ut=Pe,Pe=Pe.right}}return ut.right=Pe.left,kt.left=Pe.right,Pe.left=Se.right,Pe.right=Se.left,Pe}function me(Pt,Pe,Ae,Se){var ut=new Fe(Pt,Pe);if(null===Ae)return ut.left=ut.right=null,ut;var kt=Se(Pt,(Ae=g(Pt,Ae,Se)).key);return kt<0?(ut.left=Ae.left,ut.right=Ae,Ae.left=null):kt>=0&&(ut.right=Ae.right,ut.left=Ae,Ae.right=null),ut}function Be(Pt,Pe,Ae){var Se=null,ut=null;if(Pe){var kt=Ae((Pe=g(Pt,Pe,Ae)).key,Pt);0===kt?(Se=Pe.left,ut=Pe.right):kt<0?(ut=Pe.right,Pe.right=null,Se=Pe):(Se=Pe.left,Pe.left=null,ut=Pe)}return{left:Se,right:ut}}function We(Pt,Pe,Ae,Se,ut){if(Pt){Se(Pe+(Ae?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+ut(Pt)+"\n");var kt=Pe+(Ae?"    ":"\u2502   ");Pt.left&&We(Pt.left,kt,!1,Se,ut),Pt.right&&We(Pt.right,kt,!0,Se,ut)}}var ht=function(){function Pt(Pe){void 0===Pe&&(Pe=tt),this._root=null,this._size=0,this._comparator=Pe}return Pt.prototype.insert=function(Pe,Ae){return this._size++,this._root=me(Pe,Ae,this._root,this._comparator)},Pt.prototype.add=function(Pe,Ae){var Se=new Fe(Pe,Ae);null===this._root&&(Se.left=Se.right=null,this._size++,this._root=Se);var ut=this._comparator,kt=g(Pe,this._root,ut),cn=ut(Pe,kt.key);return 0===cn?this._root=kt:(cn<0?(Se.left=kt.left,Se.right=kt,kt.left=null):cn>0&&(Se.right=kt.right,Se.left=kt,kt.right=null),this._size++,this._root=Se),this._root},Pt.prototype.remove=function(Pe){this._root=this._remove(Pe,this._root,this._comparator)},Pt.prototype._remove=function(Pe,Ae,Se){var ut;return null===Ae?null:0===Se(Pe,(Ae=g(Pe,Ae,Se)).key)?(null===Ae.left?ut=Ae.right:(ut=g(Pe,Ae.left,Se)).right=Ae.right,this._size--,ut):Ae},Pt.prototype.pop=function(){var Pe=this._root;if(Pe){for(;Pe.left;)Pe=Pe.left;return this._root=g(Pe.key,this._root,this._comparator),this._root=this._remove(Pe.key,this._root,this._comparator),{key:Pe.key,data:Pe.data}}return null},Pt.prototype.findStatic=function(Pe){for(var Ae=this._root,Se=this._comparator;Ae;){var ut=Se(Pe,Ae.key);if(0===ut)return Ae;Ae=ut<0?Ae.left:Ae.right}return null},Pt.prototype.find=function(Pe){return this._root&&(this._root=g(Pe,this._root,this._comparator),0!==this._comparator(Pe,this._root.key))?null:this._root},Pt.prototype.contains=function(Pe){for(var Ae=this._root,Se=this._comparator;Ae;){var ut=Se(Pe,Ae.key);if(0===ut)return!0;Ae=ut<0?Ae.left:Ae.right}return!1},Pt.prototype.forEach=function(Pe,Ae){for(var Se=this._root,ut=[],kt=!1;!kt;)null!==Se?(ut.push(Se),Se=Se.left):0!==ut.length?(Se=ut.pop(),Pe.call(Ae,Se),Se=Se.right):kt=!0;return this},Pt.prototype.range=function(Pe,Ae,Se,ut){for(var kt=[],cn=this._comparator,Nn=this._root;0!==kt.length||Nn;)if(Nn)kt.push(Nn),Nn=Nn.left;else{if(cn((Nn=kt.pop()).key,Ae)>0)break;if(cn(Nn.key,Pe)>=0&&Se.call(ut,Nn))return this;Nn=Nn.right}return this},Pt.prototype.keys=function(){var Pe=[];return this.forEach(function(Ae){return Pe.push(Ae.key)}),Pe},Pt.prototype.values=function(){var Pe=[];return this.forEach(function(Ae){return Pe.push(Ae.data)}),Pe},Pt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Pt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Pt.prototype.minNode=function(Pe){if(void 0===Pe&&(Pe=this._root),Pe)for(;Pe.left;)Pe=Pe.left;return Pe},Pt.prototype.maxNode=function(Pe){if(void 0===Pe&&(Pe=this._root),Pe)for(;Pe.right;)Pe=Pe.right;return Pe},Pt.prototype.at=function(Pe){for(var Ae=this._root,Se=!1,ut=0,kt=[];!Se;)if(Ae)kt.push(Ae),Ae=Ae.left;else if(kt.length>0){if(Ae=kt.pop(),ut===Pe)return Ae;ut++,Ae=Ae.right}else Se=!0;return null},Pt.prototype.next=function(Pe){var Ae=this._root,Se=null;if(Pe.right){for(Se=Pe.right;Se.left;)Se=Se.left;return Se}for(var ut=this._comparator;Ae;){var kt=ut(Pe.key,Ae.key);if(0===kt)break;kt<0?(Se=Ae,Ae=Ae.left):Ae=Ae.right}return Se},Pt.prototype.prev=function(Pe){var Ae=this._root,Se=null;if(null!==Pe.left){for(Se=Pe.left;Se.right;)Se=Se.right;return Se}for(var ut=this._comparator;Ae;){var kt=ut(Pe.key,Ae.key);if(0===kt)break;kt<0?Ae=Ae.left:(Se=Ae,Ae=Ae.right)}return Se},Pt.prototype.clear=function(){return this._root=null,this._size=0,this},Pt.prototype.toList=function(){return function et(Pt){for(var Pe=Pt,Ae=[],Se=!1,ut=new Fe(null,null),kt=ut;!Se;)Pe?(Ae.push(Pe),Pe=Pe.left):Ae.length>0?Pe=(Pe=kt=kt.next=Ae.pop()).right:Se=!0;return kt.next=null,ut.next}(this._root)},Pt.prototype.load=function(Pe,Ae,Se){void 0===Ae&&(Ae=[]),void 0===Se&&(Se=!1);var ut=Pe.length,kt=this._comparator;if(Se&&ce(Pe,Ae,0,ut-1,kt),null===this._root)this._root=Wt(Pe,Ae,0,ut),this._size=ut;else{var cn=function Bt(Pt,Pe,Ae){for(var Se=new Fe(null,null),ut=Se,kt=Pt,cn=Pe;null!==kt&&null!==cn;)Ae(kt.key,cn.key)<0?(ut.next=kt,kt=kt.next):(ut.next=cn,cn=cn.next),ut=ut.next;return null!==kt?ut.next=kt:null!==cn&&(ut.next=cn),Se.next}(this.toList(),function Xe(Pt,Pe){for(var Ae=new Fe(null,null),Se=Ae,ut=0;ut<Pt.length;ut++)Se=Se.next=new Fe(Pt[ut],Pe[ut]);return Se.next=null,Ae.next}(Pe,Ae),kt);this._root=He({head:cn},0,ut=this._size+ut)}return this},Pt.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(Pt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Pt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Pt.prototype.toString=function(Pe){void 0===Pe&&(Pe=function(ut){return String(ut.key)});var Ae=[];return We(this._root,"",!0,function(Se){return Ae.push(Se)},Pe),Ae.join("")},Pt.prototype.update=function(Pe,Ae,Se){var ut=this._comparator,kt=Be(Pe,this._root,ut),cn=kt.left,Nn=kt.right;ut(Pe,Ae)<0?Nn=me(Ae,Se,Nn,ut):cn=me(Ae,Se,cn,ut),this._root=function Ne(Pt,Pe,Ae){return null===Pe?Pt:(null===Pt||((Pe=g(Pt.key,Pe,Ae)).left=Pt),Pe)}(cn,Nn,ut)},Pt.prototype.split=function(Pe){return Be(Pe,this._root,this._comparator)},Pt}();function Wt(Pt,Pe,Ae,Se){var ut=Se-Ae;if(ut>0){var kt=Ae+Math.floor(ut/2),Fn=new Fe(Pt[kt],Pe[kt]);return Fn.left=Wt(Pt,Pe,Ae,kt),Fn.right=Wt(Pt,Pe,kt+1,Se),Fn}return null}function He(Pt,Pe,Ae){var Se=Ae-Pe;if(Se>0){var ut=Pe+Math.floor(Se/2),kt=He(Pt,Pe,ut),cn=Pt.head;return cn.left=kt,Pt.head=Pt.head.next,cn.right=He(Pt,ut+1,Ae),cn}return null}function ce(Pt,Pe,Ae,Se,ut){if(!(Ae>=Se)){for(var kt=Pt[Ae+Se>>1],cn=Ae-1,Nn=Se+1;;){do{cn++}while(ut(Pt[cn],kt)<0);do{Nn--}while(ut(Pt[Nn],kt)>0);if(cn>=Nn)break;var Fn=Pt[cn];Pt[cn]=Pt[Nn],Pt[Nn]=Fn,Fn=Pe[cn],Pe[cn]=Pe[Nn],Pe[Nn]=Fn}ce(Pt,Pe,Ae,Nn,ut),ce(Pt,Pe,Nn+1,Se,ut)}}var Ce=function(Pe,Ae){return Pe.ll.x<=Ae.x&&Ae.x<=Pe.ur.x&&Pe.ll.y<=Ae.y&&Ae.y<=Pe.ur.y},te=function(Pe,Ae){return Ae.ur.x<Pe.ll.x||Pe.ur.x<Ae.ll.x||Ae.ur.y<Pe.ll.y||Pe.ur.y<Ae.ll.y?null:{ll:{x:Pe.ll.x<Ae.ll.x?Ae.ll.x:Pe.ll.x,y:Pe.ll.y<Ae.ll.y?Ae.ll.y:Pe.ll.y},ur:{x:Pe.ur.x<Ae.ur.x?Pe.ur.x:Ae.ur.x,y:Pe.ur.y<Ae.ur.y?Pe.ur.y:Ae.ur.y}}},Q=Number.EPSILON;void 0===Q&&(Q=Math.pow(2,-52));var ne=Q*Q,Re=function(Pe,Ae){if(-Q<Pe&&Pe<Q&&-Q<Ae&&Ae<Q)return 0;var Se=Pe-Ae;return Se*Se<ne*Pe*Ae?0:Pe<Ae?-1:1},ie=function(){function Pt(){Lt(this,Pt),this.reset()}return de(Pt,[{key:"reset",value:function(){this.xRounder=new J,this.yRounder=new J}},{key:"round",value:function(Ae,Se){return{x:this.xRounder.round(Ae),y:this.yRounder.round(Se)}}}]),Pt}(),J=function(){function Pt(){Lt(this,Pt),this.tree=new ht,this.round(0)}return de(Pt,[{key:"round",value:function(Ae){var Se=this.tree.add(Ae),ut=this.tree.prev(Se);if(null!==ut&&0===Re(Se.key,ut.key))return this.tree.remove(Ae),ut.key;var kt=this.tree.next(Se);return null!==kt&&0===Re(Se.key,kt.key)?(this.tree.remove(Ae),kt.key):Ae}}]),Pt}(),xe=new ie,ee=function(Pe,Ae){return Pe.x*Ae.y-Pe.y*Ae.x},pe=function(Pe,Ae){return Pe.x*Ae.x+Pe.y*Ae.y},ae=function(Pe,Ae,Se){var cn=ee({x:Ae.x-Pe.x,y:Ae.y-Pe.y},{x:Se.x-Pe.x,y:Se.y-Pe.y});return Re(cn,0)},we=function(Pe){return Math.sqrt(pe(Pe,Pe))},oe=function(Pe,Ae,Se){var ut={x:Ae.x-Pe.x,y:Ae.y-Pe.y},kt={x:Se.x-Pe.x,y:Se.y-Pe.y};return ee(kt,ut)/we(kt)/we(ut)},je=function(Pe,Ae,Se){var ut={x:Ae.x-Pe.x,y:Ae.y-Pe.y},kt={x:Se.x-Pe.x,y:Se.y-Pe.y};return pe(kt,ut)/we(kt)/we(ut)},Te=function(Pe,Ae,Se){return 0===Ae.y?null:{x:Pe.x+Ae.x/Ae.y*(Se-Pe.y),y:Se}},K=function(Pe,Ae,Se){return 0===Ae.x?null:{x:Se,y:Pe.y+Ae.y/Ae.x*(Se-Pe.x)}},Me=function(){function Pt(Pe,Ae){Lt(this,Pt),void 0===Pe.events?Pe.events=[this]:Pe.events.push(this),this.point=Pe,this.isLeft=Ae}return de(Pt,null,[{key:"compare",value:function(Ae,Se){var ut=Pt.comparePoints(Ae.point,Se.point);return 0!==ut?ut:(Ae.point!==Se.point&&Ae.link(Se),Ae.isLeft!==Se.isLeft?Ae.isLeft?1:-1:Ue.compare(Ae.segment,Se.segment))}},{key:"comparePoints",value:function(Ae,Se){return Ae.x<Se.x?-1:Ae.x>Se.x?1:Ae.y<Se.y?-1:Ae.y>Se.y?1:0}}]),de(Pt,[{key:"link",value:function(Ae){if(Ae.point===this.point)throw new Error("Tried to link already linked events");for(var Se=Ae.point.events,ut=0,kt=Se.length;ut<kt;ut++){var cn=Se[ut];this.point.events.push(cn),cn.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Ae=this.point.events.length,Se=0;Se<Ae;Se++){var ut=this.point.events[Se];if(void 0===ut.segment.consumedBy)for(var kt=Se+1;kt<Ae;kt++){var cn=this.point.events[kt];void 0===cn.consumedBy&&ut.otherSE.point.events===cn.otherSE.point.events&&ut.segment.consume(cn.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Ae=[],Se=0,ut=this.point.events.length;Se<ut;Se++){var kt=this.point.events[Se];kt!==this&&!kt.segment.ringOut&&kt.segment.isInResult()&&Ae.push(kt)}return Ae}},{key:"getLeftmostComparator",value:function(Ae){var Se=this,ut=new Map,kt=function(Nn){var Fn=Nn.otherSE;ut.set(Nn,{sine:oe(Se.point,Ae.point,Fn.point),cosine:je(Se.point,Ae.point,Fn.point)})};return function(cn,Nn){ut.has(cn)||kt(cn),ut.has(Nn)||kt(Nn);var Fn=ut.get(cn),vn=Fn.sine,Yr=Fn.cosine,si=ut.get(Nn),sr=si.sine,Cr=si.cosine;return vn>=0&&sr>=0?Yr<Cr?1:Yr>Cr?-1:0:vn<0&&sr<0?Yr<Cr?-1:Yr>Cr?1:0:sr<vn?-1:sr>vn?1:0}}}]),Pt}(),Je=0,Ue=function(){function Pt(Pe,Ae,Se,ut){Lt(this,Pt),this.id=++Je,this.leftSE=Pe,Pe.segment=this,Pe.otherSE=Ae,this.rightSE=Ae,Ae.segment=this,Ae.otherSE=Pe,this.rings=Se,this.windings=ut}return de(Pt,null,[{key:"compare",value:function(Ae,Se){var ut=Ae.leftSE.point.x,kt=Se.leftSE.point.x,cn=Ae.rightSE.point.x,Nn=Se.rightSE.point.x;if(Nn<ut)return 1;if(cn<kt)return-1;var Fn=Ae.leftSE.point.y,vn=Se.leftSE.point.y,Yr=Ae.rightSE.point.y,si=Se.rightSE.point.y;if(ut<kt){if(vn<Fn&&vn<Yr)return 1;if(vn>Fn&&vn>Yr)return-1;var sr=Ae.comparePoint(Se.leftSE.point);if(sr<0)return 1;if(sr>0)return-1;var Cr=Se.comparePoint(Ae.rightSE.point);return 0!==Cr?Cr:-1}if(ut>kt){if(Fn<vn&&Fn<si)return-1;if(Fn>vn&&Fn>si)return 1;var Ei=Se.comparePoint(Ae.leftSE.point);if(0!==Ei)return Ei;var Hr=Ae.comparePoint(Se.rightSE.point);return Hr<0?1:Hr>0?-1:1}if(Fn<vn)return-1;if(Fn>vn)return 1;if(cn<Nn){var _i=Se.comparePoint(Ae.rightSE.point);if(0!==_i)return _i}if(cn>Nn){var Ni=Ae.comparePoint(Se.rightSE.point);if(Ni<0)return 1;if(Ni>0)return-1}if(cn!==Nn){var zi=Yr-Fn,yo=cn-ut,_t=si-vn,De=Nn-kt;if(zi>yo&&_t<De)return 1;if(zi<yo&&_t>De)return-1}return cn>Nn?1:cn<Nn||Yr<si?-1:Yr>si?1:Ae.id<Se.id?-1:Ae.id>Se.id?1:0}}]),de(Pt,[{key:"replaceRightSE",value:function(Ae){this.rightSE=Ae,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Ae=this.leftSE.point.y,Se=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Ae<Se?Ae:Se},ur:{x:this.rightSE.point.x,y:Ae>Se?Ae:Se}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Ae){return Ae.x===this.leftSE.point.x&&Ae.y===this.leftSE.point.y||Ae.x===this.rightSE.point.x&&Ae.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Ae){if(this.isAnEndpoint(Ae))return 0;var Se=this.leftSE.point,ut=this.rightSE.point,kt=this.vector();if(Se.x===ut.x)return Ae.x===Se.x?0:Ae.x<Se.x?1:-1;if(Ae.x===Se.x+(Ae.y-Se.y)/kt.y*kt.x)return 0;var vn=Se.y+(Ae.x-Se.x)/kt.x*kt.y;return Ae.y===vn?0:Ae.y<vn?-1:1}},{key:"getIntersection",value:function(Ae){var Se=this.bbox(),ut=Ae.bbox(),kt=te(Se,ut);if(null===kt)return null;var cn=this.leftSE.point,Nn=this.rightSE.point,Fn=Ae.leftSE.point,vn=Ae.rightSE.point,Yr=Ce(Se,Fn)&&0===this.comparePoint(Fn),si=Ce(ut,cn)&&0===Ae.comparePoint(cn),sr=Ce(Se,vn)&&0===this.comparePoint(vn),Cr=Ce(ut,Nn)&&0===Ae.comparePoint(Nn);if(si&&Yr)return Cr&&!sr?Nn:!Cr&&sr?vn:null;if(si)return sr&&cn.x===vn.x&&cn.y===vn.y?null:cn;if(Yr)return Cr&&Nn.x===Fn.x&&Nn.y===Fn.y?null:Fn;if(Cr&&sr)return null;if(Cr)return Nn;if(sr)return vn;var Ei=function(Pe,Ae,Se,ut){if(0===Ae.x)return K(Se,ut,Pe.x);if(0===ut.x)return K(Pe,Ae,Se.x);if(0===Ae.y)return Te(Se,ut,Pe.y);if(0===ut.y)return Te(Pe,Ae,Se.y);var kt=ee(Ae,ut);if(0==kt)return null;var cn={x:Se.x-Pe.x,y:Se.y-Pe.y},Nn=ee(cn,Ae)/kt,Fn=ee(cn,ut)/kt;return{x:(Pe.x+Fn*Ae.x+(Se.x+Nn*ut.x))/2,y:(Pe.y+Fn*Ae.y+(Se.y+Nn*ut.y))/2}}(cn,this.vector(),Fn,Ae.vector());return null!==Ei&&Ce(kt,Ei)?xe.round(Ei.x,Ei.y):null}},{key:"split",value:function(Ae){var Se=[],ut=void 0!==Ae.events,kt=new Me(Ae,!0),cn=new Me(Ae,!1),Nn=this.rightSE;this.replaceRightSE(cn),Se.push(cn),Se.push(kt);var Fn=new Pt(kt,Nn,this.rings.slice(),this.windings.slice());return Me.comparePoints(Fn.leftSE.point,Fn.rightSE.point)>0&&Fn.swapEvents(),Me.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),ut&&(kt.checkForConsuming(),cn.checkForConsuming()),Se}},{key:"swapEvents",value:function(){var Ae=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Ae,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Se=0,ut=this.windings.length;Se<ut;Se++)this.windings[Se]*=-1}},{key:"consume",value:function(Ae){for(var Se=this,ut=Ae;Se.consumedBy;)Se=Se.consumedBy;for(;ut.consumedBy;)ut=ut.consumedBy;var kt=Pt.compare(Se,ut);if(0!==kt){if(kt>0){var cn=Se;Se=ut,ut=cn}if(Se.prev===ut){var Nn=Se;Se=ut,ut=Nn}for(var Fn=0,vn=ut.rings.length;Fn<vn;Fn++){var Yr=ut.rings[Fn],si=ut.windings[Fn],sr=Se.rings.indexOf(Yr);-1===sr?(Se.rings.push(Yr),Se.windings.push(si)):Se.windings[sr]+=si}ut.rings=null,ut.windings=null,ut.consumedBy=Se,ut.leftSE.consumedBy=Se.leftSE,ut.rightSE.consumedBy=Se.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var Ae=this.beforeState();this._afterState={rings:Ae.rings.slice(0),windings:Ae.windings.slice(0),multiPolys:[]};for(var Se=this._afterState.rings,ut=this._afterState.windings,kt=this._afterState.multiPolys,cn=0,Nn=this.rings.length;cn<Nn;cn++){var Fn=this.rings[cn],vn=this.windings[cn],Yr=Se.indexOf(Fn);-1===Yr?(Se.push(Fn),ut.push(vn)):ut[Yr]+=vn}for(var si=[],sr=[],Cr=0,Ei=Se.length;Cr<Ei;Cr++)if(0!==ut[Cr]){var Hr=Se[Cr],_i=Hr.poly;if(-1===sr.indexOf(_i))if(Hr.isExterior)si.push(_i);else{-1===sr.indexOf(_i)&&sr.push(_i);var Ni=si.indexOf(Hr.poly);-1!==Ni&&si.splice(Ni,1)}}for(var zi=0,yo=si.length;zi<yo;zi++){var _t=si[zi].multiPoly;-1===kt.indexOf(_t)&&kt.push(_t)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var Ae=this.beforeState().multiPolys,Se=this.afterState().multiPolys;switch(Tn.type){case"union":this._isInResult=0===Ae.length!=(0===Se.length);break;case"intersection":var cn,Nn;Ae.length<Se.length?(cn=Ae.length,Nn=Se.length):(cn=Se.length,Nn=Ae.length),this._isInResult=Nn===Tn.numMultiPolys&&cn<Nn;break;case"xor":var Fn=Math.abs(Ae.length-Se.length);this._isInResult=Fn%2==1;break;case"difference":var vn=function(si){return 1===si.length&&si[0].isSubject};this._isInResult=vn(Ae)!==vn(Se);break;default:throw new Error("Unrecognized operation type found ".concat(Tn.type))}return this._isInResult}}],[{key:"fromRing",value:function(Ae,Se,ut){var kt,cn,Nn,Fn=Me.comparePoints(Ae,Se);if(Fn<0)kt=Ae,cn=Se,Nn=1;else{if(!(Fn>0))throw new Error("Tried to create degenerate segment at [".concat(Ae.x,", ").concat(Ae.y,"]"));kt=Se,cn=Ae,Nn=-1}return new Pt(new Me(kt,!0),new Me(cn,!1),[ut],[Nn])}}]),Pt}(),le=function(){function Pt(Pe,Ae,Se){if(Lt(this,Pt),!Array.isArray(Pe)||0===Pe.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Ae,this.isExterior=Se,this.segments=[],"number"!=typeof Pe[0][0]||"number"!=typeof Pe[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ut=xe.round(Pe[0][0],Pe[0][1]);this.bbox={ll:{x:ut.x,y:ut.y},ur:{x:ut.x,y:ut.y}};for(var kt=ut,cn=1,Nn=Pe.length;cn<Nn;cn++){if("number"!=typeof Pe[cn][0]||"number"!=typeof Pe[cn][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Fn=xe.round(Pe[cn][0],Pe[cn][1]);Fn.x===kt.x&&Fn.y===kt.y||(this.segments.push(Ue.fromRing(kt,Fn,this)),Fn.x<this.bbox.ll.x&&(this.bbox.ll.x=Fn.x),Fn.y<this.bbox.ll.y&&(this.bbox.ll.y=Fn.y),Fn.x>this.bbox.ur.x&&(this.bbox.ur.x=Fn.x),Fn.y>this.bbox.ur.y&&(this.bbox.ur.y=Fn.y),kt=Fn)}(ut.x!==kt.x||ut.y!==kt.y)&&this.segments.push(Ue.fromRing(kt,ut,this))}return de(Pt,[{key:"getSweepEvents",value:function(){for(var Ae=[],Se=0,ut=this.segments.length;Se<ut;Se++){var kt=this.segments[Se];Ae.push(kt.leftSE),Ae.push(kt.rightSE)}return Ae}}]),Pt}(),Qe=function(){function Pt(Pe,Ae){if(Lt(this,Pt),!Array.isArray(Pe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new le(Pe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Se=1,ut=Pe.length;Se<ut;Se++){var kt=new le(Pe[Se],this,!1);kt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=kt.bbox.ll.x),kt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=kt.bbox.ll.y),kt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=kt.bbox.ur.x),kt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=kt.bbox.ur.y),this.interiorRings.push(kt)}this.multiPoly=Ae}return de(Pt,[{key:"getSweepEvents",value:function(){for(var Ae=this.exteriorRing.getSweepEvents(),Se=0,ut=this.interiorRings.length;Se<ut;Se++)for(var kt=this.interiorRings[Se].getSweepEvents(),cn=0,Nn=kt.length;cn<Nn;cn++)Ae.push(kt[cn]);return Ae}}]),Pt}(),lt=function(){function Pt(Pe,Ae){if(Lt(this,Pt),!Array.isArray(Pe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof Pe[0][0][0]&&(Pe=[Pe])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Se=0,ut=Pe.length;Se<ut;Se++){var kt=new Qe(Pe[Se],this);kt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=kt.bbox.ll.x),kt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=kt.bbox.ll.y),kt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=kt.bbox.ur.x),kt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=kt.bbox.ur.y),this.polys.push(kt)}this.isSubject=Ae}return de(Pt,[{key:"getSweepEvents",value:function(){for(var Ae=[],Se=0,ut=this.polys.length;Se<ut;Se++)for(var kt=this.polys[Se].getSweepEvents(),cn=0,Nn=kt.length;cn<Nn;cn++)Ae.push(kt[cn]);return Ae}}]),Pt}(),dn=function(){function Pt(Pe){Lt(this,Pt),this.events=Pe;for(var Ae=0,Se=Pe.length;Ae<Se;Ae++)Pe[Ae].segment.ringOut=this;this.poly=null}return de(Pt,null,[{key:"factory",value:function(Ae){for(var Se=[],ut=0,kt=Ae.length;ut<kt;ut++){var cn=Ae[ut];if(cn.isInResult()&&!cn.ringOut){for(var Nn=null,Fn=cn.leftSE,vn=cn.rightSE,Yr=[Fn],si=Fn.point,sr=[];Nn=Fn,Yr.push(Fn=vn),Fn.point!==si;)for(;;){var Cr=Fn.getAvailableLinkedEvents();if(0===Cr.length){var Ei=Yr[0].point,Hr=Yr[Yr.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Ei.x,",")+" ".concat(Ei.y,"]. Last matching segment found ends at")+" [".concat(Hr.x,", ").concat(Hr.y,"]."))}if(1===Cr.length){vn=Cr[0].otherSE;break}for(var _i=null,Ni=0,zi=sr.length;Ni<zi;Ni++)if(sr[Ni].point===Fn.point){_i=Ni;break}if(null===_i){sr.push({index:Yr.length,point:Fn.point});var De=Fn.getLeftmostComparator(Nn);vn=Cr.sort(De)[0].otherSE;break}var yo=sr.splice(_i)[0],_t=Yr.splice(yo.index);_t.unshift(_t[0].otherSE),Se.push(new Pt(_t.reverse()))}Se.push(new Pt(Yr))}}return Se}}]),de(Pt,[{key:"getGeom",value:function(){for(var Ae=this.events[0].point,Se=[Ae],ut=1,kt=this.events.length-1;ut<kt;ut++){var cn=this.events[ut].point;0!==ae(cn,Ae,this.events[ut+1].point)&&(Se.push(cn),Ae=cn)}if(1===Se.length)return null;0===ae(Se[0],Ae,Se[1])&&Se.shift(),Se.push(Se[0]);for(var Yr=this.isExteriorRing()?1:-1,si=this.isExteriorRing()?0:Se.length-1,sr=this.isExteriorRing()?Se.length:-1,Cr=[],Ei=si;Ei!=sr;Ei+=Yr)Cr.push([Se[Ei].x,Se[Ei].y]);return Cr}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var Ae=this.enclosingRing();this._isExteriorRing=!Ae||!Ae.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Ae=this.events[0],Se=1,ut=this.events.length;Se<ut;Se++){var kt=this.events[Se];Me.compare(Ae,kt)>0&&(Ae=kt)}for(var cn=Ae.segment.prevInResult(),Nn=cn?cn.prevInResult():null;;){if(!cn)return null;if(!Nn)return cn.ringOut;if(Nn.ringOut!==cn.ringOut)return Nn.ringOut.enclosingRing()!==cn.ringOut?cn.ringOut:cn.ringOut.enclosingRing();cn=Nn.prevInResult(),Nn=cn?cn.prevInResult():null}}}]),Pt}(),Xt=function(){function Pt(Pe){Lt(this,Pt),this.exteriorRing=Pe,Pe.poly=this,this.interiorRings=[]}return de(Pt,[{key:"addInterior",value:function(Ae){this.interiorRings.push(Ae),Ae.poly=this}},{key:"getGeom",value:function(){var Ae=[this.exteriorRing.getGeom()];if(null===Ae[0])return null;for(var Se=0,ut=this.interiorRings.length;Se<ut;Se++){var kt=this.interiorRings[Se].getGeom();null!==kt&&Ae.push(kt)}return Ae}}]),Pt}(),_n=function(){function Pt(Pe){Lt(this,Pt),this.rings=Pe,this.polys=this._composePolys(Pe)}return de(Pt,[{key:"getGeom",value:function(){for(var Ae=[],Se=0,ut=this.polys.length;Se<ut;Se++){var kt=this.polys[Se].getGeom();null!==kt&&Ae.push(kt)}return Ae}},{key:"_composePolys",value:function(Ae){for(var Se=[],ut=0,kt=Ae.length;ut<kt;ut++){var cn=Ae[ut];if(!cn.poly)if(cn.isExteriorRing())Se.push(new Xt(cn));else{var Nn=cn.enclosingRing();Nn.poly||Se.push(new Xt(Nn)),Nn.poly.addInterior(cn)}}return Se}}]),Pt}(),Pn=function(){function Pt(Pe){var Ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue.compare;Lt(this,Pt),this.queue=Pe,this.tree=new ht(Ae),this.segments=[]}return de(Pt,[{key:"process",value:function(Ae){var Se=Ae.segment,ut=[];if(Ae.consumedBy)return Ae.isLeft?this.queue.remove(Ae.otherSE):this.tree.remove(Se),ut;var kt=Ae.isLeft?this.tree.insert(Se):this.tree.find(Se);if(!kt)throw new Error("Unable to find segment #".concat(Se.id," ")+"[".concat(Se.leftSE.point.x,", ").concat(Se.leftSE.point.y,"] -> ")+"[".concat(Se.rightSE.point.x,", ").concat(Se.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var cn=kt,Nn=kt,Fn=void 0,vn=void 0;void 0===Fn;)null===(cn=this.tree.prev(cn))?Fn=null:void 0===cn.key.consumedBy&&(Fn=cn.key);for(;void 0===vn;)null===(Nn=this.tree.next(Nn))?vn=null:void 0===Nn.key.consumedBy&&(vn=Nn.key);if(Ae.isLeft){var Yr=null;if(Fn){var si=Fn.getIntersection(Se);if(null!==si&&(Se.isAnEndpoint(si)||(Yr=si),!Fn.isAnEndpoint(si)))for(var sr=this._splitSafely(Fn,si),Cr=0,Ei=sr.length;Cr<Ei;Cr++)ut.push(sr[Cr])}var Hr=null;if(vn){var _i=vn.getIntersection(Se);if(null!==_i&&(Se.isAnEndpoint(_i)||(Hr=_i),!vn.isAnEndpoint(_i)))for(var Ni=this._splitSafely(vn,_i),zi=0,yo=Ni.length;zi<yo;zi++)ut.push(Ni[zi])}if(null!==Yr||null!==Hr){var _t;_t=null===Yr?Hr:null===Hr||Me.comparePoints(Yr,Hr)<=0?Yr:Hr,this.queue.remove(Se.rightSE),ut.push(Se.rightSE);for(var ke=Se.split(_t),gt=0,It=ke.length;gt<It;gt++)ut.push(ke[gt])}ut.length>0?(this.tree.remove(Se),ut.push(Ae)):(this.segments.push(Se),Se.prev=Fn)}else{if(Fn&&vn){var ct=Fn.getIntersection(vn);if(null!==ct){if(!Fn.isAnEndpoint(ct))for(var nn=this._splitSafely(Fn,ct),Qt=0,Dt=nn.length;Qt<Dt;Qt++)ut.push(nn[Qt]);if(!vn.isAnEndpoint(ct))for(var hn=this._splitSafely(vn,ct),qn=0,nr=hn.length;qn<nr;qn++)ut.push(hn[qn])}}this.tree.remove(Se)}return ut}},{key:"_splitSafely",value:function(Ae,Se){this.tree.remove(Ae);var ut=Ae.rightSE;this.queue.remove(ut);var kt=Ae.split(Se);return kt.push(ut),void 0===Ae.consumedBy&&this.tree.insert(Ae),kt}}]),Pt}(),Qn=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,jt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Tn=new(function(){function Pt(){Lt(this,Pt)}return de(Pt,[{key:"run",value:function(Ae,Se,ut){Tn.type=Ae,xe.reset();for(var kt=[new lt(Se,!0)],cn=0,Nn=ut.length;cn<Nn;cn++)kt.push(new lt(ut[cn],!1));if(Tn.numMultiPolys=kt.length,"difference"===Tn.type)for(var Fn=kt[0],vn=1;vn<kt.length;)null!==te(kt[vn].bbox,Fn.bbox)?vn++:kt.splice(vn,1);if("intersection"===Tn.type)for(var Yr=0,si=kt.length;Yr<si;Yr++)for(var sr=kt[Yr],Cr=Yr+1,Ei=kt.length;Cr<Ei;Cr++)if(null===te(sr.bbox,kt[Cr].bbox))return[];for(var Hr=new ht(Me.compare),_i=0,Ni=kt.length;_i<Ni;_i++)for(var zi=kt[_i].getSweepEvents(),yo=0,_t=zi.length;yo<_t;yo++)if(Hr.insert(zi[yo]),Hr.size>Qn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var De=new Pn(Hr),ke=Hr.size,gt=Hr.pop();gt;){var It=gt.key;if(Hr.size===ke){var ct=It.segment;throw new Error("Unable to pop() ".concat(It.isLeft?"left":"right"," SweepEvent ")+"[".concat(It.point.x,", ").concat(It.point.y,"] from segment #").concat(ct.id," ")+"[".concat(ct.leftSE.point.x,", ").concat(ct.leftSE.point.y,"] -> ")+"[".concat(ct.rightSE.point.x,", ").concat(ct.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Hr.size>Qn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(De.segments.length>jt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var nn=De.process(It),Qt=0,Dt=nn.length;Qt<Dt;Qt++){var hn=nn[Qt];void 0===hn.consumedBy&&Hr.insert(hn)}ke=Hr.size,gt=Hr.pop()}xe.reset();var qn=dn.factory(De.segments);return new _n(qn).getGeom()}}]),Pt}());return{union:function(Pe){for(var Ae=arguments.length,Se=new Array(Ae>1?Ae-1:0),ut=1;ut<Ae;ut++)Se[ut-1]=arguments[ut];return Tn.run("union",Pe,Se)},intersection:function(Pe){for(var Ae=arguments.length,Se=new Array(Ae>1?Ae-1:0),ut=1;ut<Ae;ut++)Se[ut-1]=arguments[ut];return Tn.run("intersection",Pe,Se)},xor:function(Pe){for(var Ae=arguments.length,Se=new Array(Ae>1?Ae-1:0),ut=1;ut<Ae;ut++)Se[ut-1]=arguments[ut];return Tn.run("xor",Pe,Se)},difference:function(Pe){for(var Ae=arguments.length,Se=new Array(Ae>1?Ae-1:0),ut=1;ut<Ae;ut++)Se[ut-1]=arguments[ut];return Tn.run("difference",Pe,Se)}}}()},7861:(An,Lt,Ie)=>{"use strict";An.exports=Fe,An.exports.default=Fe;var de=Ie(2136);function Fe(te,Q){if(!(this instanceof Fe))return new Fe(te,Q);this._maxEntries=Math.max(4,te||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),Q&&this._initFormat(Q),this.clear()}function tt(te,Q,ne){if(!ne)return Q.indexOf(te);for(var Re=0;Re<Q.length;Re++)if(ne(te,Q[Re]))return Re;return-1}function g(te,Q){me(te,0,te.children.length,Q,te)}function me(te,Q,ne,Re,ie){ie||(ie=ce(null)),ie.minX=1/0,ie.minY=1/0,ie.maxX=-1/0,ie.maxY=-1/0;for(var xe,J=Q;J<ne;J++)xe=te.children[J],Be(ie,te.leaf?Re(xe):xe);return ie}function Be(te,Q){return te.minX=Math.min(te.minX,Q.minX),te.minY=Math.min(te.minY,Q.minY),te.maxX=Math.max(te.maxX,Q.maxX),te.maxY=Math.max(te.maxY,Q.maxY),te}function Ne(te,Q){return te.minX-Q.minX}function We(te,Q){return te.minY-Q.minY}function ht(te){return(te.maxX-te.minX)*(te.maxY-te.minY)}function Wt(te){return te.maxX-te.minX+(te.maxY-te.minY)}function Xe(te,Q){return(Math.max(Q.maxX,te.maxX)-Math.min(Q.minX,te.minX))*(Math.max(Q.maxY,te.maxY)-Math.min(Q.minY,te.minY))}function et(te,Q){var ne=Math.max(te.minX,Q.minX),Re=Math.max(te.minY,Q.minY),ie=Math.min(te.maxX,Q.maxX),J=Math.min(te.maxY,Q.maxY);return Math.max(0,ie-ne)*Math.max(0,J-Re)}function He(te,Q){return te.minX<=Q.minX&&te.minY<=Q.minY&&Q.maxX<=te.maxX&&Q.maxY<=te.maxY}function Bt(te,Q){return Q.minX<=te.maxX&&Q.minY<=te.maxY&&Q.maxX>=te.minX&&Q.maxY>=te.minY}function ce(te){return{children:te,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ce(te,Q,ne,Re,ie){for(var xe,J=[Q,ne];J.length;)!((ne=J.pop())-(Q=J.pop())<=Re)&&(xe=Q+Math.ceil((ne-Q)/Re/2)*Re,de(te,xe,Q,ne,ie),J.push(Q,xe,xe,ne))}Fe.prototype={all:function(){return this._all(this.data,[])},search:function(te){var Q=this.data,ne=[],Re=this.toBBox;if(!Bt(te,Q))return ne;for(var J,xe,ee,pe,ie=[];Q;){for(J=0,xe=Q.children.length;J<xe;J++)ee=Q.children[J],Bt(te,pe=Q.leaf?Re(ee):ee)&&(Q.leaf?ne.push(ee):He(te,pe)?this._all(ee,ne):ie.push(ee));Q=ie.pop()}return ne},collides:function(te){var Q=this.data,ne=this.toBBox;if(!Bt(te,Q))return!1;for(var ie,J,xe,ee,Re=[];Q;){for(ie=0,J=Q.children.length;ie<J;ie++)if(xe=Q.children[ie],Bt(te,ee=Q.leaf?ne(xe):xe)){if(Q.leaf||He(te,ee))return!0;Re.push(xe)}Q=Re.pop()}return!1},load:function(te){if(!te||!te.length)return this;if(te.length<this._minEntries){for(var Q=0,ne=te.length;Q<ne;Q++)this.insert(te[Q]);return this}var Re=this._build(te.slice(),0,te.length-1,0);if(this.data.children.length)if(this.data.height===Re.height)this._splitRoot(this.data,Re);else{if(this.data.height<Re.height){var ie=this.data;this.data=Re,Re=ie}this._insert(Re,this.data.height-Re.height-1,!0)}else this.data=Re;return this},insert:function(te){return te&&this._insert(te,this.data.height-1),this},clear:function(){return this.data=ce([]),this},remove:function(te,Q){if(!te)return this;for(var xe,ee,pe,ae,ne=this.data,Re=this.toBBox(te),ie=[],J=[];ne||ie.length;){if(ne||(ne=ie.pop(),ee=ie[ie.length-1],xe=J.pop(),ae=!0),ne.leaf&&-1!==(pe=tt(te,ne.children,Q)))return ne.children.splice(pe,1),ie.push(ne),this._condense(ie),this;ae||ne.leaf||!He(ne,Re)?ee?(xe++,ne=ee.children[xe],ae=!1):ne=null:(ie.push(ne),J.push(xe),xe=0,ee=ne,ne=ne.children[0])}return this},toBBox:function(te){return te},compareMinX:Ne,compareMinY:We,toJSON:function(){return this.data},fromJSON:function(te){return this.data=te,this},_all:function(te,Q){for(var ne=[];te;)te.leaf?Q.push.apply(Q,te.children):ne.push.apply(ne,te.children),te=ne.pop();return Q},_build:function(te,Q,ne,Re){var xe,ie=ne-Q+1,J=this._maxEntries;if(ie<=J)return g(xe=ce(te.slice(Q,ne+1)),this.toBBox),xe;Re||(Re=Math.ceil(Math.log(ie)/Math.log(J)),J=Math.ceil(ie/Math.pow(J,Re-1))),(xe=ce([])).leaf=!1,xe.height=Re;var ae,we,oe,je,ee=Math.ceil(ie/J),pe=ee*Math.ceil(Math.sqrt(J));for(Ce(te,Q,ne,pe,this.compareMinX),ae=Q;ae<=ne;ae+=pe)for(Ce(te,ae,oe=Math.min(ae+pe-1,ne),ee,this.compareMinY),we=ae;we<=oe;we+=ee)je=Math.min(we+ee-1,oe),xe.children.push(this._build(te,we,je,Re-1));return g(xe,this.toBBox),xe},_chooseSubtree:function(te,Q,ne,Re){for(var ie,J,xe,ee,pe,ae,we,oe;Re.push(Q),!Q.leaf&&Re.length-1!==ne;){for(we=oe=1/0,ie=0,J=Q.children.length;ie<J;ie++)pe=ht(xe=Q.children[ie]),(ae=Xe(te,xe)-pe)<oe?(oe=ae,we=pe<we?pe:we,ee=xe):ae===oe&&pe<we&&(we=pe,ee=xe);Q=ee||Q.children[0]}return Q},_insert:function(te,Q,ne){var ie=ne?te:(0,this.toBBox)(te),J=[],xe=this._chooseSubtree(ie,this.data,Q,J);for(xe.children.push(te),Be(xe,ie);Q>=0&&J[Q].children.length>this._maxEntries;)this._split(J,Q),Q--;this._adjustParentBBoxes(ie,J,Q)},_split:function(te,Q){var ne=te[Q],Re=ne.children.length,ie=this._minEntries;this._chooseSplitAxis(ne,ie,Re);var J=this._chooseSplitIndex(ne,ie,Re),xe=ce(ne.children.splice(J,ne.children.length-J));xe.height=ne.height,xe.leaf=ne.leaf,g(ne,this.toBBox),g(xe,this.toBBox),Q?te[Q-1].children.push(xe):this._splitRoot(ne,xe)},_splitRoot:function(te,Q){this.data=ce([te,Q]),this.data.height=te.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},_chooseSplitIndex:function(te,Q,ne){var Re,ie,J,xe,ee,pe,ae,we;for(pe=ae=1/0,Re=Q;Re<=ne-Q;Re++)xe=et(ie=me(te,0,Re,this.toBBox),J=me(te,Re,ne,this.toBBox)),ee=ht(ie)+ht(J),xe<pe?(pe=xe,we=Re,ae=ee<ae?ee:ae):xe===pe&&ee<ae&&(ae=ee,we=Re);return we},_chooseSplitAxis:function(te,Q,ne){var Re=te.leaf?this.compareMinX:Ne,ie=te.leaf?this.compareMinY:We;this._allDistMargin(te,Q,ne,Re)<this._allDistMargin(te,Q,ne,ie)&&te.children.sort(Re)},_allDistMargin:function(te,Q,ne,Re){te.children.sort(Re);var pe,ae,ie=this.toBBox,J=me(te,0,Q,ie),xe=me(te,ne-Q,ne,ie),ee=Wt(J)+Wt(xe);for(pe=Q;pe<ne-Q;pe++)ae=te.children[pe],Be(J,te.leaf?ie(ae):ae),ee+=Wt(J);for(pe=ne-Q-1;pe>=Q;pe--)ae=te.children[pe],Be(xe,te.leaf?ie(ae):ae),ee+=Wt(xe);return ee},_adjustParentBBoxes:function(te,Q,ne){for(var Re=ne;Re>=0;Re--)Be(Q[Re],te)},_condense:function(te){for(var ne,Q=te.length-1;Q>=0;Q--)0===te[Q].children.length?Q>0?(ne=te[Q-1].children).splice(ne.indexOf(te[Q]),1):this.clear():g(te[Q],this.toBBox)},_initFormat:function(te){var Q=["return a"," - b",";"];this.compareMinX=new Function("a","b",Q.join(te[0])),this.compareMinY=new Function("a","b",Q.join(te[1])),this.toBBox=new Function("a","return {minX: a"+te[0]+", minY: a"+te[1]+", maxX: a"+te[2]+", maxY: a"+te[3]+"};")}}},2136:function(An){An.exports=function(){"use strict";function Ie(tt,g,me,Be,Ne){for(;Be>me;){if(Be-me>600){var We=Be-me+1,ht=g-me+1,Wt=Math.log(We),Xe=.5*Math.exp(2*Wt/3),et=.5*Math.sqrt(Wt*Xe*(We-Xe)/We)*(ht-We/2<0?-1:1);Ie(tt,g,Math.max(me,Math.floor(g-ht*Xe/We+et)),Math.min(Be,Math.floor(g+(We-ht)*Xe/We+et)),Ne)}var ce=tt[g],Ce=me,te=Be;for(de(tt,me,g),Ne(tt[Be],ce)>0&&de(tt,me,Be);Ce<te;){for(de(tt,Ce,te),Ce++,te--;Ne(tt[Ce],ce)<0;)Ce++;for(;Ne(tt[te],ce)>0;)te--}0===Ne(tt[me],ce)?de(tt,me,te):de(tt,++te,Be),te<=g&&(me=te+1),g<=te&&(Be=te-1)}}function de(tt,g,me){var Be=tt[g];tt[g]=tt[me],tt[me]=Be}function Fe(tt,g){return tt<g?-1:tt>g?1:0}return function Lt(tt,g,me,Be,Ne){Ie(tt,g,me||0,Be||tt.length-1,Ne||Fe)}}()},3817:(An,Lt,Ie)=>{"use strict";var de=Ie(9789),Fe=Object,tt=TypeError;An.exports=de(function(){if(null!=this&&this!==Fe(this))throw new tt("RegExp.prototype.flags getter called on non-object");var me="";return this.hasIndices&&(me+="d"),this.global&&(me+="g"),this.ignoreCase&&(me+="i"),this.multiline&&(me+="m"),this.dotAll&&(me+="s"),this.unicode&&(me+="u"),this.unicodeSets&&(me+="v"),this.sticky&&(me+="y"),me},"get flags",!0)},1139:(An,Lt,Ie)=>{"use strict";var de=Ie(1648),Fe=Ie(5436),tt=Ie(3817),g=Ie(4861),me=Ie(6002),Be=Fe(g());de(Be,{getPolyfill:g,implementation:tt,shim:me}),An.exports=Be},4861:(An,Lt,Ie)=>{"use strict";var de=Ie(3817),Fe=Ie(1648).supportsDescriptors,tt=Object.getOwnPropertyDescriptor;An.exports=function(){if(Fe&&"gim"===/a/gim.flags){var me=tt(RegExp.prototype,"flags");if(me&&"function"==typeof me.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var Be="",Ne={};if(Object.defineProperty(Ne,"hasIndices",{get:function(){Be+="d"}}),Object.defineProperty(Ne,"sticky",{get:function(){Be+="y"}}),"dy"===Be)return me.get}}return de}},6002:(An,Lt,Ie)=>{"use strict";var de=Ie(1648).supportsDescriptors,Fe=Ie(4861),tt=Object.getOwnPropertyDescriptor,g=Object.defineProperty,me=TypeError,Be=Object.getPrototypeOf,Ne=/a/;An.exports=function(){if(!de||!Be)throw new me("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var ht=Fe(),Wt=Be(Ne),Xe=tt(Wt,"flags");return(!Xe||Xe.get!==ht)&&g(Wt,"flags",{configurable:!0,enumerable:!1,get:ht}),ht}},6138:function(An,Lt){!function(Ie){"use strict";function tt(He,Bt,ce,Ce,te){let Q,ne,Re,ie,J=Bt[0],xe=Ce[0],ee=0,pe=0;xe>J==xe>-J?(Q=J,J=Bt[++ee]):(Q=xe,xe=Ce[++pe]);let ae=0;if(ee<He&&pe<ce)for(xe>J==xe>-J?(Re=Q-((ne=J+Q)-J),J=Bt[++ee]):(Re=Q-((ne=xe+Q)-xe),xe=Ce[++pe]),Q=ne,0!==Re&&(te[ae++]=Re);ee<He&&pe<ce;)xe>J==xe>-J?(Re=Q-((ne=Q+J)-(ie=ne-Q))+(J-ie),J=Bt[++ee]):(Re=Q-((ne=Q+xe)-(ie=ne-Q))+(xe-ie),xe=Ce[++pe]),Q=ne,0!==Re&&(te[ae++]=Re);for(;ee<He;)Re=Q-((ne=Q+J)-(ie=ne-Q))+(J-ie),J=Bt[++ee],Q=ne,0!==Re&&(te[ae++]=Re);for(;pe<ce;)Re=Q-((ne=Q+xe)-(ie=ne-Q))+(xe-ie),xe=Ce[++pe],Q=ne,0!==Re&&(te[ae++]=Re);return 0===Q&&0!==ae||(te[ae++]=Q),ae}function g(He){return new Float64Array(He)}const We=g(4),ht=g(8),Wt=g(12),Xe=g(16),et=g(4);Ie.orient2d=function(He,Bt,ce,Ce,te,Q){const ne=(Bt-Q)*(ce-te),Re=(He-te)*(Ce-Q),ie=ne-Re;if(0===ne||0===Re||ne>0!=Re>0)return ie;const J=Math.abs(ne+Re);return Math.abs(ie)>=33306690738754716e-32*J?ie:-function(xe,ee,pe,ae,we,oe,je){let Te,K,qe,Me,Je,Ue,le,Qe,lt,dn,Xt,_n,Pn,Qn,jt,mr,Tn,Vn;const un=xe-we,Ft=pe-we,Cn=ee-oe,jn=ae-oe;Je=(jt=(Qe=un-(le=(Ue=134217729*un)-(Ue-un)))*(dn=jn-(lt=(Ue=134217729*jn)-(Ue-jn)))-((Qn=un*jn)-le*lt-Qe*lt-le*dn))-(Xt=jt-(Tn=(Qe=Cn-(le=(Ue=134217729*Cn)-(Ue-Cn)))*(dn=Ft-(lt=(Ue=134217729*Ft)-(Ue-Ft)))-((mr=Cn*Ft)-le*lt-Qe*lt-le*dn))),We[0]=jt-(Xt+Je)+(Je-Tn),Je=(Pn=Qn-((_n=Qn+Xt)-(Je=_n-Qn))+(Xt-Je))-(Xt=Pn-mr),We[1]=Pn-(Xt+Je)+(Je-mr),Je=(Vn=_n+Xt)-_n,We[2]=_n-(Vn-Je)+(Xt-Je),We[3]=Vn;let Pt=function(kt,cn){let Nn=cn[0];for(let Fn=1;Fn<4;Fn++)Nn+=cn[Fn];return Nn}(0,We),Pe=22204460492503146e-32*je;if(Pt>=Pe||-Pt>=Pe||(Te=xe-(un+(Je=xe-un))+(Je-we),qe=pe-(Ft+(Je=pe-Ft))+(Je-we),K=ee-(Cn+(Je=ee-Cn))+(Je-oe),Me=ae-(jn+(Je=ae-jn))+(Je-oe),0===Te&&0===K&&0===qe&&0===Me)||(Pe=11093356479670487e-47*je+33306690738754706e-32*Math.abs(Pt),(Pt+=un*Me+jn*Te-(Cn*qe+Ft*K))>=Pe||-Pt>=Pe))return Pt;Je=(jt=(Qe=Te-(le=(Ue=134217729*Te)-(Ue-Te)))*(dn=jn-(lt=(Ue=134217729*jn)-(Ue-jn)))-((Qn=Te*jn)-le*lt-Qe*lt-le*dn))-(Xt=jt-(Tn=(Qe=K-(le=(Ue=134217729*K)-(Ue-K)))*(dn=Ft-(lt=(Ue=134217729*Ft)-(Ue-Ft)))-((mr=K*Ft)-le*lt-Qe*lt-le*dn))),et[0]=jt-(Xt+Je)+(Je-Tn),Je=(Pn=Qn-((_n=Qn+Xt)-(Je=_n-Qn))+(Xt-Je))-(Xt=Pn-mr),et[1]=Pn-(Xt+Je)+(Je-mr),Je=(Vn=_n+Xt)-_n,et[2]=_n-(Vn-Je)+(Xt-Je),et[3]=Vn;const Ae=tt(4,We,4,et,ht);Je=(jt=(Qe=un-(le=(Ue=134217729*un)-(Ue-un)))*(dn=Me-(lt=(Ue=134217729*Me)-(Ue-Me)))-((Qn=un*Me)-le*lt-Qe*lt-le*dn))-(Xt=jt-(Tn=(Qe=Cn-(le=(Ue=134217729*Cn)-(Ue-Cn)))*(dn=qe-(lt=(Ue=134217729*qe)-(Ue-qe)))-((mr=Cn*qe)-le*lt-Qe*lt-le*dn))),et[0]=jt-(Xt+Je)+(Je-Tn),Je=(Pn=Qn-((_n=Qn+Xt)-(Je=_n-Qn))+(Xt-Je))-(Xt=Pn-mr),et[1]=Pn-(Xt+Je)+(Je-mr),Je=(Vn=_n+Xt)-_n,et[2]=_n-(Vn-Je)+(Xt-Je),et[3]=Vn;const Se=tt(Ae,ht,4,et,Wt);Je=(jt=(Qe=Te-(le=(Ue=134217729*Te)-(Ue-Te)))*(dn=Me-(lt=(Ue=134217729*Me)-(Ue-Me)))-((Qn=Te*Me)-le*lt-Qe*lt-le*dn))-(Xt=jt-(Tn=(Qe=K-(le=(Ue=134217729*K)-(Ue-K)))*(dn=qe-(lt=(Ue=134217729*qe)-(Ue-qe)))-((mr=K*qe)-le*lt-Qe*lt-le*dn))),et[0]=jt-(Xt+Je)+(Je-Tn),Je=(Pn=Qn-((_n=Qn+Xt)-(Je=_n-Qn))+(Xt-Je))-(Xt=Pn-mr),et[1]=Pn-(Xt+Je)+(Je-mr),Je=(Vn=_n+Xt)-_n,et[2]=_n-(Vn-Je)+(Xt-Je),et[3]=Vn;const ut=tt(Se,Wt,4,et,Xe);return Xe[ut-1]}(He,Bt,ce,Ce,te,Q,J)},Ie.orient2dfast=function(He,Bt,ce,Ce,te,Q){return(Bt-Q)*(ce-te)-(He-te)*(Ce-Q)},Object.defineProperty(Ie,"__esModule",{value:!0})}(Lt)},9789:(An,Lt,Ie)=>{"use strict";var de=Ie(9224),Fe=Ie(2486)(),tt=Ie(1552).functionsHaveConfigurableNames(),g=TypeError;An.exports=function(Be,Ne){if("function"!=typeof Be)throw new g("`fn` is not a function");return(!(arguments.length>2&&arguments[2])||tt)&&(Fe?de(Be,"name",Ne,!0,!0):de(Be,"name",Ne)),Be}},9579:An=>{"use strict";An.exports={eudist:function(Ie,de,Fe){for(var tt=Ie.length,g=0,me=0;me<tt;me++){var Be=(Ie[me]||0)-(de[me]||0);g+=Be*Be}return Fe?Math.sqrt(g):g},mandist:function(Ie,de,Fe){for(var tt=Ie.length,g=0,me=0;me<tt;me++)g+=Math.abs((Ie[me]||0)-(de[me]||0));return Fe?Math.sqrt(g):g},dist:function(Ie,de,Fe){var tt=Math.abs(Ie-de);return Fe?tt:tt*tt}}},7180:(An,Lt,Ie)=>{"use strict";var de=Ie(9579),Fe=de.eudist,tt=de.dist;An.exports={kmrand:function(me,Be){for(var Ne={},We=[],ht=Be<<2,Wt=me.length,Xe=me[0].length>0;We.length<Be&&ht-- >0;){var et=me[Math.floor(Math.random()*Wt)],He=Xe?et.join("_"):""+et;Ne[He]||(Ne[He]=!0,We.push(et))}if(We.length<Be)throw new Error("Error initializating clusters");return We},kmpp:function(me,Be){var Ne=me[0].length?Fe:tt,We=[],ht=me.length,Wt=me[0].length>0,et=me[Math.floor(Math.random()*ht)];for(Wt&&et.join("_"),We.push(et);We.length<Be;){for(var Bt=[],ce=We.length,Ce=0,te=[],Q=0;Q<ht;Q++){for(var ne=1/0,Re=0;Re<ce;Re++){var ie=Ne(me[Q],We[Re]);ie<=ne&&(ne=ie)}Bt[Q]=ne}for(var J=0;J<ht;J++)Ce+=Bt[J];for(var xe=0;xe<ht;xe++)te[xe]={i:xe,v:me[xe],pr:Bt[xe]/Ce,cs:0};te.sort(function(we,oe){return we.pr-oe.pr}),te[0].cs=te[0].pr;for(var ee=1;ee<ht;ee++)te[ee].cs=te[ee-1].cs+te[ee].pr;for(var pe=Math.random(),ae=0;ae<ht-1&&te[ae++].cs<pe;);We.push(te[ae-1].v)}return We}}},3282:(An,Lt,Ie)=>{"use strict";var de=Ie(9579),Fe=Ie(7180),tt=de.eudist,Be=Fe.kmrand,Ne=Fe.kmpp;function ht(Xe,et,He){He=He||[];for(var Bt=0;Bt<Xe;Bt++)He[Bt]=et;return He}An.exports=function Wt(Xe,et,He,Bt){var ce=[],Ce=[],te=[],Q=[],ne=!1,Re=Bt||1e4,ie=Xe.length,J=Xe[0].length,xe=J>0,ee=[];if(He)ce="kmrand"==He?Be(Xe,et):"kmpp"==He?Ne(Xe,et):He;else for(var pe={};ce.length<et;){var ae=Math.floor(Math.random()*ie);pe[ae]||(pe[ae]=!0,ce.push(Xe[ae]))}do{ht(et,0,ee);for(var we=0;we<ie;we++){for(var oe=1/0,je=0,Te=0;Te<et;Te++)(Q=xe?tt(Xe[we],ce[Te]):Math.abs(Xe[we]-ce[Te]))<=oe&&(oe=Q,je=Te);te[we]=je,ee[je]++}for(var K=[],Me=(Ce=[],0);Me<et;Me++)K[Me]=xe?ht(J,0,K[Me]):0,Ce[Me]=ce[Me];if(xe){for(var Je=0;Je<et;Je++)ce[Je]=[];for(var Ue=0;Ue<ie;Ue++)for(var Qe=K[te[Ue]],lt=Xe[Ue],dn=0;dn<J;dn++)Qe[dn]+=lt[dn];ne=!0;for(var Xt=0;Xt<et;Xt++){for(var _n=ce[Xt],Pn=K[Xt],Qn=Ce[Xt],jt=ee[Xt],mr=0;mr<J;mr++)_n[mr]=Pn[mr]/jt||0;if(ne)for(var Tn=0;Tn<J;Tn++)if(Qn[Tn]!=_n[Tn]){ne=!1;break}}}else{for(var Vn=0;Vn<ie;Vn++)K[te[Vn]]+=Xe[Vn];for(var Ft=0;Ft<et;Ft++)ce[Ft]=K[Ft]/ee[Ft]||0;ne=!0;for(var Cn=0;Cn<et;Cn++)if(Ce[Cn]!=ce[Cn]){ne=!1;break}}ne=ne||--Re<=0}while(!ne);return{it:1e4-Re,k:et,idxs:te,centroids:ce}}},6635:(An,Lt,Ie)=>{"use strict";Ie.d(Lt,{H:()=>Te,a:()=>ke,b:()=>De,c:()=>Pt,g:()=>jn,h:()=>oe,p:()=>Bt,r:()=>ct});var de=Ie(5861);let tt,g,me,Be=!1,Ne=!1,We=!1,Wt=!1;const Xe=typeof window<"u"?window:{},et=Xe.document||{head:{}},He={$flags$:0,$resourcesUrl$:"",jmp:bt=>bt(),raf:bt=>requestAnimationFrame(bt),ael:(bt,Ct,on,ln)=>bt.addEventListener(Ct,on,ln),rel:(bt,Ct,on,ln)=>bt.removeEventListener(Ct,on,ln),ce:(bt,Ct)=>new CustomEvent(bt,Ct)},Bt=bt=>Promise.resolve(bt),ce=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch{}return!1})(),te="http://www.w3.org/1999/xlink",Re=new WeakMap,ee=(bt,Ct)=>"sc-"+bt.$tagName$,pe={},we=bt=>"object"==(bt=typeof bt)||"function"===bt,oe=(bt,Ct,...on)=>{let ln=null,Sn=null,$n=null,Yn=!1,ir=!1;const Dr=[],Bn=Pr=>{for(let oi=0;oi<Pr.length;oi++)ln=Pr[oi],Array.isArray(ln)?Bn(ln):null!=ln&&"boolean"!=typeof ln&&((Yn="function"!=typeof bt&&!we(ln))&&(ln=String(ln)),Yn&&ir?Dr[Dr.length-1].$text$+=ln:Dr.push(Yn?je(null,ln):ln),ir=Yn)};if(Bn(on),Ct){Ct.key&&(Sn=Ct.key),Ct.name&&($n=Ct.name);{const Pr=Ct.className||Ct.class;Pr&&(Ct.class="object"!=typeof Pr?Pr:Object.keys(Pr).filter(oi=>Pr[oi]).join(" "))}}const yi=je(bt,null);return yi.$attrs$=Ct,Dr.length>0&&(yi.$children$=Dr),yi.$key$=Sn,yi.$name$=$n,yi},je=(bt,Ct)=>({$flags$:0,$tag$:bt,$text$:Ct,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Te={},qe=(bt,Ct,on,ln,Sn,$n)=>{if(on!==ln){let Yn=Qt(bt,Ct),ir=Ct.toLowerCase();if("class"===Ct){const Dr=bt.classList,Bn=Je(on),yi=Je(ln);Dr.remove(...Bn.filter(Pr=>Pr&&!yi.includes(Pr))),Dr.add(...yi.filter(Pr=>Pr&&!Bn.includes(Pr)))}else if("style"===Ct){for(const Dr in on)(!ln||null==ln[Dr])&&(Dr.includes("-")?bt.style.removeProperty(Dr):bt.style[Dr]="");for(const Dr in ln)(!on||ln[Dr]!==on[Dr])&&(Dr.includes("-")?bt.style.setProperty(Dr,ln[Dr]):bt.style[Dr]=ln[Dr])}else if("key"!==Ct)if("ref"===Ct)ln&&ln(bt);else if(Yn||"o"!==Ct[0]||"n"!==Ct[1]){const Dr=we(ln);if((Yn||Dr&&null!==ln)&&!Sn)try{if(bt.tagName.includes("-"))bt[Ct]=ln;else{const yi=ln??"";"list"===Ct?Yn=!1:(null==on||bt[Ct]!=yi)&&(bt[Ct]=yi)}}catch{}let Bn=!1;ir!==(ir=ir.replace(/^xlink\:?/,""))&&(Ct=ir,Bn=!0),null==ln||!1===ln?(!1!==ln||""===bt.getAttribute(Ct))&&(Bn?bt.removeAttributeNS(te,Ct):bt.removeAttribute(Ct)):(!Yn||4&$n||Sn)&&!Dr&&(ln=!0===ln?"":ln,Bn?bt.setAttributeNS(te,Ct,ln):bt.setAttribute(Ct,ln))}else Ct="-"===Ct[2]?Ct.slice(3):Qt(Xe,ir)?ir.slice(2):ir[2]+Ct.slice(3),on&&He.rel(bt,Ct,on,!1),ln&&He.ael(bt,Ct,ln,!1)}},Me=/\s/,Je=bt=>bt?bt.split(Me):[],Ue=(bt,Ct,on,ln)=>{const Sn=11===Ct.$elm$.nodeType&&Ct.$elm$.host?Ct.$elm$.host:Ct.$elm$,$n=bt&&bt.$attrs$||pe,Yn=Ct.$attrs$||pe;for(ln in $n)ln in Yn||qe(Sn,ln,$n[ln],void 0,on,Ct.$flags$);for(ln in Yn)qe(Sn,ln,$n[ln],Yn[ln],on,Ct.$flags$)},le=(bt,Ct,on,ln)=>{const Sn=Ct.$children$[on];let Yn,ir,Dr,$n=0;if(Be||(We=!0,"slot"===Sn.$tag$&&(tt&&ln.classList.add(tt+"-s"),Sn.$flags$|=Sn.$children$?2:1)),null!==Sn.$text$)Yn=Sn.$elm$=et.createTextNode(Sn.$text$);else if(1&Sn.$flags$)Yn=Sn.$elm$=et.createTextNode("");else if(Yn=Sn.$elm$=et.createElement(2&Sn.$flags$?"slot-fb":Sn.$tag$),Ue(null,Sn,!1),(bt=>null!=bt)(tt)&&Yn["s-si"]!==tt&&Yn.classList.add(Yn["s-si"]=tt),Sn.$children$)for($n=0;$n<Sn.$children$.length;++$n)ir=le(bt,Sn,$n,Yn),ir&&Yn.appendChild(ir);return Yn["s-hn"]=me,3&Sn.$flags$&&(Yn["s-sr"]=!0,Yn["s-cr"]=g,Yn["s-sn"]=Sn.$name$||"",Dr=bt&&bt.$children$&&bt.$children$[on],Dr&&Dr.$tag$===Sn.$tag$&&bt.$elm$&&Qe(bt.$elm$,!1)),Yn},Qe=(bt,Ct)=>{He.$flags$|=1;const on=bt.childNodes;for(let ln=on.length-1;ln>=0;ln--){const Sn=on[ln];Sn["s-hn"]!==me&&Sn["s-ol"]&&(Qn(Sn).insertBefore(Sn,Pn(Sn)),Sn["s-ol"].remove(),Sn["s-ol"]=void 0,We=!0),Ct&&Qe(Sn,Ct)}He.$flags$&=-2},lt=(bt,Ct,on,ln,Sn,$n)=>{let ir,Yn=bt["s-cr"]&&bt["s-cr"].parentNode||bt;for(Yn.shadowRoot&&Yn.tagName===me&&(Yn=Yn.shadowRoot);Sn<=$n;++Sn)ln[Sn]&&(ir=le(null,on,Sn,bt),ir&&(ln[Sn].$elm$=ir,Yn.insertBefore(ir,Pn(Ct))))},dn=(bt,Ct,on,ln,Sn)=>{for(;Ct<=on;++Ct)(ln=bt[Ct])&&(Sn=ln.$elm$,Ft(ln),Ne=!0,Sn["s-ol"]?Sn["s-ol"].remove():Qe(Sn,!0),Sn.remove())},_n=(bt,Ct)=>bt.$tag$===Ct.$tag$&&("slot"===bt.$tag$?bt.$name$===Ct.$name$:bt.$key$===Ct.$key$),Pn=bt=>bt&&bt["s-ol"]||bt,Qn=bt=>(bt["s-ol"]?bt["s-ol"]:bt).parentNode,jt=(bt,Ct)=>{const on=Ct.$elm$=bt.$elm$,ln=bt.$children$,Sn=Ct.$children$,Yn=Ct.$text$;let ir;null===Yn?("slot"===Ct.$tag$||Ue(bt,Ct,!1),null!==ln&&null!==Sn?((bt,Ct,on,ln)=>{let Vi,So,Sn=0,$n=0,Yn=0,ir=0,Dr=Ct.length-1,Bn=Ct[0],yi=Ct[Dr],Pr=ln.length-1,oi=ln[0],to=ln[Pr];for(;Sn<=Dr&&$n<=Pr;)if(null==Bn)Bn=Ct[++Sn];else if(null==yi)yi=Ct[--Dr];else if(null==oi)oi=ln[++$n];else if(null==to)to=ln[--Pr];else if(_n(Bn,oi))jt(Bn,oi),Bn=Ct[++Sn],oi=ln[++$n];else if(_n(yi,to))jt(yi,to),yi=Ct[--Dr],to=ln[--Pr];else if(_n(Bn,to))("slot"===Bn.$tag$||"slot"===to.$tag$)&&Qe(Bn.$elm$.parentNode,!1),jt(Bn,to),bt.insertBefore(Bn.$elm$,yi.$elm$.nextSibling),Bn=Ct[++Sn],to=ln[--Pr];else if(_n(yi,oi))("slot"===Bn.$tag$||"slot"===to.$tag$)&&Qe(yi.$elm$.parentNode,!1),jt(yi,oi),bt.insertBefore(yi.$elm$,Bn.$elm$),yi=Ct[--Dr],oi=ln[++$n];else{for(Yn=-1,ir=Sn;ir<=Dr;++ir)if(Ct[ir]&&null!==Ct[ir].$key$&&Ct[ir].$key$===oi.$key$){Yn=ir;break}Yn>=0?(So=Ct[Yn],So.$tag$!==oi.$tag$?Vi=le(Ct&&Ct[$n],on,Yn,bt):(jt(So,oi),Ct[Yn]=void 0,Vi=So.$elm$),oi=ln[++$n]):(Vi=le(Ct&&Ct[$n],on,$n,bt),oi=ln[++$n]),Vi&&Qn(Bn.$elm$).insertBefore(Vi,Pn(Bn.$elm$))}Sn>Dr?lt(bt,null==ln[Pr+1]?null:ln[Pr+1].$elm$,on,ln,$n,Pr):$n>Pr&&dn(Ct,Sn,Dr)})(on,ln,Ct,Sn):null!==Sn?(null!==bt.$text$&&(on.textContent=""),lt(on,null,Ct,Sn,0,Sn.length-1)):null!==ln&&dn(ln,0,ln.length-1)):(ir=on["s-cr"])?ir.parentNode.textContent=Yn:bt.$text$!==Yn&&(on.data=Yn)},mr=bt=>{const Ct=bt.childNodes;let on,ln,Sn,$n,Yn,ir;for(ln=0,Sn=Ct.length;ln<Sn;ln++)if(on=Ct[ln],1===on.nodeType){if(on["s-sr"])for(Yn=on["s-sn"],on.hidden=!1,$n=0;$n<Sn;$n++)if(ir=Ct[$n].nodeType,Ct[$n]["s-hn"]!==on["s-hn"]||""!==Yn){if(1===ir&&Yn===Ct[$n].getAttribute("slot")){on.hidden=!0;break}}else if(1===ir||3===ir&&""!==Ct[$n].textContent.trim()){on.hidden=!0;break}mr(on)}},Tn=[],Vn=bt=>{let Ct,on,ln,Sn,$n,Yn,ir=0;const Dr=bt.childNodes,Bn=Dr.length;for(;ir<Bn;ir++){if(Ct=Dr[ir],Ct["s-sr"]&&(on=Ct["s-cr"])&&on.parentNode)for(ln=on.parentNode.childNodes,Sn=Ct["s-sn"],Yn=ln.length-1;Yn>=0;Yn--)on=ln[Yn],!on["s-cn"]&&!on["s-nr"]&&on["s-hn"]!==Ct["s-hn"]&&(un(on,Sn)?($n=Tn.find(yi=>yi.$nodeToRelocate$===on),Ne=!0,on["s-sn"]=on["s-sn"]||Sn,$n?$n.$slotRefNode$=Ct:Tn.push({$slotRefNode$:Ct,$nodeToRelocate$:on}),on["s-sr"]&&Tn.map(yi=>{un(yi.$nodeToRelocate$,on["s-sn"])&&($n=Tn.find(Pr=>Pr.$nodeToRelocate$===on),$n&&!yi.$slotRefNode$&&(yi.$slotRefNode$=$n.$slotRefNode$))})):Tn.some(yi=>yi.$nodeToRelocate$===on)||Tn.push({$nodeToRelocate$:on}));1===Ct.nodeType&&Vn(Ct)}},un=(bt,Ct)=>1===bt.nodeType?null===bt.getAttribute("slot")&&""===Ct||bt.getAttribute("slot")===Ct:bt["s-sn"]===Ct||""===Ct,Ft=bt=>{bt.$attrs$&&bt.$attrs$.ref&&bt.$attrs$.ref(null),bt.$children$&&bt.$children$.map(Ft)},jn=bt=>It(bt).$hostElement$,Pt=(bt,Ct,on)=>{const ln=jn(bt);return{emit:Sn=>Pe(ln,Ct,{bubbles:!!(4&on),composed:!!(2&on),cancelable:!!(1&on),detail:Sn})}},Pe=(bt,Ct,on)=>{const ln=He.ce(Ct,on);return bt.dispatchEvent(ln),ln},Ae=(bt,Ct)=>{Ct&&!bt.$onRenderResolve$&&Ct["s-p"]&&Ct["s-p"].push(new Promise(on=>bt.$onRenderResolve$=on))},Se=(bt,Ct)=>{if(bt.$flags$|=16,!(4&bt.$flags$))return Ae(bt,bt.$ancestorComponent$),Fi(()=>ut(bt,Ct));bt.$flags$|=512},ut=(bt,Ct)=>{const ln=bt.$lazyInstance$;let Sn;return Sn=vn(ln,Ct?"componentWillLoad":"componentWillUpdate"),Yr(Sn,()=>kt(bt,ln,Ct))},kt=function(){var bt=(0,de.Z)(function*(Ct,on,ln){const Sn=Ct.$hostElement$,Yn=Sn["s-rc"];ln&&(bt=>{const Ct=bt.$cmpMeta$,on=bt.$hostElement$,ln=Ct.$flags$,$n=((bt,Ct,on,ln)=>{let Sn=ee(Ct);const $n=nr.get(Sn);if(bt=11===bt.nodeType?bt:et,$n)if("string"==typeof $n){let ir,Yn=Re.get(bt=bt.head||bt);Yn||Re.set(bt,Yn=new Set),Yn.has(Sn)||(ir=et.createElement("style"),ir.innerHTML=$n,bt.insertBefore(ir,bt.querySelector("link")),Yn&&Yn.add(Sn))}else bt.adoptedStyleSheets.includes($n)||(bt.adoptedStyleSheets=[...bt.adoptedStyleSheets,$n]);return Sn})(on.shadowRoot?on.shadowRoot:on.getRootNode(),Ct);10&ln&&(on["s-sc"]=$n,on.classList.add($n+"-h"))})(Ct);cn(Ct,on),Yn&&(Yn.map(Dr=>Dr()),Sn["s-rc"]=void 0);{const Dr=Sn["s-p"],Bn=()=>Nn(Ct);0===Dr.length?Bn():(Promise.all(Dr).then(Bn),Ct.$flags$|=4,Dr.length=0)}});return function(on,ln,Sn){return bt.apply(this,arguments)}}(),cn=(bt,Ct,on)=>{try{Ct=Ct.render(),bt.$flags$&=-17,bt.$flags$|=2,((bt,Ct)=>{const on=bt.$hostElement$,ln=bt.$cmpMeta$,Sn=bt.$vnode$||je(null,null),$n=(bt=>bt&&bt.$tag$===Te)(Ct)?Ct:oe(null,null,Ct);if(me=on.tagName,ln.$attrsToReflect$&&($n.$attrs$=$n.$attrs$||{},ln.$attrsToReflect$.map(([Yn,ir])=>$n.$attrs$[ir]=on[Yn])),$n.$tag$=null,$n.$flags$|=4,bt.$vnode$=$n,$n.$elm$=Sn.$elm$=on.shadowRoot||on,tt=on["s-sc"],g=on["s-cr"],Be=0!=(1&ln.$flags$),Ne=!1,jt(Sn,$n),He.$flags$|=1,We){Vn($n.$elm$);let Yn,ir,Dr,Bn,yi,Pr,oi=0;for(;oi<Tn.length;oi++)Yn=Tn[oi],ir=Yn.$nodeToRelocate$,ir["s-ol"]||(Dr=et.createTextNode(""),Dr["s-nr"]=ir,ir.parentNode.insertBefore(ir["s-ol"]=Dr,ir));for(oi=0;oi<Tn.length;oi++)if(Yn=Tn[oi],ir=Yn.$nodeToRelocate$,Yn.$slotRefNode$){for(Bn=Yn.$slotRefNode$.parentNode,yi=Yn.$slotRefNode$.nextSibling,Dr=ir["s-ol"];Dr=Dr.previousSibling;)if(Pr=Dr["s-nr"],Pr&&Pr["s-sn"]===ir["s-sn"]&&Bn===Pr.parentNode&&(Pr=Pr.nextSibling,!Pr||!Pr["s-nr"])){yi=Pr;break}(!yi&&Bn!==ir.parentNode||ir.nextSibling!==yi)&&ir!==yi&&(!ir["s-hn"]&&ir["s-ol"]&&(ir["s-hn"]=ir["s-ol"].parentNode.nodeName),Bn.insertBefore(ir,yi))}else 1===ir.nodeType&&(ir.hidden=!0)}Ne&&mr($n.$elm$),He.$flags$&=-2,Tn.length=0})(bt,Ct)}catch(ln){Dt(ln,bt.$hostElement$)}return null},Nn=bt=>{const on=bt.$hostElement$,Sn=bt.$lazyInstance$,$n=bt.$ancestorComponent$;64&bt.$flags$||(bt.$flags$|=64,si(on),vn(Sn,"componentDidLoad"),bt.$onReadyResolve$(on),$n||Fn()),bt.$onInstanceResolve$(on),bt.$onRenderResolve$&&(bt.$onRenderResolve$(),bt.$onRenderResolve$=void 0),512&bt.$flags$&&Ii(()=>Se(bt,!1)),bt.$flags$&=-517},Fn=bt=>{si(et.documentElement),Ii(()=>Pe(Xe,"appload",{detail:{namespace:"stripe-elements"}}))},vn=(bt,Ct,on)=>{if(bt&&bt[Ct])try{return bt[Ct](on)}catch(ln){Dt(ln)}},Yr=(bt,Ct)=>bt&&bt.then?bt.then(Ct):Ct(),si=bt=>bt.classList.add("hydrated"),Hr=(bt,Ct,on)=>{if(Ct.$members$){bt.watchers&&(Ct.$watchers$=bt.watchers);const ln=Object.entries(Ct.$members$),Sn=bt.prototype;if(ln.map(([$n,[Yn]])=>{31&Yn||2&on&&32&Yn?Object.defineProperty(Sn,$n,{get(){return((bt,Ct)=>It(this).$instanceValues$.get(Ct))(0,$n)},set(ir){((bt,Ct,on,ln)=>{const Sn=It(bt),$n=Sn.$hostElement$,Yn=Sn.$instanceValues$.get(Ct),ir=Sn.$flags$,Dr=Sn.$lazyInstance$;on=((bt,Ct)=>null==bt||we(bt)?bt:4&Ct?"false"!==bt&&(""===bt||!!bt):1&Ct?String(bt):bt)(on,ln.$members$[Ct][0]);const Bn=Number.isNaN(Yn)&&Number.isNaN(on);if((!(8&ir)||void 0===Yn)&&on!==Yn&&!Bn&&(Sn.$instanceValues$.set(Ct,on),Dr)){if(ln.$watchers$&&128&ir){const Pr=ln.$watchers$[Ct];Pr&&Pr.map(oi=>{try{Dr[oi](on,Yn,Ct)}catch(to){Dt(to,$n)}})}2==(18&ir)&&Se(Sn,!1)}})(this,$n,ir,Ct)},configurable:!0,enumerable:!0}):1&on&&64&Yn&&Object.defineProperty(Sn,$n,{value(...ir){const Dr=It(this);return Dr.$onInstancePromise$.then(()=>Dr.$lazyInstance$[$n](...ir))}})}),1&on){const $n=new Map;Sn.attributeChangedCallback=function(Yn,ir,Dr){He.jmp(()=>{const Bn=$n.get(Yn);if(this.hasOwnProperty(Bn))Dr=this[Bn],delete this[Bn];else if(Sn.hasOwnProperty(Bn)&&"number"==typeof this[Bn]&&this[Bn]==Dr)return;this[Bn]=(null!==Dr||"boolean"!=typeof this[Bn])&&Dr})},bt.observedAttributes=ln.filter(([Yn,ir])=>15&ir[0]).map(([Yn,ir])=>{const Dr=ir[1]||Yn;return $n.set(Dr,Yn),512&ir[0]&&Ct.$attrsToReflect$.push([Yn,Dr]),Dr})}}return bt},_i=function(){var bt=(0,de.Z)(function*(Ct,on,ln,Sn,$n){if(!(32&on.$flags$)){{if(on.$flags$|=32,($n=qn(ln)).then){const Bn=()=>{};$n=yield $n,Bn()}$n.isProxied||(ln.$watchers$=$n.watchers,Hr($n,ln,2),$n.isProxied=!0);const Dr=()=>{};on.$flags$|=8;try{new $n(on)}catch(Bn){Dt(Bn)}on.$flags$&=-9,on.$flags$|=128,Dr(),Ni(on.$lazyInstance$)}if($n.style){let Dr=$n.style;const Bn=ee(ln);if(!nr.has(Bn)){const yi=()=>{};((bt,Ct,on)=>{let ln=nr.get(bt);ce&&on?(ln=ln||new CSSStyleSheet,ln.replace(Ct)):ln=Ct,nr.set(bt,ln)})(Bn,Dr,!!(1&ln.$flags$)),yi()}}}const Yn=on.$ancestorComponent$,ir=()=>Se(on,!0);Yn&&Yn["s-rc"]?Yn["s-rc"].push(ir):ir()});return function(on,ln,Sn,$n,Yn){return bt.apply(this,arguments)}}(),Ni=bt=>{vn(bt,"connectedCallback")},De=(bt,Ct={})=>{const ln=[],Sn=Ct.exclude||[],$n=Xe.customElements,Yn=et.head,ir=Yn.querySelector("meta[charset]"),Dr=et.createElement("style"),Bn=[];let yi,Pr=!0;Object.assign(He,Ct),He.$resourcesUrl$=new URL(Ct.resourcesUrl||"./",et.baseURI).href,bt.map(oi=>{oi[1].map(to=>{const Vi={$flags$:to[0],$tagName$:to[1],$members$:to[2],$listeners$:to[3]};Vi.$members$=to[2],Vi.$attrsToReflect$=[],Vi.$watchers$={};const So=Vi.$tagName$,so=class extends HTMLElement{constructor(Ns){super(Ns),nn(Ns=this,Vi),1&Vi.$flags$&&Ns.attachShadow({mode:"open"})}connectedCallback(){yi&&(clearTimeout(yi),yi=null),Pr?Bn.push(this):He.jmp(()=>(bt=>{if(!(1&He.$flags$)){const Ct=It(bt),on=Ct.$cmpMeta$,ln=()=>{};if(1&Ct.$flags$)Ni(Ct.$lazyInstance$);else{Ct.$flags$|=1,12&on.$flags$&&(bt=>{const Ct=bt["s-cr"]=et.createComment("");Ct["s-cn"]=!0,bt.insertBefore(Ct,bt.firstChild)})(bt);{let Sn=bt;for(;Sn=Sn.parentNode||Sn.host;)if(Sn["s-p"]){Ae(Ct,Ct.$ancestorComponent$=Sn);break}}on.$members$&&Object.entries(on.$members$).map(([Sn,[$n]])=>{if(31&$n&&bt.hasOwnProperty(Sn)){const Yn=bt[Sn];delete bt[Sn],bt[Sn]=Yn}}),_i(bt,Ct,on)}ln()}})(this))}disconnectedCallback(){He.jmp(()=>(bt=>{if(!(1&He.$flags$)){const on=It(this).$lazyInstance$;vn(on,"disconnectedCallback")}})())}componentOnReady(){return It(this).$onReadyPromise$}};Vi.$lazyBundleId$=oi[0],!Sn.includes(So)&&!$n.get(So)&&(ln.push(So),$n.define(So,Hr(so,Vi,1)))})}),Dr.innerHTML=ln+"{visibility:hidden}.hydrated{visibility:inherit}",Dr.setAttribute("data-styles",""),Yn.insertBefore(Dr,ir?ir.nextSibling:Yn.firstChild),Pr=!1,Bn.length?Bn.map(oi=>oi.connectedCallback()):He.jmp(()=>yi=setTimeout(Fn,30))},ke=bt=>{const Ct=new URL(bt,He.$resourcesUrl$);return Ct.origin!==Xe.location.origin?Ct.href:Ct.pathname},gt=new WeakMap,It=bt=>gt.get(bt),ct=(bt,Ct)=>gt.set(Ct.$lazyInstance$=bt,Ct),nn=(bt,Ct)=>{const on={$flags$:0,$hostElement$:bt,$cmpMeta$:Ct,$instanceValues$:new Map};return on.$onInstancePromise$=new Promise(ln=>on.$onInstanceResolve$=ln),on.$onReadyPromise$=new Promise(ln=>on.$onReadyResolve$=ln),bt["s-p"]=[],bt["s-rc"]=[],gt.set(bt,on)},Qt=(bt,Ct)=>Ct in bt,Dt=(bt,Ct)=>(0,console.error)(bt,Ct),hn=new Map,qn=(bt,Ct,on)=>{const ln=bt.$tagName$.replace(/-/g,"_"),Sn=bt.$lazyBundleId$,$n=hn.get(Sn);return $n?$n[ln]:Ie(5764)(`./${Sn}.entry.js`).then(Yn=>(hn.set(Sn,Yn),Yn[ln]),Dt)},nr=new Map,Xn=[],bi=[],Si=(bt,Ct)=>on=>{bt.push(on),Wt||(Wt=!0,Ct&&4&He.$flags$?Ii(Kr):He.raf(Kr))},ai=bt=>{for(let Ct=0;Ct<bt.length;Ct++)try{bt[Ct](performance.now())}catch(on){Dt(on)}bt.length=0},Kr=()=>{ai(Xn),ai(bi),(Wt=Xn.length>0)&&He.raf(Kr)},Ii=bt=>Bt().then(bt),Fi=Si(bi,!0)},7935:(An,Lt,Ie)=>{"use strict";Ie.r(Lt),Ie.d(Lt,{default:()=>de});class de{constructor(g=[],me=Fe){if(this.data=g,this.length=this.data.length,this.compare=me,this.length>0)for(let Be=(this.length>>1)-1;Be>=0;Be--)this._down(Be)}push(g){this.data.push(g),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const g=this.data[0],me=this.data.pop();return this.length--,this.length>0&&(this.data[0]=me,this._down(0)),g}peek(){return this.data[0]}_up(g){const{data:me,compare:Be}=this,Ne=me[g];for(;g>0;){const We=g-1>>1,ht=me[We];if(Be(Ne,ht)>=0)break;me[g]=ht,g=We}me[g]=Ne}_down(g){const{data:me,compare:Be}=this,Ne=this.length>>1,We=me[g];for(;g<Ne;){let ht=1+(g<<1),Wt=me[ht];const Xe=ht+1;if(Xe<this.length&&Be(me[Xe],Wt)<0&&(ht=Xe,Wt=me[Xe]),Be(Wt,We)>=0)break;me[g]=Wt,g=ht}me[g]=We}}function Fe(tt,g){return tt<g?-1:tt>g?1:0}},4855:function(An,Lt){!function(Ie){"use strict";function de(){}function Fe(c){this.message=c||""}function tt(c){this.message=c||""}function g(c){this.message=c||""}function me(){}function Be(c){return null===c?Kr:c.color}function Ne(c){return null===c?null:c.parent}function We(c,f){null!==c&&(c.color=f)}function ht(c){return null===c?null:c.left}function Wt(c){return null===c?null:c.right}function Xe(){this.root_=null,this.size_=0}function et(){}function He(){this.array_=[],arguments[0]instanceof ke&&this.addAll(arguments[0])}function Bt(){}function ce(c){this.message=c||""}function Ce(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(c){if(null==this)throw new TypeError(this+" is not an object");var f=Object(this),b=Math.max(Math.min(f.length,9007199254740991),0)||0,w=1 in arguments&&parseInt(Number(arguments[1]),10)||0;w=w<0?Math.max(b+w,0):Math.min(w,b);var M=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:b;for(M=M<0?Math.max(b+arguments[2],0):Math.min(M,b);w<M;)f[w]=c,++w;return f},writable:!0}),Number.isFinite=Number.isFinite||function(c){return"number"==typeof c&&isFinite(c)},Number.isInteger=Number.isInteger||function(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(c){return c!=c},Math.trunc=Math.trunc||function(c){return c<0?Math.ceil(c):Math.floor(c)};var te=function(){};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te},te.prototype.equalsWithTolerance=function(c,f,b){return Math.abs(c-f)<=b};var Q=function(c){function f(b){c.call(this,b),this.name="IllegalArgumentException",this.message=b,this.stack=(new c).stack}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f}(Error),ne=function(){},Re={MAX_VALUE:{configurable:!0}};ne.isNaN=function(c){return Number.isNaN(c)},ne.doubleToLongBits=function(c){return c},ne.longBitsToDouble=function(c){return c},ne.isInfinite=function(c){return!Number.isFinite(c)},Re.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ne,Re);var ie=function(){},J=function(){},xe=function(){},ee=function c(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=c.NULL_ORDINATE;else if(1===arguments.length){var f=arguments[0];this.x=f.x,this.y=f.y,this.z=f.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=c.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},pe={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ee.prototype.setOrdinate=function(c,f){switch(c){case ee.X:this.x=f;break;case ee.Y:this.y=f;break;case ee.Z:this.z=f;break;default:throw new Q("Invalid ordinate index: "+c)}},ee.prototype.equals2D=function(){if(1===arguments.length){var c=arguments[0];return this.x===c.x&&this.y===c.y}if(2===arguments.length){var f=arguments[0],b=arguments[1];return!!te.equalsWithTolerance(this.x,f.x,b)&&!!te.equalsWithTolerance(this.y,f.y,b)}},ee.prototype.getOrdinate=function(c){switch(c){case ee.X:return this.x;case ee.Y:return this.y;case ee.Z:return this.z}throw new Q("Invalid ordinate index: "+c)},ee.prototype.equals3D=function(c){return this.x===c.x&&this.y===c.y&&(this.z===c.z||ne.isNaN(this.z))&&ne.isNaN(c.z)},ee.prototype.equals=function(c){return c instanceof ee&&this.equals2D(c)},ee.prototype.equalInZ=function(c,f){return te.equalsWithTolerance(this.z,c.z,f)},ee.prototype.compareTo=function(c){return this.x<c.x?-1:this.x>c.x?1:this.y<c.y?-1:this.y>c.y?1:0},ee.prototype.clone=function(){},ee.prototype.copy=function(){return new ee(this)},ee.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ee.prototype.distance3D=function(c){var f=this.x-c.x,b=this.y-c.y,w=this.z-c.z;return Math.sqrt(f*f+b*b+w*w)},ee.prototype.distance=function(c){var f=this.x-c.x,b=this.y-c.y;return Math.sqrt(f*f+b*b)},ee.prototype.hashCode=function(){var c=17;return 37*(c=37*c+ee.hashCode(this.x))+ee.hashCode(this.y)},ee.prototype.setCoordinate=function(c){this.x=c.x,this.y=c.y,this.z=c.z},ee.prototype.interfaces_=function(){return[ie,J,de]},ee.prototype.getClass=function(){return ee},ee.hashCode=function(){if(1===arguments.length){var f=ne.doubleToLongBits(arguments[0]);return Math.trunc((f^f)>>>32)}},pe.DimensionalComparator.get=function(){return ae},pe.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},pe.NULL_ORDINATE.get=function(){return ne.NaN},pe.X.get=function(){return 0},pe.Y.get=function(){return 1},pe.Z.get=function(){return 2},Object.defineProperties(ee,pe);var ae=function(c){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var f=arguments[0];if(2!==f&&3!==f)throw new Q("only 2 or 3 dimensions may be specified");this._dimensionsToTest=f}};ae.prototype.compare=function(c,f){var b=c,w=f,M=ae.compare(b.x,w.x);if(0!==M)return M;var z=ae.compare(b.y,w.y);return 0!==z?z:this._dimensionsToTest<=2?0:ae.compare(b.z,w.z)},ae.prototype.interfaces_=function(){return[xe]},ae.prototype.getClass=function(){return ae},ae.compare=function(c,f){return c<f?-1:c>f?1:ne.isNaN(c)?ne.isNaN(f)?0:-1:ne.isNaN(f)?1:0};var we=function(){};we.prototype.create=function(){},we.prototype.interfaces_=function(){return[]},we.prototype.getClass=function(){return we};var oe=function(){},je={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe},oe.toLocationSymbol=function(c){switch(c){case oe.EXTERIOR:return"e";case oe.BOUNDARY:return"b";case oe.INTERIOR:return"i";case oe.NONE:return"-"}throw new Q("Unknown location value: "+c)},je.INTERIOR.get=function(){return 0},je.BOUNDARY.get=function(){return 1},je.EXTERIOR.get=function(){return 2},je.NONE.get=function(){return-1},Object.defineProperties(oe,je);var Te=function(c,f){return c.interfaces_&&c.interfaces_().indexOf(f)>-1},K=function(){},qe={LOG_10:{configurable:!0}};K.prototype.interfaces_=function(){return[]},K.prototype.getClass=function(){return K},K.log10=function(c){var f=Math.log(c);return ne.isInfinite(f)||ne.isNaN(f)?f:f/K.LOG_10},K.min=function(c,f,b,w){var M=c;return f<M&&(M=f),b<M&&(M=b),w<M&&(M=w),M},K.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var c=arguments[0],f=arguments[1],b=arguments[2];return c<f?f:c>b?b:c}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var w=arguments[0],M=arguments[1],z=arguments[2];return w<M?M:w>z?z:w}},K.wrap=function(c,f){return c<0?f- -c%f:c%f},K.max=function(){if(3===arguments.length){var f=arguments[1],b=arguments[2],w=arguments[0];return f>w&&(w=f),b>w&&(w=b),w}if(4===arguments.length){var z=arguments[1],j=arguments[2],Ee=arguments[3],at=arguments[0];return z>at&&(at=z),j>at&&(at=j),Ee>at&&(at=Ee),at}},K.average=function(c,f){return(c+f)/2},qe.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(K,qe);var Me=function(c){this.str=c};Me.prototype.append=function(c){this.str+=c},Me.prototype.setCharAt=function(c,f){this.str=this.str.substr(0,c)+f+this.str.substr(c+1)},Me.prototype.toString=function(c){return this.str};var Je=function(c){this.value=c};Je.prototype.intValue=function(){return this.value},Je.prototype.compareTo=function(c){return this.value<c?-1:this.value>c?1:0},Je.isNaN=function(c){return Number.isNaN(c)};var Ue=function(){};Ue.isWhitespace=function(c){return c<=32&&c>=0||127===c},Ue.toUpperCase=function(c){return c.toUpperCase()};var le=function c(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof c?this.init(arguments[0]):"string"==typeof arguments[0]&&c.call(this,c.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},Qe={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};le.prototype.le=function(c){return(this._hi<c._hi||this._hi===c._hi)&&this._lo<=c._lo},le.prototype.extractSignificantDigits=function(c,f){var b=this.abs(),w=le.magnitude(b._hi),M=le.TEN.pow(w);(b=b.divide(M)).gt(le.TEN)?(b=b.divide(le.TEN),w+=1):b.lt(le.ONE)&&(b=b.multiply(le.TEN),w-=1);for(var z=w+1,j=new Me,Ee=le.MAX_PRINT_DIGITS-1,at=0;at<=Ee;at++){c&&at===z&&j.append(".");var Ut=Math.trunc(b._hi);if(Ut<0)break;var gn=!1,Rn=0;Ut>9?(gn=!0,Rn="9"):Rn="0"+Ut,j.append(Rn),b=b.subtract(le.valueOf(Ut)).multiply(le.TEN),gn&&b.selfAdd(le.TEN);var Ir=!0,wr=le.magnitude(b._hi);if(wr<0&&Math.abs(wr)>=Ee-at&&(Ir=!1),!Ir)break}return f[0]=w,j.toString()},le.prototype.sqr=function(){return this.multiply(this)},le.prototype.doubleValue=function(){return this._hi+this._lo},le.prototype.subtract=function(){return arguments[0]instanceof le?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},le.prototype.equals=function(){if(1===arguments.length){var c=arguments[0];return this._hi===c._hi&&this._lo===c._lo}},le.prototype.isZero=function(){return 0===this._hi&&0===this._lo},le.prototype.selfSubtract=function(){if(arguments[0]instanceof le){var c=arguments[0];return this.isNaN()?this:this.selfAdd(-c._hi,-c._lo)}if("number"==typeof arguments[0]){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f,0)}},le.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},le.prototype.min=function(c){return this.le(c)?this:c},le.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof le){var c=arguments[0];return this.selfDivide(c._hi,c._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var z,Ee,at,gn,b=arguments[0],M=null,j=null,Ut=null,Rn=null;return this._hi=Rn=(at=this._hi/b)+(Ut=(this._hi-(gn=at*b)-(Rn=(M=(Ut=le.SPLIT*at)-(M=Ut-at))*(j=(Rn=le.SPLIT*b)-(j=Rn-b))-gn+M*(Ee=b-j)+(z=at-M)*j+z*Ee)+this._lo-at*arguments[1])/b),this._lo=at-Rn+Ut,this}},le.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},le.prototype.divide=function(){if(arguments[0]instanceof le){var b,M,z,Ee,c=arguments[0],f=null,w=null,j=null,at=null;return b=(z=this._hi/c._hi)-(f=(j=le.SPLIT*z)-(f=j-z)),at=f*(w=(at=le.SPLIT*c._hi)-(w=at-c._hi))-(Ee=z*c._hi)+f*(M=c._hi-w)+b*w+b*M,new le(at=z+(j=(this._hi-Ee-at+this._lo-z*c._lo)/c._hi),z-at+j)}if("number"==typeof arguments[0]){var Ut=arguments[0];return ne.isNaN(Ut)?le.createNaN():le.copy(this).selfDivide(Ut,0)}},le.prototype.ge=function(c){return(this._hi>c._hi||this._hi===c._hi)&&this._lo>=c._lo},le.prototype.pow=function(c){if(0===c)return le.valueOf(1);var f=new le(this),b=le.valueOf(1),w=Math.abs(c);if(w>1)for(;w>0;)w%2==1&&b.selfMultiply(f),(w/=2)>0&&(f=f.sqr());else b=f;return c<0?b.reciprocal():b},le.prototype.ceil=function(){if(this.isNaN())return le.NaN;var c=Math.ceil(this._hi),f=0;return c===this._hi&&(f=Math.ceil(this._lo)),new le(c,f)},le.prototype.compareTo=function(c){return this._hi<c._hi?-1:this._hi>c._hi?1:this._lo<c._lo?-1:this._lo>c._lo?1:0},le.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},le.prototype.setValue=function(){return arguments[0]instanceof le||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},le.prototype.max=function(c){return this.ge(c)?this:c},le.prototype.sqrt=function(){if(this.isZero())return le.valueOf(0);if(this.isNegative())return le.NaN;var c=1/Math.sqrt(this._hi),b=le.valueOf(this._hi*c),w=this.subtract(b.sqr())._hi*(.5*c);return b.add(w)},le.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof le){var c=arguments[0];return this.selfAdd(c._hi,c._lo)}if("number"==typeof arguments[0]){var b,w,M,j,Ee,f=arguments[0];return this._hi=(b=(M=this._hi+f)+(Ee=f-(j=M-this._hi)+(this._hi-(M-j))+this._lo))+(w=Ee+(M-b)),this._lo=w+(b-this._hi),this}}else if(2===arguments.length){var gn,Rn,wr,Eo,at=arguments[0],Ut=arguments[1],Ir=null,$r=null,fi=null;$r=(wr=this._hi+at)-(fi=wr-this._hi),Ir=(Rn=this._lo+Ut)-(Eo=Rn-this._lo);var vr=(gn=wr+(fi=($r=at-fi+(this._hi-$r))+Rn))+(fi=(Ir=Ut-Eo+(this._lo-Ir))+(fi+(wr-gn))),bl=fi+(gn-vr);return this._hi=vr,this._lo=bl,this}},le.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof le){var c=arguments[0];return this.selfMultiply(c._hi,c._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var z,Ee,b=arguments[0],M=null,j=null,at=null,Ut=null;M=(at=le.SPLIT*this._hi)-this._hi,M=at-M;var gn=(at=this._hi*b)+(Ut=M*(j=(Ut=le.SPLIT*b)-(j=Ut-b))-at+M*(Ee=b-j)+(z=this._hi-M)*j+z*Ee+(this._hi*arguments[1]+this._lo*b)),Rn=Ut+(M=at-gn);return this._hi=gn,this._lo=Rn,this}},le.prototype.selfSqr=function(){return this.selfMultiply(this)},le.prototype.floor=function(){if(this.isNaN())return le.NaN;var c=Math.floor(this._hi),f=0;return c===this._hi&&(f=Math.floor(this._lo)),new le(c,f)},le.prototype.negate=function(){return this.isNaN()?this:new le(-this._hi,-this._lo)},le.prototype.clone=function(){},le.prototype.multiply=function(){if(arguments[0]instanceof le){var c=arguments[0];return c.isNaN()?le.createNaN():le.copy(this).selfMultiply(c)}if("number"==typeof arguments[0]){var f=arguments[0];return ne.isNaN(f)?le.createNaN():le.copy(this).selfMultiply(f,0)}},le.prototype.isNaN=function(){return ne.isNaN(this._hi)},le.prototype.intValue=function(){return Math.trunc(this._hi)},le.prototype.toString=function(){var c=le.magnitude(this._hi);return c>=-3&&c<=20?this.toStandardNotation():this.toSciNotation()},le.prototype.toStandardNotation=function(){var c=this.getSpecialNumberString();if(null!==c)return c;var f=new Array(1).fill(null),b=this.extractSignificantDigits(!0,f),w=f[0]+1,M=b;return"."===b.charAt(0)?M="0"+b:w<0?M="0."+le.stringOfChar("0",-w)+b:-1===b.indexOf(".")&&(M=b+le.stringOfChar("0",w-b.length)+".0"),this.isNegative()?"-"+M:M},le.prototype.reciprocal=function(){var f,w,M,j,c=null,b=null,z=null,Ee=null;f=(M=1/this._hi)-(c=(z=le.SPLIT*M)-(c=z-M)),b=(Ee=le.SPLIT*this._hi)-this._hi;var at=M+(z=(1-(j=M*this._hi)-(Ee=c*(b=Ee-b)-j+c*(w=this._hi-b)+f*b+f*w)-M*this._lo)/this._hi);return new le(at,M-at+z)},le.prototype.toSciNotation=function(){if(this.isZero())return le.SCI_NOT_ZERO;var c=this.getSpecialNumberString();if(null!==c)return c;var f=new Array(1).fill(null),b=this.extractSignificantDigits(!1,f),w=le.SCI_NOT_EXPONENT_CHAR+f[0];if("0"===b.charAt(0))throw new Error("Found leading zero: "+b);var M="";b.length>1&&(M=b.substring(1));var z=b.charAt(0)+"."+M;return this.isNegative()?"-"+z+w:z+w},le.prototype.abs=function(){return this.isNaN()?le.NaN:this.isNegative()?this.negate():new le(this)},le.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},le.prototype.lt=function(c){return(this._hi<c._hi||this._hi===c._hi)&&this._lo<c._lo},le.prototype.add=function(){if(arguments[0]instanceof le){var c=arguments[0];return le.copy(this).selfAdd(c)}if("number"==typeof arguments[0]){var f=arguments[0];return le.copy(this).selfAdd(f)}},le.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof le){var f=arguments[0];this._hi=f._hi,this._lo=f._lo}}else if(2===arguments.length){var w=arguments[1];this._hi=arguments[0],this._lo=w}},le.prototype.gt=function(c){return(this._hi>c._hi||this._hi===c._hi)&&this._lo>c._lo},le.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},le.prototype.trunc=function(){return this.isNaN()?le.NaN:this.isPositive()?this.floor():this.ceil()},le.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},le.prototype.interfaces_=function(){return[de,ie,J]},le.prototype.getClass=function(){return le},le.sqr=function(c){return le.valueOf(c).selfMultiply(c)},le.valueOf=function(){return"string"==typeof arguments[0]?le.parse(arguments[0]):"number"==typeof arguments[0]?new le(arguments[0]):void 0},le.sqrt=function(c){return le.valueOf(c).sqrt()},le.parse=function(c){for(var f=0,b=c.length;Ue.isWhitespace(c.charAt(f));)f++;var w=!1;if(f<b){var M=c.charAt(f);"-"!==M&&"+"!==M||(f++,"-"===M&&(w=!0))}for(var z=new le,j=0,Ee=0,at=0;!(f>=b);){var Ut=c.charAt(f);if(f++,Ue.isDigit(Ut)){var gn=Ut-"0";z.selfMultiply(le.TEN),z.selfAdd(gn),j++}else{if("."!==Ut){if("e"===Ut||"E"===Ut){var Rn=c.substring(f);try{at=Je.parseInt(Rn)}catch(Eo){throw Eo instanceof Error?new Error("Invalid exponent "+Rn+" in string "+c):Eo}break}throw new Error("Unexpected character '"+Ut+"' at position "+f+" in string "+c)}Ee=j}}var Ir=z,wr=j-Ee-at;if(0===wr)Ir=z;else if(wr>0){var $r=le.TEN.pow(wr);Ir=z.divide($r)}else if(wr<0){var fi=le.TEN.pow(-wr);Ir=z.multiply(fi)}return w?Ir.negate():Ir},le.createNaN=function(){return new le(ne.NaN,ne.NaN)},le.copy=function(c){return new le(c)},le.magnitude=function(c){var f=Math.abs(c),b=Math.log(f)/Math.log(10),w=Math.trunc(Math.floor(b));return 10*Math.pow(10,w)<=f&&(w+=1),w},le.stringOfChar=function(c,f){for(var b=new Me,w=0;w<f;w++)b.append(c);return b.toString()},Qe.PI.get=function(){return new le(3.141592653589793,12246467991473532e-32)},Qe.TWO_PI.get=function(){return new le(6.283185307179586,24492935982947064e-32)},Qe.PI_2.get=function(){return new le(1.5707963267948966,6123233995736766e-32)},Qe.E.get=function(){return new le(2.718281828459045,14456468917292502e-32)},Qe.NaN.get=function(){return new le(ne.NaN,ne.NaN)},Qe.EPS.get=function(){return 123259516440783e-46},Qe.SPLIT.get=function(){return 134217729},Qe.MAX_PRINT_DIGITS.get=function(){return 32},Qe.TEN.get=function(){return le.valueOf(10)},Qe.ONE.get=function(){return le.valueOf(1)},Qe.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Qe.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(le,Qe);var lt=function(){},dn={DP_SAFE_EPSILON:{configurable:!0}};lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt.orientationIndex=function(c,f,b){var w=lt.orientationIndexFilter(c,f,b);if(w<=1)return w;var M=le.valueOf(f.x).selfAdd(-c.x),z=le.valueOf(f.y).selfAdd(-c.y),j=le.valueOf(b.x).selfAdd(-f.x),Ee=le.valueOf(b.y).selfAdd(-f.y);return M.selfMultiply(Ee).selfSubtract(z.selfMultiply(j)).signum()},lt.signOfDet2x2=function(c,f,b,w){return c.multiply(w).selfSubtract(f.multiply(b)).signum()},lt.intersection=function(c,f,b,w){var M=le.valueOf(w.y).selfSubtract(b.y).selfMultiply(le.valueOf(f.x).selfSubtract(c.x)),z=le.valueOf(w.x).selfSubtract(b.x).selfMultiply(le.valueOf(f.y).selfSubtract(c.y)),j=M.subtract(z),Ee=le.valueOf(w.x).selfSubtract(b.x).selfMultiply(le.valueOf(c.y).selfSubtract(b.y)),at=le.valueOf(w.y).selfSubtract(b.y).selfMultiply(le.valueOf(c.x).selfSubtract(b.x)),Ut=Ee.subtract(at).selfDivide(j).doubleValue(),gn=le.valueOf(c.x).selfAdd(le.valueOf(f.x).selfSubtract(c.x).selfMultiply(Ut)).doubleValue(),Rn=le.valueOf(f.x).selfSubtract(c.x).selfMultiply(le.valueOf(c.y).selfSubtract(b.y)),Ir=le.valueOf(f.y).selfSubtract(c.y).selfMultiply(le.valueOf(c.x).selfSubtract(b.x)),wr=Rn.subtract(Ir).selfDivide(j).doubleValue(),$r=le.valueOf(b.y).selfAdd(le.valueOf(w.y).selfSubtract(b.y).selfMultiply(wr)).doubleValue();return new ee(gn,$r)},lt.orientationIndexFilter=function(c,f,b){var w=null,M=(c.x-b.x)*(f.y-b.y),z=(c.y-b.y)*(f.x-b.x),j=M-z;if(M>0){if(z<=0)return lt.signum(j);w=M+z}else{if(!(M<0)||z>=0)return lt.signum(j);w=-M-z}var Ee=lt.DP_SAFE_EPSILON*w;return j>=Ee||-j>=Ee?lt.signum(j):2},lt.signum=function(c){return c>0?1:c<0?-1:0},dn.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(lt,dn);var Xt=function(){},_n={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};_n.X.get=function(){return 0},_n.Y.get=function(){return 1},_n.Z.get=function(){return 2},_n.M.get=function(){return 3},Xt.prototype.setOrdinate=function(c,f,b){},Xt.prototype.size=function(){},Xt.prototype.getOrdinate=function(c,f){},Xt.prototype.getCoordinate=function(){},Xt.prototype.getCoordinateCopy=function(c){},Xt.prototype.getDimension=function(){},Xt.prototype.getX=function(c){},Xt.prototype.clone=function(){},Xt.prototype.expandEnvelope=function(c){},Xt.prototype.copy=function(){},Xt.prototype.getY=function(c){},Xt.prototype.toCoordinateArray=function(){},Xt.prototype.interfaces_=function(){return[J]},Xt.prototype.getClass=function(){return Xt},Object.defineProperties(Xt,_n);var Pn=function(){},Qn=function(c){function f(){c.call(this,"Projective point not representable on the Cartesian plane.")}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Pn),jt=function(){};jt.arraycopy=function(c,f,b,w,M){for(var z=0,j=f;j<f+M;j++)b[w+z]=c[j],z++},jt.getProperty=function(c){return{"line.separator":"\n"}[c]};var mr=function c(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var f=arguments[0];this.x=f.x,this.y=f.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var w=arguments[1];this.x=arguments[0],this.y=w,this.w=1}else if(arguments[0]instanceof c&&arguments[1]instanceof c){var M=arguments[0],z=arguments[1];this.x=M.y*z.w-z.y*M.w,this.y=z.x*M.w-M.x*z.w,this.w=M.x*z.y-z.x*M.y}else if(arguments[0]instanceof ee&&arguments[1]instanceof ee){var j=arguments[0],Ee=arguments[1];this.x=j.y-Ee.y,this.y=Ee.x-j.x,this.w=j.x*Ee.y-Ee.x*j.y}}else if(3===arguments.length){var Ut=arguments[1],gn=arguments[2];this.x=arguments[0],this.y=Ut,this.w=gn}else if(4===arguments.length){var Rn=arguments[0],Ir=arguments[1],wr=arguments[2],$r=arguments[3],fi=Rn.y-Ir.y,Eo=Ir.x-Rn.x,vr=Rn.x*Ir.y-Ir.x*Rn.y,bl=wr.y-$r.y,mu=$r.x-wr.x,qc=wr.x*$r.y-$r.x*wr.y;this.x=Eo*qc-mu*vr,this.y=bl*vr-fi*qc,this.w=fi*mu-bl*Eo}};mr.prototype.getY=function(){var c=this.y/this.w;if(ne.isNaN(c)||ne.isInfinite(c))throw new Qn;return c},mr.prototype.getX=function(){var c=this.x/this.w;if(ne.isNaN(c)||ne.isInfinite(c))throw new Qn;return c},mr.prototype.getCoordinate=function(){var c=new ee;return c.x=this.getX(),c.y=this.getY(),c},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.intersection=function(c,f,b,w){var M=c.y-f.y,z=f.x-c.x,j=c.x*f.y-f.x*c.y,Ee=b.y-w.y,at=w.x-b.x,Ut=b.x*w.y-w.x*b.y,gn=M*at-Ee*z,Rn=(z*Ut-at*j)/gn,Ir=(Ee*j-M*Ut)/gn;if(ne.isNaN(Rn)||ne.isInfinite(Rn)||ne.isNaN(Ir)||ne.isInfinite(Ir))throw new Qn;return new ee(Rn,Ir)};var Tn=function c(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof ee){var f=arguments[0];this.init(f.x,f.x,f.y,f.y)}else arguments[0]instanceof c&&this.init(arguments[0]);else if(2===arguments.length){var w=arguments[0],M=arguments[1];this.init(w.x,M.x,w.y,M.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Vn={serialVersionUID:{configurable:!0}};Tn.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Tn.prototype.equals=function(c){if(!(c instanceof Tn))return!1;var f=c;return this.isNull()?f.isNull():this._maxx===f.getMaxX()&&this._maxy===f.getMaxY()&&this._minx===f.getMinX()&&this._miny===f.getMinY()},Tn.prototype.intersection=function(c){return this.isNull()||c.isNull()||!this.intersects(c)?new Tn:new Tn(this._minx>c._minx?this._minx:c._minx,this._maxx<c._maxx?this._maxx:c._maxx,this._miny>c._miny?this._miny:c._miny,this._maxy<c._maxy?this._maxy:c._maxy)},Tn.prototype.isNull=function(){return this._maxx<this._minx},Tn.prototype.getMaxX=function(){return this._maxx},Tn.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ee){var c=arguments[0];return this.covers(c.x,c.y)}if(arguments[0]instanceof Tn){var f=arguments[0];return!this.isNull()&&!f.isNull()&&f.getMinX()>=this._minx&&f.getMaxX()<=this._maxx&&f.getMinY()>=this._miny&&f.getMaxY()<=this._maxy}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];return!this.isNull()&&b>=this._minx&&b<=this._maxx&&w>=this._miny&&w<=this._maxy}},Tn.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Tn){var c=arguments[0];return!this.isNull()&&!c.isNull()&&!(c._minx>this._maxx||c._maxx<this._minx||c._miny>this._maxy||c._maxy<this._miny)}if(arguments[0]instanceof ee){var f=arguments[0];return this.intersects(f.x,f.y)}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];return!this.isNull()&&!(b>this._maxx||b<this._minx||w>this._maxy||w<this._miny)}},Tn.prototype.getMinY=function(){return this._miny},Tn.prototype.getMinX=function(){return this._minx},Tn.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ee){var c=arguments[0];this.expandToInclude(c.x,c.y)}else if(arguments[0]instanceof Tn){var f=arguments[0];if(f.isNull())return null;this.isNull()?(this._minx=f.getMinX(),this._maxx=f.getMaxX(),this._miny=f.getMinY(),this._maxy=f.getMaxY()):(f._minx<this._minx&&(this._minx=f._minx),f._maxx>this._maxx&&(this._maxx=f._maxx),f._miny<this._miny&&(this._miny=f._miny),f._maxy>this._maxy&&(this._maxy=f._maxy))}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];this.isNull()?(this._minx=b,this._maxx=b,this._miny=w,this._maxy=w):(b<this._minx&&(this._minx=b),b>this._maxx&&(this._maxx=b),w<this._miny&&(this._miny=w),w>this._maxy&&(this._maxy=w))}},Tn.prototype.minExtent=function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return c<f?c:f},Tn.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Tn.prototype.compareTo=function(c){var f=c;return this.isNull()?f.isNull()?0:-1:f.isNull()?1:this._minx<f._minx?-1:this._minx>f._minx?1:this._miny<f._miny?-1:this._miny>f._miny?1:this._maxx<f._maxx?-1:this._maxx>f._maxx?1:this._maxy<f._maxy?-1:this._maxy>f._maxy?1:0},Tn.prototype.translate=function(c,f){if(this.isNull())return null;this.init(this.getMinX()+c,this.getMaxX()+c,this.getMinY()+f,this.getMaxY()+f)},Tn.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Tn.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Tn.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Tn.prototype.maxExtent=function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return c>f?c:f},Tn.prototype.expandBy=function(){if(1===arguments.length){var c=arguments[0];this.expandBy(c,c)}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this.isNull())return null;this._minx-=f,this._maxx+=f,this._miny-=b,this._maxy+=b,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Tn.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Tn)return this.covers(arguments[0]);if(arguments[0]instanceof ee)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Tn.prototype.centre=function(){return this.isNull()?null:new ee((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Tn.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ee){var c=arguments[0];this.init(c.x,c.x,c.y,c.y)}else if(arguments[0]instanceof Tn){var f=arguments[0];this._minx=f._minx,this._maxx=f._maxx,this._miny=f._miny,this._maxy=f._maxy}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];this.init(b.x,w.x,b.y,w.y)}else if(4===arguments.length){var M=arguments[0],z=arguments[1],j=arguments[2],Ee=arguments[3];M<z?(this._minx=M,this._maxx=z):(this._minx=z,this._maxx=M),j<Ee?(this._miny=j,this._maxy=Ee):(this._miny=Ee,this._maxy=j)}},Tn.prototype.getMaxY=function(){return this._maxy},Tn.prototype.distance=function(c){if(this.intersects(c))return 0;var f=0;this._maxx<c._minx?f=c._minx-this._maxx:this._minx>c._maxx&&(f=this._minx-c._maxx);var b=0;return this._maxy<c._miny?b=c._miny-this._maxy:this._miny>c._maxy&&(b=this._miny-c._maxy),0===f?b:0===b?f:Math.sqrt(f*f+b*b)},Tn.prototype.hashCode=function(){var c=17;return 37*(c=37*(c=37*(c=37*c+ee.hashCode(this._minx))+ee.hashCode(this._maxx))+ee.hashCode(this._miny))+ee.hashCode(this._maxy)},Tn.prototype.interfaces_=function(){return[ie,de]},Tn.prototype.getClass=function(){return Tn},Tn.intersects=function(){if(3===arguments.length){var c=arguments[0],f=arguments[1],b=arguments[2];return b.x>=(c.x<f.x?c.x:f.x)&&b.x<=(c.x>f.x?c.x:f.x)&&b.y>=(c.y<f.y?c.y:f.y)&&b.y<=(c.y>f.y?c.y:f.y)}if(4===arguments.length){var w=arguments[0],M=arguments[1],z=arguments[2],j=arguments[3],Ee=Math.min(z.x,j.x),at=Math.max(z.x,j.x),Ut=Math.min(w.x,M.x),gn=Math.max(w.x,M.x);return!(Ut>at||gn<Ee||(Ee=Math.min(z.y,j.y),at=Math.max(z.y,j.y),Ut=Math.min(w.y,M.y),gn=Math.max(w.y,M.y),Ut>at||gn<Ee))}},Vn.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Tn,Vn);var un={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ft=function(c){this.geometryFactory=c||new ye};Ft.prototype.read=function(c){var f,b;c=c.replace(/[\n\r]/g," ");var M=un.typeStr.exec(c);if(-1!==c.search("EMPTY")&&((M=un.emptyTypeStr.exec(c))[2]=void 0),M&&(b=M[1].toLowerCase(),jn[b]&&(f=jn[b].apply(this,[M[2]]))),void 0===f)throw new Error("Could not parse WKT "+c);return f},Ft.prototype.write=function(c){return this.extractGeometry(c)},Ft.prototype.extractGeometry=function(c){var f=c.getGeometryType().toLowerCase();if(!Cn[f])return null;var b=f.toUpperCase();return c.isEmpty()?b+" EMPTY":b+"("+Cn[f].apply(this,[c])+")"};var Cn={coordinate:function(c){return c.x+" "+c.y},point:function(c){return Cn.coordinate.call(this,c._coordinates._coordinates[0])},multipoint:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push("("+Cn.point.apply(this,[c._geometries[b]])+")");return f.join(",")},linestring:function(c){for(var f=[],b=0,w=c._points._coordinates.length;b<w;++b)f.push(Cn.coordinate.apply(this,[c._points._coordinates[b]]));return f.join(",")},linearring:function(c){for(var f=[],b=0,w=c._points._coordinates.length;b<w;++b)f.push(Cn.coordinate.apply(this,[c._points._coordinates[b]]));return f.join(",")},multilinestring:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push("("+Cn.linestring.apply(this,[c._geometries[b]])+")");return f.join(",")},polygon:function(c){var f=[];f.push("("+Cn.linestring.apply(this,[c._shell])+")");for(var b=0,w=c._holes.length;b<w;++b)f.push("("+Cn.linestring.apply(this,[c._holes[b]])+")");return f.join(",")},multipolygon:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push("("+Cn.polygon.apply(this,[c._geometries[b]])+")");return f.join(",")},geometrycollection:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push(this.extractGeometry(c._geometries[b]));return f.join(",")}},jn={point:function(c){if(void 0===c)return this.geometryFactory.createPoint();var f=c.trim().split(un.spaces);return this.geometryFactory.createPoint(new ee(Number.parseFloat(f[0]),Number.parseFloat(f[1])))},multipoint:function(c){if(void 0===c)return this.geometryFactory.createMultiPoint();for(var f,b=c.trim().split(","),w=[],M=0,z=b.length;M<z;++M)f=b[M].replace(un.trimParens,"$1"),w.push(jn.point.apply(this,[f]));return this.geometryFactory.createMultiPoint(w)},linestring:function(c){if(void 0===c)return this.geometryFactory.createLineString();for(var f,b=c.trim().split(","),w=[],M=0,z=b.length;M<z;++M)f=b[M].trim().split(un.spaces),w.push(new ee(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLineString(w)},linearring:function(c){if(void 0===c)return this.geometryFactory.createLinearRing();for(var f,b=c.trim().split(","),w=[],M=0,z=b.length;M<z;++M)f=b[M].trim().split(un.spaces),w.push(new ee(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLinearRing(w)},multilinestring:function(c){if(void 0===c)return this.geometryFactory.createMultiLineString();for(var f,b=c.trim().split(un.parenComma),w=[],M=0,z=b.length;M<z;++M)f=b[M].replace(un.trimParens,"$1"),w.push(jn.linestring.apply(this,[f]));return this.geometryFactory.createMultiLineString(w)},polygon:function(c){if(void 0===c)return this.geometryFactory.createPolygon();for(var f,b,w,M,z=c.trim().split(un.parenComma),j=[],Ee=0,at=z.length;Ee<at;++Ee)f=z[Ee].replace(un.trimParens,"$1"),b=jn.linestring.apply(this,[f]),w=this.geometryFactory.createLinearRing(b._points),0===Ee?M=w:j.push(w);return this.geometryFactory.createPolygon(M,j)},multipolygon:function(c){if(void 0===c)return this.geometryFactory.createMultiPolygon();for(var f,b=c.trim().split(un.doubleParenComma),w=[],M=0,z=b.length;M<z;++M)f=b[M].replace(un.trimParens,"$1"),w.push(jn.polygon.apply(this,[f]));return this.geometryFactory.createMultiPolygon(w)},geometrycollection:function(c){if(void 0===c)return this.geometryFactory.createGeometryCollection();for(var f=(c=c.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),b=[],w=0,M=f.length;w<M;++w)b.push(this.read(f[w]));return this.geometryFactory.createGeometryCollection(b)}},Pt=function(c){this.parser=new Ft(c)};Pt.prototype.write=function(c){return this.parser.write(c)},Pt.toLineString=function(c,f){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+c.x+" "+c.y+", "+f.x+" "+f.y+" )"};var Pe=function(c){function f(b){c.call(this,b),this.name="RuntimeException",this.message=b,this.stack=(new c).stack}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f}(Error),Ae=function(c){function f(){c.call(this),0===arguments.length?c.call(this):1===arguments.length&&c.call(this,arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Pe),Se=function(){};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.shouldNeverReachHere=function(){if(0===arguments.length)Se.shouldNeverReachHere(null);else if(1===arguments.length){var c=arguments[0];throw new Ae("Should never reach here"+(null!==c?": "+c:""))}},Se.isTrue=function(){var f;if(1===arguments.length)Se.isTrue(arguments[0],null);else if(2===arguments.length&&(f=arguments[1],!arguments[0]))throw null===f?new Ae:new Ae(f)},Se.equals=function(){var c,f,b;if(2===arguments.length)Se.equals(c=arguments[0],f=arguments[1],null);else if(3===arguments.length&&(b=arguments[2],!(f=arguments[1]).equals(c=arguments[0])))throw new Ae("Expected "+c+" but encountered "+f+(null!==b?": "+b:""))};var ut=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ee,this._intPt[1]=new ee,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},kt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ut.prototype.getIndexAlongSegment=function(c,f){return this.computeIntLineIndex(),this._intLineIndex[c][f]},ut.prototype.getTopologySummary=function(){var c=new Me;return this.isEndPoint()&&c.append(" endpoint"),this._isProper&&c.append(" proper"),this.isCollinear()&&c.append(" collinear"),c.toString()},ut.prototype.computeIntersection=function(c,f,b,w){this._inputLines[0][0]=c,this._inputLines[0][1]=f,this._inputLines[1][0]=b,this._inputLines[1][1]=w,this._result=this.computeIntersect(c,f,b,w)},ut.prototype.getIntersectionNum=function(){return this._result},ut.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var c=arguments[0];this.getEdgeDistance(c,0)>this.getEdgeDistance(c,1)?(this._intLineIndex[c][0]=0,this._intLineIndex[c][1]=1):(this._intLineIndex[c][0]=1,this._intLineIndex[c][1]=0)}},ut.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ut.prototype.setPrecisionModel=function(c){this._precisionModel=c},ut.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var c=arguments[0],f=0;f<this._result;f++)if(!this._intPt[f].equals2D(this._inputLines[c][0])&&!this._intPt[f].equals2D(this._inputLines[c][1]))return!0;return!1}},ut.prototype.getIntersection=function(c){return this._intPt[c]},ut.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ut.prototype.hasIntersection=function(){return this._result!==ut.NO_INTERSECTION},ut.prototype.getEdgeDistance=function(c,f){return ut.computeEdgeDistance(this._intPt[f],this._inputLines[c][0],this._inputLines[c][1])},ut.prototype.isCollinear=function(){return this._result===ut.COLLINEAR_INTERSECTION},ut.prototype.toString=function(){return Pt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Pt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ut.prototype.getEndpoint=function(c,f){return this._inputLines[c][f]},ut.prototype.isIntersection=function(c){for(var f=0;f<this._result;f++)if(this._intPt[f].equals2D(c))return!0;return!1},ut.prototype.getIntersectionAlongSegment=function(c,f){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[c][f]]},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut},ut.computeEdgeDistance=function(c,f,b){var w=Math.abs(b.x-f.x),M=Math.abs(b.y-f.y),z=-1;if(c.equals(f))z=0;else if(c.equals(b))z=w>M?w:M;else{var j=Math.abs(c.x-f.x),Ee=Math.abs(c.y-f.y);0!==(z=w>M?j:Ee)||c.equals(f)||(z=Math.max(j,Ee))}return Se.isTrue(!(0===z&&!c.equals(f)),"Bad distance calculation"),z},ut.nonRobustComputeEdgeDistance=function(c,f,b){var w=c.x-f.x,M=c.y-f.y,z=Math.sqrt(w*w+M*M);return Se.isTrue(!(0===z&&!c.equals(f)),"Invalid distance calculation"),z},kt.DONT_INTERSECT.get=function(){return 0},kt.DO_INTERSECT.get=function(){return 1},kt.COLLINEAR.get=function(){return 2},kt.NO_INTERSECTION.get=function(){return 0},kt.POINT_INTERSECTION.get=function(){return 1},kt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ut,kt);var cn=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.isInSegmentEnvelopes=function(b){var w=new Tn(this._inputLines[0][0],this._inputLines[0][1]),M=new Tn(this._inputLines[1][0],this._inputLines[1][1]);return w.contains(b)&&M.contains(b)},f.prototype.computeIntersection=function(){if(3!==arguments.length)return c.prototype.computeIntersection.apply(this,arguments);var b=arguments[0],w=arguments[1],M=arguments[2];if(this._isProper=!1,Tn.intersects(w,M,b)&&0===vn.orientationIndex(w,M,b)&&0===vn.orientationIndex(M,w,b))return this._isProper=!0,(b.equals(w)||b.equals(M))&&(this._isProper=!1),this._result=c.POINT_INTERSECTION,null;this._result=c.NO_INTERSECTION},f.prototype.normalizeToMinimum=function(b,w,M,z,j){j.x=this.smallestInAbsValue(b.x,w.x,M.x,z.x),j.y=this.smallestInAbsValue(b.y,w.y,M.y,z.y),b.x-=j.x,b.y-=j.y,w.x-=j.x,w.y-=j.y,M.x-=j.x,M.y-=j.y,z.x-=j.x,z.y-=j.y},f.prototype.safeHCoordinateIntersection=function(b,w,M,z){var j=null;try{j=mr.intersection(b,w,M,z)}catch(Ee){if(!(Ee instanceof Qn))throw Ee;j=f.nearestEndpoint(b,w,M,z)}return j},f.prototype.intersection=function(b,w,M,z){var j=this.intersectionWithNormalization(b,w,M,z);return this.isInSegmentEnvelopes(j)||(j=new ee(f.nearestEndpoint(b,w,M,z))),null!==this._precisionModel&&this._precisionModel.makePrecise(j),j},f.prototype.smallestInAbsValue=function(b,w,M,z){var j=b,Ee=Math.abs(j);return Math.abs(w)<Ee&&(j=w,Ee=Math.abs(w)),Math.abs(M)<Ee&&(j=M,Ee=Math.abs(M)),Math.abs(z)<Ee&&(j=z),j},f.prototype.checkDD=function(b,w,M,z,j){var Ee=lt.intersection(b,w,M,z),at=this.isInSegmentEnvelopes(Ee);jt.out.println("DD in env = "+at+"  --------------------- "+Ee),j.distance(Ee)>1e-4&&jt.out.println("Distance = "+j.distance(Ee))},f.prototype.intersectionWithNormalization=function(b,w,M,z){var j=new ee(b),Ee=new ee(w),at=new ee(M),Ut=new ee(z),gn=new ee;this.normalizeToEnvCentre(j,Ee,at,Ut,gn);var Rn=this.safeHCoordinateIntersection(j,Ee,at,Ut);return Rn.x+=gn.x,Rn.y+=gn.y,Rn},f.prototype.computeCollinearIntersection=function(b,w,M,z){var j=Tn.intersects(b,w,M),Ee=Tn.intersects(b,w,z),at=Tn.intersects(M,z,b),Ut=Tn.intersects(M,z,w);return j&&Ee?(this._intPt[0]=M,this._intPt[1]=z,c.COLLINEAR_INTERSECTION):at&&Ut?(this._intPt[0]=b,this._intPt[1]=w,c.COLLINEAR_INTERSECTION):j&&at?(this._intPt[0]=M,this._intPt[1]=b,!M.equals(b)||Ee||Ut?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):j&&Ut?(this._intPt[0]=M,this._intPt[1]=w,!M.equals(w)||Ee||at?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):Ee&&at?(this._intPt[0]=z,this._intPt[1]=b,!z.equals(b)||j||Ut?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):Ee&&Ut?(this._intPt[0]=z,this._intPt[1]=w,!z.equals(w)||j||at?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):c.NO_INTERSECTION},f.prototype.normalizeToEnvCentre=function(b,w,M,z,j){var Ee=b.x<w.x?b.x:w.x,at=b.y<w.y?b.y:w.y,Ut=b.x>w.x?b.x:w.x,gn=b.y>w.y?b.y:w.y,Rn=M.x<z.x?M.x:z.x,Ir=M.y<z.y?M.y:z.y,wr=M.x>z.x?M.x:z.x,$r=M.y>z.y?M.y:z.y,Eo=((at>Ir?at:Ir)+(gn<$r?gn:$r))/2;j.x=((Ee>Rn?Ee:Rn)+(Ut<wr?Ut:wr))/2,j.y=Eo,b.x-=j.x,b.y-=j.y,w.x-=j.x,w.y-=j.y,M.x-=j.x,M.y-=j.y,z.x-=j.x,z.y-=j.y},f.prototype.computeIntersect=function(b,w,M,z){if(this._isProper=!1,!Tn.intersects(b,w,M,z))return c.NO_INTERSECTION;var j=vn.orientationIndex(b,w,M),Ee=vn.orientationIndex(b,w,z);if(j>0&&Ee>0||j<0&&Ee<0)return c.NO_INTERSECTION;var at=vn.orientationIndex(M,z,b),Ut=vn.orientationIndex(M,z,w);return at>0&&Ut>0||at<0&&Ut<0?c.NO_INTERSECTION:0===j&&0===Ee&&0===at&&0===Ut?this.computeCollinearIntersection(b,w,M,z):(0===j||0===Ee||0===at||0===Ut?(this._isProper=!1,b.equals2D(M)||b.equals2D(z)?this._intPt[0]=b:w.equals2D(M)||w.equals2D(z)?this._intPt[0]=w:0===j?this._intPt[0]=new ee(M):0===Ee?this._intPt[0]=new ee(z):0===at?this._intPt[0]=new ee(b):0===Ut&&(this._intPt[0]=new ee(w))):(this._isProper=!0,this._intPt[0]=this.intersection(b,w,M,z)),c.POINT_INTERSECTION)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.nearestEndpoint=function(b,w,M,z){var j=b,Ee=vn.distancePointLine(b,M,z),at=vn.distancePointLine(w,M,z);return at<Ee&&(Ee=at,j=w),(at=vn.distancePointLine(M,b,w))<Ee&&(Ee=at,j=M),(at=vn.distancePointLine(z,b,w))<Ee&&(Ee=at,j=z),j},f}(ut),Nn=function(){};Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.orientationIndex=function(c,f,b){return Nn.signOfDet2x2(f.x-c.x,f.y-c.y,b.x-f.x,b.y-f.y)},Nn.signOfDet2x2=function(c,f,b,w){var M=null,z=null,j=null;if(M=1,0===c||0===w)return 0===f||0===b?0:f>0?b>0?-M:M:b>0?M:-M;if(0===f||0===b)return w>0?c>0?M:-M:c>0?-M:M;if(f>0?w>0?f<=w||(M=-M,z=c,c=b,b=z,z=f,f=w,w=z):f<=-w?(M=-M,b=-b,w=-w):(z=c,c=-b,b=z,z=f,f=-w,w=z):w>0?-f<=w?(M=-M,c=-c,f=-f):(z=-c,c=b,b=z,z=-f,f=w,w=z):f>=w?(c=-c,f=-f,b=-b,w=-w):(M=-M,z=-c,c=-b,b=z,z=-f,f=-w,w=z),c>0){if(!(b>0&&c<=b))return M}else{if(b>0||!(c>=b))return-M;M=-M,c=-c,b=-b}for(;;){if((w-=(j=Math.floor(b/c))*f)<0)return-M;if(w>f)return M;if(c>(b-=j*c)+b){if(f<w+w)return M}else{if(f>w+w)return-M;b=c-b,w=f-w,M=-M}if(0===w)return 0===b?0:-M;if(0===b||(c-=(j=Math.floor(c/b))*b,(f-=j*w)<0))return M;if(f>w)return-M;if(b>c+c){if(w<f+f)return-M}else{if(w>f+f)return M;c=b-c,f=w-f,M=-M}if(0===f)return 0===c?0:M;if(0===c)return-M}};var Fn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Fn.prototype.countSegment=function(c,f){if(c.x<this._p.x&&f.x<this._p.x)return null;if(this._p.x===f.x&&this._p.y===f.y)return this._isPointOnSegment=!0,null;if(c.y===this._p.y&&f.y===this._p.y){var b=c.x,w=f.x;return b>w&&(b=f.x,w=c.x),this._p.x>=b&&this._p.x<=w&&(this._isPointOnSegment=!0),null}if(c.y>this._p.y&&f.y<=this._p.y||f.y>this._p.y&&c.y<=this._p.y){var z=c.y-this._p.y,Ee=f.y-this._p.y,at=Nn.signOfDet2x2(c.x-this._p.x,z,f.x-this._p.x,Ee);if(0===at)return this._isPointOnSegment=!0,null;Ee<z&&(at=-at),at>0&&this._crossingCount++}},Fn.prototype.isPointInPolygon=function(){return this.getLocation()!==oe.EXTERIOR},Fn.prototype.getLocation=function(){return this._isPointOnSegment?oe.BOUNDARY:this._crossingCount%2==1?oe.INTERIOR:oe.EXTERIOR},Fn.prototype.isOnSegment=function(){return this._isPointOnSegment},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.locatePointInRing=function(){if(arguments[0]instanceof ee&&Te(arguments[1],Xt)){for(var f=arguments[1],b=new Fn(arguments[0]),w=new ee,M=new ee,z=1;z<f.size();z++)if(f.getCoordinate(z,w),f.getCoordinate(z-1,M),b.countSegment(w,M),b.isOnSegment())return b.getLocation();return b.getLocation()}if(arguments[0]instanceof ee&&arguments[1]instanceof Array){for(var Ee=arguments[1],at=new Fn(arguments[0]),Ut=1;Ut<Ee.length;Ut++)if(at.countSegment(Ee[Ut],Ee[Ut-1]),at.isOnSegment())return at.getLocation();return at.getLocation()}};var vn=function(){},Yr={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.orientationIndex=function(c,f,b){return lt.orientationIndex(c,f,b)},vn.signedArea=function(){if(arguments[0]instanceof Array){var c=arguments[0];if(c.length<3)return 0;for(var f=0,b=c[0].x,w=1;w<c.length-1;w++)f+=(c[w].x-b)*(c[w-1].y-c[w+1].y);return f/2}if(Te(arguments[0],Xt)){var j=arguments[0],Ee=j.size();if(Ee<3)return 0;var at=new ee,Ut=new ee,gn=new ee;j.getCoordinate(0,Ut),j.getCoordinate(1,gn);var Rn=Ut.x;gn.x-=Rn;for(var Ir=0,wr=1;wr<Ee-1;wr++)at.y=Ut.y,Ut.x=gn.x,Ut.y=gn.y,j.getCoordinate(wr+1,gn),gn.x-=Rn,Ir+=Ut.x*(at.y-gn.y);return Ir/2}},vn.distanceLineLine=function(c,f,b,w){if(c.equals(f))return vn.distancePointLine(c,b,w);if(b.equals(w))return vn.distancePointLine(w,c,f);var M=!1;if(Tn.intersects(c,f,b,w)){var z=(f.x-c.x)*(w.y-b.y)-(f.y-c.y)*(w.x-b.x);if(0===z)M=!0;else{var Ee=((c.y-b.y)*(f.x-c.x)-(c.x-b.x)*(f.y-c.y))/z,at=((c.y-b.y)*(w.x-b.x)-(c.x-b.x)*(w.y-b.y))/z;(at<0||at>1||Ee<0||Ee>1)&&(M=!0)}}else M=!0;return M?K.min(vn.distancePointLine(c,b,w),vn.distancePointLine(f,b,w),vn.distancePointLine(b,c,f),vn.distancePointLine(w,c,f)):0},vn.isPointInRing=function(c,f){return vn.locatePointInRing(c,f)!==oe.EXTERIOR},vn.computeLength=function(c){var f=c.size();if(f<=1)return 0;var b=0,w=new ee;c.getCoordinate(0,w);for(var M=w.x,z=w.y,j=1;j<f;j++){c.getCoordinate(j,w);var Ee=w.x,at=w.y,Ut=Ee-M,gn=at-z;b+=Math.sqrt(Ut*Ut+gn*gn),M=Ee,z=at}return b},vn.isCCW=function(c){var f=c.length-1;if(f<3)throw new Q("Ring has fewer than 4 points, so orientation cannot be determined");for(var b=c[0],w=0,M=1;M<=f;M++){var z=c[M];z.y>b.y&&(b=z,w=M)}var j=w;do{(j-=1)<0&&(j=f)}while(c[j].equals2D(b)&&j!==w);var Ee=w;do{Ee=(Ee+1)%f}while(c[Ee].equals2D(b)&&Ee!==w);var at=c[j],Ut=c[Ee];if(at.equals2D(b)||Ut.equals2D(b)||at.equals2D(Ut))return!1;var gn=vn.computeOrientation(at,b,Ut);return 0===gn?at.x>Ut.x:gn>0},vn.locatePointInRing=function(c,f){return Fn.locatePointInRing(c,f)},vn.distancePointLinePerpendicular=function(c,f,b){var w=(b.x-f.x)*(b.x-f.x)+(b.y-f.y)*(b.y-f.y);return Math.abs(((f.y-c.y)*(b.x-f.x)-(f.x-c.x)*(b.y-f.y))/w)*Math.sqrt(w)},vn.computeOrientation=function(c,f,b){return vn.orientationIndex(c,f,b)},vn.distancePointLine=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1];if(0===f.length)throw new Q("Line array must contain at least one vertex");for(var b=c.distance(f[0]),w=0;w<f.length-1;w++){var M=vn.distancePointLine(c,f[w],f[w+1]);M<b&&(b=M)}return b}if(3===arguments.length){var z=arguments[0],j=arguments[1],Ee=arguments[2];if(j.x===Ee.x&&j.y===Ee.y)return z.distance(j);var at=(Ee.x-j.x)*(Ee.x-j.x)+(Ee.y-j.y)*(Ee.y-j.y),Ut=((z.x-j.x)*(Ee.x-j.x)+(z.y-j.y)*(Ee.y-j.y))/at;return Ut<=0?z.distance(j):Ut>=1?z.distance(Ee):Math.abs(((j.y-z.y)*(Ee.x-j.x)-(j.x-z.x)*(Ee.y-j.y))/at)*Math.sqrt(at)}},vn.isOnLine=function(c,f){for(var b=new cn,w=1;w<f.length;w++)if(b.computeIntersection(c,f[w-1],f[w]),b.hasIntersection())return!0;return!1},Yr.CLOCKWISE.get=function(){return-1},Yr.RIGHT.get=function(){return vn.CLOCKWISE},Yr.COUNTERCLOCKWISE.get=function(){return 1},Yr.LEFT.get=function(){return vn.COUNTERCLOCKWISE},Yr.COLLINEAR.get=function(){return 0},Yr.STRAIGHT.get=function(){return vn.COLLINEAR},Object.defineProperties(vn,Yr);var si=function(){};si.prototype.filter=function(c){},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var sr=function(){var c=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=c,this._SRID=c.getSRID()},Cr={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};sr.prototype.isGeometryCollection=function(){return this.getSortIndex()===sr.SORTINDEX_GEOMETRYCOLLECTION},sr.prototype.getFactory=function(){return this._factory},sr.prototype.getGeometryN=function(c){return this},sr.prototype.getArea=function(){return 0},sr.prototype.isRectangle=function(){return!1},sr.prototype.equals=function(){if(arguments[0]instanceof sr){var c=arguments[0];return null!==c&&this.equalsTopo(c)}if(arguments[0]instanceof Object){var f=arguments[0];return f instanceof sr&&this.equalsExact(f)}},sr.prototype.equalsExact=function(c){return this===c||this.equalsExact(c,0)},sr.prototype.geometryChanged=function(){this.apply(sr.geometryChangedFilter)},sr.prototype.geometryChangedAction=function(){this._envelope=null},sr.prototype.equalsNorm=function(c){return null!==c&&this.norm().equalsExact(c.norm())},sr.prototype.getLength=function(){return 0},sr.prototype.getNumGeometries=function(){return 1},sr.prototype.compareTo=function(){if(1===arguments.length){var c=arguments[0],f=c;return this.getSortIndex()!==f.getSortIndex()?this.getSortIndex()-f.getSortIndex():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(c)}if(2===arguments.length){var b=arguments[0],w=arguments[1];return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(b,w)}},sr.prototype.getUserData=function(){return this._userData},sr.prototype.getSRID=function(){return this._SRID},sr.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},sr.prototype.checkNotGeometryCollection=function(c){if(c.getSortIndex()===sr.SORTINDEX_GEOMETRYCOLLECTION)throw new Q("This method does not support GeometryCollection arguments")},sr.prototype.equal=function(c,f,b){return 0===b?c.equals(f):c.distance(f)<=b},sr.prototype.norm=function(){var c=this.copy();return c.normalize(),c},sr.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},sr.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Tn(this._envelope)},sr.prototype.setSRID=function(c){this._SRID=c},sr.prototype.setUserData=function(c){this._userData=c},sr.prototype.compare=function(c,f){for(var b=c.iterator(),w=f.iterator();b.hasNext()&&w.hasNext();){var M=b.next(),z=w.next(),j=M.compareTo(z);if(0!==j)return j}return b.hasNext()?1:w.hasNext()?-1:0},sr.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},sr.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===sr.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===sr.SORTINDEX_MULTIPOINT||this.getSortIndex()===sr.SORTINDEX_MULTILINESTRING||this.getSortIndex()===sr.SORTINDEX_MULTIPOLYGON},sr.prototype.interfaces_=function(){return[J,ie,de]},sr.prototype.getClass=function(){return sr},sr.hasNonEmptyElements=function(c){for(var f=0;f<c.length;f++)if(!c[f].isEmpty())return!0;return!1},sr.hasNullElements=function(c){for(var f=0;f<c.length;f++)if(null===c[f])return!0;return!1},Cr.serialVersionUID.get=function(){return 0x799ea46522854c00},Cr.SORTINDEX_POINT.get=function(){return 0},Cr.SORTINDEX_MULTIPOINT.get=function(){return 1},Cr.SORTINDEX_LINESTRING.get=function(){return 2},Cr.SORTINDEX_LINEARRING.get=function(){return 3},Cr.SORTINDEX_MULTILINESTRING.get=function(){return 4},Cr.SORTINDEX_POLYGON.get=function(){return 5},Cr.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Cr.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Cr.geometryChangedFilter.get=function(){return Ei},Object.defineProperties(sr,Cr);var Ei=function(){};Ei.interfaces_=function(){return[si]},Ei.filter=function(c){c.geometryChangedAction()};var Hr=function(){};Hr.prototype.filter=function(c){},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var _i=function(){},Ni={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};_i.prototype.isInBoundary=function(c){},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i},Ni.Mod2BoundaryNodeRule.get=function(){return zi},Ni.EndPointBoundaryNodeRule.get=function(){return yo},Ni.MultiValentEndPointBoundaryNodeRule.get=function(){return _t},Ni.MonoValentEndPointBoundaryNodeRule.get=function(){return De},Ni.MOD2_BOUNDARY_RULE.get=function(){return new zi},Ni.ENDPOINT_BOUNDARY_RULE.get=function(){return new yo},Ni.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},Ni.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new De},Ni.OGC_SFS_BOUNDARY_RULE.get=function(){return _i.MOD2_BOUNDARY_RULE},Object.defineProperties(_i,Ni);var zi=function(){};zi.prototype.isInBoundary=function(c){return c%2==1},zi.prototype.interfaces_=function(){return[_i]},zi.prototype.getClass=function(){return zi};var yo=function(){};yo.prototype.isInBoundary=function(c){return c>0},yo.prototype.interfaces_=function(){return[_i]},yo.prototype.getClass=function(){return yo};var _t=function(){};_t.prototype.isInBoundary=function(c){return c>1},_t.prototype.interfaces_=function(){return[_i]},_t.prototype.getClass=function(){return _t};var De=function(){};De.prototype.isInBoundary=function(c){return 1===c},De.prototype.interfaces_=function(){return[_i]},De.prototype.getClass=function(){return De};var ke=function(){};ke.prototype.add=function(){},ke.prototype.addAll=function(){},ke.prototype.isEmpty=function(){},ke.prototype.iterator=function(){},ke.prototype.size=function(){},ke.prototype.toArray=function(){},ke.prototype.remove=function(){},(Fe.prototype=new Error).name="IndexOutOfBoundsException";var gt=function(){};gt.prototype.hasNext=function(){},gt.prototype.next=function(){},gt.prototype.remove=function(){};var It=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.get=function(){},f.prototype.set=function(){},f.prototype.isEmpty=function(){},f}(ke);(tt.prototype=new Error).name="NoSuchElementException";var ct=function(c){function f(){c.call(this),this.array_=[],arguments[0]instanceof ke&&this.addAll(arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.ensureCapacity=function(){},f.prototype.interfaces_=function(){return[c,ke]},f.prototype.add=function(b){return 1===arguments.length?this.array_.push(b):this.array_.splice(arguments[0],arguments[1]),!0},f.prototype.clear=function(){this.array_=[]},f.prototype.addAll=function(b){for(var w=b.iterator();w.hasNext();)this.add(w.next());return!0},f.prototype.set=function(b,w){var M=this.array_[b];return this.array_[b]=w,M},f.prototype.iterator=function(){return new nn(this)},f.prototype.get=function(b){if(b<0||b>=this.size())throw new Fe;return this.array_[b]},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.size=function(){return this.array_.length},f.prototype.toArray=function(){for(var b=[],w=0,M=this.array_.length;w<M;w++)b.push(this.array_[w]);return b},f.prototype.remove=function(b){for(var w=!1,M=0,z=this.array_.length;M<z;M++)if(this.array_[M]===b){this.array_.splice(M,1),w=!0;break}return w},f}(It),nn=function(c){function f(b){c.call(this),this.arrayList_=b,this.position_=0}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new tt;return this.arrayList_.get(this.position_++)},f.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},f.prototype.set=function(b){return this.arrayList_.set(this.position_-1,b)},f.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},f}(gt),Qt=function(c){function f(){if(c.call(this),0!==arguments.length)if(1===arguments.length){var w=arguments[0];this.ensureCapacity(w.length),this.add(w,!0)}else if(2===arguments.length){var M=arguments[0],z=arguments[1];this.ensureCapacity(M.length),this.add(M,z)}}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={coordArrayType:{configurable:!0}};return b.coordArrayType.get=function(){return new Array(0).fill(null)},f.prototype.getCoordinate=function(w){return this.get(w)},f.prototype.addAll=function(){if(2===arguments.length){for(var M=arguments[1],z=!1,j=arguments[0].iterator();j.hasNext();)this.add(j.next(),M),z=!0;return z}return c.prototype.addAll.apply(this,arguments)},f.prototype.clone=function(){for(var w=c.prototype.clone.call(this),M=0;M<this.size();M++)w.add(M,this.get(M).copy());return w},f.prototype.toCoordinateArray=function(){return this.toArray(f.coordArrayType)},f.prototype.add=function(){if(1===arguments.length)c.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof ee&&"boolean"==typeof arguments[1]){var j=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(j))return null;c.prototype.add.call(this,j)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var Ut=arguments[0],gn=arguments[1];if(arguments[2])for(var Rn=0;Rn<Ut.length;Rn++)this.add(Ut[Rn],gn);else for(var Ir=Ut.length-1;Ir>=0;Ir--)this.add(Ut[Ir],gn);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ee){var wr=arguments[0],$r=arguments[1];if(!arguments[2]){var fi=this.size();if(fi>0&&(wr>0&&this.get(wr-1).equals2D($r)||wr<fi&&this.get(wr).equals2D($r)))return null}c.prototype.add.call(this,wr,$r)}}else if(4===arguments.length){var Eo=arguments[0],vr=arguments[1],bl=arguments[2],mu=arguments[3],qc=1;bl>mu&&(qc=-1);for(var jh=bl;jh!==mu;jh+=qc)this.add(Eo[jh],vr);return!0}},f.prototype.closeRing=function(){this.size()>0&&this.add(new ee(this.get(0)),!1)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},Object.defineProperties(f,b),f}(ct),Dt=function(){},hn={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};hn.ForwardComparator.get=function(){return qn},hn.BidirectionalComparator.get=function(){return nr},hn.coordArrayType.get=function(){return new Array(0).fill(null)},Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Dt.isRing=function(c){return!(c.length<4||!c[0].equals2D(c[c.length-1]))},Dt.ptNotInList=function(c,f){for(var b=0;b<c.length;b++){var w=c[b];if(Dt.indexOf(w,f)<0)return w}return null},Dt.scroll=function(c,f){var b=Dt.indexOf(f,c);if(b<0)return null;var w=new Array(c.length).fill(null);jt.arraycopy(c,b,w,0,c.length-b),jt.arraycopy(c,0,w,c.length-b,b),jt.arraycopy(w,0,c,0,c.length)},Dt.equals=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1];if(c===f)return!0;if(null===c||null===f||c.length!==f.length)return!1;for(var b=0;b<c.length;b++)if(!c[b].equals(f[b]))return!1;return!0}if(3===arguments.length){var w=arguments[0],M=arguments[1],z=arguments[2];if(w===M)return!0;if(null===w||null===M||w.length!==M.length)return!1;for(var j=0;j<w.length;j++)if(0!==z.compare(w[j],M[j]))return!1;return!0}},Dt.intersection=function(c,f){for(var b=new Qt,w=0;w<c.length;w++)f.intersects(c[w])&&b.add(c[w],!0);return b.toCoordinateArray()},Dt.hasRepeatedPoints=function(c){for(var f=1;f<c.length;f++)if(c[f-1].equals(c[f]))return!0;return!1},Dt.removeRepeatedPoints=function(c){return Dt.hasRepeatedPoints(c)?new Qt(c,!1).toCoordinateArray():c},Dt.reverse=function(c){for(var f=c.length-1,b=Math.trunc(f/2),w=0;w<=b;w++){var M=c[w];c[w]=c[f-w],c[f-w]=M}},Dt.removeNull=function(c){for(var f=0,b=0;b<c.length;b++)null!==c[b]&&f++;var w=new Array(f).fill(null);if(0===f)return w;for(var M=0,z=0;z<c.length;z++)null!==c[z]&&(w[M++]=c[z]);return w},Dt.copyDeep=function(){if(1===arguments.length){for(var c=arguments[0],f=new Array(c.length).fill(null),b=0;b<c.length;b++)f[b]=new ee(c[b]);return f}if(5===arguments.length)for(var w=arguments[0],M=arguments[1],z=arguments[2],j=arguments[3],Ee=arguments[4],at=0;at<Ee;at++)z[j+at]=new ee(w[M+at])},Dt.isEqualReversed=function(c,f){for(var b=0;b<c.length;b++)if(0!==c[b].compareTo(f[c.length-b-1]))return!1;return!0},Dt.envelope=function(c){for(var f=new Tn,b=0;b<c.length;b++)f.expandToInclude(c[b]);return f},Dt.toCoordinateArray=function(c){return c.toArray(Dt.coordArrayType)},Dt.atLeastNCoordinatesOrNothing=function(c,f){return f.length>=c?f:[]},Dt.indexOf=function(c,f){for(var b=0;b<f.length;b++)if(c.equals(f[b]))return b;return-1},Dt.increasingDirection=function(c){for(var f=0;f<Math.trunc(c.length/2);f++){var w=c[f].compareTo(c[c.length-1-f]);if(0!==w)return w}return 1},Dt.compare=function(c,f){for(var b=0;b<c.length&&b<f.length;){var w=c[b].compareTo(f[b]);if(0!==w)return w;b++}return b<f.length?-1:b<c.length?1:0},Dt.minCoordinate=function(c){for(var f=null,b=0;b<c.length;b++)(null===f||f.compareTo(c[b])>0)&&(f=c[b]);return f},Dt.extract=function(c,f,b){f=K.clamp(f,0,c.length);var w=(b=K.clamp(b,-1,c.length))-f+1;b<0&&(w=0),f>=c.length&&(w=0),b<f&&(w=0);var M=new Array(w).fill(null);if(0===w)return M;for(var z=0,j=f;j<=b;j++)M[z++]=c[j];return M},Object.defineProperties(Dt,hn);var qn=function(){};qn.prototype.compare=function(c,f){return Dt.compare(c,f)},qn.prototype.interfaces_=function(){return[xe]},qn.prototype.getClass=function(){return qn};var nr=function(){};nr.prototype.compare=function(c,f){var b=c,w=f;if(b.length<w.length)return-1;if(b.length>w.length)return 1;if(0===b.length)return 0;var M=Dt.compare(b,w);return Dt.isEqualReversed(b,w)?0:M},nr.prototype.OLDcompare=function(c,f){var b=c,w=f;if(b.length<w.length)return-1;if(b.length>w.length)return 1;if(0===b.length)return 0;for(var M=Dt.increasingDirection(b),z=Dt.increasingDirection(w),j=M>0?0:b.length-1,Ee=z>0?0:b.length-1,at=0;at<b.length;at++){var Ut=b[j].compareTo(w[Ee]);if(0!==Ut)return Ut;j+=M,Ee+=z}return 0},nr.prototype.interfaces_=function(){return[xe]},nr.prototype.getClass=function(){return nr};var Xn=function(){};Xn.prototype.get=function(){},Xn.prototype.put=function(){},Xn.prototype.size=function(){},Xn.prototype.values=function(){},Xn.prototype.entrySet=function(){};var bi=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f}(Xn);(g.prototype=new Error).name="OperationNotSupported",(me.prototype=new ke).contains=function(){};var Si=function(c){function f(){c.call(this),this.array_=[],arguments[0]instanceof ke&&this.addAll(arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.contains=function(b){for(var w=0,M=this.array_.length;w<M;w++)if(this.array_[w]===b)return!0;return!1},f.prototype.add=function(b){return!this.contains(b)&&(this.array_.push(b),!0)},f.prototype.addAll=function(b){for(var w=b.iterator();w.hasNext();)this.add(w.next());return!0},f.prototype.remove=function(b){throw new Error},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var b=[],w=0,M=this.array_.length;w<M;w++)b.push(this.array_[w]);return b},f.prototype.iterator=function(){return new ai(this)},f}(me),ai=function(c){function f(b){c.call(this),this.hashSet_=b,this.position_=0}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new tt;return this.hashSet_.array_[this.position_++]},f.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},f.prototype.remove=function(){throw new g},f}(gt),Kr=0;(Xe.prototype=new bi).get=function(c){for(var f=this.root_;null!==f;){var b=c.compareTo(f.key);if(b<0)f=f.left;else{if(!(b>0))return f.value;f=f.right}}return null},Xe.prototype.put=function(c,f){if(null===this.root_)return this.root_={key:c,value:f,left:null,right:null,parent:null,color:Kr,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var b,w,M=this.root_;do{if(b=M,(w=c.compareTo(M.key))<0)M=M.left;else{if(!(w>0)){var z=M.value;return M.value=f,z}M=M.right}}while(null!==M);var j={key:c,left:null,right:null,value:f,parent:b,color:Kr,getValue:function(){return this.value},getKey:function(){return this.key}};return w<0?b.left=j:b.right=j,this.fixAfterInsertion(j),this.size_++,null},Xe.prototype.fixAfterInsertion=function(c){for(c.color=1;null!=c&&c!==this.root_&&1===c.parent.color;)if(Ne(c)===ht(Ne(Ne(c)))){var f=Wt(Ne(Ne(c)));1===Be(f)?(We(Ne(c),Kr),We(f,Kr),We(Ne(Ne(c)),1),c=Ne(Ne(c))):(c===Wt(Ne(c))&&(c=Ne(c),this.rotateLeft(c)),We(Ne(c),Kr),We(Ne(Ne(c)),1),this.rotateRight(Ne(Ne(c))))}else{var b=ht(Ne(Ne(c)));1===Be(b)?(We(Ne(c),Kr),We(b,Kr),We(Ne(Ne(c)),1),c=Ne(Ne(c))):(c===ht(Ne(c))&&(c=Ne(c),this.rotateRight(c)),We(Ne(c),Kr),We(Ne(Ne(c)),1),this.rotateLeft(Ne(Ne(c))))}this.root_.color=Kr},Xe.prototype.values=function(){var c=new ct,f=this.getFirstEntry();if(null!==f)for(c.add(f.value);null!==(f=Xe.successor(f));)c.add(f.value);return c},Xe.prototype.entrySet=function(){var c=new Si,f=this.getFirstEntry();if(null!==f)for(c.add(f);null!==(f=Xe.successor(f));)c.add(f);return c},Xe.prototype.rotateLeft=function(c){if(null!=c){var f=c.right;c.right=f.left,null!=f.left&&(f.left.parent=c),f.parent=c.parent,null===c.parent?this.root_=f:c.parent.left===c?c.parent.left=f:c.parent.right=f,f.left=c,c.parent=f}},Xe.prototype.rotateRight=function(c){if(null!=c){var f=c.left;c.left=f.right,null!=f.right&&(f.right.parent=c),f.parent=c.parent,null===c.parent?this.root_=f:c.parent.right===c?c.parent.right=f:c.parent.left=f,f.right=c,c.parent=f}},Xe.prototype.getFirstEntry=function(){var c=this.root_;if(null!=c)for(;null!=c.left;)c=c.left;return c},Xe.successor=function(c){if(null===c)return null;if(null!==c.right){for(var f=c.right;null!==f.left;)f=f.left;return f}for(var b=c.parent,w=c;null!==b&&w===b.right;)w=b,b=b.parent;return b},Xe.prototype.size=function(){return this.size_};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},et.prototype=new me,(He.prototype=new et).contains=function(c){for(var f=0,b=this.array_.length;f<b;f++)if(0===this.array_[f].compareTo(c))return!0;return!1},He.prototype.add=function(c){if(this.contains(c))return!1;for(var f=0,b=this.array_.length;f<b;f++)if(1===this.array_[f].compareTo(c))return this.array_.splice(f,0,c),!0;return this.array_.push(c),!0},He.prototype.addAll=function(c){for(var f=c.iterator();f.hasNext();)this.add(f.next());return!0},He.prototype.remove=function(c){throw new g},He.prototype.size=function(){return this.array_.length},He.prototype.isEmpty=function(){return 0===this.array_.length},He.prototype.toArray=function(){for(var c=[],f=0,b=this.array_.length;f<b;f++)c.push(this.array_[f]);return c},He.prototype.iterator=function(){return new Fi(this)};var Fi=function(c){this.treeSet_=c,this.position_=0};Fi.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new tt;return this.treeSet_.array_[this.position_++]},Fi.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Fi.prototype.remove=function(){throw new g};var bt=function(){};bt.sort=function(){var c,f,b,M=arguments[0];if(1===arguments.length)M.sort(function(j,Ee){return j.compareTo(Ee)});else if(2===arguments.length)b=arguments[1],M.sort(function(j,Ee){return b.compare(j,Ee)});else if(3===arguments.length){(f=M.slice(arguments[1],arguments[2])).sort();var z=M.slice(0,arguments[1]).concat(f,M.slice(arguments[2],M.length));for(M.splice(0,M.length),c=0;c<z.length;c++)M.push(z[c])}else if(4===arguments.length)for(f=M.slice(arguments[1],arguments[2]),b=arguments[3],f.sort(function(j,Ee){return b.compare(j,Ee)}),z=M.slice(0,arguments[1]).concat(f,M.slice(arguments[2],M.length)),M.splice(0,M.length),c=0;c<z.length;c++)M.push(z[c])},bt.asList=function(c){for(var f=new ct,b=0,w=c.length;b<w;b++)f.add(c[b]);return f};var Ct=function(){},on={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};on.P.get=function(){return 0},on.L.get=function(){return 1},on.A.get=function(){return 2},on.FALSE.get=function(){return-1},on.TRUE.get=function(){return-2},on.DONTCARE.get=function(){return-3},on.SYM_FALSE.get=function(){return"F"},on.SYM_TRUE.get=function(){return"T"},on.SYM_DONTCARE.get=function(){return"*"},on.SYM_P.get=function(){return"0"},on.SYM_L.get=function(){return"1"},on.SYM_A.get=function(){return"2"},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.toDimensionSymbol=function(c){switch(c){case Ct.FALSE:return Ct.SYM_FALSE;case Ct.TRUE:return Ct.SYM_TRUE;case Ct.DONTCARE:return Ct.SYM_DONTCARE;case Ct.P:return Ct.SYM_P;case Ct.L:return Ct.SYM_L;case Ct.A:return Ct.SYM_A}throw new Q("Unknown dimension value: "+c)},Ct.toDimensionValue=function(c){switch(Ue.toUpperCase(c)){case Ct.SYM_FALSE:return Ct.FALSE;case Ct.SYM_TRUE:return Ct.TRUE;case Ct.SYM_DONTCARE:return Ct.DONTCARE;case Ct.SYM_P:return Ct.P;case Ct.SYM_L:return Ct.L;case Ct.SYM_A:return Ct.A}throw new Q("Unknown dimension symbol: "+c)},Object.defineProperties(Ct,on);var ln=function(){};ln.prototype.filter=function(c){},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var Sn=function(){};Sn.prototype.filter=function(c,f){},Sn.prototype.isDone=function(){},Sn.prototype.isGeometryChanged=function(){},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn};var $n=function(c){function f(w,M){if(c.call(this,M),this._geometries=w||[],c.hasNullElements(this._geometries))throw new Q("geometries must not contain null elements")}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){for(var w=new Tn,M=0;M<this._geometries.length;M++)w.expandToInclude(this._geometries[M].getEnvelopeInternal());return w},f.prototype.getGeometryN=function(w){return this._geometries[w]},f.prototype.getSortIndex=function(){return c.SORTINDEX_GEOMETRYCOLLECTION},f.prototype.getCoordinates=function(){for(var w=new Array(this.getNumPoints()).fill(null),M=-1,z=0;z<this._geometries.length;z++)for(var j=this._geometries[z].getCoordinates(),Ee=0;Ee<j.length;Ee++)w[++M]=j[Ee];return w},f.prototype.getArea=function(){for(var w=0,M=0;M<this._geometries.length;M++)w+=this._geometries[M].getArea();return w},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];if(!this.isEquivalentClass(w))return!1;var z=w;if(this._geometries.length!==z._geometries.length)return!1;for(var j=0;j<this._geometries.length;j++)if(!this._geometries[j].equalsExact(z._geometries[j],M))return!1;return!0}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var w=0;w<this._geometries.length;w++)this._geometries[w].normalize();bt.sort(this._geometries)},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},f.prototype.getBoundaryDimension=function(){for(var w=Ct.FALSE,M=0;M<this._geometries.length;M++)w=Math.max(w,this._geometries[M].getBoundaryDimension());return w},f.prototype.getDimension=function(){for(var w=Ct.FALSE,M=0;M<this._geometries.length;M++)w=Math.max(w,this._geometries[M].getDimension());return w},f.prototype.getLength=function(){for(var w=0,M=0;M<this._geometries.length;M++)w+=this._geometries[M].getLength();return w},f.prototype.getNumPoints=function(){for(var w=0,M=0;M<this._geometries.length;M++)w+=this._geometries[M].getNumPoints();return w},f.prototype.getNumGeometries=function(){return this._geometries.length},f.prototype.reverse=function(){for(var M=new Array(this._geometries.length).fill(null),z=0;z<this._geometries.length;z++)M[z]=this._geometries[z].reverse();return this.getFactory().createGeometryCollection(M)},f.prototype.compareToSameClass=function(){if(1===arguments.length){var w=arguments[0],M=new He(bt.asList(this._geometries)),z=new He(bt.asList(w._geometries));return this.compare(M,z)}if(2===arguments.length){for(var Ee=arguments[1],at=arguments[0],Ut=this.getNumGeometries(),gn=at.getNumGeometries(),Rn=0;Rn<Ut&&Rn<gn;){var Ir=this.getGeometryN(Rn),wr=at.getGeometryN(Rn),$r=Ir.compareToSameClass(wr,Ee);if(0!==$r)return $r;Rn++}return Rn<Ut?1:Rn<gn?-1:0}},f.prototype.apply=function(){if(Te(arguments[0],Hr))for(var w=arguments[0],M=0;M<this._geometries.length;M++)this._geometries[M].apply(w);else if(Te(arguments[0],Sn)){var z=arguments[0];if(0===this._geometries.length)return null;for(var j=0;j<this._geometries.length&&(this._geometries[j].apply(z),!z.isDone());j++);z.isGeometryChanged()&&this.geometryChanged()}else if(Te(arguments[0],ln)){var Ee=arguments[0];Ee.filter(this);for(var at=0;at<this._geometries.length;at++)this._geometries[at].apply(Ee)}else if(Te(arguments[0],si)){var Ut=arguments[0];Ut.filter(this);for(var gn=0;gn<this._geometries.length;gn++)this._geometries[gn].apply(Ut)}},f.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Se.shouldNeverReachHere(),null},f.prototype.clone=function(){var w=c.prototype.clone.call(this);w._geometries=new Array(this._geometries.length).fill(null);for(var M=0;M<this._geometries.length;M++)w._geometries[M]=this._geometries[M].clone();return w},f.prototype.getGeometryType=function(){return"GeometryCollection"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),M=0;M<w.length;M++)w[M]=this._geometries[M].copy();return new f(w,this._factory)},f.prototype.isEmpty=function(){for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isEmpty())return!1;return!0},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(f,b),f}(sr),Yn=function(c){function f(){c.apply(this,arguments)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return sr.SORTINDEX_MULTILINESTRING},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];return!!this.isEquivalentClass(w)&&c.prototype.equalsExact.call(this,w,M)}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?Ct.FALSE:0},f.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isClosed())return!1;return!0},f.prototype.getDimension=function(){return 1},f.prototype.reverse=function(){for(var w=this._geometries.length,M=new Array(w).fill(null),z=0;z<this._geometries.length;z++)M[w-1-z]=this._geometries[z].reverse();return this.getFactory().createMultiLineString(M)},f.prototype.getBoundary=function(){return new ir(this).getBoundary()},f.prototype.getGeometryType=function(){return"MultiLineString"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),M=0;M<w.length;M++)w[M]=this._geometries[M].copy();return new f(w,this._factory)},f.prototype.interfaces_=function(){return[Ii]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(f,b),f}($n),ir=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var c=arguments[0],f=_i.MOD2_BOUNDARY_RULE;this._geom=c,this._geomFact=c.getFactory(),this._bnRule=f}else if(2===arguments.length){var b=arguments[0],w=arguments[1];this._geom=b,this._geomFact=b.getFactory(),this._bnRule=w}};ir.prototype.boundaryMultiLineString=function(c){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var f=this.computeBoundaryCoordinates(c);return 1===f.length?this._geomFact.createPoint(f[0]):this._geomFact.createMultiPointFromCoords(f)},ir.prototype.getBoundary=function(){return this._geom instanceof oi?this.boundaryLineString(this._geom):this._geom instanceof Yn?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},ir.prototype.boundaryLineString=function(c){return this._geom.isEmpty()?this.getEmptyMultiPoint():c.isClosed()?this._bnRule.isInBoundary(2)?c.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([c.getStartPoint(),c.getEndPoint()])},ir.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},ir.prototype.computeBoundaryCoordinates=function(c){var f=new ct;this._endpointMap=new Xe;for(var b=0;b<c.getNumGeometries();b++){var w=c.getGeometryN(b);0!==w.getNumPoints()&&(this.addEndpoint(w.getCoordinateN(0)),this.addEndpoint(w.getCoordinateN(w.getNumPoints()-1)))}for(var M=this._endpointMap.entrySet().iterator();M.hasNext();){var z=M.next(),j=z.getValue().count;this._bnRule.isInBoundary(j)&&f.add(z.getKey())}return Dt.toCoordinateArray(f)},ir.prototype.addEndpoint=function(c){var f=this._endpointMap.get(c);null===f&&(f=new Dr,this._endpointMap.put(c,f)),f.count++},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir},ir.getBoundary=function(){return 1===arguments.length?new ir(arguments[0]).getBoundary():2===arguments.length?new ir(arguments[0],arguments[1]).getBoundary():void 0};var Dr=function(){this.count=null};Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr};var Bn=function(){},yi={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.chars=function(c,f){for(var b=new Array(f).fill(null),w=0;w<f;w++)b[w]=c;return String(b)},Bn.getStackTrace=function(){if(1===arguments.length){var c=arguments[0],f=new function(){},b=new function(){}(f);return c.printStackTrace(b),f.toString()}if(2===arguments.length){for(var M=arguments[1],z="",j=new function(){}(new function(){}(Bn.getStackTrace(arguments[0]))),Ee=0;Ee<M;Ee++)try{z+=j.readLine()+Bn.NEWLINE}catch(at){if(!(at instanceof Bt))throw at;Se.shouldNeverReachHere()}return z}},Bn.split=function(c,f){for(var b=f.length,w=new ct,M=""+c,z=M.indexOf(f);z>=0;){var j=M.substring(0,z);w.add(j),z=(M=M.substring(z+b)).indexOf(f)}M.length>0&&w.add(M);for(var Ee=new Array(w.size()).fill(null),at=0;at<Ee.length;at++)Ee[at]=w.get(at);return Ee},Bn.toString=function(){if(1===arguments.length)return Bn.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},Bn.spaces=function(c){return Bn.chars(" ",c)},yi.NEWLINE.get=function(){return jt.getProperty("line.separator")},yi.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Bn,yi);var Pr=function(){};Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.copyCoord=function(c,f,b,w){for(var M=Math.min(c.getDimension(),b.getDimension()),z=0;z<M;z++)b.setOrdinate(w,z,c.getOrdinate(f,z))},Pr.isRing=function(c){var f=c.size();return 0===f||!(f<=3)&&c.getOrdinate(0,Xt.X)===c.getOrdinate(f-1,Xt.X)&&c.getOrdinate(0,Xt.Y)===c.getOrdinate(f-1,Xt.Y)},Pr.isEqual=function(c,f){var b=c.size();if(b!==f.size())return!1;for(var w=Math.min(c.getDimension(),f.getDimension()),M=0;M<b;M++)for(var z=0;z<w;z++){var j=c.getOrdinate(M,z),Ee=f.getOrdinate(M,z);if(!(c.getOrdinate(M,z)===f.getOrdinate(M,z)||ne.isNaN(j)&&ne.isNaN(Ee)))return!1}return!0},Pr.extend=function(c,f,b){var w=c.create(b,f.getDimension()),M=f.size();if(Pr.copy(f,0,w,0,M),M>0)for(var z=M;z<b;z++)Pr.copy(f,M-1,w,z,1);return w},Pr.reverse=function(c){for(var f=c.size()-1,b=Math.trunc(f/2),w=0;w<=b;w++)Pr.swap(c,w,f-w)},Pr.swap=function(c,f,b){if(f===b)return null;for(var w=0;w<c.getDimension();w++){var M=c.getOrdinate(f,w);c.setOrdinate(f,w,c.getOrdinate(b,w)),c.setOrdinate(b,w,M)}},Pr.copy=function(c,f,b,w,M){for(var z=0;z<M;z++)Pr.copyCoord(c,f+z,b,w+z)},Pr.toString=function(){if(1===arguments.length){var c=arguments[0],f=c.size();if(0===f)return"()";var b=c.getDimension(),w=new Me;w.append("(");for(var M=0;M<f;M++){M>0&&w.append(" ");for(var z=0;z<b;z++)z>0&&w.append(","),w.append(Bn.toString(c.getOrdinate(M,z)))}return w.append(")"),w.toString()}},Pr.ensureValidRing=function(c,f){var b=f.size();return 0===b?f:b<=3?Pr.createClosedRing(c,f,4):f.getOrdinate(0,Xt.X)===f.getOrdinate(b-1,Xt.X)&&f.getOrdinate(0,Xt.Y)===f.getOrdinate(b-1,Xt.Y)?f:Pr.createClosedRing(c,f,b+1)},Pr.createClosedRing=function(c,f,b){var w=c.create(b,f.getDimension()),M=f.size();Pr.copy(f,0,w,0,M);for(var z=M;z<b;z++)Pr.copy(f,0,w,z,1);return w};var oi=function(c){function f(w,M){c.call(this,M),this._points=null,this.init(w)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Tn:this._points.expandEnvelope(new Tn)},f.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},f.prototype.getSortIndex=function(){return c.SORTINDEX_LINESTRING},f.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];if(!this.isEquivalentClass(w))return!1;var z=w;if(this._points.size()!==z._points.size())return!1;for(var j=0;j<this._points.size();j++)if(!this.equal(this._points.getCoordinate(j),z._points.getCoordinate(j),M))return!1;return!0}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var w=0;w<Math.trunc(this._points.size()/2);w++){var M=this._points.size()-1-w;if(!this._points.getCoordinate(w).equals(this._points.getCoordinate(M)))return this._points.getCoordinate(w).compareTo(this._points.getCoordinate(M))>0&&Pr.reverse(this._points),null}},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?Ct.FALSE:0},f.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},f.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},f.prototype.getDimension=function(){return 1},f.prototype.getLength=function(){return vn.computeLength(this._points)},f.prototype.getNumPoints=function(){return this._points.size()},f.prototype.reverse=function(){var w=this._points.copy();return Pr.reverse(w),this.getFactory().createLineString(w)},f.prototype.compareToSameClass=function(){if(1===arguments.length){for(var w=arguments[0],M=0,z=0;M<this._points.size()&&z<w._points.size();){var j=this._points.getCoordinate(M).compareTo(w._points.getCoordinate(z));if(0!==j)return j;M++,z++}return M<this._points.size()?1:z<w._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},f.prototype.apply=function(){if(Te(arguments[0],Hr))for(var w=arguments[0],M=0;M<this._points.size();M++)w.filter(this._points.getCoordinate(M));else if(Te(arguments[0],Sn)){var z=arguments[0];if(0===this._points.size())return null;for(var j=0;j<this._points.size()&&(z.filter(this._points,j),!z.isDone());j++);z.isGeometryChanged()&&this.geometryChanged()}else(Te(arguments[0],ln)||Te(arguments[0],si))&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return new ir(this).getBoundary()},f.prototype.isEquivalentClass=function(w){return w instanceof f},f.prototype.clone=function(){var w=c.prototype.clone.call(this);return w._points=this._points.clone(),w},f.prototype.getCoordinateN=function(w){return this._points.getCoordinate(w)},f.prototype.getGeometryType=function(){return"LineString"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._points},f.prototype.isEmpty=function(){return 0===this._points.size()},f.prototype.init=function(w){if(null===w&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),1===w.size())throw new Q("Invalid number of points in LineString (found "+w.size()+" - must be 0 or >= 2)");this._points=w},f.prototype.isCoordinate=function(w){for(var M=0;M<this._points.size();M++)if(this._points.getCoordinate(M).equals(w))return!0;return!1},f.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},f.prototype.getPointN=function(w){return this.getFactory().createPoint(this._points.getCoordinate(w))},f.prototype.interfaces_=function(){return[Ii]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(f,b),f}(sr),to=function(){};to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to};var Vi=function(c){function f(w,M){c.call(this,M),this._coordinates=w||null,this.init(this._coordinates)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Tn;var w=new Tn;return w.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),w},f.prototype.getSortIndex=function(){return c.SORTINDEX_POINT},f.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];return!!this.isEquivalentClass(w)&&(!(!this.isEmpty()||!w.isEmpty())||this.isEmpty()===w.isEmpty()&&this.equal(w.getCoordinate(),this.getCoordinate(),M))}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){},f.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},f.prototype.getBoundaryDimension=function(){return Ct.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getNumPoints=function(){return this.isEmpty()?0:1},f.prototype.reverse=function(){return this.copy()},f.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},f.prototype.compareToSameClass=function(){if(1===arguments.length){var w=arguments[0];return this.getCoordinate().compareTo(w.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},f.prototype.apply=function(){if(Te(arguments[0],Hr)){var w=arguments[0];if(this.isEmpty())return null;w.filter(this.getCoordinate())}else if(Te(arguments[0],Sn)){var M=arguments[0];if(this.isEmpty())return null;M.filter(this._coordinates,0),M.isGeometryChanged()&&this.geometryChanged()}else(Te(arguments[0],ln)||Te(arguments[0],si))&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.clone=function(){var w=c.prototype.clone.call(this);return w._coordinates=this._coordinates.clone(),w},f.prototype.getGeometryType=function(){return"Point"},f.prototype.copy=function(){return new f(this._coordinates.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._coordinates},f.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},f.prototype.isEmpty=function(){return 0===this._coordinates.size()},f.prototype.init=function(w){null===w&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),Se.isTrue(w.size()<=1),this._coordinates=w},f.prototype.isSimple=function(){return!0},f.prototype.interfaces_=function(){return[to]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(f,b),f}(sr),So=function(){};So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So};var so=function(c){function f(w,M,z){if(c.call(this,z),this._shell=null,this._holes=null,null===w&&(w=this.getFactory().createLinearRing()),null===M&&(M=[]),c.hasNullElements(M))throw new Q("holes must not contain null elements");if(w.isEmpty()&&c.hasNonEmptyElements(M))throw new Q("shell is empty but holes are not");this._shell=w,this._holes=M}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},f.prototype.getSortIndex=function(){return c.SORTINDEX_POLYGON},f.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var w=new Array(this.getNumPoints()).fill(null),M=-1,z=this._shell.getCoordinates(),j=0;j<z.length;j++)w[++M]=z[j];for(var Ee=0;Ee<this._holes.length;Ee++)for(var at=this._holes[Ee].getCoordinates(),Ut=0;Ut<at.length;Ut++)w[++M]=at[Ut];return w},f.prototype.getArea=function(){var w=0;w+=Math.abs(vn.signedArea(this._shell.getCoordinateSequence()));for(var M=0;M<this._holes.length;M++)w-=Math.abs(vn.signedArea(this._holes[M].getCoordinateSequence()));return w},f.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var w=this._shell.getCoordinateSequence(),M=this.getEnvelopeInternal(),z=0;z<5;z++){var j=w.getX(z);if(j!==M.getMinX()&&j!==M.getMaxX())return!1;var Ee=w.getY(z);if(Ee!==M.getMinY()&&Ee!==M.getMaxY())return!1}for(var at=w.getX(0),Ut=w.getY(0),gn=1;gn<=4;gn++){var Rn=w.getX(gn),Ir=w.getY(gn);if(Rn!==at==(Ir!==Ut))return!1;at=Rn,Ut=Ir}return!0},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];if(!this.isEquivalentClass(w))return!1;var z=w;if(!this._shell.equalsExact(z._shell,M)||this._holes.length!==z._holes.length)return!1;for(var at=0;at<this._holes.length;at++)if(!this._holes[at].equalsExact(z._holes[at],M))return!1;return!0}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var w=0;w<this._holes.length;w++)this.normalize(this._holes[w],!1);bt.sort(this._holes)}else if(2===arguments.length){var M=arguments[0],z=arguments[1];if(M.isEmpty())return null;var j=new Array(M.getCoordinates().length-1).fill(null);jt.arraycopy(M.getCoordinates(),0,j,0,j.length);var Ee=Dt.minCoordinate(M.getCoordinates());Dt.scroll(j,Ee),jt.arraycopy(j,0,M.getCoordinates(),0,j.length),M.getCoordinates()[j.length]=j[0],vn.isCCW(M.getCoordinates())===z&&Dt.reverse(M.getCoordinates())}},f.prototype.getCoordinate=function(){return this._shell.getCoordinate()},f.prototype.getNumInteriorRing=function(){return this._holes.length},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.getLength=function(){var w=0;w+=this._shell.getLength();for(var M=0;M<this._holes.length;M++)w+=this._holes[M].getLength();return w},f.prototype.getNumPoints=function(){for(var w=this._shell.getNumPoints(),M=0;M<this._holes.length;M++)w+=this._holes[M].getNumPoints();return w},f.prototype.reverse=function(){var w=this.copy();w._shell=this._shell.copy().reverse(),w._holes=new Array(this._holes.length).fill(null);for(var M=0;M<this._holes.length;M++)w._holes[M]=this._holes[M].copy().reverse();return w},f.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},f.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var Ee=arguments[1],at=arguments[0],Rn=this._shell.compareToSameClass(at._shell,Ee);if(0!==Rn)return Rn;for(var Ir=this.getNumInteriorRing(),wr=at.getNumInteriorRing(),$r=0;$r<Ir&&$r<wr;){var fi=this.getInteriorRingN($r),Eo=at.getInteriorRingN($r),vr=fi.compareToSameClass(Eo,Ee);if(0!==vr)return vr;$r++}return $r<Ir?1:$r<wr?-1:0}},f.prototype.apply=function(w){if(Te(w,Hr)){this._shell.apply(w);for(var M=0;M<this._holes.length;M++)this._holes[M].apply(w)}else if(Te(w,Sn)){if(this._shell.apply(w),!w.isDone())for(var z=0;z<this._holes.length&&(this._holes[z].apply(w),!w.isDone());z++);w.isGeometryChanged()&&this.geometryChanged()}else if(Te(w,ln))w.filter(this);else if(Te(w,si)){w.filter(this),this._shell.apply(w);for(var j=0;j<this._holes.length;j++)this._holes[j].apply(w)}},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var w=new Array(this._holes.length+1).fill(null);w[0]=this._shell;for(var M=0;M<this._holes.length;M++)w[M+1]=this._holes[M];return w.length<=1?this.getFactory().createLinearRing(w[0].getCoordinateSequence()):this.getFactory().createMultiLineString(w)},f.prototype.clone=function(){var w=c.prototype.clone.call(this);w._shell=this._shell.clone(),w._holes=new Array(this._holes.length).fill(null);for(var M=0;M<this._holes.length;M++)w._holes[M]=this._holes[M].clone();return w},f.prototype.getGeometryType=function(){return"Polygon"},f.prototype.copy=function(){for(var w=this._shell.copy(),M=new Array(this._holes.length).fill(null),z=0;z<M.length;z++)M[z]=this._holes[z].copy();return new f(w,M,this._factory)},f.prototype.getExteriorRing=function(){return this._shell},f.prototype.isEmpty=function(){return this._shell.isEmpty()},f.prototype.getInteriorRingN=function(w){return this._holes[w]},f.prototype.interfaces_=function(){return[So]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(f,b),f}(sr),Ns=function(c){function f(){c.apply(this,arguments)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return sr.SORTINDEX_MULTIPOINT},f.prototype.isValid=function(){return!0},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];return!!this.isEquivalentClass(w)&&c.prototype.equalsExact.call(this,w,M)}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():c.prototype.getCoordinate.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return Ct.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.getGeometryType=function(){return"MultiPoint"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),M=0;M<w.length;M++)w[M]=this._geometries[M].copy();return new f(w,this._factory)},f.prototype.interfaces_=function(){return[to]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(f,b),f}($n),Lo=function(c){function f(w,M){w instanceof ee&&M instanceof ye&&(w=M.getCoordinateSequenceFactory().create(w)),c.call(this,w,M),this.validateConstruction()}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return sr.SORTINDEX_LINEARRING},f.prototype.getBoundaryDimension=function(){return Ct.FALSE},f.prototype.isClosed=function(){return!!this.isEmpty()||c.prototype.isClosed.call(this)},f.prototype.reverse=function(){var w=this._points.copy();return Pr.reverse(w),this.getFactory().createLinearRing(w)},f.prototype.validateConstruction=function(){if(!this.isEmpty()&&!c.prototype.isClosed.call(this))throw new Q("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<f.MINIMUM_VALID_SIZE)throw new Q("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},f.prototype.getGeometryType=function(){return"LinearRing"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.MINIMUM_VALID_SIZE.get=function(){return 4},b.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(f,b),f}(oi),no=function(c){function f(){c.apply(this,arguments)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return sr.SORTINDEX_MULTIPOLYGON},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],M=arguments[1];return!!this.isEquivalentClass(w)&&c.prototype.equalsExact.call(this,w,M)}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.reverse=function(){for(var M=new Array(this._geometries.length).fill(null),z=0;z<this._geometries.length;z++)M[z]=this._geometries[z].reverse();return this.getFactory().createMultiPolygon(M)},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var w=new ct,M=0;M<this._geometries.length;M++)for(var z=this._geometries[M].getBoundary(),j=0;j<z.getNumGeometries();j++)w.add(z.getGeometryN(j));var Ee=new Array(w.size()).fill(null);return this.getFactory().createMultiLineString(w.toArray(Ee))},f.prototype.getGeometryType=function(){return"MultiPolygon"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),M=0;M<w.length;M++)w[M]=this._geometries[M].copy();return new f(w,this._factory)},f.prototype.interfaces_=function(){return[So]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(f,b),f}($n),li=function(c){this._factory=c||null,this._isUserDataCopied=!1},Mn={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};li.prototype.setCopyUserData=function(c){this._isUserDataCopied=c},li.prototype.edit=function(c,f){if(null===c)return null;var b=this.editInternal(c,f);return this._isUserDataCopied&&b.setUserData(c.getUserData()),b},li.prototype.editInternal=function(c,f){return null===this._factory&&(this._factory=c.getFactory()),c instanceof $n?this.editGeometryCollection(c,f):c instanceof so?this.editPolygon(c,f):c instanceof Vi||c instanceof oi?f.edit(c,this._factory):(Se.shouldNeverReachHere("Unsupported Geometry class: "+c.getClass().getName()),null)},li.prototype.editGeometryCollection=function(c,f){for(var b=f.edit(c,this._factory),w=new ct,M=0;M<b.getNumGeometries();M++){var z=this.edit(b.getGeometryN(M),f);null===z||z.isEmpty()||w.add(z)}return b.getClass()===Ns?this._factory.createMultiPoint(w.toArray([])):b.getClass()===Yn?this._factory.createMultiLineString(w.toArray([])):b.getClass()===no?this._factory.createMultiPolygon(w.toArray([])):this._factory.createGeometryCollection(w.toArray([]))},li.prototype.editPolygon=function(c,f){var b=f.edit(c,this._factory);if(null===b&&(b=this._factory.createPolygon(null)),b.isEmpty())return b;var w=this.edit(b.getExteriorRing(),f);if(null===w||w.isEmpty())return this._factory.createPolygon();for(var M=new ct,z=0;z<b.getNumInteriorRing();z++){var j=this.edit(b.getInteriorRingN(z),f);null===j||j.isEmpty()||M.add(j)}return this._factory.createPolygon(w,M.toArray([]))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.GeometryEditorOperation=function(){},Mn.NoOpGeometryOperation.get=function(){return gl},Mn.CoordinateOperation.get=function(){return vs},Mn.CoordinateSequenceOperation.get=function(){return bs},Object.defineProperties(li,Mn);var gl=function(){};gl.prototype.edit=function(c,f){return c},gl.prototype.interfaces_=function(){return[li.GeometryEditorOperation]},gl.prototype.getClass=function(){return gl};var vs=function(){};vs.prototype.edit=function(c,f){var b=this.editCoordinates(c.getCoordinates(),c);return null===b?c:c instanceof Lo?f.createLinearRing(b):c instanceof oi?f.createLineString(b):c instanceof Vi?b.length>0?f.createPoint(b[0]):f.createPoint():c},vs.prototype.interfaces_=function(){return[li.GeometryEditorOperation]},vs.prototype.getClass=function(){return vs};var bs=function(){};bs.prototype.edit=function(c,f){return c instanceof Lo?f.createLinearRing(this.edit(c.getCoordinateSequence(),c)):c instanceof oi?f.createLineString(this.edit(c.getCoordinateSequence(),c)):c instanceof Vi?f.createPoint(this.edit(c.getCoordinateSequence(),c)):c},bs.prototype.interfaces_=function(){return[li.GeometryEditorOperation]},bs.prototype.getClass=function(){return bs};var Mo=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var c=arguments[0];this._coordinates=new Array(c).fill(null);for(var f=0;f<c;f++)this._coordinates[f]=new ee}else if(Te(arguments[0],Xt)){var b=arguments[0];if(null===b)return this._coordinates=new Array(0).fill(null),null;this._dimension=b.getDimension(),this._coordinates=new Array(b.size()).fill(null);for(var w=0;w<this._coordinates.length;w++)this._coordinates[w]=b.getCoordinateCopy(w)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var M=arguments[0],z=arguments[1];this._coordinates=M,this._dimension=z,null===M&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var j=arguments[0],Ee=arguments[1];this._coordinates=new Array(j).fill(null),this._dimension=Ee;for(var at=0;at<j;at++)this._coordinates[at]=new ee}},El={serialVersionUID:{configurable:!0}};Mo.prototype.setOrdinate=function(c,f,b){switch(f){case Xt.X:this._coordinates[c].x=b;break;case Xt.Y:this._coordinates[c].y=b;break;case Xt.Z:this._coordinates[c].z=b;break;default:throw new Q("invalid ordinateIndex")}},Mo.prototype.size=function(){return this._coordinates.length},Mo.prototype.getOrdinate=function(c,f){switch(f){case Xt.X:return this._coordinates[c].x;case Xt.Y:return this._coordinates[c].y;case Xt.Z:return this._coordinates[c].z}return ne.NaN},Mo.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var f=arguments[0],b=arguments[1];b.x=this._coordinates[f].x,b.y=this._coordinates[f].y,b.z=this._coordinates[f].z}},Mo.prototype.getCoordinateCopy=function(c){return new ee(this._coordinates[c])},Mo.prototype.getDimension=function(){return this._dimension},Mo.prototype.getX=function(c){return this._coordinates[c].x},Mo.prototype.clone=function(){for(var c=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)c[f]=this._coordinates[f].clone();return new Mo(c,this._dimension)},Mo.prototype.expandEnvelope=function(c){for(var f=0;f<this._coordinates.length;f++)c.expandToInclude(this._coordinates[f]);return c},Mo.prototype.copy=function(){for(var c=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)c[f]=this._coordinates[f].copy();return new Mo(c,this._dimension)},Mo.prototype.toString=function(){if(this._coordinates.length>0){var c=new Me(17*this._coordinates.length);c.append("("),c.append(this._coordinates[0]);for(var f=1;f<this._coordinates.length;f++)c.append(", "),c.append(this._coordinates[f]);return c.append(")"),c.toString()}return"()"},Mo.prototype.getY=function(c){return this._coordinates[c].y},Mo.prototype.toCoordinateArray=function(){return this._coordinates},Mo.prototype.interfaces_=function(){return[Xt,de]},Mo.prototype.getClass=function(){return Mo},El.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Mo,El);var Ze=function(){},$t={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ze.prototype.readResolve=function(){return Ze.instance()},Ze.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Mo(arguments[0]);if(Te(arguments[0],Xt))return new Mo(arguments[0])}else if(2===arguments.length){var b=arguments[0],w=arguments[1];return w>3&&(w=3),w<2?new Mo(b):new Mo(b,w)}},Ze.prototype.interfaces_=function(){return[we,de]},Ze.prototype.getClass=function(){return Ze},Ze.instance=function(){return Ze.instanceObject},$t.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},$t.instanceObject.get=function(){return new Ze},Object.defineProperties(Ze,$t);var yt=function(c){function f(){c.call(this),this.map_=new Map}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.get=function(b){return this.map_.get(b)||null},f.prototype.put=function(b,w){return this.map_.set(b,w),w},f.prototype.values=function(){for(var b=new ct,w=this.map_.values(),M=w.next();!M.done;)b.add(M.value),M=w.next();return b},f.prototype.entrySet=function(){var b=new Si;return this.map_.entries().forEach(function(w){return b.add(w)}),b},f.prototype.size=function(){return this.map_.size()},f}(Xn),rt=function c(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=c.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Nt){var f=arguments[0];this._modelType=f,f===c.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var b=arguments[0];this._modelType=c.FIXED,this.setScale(b)}else if(arguments[0]instanceof c){var w=arguments[0];this._modelType=w._modelType,this._scale=w._scale}},Tt={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};rt.prototype.equals=function(c){return c instanceof rt&&this._modelType===c._modelType&&this._scale===c._scale},rt.prototype.compareTo=function(c){var f=c,b=this.getMaximumSignificantDigits(),w=f.getMaximumSignificantDigits();return new Je(b).compareTo(new Je(w))},rt.prototype.getScale=function(){return this._scale},rt.prototype.isFloating=function(){return this._modelType===rt.FLOATING||this._modelType===rt.FLOATING_SINGLE},rt.prototype.getType=function(){return this._modelType},rt.prototype.toString=function(){var c="UNKNOWN";return this._modelType===rt.FLOATING?c="Floating":this._modelType===rt.FLOATING_SINGLE?c="Floating-Single":this._modelType===rt.FIXED&&(c="Fixed (Scale="+this.getScale()+")"),c},rt.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var c=arguments[0];return ne.isNaN(c)||this._modelType===rt.FLOATING_SINGLE?c:this._modelType===rt.FIXED?Math.round(c*this._scale)/this._scale:c}if(arguments[0]instanceof ee){var f=arguments[0];if(this._modelType===rt.FLOATING)return null;f.x=this.makePrecise(f.x),f.y=this.makePrecise(f.y)}},rt.prototype.getMaximumSignificantDigits=function(){var c=16;return this._modelType===rt.FLOATING?c=16:this._modelType===rt.FLOATING_SINGLE?c=6:this._modelType===rt.FIXED&&(c=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),c},rt.prototype.setScale=function(c){this._scale=Math.abs(c)},rt.prototype.interfaces_=function(){return[de,ie]},rt.prototype.getClass=function(){return rt},rt.mostPrecise=function(c,f){return c.compareTo(f)>=0?c:f},Tt.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Tt.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(rt,Tt);var Nt=function c(f){this._name=f||null,c.nameToTypeMap.put(f,this)},ue={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Nt.prototype.readResolve=function(){return Nt.nameToTypeMap.get(this._name)},Nt.prototype.toString=function(){return this._name},Nt.prototype.interfaces_=function(){return[de]},Nt.prototype.getClass=function(){return Nt},ue.serialVersionUID.get=function(){return-552860263173159e4},ue.nameToTypeMap.get=function(){return new yt},Object.defineProperties(Nt,ue),rt.Type=Nt,rt.FIXED=new Nt("FIXED"),rt.FLOATING=new Nt("FLOATING"),rt.FLOATING_SINGLE=new Nt("FLOATING SINGLE");var ye=function c(){this._precisionModel=new rt,this._SRID=0,this._coordinateSequenceFactory=c.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Te(arguments[0],we)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof rt&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},nt={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(c){return c.isNull()?this.createPoint(null):c.getMinX()===c.getMaxX()&&c.getMinY()===c.getMaxY()?this.createPoint(new ee(c.getMinX(),c.getMinY())):c.getMinX()===c.getMaxX()||c.getMinY()===c.getMaxY()?this.createLineString([new ee(c.getMinX(),c.getMinY()),new ee(c.getMaxX(),c.getMaxY())]):this.createPolygon(this.createLinearRing([new ee(c.getMinX(),c.getMinY()),new ee(c.getMinX(),c.getMaxY()),new ee(c.getMaxX(),c.getMaxY()),new ee(c.getMaxX(),c.getMinY()),new ee(c.getMinX(),c.getMinY())]),null)},ye.prototype.createLineString=function(c){return c?c instanceof Array?new oi(this.getCoordinateSequenceFactory().create(c),this):Te(c,Xt)?new oi(c,this):void 0:new oi(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new Yn(null,this):1===arguments.length?new Yn(arguments[0],this):void 0},ye.prototype.buildGeometry=function(c){for(var f=null,b=!1,w=!1,M=c.iterator();M.hasNext();){var z=M.next(),j=z.getClass();null===f&&(f=j),j!==f&&(b=!0),z.isGeometryCollectionOrDerived()&&(w=!0)}if(null===f)return this.createGeometryCollection();if(b||w)return this.createGeometryCollection(ye.toGeometryArray(c));var Ee=c.iterator().next();if(c.size()>1){if(Ee instanceof so)return this.createMultiPolygon(ye.toPolygonArray(c));if(Ee instanceof oi)return this.createMultiLineString(ye.toLineStringArray(c));if(Ee instanceof Vi)return this.createMultiPoint(ye.toPointArray(c));Se.shouldNeverReachHere("Unhandled class: "+Ee.getClass().getName())}return Ee},ye.prototype.createMultiPointFromCoords=function(c){return this.createMultiPoint(null!==c?this.getCoordinateSequenceFactory().create(c):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ee){var c=arguments[0];return this.createPoint(null!==c?this.getCoordinateSequenceFactory().create([c]):null)}if(Te(arguments[0],Xt))return new Vi(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new so(null,null,this);if(1===arguments.length){if(Te(arguments[0],Xt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Lo)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new so(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new $n(null,this):1===arguments.length?new $n(arguments[0],this):void 0},ye.prototype.createGeometry=function(c){return new li(this).edit(c,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var c=arguments[0];return this.createLinearRing(null!==c?this.getCoordinateSequenceFactory().create(c):null)}if(Te(arguments[0],Xt))return new Lo(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new no(null,this):1===arguments.length?new no(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ns(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ns(arguments[0],this);if(arguments[0]instanceof Array){var f=arguments[0];return this.createMultiPoint(null!==f?this.getCoordinateSequenceFactory().create(f):null)}if(Te(arguments[0],Xt)){var b=arguments[0];if(null===b)return this.createMultiPoint(new Array(0).fill(null));for(var w=new Array(b.size()).fill(null),M=0;M<b.size();M++){var z=this.getCoordinateSequenceFactory().create(1,b.getDimension());Pr.copy(b,M,z,0,1),w[M]=this.createPoint(z)}return this.createMultiPoint(w)}}},ye.prototype.interfaces_=function(){return[de]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.toGeometryArray=function(c){if(null===c)return null;var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.getDefaultCoordinateSequenceFactory=function(){return Ze.instance()},ye.toMultiLineStringArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.toLineStringArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.toMultiPointArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.toLinearRingArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.toPointArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.toPolygonArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ye.createPointFromInternalCoord=function(c,f){return f.getPrecisionModel().makePrecise(c),f.getFactory().createPoint(c)},nt.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,nt);var xt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Le=function(c){this.geometryFactory=c||new ye};Le.prototype.read=function(c){var f,b=(f="string"==typeof c?JSON.parse(c):c).type;if(!dt[b])throw new Error("Unknown GeoJSON type: "+f.type);return-1!==xt.indexOf(b)?dt[b].apply(this,[f.coordinates]):dt[b].apply(this,"GeometryCollection"===b?[f.geometries]:[f])},Le.prototype.write=function(c){var f=c.getGeometryType();if(!Rt[f])throw new Error("Geometry is not supported");return Rt[f].apply(this,[c])};var dt={Feature:function(c){var f={};for(var b in c)f[b]=c[b];if(c.geometry){if(!dt[c.geometry.type])throw new Error("Unknown GeoJSON type: "+c.type);f.geometry=this.read(c.geometry)}return c.bbox&&(f.bbox=dt.bbox.apply(this,[c.bbox])),f},FeatureCollection:function(c){var f={};if(c.features){f.features=[];for(var b=0;b<c.features.length;++b)f.features.push(this.read(c.features[b]))}return c.bbox&&(f.bbox=this.parse.bbox.apply(this,[c.bbox])),f},coordinates:function(c){for(var f=[],b=0;b<c.length;++b){var w=c[b];f.push(new ee(w[0],w[1]))}return f},bbox:function(c){return this.geometryFactory.createLinearRing([new ee(c[0],c[1]),new ee(c[2],c[1]),new ee(c[2],c[3]),new ee(c[0],c[3]),new ee(c[0],c[1])])},Point:function(c){var f=new ee(c[0],c[1]);return this.geometryFactory.createPoint(f)},MultiPoint:function(c){for(var f=[],b=0;b<c.length;++b)f.push(dt.Point.apply(this,[c[b]]));return this.geometryFactory.createMultiPoint(f)},LineString:function(c){var f=dt.coordinates.apply(this,[c]);return this.geometryFactory.createLineString(f)},MultiLineString:function(c){for(var f=[],b=0;b<c.length;++b)f.push(dt.LineString.apply(this,[c[b]]));return this.geometryFactory.createMultiLineString(f)},Polygon:function(c){for(var f=dt.coordinates.apply(this,[c[0]]),b=this.geometryFactory.createLinearRing(f),w=[],M=1;M<c.length;++M){var j=dt.coordinates.apply(this,[c[M]]),Ee=this.geometryFactory.createLinearRing(j);w.push(Ee)}return this.geometryFactory.createPolygon(b,w)},MultiPolygon:function(c){for(var f=[],b=0;b<c.length;++b)f.push(dt.Polygon.apply(this,[c[b]]));return this.geometryFactory.createMultiPolygon(f)},GeometryCollection:function(c){for(var f=[],b=0;b<c.length;++b)f.push(this.read(c[b]));return this.geometryFactory.createGeometryCollection(f)}},Rt={coordinate:function(c){return[c.x,c.y]},Point:function(c){return{type:"Point",coordinates:Rt.coordinate.apply(this,[c.getCoordinate()])}},MultiPoint:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var M=Rt.Point.apply(this,[c._geometries[b]]);f.push(M.coordinates)}return{type:"MultiPoint",coordinates:f}},LineString:function(c){for(var f=[],b=c.getCoordinates(),w=0;w<b.length;++w)f.push(Rt.coordinate.apply(this,[b[w]]));return{type:"LineString",coordinates:f}},MultiLineString:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var M=Rt.LineString.apply(this,[c._geometries[b]]);f.push(M.coordinates)}return{type:"MultiLineString",coordinates:f}},Polygon:function(c){var f=[],b=Rt.LineString.apply(this,[c._shell]);f.push(b.coordinates);for(var w=0;w<c._holes.length;++w){var z=Rt.LineString.apply(this,[c._holes[w]]);f.push(z.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var M=Rt.Polygon.apply(this,[c._geometries[b]]);f.push(M.coordinates)}return{type:"MultiPolygon",coordinates:f}},GeometryCollection:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var w=c._geometries[b],M=w.getGeometryType();f.push(Rt[M].apply(this,[w]))}return{type:"GeometryCollection",geometries:f}}},sn=function(c){this.geometryFactory=c||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Le(this.geometryFactory)};sn.prototype.read=function(c){var f=this.parser.read(c);return this.precisionModel.getType()===rt.FIXED&&this.reducePrecision(f),f},sn.prototype.reducePrecision=function(c){var f,b;if(c.coordinate)this.precisionModel.makePrecise(c.coordinate);else if(c.points)for(f=0,b=c.points.length;f<b;f++)this.precisionModel.makePrecise(c.points[f]);else if(c.geometries)for(f=0,b=c.geometries.length;f<b;f++)this.reducePrecision(c.geometries[f])};var yn=function(){this.parser=new Le(this.geometryFactory)};yn.prototype.write=function(c){return this.parser.write(c)};var Et=function(){},kn={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Et.opposite=function(c){return c===Et.LEFT?Et.RIGHT:c===Et.RIGHT?Et.LEFT:c},kn.ON.get=function(){return 0},kn.LEFT.get=function(){return 1},kn.RIGHT.get=function(){return 2},Object.defineProperties(Et,kn),(ce.prototype=new Error).name="EmptyStackException",(Ce.prototype=new It).add=function(c){return this.array_.push(c),!0},Ce.prototype.get=function(c){if(c<0||c>=this.size())throw new Error;return this.array_[c]},Ce.prototype.push=function(c){return this.array_.push(c),c},Ce.prototype.pop=function(c){if(0===this.array_.length)throw new ce;return this.array_.pop()},Ce.prototype.peek=function(){if(0===this.array_.length)throw new ce;return this.array_[this.array_.length-1]},Ce.prototype.empty=function(){return 0===this.array_.length},Ce.prototype.isEmpty=function(){return this.empty()},Ce.prototype.search=function(c){return this.array_.indexOf(c)},Ce.prototype.size=function(){return this.array_.length},Ce.prototype.toArray=function(){for(var c=[],f=0,b=this.array_.length;f<b;f++)c.push(this.array_[f]);return c};var zr=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};zr.prototype.getCoordinate=function(){return this._minCoord},zr.prototype.getRightmostSide=function(c,f){var b=this.getRightmostSideOfSegment(c,f);return b<0&&(b=this.getRightmostSideOfSegment(c,f-1)),b<0&&(this._minCoord=null,this.checkForRightmostCoordinate(c)),b},zr.prototype.findRightmostEdgeAtVertex=function(){var c=this._minDe.getEdge().getCoordinates();Se.isTrue(this._minIndex>0&&this._minIndex<c.length,"rightmost point expected to be interior vertex of edge");var f=c[this._minIndex-1],b=c[this._minIndex+1],w=vn.computeOrientation(this._minCoord,b,f),M=!1;(f.y<this._minCoord.y&&b.y<this._minCoord.y&&w===vn.COUNTERCLOCKWISE||f.y>this._minCoord.y&&b.y>this._minCoord.y&&w===vn.CLOCKWISE)&&(M=!0),M&&(this._minIndex=this._minIndex-1)},zr.prototype.getRightmostSideOfSegment=function(c,f){var b=c.getEdge().getCoordinates();if(f<0||f+1>=b.length||b[f].y===b[f+1].y)return-1;var w=Et.LEFT;return b[f].y<b[f+1].y&&(w=Et.RIGHT),w},zr.prototype.getEdge=function(){return this._orientedDe},zr.prototype.checkForRightmostCoordinate=function(c){for(var f=c.getEdge().getCoordinates(),b=0;b<f.length-1;b++)(null===this._minCoord||f[b].x>this._minCoord.x)&&(this._minDe=c,this._minIndex=b,this._minCoord=f[b])},zr.prototype.findRightmostEdgeAtNode=function(){var c=this._minDe.getNode().getEdges();this._minDe=c.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},zr.prototype.findEdge=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next();b.isForward()&&this.checkForRightmostCoordinate(b)}Se.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Et.LEFT&&(this._orientedDe=this._minDe.getSym())},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr};var ui=function(c){function f(b,w){c.call(this,f.msgWithCoord(b,w)),this.pt=w?new ee(w):null,this.name="TopologyException"}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.getCoordinate=function(){return this.pt},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.msgWithCoord=function(b,w){return w?b:b+" [ "+w+" ]"},f}(Pe),ao=function(){this.array_=[]};ao.prototype.addLast=function(c){this.array_.push(c)},ao.prototype.removeFirst=function(){return this.array_.shift()},ao.prototype.isEmpty=function(){return 0===this.array_.length};var _o=function(){this._finder=null,this._dirEdgeList=new ct,this._nodes=new ct,this._rightMostCoord=null,this._env=null,this._finder=new zr};_o.prototype.clearVisitedEdges=function(){for(var c=this._dirEdgeList.iterator();c.hasNext();)c.next().setVisited(!1)},_o.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},_o.prototype.computeNodeDepth=function(c){for(var f=null,b=c.getEdges().iterator();b.hasNext();){var w=b.next();if(w.isVisited()||w.getSym().isVisited()){f=w;break}}if(null===f)throw new ui("unable to find edge to compute depths at "+c.getCoordinate());c.getEdges().computeDepths(f);for(var M=c.getEdges().iterator();M.hasNext();){var z=M.next();z.setVisited(!0),this.copySymDepths(z)}},_o.prototype.computeDepth=function(c){this.clearVisitedEdges();var f=this._finder.getEdge();f.setEdgeDepths(Et.RIGHT,c),this.copySymDepths(f),this.computeDepths(f)},_o.prototype.create=function(c){this.addReachable(c),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},_o.prototype.findResultEdges=function(){for(var c=this._dirEdgeList.iterator();c.hasNext();){var f=c.next();f.getDepth(Et.RIGHT)>=1&&f.getDepth(Et.LEFT)<=0&&!f.isInteriorAreaEdge()&&f.setInResult(!0)}},_o.prototype.computeDepths=function(c){var f=new Si,b=new ao,w=c.getNode();for(b.addLast(w),f.add(w),c.setVisited(!0);!b.isEmpty();){var M=b.removeFirst();f.add(M),this.computeNodeDepth(M);for(var z=M.getEdges().iterator();z.hasNext();){var j=z.next().getSym();if(!j.isVisited()){var Ee=j.getNode();f.contains(Ee)||(b.addLast(Ee),f.add(Ee))}}}},_o.prototype.compareTo=function(c){return this._rightMostCoord.x<c._rightMostCoord.x?-1:this._rightMostCoord.x>c._rightMostCoord.x?1:0},_o.prototype.getEnvelope=function(){if(null===this._env){for(var c=new Tn,f=this._dirEdgeList.iterator();f.hasNext();)for(var b=f.next().getEdge().getCoordinates(),w=0;w<b.length-1;w++)c.expandToInclude(b[w]);this._env=c}return this._env},_o.prototype.addReachable=function(c){var f=new Ce;for(f.add(c);!f.empty();){var b=f.pop();this.add(b,f)}},_o.prototype.copySymDepths=function(c){var f=c.getSym();f.setDepth(Et.LEFT,c.getDepth(Et.RIGHT)),f.setDepth(Et.RIGHT,c.getDepth(Et.LEFT))},_o.prototype.add=function(c,f){c.setVisited(!0),this._nodes.add(c);for(var b=c.getEdges().iterator();b.hasNext();){var w=b.next();this._dirEdgeList.add(w);var M=w.getSym().getNode();M.isVisited()||f.push(M)}},_o.prototype.getNodes=function(){return this._nodes},_o.prototype.getDirectedEdges=function(){return this._dirEdgeList},_o.prototype.interfaces_=function(){return[ie]},_o.prototype.getClass=function(){return _o};var tn=function c(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[Et.ON]=b}else if(arguments[0]instanceof c){var w=arguments[0];if(this.init(w.location.length),null!==w)for(var M=0;M<this.location.length;M++)this.location[M]=w.location[M]}}else if(3===arguments.length){var z=arguments[0],j=arguments[1],Ee=arguments[2];this.init(3),this.location[Et.ON]=z,this.location[Et.LEFT]=j,this.location[Et.RIGHT]=Ee}};tn.prototype.setAllLocations=function(c){for(var f=0;f<this.location.length;f++)this.location[f]=c},tn.prototype.isNull=function(){for(var c=0;c<this.location.length;c++)if(this.location[c]!==oe.NONE)return!1;return!0},tn.prototype.setAllLocationsIfNull=function(c){for(var f=0;f<this.location.length;f++)this.location[f]===oe.NONE&&(this.location[f]=c)},tn.prototype.isLine=function(){return 1===this.location.length},tn.prototype.merge=function(c){if(c.location.length>this.location.length){var f=new Array(3).fill(null);f[Et.ON]=this.location[Et.ON],f[Et.LEFT]=oe.NONE,f[Et.RIGHT]=oe.NONE,this.location=f}for(var b=0;b<this.location.length;b++)this.location[b]===oe.NONE&&b<c.location.length&&(this.location[b]=c.location[b])},tn.prototype.getLocations=function(){return this.location},tn.prototype.flip=function(){if(this.location.length<=1)return null;var c=this.location[Et.LEFT];this.location[Et.LEFT]=this.location[Et.RIGHT],this.location[Et.RIGHT]=c},tn.prototype.toString=function(){var c=new Me;return this.location.length>1&&c.append(oe.toLocationSymbol(this.location[Et.LEFT])),c.append(oe.toLocationSymbol(this.location[Et.ON])),this.location.length>1&&c.append(oe.toLocationSymbol(this.location[Et.RIGHT])),c.toString()},tn.prototype.setLocations=function(c,f,b){this.location[Et.ON]=c,this.location[Et.LEFT]=f,this.location[Et.RIGHT]=b},tn.prototype.get=function(c){return c<this.location.length?this.location[c]:oe.NONE},tn.prototype.isArea=function(){return this.location.length>1},tn.prototype.isAnyNull=function(){for(var c=0;c<this.location.length;c++)if(this.location[c]===oe.NONE)return!0;return!1},tn.prototype.setLocation=function(){1===arguments.length?this.setLocation(Et.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},tn.prototype.init=function(c){this.location=new Array(c).fill(null),this.setAllLocations(oe.NONE)},tn.prototype.isEqualOnSide=function(c,f){return this.location[f]===c.location[f]},tn.prototype.allPositionsEqual=function(c){for(var f=0;f<this.location.length;f++)if(this.location[f]!==c)return!1;return!0},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn};var $i=function c(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var f=arguments[0];this.elt[0]=new tn(f),this.elt[1]=new tn(f)}else if(arguments[0]instanceof c){var b=arguments[0];this.elt[0]=new tn(b.elt[0]),this.elt[1]=new tn(b.elt[1])}}else if(2===arguments.length){var w=arguments[0],M=arguments[1];this.elt[0]=new tn(oe.NONE),this.elt[1]=new tn(oe.NONE),this.elt[w].setLocation(M)}else if(3===arguments.length){var z=arguments[0],j=arguments[1],Ee=arguments[2];this.elt[0]=new tn(z,j,Ee),this.elt[1]=new tn(z,j,Ee)}else if(4===arguments.length){var at=arguments[0],Ut=arguments[1],gn=arguments[2],Rn=arguments[3];this.elt[0]=new tn(oe.NONE,oe.NONE,oe.NONE),this.elt[1]=new tn(oe.NONE,oe.NONE,oe.NONE),this.elt[at].setLocations(Ut,gn,Rn)}};$i.prototype.getGeometryCount=function(){var c=0;return this.elt[0].isNull()||c++,this.elt[1].isNull()||c++,c},$i.prototype.setAllLocations=function(c,f){this.elt[c].setAllLocations(f)},$i.prototype.isNull=function(c){return this.elt[c].isNull()},$i.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var c=arguments[0];this.setAllLocationsIfNull(0,c),this.setAllLocationsIfNull(1,c)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},$i.prototype.isLine=function(c){return this.elt[c].isLine()},$i.prototype.merge=function(c){for(var f=0;f<2;f++)null===this.elt[f]&&null!==c.elt[f]?this.elt[f]=new tn(c.elt[f]):this.elt[f].merge(c.elt[f])},$i.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$i.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Et.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},$i.prototype.toString=function(){var c=new Me;return null!==this.elt[0]&&(c.append("A:"),c.append(this.elt[0].toString())),null!==this.elt[1]&&(c.append(" B:"),c.append(this.elt[1].toString())),c.toString()},$i.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},$i.prototype.isAnyNull=function(c){return this.elt[c].isAnyNull()},$i.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Et.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},$i.prototype.isEqualOnSide=function(c,f){return this.elt[0].isEqualOnSide(c.elt[0],f)&&this.elt[1].isEqualOnSide(c.elt[1],f)},$i.prototype.allPositionsEqual=function(c,f){return this.elt[c].allPositionsEqual(f)},$i.prototype.toLine=function(c){this.elt[c].isArea()&&(this.elt[c]=new tn(this.elt[c].location[0]))},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.toLineLabel=function(c){for(var f=new $i(oe.NONE),b=0;b<2;b++)f.setLocation(b,c.getLocation(b));return f};var jr=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ct,this._pts=new ct,this._label=new $i(oe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ct,this._geometryFactory=null;var c=arguments[0];this._geometryFactory=arguments[1],this.computePoints(c),this.computeRing()};jr.prototype.computeRing=function(){if(null!==this._ring)return null;for(var c=new Array(this._pts.size()).fill(null),f=0;f<this._pts.size();f++)c[f]=this._pts.get(f);this._ring=this._geometryFactory.createLinearRing(c),this._isHole=vn.isCCW(this._ring.getCoordinates())},jr.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},jr.prototype.computePoints=function(c){this._startDe=c;var f=c,b=!0;do{if(null===f)throw new ui("Found null DirectedEdge");if(f.getEdgeRing()===this)throw new ui("Directed Edge visited twice during ring-building at "+f.getCoordinate());this._edges.add(f);var w=f.getLabel();Se.isTrue(w.isArea()),this.mergeLabel(w),this.addPoints(f.getEdge(),f.isForward(),b),b=!1,this.setEdgeRing(f,this),f=this.getNext(f)}while(f!==this._startDe)},jr.prototype.getLinearRing=function(){return this._ring},jr.prototype.getCoordinate=function(c){return this._pts.get(c)},jr.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var c=this._startDe;do{var f=c.getNode().getEdges().getOutgoingDegree(this);f>this._maxNodeDegree&&(this._maxNodeDegree=f),c=this.getNext(c)}while(c!==this._startDe);this._maxNodeDegree*=2},jr.prototype.addPoints=function(c,f,b){var w=c.getCoordinates();if(f){var M=1;b&&(M=0);for(var z=M;z<w.length;z++)this._pts.add(w[z])}else{var j=w.length-2;b&&(j=w.length-1);for(var Ee=j;Ee>=0;Ee--)this._pts.add(w[Ee])}},jr.prototype.isHole=function(){return this._isHole},jr.prototype.setInResult=function(){var c=this._startDe;do{c.getEdge().setInResult(!0),c=c.getNext()}while(c!==this._startDe)},jr.prototype.containsPoint=function(c){var f=this.getLinearRing();if(!f.getEnvelopeInternal().contains(c)||!vn.isPointInRing(c,f.getCoordinates()))return!1;for(var b=this._holes.iterator();b.hasNext();)if(b.next().containsPoint(c))return!1;return!0},jr.prototype.addHole=function(c){this._holes.add(c)},jr.prototype.isShell=function(){return null===this._shell},jr.prototype.getLabel=function(){return this._label},jr.prototype.getEdges=function(){return this._edges},jr.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},jr.prototype.getShell=function(){return this._shell},jr.prototype.mergeLabel=function(){if(1===arguments.length){var c=arguments[0];this.mergeLabel(c,0),this.mergeLabel(c,1)}else if(2===arguments.length){var b=arguments[1],w=arguments[0].getLocation(b,Et.RIGHT);if(w===oe.NONE)return null;if(this._label.getLocation(b)===oe.NONE)return this._label.setLocation(b,w),null}},jr.prototype.setShell=function(c){this._shell=c,null!==c&&c.addHole(this)},jr.prototype.toPolygon=function(c){for(var f=new Array(this._holes.size()).fill(null),b=0;b<this._holes.size();b++)f[b]=this._holes.get(b).getLinearRing();return c.createPolygon(this.getLinearRing(),f)},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr};var Mi=function(c){function f(){c.call(this,arguments[0],arguments[1])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.setEdgeRing=function(b,w){b.setMinEdgeRing(w)},f.prototype.getNext=function(b){return b.getNextMin()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(jr),Ds=function(c){function f(){c.call(this,arguments[0],arguments[1])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.buildMinimalRings=function(){var b=new ct,w=this._startDe;do{if(null===w.getMinEdgeRing()){var M=new Mi(w,this._geometryFactory);b.add(M)}w=w.getNext()}while(w!==this._startDe);return b},f.prototype.setEdgeRing=function(b,w){b.setEdgeRing(w)},f.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var b=this._startDe;do{b.getNode().getEdges().linkMinimalDirectedEdges(this),b=b.getNext()}while(b!==this._startDe)},f.prototype.getNext=function(b){return b.getNext()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(jr),Cl=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};Cl.prototype.setVisited=function(c){this._isVisited=c},Cl.prototype.setInResult=function(c){this._isInResult=c},Cl.prototype.isCovered=function(){return this._isCovered},Cl.prototype.isCoveredSet=function(){return this._isCoveredSet},Cl.prototype.setLabel=function(c){this._label=c},Cl.prototype.getLabel=function(){return this._label},Cl.prototype.setCovered=function(c){this._isCovered=c,this._isCoveredSet=!0},Cl.prototype.updateIM=function(c){Se.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(c)},Cl.prototype.isInResult=function(){return this._isInResult},Cl.prototype.isVisited=function(){return this._isVisited},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl};var Su=function(c){function f(){c.call(this),this._coord=null,this._edges=null;var w=arguments[1];this._coord=arguments[0],this._edges=w,this._label=new $i(0,oe.NONE)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.isIncidentEdgeInResult=function(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();)if(b.next().getEdge().isInResult())return!0;return!1},f.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},f.prototype.getCoordinate=function(){return this._coord},f.prototype.print=function(b){b.println("node "+this._coord+" lbl: "+this._label)},f.prototype.computeIM=function(b){},f.prototype.computeMergedLocation=function(b,w){var M=oe.NONE;if(M=this._label.getLocation(w),!b.isNull(w)){var z=b.getLocation(w);M!==oe.BOUNDARY&&(M=z)}return M},f.prototype.setLabel=function(){if(2!==arguments.length)return c.prototype.setLabel.apply(this,arguments);var b=arguments[0],w=arguments[1];null===this._label?this._label=new $i(b,w):this._label.setLocation(b,w)},f.prototype.getEdges=function(){return this._edges},f.prototype.mergeLabel=function(){if(arguments[0]instanceof f)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof $i)for(var w=arguments[0],M=0;M<2;M++){var z=this.computeMergedLocation(w,M);this._label.getLocation(M)===oe.NONE&&this._label.setLocation(M,z)}},f.prototype.add=function(b){this._edges.insert(b),b.setNode(this)},f.prototype.setLabelBoundary=function(b){if(null===this._label)return null;var w=oe.NONE;null!==this._label&&(w=this._label.getLocation(b)),this._label.setLocation(b,w===oe.BOUNDARY?oe.INTERIOR:oe.BOUNDARY)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Cl),Ks=function(){this.nodeMap=new Xe,this.nodeFact=null,this.nodeFact=arguments[0]};Ks.prototype.find=function(c){return this.nodeMap.get(c)},Ks.prototype.addNode=function(){if(arguments[0]instanceof ee){var c=arguments[0],f=this.nodeMap.get(c);return null===f&&(f=this.nodeFact.createNode(c),this.nodeMap.put(c,f)),f}if(arguments[0]instanceof Su){var b=arguments[0],w=this.nodeMap.get(b.getCoordinate());return null===w?(this.nodeMap.put(b.getCoordinate(),b),b):(w.mergeLabel(b),w)}},Ks.prototype.print=function(c){for(var f=this.iterator();f.hasNext();)f.next().print(c)},Ks.prototype.iterator=function(){return this.nodeMap.values().iterator()},Ks.prototype.values=function(){return this.nodeMap.values()},Ks.prototype.getBoundaryNodes=function(c){for(var f=new ct,b=this.iterator();b.hasNext();){var w=b.next();w.getLabel().getLocation(c)===oe.BOUNDARY&&f.add(w)}return f},Ks.prototype.add=function(c){var f=c.getCoordinate();this.addNode(f).add(c)},Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks};var Pi=function(){},bf={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.isNorthern=function(c){return c===Pi.NE||c===Pi.NW},Pi.isOpposite=function(c,f){return c!==f&&(c-f+4)%4==2},Pi.commonHalfPlane=function(c,f){if(c===f)return c;if((c-f+4)%4==2)return-1;var b=c<f?c:f;return 0===b&&3===(c>f?c:f)?3:b},Pi.isInHalfPlane=function(c,f){return f===Pi.SE?c===Pi.SE||c===Pi.SW:c===f||c===f+1},Pi.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var c=arguments[0],f=arguments[1];if(0===c&&0===f)throw new Q("Cannot compute the quadrant for point ( "+c+", "+f+" )");return c>=0?f>=0?Pi.NE:Pi.SE:f>=0?Pi.NW:Pi.SW}if(arguments[0]instanceof ee&&arguments[1]instanceof ee){var b=arguments[0],w=arguments[1];if(w.x===b.x&&w.y===b.y)throw new Q("Cannot compute the quadrant for two identical points "+b);return w.x>=b.x?w.y>=b.y?Pi.NE:Pi.SE:w.y>=b.y?Pi.NW:Pi.SW}},bf.NE.get=function(){return 0},bf.NW.get=function(){return 1},bf.SW.get=function(){return 2},bf.SE.get=function(){return 3},Object.defineProperties(Pi,bf);var ka=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var b=arguments[1],w=arguments[2];this._edge=arguments[0],this.init(b,w),this._label=null}else if(4===arguments.length){var z=arguments[1],j=arguments[2],Ee=arguments[3];this._edge=arguments[0],this.init(z,j),this._label=Ee}};ka.prototype.compareDirection=function(c){return this._dx===c._dx&&this._dy===c._dy?0:this._quadrant>c._quadrant?1:this._quadrant<c._quadrant?-1:vn.computeOrientation(c._p0,c._p1,this._p1)},ka.prototype.getDy=function(){return this._dy},ka.prototype.getCoordinate=function(){return this._p0},ka.prototype.setNode=function(c){this._node=c},ka.prototype.print=function(c){var f=Math.atan2(this._dy,this._dx),b=this.getClass().getName(),w=b.lastIndexOf("."),M=b.substring(w+1);c.print("  "+M+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label)},ka.prototype.compareTo=function(c){return this.compareDirection(c)},ka.prototype.getDirectedCoordinate=function(){return this._p1},ka.prototype.getDx=function(){return this._dx},ka.prototype.getLabel=function(){return this._label},ka.prototype.getEdge=function(){return this._edge},ka.prototype.getQuadrant=function(){return this._quadrant},ka.prototype.getNode=function(){return this._node},ka.prototype.toString=function(){var c=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),b=f.lastIndexOf(".");return"  "+f.substring(b+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+c+"   "+this._label},ka.prototype.computeLabel=function(c){},ka.prototype.init=function(c,f){this._p0=c,this._p1=f,this._dx=f.x-c.x,this._dy=f.y-c.y,this._quadrant=Pi.quadrant(this._dx,this._dy),Se.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ka.prototype.interfaces_=function(){return[ie]},ka.prototype.getClass=function(){return ka};var Ea=function(c){function f(){var b=arguments[0],w=arguments[1];if(c.call(this,b),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=w,w)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var M=b.getNumPoints()-1;this.init(b.getCoordinate(M),b.getCoordinate(M-1))}this.computeDirectedLabel()}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.getNextMin=function(){return this._nextMin},f.prototype.getDepth=function(b){return this._depth[b]},f.prototype.setVisited=function(b){this._isVisited=b},f.prototype.computeDirectedLabel=function(){this._label=new $i(this._edge.getLabel()),this._isForward||this._label.flip()},f.prototype.getNext=function(){return this._next},f.prototype.setDepth=function(b,w){if(-999!==this._depth[b]&&this._depth[b]!==w)throw new ui("assigned depths do not match",this.getCoordinate());this._depth[b]=w},f.prototype.isInteriorAreaEdge=function(){for(var b=!0,w=0;w<2;w++)this._label.isArea(w)&&this._label.getLocation(w,Et.LEFT)===oe.INTERIOR&&this._label.getLocation(w,Et.RIGHT)===oe.INTERIOR||(b=!1);return b},f.prototype.setNextMin=function(b){this._nextMin=b},f.prototype.print=function(b){c.prototype.print.call(this,b),b.print(" "+this._depth[Et.LEFT]+"/"+this._depth[Et.RIGHT]),b.print(" ("+this.getDepthDelta()+")"),this._isInResult&&b.print(" inResult")},f.prototype.setMinEdgeRing=function(b){this._minEdgeRing=b},f.prototype.isLineEdge=function(){var b=this._label.isLine(0)||this._label.isLine(1),w=!this._label.isArea(0)||this._label.allPositionsEqual(0,oe.EXTERIOR),M=!this._label.isArea(1)||this._label.allPositionsEqual(1,oe.EXTERIOR);return b&&w&&M},f.prototype.setEdgeRing=function(b){this._edgeRing=b},f.prototype.getMinEdgeRing=function(){return this._minEdgeRing},f.prototype.getDepthDelta=function(){var b=this._edge.getDepthDelta();return this._isForward||(b=-b),b},f.prototype.setInResult=function(b){this._isInResult=b},f.prototype.getSym=function(){return this._sym},f.prototype.isForward=function(){return this._isForward},f.prototype.getEdge=function(){return this._edge},f.prototype.printEdge=function(b){this.print(b),b.print(" "),this._isForward?this._edge.print(b):this._edge.printReverse(b)},f.prototype.setSym=function(b){this._sym=b},f.prototype.setVisitedEdge=function(b){this.setVisited(b),this._sym.setVisited(b)},f.prototype.setEdgeDepths=function(b,w){var M=this.getEdge().getDepthDelta();this._isForward||(M=-M);var z=1;b===Et.LEFT&&(z=-1);var j=Et.opposite(b),Ee=w+M*z;this.setDepth(b,w),this.setDepth(j,Ee)},f.prototype.getEdgeRing=function(){return this._edgeRing},f.prototype.isInResult=function(){return this._isInResult},f.prototype.setNext=function(b){this._next=b},f.prototype.isVisited=function(){return this._isVisited},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.depthFactor=function(b,w){return b===oe.EXTERIOR&&w===oe.INTERIOR?1:b===oe.INTERIOR&&w===oe.EXTERIOR?-1:0},f}(ka),Gl=function(){};Gl.prototype.createNode=function(c){return new Su(c,null)},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};var Hs=function(){this._edges=new ct,this._nodes=null,this._edgeEndList=new ct,0===arguments.length?this._nodes=new Ks(new Gl):1===arguments.length&&(this._nodes=new Ks(arguments[0]))};Hs.prototype.printEdges=function(c){c.println("Edges:");for(var f=0;f<this._edges.size();f++){c.println("edge "+f+":");var b=this._edges.get(f);b.print(c),b.eiList.print(c)}},Hs.prototype.find=function(c){return this._nodes.find(c)},Hs.prototype.addNode=function(){return arguments[0]instanceof Su||arguments[0]instanceof ee?this._nodes.addNode(arguments[0]):void 0},Hs.prototype.getNodeIterator=function(){return this._nodes.iterator()},Hs.prototype.linkResultDirectedEdges=function(){for(var c=this._nodes.iterator();c.hasNext();)c.next().getEdges().linkResultDirectedEdges()},Hs.prototype.debugPrintln=function(c){jt.out.println(c)},Hs.prototype.isBoundaryNode=function(c,f){var b=this._nodes.find(f);if(null===b)return!1;var w=b.getLabel();return null!==w&&w.getLocation(c)===oe.BOUNDARY},Hs.prototype.linkAllDirectedEdges=function(){for(var c=this._nodes.iterator();c.hasNext();)c.next().getEdges().linkAllDirectedEdges()},Hs.prototype.matchInSameDirection=function(c,f,b,w){return!!c.equals(b)&&vn.computeOrientation(c,f,w)===vn.COLLINEAR&&Pi.quadrant(c,f)===Pi.quadrant(b,w)},Hs.prototype.getEdgeEnds=function(){return this._edgeEndList},Hs.prototype.debugPrint=function(c){jt.out.print(c)},Hs.prototype.getEdgeIterator=function(){return this._edges.iterator()},Hs.prototype.findEdgeInSameDirection=function(c,f){for(var b=0;b<this._edges.size();b++){var w=this._edges.get(b),M=w.getCoordinates();if(this.matchInSameDirection(c,f,M[0],M[1])||this.matchInSameDirection(c,f,M[M.length-1],M[M.length-2]))return w}return null},Hs.prototype.insertEdge=function(c){this._edges.add(c)},Hs.prototype.findEdgeEnd=function(c){for(var f=this.getEdgeEnds().iterator();f.hasNext();){var b=f.next();if(b.getEdge()===c)return b}return null},Hs.prototype.addEdges=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next();this._edges.add(b);var w=new Ea(b,!0),M=new Ea(b,!1);w.setSym(M),M.setSym(w),this.add(w),this.add(M)}},Hs.prototype.add=function(c){this._nodes.add(c),this._edgeEndList.add(c)},Hs.prototype.getNodes=function(){return this._nodes.values()},Hs.prototype.findEdge=function(c,f){for(var b=0;b<this._edges.size();b++){var w=this._edges.get(b),M=w.getCoordinates();if(c.equals(M[0])&&f.equals(M[1]))return w}return null},Hs.prototype.interfaces_=function(){return[]},Hs.prototype.getClass=function(){return Hs},Hs.linkResultDirectedEdges=function(c){for(var f=c.iterator();f.hasNext();)f.next().getEdges().linkResultDirectedEdges()};var Ya=function(){this._geometryFactory=null,this._shellList=new ct,this._geometryFactory=arguments[0]};Ya.prototype.sortShellsAndHoles=function(c,f,b){for(var w=c.iterator();w.hasNext();){var M=w.next();M.isHole()?b.add(M):f.add(M)}},Ya.prototype.computePolygons=function(c){for(var f=new ct,b=c.iterator();b.hasNext();){var w=b.next().toPolygon(this._geometryFactory);f.add(w)}return f},Ya.prototype.placeFreeHoles=function(c,f){for(var b=f.iterator();b.hasNext();){var w=b.next();if(null===w.getShell()){var M=this.findEdgeRingContaining(w,c);if(null===M)throw new ui("unable to assign hole to a shell",w.getCoordinate(0));w.setShell(M)}}},Ya.prototype.buildMinimalEdgeRings=function(c,f,b){for(var w=new ct,M=c.iterator();M.hasNext();){var z=M.next();if(z.getMaxNodeDegree()>2){z.linkDirectedEdgesForMinimalEdgeRings();var j=z.buildMinimalRings(),Ee=this.findShell(j);null!==Ee?(this.placePolygonHoles(Ee,j),f.add(Ee)):b.addAll(j)}else w.add(z)}return w},Ya.prototype.containsPoint=function(c){for(var f=this._shellList.iterator();f.hasNext();)if(f.next().containsPoint(c))return!0;return!1},Ya.prototype.buildMaximalEdgeRings=function(c){for(var f=new ct,b=c.iterator();b.hasNext();){var w=b.next();if(w.isInResult()&&w.getLabel().isArea()&&null===w.getEdgeRing()){var M=new Ds(w,this._geometryFactory);f.add(M),M.setInResult()}}return f},Ya.prototype.placePolygonHoles=function(c,f){for(var b=f.iterator();b.hasNext();){var w=b.next();w.isHole()&&w.setShell(c)}},Ya.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ya.prototype.findEdgeRingContaining=function(c,f){for(var b=c.getLinearRing(),w=b.getEnvelopeInternal(),M=b.getCoordinateN(0),z=null,j=null,Ee=f.iterator();Ee.hasNext();){var at=Ee.next(),Ut=at.getLinearRing(),gn=Ut.getEnvelopeInternal();null!==z&&(j=z.getLinearRing().getEnvelopeInternal());var Rn=!1;gn.contains(w)&&vn.isPointInRing(M,Ut.getCoordinates())&&(Rn=!0),Rn&&(null===z||j.contains(gn))&&(z=at)}return z},Ya.prototype.findShell=function(c){for(var f=0,b=null,w=c.iterator();w.hasNext();){var M=w.next();M.isHole()||(b=M,f++)}return Se.isTrue(f<=1,"found two shells in MinimalEdgeRing list"),b},Ya.prototype.add=function(){if(1===arguments.length){var c=arguments[0];this.add(c.getEdgeEnds(),c.getNodes())}else if(2===arguments.length){var f=arguments[0];Hs.linkResultDirectedEdges(arguments[1]);var w=this.buildMaximalEdgeRings(f),M=new ct,z=this.buildMinimalEdgeRings(w,this._shellList,M);this.sortShellsAndHoles(z,this._shellList,M),this.placeFreeHoles(this._shellList,M)}},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya};var Ka=function(){};Ka.prototype.getBounds=function(){},Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka};var xc=function(){this._bounds=null,this._item=null;var f=arguments[1];this._bounds=arguments[0],this._item=f};xc.prototype.getItem=function(){return this._item},xc.prototype.getBounds=function(){return this._bounds},xc.prototype.interfaces_=function(){return[Ka,de]},xc.prototype.getClass=function(){return xc};var au=function(){this._size=null,this._items=null,this._size=0,this._items=new ct,this._items.add(null)};au.prototype.poll=function(){if(this.isEmpty())return null;var c=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),c},au.prototype.size=function(){return this._size},au.prototype.reorder=function(c){for(var f=null,b=this._items.get(c);2*c<=this._size&&((f=2*c)!==this._size&&this._items.get(f+1).compareTo(this._items.get(f))<0&&f++,this._items.get(f).compareTo(b)<0);c=f)this._items.set(c,this._items.get(f));this._items.set(c,b)},au.prototype.clear=function(){this._size=0,this._items.clear()},au.prototype.isEmpty=function(){return 0===this._size},au.prototype.add=function(c){this._items.add(null),this._size+=1;var f=this._size;for(this._items.set(0,c);c.compareTo(this._items.get(Math.trunc(f/2)))<0;f/=2)this._items.set(f,this._items.get(Math.trunc(f/2)));this._items.set(f,c)},au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au};var Hl=function(){};Hl.prototype.visitItem=function(c){},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var wc=function(){};wc.prototype.insert=function(c,f){},wc.prototype.remove=function(c,f){},wc.prototype.query=function(){},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc};var da=function(){this._childBoundables=new ct,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},Vc={serialVersionUID:{configurable:!0}};da.prototype.getLevel=function(){return this._level},da.prototype.size=function(){return this._childBoundables.size()},da.prototype.getChildBoundables=function(){return this._childBoundables},da.prototype.addChildBoundable=function(c){Se.isTrue(null===this._bounds),this._childBoundables.add(c)},da.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},da.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},da.prototype.interfaces_=function(){return[Ka,de]},da.prototype.getClass=function(){return da},Vc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(da,Vc);var xi=function(){};xi.reverseOrder=function(){return{compare:function(c,f){return f.compareTo(c)}}},xi.min=function(c){return xi.sort(c),c.get(0)},xi.sort=function(c,f){var b=c.toArray();f?bt.sort(b,f):bt.sort(b);for(var w=c.iterator(),M=0,z=b.length;M<z;M++)w.next(),w.set(b[M])},xi.singletonList=function(c){var f=new ct;return f.add(c),f};var qs=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var f=arguments[1],b=arguments[2];this._boundable1=arguments[0],this._boundable2=f,this._itemDistance=b,this._distance=this.distance()};qs.prototype.expandToQueue=function(c,f){var b=qs.isComposite(this._boundable1),w=qs.isComposite(this._boundable2);if(b&&w)return qs.area(this._boundable1)>qs.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,c,f),null):(this.expand(this._boundable2,this._boundable1,c,f),null);if(b)return this.expand(this._boundable1,this._boundable2,c,f),null;if(w)return this.expand(this._boundable2,this._boundable1,c,f),null;throw new Q("neither boundable is composite")},qs.prototype.isLeaves=function(){return!(qs.isComposite(this._boundable1)||qs.isComposite(this._boundable2))},qs.prototype.compareTo=function(c){return this._distance<c._distance?-1:this._distance>c._distance?1:0},qs.prototype.expand=function(c,f,b,w){for(var M=c.getChildBoundables().iterator();M.hasNext();){var z=M.next(),j=new qs(z,f,this._itemDistance);j.getDistance()<w&&b.add(j)}},qs.prototype.getBoundable=function(c){return 0===c?this._boundable1:this._boundable2},qs.prototype.getDistance=function(){return this._distance},qs.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},qs.prototype.interfaces_=function(){return[ie]},qs.prototype.getClass=function(){return qs},qs.area=function(c){return c.getBounds().getArea()},qs.isComposite=function(c){return c instanceof da};var Fs=function c(){if(this._root=null,this._built=!1,this._itemBoundables=new ct,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=c.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var b=arguments[0];Se.isTrue(b>1,"Node capacity must be greater than 1"),this._nodeCapacity=b}},xf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Fs.prototype.getNodeCapacity=function(){return this._nodeCapacity},Fs.prototype.lastNode=function(c){return c.get(c.size()-1)},Fs.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var c=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var b=f.next();b instanceof da?c+=this.size(b):b instanceof xc&&(c+=1)}return c}},Fs.prototype.removeItem=function(c,f){for(var b=null,w=c.getChildBoundables().iterator();w.hasNext();){var M=w.next();M instanceof xc&&M.getItem()===f&&(b=M)}return null!==b&&(c.getChildBoundables().remove(b),!0)},Fs.prototype.itemsTree=function(){if(0===arguments.length){this.build();var c=this.itemsTree(this._root);return null===c?new ct:c}if(1===arguments.length){for(var f=arguments[0],b=new ct,w=f.getChildBoundables().iterator();w.hasNext();){var M=w.next();if(M instanceof da){var z=this.itemsTree(M);null!==z&&b.add(z)}else M instanceof xc?b.add(M.getItem()):Se.shouldNeverReachHere()}return b.size()<=0?null:b}},Fs.prototype.insert=function(c,f){Se.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new xc(c,f))},Fs.prototype.boundablesAtLevel=function(){if(1===arguments.length){var c=arguments[0],f=new ct;return this.boundablesAtLevel(c,this._root,f),f}if(3===arguments.length){var b=arguments[0],w=arguments[1],M=arguments[2];if(Se.isTrue(b>-2),w.getLevel()===b)return M.add(w),null;for(var z=w.getChildBoundables().iterator();z.hasNext();){var j=z.next();j instanceof da?this.boundablesAtLevel(b,j,M):(Se.isTrue(j instanceof xc),-1===b&&M.add(j))}return null}},Fs.prototype.query=function(){if(1===arguments.length){var c=arguments[0];this.build();var f=new ct;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.query(c,this._root,f),f}if(2===arguments.length){var b=arguments[0],w=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),b)&&this.query(b,this._root,w)}else if(3===arguments.length)if(Te(arguments[2],Hl)&&arguments[0]instanceof Object&&arguments[1]instanceof da)for(var M=arguments[0],j=arguments[2],Ee=arguments[1].getChildBoundables(),at=0;at<Ee.size();at++){var Ut=Ee.get(at);this.getIntersectsOp().intersects(Ut.getBounds(),M)&&(Ut instanceof da?this.query(M,Ut,j):Ut instanceof xc?j.visitItem(Ut.getItem()):Se.shouldNeverReachHere())}else if(Te(arguments[2],It)&&arguments[0]instanceof Object&&arguments[1]instanceof da)for(var gn=arguments[0],Ir=arguments[2],wr=arguments[1].getChildBoundables(),$r=0;$r<wr.size();$r++){var fi=wr.get($r);this.getIntersectsOp().intersects(fi.getBounds(),gn)&&(fi instanceof da?this.query(gn,fi,Ir):fi instanceof xc?Ir.add(fi.getItem()):Se.shouldNeverReachHere())}},Fs.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Fs.prototype.getRoot=function(){return this.build(),this._root},Fs.prototype.remove=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.remove(c,this._root,f)}if(3===arguments.length){var b=arguments[0],w=arguments[1],M=arguments[2],z=this.removeItem(w,M);if(z)return!0;for(var j=null,Ee=w.getChildBoundables().iterator();Ee.hasNext();){var at=Ee.next();if(this.getIntersectsOp().intersects(at.getBounds(),b)&&at instanceof da&&(z=this.remove(b,at,M))){j=at;break}}return null!==j&&j.getChildBoundables().isEmpty()&&w.getChildBoundables().remove(j),z}},Fs.prototype.createHigherLevels=function(c,f){Se.isTrue(!c.isEmpty());var b=this.createParentBoundables(c,f+1);return 1===b.size()?b.get(0):this.createHigherLevels(b,f+1)},Fs.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var c=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var b=f.next();if(b instanceof da){var w=this.depth(b);w>c&&(c=w)}}return c+1}},Fs.prototype.createParentBoundables=function(c,f){Se.isTrue(!c.isEmpty());var b=new ct;b.add(this.createNode(f));var w=new ct(c);xi.sort(w,this.getComparator());for(var M=w.iterator();M.hasNext();){var z=M.next();this.lastNode(b).getChildBoundables().size()===this.getNodeCapacity()&&b.add(this.createNode(f)),this.lastNode(b).addChildBoundable(z)}return b},Fs.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Fs.prototype.interfaces_=function(){return[de]},Fs.prototype.getClass=function(){return Fs},Fs.compareDoubles=function(c,f){return c>f?1:c<f?-1:0},xf.IntersectsOp.get=function(){return yr},xf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},xf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Fs,xf);var yr=function(){},Uc=function(){};Uc.prototype.distance=function(c,f){},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Io=function(c){function f(w){c.call(this,w=w||f.DEFAULT_NODE_CAPACITY)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return f.prototype.createParentBoundablesFromVerticalSlices=function(w,M){Se.isTrue(w.length>0);for(var z=new ct,j=0;j<w.length;j++)z.addAll(this.createParentBoundablesFromVerticalSlice(w[j],M));return z},f.prototype.createNode=function(w){return new jc(w)},f.prototype.size=function(){return 0===arguments.length?c.prototype.size.call(this):c.prototype.size.apply(this,arguments)},f.prototype.insert=function(){if(2!==arguments.length)return c.prototype.insert.apply(this,arguments);var w=arguments[0],M=arguments[1];if(w.isNull())return null;c.prototype.insert.call(this,w,M)},f.prototype.getIntersectsOp=function(){return f.intersectsOp},f.prototype.verticalSlices=function(w,M){for(var z=Math.trunc(Math.ceil(w.size()/M)),j=new Array(M).fill(null),Ee=w.iterator(),at=0;at<M;at++){j[at]=new ct;for(var Ut=0;Ee.hasNext()&&Ut<z;){var gn=Ee.next();j[at].add(gn),Ut++}}return j},f.prototype.query=function(){if(1===arguments.length)return c.prototype.query.call(this,arguments[0]);2===arguments.length?c.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(Te(arguments[2],Hl)&&arguments[0]instanceof Object&&arguments[1]instanceof da||Te(arguments[2],It)&&arguments[0]instanceof Object&&arguments[1]instanceof da)&&c.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},f.prototype.getComparator=function(){return f.yComparator},f.prototype.createParentBoundablesFromVerticalSlice=function(w,M){return c.prototype.createParentBoundables.call(this,w,M)},f.prototype.remove=function(){return 2===arguments.length?c.prototype.remove.call(this,arguments[0],arguments[1]):c.prototype.remove.apply(this,arguments)},f.prototype.depth=function(){return 0===arguments.length?c.prototype.depth.call(this):c.prototype.depth.apply(this,arguments)},f.prototype.createParentBoundables=function(w,M){Se.isTrue(!w.isEmpty());var z=Math.trunc(Math.ceil(w.size()/this.getNodeCapacity())),j=new ct(w);xi.sort(j,f.xComparator);var Ee=this.verticalSlices(j,Math.trunc(Math.ceil(Math.sqrt(z))));return this.createParentBoundablesFromVerticalSlices(Ee,M)},f.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Te(arguments[0],Uc)){var w=arguments[0],M=new qs(this.getRoot(),this.getRoot(),w);return this.nearestNeighbour(M)}if(arguments[0]instanceof qs)return this.nearestNeighbour(arguments[0],ne.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof f&&Te(arguments[1],Uc)){var j=arguments[0],Ee=arguments[1],at=new qs(this.getRoot(),j.getRoot(),Ee);return this.nearestNeighbour(at)}if(arguments[0]instanceof qs&&"number"==typeof arguments[1]){var Ut=arguments[0],gn=arguments[1],Rn=null,Ir=new au;for(Ir.add(Ut);!Ir.isEmpty()&&gn>0;){var wr=Ir.poll(),$r=wr.getDistance();if($r>=gn)break;wr.isLeaves()?(gn=$r,Rn=wr):wr.expandToQueue(Ir,gn)}return[Rn.getBoundable(0).getItem(),Rn.getBoundable(1).getItem()]}}else if(3===arguments.length){var vr=arguments[2],bl=new xc(arguments[0],arguments[1]),mu=new qs(this.getRoot(),bl,vr);return this.nearestNeighbour(mu)[0]}},f.prototype.interfaces_=function(){return[wc,de]},f.prototype.getClass=function(){return f},f.centreX=function(w){return f.avg(w.getMinX(),w.getMaxX())},f.avg=function(w,M){return(w+M)/2},f.centreY=function(w){return f.avg(w.getMinY(),w.getMaxY())},b.STRtreeNode.get=function(){return jc},b.serialVersionUID.get=function(){return 0x39920f7d5f261e0},b.xComparator.get=function(){return{interfaces_:function(){return[xe]},compare:function(w,M){return c.compareDoubles(f.centreX(w.getBounds()),f.centreX(M.getBounds()))}}},b.yComparator.get=function(){return{interfaces_:function(){return[xe]},compare:function(w,M){return c.compareDoubles(f.centreY(w.getBounds()),f.centreY(M.getBounds()))}}},b.intersectsOp.get=function(){return{interfaces_:function(){return[c.IntersectsOp]},intersects:function(w,M){return w.intersects(M)}}},b.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(f,b),f}(Fs),jc=function(c){function f(){c.call(this,arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.computeBounds=function(){for(var b=null,w=this.getChildBoundables().iterator();w.hasNext();){var M=w.next();null===b?b=new Tn(M.getBounds()):b.expandToInclude(M.getBounds())}return b},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(da),sl=function(){};sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.relativeSign=function(c,f){return c<f?-1:c>f?1:0},sl.compare=function(c,f,b){if(f.equals2D(b))return 0;var w=sl.relativeSign(f.x,b.x),M=sl.relativeSign(f.y,b.y);switch(c){case 0:return sl.compareValue(w,M);case 1:return sl.compareValue(M,w);case 2:return sl.compareValue(M,-w);case 3:return sl.compareValue(-w,M);case 4:return sl.compareValue(-w,-M);case 5:return sl.compareValue(-M,-w);case 6:return sl.compareValue(-M,w);case 7:return sl.compareValue(w,-M)}return Se.shouldNeverReachHere("invalid octant value"),0},sl.compareValue=function(c,f){return c<0?-1:c>0?1:f<0?-1:f>0?1:0};var oc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var c=arguments[0],f=arguments[1],b=arguments[2],w=arguments[3];this._segString=c,this.coord=new ee(f),this.segmentIndex=b,this._segmentOctant=w,this._isInterior=!f.equals2D(c.getCoordinate(b))};oc.prototype.getCoordinate=function(){return this.coord},oc.prototype.print=function(c){c.print(this.coord),c.print(" seg # = "+this.segmentIndex)},oc.prototype.compareTo=function(c){var f=c;return this.segmentIndex<f.segmentIndex?-1:this.segmentIndex>f.segmentIndex?1:this.coord.equals2D(f.coord)?0:sl.compare(this._segmentOctant,this.coord,f.coord)},oc.prototype.isEndPoint=function(c){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===c},oc.prototype.isInterior=function(){return this._isInterior},oc.prototype.interfaces_=function(){return[ie]},oc.prototype.getClass=function(){return oc};var qa=function(){this._nodeMap=new Xe,this._edge=null,this._edge=arguments[0]};qa.prototype.getSplitCoordinates=function(){var c=new Qt;this.addEndpoints();for(var f=this.iterator(),b=f.next();f.hasNext();){var w=f.next();this.addEdgeCoordinates(b,w,c),b=w}return c.toCoordinateArray()},qa.prototype.addCollapsedNodes=function(){var c=new ct;this.findCollapsesFromInsertedNodes(c),this.findCollapsesFromExistingVertices(c);for(var f=c.iterator();f.hasNext();){var b=f.next().intValue();this.add(this._edge.getCoordinate(b),b)}},qa.prototype.print=function(c){c.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(c)},qa.prototype.findCollapsesFromExistingVertices=function(c){for(var f=0;f<this._edge.size()-2;f++){var b=this._edge.getCoordinate(f),w=this._edge.getCoordinate(f+2);b.equals2D(w)&&c.add(new Je(f+1))}},qa.prototype.addEdgeCoordinates=function(c,f,b){var w=this._edge.getCoordinate(f.segmentIndex),M=f.isInterior()||!f.coord.equals2D(w);b.add(new ee(c.coord),!1);for(var z=c.segmentIndex+1;z<=f.segmentIndex;z++)b.add(this._edge.getCoordinate(z));M&&b.add(new ee(f.coord))},qa.prototype.iterator=function(){return this._nodeMap.values().iterator()},qa.prototype.addSplitEdges=function(c){this.addEndpoints(),this.addCollapsedNodes();for(var f=this.iterator(),b=f.next();f.hasNext();){var w=f.next(),M=this.createSplitEdge(b,w);c.add(M),b=w}},qa.prototype.findCollapseIndex=function(c,f,b){if(!c.coord.equals2D(f.coord))return!1;var w=f.segmentIndex-c.segmentIndex;return f.isInterior()||w--,1===w&&(b[0]=c.segmentIndex+1,!0)},qa.prototype.findCollapsesFromInsertedNodes=function(c){for(var f=new Array(1).fill(null),b=this.iterator(),w=b.next();b.hasNext();){var M=b.next();this.findCollapseIndex(w,M,f)&&c.add(new Je(f[0])),w=M}},qa.prototype.getEdge=function(){return this._edge},qa.prototype.addEndpoints=function(){var c=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(c),c)},qa.prototype.createSplitEdge=function(c,f){var b=f.segmentIndex-c.segmentIndex+2,w=this._edge.getCoordinate(f.segmentIndex),M=f.isInterior()||!f.coord.equals2D(w);M||b--;var z=new Array(b).fill(null),j=0;z[j++]=new ee(c.coord);for(var Ee=c.segmentIndex+1;Ee<=f.segmentIndex;Ee++)z[j++]=this._edge.getCoordinate(Ee);return M&&(z[j]=new ee(f.coord)),new Ws(z,this._edge.getData())},qa.prototype.add=function(c,f){var b=new oc(this._edge,c,f,this._edge.getSegmentOctant(f)),w=this._nodeMap.get(b);return null!==w?(Se.isTrue(w.coord.equals2D(c),"Found equal nodes with different coordinates"),w):(this._nodeMap.put(b,b),b)},qa.prototype.checkSplitEdgesCorrectness=function(c){var f=this._edge.getCoordinates(),b=c.get(0).getCoordinate(0);if(!b.equals2D(f[0]))throw new Pe("bad split edge start point at "+b);var w=c.get(c.size()-1).getCoordinates(),M=w[w.length-1];if(!M.equals2D(f[f.length-1]))throw new Pe("bad split edge end point at "+M)},qa.prototype.interfaces_=function(){return[]},qa.prototype.getClass=function(){return qa};var Iu=function(){};Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var c=arguments[0],f=arguments[1];if(0===c&&0===f)throw new Q("Cannot compute the octant for point ( "+c+", "+f+" )");var b=Math.abs(c),w=Math.abs(f);return c>=0?f>=0?b>=w?0:1:b>=w?7:6:f>=0?b>=w?3:2:b>=w?4:5}if(arguments[0]instanceof ee&&arguments[1]instanceof ee){var M=arguments[0],z=arguments[1],j=z.x-M.x,Ee=z.y-M.y;if(0===j&&0===Ee)throw new Q("Cannot compute the octant for two identical points "+M);return Iu.octant(j,Ee)}};var Ol=function(){};Ol.prototype.getCoordinates=function(){},Ol.prototype.size=function(){},Ol.prototype.getCoordinate=function(c){},Ol.prototype.isClosed=function(){},Ol.prototype.setData=function(c){},Ol.prototype.getData=function(){},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var uh=function(){};uh.prototype.addIntersection=function(c,f){},uh.prototype.interfaces_=function(){return[Ol]},uh.prototype.getClass=function(){return uh};var Ws=function(){this._nodeList=new qa(this),this._pts=null,this._data=null;var f=arguments[1];this._pts=arguments[0],this._data=f};Ws.prototype.getCoordinates=function(){return this._pts},Ws.prototype.size=function(){return this._pts.length},Ws.prototype.getCoordinate=function(c){return this._pts[c]},Ws.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ws.prototype.getSegmentOctant=function(c){return c===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(c),this.getCoordinate(c+1))},Ws.prototype.setData=function(c){this._data=c},Ws.prototype.safeOctant=function(c,f){return c.equals2D(f)?0:Iu.octant(c,f)},Ws.prototype.getData=function(){return this._data},Ws.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var w=arguments[1],z=new ee(arguments[0].getIntersection(arguments[3]));this.addIntersection(z,w)}},Ws.prototype.toString=function(){return Pt.toLineString(new Mo(this._pts))},Ws.prototype.getNodeList=function(){return this._nodeList},Ws.prototype.addIntersectionNode=function(c,f){var b=f,w=b+1;return w<this._pts.length&&c.equals2D(this._pts[w])&&(b=w),this._nodeList.add(c,b)},Ws.prototype.addIntersections=function(c,f,b){for(var w=0;w<c.getIntersectionNum();w++)this.addIntersection(c,f,b,w)},Ws.prototype.interfaces_=function(){return[uh]},Ws.prototype.getClass=function(){return Ws},Ws.getNodedSubstrings=function(){if(1===arguments.length){var c=arguments[0],f=new ct;return Ws.getNodedSubstrings(c,f),f}if(2===arguments.length)for(var w=arguments[1],M=arguments[0].iterator();M.hasNext();)M.next().getNodeList().addSplitEdges(w)};var ii=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ee,this.p1=new ee;else if(1===arguments.length){var c=arguments[0];this.p0=new ee(c.p0),this.p1=new ee(c.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var w=arguments[2],M=arguments[3];this.p0=new ee(arguments[0],arguments[1]),this.p1=new ee(w,M)}},ti={serialVersionUID:{configurable:!0}};ii.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ii.prototype.orientationIndex=function(){if(arguments[0]instanceof ii){var c=arguments[0],f=vn.orientationIndex(this.p0,this.p1,c.p0),b=vn.orientationIndex(this.p0,this.p1,c.p1);return f>=0&&b>=0||f<=0&&b<=0?Math.max(f,b):0}if(arguments[0]instanceof ee)return vn.orientationIndex(this.p0,this.p1,arguments[0])},ii.prototype.toGeometry=function(c){return c.createLineString([this.p0,this.p1])},ii.prototype.isVertical=function(){return this.p0.x===this.p1.x},ii.prototype.equals=function(c){if(!(c instanceof ii))return!1;var f=c;return this.p0.equals(f.p0)&&this.p1.equals(f.p1)},ii.prototype.intersection=function(c){var f=new cn;return f.computeIntersection(this.p0,this.p1,c.p0,c.p1),f.hasIntersection()?f.getIntersection(0):null},ii.prototype.project=function(){if(arguments[0]instanceof ee){var c=arguments[0];if(c.equals(this.p0)||c.equals(this.p1))return new ee(c);var f=this.projectionFactor(c),b=new ee;return b.x=this.p0.x+f*(this.p1.x-this.p0.x),b.y=this.p0.y+f*(this.p1.y-this.p0.y),b}if(arguments[0]instanceof ii){var w=arguments[0],M=this.projectionFactor(w.p0),z=this.projectionFactor(w.p1);if(M>=1&&z>=1||M<=0&&z<=0)return null;var j=this.project(w.p0);M<0&&(j=this.p0),M>1&&(j=this.p1);var Ee=this.project(w.p1);return z<0&&(Ee=this.p0),z>1&&(Ee=this.p1),new ii(j,Ee)}},ii.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ii.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ii.prototype.getCoordinate=function(c){return 0===c?this.p0:this.p1},ii.prototype.distancePerpendicular=function(c){return vn.distancePointLinePerpendicular(c,this.p0,this.p1)},ii.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ii.prototype.midPoint=function(){return ii.midPoint(this.p0,this.p1)},ii.prototype.projectionFactor=function(c){if(c.equals(this.p0))return 0;if(c.equals(this.p1))return 1;var f=this.p1.x-this.p0.x,b=this.p1.y-this.p0.y,w=f*f+b*b;return w<=0?ne.NaN:((c.x-this.p0.x)*f+(c.y-this.p0.y)*b)/w},ii.prototype.closestPoints=function(c){var f=this.intersection(c);if(null!==f)return[f,f];var b=new Array(2).fill(null),w=ne.MAX_VALUE,M=null,z=this.closestPoint(c.p0);w=z.distance(c.p0),b[0]=z,b[1]=c.p0;var j=this.closestPoint(c.p1);(M=j.distance(c.p1))<w&&(w=M,b[0]=j,b[1]=c.p1);var Ee=c.closestPoint(this.p0);(M=Ee.distance(this.p0))<w&&(w=M,b[0]=this.p0,b[1]=Ee);var at=c.closestPoint(this.p1);return(M=at.distance(this.p1))<w&&(w=M,b[0]=this.p1,b[1]=at),b},ii.prototype.closestPoint=function(c){var f=this.projectionFactor(c);return f>0&&f<1?this.project(c):this.p0.distance(c)<this.p1.distance(c)?this.p0:this.p1},ii.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ii.prototype.getLength=function(){return this.p0.distance(this.p1)},ii.prototype.compareTo=function(c){var f=c,b=this.p0.compareTo(f.p0);return 0!==b?b:this.p1.compareTo(f.p1)},ii.prototype.reverse=function(){var c=this.p0;this.p0=this.p1,this.p1=c},ii.prototype.equalsTopo=function(c){return this.p0.equals(c.p0)&&(this.p1.equals(c.p1)||this.p0.equals(c.p1))&&this.p1.equals(c.p0)},ii.prototype.lineIntersection=function(c){try{return mr.intersection(this.p0,this.p1,c.p0,c.p1)}catch(f){if(!(f instanceof Qn))throw f}return null},ii.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ii.prototype.pointAlongOffset=function(c,f){var b=this.p0.x+c*(this.p1.x-this.p0.x),w=this.p0.y+c*(this.p1.y-this.p0.y),M=this.p1.x-this.p0.x,z=this.p1.y-this.p0.y,j=Math.sqrt(M*M+z*z),Ee=0,at=0;if(0!==f){if(j<=0)throw new Error("Cannot compute offset from zero-length line segment");Ee=f*M/j,at=f*z/j}return new ee(b-at,w+Ee)},ii.prototype.setCoordinates=function(){if(1===arguments.length){var c=arguments[0];this.setCoordinates(c.p0,c.p1)}else if(2===arguments.length){var f=arguments[0],b=arguments[1];this.p0.x=f.x,this.p0.y=f.y,this.p1.x=b.x,this.p1.y=b.y}},ii.prototype.segmentFraction=function(c){var f=this.projectionFactor(c);return f<0?f=0:(f>1||ne.isNaN(f))&&(f=1),f},ii.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ii.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ii.prototype.distance=function(){if(arguments[0]instanceof ii){var c=arguments[0];return vn.distanceLineLine(this.p0,this.p1,c.p0,c.p1)}if(arguments[0]instanceof ee)return vn.distancePointLine(arguments[0],this.p0,this.p1)},ii.prototype.pointAlong=function(c){var f=new ee;return f.x=this.p0.x+c*(this.p1.x-this.p0.x),f.y=this.p0.y+c*(this.p1.y-this.p0.y),f},ii.prototype.hashCode=function(){var c=ne.doubleToLongBits(this.p0.x);c^=31*ne.doubleToLongBits(this.p0.y);var f=Math.trunc(c)^Math.trunc(c>>32),b=ne.doubleToLongBits(this.p1.x);return b^=31*ne.doubleToLongBits(this.p1.y),f^Math.trunc(b)^Math.trunc(b>>32)},ii.prototype.interfaces_=function(){return[ie,de]},ii.prototype.getClass=function(){return ii},ii.midPoint=function(c,f){return new ee((c.x+f.x)/2,(c.y+f.y)/2)},ti.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ii,ti);var ud=function(){this.tempEnv1=new Tn,this.tempEnv2=new Tn,this._overlapSeg1=new ii,this._overlapSeg2=new ii};ud.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var b=arguments[2],w=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),b.getLineSegment(w,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud};var _l=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var f=arguments[1],b=arguments[2],w=arguments[3];this._pts=arguments[0],this._start=f,this._end=b,this._context=w};_l.prototype.getLineSegment=function(c,f){f.p0=this._pts[c],f.p1=this._pts[c+1]},_l.prototype.computeSelect=function(c,f,b,w){if(w.tempEnv1.init(this._pts[f],this._pts[b]),b-f==1)return w.select(this,f),null;if(!c.intersects(w.tempEnv1))return null;var j=Math.trunc((f+b)/2);f<j&&this.computeSelect(c,f,j,w),j<b&&this.computeSelect(c,j,b,w)},_l.prototype.getCoordinates=function(){for(var c=new Array(this._end-this._start+1).fill(null),f=0,b=this._start;b<=this._end;b++)c[f++]=this._pts[b];return c},_l.prototype.computeOverlaps=function(c,f){this.computeOverlapsInternal(this._start,this._end,c,c._start,c._end,f)},_l.prototype.setId=function(c){this._id=c},_l.prototype.select=function(c,f){this.computeSelect(c,this._start,this._end,f)},_l.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Tn(this._pts[this._start],this._pts[this._end])),this._env},_l.prototype.getEndIndex=function(){return this._end},_l.prototype.getStartIndex=function(){return this._start},_l.prototype.getContext=function(){return this._context},_l.prototype.getId=function(){return this._id},_l.prototype.computeOverlapsInternal=function(c,f,b,w,M,z){var j=this._pts[c],Ee=this._pts[f],at=b._pts[w],Ut=b._pts[M];if(f-c==1&&M-w==1)return z.overlap(this,c,b,w),null;if(z.tempEnv1.init(j,Ee),z.tempEnv2.init(at,Ut),!z.tempEnv1.intersects(z.tempEnv2))return null;var gn=Math.trunc((c+f)/2),Rn=Math.trunc((w+M)/2);c<gn&&(w<Rn&&this.computeOverlapsInternal(c,gn,b,w,Rn,z),Rn<M&&this.computeOverlapsInternal(c,gn,b,Rn,M,z)),gn<f&&(w<Rn&&this.computeOverlapsInternal(gn,f,b,w,Rn,z),Rn<M&&this.computeOverlapsInternal(gn,f,b,Rn,M,z))},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var na=function(){};na.prototype.interfaces_=function(){return[]},na.prototype.getClass=function(){return na},na.getChainStartIndices=function(c){var f=0,b=new ct;b.add(new Je(f));do{var w=na.findChainEnd(c,f);b.add(new Je(w)),f=w}while(f<c.length-1);return na.toIntArray(b)},na.findChainEnd=function(c,f){for(var b=f;b<c.length-1&&c[b].equals2D(c[b+1]);)b++;if(b>=c.length-1)return c.length-1;for(var w=Pi.quadrant(c[b],c[b+1]),M=f+1;M<c.length&&(c[M-1].equals2D(c[M])||Pi.quadrant(c[M-1],c[M])===w);)M++;return M-1},na.getChains=function(){if(1===arguments.length)return na.getChains(arguments[0],null);if(2===arguments.length){for(var f=arguments[0],b=arguments[1],w=new ct,M=na.getChainStartIndices(f),z=0;z<M.length-1;z++){var j=new _l(f,M[z],M[z+1],b);w.add(j)}return w}},na.toIntArray=function(c){for(var f=new Array(c.size()).fill(null),b=0;b<f.length;b++)f[b]=c.get(b).intValue();return f};var Tu=function(){};Tu.prototype.computeNodes=function(c){},Tu.prototype.getNodedSubstrings=function(){},Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu};var wf=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};wf.prototype.setSegmentIntersector=function(c){this._segInt=c},wf.prototype.interfaces_=function(){return[Tu]},wf.prototype.getClass=function(){return wf};var xs=function(c){function f(w){w?c.call(this,w):c.call(this),this._monoChains=new ct,this._index=new Io,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={SegmentOverlapAction:{configurable:!0}};return f.prototype.getMonotoneChains=function(){return this._monoChains},f.prototype.getNodedSubstrings=function(){return Ws.getNodedSubstrings(this._nodedSegStrings)},f.prototype.getIndex=function(){return this._index},f.prototype.add=function(w){for(var M=na.getChains(w.getCoordinates(),w).iterator();M.hasNext();){var z=M.next();z.setId(this._idCounter++),this._index.insert(z.getEnvelope(),z),this._monoChains.add(z)}},f.prototype.computeNodes=function(w){this._nodedSegStrings=w;for(var M=w.iterator();M.hasNext();)this.add(M.next());this.intersectChains()},f.prototype.intersectChains=function(){for(var w=new Ud(this._segInt),M=this._monoChains.iterator();M.hasNext();)for(var z=M.next(),j=this._index.query(z.getEnvelope()).iterator();j.hasNext();){var Ee=j.next();if(Ee.getId()>z.getId()&&(z.computeOverlaps(Ee,w),this._nOverlaps++),this._segInt.isDone())return null}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.SegmentOverlapAction.get=function(){return Ud},Object.defineProperties(f,b),f}(wf),Ud=function(c){function f(){c.call(this),this._si=null,this._si=arguments[0]}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.overlap=function(){if(4!==arguments.length)return c.prototype.overlap.apply(this,arguments);var w=arguments[1],M=arguments[2],z=arguments[3],j=arguments[0].getContext(),Ee=M.getContext();this._si.processIntersections(j,w,Ee,z)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ud),vo=function c(){if(this._quadrantSegments=c.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=c.CAP_ROUND,this._joinStyle=c.JOIN_ROUND,this._mitreLimit=c.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=c.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var w=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(w)}else if(4===arguments.length){var z=arguments[1],j=arguments[2],Ee=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(z),this.setJoinStyle(j),this.setMitreLimit(Ee)}},Ll={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};vo.prototype.getEndCapStyle=function(){return this._endCapStyle},vo.prototype.isSingleSided=function(){return this._isSingleSided},vo.prototype.setQuadrantSegments=function(c){this._quadrantSegments=c,0===this._quadrantSegments&&(this._joinStyle=vo.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=vo.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),c<=0&&(this._quadrantSegments=1),this._joinStyle!==vo.JOIN_ROUND&&(this._quadrantSegments=vo.DEFAULT_QUADRANT_SEGMENTS)},vo.prototype.getJoinStyle=function(){return this._joinStyle},vo.prototype.setJoinStyle=function(c){this._joinStyle=c},vo.prototype.setSimplifyFactor=function(c){this._simplifyFactor=c<0?0:c},vo.prototype.getSimplifyFactor=function(){return this._simplifyFactor},vo.prototype.getQuadrantSegments=function(){return this._quadrantSegments},vo.prototype.setEndCapStyle=function(c){this._endCapStyle=c},vo.prototype.getMitreLimit=function(){return this._mitreLimit},vo.prototype.setMitreLimit=function(c){this._mitreLimit=c},vo.prototype.setSingleSided=function(c){this._isSingleSided=c},vo.prototype.interfaces_=function(){return[]},vo.prototype.getClass=function(){return vo},vo.bufferDistanceError=function(c){var f=Math.PI/2/c;return 1-Math.cos(f/2)},Ll.CAP_ROUND.get=function(){return 1},Ll.CAP_FLAT.get=function(){return 2},Ll.CAP_SQUARE.get=function(){return 3},Ll.JOIN_ROUND.get=function(){return 1},Ll.JOIN_MITRE.get=function(){return 2},Ll.JOIN_BEVEL.get=function(){return 3},Ll.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Ll.DEFAULT_MITRE_LIMIT.get=function(){return 5},Ll.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(vo,Ll);var To=function(c){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=vn.COUNTERCLOCKWISE,this._inputLine=c||null},lu={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};To.prototype.isDeletable=function(c,f,b,w){var M=this._inputLine[c],z=this._inputLine[f],j=this._inputLine[b];return!!this.isConcave(M,z,j)&&!!this.isShallow(M,z,j,w)&&this.isShallowSampled(M,z,c,b,w)},To.prototype.deleteShallowConcavities=function(){for(var c=1,f=this.findNextNonDeletedIndex(c),b=this.findNextNonDeletedIndex(f),w=!1;b<this._inputLine.length;){var M=!1;this.isDeletable(c,f,b,this._distanceTol)&&(this._isDeleted[f]=To.DELETE,M=!0,w=!0),f=this.findNextNonDeletedIndex(c=M?b:f),b=this.findNextNonDeletedIndex(f)}return w},To.prototype.isShallowConcavity=function(c,f,b,w){return vn.computeOrientation(c,f,b)===this._angleOrientation&&vn.distancePointLine(f,c,b)<w},To.prototype.isShallowSampled=function(c,f,b,w,M){var z=Math.trunc((w-b)/To.NUM_PTS_TO_CHECK);z<=0&&(z=1);for(var j=b;j<w;j+=z)if(!this.isShallow(c,f,this._inputLine[j],M))return!1;return!0},To.prototype.isConcave=function(c,f,b){return vn.computeOrientation(c,f,b)===this._angleOrientation},To.prototype.simplify=function(c){this._distanceTol=Math.abs(c),c<0&&(this._angleOrientation=vn.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var f=!1;do{f=this.deleteShallowConcavities()}while(f);return this.collapseLine()},To.prototype.findNextNonDeletedIndex=function(c){for(var f=c+1;f<this._inputLine.length&&this._isDeleted[f]===To.DELETE;)f++;return f},To.prototype.isShallow=function(c,f,b,w){return vn.distancePointLine(f,c,b)<w},To.prototype.collapseLine=function(){for(var c=new Qt,f=0;f<this._inputLine.length;f++)this._isDeleted[f]!==To.DELETE&&c.add(this._inputLine[f]);return c.toCoordinateArray()},To.prototype.interfaces_=function(){return[]},To.prototype.getClass=function(){return To},To.simplify=function(c,f){return new To(c).simplify(f)},lu.INIT.get=function(){return 0},lu.DELETE.get=function(){return 1},lu.KEEP.get=function(){return 1},lu.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(To,lu);var al=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ct},lm={COORDINATE_ARRAY_TYPE:{configurable:!0}};al.prototype.getCoordinates=function(){return this._ptList.toArray(al.COORDINATE_ARRAY_TYPE)},al.prototype.setPrecisionModel=function(c){this._precisionModel=c},al.prototype.addPt=function(c){var f=new ee(c);if(this._precisionModel.makePrecise(f),this.isRedundant(f))return null;this._ptList.add(f)},al.prototype.revere=function(){},al.prototype.addPts=function(c,f){if(f)for(var b=0;b<c.length;b++)this.addPt(c[b]);else for(var w=c.length-1;w>=0;w--)this.addPt(c[w])},al.prototype.isRedundant=function(c){if(this._ptList.size()<1)return!1;var f=this._ptList.get(this._ptList.size()-1);return c.distance(f)<this._minimimVertexDistance},al.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},al.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var c=new ee(this._ptList.get(0)),f=this._ptList.get(this._ptList.size()-1);if(c.equals(f))return null;this._ptList.add(c)},al.prototype.setMinimumVertexDistance=function(c){this._minimimVertexDistance=c},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},lm.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(al,lm);var qi=function(){},Fh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.toDegrees=function(c){return 180*c/Math.PI},qi.normalize=function(c){for(;c>Math.PI;)c-=qi.PI_TIMES_2;for(;c<=-Math.PI;)c+=qi.PI_TIMES_2;return c},qi.angle=function(){if(1===arguments.length){var c=arguments[0];return Math.atan2(c.y,c.x)}if(2===arguments.length){var f=arguments[0],b=arguments[1];return Math.atan2(b.y-f.y,b.x-f.x)}},qi.isAcute=function(c,f,b){return(c.x-f.x)*(b.x-f.x)+(c.y-f.y)*(b.y-f.y)>0},qi.isObtuse=function(c,f,b){return(c.x-f.x)*(b.x-f.x)+(c.y-f.y)*(b.y-f.y)<0},qi.interiorAngle=function(c,f,b){var w=qi.angle(f,c),M=qi.angle(f,b);return Math.abs(M-w)},qi.normalizePositive=function(c){if(c<0){for(;c<0;)c+=qi.PI_TIMES_2;c>=qi.PI_TIMES_2&&(c=0)}else{for(;c>=qi.PI_TIMES_2;)c-=qi.PI_TIMES_2;c<0&&(c=0)}return c},qi.angleBetween=function(c,f,b){var w=qi.angle(f,c),M=qi.angle(f,b);return qi.diff(w,M)},qi.diff=function(c,f){var b=null;return(b=c<f?f-c:c-f)>Math.PI&&(b=2*Math.PI-b),b},qi.toRadians=function(c){return c*Math.PI/180},qi.getTurn=function(c,f){var b=Math.sin(f-c);return b>0?qi.COUNTERCLOCKWISE:b<0?qi.CLOCKWISE:qi.NONE},qi.angleBetweenOriented=function(c,f,b){var w=qi.angle(f,c),M=qi.angle(f,b)-w;return M<=-Math.PI?M+qi.PI_TIMES_2:M>Math.PI?M-qi.PI_TIMES_2:M},Fh.PI_TIMES_2.get=function(){return 2*Math.PI},Fh.PI_OVER_2.get=function(){return Math.PI/2},Fh.PI_OVER_4.get=function(){return Math.PI/4},Fh.COUNTERCLOCKWISE.get=function(){return vn.COUNTERCLOCKWISE},Fh.CLOCKWISE.get=function(){return vn.CLOCKWISE},Fh.NONE.get=function(){return vn.COLLINEAR},Object.defineProperties(qi,Fh);var As=function c(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ii,this._seg1=new ii,this._offset0=new ii,this._offset1=new ii,this._side=0,this._hasNarrowConcaveAngle=!1;var b=arguments[1],w=arguments[2];this._precisionModel=arguments[0],this._bufParams=b,this._li=new cn,this._filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===vo.JOIN_ROUND&&(this._closingSegLengthFactor=c.MAX_CLOSING_SEG_LEN_FACTOR),this.init(w)},hd={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};As.prototype.addNextSegment=function(c,f){if(this._s0=this._s1,this._s1=this._s2,this._s2=c,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var b=vn.computeOrientation(this._s0,this._s1,this._s2),w=b===vn.CLOCKWISE&&this._side===Et.LEFT||b===vn.COUNTERCLOCKWISE&&this._side===Et.RIGHT;0===b?this.addCollinear(f):w?this.addOutsideTurn(b,f):this.addInsideTurn(b,f)},As.prototype.addLineEndCap=function(c,f){var b=new ii(c,f),w=new ii;this.computeOffsetSegment(b,Et.LEFT,this._distance,w);var M=new ii;this.computeOffsetSegment(b,Et.RIGHT,this._distance,M);var Ee=Math.atan2(f.y-c.y,f.x-c.x);switch(this._bufParams.getEndCapStyle()){case vo.CAP_ROUND:this._segList.addPt(w.p1),this.addFilletArc(f,Ee+Math.PI/2,Ee-Math.PI/2,vn.CLOCKWISE,this._distance),this._segList.addPt(M.p1);break;case vo.CAP_FLAT:this._segList.addPt(w.p1),this._segList.addPt(M.p1);break;case vo.CAP_SQUARE:var at=new ee;at.x=Math.abs(this._distance)*Math.cos(Ee),at.y=Math.abs(this._distance)*Math.sin(Ee);var Ut=new ee(w.p1.x+at.x,w.p1.y+at.y),gn=new ee(M.p1.x+at.x,M.p1.y+at.y);this._segList.addPt(Ut),this._segList.addPt(gn)}},As.prototype.getCoordinates=function(){return this._segList.getCoordinates()},As.prototype.addMitreJoin=function(c,f,b,w){var M=!0,z=null;try{z=mr.intersection(f.p0,f.p1,b.p0,b.p1),(w<=0?1:z.distance(c)/Math.abs(w))>this._bufParams.getMitreLimit()&&(M=!1)}catch(j){if(!(j instanceof Qn))throw j;z=new ee(0,0),M=!1}M?this._segList.addPt(z):this.addLimitedMitreJoin(f,b,w,this._bufParams.getMitreLimit())},As.prototype.addFilletCorner=function(c,f,b,w,M){var Ee=Math.atan2(f.y-c.y,f.x-c.x),gn=Math.atan2(b.y-c.y,b.x-c.x);w===vn.CLOCKWISE?Ee<=gn&&(Ee+=2*Math.PI):Ee>=gn&&(Ee-=2*Math.PI),this._segList.addPt(f),this.addFilletArc(c,Ee,gn,w,M),this._segList.addPt(b)},As.prototype.addOutsideTurn=function(c,f){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*As.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===vo.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===vo.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(f&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,c,this._distance),this._segList.addPt(this._offset1.p0))},As.prototype.createSquare=function(c){this._segList.addPt(new ee(c.x+this._distance,c.y+this._distance)),this._segList.addPt(new ee(c.x+this._distance,c.y-this._distance)),this._segList.addPt(new ee(c.x-this._distance,c.y-this._distance)),this._segList.addPt(new ee(c.x-this._distance,c.y+this._distance)),this._segList.closeRing()},As.prototype.addSegments=function(c,f){this._segList.addPts(c,f)},As.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},As.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},As.prototype.initSideSegments=function(c,f,b){this._s1=c,this._s2=f,this._side=b,this._seg1.setCoordinates(c,f),this.computeOffsetSegment(this._seg1,b,this._distance,this._offset1)},As.prototype.addLimitedMitreJoin=function(c,f,b,w){var M=this._seg0.p1,z=qi.angle(M,this._seg0.p0),j=qi.angleBetweenOriented(this._seg0.p0,M,this._seg1.p1)/2,Ee=qi.normalize(z+j),at=qi.normalize(Ee+Math.PI),Ut=w*b,gn=b-Ut*Math.abs(Math.sin(j)),Rn=M.x+Ut*Math.cos(at),Ir=M.y+Ut*Math.sin(at),wr=new ee(Rn,Ir),$r=new ii(M,wr),fi=$r.pointAlongOffset(1,gn),Eo=$r.pointAlongOffset(1,-gn);this._side===Et.LEFT?(this._segList.addPt(fi),this._segList.addPt(Eo)):(this._segList.addPt(Eo),this._segList.addPt(fi))},As.prototype.computeOffsetSegment=function(c,f,b,w){var M=f===Et.LEFT?1:-1,z=c.p1.x-c.p0.x,j=c.p1.y-c.p0.y,Ee=Math.sqrt(z*z+j*j),at=M*b*z/Ee,Ut=M*b*j/Ee;w.p0.x=c.p0.x-Ut,w.p0.y=c.p0.y+at,w.p1.x=c.p1.x-Ut,w.p1.y=c.p1.y+at},As.prototype.addFilletArc=function(c,f,b,w,M){var z=w===vn.CLOCKWISE?-1:1,j=Math.abs(f-b),Ee=Math.trunc(j/this._filletAngleQuantum+.5);if(Ee<1)return null;for(var at=j/Ee,Ut=0,gn=new ee;Ut<j;){var Rn=f+z*Ut;gn.x=c.x+M*Math.cos(Rn),gn.y=c.y+M*Math.sin(Rn),this._segList.addPt(gn),Ut+=at}},As.prototype.addInsideTurn=function(c,f){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*As.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var b=new ee((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(b);var w=new ee((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(w)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},As.prototype.createCircle=function(c){var f=new ee(c.x+this._distance,c.y);this._segList.addPt(f),this.addFilletArc(c,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},As.prototype.addBevelJoin=function(c,f){this._segList.addPt(c.p1),this._segList.addPt(f.p0)},As.prototype.init=function(c){this._distance=c,this._maxCurveSegmentError=c*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new al,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(c*As.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},As.prototype.addCollinear=function(c){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===vo.JOIN_BEVEL||this._bufParams.getJoinStyle()===vo.JOIN_MITRE?(c&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,vn.CLOCKWISE,this._distance))},As.prototype.closeRing=function(){this._segList.closeRing()},As.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},As.prototype.interfaces_=function(){return[]},As.prototype.getClass=function(){return As},hd.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},hd.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},hd.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},hd.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(As,hd);var yl=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var f=arguments[1];this._precisionModel=arguments[0],this._bufParams=f};yl.prototype.getOffsetCurve=function(c,f){if(this._distance=f,0===f)return null;var b=f<0,w=Math.abs(f),M=this.getSegGen(w);c.length<=1?this.computePointCurve(c[0],M):this.computeOffsetCurve(c,b,M);var z=M.getCoordinates();return b&&Dt.reverse(z),z},yl.prototype.computeSingleSidedBufferCurve=function(c,f,b){var w=this.simplifyTolerance(this._distance);if(f){b.addSegments(c,!0);var M=To.simplify(c,-w),z=M.length-1;b.initSideSegments(M[z],M[z-1],Et.LEFT),b.addFirstSegment();for(var j=z-2;j>=0;j--)b.addNextSegment(M[j],!0)}else{b.addSegments(c,!1);var Ee=To.simplify(c,w),at=Ee.length-1;b.initSideSegments(Ee[0],Ee[1],Et.LEFT),b.addFirstSegment();for(var Ut=2;Ut<=at;Ut++)b.addNextSegment(Ee[Ut],!0)}b.addLastSegment(),b.closeRing()},yl.prototype.computeRingBufferCurve=function(c,f,b){var w=this.simplifyTolerance(this._distance);f===Et.RIGHT&&(w=-w);var M=To.simplify(c,w),z=M.length-1;b.initSideSegments(M[z-1],M[0],f);for(var j=1;j<=z;j++)b.addNextSegment(M[j],1!==j);b.closeRing()},yl.prototype.computeLineBufferCurve=function(c,f){var b=this.simplifyTolerance(this._distance),w=To.simplify(c,b),M=w.length-1;f.initSideSegments(w[0],w[1],Et.LEFT);for(var z=2;z<=M;z++)f.addNextSegment(w[z],!0);f.addLastSegment(),f.addLineEndCap(w[M-1],w[M]);var j=To.simplify(c,-b),Ee=j.length-1;f.initSideSegments(j[Ee],j[Ee-1],Et.LEFT);for(var at=Ee-2;at>=0;at--)f.addNextSegment(j[at],!0);f.addLastSegment(),f.addLineEndCap(j[1],j[0]),f.closeRing()},yl.prototype.computePointCurve=function(c,f){switch(this._bufParams.getEndCapStyle()){case vo.CAP_ROUND:f.createCircle(c);break;case vo.CAP_SQUARE:f.createSquare(c)}},yl.prototype.getLineCurve=function(c,f){if(this._distance=f,f<0&&!this._bufParams.isSingleSided()||0===f)return null;var b=Math.abs(f),w=this.getSegGen(b);return c.length<=1?this.computePointCurve(c[0],w):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(c,f<0,w):this.computeLineBufferCurve(c,w),w.getCoordinates()},yl.prototype.getBufferParameters=function(){return this._bufParams},yl.prototype.simplifyTolerance=function(c){return c*this._bufParams.getSimplifyFactor()},yl.prototype.getRingCurve=function(c,f,b){if(this._distance=b,c.length<=2)return this.getLineCurve(c,b);if(0===b)return yl.copyCoordinates(c);var w=this.getSegGen(b);return this.computeRingBufferCurve(c,f,w),w.getCoordinates()},yl.prototype.computeOffsetCurve=function(c,f,b){var w=this.simplifyTolerance(this._distance);if(f){var M=To.simplify(c,-w),z=M.length-1;b.initSideSegments(M[z],M[z-1],Et.LEFT),b.addFirstSegment();for(var j=z-2;j>=0;j--)b.addNextSegment(M[j],!0)}else{var Ee=To.simplify(c,w),at=Ee.length-1;b.initSideSegments(Ee[0],Ee[1],Et.LEFT),b.addFirstSegment();for(var Ut=2;Ut<=at;Ut++)b.addNextSegment(Ee[Ut],!0)}b.addLastSegment()},yl.prototype.getSegGen=function(c){return new As(this._precisionModel,this._bufParams,c)},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.copyCoordinates=function(c){for(var f=new Array(c.length).fill(null),b=0;b<f.length;b++)f[b]=new ee(c[b]);return f};var Bh=function(){this._subgraphs=null,this._seg=new ii,this._cga=new vn,this._subgraphs=arguments[0]},lo={DepthSegment:{configurable:!0}};Bh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var c=arguments[0],f=new ct,b=this._subgraphs.iterator();b.hasNext();){var w=b.next(),M=w.getEnvelope();c.y<M.getMinY()||c.y>M.getMaxY()||this.findStabbedSegments(c,w.getDirectedEdges(),f)}return f}if(3===arguments.length)if(Te(arguments[2],It)&&arguments[0]instanceof ee&&arguments[1]instanceof Ea){for(var z=arguments[0],j=arguments[1],Ee=arguments[2],at=j.getEdge().getCoordinates(),Ut=0;Ut<at.length-1;Ut++)if(this._seg.p0=at[Ut],this._seg.p1=at[Ut+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<z.x||this._seg.isHorizontal()||z.y<this._seg.p0.y||z.y>this._seg.p1.y||vn.computeOrientation(this._seg.p0,this._seg.p1,z)===vn.RIGHT)){var gn=j.getDepth(Et.LEFT);this._seg.p0.equals(at[Ut])||(gn=j.getDepth(Et.RIGHT));var Rn=new Ec(this._seg,gn);Ee.add(Rn)}}else if(Te(arguments[2],It)&&arguments[0]instanceof ee&&Te(arguments[1],It))for(var Ir=arguments[0],$r=arguments[2],fi=arguments[1].iterator();fi.hasNext();){var Eo=fi.next();Eo.isForward()&&this.findStabbedSegments(Ir,Eo,$r)}},Bh.prototype.getDepth=function(c){var f=this.findStabbedSegments(c);return 0===f.size()?0:xi.min(f)._leftDepth},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},lo.DepthSegment.get=function(){return Ec},Object.defineProperties(Bh,lo);var Ec=function(){this._upwardSeg=null,this._leftDepth=null;var f=arguments[1];this._upwardSeg=new ii(arguments[0]),this._leftDepth=f};Ec.prototype.compareTo=function(c){var f=c;if(this._upwardSeg.minX()>=f._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=f._upwardSeg.minX())return-1;var b=this._upwardSeg.orientationIndex(f._upwardSeg);return 0!==b||0!=(b=-1*f._upwardSeg.orientationIndex(this._upwardSeg))?b:this._upwardSeg.compareTo(f._upwardSeg)},Ec.prototype.compareX=function(c,f){var b=c.p0.compareTo(f.p0);return 0!==b?b:c.p1.compareTo(f.p1)},Ec.prototype.toString=function(){return this._upwardSeg.toString()},Ec.prototype.interfaces_=function(){return[ie]},Ec.prototype.getClass=function(){return Ec};var fo=function(c,f,b){this.p0=c||null,this.p1=f||null,this.p2=b||null};fo.prototype.area=function(){return fo.area(this.p0,this.p1,this.p2)},fo.prototype.signedArea=function(){return fo.signedArea(this.p0,this.p1,this.p2)},fo.prototype.interpolateZ=function(c){if(null===c)throw new Q("Supplied point is null.");return fo.interpolateZ(c,this.p0,this.p1,this.p2)},fo.prototype.longestSideLength=function(){return fo.longestSideLength(this.p0,this.p1,this.p2)},fo.prototype.isAcute=function(){return fo.isAcute(this.p0,this.p1,this.p2)},fo.prototype.circumcentre=function(){return fo.circumcentre(this.p0,this.p1,this.p2)},fo.prototype.area3D=function(){return fo.area3D(this.p0,this.p1,this.p2)},fo.prototype.centroid=function(){return fo.centroid(this.p0,this.p1,this.p2)},fo.prototype.inCentre=function(){return fo.inCentre(this.p0,this.p1,this.p2)},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},fo.area=function(c,f,b){return Math.abs(((b.x-c.x)*(f.y-c.y)-(f.x-c.x)*(b.y-c.y))/2)},fo.signedArea=function(c,f,b){return((b.x-c.x)*(f.y-c.y)-(f.x-c.x)*(b.y-c.y))/2},fo.det=function(c,f,b,w){return c*w-f*b},fo.interpolateZ=function(c,f,b,w){var M=f.x,z=f.y,j=b.x-M,Ee=w.x-M,at=b.y-z,Ut=w.y-z,gn=j*Ut-Ee*at,Rn=c.x-M,Ir=c.y-z;return f.z+(Ut*Rn-Ee*Ir)/gn*(b.z-f.z)+(-at*Rn+j*Ir)/gn*(w.z-f.z)},fo.longestSideLength=function(c,f,b){var w=c.distance(f),M=f.distance(b),z=b.distance(c),j=w;return M>j&&(j=M),z>j&&(j=z),j},fo.isAcute=function(c,f,b){return!!qi.isAcute(c,f,b)&&!!qi.isAcute(f,b,c)&&!!qi.isAcute(b,c,f)},fo.circumcentre=function(c,f,b){var w=b.x,M=b.y,z=c.x-w,j=c.y-M,Ee=f.x-w,at=f.y-M,Ut=2*fo.det(z,j,Ee,at),gn=fo.det(j,z*z+j*j,at,Ee*Ee+at*at),Rn=fo.det(z,z*z+j*j,Ee,Ee*Ee+at*at);return new ee(w-gn/Ut,M+Rn/Ut)},fo.perpendicularBisector=function(c,f){var b=f.x-c.x,w=f.y-c.y,M=new mr(c.x+b/2,c.y+w/2,1),z=new mr(c.x-w+b/2,c.y+b+w/2,1);return new mr(M,z)},fo.angleBisector=function(c,f,b){var w=f.distance(c),M=w/(w+f.distance(b));return new ee(c.x+M*(b.x-c.x),c.y+M*(b.y-c.y))},fo.area3D=function(c,f,b){var w=f.x-c.x,M=f.y-c.y,z=f.z-c.z,j=b.x-c.x,Ee=b.y-c.y,at=b.z-c.z,Ut=M*at-z*Ee,gn=z*j-w*at,Rn=w*Ee-M*j;return Math.sqrt(Ut*Ut+gn*gn+Rn*Rn)/2},fo.centroid=function(c,f,b){return new ee((c.x+f.x+b.x)/3,(c.y+f.y+b.y)/3)},fo.inCentre=function(c,f,b){var w=f.distance(b),M=c.distance(b),z=c.distance(f),j=w+M+z;return new ee((w*c.x+M*f.x+z*b.x)/j,(w*c.y+M*f.y+z*b.y)/j)};var ql=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ct;var f=arguments[1],b=arguments[2];this._inputGeom=arguments[0],this._distance=f,this._curveBuilder=b};ql.prototype.addPoint=function(c){if(this._distance<=0)return null;var f=c.getCoordinates(),b=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(b,oe.EXTERIOR,oe.INTERIOR)},ql.prototype.addPolygon=function(c){var f=this._distance,b=Et.LEFT;this._distance<0&&(f=-this._distance,b=Et.RIGHT);var w=c.getExteriorRing(),M=Dt.removeRepeatedPoints(w.getCoordinates());if(this._distance<0&&this.isErodedCompletely(w,this._distance)||this._distance<=0&&M.length<3)return null;this.addPolygonRing(M,f,b,oe.EXTERIOR,oe.INTERIOR);for(var z=0;z<c.getNumInteriorRing();z++){var j=c.getInteriorRingN(z),Ee=Dt.removeRepeatedPoints(j.getCoordinates());this._distance>0&&this.isErodedCompletely(j,-this._distance)||this.addPolygonRing(Ee,f,Et.opposite(b),oe.INTERIOR,oe.EXTERIOR)}},ql.prototype.isTriangleErodedCompletely=function(c,f){var b=new fo(c[0],c[1],c[2]),w=b.inCentre();return vn.distancePointLine(w,b.p0,b.p1)<Math.abs(f)},ql.prototype.addLineString=function(c){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var f=Dt.removeRepeatedPoints(c.getCoordinates()),b=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(b,oe.EXTERIOR,oe.INTERIOR)},ql.prototype.addCurve=function(c,f,b){if(null===c||c.length<2)return null;var w=new Ws(c,new $i(0,oe.BOUNDARY,f,b));this._curveList.add(w)},ql.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},ql.prototype.addPolygonRing=function(c,f,b,w,M){if(0===f&&c.length<Lo.MINIMUM_VALID_SIZE)return null;var z=w,j=M;c.length>=Lo.MINIMUM_VALID_SIZE&&vn.isCCW(c)&&(z=M,j=w,b=Et.opposite(b));var Ee=this._curveBuilder.getRingCurve(c,b,f);this.addCurve(Ee,z,j)},ql.prototype.add=function(c){if(c.isEmpty())return null;c instanceof so?this.addPolygon(c):c instanceof oi?this.addLineString(c):c instanceof Vi?this.addPoint(c):(c instanceof Ns||c instanceof Yn||c instanceof no||c instanceof $n)&&this.addCollection(c)},ql.prototype.isErodedCompletely=function(c,f){var b=c.getCoordinates();if(b.length<4)return f<0;if(4===b.length)return this.isTriangleErodedCompletely(b,f);var w=c.getEnvelopeInternal(),M=Math.min(w.getHeight(),w.getWidth());return f<0&&2*Math.abs(f)>M},ql.prototype.addCollection=function(c){for(var f=0;f<c.getNumGeometries();f++){var b=c.getGeometryN(f);this.add(b)}},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql};var dd=function(){};dd.prototype.locate=function(c){},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd};var Nl=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var c=arguments[0];this._parent=c,this._atStart=!0,this._index=0,this._max=c.getNumGeometries()};Nl.prototype.next=function(){if(this._atStart)return this._atStart=!1,Nl.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new tt;var c=this._parent.getGeometryN(this._index++);return c instanceof $n?(this._subcollectionIterator=new Nl(c),this._subcollectionIterator.next()):c},Nl.prototype.remove=function(){throw new Error(this.getClass().getName())},Nl.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Nl.prototype.interfaces_=function(){return[gt]},Nl.prototype.getClass=function(){return Nl},Nl.isAtomic=function(c){return!(c instanceof $n)};var Sl=function(){this._geom=null,this._geom=arguments[0]};Sl.prototype.locate=function(c){return Sl.locate(c,this._geom)},Sl.prototype.interfaces_=function(){return[dd]},Sl.prototype.getClass=function(){return Sl},Sl.isPointInRing=function(c,f){return!!f.getEnvelopeInternal().intersects(c)&&vn.isPointInRing(c,f.getCoordinates())},Sl.containsPointInPolygon=function(c,f){if(f.isEmpty())return!1;var b=f.getExteriorRing();if(!Sl.isPointInRing(c,b))return!1;for(var w=0;w<f.getNumInteriorRing();w++){var M=f.getInteriorRingN(w);if(Sl.isPointInRing(c,M))return!1}return!0},Sl.containsPoint=function(c,f){if(f instanceof so)return Sl.containsPointInPolygon(c,f);if(f instanceof $n)for(var b=new Nl(f);b.hasNext();){var w=b.next();if(w!==f&&Sl.containsPoint(c,w))return!0}return!1},Sl.locate=function(c,f){return f.isEmpty()?oe.EXTERIOR:Sl.containsPoint(c,f)?oe.INTERIOR:oe.EXTERIOR};var Ca=function(){this._edgeMap=new Xe,this._edgeList=null,this._ptInAreaLocation=[oe.NONE,oe.NONE]};Ca.prototype.getNextCW=function(c){this.getEdges();var f=this._edgeList.indexOf(c),b=f-1;return 0===f&&(b=this._edgeList.size()-1),this._edgeList.get(b)},Ca.prototype.propagateSideLabels=function(c){for(var f=oe.NONE,b=this.iterator();b.hasNext();){var w=b.next().getLabel();w.isArea(c)&&w.getLocation(c,Et.LEFT)!==oe.NONE&&(f=w.getLocation(c,Et.LEFT))}if(f===oe.NONE)return null;for(var M=f,z=this.iterator();z.hasNext();){var j=z.next(),Ee=j.getLabel();if(Ee.getLocation(c,Et.ON)===oe.NONE&&Ee.setLocation(c,Et.ON,M),Ee.isArea(c)){var at=Ee.getLocation(c,Et.LEFT),Ut=Ee.getLocation(c,Et.RIGHT);if(Ut!==oe.NONE){if(Ut!==M)throw new ui("side location conflict",j.getCoordinate());at===oe.NONE&&Se.shouldNeverReachHere("found single null side (at "+j.getCoordinate()+")"),M=at}else Se.isTrue(Ee.getLocation(c,Et.LEFT)===oe.NONE,"found single null side"),Ee.setLocation(c,Et.RIGHT,M),Ee.setLocation(c,Et.LEFT,M)}}},Ca.prototype.getCoordinate=function(){var c=this.iterator();return c.hasNext()?c.next().getCoordinate():null},Ca.prototype.print=function(c){jt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var f=this.iterator();f.hasNext();)f.next().print(c)},Ca.prototype.isAreaLabelsConsistent=function(c){return this.computeEdgeEndLabels(c.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Ca.prototype.checkAreaLabelsConsistent=function(c){var f=this.getEdges();if(f.size()<=0)return!0;var b=f.size()-1,w=f.get(b).getLabel().getLocation(c,Et.LEFT);Se.isTrue(w!==oe.NONE,"Found unlabelled area edge");for(var M=w,z=this.iterator();z.hasNext();){var j=z.next().getLabel();Se.isTrue(j.isArea(c),"Found non-area edge");var Ee=j.getLocation(c,Et.LEFT),at=j.getLocation(c,Et.RIGHT);if(Ee===at||at!==M)return!1;M=Ee}return!0},Ca.prototype.findIndex=function(c){this.iterator();for(var f=0;f<this._edgeList.size();f++)if(this._edgeList.get(f)===c)return f;return-1},Ca.prototype.iterator=function(){return this.getEdges().iterator()},Ca.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new ct(this._edgeMap.values())),this._edgeList},Ca.prototype.getLocation=function(c,f,b){return this._ptInAreaLocation[c]===oe.NONE&&(this._ptInAreaLocation[c]=Sl.locate(f,b[c].getGeometry())),this._ptInAreaLocation[c]},Ca.prototype.toString=function(){var c=new Me;c.append("EdgeEndStar:   "+this.getCoordinate()),c.append("\n");for(var f=this.iterator();f.hasNext();){var b=f.next();c.append(b),c.append("\n")}return c.toString()},Ca.prototype.computeEdgeEndLabels=function(c){for(var f=this.iterator();f.hasNext();)f.next().computeLabel(c)},Ca.prototype.computeLabelling=function(c){this.computeEdgeEndLabels(c[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var f=[!1,!1],b=this.iterator();b.hasNext();)for(var w=b.next().getLabel(),M=0;M<2;M++)w.isLine(M)&&w.getLocation(M)===oe.BOUNDARY&&(f[M]=!0);for(var z=this.iterator();z.hasNext();)for(var j=z.next(),Ee=j.getLabel(),at=0;at<2;at++)if(Ee.isAnyNull(at)){var Ut=oe.NONE;if(f[at])Ut=oe.EXTERIOR;else{var gn=j.getCoordinate();Ut=this.getLocation(at,gn,c)}Ee.setAllLocationsIfNull(at,Ut)}},Ca.prototype.getDegree=function(){return this._edgeMap.size()},Ca.prototype.insertEdgeEnd=function(c,f){this._edgeMap.put(c,f),this._edgeList=null},Ca.prototype.interfaces_=function(){return[]},Ca.prototype.getClass=function(){return Ca};var L_=function(c){function f(){c.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var b=null,w=null,M=this._SCANNING_FOR_INCOMING,z=0;z<this._resultAreaEdgeList.size();z++){var j=this._resultAreaEdgeList.get(z),Ee=j.getSym();if(j.getLabel().isArea())switch(null===b&&j.isInResult()&&(b=j),M){case this._SCANNING_FOR_INCOMING:if(!Ee.isInResult())continue;w=Ee,M=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!j.isInResult())continue;w.setNext(j),M=this._SCANNING_FOR_INCOMING}}if(M===this._LINKING_TO_OUTGOING){if(null===b)throw new ui("no outgoing dirEdge found",this.getCoordinate());Se.isTrue(b.isInResult(),"unable to link last incoming dirEdge"),w.setNext(b)}},f.prototype.insert=function(b){this.insertEdgeEnd(b,b)},f.prototype.getRightmostEdge=function(){var b=this.getEdges(),w=b.size();if(w<1)return null;var M=b.get(0);if(1===w)return M;var z=b.get(w-1),j=M.getQuadrant(),Ee=z.getQuadrant();return Pi.isNorthern(j)&&Pi.isNorthern(Ee)?M:Pi.isNorthern(j)||Pi.isNorthern(Ee)?0!==M.getDy()?M:0!==z.getDy()?z:(Se.shouldNeverReachHere("found two horizontal edges incident on node"),null):z},f.prototype.print=function(b){jt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var w=this.iterator();w.hasNext();){var M=w.next();b.print("out "),M.print(b),b.println(),b.print("in "),M.getSym().print(b),b.println()}},f.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ct;for(var b=this.iterator();b.hasNext();){var w=b.next();(w.isInResult()||w.getSym().isInResult())&&this._resultAreaEdgeList.add(w)}return this._resultAreaEdgeList},f.prototype.updateLabelling=function(b){for(var w=this.iterator();w.hasNext();){var M=w.next().getLabel();M.setAllLocationsIfNull(0,b.getLocation(0)),M.setAllLocationsIfNull(1,b.getLocation(1))}},f.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var b=null,w=null,M=this._edgeList.size()-1;M>=0;M--){var z=this._edgeList.get(M),j=z.getSym();null===w&&(w=j),null!==b&&j.setNext(b),b=z}w.setNext(b)},f.prototype.computeDepths=function(){if(1===arguments.length){var b=arguments[0],w=this.findIndex(b),M=b.getDepth(Et.LEFT),z=b.getDepth(Et.RIGHT),j=this.computeDepths(w+1,this._edgeList.size(),M);if(this.computeDepths(0,w,j)!==z)throw new ui("depth mismatch at "+b.getCoordinate())}else if(3===arguments.length){for(var at=arguments[1],Ut=arguments[2],gn=arguments[0];gn<at;gn++){var Rn=this._edgeList.get(gn);Rn.setEdgeDepths(Et.RIGHT,Ut),Ut=Rn.getDepth(Et.LEFT)}return Ut}},f.prototype.mergeSymLabels=function(){for(var b=this.iterator();b.hasNext();){var w=b.next();w.getLabel().merge(w.getSym().getLabel())}},f.prototype.linkMinimalDirectedEdges=function(b){for(var w=null,M=null,z=this._SCANNING_FOR_INCOMING,j=this._resultAreaEdgeList.size()-1;j>=0;j--){var Ee=this._resultAreaEdgeList.get(j),at=Ee.getSym();switch(null===w&&Ee.getEdgeRing()===b&&(w=Ee),z){case this._SCANNING_FOR_INCOMING:if(at.getEdgeRing()!==b)continue;M=at,z=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Ee.getEdgeRing()!==b)continue;M.setNextMin(Ee),z=this._SCANNING_FOR_INCOMING}}z===this._LINKING_TO_OUTGOING&&(Se.isTrue(null!==w,"found null for first outgoing dirEdge"),Se.isTrue(w.getEdgeRing()===b,"unable to link last incoming dirEdge"),M.setNextMin(w))},f.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var b=0,w=this.iterator();w.hasNext();)w.next().isInResult()&&b++;return b}if(1===arguments.length){for(var M=arguments[0],z=0,j=this.iterator();j.hasNext();)j.next().getEdgeRing()===M&&z++;return z}},f.prototype.getLabel=function(){return this._label},f.prototype.findCoveredLineEdges=function(){for(var b=oe.NONE,w=this.iterator();w.hasNext();){var M=w.next(),z=M.getSym();if(!M.isLineEdge()){if(M.isInResult()){b=oe.INTERIOR;break}if(z.isInResult()){b=oe.EXTERIOR;break}}}if(b===oe.NONE)return null;for(var j=b,Ee=this.iterator();Ee.hasNext();){var at=Ee.next(),Ut=at.getSym();at.isLineEdge()?at.getEdge().setCovered(j===oe.INTERIOR):(at.isInResult()&&(j=oe.EXTERIOR),Ut.isInResult()&&(j=oe.INTERIOR))}},f.prototype.computeLabelling=function(b){c.prototype.computeLabelling.call(this,b),this._label=new $i(oe.NONE);for(var w=this.iterator();w.hasNext();)for(var M=w.next().getEdge().getLabel(),z=0;z<2;z++){var j=M.getLocation(z);j!==oe.INTERIOR&&j!==oe.BOUNDARY||this._label.setLocation(z,oe.INTERIOR)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ca),hh=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.createNode=function(b){return new Su(b,new L_)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Gl),Du=function c(){this._pts=null,this._orientation=null;var f=arguments[0];this._pts=f,this._orientation=c.orientation(f)};Du.prototype.compareTo=function(c){return Du.compareOriented(this._pts,this._orientation,c._pts,c._orientation)},Du.prototype.interfaces_=function(){return[ie]},Du.prototype.getClass=function(){return Du},Du.orientation=function(c){return 1===Dt.increasingDirection(c)},Du.compareOriented=function(c,f,b,w){for(var M=f?1:-1,z=w?1:-1,j=f?c.length:-1,Ee=w?b.length:-1,at=f?0:c.length-1,Ut=w?0:b.length-1;;){var gn=c[at].compareTo(b[Ut]);if(0!==gn)return gn;var Rn=(at+=M)===j,Ir=(Ut+=z)===Ee;if(Rn&&!Ir)return-1;if(!Rn&&Ir)return 1;if(Rn&&Ir)return 0}};var pn=function(){this._edges=new ct,this._ocaMap=new Xe};pn.prototype.print=function(c){c.print("MULTILINESTRING ( ");for(var f=0;f<this._edges.size();f++){var b=this._edges.get(f);f>0&&c.print(","),c.print("(");for(var w=b.getCoordinates(),M=0;M<w.length;M++)M>0&&c.print(","),c.print(w[M].x+" "+w[M].y);c.println(")")}c.print(")  ")},pn.prototype.addAll=function(c){for(var f=c.iterator();f.hasNext();)this.add(f.next())},pn.prototype.findEdgeIndex=function(c){for(var f=0;f<this._edges.size();f++)if(this._edges.get(f).equals(c))return f;return-1},pn.prototype.iterator=function(){return this._edges.iterator()},pn.prototype.getEdges=function(){return this._edges},pn.prototype.get=function(c){return this._edges.get(c)},pn.prototype.findEqualEdge=function(c){var f=new Du(c.getCoordinates());return this._ocaMap.get(f)},pn.prototype.add=function(c){this._edges.add(c);var f=new Du(c.getCoordinates());this._ocaMap.put(f,c)},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var Au=function(){};Au.prototype.processIntersections=function(c,f,b,w){},Au.prototype.isDone=function(){},Au.prototype.interfaces_=function(){return[]},Au.prototype.getClass=function(){return Au};var rr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};rr.prototype.isTrivialIntersection=function(c,f,b,w){if(c===b&&1===this._li.getIntersectionNum()){if(rr.isAdjacentSegments(f,w))return!0;if(c.isClosed()){var M=c.size()-1;if(0===f&&w===M||0===w&&f===M)return!0}}return!1},rr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},rr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},rr.prototype.getLineIntersector=function(){return this._li},rr.prototype.hasProperIntersection=function(){return this._hasProper},rr.prototype.processIntersections=function(c,f,b,w){if(c===b&&f===w)return null;this.numTests++;var M=c.getCoordinates()[f],z=c.getCoordinates()[f+1],j=b.getCoordinates()[w],Ee=b.getCoordinates()[w+1];this._li.computeIntersection(M,z,j,Ee),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(c,f,b,w)||(this._hasIntersection=!0,c.addIntersections(this._li,f,0),b.addIntersections(this._li,w,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},rr.prototype.hasIntersection=function(){return this._hasIntersection},rr.prototype.isDone=function(){return!1},rr.prototype.hasInteriorIntersection=function(){return this._hasInterior},rr.prototype.interfaces_=function(){return[Au]},rr.prototype.getClass=function(){return rr},rr.isAdjacentSegments=function(c,f){return 1===Math.abs(c-f)};var Wl=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var f=arguments[1],b=arguments[2];this.coord=new ee(arguments[0]),this.segmentIndex=f,this.dist=b};Wl.prototype.getSegmentIndex=function(){return this.segmentIndex},Wl.prototype.getCoordinate=function(){return this.coord},Wl.prototype.print=function(c){c.print(this.coord),c.print(" seg # = "+this.segmentIndex),c.println(" dist = "+this.dist)},Wl.prototype.compareTo=function(c){return this.compare(c.segmentIndex,c.dist)},Wl.prototype.isEndPoint=function(c){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===c},Wl.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Wl.prototype.getDistance=function(){return this.dist},Wl.prototype.compare=function(c,f){return this.segmentIndex<c?-1:this.segmentIndex>c?1:this.dist<f?-1:this.dist>f?1:0},Wl.prototype.interfaces_=function(){return[ie]},Wl.prototype.getClass=function(){return Wl};var Cc=function(){this._nodeMap=new Xe,this.edge=null,this.edge=arguments[0]};Cc.prototype.print=function(c){c.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(c)},Cc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Cc.prototype.addSplitEdges=function(c){this.addEndpoints();for(var f=this.iterator(),b=f.next();f.hasNext();){var w=f.next(),M=this.createSplitEdge(b,w);c.add(M),b=w}},Cc.prototype.addEndpoints=function(){var c=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[c],c,0)},Cc.prototype.createSplitEdge=function(c,f){var b=f.segmentIndex-c.segmentIndex+2,M=f.dist>0||!f.coord.equals2D(this.edge.pts[f.segmentIndex]);M||b--;var z=new Array(b).fill(null),j=0;z[j++]=new ee(c.coord);for(var Ee=c.segmentIndex+1;Ee<=f.segmentIndex;Ee++)z[j++]=this.edge.pts[Ee];return M&&(z[j]=f.coord),new Xl(z,new $i(this.edge._label))},Cc.prototype.add=function(c,f,b){var w=new Wl(c,f,b),M=this._nodeMap.get(w);return null!==M?M:(this._nodeMap.put(w,w),w)},Cc.prototype.isIntersection=function(c){for(var f=this.iterator();f.hasNext();)if(f.next().coord.equals(c))return!0;return!1},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var cu=function(){};cu.prototype.getChainStartIndices=function(c){var f=0,b=new ct;b.add(new Je(f));do{var w=this.findChainEnd(c,f);b.add(new Je(w)),f=w}while(f<c.length-1);return cu.toIntArray(b)},cu.prototype.findChainEnd=function(c,f){for(var b=Pi.quadrant(c[f],c[f+1]),w=f+1;w<c.length&&Pi.quadrant(c[w-1],c[w])===b;)w++;return w-1},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},cu.toIntArray=function(c){for(var f=new Array(c.size()).fill(null),b=0;b<f.length;b++)f[b]=c.get(b).intValue();return f};var Sc=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Tn,this.env2=new Tn;var c=arguments[0];this.e=c,this.pts=c.getCoordinates();var f=new cu;this.startIndex=f.getChainStartIndices(this.pts)};Sc.prototype.getCoordinates=function(){return this.pts},Sc.prototype.getMaxX=function(c){var f=this.pts[this.startIndex[c]].x,b=this.pts[this.startIndex[c+1]].x;return f>b?f:b},Sc.prototype.getMinX=function(c){var f=this.pts[this.startIndex[c]].x,b=this.pts[this.startIndex[c+1]].x;return f<b?f:b},Sc.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var c=arguments[0],f=arguments[1],b=arguments[2];this.computeIntersectsForChain(this.startIndex[c],this.startIndex[c+1],f,f.startIndex[b],f.startIndex[b+1],arguments[3])}else if(6===arguments.length){var M=arguments[0],z=arguments[1],j=arguments[2],Ee=arguments[3],at=arguments[4],Ut=arguments[5],gn=this.pts[M],Rn=this.pts[z],Ir=j.pts[Ee],wr=j.pts[at];if(z-M==1&&at-Ee==1)return Ut.addIntersections(this.e,M,j.e,Ee),null;if(this.env1.init(gn,Rn),this.env2.init(Ir,wr),!this.env1.intersects(this.env2))return null;var $r=Math.trunc((M+z)/2),fi=Math.trunc((Ee+at)/2);M<$r&&(Ee<fi&&this.computeIntersectsForChain(M,$r,j,Ee,fi,Ut),fi<at&&this.computeIntersectsForChain(M,$r,j,fi,at,Ut)),$r<z&&(Ee<fi&&this.computeIntersectsForChain($r,z,j,Ee,fi,Ut),fi<at&&this.computeIntersectsForChain($r,z,j,fi,at,Ut))}},Sc.prototype.getStartIndexes=function(){return this.startIndex},Sc.prototype.computeIntersects=function(c,f){for(var b=0;b<this.startIndex.length-1;b++)for(var w=0;w<c.startIndex.length-1;w++)this.computeIntersectsForChain(b,c,w,f)},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var fa=function c(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var f=0;f<2;f++)for(var b=0;b<3;b++)this._depth[f][b]=c.NULL_VALUE},lp={NULL_VALUE:{configurable:!0}};fa.prototype.getDepth=function(c,f){return this._depth[c][f]},fa.prototype.setDepth=function(c,f,b){this._depth[c][f]=b},fa.prototype.isNull=function(){if(0===arguments.length){for(var c=0;c<2;c++)for(var f=0;f<3;f++)if(this._depth[c][f]!==fa.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===fa.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===fa.NULL_VALUE:void 0},fa.prototype.normalize=function(){for(var c=0;c<2;c++)if(!this.isNull(c)){var f=this._depth[c][1];this._depth[c][2]<f&&(f=this._depth[c][2]),f<0&&(f=0);for(var b=1;b<3;b++){var w=0;this._depth[c][b]>f&&(w=1),this._depth[c][b]=w}}},fa.prototype.getDelta=function(c){return this._depth[c][Et.RIGHT]-this._depth[c][Et.LEFT]},fa.prototype.getLocation=function(c,f){return this._depth[c][f]<=0?oe.EXTERIOR:oe.INTERIOR},fa.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},fa.prototype.add=function(){if(1===arguments.length)for(var c=arguments[0],f=0;f<2;f++)for(var b=1;b<3;b++){var w=c.getLocation(f,b);w!==oe.EXTERIOR&&w!==oe.INTERIOR||(this.isNull(f,b)?this._depth[f][b]=fa.depthAtLocation(w):this._depth[f][b]+=fa.depthAtLocation(w))}else 3===arguments.length&&arguments[2]===oe.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},fa.prototype.interfaces_=function(){return[]},fa.prototype.getClass=function(){return fa},fa.depthAtLocation=function(c){return c===oe.EXTERIOR?0:c===oe.INTERIOR?1:fa.NULL_VALUE},lp.NULL_VALUE.get=function(){return-1},Object.defineProperties(fa,lp);var Xl=function(c){function f(){if(c.call(this),this.pts=null,this._env=null,this.eiList=new Cc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new fa,this._depthDelta=0,1===arguments.length)f.call(this,arguments[0],null);else if(2===arguments.length){var M=arguments[1];this.pts=arguments[0],this._label=M}}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.getDepth=function(){return this._depth},f.prototype.getCollapsedEdge=function(){var b=new Array(2).fill(null);return b[0]=this.pts[0],b[1]=this.pts[1],new f(b,$i.toLineLabel(this._label))},f.prototype.isIsolated=function(){return this._isIsolated},f.prototype.getCoordinates=function(){return this.pts},f.prototype.setIsolated=function(b){this._isIsolated=b},f.prototype.setName=function(b){this._name=b},f.prototype.equals=function(b){if(!(b instanceof f))return!1;var w=b;if(this.pts.length!==w.pts.length)return!1;for(var M=!0,z=!0,j=this.pts.length,Ee=0;Ee<this.pts.length;Ee++)if(this.pts[Ee].equals2D(w.pts[Ee])||(M=!1),this.pts[Ee].equals2D(w.pts[--j])||(z=!1),!M&&!z)return!1;return!0},f.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},f.prototype.print=function(b){b.print("edge "+this._name+": "),b.print("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&b.print(","),b.print(this.pts[w].x+" "+this.pts[w].y);b.print(")  "+this._label+" "+this._depthDelta)},f.prototype.computeIM=function(b){f.updateIM(this._label,b)},f.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},f.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},f.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},f.prototype.getDepthDelta=function(){return this._depthDelta},f.prototype.getNumPoints=function(){return this.pts.length},f.prototype.printReverse=function(b){b.print("edge "+this._name+": ");for(var w=this.pts.length-1;w>=0;w--)b.print(this.pts[w]+" ");b.println("")},f.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Sc(this)),this._mce},f.prototype.getEnvelope=function(){if(null===this._env){this._env=new Tn;for(var b=0;b<this.pts.length;b++)this._env.expandToInclude(this.pts[b])}return this._env},f.prototype.addIntersection=function(b,w,M,z){var j=new ee(b.getIntersection(z)),Ee=w,at=b.getEdgeDistance(M,z),Ut=Ee+1;Ut<this.pts.length&&j.equals2D(this.pts[Ut])&&(Ee=Ut,at=0),this.eiList.add(j,Ee,at)},f.prototype.toString=function(){var b=new Me;b.append("edge "+this._name+": "),b.append("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&b.append(","),b.append(this.pts[w].x+" "+this.pts[w].y);return b.append(")  "+this._label+" "+this._depthDelta),b.toString()},f.prototype.isPointwiseEqual=function(b){if(this.pts.length!==b.pts.length)return!1;for(var w=0;w<this.pts.length;w++)if(!this.pts[w].equals2D(b.pts[w]))return!1;return!0},f.prototype.setDepthDelta=function(b){this._depthDelta=b},f.prototype.getEdgeIntersectionList=function(){return this.eiList},f.prototype.addIntersections=function(b,w,M){for(var z=0;z<b.getIntersectionNum();z++)this.addIntersection(b,w,M,z)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.updateIM=function(){if(2!==arguments.length)return c.prototype.updateIM.apply(this,arguments);var b=arguments[0],w=arguments[1];w.setAtLeastIfValid(b.getLocation(0,Et.ON),b.getLocation(1,Et.ON),1),b.isArea()&&(w.setAtLeastIfValid(b.getLocation(0,Et.LEFT),b.getLocation(1,Et.LEFT),2),w.setAtLeastIfValid(b.getLocation(0,Et.RIGHT),b.getLocation(1,Et.RIGHT),2))},f}(Cl),Ra=function(c){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new pn,this._bufParams=c||null};Ra.prototype.setWorkingPrecisionModel=function(c){this._workingPrecisionModel=c},Ra.prototype.insertUniqueEdge=function(c){var f=this._edgeList.findEqualEdge(c);if(null!==f){var b=f.getLabel(),w=c.getLabel();f.isPointwiseEqual(c)||(w=new $i(c.getLabel())).flip(),b.merge(w);var M=Ra.depthDelta(w),z=f.getDepthDelta()+M;f.setDepthDelta(z)}else this._edgeList.add(c),c.setDepthDelta(Ra.depthDelta(c.getLabel()))},Ra.prototype.buildSubgraphs=function(c,f){for(var b=new ct,w=c.iterator();w.hasNext();){var M=w.next(),z=M.getRightmostCoordinate(),j=new Bh(b).getDepth(z);M.computeDepth(j),M.findResultEdges(),b.add(M),f.add(M.getDirectedEdges(),M.getNodes())}},Ra.prototype.createSubgraphs=function(c){for(var f=new ct,b=c.getNodes().iterator();b.hasNext();){var w=b.next();if(!w.isVisited()){var M=new _o;M.create(w),f.add(M)}}return xi.sort(f,xi.reverseOrder()),f},Ra.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Ra.prototype.getNoder=function(c){if(null!==this._workingNoder)return this._workingNoder;var f=new xs,b=new cn;return b.setPrecisionModel(c),f.setSegmentIntersector(new rr(b)),f},Ra.prototype.buffer=function(c,f){var b=this._workingPrecisionModel;null===b&&(b=c.getPrecisionModel()),this._geomFact=c.getFactory();var w=new yl(b,this._bufParams),M=new ql(c,f,w).getCurves();if(M.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(M,b),this._graph=new Hs(new hh),this._graph.addEdges(this._edgeList.getEdges());var z=this.createSubgraphs(this._graph),j=new Ya(this._geomFact);this.buildSubgraphs(z,j);var Ee=j.getPolygons();return Ee.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Ee)},Ra.prototype.computeNodedEdges=function(c,f){var b=this.getNoder(f);b.computeNodes(c);for(var w=b.getNodedSubstrings().iterator();w.hasNext();){var M=w.next(),z=M.getCoordinates();if(2!==z.length||!z[0].equals2D(z[1])){var j=M.getData(),Ee=new Xl(M.getCoordinates(),new $i(j));this.insertUniqueEdge(Ee)}}},Ra.prototype.setNoder=function(c){this._workingNoder=c},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra},Ra.depthDelta=function(c){var f=c.getLocation(0,Et.LEFT),b=c.getLocation(0,Et.RIGHT);return f===oe.INTERIOR&&b===oe.EXTERIOR?1:f===oe.EXTERIOR&&b===oe.INTERIOR?-1:0},Ra.convertSegStrings=function(c){for(var f=new ye,b=new ct;c.hasNext();){var w=c.next(),M=f.createLineString(w.getCoordinates());b.add(M)}return f.buildGeometry(b)};var Bs=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var f=arguments[1];this._noder=arguments[0],this._scaleFactor=f,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var w=arguments[1],M=arguments[2],z=arguments[3];this._noder=arguments[0],this._scaleFactor=w,this._offsetX=M,this._offsetY=z,this._isScaled=!this.isIntegerPrecision()}};Bs.prototype.rescale=function(){if(Te(arguments[0],ke))for(var c=arguments[0].iterator();c.hasNext();){var f=c.next();this.rescale(f.getCoordinates())}else if(arguments[0]instanceof Array){for(var b=arguments[0],w=0;w<b.length;w++)b[w].x=b[w].x/this._scaleFactor+this._offsetX,b[w].y=b[w].y/this._scaleFactor+this._offsetY;2===b.length&&b[0].equals2D(b[1])&&jt.out.println(b)}},Bs.prototype.scale=function(){if(Te(arguments[0],ke)){for(var c=arguments[0],f=new ct,b=c.iterator();b.hasNext();){var w=b.next();f.add(new Ws(this.scale(w.getCoordinates()),w.getData()))}return f}if(arguments[0]instanceof Array){for(var M=arguments[0],z=new Array(M.length).fill(null),j=0;j<M.length;j++)z[j]=new ee(Math.round((M[j].x-this._offsetX)*this._scaleFactor),Math.round((M[j].y-this._offsetY)*this._scaleFactor),M[j].z);return Dt.removeRepeatedPoints(z)}},Bs.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Bs.prototype.getNodedSubstrings=function(){var c=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(c),c},Bs.prototype.computeNodes=function(c){var f=c;this._isScaled&&(f=this.scale(c)),this._noder.computeNodes(f)},Bs.prototype.interfaces_=function(){return[Tu]},Bs.prototype.getClass=function(){return Bs};var Sa=function(){this._li=new cn,this._segStrings=null,this._segStrings=arguments[0]},Po={fact:{configurable:!0}};Sa.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var c=this._segStrings.iterator();c.hasNext();){var f=c.next().getCoordinates();this.checkEndPtVertexIntersections(f[0],this._segStrings),this.checkEndPtVertexIntersections(f[f.length-1],this._segStrings)}else if(2===arguments.length)for(var b=arguments[0],w=arguments[1].iterator();w.hasNext();)for(var M=w.next().getCoordinates(),z=1;z<M.length-1;z++)if(M[z].equals(b))throw new Pe("found endpt/interior pt intersection at index "+z+" :pt "+b)},Sa.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var c=this._segStrings.iterator();c.hasNext();)for(var f=c.next(),b=this._segStrings.iterator();b.hasNext();){var w=b.next();this.checkInteriorIntersections(f,w)}else if(2===arguments.length)for(var M=arguments[0],z=arguments[1],j=M.getCoordinates(),Ee=z.getCoordinates(),at=0;at<j.length-1;at++)for(var Ut=0;Ut<Ee.length-1;Ut++)this.checkInteriorIntersections(M,at,z,Ut);else if(4===arguments.length){var gn=arguments[0],Rn=arguments[1],Ir=arguments[2],wr=arguments[3];if(gn===Ir&&Rn===wr)return null;var $r=gn.getCoordinates()[Rn],fi=gn.getCoordinates()[Rn+1],Eo=Ir.getCoordinates()[wr],vr=Ir.getCoordinates()[wr+1];if(this._li.computeIntersection($r,fi,Eo,vr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,$r,fi)||this.hasInteriorIntersection(this._li,Eo,vr)))throw new Pe("found non-noded intersection at "+$r+"-"+fi+" and "+Eo+"-"+vr)}},Sa.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Sa.prototype.checkCollapses=function(){if(0===arguments.length)for(var c=this._segStrings.iterator();c.hasNext();){var f=c.next();this.checkCollapses(f)}else if(1===arguments.length)for(var b=arguments[0].getCoordinates(),w=0;w<b.length-2;w++)this.checkCollapse(b[w],b[w+1],b[w+2])},Sa.prototype.hasInteriorIntersection=function(c,f,b){for(var w=0;w<c.getIntersectionNum();w++){var M=c.getIntersection(w);if(!M.equals(f)&&!M.equals(b))return!0}return!1},Sa.prototype.checkCollapse=function(c,f,b){if(c.equals(b))throw new Pe("found non-noded collapse at "+Sa.fact.createLineString([c,f,b]))},Sa.prototype.interfaces_=function(){return[]},Sa.prototype.getClass=function(){return Sa},Po.fact.get=function(){return new ye},Object.defineProperties(Sa,Po);var Oa=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var c=arguments[0],f=arguments[1],b=arguments[2];if(this._originalPt=c,this._pt=c,this._scaleFactor=f,this._li=b,f<=0)throw new Q("Scale factor must be non-zero");1!==f&&(this._pt=new ee(this.scale(c.x),this.scale(c.y)),this._p0Scaled=new ee,this._p1Scaled=new ee),this.initCorners(this._pt)},Ef={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Oa.prototype.intersectsScaled=function(c,f){var b=Math.min(c.x,f.x),w=Math.max(c.x,f.x),M=Math.min(c.y,f.y),z=Math.max(c.y,f.y),j=this._maxx<b||this._minx>w||this._maxy<M||this._miny>z;if(j)return!1;var Ee=this.intersectsToleranceSquare(c,f);return Se.isTrue(!(j&&Ee),"Found bad envelope test"),Ee},Oa.prototype.initCorners=function(c){this._minx=c.x-.5,this._maxx=c.x+.5,this._miny=c.y-.5,this._maxy=c.y+.5,this._corner[0]=new ee(this._maxx,this._maxy),this._corner[1]=new ee(this._minx,this._maxy),this._corner[2]=new ee(this._minx,this._miny),this._corner[3]=new ee(this._maxx,this._miny)},Oa.prototype.intersects=function(c,f){return 1===this._scaleFactor?this.intersectsScaled(c,f):(this.copyScaled(c,this._p0Scaled),this.copyScaled(f,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Oa.prototype.scale=function(c){return Math.round(c*this._scaleFactor)},Oa.prototype.getCoordinate=function(){return this._originalPt},Oa.prototype.copyScaled=function(c,f){f.x=this.scale(c.x),f.y=this.scale(c.y)},Oa.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var c=Oa.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Tn(this._originalPt.x-c,this._originalPt.x+c,this._originalPt.y-c,this._originalPt.y+c)}return this._safeEnv},Oa.prototype.intersectsPixelClosure=function(c,f){return this._li.computeIntersection(c,f,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Oa.prototype.intersectsToleranceSquare=function(c,f){var b=!1,w=!1;return this._li.computeIntersection(c,f,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(c,f,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(b=!0),this._li.computeIntersection(c,f,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(w=!0),this._li.computeIntersection(c,f,this._corner[3],this._corner[0]),this._li.isProper()||b&&w||c.equals(this._pt)||f.equals(this._pt)))))},Oa.prototype.addSnappedNode=function(c,f){var b=c.getCoordinate(f),w=c.getCoordinate(f+1);return!!this.intersects(b,w)&&(c.addIntersection(this.getCoordinate(),f),!0)},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Ef.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Oa,Ef);var Vu=function(){this.tempEnv1=new Tn,this.selectedSegment=new ii};Vu.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu};var fd=function(){this._index=null,this._index=arguments[0]},uu={HotPixelSnapAction:{configurable:!0}};fd.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var f=arguments[0],b=arguments[1],w=arguments[2],M=f.getSafeEnvelope(),z=new dh(f,b,w);return this._index.query(M,{interfaces_:function(){return[Hl]},visitItem:function(j){j.select(M,z)}}),z.isNodeAdded()}},fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd},uu.HotPixelSnapAction.get=function(){return dh},Object.defineProperties(fd,uu);var dh=function(c){function f(){c.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var w=arguments[1],M=arguments[2];this._hotPixel=arguments[0],this._parentEdge=w,this._hotPixelVertexIndex=M}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.isNodeAdded=function(){return this._isNodeAdded},f.prototype.select=function(){if(2!==arguments.length)return c.prototype.select.apply(this,arguments);var w=arguments[1],M=arguments[0].getContext();if(null!==this._parentEdge&&M===this._parentEdge&&w===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(M,w)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Vu),hu=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new ct};hu.prototype.processIntersections=function(c,f,b,w){if(c===b&&f===w)return null;var M=c.getCoordinates()[f],z=c.getCoordinates()[f+1],j=b.getCoordinates()[w],Ee=b.getCoordinates()[w+1];if(this._li.computeIntersection(M,z,j,Ee),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var at=0;at<this._li.getIntersectionNum();at++)this._interiorIntersections.add(this._li.getIntersection(at));c.addIntersections(this._li,f,0),b.addIntersections(this._li,w,1)}},hu.prototype.isDone=function(){return!1},hu.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hu.prototype.interfaces_=function(){return[Au]},hu.prototype.getClass=function(){return hu};var Gc=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var c=arguments[0];this._pm=c,this._li=new cn,this._li.setPrecisionModel(c),this._scaleFactor=c.getScale()};Gc.prototype.checkCorrectness=function(c){var f=Ws.getNodedSubstrings(c),b=new Sa(f);try{b.checkValid()}catch(w){if(!(w instanceof Pn))throw w;w.printStackTrace()}},Gc.prototype.getNodedSubstrings=function(){return Ws.getNodedSubstrings(this._nodedSegStrings)},Gc.prototype.snapRound=function(c,f){var b=this.findInteriorIntersections(c,f);this.computeIntersectionSnaps(b),this.computeVertexSnaps(c)},Gc.prototype.findInteriorIntersections=function(c,f){var b=new hu(f);return this._noder.setSegmentIntersector(b),this._noder.computeNodes(c),b.getInteriorIntersections()},Gc.prototype.computeVertexSnaps=function(){if(Te(arguments[0],ke))for(var c=arguments[0].iterator();c.hasNext();){var f=c.next();this.computeVertexSnaps(f)}else if(arguments[0]instanceof Ws)for(var b=arguments[0],w=b.getCoordinates(),M=0;M<w.length;M++){var z=new Oa(w[M],this._scaleFactor,this._li);this._pointSnapper.snap(z,b,M)&&b.addIntersection(w[M],M)}},Gc.prototype.computeNodes=function(c){this._nodedSegStrings=c,this._noder=new xs,this._pointSnapper=new fd(this._noder.getIndex()),this.snapRound(c,this._li)},Gc.prototype.computeIntersectionSnaps=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next(),w=new Oa(b,this._scaleFactor,this._li);this._pointSnapper.snap(w)}},Gc.prototype.interfaces_=function(){return[Tu]},Gc.prototype.getClass=function(){return Gc};var Ia=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new vo,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var b=arguments[1];this._argGeom=arguments[0],this._bufParams=b}},pd={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ia.prototype.bufferFixedPrecision=function(c){var f=new Bs(new Gc(new rt(1)),c.getScale()),b=new Ra(this._bufParams);b.setWorkingPrecisionModel(c),b.setNoder(f),this._resultGeometry=b.buffer(this._argGeom,this._distance)},Ia.prototype.bufferReducedPrecision=function(){var c=this;if(0===arguments.length){for(var f=Ia.MAX_PRECISION_DIGITS;f>=0;f--){try{c.bufferReducedPrecision(f)}catch(z){if(!(z instanceof ui))throw z;c._saveException=z}if(null!==c._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var w=Ia.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),M=new rt(w);this.bufferFixedPrecision(M)}},Ia.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var c=this._argGeom.getFactory().getPrecisionModel();c.getType()===rt.FIXED?this.bufferFixedPrecision(c):this.bufferReducedPrecision()},Ia.prototype.setQuadrantSegments=function(c){this._bufParams.setQuadrantSegments(c)},Ia.prototype.bufferOriginalPrecision=function(){try{var c=new Ra(this._bufParams);this._resultGeometry=c.buffer(this._argGeom,this._distance)}catch(f){if(!(f instanceof Pe))throw f;this._saveException=f}},Ia.prototype.getResultGeometry=function(c){return this._distance=c,this.computeGeometry(),this._resultGeometry},Ia.prototype.setEndCapStyle=function(c){this._bufParams.setEndCapStyle(c)},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia},Ia.bufferOp=function(){if(2===arguments.length){var f=arguments[1];return new Ia(arguments[0]).getResultGeometry(f)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof sr&&"number"==typeof arguments[1]){var w=arguments[1],M=arguments[2],z=new Ia(arguments[0]);return z.setQuadrantSegments(M),z.getResultGeometry(w)}if(arguments[2]instanceof vo&&arguments[0]instanceof sr&&"number"==typeof arguments[1]){var Ee=arguments[1];return new Ia(arguments[0],arguments[2]).getResultGeometry(Ee)}}else if(4===arguments.length){var gn=arguments[1],Rn=arguments[2],Ir=arguments[3],wr=new Ia(arguments[0]);return wr.setQuadrantSegments(Rn),wr.setEndCapStyle(Ir),wr.getResultGeometry(gn)}},Ia.precisionScaleFactor=function(c,f,b){var w=c.getEnvelopeInternal(),M=K.max(Math.abs(w.getMaxX()),Math.abs(w.getMaxY()),Math.abs(w.getMinX()),Math.abs(w.getMinY()))+2*(f>0?f:0),z=b-Math.trunc(Math.log(M)/Math.log(10)+1);return Math.pow(10,z)},pd.CAP_ROUND.get=function(){return vo.CAP_ROUND},pd.CAP_BUTT.get=function(){return vo.CAP_FLAT},pd.CAP_FLAT.get=function(){return vo.CAP_FLAT},pd.CAP_SQUARE.get=function(){return vo.CAP_SQUARE},pd.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ia,pd);var Qa=function(){this._pt=[new ee,new ee],this._distance=ne.NaN,this._isNull=!0};Qa.prototype.getCoordinates=function(){return this._pt},Qa.prototype.getCoordinate=function(c){return this._pt[c]},Qa.prototype.setMinimum=function(){if(1===arguments.length){var c=arguments[0];this.setMinimum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w<this._distance&&this.initialize(f,b,w)}},Qa.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var c=arguments[0],f=arguments[1];this._pt[0].setCoordinate(c),this._pt[1].setCoordinate(f),this._distance=c.distance(f),this._isNull=!1}else if(3===arguments.length){var w=arguments[1],M=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(w),this._distance=M,this._isNull=!1}},Qa.prototype.getDistance=function(){return this._distance},Qa.prototype.setMaximum=function(){if(1===arguments.length){var c=arguments[0];this.setMaximum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w>this._distance&&this.initialize(f,b,w)}},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa};var Zl=function(){};Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl},Zl.computeDistance=function(){if(arguments[2]instanceof Qa&&arguments[0]instanceof oi&&arguments[1]instanceof ee)for(var f=arguments[1],b=arguments[2],w=arguments[0].getCoordinates(),M=new ii,z=0;z<w.length-1;z++){M.setCoordinates(w[z],w[z+1]);var j=M.closestPoint(f);b.setMinimum(j,f)}else if(arguments[2]instanceof Qa&&arguments[0]instanceof so&&arguments[1]instanceof ee){var Ee=arguments[0],at=arguments[1],Ut=arguments[2];Zl.computeDistance(Ee.getExteriorRing(),at,Ut);for(var gn=0;gn<Ee.getNumInteriorRing();gn++)Zl.computeDistance(Ee.getInteriorRingN(gn),at,Ut)}else if(arguments[2]instanceof Qa&&arguments[0]instanceof sr&&arguments[1]instanceof ee){var Rn=arguments[0],Ir=arguments[1],wr=arguments[2];if(Rn instanceof oi)Zl.computeDistance(Rn,Ir,wr);else if(Rn instanceof so)Zl.computeDistance(Rn,Ir,wr);else if(Rn instanceof $n)for(var $r=Rn,fi=0;fi<$r.getNumGeometries();fi++){var Eo=$r.getGeometryN(fi);Zl.computeDistance(Eo,Ir,wr)}else wr.setMinimum(Rn.getCoordinate(),Ir)}else if(arguments[2]instanceof Qa&&arguments[0]instanceof ii&&arguments[1]instanceof ee){var bl=arguments[1],mu=arguments[2],qc=arguments[0].closestPoint(bl);mu.setMinimum(qc,bl)}};var Hc=function(c){this._maxPtDist=new Qa,this._inputGeom=c||null},Cf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Hc.prototype.computeMaxMidpointDistance=function(c){var f=new Mu(this._inputGeom);c.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},Hc.prototype.computeMaxVertexDistance=function(c){var f=new Uu(this._inputGeom);c.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},Hc.prototype.findDistance=function(c){return this.computeMaxVertexDistance(c),this.computeMaxMidpointDistance(c),this._maxPtDist.getDistance()},Hc.prototype.getDistancePoints=function(){return this._maxPtDist},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Cf.MaxPointDistanceFilter.get=function(){return Uu},Cf.MaxMidpointDistanceFilter.get=function(){return Mu},Object.defineProperties(Hc,Cf);var Uu=function(c){this._maxPtDist=new Qa,this._minPtDist=new Qa,this._geom=c||null};Uu.prototype.filter=function(c){this._minPtDist.initialize(),Zl.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Uu.prototype.getMaxPointDistance=function(){return this._maxPtDist},Uu.prototype.interfaces_=function(){return[Hr]},Uu.prototype.getClass=function(){return Uu};var Mu=function(c){this._maxPtDist=new Qa,this._minPtDist=new Qa,this._geom=c||null};Mu.prototype.filter=function(c,f){if(0===f)return null;var b=c.getCoordinate(f-1),w=c.getCoordinate(f),M=new ee((b.x+w.x)/2,(b.y+w.y)/2);this._minPtDist.initialize(),Zl.computeDistance(this._geom,M,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mu.prototype.isDone=function(){return!1},Mu.prototype.isGeometryChanged=function(){return!1},Mu.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mu.prototype.interfaces_=function(){return[Sn]},Mu.prototype.getClass=function(){return Mu};var sc=function(c){this._comps=c||null};sc.prototype.filter=function(c){c instanceof so&&this._comps.add(c)},sc.prototype.interfaces_=function(){return[ln]},sc.prototype.getClass=function(){return sc},sc.getPolygons=function(){if(1===arguments.length)return sc.getPolygons(arguments[0],new ct);if(2===arguments.length){var f=arguments[0],b=arguments[1];return f instanceof so?b.add(f):f instanceof $n&&f.apply(new sc(b)),b}};var ll=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var b=arguments[1];this._lines=arguments[0],this._isForcedToLineString=b}};ll.prototype.filter=function(c){if(this._isForcedToLineString&&c instanceof Lo){var f=c.getFactory().createLineString(c.getCoordinateSequence());return this._lines.add(f),null}c instanceof oi&&this._lines.add(c)},ll.prototype.setForceToLineString=function(c){this._isForcedToLineString=c},ll.prototype.interfaces_=function(){return[si]},ll.prototype.getClass=function(){return ll},ll.getGeometry=function(){if(1===arguments.length){var c=arguments[0];return c.getFactory().buildGeometry(ll.getLines(c))}if(2===arguments.length){var f=arguments[0],b=arguments[1];return f.getFactory().buildGeometry(ll.getLines(f,b))}},ll.getLines=function(){if(1===arguments.length)return ll.getLines(arguments[0],!1);if(2===arguments.length){if(Te(arguments[0],ke)&&Te(arguments[1],ke)){for(var b=arguments[1],w=arguments[0].iterator();w.hasNext();){var M=w.next();ll.getLines(M,b)}return b}if(arguments[0]instanceof sr&&"boolean"==typeof arguments[1]){var z=arguments[0],j=arguments[1],Ee=new ct;return z.apply(new ll(Ee,j)),Ee}if(arguments[0]instanceof sr&&Te(arguments[1],ke)){var at=arguments[0],Ut=arguments[1];return at instanceof oi?Ut.add(at):at.apply(new ll(Ut)),Ut}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Te(arguments[0],ke)&&Te(arguments[1],ke)){for(var Rn=arguments[1],Ir=arguments[2],wr=arguments[0].iterator();wr.hasNext();){var $r=wr.next();ll.getLines($r,Rn,Ir)}return Rn}if("boolean"==typeof arguments[2]&&arguments[0]instanceof sr&&Te(arguments[1],ke)){var Eo=arguments[1];return arguments[0].apply(new ll(Eo,arguments[2])),Eo}}};var La=function(){if(this._boundaryRule=_i.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var c=arguments[0];if(null===c)throw new Q("Rule must be non-null");this._boundaryRule=c}};La.prototype.locateInternal=function(){if(arguments[0]instanceof ee&&arguments[1]instanceof so){var c=arguments[0],f=arguments[1];if(f.isEmpty())return oe.EXTERIOR;var b=f.getExteriorRing(),w=this.locateInPolygonRing(c,b);if(w===oe.EXTERIOR)return oe.EXTERIOR;if(w===oe.BOUNDARY)return oe.BOUNDARY;for(var M=0;M<f.getNumInteriorRing();M++){var z=f.getInteriorRingN(M),j=this.locateInPolygonRing(c,z);if(j===oe.INTERIOR)return oe.EXTERIOR;if(j===oe.BOUNDARY)return oe.BOUNDARY}return oe.INTERIOR}if(arguments[0]instanceof ee&&arguments[1]instanceof oi){var Ee=arguments[0],at=arguments[1];if(!at.getEnvelopeInternal().intersects(Ee))return oe.EXTERIOR;var Ut=at.getCoordinates();return at.isClosed()||!Ee.equals(Ut[0])&&!Ee.equals(Ut[Ut.length-1])?vn.isOnLine(Ee,Ut)?oe.INTERIOR:oe.EXTERIOR:oe.BOUNDARY}if(arguments[0]instanceof ee&&arguments[1]instanceof Vi){var gn=arguments[0];return arguments[1].getCoordinate().equals2D(gn)?oe.INTERIOR:oe.EXTERIOR}},La.prototype.locateInPolygonRing=function(c,f){return f.getEnvelopeInternal().intersects(c)?vn.locatePointInRing(c,f.getCoordinates()):oe.EXTERIOR},La.prototype.intersects=function(c,f){return this.locate(c,f)!==oe.EXTERIOR},La.prototype.updateLocationInfo=function(c){c===oe.INTERIOR&&(this._isIn=!0),c===oe.BOUNDARY&&this._numBoundaries++},La.prototype.computeLocation=function(c,f){if(f instanceof Vi&&this.updateLocationInfo(this.locateInternal(c,f)),f instanceof oi)this.updateLocationInfo(this.locateInternal(c,f));else if(f instanceof so)this.updateLocationInfo(this.locateInternal(c,f));else if(f instanceof Yn)for(var b=f,w=0;w<b.getNumGeometries();w++){var M=b.getGeometryN(w);this.updateLocationInfo(this.locateInternal(c,M))}else if(f instanceof no)for(var z=f,j=0;j<z.getNumGeometries();j++){var Ee=z.getGeometryN(j);this.updateLocationInfo(this.locateInternal(c,Ee))}else if(f instanceof $n)for(var at=new Nl(f);at.hasNext();){var Ut=at.next();Ut!==f&&this.computeLocation(c,Ut)}},La.prototype.locate=function(c,f){return f.isEmpty()?oe.EXTERIOR:f instanceof oi||f instanceof so?this.locateInternal(c,f):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(c,f),this._boundaryRule.isInBoundary(this._numBoundaries)?oe.BOUNDARY:this._numBoundaries>0||this._isIn?oe.INTERIOR:oe.EXTERIOR)},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La};var Il=function c(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)c.call(this,arguments[0],c.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var M=arguments[1],z=arguments[2];this._component=arguments[0],this._segIndex=M,this._pt=z}},cm={INSIDE_AREA:{configurable:!0}};Il.prototype.isInsideArea=function(){return this._segIndex===Il.INSIDE_AREA},Il.prototype.getCoordinate=function(){return this._pt},Il.prototype.getGeometryComponent=function(){return this._component},Il.prototype.getSegmentIndex=function(){return this._segIndex},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il},cm.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Il,cm);var fh=function(c){this._pts=c||null};fh.prototype.filter=function(c){c instanceof Vi&&this._pts.add(c)},fh.prototype.interfaces_=function(){return[ln]},fh.prototype.getClass=function(){return fh},fh.getPoints=function(){if(1===arguments.length){var c=arguments[0];return c instanceof Vi?xi.singletonList(c):fh.getPoints(c,new ct)}if(2===arguments.length){var f=arguments[0],b=arguments[1];return f instanceof Vi?b.add(f):f instanceof $n&&f.apply(new fh(b)),b}};var zh=function(){this._locations=null,this._locations=arguments[0]};zh.prototype.filter=function(c){(c instanceof Vi||c instanceof oi||c instanceof so)&&this._locations.add(new Il(c,0,c.getCoordinate()))},zh.prototype.interfaces_=function(){return[ln]},zh.prototype.getClass=function(){return zh},zh.getLocations=function(c){var f=new ct;return c.apply(new zh(f)),f};var Na=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new La,this._minDistanceLocation=null,this._minDistance=ne.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var b=arguments[0],w=arguments[1],M=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=b,this._geom[1]=w,this._terminateDistance=M}};Na.prototype.computeContainmentDistance=function(){if(0===arguments.length){var c=new Array(2).fill(null);if(this.computeContainmentDistance(0,c),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,c)}else if(2===arguments.length){var f=arguments[0],b=arguments[1],w=1-f,M=sc.getPolygons(this._geom[f]);if(M.size()>0){var z=zh.getLocations(this._geom[w]);if(this.computeContainmentDistance(z,M,b),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[w]=b[0],this._minDistanceLocation[f]=b[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Te(arguments[0],It)&&Te(arguments[1],It)){for(var j=arguments[0],Ee=arguments[1],at=arguments[2],Ut=0;Ut<j.size();Ut++)for(var gn=j.get(Ut),Rn=0;Rn<Ee.size();Rn++)if(this.computeContainmentDistance(gn,Ee.get(Rn),at),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Il&&arguments[1]instanceof so){var Ir=arguments[0],wr=arguments[1],$r=arguments[2],fi=Ir.getCoordinate();if(oe.EXTERIOR!==this._ptLocator.locate(fi,wr))return this._minDistance=0,$r[0]=Ir,$r[1]=new Il(wr,fi),null}},Na.prototype.computeMinDistanceLinesPoints=function(c,f,b){for(var w=0;w<c.size();w++)for(var M=c.get(w),z=0;z<f.size();z++){var j=f.get(z);if(this.computeMinDistance(M,j,b),this._minDistance<=this._terminateDistance)return null}},Na.prototype.computeFacetDistance=function(){var c=new Array(2).fill(null),f=ll.getLines(this._geom[0]),b=ll.getLines(this._geom[1]),w=fh.getPoints(this._geom[0]),M=fh.getPoints(this._geom[1]);return this.computeMinDistanceLines(f,b,c),this.updateMinDistance(c,!1),this._minDistance<=this._terminateDistance?null:(c[0]=null,c[1]=null,this.computeMinDistanceLinesPoints(f,M,c),this.updateMinDistance(c,!1),this._minDistance<=this._terminateDistance?null:(c[0]=null,c[1]=null,this.computeMinDistanceLinesPoints(b,w,c),this.updateMinDistance(c,!0),this._minDistance<=this._terminateDistance?null:(c[0]=null,c[1]=null,this.computeMinDistancePoints(w,M,c),void this.updateMinDistance(c,!1))))},Na.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Na.prototype.updateMinDistance=function(c,f){if(null===c[0])return null;f?(this._minDistanceLocation[0]=c[1],this._minDistanceLocation[1]=c[0]):(this._minDistanceLocation[0]=c[0],this._minDistanceLocation[1]=c[1])},Na.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Na.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof oi&&arguments[1]instanceof Vi){var c=arguments[0],f=arguments[1],b=arguments[2];if(c.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var w=c.getCoordinates(),M=f.getCoordinate(),z=0;z<w.length-1;z++){var j=vn.distancePointLine(M,w[z],w[z+1]);if(j<this._minDistance){this._minDistance=j;var Ee=new ii(w[z],w[z+1]).closestPoint(M);b[0]=new Il(c,z,Ee),b[1]=new Il(f,0,M)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof oi&&arguments[1]instanceof oi){var at=arguments[0],Ut=arguments[1],gn=arguments[2];if(at.getEnvelopeInternal().distance(Ut.getEnvelopeInternal())>this._minDistance)return null;for(var Rn=at.getCoordinates(),Ir=Ut.getCoordinates(),wr=0;wr<Rn.length-1;wr++)for(var $r=0;$r<Ir.length-1;$r++){var fi=vn.distanceLineLine(Rn[wr],Rn[wr+1],Ir[$r],Ir[$r+1]);if(fi<this._minDistance){this._minDistance=fi;var Eo=new ii(Rn[wr],Rn[wr+1]),vr=new ii(Ir[$r],Ir[$r+1]),bl=Eo.closestPoints(vr);gn[0]=new Il(at,wr,bl[0]),gn[1]=new Il(Ut,$r,bl[1])}if(this._minDistance<=this._terminateDistance)return null}}},Na.prototype.computeMinDistancePoints=function(c,f,b){for(var w=0;w<c.size();w++)for(var M=c.get(w),z=0;z<f.size();z++){var j=f.get(z),Ee=M.getCoordinate().distance(j.getCoordinate());if(Ee<this._minDistance&&(this._minDistance=Ee,b[0]=new Il(M,0,M.getCoordinate()),b[1]=new Il(j,0,j.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Na.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Q("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Na.prototype.computeMinDistanceLines=function(c,f,b){for(var w=0;w<c.size();w++)for(var M=c.get(w),z=0;z<f.size();z++){var j=f.get(z);if(this.computeMinDistance(M,j,b),this._minDistance<=this._terminateDistance)return null}},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na},Na.distance=function(c,f){return new Na(c,f).distance()},Na.isWithinDistance=function(c,f,b){return new Na(c,f,b).distance()<=b},Na.nearestPoints=function(c,f){return new Na(c,f).nearestPoints()};var Ta=function(){this._pt=[new ee,new ee],this._distance=ne.NaN,this._isNull=!0};Ta.prototype.getCoordinates=function(){return this._pt},Ta.prototype.getCoordinate=function(c){return this._pt[c]},Ta.prototype.setMinimum=function(){if(1===arguments.length){var c=arguments[0];this.setMinimum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w<this._distance&&this.initialize(f,b,w)}},Ta.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var c=arguments[0],f=arguments[1];this._pt[0].setCoordinate(c),this._pt[1].setCoordinate(f),this._distance=c.distance(f),this._isNull=!1}else if(3===arguments.length){var w=arguments[1],M=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(w),this._distance=M,this._isNull=!1}},Ta.prototype.toString=function(){return Pt.toLineString(this._pt[0],this._pt[1])},Ta.prototype.getDistance=function(){return this._distance},Ta.prototype.setMaximum=function(){if(1===arguments.length){var c=arguments[0];this.setMaximum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w>this._distance&&this.initialize(f,b,w)}},Ta.prototype.interfaces_=function(){return[]},Ta.prototype.getClass=function(){return Ta};var Ic=function(){};Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.computeDistance=function(){if(arguments[2]instanceof Ta&&arguments[0]instanceof oi&&arguments[1]instanceof ee)for(var c=arguments[0],f=arguments[1],b=arguments[2],w=new ii,M=c.getCoordinates(),z=0;z<M.length-1;z++){w.setCoordinates(M[z],M[z+1]);var j=w.closestPoint(f);b.setMinimum(j,f)}else if(arguments[2]instanceof Ta&&arguments[0]instanceof so&&arguments[1]instanceof ee){var Ee=arguments[0],at=arguments[1],Ut=arguments[2];Ic.computeDistance(Ee.getExteriorRing(),at,Ut);for(var gn=0;gn<Ee.getNumInteriorRing();gn++)Ic.computeDistance(Ee.getInteriorRingN(gn),at,Ut)}else if(arguments[2]instanceof Ta&&arguments[0]instanceof sr&&arguments[1]instanceof ee){var Rn=arguments[0],Ir=arguments[1],wr=arguments[2];if(Rn instanceof oi)Ic.computeDistance(Rn,Ir,wr);else if(Rn instanceof so)Ic.computeDistance(Rn,Ir,wr);else if(Rn instanceof $n)for(var $r=Rn,fi=0;fi<$r.getNumGeometries();fi++){var Eo=$r.getGeometryN(fi);Ic.computeDistance(Eo,Ir,wr)}else wr.setMinimum(Rn.getCoordinate(),Ir)}else if(arguments[2]instanceof Ta&&arguments[0]instanceof ii&&arguments[1]instanceof ee){var bl=arguments[1],mu=arguments[2],qc=arguments[0].closestPoint(bl);mu.setMinimum(qc,bl)}};var ac=function(){this._g0=null,this._g1=null,this._ptDist=new Ta,this._densifyFrac=0;var f=arguments[1];this._g0=arguments[0],this._g1=f},Pu={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ac.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},ac.prototype.setDensifyFraction=function(c){if(c>1||c<=0)throw new Q("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=c},ac.prototype.compute=function(c,f){this.computeOrientedDistance(c,f,this._ptDist),this.computeOrientedDistance(f,c,this._ptDist)},ac.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},ac.prototype.computeOrientedDistance=function(c,f,b){var w=new ju(f);if(c.apply(w),b.setMaximum(w.getMaxPointDistance()),this._densifyFrac>0){var M=new Zn(f,this._densifyFrac);c.apply(M),b.setMaximum(M.getMaxPointDistance())}},ac.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.distance=function(){if(2===arguments.length)return new ac(arguments[0],arguments[1]).distance();if(3===arguments.length){var M=arguments[2],z=new ac(arguments[0],arguments[1]);return z.setDensifyFraction(M),z.distance()}},Pu.MaxPointDistanceFilter.get=function(){return ju},Pu.MaxDensifiedByFractionDistanceFilter.get=function(){return Zn},Object.defineProperties(ac,Pu);var ju=function(){this._maxPtDist=new Ta,this._minPtDist=new Ta,this._euclideanDist=new Ic,this._geom=null,this._geom=arguments[0]};ju.prototype.filter=function(c){this._minPtDist.initialize(),Ic.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ju.prototype.getMaxPointDistance=function(){return this._maxPtDist},ju.prototype.interfaces_=function(){return[Hr]},ju.prototype.getClass=function(){return ju};var Zn=function(){this._maxPtDist=new Ta,this._minPtDist=new Ta,this._geom=null,this._numSubSegs=0;var f=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/f))};Zn.prototype.filter=function(c,f){if(0===f)return null;for(var b=c.getCoordinate(f-1),w=c.getCoordinate(f),M=(w.x-b.x)/this._numSubSegs,z=(w.y-b.y)/this._numSubSegs,j=0;j<this._numSubSegs;j++){var Ut=new ee(b.x+j*M,b.y+j*z);this._minPtDist.initialize(),Ic.computeDistance(this._geom,Ut,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Zn.prototype.isDone=function(){return!1},Zn.prototype.isGeometryChanged=function(){return!1},Zn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zn.prototype.interfaces_=function(){return[Sn]},Zn.prototype.getClass=function(){return Zn};var cl=function(c,f,b){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=c||null,this._bufDistance=f||null,this._result=b||null},cp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};cl.prototype.checkMaximumDistance=function(c,f,b){var w=new ac(f,c);if(w.setDensifyFraction(.25),this._maxDistanceFound=w.orientedDistance(),this._maxDistanceFound>b){this._isValid=!1;var M=w.getCoordinates();this._errorLocation=M[1],this._errorIndicator=c.getFactory().createLineString(M),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Pt.toLineString(M[0],M[1])+")"}},cl.prototype.isValid=function(){var c=Math.abs(this._bufDistance),f=cl.MAX_DISTANCE_DIFF_FRAC*c;return this._minValidDistance=c-f,this._maxValidDistance=c+f,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),cl.VERBOSE&&jt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},cl.prototype.checkNegativeValid=function(){if(!(this._input instanceof so||this._input instanceof no||this._input instanceof $n))return null;var c=this.getPolygonLines(this._input);if(this.checkMinimumDistance(c,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(c,this._result,this._maxValidDistance)},cl.prototype.getErrorIndicator=function(){return this._errorIndicator},cl.prototype.checkMinimumDistance=function(c,f,b){var w=new Na(c,f,b);if(this._minDistanceFound=w.distance(),this._minDistanceFound<b){this._isValid=!1;var M=w.nearestPoints();this._errorLocation=w.nearestPoints()[1],this._errorIndicator=c.getFactory().createLineString(M),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Pt.toLineString(M[0],M[1])+" )"}},cl.prototype.checkPositiveValid=function(){var c=this._result.getBoundary();if(this.checkMinimumDistance(this._input,c,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,c,this._maxValidDistance)},cl.prototype.getErrorLocation=function(){return this._errorLocation},cl.prototype.getPolygonLines=function(c){for(var f=new ct,b=new ll(f),w=sc.getPolygons(c).iterator();w.hasNext();)w.next().apply(b);return c.getFactory().buildGeometry(f)},cl.prototype.getErrorMessage=function(){return this._errMsg},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},cp.VERBOSE.get=function(){return!1},cp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(cl,cp);var ra=function(c,f,b){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=c||null,this._distance=f||null,this._result=b||null},wo={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ra.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ra.prototype.checkEnvelope=function(){if(this._distance<0)return null;var c=this._distance*ra.MAX_ENV_DIFF_FRAC;0===c&&(c=.001);var f=new Tn(this._input.getEnvelopeInternal());f.expandBy(this._distance);var b=new Tn(this._result.getEnvelopeInternal());b.expandBy(c),b.contains(f)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(b)),this.report("Envelope")},ra.prototype.checkDistance=function(){var c=new cl(this._input,this._distance,this._result);c.isValid()||(this._isValid=!1,this._errorMsg=c.getErrorMessage(),this._errorLocation=c.getErrorLocation(),this._errorIndicator=c.getErrorIndicator()),this.report("Distance")},ra.prototype.checkArea=function(){var c=this._input.getArea(),f=this._result.getArea();this._distance>0&&c>f&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&c<f&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ra.prototype.checkPolygonal=function(){this._result instanceof so||this._result instanceof no||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ra.prototype.getErrorIndicator=function(){return this._errorIndicator},ra.prototype.getErrorLocation=function(){return this._errorLocation},ra.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ra.prototype.report=function(c){if(!ra.VERBOSE)return null;jt.out.println("Check "+c+": "+(this._isValid?"passed":"FAILED"))},ra.prototype.getErrorMessage=function(){return this._errorMsg},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra},ra.isValidMsg=function(c,f,b){var w=new ra(c,f,b);return w.isValid()?null:w.getErrorMessage()},ra.isValid=function(c,f,b){return!!new ra(c,f,b).isValid()},wo.VERBOSE.get=function(){return!1},wo.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ra,wo);var lc=function(){this._pts=null,this._data=null;var f=arguments[1];this._pts=arguments[0],this._data=f};lc.prototype.getCoordinates=function(){return this._pts},lc.prototype.size=function(){return this._pts.length},lc.prototype.getCoordinate=function(c){return this._pts[c]},lc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},lc.prototype.getSegmentOctant=function(c){return c===this._pts.length-1?-1:Iu.octant(this.getCoordinate(c),this.getCoordinate(c+1))},lc.prototype.setData=function(c){this._data=c},lc.prototype.getData=function(){return this._data},lc.prototype.toString=function(){return Pt.toLineString(new Mo(this._pts))},lc.prototype.interfaces_=function(){return[Ol]},lc.prototype.getClass=function(){return lc};var pa=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ct,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};pa.prototype.getInteriorIntersection=function(){return this._interiorIntersection},pa.prototype.setCheckEndSegmentsOnly=function(c){this._isCheckEndSegmentsOnly=c},pa.prototype.getIntersectionSegments=function(){return this._intSegments},pa.prototype.count=function(){return this._intersectionCount},pa.prototype.getIntersections=function(){return this._intersections},pa.prototype.setFindAllIntersections=function(c){this._findAllIntersections=c},pa.prototype.setKeepIntersections=function(c){this._keepIntersections=c},pa.prototype.processIntersections=function(c,f,b,w){if(!this._findAllIntersections&&this.hasIntersection()||c===b&&f===w||this._isCheckEndSegmentsOnly&&!this.isEndSegment(c,f)&&!this.isEndSegment(b,w))return null;var M=c.getCoordinates()[f],z=c.getCoordinates()[f+1],j=b.getCoordinates()[w],Ee=b.getCoordinates()[w+1];this._li.computeIntersection(M,z,j,Ee),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=M,this._intSegments[1]=z,this._intSegments[2]=j,this._intSegments[3]=Ee,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},pa.prototype.isEndSegment=function(c,f){return 0===f||f>=c.size()-2},pa.prototype.hasIntersection=function(){return null!==this._interiorIntersection},pa.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},pa.prototype.interfaces_=function(){return[Au]},pa.prototype.getClass=function(){return pa},pa.createAllIntersectionsFinder=function(c){var f=new pa(c);return f.setFindAllIntersections(!0),f},pa.createAnyIntersectionFinder=function(c){return new pa(c)},pa.createIntersectionCounter=function(c){var f=new pa(c);return f.setFindAllIntersections(!0),f.setKeepIntersections(!1),f};var Kn=function(){this._li=new cn,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};Kn.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Kn.prototype.getIntersections=function(){return this._segInt.getIntersections()},Kn.prototype.isValid=function(){return this.execute(),this._isValid},Kn.prototype.setFindAllIntersections=function(c){this._findAllIntersections=c},Kn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new pa(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var c=new xs;if(c.setSegmentIntersector(this._segInt),c.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Kn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ui(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Kn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var c=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Pt.toLineString(c[0],c[1])+" and "+Pt.toLineString(c[2],c[3])},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.computeIntersections=function(c){var f=new Kn(c);return f.setFindAllIntersections(!0),f.isValid(),f.getIntersections()};var ma=function c(){this._nv=null,this._nv=new Kn(c.toSegmentStrings(arguments[0]))};ma.prototype.checkValid=function(){this._nv.checkValid()},ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.toSegmentStrings=function(c){for(var f=new ct,b=c.iterator();b.hasNext();){var w=b.next();f.add(new lc(w.getCoordinates(),w))}return f},ma.checkValid=function(c){new ma(c).checkValid()};var po=function(c){this._mapOp=c};po.prototype.map=function(c){for(var f=new ct,b=0;b<c.getNumGeometries();b++){var w=this._mapOp.map(c.getGeometryN(b));w.isEmpty()||f.add(w)}return c.getFactory().createGeometryCollection(ye.toGeometryArray(f))},po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po},po.map=function(c,f){return new po(f).map(c)};var ws=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ct,this._resultLineList=new ct;var f=arguments[1],b=arguments[2];this._op=arguments[0],this._geometryFactory=f,this._ptLocator=b};ws.prototype.collectLines=function(c){for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var b=f.next();this.collectLineEdge(b,c,this._lineEdgesList),this.collectBoundaryTouchEdge(b,c,this._lineEdgesList)}},ws.prototype.labelIsolatedLine=function(c,f){var b=this._ptLocator.locate(c.getCoordinate(),this._op.getArgGeometry(f));c.getLabel().setLocation(f,b)},ws.prototype.build=function(c){return this.findCoveredLineEdges(),this.collectLines(c),this.buildLines(c),this._resultLineList},ws.prototype.collectLineEdge=function(c,f,b){var w=c.getLabel(),M=c.getEdge();c.isLineEdge()&&(c.isVisited()||!Mr.isResultOfOp(w,f)||M.isCovered()||(b.add(M),c.setVisitedEdge(!0)))},ws.prototype.findCoveredLineEdges=function(){for(var c=this._op.getGraph().getNodes().iterator();c.hasNext();)c.next().getEdges().findCoveredLineEdges();for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var b=f.next(),w=b.getEdge();if(b.isLineEdge()&&!w.isCoveredSet()){var M=this._op.isCoveredByA(b.getCoordinate());w.setCovered(M)}}},ws.prototype.labelIsolatedLines=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next(),w=b.getLabel();b.isIsolated()&&(w.isNull(0)?this.labelIsolatedLine(b,0):this.labelIsolatedLine(b,1))}},ws.prototype.buildLines=function(c){for(var f=this._lineEdgesList.iterator();f.hasNext();){var b=f.next(),w=this._geometryFactory.createLineString(b.getCoordinates());this._resultLineList.add(w),b.setInResult(!0)}},ws.prototype.collectBoundaryTouchEdge=function(c,f,b){var w=c.getLabel();return c.isLineEdge()||c.isVisited()||c.isInteriorAreaEdge()||c.getEdge().isInResult()?null:(Se.isTrue(!(c.isInResult()||c.getSym().isInResult())||!c.getEdge().isInResult()),void(Mr.isResultOfOp(w,f)&&f===Mr.INTERSECTION&&(b.add(c.getEdge()),c.setVisitedEdge(!0))))},ws.prototype.interfaces_=function(){return[]},ws.prototype.getClass=function(){return ws};var ia=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new ct;var f=arguments[1];this._op=arguments[0],this._geometryFactory=f};ia.prototype.filterCoveredNodeToPoint=function(c){var f=c.getCoordinate();if(!this._op.isCoveredByLA(f)){var b=this._geometryFactory.createPoint(f);this._resultPointList.add(b)}},ia.prototype.extractNonCoveredResultNodes=function(c){for(var f=this._op.getGraph().getNodes().iterator();f.hasNext();){var b=f.next();if(!(b.isInResult()||b.isIncidentEdgeInResult()||0!==b.getEdges().getDegree()&&c!==Mr.INTERSECTION)){var w=b.getLabel();Mr.isResultOfOp(w,c)&&this.filterCoveredNodeToPoint(b)}}},ia.prototype.build=function(c){return this.extractNonCoveredResultNodes(c),this._resultPointList},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia};var Fa=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Fa.prototype.transformPoint=function(c,f){return this._factory.createPoint(this.transformCoordinates(c.getCoordinateSequence(),c))},Fa.prototype.transformPolygon=function(c,f){var b=!0,w=this.transformLinearRing(c.getExteriorRing(),c);null!==w&&w instanceof Lo&&!w.isEmpty()||(b=!1);for(var M=new ct,z=0;z<c.getNumInteriorRing();z++){var j=this.transformLinearRing(c.getInteriorRingN(z),c);null===j||j.isEmpty()||(j instanceof Lo||(b=!1),M.add(j))}if(b)return this._factory.createPolygon(w,M.toArray([]));var Ee=new ct;return null!==w&&Ee.add(w),Ee.addAll(M),this._factory.buildGeometry(Ee)},Fa.prototype.createCoordinateSequence=function(c){return this._factory.getCoordinateSequenceFactory().create(c)},Fa.prototype.getInputGeometry=function(){return this._inputGeom},Fa.prototype.transformMultiLineString=function(c,f){for(var b=new ct,w=0;w<c.getNumGeometries();w++){var M=this.transformLineString(c.getGeometryN(w),c);null!==M&&(M.isEmpty()||b.add(M))}return this._factory.buildGeometry(b)},Fa.prototype.transformCoordinates=function(c,f){return this.copy(c)},Fa.prototype.transformLineString=function(c,f){return this._factory.createLineString(this.transformCoordinates(c.getCoordinateSequence(),c))},Fa.prototype.transformMultiPoint=function(c,f){for(var b=new ct,w=0;w<c.getNumGeometries();w++){var M=this.transformPoint(c.getGeometryN(w),c);null!==M&&(M.isEmpty()||b.add(M))}return this._factory.buildGeometry(b)},Fa.prototype.transformMultiPolygon=function(c,f){for(var b=new ct,w=0;w<c.getNumGeometries();w++){var M=this.transformPolygon(c.getGeometryN(w),c);null!==M&&(M.isEmpty()||b.add(M))}return this._factory.buildGeometry(b)},Fa.prototype.copy=function(c){return c.copy()},Fa.prototype.transformGeometryCollection=function(c,f){for(var b=new ct,w=0;w<c.getNumGeometries();w++){var M=this.transform(c.getGeometryN(w));null!==M&&(this._pruneEmptyGeometry&&M.isEmpty()||b.add(M))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(b)):this._factory.buildGeometry(b)},Fa.prototype.transform=function(c){if(this._inputGeom=c,this._factory=c.getFactory(),c instanceof Vi)return this.transformPoint(c,null);if(c instanceof Ns)return this.transformMultiPoint(c,null);if(c instanceof Lo)return this.transformLinearRing(c,null);if(c instanceof oi)return this.transformLineString(c,null);if(c instanceof Yn)return this.transformMultiLineString(c,null);if(c instanceof so)return this.transformPolygon(c,null);if(c instanceof no)return this.transformMultiPolygon(c,null);if(c instanceof $n)return this.transformGeometryCollection(c,null);throw new Q("Unknown Geometry subtype: "+c.getClass().getName())},Fa.prototype.transformLinearRing=function(c,f){var b=this.transformCoordinates(c.getCoordinateSequence(),c);if(null===b)return this._factory.createLinearRing(null);var w=b.size();return w>0&&w<4&&!this._preserveType?this._factory.createLineString(b):this._factory.createLinearRing(b)},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa};var oa=function c(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ii,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof oi&&"number"==typeof arguments[1]){var b=arguments[1];c.call(this,arguments[0].getCoordinates(),b)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var w=arguments[0],M=arguments[1];this._srcPts=w,this._isClosed=c.isClosed(w),this._snapTolerance=M}};oa.prototype.snapVertices=function(c,f){for(var b=this._isClosed?c.size()-1:c.size(),w=0;w<b;w++){var M=c.get(w),z=this.findSnapForVertex(M,f);null!==z&&(c.set(w,new ee(z)),0===w&&this._isClosed&&c.set(c.size()-1,new ee(z)))}},oa.prototype.findSnapForVertex=function(c,f){for(var b=0;b<f.length;b++){if(c.equals2D(f[b]))return null;if(c.distance(f[b])<this._snapTolerance)return f[b]}return null},oa.prototype.snapTo=function(c){var f=new Qt(this._srcPts);return this.snapVertices(f,c),this.snapSegments(f,c),f.toCoordinateArray()},oa.prototype.snapSegments=function(c,f){if(0===f.length)return null;var b=f.length;f[0].equals2D(f[f.length-1])&&(b=f.length-1);for(var w=0;w<b;w++){var M=f[w],z=this.findSegmentIndexToSnap(M,c);z>=0&&c.add(z+1,new ee(M),!1)}},oa.prototype.findSegmentIndexToSnap=function(c,f){for(var b=ne.MAX_VALUE,w=-1,M=0;M<f.size()-1;M++){if(this._seg.p0=f.get(M),this._seg.p1=f.get(M+1),this._seg.p0.equals2D(c)||this._seg.p1.equals2D(c)){if(this._allowSnappingToSourceVertices)continue;return-1}var z=this._seg.distance(c);z<this._snapTolerance&&z<b&&(b=z,w=M)}return w},oa.prototype.setAllowSnappingToSourceVertices=function(c){this._allowSnappingToSourceVertices=c},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa},oa.isClosed=function(c){return!(c.length<=1)&&c[0].equals2D(c[c.length-1])};var No=function(c){this._srcGeom=c||null},up={SNAP_PRECISION_FACTOR:{configurable:!0}};No.prototype.snapTo=function(c,f){var b=this.extractTargetCoordinates(c);return new $h(f,b).transform(this._srcGeom)},No.prototype.snapToSelf=function(c,f){var b=this.extractTargetCoordinates(this._srcGeom),w=new $h(c,b,!0).transform(this._srcGeom),M=w;return f&&Te(M,So)&&(M=w.buffer(0)),M},No.prototype.computeSnapTolerance=function(c){return this.computeMinimumSegmentLength(c)/10},No.prototype.extractTargetCoordinates=function(c){for(var f=new He,b=c.getCoordinates(),w=0;w<b.length;w++)f.add(b[w]);return f.toArray(new Array(0).fill(null))},No.prototype.computeMinimumSegmentLength=function(c){for(var f=ne.MAX_VALUE,b=0;b<c.length-1;b++){var w=c[b].distance(c[b+1]);w<f&&(f=w)}return f},No.prototype.interfaces_=function(){return[]},No.prototype.getClass=function(){return No},No.snap=function(c,f,b){var w=new Array(2).fill(null),M=new No(c);w[0]=M.snapTo(f,b);var z=new No(f);return w[1]=z.snapTo(w[0],b),w},No.computeOverlaySnapTolerance=function(){if(1===arguments.length){var c=arguments[0],f=No.computeSizeBasedSnapTolerance(c),b=c.getPrecisionModel();if(b.getType()===rt.FIXED){var w=1/b.getScale()*2/1.415;w>f&&(f=w)}return f}if(2===arguments.length){var z=arguments[1];return Math.min(No.computeOverlaySnapTolerance(arguments[0]),No.computeOverlaySnapTolerance(z))}},No.computeSizeBasedSnapTolerance=function(c){var f=c.getEnvelopeInternal();return Math.min(f.getHeight(),f.getWidth())*No.SNAP_PRECISION_FACTOR},No.snapToSelf=function(c,f,b){return new No(c).snapToSelf(f,b)},up.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(No,up);var $h=function(c){function f(b,w,M){c.call(this),this._snapTolerance=b||null,this._snapPts=w||null,this._isSelfSnap=void 0!==M&&M}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.snapLine=function(b,w){var M=new oa(b,this._snapTolerance);return M.setAllowSnappingToSourceVertices(this._isSelfSnap),M.snapTo(w)},f.prototype.transformCoordinates=function(b,w){var M=b.toCoordinateArray(),z=this.snapLine(M,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(z)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Fa),Ba=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Ba.prototype.getCommon=function(){return ne.longBitsToDouble(this._commonBits)},Ba.prototype.add=function(c){var f=ne.doubleToLongBits(c);return this._isFirst?(this._commonBits=f,this._commonSignExp=Ba.signExpBits(this._commonBits),this._isFirst=!1,null):Ba.signExpBits(f)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Ba.numCommonMostSigMantissaBits(this._commonBits,f),void(this._commonBits=Ba.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Ba.prototype.toString=function(){if(1===arguments.length){var c=arguments[0],f=ne.longBitsToDouble(c),b="0000000000000000000000000000000000000000000000000000000000000000"+ne.toBinaryString(c),w=b.substring(b.length-64);return w.substring(0,1)+"  "+w.substring(1,12)+"(exp) "+w.substring(12)+" [ "+f+" ]"}},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba},Ba.getBit=function(c,f){return c&1<<f?1:0},Ba.signExpBits=function(c){return c>>52},Ba.zeroLowerBits=function(c,f){return c&~((1<<f)-1)},Ba.numCommonMostSigMantissaBits=function(c,f){for(var b=0,w=52;w>=0;w--){if(Ba.getBit(c,w)!==Ba.getBit(f,w))return b;b++}return 52};var Tc=function(){this._commonCoord=null,this._ccFilter=new Fr},sa={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Tc.prototype.addCommonBits=function(c){var f=new Ri(this._commonCoord);c.apply(f),c.geometryChanged()},Tc.prototype.removeCommonBits=function(c){if(0===this._commonCoord.x&&0===this._commonCoord.y)return c;var f=new ee(this._commonCoord);f.x=-f.x,f.y=-f.y;var b=new Ri(f);return c.apply(b),c.geometryChanged(),c},Tc.prototype.getCommonCoordinate=function(){return this._commonCoord},Tc.prototype.add=function(c){c.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},sa.CommonCoordinateFilter.get=function(){return Fr},sa.Translater.get=function(){return Ri},Object.defineProperties(Tc,sa);var Fr=function(){this._commonBitsX=new Ba,this._commonBitsY=new Ba};Fr.prototype.filter=function(c){this._commonBitsX.add(c.x),this._commonBitsY.add(c.y)},Fr.prototype.getCommonCoordinate=function(){return new ee(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Fr.prototype.interfaces_=function(){return[Hr]},Fr.prototype.getClass=function(){return Fr};var Ri=function(){this.trans=null,this.trans=arguments[0]};Ri.prototype.filter=function(c,f){var b=c.getOrdinate(f,0)+this.trans.x,w=c.getOrdinate(f,1)+this.trans.y;c.setOrdinate(f,0,b),c.setOrdinate(f,1,w)},Ri.prototype.isDone=function(){return!1},Ri.prototype.isGeometryChanged=function(){return!0},Ri.prototype.interfaces_=function(){return[Sn]},Ri.prototype.getClass=function(){return Ri};var Wi=function(c,f){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=c,this._geom[1]=f,this.computeSnapTolerance()};Wi.prototype.selfSnap=function(c){return new No(c).snapTo(c,this._snapTolerance)},Wi.prototype.removeCommonBits=function(c){this._cbr=new Tc,this._cbr.add(c[0]),this._cbr.add(c[1]);var f=new Array(2).fill(null);return f[0]=this._cbr.removeCommonBits(c[0].copy()),f[1]=this._cbr.removeCommonBits(c[1].copy()),f},Wi.prototype.prepareResult=function(c){return this._cbr.addCommonBits(c),c},Wi.prototype.getResultGeometry=function(c){var f=this.snap(this._geom),b=Mr.overlayOp(f[0],f[1],c);return this.prepareResult(b)},Wi.prototype.checkValid=function(c){c.isValid()||jt.out.println("Snapped geometry is invalid")},Wi.prototype.computeSnapTolerance=function(){this._snapTolerance=No.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Wi.prototype.snap=function(c){var f=this.removeCommonBits(c);return No.snap(f[0],f[1],this._snapTolerance)},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.overlayOp=function(c,f,b){return new Wi(c,f).getResultGeometry(b)},Wi.union=function(c,f){return Wi.overlayOp(c,f,Mr.UNION)},Wi.intersection=function(c,f){return Wi.overlayOp(c,f,Mr.INTERSECTION)},Wi.symDifference=function(c,f){return Wi.overlayOp(c,f,Mr.SYMDIFFERENCE)},Wi.difference=function(c,f){return Wi.overlayOp(c,f,Mr.DIFFERENCE)};var Es=function(c,f){this._geom=new Array(2).fill(null),this._geom[0]=c,this._geom[1]=f};Es.prototype.getResultGeometry=function(c){var f=null,b=!1,w=null;try{f=Mr.overlayOp(this._geom[0],this._geom[1],c),b=!0}catch(M){if(!(M instanceof Pe))throw M;w=M}if(!b)try{f=Wi.overlayOp(this._geom[0],this._geom[1],c)}catch(M){throw M instanceof Pe?w:M}return f},Es.prototype.interfaces_=function(){return[]},Es.prototype.getClass=function(){return Es},Es.overlayOp=function(c,f,b){return new Es(c,f).getResultGeometry(b)},Es.union=function(c,f){return Es.overlayOp(c,f,Mr.UNION)},Es.intersection=function(c,f){return Es.overlayOp(c,f,Mr.INTERSECTION)},Es.symDifference=function(c,f){return Es.overlayOp(c,f,Mr.SYMDIFFERENCE)},Es.difference=function(c,f){return Es.overlayOp(c,f,Mr.DIFFERENCE)};var Sr=function(){this.mce=null,this.chainIndex=null;var f=arguments[1];this.mce=arguments[0],this.chainIndex=f};Sr.prototype.computeIntersections=function(c,f){this.mce.computeIntersectsForChain(this.chainIndex,c.mce,c.chainIndex,f)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var mo=function c(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var f=arguments[0],b=arguments[1];this._eventType=c.DELETE,this._xValue=f,this._insertEvent=b}else if(3===arguments.length){var w=arguments[0],M=arguments[1],z=arguments[2];this._eventType=c.INSERT,this._label=w,this._xValue=M,this._obj=z}},ph={INSERT:{configurable:!0},DELETE:{configurable:!0}};mo.prototype.isDelete=function(){return this._eventType===mo.DELETE},mo.prototype.setDeleteEventIndex=function(c){this._deleteEventIndex=c},mo.prototype.getObject=function(){return this._obj},mo.prototype.compareTo=function(c){return this._xValue<c._xValue?-1:this._xValue>c._xValue?1:this._eventType<c._eventType?-1:this._eventType>c._eventType?1:0},mo.prototype.getInsertEvent=function(){return this._insertEvent},mo.prototype.isInsert=function(){return this._eventType===mo.INSERT},mo.prototype.isSameLabel=function(c){return null!==this._label&&this._label===c._label},mo.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},mo.prototype.interfaces_=function(){return[ie]},mo.prototype.getClass=function(){return mo},ph.INSERT.get=function(){return 1},ph.DELETE.get=function(){return 2},Object.defineProperties(mo,ph);var Xs=function(){};Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs};var Cs=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var f=arguments[1],b=arguments[2];this._li=arguments[0],this._includeProper=f,this._recordIsolated=b};Cs.prototype.isTrivialIntersection=function(c,f,b,w){if(c===b&&1===this._li.getIntersectionNum()){if(Cs.isAdjacentSegments(f,w))return!0;if(c.isClosed()){var M=c.getNumPoints()-1;if(0===f&&w===M||0===w&&f===M)return!0}}return!1},Cs.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Cs.prototype.setIsDoneIfProperInt=function(c){this._isDoneWhenProperInt=c},Cs.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Cs.prototype.isBoundaryPointInternal=function(c,f){for(var b=f.iterator();b.hasNext();){var w=b.next().getCoordinate();if(c.isIntersection(w))return!0}return!1},Cs.prototype.hasProperIntersection=function(){return this._hasProper},Cs.prototype.hasIntersection=function(){return this._hasIntersection},Cs.prototype.isDone=function(){return this._isDone},Cs.prototype.isBoundaryPoint=function(c,f){return!(null===f||!this.isBoundaryPointInternal(c,f[0])&&!this.isBoundaryPointInternal(c,f[1]))},Cs.prototype.setBoundaryNodes=function(c,f){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=c,this._bdyNodes[1]=f},Cs.prototype.addIntersections=function(c,f,b,w){if(c===b&&f===w)return null;this.numTests++;var M=c.getCoordinates()[f],z=c.getCoordinates()[f+1],j=b.getCoordinates()[w],Ee=b.getCoordinates()[w+1];this._li.computeIntersection(M,z,j,Ee),this._li.hasIntersection()&&(this._recordIsolated&&(c.setIsolated(!1),b.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(c,f,b,w)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(c.addIntersections(this._li,f,0),b.addIntersections(this._li,w,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Cs.prototype.interfaces_=function(){return[]},Cs.prototype.getClass=function(){return Cs},Cs.isAdjacentSegments=function(c,f){return 1===Math.abs(c-f)};var za=function(c){function f(){c.call(this),this.events=new ct,this.nOverlaps=null}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.prepareEvents=function(){xi.sort(this.events);for(var b=0;b<this.events.size();b++){var w=this.events.get(b);w.isDelete()&&w.getInsertEvent().setDeleteEventIndex(b)}},f.prototype.computeIntersections=function(){if(1===arguments.length){var b=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var w=0;w<this.events.size();w++){var M=this.events.get(w);if(M.isInsert()&&this.processOverlaps(w,M.getDeleteEventIndex(),M,b),b.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Cs&&Te(arguments[0],It)&&Te(arguments[1],It)){var z=arguments[0],j=arguments[1],Ee=arguments[2];this.addEdges(z,z),this.addEdges(j,j),this.computeIntersections(Ee)}else if("boolean"==typeof arguments[2]&&Te(arguments[0],It)&&arguments[1]instanceof Cs){var at=arguments[0],Ut=arguments[1];arguments[2]?this.addEdges(at,null):this.addEdges(at),this.computeIntersections(Ut)}},f.prototype.addEdge=function(b,w){for(var M=b.getMonotoneChainEdge(),z=M.getStartIndexes(),j=0;j<z.length-1;j++){var Ee=new Sr(M,j),at=new mo(w,M.getMinX(j),Ee);this.events.add(at),this.events.add(new mo(M.getMaxX(j),at))}},f.prototype.processOverlaps=function(b,w,M,z){for(var j=M.getObject(),Ee=b;Ee<w;Ee++){var at=this.events.get(Ee);if(at.isInsert()){var Ut=at.getObject();M.isSameLabel(at)||(j.computeIntersections(Ut,z),this.nOverlaps++)}}},f.prototype.addEdges=function(){if(1===arguments.length)for(var b=arguments[0].iterator();b.hasNext();){var w=b.next();this.addEdge(w,w)}else if(2===arguments.length)for(var z=arguments[1],j=arguments[0].iterator();j.hasNext();){var Ee=j.next();this.addEdge(Ee,z)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Xs),Ti=function(){this._min=ne.POSITIVE_INFINITY,this._max=ne.NEGATIVE_INFINITY},mh={NodeComparator:{configurable:!0}};Ti.prototype.getMin=function(){return this._min},Ti.prototype.intersects=function(c,f){return!(this._min>f||this._max<c)},Ti.prototype.getMax=function(){return this._max},Ti.prototype.toString=function(){return Pt.toLineString(new ee(this._min,0),new ee(this._max,0))},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},mh.NodeComparator.get=function(){return Vh},Object.defineProperties(Ti,mh);var Vh=function(){};Vh.prototype.compare=function(c,f){var M=(c._min+c._max)/2,z=(f._min+f._max)/2;return M<z?-1:M>z?1:0},Vh.prototype.interfaces_=function(){return[xe]},Vh.prototype.getClass=function(){return Vh};var gh=function(c){function f(){c.call(this),this._item=null;var w=arguments[1],M=arguments[2];this._min=arguments[0],this._max=w,this._item=M}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.query=function(b,w,M){if(!this.intersects(b,w))return null;M.visitItem(this._item)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ti),Wa=function(c){function f(){c.call(this),this._node1=null,this._node2=null;var w=arguments[1];this._node1=arguments[0],this._node2=w,this.buildExtent(this._node1,this._node2)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.buildExtent=function(b,w){this._min=Math.min(b._min,w._min),this._max=Math.max(b._max,w._max)},f.prototype.query=function(b,w,M){if(!this.intersects(b,w))return null;null!==this._node1&&this._node1.query(b,w,M),null!==this._node2&&this._node2.query(b,w,M)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ti),Tl=function(){this._leaves=new ct,this._root=null,this._level=0};Tl.prototype.buildTree=function(){xi.sort(this._leaves,new Ti.NodeComparator);for(var c=this._leaves,f=null,b=new ct;;){if(this.buildLevel(c,b),1===b.size())return b.get(0);f=c,c=b,b=f}},Tl.prototype.insert=function(c,f,b){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gh(c,f,b))},Tl.prototype.query=function(c,f,b){this.init(),this._root.query(c,f,b)},Tl.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Tl.prototype.printNode=function(c){jt.out.println(Pt.toLineString(new ee(c._min,this._level),new ee(c._max,this._level)))},Tl.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Tl.prototype.buildLevel=function(c,f){this._level++,f.clear();for(var b=0;b<c.size();b+=2){var w=c.get(b);if(null===(b+1<c.size()?c.get(b):null))f.add(w);else{var M=new Wa(c.get(b),c.get(b+1));f.add(M)}}},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl};var Yl=function(){this._items=new ct};Yl.prototype.visitItem=function(c){this._items.add(c)},Yl.prototype.getItems=function(){return this._items},Yl.prototype.interfaces_=function(){return[Hl]},Yl.prototype.getClass=function(){return Yl};var Fl=function(){this._index=null;var c=arguments[0];if(!Te(c,So))throw new Q("Argument must be Polygonal");this._index=new ul(c)},md={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Fl.prototype.locate=function(c){var f=new Fn(c),b=new Uh(f);return this._index.query(c.y,c.y,b),f.getLocation()},Fl.prototype.interfaces_=function(){return[dd]},Fl.prototype.getClass=function(){return Fl},md.SegmentVisitor.get=function(){return Uh},md.IntervalIndexedGeometry.get=function(){return ul},Object.defineProperties(Fl,md);var Uh=function(){this._counter=null,this._counter=arguments[0]};Uh.prototype.visitItem=function(c){var f=c;this._counter.countSegment(f.getCoordinate(0),f.getCoordinate(1))},Uh.prototype.interfaces_=function(){return[Hl]},Uh.prototype.getClass=function(){return Uh};var ul=function(){this._index=new Tl,this.init(arguments[0])};ul.prototype.init=function(c){for(var f=ll.getLines(c).iterator();f.hasNext();){var b=f.next().getCoordinates();this.addLine(b)}},ul.prototype.addLine=function(c){for(var f=1;f<c.length;f++){var b=new ii(c[f-1],c[f]),w=Math.min(b.p0.y,b.p1.y),M=Math.max(b.p0.y,b.p1.y);this._index.insert(w,M,b)}},ul.prototype.query=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1],b=new Yl;return this._index.query(c,f,b),b.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var cc=function(c){function f(){if(c.call(this),this._parentGeom=null,this._lineEdgeMap=new yt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new La,2===arguments.length){var w=arguments[1],M=_i.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=w,this._boundaryNodeRule=M,null!==w&&this.add(w)}else if(3===arguments.length){var j=arguments[1],Ee=arguments[2];this._argIndex=arguments[0],this._parentGeom=j,this._boundaryNodeRule=Ee,null!==j&&this.add(j)}}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.insertBoundaryPoint=function(b,w){var M=this._nodes.addNode(w).getLabel(),z=1;M.getLocation(b,Et.ON)===oe.BOUNDARY&&z++;var j=f.determineBoundary(this._boundaryNodeRule,z);M.setLocation(b,j)},f.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var z=arguments[1],j=arguments[2],Ee=new Cs(arguments[0],!0,!1);return Ee.setIsDoneIfProperInt(j),this.createEdgeSetIntersector().computeIntersections(this._edges,Ee,z||!(this._parentGeom instanceof Lo||this._parentGeom instanceof so||this._parentGeom instanceof no)),this.addSelfIntersectionNodes(this._argIndex),Ee}},f.prototype.computeSplitEdges=function(b){for(var w=this._edges.iterator();w.hasNext();)w.next().eiList.addSplitEdges(b)},f.prototype.computeEdgeIntersections=function(b,w,M){var z=new Cs(w,M,!0);return z.setBoundaryNodes(this.getBoundaryNodes(),b.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,b._edges,z),z},f.prototype.getGeometry=function(){return this._parentGeom},f.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},f.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},f.prototype.addPoint=function(){if(arguments[0]instanceof Vi){var b=arguments[0].getCoordinate();this.insertPoint(this._argIndex,b,oe.INTERIOR)}else arguments[0]instanceof ee&&this.insertPoint(this._argIndex,arguments[0],oe.INTERIOR)},f.prototype.addPolygon=function(b){this.addPolygonRing(b.getExteriorRing(),oe.EXTERIOR,oe.INTERIOR);for(var w=0;w<b.getNumInteriorRing();w++){var M=b.getInteriorRingN(w);this.addPolygonRing(M,oe.INTERIOR,oe.EXTERIOR)}},f.prototype.addEdge=function(b){this.insertEdge(b);var w=b.getCoordinates();this.insertPoint(this._argIndex,w[0],oe.BOUNDARY),this.insertPoint(this._argIndex,w[w.length-1],oe.BOUNDARY)},f.prototype.addLineString=function(b){var w=Dt.removeRepeatedPoints(b.getCoordinates());if(w.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=w[0],null;var M=new Xl(w,new $i(this._argIndex,oe.INTERIOR));this._lineEdgeMap.put(b,M),this.insertEdge(M),Se.isTrue(w.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,w[0]),this.insertBoundaryPoint(this._argIndex,w[w.length-1])},f.prototype.getInvalidPoint=function(){return this._invalidPoint},f.prototype.getBoundaryPoints=function(){for(var b=this.getBoundaryNodes(),w=new Array(b.size()).fill(null),M=0,z=b.iterator();z.hasNext();){var j=z.next();w[M++]=j.getCoordinate().copy()}return w},f.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},f.prototype.addSelfIntersectionNode=function(b,w,M){if(this.isBoundaryNode(b,w))return null;M===oe.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(b,w):this.insertPoint(b,w,M)},f.prototype.addPolygonRing=function(b,w,M){if(b.isEmpty())return null;var z=Dt.removeRepeatedPoints(b.getCoordinates());if(z.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=z[0],null;var j=w,Ee=M;vn.isCCW(z)&&(j=M,Ee=w);var at=new Xl(z,new $i(this._argIndex,oe.BOUNDARY,j,Ee));this._lineEdgeMap.put(b,at),this.insertEdge(at),this.insertPoint(this._argIndex,z[0],oe.BOUNDARY)},f.prototype.insertPoint=function(b,w,M){var z=this._nodes.addNode(w),j=z.getLabel();null===j?z._label=new $i(b,M):j.setLocation(b,M)},f.prototype.createEdgeSetIntersector=function(){return new za},f.prototype.addSelfIntersectionNodes=function(b){for(var w=this._edges.iterator();w.hasNext();)for(var M=w.next(),z=M.getLabel().getLocation(b),j=M.eiList.iterator();j.hasNext();){var Ee=j.next();this.addSelfIntersectionNode(b,Ee.coord,z)}},f.prototype.add=function(){if(1!==arguments.length)return c.prototype.add.apply(this,arguments);var b=arguments[0];if(b.isEmpty())return null;if(b instanceof no&&(this._useBoundaryDeterminationRule=!1),b instanceof so)this.addPolygon(b);else if(b instanceof oi)this.addLineString(b);else if(b instanceof Vi)this.addPoint(b);else if(b instanceof Ns)this.addCollection(b);else if(b instanceof Yn)this.addCollection(b);else if(b instanceof no)this.addCollection(b);else{if(!(b instanceof $n))throw new Error(b.getClass().getName());this.addCollection(b)}},f.prototype.addCollection=function(b){for(var w=0;w<b.getNumGeometries();w++){var M=b.getGeometryN(w);this.add(M)}},f.prototype.locate=function(b){return Te(this._parentGeom,So)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Fl(this._parentGeom)),this._areaPtLocator.locate(b)):this._ptLocator.locate(b,this._parentGeom)},f.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):c.prototype.findEdge.apply(this,arguments)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.determineBoundary=function(b,w){return b.isInBoundary(w)?oe.BOUNDARY:oe.INTERIOR},f}(Hs),du=function(){if(this._li=new cn,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var c=arguments[0];this.setComputationPrecision(c.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new cc(0,c)}else if(2===arguments.length){var f=arguments[0],b=arguments[1],w=_i.OGC_SFS_BOUNDARY_RULE;f.getPrecisionModel().compareTo(b.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(b.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new cc(0,f,w),this._arg[1]=new cc(1,b,w)}else if(3===arguments.length){var M=arguments[0],z=arguments[1],j=arguments[2];M.getPrecisionModel().compareTo(z.getPrecisionModel())>=0?this.setComputationPrecision(M.getPrecisionModel()):this.setComputationPrecision(z.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new cc(0,M,j),this._arg[1]=new cc(1,z,j)}};du.prototype.getArgGeometry=function(c){return this._arg[c].getGeometry()},du.prototype.setComputationPrecision=function(c){this._resultPrecisionModel=c,this._li.setPrecisionModel(this._resultPrecisionModel)},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var Dc=function(){};Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Dc.map=function(){if(arguments[0]instanceof sr&&Te(arguments[1],Dc.MapOp)){for(var c=arguments[0],f=arguments[1],b=new ct,w=0;w<c.getNumGeometries();w++){var M=f.map(c.getGeometryN(w));null!==M&&b.add(M)}return c.getFactory().buildGeometry(b)}if(Te(arguments[0],ke)&&Te(arguments[1],Dc.MapOp)){for(var z=arguments[0],j=arguments[1],Ee=new ct,at=z.iterator();at.hasNext();){var Ut=at.next(),gn=j.map(Ut);null!==gn&&Ee.add(gn)}return Ee}},Dc.MapOp=function(){};var Mr=function(c){function f(){var b=arguments[0];c.call(this,b,arguments[1]),this._ptLocator=new La,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new pn,this._resultPolyList=new ct,this._resultLineList=new ct,this._resultPointList=new ct,this._graph=new Hs(new hh),this._geomFact=b.getFactory()}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.insertUniqueEdge=function(b){var w=this._edgeList.findEqualEdge(b);if(null!==w){var M=w.getLabel(),z=b.getLabel();w.isPointwiseEqual(b)||(z=new $i(b.getLabel())).flip();var j=w.getDepth();j.isNull()&&j.add(M),j.add(z),M.merge(z)}else this._edgeList.add(b)},f.prototype.getGraph=function(){return this._graph},f.prototype.cancelDuplicateResultEdges=function(){for(var b=this._graph.getEdgeEnds().iterator();b.hasNext();){var w=b.next(),M=w.getSym();w.isInResult()&&M.isInResult()&&(w.setInResult(!1),M.setInResult(!1))}},f.prototype.isCoveredByLA=function(b){return!!this.isCovered(b,this._resultLineList)||!!this.isCovered(b,this._resultPolyList)},f.prototype.computeGeometry=function(b,w,M,z){var j=new ct;return j.addAll(b),j.addAll(w),j.addAll(M),j.isEmpty()?f.createEmptyResult(z,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(j)},f.prototype.mergeSymLabels=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().mergeSymLabels()},f.prototype.isCovered=function(b,w){for(var M=w.iterator();M.hasNext();){var z=M.next();if(this._ptLocator.locate(b,z)!==oe.EXTERIOR)return!0}return!1},f.prototype.replaceCollapsedEdges=function(){for(var b=new ct,w=this._edgeList.iterator();w.hasNext();){var M=w.next();M.isCollapsed()&&(w.remove(),b.add(M.getCollapsedEdge()))}this._edgeList.addAll(b)},f.prototype.updateNodeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var w=b.next(),M=w.getEdges().getLabel();w.getLabel().merge(M)}},f.prototype.getResultGeometry=function(b){return this.computeOverlay(b),this._resultGeom},f.prototype.insertUniqueEdges=function(b){for(var w=b.iterator();w.hasNext();){var M=w.next();this.insertUniqueEdge(M)}},f.prototype.computeOverlay=function(b){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var w=new ct;this._arg[0].computeSplitEdges(w),this._arg[1].computeSplitEdges(w),this.insertUniqueEdges(w),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ma.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(b),this.cancelDuplicateResultEdges();var M=new Ya(this._geomFact);M.add(this._graph),this._resultPolyList=M.getPolygons();var z=new ws(this,this._geomFact,this._ptLocator);this._resultLineList=z.build(b);var j=new ia(this,this._geomFact,this._ptLocator);this._resultPointList=j.build(b),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,b)},f.prototype.labelIncompleteNode=function(b,w){var M=this._ptLocator.locate(b.getCoordinate(),this._arg[w].getGeometry());b.getLabel().setLocation(w,M)},f.prototype.copyPoints=function(b){for(var w=this._arg[b].getNodeIterator();w.hasNext();){var M=w.next();this._graph.addNode(M.getCoordinate()).setLabel(b,M.getLabel().getLocation(b))}},f.prototype.findResultAreaEdges=function(b){for(var w=this._graph.getEdgeEnds().iterator();w.hasNext();){var M=w.next(),z=M.getLabel();z.isArea()&&!M.isInteriorAreaEdge()&&f.isResultOfOp(z.getLocation(0,Et.RIGHT),z.getLocation(1,Et.RIGHT),b)&&M.setInResult(!0)}},f.prototype.computeLabelsFromDepths=function(){for(var b=this._edgeList.iterator();b.hasNext();){var w=b.next(),M=w.getLabel(),z=w.getDepth();if(!z.isNull()){z.normalize();for(var j=0;j<2;j++)M.isNull(j)||!M.isArea()||z.isNull(j)||(0===z.getDelta(j)?M.toLine(j):(Se.isTrue(!z.isNull(j,Et.LEFT),"depth of LEFT side has not been initialized"),M.setLocation(j,Et.LEFT,z.getLocation(j,Et.LEFT)),Se.isTrue(!z.isNull(j,Et.RIGHT),"depth of RIGHT side has not been initialized"),M.setLocation(j,Et.RIGHT,z.getLocation(j,Et.RIGHT))))}}},f.prototype.computeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},f.prototype.labelIncompleteNodes=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var w=b.next(),M=w.getLabel();w.isIsolated()&&(M.isNull(0)?this.labelIncompleteNode(w,0):this.labelIncompleteNode(w,1)),w.getEdges().updateLabelling(M)}},f.prototype.isCoveredByA=function(b){return!!this.isCovered(b,this._resultPolyList)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(du);Mr.overlayOp=function(c,f,b){return new Mr(c,f).getResultGeometry(b)},Mr.intersection=function(c,f){if(c.isEmpty()||f.isEmpty())return Mr.createEmptyResult(Mr.INTERSECTION,c,f,c.getFactory());if(c.isGeometryCollection()){var b=f;return po.map(c,{interfaces_:function(){return[Dc.MapOp]},map:function(w){return w.intersection(b)}})}return c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Es.overlayOp(c,f,Mr.INTERSECTION)},Mr.symDifference=function(c,f){if(c.isEmpty()||f.isEmpty()){if(c.isEmpty()&&f.isEmpty())return Mr.createEmptyResult(Mr.SYMDIFFERENCE,c,f,c.getFactory());if(c.isEmpty())return f.copy();if(f.isEmpty())return c.copy()}return c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Es.overlayOp(c,f,Mr.SYMDIFFERENCE)},Mr.resultDimension=function(c,f,b){var w=f.getDimension(),M=b.getDimension(),z=-1;switch(c){case Mr.INTERSECTION:z=Math.min(w,M);break;case Mr.UNION:z=Math.max(w,M);break;case Mr.DIFFERENCE:z=w;break;case Mr.SYMDIFFERENCE:z=Math.max(w,M)}return z},Mr.createEmptyResult=function(c,f,b,w){var M=null;switch(Mr.resultDimension(c,f,b)){case-1:M=w.createGeometryCollection(new Array(0).fill(null));break;case 0:M=w.createPoint();break;case 1:M=w.createLineString();break;case 2:M=w.createPolygon()}return M},Mr.difference=function(c,f){return c.isEmpty()?Mr.createEmptyResult(Mr.DIFFERENCE,c,f,c.getFactory()):f.isEmpty()?c.copy():(c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Es.overlayOp(c,f,Mr.DIFFERENCE))},Mr.isResultOfOp=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1],b=c.getLocation(0),w=c.getLocation(1);return Mr.isResultOfOp(b,w,f)}if(3===arguments.length){var M=arguments[0],z=arguments[1];switch(M===oe.BOUNDARY&&(M=oe.INTERIOR),z===oe.BOUNDARY&&(z=oe.INTERIOR),arguments[2]){case Mr.INTERSECTION:return M===oe.INTERIOR&&z===oe.INTERIOR;case Mr.UNION:return M===oe.INTERIOR||z===oe.INTERIOR;case Mr.DIFFERENCE:return M===oe.INTERIOR&&z!==oe.INTERIOR;case Mr.SYMDIFFERENCE:return M===oe.INTERIOR&&z!==oe.INTERIOR||M!==oe.INTERIOR&&z===oe.INTERIOR}return!1}},Mr.INTERSECTION=1,Mr.UNION=2,Mr.DIFFERENCE=3,Mr.SYMDIFFERENCE=4;var fu=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new La,this._seg=new ii;var c=arguments[0],f=arguments[1];this._g=c,this._boundaryDistanceTolerance=f,this._linework=this.extractLinework(c)};fu.prototype.isWithinToleranceOfBoundary=function(c){for(var f=0;f<this._linework.getNumGeometries();f++)for(var b=this._linework.getGeometryN(f).getCoordinateSequence(),w=0;w<b.size()-1;w++)if(b.getCoordinate(w,this._seg.p0),b.getCoordinate(w+1,this._seg.p1),this._seg.distance(c)<=this._boundaryDistanceTolerance)return!0;return!1},fu.prototype.getLocation=function(c){return this.isWithinToleranceOfBoundary(c)?oe.BOUNDARY:this._ptLocator.locate(c,this._g)},fu.prototype.extractLinework=function(c){var f=new pu;c.apply(f);var b=f.getLinework(),w=ye.toLineStringArray(b);return c.getFactory().createMultiLineString(w)},fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu};var pu=function(){this._linework=null,this._linework=new ct};pu.prototype.getLinework=function(){return this._linework},pu.prototype.filter=function(c){if(c instanceof so){var f=c;this._linework.add(f.getExteriorRing());for(var b=0;b<f.getNumInteriorRing();b++)this._linework.add(f.getInteriorRingN(b))}},pu.prototype.interfaces_=function(){return[ln]},pu.prototype.getClass=function(){return pu};var ku=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};ku.prototype.extractPoints=function(c,f,b){for(var w=c.getCoordinates(),M=0;M<w.length-1;M++)this.computeOffsetPoints(w[M],w[M+1],f,b)},ku.prototype.setSidesToGenerate=function(c,f){this._doLeft=c,this._doRight=f},ku.prototype.getPoints=function(c){for(var f=new ct,b=ll.getLines(this._g).iterator();b.hasNext();){var w=b.next();this.extractPoints(w,c,f)}return f},ku.prototype.computeOffsetPoints=function(c,f,b,w){var M=f.x-c.x,z=f.y-c.y,j=Math.sqrt(M*M+z*z),Ee=b*M/j,at=b*z/j,Ut=(f.x+c.x)/2,gn=(f.y+c.y)/2;if(this._doLeft){var Rn=new ee(Ut-at,gn+Ee);w.add(Rn)}if(this._doRight){var Ir=new ee(Ut+at,gn-Ee);w.add(Ir)}},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku};var ga=function c(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=c.TOLERANCE,this._testCoords=new ct;var f=arguments[0],b=arguments[1],w=arguments[2];this._boundaryDistanceTolerance=c.computeBoundaryDistanceTolerance(f,b),this._geom=[f,b,w],this._locFinder=[new fu(this._geom[0],this._boundaryDistanceTolerance),new fu(this._geom[1],this._boundaryDistanceTolerance),new fu(this._geom[2],this._boundaryDistanceTolerance)]},gd={TOLERANCE:{configurable:!0}};ga.prototype.reportResult=function(c,f,b){jt.out.println("Overlay result invalid - A:"+oe.toLocationSymbol(f[0])+" B:"+oe.toLocationSymbol(f[1])+" expected:"+(b?"i":"e")+" actual:"+oe.toLocationSymbol(f[2]))},ga.prototype.isValid=function(c){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(c)},ga.prototype.checkValid=function(){if(1===arguments.length){for(var c=arguments[0],f=0;f<this._testCoords.size();f++){var b=this._testCoords.get(f);if(!this.checkValid(c,b))return this._invalidLocation=b,!1}return!0}if(2===arguments.length){var w=arguments[0],M=arguments[1];return this._location[0]=this._locFinder[0].getLocation(M),this._location[1]=this._locFinder[1].getLocation(M),this._location[2]=this._locFinder[2].getLocation(M),!!ga.hasLocation(this._location,oe.BOUNDARY)||this.isValidResult(w,this._location)}},ga.prototype.addTestPts=function(c){var f=new ku(c);this._testCoords.addAll(f.getPoints(5*this._boundaryDistanceTolerance))},ga.prototype.isValidResult=function(c,f){var b=Mr.isResultOfOp(f[0],f[1],c),w=!(b^f[2]===oe.INTERIOR);return w||this.reportResult(c,f,b),w},ga.prototype.getInvalidLocation=function(){return this._invalidLocation},ga.prototype.interfaces_=function(){return[]},ga.prototype.getClass=function(){return ga},ga.hasLocation=function(c,f){for(var b=0;b<3;b++)if(c[b]===f)return!0;return!1},ga.computeBoundaryDistanceTolerance=function(c,f){return Math.min(No.computeSizeBasedSnapTolerance(c),No.computeSizeBasedSnapTolerance(f))},ga.isValid=function(c,f,b,w){return new ga(c,f,w).isValid(b)},gd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(ga,gd);var Ja=function c(f){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=c.extractFactory(f),this._inputGeoms=f};Ja.prototype.extractElements=function(c,f){if(null===c)return null;for(var b=0;b<c.getNumGeometries();b++){var w=c.getGeometryN(b);this._skipEmpty&&w.isEmpty()||f.add(w)}},Ja.prototype.combine=function(){for(var c=new ct,f=this._inputGeoms.iterator();f.hasNext();){var b=f.next();this.extractElements(b,c)}return 0===c.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(c)},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja},Ja.combine=function(){return 1===arguments.length?new Ja(arguments[0]).combine():2===arguments.length?new Ja(Ja.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Ja(Ja.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Ja.extractFactory=function(c){return c.isEmpty()?null:c.iterator().next().getFactory()},Ja.createList=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1],b=new ct;return b.add(c),b.add(f),b}if(3===arguments.length){var w=arguments[0],M=arguments[1],z=arguments[2],j=new ct;return j.add(w),j.add(M),j.add(z),j}};var ko=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new ct)},vl={STRTREE_NODE_CAPACITY:{configurable:!0}};ko.prototype.reduceToGeometries=function(c){for(var f=new ct,b=c.iterator();b.hasNext();){var w=b.next(),M=null;Te(w,It)?M=this.unionTree(w):w instanceof sr&&(M=w),f.add(M)}return f},ko.prototype.extractByEnvelope=function(c,f,b){for(var w=new ct,M=0;M<f.getNumGeometries();M++){var z=f.getGeometryN(M);z.getEnvelopeInternal().intersects(c)?w.add(z):b.add(z)}return this._geomFactory.buildGeometry(w)},ko.prototype.unionOptimized=function(c,f){var b=c.getEnvelopeInternal(),w=f.getEnvelopeInternal();if(!b.intersects(w))return Ja.combine(c,f);if(c.getNumGeometries()<=1&&f.getNumGeometries()<=1)return this.unionActual(c,f);var M=b.intersection(w);return this.unionUsingEnvelopeIntersection(c,f,M)},ko.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var c=new Io(ko.STRTREE_NODE_CAPACITY),f=this._inputPolys.iterator();f.hasNext();){var b=f.next();c.insert(b.getEnvelopeInternal(),b)}this._inputPolys=null;var w=c.itemsTree();return this.unionTree(w)},ko.prototype.binaryUnion=function(){if(1===arguments.length){var c=arguments[0];return this.binaryUnion(c,0,c.size())}if(3===arguments.length){var f=arguments[0],b=arguments[1],w=arguments[2];if(w-b<=1){var M=ko.getGeometry(f,b);return this.unionSafe(M,null)}if(w-b==2)return this.unionSafe(ko.getGeometry(f,b),ko.getGeometry(f,b+1));var z=Math.trunc((w+b)/2),j=this.binaryUnion(f,b,z),Ee=this.binaryUnion(f,z,w);return this.unionSafe(j,Ee)}},ko.prototype.repeatedUnion=function(c){for(var f=null,b=c.iterator();b.hasNext();){var w=b.next();f=null===f?w.copy():f.union(w)}return f},ko.prototype.unionSafe=function(c,f){return null===c&&null===f?null:null===c?f.copy():null===f?c.copy():this.unionOptimized(c,f)},ko.prototype.unionActual=function(c,f){return ko.restrictToPolygons(c.union(f))},ko.prototype.unionTree=function(c){var f=this.reduceToGeometries(c);return this.binaryUnion(f)},ko.prototype.unionUsingEnvelopeIntersection=function(c,f,b){var w=new ct,M=this.extractByEnvelope(b,c,w),z=this.extractByEnvelope(b,f,w),j=this.unionActual(M,z);return w.add(j),Ja.combine(w)},ko.prototype.bufferUnion=function(){if(1===arguments.length){var c=arguments[0];return c.get(0).getFactory().buildGeometry(c).buffer(0)}if(2===arguments.length){var f=arguments[0],b=arguments[1];return f.getFactory().createGeometryCollection([f,b]).buffer(0)}},ko.prototype.interfaces_=function(){return[]},ko.prototype.getClass=function(){return ko},ko.restrictToPolygons=function(c){if(Te(c,So))return c;var f=sc.getPolygons(c);return 1===f.size()?f.get(0):c.getFactory().createMultiPolygon(ye.toPolygonArray(f))},ko.getGeometry=function(c,f){return f>=c.size()?null:c.get(f)},ko.union=function(c){return new ko(c).union()},vl.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ko,vl);var Sf=function(){};Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.union=function(c,f){if(c.isEmpty()||f.isEmpty()){if(c.isEmpty()&&f.isEmpty())return Mr.createEmptyResult(Mr.UNION,c,f,c.getFactory());if(c.isEmpty())return f.copy();if(f.isEmpty())return c.copy()}return c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Es.overlayOp(c,f,Mr.UNION)},Ie.GeoJSONReader=sn,Ie.GeoJSONWriter=yn,Ie.OverlayOp=Mr,Ie.UnionOp=Sf,Ie.BufferOp=Ia,Object.defineProperty(Ie,"__esModule",{value:!0})}(Lt)},863:(An,Lt,Ie)=>{var de={"./ion-accordion_2.entry.js":[8484,8592,8484],"./ion-action-sheet.entry.js":[9882,8592,9882],"./ion-alert.entry.js":[6304,8592,6304],"./ion-app_8.entry.js":[5860,8592,5860],"./ion-avatar_3.entry.js":[3544,3544],"./ion-back-button.entry.js":[505,8592,505],"./ion-backdrop.entry.js":[469,469],"./ion-breadcrumb_2.entry.js":[9857,8592,9857],"./ion-button_2.entry.js":[1372,1372],"./ion-card_5.entry.js":[3150,3150],"./ion-checkbox.entry.js":[7635,8592,7635],"./ion-chip.entry.js":[6673,6673],"./ion-col_3.entry.js":[1315,1315],"./ion-datetime-button.entry.js":[433,9302,433],"./ion-datetime_3.entry.js":[7059,9302,8592,7059],"./ion-fab_3.entry.js":[4087,8592,4087],"./ion-img.entry.js":[1745,1745],"./ion-infinite-scroll_2.entry.js":[9352,8592,9352],"./ion-input.entry.js":[4530,8592,4530],"./ion-item-option_3.entry.js":[8633,8592,8633],"./ion-item_8.entry.js":[5962,8592,5962],"./ion-loading.entry.js":[3483,8592,3483],"./ion-menu_3.entry.js":[8382,8592,8382],"./ion-modal.entry.js":[8577,8592,8577],"./ion-nav_2.entry.js":[5675,8592,5675],"./ion-picker-column-internal.entry.js":[9992,8592,9992],"./ion-picker-internal.entry.js":[9820,9820],"./ion-popover.entry.js":[185,8592,185],"./ion-progress-bar.entry.js":[5454,5454],"./ion-radio_2.entry.js":[4458,8592,4458],"./ion-range.entry.js":[7666,8592,7666],"./ion-refresher_2.entry.js":[7219,8592,7219],"./ion-reorder_2.entry.js":[2975,8592,2975],"./ion-ripple-effect.entry.js":[7465,7465],"./ion-route_4.entry.js":[4764,4764],"./ion-searchbar.entry.js":[3998,8592,3998],"./ion-segment_2.entry.js":[3672,8592,3672],"./ion-select_3.entry.js":[6754,8592,6754],"./ion-spinner.entry.js":[9588,8592,9588],"./ion-split-pane.entry.js":[9793,9793],"./ion-tab-bar_2.entry.js":[4090,8592,4090],"./ion-tab_2.entry.js":[2841,2841],"./ion-text.entry.js":[8811,8811],"./ion-textarea.entry.js":[3734,8592,3734],"./ion-toast.entry.js":[6642,8592,6642],"./ion-toggle.entry.js":[8866,8592,8866]};function Fe(tt){if(!Ie.o(de,tt))return Promise.resolve().then(()=>{var Be=new Error("Cannot find module '"+tt+"'");throw Be.code="MODULE_NOT_FOUND",Be});var g=de[tt],me=g[0];return Promise.all(g.slice(1).map(Ie.e)).then(()=>Ie(me))}Fe.keys=()=>Object.keys(de),Fe.id=863,An.exports=Fe},5764:(An,Lt,Ie)=>{var de={"./ion-icon.entry.js":[5191,5191],"./stripe-payment-request-button.entry.js":[5057,8592,5057],"./stripe-payment-sheet.entry.js":[2797,2797],"./stripe-payment_2.entry.js":[1681,8592,1681]};function Fe(tt){if(!Ie.o(de,tt))return Promise.resolve().then(()=>{var Be=new Error("Cannot find module '"+tt+"'");throw Be.code="MODULE_NOT_FOUND",Be});var g=de[tt],me=g[0];return Promise.all(g.slice(1).map(Ie.e)).then(()=>Ie(me))}Fe.keys=()=>Object.keys(de),Fe.id=5764,An.exports=Fe},5861:(An,Lt,Ie)=>{"use strict";function de(tt,g,me,Be,Ne,We,ht){try{var Wt=tt[We](ht),Xe=Wt.value}catch(et){return void me(et)}Wt.done?g(Xe):Promise.resolve(Xe).then(Be,Ne)}function Fe(tt){return function(){var g=this,me=arguments;return new Promise(function(Be,Ne){var We=tt.apply(g,me);function ht(Xe){de(We,Be,Ne,ht,Wt,"next",Xe)}function Wt(Xe){de(We,Be,Ne,ht,Wt,"throw",Xe)}ht(void 0)})}}Ie.d(Lt,{Z:()=>Fe})}},An=>{An(An.s=9081)}]);