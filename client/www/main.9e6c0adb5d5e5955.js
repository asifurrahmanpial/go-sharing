(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{9698:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{YT:()=>ue,uA:()=>Le,I:()=>Je,YG:()=>g});var ue=function(fe){return fe.Loaded="applePayLoaded",fe.FailedToLoad="applePayFailedToLoad",fe.Completed="applePayCompleted",fe.Canceled="applePayCanceled",fe.Failed="applePayFailed",fe.DidSelectShippingContact="applePayDidSelectShippingContact",fe.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",fe}(ue||{}),Le=function(fe){return fe.Loaded="googlePayLoaded",fe.FailedToLoad="googlePayFailedToLoad",fe.Completed="googlePayCompleted",fe.Canceled="googlePayCanceled",fe.Failed="googlePayFailed",fe}(Le||{}),Je=function(fe){return fe.Loaded="paymentFlowLoaded",fe.FailedToLoad="paymentFlowFailedToLoad",fe.Opened="paymentFlowOpened",fe.Created="paymentFlowCreated",fe.Completed="paymentFlowCompleted",fe.Canceled="paymentFlowCanceled",fe.Failed="paymentFlowFailed",fe}(Je||{}),g=function(fe){return fe.Loaded="paymentSheetLoaded",fe.FailedToLoad="paymentSheetFailedToLoad",fe.Completed="paymentSheetCompleted",fe.Canceled="paymentSheetCanceled",fe.Failed="paymentSheetFailed",fe}(g||{})},5961:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{GW:()=>Le,dk:()=>Je,oK:()=>ue});var ue=function(g){return g.Prompt="PROMPT",g.Camera="CAMERA",g.Photos="PHOTOS",g}(ue||{}),Le=function(g){return g.Rear="REAR",g.Front="FRONT",g}(Le||{}),Je=function(g){return g.Uri="uri",g.Base64="base64",g.DataUrl="dataUrl",g}(Je||{})},2726:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{Uw:()=>J,fo:()=>Nt,ur:()=>He,xz:()=>ct});var ue=Ce(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var He=function(Ve){return Ve.Unimplemented="UNIMPLEMENTED",Ve.Unavailable="UNAVAILABLE",Ve}(He||{});class ct extends Error{constructor(Se,Y,Ge){super(Se),this.message=Se,this.code=Y,this.data=Ge}}const qe=Ve=>{var Se,Y,Ge,De,Ke;const $e=Ve.CapacitorCustomPlatform||null,ae=Ve.Capacitor||{},Ze=ae.Plugins=ae.Plugins||{},et=Ve.CapacitorPlatforms,qt=(null===(Se=et?.currentPlatform)||void 0===Se?void 0:Se.getPlatform)||(()=>null!==$e?$e.name:(Ve=>{var Se,Y;return Ve?.androidBridge?"android":null!==(Y=null===(Se=Ve?.webkit)||void 0===Se?void 0:Se.messageHandlers)&&void 0!==Y&&Y.bridge?"ios":"web"})(Ve)),kn=(null===(Y=et?.currentPlatform)||void 0===Y?void 0:Y.isNativePlatform)||(()=>"web"!==qt()),Vt=(null===(Ge=et?.currentPlatform)||void 0===Ge?void 0:Ge.isPluginAvailable)||(At=>{const Ae=Lt.get(At);return!(!Ae?.platforms.has(qt())&&!Tn(At))}),Tn=(null===(De=et?.currentPlatform)||void 0===De?void 0:De.getPluginHeader)||(At=>{var Ae;return null===(Ae=ae.PluginHeaders)||void 0===Ae?void 0:Ae.find(Te=>Te.name===At)}),Lt=new Map,Gn=(null===(Ke=et?.currentPlatform)||void 0===Ke?void 0:Ke.registerPlugin)||((At,Ae={})=>{const Te=Lt.get(At);if(Te)return console.warn(`Capacitor plugin "${At}" already registered. Cannot register plugins twice.`),Te.proxy;const Ee=qt(),lt=Tn(At);let Mt;const ln=function(){var Ti=(0,ue.Z)(function*(){return!Mt&&Ee in Ae?Mt=Mt="function"==typeof Ae[Ee]?yield Ae[Ee]():Ae[Ee]:null!==$e&&!Mt&&"web"in Ae&&(Mt=Mt="function"==typeof Ae.web?yield Ae.web():Ae.web),Mt});return function(){return Ti.apply(this,arguments)}}(),Bn=Ti=>{let wr;const Gi=(...gr)=>{const Fr=ln().then(zr=>{const bo=((Ti,wr)=>{var Gi,gr;if(!lt){if(Ti)return null===(gr=Ti[wr])||void 0===gr?void 0:gr.bind(Ti);throw new ct(`"${At}" plugin is not implemented on ${Ee}`,He.Unimplemented)}{const Fr=lt?.methods.find(zr=>wr===zr.name);if(Fr)return"promise"===Fr.rtype?zr=>ae.nativePromise(At,wr.toString(),zr):(zr,bo)=>ae.nativeCallback(At,wr.toString(),zr,bo);if(Ti)return null===(Gi=Ti[wr])||void 0===Gi?void 0:Gi.bind(Ti)}})(zr,Ti);if(bo){const mt=bo(...gr);return wr=mt?.remove,mt}throw new ct(`"${At}.${Ti}()" is not implemented on ${Ee}`,He.Unimplemented)});return"addListener"===Ti&&(Fr.remove=(0,ue.Z)(function*(){return wr()})),Fr};return Gi.toString=()=>`${Ti.toString()}() { [capacitor code] }`,Object.defineProperty(Gi,"name",{value:Ti,writable:!1,configurable:!1}),Gi},yn=Bn("addListener"),Yi=Bn("removeListener"),or=(Ti,wr)=>{const Gi=yn({eventName:Ti},wr),gr=function(){var zr=(0,ue.Z)(function*(){const bo=yield Gi;Yi({eventName:Ti,callbackId:bo},wr)});return function(){return zr.apply(this,arguments)}}(),Fr=new Promise(zr=>Gi.then(()=>zr({remove:gr})));return Fr.remove=(0,ue.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield gr()}),Fr},ai=new Proxy({},{get(Ti,wr){switch(wr){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return lt?or:yn;case"removeListener":return Yi;default:return Bn(wr)}}});return Ze[At]=ai,Lt.set(At,{name:At,proxy:ai,platforms:new Set([...Object.keys(Ae),...lt?[Ee]:[]])}),ai});return ae.convertFileSrc||(ae.convertFileSrc=At=>At),ae.getPlatform=qt,ae.handleError=At=>Ve.console.error(At),ae.isNativePlatform=kn,ae.isPluginAvailable=Vt,ae.pluginMethodNoop=(At,Ae,Te)=>Promise.reject(`${Te} does not have an implementation of "${Ae}".`),ae.registerPlugin=Gn,ae.Exception=ct,ae.DEBUG=!!ae.DEBUG,ae.isLoggingEnabled=!!ae.isLoggingEnabled,ae.platform=ae.getPlatform(),ae.isNative=ae.isNativePlatform(),ae},je=(Ve=>Ve.Capacitor=qe(Ve))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Nt=je.registerPlugin;class J{constructor(Se){this.listeners={},this.windowListeners={},Se&&(console.warn(`Capacitor WebPlugin "${Se.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=Se)}addListener(Se,Y){var Ge=this;this.listeners[Se]||(this.listeners[Se]=[]),this.listeners[Se].push(Y);const Ke=this.windowListeners[Se];Ke&&!Ke.registered&&this.addWindowListener(Ke);const $e=function(){var Ze=(0,ue.Z)(function*(){return Ge.removeListener(Se,Y)});return function(){return Ze.apply(this,arguments)}}(),ae=Promise.resolve({remove:$e});return Object.defineProperty(ae,"remove",{value:(Ze=(0,ue.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield $e()}),function(){return Ze.apply(this,arguments)})}),ae;var Ze}removeAllListeners(){var Se=this;return(0,ue.Z)(function*(){Se.listeners={};for(const Y in Se.windowListeners)Se.removeWindowListener(Se.windowListeners[Y]);Se.windowListeners={}})()}notifyListeners(Se,Y){const Ge=this.listeners[Se];Ge&&Ge.forEach(De=>De(Y))}hasListeners(Se){return!!this.listeners[Se].length}registerWindowListener(Se,Y){this.windowListeners[Y]={registered:!1,windowEventName:Se,pluginEventName:Y,handler:Ge=>{this.notifyListeners(Y,Ge)}}}unimplemented(Se="not implemented"){return new je.Exception(Se,He.Unimplemented)}unavailable(Se="not available"){return new je.Exception(Se,He.Unavailable)}removeListener(Se,Y){var Ge=this;return(0,ue.Z)(function*(){const De=Ge.listeners[Se];if(!De)return;const Ke=De.indexOf(Y);Ge.listeners[Se].splice(Ke,1),Ge.listeners[Se].length||Ge.removeWindowListener(Ge.windowListeners[Se])})()}addWindowListener(Se){window.addEventListener(Se.windowEventName,Se.handler),Se.registered=!0}removeWindowListener(Se){Se&&(window.removeEventListener(Se.windowEventName,Se.handler),Se.registered=!1)}}const ee=Ve=>encodeURIComponent(Ve).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ke=Ve=>Ve.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ne extends J{getCookies(){return(0,ue.Z)(function*(){const Se=document.cookie,Y={};return Se.split(";").forEach(Ge=>{if(Ge.length<=0)return;let[De,Ke]=Ge.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");De=ke(De).trim(),Ke=ke(Ke).trim(),Y[De]=Ke}),Y})()}setCookie(Se){return(0,ue.Z)(function*(){try{const Y=ee(Se.key),Ge=ee(Se.value),De=`; expires=${(Se.expires||"").replace("expires=","")}`,Ke=(Se.path||"/").replace("path=",""),$e=null!=Se.url&&Se.url.length>0?`domain=${Se.url}`:"";document.cookie=`${Y}=${Ge||""}${De}; path=${Ke}; ${$e};`}catch(Y){return Promise.reject(Y)}})()}deleteCookie(Se){return(0,ue.Z)(function*(){try{document.cookie=`${Se.key}=; Max-Age=0`}catch(Y){return Promise.reject(Y)}})()}clearCookies(){return(0,ue.Z)(function*(){try{const Se=document.cookie.split(";")||[];for(const Y of Se)document.cookie=Y.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(Se){return Promise.reject(Se)}})()}clearAllCookies(){var Se=this;return(0,ue.Z)(function*(){try{yield Se.clearCookies()}catch(Y){return Promise.reject(Y)}})()}}Nt("CapacitorCookies",{web:()=>new ne});const ye=function(){var Ve=(0,ue.Z)(function*(Se){return new Promise((Y,Ge)=>{const De=new FileReader;De.onload=()=>{const Ke=De.result;Y(Ke.indexOf(",")>=0?Ke.split(",")[1]:Ke)},De.onerror=Ke=>Ge(Ke),De.readAsDataURL(Se)})});return function(Y){return Ve.apply(this,arguments)}}();class be extends J{request(Se){return(0,ue.Z)(function*(){const Y=((Ve,Se={})=>{const Y=Object.assign({method:Ve.method||"GET",headers:Ve.headers},Se),De=((Ve={})=>{const Se=Object.keys(Ve);return Object.keys(Ve).map(De=>De.toLocaleLowerCase()).reduce((De,Ke,$e)=>(De[Ke]=Ve[Se[$e]],De),{})})(Ve.headers)["content-type"]||"";if("string"==typeof Ve.data)Y.body=Ve.data;else if(De.includes("application/x-www-form-urlencoded")){const Ke=new URLSearchParams;for(const[$e,ae]of Object.entries(Ve.data||{}))Ke.set($e,ae);Y.body=Ke.toString()}else if(De.includes("multipart/form-data")){const Ke=new FormData;if(Ve.data instanceof FormData)Ve.data.forEach((ae,Ze)=>{Ke.append(Ze,ae)});else for(const ae of Object.keys(Ve.data))Ke.append(ae,Ve.data[ae]);Y.body=Ke;const $e=new Headers(Y.headers);$e.delete("content-type"),Y.headers=$e}else(De.includes("application/json")||"object"==typeof Ve.data)&&(Y.body=JSON.stringify(Ve.data));return Y})(Se,Se.webFetchExtra),Ge=((Ve,Se=!0)=>Ve?Object.entries(Ve).reduce((Ge,De)=>{const[Ke,$e]=De;let ae,Ze;return Array.isArray($e)?(Ze="",$e.forEach(et=>{ae=Se?encodeURIComponent(et):et,Ze+=`${Ke}=${ae}&`}),Ze.slice(0,-1)):(ae=Se?encodeURIComponent($e):$e,Ze=`${Ke}=${ae}`),`${Ge}&${Ze}`},"").substr(1):null)(Se.params,Se.shouldEncodeUrlParams),De=Ge?`${Se.url}?${Ge}`:Se.url,Ke=yield fetch(De,Y),$e=Ke.headers.get("content-type")||"";let Ze,et,{responseType:ae="text"}=Ke.ok?Se:{};switch($e.includes("application/json")&&(ae="json"),ae){case"arraybuffer":case"blob":et=yield Ke.blob(),Ze=yield ye(et);break;case"json":Ze=yield Ke.json();break;default:Ze=yield Ke.text()}const dn={};return Ke.headers.forEach((qt,_n)=>{dn[_n]=qt}),{data:Ze,headers:dn,status:Ke.status,url:Ke.url}})()}get(Se){var Y=this;return(0,ue.Z)(function*(){return Y.request(Object.assign(Object.assign({},Se),{method:"GET"}))})()}post(Se){var Y=this;return(0,ue.Z)(function*(){return Y.request(Object.assign(Object.assign({},Se),{method:"POST"}))})()}put(Se){var Y=this;return(0,ue.Z)(function*(){return Y.request(Object.assign(Object.assign({},Se),{method:"PUT"}))})()}patch(Se){var Y=this;return(0,ue.Z)(function*(){return Y.request(Object.assign(Object.assign({},Se),{method:"PATCH"}))})()}delete(Se){var Y=this;return(0,ue.Z)(function*(){return Y.request(Object.assign(Object.assign({},Se),{method:"DELETE"}))})()}}Nt("CapacitorHttp",{web:()=>new be})},3630:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{c:()=>Je,r:()=>qe});const Je=(he,se)=>{he.componentOnReady?he.componentOnReady().then(be=>se(be)):qe(()=>se(he))},qe=he=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(he):"function"==typeof requestAnimationFrame?requestAnimationFrame(he):setTimeout(he)},191:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{L:()=>ue,a:()=>Le,b:()=>Je,c:()=>g,d:()=>fe,g:()=>he});const ue="ionViewWillEnter",Le="ionViewDidEnter",Je="ionViewWillLeave",g="ionViewDidLeave",fe="ionViewWillUnload",he=se=>se.classList.contains("ion-page")?se:se.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||se},5062:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{c:()=>we});var ue=Ce(6225),Le=Ce(839);let Je;const fe=J=>J.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ne=J=>(void 0===Je&&(Je=void 0===J.style.animationName&&void 0!==J.style.webkitAnimationName?"-webkit-":""),Je),Oe=(J,Z,ee)=>{const ke=Z.startsWith("animation")?Ne(J):"";J.style.setProperty(ke+Z,ee)},He=(J,Z)=>{const ee=Z.startsWith("animation")?Ne(J):"";J.style.removeProperty(ee+Z)},qe=[],le=(J=[],Z)=>{if(void 0!==Z){const ee=Array.isArray(Z)?Z:[Z];return[...J,...ee]}return J},we=J=>{let Z,ee,ke,ne,K,ye,ie,ae,Ze,et,dn,ei,Vt,Q=[],he=[],se=[],be=!1,Ve={},Se=[],Y=[],Ge={},De=0,Ke=!1,$e=!1,qt=!0,_n=!1,kn=!0,vi=!1;const Tn=J,Un=[],cn=[],Lt=[],Cn=[],Gn=[],At=[],Ae=[],Te=[],Ee=[],lt=[],Mt=[],ln="function"==typeof AnimationEffect||void 0!==ue.w&&"function"==typeof ue.w.AnimationEffect,Fn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&ln,yn=()=>Mt,wr=(Re,ut)=>{const kt=ut.findIndex(rn=>rn.c===Re);kt>-1&&ut.splice(kt,1)},gr=(Re,ut)=>((ut?.oneTimeCallback?cn:Un).push({c:Re,o:ut}),Vt),zr=()=>{if(Fn)Mt.forEach(Re=>{Re.cancel()}),Mt.length=0;else{const Re=Cn.slice();(0,Le.r)(()=>{Re.forEach(ut=>{He(ut,"animation-name"),He(ut,"animation-duration"),He(ut,"animation-timing-function"),He(ut,"animation-iteration-count"),He(ut,"animation-delay"),He(ut,"animation-play-state"),He(ut,"animation-fill-mode"),He(ut,"animation-direction")})})}},bo=()=>{At.forEach(Re=>{Re?.parentNode&&Re.parentNode.removeChild(Re)}),At.length=0},Zn=()=>void 0!==K?K:ie?ie.getFill():"both",yr=()=>void 0!==Ze?Ze:void 0!==ye?ye:ie?ie.getDirection():"normal",Cr=()=>Ke?"linear":void 0!==ke?ke:ie?ie.getEasing():"linear",sr=()=>$e?0:void 0!==et?et:void 0!==ee?ee:ie?ie.getDuration():0,Zi=()=>void 0!==ne?ne:ie?ie.getIterations():1,Sr=()=>void 0!==dn?dn:void 0!==Z?Z:ie?ie.getDelay():0,to=()=>{0!==De&&(De--,0===De&&((()=>{We(),Ee.forEach(vn=>vn()),lt.forEach(vn=>vn());const Re=qt?1:0,ut=Se,kt=Y,rn=Ge;Cn.forEach(vn=>{const xt=vn.classList;ut.forEach(Pn=>xt.add(Pn)),kt.forEach(Pn=>xt.remove(Pn));for(const Pn in rn)rn.hasOwnProperty(Pn)&&Oe(vn,Pn,rn[Pn])}),Un.forEach(vn=>vn.c(Re,Vt)),cn.forEach(vn=>vn.c(Re,Vt)),cn.length=0,kn=!0,qt&&(_n=!0),qt=!0})(),ie&&ie.animationFinish()))},Vr=(Re=!0)=>{bo();const ut=(J=>(J.forEach(Z=>{for(const ee in Z)if(Z.hasOwnProperty(ee)){const ke=Z[ee];if("easing"===ee)Z["animation-timing-function"]=ke,delete Z[ee];else{const ne=fe(ee);ne!==ee&&(Z[ne]=ke,delete Z[ee])}}}),J))(Q);Cn.forEach(kt=>{if(ut.length>0){const rn=((J=[])=>J.map(Z=>{const ee=Z.offset,ke=[];for(const ne in Z)Z.hasOwnProperty(ne)&&"offset"!==ne&&ke.push(`${ne}: ${Z[ne]};`);return`${100*ee}% { ${ke.join(" ")} }`}).join(" "))(ut);ei=void 0!==J?J:(J=>{let Z=qe.indexOf(J);return Z<0&&(Z=qe.push(J)-1),`ion-animation-${Z}`})(rn);const vn=((J,Z,ee)=>{var ke;const ne=(J=>{const Z=void 0!==J.getRootNode?J.getRootNode():J;return Z.head||Z})(ee),K=Ne(ee),ye=ne.querySelector("#"+J);if(ye)return ye;const Q=(null!==(ke=ee.ownerDocument)&&void 0!==ke?ke:document).createElement("style");return Q.id=J,Q.textContent=`@${K}keyframes ${J} { ${Z} } @${K}keyframes ${J}-alt { ${Z} }`,ne.appendChild(Q),Q})(ei,rn,kt);At.push(vn),Oe(kt,"animation-duration",`${sr()}ms`),Oe(kt,"animation-timing-function",Cr()),Oe(kt,"animation-delay",`${Sr()}ms`),Oe(kt,"animation-fill-mode",Zn()),Oe(kt,"animation-direction",yr());const xt=Zi()===1/0?"infinite":Zi().toString();Oe(kt,"animation-iteration-count",xt),Oe(kt,"animation-play-state","paused"),Re&&Oe(kt,"animation-name",`${vn.id}-alt`),(0,Le.r)(()=>{Oe(kt,"animation-name",vn.id||null)})}})},so=(Re=!0)=>{(()=>{Ae.forEach(rn=>rn()),Te.forEach(rn=>rn());const Re=he,ut=se,kt=Ve;Cn.forEach(rn=>{const vn=rn.classList;Re.forEach(xt=>vn.add(xt)),ut.forEach(xt=>vn.remove(xt));for(const xt in kt)kt.hasOwnProperty(xt)&&Oe(rn,xt,kt[xt])})})(),Q.length>0&&(Fn?(Cn.forEach(Re=>{const ut=Re.animate(Q,{id:Tn,delay:Sr(),duration:sr(),easing:Cr(),iterations:Zi(),fill:Zn(),direction:yr()});ut.pause(),Mt.push(ut)}),Mt.length>0&&(Mt[0].onfinish=()=>{to()})):Vr(Re)),be=!0},Ns=Re=>{if(Re=Math.min(Math.max(Re,0),.9999),Fn)Mt.forEach(ut=>{ut.currentTime=ut.effect.getComputedTiming().delay+sr()*Re,ut.pause()});else{const ut=`-${sr()*Re}ms`;Cn.forEach(kt=>{Q.length>0&&(Oe(kt,"animation-delay",ut),Oe(kt,"animation-play-state","paused"))})}},No=Re=>{Mt.forEach(ut=>{ut.effect.updateTiming({delay:Sr(),duration:sr(),easing:Cr(),iterations:Zi(),fill:Zn(),direction:yr()})}),void 0!==Re&&Ns(Re)},no=(Re=!0,ut)=>{(0,Le.r)(()=>{Cn.forEach(kt=>{Oe(kt,"animation-name",ei||null),Oe(kt,"animation-duration",`${sr()}ms`),Oe(kt,"animation-timing-function",Cr()),Oe(kt,"animation-delay",void 0!==ut?`-${ut*sr()}ms`:`${Sr()}ms`),Oe(kt,"animation-fill-mode",Zn()||null),Oe(kt,"animation-direction",yr()||null);const rn=Zi()===1/0?"infinite":Zi().toString();Oe(kt,"animation-iteration-count",rn),Re&&Oe(kt,"animation-name",`${ei}-alt`),(0,Le.r)(()=>{Oe(kt,"animation-name",ei||null)})})})},ar=(Re=!1,ut=!0,kt)=>(Re&&Gn.forEach(rn=>{rn.update(Re,ut,kt)}),Fn?No(kt):no(ut,kt),Vt),ws=()=>{be&&(Fn?Mt.forEach(Re=>{Re.pause()}):Cn.forEach(Re=>{Oe(Re,"animation-play-state","paused")}),vi=!0)},Tl=()=>{ae=void 0,to()},We=()=>{ae&&clearTimeout(ae)},Ot=Re=>new Promise(ut=>{Re?.sync&&($e=!0,gr(()=>$e=!1,{oneTimeCallback:!0})),be||so(),_n&&(Fn?(Ns(0),No()):no(),_n=!1),kn&&(De=Gn.length+1,kn=!1);const kt=()=>{wr(rn,cn),ut()},rn=()=>{wr(kt,Lt),ut()};gr(rn,{oneTimeCallback:!0}),((Re,ut)=>{Lt.push({c:Re,o:{oneTimeCallback:!0}})})(kt),Gn.forEach(vn=>{vn.play()}),Fn?(Mt.forEach(Re=>{Re.play()}),(0===Q.length||0===Cn.length)&&to()):(()=>{if(We(),(0,Le.r)(()=>{Cn.forEach(Re=>{Q.length>0&&Oe(Re,"animation-play-state","running")})}),0===Q.length||0===Cn.length)to();else{const Re=Sr()||0,ut=sr()||0,kt=Zi()||1;isFinite(kt)&&(ae=setTimeout(Tl,Re+ut*kt+100)),((J,Z)=>{let ee;const ke={passive:!0},K=ye=>{J===ye.target&&(ee&&ee(),We(),(0,Le.r)(()=>{Cn.forEach(Re=>{He(Re,"animation-duration"),He(Re,"animation-delay"),He(Re,"animation-play-state")}),(0,Le.r)(to)}))};J&&(J.addEventListener("webkitAnimationEnd",K,ke),J.addEventListener("animationend",K,ke),ee=()=>{J.removeEventListener("webkitAnimationEnd",K,ke),J.removeEventListener("animationend",K,ke)})})(Cn[0])}})(),vi=!1}),ge=(Re,ut)=>{const kt=Q[0];return void 0===kt||void 0!==kt.offset&&0!==kt.offset?Q=[{offset:0,[Re]:ut},...Q]:kt[Re]=ut,Vt};return Vt={parentAnimation:ie,elements:Cn,childAnimations:Gn,id:Tn,animationFinish:to,from:ge,to:(Re,ut)=>{const kt=Q[Q.length-1];return void 0===kt||void 0!==kt.offset&&1!==kt.offset?Q=[...Q,{offset:1,[Re]:ut}]:kt[Re]=ut,Vt},fromTo:(Re,ut,kt)=>ge(Re,ut).to(Re,kt),parent:Re=>(ie=Re,Vt),play:Ot,pause:()=>(Gn.forEach(Re=>{Re.pause()}),ws(),Vt),stop:()=>{Gn.forEach(Re=>{Re.stop()}),be&&(zr(),be=!1),Ke=!1,$e=!1,kn=!0,Ze=void 0,et=void 0,dn=void 0,De=0,_n=!1,qt=!0,vi=!1,Lt.forEach(Re=>Re.c(0,Vt)),Lt.length=0},destroy:Re=>(Gn.forEach(ut=>{ut.destroy(Re)}),(Re=>{zr(),Re&&bo()})(Re),Cn.length=0,Gn.length=0,Q.length=0,Un.length=0,cn.length=0,be=!1,kn=!0,Vt),keyframes:Re=>{const ut=Q!==Re;return Q=Re,ut&&(Re=>{Fn?yn().forEach(ut=>{if(ut.effect.setKeyframes)ut.effect.setKeyframes(Re);else{const kt=new KeyframeEffect(ut.effect.target,Re,ut.effect.getTiming());ut.effect=kt}}):Vr()})(Q),Vt},addAnimation:Re=>{if(null!=Re)if(Array.isArray(Re))for(const ut of Re)ut.parent(Vt),Gn.push(ut);else Re.parent(Vt),Gn.push(Re);return Vt},addElement:Re=>{if(null!=Re)if(1===Re.nodeType)Cn.push(Re);else if(Re.length>=0)for(let ut=0;ut<Re.length;ut++)Cn.push(Re[ut]);else console.error("Invalid addElement value");return Vt},update:ar,fill:Re=>(K=Re,ar(!0),Vt),direction:Re=>(ye=Re,ar(!0),Vt),iterations:Re=>(ne=Re,ar(!0),Vt),duration:Re=>(!Fn&&0===Re&&(Re=1),ee=Re,ar(!0),Vt),easing:Re=>(ke=Re,ar(!0),Vt),delay:Re=>(Z=Re,ar(!0),Vt),getWebAnimations:yn,getKeyframes:()=>Q,getFill:Zn,getDirection:yr,getDelay:Sr,getIterations:Zi,getEasing:Cr,getDuration:sr,afterAddRead:Re=>(Ee.push(Re),Vt),afterAddWrite:Re=>(lt.push(Re),Vt),afterClearStyles:(Re=[])=>{for(const ut of Re)Ge[ut]="";return Vt},afterStyles:(Re={})=>(Ge=Re,Vt),afterRemoveClass:Re=>(Y=le(Y,Re),Vt),afterAddClass:Re=>(Se=le(Se,Re),Vt),beforeAddRead:Re=>(Ae.push(Re),Vt),beforeAddWrite:Re=>(Te.push(Re),Vt),beforeClearStyles:(Re=[])=>{for(const ut of Re)Ve[ut]="";return Vt},beforeStyles:(Re={})=>(Ve=Re,Vt),beforeRemoveClass:Re=>(se=le(se,Re),Vt),beforeAddClass:Re=>(he=le(he,Re),Vt),onFinish:gr,isRunning:()=>0!==De&&!vi,progressStart:(Re=!1,ut)=>(Gn.forEach(kt=>{kt.progressStart(Re,ut)}),ws(),Ke=Re,be||so(),ar(!1,!0,ut),Vt),progressStep:Re=>(Gn.forEach(ut=>{ut.progressStep(Re)}),Ns(Re),Vt),progressEnd:(Re,ut,kt)=>(Ke=!1,Gn.forEach(rn=>{rn.progressEnd(Re,ut,kt)}),void 0!==kt&&(et=kt),_n=!1,qt=!0,0===Re?(Ze="reverse"===yr()?"normal":"reverse","reverse"===Ze&&(qt=!1),Fn?(ar(),Ns(1-ut)):(dn=(1-ut)*sr()*-1,ar(!1,!1))):1===Re&&(Fn?(ar(),Ns(ut)):(dn=ut*sr()*-1,ar(!1,!1))),void 0!==Re&&(gr(()=>{et=void 0,Ze=void 0,dn=void 0},{oneTimeCallback:!0}),ie||Ot()),Vt)}}},3365:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{E:()=>Ht,a:()=>ue,s:()=>He});const ue=qe=>{try{if(qe instanceof Oe)return qe.value;if(!g()||"string"!=typeof qe||""===qe)return qe;if(qe.includes("onload="))return"";const Qe=document.createDocumentFragment(),je=document.createElement("div");Qe.appendChild(je),je.innerHTML=qe,Ne.forEach(J=>{const Z=Qe.querySelectorAll(J);for(let ee=Z.length-1;ee>=0;ee--){const ke=Z[ee];ke.parentNode?ke.parentNode.removeChild(ke):Qe.removeChild(ke);const ne=Je(ke);for(let K=0;K<ne.length;K++)Le(ne[K])}});const Nt=Je(Qe);for(let J=0;J<Nt.length;J++)Le(Nt[J]);const le=document.createElement("div");le.appendChild(Qe);const we=le.querySelector("div");return null!==we?we.innerHTML:le.innerHTML}catch(Qe){return console.error(Qe),""}},Le=qe=>{if(qe.nodeType&&1!==qe.nodeType)return;if(typeof NamedNodeMap<"u"&&!(qe.attributes instanceof NamedNodeMap))return void qe.remove();for(let je=qe.attributes.length-1;je>=0;je--){const Nt=qe.attributes.item(je),le=Nt.name;if(!fe.includes(le.toLowerCase())){qe.removeAttribute(le);continue}const we=Nt.value,J=qe[le];(null!=we&&we.toLowerCase().includes("javascript:")||null!=J&&J.toLowerCase().includes("javascript:"))&&qe.removeAttribute(le)}const Qe=Je(qe);for(let je=0;je<Qe.length;je++)Le(Qe[je])},Je=qe=>null!=qe.children?qe.children:qe.childNodes,g=()=>{var qe;const Qe=window,je=null===(qe=Qe?.Ionic)||void 0===qe?void 0:qe.config;return!je||(je.get?je.get("sanitizerEnabled",!0):!0===je.sanitizerEnabled||void 0===je.sanitizerEnabled)},fe=["class","id","href","src","name","slot"],Ne=["script","style","iframe","meta","link","object","embed"];class Oe{constructor(Qe){this.value=Qe}}const He=qe=>{const Qe=window,je=Qe.Ionic;if(!je||!je.config||"Object"===je.config.constructor.name)return Qe.Ionic=Qe.Ionic||{},Qe.Ionic.config=Object.assign(Object.assign({},Qe.Ionic.config),qe),Qe.Ionic.config},Ht=!1},6559:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{C:()=>fe,a:()=>Je,d:()=>g});var ue=Ce(5861),Le=Ce(839);const Je=function(){var Ne=(0,ue.Z)(function*(Oe,He,ct,Ht,qe,Qe){var je;if(Oe)return Oe.attachViewToDom(He,ct,qe,Ht);if(!(Qe||"string"==typeof ct||ct instanceof HTMLElement))throw new Error("framework delegate is missing");const Nt="string"==typeof ct?null===(je=He.ownerDocument)||void 0===je?void 0:je.createElement(ct):ct;return Ht&&Ht.forEach(le=>Nt.classList.add(le)),qe&&Object.assign(Nt,qe),He.appendChild(Nt),yield new Promise(le=>(0,Le.c)(Nt,le)),Nt});return function(He,ct,Ht,qe,Qe,je){return Ne.apply(this,arguments)}}(),g=(Ne,Oe)=>{if(Oe){if(Ne)return Ne.removeViewFromDom(Oe.parentElement,Oe);Oe.remove()}return Promise.resolve()},fe=()=>{let Ne,Oe;return{attachViewToDom:function(){var Ht=(0,ue.Z)(function*(qe,Qe,je={},Nt=[]){var le,we;let J;if(Ne=qe,Qe){const ee="string"==typeof Qe?null===(le=Ne.ownerDocument)||void 0===le?void 0:le.createElement(Qe):Qe;Nt.forEach(ke=>ee.classList.add(ke)),Object.assign(ee,je),Ne.appendChild(ee),J=ee,yield new Promise(ke=>(0,Le.c)(ee,ke))}else if(Ne.children.length>0&&("ION-MODAL"===Ne.tagName||"ION-POPOVER"===Ne.tagName)&&!(J=Ne.children[0]).classList.contains("ion-delegate-host")){const ke=null===(we=Ne.ownerDocument)||void 0===we?void 0:we.createElement("div");ke.classList.add("ion-delegate-host"),Nt.forEach(ne=>ke.classList.add(ne)),ke.append(...Ne.children),Ne.appendChild(ke),J=ke}const Z=document.querySelector("ion-app")||document.body;return Oe=document.createComment("ionic teleport"),Ne.parentNode.insertBefore(Oe,Ne),Z.appendChild(Ne),J??Ne});return function(Qe,je){return Ht.apply(this,arguments)}}(),removeViewFromDom:()=>(Ne&&Oe&&(Oe.parentNode.insertBefore(Ne,Oe),Oe.remove()),Promise.resolve())}}},619:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{G:()=>fe});class Le{constructor(Oe,He,ct,Ht,qe){this.id=He,this.name=ct,this.disableScroll=qe,this.priority=1e6*Ht+He,this.ctrl=Oe}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Oe=this.ctrl.capture(this.name,this.id,this.priority);return Oe&&this.disableScroll&&this.ctrl.disableScroll(this.id),Oe}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Je{constructor(Oe,He,ct,Ht){this.id=He,this.disable=ct,this.disableScroll=Ht,this.ctrl=Oe}block(){if(this.ctrl){if(this.disable)for(const Oe of this.disable)this.ctrl.disableGesture(Oe,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Oe of this.disable)this.ctrl.enableGesture(Oe,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const g="backdrop-no-scroll",fe=new class ue{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Oe){var He;return new Le(this,this.newID(),Oe.name,null!==(He=Oe.priority)&&void 0!==He?He:0,!!Oe.disableScroll)}createBlocker(Oe={}){return new Je(this,this.newID(),Oe.disable,!!Oe.disableScroll)}start(Oe,He,ct){return this.canStart(Oe)?(this.requestedStart.set(He,ct),!0):(this.requestedStart.delete(He),!1)}capture(Oe,He,ct){if(!this.start(Oe,He,ct))return!1;const Ht=this.requestedStart;let qe=-1e4;if(Ht.forEach(Qe=>{qe=Math.max(qe,Qe)}),qe===ct){this.capturedId=He,Ht.clear();const Qe=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Oe}});return document.dispatchEvent(Qe),!0}return Ht.delete(He),!1}release(Oe){this.requestedStart.delete(Oe),this.capturedId===Oe&&(this.capturedId=void 0)}disableGesture(Oe,He){let ct=this.disabledGestures.get(Oe);void 0===ct&&(ct=new Set,this.disabledGestures.set(Oe,ct)),ct.add(He)}enableGesture(Oe,He){const ct=this.disabledGestures.get(Oe);void 0!==ct&&ct.delete(He)}disableScroll(Oe){this.disabledScroll.add(Oe),1===this.disabledScroll.size&&document.body.classList.add(g)}enableScroll(Oe){this.disabledScroll.delete(Oe),0===this.disabledScroll.size&&document.body.classList.remove(g)}canStart(Oe){return!(void 0!==this.capturedId||this.isDisabled(Oe))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Oe){const He=this.disabledGestures.get(Oe);return!!(He&&He.size>0)}newID(){return this.gestureId++,this.gestureId}}},2124:(An,Rt,Ce)=>{"use strict";Ce.r(Rt),Ce.d(Rt,{MENU_BACK_BUTTON_PRIORITY:()=>fe,OVERLAY_BACK_BUTTON_PRIORITY:()=>g,blockHardwareBackButton:()=>Le,startHardwareBackButton:()=>Je});var ue=Ce(5861);const Le=()=>{document.addEventListener("backbutton",()=>{})},Je=()=>{const Ne=document;let Oe=!1;Ne.addEventListener("backbutton",()=>{if(Oe)return;let He=0,ct=[];const Ht=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(je,Nt){ct.push({priority:je,handler:Nt,id:He++})}}});Ne.dispatchEvent(Ht);const qe=function(){var je=(0,ue.Z)(function*(Nt){try{if(Nt?.handler){const le=Nt.handler(Qe);null!=le&&(yield le)}}catch(le){console.error(le)}});return function(le){return je.apply(this,arguments)}}(),Qe=()=>{if(ct.length>0){let je={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ct.forEach(Nt=>{Nt.priority>=je.priority&&(je=Nt)}),Oe=!0,ct=ct.filter(Nt=>Nt.id!==je.id),qe(je).then(()=>Oe=!1)}};Qe()})},g=100,fe=99},839:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{a:()=>He,b:()=>ct,c:()=>Je,d:()=>we,e:()=>le,f:()=>Nt,g:()=>Ht,h:()=>je,i:()=>Oe,j:()=>K,k:()=>fe,l:()=>J,m:()=>g,n:()=>Qe,o:()=>Z,p:()=>ne,q:()=>ye,r:()=>qe,s:()=>Q,t:()=>ue,u:()=>ee,v:()=>ke});const ue=(he,se=0)=>new Promise(be=>{Le(he,se,be)}),Le=(he,se=0,be)=>{let ie,Ve;const Se={passive:!0},Ge=()=>{ie&&ie()},De=Ke=>{(void 0===Ke||he===Ke.target)&&(Ge(),be(Ke))};return he&&(he.addEventListener("webkitTransitionEnd",De,Se),he.addEventListener("transitionend",De,Se),Ve=setTimeout(De,se+500),ie=()=>{Ve&&(clearTimeout(Ve),Ve=void 0),he.removeEventListener("webkitTransitionEnd",De,Se),he.removeEventListener("transitionend",De,Se)}),Ge},Je=(he,se)=>{he.componentOnReady?he.componentOnReady().then(be=>se(be)):qe(()=>se(he))},g=he=>void 0!==he.componentOnReady,fe=(he,se=[])=>{const be={};return se.forEach(ie=>{he.hasAttribute(ie)&&(null!==he.getAttribute(ie)&&(be[ie]=he.getAttribute(ie)),he.removeAttribute(ie))}),be},Ne=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Oe=(he,se)=>{let be=Ne;return se&&se.length>0&&(be=be.filter(ie=>!se.includes(ie))),fe(he,be)},He=(he,se,be,ie)=>{var Ve;if(typeof window<"u"){const Se=window,Y=null===(Ve=Se?.Ionic)||void 0===Ve?void 0:Ve.config;if(Y){const Ge=Y.get("_ael");if(Ge)return Ge(he,se,be,ie);if(Y._ael)return Y._ael(he,se,be,ie)}}return he.addEventListener(se,be,ie)},ct=(he,se,be,ie)=>{var Ve;if(typeof window<"u"){const Se=window,Y=null===(Ve=Se?.Ionic)||void 0===Ve?void 0:Ve.config;if(Y){const Ge=Y.get("_rel");if(Ge)return Ge(he,se,be,ie);if(Y._rel)return Y._rel(he,se,be,ie)}}return he.removeEventListener(se,be,ie)},Ht=(he,se=he)=>he.shadowRoot||se,qe=he=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(he):"function"==typeof requestAnimationFrame?requestAnimationFrame(he):setTimeout(he),Qe=he=>!!he.shadowRoot&&!!he.attachShadow,je=he=>{const se=he.closest("ion-item");return se?se.querySelector("ion-label"):null},Nt=he=>{if(he.focus(),he.classList.contains("ion-focusable")){const se=he.closest("ion-app");se&&se.setFocus([he])}},le=(he,se)=>{let be;const ie=he.getAttribute("aria-labelledby"),Ve=he.id;let Se=null!==ie&&""!==ie.trim()?ie:se+"-lbl",Y=null!==ie&&""!==ie.trim()?document.getElementById(ie):je(he);return Y?(null===ie&&(Y.id=Se),be=Y.textContent,Y.setAttribute("aria-hidden","true")):""!==Ve.trim()&&(Y=document.querySelector(`label[for="${Ve}"]`),Y&&(""!==Y.id?Se=Y.id:Y.id=Se=`${Ve}-lbl`,be=Y.textContent)),{label:Y,labelId:Se,labelText:be}},we=(he,se,be,ie,Ve)=>{if(he||Qe(se)){let Se=se.querySelector("input.aux-input");Se||(Se=se.ownerDocument.createElement("input"),Se.type="hidden",Se.classList.add("aux-input"),se.appendChild(Se)),Se.disabled=Ve,Se.name=be,Se.value=ie||""}},J=(he,se,be)=>Math.max(he,Math.min(se,be)),Z=(he,se)=>{if(!he){const be="ASSERT: "+se;throw console.error(be),new Error(be)}},ee=he=>he.timeStamp||Date.now(),ke=he=>{if(he){const se=he.changedTouches;if(se&&se.length>0){const be=se[0];return{x:be.clientX,y:be.clientY}}if(void 0!==he.pageX)return{x:he.pageX,y:he.pageY}}return{x:0,y:0}},ne=he=>{const se="rtl"===document.dir;switch(he){case"start":return se;case"end":return!se;default:throw new Error(`"${he}" is not a valid value for [side]. Use "start" or "end" instead.`)}},K=(he,se)=>{const be=he._original||he;return{_original:he,emit:ye(be.emit.bind(be),se)}},ye=(he,se=0)=>{let be;return(...ie)=>{clearTimeout(be),be=setTimeout(he,se,...ie)}},Q=(he,se)=>{if(he??(he={}),se??(se={}),he===se)return!0;const be=Object.keys(he);if(be.length!==Object.keys(se).length)return!1;for(const ie of be)if(!(ie in se)||he[ie]!==se[ie])return!1;return!0}},6710:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{a:()=>Le,b:()=>Je,p:()=>ue});const ue=(g,...fe)=>console.warn(`[Ionic Warning]: ${g}`,...fe),Le=(g,...fe)=>console.error(`[Ionic Error]: ${g}`,...fe),Je=(g,...fe)=>console.error(`<${g.tagName.toLowerCase()}> must be used inside ${fe.join(" or ")}.`)},6225:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{d:()=>Le,w:()=>ue});const ue=typeof window<"u"?window:void 0,Le=typeof document<"u"?document:void 0},6323:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{b:()=>Ne,c:()=>Oe,d:()=>He,e:()=>he,g:()=>ie,l:()=>ye,s:()=>se,t:()=>qe,w:()=>Q});var ue=Ce(5861),Le=Ce(8411),Je=Ce(839);const Ne="ionViewWillLeave",Oe="ionViewDidLeave",He="ionViewWillUnload",qe=Ve=>new Promise((Se,Y)=>{(0,Le.w)(()=>{Qe(Ve),je(Ve).then(Ge=>{Ge.animation&&Ge.animation.destroy(),Nt(Ve),Se(Ge)},Ge=>{Nt(Ve),Y(Ge)})})}),Qe=Ve=>{const Se=Ve.enteringEl,Y=Ve.leavingEl;be(Se,Y,Ve.direction),Ve.showGoBack?Se.classList.add("can-go-back"):Se.classList.remove("can-go-back"),se(Se,!1),Se.style.setProperty("pointer-events","none"),Y&&(se(Y,!1),Y.style.setProperty("pointer-events","none"))},je=function(){var Ve=(0,ue.Z)(function*(Se){const Y=yield le(Se);return Y&&Le.B.isBrowser?we(Y,Se):J(Se)});return function(Y){return Ve.apply(this,arguments)}}(),Nt=Ve=>{const Se=Ve.enteringEl,Y=Ve.leavingEl;Se.classList.remove("ion-page-invisible"),Se.style.removeProperty("pointer-events"),void 0!==Y&&(Y.classList.remove("ion-page-invisible"),Y.style.removeProperty("pointer-events"))},le=function(){var Ve=(0,ue.Z)(function*(Se){return Se.leavingEl&&Se.animated&&0!==Se.duration?Se.animationBuilder?Se.animationBuilder:"ios"===Se.mode?(yield Promise.resolve().then(Ce.bind(Ce,2510))).iosTransitionAnimation:(yield Promise.resolve().then(Ce.bind(Ce,6003))).mdTransitionAnimation:void 0});return function(Y){return Ve.apply(this,arguments)}}(),we=function(){var Ve=(0,ue.Z)(function*(Se,Y){yield Z(Y,!0);const Ge=Se(Y.baseEl,Y);ne(Y.enteringEl,Y.leavingEl);const De=yield ke(Ge,Y);return Y.progressCallback&&Y.progressCallback(void 0),De&&K(Y.enteringEl,Y.leavingEl),{hasCompleted:De,animation:Ge}});return function(Y,Ge){return Ve.apply(this,arguments)}}(),J=function(){var Ve=(0,ue.Z)(function*(Se){const Y=Se.enteringEl,Ge=Se.leavingEl;return yield Z(Se,!1),ne(Y,Ge),K(Y,Ge),{hasCompleted:!0}});return function(Y){return Ve.apply(this,arguments)}}(),Z=function(){var Ve=(0,ue.Z)(function*(Se,Y){(void 0!==Se.deepWait?Se.deepWait:Y)&&(yield Promise.all([he(Se.enteringEl),he(Se.leavingEl)])),yield ee(Se.viewIsReady,Se.enteringEl)});return function(Y,Ge){return Ve.apply(this,arguments)}}(),ee=function(){var Ve=(0,ue.Z)(function*(Se,Y){Se&&(yield Se(Y))});return function(Y,Ge){return Ve.apply(this,arguments)}}(),ke=(Ve,Se)=>{const Y=Se.progressCallback,Ge=new Promise(De=>{Ve.onFinish(Ke=>De(1===Ke))});return Y?(Ve.progressStart(!0),Y(Ve)):Ve.play(),Ge},ne=(Ve,Se)=>{ye(Se,Ne),ye(Ve,"ionViewWillEnter")},K=(Ve,Se)=>{ye(Ve,"ionViewDidEnter"),ye(Se,Oe)},ye=(Ve,Se)=>{if(Ve){const Y=new CustomEvent(Se,{bubbles:!1,cancelable:!1});Ve.dispatchEvent(Y)}},Q=()=>new Promise(Ve=>(0,Je.r)(()=>(0,Je.r)(()=>Ve()))),he=function(){var Ve=(0,ue.Z)(function*(Se){const Y=Se;if(Y){if(null!=Y.componentOnReady){if(null!=(yield Y.componentOnReady()))return}else if(null!=Y.__registerHost)return void(yield new Promise(De=>(0,Je.r)(De)));yield Promise.all(Array.from(Y.children).map(he))}});return function(Y){return Ve.apply(this,arguments)}}(),se=(Ve,Se)=>{Se?(Ve.setAttribute("aria-hidden","true"),Ve.classList.add("ion-page-hidden")):(Ve.hidden=!1,Ve.removeAttribute("aria-hidden"),Ve.classList.remove("ion-page-hidden"))},be=(Ve,Se,Y)=>{void 0!==Ve&&(Ve.style.zIndex="back"===Y?"99":"101"),void 0!==Se&&(Se.style.zIndex="100")},ie=Ve=>Ve.classList.contains("ion-page")?Ve:Ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ve},8411:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{B:()=>qe,H:()=>Ge,a:()=>Mn,b:()=>nn,c:()=>_n,d:()=>vi,e:()=>St,f:()=>Vt,g:()=>kn,h:()=>Se,i:()=>It,j:()=>Qe,r:()=>_r,w:()=>Ot});var ue=Ce(5861);let Je,g,fe,Ne=!1,Oe=!1,He=!1,ct=!1,Ht=!1;const qe={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Qe=ce=>{const ge=new URL(ce,ar.$resourcesUrl$);return ge.origin!==No.location.origin?ge.href:ge.pathname},ee="s-id",ke="sty-id",ye="http://www.w3.org/1999/xlink",Q={},ie=ce=>"object"==(ce=typeof ce)||"function"===ce;function Ve(ce){var ge,nt,yt;return null!==(yt=null===(nt=null===(ge=ce.head)||void 0===ge?void 0:ge.querySelector('meta[name="csp-nonce"]'))||void 0===nt?void 0:nt.getAttribute("content"))&&void 0!==yt?yt:void 0}const Se=(ce,ge,...nt)=>{let yt=null,Re=null,ut=null,kt=!1,rn=!1;const vn=[],xt=$i=>{for(let ur=0;ur<$i.length;ur++)yt=$i[ur],Array.isArray(yt)?xt(yt):null!=yt&&"boolean"!=typeof yt&&((kt="function"!=typeof ce&&!ie(yt))&&(yt=String(yt)),kt&&rn?vn[vn.length-1].$text$+=yt:vn.push(kt?Y(null,yt):yt),rn=kt)};if(xt(nt),ge){ge.key&&(Re=ge.key),ge.name&&(ut=ge.name);{const $i=ge.className||ge.class;$i&&(ge.class="object"!=typeof $i?$i:Object.keys($i).filter(ur=>$i[ur]).join(" "))}}if("function"==typeof ce)return ce(null===ge?{}:ge,vn,Ke);const Pn=Y(ce,null);return Pn.$attrs$=ge,vn.length>0&&(Pn.$children$=vn),Pn.$key$=Re,Pn.$name$=ut,Pn},Y=(ce,ge)=>({$flags$:0,$tag$:ce,$text$:ge,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Ge={},Ke={forEach:(ce,ge)=>ce.map($e).forEach(ge),map:(ce,ge)=>ce.map($e).map(ge).map(ae)},$e=ce=>({vattrs:ce.$attrs$,vchildren:ce.$children$,vkey:ce.$key$,vname:ce.$name$,vtag:ce.$tag$,vtext:ce.$text$}),ae=ce=>{if("function"==typeof ce.vtag){const nt=Object.assign({},ce.vattrs);return ce.vkey&&(nt.key=ce.vkey),ce.vname&&(nt.name=ce.vname),Se(ce.vtag,nt,...ce.vchildren||[])}const ge=Y(ce.vtag,ce.vtext);return ge.$attrs$=ce.vattrs,ge.$children$=ce.vchildren,ge.$key$=ce.vkey,ge.$name$=ce.vname,ge},et=(ce,ge,nt,yt,Re,ut,kt)=>{let rn,vn,xt,Pn;if(1===ut.nodeType){for(rn=ut.getAttribute("c-id"),rn&&(vn=rn.split("."),(vn[0]===kt||"0"===vn[0])&&(xt={$flags$:0,$hostId$:vn[0],$nodeId$:vn[1],$depth$:vn[2],$index$:vn[3],$tag$:ut.tagName.toLowerCase(),$elm$:ut,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ge.push(xt),ut.removeAttribute("c-id"),ce.$children$||(ce.$children$=[]),ce.$children$[xt.$index$]=xt,ce=xt,yt&&"0"===xt.$depth$&&(yt[xt.$index$]=xt.$elm$))),Pn=ut.childNodes.length-1;Pn>=0;Pn--)et(ce,ge,nt,yt,Re,ut.childNodes[Pn],kt);if(ut.shadowRoot)for(Pn=ut.shadowRoot.childNodes.length-1;Pn>=0;Pn--)et(ce,ge,nt,yt,Re,ut.shadowRoot.childNodes[Pn],kt)}else if(8===ut.nodeType)vn=ut.nodeValue.split("."),(vn[1]===kt||"0"===vn[1])&&(rn=vn[0],xt={$flags$:0,$hostId$:vn[1],$nodeId$:vn[2],$depth$:vn[3],$index$:vn[4],$elm$:ut,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===rn?(xt.$elm$=ut.nextSibling,xt.$elm$&&3===xt.$elm$.nodeType&&(xt.$text$=xt.$elm$.textContent,ge.push(xt),ut.remove(),ce.$children$||(ce.$children$=[]),ce.$children$[xt.$index$]=xt,yt&&"0"===xt.$depth$&&(yt[xt.$index$]=xt.$elm$))):xt.$hostId$===kt&&("s"===rn?(xt.$tag$="slot",ut["s-sn"]=vn[5]?xt.$name$=vn[5]:"",ut["s-sr"]=!0,yt&&(xt.$elm$=no.createElement(xt.$tag$),xt.$name$&&xt.$elm$.setAttribute("name",xt.$name$),ut.parentNode.insertBefore(xt.$elm$,ut),ut.remove(),"0"===xt.$depth$&&(yt[xt.$index$]=xt.$elm$)),nt.push(xt),ce.$children$||(ce.$children$=[]),ce.$children$[xt.$index$]=xt):"r"===rn&&(yt?ut.remove():(Re["s-cr"]=ut,ut["s-cn"]=!0))));else if(ce&&"style"===ce.$tag$){const $i=Y(null,ut.textContent);$i.$elm$=ut,$i.$index$="0",ce.$children$=[$i]}},dn=(ce,ge)=>{if(1===ce.nodeType){let nt=0;for(;nt<ce.childNodes.length;nt++)dn(ce.childNodes[nt],ge);if(ce.shadowRoot)for(nt=0;nt<ce.shadowRoot.childNodes.length;nt++)dn(ce.shadowRoot.childNodes[nt],ge)}else if(8===ce.nodeType){const nt=ce.nodeValue.split(".");"o"===nt[0]&&(ge.set(nt[1]+"."+nt[2],ce),ce.nodeValue="",ce["s-en"]=nt[3])}},_n=ce=>Ns.push(ce),kn=ce=>zn(ce).$modeName$,Vt=ce=>zn(ce).$hostElement$,vi=(ce,ge,nt)=>{const yt=Vt(ce);return{emit:Re=>Tn(yt,ge,{bubbles:!!(4&nt),composed:!!(2&nt),cancelable:!!(1&nt),detail:Re})}},Tn=(ce,ge,nt)=>{const yt=ar.ce(ge,nt);return ce.dispatchEvent(yt),yt},Un=new WeakMap,cn=(ce,ge,nt)=>{let yt=so.get(ce);ws&&nt?(yt=yt||new CSSStyleSheet,"string"==typeof yt?yt=ge:yt.replaceSync(ge)):yt=ge,so.set(ce,yt)},Lt=(ce,ge,nt)=>{var yt;const Re=Gn(ge,nt),ut=so.get(Re);if(ce=11===ce.nodeType?ce:no,ut)if("string"==typeof ut){let rn,kt=Un.get(ce=ce.head||ce);if(kt||Un.set(ce,kt=new Set),!kt.has(Re)){if(ce.host&&(rn=ce.querySelector(`[${ke}="${Re}"]`)))rn.innerHTML=ut;else{rn=no.createElement("style"),rn.innerHTML=ut;const vn=null!==(yt=ar.$nonce$)&&void 0!==yt?yt:Ve(no);null!=vn&&rn.setAttribute("nonce",vn),ce.insertBefore(rn,ce.querySelector("link"))}kt&&kt.add(Re)}}else ce.adoptedStyleSheets.includes(ut)||(ce.adoptedStyleSheets=[...ce.adoptedStyleSheets,ut]);return Re},Gn=(ce,ge)=>"sc-"+(ge&&32&ce.$flags$?ce.$tagName$+"-"+ge:ce.$tagName$),At=ce=>ce.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ae=(ce,ge,nt,yt,Re,ut)=>{if(nt!==yt){let kt=rr(ce,ge),rn=ge.toLowerCase();if("class"===ge){const vn=ce.classList,xt=Ee(nt),Pn=Ee(yt);vn.remove(...xt.filter($i=>$i&&!Pn.includes($i))),vn.add(...Pn.filter($i=>$i&&!xt.includes($i)))}else if("style"===ge){for(const vn in nt)(!yt||null==yt[vn])&&(vn.includes("-")?ce.style.removeProperty(vn):ce.style[vn]="");for(const vn in yt)(!nt||yt[vn]!==nt[vn])&&(vn.includes("-")?ce.style.setProperty(vn,yt[vn]):ce.style[vn]=yt[vn])}else if("key"!==ge)if("ref"===ge)yt&&yt(ce);else if(kt||"o"!==ge[0]||"n"!==ge[1]){const vn=ie(yt);if((kt||vn&&null!==yt)&&!Re)try{if(ce.tagName.includes("-"))ce[ge]=yt;else{const Pn=yt??"";"list"===ge?kt=!1:(null==nt||ce[ge]!=Pn)&&(ce[ge]=Pn)}}catch{}let xt=!1;rn!==(rn=rn.replace(/^xlink\:?/,""))&&(ge=rn,xt=!0),null==yt||!1===yt?(!1!==yt||""===ce.getAttribute(ge))&&(xt?ce.removeAttributeNS(ye,ge):ce.removeAttribute(ge)):(!kt||4&ut||Re)&&!vn&&(yt=!0===yt?"":yt,xt?ce.setAttributeNS(ye,ge,yt):ce.setAttribute(ge,yt))}else ge="-"===ge[2]?ge.slice(3):rr(No,rn)?rn.slice(2):rn[2]+ge.slice(3),nt&&ar.rel(ce,ge,nt,!1),yt&&ar.ael(ce,ge,yt,!1)}},Te=/\s/,Ee=ce=>ce?ce.split(Te):[],lt=(ce,ge,nt,yt)=>{const Re=11===ge.$elm$.nodeType&&ge.$elm$.host?ge.$elm$.host:ge.$elm$,ut=ce&&ce.$attrs$||Q,kt=ge.$attrs$||Q;for(yt in ut)yt in kt||Ae(Re,yt,ut[yt],void 0,nt,ge.$flags$);for(yt in kt)Ae(Re,yt,ut[yt],kt[yt],nt,ge.$flags$)},Mt=(ce,ge,nt,yt)=>{const Re=ge.$children$[nt];let kt,rn,vn,ut=0;if(Ne||(He=!0,"slot"===Re.$tag$&&(Je&&yt.classList.add(Je+"-s"),Re.$flags$|=Re.$children$?2:1)),null!==Re.$text$)kt=Re.$elm$=no.createTextNode(Re.$text$);else if(1&Re.$flags$)kt=Re.$elm$=no.createTextNode("");else{if(ct||(ct="svg"===Re.$tag$),kt=Re.$elm$=no.createElementNS(ct?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Re.$flags$?"slot-fb":Re.$tag$),ct&&"foreignObject"===Re.$tag$&&(ct=!1),lt(null,Re,ct),(ce=>null!=ce)(Je)&&kt["s-si"]!==Je&&kt.classList.add(kt["s-si"]=Je),Re.$children$)for(ut=0;ut<Re.$children$.length;++ut)rn=Mt(ce,Re,ut,kt),rn&&kt.appendChild(rn);"svg"===Re.$tag$?ct=!1:"foreignObject"===kt.tagName&&(ct=!0)}return kt["s-hn"]=fe,3&Re.$flags$&&(kt["s-sr"]=!0,kt["s-cr"]=g,kt["s-sn"]=Re.$name$||"",vn=ce&&ce.$children$&&ce.$children$[nt],vn&&vn.$tag$===Re.$tag$&&ce.$elm$&&ln(ce.$elm$,!1)),kt},ln=(ce,ge)=>{ar.$flags$|=1;const nt=ce.childNodes;for(let yt=nt.length-1;yt>=0;yt--){const Re=nt[yt];Re["s-hn"]!==fe&&Re["s-ol"]&&(ai(Re).insertBefore(Re,or(Re)),Re["s-ol"].remove(),Re["s-ol"]=void 0,He=!0),ge&&ln(Re,ge)}ar.$flags$&=-2},Fn=(ce,ge,nt,yt,Re,ut)=>{let rn,kt=ce["s-cr"]&&ce["s-cr"].parentNode||ce;for(kt.shadowRoot&&kt.tagName===fe&&(kt=kt.shadowRoot);Re<=ut;++Re)yt[Re]&&(rn=Mt(null,nt,Re,ce),rn&&(yt[Re].$elm$=rn,kt.insertBefore(rn,or(ge))))},Bn=(ce,ge,nt)=>{for(let yt=ge;yt<=nt;++yt){const Re=ce[yt];if(Re){const ut=Re.$elm$;zr(Re),ut&&(Oe=!0,ut["s-ol"]?ut["s-ol"].remove():ln(ut,!0),ut.remove())}}},Yi=(ce,ge)=>ce.$tag$===ge.$tag$&&("slot"===ce.$tag$?ce.$name$===ge.$name$:ce.$key$===ge.$key$),or=ce=>ce&&ce["s-ol"]||ce,ai=ce=>(ce["s-ol"]?ce["s-ol"]:ce).parentNode,Ti=(ce,ge)=>{const nt=ge.$elm$=ce.$elm$,yt=ce.$children$,Re=ge.$children$,ut=ge.$tag$,kt=ge.$text$;let rn;null===kt?(ct="svg"===ut||"foreignObject"!==ut&&ct,"slot"===ut||lt(ce,ge,ct),null!==yt&&null!==Re?((ce,ge,nt,yt)=>{let yo,Jt,Re=0,ut=0,kt=0,rn=0,vn=ge.length-1,xt=ge[0],Pn=ge[vn],$i=yt.length-1,ur=yt[0],ao=yt[$i];for(;Re<=vn&&ut<=$i;)if(null==xt)xt=ge[++Re];else if(null==Pn)Pn=ge[--vn];else if(null==ur)ur=yt[++ut];else if(null==ao)ao=yt[--$i];else if(Yi(xt,ur))Ti(xt,ur),xt=ge[++Re],ur=yt[++ut];else if(Yi(Pn,ao))Ti(Pn,ao),Pn=ge[--vn],ao=yt[--$i];else if(Yi(xt,ao))("slot"===xt.$tag$||"slot"===ao.$tag$)&&ln(xt.$elm$.parentNode,!1),Ti(xt,ao),ce.insertBefore(xt.$elm$,Pn.$elm$.nextSibling),xt=ge[++Re],ao=yt[--$i];else if(Yi(Pn,ur))("slot"===xt.$tag$||"slot"===ao.$tag$)&&ln(Pn.$elm$.parentNode,!1),Ti(Pn,ur),ce.insertBefore(Pn.$elm$,xt.$elm$),Pn=ge[--vn],ur=yt[++ut];else{for(kt=-1,rn=Re;rn<=vn;++rn)if(ge[rn]&&null!==ge[rn].$key$&&ge[rn].$key$===ur.$key$){kt=rn;break}kt>=0?(Jt=ge[kt],Jt.$tag$!==ur.$tag$?yo=Mt(ge&&ge[ut],nt,kt,ce):(Ti(Jt,ur),ge[kt]=void 0,yo=Jt.$elm$),ur=yt[++ut]):(yo=Mt(ge&&ge[ut],nt,ut,ce),ur=yt[++ut]),yo&&ai(xt.$elm$).insertBefore(yo,or(xt.$elm$))}Re>vn?Fn(ce,null==yt[$i+1]?null:yt[$i+1].$elm$,nt,yt,ut,$i):ut>$i&&Bn(ge,Re,vn)})(nt,yt,ge,Re):null!==Re?(null!==ce.$text$&&(nt.textContent=""),Fn(nt,null,ge,Re,0,Re.length-1)):null!==yt&&Bn(yt,0,yt.length-1),ct&&"svg"===ut&&(ct=!1)):(rn=nt["s-cr"])?rn.parentNode.textContent=kt:ce.$text$!==kt&&(nt.data=kt)},wr=ce=>{const ge=ce.childNodes;for(const nt of ge)if(1===nt.nodeType){if(nt["s-sr"]){const yt=nt["s-sn"];nt.hidden=!1;for(const Re of ge)if(Re["s-hn"]!==nt["s-hn"]||""!==yt){if(1===Re.nodeType&&yt===Re.getAttribute("slot")){nt.hidden=!0;break}}else if(1===Re.nodeType||3===Re.nodeType&&""!==Re.textContent.trim()){nt.hidden=!0;break}}wr(nt)}},Gi=[],gr=ce=>{let ge,nt,yt;for(const Re of ce.childNodes){if(Re["s-sr"]&&(ge=Re["s-cr"])&&ge.parentNode){nt=ge.parentNode.childNodes;const ut=Re["s-sn"];for(yt=nt.length-1;yt>=0;yt--)if(ge=nt[yt],!ge["s-cn"]&&!ge["s-nr"]&&ge["s-hn"]!==Re["s-hn"])if(Fr(ge,ut)){let kt=Gi.find(rn=>rn.$nodeToRelocate$===ge);Oe=!0,ge["s-sn"]=ge["s-sn"]||ut,kt?kt.$slotRefNode$=Re:Gi.push({$slotRefNode$:Re,$nodeToRelocate$:ge}),ge["s-sr"]&&Gi.map(rn=>{Fr(rn.$nodeToRelocate$,ge["s-sn"])&&(kt=Gi.find(vn=>vn.$nodeToRelocate$===ge),kt&&!rn.$slotRefNode$&&(rn.$slotRefNode$=kt.$slotRefNode$))})}else Gi.some(kt=>kt.$nodeToRelocate$===ge)||Gi.push({$nodeToRelocate$:ge})}1===Re.nodeType&&gr(Re)}},Fr=(ce,ge)=>1===ce.nodeType?null===ce.getAttribute("slot")&&""===ge||ce.getAttribute("slot")===ge:ce["s-sn"]===ge||""===ge,zr=ce=>{ce.$attrs$&&ce.$attrs$.ref&&ce.$attrs$.ref(null),ce.$children$&&ce.$children$.map(zr)},mt=(ce,ge)=>{ge&&!ce.$onRenderResolve$&&ge["s-p"]&&ge["s-p"].push(new Promise(nt=>ce.$onRenderResolve$=nt))},Ie=(ce,ge)=>{if(ce.$flags$|=16,!(4&ce.$flags$))return mt(ce,ce.$ancestorComponent$),Ot(()=>Me(ce,ge));ce.$flags$|=512},Me=(ce,ge)=>{const yt=ce.$lazyInstance$;let Re;return ge&&(ce.$flags$|=256,ce.$queuedListeners$&&(ce.$queuedListeners$.map(([ut,kt])=>Xn(yt,ut,kt)),ce.$queuedListeners$=void 0),Re=Xn(yt,"componentWillLoad")),Re=pt(Re,()=>Xn(yt,"componentWillRender")),pt(Re,()=>at(ce,yt,ge))},pt=(ce,ge)=>Ct(ce)?ce.then(ge):ge(),Ct=ce=>ce instanceof Promise||ce&&ce.then&&"function"==typeof ce.then,at=function(){var ce=(0,ue.Z)(function*(ge,nt,yt){var Re;const ut=ge.$hostElement$,rn=ut["s-rc"];yt&&(ce=>{const ge=ce.$cmpMeta$,nt=ce.$hostElement$,yt=ge.$flags$,ut=Lt(nt.shadowRoot?nt.shadowRoot:nt.getRootNode(),ge,ce.$modeName$);10&yt&&(nt["s-sc"]=ut,nt.classList.add(ut+"-h"),2&yt&&nt.classList.add(ut+"-s"))})(ge);en(ge,nt,ut,yt),rn&&(rn.map(xt=>xt()),ut["s-rc"]=void 0);{const xt=null!==(Re=ut["s-p"])&&void 0!==Re?Re:[],Pn=()=>Zt(ge);0===xt.length?Pn():(Promise.all(xt).then(Pn),ge.$flags$|=4,xt.length=0)}});return function(nt,yt,Re){return ce.apply(this,arguments)}}(),en=(ce,ge,nt,yt)=>{try{ge=ge.render&&ge.render(),ce.$flags$&=-17,ce.$flags$|=2,((ce,ge,nt=!1)=>{const yt=ce.$hostElement$,Re=ce.$cmpMeta$,ut=ce.$vnode$||Y(null,null),kt=(ce=>ce&&ce.$tag$===Ge)(ge)?ge:Se(null,null,ge);if(fe=yt.tagName,Re.$attrsToReflect$&&(kt.$attrs$=kt.$attrs$||{},Re.$attrsToReflect$.map(([rn,vn])=>kt.$attrs$[vn]=yt[rn])),nt&&kt.$attrs$)for(const rn of Object.keys(kt.$attrs$))yt.hasAttribute(rn)&&!["key","ref","style","class"].includes(rn)&&(kt.$attrs$[rn]=yt[rn]);if(kt.$tag$=null,kt.$flags$|=4,ce.$vnode$=kt,kt.$elm$=ut.$elm$=yt.shadowRoot||yt,Je=yt["s-sc"],g=yt["s-cr"],Ne=0!=(1&Re.$flags$),Oe=!1,Ti(ut,kt),ar.$flags$|=1,He){gr(kt.$elm$);let rn,vn,xt,Pn,$i,ur,ao=0;for(;ao<Gi.length;ao++)rn=Gi[ao],vn=rn.$nodeToRelocate$,vn["s-ol"]||(xt=no.createTextNode(""),xt["s-nr"]=vn,vn.parentNode.insertBefore(vn["s-ol"]=xt,vn));for(ao=0;ao<Gi.length;ao++)if(rn=Gi[ao],vn=rn.$nodeToRelocate$,rn.$slotRefNode$){for(Pn=rn.$slotRefNode$.parentNode,$i=rn.$slotRefNode$.nextSibling,xt=vn["s-ol"];xt=xt.previousSibling;)if(ur=xt["s-nr"],ur&&ur["s-sn"]===vn["s-sn"]&&Pn===ur.parentNode&&(ur=ur.nextSibling,!ur||!ur["s-nr"])){$i=ur;break}(!$i&&Pn!==vn.parentNode||vn.nextSibling!==$i)&&vn!==$i&&(!vn["s-hn"]&&vn["s-ol"]&&(vn["s-hn"]=vn["s-ol"].parentNode.nodeName),Pn.insertBefore(vn,$i))}else 1===vn.nodeType&&(vn.hidden=!0)}Oe&&wr(kt.$elm$),ar.$flags$&=-2,Gi.length=0})(ce,ge,yt)}catch(Re){to(Re,ce.$hostElement$)}return null},Zt=ce=>{const nt=ce.$hostElement$,Re=ce.$lazyInstance$,ut=ce.$ancestorComponent$;Xn(Re,"componentDidRender"),64&ce.$flags$?Xn(Re,"componentDidUpdate"):(ce.$flags$|=64,ri(nt),Xn(Re,"componentDidLoad"),ce.$onReadyResolve$(nt),ut||un()),ce.$onInstanceResolve$(nt),ce.$onRenderResolve$&&(ce.$onRenderResolve$(),ce.$onRenderResolve$=void 0),512&ce.$flags$&&tt(()=>Ie(ce,!1)),ce.$flags$&=-517},It=ce=>{{const ge=zn(ce),nt=ge.$hostElement$.isConnected;return nt&&2==(18&ge.$flags$)&&Ie(ge,!1),nt}},un=ce=>{ri(no.documentElement),tt(()=>Tn(No,"appload",{detail:{namespace:"ionic"}}))},Xn=(ce,ge,nt)=>{if(ce&&ce[ge])try{return ce[ge](nt)}catch(yt){to(yt)}},ri=ce=>ce.classList.add("hydrated"),Cr=(ce,ge,nt)=>{var yt;if(ge.$members$){ce.watchers&&(ge.$watchers$=ce.watchers);const Re=Object.entries(ge.$members$),ut=ce.prototype;if(Re.map(([kt,[rn]])=>{31&rn||2&nt&&32&rn?Object.defineProperty(ut,kt,{get(){return((ce,ge)=>zn(this).$instanceValues$.get(ge))(0,kt)},set(vn){((ce,ge,nt,yt)=>{const Re=zn(ce),ut=Re.$hostElement$,kt=Re.$instanceValues$.get(ge),rn=Re.$flags$,vn=Re.$lazyInstance$;nt=((ce,ge)=>null==ce||ie(ce)?ce:4&ge?"false"!==ce&&(""===ce||!!ce):2&ge?parseFloat(ce):1&ge?String(ce):ce)(nt,yt.$members$[ge][0]);const xt=Number.isNaN(kt)&&Number.isNaN(nt);if((!(8&rn)||void 0===kt)&&nt!==kt&&!xt&&(Re.$instanceValues$.set(ge,nt),vn)){if(yt.$watchers$&&128&rn){const $i=yt.$watchers$[ge];$i&&$i.map(ur=>{try{vn[ur](nt,kt,ge)}catch(ao){to(ao,ut)}})}2==(18&rn)&&Ie(Re,!1)}})(this,kt,vn,ge)},configurable:!0,enumerable:!0}):1&nt&&64&rn&&Object.defineProperty(ut,kt,{value(...vn){const xt=zn(this);return xt.$onInstancePromise$.then(()=>xt.$lazyInstance$[kt](...vn))}})}),1&nt){const kt=new Map;ut.attributeChangedCallback=function(rn,vn,xt){ar.jmp(()=>{const Pn=kt.get(rn);if(this.hasOwnProperty(Pn))xt=this[Pn],delete this[Pn];else{if(ut.hasOwnProperty(Pn)&&"number"==typeof this[Pn]&&this[Pn]==xt)return;if(null==Pn){const $i=zn(this),ur=$i?.$flags$;if(!(8&ur)&&128&ur&&xt!==vn){const ao=$i.$lazyInstance$,yo=ge.$watchers$[rn];yo?.forEach(Jt=>{null!=ao[Jt]&&ao[Jt].call(ao,xt,vn,rn)})}return}}this[Pn]=(null!==xt||"boolean"!=typeof this[Pn])&&xt})},ce.observedAttributes=Array.from(new Set([...Object.keys(null!==(yt=ge.$watchers$)&&void 0!==yt?yt:{}),...Re.filter(([rn,vn])=>15&vn[0]).map(([rn,vn])=>{const xt=vn[1]||rn;return kt.set(xt,rn),512&vn[0]&&ge.$attrsToReflect$.push([rn,xt]),xt})]))}}return ce},sr=function(){var ce=(0,ue.Z)(function*(ge,nt,yt,Re){let ut;if(!(32&nt.$flags$)){nt.$flags$|=32;{if(ut=To(yt),ut.then){const xt=()=>{};ut=yield ut,xt()}ut.isProxied||(yt.$watchers$=ut.watchers,Cr(ut,yt,2),ut.isProxied=!0);const vn=()=>{};nt.$flags$|=8;try{new ut(nt)}catch(xt){to(xt)}nt.$flags$&=-9,nt.$flags$|=128,vn(),Zi(nt.$lazyInstance$)}if(ut.style){let vn=ut.style;"string"!=typeof vn&&(vn=vn[nt.$modeName$=(ce=>Ns.map(ge=>ge(ce)).find(ge=>!!ge))(ge)]);const xt=Gn(yt,nt.$modeName$);if(!so.has(xt)){const Pn=()=>{};cn(xt,vn,!!(1&yt.$flags$)),Pn()}}}const kt=nt.$ancestorComponent$,rn=()=>Ie(nt,!0);kt&&kt["s-rc"]?kt["s-rc"].push(rn):rn()});return function(nt,yt,Re,ut){return ce.apply(this,arguments)}}(),Zi=ce=>{Xn(ce,"connectedCallback")},Br=ce=>{const ge=ce["s-cr"]=no.createComment("");ge["s-cn"]=!0,ce.insertBefore(ge,ce.firstChild)},vt=ce=>{Xn(ce,"disconnectedCallback")},wt=function(){var ce=(0,ue.Z)(function*(ge){if(!(1&ar.$flags$)){const nt=zn(ge);nt.$rmListeners$&&(nt.$rmListeners$.map(yt=>yt()),nt.$rmListeners$=void 0),nt?.$lazyInstance$?vt(nt.$lazyInstance$):nt?.$onReadyPromise$&&nt.$onReadyPromise$.then(()=>vt(nt.$lazyInstance$))}});return function(nt){return ce.apply(this,arguments)}}(),nn=(ce,ge={})=>{var nt;const Re=[],ut=ge.exclude||[],kt=No.customElements,rn=no.head,vn=rn.querySelector("meta[charset]"),xt=no.createElement("style"),Pn=[],$i=no.querySelectorAll(`[${ke}]`);let ur,ao=!0,yo=0;for(Object.assign(ar,ge),ar.$resourcesUrl$=new URL(ge.resourcesUrl||"./",no.baseURI).href,ar.$flags$|=2;yo<$i.length;yo++)cn($i[yo].getAttribute(ke),At($i[yo].innerHTML),!0);ce.map(Jt=>{Jt[1].map($r=>{var ji;const Mr={$flags$:$r[0],$tagName$:$r[1],$members$:$r[2],$listeners$:$r[3]};Mr.$members$=$r[2],Mr.$listeners$=$r[3],Mr.$attrsToReflect$=[],Mr.$watchers$=null!==(ji=$r[4])&&void 0!==ji?ji:{};const As=Mr.$tagName$,Dl=class extends HTMLElement{constructor(Au){super(Au),Ri(Au=this,Mr),1&Mr.$flags$&&Au.attachShadow({mode:"open",delegatesFocus:!!(16&Mr.$flags$)})}connectedCallback(){ur&&(clearTimeout(ur),ur=null),ao?Pn.push(this):ar.jmp(()=>(ce=>{if(!(1&ar.$flags$)){const ge=zn(ce),nt=ge.$cmpMeta$,yt=()=>{};if(1&ge.$flags$)an(ce,ge,nt.$listeners$),ge?.$lazyInstance$?Zi(ge.$lazyInstance$):ge?.$onReadyPromise$&&ge.$onReadyPromise$.then(()=>Zi(ge.$lazyInstance$));else{let Re;if(ge.$flags$|=1,Re=ce.getAttribute(ee),Re){if(1&nt.$flags$){const ut=Lt(ce.shadowRoot,nt,ce.getAttribute("s-mode"));ce.classList.remove(ut+"-h",ut+"-s")}((ce,ge,nt,yt)=>{const ut=ce.shadowRoot,kt=[],vn=ut?[]:null,xt=yt.$vnode$=Y(ge,null);ar.$orgLocNodes$||dn(no.body,ar.$orgLocNodes$=new Map),ce[ee]=nt,ce.removeAttribute(ee),et(xt,kt,[],vn,ce,ce,nt),kt.map(Pn=>{const $i=Pn.$hostId$+"."+Pn.$nodeId$,ur=ar.$orgLocNodes$.get($i),ao=Pn.$elm$;ur&&yl&&""===ur["s-en"]&&ur.parentNode.insertBefore(ao,ur.nextSibling),ut||(ao["s-hn"]=ge,ur&&(ao["s-ol"]=ur,ao["s-ol"]["s-nr"]=ao)),ar.$orgLocNodes$.delete($i)}),ut&&vn.map(Pn=>{Pn&&ut.appendChild(Pn)})})(ce,nt.$tagName$,Re,ge)}Re||12&nt.$flags$&&Br(ce);{let ut=ce;for(;ut=ut.parentNode||ut.host;)if(1===ut.nodeType&&ut.hasAttribute("s-id")&&ut["s-p"]||ut["s-p"]){mt(ge,ge.$ancestorComponent$=ut);break}}nt.$members$&&Object.entries(nt.$members$).map(([ut,[kt]])=>{if(31&kt&&ce.hasOwnProperty(ut)){const rn=ce[ut];delete ce[ut],ce[ut]=rn}}),sr(ce,ge,nt)}yt()}})(this))}disconnectedCallback(){ar.jmp(()=>wt(this))}componentOnReady(){return zn(this).$onReadyPromise$}};Mr.$lazyBundleId$=Jt[0],!ut.includes(As)&&!kt.get(As)&&(Re.push(As),kt.define(As,Cr(Dl,Mr,1)))})});{xt.innerHTML=Re+"{visibility:hidden}.hydrated{visibility:inherit}",xt.setAttribute("data-styles","");const Jt=null!==(nt=ar.$nonce$)&&void 0!==nt?nt:Ve(no);null!=Jt&&xt.setAttribute("nonce",Jt),rn.insertBefore(xt,vn?vn.nextSibling:rn.firstChild)}ao=!1,Pn.length?Pn.map(Jt=>Jt.connectedCallback()):ar.jmp(()=>ur=setTimeout(un,30))},an=(ce,ge,nt,yt)=>{nt&&nt.map(([Re,ut,kt])=>{const rn=Vn(ce,Re),vn=Sn(ge,kt),xt=Qn(Re);ar.ael(rn,ut,vn,xt),(ge.$rmListeners$=ge.$rmListeners$||[]).push(()=>ar.rel(rn,ut,vn,xt))})},Sn=(ce,ge)=>nt=>{try{256&ce.$flags$?ce.$lazyInstance$[ge](nt):(ce.$queuedListeners$=ce.$queuedListeners$||[]).push([ge,nt])}catch(yt){to(yt)}},Vn=(ce,ge)=>4&ge?no:8&ge?No:16&ge?no.body:ce,Qn=ce=>0!=(2&ce),ki=new WeakMap,zn=ce=>ki.get(ce),_r=(ce,ge)=>ki.set(ge.$lazyInstance$=ce,ge),Ri=(ce,ge)=>{const nt={$flags$:0,$hostElement$:ce,$cmpMeta$:ge,$instanceValues$:new Map};return nt.$onInstancePromise$=new Promise(yt=>nt.$onInstanceResolve$=yt),nt.$onReadyPromise$=new Promise(yt=>nt.$onReadyResolve$=yt),ce["s-p"]=[],ce["s-rc"]=[],an(ce,nt,ge.$listeners$),ki.set(ce,nt)},rr=(ce,ge)=>ge in ce,to=(ce,ge)=>(0,console.error)(ce,ge),Vr=new Map,To=(ce,ge,nt)=>{const yt=ce.$tagName$.replace(/-/g,"_"),Re=ce.$lazyBundleId$,ut=Vr.get(Re);return ut?ut[yt]:Ce(863)(`./${Re}.entry.js`).then(kt=>(Vr.set(Re,kt),kt[yt]),to)},so=new Map,Ns=[],No=typeof window<"u"?window:{},no=No.document||{head:{}},ar={$flags$:0,$resourcesUrl$:"",jmp:ce=>ce(),raf:ce=>requestAnimationFrame(ce),ael:(ce,ge,nt,yt)=>ce.addEventListener(ge,nt,yt),rel:(ce,ge,nt,yt)=>ce.removeEventListener(ge,nt,yt),ce:(ce,ge)=>new CustomEvent(ce,ge)},Mn=ce=>{Object.assign(ar,ce)},yl=!0,ws=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ko=[],Tl=[],We=(ce,ge)=>nt=>{ce.push(nt),Ht||(Ht=!0,ge&&4&ar.$flags$?tt(gt):ar.raf(gt))},Bt=ce=>{for(let ge=0;ge<ce.length;ge++)try{ce[ge](performance.now())}catch(nt){to(nt)}ce.length=0},gt=()=>{Bt(ko),Bt(Tl),(Ht=ko.length>0)&&ar.raf(gt)},tt=ce=>Promise.resolve(void 0).then(ce),St=We(ko,!1),Ot=We(Tl,!0)},3389:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{m:()=>Qe});var ue=Ce(5861),Le=Ce(6710),Je=Ce(2124),g=Ce(839),fe=Ce(3395),Ne=Ce(5062);const Oe=je=>(0,Ne.c)().duration(je?400:300),He=je=>{let Nt,le;const we=je.width+8,J=(0,Ne.c)(),Z=(0,Ne.c)();je.isEndSide?(Nt=we+"px",le="0px"):(Nt=-we+"px",le="0px"),J.addElement(je.menuInnerEl).fromTo("transform",`translateX(${Nt})`,`translateX(${le})`);const ke="ios"===(0,fe.b)(je),ne=ke?.2:.25;return Z.addElement(je.backdropEl).fromTo("opacity",.01,ne),Oe(ke).addAnimation([J,Z])},ct=je=>{let Nt,le;const we=(0,fe.b)(je),J=je.width;je.isEndSide?(Nt=-J+"px",le=J+"px"):(Nt=J+"px",le=-J+"px");const Z=(0,Ne.c)().addElement(je.menuInnerEl).fromTo("transform",`translateX(${le})`,"translateX(0px)"),ee=(0,Ne.c)().addElement(je.contentEl).fromTo("transform","translateX(0px)",`translateX(${Nt})`),ke=(0,Ne.c)().addElement(je.backdropEl).fromTo("opacity",.01,.32);return Oe("ios"===we).addAnimation([Z,ee,ke])},Ht=je=>{const Nt=(0,fe.b)(je),le=je.width*(je.isEndSide?-1:1)+"px",we=(0,Ne.c)().addElement(je.contentEl).fromTo("transform","translateX(0px)",`translateX(${le})`);return Oe("ios"===Nt).addAnimation(we)},Qe=(()=>{const je=new Map,Nt=[],le=function(){var ae=(0,ue.Z)(function*(Ze){const et=yield K(Ze,!0);return!!et&&et.open()});return function(et){return ae.apply(this,arguments)}}(),we=function(){var ae=(0,ue.Z)(function*(Ze){const et=yield void 0!==Ze?K(Ze,!0):ye();return void 0!==et&&et.close()});return function(et){return ae.apply(this,arguments)}}(),J=function(){var ae=(0,ue.Z)(function*(Ze){const et=yield K(Ze,!0);return!!et&&et.toggle()});return function(et){return ae.apply(this,arguments)}}(),Z=function(){var ae=(0,ue.Z)(function*(Ze,et){const dn=yield K(et);return dn&&(dn.disabled=!Ze),dn});return function(et,dn){return ae.apply(this,arguments)}}(),ee=function(){var ae=(0,ue.Z)(function*(Ze,et){const dn=yield K(et);return dn&&(dn.swipeGesture=Ze),dn});return function(et,dn){return ae.apply(this,arguments)}}(),ke=function(){var ae=(0,ue.Z)(function*(Ze){if(null!=Ze){const et=yield K(Ze);return void 0!==et&&et.isOpen()}return void 0!==(yield ye())});return function(et){return ae.apply(this,arguments)}}(),ne=function(){var ae=(0,ue.Z)(function*(Ze){const et=yield K(Ze);return!!et&&!et.disabled});return function(et){return ae.apply(this,arguments)}}(),K=function(){var ae=(0,ue.Z)(function*(Ze,et=!1){if(yield $e(),"start"===Ze||"end"===Ze){const qt=Nt.filter(kn=>kn.side===Ze&&!kn.disabled);if(qt.length>=1)return qt.length>1&&et&&(0,Le.p)(`menuController queried for a menu on the "${Ze}" side, but ${qt.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,qt.map(kn=>kn.el)),qt[0].el;const _n=Nt.filter(kn=>kn.side===Ze);if(_n.length>=1)return _n.length>1&&et&&(0,Le.p)(`menuController queried for a menu on the "${Ze}" side, but ${_n.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,_n.map(kn=>kn.el)),_n[0].el}else if(null!=Ze)return Ke(qt=>qt.menuId===Ze);return Ke(qt=>!qt.disabled)||(Nt.length>0?Nt[0].el:void 0)});return function(et){return ae.apply(this,arguments)}}(),ye=function(){var ae=(0,ue.Z)(function*(){return yield $e(),Y()});return function(){return ae.apply(this,arguments)}}(),Q=function(){var ae=(0,ue.Z)(function*(){return yield $e(),Ge()});return function(){return ae.apply(this,arguments)}}(),he=function(){var ae=(0,ue.Z)(function*(){return yield $e(),De()});return function(){return ae.apply(this,arguments)}}(),se=(ae,Ze)=>{je.set(ae,Ze)},Ve=function(){var ae=(0,ue.Z)(function*(Ze,et,dn){if(De())return!1;if(et){const qt=yield ye();qt&&Ze.el!==qt&&(yield qt.setOpen(!1,!1))}return Ze._setOpen(et,dn)});return function(et,dn,qt){return ae.apply(this,arguments)}}(),Y=()=>Ke(ae=>ae._isOpen),Ge=()=>Nt.map(ae=>ae.el),De=()=>Nt.some(ae=>ae.isAnimating),Ke=ae=>{const Ze=Nt.find(ae);if(void 0!==Ze)return Ze.el},$e=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(ae=>new Promise(Ze=>(0,g.c)(ae,Ze))));return se("reveal",Ht),se("push",ct),se("overlay",He),typeof document<"u"&&document.addEventListener("ionBackButton",ae=>{const Ze=Y();Ze&&ae.detail.register(Je.MENU_BACK_BUTTON_PRIORITY,()=>Ze.close())}),{registerAnimation:se,get:K,getMenus:Q,getOpen:ye,isEnabled:ne,swipeGesture:ee,isAnimating:he,isOpen:ke,enable:Z,toggle:J,close:we,open:le,_getOpenSync:Y,_createAnimation:(ae,Ze)=>{const et=je.get(ae);if(!et)throw new Error("animation not registered");return et(Ze)},_register:ae=>{Nt.indexOf(ae)<0&&Nt.push(ae)},_unregister:ae=>{const Ze=Nt.indexOf(ae);Ze>-1&&Nt.splice(Ze,1)},_setOpen:Ve}})()},9203:(An,Rt,Ce)=>{"use strict";Ce.r(Rt),Ce.d(Rt,{GESTURE_CONTROLLER:()=>ue.G,createGesture:()=>ct});var ue=Ce(619);const Le=(je,Nt,le,we)=>{const J=Je(je)?{capture:!!we.capture,passive:!!we.passive}:!!we.capture;let Z,ee;return je.__zone_symbol__addEventListener?(Z="__zone_symbol__addEventListener",ee="__zone_symbol__removeEventListener"):(Z="addEventListener",ee="removeEventListener"),je[Z](Nt,le,J),()=>{je[ee](Nt,le,J)}},Je=je=>{if(void 0===g)try{const Nt=Object.defineProperty({},"passive",{get:()=>{g=!0}});je.addEventListener("optsTest",()=>{},Nt)}catch{g=!1}return!!g};let g;const Oe=je=>je instanceof Document?je:je.ownerDocument,ct=je=>{let Nt=!1,le=!1,we=!0,J=!1;const Z=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},je),ee=Z.canStart,ke=Z.onWillStart,ne=Z.onStart,K=Z.onEnd,ye=Z.notCaptured,Q=Z.onMove,he=Z.threshold,se=Z.passive,be=Z.blurOnStart,ie={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Ve=((je,Nt,le)=>{const we=le*(Math.PI/180),J="x"===je,Z=Math.cos(we),ee=Nt*Nt;let ke=0,ne=0,K=!1,ye=0;return{start(Q,he){ke=Q,ne=he,ye=0,K=!0},detect(Q,he){if(!K)return!1;const se=Q-ke,be=he-ne,ie=se*se+be*be;if(ie<ee)return!1;const Ve=Math.sqrt(ie),Se=(J?se:be)/Ve;return ye=Se>Z?1:Se<-Z?-1:0,K=!1,!0},isGesture:()=>0!==ye,getDirection:()=>ye}})(Z.direction,Z.threshold,Z.maxAngle),Se=ue.G.createGesture({name:je.gestureName,priority:je.gesturePriority,disableScroll:je.disableScroll}),De=()=>{Nt&&(J=!1,Q&&Q(ie))},Ke=()=>!!Se.capture()&&(Nt=!0,we=!1,ie.startX=ie.currentX,ie.startY=ie.currentY,ie.startTime=ie.currentTime,ke?ke(ie).then(ae):ae(),!0),ae=()=>{be&&(()=>{if(typeof document<"u"){const _n=document.activeElement;_n?.blur&&_n.blur()}})(),ne&&ne(ie),we=!0},Ze=()=>{Nt=!1,le=!1,J=!1,we=!0,Se.release()},et=_n=>{const kn=Nt,ei=we;if(Ze(),ei){if(Ht(ie,_n),kn)return void(K&&K(ie));ye&&ye(ie)}},dn=((je,Nt,le,we,J)=>{let Z,ee,ke,ne,K,ye,Q,he=0;const se=$e=>{he=Date.now()+2e3,Nt($e)&&(!ee&&le&&(ee=Le(je,"touchmove",le,J)),ke||(ke=Le($e.target,"touchend",ie,J)),ne||(ne=Le($e.target,"touchcancel",ie,J)))},be=$e=>{he>Date.now()||Nt($e)&&(!ye&&le&&(ye=Le(Oe(je),"mousemove",le,J)),Q||(Q=Le(Oe(je),"mouseup",Ve,J)))},ie=$e=>{Se(),we&&we($e)},Ve=$e=>{Y(),we&&we($e)},Se=()=>{ee&&ee(),ke&&ke(),ne&&ne(),ee=ke=ne=void 0},Y=()=>{ye&&ye(),Q&&Q(),ye=Q=void 0},Ge=()=>{Se(),Y()},De=($e=!0)=>{$e?(Z||(Z=Le(je,"touchstart",se,J)),K||(K=Le(je,"mousedown",be,J))):(Z&&Z(),K&&K(),Z=K=void 0,Ge())};return{enable:De,stop:Ge,destroy:()=>{De(!1),we=le=Nt=void 0}}})(Z.el,_n=>{const kn=Qe(_n);return!(le||!we||(qe(_n,ie),ie.startX=ie.currentX,ie.startY=ie.currentY,ie.startTime=ie.currentTime=kn,ie.velocityX=ie.velocityY=ie.deltaX=ie.deltaY=0,ie.event=_n,ee&&!1===ee(ie))||(Se.release(),!Se.start()))&&(le=!0,0===he?Ke():(Ve.start(ie.startX,ie.startY),!0))},_n=>{Nt?!J&&we&&(J=!0,Ht(ie,_n),requestAnimationFrame(De)):(Ht(ie,_n),Ve.detect(ie.currentX,ie.currentY)&&(!Ve.isGesture()||!Ke())&&qt())},et,{capture:!1,passive:se}),qt=()=>{Ze(),dn.stop(),ye&&ye(ie)};return{enable(_n=!0){_n||(Nt&&et(void 0),Ze()),dn.enable(_n)},destroy(){Se.destroy(),dn.destroy()}}},Ht=(je,Nt)=>{if(!Nt)return;const le=je.currentX,we=je.currentY,J=je.currentTime;qe(Nt,je);const Z=je.currentX,ee=je.currentY,ne=(je.currentTime=Qe(Nt))-J;if(ne>0&&ne<100){const ye=(ee-we)/ne;je.velocityX=(Z-le)/ne*.7+.3*je.velocityX,je.velocityY=.7*ye+.3*je.velocityY}je.deltaX=Z-je.startX,je.deltaY=ee-je.startY,je.event=Nt},qe=(je,Nt)=>{let le=0,we=0;if(je){const J=je.changedTouches;if(J&&J.length>0){const Z=J[0];le=Z.clientX,we=Z.clientY}else void 0!==je.pageX&&(le=je.pageX,we=je.pageY)}Nt.currentX=le,Nt.currentY=we},Qe=je=>je.timeStamp||Date.now()},3395:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{a:()=>qe,b:()=>De,c:()=>Je,i:()=>Ke});var ue=Ce(8411);class Le{constructor(){this.m=new Map}reset(ae){this.m=new Map(Object.entries(ae))}get(ae,Ze){const et=this.m.get(ae);return void 0!==et?et:Ze}getBoolean(ae,Ze=!1){const et=this.m.get(ae);return void 0===et?Ze:"string"==typeof et?"true"===et:!!et}getNumber(ae,Ze){const et=parseFloat(this.m.get(ae));return isNaN(et)?void 0!==Ze?Ze:NaN:et}set(ae,Ze){this.m.set(ae,Ze)}}const Je=new Le,ct="ionic-persist-config",qe=($e,ae)=>("string"==typeof $e&&(ae=$e,$e=void 0),($e=>Qe($e))($e).includes(ae)),Qe=($e=window)=>{if(typeof $e>"u")return[];$e.Ionic=$e.Ionic||{};let ae=$e.Ionic.platforms;return null==ae&&(ae=$e.Ionic.platforms=je($e),ae.forEach(Ze=>$e.document.documentElement.classList.add(`plt-${Ze}`))),ae},je=$e=>{const ae=Je.get("platform");return Object.keys(Y).filter(Ze=>{const et=ae?.[Ze];return"function"==typeof et?et($e):Y[Ze]($e)})},le=$e=>!!(Ve($e,/iPad/i)||Ve($e,/Macintosh/i)&&K($e)),Z=$e=>Ve($e,/android|sink/i),K=$e=>Se($e,"(any-pointer:coarse)"),Q=$e=>he($e)||se($e),he=$e=>!!($e.cordova||$e.phonegap||$e.PhoneGap),se=$e=>{const ae=$e.Capacitor;return!!ae?.isNative},Ve=($e,ae)=>ae.test($e.navigator.userAgent),Se=($e,ae)=>{var Ze;return null===(Ze=$e.matchMedia)||void 0===Ze?void 0:Ze.call($e,ae).matches},Y={ipad:le,iphone:$e=>Ve($e,/iPhone/i),ios:$e=>Ve($e,/iPhone|iPod/i)||le($e),android:Z,phablet:$e=>{const ae=$e.innerWidth,Ze=$e.innerHeight,et=Math.min(ae,Ze),dn=Math.max(ae,Ze);return et>390&&et<520&&dn>620&&dn<800},tablet:$e=>{const ae=$e.innerWidth,Ze=$e.innerHeight,et=Math.min(ae,Ze),dn=Math.max(ae,Ze);return le($e)||($e=>Z($e)&&!Ve($e,/mobile/i))($e)||et>460&&et<820&&dn>780&&dn<1400},cordova:he,capacitor:se,electron:$e=>Ve($e,/electron/i),pwa:$e=>{var ae;return!!(null!==(ae=$e.matchMedia)&&void 0!==ae&&ae.call($e,"(display-mode: standalone)").matches||$e.navigator.standalone)},mobile:K,mobileweb:$e=>K($e)&&!Q($e),desktop:$e=>!K($e),hybrid:Q};let Ge;const De=$e=>$e&&(0,ue.g)($e)||Ge,Ke=($e={})=>{if(typeof window>"u")return;const ae=window.document,Ze=window,et=Ze.Ionic=Ze.Ionic||{},dn={};$e._ael&&(dn.ael=$e._ael),$e._rel&&(dn.rel=$e._rel),$e._ce&&(dn.ce=$e._ce),(0,ue.a)(dn);const qt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},($e=>{try{const ae=$e.sessionStorage.getItem(ct);return null!==ae?JSON.parse(ae):{}}catch{return{}}})(Ze)),{persistConfig:!1}),et.config),($e=>{const ae={};return $e.location.search.slice(1).split("&").map(Ze=>Ze.split("=")).map(([Ze,et])=>[decodeURIComponent(Ze),decodeURIComponent(et)]).filter(([Ze])=>(($e,ae)=>$e.substr(0,ae.length)===ae)(Ze,"ionic:")).map(([Ze,et])=>[Ze.slice(6),et]).forEach(([Ze,et])=>{ae[Ze]=et}),ae})(Ze)),$e);Je.reset(qt),Je.getBoolean("persistConfig")&&(($e,ae)=>{try{$e.sessionStorage.setItem(ct,JSON.stringify(ae))}catch{return}})(Ze,qt),Qe(Ze),et.config=Je,et.mode=Ge=Je.get("mode",ae.documentElement.getAttribute("mode")||(qe(Ze,"ios")?"ios":"md")),Je.set("mode",Ge),ae.documentElement.setAttribute("mode",Ge),ae.documentElement.classList.add(Ge),Je.getBoolean("_testing")&&Je.set("animated",!1);const _n=ei=>{var Vt;return null===(Vt=ei.tagName)||void 0===Vt?void 0:Vt.startsWith("ION-")},kn=ei=>["ios","md"].includes(ei);(0,ue.c)(ei=>{for(;ei;){const Vt=ei.mode||ei.getAttribute("mode");if(Vt){if(kn(Vt))return Vt;_n(ei)&&console.warn('Invalid ionic mode: "'+Vt+'", expected: "ios" or "md"')}ei=ei.parentElement}return Ge})}},2510:(An,Rt,Ce)=>{"use strict";Ce.r(Rt),Ce.d(Rt,{iosTransitionAnimation:()=>je,shadow:()=>Oe});var ue=Ce(5062),Le=Ce(6323);Ce(6225),Ce(8411);const Ne=le=>document.querySelector(`${le}.ion-cloned-element`),Oe=le=>le.shadowRoot||le,He=le=>{const we="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs"),J="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=we){const Z=we.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Z?Z.querySelector(J):null}return le.querySelector(J)},ct=(le,we)=>{const J="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs");let Z=[];if(null!=J){const ee=J.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ee&&(Z=ee.querySelectorAll("ion-buttons"))}else Z=le.querySelectorAll("ion-buttons");for(const ee of Z){const ke=ee.closest("ion-header"),ne=ke&&!ke.classList.contains("header-collapse-condense-inactive"),K=ee.querySelector("ion-back-button"),ye=ee.classList.contains("buttons-collapse");if(null!==K&&("start"===ee.slot||""===ee.slot)&&(ye&&ne&&we||!ye))return K}return null},qe=(le,we,J,Z,ee,ke,ne,K,ye)=>{var Q,he;const se=we?`calc(100% - ${ee.right+4}px)`:ee.left-4+"px",be=we?"right":"left",ie=we?"left":"right",Ve=we?"right":"left",Se=(null===(Q=ke.textContent)||void 0===Q?void 0:Q.trim())===(null===(he=K.textContent)||void 0===he?void 0:he.trim()),Ge=(ye.height-Nt)/ne.height,De=Se?`scale(${ye.width/ne.width}, ${Ge})`:`scale(${Ge})`,Ke="scale(1)",ae=Oe(Z).querySelector("ion-icon").getBoundingClientRect(),Ze=we?ae.width/2-(ae.right-ee.right)+"px":ee.left-ae.width/2+"px",et=we?`-${window.innerWidth-ee.right}px`:`${ee.left}px`,dn=`${ye.top}px`,qt=`${ee.top}px`,ei=J?[{offset:0,transform:`translate3d(${et}, ${qt}, 0)`},{offset:1,transform:`translate3d(${Ze}, ${dn}, 0)`}]:[{offset:0,transform:`translate3d(${Ze}, ${dn}, 0)`},{offset:1,transform:`translate3d(${et}, ${qt}, 0)`}],Tn=J?[{offset:0,opacity:1,transform:Ke},{offset:1,opacity:0,transform:De}]:[{offset:0,opacity:0,transform:De},{offset:1,opacity:1,transform:Ke}],Lt=J?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Cn=(0,ue.c)(),Gn=(0,ue.c)(),At=(0,ue.c)(),Ae=Ne("ion-back-button"),Te=Oe(Ae).querySelector(".button-text"),Ee=Oe(Ae).querySelector("ion-icon");Ae.text=Z.text,Ae.mode=Z.mode,Ae.icon=Z.icon,Ae.color=Z.color,Ae.disabled=Z.disabled,Ae.style.setProperty("display","block"),Ae.style.setProperty("position","fixed"),Gn.addElement(Ee),Cn.addElement(Te),At.addElement(Ae),At.beforeStyles({position:"absolute",top:"0px",[Ve]:"0px"}).keyframes(ei),Cn.beforeStyles({"transform-origin":`${be} top`}).beforeAddWrite(()=>{Z.style.setProperty("display","none"),Ae.style.setProperty(be,se)}).afterAddWrite(()=>{Z.style.setProperty("display",""),Ae.style.setProperty("display","none"),Ae.style.removeProperty(be)}).keyframes(Tn),Gn.beforeStyles({"transform-origin":`${ie} center`}).keyframes(Lt),le.addAnimation([Cn,Gn,At])},Qe=(le,we,J,Z,ee,ke,ne,K)=>{var ye,Q;const he=we?"right":"left",se=we?`calc(100% - ${ee.right}px)`:`${ee.left}px`,ie=`${ee.top}px`,Se=we?`-${window.innerWidth-K.right-8}px`:K.x-8+"px",Ge=K.y-2+"px",De=(null===(ye=ne.textContent)||void 0===ye?void 0:ye.trim())===(null===(Q=Z.textContent)||void 0===Q?void 0:Q.trim()),$e=K.height/(ke.height-Nt),ae="scale(1)",Ze=De?`scale(${K.width/ke.width}, ${$e})`:`scale(${$e})`,qt=J?[{offset:0,opacity:0,transform:`translate3d(${Se}, ${Ge}, 0) ${Ze}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${ie}, 0) ${ae}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${ie}, 0) ${ae}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Se}, ${Ge}, 0) ${Ze}`}],_n=Ne("ion-title"),kn=(0,ue.c)();_n.innerText=Z.innerText,_n.size=Z.size,_n.color=Z.color,kn.addElement(_n),kn.beforeStyles({"transform-origin":`${he} top`,height:`${ee.height}px`,display:"",position:"relative",[he]:se}).beforeAddWrite(()=>{Z.style.setProperty("opacity","0")}).afterAddWrite(()=>{Z.style.setProperty("opacity",""),_n.style.setProperty("display","none")}).keyframes(qt),le.addAnimation(kn)},je=(le,we)=>{var J;try{const Z="cubic-bezier(0.32,0.72,0,1)",ee="opacity",ke="transform",ne="0%",ye="rtl"===le.ownerDocument.dir,Q=ye?"-99.5%":"99.5%",he=ye?"33%":"-33%",se=we.enteringEl,be=we.leavingEl,ie="back"===we.direction,Ve=se.querySelector(":scope > ion-content"),Se=se.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Y=se.querySelectorAll(":scope > ion-header > ion-toolbar"),Ge=(0,ue.c)(),De=(0,ue.c)();if(Ge.addElement(se).duration((null!==(J=we.duration)&&void 0!==J?J:0)||540).easing(we.easing||Z).fill("both").beforeRemoveClass("ion-page-invisible"),be&&null!=le){const Ze=(0,ue.c)();Ze.addElement(le),Ge.addAnimation(Ze)}if(Ve||0!==Y.length||0!==Se.length?(De.addElement(Ve),De.addElement(Se)):De.addElement(se.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ge.addAnimation(De),ie?De.beforeClearStyles([ee]).fromTo("transform",`translateX(${he})`,`translateX(${ne})`).fromTo(ee,.8,1):De.beforeClearStyles([ee]).fromTo("transform",`translateX(${Q})`,`translateX(${ne})`),Ve){const Ze=Oe(Ve).querySelector(".transition-effect");if(Ze){const et=Ze.querySelector(".transition-cover"),dn=Ze.querySelector(".transition-shadow"),qt=(0,ue.c)(),_n=(0,ue.c)(),kn=(0,ue.c)();qt.addElement(Ze).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),_n.addElement(et).beforeClearStyles([ee]).fromTo(ee,0,.1),kn.addElement(dn).beforeClearStyles([ee]).fromTo(ee,.03,.7),qt.addAnimation([_n,kn]),De.addAnimation([qt])}}const Ke=se.querySelector("ion-header.header-collapse-condense"),{forward:$e,backward:ae}=((le,we,J,Z,ee)=>{const ke=ct(Z,J),ne=He(ee),K=He(Z),ye=ct(ee,J),Q=null!==ke&&null!==ne&&!J,he=null!==K&&null!==ye&&J;if(Q){const se=ne.getBoundingClientRect(),be=ke.getBoundingClientRect(),ie=Oe(ke).querySelector(".button-text"),Ve=ie.getBoundingClientRect(),Y=Oe(ne).querySelector(".toolbar-title").getBoundingClientRect();Qe(le,we,J,ne,se,Y,ie,Ve),qe(le,we,J,ke,be,ie,Ve,ne,Y)}else if(he){const se=K.getBoundingClientRect(),be=ye.getBoundingClientRect(),ie=Oe(ye).querySelector(".button-text"),Ve=ie.getBoundingClientRect(),Y=Oe(K).querySelector(".toolbar-title").getBoundingClientRect();Qe(le,we,J,K,se,Y,ie,Ve),qe(le,we,J,ye,be,ie,Ve,K,Y)}return{forward:Q,backward:he}})(Ge,ye,ie,se,be);if(Y.forEach(Ze=>{const et=(0,ue.c)();et.addElement(Ze),Ge.addAnimation(et);const dn=(0,ue.c)();dn.addElement(Ze.querySelector("ion-title"));const qt=(0,ue.c)(),_n=Array.from(Ze.querySelectorAll("ion-buttons,[menuToggle]")),kn=Ze.closest("ion-header"),ei=kn?.classList.contains("header-collapse-condense-inactive");let Vt;Vt=_n.filter(ie?Lt=>{const Cn=Lt.classList.contains("buttons-collapse");return Cn&&!ei||!Cn}:Lt=>!Lt.classList.contains("buttons-collapse")),qt.addElement(Vt);const vi=(0,ue.c)();vi.addElement(Ze.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Tn=(0,ue.c)();Tn.addElement(Oe(Ze).querySelector(".toolbar-background"));const Un=(0,ue.c)(),cn=Ze.querySelector("ion-back-button");if(cn&&Un.addElement(cn),et.addAnimation([dn,qt,vi,Tn,Un]),qt.fromTo(ee,.01,1),vi.fromTo(ee,.01,1),ie)ei||dn.fromTo("transform",`translateX(${he})`,`translateX(${ne})`).fromTo(ee,.01,1),vi.fromTo("transform",`translateX(${he})`,`translateX(${ne})`),Un.fromTo(ee,.01,1);else if(Ke||dn.fromTo("transform",`translateX(${Q})`,`translateX(${ne})`).fromTo(ee,.01,1),vi.fromTo("transform",`translateX(${Q})`,`translateX(${ne})`),Tn.beforeClearStyles([ee,"transform"]),kn?.translucent?Tn.fromTo("transform",ye?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Tn.fromTo(ee,.01,"var(--opacity)"),$e||Un.fromTo(ee,.01,1),cn&&!$e){const Cn=(0,ue.c)();Cn.addElement(Oe(cn).querySelector(".button-text")).fromTo("transform",ye?"translateX(-100px)":"translateX(100px)","translateX(0px)"),et.addAnimation(Cn)}}),be){const Ze=(0,ue.c)(),et=be.querySelector(":scope > ion-content"),dn=be.querySelectorAll(":scope > ion-header > ion-toolbar"),qt=be.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(et||0!==dn.length||0!==qt.length?(Ze.addElement(et),Ze.addElement(qt)):Ze.addElement(be.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ge.addAnimation(Ze),ie){Ze.beforeClearStyles([ee]).fromTo("transform",`translateX(${ne})`,ye?"translateX(-100%)":"translateX(100%)");const _n=(0,Le.g)(be);Ge.afterAddWrite(()=>{"normal"===Ge.getDirection()&&_n.style.setProperty("display","none")})}else Ze.fromTo("transform",`translateX(${ne})`,`translateX(${he})`).fromTo(ee,1,.8);if(et){const _n=Oe(et).querySelector(".transition-effect");if(_n){const kn=_n.querySelector(".transition-cover"),ei=_n.querySelector(".transition-shadow"),Vt=(0,ue.c)(),vi=(0,ue.c)(),Tn=(0,ue.c)();Vt.addElement(_n).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),vi.addElement(kn).beforeClearStyles([ee]).fromTo(ee,.1,0),Tn.addElement(ei).beforeClearStyles([ee]).fromTo(ee,.7,.03),Vt.addAnimation([vi,Tn]),Ze.addAnimation([Vt])}}dn.forEach(_n=>{const kn=(0,ue.c)();kn.addElement(_n);const ei=(0,ue.c)();ei.addElement(_n.querySelector("ion-title"));const Vt=(0,ue.c)(),vi=_n.querySelectorAll("ion-buttons,[menuToggle]"),Tn=_n.closest("ion-header"),Un=Tn?.classList.contains("header-collapse-condense-inactive"),cn=Array.from(vi).filter(Te=>{const Ee=Te.classList.contains("buttons-collapse");return Ee&&!Un||!Ee});Vt.addElement(cn);const Lt=(0,ue.c)(),Cn=_n.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Cn.length>0&&Lt.addElement(Cn);const Gn=(0,ue.c)();Gn.addElement(Oe(_n).querySelector(".toolbar-background"));const At=(0,ue.c)(),Ae=_n.querySelector("ion-back-button");if(Ae&&At.addElement(Ae),kn.addAnimation([ei,Vt,Lt,At,Gn]),Ge.addAnimation(kn),At.fromTo(ee,.99,0),Vt.fromTo(ee,.99,0),Lt.fromTo(ee,.99,0),ie){if(Un||ei.fromTo("transform",`translateX(${ne})`,ye?"translateX(-100%)":"translateX(100%)").fromTo(ee,.99,0),Lt.fromTo("transform",`translateX(${ne})`,ye?"translateX(-100%)":"translateX(100%)"),Gn.beforeClearStyles([ee,"transform"]),Tn?.translucent?Gn.fromTo("transform","translateX(0px)",ye?"translateX(-100%)":"translateX(100%)"):Gn.fromTo(ee,"var(--opacity)",0),Ae&&!ae){const Ee=(0,ue.c)();Ee.addElement(Oe(Ae).querySelector(".button-text")).fromTo("transform",`translateX(${ne})`,`translateX(${(ye?-124:124)+"px"})`),kn.addAnimation(Ee)}}else Un||ei.fromTo("transform",`translateX(${ne})`,`translateX(${he})`).fromTo(ee,.99,0).afterClearStyles([ke,ee]),Lt.fromTo("transform",`translateX(${ne})`,`translateX(${he})`).afterClearStyles([ke,ee]),At.afterClearStyles([ee]),ei.afterClearStyles([ee]),Vt.afterClearStyles([ee])})}return Ge}catch(Z){throw Z}},Nt=10},6003:(An,Rt,Ce)=>{"use strict";Ce.r(Rt),Ce.d(Rt,{mdTransitionAnimation:()=>fe});var ue=Ce(5062),Le=Ce(6323);Ce(6225),Ce(8411);const fe=(Ne,Oe)=>{var He,ct,Ht;const je="back"===Oe.direction,le=Oe.leavingEl,we=(0,Le.g)(Oe.enteringEl),J=we.querySelector("ion-toolbar"),Z=(0,ue.c)();if(Z.addElement(we).fill("both").beforeRemoveClass("ion-page-invisible"),je?Z.duration((null!==(He=Oe.duration)&&void 0!==He?He:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Z.duration((null!==(ct=Oe.duration)&&void 0!==ct?ct:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),J){const ee=(0,ue.c)();ee.addElement(J),Z.addAnimation(ee)}if(le&&je){Z.duration((null!==(Ht=Oe.duration)&&void 0!==Ht?Ht:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ee=(0,ue.c)();ee.addElement((0,Le.g)(le)).onFinish(ke=>{1===ke&&ee.elements.length>0&&ee.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Z.addAnimation(ee)}return Z}},3645:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{B:()=>ei,G:()=>Vt,a:()=>Qe,b:()=>je,c:()=>J,d:()=>vi,e:()=>Tn,f:()=>De,g:()=>$e,h:()=>et,i:()=>qt,j:()=>ee,k:()=>ke,n:()=>Ht,o:()=>ye,q:()=>Y,s:()=>kn});var ue=Ce(5861),Le=Ce(6225),Je=Ce(3395),g=Ce(6559),fe=Ce(2124),Ne=Ce(839),Oe=Ce(6710);let He=0,ct=0;const Ht=new WeakMap,qe=Un=>({create:cn=>ne(Un,cn),dismiss:(cn,Lt,Cn)=>ie(document,cn,Lt,Un,Cn),getTop:()=>(0,ue.Z)(function*(){return Y(document,Un)})()}),Qe=qe("ion-alert"),je=qe("ion-action-sheet"),J=qe("ion-popover"),ee=Un=>{typeof document<"u"&&be(document);const cn=He++;Un.overlayIndex=cn},ke=Un=>(Un.hasAttribute("id")||(Un.id="ion-overlay-"+ ++ct),Un.id),ne=(Un,cn)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Un).then(()=>{const Lt=document.createElement(Un);return Lt.classList.add("overlay-hidden"),Object.assign(Lt,Object.assign(Object.assign({},cn),{hasController:!0})),ae(document).appendChild(Lt),new Promise(Cn=>(0,Ne.c)(Lt,Cn))}):Promise.resolve(),K='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ye=(Un,cn)=>{let Lt=Un.querySelector(K);const Cn=Lt?.shadowRoot;Cn&&(Lt=Cn.querySelector(K)||Lt),Lt?(0,Ne.f)(Lt):cn.focus()},he=(Un,cn)=>{const Lt=Array.from(Un.querySelectorAll(K));let Cn=Lt.length>0?Lt[Lt.length-1]:null;const Gn=Cn?.shadowRoot;Gn&&(Cn=Gn.querySelector(K)||Cn),Cn?Cn.focus():cn.focus()},be=Un=>{0===He&&(He=1,Un.addEventListener("focus",cn=>{((Un,cn)=>{const Lt=Y(cn,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Cn=Un.target;Lt&&Cn&&!Lt.classList.contains("ion-disable-focus-trap")&&(Lt.shadowRoot?(()=>{if(Lt.contains(Cn))Lt.lastFocus=Cn;else{const Ae=Lt.lastFocus;ye(Lt,Lt),Ae===cn.activeElement&&he(Lt,Lt),Lt.lastFocus=cn.activeElement}})():(()=>{if(Lt===Cn)Lt.lastFocus=void 0;else{const Ae=(0,Ne.g)(Lt);if(!Ae.contains(Cn))return;const Te=Ae.querySelector(".ion-overlay-wrapper");if(!Te)return;if(Te.contains(Cn)||Cn===Ae.querySelector("ion-backdrop"))Lt.lastFocus=Cn;else{const Ee=Lt.lastFocus;ye(Te,Lt),Ee===cn.activeElement&&he(Te,Lt),Lt.lastFocus=cn.activeElement}}})())})(cn,Un)},!0),Un.addEventListener("ionBackButton",cn=>{const Lt=Y(Un);Lt?.backdropDismiss&&cn.detail.register(fe.OVERLAY_BACK_BUTTON_PRIORITY,()=>Lt.dismiss(void 0,ei))}),Un.addEventListener("keydown",cn=>{if("Escape"===cn.key){const Lt=Y(Un);Lt?.backdropDismiss&&Lt.dismiss(void 0,ei)}}))},ie=(Un,cn,Lt,Cn,Gn)=>{const At=Y(Un,Cn,Gn);return At?At.dismiss(cn,Lt):Promise.reject("overlay does not exist")},Se=(Un,cn)=>((Un,cn)=>(void 0===cn&&(cn="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Un.querySelectorAll(cn)).filter(Lt=>Lt.overlayIndex>0)))(Un,cn).filter(Lt=>!(Un=>Un.classList.contains("overlay-hidden"))(Lt)),Y=(Un,cn,Lt)=>{const Cn=Se(Un,cn);return void 0===Lt?Cn[Cn.length-1]:Cn.find(Gn=>Gn.id===Lt)},Ge=(Un=!1)=>{const Lt=ae(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Lt&&(Un?Lt.setAttribute("aria-hidden","true"):Lt.removeAttribute("aria-hidden"))},De=function(){var Un=(0,ue.Z)(function*(cn,Lt,Cn,Gn,At){var Ae,Te;if(cn.presented)return;Ge(!0),cn.presented=!0,cn.willPresent.emit(),null===(Ae=cn.willPresentShorthand)||void 0===Ae||Ae.emit();const Ee=(0,Je.b)(cn),lt=cn.enterAnimation?cn.enterAnimation:Je.c.get(Lt,"ios"===Ee?Cn:Gn);(yield Ze(cn,lt,cn.el,At))&&(cn.didPresent.emit(),null===(Te=cn.didPresentShorthand)||void 0===Te||Te.emit()),"ION-TOAST"!==cn.el.tagName&&Ke(cn.el),cn.keyboardClose&&(null===document.activeElement||!cn.el.contains(document.activeElement))&&cn.el.focus()});return function(Lt,Cn,Gn,At,Ae){return Un.apply(this,arguments)}}(),Ke=function(){var Un=(0,ue.Z)(function*(cn){let Lt=document.activeElement;if(!Lt)return;const Cn=Lt?.shadowRoot;Cn&&(Lt=Cn.querySelector(K)||Lt),yield cn.onDidDismiss(),Lt.focus()});return function(Lt){return Un.apply(this,arguments)}}(),$e=function(){var Un=(0,ue.Z)(function*(cn,Lt,Cn,Gn,At,Ae,Te){var Ee,lt;if(!cn.presented)return!1;void 0!==Le.d&&1===Se(Le.d).length&&Ge(!1),cn.presented=!1;try{cn.el.style.setProperty("pointer-events","none"),cn.willDismiss.emit({data:Lt,role:Cn}),null===(Ee=cn.willDismissShorthand)||void 0===Ee||Ee.emit({data:Lt,role:Cn});const Mt=(0,Je.b)(cn),ln=cn.leaveAnimation?cn.leaveAnimation:Je.c.get(Gn,"ios"===Mt?At:Ae);Cn!==Vt&&(yield Ze(cn,ln,cn.el,Te)),cn.didDismiss.emit({data:Lt,role:Cn}),null===(lt=cn.didDismissShorthand)||void 0===lt||lt.emit({data:Lt,role:Cn}),Ht.delete(cn),cn.el.classList.add("overlay-hidden"),cn.el.style.removeProperty("pointer-events"),void 0!==cn.el.lastFocus&&(cn.el.lastFocus=void 0)}catch(Mt){console.error(Mt)}return cn.el.remove(),!0});return function(Lt,Cn,Gn,At,Ae,Te,Ee){return Un.apply(this,arguments)}}(),ae=Un=>Un.querySelector("ion-app")||Un.body,Ze=function(){var Un=(0,ue.Z)(function*(cn,Lt,Cn,Gn){Cn.classList.remove("overlay-hidden");const Ae=Lt(cn.el,Gn);(!cn.animated||!Je.c.getBoolean("animated",!0))&&Ae.duration(0),cn.keyboardClose&&Ae.beforeAddWrite(()=>{const Ee=Cn.ownerDocument.activeElement;Ee?.matches("input,ion-input, ion-textarea")&&Ee.blur()});const Te=Ht.get(cn)||[];return Ht.set(cn,[...Te,Ae]),yield Ae.play(),!0});return function(Lt,Cn,Gn,At){return Un.apply(this,arguments)}}(),et=(Un,cn)=>{let Lt;const Cn=new Promise(Gn=>Lt=Gn);return dn(Un,cn,Gn=>{Lt(Gn.detail)}),Cn},dn=(Un,cn,Lt)=>{const Cn=Gn=>{(0,Ne.b)(Un,cn,Cn),Lt(Gn)};(0,Ne.a)(Un,cn,Cn)},qt=Un=>"cancel"===Un||Un===ei,_n=Un=>Un(),kn=(Un,cn)=>{if("function"==typeof Un)return Je.c.get("_zoneGate",_n)(()=>{try{return Un(cn)}catch(Cn){throw Cn}})},ei="backdrop",Vt="gesture",vi=Un=>{let Lt,cn=!1;const Cn=(0,g.C)(),Gn=(Te=!1)=>{if(Lt&&!Te)return{delegate:Lt,inline:cn};const{el:Ee,hasController:lt,delegate:Mt}=Un;return cn=null!==Ee.parentNode&&!lt,Lt=cn?Mt||Cn:Mt,{inline:cn,delegate:Lt}};return{attachViewToDom:function(){var Te=(0,ue.Z)(function*(Ee){const{delegate:lt}=Gn(!0);if(lt)return yield lt.attachViewToDom(Un.el,Ee);const{hasController:Mt}=Un;if(Mt&&void 0!==Ee)throw new Error("framework delegate is missing");return null});return function(lt){return Te.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Te}=Gn();Te&&void 0!==Un.el&&Te.removeViewFromDom(Un.el.parentElement,Un.el)}}},Tn=()=>{let Un;const cn=()=>{Un&&(Un(),Un=void 0)};return{addClickListener:(Cn,Gn)=>{cn();const At=void 0!==Gn?document.getElementById(Gn):null;At?Un=((Te,Ee)=>{const lt=()=>{Ee.present()};return Te.addEventListener("click",lt),()=>{Te.removeEventListener("click",lt)}})(At,Cn):(0,Oe.p)(`A trigger element with the ID "${Gn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Cn)},removeClickListener:cn}}},2176:(An,Rt)=>{"use strict";function ue(J){return!function Le(J){return function Je(){return typeof window<"u"&&typeof document<"u"}()?function g(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}()?function fe(){return Function.prototype&&Function.prototype.bind}()?function Ne(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}()?function Oe(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}()?function He(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ee,ke,J=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(J);try{ke=new Worker(Z),ee=!0}catch{ee=!1}return ke&&ke.terminate(),URL.revokeObjectURL(Z),ee}()?function ct(){return"Uint8ClampedArray"in window}()?function Ht(){return ArrayBuffer.isView}()?function qe(){var J=document.createElement("canvas");J.width=J.height=1;var Z=J.getContext("2d");if(!Z)return!1;var ee=Z.getImageData(0,0,1,1);return ee&&ee.width===J.width}()?function je(J){return void 0===Qe[J]&&(Qe[J]=function le(J){var ee,Z=function Nt(J){var Z=document.createElement("canvas"),ee=Object.create(ue.webGLContextAttributes);return ee.failIfMajorPerformanceCaveat=J,Z.getContext("webgl",ee)||Z.getContext("experimental-webgl",ee)}(J);if(!Z)return!1;try{ee=Z.createShader(Z.VERTEX_SHADER)}catch{return!1}return!(!ee||Z.isContextLost())&&(Z.shaderSource(ee,"void main() {}"),Z.compileShader(ee),!0===Z.getShaderParameter(ee,Z.COMPILE_STATUS))}(J)),Qe[J]}(J&&J.failIfMajorPerformanceCaveat)?function we(){return!document.documentMode}()?void 0:"insufficient ECMAScript 6 support":"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}(J)}Rt.Z=ue;var Qe={};ue.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},9189:(An,Rt,Ce)=>{"use strict";function ue(n){return"function"==typeof n}function Le(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Je=Le(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function g(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class fe{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ue(i))try{i()}catch(o){e=o instanceof Je?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{He(o)}catch(a){e=e??[],a instanceof Je?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Je(e)}}add(e){var t;if(e&&e!==this)if(this.closed)He(e);else{if(e instanceof fe){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&g(t,e)}remove(e){const{_finalizers:t}=this;t&&g(t,e),e instanceof fe&&e._removeParent(this)}}fe.EMPTY=(()=>{const n=new fe;return n.closed=!0,n})();const Ne=fe.EMPTY;function Oe(n){return n instanceof fe||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function He(n){ue(n)?n():n.unsubscribe()}const ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ht={setTimeout(n,e,...t){const{delegate:i}=Ht;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ht;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qe(n){Ht.setTimeout(()=>{const{onUnhandledError:e}=ct;if(!e)throw n;e(n)})}function Qe(){}const je=we("C",void 0,void 0);function we(n,e,t){return{kind:n,value:e,error:t}}let J=null;function Z(n){if(ct.useDeprecatedSynchronousErrorHandling){const e=!J;if(e&&(J={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=J;if(J=null,t)throw i}}else n()}class ke extends fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Oe(e)&&e.add(this)):this.destination=ie}static create(e,t,i){return new Q(e,t,i)}next(e){this.isStopped?be(function le(n){return we("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?be(function Nt(n){return we("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?be(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ne=Function.prototype.bind;function K(n,e){return ne.call(n,e)}class ye{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){he(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){he(i)}else he(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){he(t)}}}class Q extends ke{constructor(e,t,i){let r;if(super(),ue(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&ct.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&K(e.next,o),error:e.error&&K(e.error,o),complete:e.complete&&K(e.complete,o)}):r=e}this.destination=new ye(r)}}function he(n){ct.useDeprecatedSynchronousErrorHandling?function ee(n){ct.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=n)}(n):qe(n)}function be(n,e){const{onStoppedNotification:t}=ct;t&&Ht.setTimeout(()=>t(n,e))}const ie={closed:!0,next:Qe,error:function se(n){throw n},complete:Qe},Ve="function"==typeof Symbol&&Symbol.observable||"@@observable";function Se(n){return n}function Ge(n){return 0===n.length?Se:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let De=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function ae(n){return n&&n instanceof ke||function $e(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}(n)&&Oe(n)}(t)?t:new Q(t,i,r);return Z(()=>{const{operator:a,source:h}=this;o.add(a?a.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Ke(i))((r,o)=>{const a=new Q({next:h=>{try{t(h)}catch(m){o(m),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Ve](){return this}pipe(...t){return Ge(t)(this)}toPromise(t){return new(t=Ke(t))((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function Ke(n){var e;return null!==(e=n??ct.Promise)&&void 0!==e?e:Promise}const Ze=Le(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let et=(()=>{class n extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new dn(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Ze}next(t){Z(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Z(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Z(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Ne:(this.currentObservers=null,o.push(t),new fe(()=>{this.currentObservers=null,g(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new De;return t.source=this,t}}return n.create=(e,t)=>new dn(e,t),n})();class dn extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ne}}function qt(n){return ue(n?.lift)}function _n(n){return e=>{if(qt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function kn(n,e,t,i,r){return new ei(n,e,t,i,r)}class ei extends ke{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(h){try{t(h)}catch(m){e.error(m)}}:super._next,this._error=r?function(h){try{r(h)}catch(m){e.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(h){e.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Vt(n,e){return _n((t,i)=>{let r=0;t.subscribe(kn(i,o=>{i.next(n.call(e,o,r++))}))})}function Ti(n){return this instanceof Ti?(this.v=n,this):new Ti(n)}function gr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Bn(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(h,m){!function r(o,a,h,m){Promise.resolve(m).then(function(_){o({value:_,done:h})},a)}(h,m,(a=n[o](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const It=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function un(n){return ue(n?.then)}function Xn(n){return ue(n[Ve])}function ri(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function Zn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Cr=function yr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function sr(n){return ue(n?.[Cr])}function Zi(n){return function wr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(P){i[P]&&(r[P]=function(O){return new Promise(function(j,q){o.push([P,O,j,q])>1||h(P,O)})})}function h(P,O){try{!function m(P){P.value instanceof Ti?Promise.resolve(P.value.v).then(_,C):T(o[0][2],P)}(i[P](O))}catch(j){T(o[0][3],j)}}function _(P){h("next",P)}function C(P){h("throw",P)}function T(P,O){P(O),o.shift(),o.length&&h(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Ti(t.read());if(r)return yield Ti(void 0);yield yield Ti(i)}}finally{t.releaseLock()}})}function Sr(n){return ue(n?.getReader)}function Br(n){if(n instanceof De)return n;if(null!=n){if(Xn(n))return function vt(n){return new De(e=>{const t=n[Ve]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(It(n))return function wt(n){return new De(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(un(n))return function nn(n){return new De(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qe)})}(n);if(ri(n))return Sn(n);if(sr(n))return function an(n){return new De(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Sr(n))return function Vn(n){return Sn(Zi(n))}(n)}throw Zn(n)}function Sn(n){return new De(e=>{(function Qn(n,e){var t,i,r,o;return function lt(n,e,t,i){return new(t||(t=Promise))(function(o,a){function h(C){try{_(i.next(C))}catch(T){a(T)}}function m(C){try{_(i.throw(C))}catch(T){a(T)}}function _(C){C.done?o(C.value):function r(o){return o instanceof t?o:new t(function(a){a(o)})}(C.value).then(h,m)}_((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=gr(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function oi(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function zn(n,e,t=1/0){return ue(e)?zn((i,r)=>Vt((o,a)=>e(i,o,r,a))(Br(n(i,r))),t):("number"==typeof e&&(t=e),_n((i,r)=>function ki(n,e,t,i,r,o,a,h){const m=[];let _=0,C=0,T=!1;const P=()=>{T&&!m.length&&!_&&e.complete()},O=q=>_<i?j(q):m.push(q),j=q=>{o&&e.next(q),_++;let _e=!1;Br(t(q,C++)).subscribe(kn(e,me=>{r?.(me),o?O(me):e.next(me)},()=>{_e=!0},void 0,()=>{if(_e)try{for(_--;m.length&&_<i;){const me=m.shift();a?oi(e,a,()=>j(me)):j(me)}P()}catch(me){e.error(me)}}))};return n.subscribe(kn(e,O,()=>{T=!0,P()})),()=>{h?.()}}(i,r,n,t)))}function _r(n=1/0){return zn(Se,n)}const Ri=new De(n=>n.complete());function Vr(n){return n&&ue(n.schedule)}function To(n){return n[n.length-1]}function so(n){return ue(To(n))?n.pop():void 0}function Ns(n){return Vr(To(n))?n.pop():void 0}function no(n,e=0){return _n((t,i)=>{t.subscribe(kn(i,r=>oi(i,n,()=>i.next(r),e),()=>oi(i,n,()=>i.complete(),e),r=>oi(i,n,()=>i.error(r),e)))})}function ar(n,e=0){return _n((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function ko(n,e){if(!n)throw new Error("Iterable cannot be null");return new De(t=>{oi(t,e,()=>{const i=n[Symbol.asyncIterator]();oi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Bt(n,e){return e?function We(n,e){if(null!=n){if(Xn(n))return function Mn(n,e){return Br(n).pipe(ar(e),no(e))}(n,e);if(It(n))return function xs(n,e){return new De(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(un(n))return function yl(n,e){return Br(n).pipe(ar(e),no(e))}(n,e);if(ri(n))return ko(n,e);if(sr(n))return function ws(n,e){return new De(t=>{let i;return oi(t,e,()=>{i=n[Cr](),oi(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){return void t.error(a)}o?t.complete():t.next(r)},0,!0)}),()=>ue(i?.return)&&i.return()})}(n,e);if(Sr(n))return function Tl(n,e){return ko(Zi(n),e)}(n,e)}throw Zn(n)}(n,e):Br(n)}function gt(...n){const e=Ns(n),t=function No(n,e){return"number"==typeof To(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Br(i[0]):_r(t)(Bt(i,e)):Ri}class tt extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function St(...n){return Bt(n,Ns(n))}function Ot(n={}){const{connector:e=(()=>new et),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let a,h,m,_=0,C=!1,T=!1;const P=()=>{h?.unsubscribe(),h=void 0},O=()=>{P(),a=m=void 0,C=T=!1},j=()=>{const q=a;O(),q?.unsubscribe()};return _n((q,_e)=>{_++,!T&&!C&&P();const me=m=m??e();_e.add(()=>{_--,0===_&&!T&&!C&&(h=ce(j,r))}),me.subscribe(_e),!a&&_>0&&(a=new Q({next:te=>me.next(te),error:te=>{T=!0,P(),h=ce(O,t,te),me.error(te)},complete:()=>{C=!0,P(),h=ce(O,i),me.complete()}}),Br(q).subscribe(a))})(o)}}function ce(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Q({next:()=>{i.unsubscribe(),n()}});return Br(e(...t)).subscribe(i)}function ge(n,e){return _n((t,i)=>{let r=null,o=0,a=!1;const h=()=>a&&!r&&i.complete();t.subscribe(kn(i,m=>{r?.unsubscribe();let _=0;const C=o++;Br(n(m,C)).subscribe(r=kn(i,T=>i.next(e?e(m,T,C,_++):T),()=>{r=null,h()}))},()=>{a=!0,h()}))})}function nt(n,e=Se){return n=n??yt,_n((t,i)=>{let r,o=!0;t.subscribe(kn(i,a=>{const h=e(a);(o||!n(r,h))&&(o=!1,r=h,i.next(a))}))})}function yt(n,e){return n===e}function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function ut(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function rn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const vn=Re({__forward_ref__:Re});function xt(n){return n.__forward_ref__=xt,n.toString=function(){return kt(this())},n}function Pn(n){return $i(n)?n():n}function $i(n){return"function"==typeof n&&n.hasOwnProperty(vn)&&n.__forward_ref__===xt}function ur(n){return n&&!!n.\u0275providers}const yo="https://g.co/ng/security#xss";class Jt extends Error{constructor(e,t){super(function $r(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ji(n){return"string"==typeof n?n:null==n?"":String(n)}function Qs(n,e){throw new Jt(-201,!1)}function Uc(n,e){null==n&&function br(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function mi(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function po(n){return{providers:n.providers||[],imports:n.imports||[]}}function Gc(n){return dc(n,Bl)||dc(n,Xs)}function dc(n,e){return n.hasOwnProperty(e)?n[e]:null}function Mu(n){return n&&(n.hasOwnProperty(ud)||n.hasOwnProperty(ir))?n[ud]:null}const Bl=Re({\u0275prov:Re}),ud=Re({\u0275inj:Re}),Xs=Re({ngInjectableDef:Re}),ir=Re({ngInjectorDef:Re});var er=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(er||{});let hh;function ia(n){const e=hh;return hh=n,e}function ku(n,e,t){const i=Gc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&er.Optional?null:void 0!==e?e:void Qs(kt(n))}const Es=globalThis,lo={},Tc="__NG_DI_FLAG__",mo="ngTempTokenPath",ph=/\n/gm,Al="__source";let Da;function dd(n){const e=Da;return Da=n,e}function Pu(n,e=er.Default){if(void 0===Da)throw new Jt(-203,!1);return null===Da?ku(n,void 0,e):Da.get(n,e&er.Optional?null:void 0,e)}function fn(n,e=er.Default){return(function bl(){return hh}()||Pu)(Pn(n),e)}function ti(n,e=er.Default){return fn(n,Ql(e))}function Ql(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dc(n){const e=[];for(let t=0;t<n.length;t++){const i=Pn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Jt(900,!1);let r,o=er.Default;for(let a=0;a<i.length;a++){const h=i[a],m=Ac(h);"number"==typeof m?-1===m?r=h.token:o|=m:r=h}e.push(fn(r,o))}else e.push(fn(i))}return e}function du(n,e){return n[Tc]=e,n.prototype[Tc]=e,n}function Ac(n){return n[Tc]}function Jl(n){return{toString:n}.toString()}var La=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(La||{}),Bs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Bs||{});const Aa={},Po=[],Na=Re({\u0275cmp:Re}),kf=Re({\u0275dir:Re}),Hu=Re({\u0275pipe:Re}),mh=Re({\u0275mod:Re}),hu=Re({\u0275fac:Re}),hd=Re({__NG_ELEMENT_ID__:Re}),fu=Re({__NG_ENV_ID__:Re});function Hc(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function Ma(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],a=t[i++],h=t[i++];n.setAttribute(e,a,h,o)}else{const o=r,a=t[++i];Ja(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function gh(n){return 3===n||4===n||6===n}function Ja(n){return 64===n.charCodeAt(0)}function ec(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||qc(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function qc(n,e,t,i,r){let o=0,a=n.length;if(-1===e)a=-1;else for(;o<n.length;){const h=n[o++];if("number"==typeof h){if(h===e){a=-1;break}if(h>e){a=o-1;break}}}for(;o<n.length;){const h=n[o];if("number"==typeof h)break;if(h===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==a&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const Pf="ng-template";function qu(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const a=n[i++];if(t&&"class"===o&&-1!==Hc(a.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function Ou(n){return 4===n.type&&n.value!==Pf}function hc(n,e,t){return e===(4!==n.type||t?n.value:Pf)}function ul(n,e,t){let i=4;const r=n.attrs||[],o=function zd(n){for(let e=0;e<n.length;e++)if(gh(n[e]))return e;return n.length}(r);let a=!1;for(let h=0;h<e.length;h++){const m=e[h];if("number"!=typeof m){if(!a)if(4&i){if(i=2|1&i,""!==m&&!hc(n,m,t)||""===m&&1===e.length){if(Fa(i))return!1;a=!0}}else{const _=8&i?m:e[++h];if(8&i&&null!==n.attrs){if(!qu(n.attrs,_,t)){if(Fa(i))return!1;a=!0}continue}const T=Ml(8&i?"class":m,r,Ou(n),t);if(-1===T){if(Fa(i))return!1;a=!0;continue}if(""!==_){let P;P=T>o?"":r[T+1].toLowerCase();const O=8&i?P:null;if(O&&-1!==Hc(O,_,0)||2&i&&_!==P){if(Fa(i))return!1;a=!0}}}}else{if(!a&&!Fa(i)&&!Fa(m))return!1;if(a&&Fa(m))continue;a=!1,i=m|1&i}}return Fa(i)||a}function Fa(n){return 0==(1&n)}function Ml(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const a=e[r];if(a===n)return r;if(3===a||6===a)o=!0;else{if(1===a||2===a){let h=e[++r];for(;"string"==typeof h;)h=e[++r];continue}if(4===a)break;if(0===a){r+=4;continue}}r+=o?1:2}return-1}return function Ba(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function hm(n,e,t=!1){for(let i=0;i<e.length;i++)if(ul(n,e[i],t))return!0;return!1}function ka(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Mc(n,e){return n?":not("+e.trim()+")":e}function fc(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&i){const h=n[++t];r+="["+a+(h.length>0?'="'+h+'"':"")+"]"}else 8&i?r+="."+a:4&i&&(r+=" "+a);else""!==r&&!Fa(a)&&(e+=Mc(o,r),r=""),i=a,o=o||!Fa(i);t++}return""!==r&&(e+=Mc(o,r)),e}function qn(n){return Jl(()=>{const e=Fo(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===La.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Bs.Emulated,styles:n.styles||Po,_:null,schemas:n.schemas||null,tView:null,id:""};pp(t);const i=n.dependencies;return t.directiveDefs=$d(i,!1),t.pipeDefs=$d(i,!0),t.id=function kc(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function fp(n){return go(n)||Cs(n)}function ra(n){return null!==n}function co(n){return Jl(()=>({type:n.type,bootstrap:n.bootstrap||Po,declarations:n.declarations||Po,imports:n.imports||Po,exports:n.exports||Po,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ma(n,e){if(null==n)return Aa;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function On(n){return Jl(()=>{const e=Fo(n);return pp(e),e})}function go(n){return n[Na]||null}function Cs(n){return n[kf]||null}function oa(n){return n[Hu]||null}function sa(n,e){const t=n[mh]||null;if(!t&&!0===e)throw new Error(`Type ${kt(n)} does not have '\u0275mod' property.`);return t}function Fo(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Aa,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Po,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ma(n.inputs,e),outputs:ma(n.outputs)}}function pp(n){n.features?.forEach(e=>e(n))}function $d(n,e){if(!n)return null;const t=e?oa:fp;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(ra)}const aa=0,Bi=1,Or=2,Wr=3,Ss=4,Di=5,_o=6,pd=7,Ys=8,Is=9,Va=10,Ir=11,md=12,Vd=13,gd=14,Ya=15,kl=16,tc=17,Vl=18,_h=19,Ud=20,hl=21,mc=22,pu=23,Pc=24,Pi=25,gu=1,Nu=2,_a=7,el=9,wl=11;function c(n){return Array.isArray(n)&&"object"==typeof n[gu]}function f(n){return Array.isArray(n)&&!0===n[gu]}function b(n){return 0!=(4&n.flags)}function w(n){return n.componentOffset>-1}function A(n){return 1==(1&n.flags)}function B(n){return!!n.template}function U(n){return 0!=(512&n[Or])}function Of(n,e){return n.hasOwnProperty(hu)?n[hu]:null}let Ul=null,yh=!1;function x(n){const e=Ul;return Ul=n,e}const d={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function S(n){if(!Xe(n)||n.dirty){if(!n.producerMustRecompute(n)&&!W(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function N(n){n.dirty=!0,function D(n){if(void 0===n.liveConsumerNode)return;const e=yh;yh=!0;try{for(const t of n.liveConsumerNode)t.dirty||N(t)}finally{yh=e}}(n),n.consumerMarkedDirty?.(n)}function F(n){return n&&(n.nextProducerIndex=0),x(n)}function $(n,e){if(x(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Xe(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ze(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function W(n){it(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(S(t),i!==t.version))return!0}return!1}function H(n){if(it(n),Xe(n))for(let e=0;e<n.producerNode.length;e++)ze(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ze(n,e){if(function ot(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),it(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)ze(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];it(r),r.producerIndexOfThis[i]=e}}function Xe(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function it(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Gt=null;const fi=()=>{},vr=(()=>({...d,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:fi}))();class qi{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ki(){return uo}function uo(n){return n.type.prototype.ngOnChanges&&(n.setInput=dr),ho}function ho(){const n=zs(this),e=n?.current;if(e){const t=n.previous;if(t===Aa)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function dr(n,e,t,i){const r=this.declaredInputs[t],o=zs(n)||function Zs(n,e){return n[_s]=e}(n,{previous:Aa,current:null}),a=o.current||(o.current={}),h=o.previous,m=h[r];a[r]=new qi(m&&m.currentValue,e,h===Aa),n[i]=e}Ki.ngInherit=!0;const _s="__ngSimpleChanges__";function zs(n){return n[_s]||null}const va=function(n,e,t){},Fu="svg";function jr(n){for(;Array.isArray(n);)n=n[aa];return n}function Ao(n,e){return jr(e[n])}function vs(n,e){return jr(e[n.index])}function la(n,e){return n.data[e]}function Oc(n,e){const t=e[n];return c(t)?t:t[aa]}function Yc(n,e){return null==e?null:n[e]}function Wh(n){n[tc]=0}function xg(n){1024&n[Or]||(n[Or]|=1024,wg(n,1))}function mp(n){1024&n[Or]&&(n[Or]&=-1025,wg(n,-1))}function wg(n,e){let t=n[Wr];if(null===t)return;t[Di]+=e;let i=t;for(t=t[Wr];null!==t&&(1===e&&1===i[Di]||-1===e&&0===i[Di]);)t[Di]+=e,i=t,t=t[Wr]}const io={lFrame:V_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Xh(){return io.bindingsEnabled}function Nf(){return null!==io.skipHydrationRootTNode}function gi(){return io.lFrame.lView}function Bo(){return io.lFrame.tView}function Gd(n){return io.lFrame.contextLView=n,n[Ys]}function Bu(n){return io.lFrame.contextLView=null,n}function Ua(){let n=Ff();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ff(){return io.lFrame.currentTNode}function vu(n,e){const t=io.lFrame;t.currentTNode=n,t.isParent=e}function Dx(){return io.lFrame.isParent}function Ax(){io.lFrame.isParent=!1}function Eg(){return io.lFrame.bindingIndex++}function Uy(n,e){const t=io.lFrame;t.bindingIndex=t.bindingRootIndex=n,jy(e)}function jy(n){io.lFrame.currentDirectiveIndex=n}function Gy(n){const e=io.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function qd(){return io.lFrame.currentQueryIndex}function $_(n){io.lFrame.currentQueryIndex=n}function pm(n){const e=n[Bi];return 2===e.type?e.declTNode:1===e.type?n[_o]:null}function Cg(n,e,t){if(t&er.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&er.Host||(r=pm(o),null===r||(o=o[gd],10&r.type))););if(null===r)return!1;e=r,n=o}const i=io.lFrame=Hy();return i.currentTNode=e,i.lView=n,!0}function zf(n){const e=Hy(),t=n[Bi];io.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Hy(){const n=io.lFrame,e=null===n?null:n.child;return null===e?V_(n):e}function V_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function kx(){const n=io.lFrame;return io.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Px=kx;function Rx(){const n=kx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _c(){return io.lFrame.selectedIndex}function Wd(n){io.lFrame.selectedIndex=n}function ea(){const n=io.lFrame;return la(n.tView,n.selectedIndex)}function xh(){io.lFrame.currentNamespace=Fu}let Sg=!0;function vc(){return Sg}function yc(n){Sg=n}function ja(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:h,ngAfterViewInit:m,ngAfterViewChecked:_,ngOnDestroy:C}=o;a&&(n.contentHooks??=[]).push(-t,a),h&&((n.contentHooks??=[]).push(t,h),(n.contentCheckHooks??=[]).push(t,h)),m&&(n.viewHooks??=[]).push(-t,m),_&&((n.viewHooks??=[]).push(t,_),(n.viewCheckHooks??=[]).push(t,_)),null!=C&&(n.destroyHooks??=[]).push(t,C)}}function j_(n,e,t){nS(n,e,3,t)}function gp(n,e,t,i){(3&n[Or])===t&&nS(n,e,t,i)}function vd(n,e){let t=n[Or];(3&t)===e&&(t&=8191,t+=1,n[Or]=t)}function nS(n,e,t,i){const o=i??-1,a=e.length-1;let h=0;for(let m=void 0!==i?65535&n[tc]:0;m<a;m++)if("number"==typeof e[m+1]){if(h=e[m],null!=i&&h>=i)break}else e[m]<0&&(n[tc]+=65536),(h<o||-1==o)&&(rS(n,t,e,m),n[tc]=(4294901760&n[tc])+m+2),m++}function iS(n,e){va(4,n,e);const t=x(null);try{e.call(n)}finally{x(t),va(5,n,e)}}function rS(n,e,t,i){const r=t[i]<0,o=t[i+1],h=n[r?-t[i]:t[i]];r?n[Or]>>13<n[tc]>>16&&(3&n[Or])===e&&(n[Or]+=8192,iS(h,o)):iS(h,o)}const gm=-1;class wh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function _m(n){return n!==gm}function vm(n){return 32767&n}function ym(n,e){let t=function Nx(n){return n>>16}(n),i=e;for(;t>0;)i=i[gd],t--;return i}let Lc=!0;function Ig(n){const e=Lc;return Lc=n,e}const Eh=255,sS=5;let bm=0;const Zu={};function zu(n,e){const t=G_(n,e);if(-1!==t)return t;const i=e[Bi];i.firstCreatePass&&(n.injectorIndex=e.length,Fx(i.data,n),Fx(e,null),Fx(i.blueprint,null));const r=H_(n,e),o=n.injectorIndex;if(_m(r)){const a=vm(r),h=ym(r,e),m=h[Bi].data;for(let _=0;_<8;_++)e[o+_]=h[a+_]|m[a+_]}return e[o+8]=r,o}function Fx(n,e){n.push(0,0,0,0,0,0,0,0,e)}function G_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function H_(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Wy(r),null===i)return gm;if(t++,r=r[gd],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return gm}function Bx(n,e,t){!function Xd(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(hd)&&(i=t[hd]),null==i&&(i=t[hd]=bm++);const r=i&Eh;e.data[n+(r>>sS)]|=1<<r}(n,e,t)}function Ch(n,e,t){if(t&er.Optional||void 0!==n)return n;Qs()}function _p(n,e,t,i){if(t&er.Optional&&void 0===i&&(i=null),!(t&(er.Self|er.Host))){const r=n[Is],o=ia(void 0);try{return r?r.get(e,i,t&er.Optional):ku(e,i,t&er.Optional)}finally{ia(o)}}return Ch(i,0,t)}function $x(n,e,t,i=er.Default,r){if(null!==n){if(2048&e[Or]&&!(i&er.Self)){const a=function lS(n,e,t,i,r){let o=n,a=e;for(;null!==o&&null!==a&&2048&a[Or]&&!(512&a[Or]);){const h=Vx(o,a,t,i|er.Self,Zu);if(h!==Zu)return h;let m=o.parent;if(!m){const _=a[Ud];if(_){const C=_.get(t,Zu,i);if(C!==Zu)return C}m=Wy(a),a=a[gd]}o=m}return r}(n,e,t,i,Zu);if(a!==Zu)return a}const o=Vx(n,e,t,i,Zu);if(o!==Zu)return o}return _p(e,t,i,r)}function Vx(n,e,t,i,r){const o=function Tg(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(hd)?n[hd]:void 0;return"number"==typeof e?e>=0?e&Eh:Ux:e}(t);if("function"==typeof o){if(!Cg(e,n,i))return i&er.Host?Ch(r,0,i):_p(e,t,i,r);try{let a;if(a=o(i),null!=a||i&er.Optional)return a;Qs()}finally{Px()}}else if("number"==typeof o){let a=null,h=G_(n,e),m=gm,_=i&er.Host?e[Ya][_o]:null;for((-1===h||i&er.SkipSelf)&&(m=-1===h?H_(n,e):e[h+8],m!==gm&&Dg(i,!1)?(a=e[Bi],h=vm(m),e=ym(m,e)):h=-1);-1!==h;){const C=e[Bi];if(wm(o,h,C.data)){const T=aM(h,e,t,a,i,_);if(T!==Zu)return T}m=e[h+8],m!==gm&&Dg(i,e[Bi].data[h+8]===_)&&wm(o,h,e)?(a=C,h=vm(m),e=ym(m,e)):h=-1}}return r}function aM(n,e,t,i,r,o){const a=e[Bi],h=a.data[n+8],C=xm(h,a,t,null==i?w(h)&&Lc:i!=a&&0!=(3&h.type),r&er.Host&&o===h);return null!==C?$f(e,a,C,h):Zu}function xm(n,e,t,i,r){const o=n.providerIndexes,a=e.data,h=1048575&o,m=n.directiveStart,C=o>>20,P=r?h+C:n.directiveEnd;for(let O=i?h:h+C;O<P;O++){const j=a[O];if(O<m&&t===j||O>=m&&j.type===t)return O}if(r){const O=a[m];if(O&&B(O)&&O.type===t)return m}return null}function $f(n,e,t,i){let r=n[t];const o=e.data;if(function oS(n){return n instanceof wh}(r)){const a=r;a.resolving&&function As(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Jt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Mr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ji(n)}(o[t]));const h=Ig(a.canSeeViewProviders);a.resolving=!0;const _=a.injectImpl?ia(a.injectImpl):null;Cg(n,i,er.Default);try{r=n[t]=a.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function Lx(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const a=uo(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==_&&ia(_),Ig(h),a.resolving=!1,Px()}}return r}function wm(n,e,t){return!!(t[e+(n>>sS)]&1<<n)}function Dg(n,e){return!(n&er.Self||n&er.Host&&e)}class bc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return $x(this._tNode,this._lView,e,Ql(i),t)}}function Ux(){return new bc(Ua(),gi())}function $s(n){return Jl(()=>{const e=n.prototype.constructor,t=e[hu]||yp(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[hu]||yp(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function yp(n){return $i(n)?()=>{const e=yp(Pn(n));return e&&e()}:Of(n)}function Wy(n){const e=n[Bi],t=e.type;return 2===t?e.declTNode:1===t?n[_o]:null}function Vf(n){return function zx(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(gh(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(Ua(),n)}const Mg="__parameters__";function Ho(n,e,t){return Jl(()=>{const i=function Zh(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const a=new r(...o);return h.annotation=a,h;function h(m,_,C){const T=m.hasOwnProperty(Mg)?m[Mg]:Object.defineProperty(m,Mg,{value:[]})[Mg];for(;T.length<=C;)T.push(null);return(T[C]=T[C]||[]).push(a),m}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Pg(n,e){n.forEach(t=>Array.isArray(t)?Pg(t,e):e(t))}function Jh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ef(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bp(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Ku(n,e,t){let i=xp(n,e);return i>=0?n[1|i]=t:(i=~i,function dS(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Wx(n,e){const t=xp(n,e);if(t>=0)return n[1|t]}function xp(n,e){return function Yy(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Sm=du(Ho("Optional"),8),Lg=du(Ho("SkipSelf"),4);function K_(n){return 128==(128&n.flags)}var Dp=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Dp||{});const Fg=new Map;let vM=0;const Ap="__ngContext__";function bu(n,e){c(e)?(n[Ap]=e[_h],function bM(n){Fg.set(n[_h],n)}(e)):n[Ap]=e}let c1;function Im(n,e){return c1(n,e)}function Bg(n){const e=n[Wr];return f(e)?e[Wr]:e}function DS(n){return d1(n[md])}function u1(n){return d1(n[Ss])}function d1(n){for(;null!==n&&!f(n);)n=n[Ss];return n}function Tm(n,e,t,i,r){if(null!=i){let o,a=!1;f(i)?o=i:c(i)&&(a=!0,i=i[aa]);const h=jr(i);0===n&&null!==t?null==r?PS(e,t,h):Am(e,t,h,r||null,!0):1===n&&null!==t?Am(e,t,h,r||null,!0):2===n?function zg(n,e,t){const i=ov(n,e);i&&function DM(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,h,a):3===n&&e.destroyNode(h),null!=o&&function kM(n,e,t,i,r){const o=t[_a];o!==jr(t)&&Tm(e,n,i,o,r);for(let h=wl;h<t.length;h++){const m=t[h];cv(m[Bi],m,n,e,i,o)}}(e,n,o,t,r)}}function s0(n,e,t){return n.createElement(e,t)}function Dm(n,e){const t=n[el],i=t.indexOf(e);mp(e),t.splice(i,1)}function Mp(n,e){if(n.length<=wl)return;const t=wl+e,i=n[t];if(i){const r=i[kl];null!==r&&r!==n&&Dm(r,i),e>0&&(n[t-1][Ss]=i[Ss]);const o=ef(n,wl+e);!function SM(n,e){cv(n,e,e[Ir],2,null,null),e[aa]=null,e[_o]=null}(i[Bi],i);const a=o[Vl];null!==a&&a.detachView(o[Bi]),i[Wr]=null,i[Ss]=null,i[Or]&=-129}return i}function l0(n,e){if(!(256&e[Or])){const t=e[Ir];e[pu]&&H(e[pu]),e[Pc]&&H(e[Pc]),t.destroyNode&&cv(n,e,t,3,null,null),function MS(n){let e=n[md];if(!e)return c0(n[Bi],n);for(;e;){let t=null;if(c(e))t=e[md];else{const i=e[wl];i&&(t=i)}if(!t){for(;e&&!e[Ss]&&e!==n;)c(e)&&c0(e[Bi],e),e=e[Wr];null===e&&(e=n),c(e)&&c0(e[Bi],e),t=e&&e[Ss]}e=t}}(e)}}function c0(n,e){if(!(256&e[Or])){e[Or]&=-129,e[Or]|=256,function TM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof wh)){const o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const h=r[o[a]],m=o[a+1];va(4,h,m);try{m.call(h)}finally{va(5,h,m)}}else{va(4,r,o);try{o.call(r)}finally{va(5,r,o)}}}}}(n,e),function IM(n,e){const t=n.cleanup,i=e[pd];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[pd]=null);const r=e[hl];if(null!==r){e[hl]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Bi].type&&e[Ir].destroy();const t=e[kl];if(null!==t&&f(e[Wr])){t!==e[Wr]&&Dm(t,e);const i=e[Vl];null!==i&&i.detachView(n)}!function xM(n){Fg.delete(n[_h])}(e)}}function f1(n,e,t){return function kS(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[aa];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Bs.None||o===Bs.Emulated)return null}return vs(i,t)}}(n,e.parent,t)}function Am(n,e,t,i,r){n.insertBefore(e,t,i,r)}function PS(n,e,t){n.appendChild(e,t)}function rv(n,e,t,i,r){null!==i?Am(n,e,t,i,r):PS(n,e,t)}function ov(n,e){return n.parentNode(e)}function OS(n,e,t){return NS(n,e,t)}let p1,Rs,_1,u0,NS=function LS(n,e,t){return 40&n.type?vs(n,t):null};function sv(n,e,t,i){const r=f1(n,i,e),o=e[Ir],h=OS(i.parent||e[_o],i,e);if(null!=r)if(Array.isArray(t))for(let m=0;m<t.length;m++)rv(o,r,t[m],h,!1);else rv(o,r,t,h,!1);void 0!==p1&&p1(o,i,e,t,r)}function av(n,e){if(null!==e){const t=e.type;if(3&t)return vs(e,n);if(4&t)return xd(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return av(n,i);{const r=n[e.index];return f(r)?xd(-1,r):jr(r)}}if(32&t)return Im(e,n)()||jr(n[e.index]);{const i=ic(n,e);return null!==i?Array.isArray(i)?i[0]:av(Bg(n[Ya]),i):av(n,e.next)}}return null}function ic(n,e){return null!==e?n[Ya][_o].projection[e.projection]:null}function xd(n,e){const t=wl+n+1;if(t<e.length){const i=e[t],r=i[Bi].firstChild;if(null!==r)return av(i,r)}return e[_a]}function kp(n,e,t,i,r,o,a){for(;null!=t;){const h=i[t.index],m=t.type;if(a&&0===e&&(h&&bu(jr(h),i),t.flags|=2),32!=(32&t.flags))if(8&m)kp(n,e,t.child,i,r,o,!1),Tm(e,n,r,h,o);else if(32&m){const _=Im(t,i);let C;for(;C=_();)Tm(e,n,r,C,o);Tm(e,n,r,h,o)}else 16&m?$g(n,e,i,t,r,o):Tm(e,n,r,h,o);t=a?t.projectionNext:t.next}}function cv(n,e,t,i,r,o){kp(t,i,n.firstChild,e,r,o,!1)}function $g(n,e,t,i,r,o){const a=t[Ya],m=a[_o].projection[i.projection];if(Array.isArray(m))for(let _=0;_<m.length;_++)Tm(e,n,r,m[_],o);else{let _=m;const C=a[Wr];K_(i)&&(_.flags|=128),kp(n,e,_,C,r,o,!0)}}function m1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function g1(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&Ma(n,e,i),null!==r&&m1(n,e,r),null!==o&&function BS(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Mm(n){return function uv(){if(void 0===Rs&&(Rs=null,Es.trustedTypes))try{Rs=Es.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rs}()?.createHTML(n)||n}function jS(n){return function v1(){if(void 0===u0&&(u0=null,Es.trustedTypes))try{u0=Es.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return u0}()?.createScriptURL(n)||n}class km{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yo})`}}class d0 extends km{getTypeName(){return"HTML"}}class Ug extends km{getTypeName(){return"Style"}}class GS extends km{getTypeName(){return"Script"}}class h0 extends km{getTypeName(){return"URL"}}class y1 extends km{getTypeName(){return"ResourceURL"}}function wd(n){return n instanceof km?n.changingThisBreaksApplicationSecurity:n}function tf(n,e){const t=function OM(n){return n instanceof km&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yo})`)}return t===e}class WS{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Mm(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class hv{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Mm(e),t}}const w1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Pm(n){return(n=String(n)).match(w1)?n:"unsafe:"+n}function Gf(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Gg(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const E1=Gf("area,br,col,hr,img,wbr"),XS=Gf("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C1=Gf("rp,rt"),S1=Gg(E1,Gg(XS,Gf("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gg(C1,Gf("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gg(C1,XS)),f0=Gf("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),I1=Gg(f0,Gf("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gf("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ZS=Gf("script,style,template");class KS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!S1.hasOwnProperty(t))return this.sanitizedSomething=!0,!ZS.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),a=o.name,h=a.toLowerCase();if(!I1.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let m=o.value;f0[h]&&(m=Pm(m)),this.buf.push(" ",a,'="',T1(m),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();S1.hasOwnProperty(t)&&!E1.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(T1(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const BM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zM=/([^\#-~ |!])/g;function T1(n){return n.replace(/&/g,"&amp;").replace(BM,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(zM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fv;function Hg(n,e){let t=null;try{fv=fv||function Ju(n){const e=new hv(n);return function jg(){try{return!!(new window.DOMParser).parseFromString(Mm(""),"text/html")}catch{return!1}}()?new WS(e):e}(n);let i=e?String(e):"";t=fv.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=fv.getInertBodyElement(i)}while(i!==o);return Mm((new KS).sanitizeChildren(p0(t)||t))}finally{if(t){const i=p0(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function p0(n){return"content"in n&&function QS(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ga=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ga||{});function Rp(n){const e=pv();return e?e.sanitize(Ga.URL,n)||"":tf(n,"URL")?wd(n):Pm(ji(n))}function A1(n){const e=pv();if(e)return jS(e.sanitize(Ga.RESOURCE_URL,n)||"");if(tf(n,"ResourceURL"))return jS(wd(n));throw new Jt(904,!1)}function pv(){const n=gi();return n&&n[Va].sanitizer}class xi{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=mi({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const nf=new xi("ENVIRONMENT_INITIALIZER"),Rm=new xi("INJECTOR",-1),v0=new xi("INJECTOR_DEF_TYPES");class M1{get(e,t=lo){if(t===lo){const i=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw i.name="NullInjectorError",i}return t}}function $M(...n){return{\u0275providers:b0(0,n),\u0275fromNgModule:!0}}function b0(n,...e){const t=[],i=new Set;let r;const o=a=>{t.push(a)};return Pg(e,a=>{const h=a;Op(h,o,[],i)&&(r||=[],r.push(h))}),void 0!==r&&tI(r,o),t}function tI(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];x0(r,o=>{e(o,i)})}}function Op(n,e,t,i){if(!(n=Pn(n)))return!1;let r=null,o=Mu(n);const a=!o&&go(n);if(o||a){if(a&&!a.standalone)return!1;r=n}else{const m=n.ngModule;if(o=Mu(m),!o)return!1;r=m}const h=i.has(r);if(a){if(h)return!1;if(i.add(r),a.dependencies){const m="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const _ of m)Op(_,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!h){let _;i.add(r);try{Pg(o.imports,C=>{Op(C,e,t,i)&&(_||=[],_.push(C))})}finally{}void 0!==_&&tI(_,e)}if(!h){const _=Of(r)||(()=>new r);e({provide:r,useFactory:_,deps:Po},r),e({provide:v0,useValue:r,multi:!0},r),e({provide:nf,useValue:()=>fn(r),multi:!0},r)}const m=o.providers;if(null!=m&&!h){const _=n;x0(m,C=>{e(C,_)})}}}return r!==n&&void 0!==n.providers}function x0(n,e){for(let t of n)ur(t)&&(t=t.\u0275providers),Array.isArray(t)?x0(t,e):e(t)}const nI=Re({provide:String,useValue:Re});function Wg(n){return null!==n&&"object"==typeof n&&nI in n}function Lp(n){return"function"==typeof n}const k1=new xi("Set Injector scope."),Sh={},VM={};let Nm;function Np(){return void 0===Nm&&(Nm=new M1),Nm}class Rl{}class Fp extends Rl{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,P1(e,a=>this.processProvider(a)),this.records.set(Rm,Hf(void 0,this)),r.has("environment")&&this.records.set(Rl,Hf(void 0,this));const o=this.records.get(k1);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(v0.multi,Po,er.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=dd(this),i=ia(void 0);try{return e()}finally{dd(t),ia(i)}}get(e,t=lo,i=er.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fu))return e[fu](this);i=Ql(i);const o=dd(this),a=ia(void 0);try{if(!(i&er.SkipSelf)){let m=this.records.get(e);if(void 0===m){const _=function oI(n){return"function"==typeof n||"object"==typeof n&&n instanceof xi}(e)&&Gc(e);m=_&&this.injectableDefInScope(_)?Hf(Xg(e),Sh):null,this.records.set(e,m)}if(null!=m)return this.hydrate(e,m)}return(i&er.Self?Np():this.parent).get(e,t=i&er.Optional&&t===lo?null:t)}catch(h){if("NullInjectorError"===h.name){if((h[mo]=h[mo]||[]).unshift(kt(e)),o)throw h;return function pa(n,e,t,i){const r=n[mo];throw e[Al]&&r.unshift(e[Al]),n.message=function hp(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=kt(e);if(Array.isArray(e))r=e.map(kt).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let h=e[a];o.push(a+":"+("string"==typeof h?JSON.stringify(h):kt(h)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ph,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[mo]=null,n}(h,e,"R3InjectorError",this.source)}throw h}finally{ia(a),dd(o)}}resolveInjectorInitializers(){const e=dd(this),t=ia(void 0);try{const r=this.get(nf.multi,Po,er.Self);for(const o of r)o()}finally{dd(e),ia(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(kt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Jt(205,!1)}processProvider(e){let t=Lp(e=Pn(e))?e:Pn(e&&e.provide);const i=function jM(n){return Wg(n)?Hf(void 0,n.useValue):Hf(Fm(n),Sh)}(e);if(Lp(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Hf(void 0,Sh,!0),r.factory=()=>Dc(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Sh&&(t.value=VM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function rI(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Pn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Xg(n){const e=Gc(n),t=null!==e?e.factory:Of(n);if(null!==t)return t;if(n instanceof xi)throw new Jt(204,!1);if(n instanceof Function)return function UM(n){const e=n.length;if(e>0)throw bp(e,"?"),new Jt(204,!1);const t=function Xa(n){return n&&(n[Bl]||n[Xs])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Jt(204,!1)}function Fm(n,e,t){let i;if(Lp(n)){const r=Pn(n);return Of(r)||Xg(r)}if(Wg(n))i=()=>Pn(n.useValue);else if(function iI(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Dc(n.deps||[]));else if(function w0(n){return!(!n||!n.useExisting)}(n))i=()=>fn(Pn(n.useExisting));else{const r=Pn(n&&(n.useClass||n.provide));if(!function GM(n){return!!n.deps}(n))return Of(r)||Xg(r);i=()=>new r(...Dc(n.deps))}return i}function Hf(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function P1(n,e){for(const t of n)Array.isArray(t)?P1(t,e):t&&ur(t)?P1(t.\u0275providers,e):e(t)}const mv=new xi("AppId",{providedIn:"root",factory:()=>HM}),HM="ng",R1=new xi("Platform Initializer"),rf=new xi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Zd=new xi("AnimationModuleType"),O1=new xi("CSP nonce",{providedIn:"root",factory:()=>function Vg(){if(void 0!==_1)return _1;if(typeof document<"u")return document;throw new Jt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let $1=(n,e,t)=>null;function ed(n,e,t=!1){return $1(n,e,t)}class lI{}class U1{}class uI{resolveComponentFactory(e){throw function cI(n){const e=Error(`No component factory found for ${kt(n)}.`);return e.ngComponent=n,e}(e)}}let Ed=(()=>{class n{static#e=this.NULL=new uI}return n})();function dI(){return Qg(Ua(),gi())}function Qg(n,e){return new Kn(vs(n,e))}let Kn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=dI}return n})();function M0(n){return n instanceof Kn?n.nativeElement:n}class xv{}let td=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function G1(){const n=gi(),t=Oc(Ua().index,n);return(c(t)?t:n)[Ir]}()}return n})(),H1=(()=>{class n{static#e=this.\u0275prov=mi({token:n,providedIn:"root",factory:()=>null})}return n})();class wu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const q1=new wu("16.2.9"),wv={};function Y1(n,e=null,t=null,i){const r=mI(n,e,t,i);return r.resolveInjectorInitializers(),r}function mI(n,e=null,t=null,i,r=new Set){const o=[t||Po,$M(n)];return i=i||("object"==typeof n?void 0:kt(n)),new Fp(o,e||Np(),i||null,r)}let Vs=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=lo;static#t=this.NULL=new M1;static create(t,i){if(Array.isArray(t))return Y1({name:""},i,t,"");{const r=t.name??"";return Y1({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=mi({token:n,providedIn:"any",factory:()=>fn(Rm)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function k0(n){return n.ngOriginalError}class nd{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&k0(e);for(;t&&k0(t);)t=k0(t);return t||null}}function R0(n){return e=>{setTimeout(n,void 0,e)}}const l=class K1 extends et{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&"object"==typeof e){const m=e;r=m.next?.bind(m),o=m.error?.bind(m),a=m.complete?.bind(m)}this.__isAsync&&(o=R0(o),r&&(r=R0(r)),a&&(a=R0(a)));const h=super.subscribe({next:r,error:o,complete:a});return e instanceof fe&&e.add(h),h}};function s(...n){}class v{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new l(!1),this.onMicrotaskEmpty=new l(!1),this.onStable=new l(!1),this.onError=new l(!1),typeof Zone>"u")throw new Jt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function u(){const n="function"==typeof Es.requestAnimationFrame;let e=Es[n?"requestAnimationFrame":"setTimeout"],t=Es[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function R(n){const e=()=>{!function M(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Es,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,L(n),n.isCheckStableRunning=!0,I(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),L(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,a,h)=>{if(function ve(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(h))return t.invokeTask(r,o,a,h);try{return z(n),t.invokeTask(r,o,a,h)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),V(n)}},onInvoke:(t,i,r,o,a,h,m)=>{try{return z(n),t.invoke(r,o,a,h,m)}finally{n.shouldCoalesceRunChangeDetection&&e(),V(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,L(n),I(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!v.isInAngularZone())throw new Jt(909,!1)}static assertNotInAngularZone(){if(v.isInAngularZone())throw new Jt(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,E,s,s);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const E={};function I(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function L(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function z(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function V(n){n._nesting--,I(n)}class G{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new l,this.onMicrotaskEmpty=new l,this.onStable=new l,this.onError=new l}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const X=new xi("",{providedIn:"root",factory:oe});function oe(){const n=ti(v);let e=!0;return gt(new De(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new De(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{v.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const a=n.onUnstable.subscribe(()=>{v.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),a.unsubscribe()}}).pipe(Ot()))}function Tt(n){return n instanceof Function?n():n}let ci=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=mi({token:n,providedIn:"root",factory:()=>new n})}return n})();function In(n){for(;n;){n[Or]|=64;const e=Bg(n);if(U(n)&&!e)return n;n=e}return null}const ii=new xi("",{providedIn:"root",factory:()=>!1});let Us=null;function Xr(n,e){return n[e]??Gs()}function js(n,e){const t=Gs();t.producerNode?.length&&(n[e]=Us,t.lView=n,Us=Ks())}const ta={...d,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{In(n.lView)},lView:null};function Ks(){return Object.create(ta)}function Gs(){return Us??=Ks(),Us}const pr={};function si(n){fl(Bo(),gi(),_c()+n,!1)}function fl(n,e,t,i){if(!i)if(3==(3&e[Or])){const o=n.preOrderCheckHooks;null!==o&&j_(e,o,t)}else{const o=n.preOrderHooks;null!==o&&gp(e,o,0,t)}Wd(t)}function re(n,e=er.Default){const t=gi();return null===t?fn(n,e):$x(Ua(),t,Pn(n),e)}function tl(){throw new Error("invalid")}function ya(n,e,t,i,r,o,a,h,m,_,C){const T=e.blueprint.slice();return T[aa]=r,T[Or]=140|i,(null!==_||n&&2048&n[Or])&&(T[Or]|=2048),Wh(T),T[Wr]=T[gd]=n,T[Ys]=t,T[Va]=a||n&&n[Va],T[Ir]=h||n&&n[Ir],T[Is]=m||n&&n[Is]||null,T[_o]=o,T[_h]=function yM(){return vM++}(),T[mc]=C,T[Ud]=_,T[Ya]=2==e.type?n[Ya]:T,T}function wo(n,e,t,i,r){let o=n.data[e];if(null===o)o=function nl(n,e,t,i,r){const o=Ff(),a=Dx(),m=n.data[e]=function bI(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,h=0;return Nf()&&(h|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=m),null!==o&&(a?null==o.child&&null!==m.parent&&(o.child=m):null===o.next&&(o.next=m,m.prev=o)),m}(n,e,t,i,r),function Er(){return io.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const a=function Hd(){const n=io.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return vu(o,!0),o}function Ts(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Qc(n,e,t,i,r){const o=Xr(e,pu),a=_c(),h=2&i;try{Wd(-1),h&&e.length>Pi&&fl(n,e,Pi,!1),va(h?2:0,r);const _=h?o:null,C=F(_);try{null!==_&&(_.dirty=!1),t(i,r)}finally{$(_,C)}}finally{h&&null===e[pu]&&js(e,pu),Wd(a),va(h?3:1,r)}}function il(n,e,t){if(b(e)){const i=x(null);try{const o=e.directiveEnd;for(let a=e.directiveStart;a<o;a++){const h=n.data[a];h.contentQueries&&h.contentQueries(1,t[a],a)}}finally{x(i)}}}function Gl(n,e,t){Xh()&&(function Dv(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;w(t)&&function vX(n,e,t){const i=vs(e,n),r=Jc(t);let a=16;t.signals?a=4096:t.onPush&&(a=64);const h=CI(n,ya(n,r,null,a,i,e,null,n[Va].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=h}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||zu(t,e),bu(i,e);const a=t.initialInputs;for(let h=r;h<o;h++){const m=n.data[h],_=$f(e,n,h,t);bu(_,e),null!==a&&yX(0,h-r,_,m,0,a),B(m)&&(Oc(t.index,e)[Ys]=$f(e,n,h,t))}}(n,e,t,vs(t,e)),64==(64&t.flags)&&N0(n,e,t))}function Ol(n,e,t=vs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const a=i[o+1],h=-1===a?t(e,n):n[a];n[r++]=h}}}function Jc(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ll(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ll(n,e,t,i,r,o,a,h,m,_,C){const T=Pi+i,P=T+r,O=function Th(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:pr);return t}(T,P),j="function"==typeof _?_():_;return O[Bi]={type:n,blueprint:O,template:t,queries:null,viewQuery:h,declTNode:e,data:O.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:m,consts:j,incompleteFirstPass:!1,ssrId:C}}let e_=n=>null;function O0(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?L0(t,e,r,o):i.hasOwnProperty(r)&&L0(t,e,i[r],o)}return t}function L0(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function xc(n,e,t,i,r,o,a,h){const m=vs(e,t);let C,_=e.inputs;!h&&null!=_&&(C=_[i])?(nk(n,t,C,i,r),w(e)&&function Q1(n,e){const t=Oc(e,n);16&t[Or]||(t[Or]|=64)}(t,e.index)):3&e.type&&(i=function xI(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=a?a(r,e.value||"",i):r,o.setProperty(m,i,r))}function Tv(n,e,t,i){if(Xh()){const r=null===i?null:{"":-1},o=function Vm(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const a=t[o];if(hm(e,a.selectors,!1))if(i||(i=[]),B(a))if(null!==a.findHostDirectiveDefs){const h=[];r=r||new Map,a.findHostDirectiveDefs(a,h,r),i.unshift(...h,a),JM(n,e,h.length)}else i.unshift(a),JM(n,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return null===i?null:[i,r]}(n,t);let a,h;null===o?a=h=null:[a,h]=o,null!==a&&wI(n,e,t,a,r,h),r&&function pX(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new Jt(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=ec(t.mergedAttrs,t.attrs)}function wI(n,e,t,i,r,o){for(let _=0;_<i.length;_++)Bx(zu(t,e),n,i[_].type);!function gX(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let _=0;_<i.length;_++){const C=i[_];C.providersResolver&&C.providersResolver(C)}let a=!1,h=!1,m=Ts(n,e,i.length,null);for(let _=0;_<i.length;_++){const C=i[_];t.mergedAttrs=ec(t.mergedAttrs,C.hostAttrs),_X(n,t,e,m,C),mX(m,C,r),null!==C.contentQueries&&(t.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(t.flags|=64);const T=C.type.prototype;!a&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}!function cf(n,e,t){const r=e.directiveEnd,o=n.data,a=e.attrs,h=[];let m=null,_=null;for(let C=e.directiveStart;C<r;C++){const T=o[C],P=t?t.get(T):null,j=P?P.outputs:null;m=O0(T.inputs,C,m,P?P.inputs:null),_=O0(T.outputs,C,_,j);const q=null===m||null===a||Ou(e)?null:bX(m,C,a);h.push(q)}null!==m&&(m.hasOwnProperty("class")&&(e.flags|=8),m.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=h,e.inputs=m,e.outputs=_}(n,t,o)}function N0(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function Xu(){return io.lFrame.currentDirectiveIndex}();try{Wd(o);for(let h=i;h<r;h++){const m=n.data[h],_=e[h];jy(h),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&EI(m,_)}}finally{Wd(-1),jy(a)}}function EI(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function JM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function mX(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;B(e)&&(t[""]=n)}}function _X(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=Of(r.type)),a=new wh(o,B(r),re);n.blueprint[i]=a,t[i]=a,function id(n,e,t,i,r){const o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const h=~e.index;(function rd(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=h&&a.push(h),a.push(t,i,o)}}(n,e,i,Ts(n,t,r.hostVars,pr),r)}function $p(n,e,t,i,r,o){const a=vs(n,e);!function ek(n,e,t,i,r,o,a){if(null==o)n.removeAttribute(e,r,t);else{const h=null==a?ji(o):a(o,i||"",r);n.setAttribute(e,r,h,t)}}(e[Ir],a,o,n.value,t,i,r)}function yX(n,e,t,i,r,o){const a=o[e];if(null!==a)for(let h=0;h<a.length;)zF(i,t,a[h++],a[h++],a[h++])}function zF(n,e,t,i,r){const o=x(null);try{const a=n.inputTransforms;null!==a&&a.hasOwnProperty(i)&&(r=a[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{x(o)}}function bX(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const a=n[o];for(let h=0;h<a.length;h+=2)if(a[h]===e){i.push(o,a[h+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function $F(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function VF(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];$_(t[i]),a.contentQueries(2,e[o],o)}}}function CI(n,e){return n[md]?n[Vd][Ss]=e:n[md]=e,n[Vd]=e,e}function tk(n,e,t){$_(0);const i=x(null);try{e(n,t)}finally{x(i)}}function UF(n){return n[pd]||(n[pd]=[])}function jF(n){return n.cleanup||(n.cleanup=[])}function GF(n,e,t){return(null===n||B(n))&&(t=function Ps(n){for(;Array.isArray(n);){if("object"==typeof n[gu])return n;n=n[aa]}return null}(t[e.index])),t[Ir]}function HF(n,e){const t=n[Is],i=t?t.get(nd,null):null;i&&i.handleError(e)}function nk(n,e,t,i,r){for(let o=0;o<t.length;){const a=t[o++],h=t[o++];zF(n.data[a],e[a],i,h,r)}}function xX(n,e){const t=Oc(e,n),i=t[Bi];!function wX(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[aa];null!==r&&null===t[mc]&&(t[mc]=ed(r,t[Is])),ik(i,t,t[Ys])}function ik(n,e,t){zf(e);try{const i=n.viewQuery;null!==i&&tk(1,i,t);const r=n.template;null!==r&&Qc(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&VF(n,e),n.staticViewQueries&&tk(2,n.viewQuery,t);const o=n.components;null!==o&&function EX(n,e){for(let t=0;t<e.length;t++)xX(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Or]&=-5,Rx()}}let qF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,a=function ni(n,e,t){const i=Object.create(vr);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=a=>{i.cleanupFn=a};return i.ref={notify:()=>N(i),run:()=>{if(i.dirty=!1,i.hasRun&&!W(i))return;i.hasRun=!0;const a=F(i);try{i.cleanupFn(),i.cleanupFn=fi,i.fn(r)}finally{$(i,a)}},cleanup:()=>i.cleanupFn()},i.ref}(t,_=>{this.all.has(_)&&this.queue.set(_,o)},r);let h;this.all.add(a),a.notify();const m=()=>{a.cleanup(),h?.(),this.all.delete(a),this.queue.delete(a)};return h=i?.onDestroy(m),{destroy:m}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=mi({token:n,providedIn:"root",factory:()=>new n})}return n})();function SI(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const h=e[a];"number"==typeof h?o=h:1==o?r=rn(r,h):2==o&&(i=rn(i,h+": "+e[++a]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function ew(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(jr(o)),f(o)&&WF(o,i);const a=t.type;if(8&a)ew(n,e,t.child,i);else if(32&a){const h=Im(t,e);let m;for(;m=h();)i.push(m)}else if(16&a){const h=ic(e,t);if(Array.isArray(h))i.push(...h);else{const m=Bg(e[Ya]);ew(m[Bi],m,h,i,!0)}}t=r?t.projectionNext:t.next}return i}function WF(n,e){for(let t=wl;t<n.length;t++){const i=n[t],r=i[Bi].firstChild;null!==r&&ew(i[Bi],i,r,e)}n[_a]!==n[aa]&&e.push(n[_a])}function II(n,e,t,i=!0){const r=e[Va],o=r.rendererFactory,a=r.afterRenderEventManager;o.begin?.(),a?.begin();try{XF(n,e,n.template,t)}catch(m){throw i&&HF(e,m),m}finally{o.end?.(),r.effectManager?.flush(),a?.end()}}function XF(n,e,t,i){const r=e[Or];if(256!=(256&r)){e[Va].effectManager?.flush(),zf(e);try{Wh(e),function JC(n){return io.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Qc(n,e,t,2,i);const a=3==(3&r);if(a){const _=n.preOrderCheckHooks;null!==_&&j_(e,_,null)}else{const _=n.preOrderHooks;null!==_&&gp(e,_,0,null),vd(e,0)}if(function IX(n){for(let e=DS(n);null!==e;e=u1(e)){if(!e[Nu])continue;const t=e[el];for(let i=0;i<t.length;i++){xg(t[i])}}}(e),YF(e,2),null!==n.contentQueries&&VF(n,e),a){const _=n.contentCheckHooks;null!==_&&j_(e,_)}else{const _=n.contentHooks;null!==_&&gp(e,_,1),vd(e,1)}!function Cl(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=Xr(e,Pc);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Wd(~o);else{const a=o,h=t[++r],m=t[++r];Uy(h,a),i.dirty=!1;const _=F(i);try{m(2,e[a])}finally{$(i,_)}}}}finally{null===e[Pc]&&js(e,Pc),Wd(-1)}}(n,e);const h=n.components;null!==h&&KF(e,h,0);const m=n.viewQuery;if(null!==m&&tk(2,m,i),a){const _=n.viewCheckHooks;null!==_&&j_(e,_)}else{const _=n.viewHooks;null!==_&&gp(e,_,2),vd(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Or]&=-73,mp(e)}finally{Rx()}}}function YF(n,e){for(let t=DS(n);null!==t;t=u1(t))for(let i=wl;i<t.length;i++)ZF(t[i],e)}function TX(n,e,t){ZF(Oc(e,n),t)}function ZF(n,e){if(!function fm(n){return 128==(128&n[Or])}(n))return;const t=n[Bi],i=n[Or];if(80&i&&0===e||1024&i||2===e)XF(t,n,t.template,n[Ys]);else if(n[Di]>0){YF(n,1);const r=t.components;null!==r&&KF(n,r,1)}}function KF(n,e,t){for(let i=0;i<e.length;i++)TX(n,e[i],t)}class tw{get rootNodes(){const e=this._lView,t=e[Bi];return ew(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ys]}set context(e){this._lView[Ys]=e}get destroyed(){return 256==(256&this._lView[Or])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Wr];if(f(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Mp(e,i),ef(t,i))}this._attachedToViewContainer=!1}l0(this._lView[Bi],this._lView)}onDestroy(e){!function Sx(n,e){if(256==(256&n[Or]))throw new Jt(911,!1);null===n[hl]&&(n[hl]=[]),n[hl].push(e)}(this._lView,e)}markForCheck(){In(this._cdRefInjectingView||this._lView)}detach(){this._lView[Or]&=-129}reattach(){this._lView[Or]|=128}detectChanges(){II(this._lView[Bi],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function a0(n,e){cv(n,e,e[Ir],2,null,null)}(this._lView[Bi],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Jt(902,!1);this._appRef=e}}class DX extends tw{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;II(e[Bi],e,e[Ys],!1)}checkNoChanges(){}get context(){return null}}class QF extends Ed{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=go(e);return new nw(t,this.ngModule)}}function JF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class MX{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Ql(i);const r=this.injector.get(e,wv,i);return r!==wv||t===wv?r:this.parentInjector.get(e,t,i)}}class nw extends U1{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=JF(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return JF(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Lu(n){return n.map(fc).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof Rl?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new MX(e,o):e,h=a.get(xv,null);if(null===h)throw new Jt(407,!1);const T={rendererFactory:h,sanitizer:a.get(H1,null),effectManager:a.get(qF,null),afterRenderEventManager:a.get(ci,null)},P=h.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",j=i?function Jg(n,e,t,i){const o=i.get(ii,!1)||t===Bs.ShadowDom,a=n.selectRootElement(e,o);return function Iv(n){e_(n)}(a),a}(P,i,this.componentDef.encapsulation,a):s0(P,O,function AX(n){const e=n.toLowerCase();return"svg"===e?Fu:"math"===e?"math":null}(O)),me=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let te=null;null!==j&&(te=ed(j,a,!0));const Pe=Ll(0,null,null,1,0,null,null,null,null,null,null),_t=ya(null,Pe,null,me,null,null,T,P,a,null,te);let Dt,Yt;zf(_t);try{const Wt=this.componentDef;let sn,rt=null;Wt.findHostDirectiveDefs?(sn=[],rt=new Map,Wt.findHostDirectiveDefs(Wt,sn,rt),sn.push(Wt)):sn=[Wt];const Ii=function PX(n,e){const t=n[Bi],i=Pi;return n[i]=e,wo(t,i,2,"#host",null)}(_t,j),bi=function RX(n,e,t,i,r,o,a){const h=r[Bi];!function OX(n,e,t,i){for(const r of n)e.mergedAttrs=ec(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(SI(e,e.mergedAttrs,!0),null!==t&&g1(i,t,e))}(i,n,e,a);let m=null;null!==e&&(m=ed(e,r[Is]));const _=o.rendererFactory.createRenderer(e,t);let C=16;t.signals?C=4096:t.onPush&&(C=64);const T=ya(r,Jc(t),null,C,r[n.index],n,o,_,null,null,m);return h.firstCreatePass&&JM(h,n,i.length-1),CI(r,T),r[n.index]=T}(Ii,j,Wt,sn,_t,T,P);Yt=la(Pe,Pi),j&&function NX(n,e,t,i){if(i)Ma(n,t,["ng-version",q1.full]);else{const{attrs:r,classes:o}=function Wu(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Fa(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Ma(n,t,r),o&&o.length>0&&m1(n,t,o.join(" "))}}(P,Wt,j,i),void 0!==t&&function FX(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(Yt,this.ngContentSelectors,t),Dt=function LX(n,e,t,i,r,o){const a=Ua(),h=r[Bi],m=vs(a,r);wI(h,r,a,t,null,i);for(let C=0;C<t.length;C++)bu($f(r,h,a.directiveStart+C,a),r);N0(h,r,a),m&&bu(m,r);const _=$f(r,h,a.directiveStart+a.componentOffset,a);if(n[Ys]=r[Ys]=_,null!==o)for(const C of o)C(_,e);return il(h,a,n),_}(bi,Wt,sn,rt,_t,[BX]),ik(Pe,_t,null)}finally{Rx()}return new kX(this.componentType,Dt,Qg(Yt,_t),_t,Yt)}}class kX extends lI{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new DX(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;nk(o[Bi],o,r,e,t),this.previousInputValues.set(e,t),In(Oc(this._tNode.index,o))}}get injector(){return new bc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function BX(){const n=Ua();ja(gi()[Bi],n)}function Tr(n){let e=function eB(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(B(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Jt(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const a=n;a.inputs=TI(n.inputs),a.inputTransforms=TI(n.inputTransforms),a.declaredInputs=TI(n.declaredInputs),a.outputs=TI(n.outputs);const h=r.hostBindings;h&&UX(n,h);const m=r.viewQuery,_=r.contentQueries;if(m&&$X(n,m),_&&VX(n,_),ut(n.inputs,r.inputs),ut(n.declaredInputs,r.declaredInputs),ut(n.outputs,r.outputs),null!==r.inputTransforms&&(null===a.inputTransforms&&(a.inputTransforms={}),ut(a.inputTransforms,r.inputTransforms)),B(r)&&r.data.animation){const C=n.data;C.animation=(C.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let a=0;a<o.length;a++){const h=o[a];h&&h.ngInherit&&h(n),h===Tr&&(t=!1)}}e=Object.getPrototypeOf(e)}!function zX(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ec(r.hostAttrs,t=ec(t,r.hostAttrs))}}(i)}function TI(n){return n===Aa?{}:n===Po?[]:n}function $X(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function VX(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function UX(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function rB(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function DI(n){return!!function rk(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function od(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function pl(n,e,t,i){const r=gi();return od(r,Eg(),e)&&(Bo(),$p(ea(),r,n,e,t,i)),pl}function Rr(n,e,t,i,r,o,a,h){const m=gi(),_=Bo(),C=n+Pi,T=_.firstCreatePass?function fY(n,e,t,i,r,o,a,h,m){const _=e.consts,C=wo(e,n,4,a||null,Yc(_,h));Tv(e,t,C,Yc(_,m)),ja(e,C);const T=C.tView=Ll(2,C,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,_,null);return null!==e.queries&&(e.queries.template(e,C),T.queries=e.queries.embeddedTView(C)),C}(C,_,m,e,t,i,r,o,a):_.data[C];vu(T,!1);const P=_B(_,m,T,n);vc()&&sv(_,m,P,T),bu(P,m),CI(m,m[C]=$F(P,m,P,T)),A(T)&&Gl(_,m,T),null!=a&&Ol(m,T,h)}let _B=function vB(n,e,t,i){return yc(!0),e[Ir].createComment("")};function Wf(n){return function jl(n,e){return n[e]}(function JA(){return io.lFrame.contextLView}(),Pi+n)}function lr(n,e,t){const i=gi();return od(i,Eg(),e)&&xc(Bo(),ea(),i,n,e,i[Ir],t,!1),lr}function uk(n,e,t,i,r){const a=r?"class":"style";nk(n,t,e.inputs[a],a,i)}function on(n,e,t,i){const r=gi(),o=Bo(),a=Pi+n,h=r[Ir],m=o.firstCreatePass?function _Y(n,e,t,i,r,o){const a=e.consts,m=wo(e,n,2,i,Yc(a,r));return Tv(e,t,m,Yc(a,o)),null!==m.attrs&&SI(m,m.attrs,!1),null!==m.mergedAttrs&&SI(m,m.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,m),m}(a,o,r,e,t,i):o.data[a],_=yB(o,r,m,h,e,n);r[a]=_;const C=A(m);return vu(m,!0),g1(h,_,m),32!=(32&m.flags)&&vc()&&sv(o,r,_,m),0===function ZC(){return io.lFrame.elementDepthCount}()&&bu(_,r),function Tx(){io.lFrame.elementDepthCount++}(),C&&(Gl(o,r,m),il(o,m,r)),null!==i&&Ol(r,m),on}function hn(){let n=Ua();Dx()?Ax():(n=n.parent,vu(n,!1));const e=n;(function KC(n){return io.skipHydrationRootTNode===n})(e)&&function QA(){io.skipHydrationRootTNode=null}(),function Vy(){io.lFrame.elementDepthCount--}();const t=Bo();return t.firstCreatePass&&(ja(t,n),b(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function nM(n){return 0!=(8&n.flags)}(e)&&uk(t,e,gi(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function iM(n){return 0!=(16&n.flags)}(e)&&uk(t,e,gi(),e.stylesWithoutHost,!1),hn}function oo(n,e,t,i){return on(n,e,t,i),hn(),oo}let yB=(n,e,t,i,r,o)=>(yc(!0),s0(i,r,function Yu(){return io.lFrame.currentNamespace}()));function Mv(){return gi()}function aw(n){return!!n&&"function"==typeof n.then}function xB(n){return!!n&&"function"==typeof n.subscribe}function So(n,e,t,i){const r=gi(),o=Bo(),a=Ua();return wB(o,r,r[Ir],a,n,e,i),So}function OI(n,e){const t=Ua(),i=gi(),r=Bo();return wB(r,i,GF(Gy(r.data),t,i),t,n,e),OI}function wB(n,e,t,i,r,o,a){const h=A(i),_=n.firstCreatePass&&jF(n),C=e[Ys],T=UF(e);let P=!0;if(3&i.type||a){const q=vs(i,e),_e=a?a(q):q,me=T.length,te=a?_t=>a(jr(_t[i.index])):i.index;let Pe=null;if(!a&&h&&(Pe=function EY(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const a=r[o];if(a===t&&r[o+1]===i){const h=e[pd],m=r[o+2];return h.length>m?h[m]:null}"string"==typeof a&&(o+=2)}return null}(n,e,r,i.index)),null!==Pe)(Pe.__ngLastListenerFn__||Pe).__ngNextListenerFn__=o,Pe.__ngLastListenerFn__=o,P=!1;else{o=CB(i,e,C,o,!1);const _t=t.listen(_e,r,o);T.push(o,_t),_&&_.push(r,te,me,me+1)}}else o=CB(i,e,C,o,!1);const O=i.outputs;let j;if(P&&null!==O&&(j=O[r])){const q=j.length;if(q)for(let _e=0;_e<q;_e+=2){const Dt=e[j[_e]][j[_e+1]].subscribe(o),Yt=T.length;T.push(o,Dt),_&&_.push(r,i.index,Yt,-(Yt+1))}}}function EB(n,e,t,i){try{return va(6,e,t),!1!==t(i)}catch(r){return HF(n,r),!1}finally{va(7,e,t)}}function CB(n,e,t,i,r){return function o(a){if(a===Function)return i;In(n.componentOffset>-1?Oc(n.index,e):e);let m=EB(e,t,i,a),_=o.__ngNextListenerFn__;for(;_;)m=EB(e,t,_,a)&&m,_=_.__ngNextListenerFn__;return r&&!1===m&&a.preventDefault(),m}}function ca(n=1){return function Ox(n){return(io.lFrame.contextLView=function eS(n,e){for(;n>0;)e=e[gd],n--;return e}(n,io.lFrame.contextLView))[Ys]}(n)}function CY(n,e){let t=null;const i=function fd(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?hm(n,o,!0):ka(i,o))return r}else t=r}return t}function Mi(n){const e=gi()[Ya][_o];if(!e.projection){const i=e.projection=bp(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const a=n?CY(o,n):0;null!==a&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o),o=o.next}}}function ui(n,e=0,t){const i=gi(),r=Bo(),o=wo(r,Pi+n,16,null,t||null);null===o.projection&&(o.projection=e),Ax(),(!i[mc]||Nf())&&32!=(32&o.flags)&&function MM(n,e,t){$g(e[Ir],0,e,t,f1(n,t,e),OS(t.parent||e[_o],t,e))}(r,i,o)}function LI(n,e){return n<<17|e<<2}function t_(n){return n>>17&32767}function pk(n){return 2|n}function kv(n){return(131068&n)>>2}function mk(n,e){return-131069&n|e<<2}function gk(n){return 1|n}function OB(n,e,t,i,r){const o=n[t+1],a=null===e;let h=i?t_(o):kv(o),m=!1;for(;0!==h&&(!1===m||a);){const C=n[h+1];MY(n[h],e)&&(m=!0,n[h+1]=i?gk(C):pk(C)),h=i?t_(C):kv(C)}m&&(n[t+1]=i?pk(o):gk(o))}function MY(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&xp(n,e)>=0}function lw(n,e,t){return Xf(n,e,t,!1),lw}function ba(n,e){return Xf(n,e,null,!0),ba}function Xf(n,e,t,i){const r=gi(),o=Bo(),a=function Js(n){const e=io.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function UB(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[_c()],a=function VB(n,e){return e>=n.expandoStartIndex}(n,t);(function qB(n,e){return 0!=(n.flags&(e?8:16))})(o,i)&&null===e&&!a&&(e=!1),e=function zY(n,e,t,i){const r=Gy(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=cw(t=_k(null,n,e,t,i),e.attrs,i),o=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==r)if(t=_k(r,n,e,t,i),null===o){let m=function $Y(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==kv(i))return n[t_(i)]}(n,e,i);void 0!==m&&Array.isArray(m)&&(m=_k(null,n,e,m[1],i),m=cw(m,e.attrs,i),function VY(n,e,t,i){n[t_(t?e.classBindings:e.styleBindings)]=i}(n,e,i,m))}else o=function UY(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=cw(i,n[o].hostAttrs,t);return cw(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function DY(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,h=t_(a),m=kv(a);n[i]=t;let C,_=!1;if(Array.isArray(t)?(C=t[1],(null===C||xp(t,C)>0)&&(_=!0)):C=t,r)if(0!==m){const P=t_(n[h+1]);n[i+1]=LI(P,h),0!==P&&(n[P+1]=mk(n[P+1],i)),n[h+1]=function IY(n,e){return 131071&n|e<<17}(n[h+1],i)}else n[i+1]=LI(h,0),0!==h&&(n[h+1]=mk(n[h+1],i)),h=i;else n[i+1]=LI(m,0),0===h?h=i:n[m+1]=mk(n[m+1],i),m=i;_&&(n[i+1]=pk(n[i+1])),OB(n,C,i,!0),OB(n,C,i,!1),function AY(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&xp(o,e)>=0&&(t[i+1]=gk(t[i+1]))}(e,C,n,i,o),a=LI(h,m),o?e.classBindings=a:e.styleBindings=a}(r,o,e,t,a,i)}}(o,n,a,i),e!==pr&&od(r,a,e)&&function GB(n,e,t,i,r,o,a,h){if(!(3&e.type))return;const m=n.data,_=m[h+1],C=function TY(n){return 1==(1&n)}(_)?HB(m,e,t,r,kv(_),a):void 0;NI(C)||(NI(o)||function SY(n){return 2==(2&n)}(_)&&(o=HB(m,null,t,r,h,a)),function PM(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Dp.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Dp.Important),n.setStyle(t,i,r,o))}}(i,a,Ao(_c(),t),r,o))}(o,o.data[_c()],r,r[Ir],n,r[a+1]=function qY(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=kt(wd(n)))),n}(e,t),i,a)}function _k(n,e,t,i,r){let o=null;const a=t.directiveEnd;let h=t.directiveStylingLast;for(-1===h?h=t.directiveStart:h++;h<a&&(o=e[h],i=cw(i,o.hostAttrs,r),o!==n);)h++;return null!==n&&(t.directiveStylingLast=h),i}function cw(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ku(n,a,!!t||e[++o]))}return void 0===n?null:n}function HB(n,e,t,i,r,o){const a=null===e;let h;for(;r>0;){const m=n[r],_=Array.isArray(m),C=_?m[1]:m,T=null===C;let P=t[r+1];P===pr&&(P=T?Po:void 0);let O=T?Wx(P,i):C===i?P:void 0;if(_&&!NI(O)&&(O=Wx(m,i)),NI(O)&&(h=O,a))return h;const j=n[r+1];r=a?t_(j):kv(j)}if(null!==e){let m=o?e.residualClasses:e.residualStyles;null!=m&&(h=Wx(m,i))}return h}function NI(n){return void 0!==n}function Jn(n,e=""){const t=gi(),i=Bo(),r=n+Pi,o=i.firstCreatePass?wo(i,r,1,e,null):i.data[r],a=WB(i,t,o,e,n);t[r]=a,vc()&&sv(i,t,a,o),vu(o,!1)}let WB=(n,e,t,i,r)=>(yc(!0),function nv(n,e){return n.createText(e)}(e[Ir],i));function df(n){return wc("",n,""),df}function wc(n,e,t){const i=gi(),r=function B0(n,e,t,i){return od(n,Eg(),t)?e+ji(t)+i:pr}(i,n,e,t);return r!==pr&&function Um(n,e,t){const i=Ao(e,n);!function h1(n,e,t){n.setValue(e,t)}(n[Ir],i,t)}(i,_c(),r),wc}function vk(n,e,t){const i=gi();return od(i,Eg(),e)&&xc(Bo(),ea(),i,n,e,i[Ir],t,!0),vk}function FI(n,e,t){const i=gi();if(od(i,Eg(),e)){const o=Bo(),a=ea();xc(o,a,i,n,e,GF(Gy(o.data),a,i),t,!0)}return FI}const X0="en-US";let p3=X0;function xk(n,e,t,i,r){if(n=Pn(n),Array.isArray(n))for(let o=0;o<n.length;o++)xk(n[o],e,t,i,r);else{const o=Bo(),a=gi(),h=Ua();let m=Lp(n)?n:Pn(n.provide);const _=Fm(n),C=1048575&h.providerIndexes,T=h.directiveStart,P=h.providerIndexes>>20;if(Lp(n)||!n.multi){const O=new wh(_,r,re),j=Ek(m,e,r?C:C+P,T);-1===j?(Bx(zu(h,a),o,m),wk(o,n,e.length),e.push(m),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),t.push(O),a.push(O)):(t[j]=O,a[j]=O)}else{const O=Ek(m,e,C+P,T),j=Ek(m,e,C,C+P),_e=j>=0&&t[j];if(r&&!_e||!r&&!(O>=0&&t[O])){Bx(zu(h,a),o,m);const me=function fK(n,e,t,i,r){const o=new wh(n,t,re);return o.multi=[],o.index=e,o.componentProviders=0,z3(o,r,i&&!t),o}(r?hK:dK,t.length,r,i,_);!r&&_e&&(t[j].providerFactory=me),wk(o,n,e.length,0),e.push(m),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),t.push(me),a.push(me)}else wk(o,n,O>-1?O:j,z3(t[r?j:O],_,!r&&i));!r&&i&&_e&&t[j].componentProviders++}}}function wk(n,e,t,i){const r=Lp(e),o=function Lm(n){return!!n.useClass}(e);if(r||o){const m=(o?Pn(e.useClass):e).prototype.ngOnDestroy;if(m){const _=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const C=_.indexOf(t);-1===C?_.push(t,[i,m]):_[C+1].push(i,m)}else _.push(t,m)}}}function z3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ek(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function dK(n,e,t,i){return Ck(this.multi,[])}function hK(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,h=$f(t,t[Bi],this.providerFactory.index,i);o=h.slice(0,a),Ck(r,o);for(let m=a;m<h.length;m++)o.push(h[m])}else o=[],Ck(r,o);return o}function Ck(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function zo(n,e=[]){return t=>{t.providersResolver=(i,r)=>function uK(n,e,t){const i=Bo();if(i.firstCreatePass){const r=B(n);xk(t,i.data,i.blueprint,r,!0),xk(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Rv{}class $3{}class Sk extends Rv{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QF(this);const r=sa(e);this._bootstrapComponents=Tt(r.bootstrap),this._r3Injector=mI(e,t,[{provide:Rv,useValue:this},{provide:Ed,useValue:this.componentFactoryResolver},...i],kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ik extends $3{constructor(e){super(),this.moduleType=e}create(e){return new Sk(this.moduleType,e,[])}}class V3 extends Rv{constructor(e){super(),this.componentFactoryResolver=new QF(this),this.instance=null;const t=new Fp([...e.providers,{provide:Rv,useValue:this},{provide:Ed,useValue:this.componentFactoryResolver}],e.parent||Np(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Tk(n,e,t=null){return new V3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let gK=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=b0(0,t.type),r=i.length>0?Tk([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=mi({token:n,providedIn:"environment",factory:()=>new n(fn(Rl))})}return n})();function U3(n){n.getStandaloneInjector=e=>e.get(gK).getOrCreateStandaloneInjector(n)}function UK(){return this._results[Symbol.iterator]()}class Y0{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new l)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Y0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=UK)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function yd(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function qx(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GK(n,e,t,i=!0){const r=e[Bi];if(function xu(n,e,t,i){const r=wl+i,o=t.length;i>0&&(t[r-1][Ss]=e),i<o-wl?(e[Ss]=t[r],Jh(t,wl+i,e)):(t.push(e),e[Ss]=null),e[Wr]=t;const a=e[kl];null!==a&&t!==a&&function iv(n,e){const t=n[el];e[Ya]!==e[Wr][Wr][Ya]&&(n[Nu]=!0),null===t?n[el]=[e]:t.push(e)}(a,e);const h=e[Vl];null!==h&&h.insertView(n),e[Or]|=128}(r,e,n,t),i){const o=xd(t,n),a=e[Ir],h=ov(a,n[_a]);null!==h&&function AS(n,e,t,i,r,o){i[aa]=r,i[_o]=e,cv(n,i,t,1,r,o)}(r,n[_o],a,e,h,o)}}let hf=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=WK}return n})();const HK=hf,qK=class extends HK{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function jK(n,e,t,i){const r=e.tView,h=ya(n,r,t,4096&n[Or]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);h[kl]=n[e.index];const _=n[Vl];return null!==_&&(h[Vl]=_.createEmbeddedView(r)),ik(r,h,t),h}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new tw(r)}};function WK(){return UI(Ua(),gi())}function UI(n,e){return 4&n.type?new qK(e,n,Qg(n,e)):null}let Dh=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=JK}return n})();function JK(){return s4(Ua(),gi())}const eQ=Dh,r4=class extends eQ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Qg(this._hostTNode,this._hostLView)}get injector(){return new bc(this._hostTNode,this._hostLView)}get parentInjector(){const e=H_(this._hostTNode,this._hostLView);if(_m(e)){const t=ym(e,this._hostLView),i=vm(e);return new bc(t[Bi].data[i+8],t)}return new bc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=o4(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-wl}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const h=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(h,r,false),h}createComponent(e,t,i,r,o){const a=e&&!function q_(n){return"function"==typeof n}(e);let h;if(a)h=t;else{const q=t||{};h=q.index,i=q.injector,r=q.projectableNodes,o=q.environmentInjector||q.ngModuleRef}const m=a?e:new nw(go(e)),_=i||this.parentInjector;if(!o&&null==m.ngModule){const _e=(a?_:this.parentInjector).get(Rl,null);_e&&(o=_e)}go(m.componentType??{});const O=m.create(_,r,null,o);return this.insertImpl(O.hostView,h,false),O}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function bh(n){return f(n[Wr])}(r)){const m=this.indexOf(e);if(-1!==m)this.detach(m);else{const _=r[Wr],C=new r4(_,_[_o],_[Wr]);C.detach(C.indexOf(e))}}const a=this._adjustIndex(t),h=this._lContainer;return GK(h,r,a,!i),e.attachToViewContainerRef(),Jh(Ak(h),a,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=o4(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Mp(this._lContainer,t);i&&(ef(Ak(this._lContainer),t),l0(i[Bi],i))}detach(e){const t=this._adjustIndex(e,-1),i=Mp(this._lContainer,t);return i&&null!=ef(Ak(this._lContainer),t)?new tw(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function o4(n){return n[8]}function Ak(n){return n[8]||(n[8]=[])}function s4(n,e){let t;const i=e[n.index];return f(i)?t=i:(t=$F(i,e,null,n),e[n.index]=t,CI(e,t)),a4(t,e,n,i),new r4(t,n,e)}let a4=function l4(n,e,t,i){if(n[_a])return;let r;r=8&t.type?jr(i):function tQ(n,e){const t=n[Ir],i=t.createComment(""),r=vs(e,n);return Am(t,ov(t,r),i,function RS(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[_a]=r};class Mk{constructor(e){this.queryList=e,this.matches=null}clone(){return new Mk(this.queryList)}setDirty(){this.queryList.setDirty()}}class kk{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const a=t.getByIndex(o);r.push(this.queries[a.indexInDeclarationView].clone())}return new kk(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==f4(e,t).matches&&this.queries[t].setDirty()}}class c4{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Pk{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new Pk(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Rk{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Rk(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,rQ(t,o)),this.matchTNodeWithReadOption(e,t,xm(t,e,o,!1,!1))}else i===hf?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Kn||r===Dh||r===hf&&4&t.type)this.addMatch(t.index,-2);else{const o=xm(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function rQ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function sQ(n,e,t,i){return-1===t?function oQ(n,e){return 11&n.type?Qg(n,e):4&n.type?UI(n,e):null}(e,n):-2===t?function aQ(n,e,t){return t===Kn?Qg(e,n):t===hf?UI(e,n):t===Dh?s4(e,n):void 0}(n,e,i):$f(n,n[Bi],t,e)}function u4(n,e,t,i){const r=e[Vl].queries[i];if(null===r.matches){const o=n.data,a=t.matches,h=[];for(let m=0;m<a.length;m+=2){const _=a[m];h.push(_<0?null:sQ(e,o[_],a[m+1],t.metadata.read))}r.matches=h}return r.matches}function Ok(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const a=u4(n,e,r,t);for(let h=0;h<o.length;h+=2){const m=o[h];if(m>0)i.push(a[h/2]);else{const _=o[h+1],C=e[-m];for(let T=wl;T<C.length;T++){const P=C[T];P[kl]===P[Wr]&&Ok(P[Bi],P,_,i)}if(null!==C[el]){const T=C[el];for(let P=0;P<T.length;P++){const O=T[P];Ok(O[Bi],O,_,i)}}}}}return i}function xa(n){const e=gi(),t=Bo(),i=qd();$_(i+1);const r=f4(t,i);if(n.dirty&&function Lf(n){return 4==(4&n[Or])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?Ok(t,e,i,[]):u4(t,e,r,i);n.reset(o,M0),n.notifyOnChanges()}return!0}return!1}function Qd(n,e,t){const i=Bo();i.firstCreatePass&&(h4(i,new c4(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),d4(i,gi(),e)}function Eu(n,e,t,i){const r=Bo();if(r.firstCreatePass){const o=Ua();h4(r,new c4(e,t,i),o.index),function cQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}d4(r,gi(),t)}function wa(){return function lQ(n,e){return n[Vl].queries[e].queryList}(gi(),qd())}function d4(n,e,t){const i=new Y0(4==(4&t));(function yI(n,e,t,i){const r=UF(e);r.push(t),n.firstCreatePass&&jF(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Vl]&&(e[Vl]=new kk),e[Vl].queries.push(new Mk(i))}function h4(n,e,t){null===n.queries&&(n.queries=new Pk),n.queries.track(new Rk(e,t))}function f4(n,e){return n.queries.getByIndex(e)}function _w(n,e){return UI(n,e)}const HI=new xi("Application Initializer");let $k=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=ti(HI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(aw(o))t.push(o);else if(xB(o)){const a=new Promise((h,m)=>{o.subscribe({complete:h,error:m})});t.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M4=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Gp=new xi("LocaleId",{providedIn:"root",factory:()=>ti(Gp,er.Optional|er.SkipSelf)||function MQ(){return typeof $localize<"u"&&$localize.locale||X0}()});let qI=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tt(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class RQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let k4=(()=>{class n{compileModuleSync(t){return new Ik(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=Tt(sa(t).declarations).reduce((a,h)=>{const m=go(h);return m&&a.push(new nw(m)),a},[]);return new RQ(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const L4=new xi(""),XI=new xi("");let Hk,jk=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hk||(function JQ(n){Hk=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{v.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(fn(v),fn(Gk),fn(XI))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})(),Gk=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Hk?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),n_=null;const N4=new xi("AllowMultipleToken"),qk=new xi("PlatformDestroyListeners"),Wk=new xi("appBootstrapListener");class B4{constructor(e,t){this.name=e,this.token=t}}function $4(n,e,t=[]){const i=`Platform: ${e}`,r=new xi(i);return(o=[])=>{let a=Xk();if(!a||a.injector.get(N4,!1)){const h=[...t,...o,{provide:r,useValue:!0}];n?n(h):function nJ(n){if(n_&&!n_.get(N4,!1))throw new Jt(400,!1);(function F4(){!function tn(n){Gt=n}(()=>{throw new Jt(600,!1)})})(),n_=n;const e=n.get(U4);(function z4(n){n.get(R1,null)?.forEach(t=>t())})(n)}(function V4(n=[],e){return Vs.create({name:e,providers:[{provide:k1,useValue:"platform"},{provide:qk,useValue:new Set([()=>n_=null])},...n]})}(h,i))}return function rJ(n){const e=Xk();if(!e)throw new Jt(401,!1);return e}()}}function Xk(){return n_?.get(U4)??null}let U4=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function oJ(n="zone.js",e){return"noop"===n?new G:"zone.js"===n?new v(e):n}(i?.ngZone,function j4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function mK(n,e,t){return new Sk(n,e,t)}(t.moduleType,this.injector,function X4(n){return[{provide:v,useFactory:n},{provide:nf,multi:!0,useFactory:()=>{const e=ti(aJ,{optional:!0});return()=>e.initialize()}},{provide:W4,useFactory:sJ},{provide:X,useFactory:oe}]}(()=>r)),a=o.injector.get(nd,null);return r.runOutsideAngular(()=>{const h=r.onError.subscribe({next:m=>{a.handleError(m)}});o.onDestroy(()=>{YI(this._modules,o),h.unsubscribe()})}),function G4(n,e,t){try{const i=t();return aw(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(a,r,()=>{const h=o.injector.get($k);return h.runInitializers(),h.donePromise.then(()=>(function m3(n){Uc(n,"Expected localeId to be defined"),"string"==typeof n&&(p3=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Gp,X0)||X0),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=H4({},i);return function eJ(n,e,t){const i=new Ik(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(jm);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Jt(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Jt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(qk,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Vs))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function H4(n,e){return Array.isArray(e)?e.reduce(H4,n):{...n,...e}}let jm=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ti(W4),this.zoneIsStable=ti(X),this.componentTypes=[],this.components=[],this.isStable=ti(qI).hasPendingTasks.pipe(ge(t=>t?St(!1):this.zoneIsStable),nt(),Ot()),this._injector=ti(Rl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof U1;if(!this._injector.get($k).done)throw!r&&function za(n){const e=go(n)||Cs(n)||oa(n);return null!==e&&e.standalone}(t),new Jt(405,!1);let a;a=r?t:this._injector.get(Ed).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const h=function tJ(n){return n.isBoundToModule}(a)?void 0:this._injector.get(Rv),_=a.create(Vs.NULL,[],i||a.selector,h),C=_.location.nativeElement,T=_.injector.get(L4,null);return T?.registerApplication(C),_.onDestroy(()=>{this.detachView(_.hostView),YI(this.components,_),T?.unregisterApplication(C)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Jt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;YI(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Wk,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>YI(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Jt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const W4=new xi("",{providedIn:"root",factory:()=>ti(nd).handleError.bind(void 0)});function sJ(){const n=ti(v),e=ti(nd);return t=>n.runOutsideAngular(()=>e.handleError(t))}let aJ=(()=>{class n{constructor(){this.zone=ti(v),this.applicationRef=ti(jm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Ni=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=cJ}return n})();function cJ(n){return function uJ(n,e,t){if(w(n)&&!t){const i=Oc(n.index,e);return new tw(i,i)}return 47&n.type?new tw(e[Ya],e):null}(Ua(),gi(),16==(16&n))}class Q4{constructor(){}supports(e){return DI(e)}create(e){return new gJ(e)}}const mJ=(n,e)=>e;class gJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mJ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const a=!i||t&&t.currentIndex<ez(i,r,o)?t:i,h=ez(a,r,o),m=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{o||(o=[]);const _=h-r,C=m-r;if(_!=C){for(let P=0;P<_;P++){const O=P<o.length?o[P]:o[P]=0,j=O+P;C<=j&&j<_&&(o[P]=O+1)}o[a.previousIndex]=C-_}}h!==m&&e(a,h,m)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!DI(e))throw new Jt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,a,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let h=0;h<this.length;h++)o=e[h],a=this._trackByFn(h,o),null!==t&&Object.is(t.trackById,a)?(i&&(t=this._verifyReinsertion(t,o,a,h)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,a,h),i=!0),t=t._next}else r=0,function YX(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,h=>{a=this._trackByFn(r,h),null!==t&&Object.is(t.trackById,a)?(i&&(t=this._verifyReinsertion(t,h,a,r)),Object.is(t.item,h)||this._addIdentityChange(t,h)):(t=this._mismatch(t,h,a,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new _J(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new J4),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new J4),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _J{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class J4{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new vJ,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ez(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function nz(){return new QI([new Q4])}let QI=(()=>{class n{static#e=this.\u0275prov=mi({token:n,providedIn:"root",factory:nz});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||nz()),deps:[[n,new Lg,new Sm]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Jt(901,!1)}}return n})();const EJ=$4(null,"core",[]);let CJ=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(fn(jm))};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})();function Q0(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function hz(n){const e=go(n);if(!e)return null;const t=new nw(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}let eP=null;function i_(){return eP}class BJ{}const Mo=new xi("DocumentToken");let tP=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return ti($J)},providedIn:"platform"})}return n})();const zJ=new xi("Location Initialized");let $J=(()=>{class n extends tP{constructor(){super(),this._doc=ti(Mo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return i_().getBaseHref(this._doc)}onPopState(t){const i=i_().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=i_().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function nP(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function fz(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Gm(n){return n&&"?"!==n[0]?"?"+n:n}let Hm=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return ti(mz)},providedIn:"root"})}return n})();const pz=new xi("appBaseHref");let mz=(()=>{class n extends Hm{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ti(Mo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return nP(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Gm(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const a=this.prepareExternalUrl(r+Gm(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){const a=this.prepareExternalUrl(r+Gm(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(tP),fn(pz,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VJ=(()=>{class n extends Hm{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=nP(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Gm(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Gm(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(tP),fn(pz,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})(),J0=(()=>{class n{constructor(t){this._subject=new l,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function GJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(fz(gz(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Gm(i))}normalize(t){return n.stripTrailingSlash(function jJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gz(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gm(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gm(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Gm;static#t=this.joinWithSlash=nP;static#n=this.stripTrailingSlash=fz;static#i=this.\u0275fac=function(i){return new(i||n)(fn(Hm))};static#r=this.\u0275prov=mi({token:n,factory:function(){return function UJ(){return new J0(fn(Hm))}()},providedIn:"root"})}return n})();function gz(n){return n.replace(/\/index.html$/,"")}function Sz(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class Mee{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dz=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Mee(r.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===o?void 0:o);else if(null!==o){const h=i.get(o);i.move(h,a),Az(h,r)}});for(let r=0,o=i.length;r<o;r++){const h=i.get(r).context;h.index=r,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Az(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(re(Dh),re(hf),re(QI))};static#t=this.\u0275dir=On({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Az(n,e){n.context.$implicit=e.item}let eh=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new kee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mz("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mz("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(re(Dh),re(hf))};static#t=this.\u0275dir=On({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class kee{constructor(){this.$implicit=null,this.ngIf=null}}function Mz(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}let r_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})();const Rz="browser",rte="server";function dT(n){return n===Rz}function _P(n){return n===rte}let ate=(()=>{class n{static#e=this.\u0275prov=mi({token:n,providedIn:"root",factory:()=>new lte(fn(Mo),window)})}return n})();class lte{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cte(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Oz{}class Pte extends BJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class bP extends Pte{static makeCurrent(){!function FJ(n){eP||(eP=n)}(new bP)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Rte(){return Cw=Cw||document.querySelector("base"),Cw?Cw.getAttribute("href"):null}();return null==t?null:function Ote(n){pT=pT||document.createElement("a"),pT.setAttribute("href",n);const e=pT.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Cw=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sz(document.cookie,e)}}let pT,Cw=null,Nte=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();const xP=new xi("EventManagerPlugins");let zz=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Jt(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(fn(xP),fn(v))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();class $z{constructor(e){this._doc=e}}const wP="ng-app-id";let Vz=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_P(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${wP}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(wP),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(wP,this.appId),a}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,a=o.get(i)?.elements;a?a.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo),fn(mv),fn(O1,8),fn(rf))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();const EP={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},CP=/%COMP%/g,$te=new xi("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function jz(n,e){return e.map(t=>t.replace(CP,n))}let SP=(()=>{class n{constructor(t,i,r,o,a,h,m,_=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=h,this.ngZone=m,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=_P(h),this.defaultRenderer=new IP(t,a,m,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Bs.ShadowDom&&(i={...i,encapsulation:Bs.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof Hz?r.applyToHost(t):r instanceof TP&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const a=this.doc,h=this.ngZone,m=this.eventManager,_=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(i.encapsulation){case Bs.Emulated:o=new Hz(m,_,i,this.appId,C,a,h,T);break;case Bs.ShadowDom:return new Gte(m,_,t,i,a,h,this.nonce,T);default:o=new TP(m,_,i,C,a,h,T)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(zz),fn(Vz),fn(mv),fn($te),fn(Mo),fn(rf),fn(v),fn(O1))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();class IP{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(EP[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Gz(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Gz(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Jt(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=EP[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=EP[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Dp.DashCase|Dp.Important)?e.style.setProperty(t,i,r&Dp.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Dp.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=i_().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Gz(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Gte extends IP{constructor(e,t,i,r,o,a,h,m){super(e,o,a,m),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=jz(r.id,r.styles);for(const C of _){const T=document.createElement("style");h&&T.setAttribute("nonce",h),T.textContent=C,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class TP extends IP{constructor(e,t,i,r,o,a,h,m){super(e,o,a,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=m?jz(m,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Hz extends TP{constructor(e,t,i,r,o,a,h,m){const _=r+"-"+i.id;super(e,t,i,o,a,h,m,_),this.contentAttr=function Vte(n){return"_ngcontent-%COMP%".replace(CP,n)}(_),this.hostAttr=function Ute(n){return"_nghost-%COMP%".replace(CP,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Hte=(()=>{class n extends $z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();const qz=["alt","control","meta","shift"],qte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xte=(()=>{class n extends $z{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>i_().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let a="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),a="code."),qz.forEach(_=>{const C=i.indexOf(_);C>-1&&(i.splice(C,1),a+=_+".")}),a+=o,0!=i.length||0===o.length)return null;const m={};return m.domEventName=r,m.fullKey=a,m}static matchEventFullKeyCode(t,i){let r=qte[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),qz.forEach(a=>{a!==r&&(0,Wte[a])(t)&&(o+=a+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();const Qte=$4(EJ,"browser",[{provide:rf,useValue:Rz},{provide:R1,useValue:function Yte(){bP.makeCurrent()},multi:!0},{provide:Mo,useFactory:function Kte(){return function RM(n){_1=n}(document),document},deps:[]}]),Jte=new xi(""),Yz=[{provide:XI,useClass:class Lte{addToWindow(e){Es.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Jt(5103,!1);return o},Es.getAllAngularTestabilities=()=>e.getAllTestabilities(),Es.getAllAngularRootElements=()=>e.getAllRootElements(),Es.frameworkStabilizers||(Es.frameworkStabilizers=[]),Es.frameworkStabilizers.push(i=>{const r=Es.getAllAngularTestabilities();let o=r.length,a=!1;const h=function(m){a=a||m,o--,0==o&&i(a)};r.forEach(m=>{m.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?i_().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:L4,useClass:jk,deps:[v,Gk,XI]},{provide:jk,useClass:jk,deps:[v,Gk,XI]}],Zz=[{provide:k1,useValue:"root"},{provide:nd,useFactory:function Zte(){return new nd},deps:[]},{provide:xP,useClass:Hte,multi:!0,deps:[Mo,v,rf]},{provide:xP,useClass:Xte,multi:!0,deps:[Mo]},SP,Vz,zz,{provide:xv,useExisting:SP},{provide:Oz,useClass:Nte,deps:[]},[]];let Kz=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:mv,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Jte,12))};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({providers:[...Zz,...Yz],imports:[r_,CJ]})}return n})(),Qz=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:function(i){let r=null;return r=i?new i:function tne(){return new Qz(fn(Mo))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let mT=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(i){let r=null;return r=i?new(i||n):fn(t5),r},providedIn:"root"})}return n})(),t5=(()=>{class n extends mT{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Ga.NONE:return i;case Ga.HTML:return tf(i,"HTML")?wd(i):Hg(this._doc,String(i)).toString();case Ga.STYLE:return tf(i,"Style")?wd(i):i;case Ga.SCRIPT:if(tf(i,"Script"))return wd(i);throw new Jt(5200,!1);case Ga.URL:return tf(i,"URL")?wd(i):Pm(String(i));case Ga.RESOURCE_URL:if(tf(i,"ResourceURL"))return wd(i);throw new Jt(5201,!1);default:throw new Jt(5202,!1)}}bypassSecurityTrustHtml(t){return function HS(n){return new d0(n)}(t)}bypassSecurityTrustStyle(t){return function b1(n){return new Ug(n)}(t)}bypassSecurityTrustScript(t){return function $u(n){return new GS(n)}(t)}bypassSecurityTrustUrl(t){return function x1(n){return new h0(n)}(t)}bypassSecurityTrustResourceUrl(t){return function qS(n){return new y1(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:function(i){let r=null;return r=i?new i:function one(n){return new t5(n.get(Mo))}(fn(Vs)),r},providedIn:"root"})}return n})();function tb(n,e){return ue(e)?zn(n,e,1):zn(n,1)}function oc(n,e){return _n((t,i)=>{let r=0;t.subscribe(kn(i,o=>n.call(e,o,r++)&&i.next(o)))})}function nb(n){return _n((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class gT{}class _T{}class mf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof mf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new mf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof mf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let a=this.headers.get(t);if(!a)return;a=a.filter(h=>-1===o.indexOf(h)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class sne{encodeKey(e){return r5(e)}encodeValue(e){return r5(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const lne=/%(\d[a-f0-9])/gi,cne={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function r5(n){return encodeURIComponent(n).replace(lne,(e,t)=>cne[t]??e)}function vT(n){return`${n}`}class s_{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sne,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ane(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[a,h]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],m=t.get(a)||[];m.push(h),t.set(a,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(vT):[vT(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new s_({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(vT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(vT(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class une{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function o5(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function s5(n){return typeof Blob<"u"&&n instanceof Blob}function a5(n){return typeof FormData<"u"&&n instanceof FormData}class Sw{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function dne(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new mf),this.context||(this.context=new une),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+a}}else this.params=new s_,this.urlWithParams=t}serializeBody(){return null===this.body?null:o5(this.body)||s5(this.body)||a5(this.body)||function hne(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof s_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||a5(this.body)?null:s5(this.body)?this.body.type||null:o5(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof s_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,_=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((T,P)=>T.set(P,e.setHeaders[P]),m)),e.setParams&&(_=Object.keys(e.setParams).reduce((T,P)=>T.set(P,e.setParams[P]),_)),new Sw(t,i,o,{params:_,headers:m,context:C,reportProgress:h,responseType:r,withCredentials:a})}}var ib=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ib||{});class AP{constructor(e,t=200,i="OK"){this.headers=e.headers||new mf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class MP extends AP{constructor(e={}){super(e),this.type=ib.ResponseHeader}clone(e={}){return new MP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rb extends AP{constructor(e={}){super(e),this.type=ib.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new rb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class l5 extends AP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function kP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Iw=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Sw)o=t;else{let m,_;m=r.headers instanceof mf?r.headers:new mf(r.headers),r.params&&(_=r.params instanceof s_?r.params:new s_({fromObject:r.params})),o=new Sw(t,i,void 0!==r.body?r.body:null,{headers:m,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const a=St(o).pipe(tb(m=>this.handler.handle(m)));if(t instanceof Sw||"events"===r.observe)return a;const h=a.pipe(oc(m=>m instanceof rb));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe(Vt(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe(Vt(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe(Vt(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe(Vt(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new s_).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,kP(r,i))}post(t,i,r={}){return this.request("POST",t,kP(r,i))}put(t,i,r={}){return this.request("PUT",t,kP(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(fn(gT))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();function d5(n,e){return e(n)}function pne(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const gne=new xi(""),Tw=new xi(""),h5=new xi("");function _ne(){let n=null;return(e,t)=>{null===n&&(n=(ti(gne,{optional:!0})??[]).reduceRight(pne,d5));const i=ti(qI),r=i.add();return n(e,t).pipe(nb(()=>i.remove(r)))}}let f5=(()=>{class n extends gT{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=ti(qI)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Tw),...this.injector.get(h5,[])]));this.chain=r.reduceRight((o,a)=>function mne(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(o,a,this.injector),d5)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(nb(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(fn(_T),fn(Rl))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();const xne=/^\)\]\}',?\n/;let m5=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Jt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Bt(i.\u0275loadImpl()):St(null)).pipe(ge(()=>new De(o=>{const a=i.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((q,_e)=>a.setRequestHeader(q,_e.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&a.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();a.responseType="json"!==q?q:"text"}const h=t.serializeBody();let m=null;const _=()=>{if(null!==m)return m;const q=a.statusText||"OK",_e=new mf(a.getAllResponseHeaders()),me=function wne(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return m=new MP({headers:_e,status:a.status,statusText:q,url:me}),m},C=()=>{let{headers:q,status:_e,statusText:me,url:te}=_(),Pe=null;204!==_e&&(Pe=typeof a.response>"u"?a.responseText:a.response),0===_e&&(_e=Pe?200:0);let _t=_e>=200&&_e<300;if("json"===t.responseType&&"string"==typeof Pe){const Dt=Pe;Pe=Pe.replace(xne,"");try{Pe=""!==Pe?JSON.parse(Pe):null}catch(Yt){Pe=Dt,_t&&(_t=!1,Pe={error:Yt,text:Pe})}}_t?(o.next(new rb({body:Pe,headers:q,status:_e,statusText:me,url:te||void 0})),o.complete()):o.error(new l5({error:Pe,headers:q,status:_e,statusText:me,url:te||void 0}))},T=q=>{const{url:_e}=_(),me=new l5({error:q,status:a.status||0,statusText:a.statusText||"Unknown Error",url:_e||void 0});o.error(me)};let P=!1;const O=q=>{P||(o.next(_()),P=!0);let _e={type:ib.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(_e.total=q.total),"text"===t.responseType&&a.responseText&&(_e.partialText=a.responseText),o.next(_e)},j=q=>{let _e={type:ib.UploadProgress,loaded:q.loaded};q.lengthComputable&&(_e.total=q.total),o.next(_e)};return a.addEventListener("load",C),a.addEventListener("error",T),a.addEventListener("timeout",T),a.addEventListener("abort",T),t.reportProgress&&(a.addEventListener("progress",O),null!==h&&a.upload&&a.upload.addEventListener("progress",j)),a.send(h),o.next({type:ib.Sent}),()=>{a.removeEventListener("error",T),a.removeEventListener("abort",T),a.removeEventListener("load",C),a.removeEventListener("timeout",T),t.reportProgress&&(a.removeEventListener("progress",O),null!==h&&a.upload&&a.upload.removeEventListener("progress",j)),a.readyState!==a.DONE&&a.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Oz))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();const PP=new xi("XSRF_ENABLED"),g5=new xi("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),_5=new xi("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class v5{}let Sne=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sz(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo),fn(rf),fn(g5))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();function Ine(n,e){const t=n.url.toLowerCase();if(!ti(PP)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=ti(v5).getToken(),r=ti(_5);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var a_=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(a_||{});function Tne(...n){const e=[Iw,m5,f5,{provide:gT,useExisting:f5},{provide:_T,useExisting:m5},{provide:Tw,useValue:Ine,multi:!0},{provide:PP,useValue:!0},{provide:v5,useClass:Sne}];for(const t of n)e.push(...t.\u0275providers);return function y0(n){return{\u0275providers:n}}(e)}const y5=new xi("LEGACY_INTERCEPTOR_FN");function Dne(){return function Lv(n,e){return{\u0275kind:n,\u0275providers:e}}(a_.LegacyInterceptors,[{provide:y5,useFactory:_ne},{provide:Tw,useExisting:y5,multi:!0}])}let Ane=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({providers:[Tne(Dne())]})}return n})();const{isArray:Lne}=Array,{getPrototypeOf:Nne,prototype:Fne,keys:Bne}=Object;function b5(n){if(1===n.length){const e=n[0];if(Lne(e))return{args:e,keys:null};if(function zne(n){return n&&"object"==typeof n&&Nne(n)===Fne}(e)){const t=Bne(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:$ne}=Array;function RP(n){return Vt(e=>function Vne(n,e){return $ne(e)?n(...e):n(e)}(n,e))}function x5(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function w5(...n){const e=so(n),{args:t,keys:i}=b5(n),r=new De(o=>{const{length:a}=t;if(!a)return void o.complete();const h=new Array(a);let m=a,_=a;for(let C=0;C<a;C++){let T=!1;Br(t[C]).subscribe(kn(o,P=>{T||(T=!0,_--),h[C]=P},()=>m--,void 0,()=>{(!m||!T)&&(_||o.next(i?x5(i,h):h),o.complete())}))}});return e?r.pipe(RP(e)):r}let E5=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(td),re(Kn))};static#t=this.\u0275dir=On({type:n})}return n})(),Nv=(()=>{class n extends E5{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275dir=On({type:n,features:[Tr]})}return n})();const Vu=new xi("NgValueAccessor"),jne={provide:Vu,useExisting:xt(()=>Dw),multi:!0},Hne=new xi("CompositionEventMode");let Dw=(()=>{class n extends E5{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Gne(){const n=i_()?i_().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(td),re(Kn),re(Hne,8))};static#t=this.\u0275dir=On({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&So("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[zo([jne]),Tr]})}return n})();function l_(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function S5(n){return null!=n&&"number"==typeof n.length}const tu=new xi("NgValidators"),c_=new xi("NgAsyncValidators"),qne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hp{static min(e){return I5(e)}static max(e){return T5(e)}static required(e){return D5(e)}static requiredTrue(e){return function A5(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function M5(n){return l_(n.value)||qne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function k5(n){return e=>l_(e.value)||!S5(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function P5(n){return e=>S5(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function R5(n){if(!n)return bT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(l_(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return z5(e)}static composeAsync(e){return $5(e)}}function I5(n){return e=>{if(l_(e.value)||l_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function T5(n){return e=>{if(l_(e.value)||l_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function D5(n){return l_(n.value)?{required:!0}:null}function bT(n){return null}function O5(n){return null!=n}function L5(n){return aw(n)?Bt(n):n}function N5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function F5(n,e){return e.map(t=>t(n))}function B5(n){return n.map(e=>function Wne(n){return!n.validate}(e)?e:t=>e.validate(t))}function z5(n){if(!n)return null;const e=n.filter(O5);return 0==e.length?null:function(t){return N5(F5(t,e))}}function OP(n){return null!=n?z5(B5(n)):null}function $5(n){if(!n)return null;const e=n.filter(O5);return 0==e.length?null:function(t){return w5(F5(t,e).map(L5)).pipe(Vt(N5))}}function LP(n){return null!=n?$5(B5(n)):null}function V5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function U5(n){return n._rawValidators}function j5(n){return n._rawAsyncValidators}function NP(n){return n?Array.isArray(n)?n:[n]:[]}function xT(n,e){return Array.isArray(n)?n.includes(e):n===e}function G5(n,e){const t=NP(e);return NP(n).forEach(r=>{xT(t,r)||t.push(r)}),t}function H5(n,e){return NP(e).filter(t=>!xT(n,t))}class q5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Td extends q5{get formDirective(){return null}get path(){return null}}class Xm extends q5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class W5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wT=(()=>{class n extends W5{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Xm,2))};static#t=this.\u0275dir=On({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&ba("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Tr]})}return n})(),ET=(()=>{class n extends W5{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Td,10))};static#t=this.\u0275dir=On({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&ba("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Tr]})}return n})();const Aw="VALID",ST="INVALID",ob="PENDING",Mw="DISABLED";function zP(n){return(IT(n)?n.validators:n)||null}function $P(n,e){return(IT(e)?e.asyncValidators:n)||null}function IT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Y5(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new Jt(1e3,"");if(!i[t])throw new Jt(1001,"")}function Z5(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new Jt(1002,"")})}class TT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Aw}get invalid(){return this.status===ST}get pending(){return this.status==ob}get disabled(){return this.status===Mw}get enabled(){return this.status!==Mw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(G5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(G5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(H5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(H5(e,this._rawAsyncValidators))}hasValidator(e){return xT(this._rawValidators,e)}hasAsyncValidator(e){return xT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ob,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mw,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Aw,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Aw||this.status===ob)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mw:Aw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ob,this._hasOwnPendingAsyncValidator=!0;const t=L5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l,this.statusChanges=new l}_calculateStatus(){return this._allControlsDisabled()?Mw:this.errors?ST:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ob)?ob:this._anyControlsHaveStatus(ST)?ST:Aw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){IT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Kne(n){return Array.isArray(n)?OP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Qne(n){return Array.isArray(n)?LP(n):n||null}(this._rawAsyncValidators)}}class kw extends TT{constructor(e,t,i){super(zP(t),$P(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Z5(this,0,e),Object.keys(e).forEach(i=>{Y5(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class K5 extends kw{}const Fv=new xi("CallSetDisabledState",{providedIn:"root",factory:()=>Pw}),Pw="always";function Rw(n,e,t=Pw){VP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function eie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Q5(n,e)})}(n,e),function nie(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Q5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Jne(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function AT(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),kT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function MT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VP(n,e){const t=U5(n);null!==e.validator?n.setValidators(V5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=j5(n);null!==e.asyncValidator?n.setAsyncValidators(V5(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();MT(e._rawValidators,r),MT(e._rawAsyncValidators,r)}function kT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=U5(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(a=>a!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=j5(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(a=>a!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return MT(e._rawValidators,i),MT(e._rawAsyncValidators,i),t}function Q5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function t$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function n$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Lw=class extends TT{constructor(e=null,t,i){super(zP(t),$P(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),IT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=n$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){t$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){t$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){n$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let qP=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),l$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})();const WP=new xi("NgModelWithFormControlWarning"),gie={provide:Td,useExisting:xt(()=>sb)};let sb=(()=>{class n extends Td{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Rw(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){AT(t.control||null,t,!1),function sie(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function e$(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(AT(i||null,t),(n=>n instanceof Lw)(r)&&(Rw(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function J5(n,e){VP(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function iie(n,e){return kT(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VP(this.form,this),this._oldForm&&kT(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(re(tu,10),re(c_,10),re(Fv,8))};static#t=this.\u0275dir=On({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&So("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zo([gie]),Tr,Ki]})}return n})();const yie={provide:Xm,useExisting:xt(()=>Nw)};let Nw=(()=>{class n extends Xm{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new l,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function GP(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===Dw?t=o:function oie(n){return Object.getPrototypeOf(n.constructor)===Nv}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function jP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function DT(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(re(Td,13),re(tu,10),re(c_,10),re(Vu,10),re(WP,8))};static#n=this.\u0275dir=On({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[zo([yie]),Tr,Ki]})}return n})();function g$(n){return"number"==typeof n?n:parseFloat(n)}let Bv=(()=>{class n{constructor(){this._validator=bT}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):bT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,features:[Ki]})}return n})();const Iie={provide:tu,useExisting:xt(()=>QP),multi:!0};let QP=(()=>{class n extends Bv{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>g$(t),this.createValidator=t=>T5(t)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275dir=On({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&pl("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[zo([Iie]),Tr]})}return n})();const Tie={provide:tu,useExisting:xt(()=>JP),multi:!0};let JP=(()=>{class n extends Bv{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>g$(t),this.createValidator=t=>I5(t)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275dir=On({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&pl("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[zo([Tie]),Tr]})}return n})();const Die={provide:tu,useExisting:xt(()=>Fw),multi:!0};let Fw=(()=>{class n extends Bv{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Q0,this.createValidator=t=>D5}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275dir=On({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&pl("required",r._enabled?"":null)},inputs:{required:"required"},features:[zo([Die]),Tr]})}return n})(),x$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[l$]})}return n})();class w$ extends TT{constructor(e,t,i){super(zP(t),$P(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Z5(this,0,e),e.forEach((i,r)=>{Y5(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function E$(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let nR,tR=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return E$(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new kw(r,o)}record(t,i=null){const r=this._reduceControls(t);return new K5(r,i)}control(t,i,r){let o={};return this.useNonNullable?(E$(i)?o=i:(o.validators=i,o.asyncValidators=r),new Lw(t,{...o,nonNullable:!0})):new Lw(t,i,r)}array(t,i,r){const o=t.map(a=>this._createControl(a));return new w$(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Lw||t instanceof TT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fv,useValue:t.callSetDisabledState??Pw}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[x$]})}return n})(),Lie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:WP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Fv,useValue:t.callSetDisabledState??Pw}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[x$]})}return n})();try{nR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nR=!1}let Bw,PT,zv,iR,nu=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?dT(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(fn(rf))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zw(n){return function Nie(){if(null==Bw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bw=!0}))}finally{Bw=Bw||!1}return Bw}()?n:!!n.capture}function S$(){if(null==zv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return zv=!1,zv;if("scrollBehavior"in document.documentElement.style)zv=!0;else{const n=Element.prototype.scrollTo;zv=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return zv}function $w(){if("object"!=typeof document||!document)return 0;if(null==PT){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),PT=0,0===n.scrollLeft&&(n.scrollLeft=1,PT=0===n.scrollLeft?1:2),n.remove()}return PT}function u_(n){return n.composedPath?n.composedPath()[0]:n.target}function rR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Hl(n,e,t){const i=ue(n)||e||t?{next:n,error:e,complete:t}:n;return i?_n((r,o)=>{var a;null===(a=i.subscribe)||void 0===a||a.call(i);let h=!0;r.subscribe(kn(o,m=>{var _;null===(_=i.next)||void 0===_||_.call(i,m),o.next(m)},()=>{var m;h=!1,null===(m=i.complete)||void 0===m||m.call(i),o.complete()},m=>{var _;h=!1,null===(_=i.error)||void 0===_||_.call(i,m),o.error(m)},()=>{var m,_;h&&(null===(m=i.unsubscribe)||void 0===m||m.call(i)),null===(_=i.finalize)||void 0===_||_.call(i)}))}):Se}class sre extends fe{constructor(e,t){super()}schedule(e,t=0){return this}}const RT={setInterval(n,e,...t){const{delegate:i}=RT;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=RT;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class sR extends sre{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return RT.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&RT.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,g(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const T$={now:()=>(T$.delegate||Date).now(),delegate:void 0};class Vw{constructor(e,t=Vw.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Vw.now=T$.now;class aR extends Vw{constructor(e,t=Vw.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const OT=new aR(sR),are=OT;function LT(n,e=OT){return _n((t,i)=>{let r=null,o=null,a=null;const h=()=>{if(r){r.unsubscribe(),r=null;const _=o;o=null,i.next(_)}};function m(){const _=a+n,C=e.now();if(C<_)return r=this.schedule(void 0,_-C),void i.add(r);h()}t.subscribe(kn(i,_=>{o=_,a=e.now(),r||(r=e.schedule(m,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{o=r=null}))})}function Dd(n){return n<=0?()=>Ri:_n((e,t)=>{let i=0;e.subscribe(kn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function D$(n){return oc((e,t)=>n<=t)}function Cu(n){return _n((e,t)=>{Br(n).subscribe(kn(t,()=>t.complete(),Qe)),!t.closed&&e.subscribe(t)})}function ol(n){return null!=n&&"false"!=`${n}`}function Uw(n,e=0){return function lre(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function NT(n){return Array.isArray(n)?n:[n]}function Bc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function $v(n){return n instanceof Kn?n.nativeElement:n}function jw(...n){const e=Ns(n),t=so(n),{args:i,keys:r}=b5(n);if(0===i.length)return Bt([],e);const o=new De(function cre(n,e,t=Se){return i=>{A$(e,()=>{const{length:r}=n,o=new Array(r);let a=r,h=r;for(let m=0;m<r;m++)A$(e,()=>{const _=Bt(n[m],e);let C=!1;_.subscribe(kn(i,T=>{o[m]=T,C||(C=!0,h--),h||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}(i,e,r?a=>x5(r,a):Se));return t?o.pipe(RP(t)):o}function A$(n,e,t){n?oi(t,n,e):e()}function Gw(...n){return function ure(){return _r(1)}()(Bt(n,Ns(n)))}function FT(...n){const e=Ns(n);return _n((t,i)=>{(e?Gw(n,t,e):Gw(n,t)).subscribe(i)})}const M$=new Set;let Vv,dre=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fre}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function hre(n,e){if(!M$.has(n))try{Vv||(Vv=document.createElement("style"),e&&(Vv.nonce=e),Vv.setAttribute("type","text/css"),document.head.appendChild(Vv)),Vv.sheet&&(Vv.sheet.insertRule(`@media ${n} {body{ }}`,0),M$.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(nu),fn(O1,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fre(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let BT=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new et}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return k$(NT(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=jw(k$(NT(t)).map(a=>this._registerQuery(a).observable));return o=Gw(o.pipe(Dd(1)),o.pipe(D$(1),LT(0))),o.pipe(Vt(a=>{const h={matches:!1,breakpoints:{}};return a.forEach(({matches:m,query:_})=>{h.matches=h.matches||m,h.breakpoints[_]=m}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new De(a=>{const h=m=>this._zone.run(()=>a.next(m));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(FT(i),Vt(({matches:a})=>({query:t,matches:a})),Cu(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(fn(dre),fn(v))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k$(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let O$=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function bre(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function yre(n){try{return n.frameElement}catch{return null}}(function Dre(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===N$(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=N$(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Ire(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Tre(n){return!function wre(n){return function Cre(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function xre(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Ere(n){return function Sre(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||L$(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(fn(nu))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function L$(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function N$(n){if(!L$(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Are{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Dd(1)).subscribe(e)}}let Mre=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Are(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(O$),fn(v),fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function F$(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function B$(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const kre=new xi("cdk-input-modality-detector-options"),Pre={ignoreKeys:[18,17,224,91,16]},lb=zw({passive:!0,capture:!0});let Rre=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new tt(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(h=>h===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=u_(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(F$(a)?"keyboard":"mouse"),this._mostRecentTarget=u_(a))},this._onTouchstart=a=>{B$(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=u_(a))},this._options={...Pre,...o},this.modalityDetected=this._modality.pipe(D$(1)),this.modalityChanged=this.modalityDetected.pipe(nt()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,lb),r.addEventListener("mousedown",this._onMousedown,lb),r.addEventListener("touchstart",this._onTouchstart,lb)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,lb),document.removeEventListener("mousedown",this._onMousedown,lb),document.removeEventListener("touchstart",this._onTouchstart,lb))}static#e=this.\u0275fac=function(i){return new(i||n)(fn(nu),fn(v),fn(Mo),fn(kre,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ore=new xi("liveAnnouncerElement",{providedIn:"root",factory:function Lre(){return null}}),Nre=new xi("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Fre=0,$$=(()=>{class n{constructor(t,i,r,o){this._ngZone=i,this._defaultOptions=o,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let o,a;return 1===i.length&&"number"==typeof i[0]?a=i[0]:[o,a]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),null==a&&r&&(a=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof a&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+Fre++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const o=i[r],a=o.getAttribute("aria-owns");a?-1===a.indexOf(t)&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Ore,8),fn(v),fn(Mo),fn(Nre,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Bre=new xi("cdk-focus-monitor-default-options"),zT=zw({passive:!0,capture:!0});let V$=(()=>{class n{constructor(t,i,r,o,a){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new et,this._rootNodeFocusAndBlurListener=h=>{for(let _=u_(h);_;_=_.parentElement)"focus"===h.type?this._onFocus(h,_):this._onBlur(h,_)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(t,i=!1){const r=$v(t);if(!this._platform.isBrowser||1!==r.nodeType)return St();const o=function Bie(n){if(function Fie(){if(null==iR){const n=typeof document<"u"?document.head:null;iR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return iR}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return i&&(a.checkChildren=!0),a.subject;const h={checkChildren:i,subject:new et,rootNode:o};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=$v(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=$v(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,m])=>this._originChanged(h,i,m)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=u_(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,zT),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,zT)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Cu(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,zT),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,zT),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(fn(v),fn(nu),fn(Rre),fn(Mo,8),fn(Bre,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const U$="cdk-high-contrast-black-on-white",j$="cdk-high-contrast-white-on-black",lR="cdk-high-contrast-active";let zre=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=ti(BT).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(lR,U$,j$),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(lR,U$):2===i&&t.add(lR,j$)}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(nu),fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $re=new xi("cdk-dir-doc",{providedIn:"root",factory:function Vre(){return ti(Mo)}}),Ure=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let cR=(()=>{class n{constructor(t){this.value="ltr",this.change=new l,t&&(this.value=function jre(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Ure.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(fn($re,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hw=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})();const Hre=new xi("mat-sanity-checks",{providedIn:"root",factory:function Gre(){return!0}});let sc=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!rR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(fn(zre),fn(Hre,8),fn(Mo))};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[Hw,Hw]})}return n})();function q$(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=ol(e)}constructor(...e){super(...e),this._disabled=!1}}}function uR(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function W$(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ol(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function qre(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Uw(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class Xre{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const X$=zw({passive:!0,capture:!0});class Yre{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=u_(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,X$)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,X$)))}}const Y$={enterDuration:225,exitDuration:150},Z$=zw({passive:!0,capture:!0}),K$=["mousedown","touchstart"],Q$=["mouseup","mouseleave","touchend","touchcancel"];class Ww{static#e=this._eventManager=new Yre;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=$v(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...Y$,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const a=i.radius||function Kre(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,m=t-r.top,_=o.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-a+"px",C.style.top=m-a+"px",C.style.height=2*a+"px",C.style.width=2*a+"px",null!=i.color&&(C.style.backgroundColor=i.color),C.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(C);const T=window.getComputedStyle(C),O=T.transitionDuration,j="none"===T.transitionProperty||"0s"===O||"0s, 0s"===O||0===r.width&&0===r.height,q=new Xre(this,C,i,j);C.style.transform="scale3d(1, 1, 1)",q.state=0,i.persistent||(this._mostRecentTransientRipple=q);let _e=null;return!j&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const me=()=>this._finishRippleTransition(q),te=()=>this._destroyRipple(q);C.addEventListener("transitionend",me),C.addEventListener("transitioncancel",te),_e={onTransitionEnd:me,onTransitionCancel:te}}),this._activeRipples.set(q,_e),(j||!_)&&this._finishRippleTransition(q),q}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...Y$,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=$v(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,K$.forEach(i=>{Ww._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Q$.forEach(t=>{this._triggerElement.addEventListener(t,this,Z$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=F$(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!B$(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(K$.forEach(t=>Ww._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Q$.forEach(t=>e.removeEventListener(t,this,Z$)))}}const Xw=new xi("mat-ripple-global-options");let dR=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Ww(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(v),re(nu),re(Xw,8),re(Zd,8))};static#t=this.\u0275dir=On({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&ba("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),$T=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,sc]})}return n})(),Qre=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc]})}return n})();const J$={capture:!0},e6=["focus","click","mouseenter","touchstart"],hR="mat-ripple-loader-uninitialized",fR="mat-ripple-loader-class-name",t6="mat-ripple-loader-centered",VT="mat-ripple-loader-disabled";let Jre=(()=>{class n{constructor(){this._document=ti(Mo,{optional:!0}),this._animationMode=ti(Zd,{optional:!0}),this._globalRippleOptions=ti(Xw,{optional:!0}),this._platform=ti(nu),this._ngZone=ti(v),this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const r=t.target.closest(`[${hR}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const t of e6)this._document?.addEventListener(t,this._onInteraction,J$)})}ngOnDestroy(){for(const t of e6)this._document?.removeEventListener(t,this._onInteraction,J$)}configureRipple(t,i){t.setAttribute(hR,""),(i.className||!t.hasAttribute(fR))&&t.setAttribute(fR,i.className||""),i.centered&&t.setAttribute(t6,""),i.disabled&&t.setAttribute(VT,"")}getRipple(t){return t.matRipple?t.matRipple:this.createRipple(t)}setDisabled(t,i){const r=t.matRipple;r?r.disabled=i:i?t.setAttribute(VT,""):t.removeAttribute(VT)}createRipple(t){if(!this._document)return;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(fR)),t.append(i);const r=new dR(new Kn(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=t,r.centered=t.hasAttribute(t6),r.disabled=t.hasAttribute(VT),this.attachRipple(t,r),r}attachRipple(t,i){t.removeAttribute(hR),t.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const eoe=["mat-button",""],toe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],noe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],roe=["mat-icon-button",""],ooe=["*"],soe=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],aoe=uR(q$(W$(class{constructor(n){this._elementRef=n}})));let n6=(()=>{class n extends aoe{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ol(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=ol(t),this._updateRippleDisabled()}constructor(t,i,r,o){super(t),this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=ti(V$),this._rippleLoader=ti(Jre),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const a=t.nativeElement.classList;for(const h of soe)this._hasHostAttributes(h.selector)&&h.mdcClasses.forEach(m=>{a.add(m)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){tl()};static#t=this.\u0275dir=On({type:n,features:[Tr]})}return n})(),UT=(()=>{class n extends n6{constructor(t,i,r,o){super(t,i,r,o)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(nu),re(v),re(Zd,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(pl("disabled",r.disabled||null),ba("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Tr],attrs:eoe,ngContentSelectors:noe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(Mi(toe),oo(0,"span",0),ui(1),on(2,"span",1),ui(3,1),hn(),ui(4,2),oo(5,"span",2)(6,"span",3)),2&i&&ba("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),uoe=(()=>{class n extends n6{constructor(t,i,r,o){super(t,i,r,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(nu),re(v),re(Zd,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(pl("disabled",r.disabled||null),ba("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Tr],attrs:roe,ngContentSelectors:ooe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(Mi(),oo(0,"span",0),ui(1),oo(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),i6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,$T,sc]})}return n})();const doe=["*"],goe=new xi("MAT_CARD_CONFIG");let r6=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static#e=this.\u0275fac=function(i){return new(i||n)(re(goe,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){2&i&&ba("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:doe,decls:1,vars:0,template:function(i,r){1&i&&(Mi(),ui(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),o6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})(),s6=(()=>{class n{constructor(){this.align="start"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(i,r){2&i&&ba("mat-mdc-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]})}return n})(),boe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,r_,sc]})}return n})();const xoe=["input"],woe=["label"],Eoe=["*"],Coe=new xi("mat-checkbox-default-options",{providedIn:"root",factory:a6});function a6(){return{color:"accent",clickAction:"check-indeterminate"}}const Soe={provide:Vu,useExisting:xt(()=>c6),multi:!0};class Ioe{}let Toe=0;const l6=a6(),Doe=qre(uR(W$(q$(class{constructor(n){this._elementRef=n}}))));let Aoe=(()=>{class n extends Doe{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=ol(t)}constructor(t,i,r,o,a,h,m){super(i),this._changeDetectorRef=r,this._ngZone=o,this._animationMode=h,this._options=m,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new l,this.indeterminateChange=new l,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||l6,this.color=this.defaultColor=this._options.color||l6.color,this.tabIndex=parseInt(a)||0,this.id=this._uniqueId=`${t}${++Toe}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const i=ol(t);i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const i=ol(t);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const i=t!=this._indeterminate;this._indeterminate=ol(t),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_transitionCheckState(t){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(i!==t&&r&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,i){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===i)return this._animationClasses.uncheckedToChecked;if(3==i)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===i?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===i?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===i?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const i=this._inputElement;i&&(i.nativeElement.indeterminate=t)}static#e=this.\u0275fac=function(i){tl()};static#t=this.\u0275dir=On({type:n,viewQuery:function(i,r){if(1&i&&(Qd(xoe,5),Qd(woe,5),Qd(dR,5)),2&i){let o;xa(o=wa())&&(r._inputElement=o.first),xa(o=wa())&&(r._labelElement=o.first),xa(o=wa())&&(r.ripple=o.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Tr]})}return n})(),c6=(()=>{class n extends Aoe{constructor(t,i,r,o,a,h){super("mat-mdc-checkbox-",t,i,r,o,a,h),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){const i=new Ioe;return i.source=this,i.checked=t,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(Ni),re(v),Vf("tabindex"),re(Zd,8),re(Coe,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&(vk("id",r.id),pl("tabindex",null)("aria-label",null)("aria-labelledby",null),ba("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[zo([Soe]),Tr],ngContentSelectors:Eoe,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"],["label",""]],template:function(i,r){if(1&i&&(Mi(),on(0,"div",0),So("click",function(a){return r._preventBubblingFromLabel(a)}),on(1,"div",1,2)(3,"div",3),So("click",function(){return r._onTouchTargetClick()}),hn(),on(4,"input",4,5),So("blur",function(){return r._onBlur()})("click",function(){return r._onInputClick()})("change",function(a){return r._onInteractionEvent(a)}),hn(),oo(6,"div",6),on(7,"div",7),xh(),on(8,"svg",8),oo(9,"path",9),hn(),function mm(){!function U_(){io.lFrame.currentNamespace=null}()}(),oo(10,"div",10),hn(),oo(11,"div",11),hn(),on(12,"label",12,13),ui(14),hn()()),2&i){const o=Wf(2);ba("mdc-form-field--align-end","before"==r.labelPosition),si(4),ba("mdc-checkbox--selected",r.checked),lr("checked",r.checked)("indeterminate",r.indeterminate)("disabled",r.disabled)("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex),pl("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("name",r.name)("value",r.value),si(7),lr("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),si(1),lr("for",r.inputId)}},dependencies:[dR],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}html{--mdc-checkbox-disabled-selected-checkmark-color:#fff;--mdc-checkbox-selected-focus-state-layer-opacity:0.16;--mdc-checkbox-selected-hover-state-layer-opacity:0.04;--mdc-checkbox-selected-pressed-state-layer-opacity:0.16;--mdc-checkbox-unselected-focus-state-layer-opacity:0.16;--mdc-checkbox-unselected-hover-state-layer-opacity:0.04;--mdc-checkbox-unselected-pressed-state-layer-opacity:0.16}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),u6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})(),Poe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,$T,u6,sc,u6]})}return n})(),Roe=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=ol(t)}get inset(){return this._inset}set inset(t){this._inset=ol(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,r){2&i&&(pl("aria-orientation",r.vertical?"vertical":"horizontal"),ba("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(i,r){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return n})(),d6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,sc]})}return n})();function cb(n,e){const t=ue(n)?n:()=>n,i=r=>r.error(t());return new De(e?r=>e.schedule(i,0,r):i)}function d_(n){return _n((e,t)=>{let o,i=null,r=!1;i=e.subscribe(kn(t,void 0,void 0,a=>{o=Br(n(a,d_(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}const Ooe=["*"];let jT;function Yw(n){return function Loe(){if(void 0===jT&&(jT=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(jT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return jT}()?.createHTML(n)||n}function h6(n){return Error(`Unable to find icon with the name "${n}"`)}function f6(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function p6(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Uv{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let GT=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new Uv(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const a=this._sanitizer.sanitize(Ga.HTML,r);if(!a)throw p6(r);const h=Yw(a);return this._addSvgIconConfig(t,i,new Uv("",h,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Uv(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(Ga.HTML,i);if(!o)throw p6(i);const a=Yw(o);return this._addSvgIconSetConfig(t,new Uv("",a,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Ga.RESOURCE_URL,t);if(!i)throw f6(t);const r=this._cachedIconsByUrl.get(i);return r?St(HT(r)):this._loadSvgIconFromConfig(new Uv(t,null)).pipe(Hl(o=>this._cachedIconsByUrl.set(i,o)),Vt(o=>HT(o)))}getNamedSvgIcon(t,i=""){const r=m6(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const a=this._iconSetConfigs.get(i);return a?this._getSvgFromIconSetConfigs(t,a):cb(h6(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?St(HT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Vt(i=>HT(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?St(r):w5(i.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(d_(h=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(Ga.RESOURCE_URL,a.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(_)),St(null)})))).pipe(Vt(()=>{const a=this._extractIconWithNameFromAnySet(t,i);if(!a)throw h6(t);return a}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const a=this._svgElementFromConfig(o),h=this._extractSvgIconFromSet(a,t,o.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Hl(i=>t.svgText=i),Vt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?St(null):this._fetchIcon(t).pipe(Hl(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const a=o.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,r);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),r);const h=this._svgElementFromString(Yw("<svg></svg>"));return h.appendChild(a),this._setSvgAttributes(h,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Yw("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:a,value:h}=r[o];"id"!==a&&i.setAttribute(a,h)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function Noe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(Ga.RESOURCE_URL,i);if(!a)throw f6(i);const h=this._inProgressUrlFetches.get(a);if(h)return h;const m=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Vt(_=>Yw(_)),nb(()=>this._inProgressUrlFetches.delete(a)),Ot());return this._inProgressUrlFetches.set(a,m),m}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(m6(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return Boe(o)?new Uv(o.url,null,o.options):new Uv(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Iw,8),fn(mT),fn(Mo,8),fn(nd))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HT(n){return n.cloneNode(!0)}function m6(n,e){return n+":"+e}function Boe(n){return!(!n.url||!n.options)}const zoe=uR(class{constructor(n){this._elementRef=n}}),$oe=new xi("MAT_ICON_DEFAULT_OPTIONS"),Voe=new xi("mat-icon-location",{providedIn:"root",factory:function Uoe(){const n=ti(Mo),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),g6=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],joe=g6.map(n=>`[${n}]`).join(", "),Goe=/^url\(['"]?#(.*?)['"]?\)$/;let Zw=(()=>{class n extends zoe{get inline(){return this._inline}set inline(t){this._inline=ol(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,a,h){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=fe.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(a=>{o.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(joe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)g6.forEach(a=>{const h=i[o],m=h.getAttribute(a),_=m?m.match(Goe):null;if(_){let C=r.get(h);C||(C=[],r.set(h,C)),C.push({name:a,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Dd(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(GT),Vf("aria-hidden"),re(Voe),re(nd),re($oe,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(pl("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),ba("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Tr],ngContentSelectors:Ooe,decls:1,vars:0,template:function(i,r){1&i&&(Mi(),ui(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),Hoe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,sc]})}return n})(),_6=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qoe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=$v(t);return new De(r=>{const a=this._observeElement(i).subscribe(r);return()=>{a.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new et,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(_6))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v6=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=ol(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Uw(t),this._subscribe()}constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new l,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(LT(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(re(qoe),re(Kn),re(v))};static#t=this.\u0275dir=On({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),Woe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({providers:[_6]})}return n})();const b6=["*"],w6=["unscopedContent"],Xoe=["text"],Yoe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Zoe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],E6=new xi("ListOption");let C6=(()=>{class n{constructor(t){this._elementRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn))};static#t=this.\u0275dir=On({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),S6=(()=>{class n{constructor(t){this._elementRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn))};static#t=this.\u0275dir=On({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),pse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),I6=(()=>{class n{constructor(t){this._listOption=t}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}static#e=this.\u0275fac=function(i){return new(i||n)(re(E6,8))};static#t=this.\u0275dir=On({type:n,hostVars:4,hostBindings:function(i,r){2&i&&ba("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),mse=(()=>{class n extends I6{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275dir=On({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Tr]})}return n})(),gse=(()=>{class n extends I6{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275dir=On({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Tr]})}return n})();const _se=new xi("MAT_LIST_CONFIG");let ub=(()=>{class n{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=ti(_se,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ol(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=ol(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,hostVars:1,hostBindings:function(i,r){2&i&&pl("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),pR=(()=>{class n{set lines(t){this._explicitLines=Uw(t,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=ol(t)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(t){this._disabled=ol(t)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(t,i,r,o,a,h){this._elementRef=t,this._ngZone=i,this._listBase=r,this._platform=o,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new fe,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=a||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===h,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Ww(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(gt(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();const i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===i),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===i),this._hasUnscopedTextContent){const o=0===this._titles.length&&1===i;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!(!t.textContent||!t.textContent.trim()))}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(v),re(ub,8),re(nu),re(Xw,8),re(Zd,8))};static#t=this.\u0275dir=On({type:n,contentQueries:function(i,r,o){if(1&i&&(Eu(o,mse,4),Eu(o,gse,4)),2&i){let a;xa(a=wa())&&(r._avatars=a),xa(a=wa())&&(r._icons=a)}},hostVars:4,hostBindings:function(i,r){2&i&&(pl("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),ba("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),vse=(()=>{class n extends ub{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[zo([{provide:ub,useExisting:n}]),Tr],ngContentSelectors:b6,decls:1,vars:0,template:function(i,r){1&i&&(Mi(),ui(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0})}return n})(),yse=(()=>{class n extends pR{get activated(){return this._activated}set activated(t){this._activated=ol(t)}constructor(t,i,r,o,a,h){super(t,i,r,o,a,h),this._activated=!1}_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(v),re(ub,8),re(nu),re(Xw,8),re(Zd,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,o){if(1&i&&(Eu(o,S6,5),Eu(o,C6,5),Eu(o,pse,5)),2&i){let a;xa(a=wa())&&(r._lines=a),xa(a=wa())&&(r._titles=a),xa(a=wa())&&(r._meta=a)}},viewQuery:function(i,r){if(1&i&&(Qd(w6,5),Qd(Xoe,5)),2&i){let o;xa(o=wa())&&(r._unscopedContent=o.first),xa(o=wa())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(i,r){2&i&&(pl("aria-current",r._getAriaCurrent()),ba("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",0!==r._avatars.length)("mdc-list-item--with-leading-icon",0!==r._icons.length)("mdc-list-item--with-trailing-meta",0!==r._meta.length)("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Tr],ngContentSelectors:Zoe,decls:10,vars:0,consts:[[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],[1,"mat-mdc-focus-indicator"]],template:function(i,r){1&i&&(Mi(Yoe),ui(0),on(1,"span",0),ui(2,1),ui(3,2),on(4,"span",1,2),So("cdkObserveContent",function(){return r._updateItemLines(!0)}),ui(6,3),hn()(),ui(7,4),ui(8,5),oo(9,"div",3))},dependencies:[v6],encapsulation:2,changeDetection:0})}return n})(),Cse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[Woe,r_,sc,$T,Qre,d6]})}return n})();const Sse=["addListener","removeListener"],Ise=["addEventListener","removeEventListener"],Tse=["on","off"];function jv(n,e,t,i){if(ue(t)&&(i=t,t=void 0),i)return jv(n,e,t).pipe(RP(i));const[r,o]=function Mse(n){return ue(n.addEventListener)&&ue(n.removeEventListener)}(n)?Ise.map(a=>h=>n[a](e,h,t)):function Dse(n){return ue(n.addListener)&&ue(n.removeListener)}(n)?Sse.map(D6(n,e)):function Ase(n){return ue(n.on)&&ue(n.off)}(n)?Tse.map(D6(n,e)):[];if(!r&&It(n))return zn(a=>jv(a,e,t))(Br(n));if(!r)throw new TypeError("Invalid event target");return new De(a=>{const h=(...m)=>a.next(1<m.length?m:m[0]);return r(h),()=>o(h)})}function D6(n,e){return t=>i=>n[t](e,i)}const Kw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Kw;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new fe(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Kw;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Kw;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class Pse extends aR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class kse extends sR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Kw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Kw.cancelAnimationFrame(t),e._scheduled=void 0)}});let mR,Ose=1;const qT={};function A6(n){return n in qT&&(delete qT[n],!0)}const Lse={setImmediate(n){const e=Ose++;return qT[e]=!0,mR||(mR=Promise.resolve()),mR.then(()=>A6(e)&&n()),e},clearImmediate(n){A6(n)}},{setImmediate:Nse,clearImmediate:Fse}=Lse,WT={setImmediate(...n){const{delegate:e}=WT;return(e?.setImmediate||Nse)(...n)},clearImmediate(n){const{delegate:e}=WT;return(e?.clearImmediate||Fse)(n)},delegate:void 0};new class zse extends aR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Bse extends sR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=WT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(WT.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function M6(n=0,e,t=are){let i=-1;return null!=e&&(Vr(e)?t=e:i=e),new De(r=>{let o=function Use(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function k6(n,e=OT){return function Vse(n){return _n((e,t)=>{let i=!1,r=null,o=null,a=!1;const h=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const _=r;r=null,t.next(_)}a&&t.complete()},m=()=>{o=null,a&&t.complete()};e.subscribe(kn(t,_=>{i=!0,r=_,o||Br(n(_)).subscribe(o=kn(t,h,m))},()=>{a=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>M6(n,e))}let XT=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new et,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new De(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(k6(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):St()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(oc(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=$v(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>jv(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(v),fn(nu),fn(Mo,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qw=(()=>{class n{constructor(t,i,r,o){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=o,this._destroyed=new et,this._elementScrolled=new De(a=>this.ngZone.runOutsideAngular(()=>jv(this.elementRef.nativeElement,"scroll").pipe(Cu(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=$w()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==$w()?t.left=t.right:1==$w()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;S$()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==t?t=a?r:i:"end"==t&&(t=a?i:r),a&&2==$w()?t==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&1==$w()?t==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(XT),re(v),re(cR,8))};static#t=this.\u0275dir=On({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),gR=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new et,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(k6(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(nu),fn(v),fn(Mo,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jw=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})(),P6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[Hw,Jw,Hw,Jw]})}return n})();function YT(n){return Vt(()=>n)}class R6{}class Hse{}const Ym="*";function ZT(n,e){return{type:7,name:n,definitions:e,options:{}}}function Gv(n,e=null){return{type:4,styles:e,timings:n}}function O6(n,e=null){return{type:2,steps:n,options:e}}function gf(n){return{type:6,styles:n,offset:null}}function db(n,e,t){return{type:0,name:n,styles:e,options:t}}function Hv(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class eE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class L6{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++i==o&&this._onDestroy()}),a.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,h)=>Math.max(a,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const KT=["*"],qse=["content"];function Wse(n,e){if(1&n){const t=Mv();on(0,"div",2),So("click",function(){return Gd(t),Bu(ca()._onBackdropClicked())}),hn()}2&n&&ba("mat-drawer-shown",ca()._isShowingBackdrop())}function Xse(n,e){1&n&&(on(0,"mat-drawer-content"),ui(1,2),hn())}const Yse=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Zse=["mat-drawer","mat-drawer-content","*"];function Kse(n,e){if(1&n){const t=Mv();on(0,"div",2),So("click",function(){return Gd(t),Bu(ca()._onBackdropClicked())}),hn()}2&n&&ba("mat-drawer-shown",ca()._isShowingBackdrop())}function Qse(n,e){1&n&&(on(0,"mat-sidenav-content"),ui(1,2),hn())}const Jse=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],eae=["mat-sidenav","mat-sidenav-content","*"],N6={transformDrawer:ZT("transform",[db("open, open-instant",gf({transform:"none",visibility:"visible"})),db("void",gf({"box-shadow":"none",visibility:"hidden"})),Hv("void => open-instant",Gv("0ms")),Hv("void <=> open, open-instant => void",Gv("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},nae=new xi("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function iae(){return!1}}),vR=new xi("MAT_DRAWER_CONTAINER");let QT=(()=>{class n extends Qw{constructor(t,i,r,o,a){super(r,o,a),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ni),re(xt(()=>B6)),re(Kn),re(XT),re(v))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-drawer-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,r){2&i&&lw("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[zo([{provide:Qw,useExisting:n}]),Tr],ngContentSelectors:KT,decls:1,vars:0,template:function(i,r){1&i&&(Mi(),ui(0))},encapsulation:2,changeDetection:0})}return n})(),F6=(()=>{class n{get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=ol(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=ol(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(ol(t))}constructor(t,i,r,o,a,h,m,_){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=o,this._ngZone=a,this._interactivityChecker=h,this._doc=m,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new et,this._animationEnd=new et,this._animationState="void",this.openedChange=new l(!0),this._openedStream=this.openedChange.pipe(oc(C=>C),Vt(()=>{})),this.openedStart=this._animationStarted.pipe(oc(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),YT(void 0)),this._closedStream=this.openedChange.pipe(oc(C=>!C),Vt(()=>{})),this.closedStart=this._animationStarted.pipe(oc(C=>C.fromState!==C.toState&&"void"===C.toState),YT(void 0)),this._destroyed=new et,this.onPositionChanged=new l,this._modeChanged=new et,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{jv(this._elementRef.nativeElement,"keydown").pipe(oc(C=>27===C.keyCode&&!this.disableClose&&!function oR(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(C)),Cu(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(nt((C,T)=>C.fromState===T.fromState&&C.toState===T.toState)).subscribe(C=>{const{fromState:T,toState:P}=C;(0===P.indexOf("open")&&"void"===T||"void"===P&&0===T.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(Dd(1)).subscribe(a=>o(a?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Kn),re(Mre),re(V$),re(nu),re(v),re(O$),re(Mo,8),re(vR,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-drawer"]],viewQuery:function(i,r){if(1&i&&Qd(qse,5),2&i){let o;xa(o=wa())&&(r._content=o.first)}},hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer"],hostVars:12,hostBindings:function(i,r){1&i&&OI("@transform.start",function(a){return r._animationStarted.next(a)})("@transform.done",function(a){return r._animationEnd.next(a)}),2&i&&(pl("align",null),FI("@transform",r._animationState),ba("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:KT,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,r){1&i&&(Mi(),on(0,"div",0,1),ui(2),hn())},dependencies:[Qw],encapsulation:2,data:{animation:[N6.transformDrawer]},changeDetection:0})}return n})(),B6=(()=>{class n{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=ol(t)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=null==t?null:ol(t)}get scrollable(){return this._userContent||this._content}constructor(t,i,r,o,a,h=!1,m){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=o,this._animationMode=m,this._drawers=new Y0,this.backdropClick=new l,this._destroyed=new et,this._doCheckSubject=new et,this._contentMargins={left:null,right:null},this._contentMarginChanges=new et,t&&t.change.pipe(Cu(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),a.change().pipe(Cu(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}ngAfterContentInit(){this._allDrawers.changes.pipe(FT(this._allDrawers),Cu(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(FT(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(LT(10),Cu(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(oc(i=>i.fromState!==i.toState),Cu(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Cu(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Cu(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Dd(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Cu(gt(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return null!=t&&t.opened}_drawerHasBackdrop(t){return null==this._backdropOverride?!!t&&"side"!==t.mode:this._backdropOverride}static#e=this.\u0275fac=function(i){return new(i||n)(re(cR,8),re(Kn),re(v),re(Ni),re(gR),re(nae),re(Zd,8))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(i,r,o){if(1&i&&(Eu(o,QT,5),Eu(o,F6,5)),2&i){let a;xa(a=wa())&&(r._content=a.first),xa(a=wa())&&(r._allDrawers=a)}},viewQuery:function(i,r){if(1&i&&Qd(QT,5),2&i){let o;xa(o=wa())&&(r._userContent=o.first)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,r){2&i&&ba("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[zo([{provide:vR,useExisting:n}])],ngContentSelectors:Zse,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){1&i&&(Mi(Yse),Rr(0,Wse,1,2,"div",0),ui(1),ui(2,1),Rr(3,Xse,2,0,"mat-drawer-content",1)),2&i&&(lr("ngIf",r.hasBackdrop),si(3),lr("ngIf",!r._content))},dependencies:[eh,QT],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return n})(),yR=(()=>{class n extends QT{constructor(t,i,r,o,a){super(t,i,r,o,a)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ni),re(xt(()=>z6)),re(Kn),re(XT),re(v))};static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:["ngSkipHydration","",1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(i,r){2&i&&lw("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[zo([{provide:Qw,useExisting:n}]),Tr],ngContentSelectors:KT,decls:1,vars:0,template:function(i,r){1&i&&(Mi(),ui(0))},encapsulation:2,changeDetection:0})}return n})(),bR=(()=>{class n extends F6{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=ol(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Uw(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Uw(t)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1","ngSkipHydration","",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(i,r){2&i&&(pl("align",null),lw("top",r.fixedInViewport?r.fixedTopGap:null,"px")("bottom",r.fixedInViewport?r.fixedBottomGap:null,"px"),ba("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened)("mat-sidenav-fixed",r.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Tr],ngContentSelectors:KT,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,r){1&i&&(Mi(),on(0,"div",0,1),ui(2),hn())},dependencies:[Qw],encapsulation:2,data:{animation:[N6.transformDrawer]},changeDetection:0})}return n})(),z6=(()=>{class n extends B6{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(i,r,o){if(1&i&&(Eu(o,yR,5),Eu(o,bR,5)),2&i){let a;xa(a=wa())&&(r._content=a.first),xa(a=wa())&&(r._allDrawers=a)}},hostAttrs:["ngSkipHydration","",1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,r){2&i&&ba("mat-drawer-container-explicit-backdrop",r._backdropOverride)},exportAs:["matSidenavContainer"],features:[zo([{provide:vR,useExisting:n}]),Tr],ngContentSelectors:eae,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){1&i&&(Mi(Jse),Rr(0,Kse,1,2,"div",0),ui(1),ui(2,1),Rr(3,Qse,2,0,"mat-sidenav-content",1)),2&i&&(lr("ngIf",r.hasBackdrop),si(3),lr("ngIf",!r._content))},dependencies:[eh,yR],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);position:relative;z-index:4;--mat-sidenav-container-shape:0;color:var(--mat-sidenav-container-text-color);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}return n})(),rae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[r_,sc,Jw,Jw,sc]})}return n})();class xR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class wR extends xR{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class $6 extends xR{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class oae extends xR{constructor(e){super(),this.element=e instanceof Kn?e.nativeElement:e}}class ER{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof wR?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof $6?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof oae?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class sae extends ER{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{const h=a.element,m=this._document.createComment("dom-portal");h.parentNode.insertBefore(m,h),this.outletElement.appendChild(h),this._attachedPortal=a,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(h,m)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Vs.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let V6=(()=>{class n extends ER{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l,this.attachDomPortal=o=>{const a=o.element,h=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(h,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(a,h)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ed),re(Dh),re(Mo))};static#t=this.\u0275dir=On({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Tr]})}return n})(),U6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})();const j6=S$();class aae{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Bc(-this._previousScrollPosition.left),e.style.top=Bc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),j6&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),j6&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class lae{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(oc(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class G6{enable(){}disable(){}attach(){}}function CR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function H6(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class cae{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();CR(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let uae=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new G6,this.close=a=>new lae(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new aae(this._viewportRuler,this._document),this.reposition=a=>new cae(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(fn(XT),fn(gR),fn(v),fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class q6{constructor(e){if(this.scrollStrategy=new G6,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class dae{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let W6=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hae=(()=>{class n extends W6{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const h=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(r)):h.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo),fn(v,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fae=(()=>{class n extends W6{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=u_(o)},this._clickListener=o=>{const a=u_(o),h="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const m=this._attachedOverlays.slice();for(let _=m.length-1;_>-1;_--){const C=m[_];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(a)||C.overlayElement.contains(h))break;const T=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>T.next(o)):T.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo),fn(nu),fn(v,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X6=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||rR()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),rR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo),fn(nu))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class pae{constructor(e,t,i,r,o,a,h,m,_,C=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=h,this._location=m,this._outsideClickDispatcher=_,this._animationsDisabled=C,this._backdropElement=null,this._backdropClick=new et,this._attachments=new et,this._detachments=new et,this._locationChanges=fe.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._backdropTransitionendHandler=T=>{this._disposeBackdrop(T.target)},this._keydownEvents=new et,this._outsidePointerEvents=new et,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Dd(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Bc(this._config.width),e.height=Bc(this._config.height),e.minWidth=Bc(this._config.minWidth),e.minHeight=Bc(this._config.minHeight),e.maxWidth=Bc(this._config.maxWidth),e.maxHeight=Bc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=NT(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Cu(gt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Y6="cdk-overlay-connected-position-bounding-box",mae=/([A-Za-z%]+)$/;class gae{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new et,this._resizeSubscription=fe.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Y6),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let a;for(let h of this._preferredPositions){let m=this._getOriginPoint(e,r,h),_=this._getOverlayPoint(m,t,h),C=this._getOverlayFit(_,t,i,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,m);this._canFitWithFlexibleDimensions(C,_,i)?o.push({position:h,origin:m,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(m,h)}):(!a||a.overlayFit.visibleArea<C.visibleArea)&&(a={overlayFit:C,overlayPoint:_,originPoint:m,position:h,overlayRect:t})}if(o.length){let h=null,m=-1;for(const _ of o){const C=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);C>m&&(m=C,h=_)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&qv(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Y6),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;r="start"==i.originX?a:h}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=K6(t);let{x:a,y:h}=e,m=this._getOffset(r,"x"),_=this._getOffset(r,"y");m&&(a+=m),_&&(h+=_);let P=0-h,O=h+o.height-i.height,j=this._subtractOverflows(o.width,0-a,a+o.width-i.width),q=this._subtractOverflows(o.height,P,O),_e=j*q;return{visibleArea:_e,isCompletelyWithinViewport:o.width*o.height===_e,fitsInViewportVertically:q===o.height,fitsInViewportHorizontally:j==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,a=Z6(this._overlayRef.getConfig().minHeight),h=Z6(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=r)&&(e.fitsInViewportHorizontally||null!=h&&h<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=K6(t),o=this._viewportRect,a=Math.max(e.x+r.width-o.width,0),h=Math.max(e.y+r.height-o.height,0),m=Math.max(o.top-i.top-e.y,0),_=Math.max(o.left-i.left-e.x,0);let C=0,T=0;return C=r.width<=o.width?_||-a:e.x<this._viewportMargin?o.left-i.left-e.x:0,T=r.height<=o.height?m||-h:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:C,y:T},{x:e.x+C,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new dae(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,a,h,C,T,P;if("top"===t.overlayY)a=e.y,o=i.height-a+this._viewportMargin;else if("bottom"===t.overlayY)h=i.height-e.y+2*this._viewportMargin,o=i.height-h+this._viewportMargin;else{const O=Math.min(i.bottom-e.y+i.top,e.y),j=this._lastBoundingBoxSize.height;o=2*O,a=e.y-O,o>j&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-j/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)P=i.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)T=e.x,C=i.right-e.x;else{const O=Math.min(i.right-e.x+i.left,e.x),j=this._lastBoundingBoxSize.width;C=2*O,T=e.x-O,C>j&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-j/2)}return{top:a,left:T,bottom:h,right:P,width:C,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Bc(i.height),r.top=Bc(i.top),r.bottom=Bc(i.bottom),r.width=Bc(i.width),r.left=Bc(i.left),r.right=Bc(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Bc(o)),a&&(r.maxWidth=Bc(a))}this._lastBoundingBoxSize=i,qv(this._boundingBox.style,r)}_resetBoundingBoxStyles(){qv(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){qv(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){const C=this._viewportRuler.getViewportScrollPosition();qv(i,this._getExactOverlayY(t,e,C)),qv(i,this._getExactOverlayX(t,e,C))}else i.position="static";let h="",m=this._getOffset(t,"x"),_=this._getOffset(t,"y");m&&(h+=`translateX(${m}px) `),_&&(h+=`translateY(${_}px)`),i.transform=h.trim(),a.maxHeight&&(r?i.maxHeight=Bc(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=Bc(a.maxWidth):o&&(i.maxWidth="")),qv(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Bc(o.y),r}_getExactOverlayX(e,t,i){let a,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),a=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===a?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Bc(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:H6(e,i),isOriginOutsideView:CR(e,i),isOverlayClipped:H6(t,i),isOverlayOutsideView:CR(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&NT(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Kn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function qv(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Z6(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(mae);return t&&"px"!==t?null:parseFloat(e)}return n||null}function K6(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Q6="cdk-global-overlay-wrapper";class _ae{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Q6),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:h}=i,m=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),_=!("100%"!==o&&"100vh"!==o||h&&"100%"!==h&&"100vh"!==h),C=this._xPosition,T=this._xOffset,P="rtl"===this._overlayRef.getConfig().direction;let O="",j="",q="";m?q="flex-start":"center"===C?(q="center",P?j=T:O=T):P?"left"===C||"end"===C?(q="flex-end",O=T):("right"===C||"start"===C)&&(q="flex-start",j=T):"left"===C||"start"===C?(q="flex-start",O=T):("right"===C||"end"===C)&&(q="flex-end",j=T),e.position=this._cssPosition,e.marginLeft=m?"0":O,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=m?"0":j,t.justifyContent=q,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Q6),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let vae=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new _ae}flexibleConnectedTo(t){return new gae(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(gR),fn(Mo),fn(nu),fn(X6))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yae=0,tE=(()=>{class n{constructor(t,i,r,o,a,h,m,_,C,T,P,O){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=h,this._ngZone=m,this._document=_,this._directionality=C,this._location=T,this._outsideClickDispatcher=P,this._animationsModuleType=O}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),a=new q6(t);return a.direction=a.direction||this._directionality.value,new pae(o,i,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+yae++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(jm)),new sae(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(uae),fn(X6),fn(Ed),fn(vae),fn(hae),fn(Vs),fn(v),fn(Mo),fn(cR),fn(J0),fn(fae),fn(Zd,8))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wae={provide:new xi("cdk-connected-overlay-scroll-strategy"),deps:[tE],useFactory:function xae(n){return()=>n.scrollStrategies.reposition()}};let J6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({providers:[tE,wae],imports:[Hw,U6,P6,P6]})}return n})();function Eae(n,e){if(1&n){const t=Mv();on(0,"div",2)(1,"button",3),So("click",function(){return Gd(t),Bu(ca().action())}),Jn(2),hn()()}if(2&n){const t=ca();si(2),wc(" ",t.data.action," ")}}const Cae=["label"];function Sae(n,e){}const Iae=Math.pow(2,31)-1;class SR{constructor(e,t){this._overlayRef=t,this._afterDismissed=new et,this._afterOpened=new et,this._onAction=new et,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,Iae))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const eV=new xi("MatSnackBarData");class JT{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let Tae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),Dae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),Aae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),Mae=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#e=this.\u0275fac=function(i){return new(i||n)(re(SR),re(eV))};static#t=this.\u0275cmp=qn({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,r){1&i&&(on(0,"div",0),Jn(1),hn(),Rr(2,Eae,3,1,"div",1)),2&i&&(si(1),wc(" ",r.data.message,"\n"),si(1),lr("ngIf",r.hasAction))},dependencies:[eh,UT,Tae,Dae,Aae],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return n})();const kae={snackBarState:ZT("state",[db("void, hidden",gf({transform:"scale(0.8)",opacity:0})),db("visible",gf({transform:"scale(1)",opacity:1})),Hv("* => visible",Gv("150ms cubic-bezier(0, 0, 0.2, 1)")),Hv("* => void, * => hidden",Gv("75ms cubic-bezier(0.4, 0.0, 1, 1)",gf({opacity:0})))])};let Pae=0,Rae=(()=>{class n extends ER{constructor(t,i,r,o,a){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=o,this.snackBarConfig=a,this._document=ti(Mo),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new et,this._onExit=new et,this._onEnter=new et,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+Pae++,this.attachDomPortal=h=>{this._assertNotAttached();const m=this._portalOutlet.attachDomPortal(h);return this._afterPortalAttached(),m},this._live="assertive"!==a.politeness||a.announcementMessage?"off"===a.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),i}attachTemplatePortal(t){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),i}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Dd(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),this._exposeToModals()}_exposeToModals(){const t=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const o=i[r],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?-1===a.indexOf(t)&&o.setAttribute("aria-owns",a+" "+t):o.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const i=t.getAttribute("aria-owns");if(i){const r=i.replace(this._liveElementId,"").trim();r.length>0?t.setAttribute("aria-owns",r):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#e=this.\u0275fac=function(i){return new(i||n)(re(v),re(Kn),re(Ni),re(nu),re(JT))};static#t=this.\u0275dir=On({type:n,viewQuery:function(i,r){if(1&i&&Qd(V6,7),2&i){let o;xa(o=wa())&&(r._portalOutlet=o.first)}},features:[Tr]})}return n})(),Oae=(()=>{class n extends Rae{_afterPortalAttached(){super._afterPortalAttached();const t=this._label.nativeElement,i="mdc-snackbar__label";t.classList.toggle(i,!t.querySelector(`.${i}`))}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275cmp=qn({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,r){if(1&i&&Qd(Cae,7),2&i){let o;xa(o=wa())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(i,r){1&i&&OI("@state.done",function(a){return r.onAnimationEnd(a)}),2&i&&FI("@state",r._animationState)},features:[Tr],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(on(0,"div",0)(1,"div",1,2)(3,"div",3),Rr(4,Sae,0,0,"ng-template",4),hn(),oo(5,"div"),hn()()),2&i&&(si(5),pl("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[V6],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;--mdc-snackbar-container-shape:4px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[kae.snackBarState]}})}return n})(),tV=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[J6,U6,r_,i6,sc,sc]})}return n})();const nV=new xi("mat-snack-bar-default-options",{providedIn:"root",factory:function Lae(){return new JT}});let Nae=(()=>{class n{get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,i,r,o,a,h){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=o,this._parentSnackBar=a,this._defaultConfig=h,this._snackBarRefAtThisLevel=null}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const o={...this._defaultConfig,...r};return o.data={message:t,action:i},o.announcementMessage===t&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const o=Vs.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:JT,useValue:i}]}),a=new wR(this.snackBarContainerComponent,i.viewContainerRef,o),h=t.attach(a);return h.instance.snackBarConfig=i,h.instance}_attach(t,i){const r={...new JT,...this._defaultConfig,...i},o=this._createOverlay(r),a=this._attachSnackBarContainer(o,r),h=new SR(a,o);if(t instanceof hf){const m=new $6(t,null,{$implicit:r.data,snackBarRef:h});h.instance=a.attachTemplatePortal(m)}else{const m=this._createInjector(r,h),_=new wR(t,void 0,m),C=a.attachComponentPortal(_);h.instance=C.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Cu(o.detachments())).subscribe(m=>{o.overlayElement.classList.toggle(this.handsetCssClass,m.matches)}),r.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(h,r),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new q6;i.direction=t.direction;let r=this._overlay.position().global();const o="rtl"===t.direction,a="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!o||"end"===t.horizontalPosition&&o,h=!a&&"center"!==t.horizontalPosition;return a?r.left("0"):h?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return Vs.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:SR,useValue:i},{provide:eV,useValue:t.data}]})}static#e=this.\u0275fac=function(i){return new(i||n)(fn(tE),fn($$),fn(Vs),fn(BT),fn(n,12),fn(nV))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})(),IR=(()=>{class n extends Nae{constructor(t,i,r,o,a,h){super(t,i,r,o,a,h),this.simpleSnackBarComponent=Mae,this.snackBarContainerComponent=Oae,this.handsetCssClass="mat-mdc-snack-bar-handset"}static#e=this.\u0275fac=function(i){return new(i||n)(fn(tE),fn($$),fn(Vs),fn(BT),fn(n,12),fn(nV))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:tV})}return n})(),Fae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[sc,sc]})}return n})();function iV(n){return new Jt(3e3,!1)}function h_(n){switch(n.length){case 0:return new eE;case 1:return n[0];default:return new L6(n)}}function rV(n,e,t=new Map,i=new Map){const r=[],o=[];let a=-1,h=null;if(e.forEach(m=>{const _=m.get("offset"),C=_==a,T=C&&h||new Map;m.forEach((P,O)=>{let j=O,q=P;if("offset"!==O)switch(j=n.normalizePropertyName(j,r),q){case"!":q=t.get(O);break;case Ym:q=i.get(O);break;default:q=n.normalizeStyleValue(O,j,q,r)}T.set(j,q)}),C||o.push(T),h=T,a=_}),r.length)throw function sle(n){return new Jt(3502,!1)}();return o}function TR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&DR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&DR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&DR(t,"destroy",n)))}}function DR(n,e,t){const o=AR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(o._data=a),o}function AR(n,e,t,i,r="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function Mh(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function oV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const vle=(()=>typeof document>"u"?null:document.documentElement)();function MR(n){const e=n.parentNode||n.host||null;return e===vle?null:e}let Wv=null,sV=!1;function aV(n,e){for(;e;){if(e===n)return!0;e=MR(e)}return!1}function lV(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let cV=(()=>{class n{validateStyleProperty(t){return function ble(n){Wv||(Wv=function xle(){return typeof document<"u"?document.body:null}()||{},sV=!!Wv.style&&"WebkitAppearance"in Wv.style);let e=!0;return Wv.style&&!function yle(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Wv.style,!e&&sV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Wv.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return aV(t,i)}getParentElement(t){return MR(t)}query(t,i,r){return lV(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,a,h=[],m){return new eE(r,o)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})(),kR=(()=>{class n{static#e=this.NOOP=new cV}return n})();const wle=1e3,PR="ng-enter",eD="ng-leave",tD="ng-trigger",nD=".ng-trigger",dV="ng-animating",RR=".ng-animating";function Zm(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OR(parseFloat(e[1]),e[2])}function OR(n,e){return"s"===e?n*wle:n}function iD(n,e,t){return n.hasOwnProperty("duration")?n:function Cle(n,e,t){let r,o=0,a="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(iV()),{duration:0,delay:0,easing:""};r=OR(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(o=OR(parseFloat(m),h[4]));const _=h[5];_&&(a=_)}else r=n;if(!t){let h=!1,m=e.length;r<0&&(e.push(function Bae(){return new Jt(3100,!1)}()),h=!0),o<0&&(e.push(function zae(){return new Jt(3101,!1)}()),h=!0),h&&e.splice(m,0,iV())}return{duration:r,delay:o,easing:a}}(n,e,t)}function nE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function hV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function f_(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function qp(n,e,t){e.forEach((i,r)=>{const o=NR(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Xv(n,e){e.forEach((t,i)=>{const r=NR(i);n.style[r]=""})}function iE(n){return Array.isArray(n)?1==n.length?n[0]:O6(n):n}const LR=new RegExp("{{\\s*(.+?)\\s*}}","g");function pV(n){let e=[];if("string"==typeof n){let t;for(;t=LR.exec(n);)e.push(t[1]);LR.lastIndex=0}return e}function rE(n,e,t){const i=n.toString(),r=i.replace(LR,(o,a)=>{let h=e[a];return null==h&&(t.push(function Vae(n){return new Jt(3003,!1)}()),h=""),h.toString()});return r==i?n:r}function rD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Tle=/-+([a-z0-9])/g;function NR(n){return n.replace(Tle,(...e)=>e[1].toUpperCase())}function kh(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Uae(n){return new Jt(3004,!1)}()}}function mV(n,e){return window.getComputedStyle(n)[e]}const oD="*";function Mle(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function kle(n,e,t){if(":"==n[0]){const m=function Ple(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function nle(n){return new Jt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function tle(n){return new Jt(3015,!1)}()),e;const r=i[1],o=i[2],a=i[3];e.push(gV(r,a));"<"==o[0]&&!(r==oD&&a==oD)&&e.push(gV(a,r))}(i,t,e)):t.push(n),t}const sD=new Set(["true","1"]),aD=new Set(["false","0"]);function gV(n,e){const t=sD.has(n)||aD.has(n),i=sD.has(e)||aD.has(e);return(r,o)=>{let a=n==oD||n==r,h=e==oD||e==o;return!a&&t&&"boolean"==typeof r&&(a=r?sD.has(n):aD.has(n)),!h&&i&&"boolean"==typeof o&&(h=o?sD.has(e):aD.has(e)),a&&h}}const Rle=new RegExp("s*:selfs*,?","g");function FR(n,e,t,i){return new Ole(n).build(e,t,i)}class Ole{constructor(e){this._driver=e}build(e,t,i){const r=new Fle(t);return this._resetContextStyleTimingState(r),kh(this,iE(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function Gae(){return new Jt(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,_=m.name;_.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,o.push(this.visitState(m,t))}),m.name=_}else if(1==h.type){const m=this.visitTransition(h,t);i+=m.queryCount,r+=m.depCount,a.push(m)}else t.errors.push(function Hae(){return new Jt(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,a=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{pV(m).forEach(_=>{a.hasOwnProperty(_)||o.add(_)})})}),o.size&&(rD(o.values()),t.errors.push(function qae(n,e){return new Jt(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=kh(this,iE(e.animation),t);return{type:1,matchers:Mle(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Yv(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>kh(this,i,t)),options:Yv(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(a=>{t.currentTime=i;const h=kh(this,a,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:o,options:Yv(e.options)}}visitAnimate(e,t){const i=function zle(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return BR(iD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=BR(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=iD(t,e);return BR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:gf({});if(5==o.type)r=this.visitKeyframes(o,t);else{let a=e.styles,h=!1;if(!a){h=!0;const _={};i.easing&&(_.easing=i.easing),a=gf(_)}t.currentTime+=i.duration+i.delay;const m=this.visitStyle(a,t);m.isEmptyStep=h,r=m}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===Ym?i.push(h):t.errors.push(new Jt(3002,!1)):i.push(hV(h));let o=!1,a=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(a=h.get("easing"),h.delete("easing")),!o))for(let m of h.values())if(m.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((h,m)=>{const _=t.collectedStyles.get(t.currentQuerySelector),C=_.get(m);let T=!0;C&&(o!=r&&o>=C.startTime&&r<=C.endTime&&(t.errors.push(function Xae(n,e,t,i,r){return new Jt(3010,!1)}()),T=!1),o=C.startTime),T&&_.set(m,{startTime:o,endTime:r}),t.options&&function Ile(n,e,t){const i=e.params||{},r=pV(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function $ae(n){return new Jt(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Yae(){return new Jt(3011,!1)}()),i;let o=0;const a=[];let h=!1,m=!1,_=0;const C=e.steps.map(me=>{const te=this._makeStyleAst(me,t);let Pe=null!=te.offset?te.offset:function Ble(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(te.styles),_t=0;return null!=Pe&&(o++,_t=te.offset=Pe),m=m||_t<0||_t>1,h=h||_t<_,_=_t,a.push(_t),te});m&&t.errors.push(function Zae(){return new Jt(3012,!1)}()),h&&t.errors.push(function Kae(){return new Jt(3200,!1)}());const T=e.steps.length;let P=0;o>0&&o<T?t.errors.push(function Qae(){return new Jt(3202,!1)}()):0==o&&(P=1/(T-1));const O=T-1,j=t.currentTime,q=t.currentAnimateTimings,_e=q.duration;return C.forEach((me,te)=>{const Pe=P>0?te==O?1:P*te:a[te],_t=Pe*_e;t.currentTime=j+q.delay+_t,q.duration=_t,this._validateStyleAst(me,t),me.offset=Pe,i.styles.push(me)}),i}visitReference(e,t){return{type:8,animation:kh(this,iE(e.animation),t),options:Yv(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Yv(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Yv(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,a]=function Lle(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Rle,"")),n=n.replace(/@\*/g,nD).replace(/@\w+/g,t=>nD+"-"+t.slice(1)).replace(/:animating/g,RR),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Mh(t.collectedStyles,t.currentQuerySelector,new Map);const h=kh(this,iE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:h,originalSelector:e.selector,options:Yv(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Jae(){return new Jt(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:iD(e.timings,t.errors,!0);return{type:12,animation:kh(this,iE(e.animation),t),timings:i,options:null}}}class Fle{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Yv(n){return n?(n=nE(n)).params&&(n.params=function Nle(n){return n?nE(n):null}(n.params)):n={},n}function BR(n,e,t){return{duration:n,delay:e,easing:t}}function zR(n,e,t,i,r,o,a=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:h}}class lD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Ule=new RegExp(":enter","g"),Gle=new RegExp(":leave","g");function $R(n,e,t,i,r,o=new Map,a=new Map,h,m,_=[]){return(new Hle).buildKeyframes(n,e,t,i,r,o,a,h,m,_)}class Hle{buildKeyframes(e,t,i,r,o,a,h,m,_,C=[]){_=_||new lD;const T=new VR(e,t,_,r,o,C,[]);T.options=m;const P=m.delay?Zm(m.delay):0;T.currentTimeline.delayNextStep(P),T.currentTimeline.setStyles([a],null,T.errors,m),kh(this,i,T);const O=T.timelines.filter(j=>j.containsAnimation());if(O.length&&h.size){let j;for(let q=O.length-1;q>=0;q--){const _e=O[q];if(_e.element===t){j=_e;break}}j&&!j.allowOnlyTimelineStyles()&&j.setStyles([h],null,T.errors,m)}return O.length?O.map(j=>j.buildKeyframes()):[zR(t,[],[],[],0,P,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const a="number"==typeof o?o:Zm(rE(o,r?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const a=null!=i.duration?Zm(i.duration):null,h=null!=i.delay?Zm(i.delay):null;return 0!==a&&e.forEach(m=>{const _=t.appendInstructionToTimeline(m,a,h);o=Math.max(o,_.duration+_.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),kh(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=cD);const a=Zm(o.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>kh(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Zm(e.options.delay):0;e.steps.forEach(a=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),kh(this,a,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return iD(t.params?rE(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*o),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Zm(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=cD);let a=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((_,C)=>{t.currentQueryIndex=C;const T=t.createSubContext(e.options,_);o&&T.delayNextStep(o),_===t.element&&(m=T.currentTimeline),kh(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),h=a*(t.currentQueryTotal-1);let m=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=h-m;break;case"full":m=i.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const T=C.currentTime;kh(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const cD={};class VR{constructor(e,t,i,r,o,a,h,m){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=a,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new uD(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Zm(i.duration)),null!=i.delay&&(r.delay=Zm(i.delay));const o=i.params;if(o){let a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!a.hasOwnProperty(h))&&(a[h]=rE(o[h],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new VR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=cD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new qle(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,a){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(Ule,"."+this._enterClassName)).replace(Gle,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),h.push(..._)}return!o&&0==h.length&&a.push(function ele(n){return new Jt(3014,!1)}()),h}}class uD{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new uD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ym),this._currentKeyframe.set(t,Ym);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},a=function Wle(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,Ym)}else f_(r,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of a){const _=rE(m,o,i);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Ym),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,m)=>{const _=f_(h,new Map,this._backFill);_.forEach((C,T)=>{"!"===C?e.add(T):C===Ym&&t.add(T)}),i||_.set("offset",m/this.duration),r.push(_)});const o=e.size?rD(e.values()):[],a=t.size?rD(t.values()):[];if(i){const h=r[0],m=new Map(h);h.set("offset",0),m.set("offset",1),r=[h,m]}return zR(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)}}class qle extends uD{constructor(e,t,i,r,o,a,h=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],a=i+t,h=t/a,m=f_(e[0]);m.set("offset",0),o.push(m);const _=f_(e[0]);_.set("offset",yV(h)),o.push(_);const C=e.length-1;for(let T=1;T<=C;T++){let P=f_(e[T]);const O=P.get("offset");P.set("offset",yV((t+O*i)/a)),o.push(P)}i=a,t=0,r="",e=o}return zR(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function yV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class UR{}const Xle=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Yle extends UR{normalizePropertyName(e,t){return NR(e)}normalizeStyleValue(e,t,i,r){let o="";const a=i.toString().trim();if(Xle.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function jae(n,e){return new Jt(3005,!1)}())}return a+o}}function bV(n,e,t,i,r,o,a,h,m,_,C,T,P){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:a,timelines:h,queriedElements:m,preStyleProps:_,postStyleProps:C,totalTime:T,errors:P}}const jR={};class xV{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Zle(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,a,h,m,_,C){const T=[],P=this.ast.options&&this.ast.options.params||jR,j=this.buildStyles(i,h&&h.params||jR,T),q=m&&m.params||jR,_e=this.buildStyles(r,q,T),me=new Set,te=new Map,Pe=new Map,_t="void"===r,Dt={params:Kle(q,P),delay:this.ast.options?.delay},Yt=C?[]:$R(e,t,this.ast.animation,o,a,j,_e,Dt,_,T);let Wt=0;if(Yt.forEach(rt=>{Wt=Math.max(rt.duration+rt.delay,Wt)}),T.length)return bV(t,this._triggerName,i,r,_t,j,_e,[],[],te,Pe,Wt,T);Yt.forEach(rt=>{const Ii=rt.element,bi=Mh(te,Ii,new Set);rt.preStyleProps.forEach(Dr=>bi.add(Dr));const hr=Mh(Pe,Ii,new Set);rt.postStyleProps.forEach(Dr=>hr.add(Dr)),Ii!==t&&me.add(Ii)});const sn=rD(me.values());return bV(t,this._triggerName,i,r,_t,j,_e,Yt,sn,te,Pe,Wt)}}function Kle(n,e){const t=nE(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Qle{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=nE(this.defaultParams);return Object.keys(e).forEach(o=>{const a=e[o];null!==a&&(r[o]=a)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,h)=>{a&&(a=rE(a,r,t));const m=this.normalizer.normalizePropertyName(h,t);a=this.normalizer.normalizeStyleValue(h,m,a,t),i.set(h,a)})}),i}}class ece{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Qle(r.style,r.options&&r.options.params||{},i))}),wV(this.states,"true","1"),wV(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new xV(e,r,this.states))}),this.fallbackTransition=function tce(n,e,t){return new xV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(a=>a.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function wV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const nce=new lD;class ice{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=FR(this._driver,t,i,[]);if(i.length)throw function ale(n){return new Jt(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=rV(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let a;const h=new Map;if(o?(a=$R(this._driver,t,o,PR,eD,new Map,new Map,i,nce,r),a.forEach(C=>{const T=Mh(h,C.element,new Map);C.postStyleProps.forEach(P=>T.set(P,null))})):(r.push(function lle(){return new Jt(3300,!1)}()),a=[]),r.length)throw function cle(n){return new Jt(3504,!1)}();h.forEach((C,T)=>{C.forEach((P,O)=>{C.set(O,this._driver.computeStyle(T,O,Ym))})});const _=h_(a.map(C=>{const T=h.get(C.element);return this._buildPlayer(C,new Map,T)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function ule(n){return new Jt(3301,!1)}();return t}listen(e,t,i,r){const o=AR(t,"","","");return TR(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const EV="ng-animate-queued",GR="ng-animate-disabled",lce=[],CV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qf="__ng_removed";class HR{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function fce(n){return n??null}(i?e.value:e),i){const o=nE(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const oE="void",qR=new HR(oE);class uce{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,_f(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function dle(n,e){return new Jt(3302,!1)}();if(null==i||0==i.length)throw function hle(n){return new Jt(3303,!1)}();if(!function pce(n){return"start"==n||"done"==n}(i))throw function fle(n,e){return new Jt(3400,!1)}();const o=Mh(this._elementListeners,e,[]),a={name:t,phase:i,callback:r};o.push(a);const h=Mh(this._engine.statesByElement,e,new Map);return h.has(t)||(_f(e,tD),_f(e,tD+"-"+t),h.set(t,qR)),()=>{this._engine.afterFlush(()=>{const m=o.indexOf(a);m>=0&&o.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ple(n){return new Jt(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),a=new WR(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(_f(e,tD),_f(e,tD+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const _=new HR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&_.absorbOptions(m.options),h.set(t,_),m||(m=qR),_.value!==oE&&m.value===_.value){if(!function _ce(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(m.params,_.params)){const q=[],_e=o.matchStyles(m.value,m.params,q),me=o.matchStyles(_.value,_.params,q);q.length?this._engine.reportError(q):this._engine.afterFlush(()=>{Xv(e,_e),qp(e,me)})}return}const P=Mh(this._engine.playersByElement,e,[]);P.forEach(q=>{q.namespaceId==this.id&&q.triggerName==t&&q.queued&&q.destroy()});let O=o.matchTransition(m.value,_.value,e,_.params),j=!1;if(!O){if(!r)return;O=o.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:m,toState:_,player:a,isFallbackTransition:j}),j||(_f(e,EV),a.onStart(()=>{hb(e,EV)})),a.onDone(()=>{let q=this.players.indexOf(a);q>=0&&this.players.splice(q,1);const _e=this._engine.playersByElement.get(e);if(_e){let me=_e.indexOf(a);me>=0&&_e.splice(me,1)}}),this.players.push(a),P.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,nD,!0);i.forEach(r=>{if(r[Qf])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),a=new Map;if(o){const h=[];if(o.forEach((m,_)=>{if(a.set(_,m.value),this._triggers.has(_)){const C=this.trigger(e,_,oE,r);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&h_(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const a=o.name;if(r.has(a))return;r.add(a);const m=this._triggers.get(a).fallbackTransition,_=i.get(a)||qR,C=new HR(oE),T=new WR(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:m,fromState:_,toState:C,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Qf];(!o||o===CV)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){_f(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,a=this._elementListeners.get(o);a&&a.forEach(h=>{if(h.name==i.triggerName){const m=AR(o,i.triggerName,i.fromState.value,i.toState.value);m._data=e,TR(i.player,h.phase,m,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,a=r.transition.ast.depCount;return 0==o||0==a?o-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class dce{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new uce(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,h=this.driver.getParentElement(t);for(;h;){const m=r.get(h);if(m){const _=i.indexOf(m);i.splice(_+1,0,e),a=!0;break}h=this.driver.getParentElement(h)}a||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(dD(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!dD(t))return;const o=t[Qf];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),_f(e,GR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),hb(e,GR))}removeNode(e,t,i){if(dD(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Qf]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return dD(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,nD,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,RR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return h_(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Qf];if(t&&t.setForRemoval){if(e[Qf]=CV,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(GR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)_f(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?h_(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function mle(n){return new Jt(3402,!1)}()}_flushAnimations(e,t){const i=new lD,r=[],o=new Map,a=[],h=new Map,m=new Map,_=new Map,C=new Set;this.disabledNodes.forEach(Nn=>{C.add(Nn);const Ci=this.driver.query(Nn,".ng-animate-queued",!0);for(let Ui=0;Ui<Ci.length;Ui++)C.add(Ci[Ui])});const T=this.bodyNode,P=Array.from(this.statesByElement.keys()),O=TV(P,this.collectedEnterElements),j=new Map;let q=0;O.forEach((Nn,Ci)=>{const Ui=PR+q++;j.set(Ci,Ui),Nn.forEach(nr=>_f(nr,Ui))});const _e=[],me=new Set,te=new Set;for(let Nn=0;Nn<this.collectedLeaveElements.length;Nn++){const Ci=this.collectedLeaveElements[Nn],Ui=Ci[Qf];Ui&&Ui.setForRemoval&&(_e.push(Ci),me.add(Ci),Ui.hasAnimation?this.driver.query(Ci,".ng-star-inserted",!0).forEach(nr=>me.add(nr)):te.add(Ci))}const Pe=new Map,_t=TV(P,Array.from(me));_t.forEach((Nn,Ci)=>{const Ui=eD+q++;Pe.set(Ci,Ui),Nn.forEach(nr=>_f(nr,Ui))}),e.push(()=>{O.forEach((Nn,Ci)=>{const Ui=j.get(Ci);Nn.forEach(nr=>hb(nr,Ui))}),_t.forEach((Nn,Ci)=>{const Ui=Pe.get(Ci);Nn.forEach(nr=>hb(nr,Ui))}),_e.forEach(Nn=>{this.processLeaveNode(Nn)})});const Dt=[],Yt=[];for(let Nn=this._namespaceList.length-1;Nn>=0;Nn--)this._namespaceList[Nn].drainQueuedTransitions(t).forEach(Ui=>{const nr=Ui.player,Hs=Ui.element;if(Dt.push(nr),this.collectedEnterElements.length){const al=Hs[Qf];if(al&&al.setForMove){if(al.previousTriggersValues&&al.previousTriggersValues.has(Ui.triggerName)){const dp=al.previousTriggersValues.get(Ui.triggerName),Du=this.statesByElement.get(Ui.element);if(Du&&Du.has(Ui.triggerName)){const bg=Du.get(Ui.triggerName);bg.value=dp,Du.set(Ui.triggerName,bg)}}return void nr.destroy()}}const Ia=!T||!this.driver.containsElement(T,Hs),ha=Pe.get(Hs),Go=j.get(Hs),eo=this._buildInstruction(Ui,i,Go,ha,Ia);if(eo.errors&&eo.errors.length)return void Yt.push(eo);if(Ia)return nr.onStart(()=>Xv(Hs,eo.fromStyles)),nr.onDestroy(()=>qp(Hs,eo.toStyles)),void r.push(nr);if(Ui.isFallbackTransition)return nr.onStart(()=>Xv(Hs,eo.fromStyles)),nr.onDestroy(()=>qp(Hs,eo.toStyles)),void r.push(nr);const sl=[];eo.timelines.forEach(al=>{al.stretchStartingKeyframe=!0,this.disabledNodes.has(al.element)||sl.push(al)}),eo.timelines=sl,i.append(Hs,eo.timelines),a.push({instruction:eo,player:nr,element:Hs}),eo.queriedElements.forEach(al=>Mh(h,al,[]).push(nr)),eo.preStyleProps.forEach((al,dp)=>{if(al.size){let Du=m.get(dp);Du||m.set(dp,Du=new Set),al.forEach((bg,F_)=>Du.add(F_))}}),eo.postStyleProps.forEach((al,dp)=>{let Du=_.get(dp);Du||_.set(dp,Du=new Set),al.forEach((bg,F_)=>Du.add(F_))})});if(Yt.length){const Nn=[];Yt.forEach(Ci=>{Nn.push(function gle(n,e){return new Jt(3505,!1)}())}),Dt.forEach(Ci=>Ci.destroy()),this.reportError(Nn)}const Wt=new Map,sn=new Map;a.forEach(Nn=>{const Ci=Nn.element;i.has(Ci)&&(sn.set(Ci,Ci),this._beforeAnimationBuild(Nn.player.namespaceId,Nn.instruction,Wt))}),r.forEach(Nn=>{const Ci=Nn.element;this._getPreviousPlayers(Ci,!1,Nn.namespaceId,Nn.triggerName,null).forEach(nr=>{Mh(Wt,Ci,[]).push(nr),nr.destroy()})});const rt=_e.filter(Nn=>AV(Nn,m,_)),Ii=new Map;IV(Ii,this.driver,te,_,Ym).forEach(Nn=>{AV(Nn,m,_)&&rt.push(Nn)});const hr=new Map;O.forEach((Nn,Ci)=>{IV(hr,this.driver,new Set(Nn),m,"!")}),rt.forEach(Nn=>{const Ci=Ii.get(Nn),Ui=hr.get(Nn);Ii.set(Nn,new Map([...Ci?.entries()??[],...Ui?.entries()??[]]))});const Dr=[],Ei=[],Hi={};a.forEach(Nn=>{const{element:Ci,player:Ui,instruction:nr}=Nn;if(i.has(Ci)){if(C.has(Ci))return Ui.onDestroy(()=>qp(Ci,nr.toStyles)),Ui.disabled=!0,Ui.overrideTotalTime(nr.totalTime),void r.push(Ui);let Hs=Hi;if(sn.size>1){let ha=Ci;const Go=[];for(;ha=ha.parentNode;){const eo=sn.get(ha);if(eo){Hs=eo;break}Go.push(ha)}Go.forEach(eo=>sn.set(eo,Hs))}const Ia=this._buildAnimation(Ui.namespaceId,nr,Wt,o,hr,Ii);if(Ui.setRealPlayer(Ia),Hs===Hi)Dr.push(Ui);else{const ha=this.playersByElement.get(Hs);ha&&ha.length&&(Ui.parentPlayer=h_(ha)),r.push(Ui)}}else Xv(Ci,nr.fromStyles),Ui.onDestroy(()=>qp(Ci,nr.toStyles)),Ei.push(Ui),C.has(Ci)&&r.push(Ui)}),Ei.forEach(Nn=>{const Ci=o.get(Nn.element);if(Ci&&Ci.length){const Ui=h_(Ci);Nn.setRealPlayer(Ui)}}),r.forEach(Nn=>{Nn.parentPlayer?Nn.syncPlayerEvents(Nn.parentPlayer):Nn.destroy()});for(let Nn=0;Nn<_e.length;Nn++){const Ci=_e[Nn],Ui=Ci[Qf];if(hb(Ci,eD),Ui&&Ui.hasAnimation)continue;let nr=[];if(h.size){let Ia=h.get(Ci);Ia&&Ia.length&&nr.push(...Ia);let ha=this.driver.query(Ci,RR,!0);for(let Go=0;Go<ha.length;Go++){let eo=h.get(ha[Go]);eo&&eo.length&&nr.push(...eo)}}const Hs=nr.filter(Ia=>!Ia.destroyed);Hs.length?mce(this,Ci,Hs):this.processLeaveNode(Ci)}return _e.length=0,Dr.forEach(Nn=>{this.players.push(Nn),Nn.onDone(()=>{Nn.destroy();const Ci=this.players.indexOf(Nn);this.players.splice(Ci,1)}),Nn.play()}),Dr}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let a=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(a=h)}else{const h=this.playersByElement.get(e);if(h){const m=!o||o==oE;h.forEach(_=>{_.queued||!m&&_.triggerName!=r||a.push(_)})}}return(i||r)&&(a=a.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),a}_beforeAnimationBuild(e,t,i){const o=t.element,a=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const _=m.element,C=_!==o,T=Mh(i,_,[]);this._getPreviousPlayers(_,C,a,h,t.toState).forEach(O=>{const j=O.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),O.destroy(),T.push(O)})}Xv(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,a){const h=t.triggerName,m=t.element,_=[],C=new Set,T=new Set,P=t.timelines.map(j=>{const q=j.element;C.add(q);const _e=q[Qf];if(_e&&_e.removedBeforeQueried)return new eE(j.duration,j.delay);const me=q!==m,te=function gce(n){const e=[];return DV(n,e),e}((i.get(q)||lce).map(Wt=>Wt.getRealPlayer())).filter(Wt=>!!Wt.element&&Wt.element===q),Pe=o.get(q),_t=a.get(q),Dt=rV(this._normalizer,j.keyframes,Pe,_t),Yt=this._buildPlayer(j,Dt,te);if(j.subTimeline&&r&&T.add(q),me){const Wt=new WR(e,h,q);Wt.setRealPlayer(Yt),_.push(Wt)}return Yt});_.forEach(j=>{Mh(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function hce(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,j.element,j))}),C.forEach(j=>_f(j,dV));const O=h_(P);return O.onDestroy(()=>{C.forEach(j=>hb(j,dV)),qp(m,t.toStyles)}),T.forEach(j=>{Mh(r,j,[]).push(O)}),O}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new eE(e.duration,e.delay)}}class WR{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new eE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>TR(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Mh(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function dD(n){return n&&1===n.nodeType}function SV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function IV(n,e,t,i,r){const o=[];t.forEach(m=>o.push(SV(m)));const a=[];i.forEach((m,_)=>{const C=new Map;m.forEach(T=>{const P=e.computeStyle(_,T,r);C.set(T,P),(!P||0==P.length)&&(_[Qf]=cce,a.push(_))}),n.set(_,C)});let h=0;return t.forEach(m=>SV(m,o[h++])),a}function TV(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=new Set(e),o=new Map;function a(h){if(!h)return 1;let m=o.get(h);if(m)return m;const _=h.parentNode;return m=t.has(_)?_:r.has(_)?1:a(_),o.set(h,m),m}return e.forEach(h=>{const m=a(h);1!==m&&t.get(m).push(h)}),t}function _f(n,e){n.classList?.add(e)}function hb(n,e){n.classList?.remove(e)}function mce(n,e,t){h_(t).onDone(()=>n.processLeaveNode(e))}function DV(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof L6?DV(i.players,e):e.push(i)}}function AV(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class hD{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new dce(e,t,i),this._timelineEngine=new ice(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const a=e+"-"+r;let h=this._triggerCache[a];if(!h){const m=[],C=FR(this._driver,o,m,[]);if(m.length)throw function ole(n,e){return new Jt(3404,!1)}();h=function Jle(n,e,t){return new ece(n,e,t)}(r,C,this._normalizer),this._triggerCache[a]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,a]=oV(i);this._timelineEngine.command(o,t,a,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[a,h]=oV(i);return this._timelineEngine.listen(a,t,h,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let yce=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&qp(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qp(this._element,this._initialStyles),this._endStyles&&(qp(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xv(this._element,this._endStyles),this._endStyles=null),qp(this._element,this._initialStyles),this._state=3)}}return n})();function XR(n){let e=null;return n.forEach((t,i)=>{(function bce(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class MV{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:mV(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class xce{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return aV(e,t)}getParentElement(e){return MR(e)}query(e,t,i){return lV(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,a=[]){const m={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(m.easing=o);const _=new Map,C=a.filter(O=>O instanceof MV);(function Dle(n,e){return 0===n||0===e})(i,r)&&C.forEach(O=>{O.currentSnapshot.forEach((j,q)=>_.set(q,j))});let T=function Sle(n){return n.length?n[0]instanceof Map?n:n.map(e=>hV(e)):[]}(t).map(O=>f_(O));T=function Ale(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,a)=>{i.has(a)||r.push(a),i.set(a,o)}),r.length)for(let o=1;o<e.length;o++){let a=e[o];r.forEach(h=>a.set(h,mV(n,h)))}}return e}(e,T,_);const P=function vce(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=XR(e[0]),e.length>1&&(i=XR(e[e.length-1]))):e instanceof Map&&(t=XR(e)),t||i?new yce(n,t,i):null}(e,T);return new MV(e,T,m,P)}}let wce=(()=>{class n extends R6{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Bs.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?O6(t):t;return kV(this._renderer,null,i,"register",[r]),new Ece(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(xv),fn(Mo))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();class Ece extends Hse{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Cce(this._id,e,t||{},this._renderer)}}class Cce{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return kV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function kV(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const PV="@.disabled";let Sce=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,a)=>{const h=a?.parentNode(o);h&&a.removeChild(h,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let C=this._rendererCache.get(o);return C||(C=new RV("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,C)),C}const a=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(a,h,t,C.name,C)};return i.data.animation.forEach(m),new Ice(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[a,h]=o;a(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(xv),fn(hD),fn(v))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();class RV{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==PV?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ice extends RV{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==PV?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Tce(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),a="";return"@"!=o.charAt(0)&&([o,a]=function Dce(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,a,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}const OV=[{provide:R6,useClass:wce},{provide:UR,useFactory:function Mce(){return new Yle}},{provide:hD,useClass:(()=>{class n extends hD{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Mo),fn(kR),fn(UR),fn(jm))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})()},{provide:xv,useFactory:function kce(n,e,t){return new Sce(n,e,t)},deps:[SP,hD,v]}],YR=[{provide:kR,useFactory:()=>new xce},{provide:Zd,useValue:"BrowserAnimations"},...OV],LV=[{provide:kR,useClass:cV},{provide:Zd,useValue:"NoopAnimations"},...OV];let Pce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?LV:YR}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({providers:YR,imports:[Kz]})}return n})();var $o=Ce(5861),sE=Ce(191),NV=Ce(3630);const FV=n=>({create:e=>Nce(n,e),dismiss:(e,t,i)=>$ce(document,e,t,n,i),getTop:()=>(0,$o.Z)(function*(){return aE(document,n)})()}),Oce=FV("ion-modal"),Lce=FV("ion-popover"),Nce=(n,e)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(n).then(()=>{const t=document.createElement(n);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},e),{hasController:!0})),$V(document).appendChild(t),new Promise(i=>(0,NV.c)(t,i))}):Promise.resolve(),$ce=(n,e,t,i,r)=>{const o=aE(n,i,r);return o?o.dismiss(e,t):Promise.reject("overlay does not exist")},aE=(n,e,t)=>{const i=((n,e)=>((n,e)=>(void 0===e&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter(t=>t.overlayIndex>0)))(n,e).filter(t=>!(n=>n.classList.contains("overlay-hidden"))(t)))(n,e);return void 0===t?i[i.length-1]:i.find(r=>r.id===t)},$V=n=>n.querySelector("ion-app")||n.body;class Hce{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const i=this.m.get(e);return void 0!==i?i:t}getBoolean(e,t=!1){const i=this.m.get(e);return void 0===i?t:"string"==typeof i?"true"===i:!!i}getNumber(e,t){const i=parseFloat(this.m.get(e));return isNaN(i)?void 0!==t?t:NaN:i}set(e,t){this.m.set(e,t)}}const p_=new Hce,jV=n=>HV(n),HV=(n=window)=>{if(typeof n>"u")return[];n.Ionic=n.Ionic||{};let e=n.Ionic.platforms;return null==e&&(e=n.Ionic.platforms=Zce(n),e.forEach(t=>n.document.documentElement.classList.add(`plt-${t}`))),e},Zce=n=>{const e=p_.get("platform");return Object.keys(ZV).filter(t=>{const i=e?.[t];return"function"==typeof i?i(n):ZV[t](n)})},QR=n=>!!(Zv(n,/iPad/i)||Zv(n,/Macintosh/i)&&mD(n)),qV=n=>Zv(n,/android|sink/i),mD=n=>sue(n,"(any-pointer:coarse)"),WV=n=>XV(n)||YV(n),XV=n=>!!(n.cordova||n.phonegap||n.PhoneGap),YV=n=>{const e=n.Capacitor;return!!e?.isNative},Zv=(n,e)=>e.test(n.navigator.userAgent),sue=(n,e)=>{var t;return null===(t=n.matchMedia)||void 0===t?void 0:t.call(n,e).matches},ZV={ipad:QR,iphone:n=>Zv(n,/iPhone/i),ios:n=>Zv(n,/iPhone|iPod/i)||QR(n),android:qV,phablet:n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),r=Math.max(e,t);return i>390&&i<520&&r>620&&r<800},tablet:n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),r=Math.max(e,t);return QR(n)||(n=>qV(n)&&!Zv(n,/mobile/i))(n)||i>460&&i<820&&r>780&&r<1400},cordova:XV,capacitor:YV,electron:n=>Zv(n,/electron/i),pwa:n=>{var e;return!!(null!==(e=n.matchMedia)&&void 0!==e&&e.call(n,"(display-mode: standalone)").matches||n.navigator.standalone)},mobile:mD,mobileweb:n=>mD(n)&&!WV(n),desktop:n=>!mD(n),hybrid:WV},gD=Le(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function KV(n){return new De(e=>{Br(n()).subscribe(e)})}function JR(){return _n((n,e)=>{let t=null;n._refCount++;const i=kn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class QV extends De{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,qt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fe;const t=this.getSubject();e.add(this.source.subscribe(kn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fe.EMPTY)}return e}refCount(){return JR()(this)}}function _D(n){return _n((e,t)=>{let i=!1;e.subscribe(kn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function JV(n=lue){return _n((e,t)=>{let i=!1;e.subscribe(kn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function lue(){return new gD}function m_(n,e){const t=arguments.length>=2;return i=>i.pipe(n?oc((r,o)=>n(r,o,i)):Se,Dd(1),t?_D(e):JV(()=>new gD))}function eO(n){return n<=0?()=>Ri:_n((e,t)=>{let i=[];e.subscribe(kn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}const Eo="primary",lE=Symbol("RouteTitle");class hue{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pb(n){return new hue(n)}function fue(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const a=i[o],h=n[o];if(a.startsWith(":"))r[a.substring(1)]=h;else if(a!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Wp(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!e8(n[r],e[r]))return!1;return!0}function e8(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function t8(n){return n.length>0?n[n.length-1]:null}function g_(n){return function aue(n){return!!n&&(n instanceof De||ue(n.lift)&&ue(n.subscribe))}(n)?n:aw(n)?Bt(Promise.resolve(n)):St(n)}const mue={exact:function r8(n,e,t){if(!Kv(n.segments,e.segments)||!vD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!r8(n.children[i],e.children[i],t))return!1;return!0},subset:o8},n8={exact:function gue(n,e){return Wp(n,e)},subset:function _ue(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>e8(n[t],e[t]))},ignored:()=>!0};function i8(n,e,t){return mue[t.paths](n.root,e.root,t.matrixParams)&&n8[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function o8(n,e,t){return s8(n,e,e.segments,t)}function s8(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Kv(r,t)||e.hasChildren()||!vD(r,t,i))}if(n.segments.length===t.length){if(!Kv(n.segments,t)||!vD(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!o8(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Kv(n.segments,r)&&vD(n.segments,r,i)&&n.children[Eo])&&s8(n.children[Eo],e,o,i)}}function vD(n,e,t){return e.every((i,r)=>n8[t](n[r].parameters,i.parameters))}class mb{constructor(e=new Ha([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pb(this.queryParams)),this._queryParamMap}toString(){return bue.serialize(this)}}class Ha{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yD(this)}}class cE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pb(this.parameters)),this._parameterMap}toString(){return c8(this)}}function Kv(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let gb=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return new tO},providedIn:"root"})}return n})();class tO{parse(e){const t=new kue(e);return new mb(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uE(e.root,!0)}`,i=function Eue(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${bD(t)}=${bD(r)}`).join("&"):`${bD(t)}=${bD(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function xue(n){return encodeURI(n)}(e.fragment)}`:""}`}}const bue=new tO;function yD(n){return n.segments.map(e=>c8(e)).join("/")}function uE(n,e){if(!n.hasChildren())return yD(n);if(e){const t=n.children[Eo]?uE(n.children[Eo],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Eo&&i.push(`${r}:${uE(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function yue(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Eo&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Eo&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Eo?[uE(n.children[Eo],!1)]:[`${r}:${uE(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Eo]?`${yD(n)}/${t[0]}`:`${yD(n)}/(${t.join("//")})`}}function a8(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bD(n){return a8(n).replace(/%3B/gi,";")}function nO(n){return a8(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xD(n){return decodeURIComponent(n)}function l8(n){return xD(n.replace(/\+/g,"%20"))}function c8(n){return`${nO(n.path)}${function wue(n){return Object.keys(n).map(e=>`;${nO(e)}=${nO(n[e])}`).join("")}(n.parameters)}`}const Cue=/^[^\/()?;#]+/;function iO(n){const e=n.match(Cue);return e?e[0]:""}const Sue=/^[^\/()?;=#]+/,Tue=/^[^=?&#]+/,Aue=/^[^&#]+/;class kue{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ha([],{}):new Ha([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Eo]=new Ha(e,t)),i}parseSegment(){const e=iO(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Jt(4009,!1);return this.capture(e),new cE(xD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Iue(n){const e=n.match(Sue);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=iO(this.remaining);r&&(i=r,this.capture(i))}e[xD(t)]=xD(i)}parseQueryParam(e){const t=function Due(n){const e=n.match(Tue);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const a=function Mue(n){const e=n.match(Aue);return e?e[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const r=l8(t),o=l8(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=iO(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Jt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Eo);const a=this.parseChildren();t[o]=1===Object.keys(a).length?a[Eo]:new Ha([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Jt(4011,!1)}}function u8(n){return n.segments.length>0?new Ha([],{[Eo]:n}):n}function d8(n){const e={};for(const i of Object.keys(n.children)){const o=d8(n.children[i]);if(i===Eo&&0===o.segments.length&&o.hasChildren())for(const[a,h]of Object.entries(o.children))e[a]=h;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function Pue(n){if(1===n.numberOfChildren&&n.children[Eo]){const e=n.children[Eo];return new Ha(n.segments.concat(e.segments),e.children)}return n}(new Ha(n.segments,e))}function Qv(n){return n instanceof mb}function h8(n){let e;const r=u8(function t(o){const a={};for(const m of o.children){const _=t(m);a[m.outlet]=_}const h=new Ha(o.url,a);return o===n&&(e=h),h}(n.root));return e??r}function f8(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return rO(r,r,r,t,i);const o=function Oue(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new m8(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([m,_])=>{h[m]="string"==typeof _?_.split("/"):_}),[...r,{outlets:h}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===a?(o.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,o]},[]);return new m8(t,e,i)}(e);if(o.toRoot())return rO(r,r,new Ha([],{}),t,i);const a=function Lue(n,e,t){if(n.isAbsolute)return new ED(e,!0,0);if(!t)return new ED(e,!1,NaN);if(null===t.parent)return new ED(t,!0,0);const i=wD(n.commands[0])?0:1;return function Nue(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Jt(4005,!1);r=i.segments.length}return new ED(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),h=a.processChildren?hE(a.segmentGroup,a.index,o.commands):g8(a.segmentGroup,a.index,o.commands);return rO(r,a.segmentGroup,h,t,i)}function wD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dE(n){return"object"==typeof n&&null!=n&&n.outlets}function rO(n,e,t,i,r){let a,o={};i&&Object.entries(i).forEach(([m,_])=>{o[m]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),a=n===e?t:p8(n,e,t);const h=u8(d8(a));return new mb(h,o,r)}function p8(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:p8(o,e,t)}),new Ha(n.segments,i)}class m8{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&wD(i[0]))throw new Jt(4003,!1);const r=i.find(dE);if(r&&r!==t8(i))throw new Jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ED{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function g8(n,e,t){if(n||(n=new Ha([],{})),0===n.segments.length&&n.hasChildren())return hE(n,e,t);const i=function Bue(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const a=n.segments[r],h=t[i];if(dE(h))break;const m=`${h}`,_=i<t.length-1?t[i+1]:null;if(r>0&&void 0===m)break;if(m&&_&&"object"==typeof _&&void 0===_.outlets){if(!v8(m,_,a))return o;i+=2}else{if(!v8(m,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Ha(n.segments.slice(0,i.pathIndex),{});return o.children[Eo]=new Ha(n.segments.slice(i.pathIndex),n.children),hE(o,0,r)}return i.match&&0===r.length?new Ha(n.segments,{}):i.match&&!n.hasChildren()?oO(n,e,t):i.match?hE(n,0,r):oO(n,e,t)}function hE(n,e,t){if(0===t.length)return new Ha(n.segments,{});{const i=function Fue(n){return dE(n[0])?n[0].outlets:{[Eo]:n}}(t),r={};if(Object.keys(i).some(o=>o!==Eo)&&n.children[Eo]&&1===n.numberOfChildren&&0===n.children[Eo].segments.length){const o=hE(n.children[Eo],e,t);return new Ha(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=g8(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{void 0===i[o]&&(r[o]=a)}),new Ha(n.segments,r)}}function oO(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(dE(o)){const m=zue(o.outlets);return new Ha(i,m)}if(0===r&&wD(t[0])){i.push(new cE(n.segments[e].path,_8(t[0]))),r++;continue}const a=dE(o)?o.outlets[Eo]:`${o}`,h=r<t.length-1?t[r+1]:null;a&&h&&wD(h)?(i.push(new cE(a,_8(h))),r+=2):(i.push(new cE(a,{})),r++)}return new Ha(i,{})}function zue(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=oO(new Ha([],{}),0,i))}),e}function _8(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function v8(n,e,t){return n==t.path&&Wp(e,t.parameters)}const fE="imperative";class Xp{constructor(e,t){this.id=e,this.url=t}}class pE extends Xp{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Km extends Xp{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mE extends Xp{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _b extends Xp{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class CD extends Xp{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class y8 extends Xp{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ue extends Xp{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vue extends Xp{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uue extends Xp{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jue extends Xp{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gue{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hue{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class que{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wue{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xue{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yue{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b8{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sO{}class aO{constructor(e){this.url=e}}class Zue{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Jv,this.attachRef=null}}let Jv=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Zue,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class x8{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lO(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=lO(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cO(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return cO(e,this._root).map(t=>t.value)}}function lO(n,e){if(n===e.value)return e;for(const t of e.children){const i=lO(n,t);if(i)return i}return null}function cO(n,e){if(n===e.value)return[e];for(const t of e.children){const i=cO(n,t);if(i.length)return i.unshift(e),i}return[]}class Qm{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vb(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class w8 extends x8{constructor(e,t){super(e),this.snapshot=t,uO(this,e)}toString(){return this.snapshot.toString()}}function E8(n,e){const t=function Kue(n,e){const a=new SD([],{},{},"",{},Eo,e,null,{});return new S8("",new Qm(a,[]))}(0,e),i=new tt([new cE("",{})]),r=new tt({}),o=new tt({}),a=new tt({}),h=new tt(""),m=new vf(i,r,a,h,o,Eo,e,t.root);return m.snapshot=t.root,new w8(new Qm(m,[]),t)}class vf{constructor(e,t,i,r,o,a,h,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=h,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(Vt(_=>_[lE]))??St(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Vt(e=>pb(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Vt(e=>pb(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C8(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function Que(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class SD{get title(){return this.data?.[lE]}constructor(e,t,i,r,o,a,h,m,_){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=h,this.routeConfig=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class S8 extends x8{constructor(e,t){super(t),this.url=e,uO(this,t)}toString(){return I8(this._root)}}function uO(n,e){e.value._routerState=n,e.children.forEach(t=>uO(n,t))}function I8(n){const e=n.children.length>0?` { ${n.children.map(I8).join(", ")} } `:"";return`${n.value}${e}`}function dO(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wp(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wp(e.params,t.params)||n.paramsSubject.next(t.params),function pue(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wp(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Wp(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hO(n,e){const t=Wp(n.params,e.params)&&function vue(n,e){return Kv(n,e)&&n.every((t,i)=>Wp(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hO(n.parent,e.parent))}let fO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Eo,this.activateEvents=new l,this.deactivateEvents=new l,this.attachEvents=new l,this.detachEvents=new l,this.parentContexts=ti(Jv),this.location=ti(Dh),this.changeDetector=ti(Ni),this.environmentInjector=ti(Rl),this.inputBinder=ti(ID,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Jt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Jt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Jt(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Jt(4013,!1);this._activatedRoute=t;const r=this.location,a=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new Jue(t,h,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:m,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=On({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ki]})}return n})();class Jue{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===vf?this.route:e===Jv?this.childContexts:this.parent.get(e,t)}}const ID=new xi("");let T8=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=jw([i.queryParams,i.params,i.data]).pipe(ge(([o,a,h],m)=>(h={...o,...a,...h},0===m?St(h):Promise.resolve(h)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const a=hz(i.component);if(a)for(const{templateName:h}of a.inputs)t.activatedComponentRef.setInput(h,o[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();function gE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function tde(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return gE(n,i,r);return gE(n,i)})}(n,e,t);return new Qm(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(h=>gE(n,h)),a}}const i=function nde(n){return new vf(new tt(n.url),new tt(n.params),new tt(n.queryParams),new tt(n.fragment),new tt(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>gE(n,o));return new Qm(i,r)}}const pO="ngNavigationCancelingError";function D8(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Qv(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=A8(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function A8(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[pO]=!0,i.cancellationCode=e,t&&(i.url=t),i}function M8(n){return n&&n[pO]}let k8=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=qn({type:n,selectors:[["ng-component"]],standalone:!0,features:[U3],decls:1,vars:0,template:function(i,r){1&i&&oo(0,"router-outlet")},dependencies:[fO],encapsulation:2})}return n})();function mO(n){const e=n.children&&n.children.map(mO),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Eo&&(t.component=k8),t}function Jf(n){return n.outlet||Eo}function _E(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ude{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),dO(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=vb(t);e.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=vb(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],r);if(i&&i.outlet){const a=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=vb(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=vb(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Yue(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wue(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(dO(r),r===o)if(r.component){const a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(h.contexts),a.attachRef=h.componentRef,a.route=h.route.value,a.outlet&&a.outlet.attach(h.componentRef,h.route.value),dO(h.route.value),this.activateChildRoutes(e,null,a.children)}else{const h=_E(r.snapshot);a.attachRef=null,a.route=r,a.injector=h,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}}class P8{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class TD{constructor(e,t){this.component=e,this.route=t}}function dde(n,e,t){const i=n._root;return vE(i,e?e._root:null,t,[i.value])}function yb(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function ll(n){return null!==Gc(n)}(n)?e.get(n):n:i}function vE(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=vb(e);return n.children.forEach(a=>{(function fde(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,a=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const m=function pde(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Kv(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Kv(n.url,e.url)||!Wp(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hO(n,e)||!Wp(n.queryParams,e.queryParams);default:return!hO(n,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new P8(i)):(o.data=a.data,o._resolvedData=a._resolvedData),vE(n,e,o.component?h?h.children:null:t,i,r),m&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new TD(h.outlet.component,a))}else a&&yE(e,h,r),r.canActivateChecks.push(new P8(i)),vE(n,null,o.component?h?h.children:null:t,i,r)})(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,h])=>yE(h,t.getContext(a),r)),r}function yE(n,e,t){const i=vb(n),r=n.value;Object.entries(i).forEach(([o,a])=>{yE(a,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new TD(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function bE(n){return"function"==typeof n}function R8(n){return n instanceof gD||"EmptyError"===n?.name}const DD=Symbol("INITIAL_VALUE");function bb(){return ge(n=>jw(n.map(e=>e.pipe(Dd(1),FT(DD)))).pipe(Vt(e=>{for(const t of e)if(!0!==t){if(t===DD)return DD;if(!1===t||t instanceof mb)return t}return!0}),oc(e=>e!==DD),Dd(1)))}function O8(n){return function Y(...n){return Ge(n)}(Hl(e=>{if(Qv(e))throw D8(0,e)}),Vt(e=>!0===e))}class AD{constructor(e){this.segmentGroup=e||null}}class L8{constructor(e){this.urlTree=e}}function xb(n){return cb(new AD(n))}function N8(n){return cb(new L8(n))}class Ode{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new Jt(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return St(i);if(r.numberOfChildren>1||!r.children[Eo])return cb(new Jt(4e3,!1));r=r.children[Eo]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new mb(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);i[r]=t[h]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let a={};return Object.entries(t.children).forEach(([h,m])=>{a[h]=this.createSegmentGroup(e,m,i,r)}),new Ha(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Jt(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const gO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lde(n,e,t,i,r){const o=_O(n,e,t);return o.matched?(i=function rde(n,e){return n.providers&&!n._injector&&(n._injector=Tk(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function kde(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?St(r.map(a=>{const h=yb(a,n);return g_(function bde(n){return n&&bE(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(bb(),O8()):St(!0)}(i,e,t).pipe(Vt(a=>!0===a?o:{...gO}))):St(o)}function _O(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gO}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||fue)(t,n,e);if(!r)return{...gO};const o={};Object.entries(r.posParams??{}).forEach(([h,m])=>{o[h]=m.path});const a=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function F8(n,e,t,i){return t.length>0&&function Bde(n,e,t){return t.some(i=>MD(n,e,i)&&Jf(i)!==Eo)}(n,t,i)?{segmentGroup:new Ha(e,Fde(i,new Ha(t,n.children))),slicedSegments:[]}:0===t.length&&function zde(n,e,t){return t.some(i=>MD(n,e,i))}(n,t,i)?{segmentGroup:new Ha(n.segments,Nde(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ha(n.segments,n.children),slicedSegments:t}}function Nde(n,e,t,i,r){const o={};for(const a of i)if(MD(n,t,a)&&!r[Jf(a)]){const h=new Ha([],{});o[Jf(a)]=h}return{...r,...o}}function Fde(n,e){const t={};t[Eo]=e;for(const i of n)if(""===i.path&&Jf(i)!==Eo){const r=new Ha([],{});t[Jf(i)]=r}return t}function MD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class jde{constructor(e,t,i,r,o,a,h){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new Ode(this.urlSerializer,this.urlTree)}noMatchError(e){return new Jt(4002,!1)}recognize(){const e=F8(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Eo).pipe(d_(t=>{if(t instanceof L8)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof AD?this.noMatchError(t):t}),Vt(t=>{const i=new SD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Eo,this.rootComponentType,null,{}),r=new Qm(i,t),o=new S8("",r),a=function Rue(n,e,t=null,i=null){return f8(h8(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Eo).pipe(d_(i=>{throw i instanceof AD?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=C8(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return Bt(r).pipe(tb(o=>{const a=i.children[o],h=function lde(n,e){const t=n.filter(i=>Jf(i)===e);return t.push(...n.filter(i=>Jf(i)!==e)),t}(t,o);return this.processSegmentGroup(e,h,a,o)}),function uue(n,e){return _n(function cue(n,e,t,i,r){return(o,a)=>{let h=t,m=e,_=0;o.subscribe(kn(a,C=>{const T=_++;m=h?n(m,C,T):(h=!0,C),i&&a.next(m)},r&&(()=>{h&&a.next(m),a.complete()})))}}(n,e,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),_D(null),function due(n,e){const t=arguments.length>=2;return i=>i.pipe(n?oc((r,o)=>n(r,o,i)):Se,eO(1),t?_D(e):JV(()=>new gD))}(),zn(o=>{if(null===o)return xb(i);const a=B8(o);return function Gde(n){n.sort((e,t)=>e.value.outlet===Eo?-1:t.value.outlet===Eo?1:e.value.outlet.localeCompare(t.value.outlet))}(a),St(a)}))}processSegment(e,t,i,r,o,a){return Bt(t).pipe(tb(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,i,r,o,a).pipe(d_(m=>{if(m instanceof AD)return St(null);throw m}))),m_(h=>!!h),d_(h=>{if(R8(h))return function Vde(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?St([]):xb(i);throw h}))}processSegmentAgainstRoute(e,t,i,r,o,a,h){return function $de(n,e,t,i){return!!(Jf(n)===i||i!==Eo&&MD(e,t,n))&&("**"===n.path||_O(e,n,t).matched)}(i,r,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,a,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a):xb(r):xb(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?N8(o):this.applyRedirects.lineralizeSegments(i,o).pipe(zn(a=>{const h=new Ha(a,{});return this.processSegment(e,t,h,a,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a){const{matched:h,consumedSegments:m,remainingSegments:_,positionalParamSegments:C}=_O(t,r,o);if(!h)return xb(t);const T=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,C);return r.redirectTo.startsWith("/")?N8(T):this.applyRedirects.lineralizeSegments(r,T).pipe(zn(P=>this.processSegment(e,i,t,P.concat(_),a,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let h;if("**"===i.path){const m=r.length>0?t8(r).parameters:{};h=St({snapshot:new SD(r,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,z8(i),Jf(i),i.component??i._loadedComponent??null,i,$8(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else h=Lde(t,i,r,e).pipe(Vt(({matched:m,consumedSegments:_,remainingSegments:C,parameters:T})=>m?{snapshot:new SD(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,z8(i),Jf(i),i.component??i._loadedComponent??null,i,$8(i)),consumedSegments:_,remainingSegments:C}:null));return h.pipe(ge(m=>null===m?xb(t):this.getChildConfig(e=i._injector??e,i,r).pipe(ge(({routes:_})=>{const C=i._loadedInjector??e,{snapshot:T,consumedSegments:P,remainingSegments:O}=m,{segmentGroup:j,slicedSegments:q}=F8(t,P,O,_);if(0===q.length&&j.hasChildren())return this.processChildren(C,_,j).pipe(Vt(me=>null===me?null:[new Qm(T,me)]));if(0===_.length&&0===q.length)return St([new Qm(T,[])]);const _e=Jf(i)===o;return this.processSegment(C,_,j,q,_e?Eo:o,!0).pipe(Vt(me=>[new Qm(T,me)]))}))))}getChildConfig(e,t,i){return t.children?St({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?St({routes:t._loadedRoutes,injector:t._loadedInjector}):function Mde(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?St(!0):St(r.map(a=>{const h=yb(a,n);return g_(function gde(n){return n&&bE(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(bb(),O8())}(e,t,i).pipe(zn(r=>r?this.configLoader.loadChildren(e,t).pipe(Hl(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Rde(n){return cb(A8(!1,3))}())):St({routes:[],injector:e})}}function Hde(n){const e=n.value.routeConfig;return e&&""===e.path}function B8(n){const e=[],t=new Set;for(const i of n){if(!Hde(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=B8(i.children);e.push(new Qm(i.value,r))}return e.filter(i=>!t.has(i))}function z8(n){return n.data||{}}function $8(n){return n.resolve||{}}function V8(n){return"string"==typeof n.title||null===n.title}function vO(n){return ge(e=>{const t=n(e);return t?Bt(t).pipe(Vt(()=>e)):St(e)})}const wb=new xi("ROUTES");let yO=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ti(k4)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return St(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=g_(t.loadComponent()).pipe(Vt(U8),Hl(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),nb(()=>{this.componentLoaders.delete(t)})),r=new QV(i,()=>new et).pipe(JR());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return St({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function Qde(n,e,t,i){return g_(n.loadChildren()).pipe(Vt(U8),zn(r=>r instanceof $3||Array.isArray(r)?St(r):Bt(e.compileModuleAsync(r))),Vt(r=>{i&&i(n);let o,a,h=!1;return Array.isArray(r)?(a=r,!0):(o=r.create(t).injector,a=o.get(wb,[],{optional:!0,self:!0}).flat()),{routes:a.map(mO),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(nb(()=>{this.childrenLoaders.delete(i)})),a=new QV(o,()=>new et).pipe(JR());return this.childrenLoaders.set(i,a),a}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U8(n){return function Jde(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let kD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=ti(yO),this.environmentInjector=ti(Rl),this.urlSerializer=ti(gb),this.rootContexts=ti(Jv),this.inputBindingEnabled=null!==ti(ID,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>St(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Hue(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Gue(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new tt({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fE,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oc(o=>0!==o.id),Vt(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),ge(o=>{this.currentTransition=o;let a=!1,h=!1;return St(o).pipe(Hl(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ge(m=>{const _=m.currentBrowserUrl.toString(),C=!t.navigated||m.extractedUrl.toString()!==_||_!==m.currentUrlTree.toString();if(!C&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const P="";return this.events.next(new _b(m.id,this.urlSerializer.serialize(m.rawUrl),P,0)),m.resolve(null),Ri}if(t.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return St(m).pipe(ge(P=>{const O=this.transitions?.getValue();return this.events.next(new pE(P.id,this.urlSerializer.serialize(P.extractedUrl),P.source,P.restoredState)),O!==this.transitions?.getValue()?Ri:Promise.resolve(P)}),function qde(n,e,t,i,r,o){return zn(a=>function Ude(n,e,t,i,r,o,a="emptyOnly"){return new jde(n,e,t,i,r,a,o).recognize()}(n,e,t,i,a.extractedUrl,r,o).pipe(Vt(({state:h,tree:m})=>({...a,targetSnapshot:h,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Hl(P=>{o.targetSnapshot=P.targetSnapshot,o.urlAfterRedirects=P.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects};const O=new y8(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(O)}));if(C&&t.urlHandlingStrategy.shouldProcessUrl(m.currentRawUrl)){const{id:P,extractedUrl:O,source:j,restoredState:q,extras:_e}=m,me=new pE(P,this.urlSerializer.serialize(O),j,q);this.events.next(me);const te=E8(0,this.rootComponentType).snapshot;return this.currentTransition=o={...m,targetSnapshot:te,urlAfterRedirects:O,extras:{..._e,skipLocationChange:!1,replaceUrl:!1}},St(o)}{const P="";return this.events.next(new _b(m.id,this.urlSerializer.serialize(m.extractedUrl),P,1)),m.resolve(null),Ri}}),Hl(m=>{const _=new $ue(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),Vt(m=>(this.currentTransition=o={...m,guards:dde(m.targetSnapshot,m.currentSnapshot,this.rootContexts)},o)),function wde(n,e){return zn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return 0===a.length&&0===o.length?St({...t,guardsResult:!0}):function Ede(n,e,t,i){return Bt(n).pipe(zn(r=>function Ade(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?St(o.map(h=>{const m=_E(e)??r,_=yb(h,m);return g_(function yde(n){return n&&bE(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,i):m.runInContext(()=>_(n,e,t,i))).pipe(m_())})).pipe(bb()):St(!0)}(r.component,r.route,t,e,i)),m_(r=>!0!==r,!0))}(a,i,r,n).pipe(zn(h=>h&&function mde(n){return"boolean"==typeof n}(h)?function Cde(n,e,t,i){return Bt(e).pipe(tb(r=>Gw(function Ide(n,e){return null!==n&&e&&e(new que(n)),St(!0)}(r.route.parent,i),function Sde(n,e){return null!==n&&e&&e(new Xue(n)),St(!0)}(r.route,i),function Dde(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>function hde(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>KV(()=>St(a.guards.map(m=>{const _=_E(a.node)??t,C=yb(m,_);return g_(function vde(n){return n&&bE(n.canActivateChild)}(C)?C.canActivateChild(i,n):_.runInContext(()=>C(i,n))).pipe(m_())})).pipe(bb())));return St(o).pipe(bb())}(n,r.path,t),function Tde(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return St(!0);const r=i.map(o=>KV(()=>{const a=_E(e)??t,h=yb(o,a);return g_(function _de(n){return n&&bE(n.canActivate)}(h)?h.canActivate(e,n):a.runInContext(()=>h(e,n))).pipe(m_())}));return St(r).pipe(bb())}(n,r.route,t))),m_(r=>!0!==r,!0))}(i,o,n,e):St(h)),Vt(h=>({...t,guardsResult:h})))})}(this.environmentInjector,m=>this.events.next(m)),Hl(m=>{if(o.guardsResult=m.guardsResult,Qv(m.guardsResult))throw D8(0,m.guardsResult);const _=new Vue(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(_)}),oc(m=>!!m.guardsResult||(this.cancelNavigationTransition(m,"",3),!1)),vO(m=>{if(m.guards.canActivateChecks.length)return St(m).pipe(Hl(_=>{const C=new Uue(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}),ge(_=>{let C=!1;return St(_).pipe(function Wde(n,e){return zn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return St(t);let o=0;return Bt(r).pipe(tb(a=>function Xde(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!V8(r)&&(o[lE]=r.title),function Yde(n,e,t,i){const r=function Zde(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return St({});const o={};return Bt(r).pipe(zn(a=>function Kde(n,e,t,i){const r=_E(e)??i,o=yb(n,r);return g_(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[a],e,t,i).pipe(m_(),Hl(h=>{o[a]=h}))),eO(1),YT(o),d_(a=>R8(a)?Ri:cb(a)))}(o,n,e,i).pipe(Vt(a=>(n._resolvedData=a,n.data=C8(n,t).resolve,r&&V8(r)&&(n.data[lE]=r.title),null)))}(a.route,i,n,e)),Hl(()=>o++),eO(1),zn(a=>o===r.length?St(t):Ri))})}(t.paramsInheritanceStrategy,this.environmentInjector),Hl({next:()=>C=!0,complete:()=>{C||this.cancelNavigationTransition(_,"",2)}}))}),Hl(_=>{const C=new jue(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}))}),vO(m=>{const _=C=>{const T=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(C.routeConfig).pipe(Hl(P=>{C.component=P}),Vt(()=>{})));for(const P of C.children)T.push(..._(P));return T};return jw(_(m.targetSnapshot.root)).pipe(_D(),Dd(1))}),vO(()=>this.afterPreactivation()),Vt(m=>{const _=function ede(n,e,t){const i=gE(n,e._root,t?t._root:void 0);return new w8(i,e)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return this.currentTransition=o={...m,targetRouterState:_},o}),Hl(()=>{this.events.next(new sO)}),((n,e,t,i)=>Vt(r=>(new ude(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m),this.inputBindingEnabled),Dd(1),Hl({next:m=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Km(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects))),t.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{a=!0}}),Cu(this.transitionAbortSubject.pipe(Hl(m=>{throw m}))),nb(()=>{a||h||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),d_(m=>{if(h=!0,M8(m))this.events.next(new mE(o.id,this.urlSerializer.serialize(o.extractedUrl),m.message,m.cancellationCode)),function ide(n){return M8(n)&&Qv(n.url)}(m)?this.events.next(new aO(m.url)):o.resolve(!1);else{this.events.next(new CD(o.id,this.urlSerializer.serialize(o.extractedUrl),m,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(m))}catch(_){o.reject(_)}}return Ri}))}))}cancelNavigationTransition(t,i,r){const o=new mE(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j8(n){return n!==fE}let G8=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Eo);return i}getResolvedTitleForRoute(t){return t.data[lE]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return ti(ehe)},providedIn:"root"})}return n})(),ehe=(()=>{class n extends G8{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Qz))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),the=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return ti(ihe)},providedIn:"root"})}return n})();class nhe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ihe=(()=>{class n extends nhe{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=$s(n)))(r||n)}}();static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const PD=new xi("",{providedIn:"root",factory:()=>({})});let rhe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:function(){return ti(ohe)},providedIn:"root"})}return n})(),ohe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xE=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(xE||{});function H8(n,e){n.events.pipe(oc(t=>t instanceof Km||t instanceof mE||t instanceof CD||t instanceof _b),Vt(t=>t instanceof Km||t instanceof _b?xE.COMPLETE:t instanceof mE&&(0===t.code||1===t.code)?xE.REDIRECTING:xE.FAILED),oc(t=>t!==xE.REDIRECTING),Dd(1)).subscribe(()=>{e()})}function she(n){throw n}function ahe(n,e,t){return e.parse("/")}const lhe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},che={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sl=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ti(M4),this.isNgZoneEnabled=!1,this._events=new et,this.options=ti(PD,{optional:!0})||{},this.pendingTasks=ti(qI),this.errorHandler=this.options.errorHandler||she,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ahe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ti(rhe),this.routeReuseStrategy=ti(the),this.titleStrategy=ti(G8),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ti(wb,{optional:!0})?.flat()??[],this.navigationTransitions=ti(kD),this.urlSerializer=ti(gb),this.location=ti(J0),this.componentInputBindingEnabled=!!ti(ID,{optional:!0}),this.eventsSubscription=new fe,this.isNgZoneEnabled=ti(v)instanceof v&&v.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new mb,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=E8(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(q8(i)&&this._events.next(i));if(i instanceof pE)j8(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof _b)this.rawUrlTree=r.rawUrl;else if(i instanceof y8){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof sO)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof mE)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof aO){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),a={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||j8(r.source)};this.scheduleNavigation(o,fE,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof CD&&this.restoreHistory(r,!0),i instanceof Km&&(this.navigated=!0),q8(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),fE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){const m={...r};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:h,preserveFragment:m}=i,_=m?this.currentUrlTree.fragment:a;let T,C=null;switch(h){case"merge":C={...this.currentUrlTree.queryParams,...o};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=o||null}null!==C&&(C=this.removeEmptyProps(C));try{T=h8(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return f8(T,t,C,_??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Qv(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,fE,null,i)}navigate(t,i={skipLocationChange:!1}){return function uhe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new Jt(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...lhe}:!1===i?{...che}:i,Qv(t))return i8(this.currentUrlTree,t,r);const o=this.parseUrl(t);return i8(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let h,m,_;a?(h=a.resolve,m=a.reject,_=a.promise):_=new Promise((T,P)=>{h=T,m=P});const C=this.pendingTasks.add();return H8(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:h,reject:m,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(T=>Promise.reject(T))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",a)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q8(n){return!(n instanceof sO||n instanceof aO)}let Jm=(()=>{class n{constructor(t,i,r,o,a,h){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new et,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof Km&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,o,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||o||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function eI(n,e,t){return function _0(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?A1:Rp}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(re(Sl),re(vf),Vf("tabindex"),re(td),re(Kn),re(Hm))};static#t=this.\u0275dir=On({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&So("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&i&&pl("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Q0],skipLocationChange:["skipLocationChange","skipLocationChange",Q0],replaceUrl:["replaceUrl","replaceUrl",Q0],routerLink:"routerLink"},standalone:!0,features:[rB,Ki]})}return n})();class W8{}let fhe=(()=>{class n{constructor(t,i,r,o,a){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(oc(t=>t instanceof Km),tb(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Tk(o.providers,t,`Route: ${o.path}`));const a=o._injector??t,h=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(h,o.children??o._loadedRoutes))}return Bt(r).pipe(_r())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):St(null);const o=r.pipe(zn(a=>null===a?St(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return i.loadComponent&&!i._loadedComponent?Bt([o,this.loader.loadComponent(i)]).pipe(_r()):o})}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Sl),fn(k4),fn(Rl),fn(W8),fn(yO))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const bO=new xi("");let X8=(()=>{class n{constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Km?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _b&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof b8&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new b8(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){tl()};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac})}return n})();function eg(n,e){return{\u0275kind:n,\u0275providers:e}}function Z8(){const n=ti(Vs);return e=>{const t=n.get(jm);if(e!==t.components[0])return;const i=n.get(Sl),r=n.get(K8);1===n.get(xO)&&i.initialNavigation(),n.get(Q8,null,er.Optional)?.setUpPreloading(),n.get(bO,null,er.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const K8=new xi("",{factory:()=>new et}),xO=new xi("",{providedIn:"root",factory:()=>1}),Q8=new xi("");function _he(n){return eg(0,[{provide:Q8,useExisting:fhe},{provide:W8,useExisting:n}])}const J8=new xi("ROUTER_FORROOT_GUARD"),yhe=[J0,{provide:gb,useClass:tO},Sl,Jv,{provide:vf,useFactory:function Y8(n){return n.routerState.root},deps:[Sl]},yO,[]];function bhe(){return new B4("Router",Sl)}let eU=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[yhe,[],{provide:wb,multi:!0,useValue:t},{provide:J8,useFactory:Che,deps:[[Sl,new Sm,new Lg]]},{provide:PD,useValue:i||{}},i?.useHash?{provide:Hm,useClass:VJ}:{provide:Hm,useClass:mz},{provide:bO,useFactory:()=>{const n=ti(ate),e=ti(v),t=ti(PD),i=ti(kD),r=ti(gb);return t.scrollOffset&&n.setOffset(t.scrollOffset),new X8(r,i,n,e,t)}},i?.preloadingStrategy?_he(i.preloadingStrategy).\u0275providers:[],{provide:B4,multi:!0,useFactory:bhe},i?.initialNavigation?She(i):[],i?.bindToComponentInputs?eg(8,[T8,{provide:ID,useExisting:T8}]).\u0275providers:[],[{provide:tU,useFactory:Z8},{provide:Wk,multi:!0,useExisting:tU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:wb,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(J8,8))};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({})}return n})();function Che(n){return"guarded"}function She(n){return["disabled"===n.initialNavigation?eg(3,[{provide:HI,multi:!0,useFactory:()=>{const e=ti(Sl);return()=>{e.setUpLocationChangeListener()}}},{provide:xO,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?eg(2,[{provide:xO,useValue:0},{provide:HI,multi:!0,deps:[Vs],useFactory:e=>{const t=e.get(zJ,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Sl),o=e.get(K8);H8(r,()=>{i(!0)}),e.get(kD).afterPreactivation=()=>(i(!0),o.closed?St(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const tU=new xi("");class nU{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,i){return this.ctrl.dismiss(e,t,i)}getTop(){return this.ctrl.getTop()}}class iU{constructor(e={}){this.data=e}get(e){return this.data[e]}}let wE=(()=>{class n{constructor(){this.zone=ti(v),this.applicationRef=ti(jm)}create(t,i,r){return new Dhe(t,i,this.applicationRef,this.zone,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=mi({token:n,factory:n.\u0275fac}),n})();class Dhe{constructor(e,t,i,r,o){this.environmentInjector=e,this.injector=t,this.applicationRef=i,this.zone=r,this.elementReferenceKey=o,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,i,r){return this.zone.run(()=>new Promise(o=>{const a={...i};void 0!==this.elementReferenceKey&&(a[this.elementReferenceKey]=e),o(Ahe(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,t,a,r,this.elementReferenceKey))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(i=>{const r=this.elRefMap.get(t);if(r){r.destroy(),this.elRefMap.delete(t);const o=this.elEventsMap.get(t);o&&(o(),this.elEventsMap.delete(t))}i()}))}}const Ahe=(n,e,t,i,r,o,a,h,m,_,C)=>{const P=function NJ(n,e){const t=go(n),i=e.elementInjector||Np();return new nw(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}(h,{environmentInjector:e,elementInjector:Vs.create({providers:khe(m),parent:t})}),O=P.instance,j=P.location.nativeElement;if(m&&(C&&void 0!==O[C]&&console.error(`[Ionic Error]: ${C} is a reserved property when using ${a.tagName.toLowerCase()}. Rename or remove the "${C}" property from ${h.name}.`),Object.assign(O,m)),_)for(const _e of _)j.classList.add(_e);const q=rU(n,O,j);return a.appendChild(j),i.attachView(P.hostView),r.set(j,P),o.set(j,q),j},Mhe=[sE.L,sE.a,sE.b,sE.c,sE.d],rU=(n,e,t)=>n.run(()=>{const i=Mhe.filter(r=>"function"==typeof e[r]).map(r=>{const o=a=>e[r](a.detail);return t.addEventListener(r,o),()=>t.removeEventListener(r,o)});return()=>i.forEach(r=>r())}),oU=new xi("NavParamsToken"),khe=n=>[{provide:oU,useValue:n},{provide:iU,useFactory:Phe,deps:[oU]}],Phe=n=>new iU(n);let Rhe=(()=>{class n extends nU{constructor(){super(Oce),this.angularDelegate=ti(wE),this.injector=ti(Vs),this.environmentInjector=ti(Rl)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=mi({token:n,factory:n.\u0275fac}),n})(),Ohe=(()=>{class n extends nU{constructor(){super(Lce),this.angularDelegate=ti(wE),this.injector=ti(Vs),this.environmentInjector=ti(Rl)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=mi({token:n,factory:n.\u0275fac}),n})(),Lhe=(()=>{class n{constructor(t,i){this.doc=t,this.backButton=new et,this.keyboardDidShow=new et,this.keyboardDidHide=new et,this.pause=new et,this.resume=new et,this.resize=new et,i.run(()=>{let r;this.win=t.defaultView,this.backButton.subscribeWithPriority=function(o,a){return this.subscribe(h=>h.register(o,m=>i.run(()=>a(m))))},Eb(this.pause,t,"pause"),Eb(this.resume,t,"resume"),Eb(this.backButton,t,"ionBackButton"),Eb(this.resize,this.win,"resize"),Eb(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Eb(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(o=>{r=o}),this.win?.cordova?t.addEventListener("deviceready",()=>{r("cordova")},{once:!0}):r("dom")})}is(t){return((n,e)=>("string"==typeof n&&(e=n,n=void 0),jV(n).includes(e)))(this.win,t)}platforms(){return jV(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(t){return Nhe(this.win.location.href,t)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia?.("(orientation: portrait)").matches}testUserAgent(t){const i=this.win.navigator;return!!(i?.userAgent&&i.userAgent.indexOf(t)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return n.\u0275fac=function(t){return new(t||n)(fn(Mo),fn(v))},n.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nhe=(n,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return i?decodeURIComponent(i[1].replace(/\+/g," ")):null},Eb=(n,e,t)=>{e&&e.addEventListener(t,i=>{const r=i?.detail;n.next(r)})};let Cb=(()=>{class n{constructor(t,i,r,o){this.location=i,this.serializer=r,this.router=o,this.direction=sU,this.animated=aU,this.guessDirection="forward",this.lastNavId=-1,o&&o.events.subscribe(a=>{if(a instanceof pE){const h=a.restoredState?a.restoredState.navigationId:a.id;this.guessDirection=h<this.lastNavId?"back":"forward",this.guessAnimation=a.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?a.id:h}}),t.backButton.subscribeWithPriority(0,a=>{this.pop(),a()})}navigateForward(t,i={}){return this.setDirection("forward",i.animated,i.animationDirection,i.animation),this.navigate(t,i)}navigateBack(t,i={}){return this.setDirection("back",i.animated,i.animationDirection,i.animation),this.navigate(t,i)}navigateRoot(t,i={}){return this.setDirection("root",i.animated,i.animationDirection,i.animation),this.navigate(t,i)}back(t={animated:!0,animationDirection:"back"}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.location.back()}pop(){var t=this;return(0,$o.Z)(function*(){let i=t.topOutlet;for(;i;){if(yield i.pop())return!0;i=i.parentOutlet}return!1})()}setDirection(t,i,r,o){this.direction=t,this.animated=Fhe(t,i,r),this.animationBuilder=o}setTopOutlet(t){this.topOutlet=t}consumeTransition(){let i,t="root";const r=this.animationBuilder;return"auto"===this.direction?(t=this.guessDirection,i=this.guessAnimation):(i=this.animated,t=this.direction),this.direction=sU,this.animated=aU,this.animationBuilder=void 0,{direction:t,animation:i,animationBuilder:r}}navigate(t,i){if(Array.isArray(t))return this.router.navigate(t,i);{const r=this.serializer.parse(t.toString());return void 0!==i.queryParams&&(r.queryParams={...i.queryParams}),void 0!==i.fragment&&(r.fragment=i.fragment),this.router.navigateByUrl(r,i)}}}return n.\u0275fac=function(t){return new(t||n)(fn(Lhe),fn(J0),fn(gb),fn(Sl,8))},n.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fhe=(n,e,t)=>{if(!1!==e){if(void 0!==t)return t;if("forward"===n||"back"===n)return n;if("root"===n&&!0===e)return"forward"}},sU="auto",aU=void 0,lU=new xi("USERCONFIG"),mU=new xi("");let Jhe=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=jw([i.queryParams,i.params,i.data]).pipe(ge(([o,a,h],m)=>(h={...o,...a,...h},0===m?St(h):Promise.resolve(h)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const a=hz(i.component);if(a)for(const{templateName:h}of a.inputs)t.activatedComponentRef.setInput(h,o[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=mi({token:n,factory:n.\u0275fac}),n})();function tfe(n){return n?.componentInputBindingEnabled?new Jhe:null}let rfe=(()=>{class n{constructor(t,i,r,o,a){this.locationStrategy=t,this.navCtrl=i,this.elementRef=r,this.router=o,this.routerLink=a,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}}onClick(t){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(re(Hm),re(Cb),re(Kn),re(Sl),re(Jm,8))},n.\u0275dir=On({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&So("click",function(o){return i.onClick(o)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Ki]}),n})(),ofe=(()=>{class n{constructor(t,i,r,o,a){this.locationStrategy=t,this.navCtrl=i,this.elementRef=r,this.router=o,this.routerLink=a,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){if(this.routerLink?.urlTree){const t=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=t}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return n.\u0275fac=function(t){return new(t||n)(re(Hm),re(Cb),re(Kn),re(Sl),re(Jm,8))},n.\u0275dir=On({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(t,i){1&t&&So("click",function(){return i.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Ki]}),n})();const gU=n=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(n):"function"==typeof requestAnimationFrame?requestAnimationFrame(n):setTimeout(n);Ce(5062),Ce(6323),Ce(2510),Ce(6003),Ce(9203);var hfe=Ce(3395),ffe=Ce(3365),pfe=(Ce(3389),Ce(3645),Ce(6225),Ce(8411));Ce(619);const gfe=hfe.i;let DO=(()=>{class n extends rfe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$s(n)))(i||n)}}(),n.\u0275dir=On({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],features:[Tr]}),n})(),AO=(()=>{class n extends ofe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$s(n)))(i||n)}}(),n.\u0275dir=On({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],features:[Tr]}),n})();const ime={provide:tu,useExisting:xt(()=>_U),multi:!0};let _U=(()=>{class n extends QP{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$s(n)))(i||n)}}(),n.\u0275dir=On({type:n,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&pl("max",i._enabled?i.max:null)},features:[zo([ime]),Tr]}),n})();const rme={provide:tu,useExisting:xt(()=>vU),multi:!0};let vU=(()=>{class n extends JP{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$s(n)))(i||n)}}(),n.\u0275dir=On({type:n,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&pl("min",i._enabled?i.min:null)},features:[zo([rme]),Tr]}),n})();const ome=(n,e,t)=>()=>{if(e.defaultView&&typeof window<"u"){(0,ffe.s)({...n,_zoneGate:o=>t.run(o)});const r="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function mfe(){var n=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&n.push(Ce.e(6748).then(Ce.t.bind(Ce,3342,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var i=new URL("b","http://a");return i.pathname="c%20d","http://a/c%20d"===i.href&&i.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&n.push(Ce.e(2214).then(Ce.t.bind(Ce,2668,23)))}return Promise.all(n)}().then(()=>((n,e)=>{if(!(typeof window>"u"))return gfe(),(0,pfe.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),e)})(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:gU,jmp:o=>t.runOutsideAngular(o),ael(o,a,h,m){o[r](a,h,m)},rel(o,a,h,m){o.removeEventListener(a,h,m)}}))}};let sme=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:lU,useValue:t},{provide:HI,useFactory:ome,multi:!0,deps:[lU,Mo,v]},{provide:mU,useFactory:tfe,deps:[Sl]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=co({type:n}),n.\u0275inj=po({providers:[wE,Rhe,Ohe],imports:[r_]}),n})();var ame=Ce(9422),LD=Ce.n(ame);const ND={SecureStorage:"ionicSecureStorage",IndexedDB:LD().INDEXEDDB,LocalStorage:LD().LOCALSTORAGE},yU={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[ND.SecureStorage,ND.IndexedDB,ND.LocalStorage]};class FD{constructor(e=yU){this._db=null,this._secureStorageDriver=null;const t=Object.assign({},yU,e||{});this._config=t}create(){var e=this;return(0,$o.Z)(function*(){const t=LD().createInstance(e._config);return e._db=t,yield t.setDriver(e._config.driverOrder||[]),e})()}defineDriver(e){var t=this;return(0,$o.Z)(function*(){return e._driver===ND.SecureStorage&&(t._secureStorageDriver=e),LD().defineDriver(e)})()}get driver(){var e;return(null===(e=this._db)||void 0===e?void 0:e.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(e){return this.assertDb().getItem(e)}set(e,t){return this.assertDb().setItem(e,t)}remove(e){return this.assertDb().removeItem(e)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(e){return this.assertDb().iterate(e)}setEncryptionKey(e){var t;if(!this._secureStorageDriver)throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available");null===(t=this._secureStorageDriver)||void 0===t||t.setEncryptionKey(e)}}const bU=new xi("STORAGE_CONFIG_TOKEN");class lme extends FD{constructor(){super()}create(){var e=this;return(0,$o.Z)(function*(){return e})()}defineDriver(){return(0,$o.Z)(function*(){})()}get driver(){return"noop"}get(e){return(0,$o.Z)(function*(){return null})()}set(e,t){return(0,$o.Z)(function*(){})()}remove(e){return(0,$o.Z)(function*(){})()}clear(){return(0,$o.Z)(function*(){})()}length(){return(0,$o.Z)(function*(){return 0})()}keys(){return(0,$o.Z)(function*(){return[]})()}forEach(e){return(0,$o.Z)(function*(){})()}setEncryptionKey(e){}}function cme(n,e){return _P(n)?new lme:new FD(e)}let ume=(()=>{class n{static forRoot(t=null){return{ngModule:n,providers:[{provide:bU,useValue:t},{provide:FD,useFactory:cme,deps:[rf,bU]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=co({type:n}),n.\u0275inj=po({}),n})();var CE=Ce(2726);const BD=(0,CE.fo)("Preferences",{web:()=>Ce.e(899).then(Ce.bind(Ce,899)).then(n=>new n.PreferencesWeb)});class SE extends Error{}function xU(n,e){if("string"!=typeof n)throw new SE("Invalid token specified: must be a string");e||(e={});const t=!0===e.header?0:1,i=n.split(".")[t];if("string"!=typeof i)throw new SE(`Invalid token specified: missing part #${t+1}`);let r;try{r=function hme(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function dme(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return atob(e)}}(i)}catch(o){throw new SE(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new SE(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}SE.prototype.name="InvalidTokenError";let fme=(()=>{class n{constructor(t){this.storage=t,this.initStorage()}initStorage(){var t=this;return(0,$o.Z)(function*(){yield t.storage.create()})()}set(t,i){var r=this;return(0,$o.Z)(function*(){return yield r.storage.set(t,i),!0})()}get(t){var i=this;return(0,$o.Z)(function*(){return yield i.storage.get(t)})()}remove(t){var i=this;return(0,$o.Z)(function*(){return yield i.storage.remove(t)})()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(FD))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ib="APP_TOKEN";let yf=(()=>{class n{constructor(t,i,r,o){this.http=t,this.storageService=i,this.router=r,this.platformId=o,this.baseUrl="https://wheel-wizard-production.up.railway.app/",this.user=new tt(void 0),this.isAuthenticated=new tt(!1),this.token="",this.currentUsername=new tt(null),this.loadUser()}setToken(t){var i=this;return(0,$o.Z)(function*(){dT(i.platformId)?localStorage.setItem(Ib,t):yield BD.set({key:Ib,value:t})})()}getToken(){var t=this;return(0,$o.Z)(function*(){return dT(t.platformId)?localStorage.getItem(Ib):(yield BD.get({key:Ib})).value})()}loadUser(){var t=this;return(0,$o.Z)(function*(){const i=yield t.getToken();if(i){const r=xU(i);t.user.next({token:i,id:r.sub})}else t.user.next(null)})()}register(t){return this.http.post(`${this.baseUrl}auth/register`,t).pipe(ge(i=>this.login(t.email,t.password)))}login(t,i){var r=this;return this.http.post(`${this.baseUrl}auth/login`,{email:t,password:i}).pipe(Vt(function(){var o=(0,$o.Z)(function*(a){yield r.setToken(a.token),console.log("Token:",a.token);const h=xU(a.token);console.log("Decoded token:",h);const m={token:a.token,id:h.sub};return console.log("User ID:",m.id),r.user.next(m),yield BD.set({key:"userId",value:m.id}),m});return function(a){return o.apply(this,arguments)}}()))}getProfile(){return this.http.get(`${this.baseUrl}profile/${this.getCurrentUserId()}`)}logOut(){var t=this;return(0,$o.Z)(function*(){dT(t.platformId)?localStorage.removeItem(Ib):yield BD.remove({key:Ib}),t.user.next(null)})()}getCurrentUser(){return this.user.asObservable()}getCurrentUserId(){return this.user.getValue()?.id}isLoggedIn(){const t=this.router;return this.getCurrentUser().pipe(Vt(i=>!!i||t.createUrlTree(["/"])))}shouldLogIn(){const t=this.router;return this.getCurrentUser().pipe(Vt(i=>!i||t.createUrlTree(["/map"])))}getRideHistory(){var t=this;return(0,$o.Z)(function*(){const i=yield t.getToken(),r=new mf({Authorization:`Bearer ${i}`});return t.http.get(`${t.baseUrl}rides/history`,{headers:r}).pipe(Hl(o=>{console.log(o)}))})()}createRide(t){var i=this;return(0,$o.Z)(function*(){const r=yield i.getToken();console.log("Token:",r);const o=new mf({Authorization:`Bearer ${r}`,"Content-Type":"application/json"});return i.http.post(`${i.baseUrl}rides`,t,{headers:o}).pipe(Hl(a=>{console.log(a)})).toPromise()})()}getVehicles(){var t=this;return(0,$o.Z)(function*(){return t.http.get(`${t.baseUrl}vehicles`).pipe(Hl(i=>console.log("getVehicles response:",i))).toPromise()})()}updateVehicles(t,i){var r=this;return(0,$o.Z)(function*(){console.log("Updating vehicle:",t),console.log("Update data:",i);const o=yield r.http.put(`${r.baseUrl}vehicles/${t}`,i).toPromise();return console.log("Server response:",o),o})()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Iw),fn(fme),fn(Sl),fn(rf))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wU=(()=>{class n{setEmail(t){this.email=t}getEmail(){return this.email}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pme(n,e){1&n&&(on(0,"div",17),xh(),on(1,"svg",18),oo(2,"path",19),hn()())}function mme(n,e){1&n&&(on(0,"div"),Jn(1,"Email is required"),hn())}function gme(n,e){1&n&&(on(0,"div"),Jn(1,"Email is invalid"),hn())}function _me(n,e){if(1&n&&(on(0,"small",20),Rr(1,mme,2,0,"div",21),Rr(2,gme,2,0,"div",21),hn()),2&n){const t=ca();si(1),lr("ngIf",null==t.email.errors?null:t.email.errors.required),si(1),lr("ngIf",null==t.email.errors?null:t.email.errors.email)}}function vme(n,e){1&n&&(on(0,"div",17),xh(),on(1,"svg",18),oo(2,"path",19),hn()())}function yme(n,e){1&n&&(on(0,"div"),Jn(1," Password is required "),hn())}function bme(n,e){1&n&&(on(0,"div"),Jn(1," Password is too short "),hn())}function xme(n,e){if(1&n&&(on(0,"small",20),Rr(1,yme,2,0,"div",21),Rr(2,bme,2,0,"div",21),hn()),2&n){const t=ca();si(1),lr("ngIf",null==t.password.errors?null:t.password.errors.required),si(1),lr("ngIf",null==t.password.errors?null:t.password.errors.minlength)}}let wme=(()=>{class n{constructor(t,i,r,o,a){this.fb=t,this.authService=i,this.snackBar=r,this.router=o,this.userService=a,this.loginForm=this.fb.nonNullable.group({email:["",[Hp.required,Hp.email]],password:["",[Hp.required,Hp.minLength(4)]]})}get email(){return this.loginForm.controls.email}get password(){return this.loginForm.controls.password}logIn(){console.log(this.loginForm.value);const{email:t,password:i}=this.loginForm.getRawValue();this.authService.login(t,i).subscribe(r=>{this.userService.setEmail(t),this.router.navigate(["/map"]),this.snackBar.open("Logged in successfully","Close",{duration:2e3,verticalPosition:"top"})},r=>{console.error(r),this.snackBar.open(200===r.status?"User doesn't exist":"An error occurred. Please try again later.","Close",{duration:2e3,verticalPosition:"top"})})}static#e=this.\u0275fac=function(i){return new(i||n)(re(tR),re(yf),re(IR),re(Sl),re(wU))};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-login"]],decls:30,vars:6,consts:[[1,"min-h-screen","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8","bg-gray-500","bg-no-repeat","bg-cover"],[1,"absolute","bg-black","opacity-60","inset-0","z-0"],[1,"max-w-md","w-full","space-y-8","p-10","bg-white","rounded-xl","z-10"],[1,"text-center"],[1,"mt-6","text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"formGroup","ngSubmit"],[1,"relative"],["class","absolute right-0 mt-4",4,"ngIf"],[1,"text-sm","font-bold","text-gray-700","tracking-wide"],["formControlName","email","type","email","name","email","id","email","placeholder","mail@gmail.com","required","",1,"w-full","text-base","py-2","border-b","border-gray-300","focus:outline-none","focus:border-indigo-500"],["class","text-red-500",4,"ngIf"],[1,"mt-8","content-center"],["formControlName","password","type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","content-center","text-base","py-2","border-b","border-gray-300","focus:outline-none","focus:border-indigo-500"],["type","submit",1,"w-full","flex","justify-center","bg-indigo-500","text-gray-100","p-4","rounded-full","tracking-wide","font-semibold","focus:outline-none","focus:shadow-outline","hover:bg-indigo-600","shadow-lg","cursor-pointer","transition","ease-in","duration-300",3,"disabled"],[1,"flex","flex-col","items-center","justify-center","mt-10","text-center","text-md","text-gray-500"],["routerLink","/registration",1,"text-indigo-500","hover:text-indigo-500no-underline","hover:underline","cursor-pointer","transition","ease-in","duration-300"],[1,"absolute","right-0","mt-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-500"],[4,"ngIf"]],template:function(i,r){1&i&&(on(0,"div",0),oo(1,"div",1),on(2,"div",2)(3,"div",3)(4,"h2",4),Jn(5,"Welcome Back!"),hn(),on(6,"p",5),Jn(7,"Please sign in to your account"),hn()(),on(8,"form",6),So("ngSubmit",function(){return r.logIn()}),on(9,"div",7),Rr(10,pme,3,0,"div",8),on(11,"label",9),Jn(12," Email "),hn(),oo(13,"input",10),Rr(14,_me,3,2,"small",11),hn(),on(15,"div",7)(16,"div",12),Rr(17,vme,3,0,"div",8),on(18,"label",9),Jn(19," Password "),hn(),oo(20,"input",13),Rr(21,xme,3,2,"small",11),hn()(),on(22,"div")(23,"button",14),Jn(24," Sign in "),hn()(),on(25,"p",15)(26,"span"),Jn(27,"Don't have an account?"),hn(),on(28,"a",16),Jn(29," Sign up "),hn()()()()()),2&i&&(si(8),lr("formGroup",r.loginForm),si(2),lr("ngIf",r.email.valid),si(4),lr("ngIf",r.email.invalid&&(r.email.dirty||r.email.touched)),si(3),lr("ngIf",r.password.valid),si(4),lr("ngIf",r.password.invalid&&(r.password.dirty||r.password.touched)),si(2),lr("disabled",r.loginForm.invalid))},dependencies:[eh,qP,Dw,wT,ET,Fw,Jm,sb,Nw,AO],styles:["section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}form[_ngcontent-%COMP%]{width:100%}"]})}return n})();const Eme=n=>{const e=n.get("password"),t=n.get("confirmPassword");return e&&t&&e.value!==t.value?{passwordMismatch:!0}:null};function Cme(n,e){1&n&&(on(0,"div",24),xh(),on(1,"svg",25),oo(2,"path",26),hn()())}function Sme(n,e){1&n&&(on(0,"div"),Jn(1,"Name is required"),hn())}function Ime(n,e){1&n&&(on(0,"div"),Jn(1,"Name is invalid"),hn())}function Tme(n,e){if(1&n&&(on(0,"small",27),Rr(1,Sme,2,0,"div",28),Rr(2,Ime,2,0,"div",28),hn()),2&n){const t=ca();si(1),lr("ngIf",null==t.name.errors?null:t.name.errors.required),si(1),lr("ngIf",null==t.name.errors?null:t.name.errors.pattern)}}function Dme(n,e){1&n&&(on(0,"div",24),xh(),on(1,"svg",25),oo(2,"path",26),hn()())}function Ame(n,e){1&n&&(on(0,"div"),Jn(1,"Email is required"),hn())}function Mme(n,e){1&n&&(on(0,"div"),Jn(1,"Email is invalid"),hn())}function kme(n,e){if(1&n&&(on(0,"small",27),Rr(1,Ame,2,0,"div",28),Rr(2,Mme,2,0,"div",28),hn()),2&n){const t=ca();si(1),lr("ngIf",null==t.email.errors?null:t.email.errors.required),si(1),lr("ngIf",null==t.email.errors?null:t.email.errors.email)}}function Pme(n,e){1&n&&(on(0,"div",24),xh(),on(1,"svg",25),oo(2,"path",26),hn()())}function Rme(n,e){1&n&&(on(0,"div"),Jn(1," Password is required "),hn())}function Ome(n,e){1&n&&(on(0,"div"),Jn(1,"Password is invalid"),hn())}function Lme(n,e){if(1&n&&(on(0,"small",27),Rr(1,Rme,2,0,"div",28),Rr(2,Ome,2,0,"div",28),hn()),2&n){const t=ca();si(1),lr("ngIf",null==t.password.errors?null:t.password.errors.required),si(1),lr("ngIf",null==t.password.errors?null:t.password.errors.password)}}function Nme(n,e){1&n&&(on(0,"div",24),xh(),on(1,"svg",25),oo(2,"path",26),hn()())}function Fme(n,e){1&n&&(on(0,"div"),Jn(1," Confirm the password "),hn())}function Bme(n,e){if(1&n&&(on(0,"small",27),Rr(1,Fme,2,0,"div",28),hn()),2&n){const t=ca();si(1),lr("ngIf",null==t.confirmPassword.errors?null:t.confirmPassword.errors.required)}}function zme(n,e){1&n&&(on(0,"small",27),Jn(1," Password should match "),hn())}let $me=(()=>{class n{constructor(t,i,r,o){this.fb=t,this.authService=i,this.snackBar=r,this.router=o,this.registrationForm=this.fb.group({name:["",[Hp.required,Hp.pattern(/^[a-zA-Z]+(?: [a-zA-Z]+)*$/)]],email:["",[Hp.required,Hp.email]],password:["",Hp.required],confirmPassword:["",Hp.required]},{validators:Eme})}get name(){return this.registrationForm.controls.name}get email(){return this.registrationForm.controls.email}get password(){return this.registrationForm.controls.password}get confirmPassword(){return this.registrationForm.controls.confirmPassword}register(){let{name:t,email:i,password:r}=this.registrationForm.getRawValue();t=t??"",i=i??"",r=r??"";const o={name:t,email:i,password:r};console.log(o),this.authService.register(o).subscribe(a=>{this.router.navigate(["/login"]),this.snackBar.open("Registered in successfully","Close",{duration:2e3,verticalPosition:"top"})},a=>{this.snackBar.open(201===a.status?"User already exists":"An error occurred. Please try again later.","Close",{duration:2e3,verticalPosition:"top"})})}static#e=this.\u0275fac=function(i){return new(i||n)(re(tR),re(yf),re(IR),re(Sl))};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-registration"]],decls:50,vars:11,consts:[[1,"min-h-screen","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8","bg-gray-500","bg-no-repeat","bg-cover"],[1,"absolute","bg-black","opacity-60","inset-0","z-0"],[1,"max-w-md","w-full","space-y-8","p-10","bg-white","rounded-xl","z-10"],[1,"text-center"],[1,"mt-6","text-3xl","font-bold","text-gray-900"],[1,"mt-8","space-y-6",3,"formGroup","ngSubmit"],[1,"relative"],["class","absolute right-0 mt-4",4,"ngIf"],[1,"text-sm","font-bold","text-gray-700","tracking-wide"],["type","","placeholder","johnsmith","formControlName","name","type","text","name","name","id","name","required","",1,"w-full","text-base","py-2","border-b","border-gray-300","focus:outline-none","focus:border-indigo-500"],["class","text-red-500",4,"ngIf"],["type","","placeholder","mail@gmail.com","formControlName","email","type","email","name","email","id","email","required","",1,"w-full","text-base","py-2","border-b","border-gray-300","focus:outline-none","focus:border-indigo-500"],[1,"mt-8","content-center"],["formControlName","password","type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","content-center","text-base","py-2","border-b","border-gray-300","focus:outline-none","focus:border-indigo-500"],["formControlName","confirmPassword","type","password","name","confirmPassword","id","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","content-center","text-base","py-2","border-b","border-gray-300","focus:outline-none","focus:border-indigo-500"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember_me","name","remember_me","type","checkbox",1,"h-4","w-4","bg-indigo-500","focus:ring-indigo-400","border-gray-300","rounded"],["for","remember_me",1,"ml-2","block","text-sm","text-gray-900"],[1,"text-sm"],["href","#",1,"font-medium","text-indigo-500","hover:text-indigo-500"],["type","submit",1,"w-full","flex","justify-center","bg-indigo-500","text-gray-100","p-4","rounded-full","tracking-wide","font-semibold","focus:outline-none","focus:shadow-outline","hover:bg-indigo-600","shadow-lg","cursor-pointer","transition","ease-in","duration-300",3,"disabled"],[1,"flex","flex-col","items-center","justify-center","mt-10","text-center","text-md","text-gray-500"],["routerLink","/login",1,"text-indigo-500","hover:text-indigo-500no-underline","hover:underline","cursor-pointer","transition","ease-in","duration-300"],[1,"absolute","right-0","mt-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-500"],[4,"ngIf"]],template:function(i,r){1&i&&(on(0,"div",0),oo(1,"div",1),on(2,"div",2)(3,"div",3)(4,"h2",4),Jn(5,"Create New Account"),hn()(),on(6,"form",5),So("ngSubmit",function(){return r.register()}),on(7,"div",6),Rr(8,Cme,3,0,"div",7),on(9,"label",8),Jn(10," Username "),hn(),oo(11,"input",9),Rr(12,Tme,3,2,"small",10),hn(),on(13,"div",6),Rr(14,Dme,3,0,"div",7),on(15,"label",8),Jn(16," Email "),hn(),oo(17,"input",11),Rr(18,kme,3,2,"small",10),hn(),on(19,"div",6),Rr(20,Pme,3,0,"div",7),on(21,"div",12)(22,"label",8),Jn(23," Password "),hn(),oo(24,"input",13),Rr(25,Lme,3,2,"small",10),hn()(),on(26,"div",6),Rr(27,Nme,3,0,"div",7),on(28,"div",12)(29,"label",8),Jn(30," Confirm password "),hn(),oo(31,"input",14),Rr(32,Bme,2,1,"small",10),Rr(33,zme,2,0,"small",10),hn()(),on(34,"div",15)(35,"div",16),oo(36,"input",17),on(37,"label",18),Jn(38," Remember me "),hn()(),on(39,"div",19)(40,"a",20),Jn(41," Forgot your password? "),hn()()(),on(42,"div")(43,"button",21),Jn(44," Sign Up "),hn()(),on(45,"p",22)(46,"span"),Jn(47,"Already have an account?"),hn(),on(48,"a",23),Jn(49," Login here "),hn()()()()()),2&i&&(si(6),lr("formGroup",r.registrationForm),si(2),lr("ngIf",r.name.valid),si(4),lr("ngIf",r.name.invalid&&(r.name.dirty||r.name.touched)),si(2),lr("ngIf",r.email.valid),si(4),lr("ngIf",r.email.invalid&&(r.email.dirty||r.email.touched)),si(2),lr("ngIf",r.password.valid&&r.confirmPassword.valid&&!(null!=r.registrationForm.errors&&r.registrationForm.errors.passwordMismatch)),si(5),lr("ngIf",r.password.invalid&&(r.password.dirty||r.password.touched)),si(2),lr("ngIf",r.password.valid&&r.confirmPassword.valid&&!(null!=r.registrationForm.errors&&r.registrationForm.errors.passwordMismatch)),si(5),lr("ngIf",r.confirmPassword.invalid&&(r.confirmPassword.dirty||r.confirmPassword.touched)),si(1),lr("ngIf",(null==r.registrationForm.errors?null:r.registrationForm.errors.passwordMismatch)&&r.confirmPassword.valid&&r.password.valid),si(10),lr("disabled",r.registrationForm.invalid))},dependencies:[eh,qP,Dw,wT,ET,Fw,Jm,sb,Nw,AO],styles:["section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}form[_ngcontent-%COMP%]{width:100%}"]})}return n})();function Vme(n,e){1&n&&(on(0,"div",19),oo(1,"iframe",20),hn())}function Ume(n,e){1&n&&(on(0,"div",19),oo(1,"iframe",21),hn())}let jme=(()=>{class n{constructor(t,i,r){this.route=t,this._formBuilder=i,this.router=r,this.Checklist=this._formBuilder.group({pointOne:!1,pointTwo:!1,pointThree:!1}),this.hasBookedRide=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{const i=window.history.state;i&&i.vehicleData&&(this.vehicleData=i.vehicleData)})}isChecklistComplete(){return this.Checklist.controls.pointOne.value&&this.Checklist.controls.pointTwo.value&&this.Checklist.controls.pointThree.value}continueRide(){this.hasBookedRide=!0,this.router.navigate(["/map"],{state:{hasBookedRide:this.hasBookedRide,vehicleData:this.vehicleData}})}getBaseFare(){if(this.vehicleData&&this.vehicleData.vehicleType)switch(this.vehicleData.vehicleType.toLowerCase()){case"scooter":return 50;case"cycle":return 20;default:throw new Error("Invalid vehicle type")}return 0}static#e=this.\u0275fac=function(i){return new(i||n)(re(vf),re(tR),re(Sl))};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-book-ride"]],decls:61,vars:13,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50"],[1,"flex","flex-col","items-center","justify-center","max-w-md","mx-auto","p-6"],[1,"text-2xl","md:text-4xl","font-bold","mb-4","text-gray-700","flex","items-center"],[1,"mr-2"],[1,"mb-6",3,"formGroup"],[1,"text-xl","md:text-2xl","font-semibold","text-gray-600"],[1,"list-inside","ml-4"],["formControlName","pointOne"],["formControlName","pointTwo"],["formControlName","pointThree"],[1,"mb-6","text-center"],["class","vehicle-iframe",4,"ngIf"],[1,"font-semibold","text-gray-600"],[1,"ml-2","text-gray-600"],[1,"mb-6"],[1,"text-gray-700"],[1,"space-x-4","flex"],[1,"px-4","py-2","rounded-lg","text-white","flex","items-center","justify-center",3,"disabled","click"],["routerLink","/map",1,"px-4","py-2","bg-red-500","text-white","rounded-lg","hover:bg-red-600","flex","items-center","justify-center"],[1,"vehicle-iframe"],["src","https://lottie.host/?file=5f25f563-438f-474e-b2a4-86a78f78d56b/jI82dfx0xJ.lottie"],["src","https://lottie.host/?file=b486797d-2f19-4aeb-bdb4-3122fe0fced8/RPFBx1PF9P.lottie"]],template:function(i,r){1&i&&(on(0,"div",0)(1,"div",1)(2,"h1",2)(3,"mat-icon",3),Jn(4,"directions_bike"),hn(),Jn(5," Thank you for riding Wheel Wizards! "),hn(),on(6,"div",4)(7,"h2",5),Jn(8," Before you ride: "),hn(),on(9,"ul",6)(10,"li")(11,"mat-checkbox",7),Jn(12," Check the brakes and tires "),hn()(),on(13,"li")(14,"mat-checkbox",8),Jn(15," Make sure the seat is adjusted to a comfortable height "),hn()(),on(16,"li")(17,"mat-checkbox",9),Jn(18," Wear a helmet "),hn()()()(),on(19,"div",10)(20,"h2"),Jn(21,"Vehicle Details"),hn(),Rr(22,Vme,2,0,"div",11),Rr(23,Ume,2,0,"div",11),on(24,"p")(25,"span",12),Jn(26,"Vehicle Name:"),hn(),on(27,"span",13),Jn(28),hn()(),on(29,"p")(30,"span",12),Jn(31,"Vehicle Type:"),hn(),on(32,"span",13),Jn(33),hn()(),on(34,"p")(35,"span",12),Jn(36,"Service Area:"),hn(),on(37,"span",13),Jn(38),hn()(),on(39,"p")(40,"span",12),Jn(41,"Base Fare:"),hn(),on(42,"span",13),Jn(43),hn()(),on(44,"p")(45,"span",12),Jn(46,"Rate:"),hn(),on(47,"span",13),Jn(48),hn()()(),on(49,"div",14)(50,"p",15),Jn(51,"Would you like to continue?"),hn(),on(52,"div",16)(53,"button",17),So("click",function(){return r.continueRide()}),on(54,"mat-icon",3),Jn(55,"check_circle"),hn(),Jn(56," Yes "),hn(),on(57,"button",18)(58,"mat-icon",3),Jn(59,"cancel"),hn(),Jn(60," No "),hn()()()()()),2&i&&(si(6),lr("formGroup",r.Checklist),si(16),lr("ngIf","cycle"===r.vehicleData.vehicleType),si(1),lr("ngIf","scooter"===r.vehicleData.vehicleType),si(5),df(r.vehicleData.title),si(5),df(r.vehicleData.vehicleType),si(5),df(r.vehicleData.serviceZone),si(5),wc("\u09f3",r.getBaseFare(),""),si(5),wc("\u09f3",r.vehicleData.fare,"/min"),si(5),ba("bg-blue-500",r.isChecklistComplete())("bg-gray-300",!r.isChecklistComplete()),lr("disabled",!r.isChecklistComplete()))},dependencies:[eh,wT,ET,Jm,sb,Nw,Zw,c6,DO],styles:[".vehicle-iframe[_ngcontent-%COMP%]{margin:0 auto;padding:10px}"]})}return n})(),Gme=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-home"]],decls:0,vars:0,template:function(i,r){}})}return n})();const MO=(0,CE.fo)("Geolocation",{web:()=>Ce.e(579).then(Ce.bind(Ce,579)).then(n=>new n.GeolocationWeb)});var Hme=Ce(2176),Ad=6371008.8,EU={centimeters:100*Ad,centimetres:100*Ad,degrees:Ad/111325,feet:3.28084*Ad,inches:39.37*Ad,kilometers:Ad/1e3,kilometres:Ad/1e3,meters:Ad,metres:Ad,miles:Ad/1609.344,millimeters:1e3*Ad,millimetres:1e3*Ad,nauticalmiles:Ad/1852,radians:1,yards:1.0936*Ad};function tg(n,e,t){void 0===t&&(t={});var i={type:"Feature"};return(0===t.id||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function Tb(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kO(n[0])||!kO(n[1]))throw new Error("coordinates must contain numbers");return tg({type:"Point",coordinates:n},e,t)}function zD(n,e,t){void 0===t&&(t={});for(var i=0,r=n;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return tg({type:"Polygon",coordinates:n},e,t)}function $D(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return tg({type:"LineString",coordinates:n},e,t)}function UD(n){return n%360*Math.PI/180}function kO(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function IE(n,e,t){if(null!==n)for(var i,r,o,a,h,m,_,P,C=0,T=0,O=n.type,j="FeatureCollection"===O,q="Feature"===O,_e=j?n.features.length:1,me=0;me<_e;me++){h=(P=!!(_=j?n.features[me].geometry:q?n.geometry:n)&&"GeometryCollection"===_.type)?_.geometries.length:1;for(var te=0;te<h;te++){var Pe=0,_t=0;if(null!==(a=P?_.geometries[te]:_)){m=a.coordinates;var Dt=a.type;switch(C=!t||"Polygon"!==Dt&&"MultiPolygon"!==Dt?0:1,Dt){case null:break;case"Point":if(!1===e(m,T,me,Pe,_t))return!1;T++,Pe++;break;case"LineString":case"MultiPoint":for(i=0;i<m.length;i++){if(!1===e(m[i],T,me,Pe,_t))return!1;T++,"MultiPoint"===Dt&&Pe++}"LineString"===Dt&&Pe++;break;case"Polygon":case"MultiLineString":for(i=0;i<m.length;i++){for(r=0;r<m[i].length-C;r++){if(!1===e(m[i][r],T,me,Pe,_t))return!1;T++}"MultiLineString"===Dt&&Pe++,"Polygon"===Dt&&_t++}"Polygon"===Dt&&Pe++;break;case"MultiPolygon":for(i=0;i<m.length;i++){for(_t=0,r=0;r<m[i].length;r++){for(o=0;o<m[i][r].length-C;o++){if(!1===e(m[i][r][o],T,me,Pe,_t))return!1;T++}_t++}Pe++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===IE(a.geometries[i],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function jD(n,e){!function DU(n,e){var t,i,r,o,a,h,m,_,C,T,P=0,O="FeatureCollection"===n.type,j="Feature"===n.type,q=O?n.features.length:1;for(t=0;t<q;t++){for(_=O?n.features[t].properties:j?n.properties:{},C=O?n.features[t].bbox:j?n.bbox:void 0,T=O?n.features[t].id:j?n.id:void 0,a=(m=!!(h=O?n.features[t].geometry:j?n.geometry:n)&&"GeometryCollection"===h.type)?h.geometries.length:1,r=0;r<a;r++)if(null!==(o=m?h.geometries[r]:h))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,P,_,C,T))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],P,_,C,T))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,P,_,C,T))return!1;P++}}(n,function(t,i,r,o,a){var m,h=null===t?null:t.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return!1!==e(tg(t,r,{bbox:o,id:a}),i,0)&&void 0}switch(h){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon"}for(var _=0;_<t.coordinates.length;_++)if(!1===e(tg({type:m,coordinates:t.coordinates[_]},r),i,_))return!1})}function PO(n){var e=[1/0,1/0,-1/0,-1/0];return IE(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}PO.default=PO;const tge=PO;function RO(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function PU(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=RO(n),r=function rge(n){return"Feature"===n.type?n.geometry:n}(e),o=r.type,a=e.bbox,h=r.coordinates;if(a&&!1===function pge(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}(i,a))return!1;"Polygon"===o&&(h=[h]);for(var m=!1,_=0;_<h.length&&!m;_++)if(RU(i,h[_][0],t.ignoreBoundary)){for(var C=!1,T=1;T<h[_].length&&!C;)RU(i,h[_][T],!t.ignoreBoundary)&&(C=!0),T++;C||(m=!0)}return m}function RU(n,e,t){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],h=e[r][1],m=e[o][0],_=e[o][1];if(n[1]*(a-m)+h*(m-n[0])+_*(n[0]-a)==0&&(a-n[0])*(m-n[0])<=0&&(h-n[1])*(_-n[1])<=0)return!t;h>n[1]!=_>n[1]&&n[0]<(m-a)*(n[1]-h)/(_-h)+a&&(i=!i)}return i}Ce(4772),Ce(3664);const OU=function mge(n,e,t){void 0===t&&(t={});var i=RO(n),r=RO(e),o=UD(r[1]-i[1]),a=UD(r[0]-i[0]),h=UD(i[1]),m=UD(r[1]),_=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(h)*Math.cos(m);return function IU(n,e){void 0===e&&(e="kilometers");var t=EU[e];if(!t)throw new Error(e+" units is invalid");return n*t}(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),t.units)};var NU=new ArrayBuffer(16);new Float64Array(NU),new Uint32Array(NU),Ce(7861),function(){function n(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var i=this.points[t],r=this.points[t+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var o=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,a=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,h=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+o),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+a),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+h)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+o),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+a),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+h)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(e){var t=[],i=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var o=this.pos(r);Math.sqrt((o.x-i.x)*(o.x-i.x)+(o.y-i.y)*(o.y-i.y)+(o.z-i.z)*(o.z-i.z))>e&&(t.push(r),i=o)}return t},n.prototype.vector=function(e){var t=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}},n.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var i=t/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function kge(n,e,t,i,r){var o=function Pge(n){var e=n*n;return[e*n,3*e*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:r.x*o[0]+i.x*o[1]+t.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+t.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+t.z*o[2]+e.z*o[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();Ce(9145),Ce(5665);var JU=Math.PI/180,ej=180/Math.PI,AE=function(n,e){this.lon=n,this.lat=e,this.x=JU*n,this.y=JU*e};AE.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},AE.prototype.antipode=function(){return new AE(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var tj=function(){this.coords=[],this.length=0};tj.prototype.move_to=function(n){this.length++,this.coords.push(n)};var VO=function(n){this.properties=n||{},this.geometries=[]};VO.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},VO.prototype.wkt=function(){for(var n="",e="LINESTRING(",t=function(o){e+=o[0]+" "+o[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(t),n+=e.substring(0,e.length-1)+")"}return n};var UO=function(n,e,t){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new AE(n.x,n.y),this.end=new AE(e.x,e.y),this.properties=t||{};var i=this.start.x-this.end.x,o=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};UO.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),t=Math.sin(n*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),a=ej*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[ej*Math.atan2(r,i),a]},UO.prototype.Arc=function(n,e){var t=[];if(!n||n<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var a=this.interpolate(i*r);t.push(a)}for(var h=!1,m=0,_=e&&e.offset?e.offset:10,C=180-_,T=-180+_,P=360-_,O=1;O<t.length;++O){var j=t[O-1][0],q=t[O][0],_e=Math.abs(q-j);_e>P&&(q>C&&j<T||j>C&&q<T)?h=!0:_e>m&&(m=_e)}var me=[];if(h&&m<_){var te=[];me.push(te);for(var Pe=0;Pe<t.length;++Pe){var _t=parseFloat(t[Pe][0]);if(Pe>0&&Math.abs(_t-t[Pe-1][0])>P){var Dt=parseFloat(t[Pe-1][0]),Yt=parseFloat(t[Pe-1][1]),Wt=parseFloat(t[Pe][0]),sn=parseFloat(t[Pe][1]);if(Dt>-180&&Dt<T&&180===Wt&&Pe+1<t.length&&t[Pe-1][0]>-180&&t[Pe-1][0]<T){te.push([-180,t[Pe][1]]),Pe++,te.push([t[Pe][0],t[Pe][1]]);continue}if(Dt>C&&Dt<180&&-180===Wt&&Pe+1<t.length&&t[Pe-1][0]>C&&t[Pe-1][0]<180){te.push([180,t[Pe][1]]),Pe++,te.push([t[Pe][0],t[Pe][1]]);continue}if(Dt<T&&Wt>C){var rt=Dt;Dt=Wt,Wt=rt;var Ii=Yt;Yt=sn,sn=Ii}if(Dt>C&&Wt<T&&(Wt+=360),Dt<=180&&Wt>=180&&Dt<Wt){var bi=(180-Dt)/(Wt-Dt),hr=bi*sn+(1-bi)*Yt;te.push([t[Pe-1][0]>C?180:-180,hr]),(te=[]).push([t[Pe-1][0]>C?-180:180,hr]),me.push(te)}else me.push(te=[]);te.push([_t,t[Pe][1]])}else te.push([t[Pe][0],t[Pe][1]])}}else{var Dr=[];me.push(Dr);for(var Ei=0;Ei<t.length;++Ei)Dr.push([t[Ei][0],t[Ei][1]])}for(var Hi=new VO(this.properties),Nn=0;Nn<me.length;++Nn){var Ci=new tj;Hi.geometries.push(Ci);for(var Ui=me[Nn],nr=0;nr<Ui.length;++nr)Ci.move_to(Ui[nr])}return Hi},Ce(3970);var qo=[],Wo=[],Xo=[],Yo=[],Zo=[],Ko=[],Qo=[],Jo=[],es=[],ts=[],ns=[],is=[],rs=[],os=[],ss=[],as=[],ls=[],cs=[],us=[],ds=[],hs=[],fs=[],ps=[],ms=[];Qo[85]=ts[85]=-1,Jo[85]=ns[85]=0,es[85]=is[85]=1,us[85]=fs[85]=1,ds[85]=ps[85]=0,hs[85]=ms[85]=1,qo[85]=Yo[85]=0,Wo[85]=Zo[85]=-1,Xo[85]=ss[85]=0,as[85]=rs[85]=0,ls[85]=os[85]=1,Ko[85]=cs[85]=1,fs[1]=fs[169]=0,ps[1]=ps[169]=-1,ms[1]=ms[169]=0,rs[1]=rs[169]=-1,os[1]=os[169]=0,ss[1]=ss[169]=0,ts[4]=ts[166]=0,ns[4]=ns[166]=-1,is[4]=is[166]=1,as[4]=as[166]=1,ls[4]=ls[166]=0,cs[4]=cs[166]=0,Qo[16]=Qo[154]=0,Jo[16]=Jo[154]=1,es[16]=es[154]=1,Yo[16]=Yo[154]=1,Zo[16]=Zo[154]=0,Ko[16]=Ko[154]=1,us[64]=us[106]=0,ds[64]=ds[106]=1,hs[64]=hs[106]=0,qo[64]=qo[106]=-1,Wo[64]=Wo[106]=0,Xo[64]=Xo[106]=1,us[2]=us[168]=0,ds[2]=ds[168]=-1,hs[2]=hs[168]=1,fs[2]=fs[168]=0,ps[2]=ps[168]=-1,ms[2]=ms[168]=0,rs[2]=rs[168]=-1,os[2]=os[168]=0,ss[2]=ss[168]=0,as[2]=as[168]=-1,ls[2]=ls[168]=0,cs[2]=cs[168]=1,Qo[8]=Qo[162]=0,Jo[8]=Jo[162]=-1,es[8]=es[162]=0,ts[8]=ts[162]=0,ns[8]=ns[162]=-1,is[8]=is[162]=1,rs[8]=rs[162]=1,os[8]=os[162]=0,ss[8]=ss[162]=1,as[8]=as[162]=1,ls[8]=ls[162]=0,cs[8]=cs[162]=0,Qo[32]=Qo[138]=0,Jo[32]=Jo[138]=1,es[32]=es[138]=1,ts[32]=ts[138]=0,ns[32]=ns[138]=1,is[32]=is[138]=0,qo[32]=qo[138]=1,Wo[32]=Wo[138]=0,Xo[32]=Xo[138]=0,Yo[32]=Yo[138]=1,Zo[32]=Zo[138]=0,Ko[32]=Ko[138]=1,fs[128]=fs[42]=0,ps[128]=ps[42]=1,ms[128]=ms[42]=1,us[128]=us[42]=0,ds[128]=ds[42]=1,hs[128]=hs[42]=0,qo[128]=qo[42]=-1,Wo[128]=Wo[42]=0,Xo[128]=Xo[42]=1,Yo[128]=Yo[42]=-1,Zo[128]=Zo[42]=0,Ko[128]=Ko[42]=0,ts[5]=ts[165]=-1,ns[5]=ns[165]=0,is[5]=is[165]=0,fs[5]=fs[165]=1,ps[5]=ps[165]=0,ms[5]=ms[165]=0,as[20]=as[150]=0,ls[20]=ls[150]=1,cs[20]=cs[150]=1,Yo[20]=Yo[150]=0,Zo[20]=Zo[150]=-1,Ko[20]=Ko[150]=1,Qo[80]=Qo[90]=-1,Jo[80]=Jo[90]=0,es[80]=es[90]=1,us[80]=us[90]=1,ds[80]=ds[90]=0,hs[80]=hs[90]=1,rs[65]=rs[105]=0,os[65]=os[105]=1,ss[65]=ss[105]=0,qo[65]=qo[105]=0,Wo[65]=Wo[105]=-1,Xo[65]=Xo[105]=0,Qo[160]=Qo[10]=-1,Jo[160]=Jo[10]=0,es[160]=es[10]=1,ts[160]=ts[10]=-1,ns[160]=ns[10]=0,is[160]=is[10]=0,fs[160]=fs[10]=1,ps[160]=ps[10]=0,ms[160]=ms[10]=0,us[160]=us[10]=1,ds[160]=ds[10]=0,hs[160]=hs[10]=1,as[130]=as[40]=0,ls[130]=ls[40]=1,cs[130]=cs[40]=1,rs[130]=rs[40]=0,os[130]=os[40]=1,ss[130]=ss[40]=0,qo[130]=qo[40]=0,Wo[130]=Wo[40]=-1,Xo[130]=Xo[40]=0,Yo[130]=Yo[40]=0,Zo[130]=Zo[40]=-1,Ko[130]=Ko[40]=1,ts[37]=ts[133]=0,ns[37]=ns[133]=1,is[37]=is[133]=1,fs[37]=fs[133]=0,ps[37]=ps[133]=1,ms[37]=ms[133]=0,qo[37]=qo[133]=-1,Wo[37]=Wo[133]=0,Xo[37]=Xo[133]=0,Yo[37]=Yo[133]=1,Zo[37]=Zo[133]=0,Ko[37]=Ko[133]=0,as[148]=as[22]=-1,ls[148]=ls[22]=0,cs[148]=cs[22]=0,fs[148]=fs[22]=0,ps[148]=ps[22]=-1,ms[148]=ms[22]=1,us[148]=us[22]=0,ds[148]=ds[22]=1,hs[148]=hs[22]=1,Yo[148]=Yo[22]=-1,Zo[148]=Zo[22]=0,Ko[148]=Ko[22]=1,Qo[82]=Qo[88]=0,Jo[82]=Jo[88]=-1,es[82]=es[88]=1,as[82]=as[88]=1,ls[82]=ls[88]=0,cs[82]=cs[88]=1,rs[82]=rs[88]=-1,os[82]=os[88]=0,ss[82]=ss[88]=1,us[82]=us[88]=0,ds[82]=ds[88]=-1,hs[82]=hs[88]=0,Qo[73]=Qo[97]=0,Jo[73]=Jo[97]=1,es[73]=es[97]=0,ts[73]=ts[97]=0,ns[73]=ns[97]=-1,is[73]=is[97]=0,rs[73]=rs[97]=1,os[73]=os[97]=0,ss[73]=ss[97]=0,qo[73]=qo[97]=1,Wo[73]=Wo[97]=0,Xo[73]=Xo[97]=1,Qo[145]=Qo[25]=0,Jo[145]=Jo[25]=-1,es[145]=es[25]=0,rs[145]=rs[25]=1,os[145]=os[25]=0,ss[145]=ss[25]=1,fs[145]=fs[25]=0,ps[145]=ps[25]=1,ms[145]=ms[25]=1,Yo[145]=Yo[25]=-1,Zo[145]=Zo[25]=0,Ko[145]=Ko[25]=0,ts[70]=ts[100]=0,ns[70]=ns[100]=1,is[70]=is[100]=0,as[70]=as[100]=-1,ls[70]=ls[100]=0,cs[70]=cs[100]=1,us[70]=us[100]=0,ds[70]=ds[100]=-1,hs[70]=hs[100]=1,qo[70]=qo[100]=1,Wo[70]=Wo[100]=0,Xo[70]=Xo[100]=0,ts[101]=ts[69]=0,ns[101]=ns[69]=1,is[101]=is[69]=0,qo[101]=qo[69]=1,Wo[101]=Wo[69]=0,Xo[101]=Xo[69]=0,fs[149]=fs[21]=0,ps[149]=ps[21]=1,ms[149]=ms[21]=1,Yo[149]=Yo[21]=-1,Zo[149]=Zo[21]=0,Ko[149]=Ko[21]=0,as[86]=as[84]=-1,ls[86]=ls[84]=0,cs[86]=cs[84]=1,us[86]=us[84]=0,ds[86]=ds[84]=-1,hs[86]=hs[84]=1,Qo[89]=Qo[81]=0,Jo[89]=Jo[81]=-1,es[89]=es[81]=0,rs[89]=rs[81]=1,os[89]=os[81]=0,ss[89]=ss[81]=1,Qo[96]=Qo[74]=0,Jo[96]=Jo[74]=1,es[96]=es[74]=0,ts[96]=ts[74]=-1,ns[96]=ns[74]=0,is[96]=is[74]=1,us[96]=us[74]=1,ds[96]=ds[74]=0,hs[96]=hs[74]=0,qo[96]=qo[74]=1,Wo[96]=Wo[74]=0,Xo[96]=Xo[74]=1,Qo[24]=Qo[146]=0,Jo[24]=Jo[146]=-1,es[24]=es[146]=1,as[24]=as[146]=1,ls[24]=ls[146]=0,cs[24]=cs[146]=1,rs[24]=rs[146]=0,os[24]=os[146]=1,ss[24]=ss[146]=1,Yo[24]=Yo[146]=0,Zo[24]=Zo[146]=-1,Ko[24]=Ko[146]=0,ts[6]=ts[164]=-1,ns[6]=ns[164]=0,is[6]=is[164]=1,as[6]=as[164]=-1,ls[6]=ls[164]=0,cs[6]=cs[164]=0,fs[6]=fs[164]=0,ps[6]=ps[164]=-1,ms[6]=ms[164]=1,us[6]=us[164]=1,ds[6]=ds[164]=0,hs[6]=hs[164]=0,rs[129]=rs[41]=0,os[129]=os[41]=1,ss[129]=ss[41]=1,fs[129]=fs[41]=0,ps[129]=ps[41]=1,ms[129]=ms[41]=0,qo[129]=qo[41]=-1,Wo[129]=Wo[41]=0,Xo[129]=Xo[41]=0,Yo[129]=Yo[41]=0,Zo[129]=Zo[41]=-1,Ko[129]=Ko[41]=0,as[66]=as[104]=0,ls[66]=ls[104]=1,cs[66]=cs[104]=0,rs[66]=rs[104]=-1,os[66]=os[104]=0,ss[66]=ss[104]=1,us[66]=us[104]=0,ds[66]=ds[104]=-1,hs[66]=hs[104]=0,qo[66]=qo[104]=0,Wo[66]=Wo[104]=-1,Xo[66]=Xo[104]=1,Qo[144]=Qo[26]=-1,Jo[144]=Jo[26]=0,es[144]=es[26]=0,fs[144]=fs[26]=1,ps[144]=ps[26]=0,ms[144]=ms[26]=1,us[144]=us[26]=0,ds[144]=ds[26]=1,hs[144]=hs[26]=1,Yo[144]=Yo[26]=-1,Zo[144]=Zo[26]=0,Ko[144]=Ko[26]=1,ts[36]=ts[134]=0,ns[36]=ns[134]=1,is[36]=is[134]=1,as[36]=as[134]=0,ls[36]=ls[134]=1,cs[36]=cs[134]=0,qo[36]=qo[134]=0,Wo[36]=Wo[134]=-1,Xo[36]=Xo[134]=1,Yo[36]=Yo[134]=1,Zo[36]=Zo[134]=0,Ko[36]=Ko[134]=0,Qo[9]=Qo[161]=-1,Jo[9]=Jo[161]=0,es[9]=es[161]=0,ts[9]=ts[161]=0,ns[9]=ns[161]=-1,is[9]=is[161]=0,rs[9]=rs[161]=1,os[9]=os[161]=0,ss[9]=ss[161]=0,fs[9]=fs[161]=1,ps[9]=ps[161]=0,ms[9]=ms[161]=1,Qo[136]=0,Jo[136]=1,es[136]=1,ts[136]=0,ns[136]=1,is[136]=0,as[136]=-1,ls[136]=0,cs[136]=1,rs[136]=-1,os[136]=0,ss[136]=0,fs[136]=0,ps[136]=-1,ms[136]=0,us[136]=0,ds[136]=-1,hs[136]=1,qo[136]=1,Wo[136]=0,Xo[136]=0,Yo[136]=1,Zo[136]=0,Ko[136]=1,Qo[34]=0,Jo[34]=-1,es[34]=0,ts[34]=0,ns[34]=-1,is[34]=1,as[34]=1,ls[34]=0,cs[34]=0,rs[34]=1,os[34]=0,ss[34]=1,fs[34]=0,ps[34]=1,ms[34]=1,us[34]=0,ds[34]=1,hs[34]=0,qo[34]=-1,Wo[34]=0,Xo[34]=1,Yo[34]=-1,Zo[34]=0,Ko[34]=0,Qo[35]=0,Jo[35]=1,es[35]=1,ts[35]=0,ns[35]=-1,is[35]=1,as[35]=1,ls[35]=0,cs[35]=0,rs[35]=-1,os[35]=0,ss[35]=0,fs[35]=0,ps[35]=-1,ms[35]=0,us[35]=0,ds[35]=1,hs[35]=0,qo[35]=-1,Wo[35]=0,Xo[35]=1,Yo[35]=1,Zo[35]=0,Ko[35]=1,Qo[153]=0,Jo[153]=1,es[153]=1,rs[153]=-1,os[153]=0,ss[153]=0,fs[153]=0,ps[153]=-1,ms[153]=0,Yo[153]=1,Zo[153]=0,Ko[153]=1,ts[102]=0,ns[102]=-1,is[102]=1,as[102]=1,ls[102]=0,cs[102]=0,us[102]=0,ds[102]=1,hs[102]=0,qo[102]=-1,Wo[102]=0,Xo[102]=1,Qo[155]=0,Jo[155]=-1,es[155]=0,rs[155]=1,os[155]=0,ss[155]=1,fs[155]=0,ps[155]=1,ms[155]=1,Yo[155]=-1,Zo[155]=0,Ko[155]=0,ts[103]=0,ns[103]=1,is[103]=0,as[103]=-1,ls[103]=0,cs[103]=1,us[103]=0,ds[103]=-1,hs[103]=1,qo[103]=1,Wo[103]=0,Xo[103]=0,Qo[152]=0,Jo[152]=1,es[152]=1,as[152]=-1,ls[152]=0,cs[152]=1,rs[152]=-1,os[152]=0,ss[152]=0,fs[152]=0,ps[152]=-1,ms[152]=0,us[152]=0,ds[152]=-1,hs[152]=1,Yo[152]=1,Zo[152]=0,Ko[152]=1,Qo[156]=0,Jo[156]=-1,es[156]=1,as[156]=1,ls[156]=0,cs[156]=1,rs[156]=-1,os[156]=0,ss[156]=0,fs[156]=0,ps[156]=-1,ms[156]=0,us[156]=0,ds[156]=1,hs[156]=1,Yo[156]=-1,Zo[156]=0,Ko[156]=1,Qo[137]=0,Jo[137]=1,es[137]=1,ts[137]=0,ns[137]=1,is[137]=0,rs[137]=-1,os[137]=0,ss[137]=0,fs[137]=0,ps[137]=-1,ms[137]=0,qo[137]=1,Wo[137]=0,Xo[137]=0,Yo[137]=1,Zo[137]=0,Ko[137]=1,Qo[139]=0,Jo[139]=1,es[139]=1,ts[139]=0,ns[139]=-1,is[139]=0,rs[139]=1,os[139]=0,ss[139]=0,fs[139]=0,ps[139]=1,ms[139]=0,qo[139]=-1,Wo[139]=0,Xo[139]=0,Yo[139]=1,Zo[139]=0,Ko[139]=1,Qo[98]=0,Jo[98]=-1,es[98]=0,ts[98]=0,ns[98]=-1,is[98]=1,as[98]=1,ls[98]=0,cs[98]=0,rs[98]=1,os[98]=0,ss[98]=1,us[98]=0,ds[98]=1,hs[98]=0,qo[98]=-1,Wo[98]=0,Xo[98]=1,Qo[99]=0,Jo[99]=1,es[99]=0,ts[99]=0,ns[99]=-1,is[99]=1,as[99]=1,ls[99]=0,cs[99]=0,rs[99]=-1,os[99]=0,ss[99]=1,us[99]=0,ds[99]=-1,hs[99]=0,qo[99]=1,Wo[99]=0,Xo[99]=1,ts[38]=0,ns[38]=-1,is[38]=1,as[38]=1,ls[38]=0,cs[38]=0,fs[38]=0,ps[38]=1,ms[38]=1,us[38]=0,ds[38]=1,hs[38]=0,qo[38]=-1,Wo[38]=0,Xo[38]=1,Yo[38]=-1,Zo[38]=0,Ko[38]=0,ts[39]=0,ns[39]=1,is[39]=1,as[39]=-1,ls[39]=0,cs[39]=0,fs[39]=0,ps[39]=-1,ms[39]=1,us[39]=0,ds[39]=1,hs[39]=0,qo[39]=-1,Wo[39]=0,Xo[39]=1,Yo[39]=1,Zo[39]=0,Ko[39]=0;var qO=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},WO=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},XO=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},YO=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},ZO=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},KO=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},QO=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},JO=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},mr=[],cr=[],Nr=[],Ar=[],Yr=[],Hr=[],gs=[],ys=[];Ar[1]=Yr[1]=18,Ar[169]=Yr[169]=18,Nr[4]=cr[4]=12,Nr[166]=cr[166]=12,mr[16]=ys[16]=4,mr[154]=ys[154]=4,Hr[64]=gs[64]=22,Hr[106]=gs[106]=22,Nr[2]=Hr[2]=17,Ar[2]=Yr[2]=18,Nr[168]=Hr[168]=17,Ar[168]=Yr[168]=18,mr[8]=Ar[8]=9,cr[8]=Nr[8]=12,mr[162]=Ar[162]=9,cr[162]=Nr[162]=12,mr[32]=ys[32]=4,cr[32]=gs[32]=1,mr[138]=ys[138]=4,cr[138]=gs[138]=1,Yr[128]=ys[128]=21,Hr[128]=gs[128]=22,Yr[42]=ys[42]=21,Hr[42]=gs[42]=22,cr[5]=Yr[5]=14,cr[165]=Yr[165]=14,Nr[20]=ys[20]=6,Nr[150]=ys[150]=6,mr[80]=Hr[80]=11,mr[90]=Hr[90]=11,Ar[65]=gs[65]=3,Ar[105]=gs[105]=3,mr[160]=Hr[160]=11,cr[160]=Yr[160]=14,mr[10]=Hr[10]=11,cr[10]=Yr[10]=14,Nr[130]=ys[130]=6,Ar[130]=gs[130]=3,Nr[40]=ys[40]=6,Ar[40]=gs[40]=3,cr[101]=gs[101]=1,cr[69]=gs[69]=1,Yr[149]=ys[149]=21,Yr[21]=ys[21]=21,Nr[86]=Hr[86]=17,Nr[84]=Hr[84]=17,mr[89]=Ar[89]=9,mr[81]=Ar[81]=9,mr[96]=gs[96]=0,cr[96]=Hr[96]=15,mr[74]=gs[74]=0,cr[74]=Hr[74]=15,mr[24]=Nr[24]=8,Ar[24]=ys[24]=7,mr[146]=Nr[146]=8,Ar[146]=ys[146]=7,cr[6]=Hr[6]=15,Nr[6]=Yr[6]=16,cr[164]=Hr[164]=15,Nr[164]=Yr[164]=16,Ar[129]=ys[129]=7,Yr[129]=gs[129]=20,Ar[41]=ys[41]=7,Yr[41]=gs[41]=20,Nr[66]=gs[66]=2,Ar[66]=Hr[66]=19,Nr[104]=gs[104]=2,Ar[104]=Hr[104]=19,mr[144]=Yr[144]=10,Hr[144]=ys[144]=23,mr[26]=Yr[26]=10,Hr[26]=ys[26]=23,cr[36]=ys[36]=5,Nr[36]=gs[36]=2,cr[134]=ys[134]=5,Nr[134]=gs[134]=2,mr[9]=Yr[9]=10,cr[9]=Ar[9]=13,mr[161]=Yr[161]=10,cr[161]=Ar[161]=13,cr[37]=ys[37]=5,Yr[37]=gs[37]=20,cr[133]=ys[133]=5,Yr[133]=gs[133]=20,Nr[148]=Yr[148]=16,Hr[148]=ys[148]=23,Nr[22]=Yr[22]=16,Hr[22]=ys[22]=23,mr[82]=Nr[82]=8,Ar[82]=Hr[82]=19,mr[88]=Nr[88]=8,Ar[88]=Hr[88]=19,mr[73]=gs[73]=0,cr[73]=Ar[73]=13,mr[97]=gs[97]=0,cr[97]=Ar[97]=13,mr[145]=Ar[145]=9,Yr[145]=ys[145]=21,mr[25]=Ar[25]=9,Yr[25]=ys[25]=21,cr[70]=gs[70]=1,Nr[70]=Hr[70]=17,cr[100]=gs[100]=1,Nr[100]=Hr[100]=17,mr[34]=Ar[34]=9,cr[34]=Nr[34]=12,Yr[34]=ys[34]=21,Hr[34]=gs[34]=22,mr[136]=ys[136]=4,cr[136]=gs[136]=1,Nr[136]=Hr[136]=17,Ar[136]=Yr[136]=18,mr[35]=ys[35]=4,cr[35]=Nr[35]=12,Ar[35]=Yr[35]=18,Hr[35]=gs[35]=22,mr[153]=ys[153]=4,Ar[153]=Yr[153]=18,cr[102]=Nr[102]=12,Hr[102]=gs[102]=22,mr[155]=Ar[155]=9,Yr[155]=ys[155]=23,cr[103]=gs[103]=1,Nr[103]=Hr[103]=17,mr[152]=ys[152]=4,Nr[152]=Hr[152]=17,Ar[152]=Yr[152]=18,mr[156]=Nr[156]=8,Ar[156]=Yr[156]=18,Hr[156]=ys[156]=23,mr[137]=ys[137]=4,cr[137]=gs[137]=1,Ar[137]=Yr[137]=18,mr[139]=ys[139]=4,cr[139]=Ar[139]=13,Yr[139]=gs[139]=20,mr[98]=Ar[98]=9,cr[98]=Nr[98]=12,Hr[98]=gs[98]=22,mr[99]=gs[99]=0,cr[99]=Nr[99]=12,Ar[99]=Hr[99]=19,cr[38]=Nr[38]=12,Yr[38]=ys[38]=21,Hr[38]=gs[38]=22,cr[39]=ys[39]=5,Nr[39]=Yr[39]=16,Hr[39]=gs[39]=22;var Xi=[];function nL(n,e,t){return function xve(n){return(n>0)-(n<0)||+n}((e[0]-n[0])*(t[1]-e[1])-(t[0]-e[0])*(e[1]-n[1]))}function _j(n,e){return e.geometry.coordinates[0].every(function(t){return PU(Tb(t),n)})}Xi[1]=Xi[169]=qO,Xi[4]=Xi[166]=WO,Xi[16]=Xi[154]=XO,Xi[64]=Xi[106]=YO,Xi[168]=Xi[2]=ZO,Xi[162]=Xi[8]=KO,Xi[138]=Xi[32]=QO,Xi[42]=Xi[128]=JO,Xi[5]=Xi[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Xi[20]=Xi[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Xi[80]=Xi[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Xi[65]=Xi[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Xi[160]=Xi[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Xi[130]=Xi[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Xi[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Xi[101]=Xi[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Xi[149]=Xi[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Xi[86]=Xi[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Xi[89]=Xi[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Xi[96]=Xi[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Xi[24]=Xi[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Xi[6]=Xi[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Xi[129]=Xi[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Xi[66]=Xi[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Xi[144]=Xi[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Xi[36]=Xi[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Xi[9]=Xi[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Xi[37]=Xi[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Xi[148]=Xi[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Xi[82]=Xi[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Xi[73]=Xi[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Xi[145]=Xi[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Xi[70]=Xi[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Xi[34]=function(n){return[JO(n),KO(n)]},Xi[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Xi[136]=function(n){return[QO(n),ZO(n)]},Xi[153]=function(n){return[XO(n),qO(n)]},Xi[102]=function(n){return[WO(n),YO(n)]},Xi[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Xi[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Xi[152]=function(n){return[XO(n),ZO(n)]},Xi[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Xi[137]=function(n){return[QO(n),qO(n)]},Xi[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Xi[98]=function(n){return[KO(n),YO(n)]},Xi[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Xi[38]=function(n){return[WO(n),JO(n)]},Xi[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};const vj=function(){function n(e){this.id=n.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(e){return e.join(",")},n.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},n.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},n.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,o=i.to;if(r.coordinates[0]-e.coordinates[0]>=0&&o.coordinates[0]-e.coordinates[0]<0)return 1;if(r.coordinates[0]-e.coordinates[0]<0&&o.coordinates[0]-e.coordinates[0]>=0)return-1;if(r.coordinates[0]-e.coordinates[0]==0&&o.coordinates[0]-e.coordinates[0]==0)return r.coordinates[1]-e.coordinates[1]>=0||o.coordinates[1]-e.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1];var a=nL(e.coordinates,r.coordinates,o.coordinates);return a<0?1:a>0?-1:Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2)-(Math.pow(o.coordinates[0]-e.coordinates[0],2)+Math.pow(o.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},n.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},n}(),Ive=function(){function n(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return $D([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(e){return nL(e.from.coordinates,e.to.coordinates,this.to.coordinates)},n}(),Dve=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},n.prototype.get=function(e){return this.edges[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(e){this.edges.forEach(e)},n.prototype.map=function(e){return this.edges.map(e)},n.prototype.some=function(e){return this.edges.some(e)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(a,h,m){return h.from.coordinates[1]>e.edges[a].from.coordinates[1]&&(a=m),a},0),i=(0===t?this.length:t)-1,r=(t+1)%this.length,o=nL(this.edges[i].from.coordinates,this.edges[t].from.coordinates,this.edges[r].from.coordinates);return 0===o?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:o>0},n.prototype.toMultiPoint=function(){return function SU(n,e,t){return void 0===t&&(t={}),tg({type:"MultiPoint",coordinates:n},e,t)}(this.edges.map(function(e){return e.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=zD([e])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function Lge(n){return function Oge(n,e){void 0===e&&(e={});var t=Number(n[0]),i=Number(n[1]),r=Number(n[2]),o=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[t,i];return zD([[a,[r,i],[r,o],[t,o],a]],e.properties,{bbox:n,id:e.id})}(tge(n))}(this.toPolygon())},n.findEdgeRingContaining=function(e,t){var r,o,i=e.getEnvelope();return t.forEach(function(a){var h=a.getEnvelope();if(o&&(r=o.getEnvelope()),!function wve(n,e){var t=n.geometry.coordinates[0].map(function(a){return a[0]}),i=n.geometry.coordinates[0].map(function(a){return a[1]}),r=e.geometry.coordinates[0].map(function(a){return a[0]}),o=e.geometry.coordinates[0].map(function(a){return a[1]});return Math.max.apply(null,t)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,o)&&Math.min.apply(null,t)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,o)}(h,i)&&_j(h,i)){for(var m=e.map(function(j){return j.from.coordinates}),_=void 0,C=function(j){a.some(function(q){return function Eve(n,e){return n[0]===e[0]&&n[1]===e[1]}(j,q.from.coordinates)})||(_=j)},T=0,P=m;T<P.length;T++)C(P[T]);_&&a.inside(Tb(_))&&(!o||_j(r,h))&&(o=a)}}),o},n.prototype.inside=function(e){return PU(e,this.toPolygon())},n}();function Tj(n){for(var e=n,t=[];e.parent;)t.unshift(e),e=e.parent;return t}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(e){!function Ave(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var t=new n;return jD(e,function(i){(function ige(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function Yme(n,e,t,i){var r=t;IE(n,function(o,a,h,m,_){r=0===a&&void 0===t?o:e(r,o,a,h,m,_)},i)}(i,function(r,o){if(r){var a=t.getNode(r),h=t.getNode(o);t.addEdge(a,h)}return o})}),t},n.prototype.getNode=function(e){var t=vj.buildId(e),i=this.nodes[t];return i||(i=this.nodes[t]=new vj(e)),i},n.prototype.addEdge=function(e,t){var i=new Ive(e,t),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},n.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var i=e.getOuterEdges().map(function(r){return r.to});this.removeNode(e),i.forEach(function(r){return t._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},n.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(i){return t._computeNextCWEdges(t.nodes[i])}):e.getOuterEdges().forEach(function(i,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(e,t){for(var r,o,i=e.getOuterEdges(),a=i.length-1;a>=0;--a){var h=i[a],m=h.symetric,_=void 0,C=void 0;h.label===t&&(_=h),m.label===t&&(C=m),_&&C&&(C&&(o=C),_&&(o&&(o.next=_,o=void 0),r||(r=_)))}o&&(o.next=r)},n.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){e.push(i);var r=i;do{r.label=t,r=r.next}while(!i.isEqual(r));t++}}),e},n.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){e._findIntersectionNodes(i).forEach(function(r){e._computeNextCCWEdges(r,i.label)})});var t=[];return this.edges.forEach(function(i){i.ring||t.push(e._findEdgeRing(i))}),t},n.prototype._findIntersectionNodes=function(e){var t=[],i=e,r=function(){var o=0;i.from.getOuterEdges().forEach(function(a){a.label===e.label&&++o}),o>1&&t.push(i.from),i=i.next};do{r()}while(!e.isEqual(i));return t},n.prototype._findEdgeRing=function(e){var t=e,i=new Dve;do{i.push(t),t.ring=i,t=t.next}while(!e.isEqual(t));return i},n.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(i){return t.removeEdge(i)}),e.innerEdges.forEach(function(i){return t.removeEdge(i)}),delete this.nodes[e.id]},n.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}(),Ce(3198),Ce(3367),Ce(3282);var ZD={search:function(n,e,t,i){n.cleanDirty();var r=(i=i||{}).heuristic||ZD.heuristics.manhattan,o=i.closest||!1,a=function Hve(){return new Dj(function(n){return n.f})}(),h=e;for(e.h=r(e,t),a.push(e);a.size()>0;){var m=a.pop();if(m===t)return Tj(m);m.closed=!0;for(var _=n.neighbors(m),C=0,T=_.length;C<T;++C){var P=_[C];if(!P.closed&&!P.isWall()){var O=m.g+P.getCost(m),j=P.visited;(!j||O<P.g)&&(P.visited=!0,P.parent=m,P.h=P.h||r(P,t),P.g=O,P.f=P.g+P.h,n.markDirty(P),o&&(P.h<h.h||P.h===h.h&&P.g<h.g)&&(h=P),j?a.rescoreElement(P):a.push(P))}}}return o?Tj(h):[]},heuristics:{manhattan:function(n,e){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},diagonal:function(n,e){var i=Math.sqrt(2),r=Math.abs(e.x-n.x),o=Math.abs(e.y-n.y);return 1*(r+o)+(i-2)*Math.min(r,o)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function Ab(n,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<n.length;t++){this.grid[t]=[];for(var i=0,r=n[t];i<r.length;i++){var o=new KD(t,i,r[i]);this.grid[t][i]=o,this.nodes.push(o)}}this.init()}function KD(n,e,t){this.x=n,this.y=e,this.weight=t}function Dj(n){this.content=[],this.scoreFunction=n}function rL(){this._=null}function QD(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function kE(n,e){var t=e,i=e.R,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function PE(n,e){var t=e,i=e.L,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function Aj(n){for(;n.L;)n=n.L;return n}Ab.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)ZD.cleanNode(this.nodes[n])},Ab.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)ZD.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},Ab.prototype.markDirty=function(n){this.dirtyNodes.push(n)},Ab.prototype.neighbors=function(n){var e=[],t=n.x,i=n.y,r=this.grid;return r[t-1]&&r[t-1][i]&&e.push(r[t-1][i]),r[t+1]&&r[t+1][i]&&e.push(r[t+1][i]),r[t]&&r[t][i-1]&&e.push(r[t][i-1]),r[t]&&r[t][i+1]&&e.push(r[t][i+1]),this.diagonal&&(r[t-1]&&r[t-1][i-1]&&e.push(r[t-1][i-1]),r[t+1]&&r[t+1][i-1]&&e.push(r[t+1][i-1]),r[t-1]&&r[t-1][i+1]&&e.push(r[t-1][i+1]),r[t+1]&&r[t+1][i+1]&&e.push(r[t+1][i+1])),e},Ab.prototype.toString=function(){for(var t,i,r,o,n=[],e=this.grid,a=0,h=e.length;a<h;a++){for(t=[],r=0,o=(i=e[a]).length;r<o;r++)t.push(i[r].weight);n.push(t.join(" "))}return n.join("\n")},KD.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},KD.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},KD.prototype.isWall=function(){return 0===this.weight},Dj.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,i=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[t]=e,this.content[n]=i,n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],i=this.scoreFunction(t);;){var h,r=n+1<<1,o=r-1,a=null;if(o<e&&(h=this.scoreFunction(this.content[o]))<i&&(a=o),r<e&&this.scoreFunction(this.content[r])<(null===a?i:h)&&(a=r),null===a)break;this.content[n]=this.content[a],this.content[a]=t,n=a}}},rL.prototype={constructor:rL,insert:function(n,e){var t,i,r;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=Aj(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)t===(i=t.U).L?(r=i.R)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.R&&(kE(this,t),t=(n=t).U),t.C=!1,i.C=!0,PE(this,i)):(r=i.L)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.L&&(PE(this,t),t=(n=t).U),t.C=!1,i.C=!0,kE(this,i)),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,o,a,e=n.U,i=n.L,r=n.R;if(o=i?r?Aj(r):i:r,e?e.L===n?e.L=o:e.R=o:this._=o,i&&r?(a=o.C,o.C=n.C,o.L=i,i.U=o,o!==r?(e=o.U,o.U=n.U,e.L=n=o.R,o.R=r,r.U=o):(o.U=e,e=o,n=o.R)):(a=n.C,n=o),n&&(n.U=e),!a){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===e.L){if((t=e.R).C&&(t.C=!1,e.C=!0,kE(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,PE(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,kE(this,e),n=this._;break}}else if((t=e.L).C&&(t.C=!1,e.C=!0,PE(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,kE(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,PE(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};const Mj=rL;function RE(n,e,t,i){var r=[null,null],o=sd.push(r)-1;return r.left=n,r.right=e,t&&JD(r,n,e,t),i&&JD(r,e,n,i),Ph[n.index].halfedges.push(o),Ph[e.index].halfedges.push(o),r}function OE(n,e,t){var i=[e,t];return i.left=n,i}function JD(n,e,t,i){n[0]||n[1]?n.left===t?n[1]=i:n[0]=i:(n[0]=i,n.left=e,n.right=t)}function Wve(n,e,t,i,r){var q,o=n[0],a=n[1],h=o[0],m=o[1],T=0,P=1,O=a[0]-h,j=a[1]-m;if(q=e-h,O||!(q>0)){if(q/=O,O<0){if(q<T)return;q<P&&(P=q)}else if(O>0){if(q>P)return;q>T&&(T=q)}if(q=i-h,O||!(q<0)){if(q/=O,O<0){if(q>P)return;q>T&&(T=q)}else if(O>0){if(q<T)return;q<P&&(P=q)}if(q=t-m,j||!(q>0)){if(q/=j,j<0){if(q<T)return;q<P&&(P=q)}else if(j>0){if(q>P)return;q>T&&(T=q)}if(q=r-m,j||!(q<0)){if(q/=j,j<0){if(q>P)return;q>T&&(T=q)}else if(j>0){if(q<T)return;q<P&&(P=q)}return!(T>0)&&!(P<1)||(T>0&&(n[0]=[h+T*O,m+T*j]),P<1&&(n[1]=[h+P*O,m+P*j])),!0}}}}}function Xve(n,e,t,i,r){var o=n[1];if(o)return!0;var q,_e,a=n[0],h=n.left,m=n.right,_=h[0],C=h[1],T=m[0],P=m[1],O=(_+T)/2;if(P===C){if(O<e||O>=i)return;if(_>T){if(a){if(a[1]>=r)return}else a=[O,t];o=[O,r]}else{if(a){if(a[1]<t)return}else a=[O,r];o=[O,t]}}else if(_e=(C+P)/2-(q=(_-T)/(P-C))*O,q<-1||q>1)if(_>T){if(a){if(a[1]>=r)return}else a=[(t-_e)/q,t];o=[(r-_e)/q,r]}else{if(a){if(a[1]<t)return}else a=[(r-_e)/q,r];o=[(t-_e)/q,t]}else if(C<P){if(a){if(a[0]>=i)return}else a=[e,q*e+_e];o=[i,q*i+_e]}else{if(a){if(a[0]<e)return}else a=[i,q*i+_e];o=[e,q*e+_e]}return n[0]=a,n[1]=o,!0}function Kve(n,e){var t=n.site,i=e.left,r=e.right;return t===r&&(r=i,i=t),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(t===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function kj(n,e){return e[+(e.left!==n.site)]}function Qve(n,e){return e[+(e.left===n.site)]}var oL,Pj=[];function tye(){QD(this),this.x=this.y=this.arc=this.site=this.cy=null}function Mb(n){var e=n.P,t=n.N;if(e&&t){var i=e.site,r=n.site,o=t.site;if(i!==o){var a=r[0],h=r[1],m=i[0]-a,_=i[1]-h,C=o[0]-a,T=o[1]-h,P=2*(m*T-_*C);if(!(P>=-sye)){var O=m*m+_*_,j=C*C+T*T,q=(T*O-_*j)/P,_e=(m*j-C*O)/P,me=Pj.pop()||new tye;me.arc=n,me.site=r,me.x=q+a,me.y=(me.cy=_e+h)+Math.sqrt(q*q+_e*_e),n.circle=me;for(var te=null,Pe=LE._;Pe;)if(me.y<Pe.y||me.y===Pe.y&&me.x<=Pe.x){if(!Pe.L){te=Pe.P;break}Pe=Pe.L}else{if(!Pe.R){te=Pe;break}Pe=Pe.R}LE.insert(te,me),te||(oL=me)}}}}function kb(n){var e=n.circle;e&&(e.P||(oL=e.N),LE.remove(e),Pj.push(e),QD(e),n.circle=null)}var Rj=[];function nye(){QD(this),this.edge=this.site=this.circle=null}function Oj(n){var e=Rj.pop()||new nye;return e.site=n,e}function sL(n){kb(n),Pb.remove(n),Rj.push(n),QD(n)}function iye(n){var e=n.circle,t=e.x,i=e.cy,r=[t,i],o=n.P,a=n.N,h=[n];sL(n);for(var m=o;m.circle&&Math.abs(t-m.circle.x)<Nl&&Math.abs(i-m.circle.cy)<Nl;)o=m.P,h.unshift(m),sL(m),m=o;h.unshift(m),kb(m);for(var _=a;_.circle&&Math.abs(t-_.circle.x)<Nl&&Math.abs(i-_.circle.cy)<Nl;)a=_.N,h.push(_),sL(_),_=a;h.push(_),kb(_);var T,C=h.length;for(T=1;T<C;++T)JD((_=h[T]).edge,(m=h[T-1]).site,_.site,r);(_=h[C-1]).edge=RE((m=h[0]).site,_.site,null,r),Mb(m),Mb(_)}function rye(n){for(var i,r,o,a,e=n[0],t=n[1],h=Pb._;h;)if((o=Lj(h,t)-e)>Nl)h=h.L;else{if(!((a=e-oye(h,t))>Nl)){o>-Nl?(i=h.P,r=h):a>-Nl?(i=h,r=h.N):i=r=h;break}if(!h.R){i=h;break}h=h.R}!function Zve(n){Ph[n.index]={site:n,halfedges:[]}}(n);var m=Oj(n);if(Pb.insert(i,m),i||r){if(i===r)return kb(i),r=Oj(i.site),Pb.insert(m,r),m.edge=r.edge=RE(i.site,m.site),Mb(i),void Mb(r);if(!r)return void(m.edge=RE(i.site,m.site));kb(i),kb(r);var _=i.site,C=_[0],T=_[1],P=n[0]-C,O=n[1]-T,j=r.site,q=j[0]-C,_e=j[1]-T,me=2*(P*_e-O*q),te=P*P+O*O,Pe=q*q+_e*_e,_t=[(_e*te-O*Pe)/me+C,(P*Pe-q*te)/me+T];JD(r.edge,_,j,_t),m.edge=RE(_,n,null,_t),r.edge=RE(n,j,null,_t),Mb(i),Mb(r)}}function Lj(n,e){var t=n.site,i=t[0],r=t[1],o=r-e;if(!o)return i;var a=n.P;if(!a)return-1/0;var h=(t=a.site)[0],m=t[1],_=m-e;if(!_)return h;var C=h-i,T=1/o-1/_,P=C/_;return T?(-P+Math.sqrt(P*P-2*T*(C*C/(-2*_)-m+_/2+r-o/2)))/T+i:(i+h)/2}function oye(n,e){var t=n.N;if(t)return Lj(t,e);var i=n.site;return i[1]===e?i[0]:1/0}var Pb,Ph,LE,sd,Nl=1e-6,sye=1e-12;function aye(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function lye(n,e){return e[1]-n[1]||e[0]-n[0]}function Nj(n,e){var i,r,o,t=n.sort(lye).pop();for(sd=[],Ph=new Array(n.length),Pb=new Mj,LE=new Mj;;)if(o=oL,t&&(!o||t[1]<o.y||t[1]===o.y&&t[0]<o.x))(t[0]!==i||t[1]!==r)&&(rye(t),i=t[0],r=t[1]),t=n.pop();else{if(!o)break;iye(o.arc)}if(function Jve(){for(var t,i,r,o,n=0,e=Ph.length;n<e;++n)if((t=Ph[n])&&(o=(i=t.halfedges).length)){var a=new Array(o),h=new Array(o);for(r=0;r<o;++r)a[r]=r,h[r]=Kve(t,sd[i[r]]);for(a.sort(function(m,_){return h[_]-h[m]}),r=0;r<o;++r)h[r]=i[a[r]];for(r=0;r<o;++r)i[r]=h[r]}}(),e){var a=+e[0][0],h=+e[0][1],m=+e[1][0],_=+e[1][1];(function Yve(n,e,t,i){for(var o,r=sd.length;r--;)Xve(o=sd[r],n,e,t,i)&&Wve(o,n,e,t,i)&&(Math.abs(o[0][0]-o[1][0])>Nl||Math.abs(o[0][1]-o[1][1])>Nl)||delete sd[r]})(a,h,m,_),function eye(n,e,t,i){var o,a,h,m,_,C,T,P,O,j,q,_e,r=Ph.length,me=!0;for(o=0;o<r;++o)if(a=Ph[o]){for(h=a.site,m=(_=a.halfedges).length;m--;)sd[_[m]]||_.splice(m,1);for(m=0,C=_.length;m<C;)q=(j=Qve(a,sd[_[m]]))[0],_e=j[1],P=(T=kj(a,sd[_[++m%C]]))[0],O=T[1],(Math.abs(q-P)>Nl||Math.abs(_e-O)>Nl)&&(_.splice(m,0,sd.push(OE(h,j,Math.abs(q-n)<Nl&&i-_e>Nl?[n,Math.abs(P-n)<Nl?O:i]:Math.abs(_e-i)<Nl&&t-q>Nl?[Math.abs(O-i)<Nl?P:t,i]:Math.abs(q-t)<Nl&&_e-e>Nl?[t,Math.abs(P-t)<Nl?O:e]:Math.abs(_e-e)<Nl&&q-n>Nl?[Math.abs(O-e)<Nl?P:n,e]:null))-1),++C);C&&(me=!1)}if(me){var te,Pe,_t,Dt=1/0;for(o=0,me=null;o<r;++o)(a=Ph[o])&&(_t=(te=(h=a.site)[0]-n)*te+(Pe=h[1]-e)*Pe)<Dt&&(Dt=_t,me=a);if(me){var Yt=[n,e],Wt=[n,i],sn=[t,i],rt=[t,e];me.halfedges.push(sd.push(OE(h=me.site,Yt,Wt))-1,sd.push(OE(h,Wt,sn))-1,sd.push(OE(h,sn,rt))-1,sd.push(OE(h,rt,Yt))-1)}}for(o=0;o<r;++o)(a=Ph[o])&&(a.halfedges.length||delete Ph[o])}(a,h,m,_)}this.edges=sd,this.cells=Ph,Pb=LE=sd=Ph=null}function __(){return new e2}function e2(){this.reset()}Nj.prototype={constructor:Nj,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return kj(e,n[i])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,i){if(h=(o=t.halfedges).length)for(var o,h,m,r=t.site,a=-1,_=e[o[h-1]],C=_.left===r?_.right:_.left;++a<h;)m=C,C=(_=e[o[a]]).left===r?_.right:_.left,m&&C&&i<m.index&&i<C.index&&aye(r,m,C)<0&&n.push([r.data,m.data,C.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var r,h,i=this,o=i._found||0,a=i.cells.length;!(h=i.cells[o]);)if(++o>=a)return null;var m=n-h.site[0],_=e-h.site[1],C=m*m+_*_;do{h=i.cells[r=o],o=null,h.halfedges.forEach(function(T){var P=i.edges[T],O=P.left;if(O!==h.site&&O||(O=P.right)){var j=n-O[0],q=e-O[1],_e=j*j+q*q;_e<C&&(C=_e,o=O.index)}})}while(null!==o);return i._found=r,null==t||C<=t*t?h.site:null}},Ce(8464),Ce(4855),e2.prototype={constructor:e2,reset:function(){this.s=this.t=0},add:function(n){Wj(t2,n,this.t),Wj(this,t2.s,this.s),this.s?this.t+=t2.t:this.s=t2.t},valueOf:function(){return this.s}};var t2=new e2;function Wj(n,e,t){var i=n.s=e+t,r=i-e;n.t=e-(i-r)+(t-r)}var ql=Math.PI,th=ql/2,Rb=2*ql,Il=ql/180,NE=(Math,Math.atan),Ob=Math.atan2,na=Math.cos,bs=(Math,Math,Math,Math,Math,Math.sin),ng=(Math,Math.sqrt);Math;function Lb(n){return n>1?th:n<-1?-th:Math.asin(n)}function bL(n,e){return[n>ql?n-Rb:n<-ql?n+Rb:n,e]}function bG(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}__(),__(),__(),bL.invert=bL,function $ye(n){1===n.length&&(n=function Vye(n){return function(e,t){return bG(n(e),t)}}(n))}(bG),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);__();function zL(){}function qG(n){return function(e,t){var i=na(e),r=na(t),o=n(i*r);return[o*r*bs(e),o*bs(t)]}}function qE(n){return function(e,t){var i=ng(e*e+t*t),r=n(i),o=bs(r),a=na(r);return[Ob(e*o,i*a),Lb(i&&t*o/i)]}}function VL(n,e){return[n,e]}__(),__(),__(),__(),function jG(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),zL.prototype={constructor:zL,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},na(30*Il),function GG(n){return function(e){var t=new zL;for(var i in n)t[i]=n[i];return t.stream=e,t}}({point:function(n,e){this.stream.point(n*Il,e*Il)}}),qG(function(n){return ng(2/(1+n))}).invert=qE(function(n){return 2*Lb(n/2)}),qG(function(n){return(n=function wye(n){return n>1?0:n<-1?ql:Math.acos(n)}(n))&&n/bs(n)}).invert=qE(function(n){return n}),VL.invert=VL,qE(NE),qE(Lb),qE(function(n){return 2*NE(n)});var D2=Ce(2574);const $b_mapbox_MAPBOX_ACCESS_TOKEN="pk.eyJ1IjoiYXNpZnVycmFobWFucGlhbCIsImEiOiJjbG5rM2YwYnMwNDk3MnBsa3BzZm9ydWk1In0.T8_ydpW5mGLxlqaTQgrxiQ",$b_mapbox_MAP_STYLE_URL="mapbox://styles/asifurrahmanpial/clnzn9x8w00bk01qmfn9e0zvy",$b_stripe_publishableKey="pk_test_51O9ZJlEtvqqTQS33qbqk96ThKuOJb6DEcjAB2hi25LmdF59wuQMtlqoe8OBJbsIBQ9kDUDP9AbTPKg95m9gFXKj700t7ItuLn9";let O0e=(()=>{class n{constructor(){}getCurrentPosition(){return new Promise((t,i)=>{navigator.geolocation.getCurrentPosition(r=>{t({lng:r.coords.longitude,lat:r.coords.latitude})},r=>{i(r)})})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const z0e=(0,CE.fo)("BarcodeScanner",{web:()=>Ce.e(7338).then(Ce.bind(Ce,7338)).then(n=>new n.BarcodeScannerWeb)});let $0e=(()=>{class n{constructor(t){this.router=t}scanQRCode(t){var i=this;return(0,$o.Z)(function*(){const{barcodes:r}=yield z0e.scan({formats:[]});if(r.length>0){const o=r[0].rawValue;console.log("Scanned QR Code Data:",o),console.log("Vehicle Data:",t);const a=i.extractRouteFromURL(o);a&&i.router.navigate([a],{state:{vehicleData:t}})}})()}extractRouteFromURL(t){try{const r=new URL(t).pathname;return r.startsWith("/")?r:null}catch{return null}}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Sl))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V0e(n,e){if(1&n){const t=Mv();on(0,"button",17),So("click",function(){return Gd(t),Bu(ca(2).startTracking())}),Jn(1," Start "),hn()}}function U0e(n,e){if(1&n){const t=Mv();on(0,"button",18),So("click",function(){return Gd(t),Bu(ca(2).stopTracking())}),Jn(1," Stop "),hn()}2&n&&lr("disabled",ca(2).isStopButtonDisabled)}function j0e(n,e){1&n&&(on(0,"div",19)(1,"mat-icon",20),Jn(2,"error_outline"),hn(),on(3,"span"),Jn(4,"Please Return To Serive Zone To Stop The Ride"),hn()())}function G0e(n,e){if(1&n&&(on(0,"div",6)(1,"div",7)(2,"div",8)(3,"h4",9)(4,"span",10),Jn(5," Distance (km) "),oo(6,"br"),Jn(7),hn()()(),on(8,"div",8)(9,"h4",9)(10,"span",10),Jn(11," Fare "),oo(12,"br"),Jn(13),hn()()(),on(14,"div",11)(15,"h4",9)(16,"span",10),Jn(17," Duration "),oo(18,"br"),on(19,"p"),Jn(20),hn()()()()(),oo(21,"div",12),on(22,"div",13),Rr(23,V0e,2,0,"button",14),Rr(24,U0e,2,1,"button",15),Rr(25,j0e,5,0,"div",16),hn()()),2&n){const t=ca();si(7),wc(" ",t.distance," "),si(6),wc(" ",t.fare," "),si(7),df(t.getFormattedTime(t.duration)),si(3),lr("ngIf",!t.isTracking),si(1),lr("ngIf",t.isTracking),si(1),lr("ngIf",t.isStopButtonDisabled)}}function H0e(n,e){1&n&&(on(0,"div",21)(1,"div",22)(2,"h2"),Jn(3,"Please Click On Vehicle To Book Ride"),hn()()())}let q0e=(()=>{class n{constructor(t,i,r,o,a,h,m){this.geolocationService=t,this.router=i,this.snackBar=r,this.qrScannerService=o,this.zone=a,this.route=h,this.authService=m,this.style=$b_mapbox_MAP_STYLE_URL,this.center=[90.4152,23.8041],this.vehicleMarkers={},this.isUserTracked=!1,this.hasBookedRide=!1,this.isTracking=!1,this.distance="0",this.duration=0,this.fare=0,this.features=[],this.vehicleLayersAndSources=[],this.isStopButtonDisabled=!1,this.realtimeLineString={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}};const _=this.router.getCurrentNavigation();_&&_.extras.state&&(this.hasBookedRide=_.extras.state.hasBookedRide,this.vehicleData=_.extras.state.vehicleData,console.log("Vehicle Data:",this.vehicleData))}ngAfterViewInit(){(0,Hme.Z)()?this.initializeMapAndLayers().then(()=>{this.getUserLocation()}):console.error("WebGL is not supported.")}ngOnInit(){this.route.paramMap.subscribe(t=>{const i=window.history.state;i&&i.vehicleData&&(this.vehicleData=i.vehicleData,this.vehicleType=this.vehicleData.vehicleType),i&&i.email&&(this.email=i.email)})}initializeMapAndLayers(){var t=this;return(0,$o.Z)(function*(){return new Promise(i=>{const r=document.getElementById("map");r&&(r.innerHTML=""),t.map=new D2.Map({accessToken:$b_mapbox_MAPBOX_ACCESS_TOKEN,container:"map",style:t.style,zoom:11,center:t.center}),t.map.on("load",()=>{t.map.addSource("earthquakes",{type:"geojson",data:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"}),t.map.addSource("service-zone",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{propertyName:"Dhanmondi"},geometry:{type:"Polygon",coordinates:[[[90.35892535035822,23.73026803278084],[90.35520837612711,23.741986116751818],[90.35664893945409,23.75627514237472],[90.37305368023294,23.760285068091434],[90.38742786820114,23.750902124253813],[90.39116505525789,23.738605801049147],[90.39228358878836,23.715910635726928],[90.38384621283393,23.713632613448837],[90.36976908063457,23.724745099707334],[90.35892535035822,23.73026803278084]]]}},{type:"Feature",properties:{propertyName:"Gulshan 2"},geometry:{type:"Polygon",coordinates:[[[90.41069757560575,23.79680223178086],[90.41591465744375,23.799395564120303],[90.42154656002418,23.79224047027232],[90.42059268924055,23.79149337898222],[90.41482858798452,23.787121694309377],[90.41069757560575,23.79680223178086]]]}}]}}),t.map.addLayer({id:"service-zone-color",type:"fill",source:"service-zone",layout:{},paint:{"fill-color":"#1cdb63","fill-opacity":.5}}),t.map.addLayer({id:"outline",type:"line",source:"service-zone",layout:{},paint:{"line-color":"#000","line-width":3}}),t.map.addLayer({id:"earthquakes-layer",type:"circle",source:"earthquakes",paint:{"circle-radius":4,"circle-stroke-width":2,"circle-color":"red","circle-stroke-color":"white"}}),i()})})})()}isUserInServiceZone(t){var i=this;return(0,$o.Z)(function*(){return!!t&&i.map.queryRenderedFeatures(i.map.project(t),{layers:["service-zone-color"]}).length>0})()}getUserLocation(){var t=this;return(0,$o.Z)(function*(){t.vehicleLayersAndSources.forEach(i=>{t.map.getLayer(i)&&t.map.removeLayer(i),t.map.getSource(i)&&t.map.removeSource(i)}),t.vehicleLayersAndSources=[],t.map||(yield t.initializeMapAndLayers());try{const i=yield MO.getCurrentPosition({enableHighAccuracy:!0});if(i){const{longitude:r,latitude:o}=i.coords,a=[r,o];console.log("User location:",i),t.isUserTracked=!0,t.flyToPosition(a,!0),t.isTracking||t.authService.getVehicles().then(h=>{if(h){const m=t.findVehiclesWithinRadius(a,h);m&&m.length>0?(console.log("Nearby vehicles:",m),m.forEach(_=>{t.addVehicleMarker(_)})):console.log("No vehicles found within the specified radius.")}})}else console.error("Geolocation.getCurrentPosition returned no position.");return i}catch(i){return void console.error("Error getting user location:",i)}})()}findVehiclesWithinRadius(t,i,r=1){const o=Tb(t);return function VD(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}(i.map(m=>Tb(m.coordinates,{_id:m._id,title:m.title,vehicleType:m.vehicleType,serviceZone:m.serviceZone,price:m.price}))).features.filter(m=>OU(o,m)<=r).map(m=>{const _=m.geometry.coordinates;return{_id:m.properties._id,coordinates:[_[0],_[1]],title:m.properties.title,vehicleType:m.properties.vehicleType,serviceZone:m.properties.serviceZone,price:m.properties.price}})}addVehicleMarker(t){const i=`Vehicles-${t.title}`,r=t.vehicleType,o=`Vehicles-points-${t.title}`;this.map.getLayer(o)&&(this.map.removeLayer(o),this.vehicleLayersAndSources=this.vehicleLayersAndSources.filter(h=>h!==o)),this.map.getSource(i)&&(this.map.removeSource(i),this.vehicleLayersAndSources=this.vehicleLayersAndSources.filter(h=>h!==i)),this.map.addSource(i,{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:{_id:t._id,title:t.title,vehicleType:t.vehicleType,serviceZone:t.serviceZone,fare:t.price}}]}}),this.map.loadImage("scooter"===t.vehicleType?"assets/scooter.png":"cycle"===t.vehicleType?"assets/cycle.png":"assets/marker.svg",(h,m)=>{if(h)throw h;m&&(this.map.hasImage(r)&&this.map.removeImage(r),this.map.addImage(r,m),this.map.addLayer({id:o,type:"symbol",source:i,layout:{"icon-image":r,"icon-size":.2}}))}),this.vehicleLayersAndSources.push(o),this.vehicleLayersAndSources.push(i),this.setupVehicleMarkerClickEvent(o)}setupVehicleMarkerClickEvent(t){this.map.on("click",t,i=>{if(i.features&&i.features.length>0){const r=i.features[0];if(r&&r.geometry&&r.geometry.coordinates.length>=2){const o=[r.geometry.coordinates[0],r.geometry.coordinates[1]],a=i.features[0].properties?.title,h=i.features[0].properties?.fare,m=i.features[0].properties?.vehicleType,_=i.features[0].properties?.serviceZone,T={vehicleId:i.features[0].properties?._id,coordinates:o,title:a,vehicleType:m,serviceZone:_,fare:h},P=document.createElement("div");P.innerHTML=`\n                    <div class="flex flex-col items-center justify-center">\n                        <h3 class="text-xl font-bold">${a}</h3>\n                        <p>Fare: ${h} tk/min</p> \x3c!-- Display the fare --\x3e\n                        <button id="book-button" class="bg-blue-500 hover-bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4">Book</button>\n                    </div>`;const O=P.querySelector("#book-button");O&&O.addEventListener("click",()=>{this.qrScannerService.scanQRCode(T)}),(new D2.Popup).setLngLat(o).setDOMContent(P).addTo(this.map)}}}),this.map.on("mouseenter",t,()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave",t,()=>{this.map.getCanvas().style.cursor=""})}trackLocation(){var t=this;return(0,$o.Z)(function*(){try{const i=yield MO.watchPosition({enableHighAccuracy:!0},r=>{t.zone.runOutsideAngular(()=>{if(console.log("Position:",r),r){const o=[r.coords.longitude,r.coords.latitude];t.currentLocation=o,console.log("lngLat:",o),t.flyToPosition(o,!0),t.realtimeLineString.geometry.coordinates.push(o),console.log("realtimeLineString:",t.realtimeLineString),t.map.getSource("realtimeLineString")?t.map.getSource("realtimeLineString").setData(t.realtimeLineString):(t.map.addSource("realtimeLineString",{type:"geojson",data:t.realtimeLineString}),t.map.addLayer({id:"realtimeLineString",type:"line",source:"realtimeLineString",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ff0000","line-width":5}}))}})});console.log("watchId:",i),t.watchID=i}catch(i){console.log("Error:",i),console.log("Geolocation is not supported or permission denied.")}})()}stopTracking(){if(console.log("realtimeLineString:",this.realtimeLineString),this.isTracking=!1,this.endTime=new Date,this.onLineStringChange(),this.watchID)if(this.isStopButtonDisabled)this.snackBar.open("Please...","",{duration:3e3,verticalPosition:"top"});else{MO.clearWatch({id:this.watchID}),this.watchID=null;const t=this.realtimeLineString.geometry.coordinates,i=[t[0][0],t[0][1]],r=t.reduce((_,C)=>_.extend(C),new D2.LngLatBounds(i,i));this.map.fitBounds(r,{padding:55});const o=this.vehicleData.vehicleId,a={coordinates:i};console.log("Updated Data MAPBOX",a),this.authService.updateVehicles(o,a).then(_=>{console.log("Vehicle updated:",_)}).catch(_=>{console.error("Error updating vehicle:",_)});const h=this.endTime.getTime()-this.startTime.getTime(),m={geojson:this.realtimeLineString,fare:this.fare,startTime:this.startTime,endTime:this.endTime,duration:h,distance:this.distance};console.log("Ride details:",m),console.log("Email:",this.email),this.router.navigate(["/ride-summary"],{state:{email:this.email,data:m}});try{const _=this.authService.createRide(m);console.log("Response:",_)}catch(_){console.error("Error:",_)}}clearInterval(this.serviceZoneCheckInterval)}updateRealTimeInfo(){if(this.isTracking){const t=new Date,{length:i,time:r}=this.calculateLengthAndTime(this.startTime,t);this.distance=i,this.duration=+r,this.calculateFare(this.duration)}}startTracking(){var t=this;console.log("Vehicle ID at start:",this.vehicleData.vehicleId),this.removeAllVehicles(),this.startTime=new Date,this.isTracking=!0,this.trackLocation(),this.realTimeUpdateInterval=setInterval(()=>{this.updateRealTimeInfo()},1e3);let r=!0;this.serviceZoneCheckInterval=setInterval((0,$o.Z)(function*(){const o=yield t.isUserInServiceZone(t.currentLocation);o?t.isStopButtonDisabled=!1:!o&&r&&(t.snackBar.open("\u26a0\ufe0f You are leaving the service zone!","",{duration:3e3,verticalPosition:"top"}),t.isStopButtonDisabled=!0),r=o}),5e3)}removeAllVehicles(){for(let t=0;t<this.vehicleLayersAndSources.length;t+=2){const i=this.vehicleLayersAndSources[t],r=this.vehicleLayersAndSources[t+1];this.map.getLayer(i)&&this.map.removeLayer(i),this.map.getSource(r)&&this.map.removeSource(r)}this.vehicleLayersAndSources=[]}onLineStringChange(){const{length:t,time:i}=this.calculateLengthAndTime(this.startTime,this.endTime);this.zone.run(()=>{this.distance=t,this.duration=+i})}calculateFare(t){this.zone.run(()=>{const i=t/60;"cycle"===this.vehicleType?this.fare=Math.round(100+10*i):"scooter"===this.vehicleType&&(this.fare=Math.round(100+20*i))})}calculateLengthAndTime(t,i){const r=function Zge(n,e){return void 0===e&&(e={}),function Jme(n,e,t){var i=t,r=!1;return function Qme(n,e){jD(n,function(t,i,r){var o=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var h,m=0,_=0,C=0;if(!1===IE(t,function(T,P,O,j,q){if(void 0===h||i>m||j>_||q>C)return h=T,m=i,_=j,C=q,void(o=0);var _e=$D([h,T],t.properties);if(!1===e(_e,i,r,q,o))return!1;o++,h=T}))return!1}}})}(n,function(o,a,h,m,_){i=!1===r&&void 0===t?o:e(i,o,a,h,m,_),r=!0}),i}(n,function(t,i){var r=i.geometry.coordinates;return t+OU(r[0],r[1],e)},0)}(this.realtimeLineString,{units:"kilometers"}),o=i.getTime()-t.getTime(),a=Math.floor(o/1e3);return{length:this.formatDistance(r),time:a}}getFormattedTime(t){const i=Math.floor(t/3600),r=Math.floor((t-3600*i)/60),o=t-3600*i-60*r;return`${i}:${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}formatDistance(t){return t?t.toFixed(2):"0"}flyToPosition(t,i=!1){var r=this;return(0,$o.Z)(function*(){yield r.map.flyTo({center:t,zoom:16,speed:1.5,curve:1.4,essential:!0});const o=document.createElement("div");o.className="custom-marker",o.style.width="50px",o.style.height="50px",o.innerHTML='<svg width="30" height="30" viewbox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" > <circle cx="20" cy="20" fill="none" r="10" stroke="#19a2fc" stroke-width="2"> <animate attributeName="r" from="8" to="20" dur="1.5s" begin="0s" repeatCount="indefinite" /> <animate attributeName="opacity" from="1" to="0" dur="1.5s" begin="0s" repeatCount="indefinite" /> </circle> <circle cx="20" cy="20" fill="#1ba3fd" r="10" /> </svg>';const a=new D2.Marker(o);i?(r.removeFlyToMarker(),r.flyToMarker=a,r.flyToMarker.setLngLat(t).addTo(r.map)):r.removeFlyToMarker()})()}removeFlyToMarker(){this.flyToMarker&&this.flyToMarker.remove()}ngOnDestroy(){this.map&&this.map.remove()}static#e=this.\u0275fac=function(i){return new(i||n)(re(O0e),re(Sl),re(IR),re($0e),re(v),re(vf),re(yf))};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-map"]],decls:8,vars:2,consts:[[1,"map-container","relative","h-screen"],["id","map"],[1,"absolute","top-4","right-4","z-10","bg-none"],["mat-icon-button","",3,"click"],["class","bottom-card fixed bottom-0",4,"ngIf"],["class","bottom-card fixed bottom-0 flex items-center justify-center",4,"ngIf"],[1,"bottom-card","fixed","bottom-0"],[1,"flex","flex-wrap","justify-center","items-center"],[1,"w-1/3","md:w-1/3","text-center","border-r","border-gray-300"],[1,"text-xl","font-semibold"],[1,"text-center"],[1,"w-1/3","md:w-1/3","text-center"],[1,"border-t","border-gray-300","mx-4","my-4"],[1,"w-full","text-center","mt-2"],["mat-raised-button","","color","primary","class","rounded-full w-24 h-24 md:w-32 md:h-32",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","class","rounded-full w-24 h-24 md:w-32 md:h-32",3,"disabled","click",4,"ngIf"],["class","mb-2 text-center highlight-text flex items-center justify-center text-red-500",4,"ngIf"],["mat-raised-button","","color","primary",1,"rounded-full","w-24","h-24","md:w-32","md:h-32",3,"click"],["mat-raised-button","","color","warn",1,"rounded-full","w-24","h-24","md:w-32","md:h-32",3,"disabled","click"],[1,"mb-2","text-center","highlight-text","flex","items-center","justify-center","text-red-500"],[1,"highlight-icon"],[1,"bottom-card","fixed","bottom-0","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"]],template:function(i,r){1&i&&(on(0,"div",0),oo(1,"div",1),on(2,"div",2)(3,"button",3),So("click",function(){return r.getUserLocation()}),on(4,"mat-icon"),Jn(5,"my_location"),hn()()()(),Rr(6,G0e,26,6,"div",4),Rr(7,H0e,4,0,"div",5)),2&i&&(si(6),lr("ngIf",r.hasBookedRide),si(1),lr("ngIf",!r.hasBookedRide))},dependencies:[eh,UT,uoe,Zw],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100vh}.bottom-card[_ngcontent-%COMP%]{margin:16px 16px 35px;width:calc(100% - 32px);border-left:none;color:#000;padding:16px;text-align:center;border-radius:31px;background:#f5f5f5}.marker[_ngcontent-%COMP%]{display:block;border:none;border-radius:50%;cursor:pointer;padding:0}"]})}return n})(),W0e=(()=>{class n{constructor(t){this.authService=t,this.profile=null}ngOnInit(){this.authService.getProfile().subscribe(t=>{this.profile=t,console.log("Profile:",t),t&&(this.authService.currentUsername.next(t.username),console.log("Total Duration:",this.calculateDuration(t.totalDuration)))},t=>{console.error("Error:",t)})}calculateDuration(t){return void 0===t?"0 hr 0 min 0 sec":`${Math.floor(t/36e5)} hr ${Math.floor(t/6e4%60)} min ${Math.floor(t/1e3%60)} sec`}static#e=this.\u0275fac=function(i){return new(i||n)(re(yf))};static#t=this.\u0275cmp=qn({type:n,selectors:[["ng-component"]],decls:40,vars:6,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-white","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","items-center","w-full","max-w-2xl","text-center"],[1,"text-4xl","font-bold","mb-6","text-gray-700"],["src","https://lottie.host/?file=1e3cfbca-f3b0-4ef4-b9da-a27baa2a86be/Ut2xdOdiHs.lottie"],[1,"text-xl","font-semibold","text-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-6","w-full"],[1,"grid","grid-cols-2","gap-4","mt-6","w-full"],[1,"flex-1","flex","flex-col","items-center","p-4","md:w-full","text-center"],[1,"text-gray-500"],[1,"mt-2","font-semibold","text-gray-700"]],template:function(i,r){if(1&i&&(on(0,"div",0)(1,"div",1)(2,"h1",2),Jn(3,"Profile"),hn(),oo(4,"iframe",3),on(5,"p",4),Jn(6),hn(),on(7,"p",4),Jn(8),hn(),on(9,"div",5)(10,"div",6)(11,"mat-card",7)(12,"mat-icon",8),Jn(13,"local_taxi"),hn(),on(14,"span",9),Jn(15,"Total Trips"),hn(),on(16,"span",9),Jn(17),hn()(),on(18,"mat-card",7)(19,"mat-icon",8),Jn(20,"attach_money"),hn(),on(21,"span",9),Jn(22,"Total Fare"),hn(),on(23,"span",9),Jn(24),hn()()(),on(25,"div",6)(26,"mat-card",7)(27,"mat-icon",8),Jn(28,"timer"),hn(),on(29,"span",9),Jn(30,"Total Duration"),hn(),on(31,"span",9),Jn(32),hn()(),on(33,"mat-card",7)(34,"mat-icon",8),Jn(35,"map"),hn(),on(36,"span",9),Jn(37,"Total Distance"),hn(),on(38,"span",9),Jn(39),hn()()()()()()),2&i){let o,a,h;si(6),df(null==r.profile?null:r.profile.username),si(2),df(null==r.profile?null:r.profile.userEmail),si(9),wc(" ",null!==(o=null==r.profile?null:r.profile.totalTrips)&&void 0!==o?o:0," "),si(7),wc(" \u09f3 ",null!==(a=null==r.profile?null:r.profile.totalFare)&&void 0!==a?a:0," "),si(8),wc(" ",r.calculateDuration(null==r.profile?null:r.profile.totalDuration)," "),si(7),wc(" ",null!==(h=null==r.profile?null:r.profile.totalDistance)&&void 0!==h?h:0," km ")}},dependencies:[Zw,r6]})}return n})();function A2(n){return(A2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Rd(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Jp(n){Rd(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||"object"===A2(n)&&"[object Date]"===e?new Date(n.getTime()):"number"==typeof n||"[object Number]"===e?new Date(n):(("string"==typeof n||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function ry(n){if(null===n||!0===n||!1===n)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function M2(n){Rd(1,arguments);var t=Jp(n),i=t.getUTCDay(),r=(i<1?7:0)+i-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function rH(n){Rd(1,arguments);var e=Jp(n),t=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(t+1,0,4),i.setUTCHours(0,0,0,0);var r=M2(i),o=new Date(0);o.setUTCFullYear(t,0,4),o.setUTCHours(0,0,0,0);var a=M2(o);return e.getTime()>=r.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}var oH={};function k2(){return oH}function P2(n,e){var t,i,r,o,a,h,m,_;Rd(1,arguments);var C=k2(),T=ry(null!==(t=null!==(i=null!==(r=null!==(o=e?.weekStartsOn)&&void 0!==o?o:null==e||null===(a=e.locale)||void 0===a||null===(h=a.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==r?r:C.weekStartsOn)&&void 0!==i?i:null===(m=C.locale)||void 0===m||null===(_=m.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==t?t:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var P=Jp(n),O=P.getUTCDay(),j=(O<T?7:0)+O-T;return P.setUTCDate(P.getUTCDate()-j),P.setUTCHours(0,0,0,0),P}function sH(n,e){var t,i,r,o,a,h,m,_;Rd(1,arguments);var C=Jp(n),T=C.getUTCFullYear(),P=k2(),O=ry(null!==(t=null!==(i=null!==(r=null!==(o=e?.firstWeekContainsDate)&&void 0!==o?o:null==e||null===(a=e.locale)||void 0===a||null===(h=a.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==r?r:P.firstWeekContainsDate)&&void 0!==i?i:null===(m=P.locale)||void 0===m||null===(_=m.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==t?t:1);if(!(O>=1&&O<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=new Date(0);j.setUTCFullYear(T+1,0,O),j.setUTCHours(0,0,0,0);var q=P2(j,e),_e=new Date(0);_e.setUTCFullYear(T,0,O),_e.setUTCHours(0,0,0,0);var me=P2(_e,e);return C.getTime()>=q.getTime()?T+1:C.getTime()>=me.getTime()?T:T-1}function qa(n,e){for(var t=n<0?"-":"",i=Math.abs(n).toString();i.length<e;)i="0"+i;return t+i}const y__y=function(e,t){var i=e.getUTCFullYear(),r=i>0?i:1-i;return qa("yy"===t?r%100:r,t.length)},y__M=function(e,t){var i=e.getUTCMonth();return"M"===t?String(i+1):qa(i+1,2)},y__d=function(e,t){return qa(e.getUTCDate(),t.length)},y__h=function(e,t){return qa(e.getUTCHours()%12||12,t.length)},y__H=function(e,t){return qa(e.getUTCHours(),t.length)},y__m=function(e,t){return qa(e.getUTCMinutes(),t.length)},y__s=function(e,t){return qa(e.getUTCSeconds(),t.length)},y__S=function(e,t){var i=t.length,r=e.getUTCMilliseconds();return qa(Math.floor(r*Math.pow(10,i-3)),t.length)};function aH(n,e){var t=n>0?"-":"+",i=Math.abs(n),r=Math.floor(i/60),o=i%60;if(0===o)return t+String(r);var a=e||"";return t+String(r)+a+qa(o,2)}function lH(n,e){return n%60==0?(n>0?"-":"+")+qa(Math.abs(n)/60,2):oy(n,e)}function oy(n,e){var t=e||"",i=n>0?"-":"+",r=Math.abs(n);return i+qa(Math.floor(r/60),2)+t+qa(r%60,2)}const lbe={G:function(e,t,i){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});default:return i.era(r,{width:"wide"})}},y:function(e,t,i){if("yo"===t){var r=e.getUTCFullYear();return i.ordinalNumber(r>0?r:1-r,{unit:"year"})}return y__y(e,t)},Y:function(e,t,i,r){var o=sH(e,r),a=o>0?o:1-o;return"YY"===t?qa(a%100,2):"Yo"===t?i.ordinalNumber(a,{unit:"year"}):qa(a,t.length)},R:function(e,t){return qa(rH(e),t.length)},u:function(e,t){return qa(e.getUTCFullYear(),t.length)},Q:function(e,t,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return qa(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return qa(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,i){var r=e.getUTCMonth();switch(t){case"M":case"MM":return y__M(e,t);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,i){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return qa(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,i,r){var o=function obe(n,e){Rd(1,arguments);var t=Jp(n),i=P2(t,e).getTime()-function ibe(n,e){var t,i,r,o,a,h,m,_;Rd(1,arguments);var C=k2(),T=ry(null!==(t=null!==(i=null!==(r=null!==(o=e?.firstWeekContainsDate)&&void 0!==o?o:null==e||null===(a=e.locale)||void 0===a||null===(h=a.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==r?r:C.firstWeekContainsDate)&&void 0!==i?i:null===(m=C.locale)||void 0===m||null===(_=m.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==t?t:1),P=sH(n,e),O=new Date(0);return O.setUTCFullYear(P,0,T),O.setUTCHours(0,0,0,0),P2(O,e)}(t,e).getTime();return Math.round(i/6048e5)+1}(e,r);return"wo"===t?i.ordinalNumber(o,{unit:"week"}):qa(o,t.length)},I:function(e,t,i){var r=function nbe(n){Rd(1,arguments);var e=Jp(n),t=M2(e).getTime()-function ebe(n){Rd(1,arguments);var e=rH(n),t=new Date(0);return t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0),M2(t)}(e).getTime();return Math.round(t/6048e5)+1}(e);return"Io"===t?i.ordinalNumber(r,{unit:"week"}):qa(r,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):y__d(e,t)},D:function(e,t,i){var r=function J0e(n){Rd(1,arguments);var e=Jp(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime();return Math.floor((t-i)/864e5)+1}(e);return"Do"===t?i.ordinalNumber(r,{unit:"dayOfYear"}):qa(r,t.length)},E:function(e,t,i){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,i,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return qa(a,2);case"eo":return i.ordinalNumber(a,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,i,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return qa(a,t.length);case"co":return i.ordinalNumber(a,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,i){var r=e.getUTCDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return qa(o,t.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,i){var o=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,i){var o,r=e.getUTCHours();switch(o=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,i){var o,r=e.getUTCHours();switch(o=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return y__h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):y__H(e,t)},K:function(e,t,i){var r=e.getUTCHours()%12;return"Ko"===t?i.ordinalNumber(r,{unit:"hour"}):qa(r,t.length)},k:function(e,t,i){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?i.ordinalNumber(r,{unit:"hour"}):qa(r,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):y__m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):y__s(e,t)},S:function(e,t){return y__S(e,t)},X:function(e,t,i,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return lH(a);case"XXXX":case"XX":return oy(a);default:return oy(a,":")}},x:function(e,t,i,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return lH(a);case"xxxx":case"xx":return oy(a);default:return oy(a,":")}},O:function(e,t,i,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+aH(a,":");default:return"GMT"+oy(a,":")}},z:function(e,t,i,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+aH(a,":");default:return"GMT"+oy(a,":")}},t:function(e,t,i,r){return qa(Math.floor((r._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,i,r){return qa((r._originalDate||e).getTime(),t.length)}};var cH=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},uH=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const dbe={p:uH,P:function(e,t){var a,i=e.match(/(P+)(p+)?/)||[],r=i[1],o=i[2];if(!o)return cH(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",cH(r,t)).replace("{{time}}",uH(o,t))}};var fbe=["D","DD"],pbe=["YY","YYYY"];function dH(n,e,t){if("YYYY"===n)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===n)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===n)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===n)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var _be={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function UL(n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var Ebe={date:UL({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:UL({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:UL({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Sbe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function WE(n){return function(e,t){var r;if("formatting"===(null!=t&&t.context?String(t.context):"standalone")&&n.formattingValues){var o=n.defaultFormattingWidth||n.defaultWidth,a=null!=t&&t.width?String(t.width):o;r=n.formattingValues[a]||n.formattingValues[o]}else{var h=n.defaultWidth,m=null!=t&&t.width?String(t.width):n.defaultWidth;r=n.values[m]||n.values[h]}return r[n.argumentCallback?n.argumentCallback(e):e]}}function XE(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.width,o=e.match(i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth]);if(!o)return null;var _,a=o[0],h=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(h)?function Bbe(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}(h,function(T){return T.test(a)}):function Fbe(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}(h,function(T){return T.test(a)});return _=n.valueCallback?n.valueCallback(m):m,{value:_=t.valueCallback?t.valueCallback(_):_,rest:e.slice(a.length)}}}const exe={code:"en-US",formatDistance:function(e,t,i){var r,o=_be[e];return r="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r},formatLong:Ebe,formatRelative:function(e,t,i,r){return Sbe[e]},localize:{ordinalNumber:function(e,t){var i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:WE({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:WE({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:WE({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:WE({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:WE({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function zbe(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.match(n.matchPattern);if(!i)return null;var r=i[0],o=e.match(n.parsePattern);if(!o)return null;var a=n.valueCallback?n.valueCallback(o[0]):o[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(r.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:XE({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:XE({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:XE({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:XE({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:XE({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var txe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nxe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ixe=/^'([^]*?)'?$/,rxe=/''/g,oxe=/[a-zA-Z]/;function jL(n,e,t){var i,r,o,a,h,m,_,C,T,P,O,j,q,_e,me,te,Pe,_t;Rd(2,arguments);var Dt=String(e),Yt=k2(),Wt=null!==(i=null!==(r=t?.locale)&&void 0!==r?r:Yt.locale)&&void 0!==i?i:exe,sn=ry(null!==(o=null!==(a=null!==(h=null!==(m=t?.firstWeekContainsDate)&&void 0!==m?m:null==t||null===(_=t.locale)||void 0===_||null===(C=_.options)||void 0===C?void 0:C.firstWeekContainsDate)&&void 0!==h?h:Yt.firstWeekContainsDate)&&void 0!==a?a:null===(T=Yt.locale)||void 0===T||null===(P=T.options)||void 0===P?void 0:P.firstWeekContainsDate)&&void 0!==o?o:1);if(!(sn>=1&&sn<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var rt=ry(null!==(O=null!==(j=null!==(q=null!==(_e=t?.weekStartsOn)&&void 0!==_e?_e:null==t||null===(me=t.locale)||void 0===me||null===(te=me.options)||void 0===te?void 0:te.weekStartsOn)&&void 0!==q?q:Yt.weekStartsOn)&&void 0!==j?j:null===(Pe=Yt.locale)||void 0===Pe||null===(_t=Pe.options)||void 0===_t?void 0:_t.weekStartsOn)&&void 0!==O?O:0);if(!(rt>=0&&rt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Wt.localize)throw new RangeError("locale must contain localize property");if(!Wt.formatLong)throw new RangeError("locale must contain formatLong property");var Ii=Jp(n);if(!function Y0e(n){if(Rd(1,arguments),!function X0e(n){return Rd(1,arguments),n instanceof Date||"object"===A2(n)&&"[object Date]"===Object.prototype.toString.call(n)}(n)&&"number"!=typeof n)return!1;var e=Jp(n);return!isNaN(Number(e))}(Ii))throw new RangeError("Invalid time value");var bi=function hbe(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}(Ii),hr=function K0e(n,e){return Rd(2,arguments),function Z0e(n,e){Rd(2,arguments);var t=Jp(n).getTime(),i=ry(e);return new Date(t+i)}(n,-ry(e))}(Ii,bi),Dr={firstWeekContainsDate:sn,weekStartsOn:rt,locale:Wt,_originalDate:Ii},Ei=Dt.match(nxe).map(function(Hi){var Nn=Hi[0];return"p"===Nn||"P"===Nn?(0,dbe[Nn])(Hi,Wt.formatLong):Hi}).join("").match(txe).map(function(Hi){if("''"===Hi)return"'";var Nn=Hi[0];if("'"===Nn)return function sxe(n){var e=n.match(ixe);return e?e[1].replace(rxe,"'"):n}(Hi);var Ci=lbe[Nn];if(Ci)return!(null!=t&&t.useAdditionalWeekYearTokens)&&function gbe(n){return-1!==pbe.indexOf(n)}(Hi)&&dH(Hi,e,String(n)),!(null!=t&&t.useAdditionalDayOfYearTokens)&&function mbe(n){return-1!==fbe.indexOf(n)}(Hi)&&dH(Hi,e,String(n)),Ci(hr,Hi,Wt.localize,Dr);if(Nn.match(oxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Nn+"`");return Hi}).join("");return Ei}var axe=Ce(9698);const GL=(0,CE.fo)("Stripe",{web:()=>Ce.e(9751).then(Ce.bind(Ce,9751)).then(n=>new n.StripeWeb)});let lxe=(()=>{class n{constructor(t){this.http=t,GL.initialize({publishableKey:$b_stripe_publishableKey})}createPaymentIntent(t,i){var r=this;return(0,$o.Z)(function*(){const o={email:t,fare:i};return(yield r.http.post("https://wheel-wizard-api.cyclic.app/payment",o).pipe(m_()).toPromise()).client_secret})()}openPaymentSheet(t){return(0,$o.Z)(function*(){try{return yield GL.createPaymentSheet({paymentIntentClientSecret:t,merchantDisplayName:"Technyks"}),yield GL.presentPaymentSheet()}catch(i){throw console.log(i),i}})()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(Iw))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cxe=(()=>{class n{constructor(){}setFare(t){this.fare=t}getFare(){return this.fare}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hH=Ce(5961);const uxe=(0,CE.fo)("Camera",{web:()=>Ce.e(6468).then(Ce.bind(Ce,6468)).then(n=>new n.CameraWeb)});let dxe=(()=>{class n{constructor(t){this.sanitizer=t}takePicture(){var t=this;return(0,$o.Z)(function*(){const i=yield uxe.getPhoto({quality:90,allowEditing:!1,source:hH.oK.Camera,resultType:hH.dk.Base64});return i?t.sanitizer.bypassSecurityTrustUrl(`data:image/jpeg;base64,${i.base64String}`):null})()}static#e=this.\u0275fac=function(i){return new(i||n)(fn(mT))};static#t=this.\u0275prov=mi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hxe(n,e){1&n&&oo(0,"img",14),2&n&&lr("src",ca().image,Rp)}let fxe=(()=>{class n{constructor(t,i,r,o,a,h){this.router=t,this.route=i,this.stripeService=r,this.userService=o,this.fareService=a,this.cameraService=h,this.isImageTaken=!1,this.image=null;const m=this.router.getCurrentNavigation();if(m&&m.extras.state){const _=m.extras.state;console.log("Ride details:",_.data),this.fareService.setFare(Math.round(_.data.fare)),this.fare=this.fareService.getFare();const C=Math.floor(_.data.duration/1e3),T=Math.floor(C/3600),P=Math.floor((C-3600*T)/60);this.duration=`${T} hr ${P} min ${C-3600*T-60*P} sec`,this.startTime=jL(new Date(_.data.startTime),"PPpp"),this.endTime=jL(new Date(_.data.endTime),"PPpp"),this.distance=_.data.distance}}ngOnInit(){this.email=this.userService.getEmail(),this.fare=this.fareService.getFare(),console.log("email",this.email),console.log("fare",this.fare)}initiateStripePayment(t,i){var r=this;return(0,$o.Z)(function*(){if(console.log("initiateStripePayment method called"),t&&i){console.log("Email and fare are present");try{const o=yield r.stripeService.createPaymentIntent(t,i);console.log("Client secret:",o);const a=yield r.stripeService.openPaymentSheet(o);console.log("Payment sheet result:",a),a&&a.paymentResult===axe.YG.Completed&&(console.log("Payment completed"),r.router.navigate(["/map"]))}catch(o){console.error("Payment error:",o)}}else console.error("Email and fare are required for payment")})()}takePicture(){var t=this;return(0,$o.Z)(function*(){console.log("Email before taking picture:",t.email),t.image=yield t.cameraService.takePicture(),console.log("Email after taking picture:",t.email),t.image&&(t.isImageTaken=!0)})()}static#e=this.\u0275fac=function(i){return new(i||n)(re(Sl),re(vf),re(lxe),re(wU),re(cxe),re(dxe))};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-ride-summary"]],decls:70,vars:8,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-50","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","items-center","p-6","w-full","max-w-2xl"],[1,"text-4xl","font-bold","mb-6","text-gray-700"],[1,"w-full"],[1,"flex","justify-between","mb-4"],[1,"flex","items-center"],[1,"text-gray-500"],[1,"ml-2","font-semibold","text-gray-700"],["alt","Taken image",3,"src",4,"ngIf"],[1,"w-full","flex","justify-center"],["mat-raised-button","","color","secondary",1,"mt-4",3,"click"],[1,"mb-2","text-center","highlight-text","flex","items-center","justify-center","text-red-500"],[1,"highlight-icon"],["mat-raised-button","","color","primary",1,"mt-4",3,"disabled","click"],["alt","Taken image",3,"src"]],template:function(i,r){1&i&&(on(0,"div",0)(1,"div",1)(2,"h1",2),Jn(3,"Ride Summary"),hn(),on(4,"mat-card-content",3)(5,"mat-list")(6,"mat-list-item",4)(7,"div",5)(8,"mat-icon",6),Jn(9,"local_taxi"),hn(),on(10,"span",7),Jn(11,"Fare:"),hn(),on(12,"span",7),Jn(13),hn()()(),on(14,"mat-list-item",4)(15,"div",5)(16,"mat-icon",6),Jn(17,"timer"),hn(),on(18,"span",7),Jn(19,"Duration:"),hn(),on(20,"span",7),Jn(21),hn()()(),on(22,"mat-list-item",4)(23,"div",5)(24,"mat-icon",6),Jn(25,"schedule"),hn(),on(26,"span",7),Jn(27,"Start Time:"),hn(),on(28,"span",7),Jn(29),hn()()(),on(30,"mat-list-item",4)(31,"div",5)(32,"mat-icon",6),Jn(33,"schedule"),hn(),on(34,"span",7),Jn(35,"End Time:"),hn(),on(36,"span",7),Jn(37),hn()()(),on(38,"mat-list-item",4)(39,"div",5)(40,"mat-icon",6),Jn(41,"timer"),hn(),on(42,"span",7),Jn(43,"Duration:"),hn(),on(44,"span",7),Jn(45),hn()()(),on(46,"mat-list-item",4)(47,"div",5)(48,"mat-icon",6),Jn(49,"map"),hn(),on(50,"span",7),Jn(51,"Distance:"),hn(),on(52,"span",7),Jn(53),hn()()()()(),Rr(54,hxe,1,1,"img",8),on(55,"mat-card-actions",9)(56,"button",10),So("click",function(){return r.takePicture()}),on(57,"mat-icon"),Jn(58,"camera"),hn(),Jn(59," Take Picture "),hn()(),on(60,"div",11)(61,"mat-icon",12),Jn(62,"error_outline"),hn(),on(63,"span"),Jn(64,"Take a Picture of the Vehicle to Activate Payment"),hn()(),on(65,"mat-card-actions",9)(66,"button",13),So("click",function(){return r.initiateStripePayment(r.email,r.fare)}),on(67,"mat-icon"),Jn(68,"payment"),hn(),Jn(69," Pay with Stripe "),hn()()()()),2&i&&(si(13),wc("\u09f3",r.fare,""),si(8),df(r.duration),si(8),wc(" ",r.startTime," "),si(8),df(r.endTime),si(8),df(r.duration),si(8),wc(" ",r.distance," km "),si(1),lr("ngIf",r.image),si(12),lr("disabled",!r.isImageTaken))},dependencies:[eh,UT,Zw,s6,o6,vse,yse]})}return n})();function pxe(n,e){if(1&n&&(on(0,"div")(1,"div",7)(2,"p",8)(3,"strong",9),Jn(4,"Fare:"),hn(),Jn(5),hn(),on(6,"p",8)(7,"strong",9),Jn(8,"Start Time:"),hn(),Jn(9),hn(),on(10,"p",8)(11,"strong",9),Jn(12,"End Time:"),hn(),Jn(13),hn(),on(14,"p",8)(15,"strong",9),Jn(16,"Distance:"),hn(),Jn(17),hn(),on(18,"p",8)(19,"strong",9),Jn(20,"Duration:"),hn(),Jn(21),hn()(),oo(22,"div",5),hn()),2&n){const t=e.$implicit,i=ca(2);si(5),wc(" \u09f3 ",t.fare," "),si(4),wc(" ",i.formatDateTime(t.startTime)," "),si(4),wc(" ",i.formatDateTime(t.endTime)," "),si(4),wc(" ",t.distance," km "),si(4),wc(" ",t.duration," ")}}function mxe(n,e){if(1&n&&(on(0,"div")(1,"h3",4),Jn(2,"Ride Details"),hn(),oo(3,"div",5),Rr(4,pxe,23,5,"div",6),hn()),2&n){const t=ca();si(4),lr("ngForOf",t.rides)}}function gxe(n,e){1&n&&(on(0,"div",10)(1,"div",11)(2,"p",12),Jn(3," No Ride History Found "),hn(),oo(4,"iframe",13),hn()())}const _xe=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"home",component:Gme},{path:"map",component:q0e,canActivate:[()=>ti(yf).isLoggedIn()]},{path:"registration",component:$me},{path:"login",component:wme,canActivate:[()=>ti(yf).shouldLogIn()]},{path:"profile",component:W0e,canActivate:[()=>ti(yf).isLoggedIn()]},{path:"ride-history",component:(()=>{class n{constructor(t){this.authService=t,this.rides=[],this.totalCost=0,this.rideStartTime="",this.rideEndTime=""}ngOnInit(){this.fetchRideHistory()}fetchRideHistory(){var t=this;return(0,$o.Z)(function*(){const i=yield t.authService.getRideHistory();return new Promise((r,o)=>{i.subscribe(a=>{t.rides=a.map(h=>(h.duration=t.calculateDuration(h.startTime,h.endTime),h)),r(!0)},a=>{o(a)})})})()}formatDateTime(t){const i=new Date(t);return isNaN(i.getTime())?"Invalid date":jL(i,"dd/MM/yyyy hh:mm a")}calculateDuration(t,i){const r=new Date(t).getTime(),a=new Date(i).getTime()-r;return`${Math.floor(a/36e5)} hr ${Math.floor(a/6e4%60)} min ${Math.floor(a/1e3%60)} sec`}ngOnDestroy(){this.map&&this.map.remove()}static#e=this.\u0275fac=function(i){return new(i||n)(re(yf))};static#t=this.\u0275cmp=qn({type:n,selectors:[["app-rides"]],decls:5,vars:2,consts:[[1,"ride-details-container","mx-auto","max-w-md","bg-gray-50"],[1,"p-6","mt-8","space-y-4"],[4,"ngIf","ngIfElse"],["noHistory",""],[1,"text-lg","font-semibold","text-gray-700"],[1,"border-t","border-gray-300"],[4,"ngFor","ngForOf"],[1,"p-4","space-y-2"],[1,"text-gray-600"],[1,"text-gray-900"],[2,"display","flex","justify-content","center","align-items","center","height","calc(100vh - 120px)"],[1,"text-center","py-4"],[1,"text-gray-600",2,"font-weight","bold"],["src","https://lottie.host/?file=2f91d71d-8d90-47ae-b457-34fbd68d9a14/vOL4VKU1ru.lottie",2,"display","block","margin","0 auto"]],template:function(i,r){if(1&i&&(on(0,"div",0)(1,"div",1),Rr(2,mxe,5,1,"div",2),hn()(),Rr(3,gxe,5,0,"ng-template",null,3,_w)),2&i){const o=Wf(4);si(2),lr("ngIf",r.rides.length)("ngIfElse",o)}},dependencies:[Dz,eh],styles:["#map[_ngcontent-%COMP%]{height:400px}.ride-details-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.ride-details-container[_ngcontent-%COMP%]{padding:1rem}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:1rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;font-weight:600}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;border-top-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity))}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1rem}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;padding:.5rem}.ride-details-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}"]})}return n})(),canActivate:[()=>ti(yf).isLoggedIn()]},{path:"book",component:jme,canActivate:[()=>ti(yf).isLoggedIn()]},{path:"ride-summary",component:fxe,canActivate:[()=>ti(yf).isLoggedIn()]}];let vxe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({imports:[eU.forRoot(_xe),eU]})}return n})();function fH(n,e){return e?t=>Gw(e.pipe(Dd(1),function yxe(){return _n((n,e)=>{n.subscribe(kn(e,Qe))})}()),t.pipe(fH(n))):zn((t,i)=>Br(n(t,i)).pipe(Dd(1),YT(t)))}const xxe=Hu,Exe=Symbol("__destroy"),pH=Symbol("__decoratorApplied");function mH(n){return"string"==typeof n?Symbol(`__destroy__${n}`):Exe}function gH(n,e){n[e]||(n[e]=new et)}function _H(n,e){n[e]&&(n[e].next(),n[e].complete(),n[e]=null)}function vH(n){n instanceof fe&&n.unsubscribe()}function yH(n,e){return function(){if(n&&n.call(this),_H(this,mH()),e.arrayName&&function Sxe(n){Array.isArray(n)&&n.forEach(vH)}(this[e.arrayName]),e.checkProperties)for(const t in this)e.blackList?.includes(t)||vH(this[t])}}Symbol("CheckerHasBeenSet");function EH(n,e){return t=>{const i=mH(e);"string"==typeof e?function Pxe(n,e,t){const i=n[e];gH(n,t),n[e]=function(){i.apply(this,arguments),_H(this,t),n[e]=i}}(n,e,i):gH(n,i);const r=n[i];return t.pipe(Cu(r))}}function Oxe(n,e){1&n&&(on(0,"mat-icon",10),Jn(1," menu "),hn())}function Lxe(n,e){1&n&&(on(0,"mat-icon",10),Jn(1," close "),hn())}function Nxe(n,e){if(1&n){const t=Mv();on(0,"button",8),So("click",function(){return Gd(t),ca(),Bu(Wf(3).toggle())}),Rr(1,Oxe,2,0,"mat-icon",9),Rr(2,Lxe,2,0,"mat-icon",9),hn()}if(2&n){ca();const t=Wf(3);si(1),lr("ngIf",!t.opened),si(1),lr("ngIf",t.opened)}}let qL=class IF{constructor(e,t,i){this.observer=e,this.router=t,this.authService=i,this.title="client"}ngOnInit(){this.authService.currentUsername.subscribe(e=>{this.username=e})}ngAfterViewInit(){this.observer.observe(["(max-width: 800px)"]).pipe(function bxe(n,e=OT){const t=M6(n,e);return fH(()=>t)}(1),EH(this)).subscribe(e=>{e.matches?(this.sidenav.mode="over",this.sidenav.close()):(this.sidenav.mode="side",this.sidenav.close())}),this.router.events.pipe(EH(this),oc(e=>e instanceof Km)).subscribe(()=>{"over"===this.sidenav.mode&&this.sidenav.close()})}isActive(e){return this.router.url===e}logOut(){this.authService.logOut(),this.sidenav.close(),this.router.navigateByUrl("/login")}static#e=this.\u0275fac=function(t){return new(t||IF)(re(BT),re(Sl),re(yf))};static#t=this.\u0275cmp=qn({type:IF,selectors:[["app-root"]],viewQuery:function(t,i){if(1&t&&Qd(bR,5),2&t){let r;xa(r=wa())&&(i.sidenav=r.first)}},decls:30,vars:8,consts:[["class","fixed top-4 left-4 z-10 p-2 rounded-full bg-transparent",3,"click",4,"ngIf"],[1,"mat-elevation-z8"],["sidenav","matSidenav"],[1,"name"],["mat-button","","routerLink","/map",1,"menu-button"],["mat-button","","routerLink","/profile",1,"menu-button"],["mat-button","","routerLink","/ride-history",1,"menu-button"],["mat-button","",1,"menu-button",3,"click"],[1,"fixed","top-4","left-4","z-10","p-2","rounded-full","bg-transparent",3,"click"],["class","text-black bg-transparent",4,"ngIf"],[1,"text-black","bg-transparent"]],template:function(t,i){1&t&&(Rr(0,Nxe,3,2,"button",0),on(1,"mat-sidenav-container")(2,"mat-sidenav",1,2)(4,"h4",3),Jn(5),hn(),oo(6,"mat-divider"),on(7,"button",4)(8,"mat-icon"),Jn(9,"home"),hn(),on(10,"span"),Jn(11,"Home"),hn()(),on(12,"button",5)(13,"mat-icon"),Jn(14,"person"),hn(),on(15,"span"),Jn(16,"Profile"),hn()(),on(17,"button",6)(18,"mat-icon"),Jn(19,"info"),hn(),on(20,"span"),Jn(21,"History"),hn()(),oo(22,"mat-divider"),on(23,"button",7),So("click",function(){return i.logOut()}),on(24,"mat-icon"),Jn(25,"power_settings_new"),hn(),on(26,"span"),Jn(27,"Log Out"),hn()()(),on(28,"mat-sidenav-content"),oo(29,"router-outlet"),hn()()),2&t&&(lr("ngIf","/login"!==i.router.url&&"/registration"!==i.router.url),si(5),df(i.username),si(2),ba("active",i.isActive("/map")),si(5),ba("active",i.isActive("/profile")),si(5),ba("active",i.isActive("/ride-history")))},dependencies:[eh,fO,Jm,bR,z6,yR,UT,Zw,Roe,DO],styles:["button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#e0e0e0;color:#000;border-radius:10px;padding:16px;text-align:center}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.content[_ngcontent-%COMP%]{height:100vh;overflow:auto}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.menu-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}"]})};qL=function Lt(n,e,t,i){var a,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,i);else for(var h=n.length-1;h>=0;h--)(a=n[h])&&(o=(r<3?a(o):r>3?a(e,t,o):a(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}([function Dxe(n={}){return e=>{!function wxe(n){return!!n[xxe]}(e)?function Ixe(n,e){n.prototype.ngOnDestroy=yH(n.prototype.ngOnDestroy,e)}(e,n):function Txe(n,e){const t=n.\u0275pipe;t.onDestroy=yH(t.onDestroy,e)}(e,n),function Cxe(n){n.prototype[pH]=!0}(e)}}()],qL);const $xe={provide:new xi("mat-menu-scroll-strategy"),deps:[tE],useFactory:function zxe(n){return()=>n.scrollStrategies.reposition()}};let Vxe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n});static#n=this.\u0275inj=po({providers:[$xe],imports:[r_,$T,sc,J6,Jw,sc]})}return n})(),Uxe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=co({type:n,bootstrap:[qL]});static#n=this.\u0275inj=po({imports:[Kz,Oie,Ane,vxe,Pce,r_,Lie,tV,Fae,rae,i6,Hoe,d6,Poe,boe,Cse,Vxe,sme.forRoot(),ume.forRoot()]})}return n})();var SH=Ce(6635);const IH=(n,e)=>typeof window>"u"?Promise.resolve():(0,SH.p)().then(()=>(0,SH.b)([["ion-icon",[[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32],ariaLabel:[32]}]]],["stripe-payment-request-button",[[4,"stripe-payment-request-button",{paymentMethodEventHandler:[16],shippingOptionEventHandler:[16],shippingAddressEventHandler:[16],publishableKey:[1,"publishable-key"],stripeAccount:[1,"stripe-account"],applicationName:[1,"application-name"],stripeDidLoaded:[1040],loadStripeStatus:[32],stripe:[32],paymentRequestOption:[32],isAvailable:[64],setPaymentMethodEventHandler:[64],setPaymentRequestShippingOptionEventHandler:[64],setPaymentRequestShippingAddressEventHandler:[64],setPaymentRequestOption:[64],initStripe:[64]}]]],["stripe-payment_2",[[0,"stripe-payment",{intentType:[1,"intent-type"],zip:[4],sheetTitle:[1,"sheet-title"],buttonLabel:[1,"button-label"],publishableKey:[1,"publishable-key"],stripeAccount:[1,"stripe-account"],applicationName:[1,"application-name"],showLabel:[4,"show-label"],intentClientSecret:[1,"intent-client-secret"],shouldUseDefaultFormSubmitAction:[4,"should-use-default-form-submit-action"],showPaymentRequestButton:[4,"show-payment-request-button"],handleSubmit:[1040],stripeDidLoaded:[1040],loadStripeStatus:[32],stripe:[32],progress:[32],errorMessage:[32],zipCode:[32],paymentRequestOption:[32],initStripe:[64],updateProgress:[64],setErrorMessage:[64],setPaymentRequestOption:[64]}],[1,"stripe-sheet",{showCloseButton:[4,"show-close-button"],open:[4],toggleModal:[64],openModal:[64],closeModal:[64]}]]],["stripe-payment-sheet",[[0,"stripe-payment-sheet",{publishableKey:[1,"publishable-key"],stripeAccount:[1,"stripe-account"],applicationName:[1,"application-name"],showLabel:[4,"show-label"],sheetTitle:[1,"sheet-title"],buttonLabel:[1,"button-label"],intentClientSecret:[1,"intent-client-secret"],shouldUseDefaultFormSubmitAction:[4,"should-use-default-form-submit-action"],intentType:[1,"intent-type"],handleSubmit:[1040],stripeDidLoaded:[1040],showCloseButton:[4,"show-close-button"],zip:[4],open:[4],getStripePaymentSheetElement:[64],present:[64],updateProgress:[64],destroy:[64],setPaymentRequestButton:[64]}]]]],e)),TH=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g");class b_{constructor(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}static parse(e){const t=[],i=(m,_)=>{_.notSelectors.length>0&&!_.element&&0==_.classNames.length&&0==_.attrs.length&&(_.element="*"),m.push(_)};let o,r=new b_,a=r,h=!1;for(TH.lastIndex=0;o=TH.exec(e);){if(o[1]){if(h)throw new Error("Nesting :not in a selector is not allowed");h=!0,a=new b_,r.notSelectors.push(a)}const m=o[2];if(m){const C=o[3];"#"===C?a.addAttribute("id",m.slice(1)):"."===C?a.addClassName(m.slice(1)):a.setElement(m)}const _=o[4];if(_&&a.addAttribute(a.unescapeAttribute(_),o[6]),o[7]&&(h=!1,a=r),o[8]){if(h)throw new Error("Multiple selectors in :not are not supported");i(t,r),r=a=new b_}}return i(t,r),t}unescapeAttribute(e){let t="",i=!1;for(let r=0;r<e.length;r++){const o=e.charAt(r);if("\\"!==o){if("$"===o&&!i)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);i=!1,t+=o}else i=!0}return t}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){const e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){const i=this.escapeAttribute(this.attrs[t]),r=this.attrs[t+1];e+=`[${i}${r?"="+r:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}}var tp=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(tp||{}),YE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(YE||{});const WL_name="custom-elements",XL_name="no-errors-schema";var Pa=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Pa||{});function Zxe(n){const e=function Xxe(n){const e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return[n.element&&"*"!==n.element?n.element:"",...n.attrs,...e]}(n),t=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(i=>function Yxe(n){const e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return n.element?[5,n.element,...n.attrs,...e]:n.attrs.length?[3,...n.attrs,...e]:n.classNames&&n.classNames.length?[9,...n.classNames]:[]}(i)):[];return e.concat(...t)}function O2(n){return n?b_.parse(n).map(Zxe):[]}class jb{static zero(){return new jb([0])}static one(){return new jb([1])}constructor(e){this.digits=e}clone(){return new jb(this.digits.slice())}add(e){const t=this.clone();return t.addToSelf(e),t}addToSelf(e){const t=Math.max(this.digits.length,e.digits.length);let i=0;for(let r=0;r<t;r++){let o=i;r<this.digits.length&&(o+=this.digits[r]),r<e.digits.length&&(o+=e.digits[r]),o>=10?(this.digits[r]=o-10,i=1):(this.digits[r]=o,i=0)}i>0&&(this.digits[t]=1)}toString(){let e="";for(let t=this.digits.length-1;t>=0;t--)e+=this.digits[t];return e}}class DH{constructor(e){this.powerOfTwos=[e]}getValue(){return this.powerOfTwos[0]}multiplyBy(e){const t=jb.zero();return this.multiplyByAndAddTo(e,t),t}multiplyByAndAddTo(e,t){for(let i=0;0!==e;e>>>=1,i++)if(1&e){const r=this.getMultipliedByPowerOfTwo(i);t.addToSelf(r)}}getMultipliedByPowerOfTwo(e){for(let t=this.powerOfTwos.length;t<=e;t++){const i=this.powerOfTwos[t-1];this.powerOfTwos[t]=i.add(i)}return this.powerOfTwos[e]}}let L2;function kH(n){const e=new e1e;return OH(n.nodes.map(i=>i.visit(e,null)).join(""),n.meaning)}class PH{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(i=>i.visit(this)).join(", ")}]`}visitIcu(e,t){const i=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expression}, ${e.type}, ${i.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}}const Qxe=new PH;class e1e extends PH{visitIcu(e,t){let i=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.type}, ${i.join(", ")}}`}}function ZE(n){return(n>>>0).toString(16).padStart(8,"0")}function n1e(n,e,t,i){return n<20?[e&t|~e&i,1518500249]:n<40?[e^t^i,1859775393]:n<60?[e&t|e&i|t&i,2400959708]:[e^t^i,3395469782]}function RH(n){L2??=new TextEncoder;const e=L2.encode(n),t=new DataView(e.buffer,e.byteOffset,e.byteLength);let i=LH(t,e.length,0),r=LH(t,e.length,102072);return 0==i&&(0==r||1==r)&&(i^=319790063,r^=-1801410264),[i,r]}function OH(n,e=""){let t=RH(n);if(e){const o=RH(e);t=function i1e(n,e){const t=n[0],r=e[0],a=FH(n[1],e[1]),h=a[0],m=a[1];return[x_(x_(t,r),h),m]}(function r1e(n,e){const t=n[0],i=n[1];return[t<<e|i>>>32-e,i<<e|t>>>32-e]}(t,1),o)}return function a1e(n,e){const t=zH.toThePowerOf(0).multiplyBy(e);return zH.toThePowerOf(4).multiplyByAndAddTo(n,t),t.toString()}(2147483647&t[0],t[1])}function LH(n,e,t){let i=2654435769,r=2654435769,o=0;const a=e-12;for(;o<=a;o+=12){i+=n.getUint32(o,!0),r+=n.getUint32(o+4,!0);const m=NH(i,r,t+=n.getUint32(o+8,!0));i=m[0],r=m[1],t=m[2]}const h=e-o;return t+=e,h>=4?(i+=n.getUint32(o,!0),o+=4,h>=8?(r+=n.getUint32(o,!0),o+=4,h>=9&&(t+=n.getUint8(o++)<<8),h>=10&&(t+=n.getUint8(o++)<<16),11===h&&(t+=n.getUint8(o++)<<24)):(h>=5&&(r+=n.getUint8(o++)),h>=6&&(r+=n.getUint8(o++)<<8),7===h&&(r+=n.getUint8(o++)<<16))):(h>=1&&(i+=n.getUint8(o++)),h>=2&&(i+=n.getUint8(o++)<<8),3===h&&(i+=n.getUint8(o++)<<16)),NH(i,r,t)[2]}function NH(n,e,t){return n-=e,n-=t,e-=t,e-=n^=t>>>13,t-=n,t-=e^=n<<8,n-=e,n-=t^=e>>>13,e-=t,e-=n^=t>>>12,t-=n,t-=e^=n<<16,n-=e,n-=t^=e>>>5,e-=t,e-=n^=t>>>3,t-=n,t-=e^=n<<10,[n,e,t^=e>>>15]}var ZL=function(n){return n[n.Little=0]="Little",n[n.Big=1]="Big",n}(ZL||{});function x_(n,e){return FH(n,e)[1]}function FH(n,e){const t=(65535&n)+(65535&e),i=(n>>>16)+(e>>>16)+(t>>>16);return[i>>>16,i<<16|65535&t]}function KL(n,e){return n<<e|n>>>32-e}function BH(n,e){return e>=n.length?0:n[e]}function s1e(n,e,t){let i=0;if(t===ZL.Big)for(let r=0;r<4;r++)i+=BH(n,e+r)<<24-8*r;else for(let r=0;r<4;r++)i+=BH(n,e+r)<<8*r;return i}const zH=new class Kxe{constructor(e){this.base=e,this.exponents=[new DH(jb.one())]}toThePowerOf(e){for(let t=this.exponents.length;t<=e;t++){const i=this.exponents[t-1].multiplyBy(this.base);this.exponents[t]=new DH(i)}return this.exponents[e]}}(256);var QL=function(n){return n[n.None=0]="None",n[n.Const=1]="Const",n}(QL||{});class Gb{constructor(e=QL.None){this.modifiers=e}hasModifier(e){return 0!=(this.modifiers&e)}}var em=function(n){return n[n.Dynamic=0]="Dynamic",n[n.Bool=1]="Bool",n[n.String=2]="String",n[n.Int=3]="Int",n[n.Number=4]="Number",n[n.Function=5]="Function",n[n.Inferred=6]="Inferred",n[n.None=7]="None",n}(em||{});class og extends Gb{constructor(e,t){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}}class np extends Gb{constructor(e,t,i=null){super(t),this.value=e,this.typeParams=i}visitType(e,t){return e.visitExpressionType(this,t)}}const w_=new og(em.Dynamic),ad=new og(em.Inferred),VH=new og(em.Bool),Hb=(new og(em.Int),new og(em.Number)),JL=new og(em.String),ip=(new og(em.Function),new og(em.None));var qb=function(n){return n[n.Minus=0]="Minus",n[n.Plus=1]="Plus",n}(qb||{}),Ji=function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n[n.Identical=2]="Identical",n[n.NotIdentical=3]="NotIdentical",n[n.Minus=4]="Minus",n[n.Plus=5]="Plus",n[n.Divide=6]="Divide",n[n.Multiply=7]="Multiply",n[n.Modulo=8]="Modulo",n[n.And=9]="And",n[n.Or=10]="Or",n[n.BitwiseAnd=11]="BitwiseAnd",n[n.Lower=12]="Lower",n[n.LowerEquals=13]="LowerEquals",n[n.Bigger=14]="Bigger",n[n.BiggerEquals=15]="BiggerEquals",n[n.NullishCoalesce=16]="NullishCoalesce",n}(Ji||{});function jH(n,e,t){const i=n.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function Lh(n,e){return jH(n,e,(t,i)=>t.isEquivalent(i))}class Za{constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new Nh(this,e,null,t)}key(e,t,i){return new im(this,e,t,i)}callFn(e,t,i){return new ld(this,e,null,t,i)}instantiate(e,t,i){return new cy(this,e,t,i)}conditional(e,t=null,i){return new nm(this,e,t,null,i)}equals(e,t){return new Os(Ji.Equals,this,e,null,t)}notEquals(e,t){return new Os(Ji.NotEquals,this,e,null,t)}identical(e,t){return new Os(Ji.Identical,this,e,null,t)}notIdentical(e,t){return new Os(Ji.NotIdentical,this,e,null,t)}minus(e,t){return new Os(Ji.Minus,this,e,null,t)}plus(e,t){return new Os(Ji.Plus,this,e,null,t)}divide(e,t){return new Os(Ji.Divide,this,e,null,t)}multiply(e,t){return new Os(Ji.Multiply,this,e,null,t)}modulo(e,t){return new Os(Ji.Modulo,this,e,null,t)}and(e,t){return new Os(Ji.And,this,e,null,t)}bitwiseAnd(e,t,i=!0){return new Os(Ji.BitwiseAnd,this,e,null,t,i)}or(e,t){return new Os(Ji.Or,this,e,null,t)}lower(e,t){return new Os(Ji.Lower,this,e,null,t)}lowerEquals(e,t){return new Os(Ji.LowerEquals,this,e,null,t)}bigger(e,t){return new Os(Ji.Bigger,this,e,null,t)}biggerEquals(e,t){return new Os(Ji.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(Yb,e)}nullishCoalesce(e,t){return new Os(Ji.NullishCoalesce,this,e,null,t)}toStmt(){return new rh(this,null)}}class tm extends Za{constructor(e,t,i){super(t,i),this.name=e}isEquivalent(e){return e instanceof tm&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}clone(){return new tm(this.name,this.type,this.sourceSpan)}set(e){return new KE(this.name,e,null,this.sourceSpan)}}class sy extends Za{constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof sy&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new sy(this.expr.clone())}}class Vo extends Za{constructor(e,t,i){super(t,i),this.node=e}isEquivalent(e){return e instanceof Vo&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}clone(){return new Vo(this.node,this.type,this.sourceSpan)}}class KE extends Za{constructor(e,t,i,r){super(i||t.type,r),this.name=e,this.value=t}isEquivalent(e){return e instanceof KE&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteVarExpr(this,t)}clone(){return new KE(this.name,this.value.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new Bh(this.name,this.value,e,t,this.sourceSpan)}toConstDecl(){return this.toDeclStmt(ad,ih.Final)}}class ay extends Za{constructor(e,t,i,r,o){super(r||i.type,o),this.receiver=e,this.index=t,this.value=i}isEquivalent(e){return e instanceof ay&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteKeyExpr(this,t)}clone(){return new ay(this.receiver.clone(),this.index.clone(),this.value.clone(),this.type,this.sourceSpan)}}class ly extends Za{constructor(e,t,i,r,o){super(r||i.type,o),this.receiver=e,this.name=t,this.value=i}isEquivalent(e){return e instanceof ly&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWritePropExpr(this,t)}clone(){return new ly(this.receiver.clone(),this.name,this.value.clone(),this.type,this.sourceSpan)}}class ld extends Za{constructor(e,t,i,r,o=!1){super(i,r),this.fn=e,this.args=t,this.pure=o}get receiver(){return this.fn}isEquivalent(e){return e instanceof ld&&this.fn.isEquivalent(e.fn)&&Lh(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}clone(){return new ld(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}}class QE extends Za{constructor(e,t,i,r){super(i,r),this.tag=e,this.template=t}isEquivalent(e){return e instanceof QE&&this.tag.isEquivalent(e.tag)&&jH(this.template.elements,e.template.elements,(t,i)=>t.text===i.text)&&Lh(this.template.expressions,e.template.expressions)}isConstant(){return!1}visitExpression(e,t){return e.visitTaggedTemplateExpr(this,t)}clone(){return new QE(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}}class cy extends Za{constructor(e,t,i,r){super(i,r),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof cy&&this.classExpr.isEquivalent(e.classExpr)&&Lh(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}clone(){return new cy(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}}class ou extends Za{constructor(e,t,i){super(t,i),this.value=e}isEquivalent(e){return e instanceof ou&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}clone(){return new ou(this.value,this.type,this.sourceSpan)}}class JE{constructor(e,t){this.elements=e,this.expressions=t}clone(){return new JE(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}}class eC{constructor(e,t,i){this.text=e,this.sourceSpan=t,this.rawText=i??t?.toString()??eN(F2(e))}clone(){return new eC(this.text,this.sourceSpan,this.rawText)}}class Wb{constructor(e,t){this.text=e,this.sourceSpan=t}}class tC{constructor(e,t,i){this.text=e,this.sourceSpan=t,this.associatedMessage=i}}class N2 extends Za{constructor(e,t,i,r,o){super(JL,o),this.metaBlock=e,this.messageParts=t,this.placeHolderNames=i,this.expressions=r}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,t){return e.visitLocalizedString(this,t)}clone(){return new N2(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}|${e}`),this.metaBlock.customId&&(e=`${e}@@${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(t=>{e=`${e}\u241f${t}`}),HH(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){const t=this.placeHolderNames[e-1],i=this.messageParts[e];let r=t.text;return 0===t.associatedMessage?.legacyIds.length&&(r+=`@@${OH(t.associatedMessage.messageString,t.associatedMessage.meaning)}`),HH(r,i.text,this.getMessagePartSourceSpan(e))}}const F2=n=>n.replace(/\\/g,"\\\\"),p1e=n=>n.replace(/^:/,"\\:"),m1e=n=>n.replace(/:/g,"\\:"),eN=n=>n.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function HH(n,e,t){return""===n?{cooked:e,raw:eN(p1e(F2(e))),range:t}:{cooked:`:${n}:${e}`,raw:eN(`:${m1e(F2(n))}:${F2(e)}`),range:t}}class sg extends Za{constructor(e,t,i=null,r){super(t,r),this.value=e,this.typeParams=i}isEquivalent(e){return e instanceof sg&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}clone(){return new sg(this.value,this.type,this.typeParams,this.sourceSpan)}}class nm extends Za{constructor(e,t,i=null,r,o){super(r||t.type,o),this.condition=e,this.falseCase=i,this.trueCase=t}isEquivalent(e){return e instanceof nm&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&function UH(n,e){return null==n||null==e?n==e:n.isEquivalent(e)}(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}clone(){return new nm(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}}class nC extends Za{constructor(e,t){super(null,t),this.url=e}isEquivalent(e){return e instanceof nC&&this.url===e.url}isConstant(){return!1}visitExpression(e,t){return e.visitDynamicImportExpr(this,t)}clone(){return new nC(this.url,this.sourceSpan)}}class Xb extends Za{constructor(e,t){super(VH,t),this.condition=e}isEquivalent(e){return e instanceof Xb&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}clone(){return new Xb(this.condition.clone(),this.sourceSpan)}}class Xl{constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}clone(){return new Xl(this.name,this.type)}}class E_ extends Za{constructor(e,t,i,r,o){super(i,r),this.params=e,this.statements=t,this.name=o}isEquivalent(e){return e instanceof E_&&Lh(this.params,e.params)&&Lh(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t){return new iC(e,this.params,this.statements,this.type,t,this.sourceSpan)}clone(){return new E_(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}}class uy extends Za{constructor(e,t,i,r,o=!0){super(i||Hb,r),this.operator=e,this.expr=t,this.parens=o}isEquivalent(e){return e instanceof uy&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,t){return e.visitUnaryOperatorExpr(this,t)}clone(){return new uy(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}}class Os extends Za{constructor(e,t,i,r,o,a=!0){super(r||t.type,o),this.operator=e,this.rhs=i,this.parens=a,this.lhs=t}isEquivalent(e){return e instanceof Os&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}clone(){return new Os(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan,this.parens)}}class Nh extends Za{constructor(e,t,i,r){super(i,r),this.receiver=e,this.name=t}get index(){return this.name}isEquivalent(e){return e instanceof Nh&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new ly(this.receiver,this.name,e,null,this.sourceSpan)}clone(){return new Nh(this.receiver.clone(),this.name,this.type,this.sourceSpan)}}class im extends Za{constructor(e,t,i,r){super(i,r),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof im&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new ay(this.receiver,this.index,e,null,this.sourceSpan)}clone(){return new im(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}}class Fh extends Za{constructor(e,t,i){super(t,i),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof Fh&&Lh(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}clone(){return new Fh(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}}class dy{constructor(e,t,i){this.key=e,this.value=t,this.quoted=i}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new dy(this.key,this.value.clone(),this.quoted)}}class wf extends Za{constructor(e,t,i){super(t,i),this.entries=e,this.valueType=null,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof wf&&Lh(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}clone(){const e=this.entries.map(t=>t.clone());return new wf(e,this.type,this.sourceSpan)}}const hy=new ou(null,null,null),Yb=new ou(null,ad,null);var ih=function(n){return n[n.None=0]="None",n[n.Final=1]="Final",n[n.Private=2]="Private",n[n.Exported=4]="Exported",n[n.Static=8]="Static",n}(ih||{});class tN{constructor(e,t,i){this.text=e,this.multiline=t,this.trailingNewline=i}toString(){return this.multiline?` ${this.text} `:this.text}}class nN extends tN{constructor(e){super("",!0,!0),this.tags=e}toString(){return function w1e(n){if(0===n.length)return"";if(1===n.length&&n[0].tagName&&!n[0].text)return`*${YH(n[0])} `;let e="*\n";for(const t of n)e+=" *",e+=YH(t).replace(/\n/g,"\n * "),e+="\n";return e+=" ",e}(this.tags)}}class Zb{constructor(e=ih.None,t=null,i){this.modifiers=e,this.sourceSpan=t,this.leadingComments=i}hasModifier(e){return 0!=(this.modifiers&e)}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}}class Bh extends Zb{constructor(e,t,i,r,o,a){super(r,o,a),this.name=e,this.value=t,this.type=i||t&&t.type||null}isEquivalent(e){return e instanceof Bh&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}}class iC extends Zb{constructor(e,t,i,r,o,a,h){super(o,a,h),this.name=e,this.params=t,this.statements=i,this.type=r||null}isEquivalent(e){return e instanceof iC&&Lh(this.params,e.params)&&Lh(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}}class rh extends Zb{constructor(e,t,i){super(ih.None,t,i),this.expr=e}isEquivalent(e){return e instanceof rh&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}}class _l extends Zb{constructor(e,t=null,i){super(ih.None,t,i),this.value=e}isEquivalent(e){return e instanceof _l&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}}class z2 extends Zb{constructor(e,t,i=[],r,o){super(ih.None,r,o),this.condition=e,this.trueCase=t,this.falseCase=i}isEquivalent(e){return e instanceof z2&&this.condition.isEquivalent(e.condition)&&Lh(this.trueCase,e.trueCase)&&Lh(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}}function vo(n,e,t){return new tm(n,e,t)}function zi(n,e=null,t){return new sg(n,null,e,t)}function su(n,e,t){return new np(n,e,t)}function rC(n){return new sy(n)}function fo(n,e,t){return new Fh(n,e,t)}function zc(n,e=null){return new wf(n.map(t=>new dy(t.key,t.value,t.quoted)),e,null)}function lc(n,e,t,i,r){return new E_(n,e,t,i,r)}function oC(n,e,t,i,r){return new z2(n,e,t,i,r)}function iN(n,e,t,i){return new QE(n,e,t,i)}function Xt(n,e,t){return new ou(n,e,t)}function rN(n){return n instanceof ou&&null===n.value}function YH(n){let e="";if(n.tagName&&(e+=` @${n.tagName}`),n.text){if(n.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+n.text.replace(/@/g,"\\@")}return e}const ZH=vo("<unknown>"),C1e={};class $2 extends Za{constructor(e){super(e.type),this.resolved=e,this.shared=!1,this.original=e}visitExpression(e,t){return t===C1e?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof $2&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}}class KH{constructor(e=!1){this.isClosureCompilerEnabled=e,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.sharedConstants=new Map,this.nextNameIndex=0}getConstLiteral(e,t){if(e instanceof ou&&!QH(e)||e instanceof $2)return e;const i=Kb.INSTANCE.keyOf(e);let r=this.literals.get(i),o=!1;if(r||(r=new $2(e),this.literals.set(i,r),o=!0),!o&&!r.shared||o&&t){const a=this.freshName();let h,m;this.isClosureCompilerEnabled&&QH(e)?(h=vo(a).set(new E_([],[new _l(e)])),m=vo(a).callFn([])):(h=vo(a).set(e),m=vo(a)),this.statements.push(h.toDeclStmt(ad,ih.Final)),r.fixup(m)}return r}getSharedConstant(e,t){const i=e.keyOf(t);if(!this.sharedConstants.has(i)){const r=this.freshName();this.sharedConstants.set(i,vo(r)),this.statements.push(e.toSharedConstantDeclaration(r,t))}return this.sharedConstants.get(i)}getLiteralFactory(e){if(e instanceof Fh){const t=e.entries.map(r=>r.isConstant()?r:ZH),i=Kb.INSTANCE.keyOf(fo(t));return this._getLiteralFactory(i,e.entries,r=>fo(r))}{const t=zc(e.entries.map(r=>({key:r.key,value:r.value.isConstant()?r.value:ZH,quoted:r.quoted}))),i=Kb.INSTANCE.keyOf(t);return this._getLiteralFactory(i,e.entries.map(r=>r.value),r=>zc(r.map((o,a)=>({key:e.entries[a].key,value:o,quoted:e.entries[a].quoted}))))}}_getLiteralFactory(e,t,i){let r=this.literalFactories.get(e);const o=t.filter(a=>!a.isConstant());if(!r){const a=t.map((C,T)=>C.isConstant()?this.getConstLiteral(C,!0):vo(`a${T}`)),m=lc(a.filter(I1e).map(C=>new Xl(C.name,w_)),[new _l(i(a))],ad),_=this.freshName();this.statements.push(vo(_).set(m).toDeclStmt(ad,ih.Final)),r=vo(_),this.literalFactories.set(e,r)}return{literalFactory:r,literalFactoryArguments:o}}uniqueName(e){return`${e}${this.nextNameIndex++}`}freshName(){return this.uniqueName("_c")}}class Kb{static#e=this.INSTANCE=new Kb;keyOf(e){if(e instanceof ou&&"string"==typeof e.value)return`"${e.value}"`;if(e instanceof ou)return String(e.value);if(e instanceof Fh){const t=[];for(const i of e.entries)t.push(this.keyOf(i));return`[${t.join(",")}]`}if(e instanceof wf){const t=[];for(const i of e.entries){let r=i.key;i.quoted&&(r=`"${r}"`),t.push(r+":"+this.keyOf(i.value))}return`{${t.join(",")}}`}if(e instanceof sg)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof tm)return`read(${e.name})`;if(e instanceof sy)return`typeof(${this.keyOf(e.expr)})`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}function I1e(n){return n instanceof tm}function QH(n){return n instanceof ou&&"string"==typeof n.value&&n.value.length>=50}const xn="@angular/core";let Fe=(()=>{class n{static#e=this.NEW_METHOD="factory";static#t=this.TRANSFORM_METHOD="transform";static#n=this.PATCH_DEPS="patchedDeps";static#i=this.core={name:null,moduleName:xn};static#r=this.namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:xn};static#o=this.namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:xn};static#s=this.namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:xn};static#a=this.element={name:"\u0275\u0275element",moduleName:xn};static#l=this.elementStart={name:"\u0275\u0275elementStart",moduleName:xn};static#c=this.elementEnd={name:"\u0275\u0275elementEnd",moduleName:xn};static#u=this.advance={name:"\u0275\u0275advance",moduleName:xn};static#d=this.syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:xn};static#h=this.syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:xn};static#f=this.attribute={name:"\u0275\u0275attribute",moduleName:xn};static#p=this.attributeInterpolate1={name:"\u0275\u0275attributeInterpolate1",moduleName:xn};static#m=this.attributeInterpolate2={name:"\u0275\u0275attributeInterpolate2",moduleName:xn};static#g=this.attributeInterpolate3={name:"\u0275\u0275attributeInterpolate3",moduleName:xn};static#_=this.attributeInterpolate4={name:"\u0275\u0275attributeInterpolate4",moduleName:xn};static#v=this.attributeInterpolate5={name:"\u0275\u0275attributeInterpolate5",moduleName:xn};static#y=this.attributeInterpolate6={name:"\u0275\u0275attributeInterpolate6",moduleName:xn};static#b=this.attributeInterpolate7={name:"\u0275\u0275attributeInterpolate7",moduleName:xn};static#x=this.attributeInterpolate8={name:"\u0275\u0275attributeInterpolate8",moduleName:xn};static#w=this.attributeInterpolateV={name:"\u0275\u0275attributeInterpolateV",moduleName:xn};static#E=this.classProp={name:"\u0275\u0275classProp",moduleName:xn};static#C=this.elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:xn};static#S=this.elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:xn};static#I=this.elementContainer={name:"\u0275\u0275elementContainer",moduleName:xn};static#T=this.styleMap={name:"\u0275\u0275styleMap",moduleName:xn};static#D=this.styleMapInterpolate1={name:"\u0275\u0275styleMapInterpolate1",moduleName:xn};static#A=this.styleMapInterpolate2={name:"\u0275\u0275styleMapInterpolate2",moduleName:xn};static#M=this.styleMapInterpolate3={name:"\u0275\u0275styleMapInterpolate3",moduleName:xn};static#k=this.styleMapInterpolate4={name:"\u0275\u0275styleMapInterpolate4",moduleName:xn};static#P=this.styleMapInterpolate5={name:"\u0275\u0275styleMapInterpolate5",moduleName:xn};static#R=this.styleMapInterpolate6={name:"\u0275\u0275styleMapInterpolate6",moduleName:xn};static#O=this.styleMapInterpolate7={name:"\u0275\u0275styleMapInterpolate7",moduleName:xn};static#L=this.styleMapInterpolate8={name:"\u0275\u0275styleMapInterpolate8",moduleName:xn};static#N=this.styleMapInterpolateV={name:"\u0275\u0275styleMapInterpolateV",moduleName:xn};static#F=this.classMap={name:"\u0275\u0275classMap",moduleName:xn};static#B=this.classMapInterpolate1={name:"\u0275\u0275classMapInterpolate1",moduleName:xn};static#z=this.classMapInterpolate2={name:"\u0275\u0275classMapInterpolate2",moduleName:xn};static#$=this.classMapInterpolate3={name:"\u0275\u0275classMapInterpolate3",moduleName:xn};static#V=this.classMapInterpolate4={name:"\u0275\u0275classMapInterpolate4",moduleName:xn};static#U=this.classMapInterpolate5={name:"\u0275\u0275classMapInterpolate5",moduleName:xn};static#j=this.classMapInterpolate6={name:"\u0275\u0275classMapInterpolate6",moduleName:xn};static#G=this.classMapInterpolate7={name:"\u0275\u0275classMapInterpolate7",moduleName:xn};static#H=this.classMapInterpolate8={name:"\u0275\u0275classMapInterpolate8",moduleName:xn};static#q=this.classMapInterpolateV={name:"\u0275\u0275classMapInterpolateV",moduleName:xn};static#W=this.styleProp={name:"\u0275\u0275styleProp",moduleName:xn};static#X=this.stylePropInterpolate1={name:"\u0275\u0275stylePropInterpolate1",moduleName:xn};static#Y=this.stylePropInterpolate2={name:"\u0275\u0275stylePropInterpolate2",moduleName:xn};static#Z=this.stylePropInterpolate3={name:"\u0275\u0275stylePropInterpolate3",moduleName:xn};static#K=this.stylePropInterpolate4={name:"\u0275\u0275stylePropInterpolate4",moduleName:xn};static#Q=this.stylePropInterpolate5={name:"\u0275\u0275stylePropInterpolate5",moduleName:xn};static#J=this.stylePropInterpolate6={name:"\u0275\u0275stylePropInterpolate6",moduleName:xn};static#ee=this.stylePropInterpolate7={name:"\u0275\u0275stylePropInterpolate7",moduleName:xn};static#te=this.stylePropInterpolate8={name:"\u0275\u0275stylePropInterpolate8",moduleName:xn};static#ne=this.stylePropInterpolateV={name:"\u0275\u0275stylePropInterpolateV",moduleName:xn};static#ie=this.nextContext={name:"\u0275\u0275nextContext",moduleName:xn};static#re=this.resetView={name:"\u0275\u0275resetView",moduleName:xn};static#oe=this.templateCreate={name:"\u0275\u0275template",moduleName:xn};static#se=this.defer={name:"\u0275\u0275defer",moduleName:xn};static#ae=this.text={name:"\u0275\u0275text",moduleName:xn};static#le=this.enableBindings={name:"\u0275\u0275enableBindings",moduleName:xn};static#ce=this.disableBindings={name:"\u0275\u0275disableBindings",moduleName:xn};static#ue=this.getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:xn};static#de=this.textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:xn};static#he=this.textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:xn};static#fe=this.textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:xn};static#pe=this.textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:xn};static#me=this.textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:xn};static#ge=this.textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:xn};static#_e=this.textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:xn};static#ve=this.textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:xn};static#ye=this.textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:xn};static#be=this.textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:xn};static#xe=this.restoreView={name:"\u0275\u0275restoreView",moduleName:xn};static#we=this.pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:xn};static#Ee=this.pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:xn};static#Ce=this.pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:xn};static#Se=this.pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:xn};static#Ie=this.pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:xn};static#Te=this.pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:xn};static#De=this.pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:xn};static#Ae=this.pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:xn};static#Me=this.pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:xn};static#ke=this.pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:xn};static#Pe=this.pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:xn};static#Re=this.pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:xn};static#Oe=this.pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:xn};static#Le=this.pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:xn};static#Ne=this.pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:xn};static#Fe=this.hostProperty={name:"\u0275\u0275hostProperty",moduleName:xn};static#Be=this.property={name:"\u0275\u0275property",moduleName:xn};static#ze=this.propertyInterpolate={name:"\u0275\u0275propertyInterpolate",moduleName:xn};static#$e=this.propertyInterpolate1={name:"\u0275\u0275propertyInterpolate1",moduleName:xn};static#Ve=this.propertyInterpolate2={name:"\u0275\u0275propertyInterpolate2",moduleName:xn};static#Ue=this.propertyInterpolate3={name:"\u0275\u0275propertyInterpolate3",moduleName:xn};static#je=this.propertyInterpolate4={name:"\u0275\u0275propertyInterpolate4",moduleName:xn};static#Ge=this.propertyInterpolate5={name:"\u0275\u0275propertyInterpolate5",moduleName:xn};static#He=this.propertyInterpolate6={name:"\u0275\u0275propertyInterpolate6",moduleName:xn};static#qe=this.propertyInterpolate7={name:"\u0275\u0275propertyInterpolate7",moduleName:xn};static#We=this.propertyInterpolate8={name:"\u0275\u0275propertyInterpolate8",moduleName:xn};static#Xe=this.propertyInterpolateV={name:"\u0275\u0275propertyInterpolateV",moduleName:xn};static#Ye=this.i18n={name:"\u0275\u0275i18n",moduleName:xn};static#Ze=this.i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:xn};static#Ke=this.i18nExp={name:"\u0275\u0275i18nExp",moduleName:xn};static#Qe=this.i18nStart={name:"\u0275\u0275i18nStart",moduleName:xn};static#Je=this.i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:xn};static#et=this.i18nApply={name:"\u0275\u0275i18nApply",moduleName:xn};static#tt=this.i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:xn};static#nt=this.pipe={name:"\u0275\u0275pipe",moduleName:xn};static#it=this.projection={name:"\u0275\u0275projection",moduleName:xn};static#rt=this.projectionDef={name:"\u0275\u0275projectionDef",moduleName:xn};static#ot=this.reference={name:"\u0275\u0275reference",moduleName:xn};static#st=this.inject={name:"\u0275\u0275inject",moduleName:xn};static#at=this.injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:xn};static#lt=this.directiveInject={name:"\u0275\u0275directiveInject",moduleName:xn};static#ct=this.invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:xn};static#ut=this.invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:xn};static#dt=this.templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:xn};static#ht=this.forwardRef={name:"forwardRef",moduleName:xn};static#ft=this.resolveForwardRef={name:"resolveForwardRef",moduleName:xn};static#pt=this.\u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:xn};static#mt=this.declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:xn};static#gt=this.InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:xn};static#_t=this.resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:xn};static#vt=this.resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:xn};static#yt=this.resolveBody={name:"\u0275\u0275resolveBody",moduleName:xn};static#bt=this.defineComponent={name:"\u0275\u0275defineComponent",moduleName:xn};static#xt=this.declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:xn};static#wt=this.setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:xn};static#Et=this.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:xn};static#Ct=this.ViewEncapsulation={name:"ViewEncapsulation",moduleName:xn};static#St=this.ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:xn};static#It=this.FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:xn};static#Tt=this.declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:xn};static#Dt=this.FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:xn};static#At=this.defineDirective={name:"\u0275\u0275defineDirective",moduleName:xn};static#Mt=this.declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:xn};static#kt=this.DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:xn};static#Pt=this.InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:xn};static#Rt=this.InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:xn};static#Ot=this.defineInjector={name:"\u0275\u0275defineInjector",moduleName:xn};static#Lt=this.declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:xn};static#Nt=this.NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:xn};static#Ft=this.ModuleWithProviders={name:"ModuleWithProviders",moduleName:xn};static#Bt=this.defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:xn};static#zt=this.declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:xn};static#$t=this.setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:xn};static#Vt=this.registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:xn};static#Ut=this.PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:xn};static#jt=this.definePipe={name:"\u0275\u0275definePipe",moduleName:xn};static#Gt=this.declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:xn};static#Ht=this.declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:xn};static#qt=this.setClassMetadata={name:"\u0275setClassMetadata",moduleName:xn};static#Wt=this.queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:xn};static#Xt=this.viewQuery={name:"\u0275\u0275viewQuery",moduleName:xn};static#Yt=this.loadQuery={name:"\u0275\u0275loadQuery",moduleName:xn};static#Zt=this.contentQuery={name:"\u0275\u0275contentQuery",moduleName:xn};static#Kt=this.NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:xn};static#Qt=this.InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:xn};static#Jt=this.CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:xn};static#en=this.StandaloneFeature={name:"\u0275\u0275StandaloneFeature",moduleName:xn};static#tn=this.ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:xn};static#nn=this.HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:xn};static#in=this.InputTransformsFeatureFeature={name:"\u0275\u0275InputTransformsFeature",moduleName:xn};static#rn=this.listener={name:"\u0275\u0275listener",moduleName:xn};static#on=this.getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:xn};static#sn=this.sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:xn};static#an=this.sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:xn};static#ln=this.sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:xn};static#cn=this.sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:xn};static#un=this.sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:xn};static#dn=this.sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:xn};static#hn=this.trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:xn};static#fn=this.trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:xn};static#pn=this.validateIframeAttribute={name:"\u0275\u0275validateIframeAttribute",moduleName:xn}}return n})();const T1e=/-+([a-z0-9])/g;function JH(n,e,t){const i=n.indexOf(e);return-1==i?t:[n.slice(0,i).trim(),n.slice(i+1).trim()]}function V2(n){throw new Error(`Internal Error: ${n}`)}function eq(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(eq).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;if(!n.toString)return"object";const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}const Qb=globalThis;class F1e{constructor(e=null){this.file=e,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,i,r){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==i||null==r))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:i,sourceCol0:r}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;const e=new Map,t=[],i=[];Array.from(this.sourcesContent.keys()).forEach((_,C)=>{e.set(_,C),t.push(_),i.push(this.sourcesContent.get(_)||null)});let r="",o=0,a=0,h=0,m=0;return this.lines.forEach(_=>{o=0,r+=_.map(C=>{let T=U2(C.col0-o);return o=C.col0,null!=C.sourceUrl&&(T+=U2(e.get(C.sourceUrl)-a),a=e.get(C.sourceUrl),T+=U2(C.sourceLine0-h),h=C.sourceLine0,T+=U2(C.sourceCol0-m),m=C.sourceCol0),T}).join(","),r+=";"}),r=r.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:t,sourcesContent:i,mappings:r}}toJsComment(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function B1e(n){let e="";const t=function P1e(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i>=55296&&i<=56319&&n.length>t+1){const r=n.charCodeAt(t+1);r>=56320&&r<=57343&&(t++,i=(i-55296<<10)+r-56320+65536)}i<=127?e.push(i):i<=2047?e.push(i>>6&31|192,63&i|128):i<=65535?e.push(i>>12|224,i>>6&63|128,63&i|128):i<=2097151&&e.push(i>>18&7|240,i>>12&63|128,i>>6&63|128,63&i|128)}return e}(n);for(let i=0;i<t.length;){const r=t[i++],o=i<t.length?t[i++]:null,a=i<t.length?t[i++]:null;e+=sC(r>>2),e+=sC((3&r)<<4|(null===o?0:o>>4)),e+=null===o?"=":sC((15&o)<<2|(null===a?0:a>>6)),e+=null===o||null===a?"=":sC(63&a)}return e}(JSON.stringify(this,null,0)):""}}function U2(n){n=n<0?1+(-n<<1):n<<1;let e="";do{let t=31&n;(n>>=5)>0&&(t|=32),e+=sC(t)}while(n>0);return e}const z1e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function sC(n){if(n<0||n>=64)throw new Error("Can only encode value in the range [0, 63]");return z1e[n]}const $1e=/'|\\|\n|\r|\$/g,V1e=/^[$A-Z_][0-9A-Z_$]*$/i;class tq{constructor(e){this.indent=e,this.partsLength=0,this.parts=[],this.srcSpans=[]}}class sN{static createRoot(){return new sN(0)}constructor(e){this._indent=e,this._lines=[new tq(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return 0===this._currentLine.parts.length}lineLength(){return 2*this._currentLine.indent+this._currentLine.partsLength}print(e,t,i=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),i&&this._lines.push(new tq(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?nq(e.indent)+e.parts.join(""):"").join("\n")}toSourceMapGenerator(e,t=0){const i=new F1e(e);let r=!1;const o=()=>{r||(i.addSource(e," ").addMapping(0,e,0,0),r=!0)};for(let a=0;a<t;a++)i.addLine(),o();return this.sourceLines.forEach((a,h)=>{i.addLine();const m=a.srcSpans,_=a.parts;let C=2*a.indent,T=0;for(;T<m.length&&!m[T];)C+=_[T].length,T++;for(T<m.length&&0===h&&0===C?r=!0:o();T<m.length;){const P=m[T],O=P.start.file,j=P.start.line,q=P.start.col;for(i.addSource(O.url,O.content).addMapping(C,O.url,j,q),C+=_[T].length,T++;T<m.length&&(P===m[T]||!m[T]);)C+=_[T].length,T++}}),i}spanOf(e,t){const i=this._lines[e];if(i){let r=t-nq(i.indent).length;for(let o=0;o<i.parts.length;o++){const a=i.parts[o];if(a.length>r)return i.srcSpans[o];r-=a.length}}return null}get sourceLines(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}class U1e{constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,t){if(void 0!==e.leadingComments)for(const i of e.leadingComments)i instanceof nN?t.print(e,`/*${i.toString()}*/`,i.trailingNewline):i.multiline?t.print(e,`/* ${i.text} */`,i.trailingNewline):i.text.split("\n").forEach(r=>{t.println(e,`// ${r}`)})}visitExpressionStmt(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");const i=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!i?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),i&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitWriteVarExpr(e,t){const i=t.lineIsEmpty();return i||t.print(e,"("),t.print(e,`${e.name} = `),e.value.visitExpression(this,t),i||t.print(e,")"),null}visitWriteKeyExpr(e,t){const i=t.lineIsEmpty();return i||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),i||t.print(e,")"),null}visitWritePropExpr(e,t){const i=t.lineIsEmpty();return i||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,`.${e.name} = `),e.value.visitExpression(this,t),i||t.print(e,")"),null}visitInvokeFunctionExpr(e,t){return e.fn.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitTaggedTemplateExpr(e,t){e.tag.visitExpression(this,t),t.print(e,"`"+e.template.elements[0].rawText);for(let i=1;i<e.template.elements.length;i++)t.print(e,"${"),e.template.expressions[i-1].visitExpression(this,t),t.print(e,`}${e.template.elements[i].rawText}`);return t.print(e,"`"),null}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){return t.print(e,e.name),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){const i=e.value;return t.print(e,"string"==typeof i?fy(i,this._escapeDollarInStrings):`${i}`),null}visitLocalizedString(e,t){const i=e.serializeI18nHead();t.print(e,"$localize `"+i.raw);for(let r=1;r<e.messageParts.length;r++)t.print(e,"${"),e.expressions[r-1].visitExpression(this,t),t.print(e,`}${e.serializeI18nTemplatePart(r).raw}`);return t.print(e,"`"),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitDynamicImportExpr(e,t){t.print(e,`import(${e.url})`)}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitUnaryOperatorExpr(e,t){let i;switch(e.operator){case qb.Plus:i="+";break;case qb.Minus:i="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),t.print(e,i),e.expr.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitBinaryOperatorExpr(e,t){let i;switch(e.operator){case Ji.Equals:i="==";break;case Ji.Identical:i="===";break;case Ji.NotEquals:i="!=";break;case Ji.NotIdentical:i="!==";break;case Ji.And:i="&&";break;case Ji.BitwiseAnd:i="&";break;case Ji.Or:i="||";break;case Ji.Plus:i="+";break;case Ji.Minus:i="-";break;case Ji.Divide:i="/";break;case Ji.Multiply:i="*";break;case Ji.Modulo:i="%";break;case Ji.Lower:i="<";break;case Ji.LowerEquals:i="<=";break;case Ji.Bigger:i=">";break;case Ji.BiggerEquals:i=">=";break;case Ji.NullishCoalesce:i="??";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${i} `),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(i=>{t.print(e,`${fy(i.key,this._escapeDollarInStrings,i.quoted)}:`),i.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitAllExpressions(e,t,i){this.visitAllObjects(r=>r.visitExpression(this,t),e,t,i)}visitAllObjects(e,t,i,r){let o=!1;for(let a=0;a<t.length;a++)a>0&&(i.lineLength()>80?(i.print(null,r,!0),o||(i.incIndent(),i.incIndent(),o=!0)):i.print(null,r,!1)),e(t[a]);o&&(i.decIndent(),i.decIndent())}visitAllStatements(e,t){e.forEach(i=>i.visitStatement(this,t))}}function fy(n,e,t=!0){if(null==n)return null;const i=n.replace($1e,(...o)=>"$"==o[0]?e?"\\$":"$":"\n"==o[0]?"\\n":"\r"==o[0]?"\\r":`\\${o[0]}`);return t||!V1e.test(i)?`'${i}'`:i}function nq(n){let e="";for(let t=0;t<n;t++)e+="  ";return e}function j2(n,e){if(0===e)return su(n);const t=[];for(let i=0;i<e;i++)t.push(w_);return su(n,void 0,t)}const iq="@";function rq(n){return`${iq}${n}`}function G1e(n,e){const t=fy(e,!1,!1);return t!==e?`${n}[${t}]`:`${n}.${e}`}function oq(n,e){return`animation_${n}_${e}`}function Iu(n){const e=new Vo(n);return{value:e,type:e}}function rp(n,e){const t=fo(n.map(i=>i.value));return e?lc([],[new _l(t)]):t}function aN(n,e){return{expression:n,forwardRef:e}}function Jb({expression:n,forwardRef:e}){switch(e){case 0:case 1:return n;case 2:return function lN(n){return zi(Fe.forwardRef).callFn([lc([],[new _l(n)])])}(n)}}var G2=function(n){return n[n.Class=0]="Class",n[n.Function=1]="Function",n}(G2||{}),rm=function(n){return n[n.Directive=0]="Directive",n[n.Component=1]="Component",n[n.Injectable=2]="Injectable",n[n.Pipe=3]="Pipe",n[n.NgModule=4]="NgModule",n}(rm||{});function py(n){const e=vo("t");let t=null;const i=cq(n)?e:new Os(Ji.Or,e,n.type.value);let r=null;null!==n.deps?"invalid"!==n.deps&&(r=new cy(i,lq(n.deps,n.target))):(t=vo(`\u0275${n.name}_BaseFactory`),r=t.callFn([i]));const o=[];let a=null;function h(_){const C=vo("r");o.push(C.set(hy).toDeclStmt());const T=null!==r?C.set(r).toStmt():zi(Fe.invalidFactory).callFn([]).toStmt();return o.push(oC(e,[T],[C.set(_).toStmt()])),C}if(cq(n)){const _=lq(n.delegateDeps,n.target);a=h(new(n.delegateType===G2.Class?cy:ld)(n.delegate,_))}else a=function Z1e(n){return void 0!==n.expression}(n)?h(n.expression):r;if(null===a)o.push(zi(Fe.invalidFactory).callFn([]).toStmt());else if(null!==t){const _=zi(Fe.getInheritedFactory).callFn([n.type.value]),C=new Os(Ji.Or,t,t.set(_));o.push(new _l(C.callFn([i])))}else o.push(new _l(a));let m=lc([new Xl("t",w_)],o,ad,void 0,`${n.name}_Factory`);return null!==t&&(m=lc([],[new Bh(t.name),new _l(m)]).callFn([],void 0,!0)),{expression:m,statements:[],type:aq(n)}}function aq(n){const e=null!==n.deps&&"invalid"!==n.deps?function X1e(n){let e=!1;const t=n.map(i=>{const r=function Y1e(n){const e=[];return null!==n.attributeNameType&&e.push({key:"attribute",value:n.attributeNameType,quoted:!1}),n.optional&&e.push({key:"optional",value:Xt(!0),quoted:!1}),n.host&&e.push({key:"host",value:Xt(!0),quoted:!1}),n.self&&e.push({key:"self",value:Xt(!0),quoted:!1}),n.skipSelf&&e.push({key:"skipSelf",value:Xt(!0),quoted:!1}),e.length>0?zc(e):null}(i);return null!==r?(e=!0,r):Xt(null)});return e?su(fo(t)):ip}(n.deps):ip;return su(zi(Fe.FactoryDeclaration,[j2(n.type.type,n.typeArgumentCount),e]))}function lq(n,e){return n.map((t,i)=>function W1e(n,e,t){if(null===n.token)return zi(Fe.invalidFactoryDep).callFn([Xt(t)]);if(null===n.attributeNameType){const i=0|(n.self?2:0)|(n.skipSelf?4:0)|(n.host?1:0)|(n.optional?8:0)|(e===rm.Pipe?16:0);let r=0!==i||n.optional?Xt(i):null;const o=[n.token];r&&o.push(r);const a=function K1e(n){switch(n){case rm.Component:case rm.Directive:case rm.Pipe:return Fe.directiveInject;default:return Fe.inject}}(e);return zi(a).callFn(o)}return zi(Fe.injectAttribute).callFn([n.token])}(t,e,i))}function cq(n){return void 0!==n.delegateType}class Q1e{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){throw new Error("visit() not implemented for Comment")}}class my{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}}class H2{constructor(e,t,i){this.value=e,this.sourceSpan=t,this.i18n=i}visit(e){return e.visitBoundText(this)}}class q2{constructor(e,t,i,r,o,a){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o,this.i18n=a}visit(e){return e.visitTextAttribute(this)}}class W2{constructor(e,t,i,r,o,a,h,m,_){this.name=e,this.type=t,this.securityContext=i,this.value=r,this.unit=o,this.sourceSpan=a,this.keySpan=h,this.valueSpan=m,this.i18n=_}static fromBoundElementProperty(e,t){if(void 0===e.keySpan)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new W2(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,t)}visit(e){return e.visitBoundAttribute(this)}}class X2{constructor(e,t,i,r,o,a,h,m){this.name=e,this.type=t,this.handler=i,this.target=r,this.phase=o,this.sourceSpan=a,this.handlerSpan=h,this.keySpan=m}static fromParsedEvent(e){const t=0===e.type?e.targetOrPhase:null,i=1===e.type?e.targetOrPhase:null;if(void 0===e.keySpan)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new X2(e.name,e.type,e.handler,t,i,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}}class aC{constructor(e,t,i,r,o,a,h,m,_,C){this.name=e,this.attributes=t,this.inputs=i,this.outputs=r,this.children=o,this.references=a,this.sourceSpan=h,this.startSourceSpan=m,this.endSourceSpan=_,this.i18n=C}visit(e){return e.visitElement(this)}}class gy{constructor(e){this.sourceSpan=e}visit(e){return e.visitDeferredTrigger(this)}}class uq extends gy{constructor(e,t){super(t),this.value=e}}class J1e extends gy{}class ewe extends gy{}class twe extends gy{}class nwe extends gy{constructor(e,t){super(t),this.delay=e}}class iwe extends gy{constructor(e,t){super(t),this.reference=e}}class rwe extends gy{constructor(e,t){super(t),this.reference=e}}class owe{constructor(e,t,i,r,o){this.children=e,this.minimumTime=t,this.sourceSpan=i,this.startSourceSpan=r,this.endSourceSpan=o}visit(e){return e.visitDeferredBlockPlaceholder(this)}}class swe{constructor(e,t,i,r,o,a){this.children=e,this.afterTime=t,this.minimumTime=i,this.sourceSpan=r,this.startSourceSpan=o,this.endSourceSpan=a}visit(e){return e.visitDeferredBlockLoading(this)}}class awe{constructor(e,t,i,r){this.children=e,this.sourceSpan=t,this.startSourceSpan=i,this.endSourceSpan=r}visit(e){return e.visitDeferredBlockError(this)}}class lwe{constructor(e,t,i,r,o,a,h,m,_){this.children=e,this.triggers=t,this.prefetchTriggers=i,this.placeholder=r,this.loading=o,this.error=a,this.sourceSpan=h,this.startSourceSpan=m,this.endSourceSpan=_}visit(e){return e.visitDeferredBlock(this)}}class om{constructor(e,t,i,r,o,a,h,m,_,C,T,P){this.tagName=e,this.attributes=t,this.inputs=i,this.outputs=r,this.templateAttrs=o,this.children=a,this.references=h,this.variables=m,this.sourceSpan=_,this.startSourceSpan=C,this.endSourceSpan=T,this.i18n=P}visit(e){return e.visitTemplate(this)}}class cwe{constructor(e,t,i,r){this.selector=e,this.attributes=t,this.sourceSpan=i,this.i18n=r,this.name="ng-content"}visit(e){return e.visitContent(this)}}class dq{constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o}visit(e){return e.visitVariable(this)}}class uwe{constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o}visit(e){return e.visitReference(this)}}class hq{constructor(e,t,i,r){this.vars=e,this.placeholders=t,this.sourceSpan=i,this.i18n=r}visit(e){return e.visitIcu(this)}}function au(n,e){const t=[];if(n.visit)for(const i of e)n.visit(i)||i.visit(n);else for(const i of e){const r=i.visit(n);r&&t.push(r)}return t}class ag{constructor(e,t,i,r,o,a){this.nodes=e,this.placeholders=t,this.placeholderToMessage=i,this.meaning=r,this.description=o,this.customId=a,this.legacyIds=[],this.id=this.customId,this.messageString=function dwe(n){const e=new hwe;return n.map(i=>i.visit(e)).join("")}(this.nodes),this.sources=e.length?[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:[]}}class lg{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}}class op{constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}}class ex{constructor(e,t,i,r,o){this.expression=e,this.type=t,this.cases=i,this.sourceSpan=r,this.expressionPlaceholder=o}visit(e,t){return e.visitIcu(this,t)}}class cN{constructor(e,t,i,r,o,a,h,m,_){this.tag=e,this.attrs=t,this.startName=i,this.closeName=r,this.children=o,this.isVoid=a,this.sourceSpan=h,this.startSourceSpan=m,this.endSourceSpan=_}visit(e,t){return e.visitTagPlaceholder(this,t)}}class cg{constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitPlaceholder(this,t)}}class tx{constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitIcuPlaceholder(this,t)}}class hwe{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){const t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){const t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}}new class fwe{visitTag(e){const t=this._serializeAttributes(e.attrs);if(0==e.children.length)return`<${e.name}${t}/>`;const i=e.children.map(r=>r.visit(this));return`<${e.name}${t}>${i.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){const t=Object.keys(e).map(i=>`${i}="${e[i]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [\n${e.dtd}\n]>`}};const fN="i18n-",_q="\ufffd";function uC(n){return n instanceof ag}function Z2(n){return uC(n)&&1===n.nodes.length&&n.nodes[0]instanceof ex}function Twe(n){return!!n.i18n}function yq(n){return n.nodes[0]}function K2(n,e=0){return`${_q}${n}${e>0?`:${e}`:""}${_q}`}function Mwe(n=0){let e=n;return()=>e++}function bq(n){const e={};return n.forEach((t,i)=>{e[i]=Xt(t.length>1?`[${t.join("|")}]`:t[0])}),e}function Q2(n,e,...t){const i=n.get(e)||[];i.push(...t),n.set(e,i)}function xq(n,e=0,t=0){const i=e,r=new Map,o=n instanceof ag?n.nodes.find(a=>a instanceof op):n;return o&&o.children.filter(a=>a instanceof cg).forEach((a,h)=>{const m=K2(i+h,t);Q2(r,a.name,m)}),r}function pN(n={},e){const t={};return n&&Object.keys(n).length&&Object.keys(n).forEach(i=>t[dC(i,e)]=n[i]),t}function dC(n,e=!0){const t=function hN(n){return n.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}(n);if(!e)return t;const i=t.split("_");if(1===i.length)return n.toLowerCase();let r;/^\d+$/.test(i[i.length-1])&&(r=i.pop());let o=i.shift().toLowerCase();return i.length&&(o+=i.map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join("")),r?`${o}_${r}`:o}function wq(n){return`MSG_${n}`.toUpperCase()}function kwe(n){return new Bh(n.name,void 0,ad,void 0,n.sourceSpan)}const Pwe=/[-.]/,mN="_t",sp="ctx",hC="rf",Eq="restoredCtx",Nwe=500,Fwe=new Set([Fe.element,Fe.elementStart,Fe.elementEnd,Fe.elementContainer,Fe.elementContainerStart,Fe.elementContainerEnd,Fe.i18nExp,Fe.listener,Fe.classProp,Fe.syntheticHostListener,Fe.hostProperty,Fe.syntheticHostProperty,Fe.property,Fe.propertyInterpolate1,Fe.propertyInterpolate2,Fe.propertyInterpolate3,Fe.propertyInterpolate4,Fe.propertyInterpolate5,Fe.propertyInterpolate6,Fe.propertyInterpolate7,Fe.propertyInterpolate8,Fe.propertyInterpolateV,Fe.attribute,Fe.attributeInterpolate1,Fe.attributeInterpolate2,Fe.attributeInterpolate3,Fe.attributeInterpolate4,Fe.attributeInterpolate5,Fe.attributeInterpolate6,Fe.attributeInterpolate7,Fe.attributeInterpolate8,Fe.attributeInterpolateV,Fe.styleProp,Fe.stylePropInterpolate1,Fe.stylePropInterpolate2,Fe.stylePropInterpolate3,Fe.stylePropInterpolate4,Fe.stylePropInterpolate5,Fe.stylePropInterpolate6,Fe.stylePropInterpolate7,Fe.stylePropInterpolate8,Fe.stylePropInterpolateV,Fe.textInterpolate,Fe.textInterpolate1,Fe.textInterpolate2,Fe.textInterpolate3,Fe.textInterpolate4,Fe.textInterpolate5,Fe.textInterpolate6,Fe.textInterpolate7,Fe.textInterpolate8,Fe.textInterpolateV]);function _y(n,e,t){return zi(e,null,n).callFn(t,n)}function Cq(n,e){let t=null;return()=>(t||(n.push(new Bh(mN,void 0,w_)),t=vo(e)),t)}function fC(n){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${n.constructor.name}`)}function zh(n){return Array.isArray(n)?fo(n.map(zh)):Xt(n,ad)}function J2(n,e){const t=Object.getOwnPropertyNames(n);return 0===t.length?null:zc(t.map(i=>{const r=n[i];let o,a,h,m;if("string"==typeof r)o=i,h=i,a=r,m=zh(a);else if(h=i,o=r.classPropertyName,a=r.bindingPropertyName,!e||a===o&&null==r.transformFunction)m=zh(a);else{const _=[zh(a),zh(o)];null!=r.transformFunction&&_.push(r.transformFunction),m=fo(_)}return{key:h,quoted:Pwe.test(h),value:m}}))}function eA(n){for(;rN(n[n.length-1]);)n.pop();return n}function Bwe(n,e){if(Array.isArray(n.predicate)){let t=[];return n.predicate.forEach(i=>{const r=i.split(",").map(o=>Xt(o.trim()));t.push(...r)}),e.getConstLiteral(fo(t),!0)}switch(n.predicate.forwardRef){case 0:case 2:return n.predicate.expression;case 1:return zi(Fe.resolveForwardRef).callFn([n.predicate.expression])}}class lu{constructor(){this.values=[]}set(e,t){t&&this.values.push({key:e,value:t,quoted:!1})}toLiteralMap(){return zc(this.values)}}function vy(n){const{expressions:e,strings:t}=n;return 1===e.length&&2===t.length&&""===t[0]&&""===t[1]?1:e.length+t.length}function tA(n){const e=[];let t=null,i=null,r=0;for(const o of n){const a=("function"==typeof o.paramsOrFn?o.paramsOrFn():o.paramsOrFn)??[],h=Array.isArray(a)?a:[a];r<Nwe&&i===o.reference&&Fwe.has(i)?(t=t.callFn(h,t.sourceSpan),r++):(null!==t&&e.push(t.toStmt()),t=_y(o.span,o.reference,h),i=o.reference,r=0)}return null!==t&&e.push(t.toStmt()),e}function Sq(n,e){let t=null;const i={name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:[],target:rm.Injectable};if(void 0!==n.useClass){const h=n.useClass.expression.isEquivalent(n.type.value);let m;void 0!==n.deps&&(m=n.deps),t=void 0!==m?py({...i,delegate:n.useClass.expression,delegateDeps:m,delegateType:G2.Class}):h?py(i):{statements:[],expression:Tq(n.type.value,n.useClass.expression,e)}}else t=void 0!==n.useFactory?void 0!==n.deps?py({...i,delegate:n.useFactory,delegateDeps:n.deps||[],delegateType:G2.Function}):{statements:[],expression:lc([],[new _l(n.useFactory.callFn([]))])}:void 0!==n.useValue?py({...i,expression:n.useValue.expression}):void 0!==n.useExisting?py({...i,expression:zi(Fe.inject).callFn([n.useExisting.expression])}):{statements:[],expression:Tq(n.type.value,n.type.value,e)};const r=n.type.value,o=new lu;return o.set("token",r),o.set("factory",t.expression),null!==n.providedIn.expression.value&&o.set("providedIn",Jb(n.providedIn)),{expression:zi(Fe.\u0275\u0275defineInjectable).callFn([o.toLiteralMap()],void 0,!0),type:Iq(n),statements:t.statements}}function Iq(n){return new np(zi(Fe.InjectableDeclaration,[j2(n.type.type,n.typeArgumentCount)]))}function Tq(n,e,t){return n.node===e.node?e.prop("\u0275fac"):Dq(t?zi(Fe.resolveForwardRef).callFn([e]):e)}function Dq(n){return lc([new Xl("t",w_)],[new _l(n.prop("\u0275fac").callFn([vo("t")]))])}const $we=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];class nA{static fromArray(e){return e?(function Vwe(n,e){if(null!=e&&(!Array.isArray(e)||2!=e.length))throw new Error(`Expected '${n}' to be an array, [start, end].`);if(null!=e){const t=e[0],i=e[1];$we.forEach(r=>{if(r.test(t)||r.test(i))throw new Error(`['${t}', '${i}'] contains unusable interpolation symbol.`)})}}("interpolation",e),new nA(e[0],e[1])):Ef}constructor(e,t){this.start=e,this.end=t}}const Ef=new nA("{{","}}"),cd=0,gN=9,kq=32,vN=48,Nq=57,ox=65,sA=90,xy=97,gC=122,lp=123,ju=125,Gq=160;function bN(n){return n>=gN&&n<=kq||n==Gq}function dg(n){return vN<=n&&n<=Nq}function cA(n){return n>=xy&&n<=gC||n>=ox&&n<=sA}function Hq(n){return 10===n||13===n}function qq(n){return vN<=n&&n<=55}function uA(n){return 39===n||34===n||96===n}class wy{constructor(e,t,i,r){this.file=e,this.offset=t,this.line=i,this.col=r}toString(){return null!=this.offset?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){const t=this.file.content,i=t.length;let r=this.offset,o=this.line,a=this.col;for(;r>0&&e<0;)if(r--,e++,10==t.charCodeAt(r)){o--;const m=t.substring(0,r-1).lastIndexOf(String.fromCharCode(10));a=m>0?r-m:r}else a--;for(;r<i&&e>0;){const h=t.charCodeAt(r);r++,e--,10==h?(o++,a=0):a++}return new wy(this.file,r,o,a)}getContext(e,t){const i=this.file.content;let r=this.offset;if(null!=r){r>i.length-1&&(r=i.length-1);let o=r,a=0,h=0;for(;a<e&&r>0&&(r--,a++,"\n"!=i[r]||++h!=t););for(a=0,h=0;a<e&&o<i.length-1&&(o++,a++,"\n"!=i[o]||++h!=t););return{before:i.substring(r,this.offset),after:i.substring(this.offset,o+1)}}return null}}class xN{constructor(e,t){this.content=e,this.url=t}}class vl{constructor(e,t,i=e,r=null){this.start=e,this.end=t,this.fullStart=i,this.details=r}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}var I_=function(n){return n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR",n}(I_||{});class oh{constructor(e,t,i=I_.ERROR){this.span=e,this.msg=t,this.level=i}contextualMessage(){const e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${I_[this.level]} ->]${e.after}")`:this.msg}toString(){const e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}}let tEe=0;function hg(n){return n.replace(/\W/g,"_")}const Wq='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})';class iEe extends U1e{constructor(){super(!1)}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitTaggedTemplateExpr(e,t){const i=e.template.elements;return e.tag.visitExpression(this,t),t.print(e,`(${Wq}(`),t.print(e,`[${i.map(r=>fy(r.text,!1)).join(", ")}], `),t.print(e,`[${i.map(r=>fy(r.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(r=>{t.print(e,", "),r.visitExpression(this,t)}),t.print(e,")"),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitLocalizedString(e,t){t.print(e,`$localize(${Wq}(`);const i=[e.serializeI18nHead()];for(let r=1;r<e.messageParts.length;r++)i.push(e.serializeI18nTemplatePart(r));return t.print(e,`[${i.map(r=>fy(r.cooked,!1)).join(", ")}], `),t.print(e,`[${i.map(r=>fy(r.raw,!1)).join(", ")}])`),e.expressions.forEach(r=>{t.print(e,", "),r.visitExpression(this,t)}),t.print(e,")"),null}_visitParams(e,t){this.visitAllObjects(i=>t.print(null,i.name),e,t,",")}}let dA;function Xq(...n){if(!Qb.trustedTypes)return new Function(...n);const i=`(function anonymous(${n.slice(0,-1).join(",")}\n) { ${n[n.length-1]}\n})`,r=Qb.eval(function oEe(n){return function rEe(){if(void 0===dA&&(dA=null,Qb.trustedTypes))try{dA=Qb.trustedTypes.createPolicy("angular#unsafe-jit",{createScript:n=>n})}catch{}return dA}()?.createScript(n)||n}(i));return void 0===r.bind?new Function(...n):(r.toString=()=>i,r.bind(Qb))}class sEe{evaluateStatements(e,t,i,r){const o=new aEe(i),a=sN.createRoot();return t.length>0&&!function lEe(n){return n.isEquivalent(Xt("use strict").toStmt())}(t[0])&&(t=[Xt("use strict").toStmt(),...t]),o.visitAllStatements(t,a),o.createReturnStmt(a),this.evaluateCode(e,a,o.getArgs(),r)}evaluateCode(e,t,i,r){let o=`"use strict";${t.toSource()}\n//# sourceURL=${e}`;const a=[],h=[];for(const _ in i)h.push(i[_]),a.push(_);if(r){const _=Xq(...a.concat("return null;")).toString(),C=_.slice(0,_.indexOf("return null;")).split("\n").length-1;o+=`\n${t.toSourceMapGenerator(e,C).toJsComment()}`}const m=Xq(...a.concat(o));return this.executeFunction(m,h)}executeFunction(e,t){return e(...t)}}class aEe extends iEe{constructor(e){super(),this.refResolver=e,this._evalArgNames=[],this._evalArgValues=[],this._evalExportedVars=[]}createReturnStmt(e){new _l(new wf(this._evalExportedVars.map(i=>new dy(i,vo(i),!1)))).visitStatement(this,e)}getArgs(){const e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(ih.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(ih.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}_emitReferenceToExternal(e,t,i){let r=this._evalArgValues.indexOf(t);if(-1===r){r=this._evalArgValues.length,this._evalArgValues.push(t);const o=function nEe(n){if(!n||!n.reference)return null;const e=n.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let t=eq(e);return t.indexOf("(")>=0?(t="anonymous_"+tEe++,e.__anonymousType=t):t=hg(t),t}({reference:t})||"val";this._evalArgNames.push(`jit_${o}_${r}`)}i.print(e,this._evalArgNames[r])}}function Yq(n){const e=new lu;return null!==n.providers&&e.set("providers",n.providers),n.imports.length>0&&e.set("imports",fo(n.imports)),{expression:zi(Fe.defineInjector).callFn([e.toLiteralMap()],void 0,!0),type:Zq(n),statements:[]}}function Zq(n){return new np(zi(Fe.InjectorDeclaration,[new np(n.type.type)]))}class cEe{constructor(e){this.context=e}resolveExternalReference(e){if("@angular/core"!==e.moduleName)throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}}var hA=function(n){return n[n.Inline=0]="Inline",n[n.SideEffect=1]="SideEffect",n[n.Omit=2]="Omit",n}(hA||{}),T_=function(n){return n[n.Global=0]="Global",n[n.Local=1]="Local",n}(T_||{});function uEe(n){const e=[],t=new lu;if(t.set("type",n.type.value),n.kind===T_.Global?n.bootstrap.length>0&&t.set("bootstrap",rp(n.bootstrap,n.containsForwardDecls)):n.bootstrapExpression&&t.set("bootstrap",n.bootstrapExpression),n.selectorScopeMode===hA.Inline)n.declarations.length>0&&t.set("declarations",rp(n.declarations,n.containsForwardDecls)),n.imports.length>0&&t.set("imports",rp(n.imports,n.containsForwardDecls)),n.exports.length>0&&t.set("exports",rp(n.exports,n.containsForwardDecls));else if(n.selectorScopeMode===hA.SideEffect){const o=function hEe(n){const e=new lu;if(n.kind===T_.Global?n.declarations.length>0&&e.set("declarations",rp(n.declarations,n.containsForwardDecls)):n.declarationsExpression&&e.set("declarations",n.declarationsExpression),n.kind===T_.Global?n.imports.length>0&&e.set("imports",rp(n.imports,n.containsForwardDecls)):n.importsExpression&&e.set("imports",n.importsExpression),n.kind===T_.Global?n.exports.length>0&&e.set("exports",rp(n.exports,n.containsForwardDecls)):n.exportsExpression&&e.set("exports",n.exportsExpression),0===Object.keys(e.values).length)return null;const i=function H1e(n){return function sq(n,e){const t=new sg({name:n,moduleName:null}),i=new Os(Ji.Identical,new sy(t),Xt("undefined")),r=new Os(Ji.Or,i,t,void 0,void 0,!0);return new Os(Ji.And,r,e)}("ngJitMode",n)}(new ld(zi(Fe.setNgModuleScope),[n.type.value,e.toLiteralMap()])),r=new E_([],[i.toStmt()]);return new ld(r,[]).toStmt()}(n);null!==o&&e.push(o)}return null!==n.schemas&&n.schemas.length>0&&t.set("schemas",fo(n.schemas.map(o=>o.value))),null!==n.id&&(t.set("id",n.id),e.push(zi(Fe.registerNgModuleType).callFn([n.type.value,n.id]).toStmt())),{expression:zi(Fe.defineNgModule).callFn([t.toLiteralMap()],void 0,!0),type:Kq(n),statements:e}}function Kq(n){if(n.kind===T_.Local)return new np(n.type.value);const{type:e,declarations:t,exports:i,imports:r,includeImportTypes:o,publicDeclarationTypes:a}=n;return new np(zi(Fe.NgModuleDeclaration,[new np(e.type),null===a?wN(t):fEe(a),o?wN(r):ip,wN(i)]))}function wN(n){const e=n.map(t=>rC(t.type));return n.length>0?su(fo(e)):ip}function fEe(n){const e=n.map(t=>rC(t));return n.length>0?su(fo(e)):ip}function Qq(n){const e=[];return e.push({key:"name",value:Xt(n.pipeName),quoted:!1}),e.push({key:"type",value:n.type.value,quoted:!1}),e.push({key:"pure",value:Xt(n.pure),quoted:!1}),n.isStandalone&&e.push({key:"standalone",value:Xt(!0),quoted:!1}),{expression:zi(Fe.definePipe).callFn([zc(e)],void 0,!0),type:Jq(n),statements:[]}}function Jq(n){return new np(zi(Fe.PipeDeclaration,[j2(n.type.type,n.typeArgumentCount),new np(new ou(n.pipeName)),new np(new ou(n.isStandalone))]))}var Ey=function(n){return n[n.Directive=0]="Directive",n[n.Pipe=1]="Pipe",n[n.NgModule=2]="NgModule",n}(Ey||{});class EN{constructor(e,t,i,r){this.input=t,this.errLocation=i,this.ctxLocation=r,this.message=`Parser Error: ${e} ${i} [${t}] in ${r}`}}class _C{constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new up(e+this.start,e+this.end)}}class $c{constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}}class fA extends $c{constructor(e,t,i){super(e,t),this.nameSpan=i}}class $h extends $c{visit(e,t=null){}}class D_ extends $c{visit(e,t=null){return e.visitImplicitReceiver(this,t)}}class vC extends D_{visit(e,t=null){return e.visitThisReceiver?.(this,t)}}class yC extends $c{constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitChain(this,t)}}class pA extends $c{constructor(e,t,i,r,o){super(e,t),this.condition=i,this.trueExp=r,this.falseExp=o}visit(e,t=null){return e.visitConditional(this,t)}}class fg extends fA{constructor(e,t,i,r,o){super(e,t,i),this.receiver=r,this.name=o}visit(e,t=null){return e.visitPropertyRead(this,t)}}class mA extends fA{constructor(e,t,i,r,o,a){super(e,t,i),this.receiver=r,this.name=o,this.value=a}visit(e,t=null){return e.visitPropertyWrite(this,t)}}class gA extends fA{constructor(e,t,i,r,o){super(e,t,i),this.receiver=r,this.name=o}visit(e,t=null){return e.visitSafePropertyRead(this,t)}}class bC extends $c{constructor(e,t,i,r){super(e,t),this.receiver=i,this.key=r}visit(e,t=null){return e.visitKeyedRead(this,t)}}class xC extends $c{constructor(e,t,i,r){super(e,t),this.receiver=i,this.key=r}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}}class _A extends $c{constructor(e,t,i,r,o){super(e,t),this.receiver=i,this.key=r,this.value=o}visit(e,t=null){return e.visitKeyedWrite(this,t)}}class wC extends fA{constructor(e,t,i,r,o,a){super(e,t,a),this.exp=i,this.name=r,this.args=o}visit(e,t=null){return e.visitPipe(this,t)}}class sh extends $c{constructor(e,t,i){super(e,t),this.value=i}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}}class EC extends $c{constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitLiteralArray(this,t)}}class vA extends $c{constructor(e,t,i,r){super(e,t),this.keys=i,this.values=r}visit(e,t=null){return e.visitLiteralMap(this,t)}}class Tu extends $c{constructor(e,t,i,r){super(e,t),this.strings=i,this.expressions=r}visit(e,t=null){return e.visitInterpolation(this,t)}}class cp extends $c{constructor(e,t,i,r,o){super(e,t),this.operation=i,this.left=r,this.right=o}visit(e,t=null){return e.visitBinary(this,t)}}class pg extends cp{static createMinus(e,t,i){return new pg(e,t,"-",i,"-",new sh(e,t,0),i)}static createPlus(e,t,i){return new pg(e,t,"+",i,"-",i,new sh(e,t,0))}constructor(e,t,i,r,o,a,h){super(e,t,o,a,h),this.operator=i,this.expr=r,this.left=null,this.right=null,this.operation=null}visit(e,t=null){return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}}class CN extends $c{constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitPrefixNot(this,t)}}class yA extends $c{constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitNonNullAssert(this,t)}}class Cy extends $c{constructor(e,t,i,r,o){super(e,t),this.receiver=i,this.args=r,this.argumentSpan=o}visit(e,t=null){return e.visitCall(this,t)}}class CC extends $c{constructor(e,t,i,r,o){super(e,t),this.receiver=i,this.args=r,this.argumentSpan=o}visit(e,t=null){return e.visitSafeCall(this,t)}}class up{constructor(e,t){this.start=e,this.end=t}}class Sf extends $c{constructor(e,t,i,r,o){super(new _C(0,null===t?0:t.length),new up(r,null===t?r:r+t.length)),this.ast=e,this.source=t,this.location=i,this.errors=o}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}}class SN{constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}}class pEe{constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}}class mEe{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitKeyedWrite(e,t){this.visit(e.receiver,t),this.visit(e.key,t),this.visit(e.value,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitPropertyWrite(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitAll(e,t){for(const i of e)this.visit(i,t)}}class gEe{visitImplicitReceiver(e,t){return e}visitThisReceiver(e,t){return e}visitInterpolation(e,t){return new Tu(e.span,e.sourceSpan,e.strings,this.visitAll(e.expressions))}visitLiteralPrimitive(e,t){return new sh(e.span,e.sourceSpan,e.value)}visitPropertyRead(e,t){return new fg(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}visitPropertyWrite(e,t){return new mA(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,e.value.visit(this))}visitSafePropertyRead(e,t){return new gA(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}visitLiteralArray(e,t){return new EC(e.span,e.sourceSpan,this.visitAll(e.expressions))}visitLiteralMap(e,t){return new vA(e.span,e.sourceSpan,e.keys,this.visitAll(e.values))}visitUnary(e,t){switch(e.operator){case"+":return pg.createPlus(e.span,e.sourceSpan,e.expr.visit(this));case"-":return pg.createMinus(e.span,e.sourceSpan,e.expr.visit(this));default:throw new Error(`Unknown unary operator ${e.operator}`)}}visitBinary(e,t){return new cp(e.span,e.sourceSpan,e.operation,e.left.visit(this),e.right.visit(this))}visitPrefixNot(e,t){return new CN(e.span,e.sourceSpan,e.expression.visit(this))}visitNonNullAssert(e,t){return new yA(e.span,e.sourceSpan,e.expression.visit(this))}visitConditional(e,t){return new pA(e.span,e.sourceSpan,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}visitPipe(e,t){return new wC(e.span,e.sourceSpan,e.exp.visit(this),e.name,this.visitAll(e.args),e.nameSpan)}visitKeyedRead(e,t){return new bC(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this))}visitKeyedWrite(e,t){return new _A(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this),e.value.visit(this))}visitCall(e,t){return new Cy(e.span,e.sourceSpan,e.receiver.visit(this),this.visitAll(e.args),e.argumentSpan)}visitSafeCall(e,t){return new CC(e.span,e.sourceSpan,e.receiver.visit(this),this.visitAll(e.args),e.argumentSpan)}visitAll(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].visit(this);return t}visitChain(e,t){return new yC(e.span,e.sourceSpan,this.visitAll(e.expressions))}visitSafeKeyedRead(e,t){return new xC(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this))}}class _Ee{visitImplicitReceiver(e,t){return e}visitThisReceiver(e,t){return e}visitInterpolation(e,t){const i=this.visitAll(e.expressions);return i!==e.expressions?new Tu(e.span,e.sourceSpan,e.strings,i):e}visitLiteralPrimitive(e,t){return e}visitPropertyRead(e,t){const i=e.receiver.visit(this);return i!==e.receiver?new fg(e.span,e.sourceSpan,e.nameSpan,i,e.name):e}visitPropertyWrite(e,t){const i=e.receiver.visit(this),r=e.value.visit(this);return i!==e.receiver||r!==e.value?new mA(e.span,e.sourceSpan,e.nameSpan,i,e.name,r):e}visitSafePropertyRead(e,t){const i=e.receiver.visit(this);return i!==e.receiver?new gA(e.span,e.sourceSpan,e.nameSpan,i,e.name):e}visitLiteralArray(e,t){const i=this.visitAll(e.expressions);return i!==e.expressions?new EC(e.span,e.sourceSpan,i):e}visitLiteralMap(e,t){const i=this.visitAll(e.values);return i!==e.values?new vA(e.span,e.sourceSpan,e.keys,i):e}visitUnary(e,t){const i=e.expr.visit(this);if(i!==e.expr)switch(e.operator){case"+":return pg.createPlus(e.span,e.sourceSpan,i);case"-":return pg.createMinus(e.span,e.sourceSpan,i);default:throw new Error(`Unknown unary operator ${e.operator}`)}return e}visitBinary(e,t){const i=e.left.visit(this),r=e.right.visit(this);return i!==e.left||r!==e.right?new cp(e.span,e.sourceSpan,e.operation,i,r):e}visitPrefixNot(e,t){const i=e.expression.visit(this);return i!==e.expression?new CN(e.span,e.sourceSpan,i):e}visitNonNullAssert(e,t){const i=e.expression.visit(this);return i!==e.expression?new yA(e.span,e.sourceSpan,i):e}visitConditional(e,t){const i=e.condition.visit(this),r=e.trueExp.visit(this),o=e.falseExp.visit(this);return i!==e.condition||r!==e.trueExp||o!==e.falseExp?new pA(e.span,e.sourceSpan,i,r,o):e}visitPipe(e,t){const i=e.exp.visit(this),r=this.visitAll(e.args);return i!==e.exp||r!==e.args?new wC(e.span,e.sourceSpan,i,e.name,r,e.nameSpan):e}visitKeyedRead(e,t){const i=e.receiver.visit(this),r=e.key.visit(this);return i!==e.receiver||r!==e.key?new bC(e.span,e.sourceSpan,i,r):e}visitKeyedWrite(e,t){const i=e.receiver.visit(this),r=e.key.visit(this),o=e.value.visit(this);return i!==e.receiver||r!==e.key||o!==e.value?new _A(e.span,e.sourceSpan,i,r,o):e}visitAll(e){const t=[];let i=!1;for(let r=0;r<e.length;++r){const o=e[r],a=o.visit(this);t[r]=a,i=i||a!==o}return i?t:e}visitChain(e,t){const i=this.visitAll(e.expressions);return i!==e.expressions?new yC(e.span,e.sourceSpan,i):e}visitCall(e,t){const i=e.receiver.visit(this),r=this.visitAll(e.args);return i!==e.receiver||r!==e.args?new Cy(e.span,e.sourceSpan,i,r,e.argumentSpan):e}visitSafeCall(e,t){const i=e.receiver.visit(this),r=this.visitAll(e.args);return i!==e.receiver||r!==e.args?new CC(e.span,e.sourceSpan,i,r,e.argumentSpan):e}visitSafeKeyedRead(e,t){const i=e.receiver.visit(this),r=e.key.visit(this);return i!==e.receiver||r!==e.key?new xC(e.span,e.sourceSpan,i,r):e}}class IN{constructor(e,t,i,r,o,a){this.name=e,this.expression=t,this.type=i,this.sourceSpan=r,this.keySpan=o,this.valueSpan=a,this.isLiteral=this.type===lx.LITERAL_ATTR,this.isAnimation=this.type===lx.ANIMATION}}var lx=function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.LITERAL_ATTR=1]="LITERAL_ATTR",n[n.ANIMATION=2]="ANIMATION",n}(lx||{});class e9{constructor(e,t,i,r,o,a,h){this.name=e,this.targetOrPhase=t,this.type=i,this.handler=r,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=h}}class vEe{constructor(e,t,i,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=r,this.valueSpan=o}}class t9{constructor(e,t,i,r,o,a,h,m){this.name=e,this.type=t,this.securityContext=i,this.value=r,this.unit=o,this.sourceSpan=a,this.keySpan=h,this.valueSpan=m}}class n9{static#e=this.event=vo("$event")}function yEe(n,e,t,i,r,o,a){n||(n=new l9(a));const h=function bEe(n,e){return function EEe(n,e){const t=new IEe(n);return e.visit(t)}(n,e)}({createLiteralArrayConverter:T=>P=>fo(P),createLiteralMapConverter:T=>P=>zc(T.map((j,q)=>({key:j.key,value:P[q],quoted:j.quoted}))),createPipeConverter:T=>{throw new Error(`Illegal State: Actions are not allowed to contain pipes. Pipe: ${T}`)}},t),m=new DN(n,e,i,!1,r,o),_=[];a9(h.visit(m,Ra.Statement),_),function CEe(n,e,t){for(let i=n-1;i>=0;i--)t.unshift(o9(e,i))}(m.temporaryCount,i,_),m.usesImplicitReceiver&&n.notifyImplicitReceiverUse();const C=_.length-1;if(C>=0){const T=_[C];T instanceof rh&&(_[C]=new _l(T.expr))}return _}class xEe{constructor(e,t){this.stmts=e,this.currValExpr=t}}function i9(n,e,t,i){n||(n=new l9);const r=new DN(n,e,i,!1),o=t.visit(r,Ra.Expression),a=r9(r,i);return r.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),new xEe(a,o)}function r9(n,e){const t=[];for(let i=0;i<n.temporaryCount;i++)t.push(o9(e,i));return t}function TN(n,e){return`tmp_${n}_${e}`}function o9(n,e){return new Bh(TN(n,e))}var Ra=function(n){return n[n.Statement=0]="Statement",n[n.Expression=1]="Expression",n}(Ra||{});function s9(n,e){if(n!==Ra.Expression)throw new Error(`Expected an expression, but saw ${e}`)}function Od(n,e){return n===Ra.Statement?e.toStmt():e}class IEe extends gEe{constructor(e){super(),this._converterFactory=e}visitPipe(e,t){const i=[e.exp,...e.args].map(r=>r.visit(this,t));return new cx(e.span,e.sourceSpan,i,this._converterFactory.createPipeConverter(e.name,i.length))}visitLiteralArray(e,t){const i=e.expressions.map(r=>r.visit(this,t));return new cx(e.span,e.sourceSpan,i,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}visitLiteralMap(e,t){const i=e.values.map(r=>r.visit(this,t));return new cx(e.span,e.sourceSpan,i,this._converterFactory.createLiteralMapConverter(e.keys))}}class DN{constructor(e,t,i,r,o,a){this._localResolver=e,this._implicitReceiver=t,this.bindingId=i,this.supportsInterpolation=r,this.baseSourceSpan=o,this.implicitReceiverAccesses=a,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}visitUnary(e,t){let i;switch(e.operator){case"+":i=qb.Plus;break;case"-":i=qb.Minus;break;default:throw new Error(`Unsupported operator ${e.operator}`)}return Od(t,new uy(i,this._visit(e.expr,Ra.Expression),void 0,this.convertSourceSpan(e.span)))}visitBinary(e,t){let i;switch(e.operation){case"+":i=Ji.Plus;break;case"-":i=Ji.Minus;break;case"*":i=Ji.Multiply;break;case"/":i=Ji.Divide;break;case"%":i=Ji.Modulo;break;case"&&":i=Ji.And;break;case"||":i=Ji.Or;break;case"==":i=Ji.Equals;break;case"!=":i=Ji.NotEquals;break;case"===":i=Ji.Identical;break;case"!==":i=Ji.NotIdentical;break;case"<":i=Ji.Lower;break;case">":i=Ji.Bigger;break;case"<=":i=Ji.LowerEquals;break;case">=":i=Ji.BiggerEquals;break;case"??":return this.convertNullishCoalesce(e,t);default:throw new Error(`Unsupported operation ${e.operation}`)}return Od(t,new Os(i,this._visit(e.left,Ra.Expression),this._visit(e.right,Ra.Expression),void 0,this.convertSourceSpan(e.span)))}visitChain(e,t){return function SEe(n,e){if(n!==Ra.Statement)throw new Error(`Expected a statement, but saw ${e}`)}(t,e),this.visitAll(e.expressions,t)}visitConditional(e,t){return Od(t,this._visit(e.condition,Ra.Expression).conditional(this._visit(e.trueExp,Ra.Expression),this._visit(e.falseExp,Ra.Expression),this.convertSourceSpan(e.span)))}visitPipe(e,t){throw new Error(`Illegal state: Pipes should have been converted into functions. Pipe: ${e.name}`)}visitImplicitReceiver(e,t){return s9(t,e),this.usesImplicitReceiver=!0,this._implicitReceiver}visitThisReceiver(e,t){return this.visitImplicitReceiver(e,t)}visitInterpolation(e,t){if(!this.supportsInterpolation)throw new Error("Unexpected interpolation");s9(t,e);let i=[];for(let o=0;o<e.strings.length-1;o++)i.push(Xt(e.strings[o])),i.push(this._visit(e.expressions[o],Ra.Expression));i.push(Xt(e.strings[e.strings.length-1]));const r=e.strings;return 2===r.length&&""===r[0]&&""===r[1]?i=[i[1]]:e.expressions.length>=9&&(i=[fo(i)]),new TEe(i)}visitKeyedRead(e,t){const i=this.leftMostSafeNode(e);return i?this.convertSafeAccess(e,i,t):Od(t,this._visit(e.receiver,Ra.Expression).key(this._visit(e.key,Ra.Expression)))}visitKeyedWrite(e,t){const i=this._visit(e.receiver,Ra.Expression),r=this._visit(e.key,Ra.Expression),o=this._visit(e.value,Ra.Expression);return i===this._implicitReceiver&&this._localResolver.maybeRestoreView(),Od(t,i.key(r).set(o))}visitLiteralArray(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}visitLiteralMap(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}visitLiteralPrimitive(e,t){return Od(t,Xt(e.value,null==e.value||!0===e.value||!0===e.value?ad:void 0,this.convertSourceSpan(e.span)))}_getLocal(e,t){return this._localResolver.globals?.has(e)&&t instanceof vC?null:this._localResolver.getLocal(e)}visitPrefixNot(e,t){return Od(t,function WH(n,e){return new Xb(n,e)}(this._visit(e.expression,Ra.Expression)))}visitNonNullAssert(e,t){return Od(t,this._visit(e.expression,Ra.Expression))}visitPropertyRead(e,t){const i=this.leftMostSafeNode(e);if(i)return this.convertSafeAccess(e,i,t);{let r=null;const o=this.usesImplicitReceiver,a=this._visit(e.receiver,Ra.Expression);return a===this._implicitReceiver&&(r=this._getLocal(e.name,e.receiver),r&&(this.usesImplicitReceiver=o,this.addImplicitReceiverAccess(e.name))),null==r&&(r=a.prop(e.name,this.convertSourceSpan(e.span))),Od(t,r)}}visitPropertyWrite(e,t){const i=this._visit(e.receiver,Ra.Expression),r=this.usesImplicitReceiver;let o=null;if(i===this._implicitReceiver){const a=this._getLocal(e.name,e.receiver);if(a){if(!(a instanceof Nh))throw new Error(`Cannot assign value "${e.value instanceof fg?e.value.name:void 0}" to template variable "${e.name}". Template variables are read-only.`);o=a,this.usesImplicitReceiver=r,this.addImplicitReceiverAccess(e.name)}}return null===o&&(o=i.prop(e.name,this.convertSourceSpan(e.span))),Od(t,o.set(this._visit(e.value,Ra.Expression)))}visitSafePropertyRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitSafeKeyedRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitAll(e,t){return e.map(i=>this._visit(i,t))}visitCall(e,t){const i=this.leftMostSafeNode(e);if(i)return this.convertSafeAccess(e,i,t);const r=this.visitAll(e.args,Ra.Expression);if(e instanceof cx)return Od(t,e.converter(r));const o=e.receiver;if(o instanceof fg&&o.receiver instanceof D_&&!(o.receiver instanceof vC)&&"$any"===o.name){if(1!==r.length)throw new Error(`Invalid call to $any, expected 1 argument but received ${r.length||"none"}`);return Od(t,r[0])}return Od(t,this._visit(o,Ra.Expression).callFn(r,this.convertSourceSpan(e.span)))}visitSafeCall(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}_visit(e,t){return this._resultMap.get(e)||(this._nodeMap.get(e)||e).visit(this,t)}convertSafeAccess(e,t,i){let o,r=this._visit(t.receiver,Ra.Expression);this.needsTemporaryInSafeAccess(t.receiver)&&(o=this.allocateTemporary(),r=o.set(r),this._resultMap.set(t.receiver,o));const a=r.isBlank();this._nodeMap.set(t,t instanceof CC?new Cy(t.span,t.sourceSpan,t.receiver,t.args,t.argumentSpan):t instanceof xC?new bC(t.span,t.sourceSpan,t.receiver,t.key):new fg(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name));const h=this._visit(e,Ra.Expression);return this._nodeMap.delete(t),o&&this.releaseTemporary(o),Od(i,a.conditional(hy,h))}convertNullishCoalesce(e,t){const i=this._visit(e.left,Ra.Expression),r=this._visit(e.right,Ra.Expression),o=this.allocateTemporary();return this.releaseTemporary(o),Od(t,o.set(i).notIdentical(hy).and(o.notIdentical(Xt(void 0))).conditional(o,r))}leftMostSafeNode(e){const t=(i,r)=>(this._nodeMap.get(r)||r).visit(i);return e.visit({visitUnary:i=>null,visitBinary:i=>null,visitChain:i=>null,visitConditional:i=>null,visitCall(i){return t(this,i.receiver)},visitSafeCall(i){return t(this,i.receiver)||i},visitImplicitReceiver:i=>null,visitThisReceiver:i=>null,visitInterpolation:i=>null,visitKeyedRead(i){return t(this,i.receiver)},visitKeyedWrite:i=>null,visitLiteralArray:i=>null,visitLiteralMap:i=>null,visitLiteralPrimitive:i=>null,visitPipe:i=>null,visitPrefixNot:i=>null,visitNonNullAssert(i){return t(this,i.expression)},visitPropertyRead(i){return t(this,i.receiver)},visitPropertyWrite:i=>null,visitSafePropertyRead(i){return t(this,i.receiver)||i},visitSafeKeyedRead(i){return t(this,i.receiver)||i}})}needsTemporaryInSafeAccess(e){const t=(r,o)=>o&&(this._nodeMap.get(o)||o).visit(r);return e.visit({visitUnary(r){return t(this,r.expr)},visitBinary(r){return t(this,r.left)||t(this,r.right)},visitChain:r=>!1,visitConditional(r){return t(this,r.condition)||t(this,r.trueExp)||t(this,r.falseExp)},visitCall:r=>!0,visitSafeCall:r=>!0,visitImplicitReceiver:r=>!1,visitThisReceiver:r=>!1,visitInterpolation(r){return((r,o)=>o.some(a=>t(r,a)))(this,r.expressions)},visitKeyedRead:r=>!1,visitKeyedWrite:r=>!1,visitLiteralArray:r=>!0,visitLiteralMap:r=>!0,visitLiteralPrimitive:r=>!1,visitPipe:r=>!0,visitPrefixNot(r){return t(this,r.expression)},visitNonNullAssert(r){return t(this,r.expression)},visitPropertyRead:r=>!1,visitPropertyWrite:r=>!1,visitSafePropertyRead:r=>!1,visitSafeKeyedRead:r=>!1})}allocateTemporary(){const e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new tm(TN(this.bindingId,e))}releaseTemporary(e){if(this._currentTemporary--,e.name!=TN(this.bindingId,this._currentTemporary))throw new Error(`Temporary ${e.name} released out of order`)}convertSourceSpan(e){if(this.baseSourceSpan){const t=this.baseSourceSpan.start.moveBy(e.start),i=this.baseSourceSpan.start.moveBy(e.end),r=this.baseSourceSpan.fullStart.moveBy(e.start);return new vl(t,i,r)}return null}addImplicitReceiverAccess(e){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(e)}}function a9(n,e){Array.isArray(n)?n.forEach(t=>a9(t,e)):e.push(n)}function bA(){throw new Error("Unsupported operation")}class TEe extends Za{constructor(e){super(null,null),this.args=e,this.isConstant=bA,this.isEquivalent=bA,this.visitExpression=bA,this.clone=bA}}class l9{constructor(e){this.globals=e}notifyImplicitReceiverUse(){}maybeRestoreView(){}getLocal(e){return e===n9.event.name?n9.event:null}}class cx extends Cy{constructor(e,t,i,r){super(e,t,new $h(e,t),i,null),this.converter=r}}let xA;function c9(){return xA||(xA={},wA(Pa.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),wA(Pa.STYLE,["*|style"]),wA(Pa.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","input|src","ins|cite","q|cite","source|src","track|src","video|poster","video|src"]),wA(Pa.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),xA}function wA(n,e){for(const t of e)xA[t.toLowerCase()]=n}const DEe=new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]);function AN(n){return DEe.has(n.toLowerCase())}const AEe=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]);class MEe{constructor(){this._animationDeclarationKeyframesRe=/(^|\s+)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g}shimCssText(e,t,i=""){const r=[];e=e.replace(UEe,h=>{if(h.match(jEe))r.push(h);else{const m=h.match(VEe);r.push((m?.join("")??"")+"\n")}return PN}),e=this._insertDirectives(e);const o=this._scopeCssText(e,t,i);let a=0;return o.replace(GEe,()=>r[a++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,t){const i=new Set,r=CA(e,o=>this._scopeLocalKeyframeDeclarations(o,t,i));return CA(r,o=>this._scopeAnimationRule(o,t,i))}_scopeLocalKeyframeDeclarations(e,t,i){return{...e,selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(r,o,a,h,m)=>(i.add(_9(h,a)),`${o}${a}${t}_${h}${a}${m}`))}}_scopeAnimationKeyframe(e,t,i){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(r,o,a,h,m)=>`${o}${a}${h=`${i.has(_9(h,a))?t+"_":""}${h}`}${a}${m}`)}_scopeAnimationRule(e,t,i){let r=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation(?:\s*):(?:\s*))([^;]+)/g,(o,a,h)=>a+h.replace(this._animationDeclarationKeyframesRe,(m,_,C="",T,P)=>T?`${_}${this._scopeAnimationKeyframe(`${C}${T}${C}`,t,i)}`:AEe.has(P)?m:`${_}${this._scopeAnimationKeyframe(P,t,i)}`));return r=r.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(o,a,h)=>`${a}${h.split(",").map(m=>this._scopeAnimationKeyframe(m,t,i)).join(",")}`),{...e,content:r}}_insertPolyfillDirectivesInCssText(e){return e.replace(PEe,function(...t){return t[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(REe,(...t)=>{const i=t[0].replace(t[1],"").replace(t[2],"");return t[4]+i})}_scopeCssText(e,t,i){const r=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeKeyframesRelatedCss(e,t),e=this._scopeSelectors(e,t,i)),(e=e+"\n"+r).trim()}_extractUnscopedRulesFromCssText(e){let i,t="";for(u9.lastIndex=0;null!==(i=u9.exec(e));)t+=i[0].replace(i[2],"").replace(i[1],i[4])+"\n\n";return t}_convertColonHost(e){return e.replace(OEe,(t,i,r)=>{if(i){const o=[],a=i.split(",").map(h=>h.trim());for(const h of a){if(!h)break;const m=Sy+h.replace(EA,"")+r;o.push(m)}return o.join(",")}return Sy+r})}_convertColonHostContext(e){return e.replace(LEe,t=>{const i=[[]];let r;for(;r=NEe.exec(t);){const o=(r[1]??"").trim().split(",").map(h=>h.trim()).filter(h=>""!==h),a=i.length;nCe(i,o.length);for(let h=0;h<o.length;h++)for(let m=0;m<a;m++)i[m+h*a].push(o[h]);t=r[2]}return i.map(o=>function tCe(n,e){const t=Sy;ux.lastIndex=0;const i=ux.test(e);if(0===n.length)return t+e;const r=[n.pop()||""];for(;n.length>0;){const o=r.length,a=n.pop();for(let h=0;h<o;h++){const m=r[h];r[2*o+h]=m+" "+a,r[o+h]=a+" "+m,r[h]=a+m}}return r.map(o=>i?`${o}${e}`:`${o}${t}${e}, ${o} ${t}${e}`).join(",")}(o,t)).join(", ")})}_convertShadowDOMSelectors(e){return FEe.reduce((t,i)=>t.replace(i," "),e)}_scopeSelectors(e,t,i){return CA(e,r=>{let o=r.selector,a=r.content;return"@"!==r.selector[0]?o=this._scopeSelector(r.selector,t,i):r.selector.startsWith("@media")||r.selector.startsWith("@supports")||r.selector.startsWith("@document")||r.selector.startsWith("@layer")||r.selector.startsWith("@container")||r.selector.startsWith("@scope")?a=this._scopeSelectors(r.content,t,i):(r.selector.startsWith("@font-face")||r.selector.startsWith("@page"))&&(a=this._stripScopingSelectors(r.content)),new ON(o,a)})}_stripScopingSelectors(e){return CA(e,t=>{const i=t.selector.replace(h9," ").replace(d9," ");return new ON(i,t.content)})}_scopeSelector(e,t,i){return e.split(",").map(r=>r.trim().split(h9)).map(r=>{const[o,...a]=r;return[(m=>this._selectorNeedsScoping(m,t)?this._applySelectorScope(m,t,i):m)(o),...a].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+BEe,"m")}_applySimpleSelectorScope(e,t,i){if(ux.lastIndex=0,ux.test(e)){const r=`[${i}]`;return e.replace(d9,(o,a)=>a.replace(/([^:]*)(:*)(.*)/,(h,m,_,C)=>m+r+_+C)).replace(ux,r+" ")}return t+" "+e}_applySelectorScope(e,t,i){const o="["+(t=t.replace(/\[is=([^\]]*)\]/g,(q,..._e)=>_e[0]))+"]",a=q=>{let _e=q.trim();if(!_e)return"";if(q.indexOf(Sy)>-1)_e=this._applySimpleSelectorScope(q,t,i);else{const me=q.replace(ux,"");if(me.length>0){const te=me.match(/([^:]*)(:*)(.*)/);te&&(_e=te[1]+o+te[2]+te[3])}}return _e},h=new kEe(e);let C,m="",_=0;const T=/( |>|\+|~(?!=))\s*/g;let O=!((e=h.content()).indexOf(Sy)>-1);for(;null!==(C=T.exec(e));){const q=C[1],_e=e.slice(_,C.index).trim();_e.match(f9)&&e[C.index+1]?.match(/[a-fA-F\d]/)||(O=O||_e.indexOf(Sy)>-1,m+=`${O?a(_e):_e} ${q} `,_=T.lastIndex)}const j=e.substring(_);return O=O||j.indexOf(Sy)>-1,m+=O?a(j):j,h.restore(m)}_insertPolyfillHostInCssText(e){return e.replace($Ee,MN).replace(zEe,EA)}}class kEe{constructor(e){this.placeholders=[],this.index=0,e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=this._escapeRegexMatches(e,/(\\.)/g),this._content=e.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(t,i,r)=>{const o=`__ph-${this.index}__`;return this.placeholders.push(r),this.index++,i+o})}restore(e){return e.replace(f9,(t,i)=>this.placeholders[+i])}content(){return this._content}_escapeRegexMatches(e,t){return e.replace(t,(i,r)=>{const o=`__ph-${this.index}__`;return this.placeholders.push(r),this.index++,o})}}const PEe=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,REe=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,u9=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,EA="-shadowcsshost",MN="-shadowcsscontext",kN="(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",OEe=new RegExp(EA+kN,"gim"),LEe=new RegExp(MN+kN,"gim"),NEe=new RegExp(MN+kN,"im"),Sy=EA+"-no-combinator",d9=/-shadowcsshost-no-combinator([^\s]*)/,FEe=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],h9=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,BEe="([>\\s~+[.,{:][\\s\\S]*)?$",ux=/-shadowcsshost/gim,zEe=/:host/gim,$Ee=/:host-context/gim,VEe=/\r?\n/g,UEe=/\/\*[\s\S]*?\*\//g,jEe=/\/\*\s*#\s*source(Mapping)?URL=/g,PN="%COMMENT%",GEe=new RegExp(PN,"g"),f9=/__ph-(\d+)__/g,RN="%BLOCK%",HEe=new RegExp(`(\\s*(?:${PN}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),qEe=new Map([["{","}"]]),p9="%COMMA_IN_PLACEHOLDER%",m9="%SEMI_IN_PLACEHOLDER%",g9="%COLON_IN_PLACEHOLDER%",WEe=new RegExp(p9,"g"),XEe=new RegExp(m9,"g"),YEe=new RegExp(g9,"g");class ON{constructor(e,t){this.selector=e,this.content=t}}function CA(n,e){const t=function JEe(n){let e=n,t=null;for(let i=0;i<e.length;i++){const r=e[i];if("\\"===r)i++;else if(null!==t)if(r===t)t=null;else{const o=QEe[r];o&&(e=`${e.substr(0,i)}${o}${e.substr(i+1)}`,i+=o.length-1)}else("'"===r||'"'===r)&&(t=r)}return e}(n),i=function KEe(n,e,t){const i=[],r=[];let m,_,o=0,a=0,h=-1;for(let C=0;C<n.length;C++){const T=n[C];"\\"===T?C++:T===_?(o--,0===o&&(r.push(n.substring(h,C)),i.push(t),a=C,h=-1,m=_=void 0)):T===m?o++:0===o&&e.has(T)&&(m=T,_=e.get(T),o=1,h=C+1,i.push(n.substring(a,h)))}return-1!==h?(r.push(n.substring(h)),i.push(t)):i.push(n.substring(a)),new ZEe(i.join(""),r)}(t,qEe,RN);let r=0;return function eCe(n){let e=n.replace(WEe,",");return e=e.replace(XEe,";"),e=e.replace(YEe,":"),e}(i.escapedString.replace(HEe,(...a)=>{const h=a[2];let m="",_=a[4],C="";_&&_.startsWith("{"+RN)&&(m=i.blocks[r++],_=_.substring(RN.length+1),C="{");const T=e(new ON(h,m));return`${a[1]}${T.selector}${a[3]}${C}${T.content}${_}`}))}class ZEe{constructor(e,t){this.escapedString=e,this.blocks=t}}const QEe={";":m9,",":p9,":":g9};function _9(n,e){return e?n.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):n}function nCe(n,e){const t=n.length;for(let i=1;i<e;i++)for(let r=0;r<t;r++)n[r+i*t]=n[r].slice(0)}var am=function(n){return n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA",n}(am||{});function ah(n){if(":"!=n[0])return[null,n];const e=n.indexOf(":",1);if(-1===e)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[n.slice(1,e),n.slice(e+1)]}function LN(n){return"ng-container"===ah(n)[1]}function NN(n){return"ng-content"===ah(n)[1]}function FN(n){return null===n?null:ah(n)[0]}function BN(n,e){return n?`:${n}:${e}`:e}var Ds=function(n){return n[n.Attribute=0]="Attribute",n[n.ClassName=1]="ClassName",n[n.StyleProperty=2]="StyleProperty",n[n.Property=3]="Property",n[n.Template=4]="Template",n[n.I18n=5]="I18n",n[n.Animation=6]="Animation",n}(Ds||{});const dx=Object.freeze([]);class SA{constructor(){this.known=new Set,this.byKind=new Map,this.projectAs=null}get attributes(){return this.byKind.get(Ds.Attribute)??dx}get classes(){return this.byKind.get(Ds.ClassName)??dx}get styles(){return this.byKind.get(Ds.StyleProperty)??dx}get bindings(){return this.byKind.get(Ds.Property)??dx}get template(){return this.byKind.get(Ds.Template)??dx}get i18n(){return this.byKind.get(Ds.I18n)??dx}add(e,t,i){if(this.known.has(t))return;this.known.add(t);const r=this.arrayFor(e);if(r.push(...function rCe(n){const[e,t]=ah(n),i=Xt(t);return e?[Xt(0),Xt(e),i]:[i]}(t)),e===Ds.Attribute||e===Ds.StyleProperty){if(null===i)throw Error("Attribute & style element attributes must have a value");r.push(i)}}arrayFor(e){return this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e)}}function IA(n){if(!(n instanceof SA))throw new Error("AssertionError: ElementAttributes has already been coalesced into the view constants")}var Qt=function(n){return n[n.ListEnd=0]="ListEnd",n[n.Statement=1]="Statement",n[n.Variable=2]="Variable",n[n.ElementStart=3]="ElementStart",n[n.Element=4]="Element",n[n.Template=5]="Template",n[n.ElementEnd=6]="ElementEnd",n[n.ContainerStart=7]="ContainerStart",n[n.Container=8]="Container",n[n.ContainerEnd=9]="ContainerEnd",n[n.DisableBindings=10]="DisableBindings",n[n.EnableBindings=11]="EnableBindings",n[n.Text=12]="Text",n[n.Listener=13]="Listener",n[n.InterpolateText=14]="InterpolateText",n[n.Binding=15]="Binding",n[n.Property=16]="Property",n[n.StyleProp=17]="StyleProp",n[n.ClassProp=18]="ClassProp",n[n.StyleMap=19]="StyleMap",n[n.ClassMap=20]="ClassMap",n[n.Advance=21]="Advance",n[n.Pipe=22]="Pipe",n[n.Attribute=23]="Attribute",n[n.HostProperty=24]="HostProperty",n[n.Namespace=25]="Namespace",n}(Qt||{}),ro=function(n){return n[n.LexicalRead=0]="LexicalRead",n[n.Context=1]="Context",n[n.ReadVariable=2]="ReadVariable",n[n.NextContext=3]="NextContext",n[n.Reference=4]="Reference",n[n.GetCurrentView=5]="GetCurrentView",n[n.RestoreView=6]="RestoreView",n[n.ResetView=7]="ResetView",n[n.PureFunctionExpr=8]="PureFunctionExpr",n[n.PureFunctionParameterExpr=9]="PureFunctionParameterExpr",n[n.PipeBinding=10]="PipeBinding",n[n.PipeBindingVariadic=11]="PipeBindingVariadic",n[n.SafePropertyRead=12]="SafePropertyRead",n[n.SafeKeyedRead=13]="SafeKeyedRead",n[n.SafeInvokeFunction=14]="SafeInvokeFunction",n[n.SafeTernaryExpr=15]="SafeTernaryExpr",n[n.EmptyExpr=16]="EmptyExpr",n[n.AssignTemporaryExpr=17]="AssignTemporaryExpr",n[n.ReadTemporaryExpr=18]="ReadTemporaryExpr",n[n.SanitizerExpr=19]="SanitizerExpr",n}(ro||{}),Vh=function(n){return n[n.Context=0]="Context",n[n.Identifier=1]="Identifier",n[n.SavedView=2]="SavedView",n}(Vh||{}),A_=function(n){return n[n.Normal=0]="Normal",n[n.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",n}(A_||{}),Uh=function(n){return n[n.Html=0]="Html",n[n.Script=1]="Script",n[n.Style=2]="Style",n[n.Url=3]="Url",n[n.ResourceUrl=4]="ResourceUrl",n[n.IframeAttribute=5]="IframeAttribute",n}(Uh||{});const v9=Symbol("ConsumesSlot"),y9=Symbol("DependsOnSlotContext"),SC=Symbol("UsesSlotIndex"),IC=Symbol("ConsumesVars"),TC=Symbol("UsesVarOffset"),TA={[v9]:!0,slot:null,numSlotsUsed:1},b9={[SC]:!0,slot:null},Iy={[y9]:!0},M_={[IC]:!0};function zN(n){return!0===n[v9]}function x9(n){return!0===n[y9]}function w9(n){return!0===n[IC]}function oCe(n){return!0===n[TC]}function E9(n){return!0===n[SC]}function k_(n){return{kind:Qt.Statement,statement:n,...cc}}function DC(n,e,t){return{kind:Qt.Variable,xref:n,variable:e,initializer:t,...cc}}const cc={debugListId:null,prev:null,next:null};class Gu{constructor(e,t){this.strings=e,this.expressions=t}}function C9(n,e,t,i,r,o,a,h){return{kind:Qt.Binding,bindingKind:e,target:n,name:t,expression:i,unit:r,securityContext:o,isTemplate:a,sourceSpan:h,...cc}}function aCe(n,e,t,i,r,o,a){return{kind:Qt.Property,target:n,name:e,expression:t,isAnimationTrigger:i,securityContext:r,sanitizer:null,isTemplate:o,sourceSpan:a,...Iy,...M_,...cc}}function lCe(n,e,t,i,r){return{kind:Qt.StyleProp,target:n,name:e,expression:t,unit:i,sourceSpan:r,...Iy,...M_,...cc}}function cCe(n,e,t,i){return{kind:Qt.ClassProp,target:n,name:e,expression:t,sourceSpan:i,...Iy,...M_,...cc}}function uCe(n,e,t){return{kind:Qt.StyleMap,target:n,expression:e,sourceSpan:t,...Iy,...M_,...cc}}function dCe(n,e,t){return{kind:Qt.ClassMap,target:n,expression:e,sourceSpan:t,...Iy,...M_,...cc}}function hCe(n,e,t,i,r,o){return{kind:Qt.Attribute,target:n,name:e,expression:t,securityContext:i,sanitizer:null,isTemplate:r,sourceSpan:o,...Iy,...M_,...cc}}function fCe(n,e){return{kind:Qt.Advance,delta:n,sourceSpan:e,...cc}}var S9,I9,T9,D9,A9,M9,k9,P9,R9;function mg(n){return n instanceof uc}class uc extends Za{constructor(e=null){super(null,e)}}class Ty extends uc{constructor(e){super(),this.name=e,this.kind=ro.LexicalRead}visitExpression(e,t){}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Ty(this.name)}}class AC extends uc{static#e=S9=SC;constructor(e,t){super(),this.target=e,this.offset=t,this.kind=ro.Reference,this[S9]=!0,this.slot=null}visitExpression(){}isEquivalent(e){return e instanceof AC&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new AC(this.target,this.offset);return e.slot=this.slot,e}}class Dy extends uc{constructor(e){super(),this.view=e,this.kind=ro.Context}visitExpression(){}isEquivalent(e){return e instanceof Dy&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Dy(this.view)}}class MC extends uc{constructor(){super(),this.kind=ro.NextContext,this.steps=1}visitExpression(){}isEquivalent(e){return e instanceof MC&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new MC;return e.steps=this.steps,e}}class DA extends uc{constructor(){super(),this.kind=ro.GetCurrentView}visitExpression(){}isEquivalent(e){return e instanceof DA}isConstant(){return!1}transformInternalExpressions(){}clone(){return new DA}}class kC extends uc{constructor(e){super(),this.view=e,this.kind=ro.RestoreView}visitExpression(e,t){"number"!=typeof this.view&&this.view.visitExpression(e,t)}isEquivalent(e){return e instanceof kC&&typeof e.view==typeof this.view&&("number"==typeof this.view?this.view===e.view:this.view.isEquivalent(e.view))}isConstant(){return!1}transformInternalExpressions(e,t){"number"!=typeof this.view&&(this.view=Io(this.view,e,t))}clone(){return new kC(this.view instanceof Za?this.view.clone():this.view)}}class AA extends uc{constructor(e){super(),this.expr=e,this.kind=ro.ResetView}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof AA&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=Io(this.expr,e,t)}clone(){return new AA(this.expr.clone())}}class Ay extends uc{constructor(e){super(),this.xref=e,this.kind=ro.ReadVariable,this.name=null}visitExpression(){}isEquivalent(e){return e instanceof Ay&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new Ay(this.xref);return e.name=this.name,e}}class My extends uc{static#e=(I9=IC,T9=TC);constructor(e,t){super(),this.kind=ro.PureFunctionExpr,this[I9]=!0,this[T9]=!0,this.varOffset=null,this.fn=null,this.body=e,this.args=t}visitExpression(e,t){this.body?.visitExpression(e,t);for(const i of this.args)i.visitExpression(e,t)}isEquivalent(e){return e instanceof My&&e.args.length===this.args.length&&null!==e.body&&null!==this.body&&e.body.isEquivalent(this.body)&&e.args.every((t,i)=>t.isEquivalent(this.args[i]))}isConstant(){return!1}transformInternalExpressions(e,t){null!==this.body?this.body=Io(this.body,e,t|Fl.InChildOperation):null!==this.fn&&(this.fn=Io(this.fn,e,t));for(let i=0;i<this.args.length;i++)this.args[i]=Io(this.args[i],e,t)}clone(){const e=new My(this.body?.clone()??null,this.args.map(t=>t.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}}class ky extends uc{constructor(e){super(),this.index=e,this.kind=ro.PureFunctionParameterExpr}visitExpression(){}isEquivalent(e){return e instanceof ky&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new ky(this.index)}}class hx extends uc{static#e=(D9=SC,A9=IC,M9=TC);constructor(e,t,i){super(),this.target=e,this.name=t,this.args=i,this.kind=ro.PipeBinding,this[D9]=!0,this[A9]=!0,this[M9]=!0,this.slot=null,this.varOffset=null}visitExpression(e,t){for(const i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){for(let i=0;i<this.args.length;i++)this.args[i]=Io(this.args[i],e,t)}clone(){const e=new hx(this.target,this.name,this.args.map(t=>t.clone()));return e.slot=this.slot,e.varOffset=this.varOffset,e}}class MA extends uc{static#e=(k9=SC,P9=IC,R9=TC);constructor(e,t,i,r){super(),this.target=e,this.name=t,this.args=i,this.numArgs=r,this.kind=ro.PipeBindingVariadic,this[k9]=!0,this[P9]=!0,this[R9]=!0,this.slot=null,this.varOffset=null}visitExpression(e,t){this.args.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.args=Io(this.args,e,t)}clone(){const e=new MA(this.target,this.name,this.args.clone(),this.numArgs);return e.slot=this.slot,e.varOffset=this.varOffset,e}}class fx extends uc{constructor(e,t){super(),this.receiver=e,this.name=t,this.kind=ro.SafePropertyRead}get index(){return this.name}visitExpression(e,t){this.receiver.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Io(this.receiver,e,t)}clone(){return new fx(this.receiver.clone(),this.name)}}class px extends uc{constructor(e,t){super(),this.receiver=e,this.index=t,this.kind=ro.SafeKeyedRead}visitExpression(e,t){this.receiver.visitExpression(e,t),this.index.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Io(this.receiver,e,t),this.index=Io(this.index,e,t)}clone(){return new px(this.receiver.clone(),this.index.clone())}}class P_ extends uc{constructor(e,t){super(),this.receiver=e,this.args=t,this.kind=ro.SafeInvokeFunction}visitExpression(e,t){this.receiver.visitExpression(e,t);for(const i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=Io(this.receiver,e,t);for(let i=0;i<this.args.length;i++)this.args[i]=Io(this.args[i],e,t)}clone(){return new P_(this.receiver.clone(),this.args.map(e=>e.clone()))}}class mx extends uc{constructor(e,t){super(),this.guard=e,this.expr=t,this.kind=ro.SafeTernaryExpr}visitExpression(e,t){this.guard.visitExpression(e,t),this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.guard=Io(this.guard,e,t),this.expr=Io(this.expr,e,t)}clone(){return new mx(this.guard.clone(),this.expr.clone())}}class gx extends uc{constructor(){super(...arguments),this.kind=ro.EmptyExpr}visitExpression(e,t){}isEquivalent(e){return e instanceof gx}isConstant(){return!0}clone(){return new gx}transformInternalExpressions(){}}class gg extends uc{constructor(e,t){super(),this.expr=e,this.xref=t,this.kind=ro.AssignTemporaryExpr,this.name=null}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=Io(this.expr,e,t)}clone(){const e=new gg(this.expr.clone(),this.xref);return e.name=this.name,e}}class Py extends uc{constructor(e){super(),this.xref=e,this.kind=ro.ReadTemporaryExpr,this.name=null}visitExpression(e,t){}isEquivalent(){return this.xref==this.xref}isConstant(){return!1}transformInternalExpressions(e,t){}clone(){const e=new Py(this.xref);return e.name=this.name,e}}class PC extends uc{constructor(e){super(),this.fn=e,this.kind=ro.SanitizerExpr}visitExpression(e,t){}isEquivalent(e){return e instanceof PC&&e.fn===this.fn}isConstant(){return!0}clone(){return new PC(this.fn)}transformInternalExpressions(){}}function lh(n,e){ch(n,(t,i)=>(e(t,i),t),Fl.None)}var Fl=function(n){return n[n.None=0]="None",n[n.InChildOperation=1]="InChildOperation",n}(Fl||{});function $N(n,e,t){for(let i=0;i<n.expressions.length;i++)n.expressions[i]=Io(n.expressions[i],e,t)}function ch(n,e,t){switch(n.kind){case Qt.StyleProp:case Qt.StyleMap:case Qt.ClassProp:case Qt.ClassMap:case Qt.Binding:case Qt.HostProperty:n.expression instanceof Gu?$N(n.expression,e,t):n.expression=Io(n.expression,e,t);break;case Qt.Property:case Qt.Attribute:n.expression instanceof Gu?$N(n.expression,e,t):n.expression=Io(n.expression,e,t),n.sanitizer=n.sanitizer&&Io(n.sanitizer,e,t);break;case Qt.InterpolateText:$N(n.interpolation,e,t);break;case Qt.Statement:!function pCe(n,e,t){if(n instanceof rh)n.expr=Io(n.expr,e,t);else if(n instanceof _l)n.value=Io(n.value,e,t);else{if(!(n instanceof Bh))throw new Error(`Unhandled statement kind: ${n.constructor.name}`);void 0!==n.value&&(n.value=Io(n.value,e,t))}}(n.statement,e,t);break;case Qt.Variable:n.initializer=Io(n.initializer,e,t);break;case Qt.Listener:for(const i of n.handlerOps)ch(i,e,t|Fl.InChildOperation);break;case Qt.Element:case Qt.ElementStart:case Qt.ElementEnd:case Qt.Container:case Qt.ContainerStart:case Qt.ContainerEnd:case Qt.Template:case Qt.DisableBindings:case Qt.EnableBindings:case Qt.Text:case Qt.Pipe:case Qt.Advance:case Qt.Namespace:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${Qt[n.kind]}`)}}function Io(n,e,t){if(n instanceof uc)n.transformInternalExpressions(e,t);else if(n instanceof Os)n.lhs=Io(n.lhs,e,t),n.rhs=Io(n.rhs,e,t);else if(n instanceof Nh)n.receiver=Io(n.receiver,e,t);else if(n instanceof im)n.receiver=Io(n.receiver,e,t),n.index=Io(n.index,e,t);else if(n instanceof ly)n.receiver=Io(n.receiver,e,t),n.value=Io(n.value,e,t);else if(n instanceof ay)n.receiver=Io(n.receiver,e,t),n.index=Io(n.index,e,t),n.value=Io(n.value,e,t);else if(n instanceof ld){n.fn=Io(n.fn,e,t);for(let i=0;i<n.args.length;i++)n.args[i]=Io(n.args[i],e,t)}else if(n instanceof Fh)for(let i=0;i<n.entries.length;i++)n.entries[i]=Io(n.entries[i],e,t);else if(n instanceof wf)for(let i=0;i<n.entries.length;i++)n.entries[i].value=Io(n.entries[i].value,e,t);else if(n instanceof nm)n.condition=Io(n.condition,e,t),n.trueCase=Io(n.trueCase,e,t),null!==n.falseCase&&(n.falseCase=Io(n.falseCase,e,t));else if(!(n instanceof tm||n instanceof sg||n instanceof ou))throw new Error(`Unhandled expression kind: ${n.constructor.name}`);return e(n,t)}let Lr=(()=>{class n{static#e=this.nextListId=0;constructor(){this.debugListId=n.nextListId++,this.head={kind:Qt.ListEnd,next:null,prev:null,debugListId:this.debugListId},this.tail={kind:Qt.ListEnd,next:null,prev:null,debugListId:this.debugListId},this.head.next=this.tail,this.tail.prev=this.head}push(t){n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=this.debugListId;const i=this.tail.prev;t.prev=i,i.next=t,t.next=this.tail,this.tail.prev=t}prepend(t){if(0===t.length)return;for(const o of t)n.assertIsNotEnd(o),n.assertIsUnowned(o),o.debugListId=this.debugListId;const i=this.head.next;let r=this.head;for(const o of t)r.next=o,o.prev=r,r=o;r.next=i,i.prev=r}*[Symbol.iterator](){let t=this.head.next;for(;t!==this.tail;){n.assertIsOwned(t,this.debugListId);const i=t.next;yield t,t=i}}*reversed(){let t=this.tail.prev;for(;t!==this.head;){n.assertIsOwned(t,this.debugListId);const i=t.prev;yield t,t=i}}static replace(t,i){n.assertIsNotEnd(t),n.assertIsNotEnd(i),n.assertIsOwned(t),n.assertIsUnowned(i),i.debugListId=t.debugListId,null!==t.prev&&(t.prev.next=i,i.prev=t.prev),null!==t.next&&(t.next.prev=i,i.next=t.next),t.debugListId=null,t.prev=null,t.next=null}static replaceWithMany(t,i){if(0===i.length)return void n.remove(t);n.assertIsNotEnd(t),n.assertIsOwned(t);const r=t.debugListId;t.debugListId=null;for(const C of i)n.assertIsNotEnd(C),n.assertIsUnowned(C);const{prev:o,next:a}=t;t.prev=null,t.next=null;let h=o;for(const C of i)this.assertIsUnowned(C),C.debugListId=r,h.next=C,C.prev=h,C.next=null,h=C;const m=i[0],_=h;null!==o&&(o.next=m,m.prev=t.prev),null!==a&&(a.prev=_,_.next=a)}static remove(t){n.assertIsNotEnd(t),n.assertIsOwned(t),t.prev.next=t.next,t.next.prev=t.prev,t.debugListId=null,t.prev=null,t.next=null}static insertBefore(t,i){if(n.assertIsOwned(i),null===i.prev)throw new Error("AssertionError: illegal operation on list start");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,t.prev=null,i.prev.next=t,t.prev=i.prev,t.next=i,i.prev=t}static insertAfter(t,i){if(n.assertIsOwned(i),null===i.next)throw new Error("AssertionError: illegal operation on list end");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,i.next.prev=t,t.next=i.next,t.prev=i,i.next=t}static assertIsUnowned(t){if(null!==t.debugListId)throw new Error(`AssertionError: illegal operation on owned node: ${Qt[t.kind]}`)}static assertIsOwned(t,i){if(null===t.debugListId)throw new Error(`AssertionError: illegal operation on unowned node: ${Qt[t.kind]}`);if(void 0!==i&&t.debugListId!==i)throw new Error(`AssertionError: node belongs to the wrong list (expected ${i}, actual ${t.debugListId})`)}static assertIsNotEnd(t){if(t.kind===Qt.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return n})();const mCe=new Set([Qt.Element,Qt.ElementStart,Qt.Container,Qt.ContainerStart,Qt.Template]);function VN(n){return mCe.has(n.kind)}function yCe(n){return{kind:Qt.DisableBindings,xref:n,...cc}}function bCe(n){return{kind:Qt.EnableBindings,xref:n,...cc}}function O9(n,e,t){return{kind:Qt.Text,xref:n,initialValue:e,sourceSpan:t,...TA,...cc}}function xCe(n,e,t){return{kind:Qt.Listener,target:n,tag:t,name:e,handlerOps:new Lr,handlerFnName:null,consumesDollarEvent:!1,isAnimationListener:!1,animationPhase:null,...cc,...b9}}function wCe(n,e,t,i){return{kind:Qt.Listener,target:n,tag:i,name:e,handlerOps:new Lr,handlerFnName:null,consumesDollarEvent:!1,isAnimationListener:!0,animationPhase:t,...cc,...b9}}function ECe(n,e){return{kind:Qt.Pipe,xref:n,name:e,...cc,...TA}}var lm=function(n){return n[n.HTML=0]="HTML",n[n.SVG=1]="SVG",n[n.Math=2]="Math",n}(lm||{});function CCe(n){return{kind:Qt.Namespace,active:n,...cc}}function SCe(n,e,t){return{kind:Qt.HostProperty,name:n,expression:e,sourceSpan:t,...M_,...cc}}class L9{constructor(e){this.xref=e,this.create=new Lr,this.update=new Lr,this.fnName=null,this.vars=null}*ops(){for(const e of this.create)if(yield e,e.kind===Qt.Listener)for(const t of e.handlerOps)yield t;for(const e of this.update)yield e}}class N9 extends L9{constructor(e,t,i){super(0),this.componentName=e,this.pool=t,this.compatibility=i,this.fnSuffix="HostBindings",this.units=[this],this.nextXrefId=1}get job(){return this}get root(){return this}allocateXrefId(){return this.nextXrefId++}}class F9{get units(){return this.views.values()}constructor(e,t,i){this.componentName=e,this.pool=t,this.compatibility=i,this.fnSuffix="Template",this.nextXrefId=0,this.views=new Map,this.consts=[];const r=new kA(this,this.allocateXrefId(),null);this.views.set(r.xref,r),this.root=r}allocateView(e){const t=new kA(this,this.allocateXrefId(),e);return this.views.set(t.xref,t),t}allocateXrefId(){return this.nextXrefId++}addConst(e){for(let i=0;i<this.consts.length;i++)if(this.consts[i].isEquivalent(e))return i;const t=this.consts.length;return this.consts.push(e),t}}class kA extends L9{constructor(e,t,i){super(t),this.job=e,this.parent=i,this.contextVariables=new Map,this.decls=null}get compatibility(){return this.job.compatibility}}function B9(n){for(const e of n.units){let t=0;for(const i of e.ops())w9(i)&&(t+=ICe(i)),lh(i,r=>{mg(r)&&(oCe(r)&&(r.varOffset=t),w9(r)&&(t+=z9(r)))});e.vars=t}if(n instanceof F9)for(const e of n.views.values())for(const t of e.create){if(t.kind!==Qt.Template)continue;const i=n.views.get(t.xref);t.vars=i.vars}}function ICe(n){let e;switch(n.kind){case Qt.Property:case Qt.HostProperty:case Qt.Attribute:return e=1,n.expression instanceof Gu&&(e+=n.expression.expressions.length),e;case Qt.StyleProp:case Qt.ClassProp:case Qt.StyleMap:case Qt.ClassMap:return e=2,n.expression instanceof Gu&&(e+=n.expression.expressions.length),e;case Qt.InterpolateText:return n.interpolation.expressions.length;default:throw new Error(`Unhandled op: ${Qt[n.kind]}`)}}function z9(n){switch(n.kind){case ro.PureFunctionExpr:case ro.PipeBinding:return 1+n.args.length;case ro.PipeBindingVariadic:return 1+n.numArgs;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${n.constructor.name}`)}}function ACe(n){if(n instanceof ld&&n.fn instanceof Ty&&"$any"===n.fn.name){if(1!==n.args.length)throw new Error("The $any builtin function expects exactly one argument.");return n.args[0]}return n}function $9(n){const e=[];let t=0,i=0,r=0,o=0,a=0,h=null;for(;t<n.length;)switch(n.charCodeAt(t++)){case 40:i++;break;case 41:i--;break;case 39:0===r?r=39:39===r&&92!==n.charCodeAt(t-1)&&(r=0);break;case 34:0===r?r=34:34===r&&92!==n.charCodeAt(t-1)&&(r=0);break;case 58:!h&&0===i&&0===r&&(h=UN(n.substring(a,t-1).trim()),o=t);break;case 59:if(h&&o>0&&0===i&&0===r){const _=n.substring(o,t-1).trim();e.push(h,_),a=t,o=0,h=null}}if(h&&o){const m=n.slice(o).trim();e.push(h,m)}return e}function UN(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function V9(n){const e=new Map;for(const t of n.create)VN(t)&&e.set(t.xref,t);return e}function PA(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function kCe(n){const e=V9(n);for(const t of n.ops()){let i;switch(t.kind){case Qt.Attribute:RCe(n,t,e);break;case Qt.Property:if(t.isAnimationTrigger)continue;i=PA(e,t.target),IA(i.attributes),i.attributes.add(t.isTemplate?Ds.Template:Ds.Property,t.name,null);break;case Qt.StyleProp:case Qt.ClassProp:i=PA(e,t.target),IA(i.attributes),n.compatibility===A_.TemplateDefinitionBuilder&&t.expression instanceof gx&&i.attributes.add(Ds.Property,t.name,null);break;case Qt.Listener:if(t.isAnimationListener)continue;i=PA(e,t.target),IA(i.attributes),i.attributes.add(Ds.Property,t.name,null)}}}function RCe(n,e,t){if(e.expression instanceof Gu)return;const i=PA(t,e.target);if(IA(i.attributes),"style"===e.name&&function PCe(n){return n instanceof ou&&"string"==typeof n.value}(e.expression)){if(n.compatibility===A_.TemplateDefinitionBuilder&&e.securityContext!==Pa.NONE)return;const r=$9(e.expression.value);for(let o=0;o<r.length-1;o+=2)i.attributes.add(Ds.StyleProperty,r[o],Xt(r[o+1]));Lr.remove(e)}else(n.compatibility===A_.TemplateDefinitionBuilder?e.expression instanceof ou&&"string"==typeof e.expression.value:e.expression.isConstant())&&(i.attributes.add(e.isTemplate?Ds.Template:Ds.Attribute,e.name,e.expression),Lr.remove(e))}function OCe(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function U9(n){const e=new Map;for(const t of n.units)for(const i of t.create)VN(i)&&e.set(i.xref,i);for(const t of n.units)for(const i of t.ops())if(i.kind===Qt.Binding)switch(i.bindingKind){case Ds.Attribute:"ngNonBindable"===i.name?(Lr.remove(i),OCe(e,i.target).nonBindable=!0):Lr.replace(i,hCe(i.target,i.name,i.expression,i.securityContext,i.isTemplate,i.sourceSpan));break;case Ds.Property:case Ds.Animation:Lr.replace(i,n instanceof N9?SCe(i.name,i.expression,i.sourceSpan):aCe(i.target,i.name,i.expression,i.bindingKind===Ds.Animation,i.securityContext,i.isTemplate,i.sourceSpan));break;case Ds.I18n:case Ds.ClassName:case Ds.StyleProperty:throw new Error(`Unhandled binding of kind ${Ds[i.bindingKind]}`)}}const LCe=new Set([Fe.elementStart,Fe.elementEnd,Fe.element,Fe.property,Fe.hostProperty,Fe.styleProp,Fe.attribute,Fe.stylePropInterpolate1,Fe.stylePropInterpolate2,Fe.stylePropInterpolate3,Fe.stylePropInterpolate4,Fe.stylePropInterpolate5,Fe.stylePropInterpolate6,Fe.stylePropInterpolate7,Fe.stylePropInterpolate8,Fe.stylePropInterpolateV,Fe.classProp,Fe.listener,Fe.elementContainerStart,Fe.elementContainerEnd,Fe.elementContainer,Fe.listener]);function j9(n){for(const e of n.units)G9(e.create),G9(e.update)}function G9(n){let e=null;for(const t of n){if(t.kind!==Qt.Statement||!(t.statement instanceof rh)){e=null;continue}if(!(t.statement.expr instanceof ld&&t.statement.expr.fn instanceof sg)){e=null;continue}const i=t.statement.expr.fn.value;if(LCe.has(i))if(null!==e&&e.instruction===i){const r=e.expression.callFn(t.statement.expr.args,t.statement.expr.sourceSpan,t.statement.expr.pure);e.expression=r,e.op.statement=r.toStmt(),Lr.remove(t)}else e={op:t,instruction:i,expression:t.statement.expr};else e=null}}function FCe({attributes:n,bindings:e,classes:t,i18n:i,projectAs:r,styles:o,template:a}){const h=[...n];return null!==r&&h.push(Xt(5),Xt(r)),t.length>0&&h.push(Xt(1),...t),o.length>0&&h.push(Xt(2),...o),e.length>0&&h.push(Xt(3),...e),a.length>0&&h.push(Xt(4),...a),i.length>0&&h.push(Xt(6),...i),fo(h)}const BCe=new Map([[Qt.ElementEnd,[Qt.ElementStart,Qt.Element]],[Qt.ContainerEnd,[Qt.ContainerStart,Qt.Container]]]);function H9(n){for(const e of n.units)for(const t of e.ops())ch(t,i=>HCe(i,{job:n}),Fl.None),ch(t,qCe,Fl.None)}function If(n){return n instanceof uy?If(n.expr):n instanceof Os?If(n.lhs)||If(n.rhs):n instanceof nm?!(!n.falseCase||!If(n.falseCase))||If(n.condition)||If(n.trueCase):n instanceof Xb?If(n.condition):n instanceof gg?If(n.expr):n instanceof Nh?If(n.receiver):n instanceof im?If(n.receiver)||If(n.index):n instanceof ld||n instanceof Fh||n instanceof wf||n instanceof P_||n instanceof hx}function _x(n,e,t){let i;if(If(n)){const r=t.job.allocateXrefId();i=[new gg(n,r),new Py(r)]}else i=[n,n.clone()],function VCe(n,e,t){Io(n,i=>{if(i instanceof gg&&e.has(i.xref)){const r=new Py(i.xref);return t.job.compatibility===A_.TemplateDefinitionBuilder?new gg(r,r.xref):r}return i},Fl.None)}(i[1],function $Ce(n){const e=new Set;return Io(n,t=>(t instanceof gg&&e.add(t.xref),t),Fl.None),e}(i[0]),t);return new mx(i[0],e(i[1]))}function q9(n){return function UCe(n){return n instanceof fx||n instanceof px||n instanceof P_}(n)||function jCe(n){return n instanceof Nh||n instanceof im||n instanceof ld}(n)}function HCe(n,e){if(!q9(n))return n;const t=function GCe(n){if(q9(n)&&n.receiver instanceof mx){let e=n.receiver;for(;e.expr instanceof mx;)e=e.expr;return e}return null}(n);if(t){if(n instanceof ld)return t.expr=t.expr.callFn(n.args),n.receiver;if(n instanceof Nh)return t.expr=t.expr.prop(n.name),n.receiver;if(n instanceof im)return t.expr=t.expr.key(n.index),n.receiver;if(n instanceof P_)return t.expr=_x(t.expr,i=>i.callFn(n.args),e),n.receiver;if(n instanceof fx)return t.expr=_x(t.expr,i=>i.prop(n.name),e),n.receiver;if(n instanceof px)return t.expr=_x(t.expr,i=>i.key(n.index),e),n.receiver}else{if(n instanceof P_)return _x(n.receiver,i=>i.callFn(n.args),e);if(n instanceof fx)return _x(n.receiver,i=>i.prop(n.name),e);if(n instanceof px)return _x(n.receiver,i=>i.key(n.index),e)}return n}function qCe(n){return n instanceof mx?new nm(new Os(Ji.Equals,n.guard,hy),hy,n.expr):n}function XCe(n){W9(n.root,null)}function W9(n,e){const t=function YCe(n,e){const t={view:n.xref,viewContextVariable:{kind:Vh.Context,name:null,view:n.xref},contextVariables:new Map,references:[],parent:e};for(const i of n.contextVariables.keys())t.contextVariables.set(i,{kind:Vh.Identifier,name:null,identifier:i});for(const i of n.create)switch(i.kind){case Qt.Element:case Qt.ElementStart:case Qt.Template:if(!Array.isArray(i.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let r=0;r<i.localRefs.length;r++)t.references.push({name:i.localRefs[r].name,targetId:i.xref,offset:r,variable:{kind:Vh.Identifier,name:null,identifier:i.localRefs[r].name}})}return t}(n,e);for(const r of n.create)switch(r.kind){case Qt.Template:W9(n.job.views.get(r.xref),t);break;case Qt.Listener:r.handlerOps.prepend(jN(n,t))}const i=jN(n,t);n.update.prepend(i)}function jN(n,e){const t=[];e.view!==n.xref&&t.push(DC(n.job.allocateXrefId(),e.viewContextVariable,new MC));for(const[i,r]of n.job.views.get(e.view).contextVariables)t.push(DC(n.job.allocateXrefId(),e.contextVariables.get(i),new Nh(new Dy(e.view),r)));for(const i of e.references)t.push(DC(n.job.allocateXrefId(),i.variable,new AC(i.targetId,i.offset)));return null!==e.parent&&t.push(...jN(n,e.parent)),t}[ld,Fh,wf,P_,hx].map(n=>n.constructor.name);const X9="style.",Y9="class.";function KCe(n){return n.startsWith("--")}function QCe(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function Z9(n){const e=n.indexOf("!important");-1!==e&&(n=e>0?n.substring(0,e):"");let t=null,i=n;const r=n.lastIndexOf(".");return r>0&&(t=n.slice(r+1),i=n.substring(0,r)),{property:i,suffix:t}}function eSe(n){const e=[];for(const t of n)e.push(Xt(t.name),Xt(t.target));return fo(e)}const nSe=new Map([["&&",Ji.And],[">",Ji.Bigger],[">=",Ji.BiggerEquals],["&",Ji.BitwiseAnd],["/",Ji.Divide],["==",Ji.Equals],["===",Ji.Identical],["<",Ji.Lower],["<=",Ji.LowerEquals],["-",Ji.Minus],["%",Ji.Modulo],["*",Ji.Multiply],["!=",Ji.NotEquals],["!==",Ji.NotIdentical],["??",Ji.NullishCoalesce],["||",Ji.Or],["+",Ji.Plus]]),K9=new Map([["svg",lm.SVG],["math",lm.Math]]);function Q9(n){return null===n?lm.HTML:K9.get(n)??lm.HTML}function rSe(n,e){return e===lm.HTML?n:`:${function iSe(n){for(const[e,t]of K9.entries())if(t===n)return e;return null}(e)}:${n}`}function J9(n){e7(n.root,n.componentName,{index:0},n.compatibility===A_.TemplateDefinitionBuilder)}function e7(n,e,t,i){null===n.fnName&&(n.fnName=hg(`${e}_${n.job.fnSuffix}`));const r=new Map;for(const o of n.ops())switch(o.kind){case Qt.Property:o.isAnimationTrigger&&(o.name="@"+o.name);break;case Qt.Listener:if(null===o.handlerFnName){if(null===o.slot)throw new Error("Expected a slot to be assigned");const h=o.tag.replace("-","_");o.isAnimationListener?(o.handlerFnName=hg(`${n.fnName}_${h}_animation_${o.name}_${o.animationPhase}_${o.slot}_listener`),o.name=`@${o.name}.${o.animationPhase}`):o.handlerFnName=hg(`${n.fnName}_${h}_${o.name}_${o.slot}_listener`)}break;case Qt.Variable:r.set(o.xref,oSe(o.variable,t));break;case Qt.Template:if(!(n instanceof kA))throw new Error("AssertionError: must be compiling a component");const a=n.job.views.get(o.xref);if(null===o.slot)throw new Error("Expected slot to be assigned");e7(a,`${e}_${rSe(o.tag,o.namespace)}_${o.slot}`,t,i);break;case Qt.StyleProp:o.name=sSe(o.name),i&&(o.name=t7(o.name));break;case Qt.ClassProp:i&&(o.name=t7(o.name))}for(const o of n.ops())lh(o,a=>{if(a instanceof Ay&&null===a.name){if(!r.has(a.xref))throw new Error(`Variable ${a.xref} not yet named`);a.name=r.get(a.xref)}})}function oSe(n,e){if(null===n.name)switch(n.kind){case Vh.Context:n.name="ctx_r"+e.index++;break;case Vh.Identifier:n.name=`${n.identifier}_${e.index++}`;break;default:n.name="_r"+e.index++}return n.name}function sSe(n){return n.startsWith("--")?n:UN(n)}function t7(n){const e=n.indexOf("!important");return e>-1?n.substring(0,e):n}function n7(n){for(const e of n){if(!(e.kind===Qt.Statement&&e.statement instanceof rh&&e.statement.expr instanceof MC))continue;const t=e.statement.expr.steps;let i=!0;for(let r=e.next;r.kind!==Qt.ListEnd&&i;r=r.next)lh(r,(o,a)=>{if(!mg(o))return o;if(i&&!(a&Fl.InChildOperation))switch(o.kind){case ro.NextContext:o.steps+=t,Lr.remove(e),i=!1;break;case ro.GetCurrentView:case ro.Reference:i=!1}})}}const lSe="ng-container";function dSe(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function i7(n){for(const e of n.units)for(const t of e.ops())ch(t,i=>{if(!(i instanceof Os)||i.operator!==Ji.NullishCoalesce)return i;const r=new gg(i.lhs.clone(),n.allocateXrefId()),o=new Py(r.xref);return new nm(new Os(Ji.And,new Os(Ji.NotIdentical,r,hy),new Os(Ji.NotIdentical,o,new ou(void 0))),o.clone(),i.rhs)},Fl.None)}function pSe(n){for(const e of n.update)lh(e,(t,i)=>{if(mg(t)&&t.kind===ro.PipeBinding){if(i&Fl.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(!x9(e))throw new Error(`AssertionError: pipe binding associated with non-slot operation ${Qt[e.kind]}`);mSe(n,e.target,t)}})}function mSe(n,e,t){for(let i=n.create.head.next;i.kind!==Qt.ListEnd;i=i.next){if(!zN(i)||i.xref!==e)continue;for(;i.next.kind===Qt.Pipe;)i=i.next;const r=ECe(t.target,t.name);return void Lr.insertBefore(r,i.next)}throw new Error(`AssertionError: unable to find insertion point for pipe ${t.name}`)}function RC(n){return e=>e.kind===n}const GN=[{test:RC(Qt.StyleMap),transform:s7},{test:RC(Qt.ClassMap),transform:s7},{test:RC(Qt.StyleProp)},{test:RC(Qt.ClassProp)},{test:n=>(n.kind===Qt.Property||n.kind===Qt.HostProperty)&&n.expression instanceof Gu},{test:n=>!(n.kind!==Qt.Property&&n.kind!==Qt.HostProperty||n.expression instanceof Gu)},{test:RC(Qt.Attribute)}],_Se=new Set([Qt.StyleMap,Qt.ClassMap,Qt.StyleProp,Qt.ClassProp,Qt.Property,Qt.HostProperty,Qt.Attribute]);function r7(n){for(const e of n.units){let t=[];for(const i of e.update)if(_Se.has(i.kind))t.push(i),Lr.remove(i);else{for(const r of o7(t))Lr.insertBefore(r,i);t=[]}for(const i of o7(t))e.update.push(i)}}function o7(n){const e=Array.from(GN,()=>new Array);for(const t of n)e[GN.findIndex(r=>r.test(t))].push(t);return e.flatMap((t,i)=>{const r=GN[i].transform;return r?r(t):t})}function s7(n){return n.slice(n.length-1)}function a7(n){for(const e of n.units)for(const t of e.ops())lh(t,i=>{if(!(i instanceof My)||null===i.body)return;const r=new vSe(i.args.length);i.fn=n.pool.getSharedConstant(r,i.body),i.body=null})}class vSe extends Kb{constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof ky?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,t){const i=[];for(let o=0;o<this.numArgs;o++)i.push(new Xl("_p"+o));const r=Io(t,o=>o instanceof ky?vo("_p"+o.index):o,Fl.None);return new iC(e,i,[new _l(r)])}}function l7(n){for(const e of n.units)for(const t of e.update)ch(t,(i,r)=>r&Fl.InChildOperation?i:i instanceof Fh?ySe(i):i instanceof wf?bSe(i):i,Fl.None)}function ySe(n){const e=[],t=[];for(const i of n.entries)if(i.isConstant())e.push(i);else{const r=t.length;t.push(i),e.push(new ky(r))}return new My(fo(e),t)}function bSe(n){let e=[];const t=[];for(const i of n.entries)if(i.value.isConstant())e.push(i);else{const r=t.length;t.push(i.value),e.push(new dy(i.key,new ky(r),i.quoted))}return new My(zc(e),t)}function xSe(n,e,t,i,r){return RA(Fe.element,n,e,t,i,r)}function wSe(n,e,t,i,r){return RA(Fe.elementStart,n,e,t,i,r)}function RA(n,e,t,i,r,o){const a=[Xt(e)];return null!==t&&a.push(Xt(t)),null!==r?a.push(Xt(i),Xt(r)):null!==i&&a.push(Xt(i)),Vc(n,a,o)}function ESe(n){return Vc(Fe.elementEnd,[],n)}function CSe(n,e,t,i){return RA(Fe.elementContainerStart,n,null,e,t,i)}function SSe(n,e,t,i){return RA(Fe.elementContainer,n,null,e,t,i)}function TSe(n,e,t,i,r,o,a){return Vc(Fe.templateCreate,[Xt(n),e,Xt(t),Xt(i),Xt(r),Xt(o)],a)}function MSe(n,e){return Vc(Fe.listener,[Xt(n),e],null)}function kSe(n,e){return Vc(Fe.pipe,[Xt(n),Xt(e)],null)}function LSe(n,e){return Vc(Fe.advance,[Xt(n)],e)}function VSe(n,e,t){const i=[Xt(n,null)];return""!==e&&i.push(Xt(e)),Vc(Fe.text,i,t)}function USe(n,e,t,i){const r=[Xt(n),e];return null!==t&&r.push(t),Vc(Fe.property,r,i)}function jSe(n,e,t){const i=[Xt(n),e];return null!==t&&i.push(t),Vc(Fe.attribute,i,null)}function GSe(n,e,t){const i=[Xt(n),e];return null!==t&&i.push(Xt(t)),Vc(Fe.styleProp,i,null)}function HSe(n,e){return Vc(Fe.classProp,[Xt(n),e],null)}function qSe(n){return Vc(Fe.styleMap,[n],null)}function WSe(n){return Vc(Fe.classMap,[n],null)}const c7=[Fe.pipeBind1,Fe.pipeBind2,Fe.pipeBind3,Fe.pipeBind4];function ZSe(n,e,t){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");const i=[];if(1===e.length&&""===n[0]&&""===n[1])i.push(e[0]);else{let r;for(r=0;r<e.length;r++)i.push(Xt(n[r]),e[r]);i.push(Xt(n[r]))}return vx(rIe,[],i,[],t)}function KSe(n,e,t,i,r){const o=OC(e,t),a=[];return null!==i&&a.push(i),vx(oIe,[Xt(n)],o,a,r)}function QSe(n,e,t,i){const r=OC(e,t),o=[];return null!==i&&o.push(i),vx(aIe,[Xt(n)],r,o,null)}function JSe(n,e,t,i){const r=OC(e,t),o=[];return null!==i&&o.push(Xt(i)),vx(sIe,[Xt(n)],r,o,null)}function eIe(n,e){const t=OC(n,e);return vx(lIe,[],t,[],null)}function tIe(n,e){const t=OC(n,e);return vx(cIe,[],t,[],null)}function nIe(n,e){return Vc(Fe.hostProperty,[Xt(n),e],null)}function OC(n,e){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");const t=[];if(1===e.length&&""===n[0]&&""===n[1])t.push(e[0]);else{let i;for(i=0;i<e.length;i++)t.push(Xt(n[i]),e[i]);t.push(Xt(n[i]))}return t}function Vc(n,e,t){const i=zi(n).callFn(e,t);return k_(new rh(i,t))}const rIe={constant:[Fe.textInterpolate,Fe.textInterpolate1,Fe.textInterpolate2,Fe.textInterpolate3,Fe.textInterpolate4,Fe.textInterpolate5,Fe.textInterpolate6,Fe.textInterpolate7,Fe.textInterpolate8],variable:Fe.textInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},oIe={constant:[Fe.propertyInterpolate,Fe.propertyInterpolate1,Fe.propertyInterpolate2,Fe.propertyInterpolate3,Fe.propertyInterpolate4,Fe.propertyInterpolate5,Fe.propertyInterpolate6,Fe.propertyInterpolate7,Fe.propertyInterpolate8],variable:Fe.propertyInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},sIe={constant:[Fe.styleProp,Fe.stylePropInterpolate1,Fe.stylePropInterpolate2,Fe.stylePropInterpolate3,Fe.stylePropInterpolate4,Fe.stylePropInterpolate5,Fe.stylePropInterpolate6,Fe.stylePropInterpolate7,Fe.stylePropInterpolate8],variable:Fe.stylePropInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},aIe={constant:[Fe.attribute,Fe.attributeInterpolate1,Fe.attributeInterpolate2,Fe.attributeInterpolate3,Fe.attributeInterpolate4,Fe.attributeInterpolate5,Fe.attributeInterpolate6,Fe.attributeInterpolate7,Fe.attributeInterpolate8],variable:Fe.attributeInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},lIe={constant:[Fe.styleMap,Fe.styleMapInterpolate1,Fe.styleMapInterpolate2,Fe.styleMapInterpolate3,Fe.styleMapInterpolate4,Fe.styleMapInterpolate5,Fe.styleMapInterpolate6,Fe.styleMapInterpolate7,Fe.styleMapInterpolate8],variable:Fe.styleMapInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},cIe={constant:[Fe.classMap,Fe.classMapInterpolate1,Fe.classMapInterpolate2,Fe.classMapInterpolate3,Fe.classMapInterpolate4,Fe.classMapInterpolate5,Fe.classMapInterpolate6,Fe.classMapInterpolate7,Fe.classMapInterpolate8],variable:Fe.classMapInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},uIe={constant:[Fe.pureFunction0,Fe.pureFunction1,Fe.pureFunction2,Fe.pureFunction3,Fe.pureFunction4,Fe.pureFunction5,Fe.pureFunction6,Fe.pureFunction7,Fe.pureFunction8],variable:Fe.pureFunctionV,mapping:n=>n};function u7(n,e,t,i,r){const o=n.mapping(t.length);if(o<n.constant.length)return zi(n.constant[o]).callFn([...e,...t,...i],r);if(null!==n.variable)return zi(n.variable).callFn([...e,fo(t),...i],r);throw new Error("AssertionError: unable to call variadic function")}function vx(n,e,t,i,r){return k_(u7(n,e,t,i,r).toStmt())}const dIe=new Map([[Uh.Html,Fe.sanitizeHtml],[Uh.IframeAttribute,Fe.validateIframeAttribute],[Uh.ResourceUrl,Fe.sanitizeResourceUrl],[Uh.Script,Fe.sanitizeScript],[Uh.Style,Fe.sanitizeStyle],[Uh.Url,Fe.sanitizeUrl]]);function d7(n){for(const e of n.units)hIe(e,e.create),h7(0,e.update)}function hIe(n,e){for(const t of e)switch(ch(t,f7,Fl.None),t.kind){case Qt.Text:Lr.replace(t,VSe(t.slot,t.initialValue,t.sourceSpan));break;case Qt.ElementStart:Lr.replace(t,wSe(t.slot,t.tag,t.attributes,t.localRefs,t.sourceSpan));break;case Qt.Element:Lr.replace(t,xSe(t.slot,t.tag,t.attributes,t.localRefs,t.sourceSpan));break;case Qt.ElementEnd:Lr.replace(t,ESe(t.sourceSpan));break;case Qt.ContainerStart:Lr.replace(t,CSe(t.slot,t.attributes,t.localRefs,t.sourceSpan));break;case Qt.Container:Lr.replace(t,SSe(t.slot,t.attributes,t.localRefs,t.sourceSpan));break;case Qt.ContainerEnd:Lr.replace(t,Vc(Fe.elementContainerEnd,[],null));break;case Qt.Template:if(!(n instanceof kA))throw new Error("AssertionError: must be compiling a component");const i=n.job.views.get(t.xref);Lr.replace(t,TSe(t.slot,vo(i.fnName),i.decls,i.vars,t.tag,t.attributes,t.sourceSpan));break;case Qt.DisableBindings:Lr.replace(t,Vc(Fe.disableBindings,[],null));break;case Qt.EnableBindings:Lr.replace(t,Vc(Fe.enableBindings,[],null));break;case Qt.Pipe:Lr.replace(t,kSe(t.slot,t.name));break;case Qt.Listener:const r=fIe(0,t.handlerFnName,t.handlerOps,t.consumesDollarEvent);Lr.replace(t,MSe(t.name,r));break;case Qt.Variable:if(null===t.variable.name)throw new Error(`AssertionError: unnamed variable ${t.xref}`);Lr.replace(t,k_(new Bh(t.variable.name,t.initializer,void 0,ih.Final)));break;case Qt.Namespace:switch(t.active){case lm.HTML:Lr.replace(t,Vc(Fe.namespaceHTML,[],null));break;case lm.SVG:Lr.replace(t,Vc(Fe.namespaceSVG,[],null));break;case lm.Math:Lr.replace(t,Vc(Fe.namespaceMathML,[],null))}break;case Qt.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${Qt[t.kind]}`)}}function h7(n,e){for(const t of e)switch(ch(t,f7,Fl.None),t.kind){case Qt.Advance:Lr.replace(t,LSe(t.delta,t.sourceSpan));break;case Qt.Property:Lr.replace(t,t.expression instanceof Gu?KSe(t.name,t.expression.strings,t.expression.expressions,t.sanitizer,t.sourceSpan):USe(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case Qt.StyleProp:Lr.replace(t,t.expression instanceof Gu?JSe(t.name,t.expression.strings,t.expression.expressions,t.unit):GSe(t.name,t.expression,t.unit));break;case Qt.ClassProp:Lr.replace(t,HSe(t.name,t.expression));break;case Qt.StyleMap:Lr.replace(t,t.expression instanceof Gu?eIe(t.expression.strings,t.expression.expressions):qSe(t.expression));break;case Qt.ClassMap:Lr.replace(t,t.expression instanceof Gu?tIe(t.expression.strings,t.expression.expressions):WSe(t.expression));break;case Qt.InterpolateText:Lr.replace(t,ZSe(t.interpolation.strings,t.interpolation.expressions,t.sourceSpan));break;case Qt.Attribute:Lr.replace(t,t.expression instanceof Gu?QSe(t.name,t.expression.strings,t.expression.expressions,t.sanitizer):jSe(t.name,t.expression,t.sanitizer));break;case Qt.HostProperty:if(t.expression instanceof Gu)throw new Error("not yet handled");Lr.replace(t,nIe(t.name,t.expression));break;case Qt.Variable:if(null===t.variable.name)throw new Error(`AssertionError: unnamed variable ${t.xref}`);Lr.replace(t,k_(new Bh(t.variable.name,t.initializer,void 0,ih.Final)));break;case Qt.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${Qt[t.kind]}`)}}function f7(n){if(!mg(n))return n;switch(n.kind){case ro.NextContext:return function FSe(n){return zi(Fe.nextContext).callFn(1===n?[]:[Xt(n)])}(n.steps);case ro.Reference:return function NSe(n){return zi(Fe.reference).callFn([Xt(n)])}(n.slot+1+n.offset);case ro.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${n.name}`);case ro.RestoreView:if("number"==typeof n.view)throw new Error("AssertionError: unresolved RestoreView");return function zSe(n){return zi(Fe.restoreView).callFn([n])}(n.view);case ro.ResetView:return function $Se(n){return zi(Fe.resetView).callFn([n])}(n.expr);case ro.GetCurrentView:return function BSe(){return zi(Fe.getCurrentView).callFn([])}();case ro.ReadVariable:if(null===n.name)throw new Error(`Read of unnamed variable ${n.xref}`);return vo(n.name);case ro.ReadTemporaryExpr:if(null===n.name)throw new Error(`Read of unnamed temporary ${n.xref}`);return vo(n.name);case ro.AssignTemporaryExpr:if(null===n.name)throw new Error(`Assign of unnamed temporary ${n.xref}`);return vo(n.name).set(n.expr);case ro.PureFunctionExpr:if(null===n.fn)throw new Error("AssertionError: expected PureFunctions to have been extracted");return function iIe(n,e,t){return u7(uIe,[Xt(n),e],t,[],null)}(n.varOffset,n.fn,n.args);case ro.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case ro.PipeBinding:return function XSe(n,e,t){if(t.length<1||t.length>c7.length)throw new Error("pipeBind() argument count out of bounds");return zi(c7[t.length-1]).callFn([Xt(n),Xt(e),...t])}(n.slot,n.varOffset,n.args);case ro.PipeBindingVariadic:return function YSe(n,e,t){return zi(Fe.pipeBindV).callFn([Xt(n),Xt(e),t])}(n.slot,n.varOffset,n.args);case ro.SanitizerExpr:return zi(dIe.get(n.fn));default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${ro[n.kind]}`)}}function fIe(n,e,t,i){h7(0,t);const r=[];for(const a of t){if(a.kind!==Qt.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${Qt[a.kind]}`);r.push(a.statement)}const o=[];return i&&o.push(new Xl("$event")),lc(o,r,void 0,void 0,e)}function p7(n){for(const e of n.units)HN(e,e.create),HN(e,e.update)}function HN(n,e){const t=new Map;t.set(n.xref,vo("ctx"));for(const i of e)switch(i.kind){case Qt.Variable:i.variable.kind===Vh.Context&&t.set(i.variable.view,new Ay(i.xref));break;case Qt.Listener:HN(n,i.handlerOps)}for(const i of e)ch(i,r=>{if(r instanceof Dy){if(!t.has(r.view))throw new Error(`No context found for reference to view ${r.view} from view ${n.xref}`);return t.get(r.view)}return r},Fl.None)}function m7(n,e){for(const t of e)t.kind===Qt.Listener&&ch(t,i=>i instanceof Ty&&"$event"===i.name?(t.consumesDollarEvent=!0,new tm(i.name)):i,Fl.InChildOperation)}function g7(n){for(const e of n.units)qN(e,e.create,null),qN(e,e.update,null)}function qN(n,e,t){const i=new Map;for(const r of e)switch(r.kind){case Qt.Variable:switch(r.variable.kind){case Vh.Identifier:if(i.has(r.variable.identifier))continue;i.set(r.variable.identifier,r.xref);break;case Vh.SavedView:t={view:r.variable.view,variable:r.xref}}break;case Qt.Listener:qN(n,r.handlerOps,t)}for(const r of e)r.kind!=Qt.Listener&&ch(r,(o,a)=>{if(o instanceof Ty)return i.has(o.name)?new Ay(i.get(o.name)):new Nh(new Dy(n.job.root.xref),o.name);if(o instanceof kC&&"number"==typeof o.view){if(null===t||t.view!==o.view)throw new Error(`AssertionError: no saved view ${o.view} from view ${n.xref}`);return o.view=new Ay(t.variable),o}return o},Fl.None);for(const r of e)lh(r,o=>{if(o instanceof Ty)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${o.name}`)})}const gIe=new Map([[Pa.HTML,Uh.Html],[Pa.SCRIPT,Uh.Script],[Pa.STYLE,Uh.Style],[Pa.URL,Uh.Url],[Pa.RESOURCE_URL,Uh.ResourceUrl]]);function vIe(n){return(n.kind===Qt.Element||n.kind===Qt.ElementStart)&&"iframe"===n.tag.toLowerCase()}function bIe(n,e){e.handlerOps.prepend([DC(n.job.allocateXrefId(),{kind:Vh.Context,name:null,view:n.xref},new kC(n.xref))]);for(const t of e.handlerOps)t.kind===Qt.Statement&&t.statement instanceof _l&&(t.statement.value=new AA(t.statement.value))}function _7(n){for(const e of n.units)for(const t of e.update)if(t.kind===Qt.Binding)switch(t.bindingKind){case Ds.ClassName:if(t.expression instanceof Gu)throw new Error("Unexpected interpolation in ClassName binding");Lr.replace(t,cCe(t.target,t.name,t.expression,t.sourceSpan));break;case Ds.StyleProperty:Lr.replace(t,lCe(t.target,t.name,t.expression,t.unit,t.sourceSpan));break;case Ds.Property:case Ds.Template:"style"===t.name?Lr.replace(t,uCe(t.target,t.expression,t.sourceSpan)):"class"===t.name&&Lr.replace(t,dCe(t.target,t.expression,t.sourceSpan))}}function v7(n){for(const e of n.units){let t=0,i=[];for(const r of e.ops()){const o=new Map;lh(r,C=>{C instanceof Py&&o.set(C.xref,C)});let a=0;const h=new Set,m=new Set,_=new Map;lh(r,C=>{C instanceof gg?(h.has(C.xref)||(h.add(C.xref),_.set(C.xref,`tmp_${t}_${a++}`)),y7(_,C)):C instanceof Py&&(o.get(C.xref)===C&&(m.add(C.xref),a--),y7(_,C))}),i.push(...Array.from(new Set(_.values())).map(C=>k_(new Bh(C)))),t++}e.update.prepend(i)}}function y7(n,e){const t=n.get(e.xref);if(void 0===t)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=t}function b7(n){for(const e of n.units){WN(e.create,n.compatibility),WN(e.update,n.compatibility);for(const t of e.create)t.kind===Qt.Listener&&WN(t.handlerOps,n.compatibility)}}var Ld=function(n){return n[n.None=0]="None",n[n.ViewContextRead=1]="ViewContextRead",n[n.ViewContextWrite=3]="ViewContextWrite",n[n.SideEffectful=4]="SideEffectful",n}(Ld||{});function WN(n,e){const t=new Map,i=new Map,r=new Set,o=new Map;for(const _ of n){if(_.kind===Qt.Variable){if(t.has(_.xref)||i.has(_.xref))throw new Error(`Should not see two declarations of the same variable: ${_.xref}`);t.set(_.xref,_),i.set(_.xref,0)}o.set(_,wIe(_)),EIe(_,i,r)}let a=!1;for(const _ of n.reversed()){const C=o.get(_);if(_.kind!==Qt.Variable||0!==i.get(_.xref))C.fences&Ld.ViewContextRead&&(a=!0);else{if(a&&C.fences&Ld.ViewContextWrite||C.fences&Ld.SideEffectful){const T=k_(_.initializer.toStmt());o.set(T,C),Lr.replace(_,T)}else CIe(_,i),Lr.remove(_);o.delete(_),t.delete(_.xref),i.delete(_.xref)}}const h=[];for(const[_,C]of i)1===C&&(r.has(_)||h.push(_));let m;for(;m=h.pop();){const _=t.get(m),C=o.get(_);for(let T=_.next;T.kind!==Qt.ListEnd;T=T.next){const P=o.get(T);if(P.variablesUsed.has(m)){if(e===A_.TemplateDefinitionBuilder&&!IIe(_,T))break;if(SIe(m,_.initializer,T,C.fences)){P.variablesUsed.delete(m);for(const O of C.variablesUsed)P.variablesUsed.add(O);P.fences|=C.fences,t.delete(m),i.delete(m),o.delete(_),Lr.remove(_)}break}if(!w7(P.fences,C.fences))break}}}function x7(n){switch(n.kind){case ro.NextContext:return Ld.ViewContextWrite;case ro.RestoreView:return Ld.ViewContextWrite|Ld.SideEffectful;case ro.Reference:return Ld.ViewContextRead;default:return Ld.None}}function wIe(n){let e=Ld.None;const t=new Set;return lh(n,i=>{mg(i)&&(i.kind===ro.ReadVariable?t.add(i.xref):e|=x7(i))}),{fences:e,variablesUsed:t}}function EIe(n,e,t){lh(n,(i,r)=>{if(!mg(i)||i.kind!==ro.ReadVariable)return;const o=e.get(i.xref);void 0!==o&&(e.set(i.xref,o+1),r&Fl.InChildOperation&&t.add(i.xref))})}function CIe(n,e){lh(n,t=>{if(!mg(t)||t.kind!==ro.ReadVariable)return;const i=e.get(t.xref);if(void 0!==i){if(0===i)throw new Error(`Inaccurate variable count: ${t.xref} - found another read but count is already 0`);e.set(t.xref,i-1)}})}function w7(n,e){if(n&Ld.ViewContextWrite){if(e&Ld.ViewContextRead)return!1}else if(n&Ld.ViewContextRead&&e&Ld.ViewContextWrite)return!1;return!0}function SIe(n,e,t,i){let r=!1,o=!0;return ch(t,(a,h)=>{if(!mg(a)||r||!o)return a;if(h&Fl.InChildOperation&&i&Ld.ViewContextRead)return a;if(a.kind===ro.ReadVariable){if(a.xref===n)return r=!0,e}else{const m=x7(a);o=o&&w7(m,i)}return a},Fl.None),r}function IIe(n,e){switch(n.variable.kind){case Vh.Identifier:return!1;case Vh.Context:return e.kind===Qt.Variable;default:return!0}}function AIe(n,e){const t=C7(n.root);return E7(n.root,e),t}function E7(n,e){for(const t of n.job.views.values()){if(t.parent!==n.xref)continue;E7(t,e);const i=C7(t);e.statements.push(i.toDeclStmt(i.name))}}function C7(n){if(null===n.fnName)throw new Error(`AssertionError: view ${n.xref} is unnamed`);const e=[];for(const o of n.create){if(o.kind!==Qt.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${Qt[o.kind]}`);e.push(o.statement)}const t=[];for(const o of n.update){if(o.kind!==Qt.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${Qt[o.kind]}`);t.push(o.statement)}const i=OA(1,e),r=OA(2,t);return lc([new Xl("rf"),new Xl("ctx")],[...i,...r],void 0,void 0,n.fnName)}function OA(n,e){return 0===e.length?[]:[oC(new Os(Ji.BitwiseAnd,vo("rf"),Xt(n)),e)]}const S7=A_.TemplateDefinitionBuilder;function RIe(n,e){let t;const i=e.expression.ast;t=i instanceof Tu?new Gu(i.strings,i.expressions.map(o=>da(o,n))):da(i,n);let r=Ds.Property;e.name.startsWith("attr.")&&(e.name=e.name.substring(5),r=Ds.Attribute),n.update.push(C9(n.root.xref,r,e.name,t,null,Pa.NONE,!1,e.sourceSpan))}function XN(n,e){for(const t of e)if(t instanceof aC)OIe(n,t);else if(t instanceof om)LIe(n,t);else if(t instanceof my)NIe(n,t);else{if(!(t instanceof H2))throw new Error(`Unsupported template node: ${t.constructor.name}`);FIe(n,t)}}function OIe(n,e){const t={};for(const h of e.attributes)t[h.name]=h.value;const i=n.job.allocateXrefId(),[r,o]=ah(e.name),a=function gCe(n,e,t,i){return{kind:Qt.ElementStart,xref:e,tag:n,attributes:new SA,localRefs:[],nonBindable:!1,namespace:t,sourceSpan:i,...TA,...cc}}(o,i,Q9(r),e.startSourceSpan);n.create.push(a),I7(n,a,e),T7(a,e),XN(n,e.children),n.create.push(function vCe(n,e){return{kind:Qt.ElementEnd,xref:n,sourceSpan:e,...cc}}(i,e.endSourceSpan))}function LIe(n,e){const t=n.job.allocateView(n.xref);let i=e.tagName,r="";e.tagName&&([r,i]=ah(e.tagName));const o=function _Ce(n,e,t,i){return{kind:Qt.Template,xref:n,attributes:new SA,tag:e,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:t,sourceSpan:i,...TA,...cc}}(t.xref,i??"ng-template",Q9(r),e.startSourceSpan);n.create.push(o),I7(n,o,e),T7(o,e),XN(t,e.children);for(const{name:a,value:h}of e.variables)t.contextVariables.set(a,h)}function NIe(n,e){n.create.push(O9(n.job.allocateXrefId(),e.value,e.sourceSpan))}function FIe(n,e){let t=e.value;if(t instanceof Sf&&(t=t.ast),!(t instanceof Tu))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${t.constructor.name}`);const i=n.job.allocateXrefId();n.create.push(O9(i,"",e.sourceSpan)),n.update.push(function sCe(n,e,t){return{kind:Qt.InterpolateText,target:n,interpolation:e,sourceSpan:t,...Iy,...M_,...cc}}(i,new Gu(t.strings,t.expressions.map(r=>da(r,n.job))),e.sourceSpan))}function da(n,e){if(n instanceof Sf)return da(n.ast,e);if(n instanceof fg)return n.receiver instanceof D_&&!(n.receiver instanceof vC)?new Ty(n.name):new Nh(da(n.receiver,e),n.name);if(n instanceof mA)return new ly(da(n.receiver,e),n.name,da(n.value,e));if(n instanceof _A)return new ay(da(n.receiver,e),da(n.key,e),da(n.value,e));if(n instanceof Cy){if(n.receiver instanceof D_)throw new Error("Unexpected ImplicitReceiver");return new ld(da(n.receiver,e),n.args.map(t=>da(t,e)))}if(n instanceof sh)return Xt(n.value);if(n instanceof cp){const t=nSe.get(n.operation);if(void 0===t)throw new Error(`AssertionError: unknown binary operator ${n.operation}`);return new Os(t,da(n.left,e),da(n.right,e))}if(n instanceof vC)return new Dy(e.root.xref);if(n instanceof bC)return new im(da(n.receiver,e),da(n.key,e));if(n instanceof yC)throw new Error("AssertionError: Chain in unknown context");if(n instanceof vA){const t=n.keys.map((i,r)=>new dy(i.key,da(n.values[r],e),i.quoted));return new wf(t)}if(n instanceof EC)return new Fh(n.expressions.map(t=>da(t,e)));if(n instanceof pA)return new nm(da(n.condition,e),da(n.trueExp,e),da(n.falseExp,e));if(n instanceof yA)return da(n.expression,e);if(n instanceof wC)return new hx(e.allocateXrefId(),n.name,[da(n.exp,e),...n.args.map(t=>da(t,e))]);if(n instanceof xC)return new px(da(n.receiver,e),da(n.key,e));if(n instanceof gA)return new fx(da(n.receiver,e),n.name);if(n instanceof CC)return new P_(da(n.receiver,e),n.args.map(t=>da(t,e)));if(n instanceof $h)return new gx;throw new Error(`Unhandled expression type: ${n.constructor.name}`)}function I7(n,e,t){if(t instanceof om)for(const i of t.templateAttrs)i instanceof q2?LA(n,e.xref,i.name,Xt(i.value),1,null,Pa.NONE,i.sourceSpan,!0):LA(n,e.xref,i.name,i.value,i.type,i.unit,i.securityContext,i.sourceSpan,!0);for(const i of t.attributes)LA(n,e.xref,i.name,Xt(i.value),1,null,Pa.NONE,i.sourceSpan,!1);for(const i of t.inputs)LA(n,e.xref,i.name,i.value,i.type,i.unit,i.securityContext,i.sourceSpan,!1);for(const i of t.outputs){let r;if(1===i.type){if(null===i.phase)throw Error("Animation listener should have a phase");r=wCe(e.xref,i.name,i.phase,e.tag)}else r=xCe(e.xref,i.name,e.tag);let o,a=i.handler;if(a instanceof Sf&&(a=a.ast),o=a instanceof yC?a.expressions:[a],0===o.length)throw new Error("Expected listener to have non-empty expression list.");const h=o.map(_=>da(_,n.job)),m=h.pop();for(const _ of h){const C=k_(new rh(_));r.handlerOps.push(C)}r.handlerOps.push(k_(new _l(m))),n.create.push(r)}}const BIe=new Map([[0,Ds.Property],[1,Ds.Attribute],[2,Ds.ClassName],[3,Ds.StyleProperty],[4,Ds.Animation]]);function LA(n,e,t,i,r,o,a,h,m){let _;i instanceof Sf&&(i=i.ast),_=i instanceof Tu?new Gu(i.strings,i.expressions.map(T=>da(T,n.job))):i instanceof $c?da(i,n.job):i;const C=BIe.get(r);n.update.push(C9(e,C,t,_,o,a,m,h))}function T7(n,e){!function zIe(n){if(!Array.isArray(n))throw new Error("AssertionError: expected an array")}(n.localRefs);for(const{name:t,value:i}of e.references)n.localRefs.push({name:t,target:i})}const D7=!1,NA=2;class A7{constructor(e){this._directiveExpr=e,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}registerBoundInput(e){let t=null,i=e.name;switch(e.type){case 0:t=this.registerInputBasedOnName(i,e.value,e.sourceSpan);break;case 3:t=this.registerStyleInput(i,!1,e.value,e.sourceSpan,e.unit);break;case 2:t=this.registerClassInput(i,!1,e.value,e.sourceSpan)}return!!t}registerInputBasedOnName(e,t,i){let r=null;const o=e.substring(0,6),a="style"===e||"style."===o||"style!"===o;if(a||!a&&("class"===e||"class."===o||"class!"===o)){const m="."!==e.charAt(5),_=e.slice(m?5:6);r=a?this.registerStyleInput(_,m,t,i):this.registerClassInput(_,m,t,i)}return r}registerStyleInput(e,t,i,r,o){if(P7(i))return null;(function GIe(n){return n.startsWith("--")})(e)||(e=UN(e));const{property:a,hasOverrideFlag:h,suffix:m}=k7(e),_={name:a,suffix:o="string"==typeof o&&0!==o.length?o:m,value:i,sourceSpan:r,hasOverrideFlag:h};return t?this._styleMapInput=_:((this._singleStyleInputs=this._singleStyleInputs||[]).push(_),M7(this._stylesIndex,a)),this._lastStylingInput=_,this._firstStylingInput=this._firstStylingInput||_,this._checkForPipes(i),this.hasBindings=!0,_}registerClassInput(e,t,i,r){if(P7(i))return null;const{property:o,hasOverrideFlag:a}=k7(e),h={name:o,value:i,sourceSpan:r,hasOverrideFlag:a,suffix:null};return t?this._classMapInput=h:((this._singleClassInputs=this._singleClassInputs||[]).push(h),M7(this._classesIndex,o)),this._lastStylingInput=h,this._firstStylingInput=this._firstStylingInput||h,this._checkForPipes(i),this.hasBindings=!0,h}_checkForPipes(e){e instanceof Sf&&e.ast instanceof wC&&(this.hasBindingsWithPipes=!0)}registerStyleAttr(e){this._initialStyleValues=$9(e),this._hasInitialValues=!0}registerClassAttr(e){this._initialClassValues=e.trim().split(/\s+/g),this._hasInitialValues=!0}populateInitialStylingAttrs(e){if(this._initialClassValues.length){e.push(Xt(1));for(let t=0;t<this._initialClassValues.length;t++)e.push(Xt(this._initialClassValues[t]))}if(this._initialStyleValues.length){e.push(Xt(2));for(let t=0;t<this._initialStyleValues.length;t+=2)e.push(Xt(this._initialStyleValues[t]),Xt(this._initialStyleValues[t+1]))}}assignHostAttrs(e,t){this._directiveExpr&&(e.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(e),t.set("hostAttrs",fo(e)))}buildClassMapInstruction(e){return this._classMapInput?this._buildMapBasedInstruction(e,!0,this._classMapInput):null}buildStyleMapInstruction(e){return this._styleMapInput?this._buildMapBasedInstruction(e,!1,this._styleMapInput):null}_buildMapBasedInstruction(e,t,i){let r=NA;const o=i.value.visit(e);let a;return o instanceof Tu?(r+=o.expressions.length,a=t?function VIe(n){switch(vy(n)){case 1:return Fe.classMap;case 3:return Fe.classMapInterpolate1;case 5:return Fe.classMapInterpolate2;case 7:return Fe.classMapInterpolate3;case 9:return Fe.classMapInterpolate4;case 11:return Fe.classMapInterpolate5;case 13:return Fe.classMapInterpolate6;case 15:return Fe.classMapInterpolate7;case 17:return Fe.classMapInterpolate8;default:return Fe.classMapInterpolateV}}(o):function UIe(n){switch(vy(n)){case 1:return Fe.styleMap;case 3:return Fe.styleMapInterpolate1;case 5:return Fe.styleMapInterpolate2;case 7:return Fe.styleMapInterpolate3;case 9:return Fe.styleMapInterpolate4;case 11:return Fe.styleMapInterpolate5;case 13:return Fe.styleMapInterpolate6;case 15:return Fe.styleMapInterpolate7;case 17:return Fe.styleMapInterpolate8;default:return Fe.styleMapInterpolateV}}(o)):a=t?Fe.classMap:Fe.styleMap,{reference:a,calls:[{supportsInterpolation:!0,sourceSpan:i.sourceSpan,allocateBindingSlots:r,params:h=>{const m=h(o);return Array.isArray(m)?m:[m]}}]}}_buildSingleInputs(e,t,i,r,o){const a=[];return t.forEach(h=>{const m=a[a.length-1],_=h.value.visit(i);let C=e,T=NA;_ instanceof Tu&&(T+=_.expressions.length,r&&(C=r(_)));const P={sourceSpan:h.sourceSpan,allocateBindingSlots:T,supportsInterpolation:!!r,params:O=>{const j=[];j.push(Xt(h.name));const q=O(_);return Array.isArray(q)?j.push(...q):j.push(q),!o&&null!==h.suffix&&j.push(Xt(h.suffix)),j}};m&&m.reference===C?m.calls.push(P):a.push({reference:C,calls:[P]})}),a}_buildClassInputs(e){return this._singleClassInputs?this._buildSingleInputs(Fe.classProp,this._singleClassInputs,e,null,!0):[]}_buildStyleInputs(e){return this._singleStyleInputs?this._buildSingleInputs(Fe.styleProp,this._singleStyleInputs,e,jIe,!1):[]}buildUpdateLevelInstructions(e){const t=[];if(this.hasBindings){const i=this.buildStyleMapInstruction(e);i&&t.push(i);const r=this.buildClassMapInstruction(e);r&&t.push(r),t.push(...this._buildStyleInputs(e)),t.push(...this._buildClassInputs(e))}return t}}function M7(n,e){n.has(e)||n.set(e,n.size)}function k7(n){let e=!1;const t=n.indexOf("!important");-1!==t&&(n=t>0?n.substring(0,t):"",e=!0);let i=null,r=n;const o=n.lastIndexOf(".");return o>0&&(i=n.slice(o+1),r=n.substring(0,o)),{property:r,suffix:i,hasOverrideFlag:e}}function jIe(n){switch(vy(n)){case 1:return Fe.styleProp;case 3:return Fe.stylePropInterpolate1;case 5:return Fe.stylePropInterpolate2;case 7:return Fe.stylePropInterpolate3;case 9:return Fe.stylePropInterpolate4;case 11:return Fe.stylePropInterpolate5;case 13:return Fe.stylePropInterpolate6;case 15:return Fe.stylePropInterpolate7;case 17:return Fe.stylePropInterpolate8;default:return Fe.stylePropInterpolateV}}function P7(n){return n instanceof Sf&&(n=n.ast),n instanceof $h}var jo=function(n){return n[n.Character=0]="Character",n[n.Identifier=1]="Identifier",n[n.PrivateIdentifier=2]="PrivateIdentifier",n[n.Keyword=3]="Keyword",n[n.String=4]="String",n[n.Operator=5]="Operator",n[n.Number=6]="Number",n[n.Error=7]="Error",n}(jo||{});const HIe=["var","let","as","null","undefined","true","false","if","else","this"];class YN{tokenize(e){const t=new O7(e),i=[];let r=t.scanToken();for(;null!=r;)i.push(r),r=t.scanToken();return i}}class _g{constructor(e,t,i,r,o){this.index=e,this.end=t,this.type=i,this.numValue=r,this.strValue=o}isCharacter(e){return this.type==jo.Character&&this.numValue==e}isNumber(){return this.type==jo.Number}isString(){return this.type==jo.String}isOperator(e){return this.type==jo.Operator&&this.strValue==e}isIdentifier(){return this.type==jo.Identifier}isPrivateIdentifier(){return this.type==jo.PrivateIdentifier}isKeyword(){return this.type==jo.Keyword}isKeywordLet(){return this.type==jo.Keyword&&"let"==this.strValue}isKeywordAs(){return this.type==jo.Keyword&&"as"==this.strValue}isKeywordNull(){return this.type==jo.Keyword&&"null"==this.strValue}isKeywordUndefined(){return this.type==jo.Keyword&&"undefined"==this.strValue}isKeywordTrue(){return this.type==jo.Keyword&&"true"==this.strValue}isKeywordFalse(){return this.type==jo.Keyword&&"false"==this.strValue}isKeywordThis(){return this.type==jo.Keyword&&"this"==this.strValue}isError(){return this.type==jo.Error}toNumber(){return this.type==jo.Number?this.numValue:-1}toString(){switch(this.type){case jo.Character:case jo.Identifier:case jo.Keyword:case jo.Operator:case jo.PrivateIdentifier:case jo.String:case jo.Error:return this.strValue;case jo.Number:return this.numValue.toString();default:return null}}}function R7(n,e,t){return new _g(n,e,jo.Character,t,String.fromCharCode(t))}function ZN(n,e,t){return new _g(n,e,jo.Operator,0,t)}const KN=new _g(-1,-1,jo.Character,0,"");class O7{constructor(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}advance(){this.peek=++this.index>=this.length?cd:this.input.charCodeAt(this.index)}scanToken(){const e=this.input,t=this.length;let i=this.peek,r=this.index;for(;i<=kq;){if(++r>=t){i=cd;break}i=e.charCodeAt(r)}if(this.peek=i,this.index=r,r>=t)return null;if(QN(i))return this.scanIdentifier();if(dg(i))return this.scanNumber(r);const o=r;switch(i){case 46:return this.advance(),dg(this.peek)?this.scanNumber(o):R7(o,this.index,46);case 40:case 41:case lp:case ju:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(o,i);case 39:case 34:return this.scanString();case 35:return this.scanPrivateIdentifier();case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(o,String.fromCharCode(i));case 63:return this.scanQuestion(o);case 60:case 62:return this.scanComplexOperator(o,String.fromCharCode(i),61,"=");case 33:case 61:return this.scanComplexOperator(o,String.fromCharCode(i),61,"=",61,"=");case 38:return this.scanComplexOperator(o,"&",38,"&");case 124:return this.scanComplexOperator(o,"|",124,"|");case Gq:for(;bN(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(i)}]`,0)}scanCharacter(e,t){return this.advance(),R7(e,this.index,t)}scanOperator(e,t){return this.advance(),ZN(e,this.index,t)}scanComplexOperator(e,t,i,r,o,a){this.advance();let h=t;return this.peek==i&&(this.advance(),h+=r),null!=o&&this.peek==o&&(this.advance(),h+=a),ZN(e,this.index,h)}scanIdentifier(){const e=this.index;for(this.advance();JN(this.peek);)this.advance();const t=this.input.substring(e,this.index);return HIe.indexOf(t)>-1?function XIe(n,e,t){return new _g(n,e,jo.Keyword,0,t)}(e,this.index,t):function qIe(n,e,t){return new _g(n,e,jo.Identifier,0,t)}(e,this.index,t)}scanPrivateIdentifier(){const e=this.index;if(this.advance(),!QN(this.peek))return this.error("Invalid character [#]",-1);for(;JN(this.peek);)this.advance();const t=this.input.substring(e,this.index);return function WIe(n,e,t){return new _g(n,e,jo.PrivateIdentifier,0,t)}(e,this.index,t)}scanNumber(e){let t=this.index===e,i=!1;for(this.advance();;){if(!dg(this.peek))if(95===this.peek){if(!dg(this.input.charCodeAt(this.index-1))||!dg(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);i=!0}else if(46===this.peek)t=!1;else{if(101!=(n=this.peek)&&69!=n)break;if(this.advance(),JIe(this.peek)&&this.advance(),!dg(this.peek))return this.error("Invalid exponent",-1);t=!1}this.advance()}var n;let r=this.input.substring(e,this.index);i&&(r=r.replace(/_/g,""));const o=t?function tTe(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}(r):parseFloat(r);return function ZIe(n,e,t){return new _g(n,e,jo.Number,t,"")}(e,this.index,o)}scanString(){const e=this.index,t=this.peek;this.advance();let i="",r=this.index;const o=this.input;for(;this.peek!=t;)if(92==this.peek){let h;if(i+=o.substring(r,this.index),this.advance(),117==this.peek){const m=o.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(m))return this.error(`Invalid unicode escape [\\u${m}]`,0);h=parseInt(m,16);for(let _=0;_<5;_++)this.advance()}else h=eTe(this.peek),this.advance();i+=String.fromCharCode(h),r=this.index}else{if(this.peek==cd)return this.error("Unterminated quote",0);this.advance()}const a=o.substring(r,this.index);return this.advance(),function YIe(n,e,t){return new _g(n,e,jo.String,0,t)}(e,this.index,i+a)}scanQuestion(e){this.advance();let t="?";return(63===this.peek||46===this.peek)&&(t+=46===this.peek?".":"?",this.advance()),ZN(e,this.index,t)}error(e,t){const i=this.index+t;return function KIe(n,e,t){return new _g(n,e,jo.Error,0,t)}(i,this.index,`Lexer Error: ${e} at column ${i} in expression [${this.input}]`)}}function QN(n){return xy<=n&&n<=gC||ox<=n&&n<=sA||95==n||36==n}function JN(n){return cA(n)||dg(n)||95==n||36==n}function JIe(n){return 45==n||43==n}function eTe(n){switch(n){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return gN;case 118:return 11;default:return n}}class nTe{constructor(e,t,i){this.strings=e,this.expressions=t,this.offsets=i}}class iTe{constructor(e,t,i){this.templateBindings=e,this.warnings=t,this.errors=i}}class L7{constructor(e){this._lexer=e,this.errors=[]}parseAction(e,t,i,r,o=Ef){this._checkNoInterpolation(e,i,o);const a=this._stripComments(e),h=this._lexer.tokenize(a);let m=1;t&&(m|=2);const _=new NC(e,i,r,h,m,this.errors,0).parseChain();return new Sf(_,e,i,r,this.errors)}parseBinding(e,t,i,r=Ef){const o=this._parseBindingAst(e,t,i,r);return new Sf(o,e,t,i,this.errors)}checkSimpleExpression(e){const t=new rTe;return e.visit(t),t.errors}parseSimpleBinding(e,t,i,r=Ef){const o=this._parseBindingAst(e,t,i,r),a=this.checkSimpleExpression(o);return a.length>0&&this._reportError(`Host binding expression cannot contain ${a.join(" ")}`,e,t),new Sf(o,e,t,i,this.errors)}_reportError(e,t,i,r){this.errors.push(new EN(e,t,i,r))}_parseBindingAst(e,t,i,r){this._checkNoInterpolation(e,t,r);const o=this._stripComments(e),a=this._lexer.tokenize(o);return new NC(e,t,i,a,0,this.errors,0).parseChain()}parseTemplateBindings(e,t,i,r,o){const a=this._lexer.tokenize(t);return new NC(t,i,o,a,0,this.errors,0).parseTemplateBindings({source:e,span:new up(r,r+e.length)})}parseInterpolation(e,t,i,r,o=Ef){const{strings:a,expressions:h,offsets:m}=this.splitInterpolation(e,t,r,o);if(0===h.length)return null;const _=[];for(let C=0;C<h.length;++C){const P=this._stripComments(h[C].text),O=this._lexer.tokenize(P),j=new NC(e,t,i,O,0,this.errors,m[C]).parseChain();_.push(j)}return this.createInterpolationAst(a.map(C=>C.text),_,e,t,i)}parseInterpolationExpression(e,t,i){const r=this._stripComments(e),o=this._lexer.tokenize(r),a=new NC(e,t,i,o,0,this.errors,0).parseChain();return this.createInterpolationAst(["",""],[a],e,t,i)}createInterpolationAst(e,t,i,r,o){const a=new _C(0,i.length),h=new Tu(a,a.toAbsolute(o),e,t);return new Sf(h,i,r,o,this.errors)}splitInterpolation(e,t,i,r=Ef){const o=[],a=[],h=[],m=i?function oTe(n){let e=new Map,t=0,i=0,r=0;for(;r<n.length;){const o=n[r];if(9===o.type){const[a,h]=o.parts;t+=h.length,i+=a.length}else{const a=o.parts.reduce((h,m)=>h+m.length,0);i+=a,t+=a}e.set(i,t),r++}return e}(i):null;let _=0,C=!1,T=!1,{start:P,end:O}=r;for(;_<e.length;)if(C){const j=_,q=j+P.length,_e=this._getInterpolationEndIndex(e,O,q);if(-1===_e){C=!1,T=!0;break}const me=_e+O.length,te=e.substring(q,_e);0===te.trim().length&&this._reportError("Blank expressions are not allowed in interpolated strings",e,`at column ${_} in`,t),a.push({text:te,start:j,end:me});const _t=(m?.get(j)??j)+P.length;h.push(_t),_=me,C=!1}else{const j=_;_=e.indexOf(P,_),-1===_&&(_=e.length);const q=e.substring(j,_);o.push({text:q,start:j,end:_}),C=!0}if(!C)if(T){const j=o[o.length-1];j.text+=e.substring(_),j.end=e.length}else o.push({text:e.substring(_),start:_,end:e.length});return new nTe(o,a,h)}wrapLiteralPrimitive(e,t,i){const r=new _C(0,null==e?0:e.length);return new Sf(new sh(r,r.toAbsolute(i),e),e,t,i,this.errors)}_stripComments(e){const t=this._commentStart(e);return null!=t?e.substring(0,t):e}_commentStart(e){let t=null;for(let i=0;i<e.length-1;i++){const r=e.charCodeAt(i),o=e.charCodeAt(i+1);if(47===r&&47==o&&null==t)return i;t===r?t=null:null==t&&uA(r)&&(t=r)}return null}_checkNoInterpolation(e,t,{start:i,end:r}){let o=-1,a=-1;for(const h of this._forEachUnquotedChar(e,0))if(-1===o)e.startsWith(i)&&(o=h);else if(a=this._getInterpolationEndIndex(e,r,h),a>-1)break;o>-1&&a>-1&&this._reportError(`Got interpolation (${i}${r}) where expression was expected`,e,`at column ${o} in`,t)}_getInterpolationEndIndex(e,t,i){for(const r of this._forEachUnquotedChar(e,i)){if(e.startsWith(t,r))return r;if(e.startsWith("//",r))return e.indexOf(t,r)}return-1}*_forEachUnquotedChar(e,t){let i=null,r=0;for(let o=t;o<e.length;o++){const a=e[o];!uA(e.charCodeAt(o))||null!==i&&i!==a||r%2!=0?null===i&&(yield o):i=null===i?a:null,r="\\"===a?r+1:0}}}var LC=function(n){return n[n.None=0]="None",n[n.Writable=1]="Writable",n}(LC||{});class NC{constructor(e,t,i,r,o,a,h){this.input=e,this.location=t,this.absoluteOffset=i,this.tokens=r,this.parseFlags=o,this.errors=a,this.offset=h,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=LC.None,this.sourceSpanCache=new Map,this.index=0}peek(e){const t=this.index+e;return t<this.tokens.length?this.tokens[t]:KN}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let i=this.currentEndIndex;if(void 0!==t&&t>this.currentEndIndex&&(i=t),e>i){const r=i;i=e,e=r}return new _C(e,i)}sourceSpan(e,t){const i=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(i)||this.sourceSpanCache.set(i,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(i)}advance(){this.index++}withContext(e,t){this.context|=e;const i=t();return this.context^=e,i}consumeOptionalCharacter(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===KN?"end of input":`token ${e}`}expectIdentifierOrKeyword(){const e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null)}expectIdentifierOrKeywordOrString(){const e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),"")}parseChain(){const e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){const i=this.parsePipe();if(e.push(i),this.consumeOptionalCharacter(59))for(1&this.parseFlags||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else if(this.index<this.tokens.length){const r=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===r)break}}if(0===e.length){const i=this.offset,r=this.offset+this.input.length;return new $h(this.span(i,r),this.sourceSpan(i,r))}return 1==e.length?e[0]:new yC(this.span(t),this.sourceSpan(t),e)}parsePipe(){const e=this.inputIndex;let t=this.parseExpression();if(this.consumeOptionalOperator("|")){1&this.parseFlags&&this.error("Cannot have a pipe in an action expression");do{const i=this.inputIndex;let o,a,r=this.expectIdentifierOrKeyword();null!==r?o=this.sourceSpan(i):(r="",a=-1!==this.next.index?this.next.index:this.input.length+this.offset,o=new _C(a,a).toAbsolute(this.absoluteOffset));const h=[];for(;this.consumeOptionalCharacter(58);)h.push(this.parseExpression());t=new wC(this.span(e),this.sourceSpan(e,a),t,r,h,o)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){const e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){const i=this.parsePipe();let r;if(this.consumeOptionalCharacter(58))r=this.parsePipe();else{const a=this.input.substring(e,this.inputIndex);this.error(`Conditional expression ${a} requires all 3 expressions`),r=new $h(this.span(e),this.sourceSpan(e))}return new pA(this.span(e),this.sourceSpan(e),t,i,r)}return t}parseLogicalOr(){const e=this.inputIndex;let t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){const i=this.parseLogicalAnd();t=new cp(this.span(e),this.sourceSpan(e),"||",t,i)}return t}parseLogicalAnd(){const e=this.inputIndex;let t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){const i=this.parseNullishCoalescing();t=new cp(this.span(e),this.sourceSpan(e),"&&",t,i)}return t}parseNullishCoalescing(){const e=this.inputIndex;let t=this.parseEquality();for(;this.consumeOptionalOperator("??");){const i=this.parseEquality();t=new cp(this.span(e),this.sourceSpan(e),"??",t,i)}return t}parseEquality(){const e=this.inputIndex;let t=this.parseRelational();for(;this.next.type==jo.Operator;){const i=this.next.strValue;switch(i){case"==":case"===":case"!=":case"!==":this.advance();const r=this.parseRelational();t=new cp(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseRelational(){const e=this.inputIndex;let t=this.parseAdditive();for(;this.next.type==jo.Operator;){const i=this.next.strValue;switch(i){case"<":case">":case"<=":case">=":this.advance();const r=this.parseAdditive();t=new cp(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseAdditive(){const e=this.inputIndex;let t=this.parseMultiplicative();for(;this.next.type==jo.Operator;){const i=this.next.strValue;switch(i){case"+":case"-":this.advance();let r=this.parseMultiplicative();t=new cp(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parseMultiplicative(){const e=this.inputIndex;let t=this.parsePrefix();for(;this.next.type==jo.Operator;){const i=this.next.strValue;switch(i){case"*":case"%":case"/":this.advance();let r=this.parsePrefix();t=new cp(this.span(e),this.sourceSpan(e),i,t,r);continue}break}return t}parsePrefix(){if(this.next.type==jo.Operator){const e=this.inputIndex;let i;switch(this.next.strValue){case"+":return this.advance(),i=this.parsePrefix(),pg.createPlus(this.span(e),this.sourceSpan(e),i);case"-":return this.advance(),i=this.parsePrefix(),pg.createMinus(this.span(e),this.sourceSpan(e),i);case"!":return this.advance(),i=this.parsePrefix(),new CN(this.span(e),this.sourceSpan(e),i)}}return this.parseCallChain()}parseCallChain(){const e=this.inputIndex;let t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))t=this.consumeOptionalCharacter(40)?this.parseCall(t,e,!0):this.consumeOptionalCharacter(91)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(91))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(40))t=this.parseCall(t,e,!1);else{if(!this.consumeOptionalOperator("!"))return t;t=new yA(this.span(e),this.sourceSpan(e),t)}}parsePrimary(){const e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;const t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),t}if(this.next.isKeywordNull())return this.advance(),new sh(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new sh(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new sh(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new sh(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new vC(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;const t=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new EC(this.span(e),this.sourceSpan(e),t)}if(this.next.isCharacter(lp))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new D_(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){const t=this.next.toNumber();return this.advance(),new sh(this.span(e),this.sourceSpan(e),t)}if(this.next.isString()){const t=this.next.toString();return this.advance(),new sh(this.span(e),this.sourceSpan(e),t)}return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new $h(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new $h(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new $h(this.span(e),this.sourceSpan(e)))}parseExpressionList(e){const t=[];do{if(this.next.isCharacter(e))break;t.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return t}parseLiteralMap(){const e=[],t=[],i=this.inputIndex;if(this.expectCharacter(lp),!this.consumeOptionalCharacter(ju)){this.rbracesExpected++;do{const r=this.inputIndex,o=this.next.isString(),a=this.expectIdentifierOrKeywordOrString();if(e.push({key:a,quoted:o}),o)this.expectCharacter(58),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(58))t.push(this.parsePipe());else{const h=this.span(r),m=this.sourceSpan(r);t.push(new fg(h,m,m,new D_(h,m),a))}}while(this.consumeOptionalCharacter(44)&&!this.next.isCharacter(ju));this.rbracesExpected--,this.expectCharacter(ju)}return new vA(this.span(i),this.sourceSpan(i),e,t)}parseAccessMember(e,t,i){const r=this.inputIndex,o=this.withContext(LC.Writable,()=>{const m=this.expectIdentifierOrKeyword()??"";return 0===m.length&&this.error("Expected identifier for property access",e.span.end),m}),a=this.sourceSpan(r);let h;if(i)this.consumeOptionalAssignment()?(this.error("The '?.' operator cannot be used in the assignment"),h=new $h(this.span(t),this.sourceSpan(t))):h=new gA(this.span(t),this.sourceSpan(t),a,e,o);else if(this.consumeOptionalAssignment()){if(!(1&this.parseFlags))return this.error("Bindings cannot contain assignments"),new $h(this.span(t),this.sourceSpan(t));const m=this.parseConditional();h=new mA(this.span(t),this.sourceSpan(t),a,e,o,m)}else h=new fg(this.span(t),this.sourceSpan(t),a,e,o);return h}parseCall(e,t,i){const r=this.inputIndex;this.rparensExpected++;const o=this.parseCallArguments(),a=this.span(r,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(41),this.rparensExpected--;const h=this.span(t),m=this.sourceSpan(t);return i?new CC(h,m,e,o,a):new Cy(h,m,e,o,a)}consumeOptionalAssignment(){return 2&this.parseFlags&&this.next.isOperator("!")&&this.peek(1).isOperator("=")?(this.advance(),this.advance(),!0):this.consumeOptionalOperator("=")}parseCallArguments(){if(this.next.isCharacter(41))return[];const e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return e}expectTemplateBindingKey(){let e="",t=!1;const i=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-")}while(t);return{source:e,span:new up(i,i+e.length)}}parseTemplateBindings(e){const t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){const i=this.parseLetBinding();if(i)t.push(i);else{const r=this.expectTemplateBindingKey(),o=this.parseAsBinding(r);o?t.push(o):(r.source=e.source+r.source.charAt(0).toUpperCase()+r.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(r)))}this.consumeStatementTerminator()}return new iTe(t,[],this.errors)}parseKeyedReadOrWrite(e,t,i){return this.withContext(LC.Writable,()=>{this.rbracketsExpected++;const r=this.parsePipe();if(r instanceof $h&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(93),!this.consumeOptionalOperator("="))return i?new xC(this.span(t),this.sourceSpan(t),e,r):new bC(this.span(t),this.sourceSpan(t),e,r);if(!i){const o=this.parseConditional();return new _A(this.span(t),this.sourceSpan(t),e,r,o)}return this.error("The '?.' operator cannot be used in the assignment"),new $h(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){const t=[];this.consumeOptionalCharacter(58);const i=this.getDirectiveBoundTarget();let r=this.currentAbsoluteOffset;const o=this.parseAsBinding(e);o||(this.consumeStatementTerminator(),r=this.currentAbsoluteOffset);const a=new up(e.span.start,r);return t.push(new pEe(a,e,i)),o&&t.push(o),t}getDirectiveBoundTarget(){if(this.next===KN||this.peekKeywordAs()||this.peekKeywordLet())return null;const e=this.parsePipe(),{start:t,end:i}=e.span,r=this.input.substring(t,i);return new Sf(e,r,this.location,this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();const t=this.expectTemplateBindingKey();this.consumeStatementTerminator();const i=new up(e.span.start,this.currentAbsoluteOffset);return new SN(i,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;const e=this.currentAbsoluteOffset;this.advance();const t=this.expectTemplateBindingKey();let i=null;this.consumeOptionalOperator("=")&&(i=this.expectTemplateBindingKey()),this.consumeStatementTerminator();const r=new up(e,this.currentAbsoluteOffset);return new SN(r,t,i)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(e,t=null){this.errors.push(new EN(e,this.input,this.locationText(t),this.location)),this.skip()}locationText(e=null){return null==e&&(e=this.index),e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let i=`Private identifiers are not supported. Unexpected private identifier: ${e}`;null!==t&&(i+=`, ${t}`),this.error(i)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(59)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(41))&&(this.rbracesExpected<=0||!e.isCharacter(ju))&&(this.rbracketsExpected<=0||!e.isCharacter(93))&&!(this.context&LC.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new EN(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}class rTe extends mEe{constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}}class FC{constructor(e,t){this.sourceSpan=e,this.i18n=t}}class BC extends FC{constructor(e,t,i,r){super(t,r),this.value=e,this.tokens=i}visit(e,t){return e.visitText(this,t)}}class zC extends FC{constructor(e,t,i,r,o,a){super(r,a),this.switchValue=e,this.type=t,this.cases=i,this.switchValueSourceSpan=o}visit(e,t){return e.visitExpansion(this,t)}}class N7{constructor(e,t,i,r,o){this.value=e,this.expression=t,this.sourceSpan=i,this.valueSourceSpan=r,this.expSourceSpan=o}visit(e,t){return e.visitExpansionCase(this,t)}}class FA extends FC{constructor(e,t,i,r,o,a,h){super(i,h),this.name=e,this.value=t,this.keySpan=r,this.valueSpan=o,this.valueTokens=a}visit(e,t){return e.visitAttribute(this,t)}}class jh extends FC{constructor(e,t,i,r,o,a=null,h){super(r,h),this.name=e,this.attrs=t,this.children=i,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitElement(this,t)}}class $C{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}}class R_{constructor(e,t,i,r=null){this.blocks=e,this.sourceSpan=t,this.startSourceSpan=i,this.endSourceSpan=r}visit(e,t){return e.visitBlockGroup(this,t)}}class BA{constructor(e,t,i,r,o,a=null){this.name=e,this.parameters=t,this.children=i,this.sourceSpan=r,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitBlock(this,t)}}class sTe{constructor(e,t){this.expression=e,this.sourceSpan=t}visit(e,t){return e.visitBlockParameter(this,t)}}function Jr(n,e,t=null){const i=[],r=n.visit?o=>n.visit(o,t)||o.visit(n,t):o=>o.visit(n,t);return e.forEach(o=>{const a=r(o);a&&i.push(a)}),i}class aTe{}const hTe=["[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],F7=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"})),fTe=Array.from(F7).reduce((n,[e,t])=>(n.set(e,t),n),new Map);class eF extends aTe{constructor(){super(),this._schema=new Map,this._eventSchema=new Map,hTe.forEach(e=>{const t=new Map,i=new Set,[r,o]=e.split("|"),a=o.split(","),[h,m]=r.split("^");h.split(",").forEach(C=>{this._schema.set(C.toLowerCase(),t),this._eventSchema.set(C.toLowerCase(),i)});const _=m&&this._schema.get(m.toLowerCase());if(_){for(const[C,T]of _)t.set(C,T);for(const C of this._eventSchema.get(m.toLowerCase()))i.add(C)}a.forEach(C=>{if(C.length>0)switch(C[0]){case"*":i.add(C.substring(1));break;case"!":t.set(C.substring(1),"boolean");break;case"#":t.set(C.substring(1),"number");break;case"%":t.set(C.substring(1),"object");break;default:t.set(C,"string")}})})}hasProperty(e,t,i){if(i.some(o=>o.name===XL_name))return!0;if(e.indexOf("-")>-1){if(LN(e)||NN(e))return!1;if(i.some(o=>o.name===WL_name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(t)}hasElement(e,t){return!!(t.some(i=>i.name===XL_name)||e.indexOf("-")>-1&&(LN(e)||NN(e)||t.some(i=>i.name===WL_name)))||this._schema.has(e.toLowerCase())}securityContext(e,t,i){i&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let r=c9()[e+"|"+t];return r||(r=c9()["*|"+t],r||Pa.NONE)}getMappedPropName(e){return F7.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...\nIf '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){const t=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(t.keys()).map(i=>fTe.get(i)??i)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return function D1e(n){return n.replace(T1e,(...e)=>e[1].toUpperCase())}(e)}normalizeAnimationStyleValue(e,t,i){let r="";const o=i.toString().trim();let a=null;if(function pTe(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&(a=`Please provide a CSS unit value for ${t}:${i}`)}return{error:a,value:o+r}}}class Lo{constructor({closedByChildren:e,implicitNamespacePrefix:t,contentType:i=am.PARSABLE_DATA,closedByParent:r=!1,isVoid:o=!1,ignoreFirstLf:a=!1,preventNamespaceInheritance:h=!1,canSelfClose:m=!1}={}){this.closedByChildren={},this.closedByParent=!1,e&&e.length>0&&e.forEach(_=>this.closedByChildren[_]=!0),this.isVoid=o,this.closedByParent=r||o,this.implicitNamespacePrefix=t||null,this.contentType=i,this.ignoreFirstLf=a,this.preventNamespaceInheritance=h,this.canSelfClose=m??o}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return"object"==typeof this.contentType?(void 0===e?void 0:this.contentType[e])??this.contentType.default:this.contentType}}let B7,yx;function z7(n){return yx||(B7=new Lo({canSelfClose:!0}),yx={base:new Lo({isVoid:!0}),meta:new Lo({isVoid:!0}),area:new Lo({isVoid:!0}),embed:new Lo({isVoid:!0}),link:new Lo({isVoid:!0}),img:new Lo({isVoid:!0}),input:new Lo({isVoid:!0}),param:new Lo({isVoid:!0}),hr:new Lo({isVoid:!0}),br:new Lo({isVoid:!0}),source:new Lo({isVoid:!0}),track:new Lo({isVoid:!0}),wbr:new Lo({isVoid:!0}),p:new Lo({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Lo({closedByChildren:["tbody","tfoot"]}),tbody:new Lo({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Lo({closedByChildren:["tbody"],closedByParent:!0}),tr:new Lo({closedByChildren:["tr"],closedByParent:!0}),td:new Lo({closedByChildren:["td","th"],closedByParent:!0}),th:new Lo({closedByChildren:["td","th"],closedByParent:!0}),col:new Lo({isVoid:!0}),svg:new Lo({implicitNamespacePrefix:"svg"}),foreignObject:new Lo({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new Lo({implicitNamespacePrefix:"math"}),li:new Lo({closedByChildren:["li"],closedByParent:!0}),dt:new Lo({closedByChildren:["dt","dd"]}),dd:new Lo({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Lo({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Lo({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Lo({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Lo({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Lo({closedByChildren:["optgroup"],closedByParent:!0}),option:new Lo({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Lo({ignoreFirstLf:!0}),listing:new Lo({ignoreFirstLf:!0}),style:new Lo({contentType:am.RAW_TEXT}),script:new Lo({contentType:am.RAW_TEXT}),title:new Lo({contentType:{default:am.ESCAPABLE_RAW_TEXT,svg:am.PARSABLE_DATA}}),textarea:new Lo({contentType:am.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},(new eF).allKnownElementNames().forEach(e=>{!yx.hasOwnProperty(e)&&null===FN(e)&&(yx[e]=new Lo({canSelfClose:!1}))})),yx[n]??yx[n.toLowerCase()]??B7}const zA={AElig:"\xc6",AMP:"&",amp:"&",Aacute:"\xc1",Abreve:"\u0102",Acirc:"\xc2",Acy:"\u0410",Afr:"\u{1d504}",Agrave:"\xc0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2a53",Aogon:"\u0104",Aopf:"\u{1d538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xc5",angst:"\xc5",Ascr:"\u{1d49c}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xc3",Auml:"\xc4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2ae7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212c",Bscr:"\u212c",bernou:"\u212c",Beta:"\u0392",Bfr:"\u{1d505}",Bopf:"\u{1d539}",Breve:"\u02d8",breve:"\u02d8",Bumpeq:"\u224e",HumpDownHump:"\u224e",bump:"\u224e",CHcy:"\u0427",COPY:"\xa9",copy:"\xa9",Cacute:"\u0106",Cap:"\u22d2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212d",Cfr:"\u212d",Ccaron:"\u010c",Ccedil:"\xc7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010a",Cedilla:"\xb8",cedil:"\xb8",CenterDot:"\xb7",centerdot:"\xb7",middot:"\xb7",Chi:"\u03a7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201d",rdquo:"\u201d",rdquor:"\u201d",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2a74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222f",DoubleContourIntegral:"\u222f",ContourIntegral:"\u222e",conint:"\u222e",oint:"\u222e",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2a2f",Cscr:"\u{1d49e}",Cup:"\u22d3",CupCap:"\u224d",asympeq:"\u224d",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040f",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21a1",Dashv:"\u2ae4",DoubleLeftTee:"\u2ae4",Dcaron:"\u010e",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1d507}",DiacriticalAcute:"\xb4",acute:"\xb4",DiacriticalDot:"\u02d9",dot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",dblac:"\u02dd",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02dc",tilde:"\u02dc",Diamond:"\u22c4",diam:"\u22c4",diamond:"\u22c4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1d53b}",Dot:"\xa8",DoubleDot:"\xa8",die:"\xa8",uml:"\xa8",DotDot:"\u20dc",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21d3",Downarrow:"\u21d3",dArr:"\u21d3",DoubleLeftArrow:"\u21d0",Leftarrow:"\u21d0",lArr:"\u21d0",DoubleLeftRightArrow:"\u21d4",Leftrightarrow:"\u21d4",hArr:"\u21d4",iff:"\u21d4",DoubleLongLeftArrow:"\u27f8",Longleftarrow:"\u27f8",xlArr:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",Longleftrightarrow:"\u27fa",xhArr:"\u27fa",DoubleLongRightArrow:"\u27f9",Longrightarrow:"\u27f9",xrArr:"\u27f9",DoubleRightArrow:"\u21d2",Implies:"\u21d2",Rightarrow:"\u21d2",rArr:"\u21d2",DoubleRightTee:"\u22a8",vDash:"\u22a8",DoubleUpArrow:"\u21d1",Uparrow:"\u21d1",uArr:"\u21d1",DoubleUpDownArrow:"\u21d5",Updownarrow:"\u21d5",vArr:"\u21d5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",duarr:"\u21f5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",leftharpoondown:"\u21bd",lhard:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",rhard:"\u21c1",rightharpoondown:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",top:"\u22a4",DownTeeArrow:"\u21a7",mapstodown:"\u21a7",Dscr:"\u{1d49f}",Dstrok:"\u0110",ENG:"\u014a",ETH:"\xd0",Eacute:"\xc9",Ecaron:"\u011a",Ecirc:"\xca",Ecy:"\u042d",Edot:"\u0116",Efr:"\u{1d508}",Egrave:"\xc8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25fb",EmptyVerySmallSquare:"\u25ab",Eogon:"\u0118",Eopf:"\u{1d53c}",Epsilon:"\u0395",Equal:"\u2a75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21cc",rightleftharpoons:"\u21cc",rlhar:"\u21cc",Escr:"\u2130",expectation:"\u2130",Esim:"\u2a73",Eta:"\u0397",Euml:"\xcb",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1d509}",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",blacksquare:"\u25aa",squarf:"\u25aa",squf:"\u25aa",Fopf:"\u{1d53d}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03dc",Gbreve:"\u011e",Gcedil:"\u0122",Gcirc:"\u011c",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1d50a}",Gg:"\u22d9",ggg:"\u22d9",Gopf:"\u{1d53e}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22db",gel:"\u22db",gtreqless:"\u22db",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2a7e",geqslant:"\u2a7e",ges:"\u2a7e",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1d4a2}",Gt:"\u226b",NestedGreaterGreater:"\u226b",gg:"\u226b",HARDcy:"\u042a",Hacek:"\u02c7",caron:"\u02c7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210c",Poincareplane:"\u210c",HilbertSpace:"\u210b",Hscr:"\u210b",hamilt:"\u210b",Hopf:"\u210d",quaternions:"\u210d",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224f",bumpe:"\u224f",bumpeq:"\u224f",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xcd",Icirc:"\xce",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xcc",Imacr:"\u012a",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222c",Integral:"\u222b",int:"\u222b",Intersection:"\u22c2",bigcap:"\u22c2",xcap:"\u22c2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012e",Iopf:"\u{1d540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xcf",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1d50d}",Jopf:"\u{1d541}",Jscr:"\u{1d4a5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040c",Kappa:"\u039a",Kcedil:"\u0136",Kcy:"\u041a",Kfr:"\u{1d50e}",Kopf:"\u{1d542}",Kscr:"\u{1d4a6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039b",Lang:"\u27ea",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219e",twoheadleftarrow:"\u219e",Lcaron:"\u013d",Lcedil:"\u013b",Lcy:"\u041b",LeftAngleBracket:"\u27e8",lang:"\u27e8",langle:"\u27e8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21e4",larrb:"\u21e4",LeftArrowRightArrow:"\u21c6",leftrightarrows:"\u21c6",lrarr:"\u21c6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27e6",lobrk:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",dharl:"\u21c3",downharpoonleft:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",lfloor:"\u230a",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294e",LeftTee:"\u22a3",dashv:"\u22a3",LeftTeeArrow:"\u21a4",mapstoleft:"\u21a4",LeftTeeVector:"\u295a",LeftTriangle:"\u22b2",vartriangleleft:"\u22b2",vltri:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",ltrie:"\u22b4",trianglelefteq:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",uharl:"\u21bf",upharpoonleft:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",leftharpoonup:"\u21bc",lharu:"\u21bc",LeftVectorBar:"\u2952",LessEqualGreater:"\u22da",leg:"\u22da",lesseqgtr:"\u22da",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2aa1",LessSlantEqual:"\u2a7d",leqslant:"\u2a7d",les:"\u2a7d",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1d50f}",Ll:"\u22d8",Lleftarrow:"\u21da",lAarr:"\u21da",Lmidot:"\u013f",LongLeftArrow:"\u27f5",longleftarrow:"\u27f5",xlarr:"\u27f5",LongLeftRightArrow:"\u27f7",longleftrightarrow:"\u27f7",xharr:"\u27f7",LongRightArrow:"\u27f6",longrightarrow:"\u27f6",xrarr:"\u27f6",Lopf:"\u{1d543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21b0",lsh:"\u21b0",Lstrok:"\u0141",Lt:"\u226a",NestedLessLess:"\u226a",ll:"\u226a",Map:"\u2905",Mcy:"\u041c",MediumSpace:"\u205f",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1d510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1d544}",Mu:"\u039c",NJcy:"\u040a",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041d",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",ZeroWidthSpace:"\u200b",NewLine:"\n",Nfr:"\u{1d511}",NoBreak:"\u2060",NonBreakingSpace:"\xa0",nbsp:"\xa0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2aec",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226f",ngt:"\u226f",ngtr:"\u226f",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",nGtv:"\u226b\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224e\u0338",nbump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",nbumpe:"\u224f\u0338",NotLeftTriangle:"\u22ea",nltri:"\u22ea",ntriangleleft:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",nltrie:"\u22ec",ntrianglelefteq:"\u22ec",NotLess:"\u226e",nless:"\u226e",nlt:"\u226e",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226a\u0338",nLtv:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",npre:"\u2aaf\u0338",npreceq:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",nprcue:"\u22e0",NotReverseElement:"\u220c",notni:"\u220c",notniva:"\u220c",NotRightTriangle:"\u22eb",nrtri:"\u22eb",ntriangleright:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",nrtrie:"\u22ed",ntrianglerighteq:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",nsqsube:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",nsqsupe:"\u22e3",NotSubset:"\u2282\u20d2",nsubset:"\u2282\u20d2",vnsub:"\u2282\u20d2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",nsce:"\u2ab0\u0338",nsucceq:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",nsccue:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",nsupset:"\u2283\u20d2",vnsup:"\u2283\u20d2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1d4a9}",Ntilde:"\xd1",Nu:"\u039d",OElig:"\u0152",Oacute:"\xd3",Ocirc:"\xd4",Ocy:"\u041e",Odblac:"\u0150",Ofr:"\u{1d512}",Ograve:"\xd2",Omacr:"\u014c",Omega:"\u03a9",ohm:"\u03a9",Omicron:"\u039f",Oopf:"\u{1d546}",OpenCurlyDoubleQuote:"\u201c",ldquo:"\u201c",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2a54",Oscr:"\u{1d4aa}",Oslash:"\xd8",Otilde:"\xd5",Otimes:"\u2a37",Ouml:"\xd6",OverBar:"\u203e",oline:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",tbrk:"\u23b4",OverParenthesis:"\u23dc",PartialD:"\u2202",part:"\u2202",Pcy:"\u041f",Pfr:"\u{1d513}",Phi:"\u03a6",Pi:"\u03a0",PlusMinus:"\xb1",plusmn:"\xb1",pm:"\xb1",Popf:"\u2119",primes:"\u2119",Pr:"\u2abb",Precedes:"\u227a",pr:"\u227a",prec:"\u227a",PrecedesEqual:"\u2aaf",pre:"\u2aaf",preceq:"\u2aaf",PrecedesSlantEqual:"\u227c",prcue:"\u227c",preccurlyeq:"\u227c",PrecedesTilde:"\u227e",precsim:"\u227e",prsim:"\u227e",Prime:"\u2033",Product:"\u220f",prod:"\u220f",Proportional:"\u221d",prop:"\u221d",propto:"\u221d",varpropto:"\u221d",vprop:"\u221d",Pscr:"\u{1d4ab}",Psi:"\u03a8",QUOT:'"',quot:'"',Qfr:"\u{1d514}",Qopf:"\u211a",rationals:"\u211a",Qscr:"\u{1d4ac}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xae",circledR:"\xae",reg:"\xae",Racute:"\u0154",Rang:"\u27eb",Rarr:"\u21a0",twoheadrightarrow:"\u21a0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211c",Rfr:"\u211c",real:"\u211c",realpart:"\u211c",ReverseElement:"\u220b",SuchThat:"\u220b",ni:"\u220b",niv:"\u220b",ReverseEquilibrium:"\u21cb",leftrightharpoons:"\u21cb",lrhar:"\u21cb",ReverseUpEquilibrium:"\u296f",duhar:"\u296f",Rho:"\u03a1",RightAngleBracket:"\u27e9",rang:"\u27e9",rangle:"\u27e9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21e5",rarrb:"\u21e5",RightArrowLeftArrow:"\u21c4",rightleftarrows:"\u21c4",rlarr:"\u21c4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27e7",robrk:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",dharr:"\u21c2",downharpoonright:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rfloor:"\u230b",RightTee:"\u22a2",vdash:"\u22a2",RightTeeArrow:"\u21a6",map:"\u21a6",mapsto:"\u21a6",RightTeeVector:"\u295b",RightTriangle:"\u22b3",vartriangleright:"\u22b3",vrtri:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",rtrie:"\u22b5",trianglerighteq:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",uharr:"\u21be",upharpoonright:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",rharu:"\u21c0",rightharpoonup:"\u21c0",RightVectorBar:"\u2953",Ropf:"\u211d",reals:"\u211d",RoundImplies:"\u2970",Rrightarrow:"\u21db",rAarr:"\u21db",Rscr:"\u211b",realine:"\u211b",Rsh:"\u21b1",rsh:"\u21b1",RuleDelayed:"\u29f4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042c",Sacute:"\u015a",Sc:"\u2abc",Scaron:"\u0160",Scedil:"\u015e",Scirc:"\u015c",Scy:"\u0421",Sfr:"\u{1d516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03a3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1d54a}",Sqrt:"\u221a",radic:"\u221a",Square:"\u25a1",squ:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228f",sqsub:"\u228f",sqsubset:"\u228f",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1d4ae}",Star:"\u22c6",sstarf:"\u22c6",Sub:"\u22d0",Subset:"\u22d0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227b",sc:"\u227b",succ:"\u227b",SucceedsEqual:"\u2ab0",sce:"\u2ab0",succeq:"\u2ab0",SucceedsSlantEqual:"\u227d",sccue:"\u227d",succcurlyeq:"\u227d",SucceedsTilde:"\u227f",scsim:"\u227f",succsim:"\u227f",Sum:"\u2211",sum:"\u2211",Sup:"\u22d1",Supset:"\u22d1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xde",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040b",TScy:"\u0426",Tab:"\t",Tau:"\u03a4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1d517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223c",sim:"\u223c",thicksim:"\u223c",thksim:"\u223c",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1d54b}",TripleDot:"\u20db",tdot:"\u20db",Tscr:"\u{1d4af}",Tstrok:"\u0166",Uacute:"\xda",Uarr:"\u219f",Uarrocir:"\u2949",Ubrcy:"\u040e",Ubreve:"\u016c",Ucirc:"\xdb",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1d518}",Ugrave:"\xd9",Umacr:"\u016a",UnderBar:"_",lowbar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",bbrk:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",bigcup:"\u22c3",xcup:"\u22c3",UnionPlus:"\u228e",uplus:"\u228e",Uogon:"\u0172",Uopf:"\u{1d54c}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",udarr:"\u21c5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296e",udhar:"\u296e",UpTee:"\u22a5",bot:"\u22a5",bottom:"\u22a5",perp:"\u22a5",UpTeeArrow:"\u21a5",mapstoup:"\u21a5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",Uring:"\u016e",Uscr:"\u{1d4b0}",Utilde:"\u0168",Uuml:"\xdc",VDash:"\u22ab",Vbar:"\u2aeb",Vcy:"\u0412",Vdash:"\u22a9",Vdashl:"\u2ae6",Vee:"\u22c1",bigvee:"\u22c1",xvee:"\u22c1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200a",hairsp:"\u200a",Vfr:"\u{1d519}",Vopf:"\u{1d54d}",Vscr:"\u{1d4b1}",Vvdash:"\u22aa",Wcirc:"\u0174",Wedge:"\u22c0",bigwedge:"\u22c0",xwedge:"\u22c0",Wfr:"\u{1d51a}",Wopf:"\u{1d54e}",Wscr:"\u{1d4b2}",Xfr:"\u{1d51b}",Xi:"\u039e",Xopf:"\u{1d54f}",Xscr:"\u{1d4b3}",YAcy:"\u042f",YIcy:"\u0407",YUcy:"\u042e",Yacute:"\xdd",Ycirc:"\u0176",Ycy:"\u042b",Yfr:"\u{1d51c}",Yopf:"\u{1d550}",Yscr:"\u{1d4b4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017d",Zcy:"\u0417",Zdot:"\u017b",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1d4b5}",aacute:"\xe1",abreve:"\u0103",ac:"\u223e",mstpos:"\u223e",acE:"\u223e\u0333",acd:"\u223f",acirc:"\xe2",acy:"\u0430",aelig:"\xe6",afr:"\u{1d51e}",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03b1",amacr:"\u0101",amalg:"\u2a3f",and:"\u2227",wedge:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",angle:"\u2220",ange:"\u29a4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angzarr:"\u237c",aogon:"\u0105",aopf:"\u{1d552}",apE:"\u2a70",apacir:"\u2a6f",ape:"\u224a",approxeq:"\u224a",apid:"\u224b",apos:"'",aring:"\xe5",ascr:"\u{1d4b6}",ast:"*",midast:"*",atilde:"\xe3",auml:"\xe4",awint:"\u2a11",bNot:"\u2aed",backcong:"\u224c",bcong:"\u224c",backepsilon:"\u03f6",bepsi:"\u03f6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223d",bsim:"\u223d",backsimeq:"\u22cd",bsime:"\u22cd",barvee:"\u22bd",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23b6",bcy:"\u0431",bdquo:"\u201e",ldquor:"\u201e",bemptyv:"\u29b0",beta:"\u03b2",beth:"\u2136",between:"\u226c",twixt:"\u226c",bfr:"\u{1d51f}",bigcirc:"\u25ef",xcirc:"\u25ef",bigodot:"\u2a00",xodot:"\u2a00",bigoplus:"\u2a01",xoplus:"\u2a01",bigotimes:"\u2a02",xotime:"\u2a02",bigsqcup:"\u2a06",xsqcup:"\u2a06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25bd",xdtri:"\u25bd",bigtriangleup:"\u25b3",xutri:"\u25b3",biguplus:"\u2a04",xuplus:"\u2a04",bkarow:"\u290d",rbarr:"\u290d",blacklozenge:"\u29eb",lozf:"\u29eb",blacktriangle:"\u25b4",utrif:"\u25b4",blacktriangledown:"\u25be",dtrif:"\u25be",blacktriangleleft:"\u25c2",ltrif:"\u25c2",blacktriangleright:"\u25b8",rtrif:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bnot:"\u2310",bopf:"\u{1d553}",bowtie:"\u22c8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255d",boxUR:"\u255a",boxUl:"\u255c",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256c",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256b",boxVl:"\u2562",boxVr:"\u255f",boxbox:"\u29c9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250c",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252c",boxhu:"\u2534",boxminus:"\u229f",minusb:"\u229f",boxplus:"\u229e",plusb:"\u229e",boxtimes:"\u22a0",timesb:"\u22a0",boxuL:"\u255b",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256a",boxvL:"\u2561",boxvR:"\u255e",boxvh:"\u253c",boxvl:"\u2524",boxvr:"\u251c",brvbar:"\xa6",bscr:"\u{1d4b7}",bsemi:"\u204f",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2aae",cacute:"\u0107",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",caps:"\u2229\ufe00",caret:"\u2041",ccaps:"\u2a4d",ccaron:"\u010d",ccedil:"\xe7",ccirc:"\u0109",ccups:"\u2a4c",ccupssm:"\u2a50",cdot:"\u010b",cemptyv:"\u29b2",cent:"\xa2",cfr:"\u{1d520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03c7",cir:"\u25cb",cirE:"\u29c3",circ:"\u02c6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21ba",olarr:"\u21ba",circlearrowright:"\u21bb",orarr:"\u21bb",circledS:"\u24c8",oS:"\u24c8",circledast:"\u229b",oast:"\u229b",circledcirc:"\u229a",ocir:"\u229a",circleddash:"\u229d",odash:"\u229d",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2a6d",copf:"\u{1d554}",copysr:"\u2117",crarr:"\u21b5",cross:"\u2717",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",curlyeqprec:"\u22de",cuesc:"\u22df",curlyeqsucc:"\u22df",cularr:"\u21b6",curvearrowleft:"\u21b6",cularrp:"\u293d",cup:"\u222a",cupbrcap:"\u2a48",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curvearrowright:"\u21b7",curarrm:"\u293c",curlyvee:"\u22ce",cuvee:"\u22ce",curlywedge:"\u22cf",cuwed:"\u22cf",curren:"\xa4",cwint:"\u2231",cylcty:"\u232d",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290f",rBarr:"\u290f",dcaron:"\u010f",dcy:"\u0434",ddarr:"\u21ca",downdownarrows:"\u21ca",ddotseq:"\u2a77",eDDot:"\u2a77",deg:"\xb0",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",dfr:"\u{1d521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03dd",gammad:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",djcy:"\u0452",dlcorn:"\u231e",llcorner:"\u231e",dlcrop:"\u230d",dollar:"$",dopf:"\u{1d555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22a1",sdotb:"\u22a1",drcorn:"\u231f",lrcorner:"\u231f",drcrop:"\u230c",dscr:"\u{1d4b9}",dscy:"\u0455",dsol:"\u29f6",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",triangledown:"\u25bf",dwangle:"\u29a6",dzcy:"\u045f",dzigrarr:"\u27ff",eacute:"\xe9",easter:"\u2a6e",ecaron:"\u011b",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xea",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044d",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1d522}",eg:"\u2a9a",egrave:"\xe8",egs:"\u2a96",eqslantgtr:"\u2a96",egsdot:"\u2a98",el:"\u2a99",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",eqslantless:"\u2a95",elsdot:"\u2a97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014b",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",epsilon:"\u03b5",epsiv:"\u03f5",straightepsilon:"\u03f5",varepsilon:"\u03f5",equals:"=",equest:"\u225f",questeq:"\u225f",equivDD:"\u2a78",eqvparsl:"\u29e5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212f",eta:"\u03b7",eth:"\xf0",euml:"\xeb",euro:"\u20ac",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",ffr:"\u{1d523}",filig:"\ufb01",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",fopf:"\u{1d557}",fork:"\u22d4",pitchfork:"\u22d4",forkv:"\u2ad9",fpartint:"\u2a0d",frac12:"\xbd",half:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1d4bb}",gEl:"\u2a8c",gtreqqless:"\u2a8c",gacute:"\u01f5",gamma:"\u03b3",gap:"\u2a86",gtrapprox:"\u2a86",gbreve:"\u011f",gcirc:"\u011d",gcy:"\u0433",gdot:"\u0121",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",gfr:"\u{1d524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2a92",gla:"\u2aa5",glj:"\u2aa4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gneq:"\u2a88",gnsim:"\u22e7",gopf:"\u{1d558}",gscr:"\u210a",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtrdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrarr:"\u2978",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",hardcy:"\u044a",harrcir:"\u2948",harrw:"\u21ad",leftrightsquigarrow:"\u21ad",hbar:"\u210f",hslash:"\u210f",planck:"\u210f",plankv:"\u210f",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22b9",hfr:"\u{1d525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",larrhk:"\u21a9",hookrightarrow:"\u21aa",rarrhk:"\u21aa",hopf:"\u{1d559}",horbar:"\u2015",hscr:"\u{1d4bd}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xed",icirc:"\xee",icy:"\u0438",iecy:"\u0435",iexcl:"\xa1",ifr:"\u{1d526}",igrave:"\xec",iiiint:"\u2a0c",qint:"\u2a0c",iiint:"\u222d",tint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012b",imath:"\u0131",inodot:"\u0131",imof:"\u22b7",imped:"\u01b5",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",intcal:"\u22ba",intercal:"\u22ba",intlarhk:"\u2a17",intprod:"\u2a3c",iprod:"\u2a3c",iocy:"\u0451",iogon:"\u012f",iopf:"\u{1d55a}",iota:"\u03b9",iquest:"\xbf",iscr:"\u{1d4be}",isinE:"\u22f9",isindot:"\u22f5",isins:"\u22f4",isinsv:"\u22f3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xef",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1d527}",jmath:"\u0237",jopf:"\u{1d55b}",jscr:"\u{1d4bf}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03ba",kappav:"\u03f0",varkappa:"\u03f0",kcedil:"\u0137",kcy:"\u043a",kfr:"\u{1d528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045c",kopf:"\u{1d55c}",kscr:"\u{1d4c0}",lAtail:"\u291b",lBarr:"\u290e",lEg:"\u2a8b",lesseqqgtr:"\u2a8b",lHar:"\u2962",lacute:"\u013a",laemptyv:"\u29b4",lambda:"\u03bb",langd:"\u2991",lap:"\u2a85",lessapprox:"\u2a85",laquo:"\xab",larrbfs:"\u291f",larrfs:"\u291d",larrlp:"\u21ab",looparrowleft:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",leftarrowtail:"\u21a2",lat:"\u2aab",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",lcaron:"\u013e",lcedil:"\u013c",lcy:"\u043b",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21c7",llarr:"\u21c7",leftthreetimes:"\u22cb",lthree:"\u22cb",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessdot:"\u22d6",ltdot:"\u22d6",lfisht:"\u297c",lfr:"\u{1d529}",lgE:"\u2a91",lharul:"\u296a",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296b",lltri:"\u25fa",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lneq:"\u2a87",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",longmapsto:"\u27fc",xmap:"\u27fc",looparrowright:"\u21ac",rarrlp:"\u21ac",lopar:"\u2985",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",loz:"\u25ca",lozenge:"\u25ca",lpar:"(",lparlt:"\u2993",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\u{1d4c1}",lsime:"\u2a8d",lsimg:"\u2a8f",lsquor:"\u201a",sbquo:"\u201a",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltrPar:"\u2996",ltri:"\u25c3",triangleleft:"\u25c3",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",mDDot:"\u223a",macr:"\xaf",strns:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25ae",mcomma:"\u2a29",mcy:"\u043c",mdash:"\u2014",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",midcir:"\u2af0",minus:"\u2212",minusdu:"\u2a2a",mlcp:"\u2adb",models:"\u22a7",mopf:"\u{1d55e}",mscr:"\u{1d4c2}",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nGg:"\u22d9\u0338",nGt:"\u226b\u20d2",nLeftarrow:"\u21cd",nlArr:"\u21cd",nLeftrightarrow:"\u21ce",nhArr:"\u21ce",nLl:"\u22d8\u0338",nLt:"\u226a\u20d2",nRightarrow:"\u21cf",nrArr:"\u21cf",nVDash:"\u22af",nVdash:"\u22ae",nacute:"\u0144",nang:"\u2220\u20d2",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",natur:"\u266e",natural:"\u266e",ncap:"\u2a43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",ncy:"\u043d",ndash:"\u2013",neArr:"\u21d7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1d52b}",nharr:"\u21ae",nleftrightarrow:"\u21ae",nhpar:"\u2af2",nis:"\u22fc",nisd:"\u22fa",njcy:"\u045a",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219a",nleftarrow:"\u219a",nldr:"\u2025",nopf:"\u{1d55f}",not:"\xac",notinE:"\u22f9\u0338",notindot:"\u22f5\u0338",notinvb:"\u22f7",notinvc:"\u22f6",notnivb:"\u22fe",notnivc:"\u22fd",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",nrarr:"\u219b",nrightarrow:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nscr:"\u{1d4c3}",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsubseteqq:"\u2ac5\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupseteqq:"\u2ac6\u0338",ntilde:"\xf1",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22ad",nvHarr:"\u2904",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwArr:"\u21d6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xf3",ocirc:"\xf4",ocy:"\u043e",odblac:"\u0151",odiv:"\u2a38",odsold:"\u29bc",oelig:"\u0153",ofcir:"\u29bf",ofr:"\u{1d52c}",ogon:"\u02db",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",olcir:"\u29be",olcross:"\u29bb",olt:"\u29c0",omacr:"\u014d",omega:"\u03c9",omicron:"\u03bf",omid:"\u29b6",oopf:"\u{1d560}",opar:"\u29b7",operp:"\u29b9",or:"\u2228",vee:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oslash:"\xf8",osol:"\u2298",otilde:"\xf5",otimesas:"\u2a36",ouml:"\xf6",ovbar:"\u233d",para:"\xb6",parsim:"\u2af3",parsl:"\u2afd",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1d52d}",phi:"\u03c6",phiv:"\u03d5",straightphi:"\u03d5",varphi:"\u03d5",phone:"\u260e",pi:"\u03c0",piv:"\u03d6",varpi:"\u03d6",planckh:"\u210e",plus:"+",plusacir:"\u2a23",pluscir:"\u2a22",plusdu:"\u2a25",pluse:"\u2a72",plussim:"\u2a26",plustwo:"\u2a27",pointint:"\u2a15",popf:"\u{1d561}",pound:"\xa3",prE:"\u2ab3",prap:"\u2ab7",precapprox:"\u2ab7",precnapprox:"\u2ab9",prnap:"\u2ab9",precneqq:"\u2ab5",prnE:"\u2ab5",precnsim:"\u22e8",prnsim:"\u22e8",prime:"\u2032",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prurel:"\u22b0",pscr:"\u{1d4c5}",psi:"\u03c8",puncsp:"\u2008",qfr:"\u{1d52e}",qopf:"\u{1d562}",qprime:"\u2057",qscr:"\u{1d4c6}",quatint:"\u2a16",quest:"?",rAtail:"\u291c",rHar:"\u2964",race:"\u223d\u0331",racute:"\u0155",raemptyv:"\u29b3",rangd:"\u2992",range:"\u29a5",raquo:"\xbb",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21a3",rightarrowtail:"\u21a3",rarrw:"\u219d",rightsquigarrow:"\u219d",ratail:"\u291a",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21b3",rect:"\u25ad",rfisht:"\u297d",rfr:"\u{1d52f}",rharul:"\u296c",rho:"\u03c1",rhov:"\u03f1",varrho:"\u03f1",rightrightarrows:"\u21c9",rrarr:"\u21c9",rightthreetimes:"\u22cc",rthree:"\u22cc",ring:"\u02da",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",ropar:"\u2986",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rsaquo:"\u203a",rscr:"\u{1d4c7}",rtimes:"\u22ca",rtri:"\u25b9",triangleright:"\u25b9",rtriltri:"\u29ce",ruluhar:"\u2968",rx:"\u211e",sacute:"\u015b",scE:"\u2ab4",scap:"\u2ab8",succapprox:"\u2ab8",scaron:"\u0161",scedil:"\u015f",scirc:"\u015d",scnE:"\u2ab6",succneqq:"\u2ab6",scnap:"\u2aba",succnapprox:"\u2aba",scnsim:"\u22e9",succnsim:"\u22e9",scpolint:"\u2a13",scy:"\u0441",sdot:"\u22c5",sdote:"\u2a66",seArr:"\u21d8",sect:"\xa7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1d530}",sharp:"\u266f",shchcy:"\u0449",shcy:"\u0448",shy:"\xad",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",varsigma:"\u03c2",simdot:"\u2a6a",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",smashp:"\u2a33",smeparsl:"\u29e4",smile:"\u2323",ssmile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\ufe00",sqcups:"\u2294\ufe00",sscr:"\u{1d4c8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2ac5",subseteqq:"\u2ac5",subdot:"\u2abd",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subsetneqq:"\u2acb",subne:"\u228a",subsetneq:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",sung:"\u266a",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supE:"\u2ac6",supseteqq:"\u2ac6",supdot:"\u2abe",supdsub:"\u2ad8",supedot:"\u2ac4",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supsetneqq:"\u2acc",supne:"\u228b",supsetneq:"\u228b",supplus:"\u2ac0",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swArr:"\u21d9",swnwar:"\u292a",szlig:"\xdf",target:"\u2316",tau:"\u03c4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1d531}",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",vartheta:"\u03d1",thorn:"\xfe",times:"\xd7",timesbar:"\u2a31",timesd:"\u2a30",topbot:"\u2336",topcir:"\u2af1",topf:"\u{1d565}",topfork:"\u2ada",tprime:"\u2034",triangle:"\u25b5",utri:"\u25b5",triangleq:"\u225c",trie:"\u225c",tridot:"\u25ec",triminus:"\u2a3a",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",tscr:"\u{1d4c9}",tscy:"\u0446",tshcy:"\u045b",tstrok:"\u0167",uHar:"\u2963",uacute:"\xfa",ubrcy:"\u045e",ubreve:"\u016d",ucirc:"\xfb",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297e",ufr:"\u{1d532}",ugrave:"\xf9",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",umacr:"\u016b",uogon:"\u0173",uopf:"\u{1d566}",upsi:"\u03c5",upsilon:"\u03c5",upuparrows:"\u21c8",uuarr:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",uring:"\u016f",urtri:"\u25f9",uscr:"\u{1d4ca}",utdot:"\u22f0",utilde:"\u0169",uuml:"\xfc",uwangle:"\u29a7",vBar:"\u2ae8",vBarv:"\u2ae9",vangrt:"\u299c",varsubsetneq:"\u228a\ufe00",vsubne:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",vsubnE:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",vsupne:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vsupnE:"\u2acc\ufe00",vcy:"\u0432",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",vfr:"\u{1d533}",vopf:"\u{1d567}",vscr:"\u{1d4cb}",vzigzag:"\u299a",wcirc:"\u0175",wedbar:"\u2a5f",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1d534}",wopf:"\u{1d568}",wscr:"\u{1d4cc}",xfr:"\u{1d535}",xi:"\u03be",xnis:"\u22fb",xopf:"\u{1d569}",xscr:"\u{1d4cd}",yacute:"\xfd",yacy:"\u044f",ycirc:"\u0177",ycy:"\u044b",yen:"\xa5",yfr:"\u{1d536}",yicy:"\u0457",yopf:"\u{1d56a}",yscr:"\u{1d4ce}",yucy:"\u044e",yuml:"\xff",zacute:"\u017a",zcaron:"\u017e",zcy:"\u0437",zdot:"\u017c",zeta:"\u03b6",zfr:"\u{1d537}",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\u{1d56b}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"},$7="\ue500";zA.ngsp=$7;class tF extends oh{constructor(e,t,i){super(i,e),this.tokenType=t}}class mTe{constructor(e,t,i){this.tokens=e,this.errors=t,this.nonNormalizedIcuExpressions=i}}const _Te=/\r\n?/g;function VC(n){return`Unexpected character "${n===cd?"EOF":String.fromCharCode(n)}"`}function V7(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}var nF=function(n){return n.HEX="hexadecimal",n.DEC="decimal",n}(nF||{});class iF{constructor(e){this.error=e}}class yTe{constructor(e,t,i){this._getTagDefinition=t,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=i.tokenizeExpansionForms||!1,this._interpolationConfig=i.interpolationConfig||Ef,this._leadingTriviaCodePoints=i.leadingTriviaChars&&i.leadingTriviaChars.map(o=>o.codePointAt(0)||0);const r=i.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=i.escapedString?new VA(e,r):new UC(e,r),this._preserveLineEndings=i.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=i.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=i.tokenizeBlocks||!1;try{this._cursor.init()}catch(o){this.handleError(o)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(_Te,"\n")}tokenize(){for(;this._cursor.peek()!==cd;){const e=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(e):this._attemptCharCode(45)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(47)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeBlocks&&this._attemptStr("{#")?this._consumeBlockGroupOpen(e):this._tokenizeBlocks&&this._attemptStr("{/")?this._consumeBlockGroupClose(e):this._tokenizeBlocks&&this._attemptStr("{:")?this._consumeBlock(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(t){this.handleError(t)}}this._beginToken(24),this._endToken([])}_consumeBlockGroupOpen(e){this._beginToken(25,e);const t=this._cursor.clone();this._attemptCharCodeUntilFn(i=>!$A(i)),this._endToken([this._cursor.getChars(t)]),this._consumeBlockParameters(),this._beginToken(26),this._requireCharCode(ju),this._endToken([])}_consumeBlockGroupClose(e){this._beginToken(27,e);const t=this._cursor.clone();this._attemptCharCodeUntilFn(r=>!$A(r));const i=this._cursor.getChars(t);this._requireCharCode(ju),this._endToken([i])}_consumeBlock(e){this._beginToken(29,e);const t=this._cursor.clone();this._attemptCharCodeUntilFn(i=>!$A(i)),this._endToken([this._cursor.getChars(t)]),this._consumeBlockParameters(),this._beginToken(30),this._requireCharCode(ju),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(G7);this._cursor.peek()!==ju&&this._cursor.peek()!==cd;){this._beginToken(28);const e=this._cursor.clone();let t=null,i=0;for(;59!==this._cursor.peek()&&this._cursor.peek()!==cd||null!==t;){const r=this._cursor.peek();if(92===r)this._cursor.advance();else if(r===t)t=null;else if(null===t&&uA(r))t=r;else if(r===lp&&null===t)i++;else if(r===ju&&null===t){if(0===i)break;i>0&&i--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(G7)}}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(function ETe(n){return n!==ju}(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===ju){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,t=this._cursor.clone()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t){if(null===this._currentTokenStart)throw new tF("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(t));if(null===this._currentTokenType)throw new tF("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));const i={type:this._currentTokenType,parts:e,sourceSpan:(t??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(i),this._currentTokenStart=null,this._currentTokenType=null,i}_createError(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');const i=new tF(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new iF(i)}handleError(e){if(e instanceof rF&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),!(e instanceof iF))throw e;this.errors.push(e.error)}_attemptCharCode(e){return this._cursor.peek()===e&&(this._cursor.advance(),!0)}_attemptCharCodeCaseInsensitive(e){return!!function CTe(n,e){return j7(n)===j7(e)}(this._cursor.peek(),e)&&(this._cursor.advance(),!0)}_requireCharCode(e){const t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(VC(this._cursor.peek()),this._cursor.getSpan(t))}_attemptStr(e){const t=e.length;if(this._cursor.charsLeft()<t)return!1;const i=this._cursor.clone();for(let r=0;r<t;r++)if(!this._attemptCharCode(e.charCodeAt(r)))return this._cursor=i,!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){const t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(VC(this._cursor.peek()),this._cursor.getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,t){const i=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(i)<t)throw this._createError(VC(this._cursor.peek()),this._cursor.getSpan(i))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){const e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_consumeEntity(e){this._beginToken(9);const t=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(35)){const i=this._attemptCharCode(120)||this._attemptCharCode(88),r=this._cursor.clone();if(this._attemptCharCodeUntilFn(xTe),59!=this._cursor.peek())throw this._cursor.advance(),this._createError(function vTe(n,e){return`Unable to parse entity "${e}" - ${n} character reference entities must end with ";"`}(i?nF.HEX:nF.DEC,this._cursor.getChars(t)),this._cursor.getSpan());const o=this._cursor.getChars(r);this._cursor.advance();try{const a=parseInt(o,i?16:10);this._endToken([String.fromCharCode(a),this._cursor.getChars(t)])}catch{throw this._createError(V7(this._cursor.getChars(t)),this._cursor.getSpan())}}else{const i=this._cursor.clone();if(this._attemptCharCodeUntilFn(wTe),59!=this._cursor.peek())this._beginToken(e,t),this._cursor=i,this._endToken(["&"]);else{const r=this._cursor.getChars(i);this._cursor.advance();const o=zA[r];if(!o)throw this._createError(V7(r),this._cursor.getSpan(t));this._endToken([o,`&${r};`])}}}_consumeRawText(e,t){this._beginToken(e?6:7);const i=[];for(;;){const r=this._cursor.clone(),o=t();if(this._cursor=r,o)break;e&&38===this._cursor.peek()?(this._endToken([this._processCarriageReturns(i.join(""))]),i.length=0,this._consumeEntity(6),this._beginToken(6)):i.push(this._readChar())}this._endToken([this._processCarriageReturns(i.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("--\x3e")),this._beginToken(11),this._requireStr("--\x3e"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);const t=this._cursor.clone();this._attemptUntilChar(62);const i=this._cursor.getChars(t);this._cursor.advance(),this._endToken([i])}_consumePrefixAndName(){const e=this._cursor.clone();let t="";for(;58!==this._cursor.peek()&&!(((n=this._cursor.peek())<xy||gC<n)&&(n<ox||sA<n)&&(n<vN||n>Nq));)this._cursor.advance();var n;let i;return 58===this._cursor.peek()?(t=this._cursor.getChars(e),this._cursor.advance(),i=this._cursor.clone()):i=e,this._requireCharCodeUntilFn(U7,""===t?0:1),[t,this._cursor.getChars(i)]}_consumeTagOpen(e){let t,i,r;try{if(!cA(this._cursor.peek()))throw this._createError(VC(this._cursor.peek()),this._cursor.getSpan(e));for(r=this._consumeTagOpenStart(e),i=r.parts[0],t=r.parts[1],this._attemptCharCodeUntilFn(uh);47!==this._cursor.peek()&&62!==this._cursor.peek()&&60!==this._cursor.peek()&&this._cursor.peek()!==cd;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(uh),this._attemptCharCode(61)&&(this._attemptCharCodeUntilFn(uh),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(uh);this._consumeTagOpenEnd()}catch(a){if(a instanceof iF)return void(r?r.type=4:(this._beginToken(5,e),this._endToken(["<"])));throw a}const o=this._getTagDefinition(t).getContentType(i);o===am.RAW_TEXT?this._consumeRawTextWithTagClose(i,t,!1):o===am.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(i,t,!0)}_consumeRawTextWithTagClose(e,t,i){this._consumeRawText(i,()=>!!(this._attemptCharCode(60)&&this._attemptCharCode(47)&&(this._attemptCharCodeUntilFn(uh),this._attemptStrCaseInsensitive(t)))&&(this._attemptCharCodeUntilFn(uh),this._attemptCharCode(62))),this._beginToken(3),this._requireCharCodeUntilFn(r=>62===r,3),this._cursor.advance(),this._endToken([e,t])}_consumeTagOpenStart(e){this._beginToken(0,e);const t=this._consumePrefixAndName();return this._endToken(t)}_consumeAttributeName(){const e=this._cursor.peek();if(39===e||34===e)throw this._createError(VC(e),this._cursor.getSpan());this._beginToken(14);const t=this._consumePrefixAndName();this._endToken(t)}_consumeAttributeValue(){if(39===this._cursor.peek()||34===this._cursor.peek()){const e=this._cursor.peek();this._consumeQuote(e);const t=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,t,t),this._consumeQuote(e)}else{const e=()=>U7(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){const e=this._attemptCharCode(47)?2:1;this._beginToken(e),this._requireCharCode(62),this._endToken([])}_consumeTagClose(e){this._beginToken(3,e),this._attemptCharCodeUntilFn(uh);const t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(uh),this._requireCharCode(62),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(lp),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);const e=this._readUntil(44),t=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{const r=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(r)}this._requireCharCode(44),this._attemptCharCodeUntilFn(uh),this._beginToken(7);const i=this._readUntil(44);this._endToken([i]),this._requireCharCode(44),this._attemptCharCodeUntilFn(uh)}_consumeExpansionCaseStart(){this._beginToken(20);const e=this._readUntil(lp).trim();this._endToken([e]),this._attemptCharCodeUntilFn(uh),this._beginToken(21),this._requireCharCode(lp),this._endToken([]),this._attemptCharCodeUntilFn(uh),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(ju),this._endToken([]),this._attemptCharCodeUntilFn(uh),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(ju),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,t,i,r){this._beginToken(e);const o=[];for(;!i();){const a=this._cursor.clone();this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(this._endToken([this._processCarriageReturns(o.join(""))],a),o.length=0,this._consumeInterpolation(t,a,r),this._beginToken(e)):38===this._cursor.peek()?(this._endToken([this._processCarriageReturns(o.join(""))]),o.length=0,this._consumeEntity(e),this._beginToken(e)):o.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(o.join(""))])}_consumeInterpolation(e,t,i){const r=[];this._beginToken(e,t),r.push(this._interpolationConfig.start);const o=this._cursor.clone();let a=null,h=!1;for(;this._cursor.peek()!==cd&&(null===i||!i());){const m=this._cursor.clone();if(this._isTagStart())return this._cursor=m,r.push(this._getProcessedChars(o,m)),void this._endToken(r);if(null===a){if(this._attemptStr(this._interpolationConfig.end))return r.push(this._getProcessedChars(o,m)),r.push(this._interpolationConfig.end),void this._endToken(r);this._attemptStr("//")&&(h=!0)}const _=this._cursor.peek();this._cursor.advance(),92===_?this._cursor.advance():_===a?a=null:!h&&null===a&&uA(_)&&(a=_)}r.push(this._getProcessedChars(o,this._cursor)),this._endToken(r)}_getProcessedChars(e,t){return this._processCarriageReturns(t.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._isBlockStart()||this._cursor.peek()===cd||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===ju&&this._isInExpansionCase()))}_isTagStart(){if(60===this._cursor.peek()){const e=this._cursor.clone();e.advance();const t=e.peek();if(xy<=t&&t<=gC||ox<=t&&t<=sA||47===t||33===t)return!0}return!1}_isBlockStart(){if(this._tokenizeBlocks&&this._cursor.peek()===lp){const e=this._cursor.clone();e.advance();const t=e.peek();if(33!==t&&47!==t&&58!==t)return!1;if(e.advance(),$A(e.peek()))return!0}return!1}_readUntil(e){const t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}_isInExpansionCase(){return this._expansionCaseStack.length>0&&21===this._expansionCaseStack[this._expansionCaseStack.length-1]}_isInExpansionForm(){return this._expansionCaseStack.length>0&&19===this._expansionCaseStack[this._expansionCaseStack.length-1]}isExpansionFormStart(){if(this._cursor.peek()!==lp)return!1;if(this._interpolationConfig){const e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}}function uh(n){return!bN(n)||n===cd}function U7(n){return bN(n)||62===n||60===n||47===n||39===n||34===n||61===n||n===cd}function xTe(n){return 59===n||n===cd||!function Jwe(n){return n>=xy&&n<=102||n>=ox&&n<=70||dg(n)}(n)}function wTe(n){return 59===n||n===cd||!cA(n)}function j7(n){return n>=xy&&n<=gC?n-xy+ox:n}function $A(n){return cA(n)||dg(n)||95===n}function G7(n){return 59!==n&&uh(n)}class UC{constructor(e,t){if(e instanceof UC){this.file=e.file,this.input=e.input,this.end=e.end;const i=e.state;this.state={peek:i.peek,offset:i.offset,line:i.line,column:i.column}}else{if(!t)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=t.endPos,this.state={peek:-1,offset:t.startPos,line:t.startLine,column:t.startCol}}}clone(){return new UC(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,t){let i=e=e||this;if(t)for(;this.diff(e)>0&&-1!==t.indexOf(e.peek());)i===e&&(e=e.clone()),e.advance();const r=this.locationFromCursor(e),o=this.locationFromCursor(this),a=i!==e?this.locationFromCursor(i):r;return new vl(r,o,a)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new rF('Unexpected character "EOF"',this);const t=this.charAt(e.offset);10===t?(e.line++,e.column=0):Hq(t)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?cd:this.charAt(e.offset)}locationFromCursor(e){return new wy(e.file,e.state.offset,e.state.line,e.state.column)}}class VA extends UC{constructor(e,t){e instanceof VA?(super(e),this.internalState={...e.internalState}):(super(e,t),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new VA(this)}getChars(e){const t=e.clone();let i="";for(;t.internalState.offset<this.internalState.offset;)i+=String.fromCodePoint(t.peek()),t.advance();return i}processEscapeSequence(){const e=()=>this.internalState.peek;if(92===e())if(this.internalState={...this.state},this.advanceState(this.internalState),110===e())this.state.peek=10;else if(114===e())this.state.peek=13;else if(118===e())this.state.peek=11;else if(116===e())this.state.peek=gN;else if(98===e())this.state.peek=8;else if(102===e())this.state.peek=12;else if(117===e())if(this.advanceState(this.internalState),e()===lp){this.advanceState(this.internalState);const t=this.clone();let i=0;for(;e()!==ju;)this.advanceState(this.internalState),i++;this.state.peek=this.decodeHexDigits(t,i)}else{const t=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,4)}else if(120===e()){this.advanceState(this.internalState);const t=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,2)}else if(qq(e())){let t="",i=0,r=this.clone();for(;qq(e())&&i<3;)r=this.clone(),t+=String.fromCodePoint(e()),this.advanceState(this.internalState),i++;this.state.peek=parseInt(t,8),this.internalState=r.internalState}else Hq(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,t){const i=this.input.slice(e.internalState.offset,e.internalState.offset+t),r=parseInt(i,16);if(isNaN(r))throw e.state=e.internalState,new rF("Invalid hexadecimal escape sequence",e);return r}}class rF{constructor(e,t){this.msg=e,this.cursor=t}}class Nd extends oh{static create(e,t,i){return new Nd(e,t,i)}constructor(e,t,i){super(t,i),this.elementName=e}}class jC{constructor(e,t){this.rootNodes=e,this.errors=t}}class ITe{constructor(e){this.getTagDefinition=e}parse(e,t,i){const r=function gTe(n,e,t,i={}){const r=new yTe(new xN(n,e),t,i);return r.tokenize(),new mTe(function STe(n){const e=[];let t;for(let i=0;i<n.length;i++){const r=n[i];t&&5===t.type&&5===r.type||t&&16===t.type&&16===r.type?(t.parts[0]+=r.parts[0],t.sourceSpan.end=r.sourceSpan.end):(t=r,e.push(t))}return e}(r.tokens),r.errors,r.nonNormalizedIcuExpressions)}(e,t,this.getTagDefinition,i),o=new oF(r.tokens,this.getTagDefinition);return o.build(),new jC(o.rootNodes,r.errors.concat(o.errors))}}class oF{constructor(e,t){this.tokens=e,this.getTagDefinition=t,this._index=-1,this._containerStack=[],this.rootNodes=[],this.errors=[],this._advance()}build(){for(;24!==this._peek.type;)0===this._peek.type||4===this._peek.type?this._consumeStartTag(this._advance()):3===this._peek.type?this._consumeEndTag(this._advance()):12===this._peek.type?(this._closeVoidElement(),this._consumeCdata(this._advance())):10===this._peek.type?(this._closeVoidElement(),this._consumeComment(this._advance())):5===this._peek.type||7===this._peek.type||6===this._peek.type?(this._closeVoidElement(),this._consumeText(this._advance())):19===this._peek.type?this._consumeExpansion(this._advance()):25===this._peek.type?(this._closeVoidElement(),this._consumeBlockGroupOpen(this._advance())):29===this._peek.type?(this._closeVoidElement(),this._consumeBlock(this._advance(),30)):27===this._peek.type?(this._closeVoidElement(),this._consumeBlockGroupClose(this._advance())):this._advance()}_advance(){const e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){const t=this._advanceIf(7),i=this._advanceIf(11),r=null!=t?t.parts[0].trim():null,o=null==i?e.sourceSpan:new vl(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new $C(r,o))}_consumeExpansion(e){const t=this._advance(),i=this._advance(),r=[];for(;20===this._peek.type;){const a=this._parseExpansionCase();if(!a)return;r.push(a)}if(23!==this._peek.type)return void this.errors.push(Nd.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));const o=new vl(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new zC(t.parts[0],i.parts[0],r,o,t.sourceSpan)),this._advance()}_parseExpansionCase(){const e=this._advance();if(21!==this._peek.type)return this.errors.push(Nd.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;const t=this._advance(),i=this._collectExpansionExpTokens(t);if(!i)return null;const r=this._advance();i.push({type:24,parts:[],sourceSpan:r.sourceSpan});const o=new oF(i,this.getTagDefinition);if(o.build(),o.errors.length>0)return this.errors=this.errors.concat(o.errors),null;const a=new vl(e.sourceSpan.start,r.sourceSpan.end,e.sourceSpan.fullStart),h=new vl(t.sourceSpan.start,r.sourceSpan.end,t.sourceSpan.fullStart);return new N7(e.parts[0],o.rootNodes,a,e.sourceSpan,h)}_collectExpansionExpTokens(e){const t=[],i=[21];for(;;){if((19===this._peek.type||21===this._peek.type)&&i.push(this._peek.type),22===this._peek.type){if(!H7(i,21))return this.errors.push(Nd.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(i.pop(),0===i.length)return t}if(23===this._peek.type){if(!H7(i,19))return this.errors.push(Nd.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;i.pop()}if(24===this._peek.type)return this.errors.push(Nd.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){const t=[e],i=e.sourceSpan;let r=e.parts[0];if(r.length>0&&"\n"===r[0]){const o=this._getContainer();if(o instanceof R_)return this.errors.push(Nd.create(null,i,"Text cannot be placed directly inside of a block group.")),null;null!=o&&0===o.children.length&&this.getTagDefinition(o.name).ignoreFirstLf&&(r=r.substring(1),t[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[r]})}for(;8===this._peek.type||5===this._peek.type||9===this._peek.type;)e=this._advance(),t.push(e),r+=8===e.type?e.parts.join("").replace(/&([^;]+);/g,q7):9===e.type?e.parts[0]:e.parts.join("");r.length>0&&this._addToParent(new BC(r,new vl(i.start,e.sourceSpan.end,i.fullStart,i.details),t))}_closeVoidElement(){const e=this._getContainer();e instanceof jh&&this.getTagDefinition(e.name).isVoid&&this._containerStack.pop()}_consumeStartTag(e){const[t,i]=e.parts,r=[];for(;14===this._peek.type;)r.push(this._consumeAttr(this._advance()));const o=this._getElementFullName(t,i,this._getClosestParentElement());let a=!1;if(2===this._peek.type){this._advance(),a=!0;const P=this.getTagDefinition(o);P.canSelfClose||null!==FN(o)||P.isVoid||this.errors.push(Nd.create(o,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))}else 1===this._peek.type&&(this._advance(),a=!1);const h=this._peek.sourceSpan.fullStart,m=new vl(e.sourceSpan.start,h,e.sourceSpan.fullStart),_=new vl(e.sourceSpan.start,h,e.sourceSpan.fullStart),C=new jh(o,r,[],m,_,void 0),T=this._getContainer();this._pushContainer(C,T instanceof jh&&this.getTagDefinition(T.name).isClosedByChild(C.name)),a?this._popContainer(o,jh,m):4===e.type&&(this._popContainer(o,jh,null),this.errors.push(Nd.create(o,m,`Opening tag "${o}" not terminated.`)))}_pushContainer(e,t){t&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeEndTag(e){const t=this._getElementFullName(e.parts[0],e.parts[1],this._getClosestParentElement());this.getTagDefinition(t).isVoid?this.errors.push(Nd.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`)):this._popContainer(t,jh,e.sourceSpan)||this.errors.push(Nd.create(t,e.sourceSpan,`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`))}_popContainer(e,t,i){let r=!1;for(let o=this._containerStack.length-1;o>=0;o--){const a=this._containerStack[o];if((a instanceof R_?a.blocks[0]?.name:a.name)===e&&a instanceof t)return a.endSourceSpan=i,a.sourceSpan.end=null!==i?i.end:a.sourceSpan.end,this._containerStack.splice(o,this._containerStack.length-o),!r;(a instanceof R_||a instanceof jh&&!this.getTagDefinition(a.name).closedByParent)&&(r=!0)}return!1}_consumeAttr(e){const t=BN(e.parts[0],e.parts[1]);let i=e.sourceSpan.end;15===this._peek.type&&this._advance();let r="";const o=[];let a,h;if(16===this._peek.type)for(a=this._peek.sourceSpan,h=this._peek.sourceSpan.end;16===this._peek.type||17===this._peek.type||9===this._peek.type;){const C=this._advance();o.push(C),r+=17===C.type?C.parts.join("").replace(/&([^;]+);/g,q7):9===C.type?C.parts[0]:C.parts.join(""),h=i=C.sourceSpan.end}15===this._peek.type&&(i=this._advance().sourceSpan.end);const _=a&&h&&new vl(a.start,h,a.fullStart);return new FA(t,r,new vl(e.sourceSpan.start,i,e.sourceSpan.fullStart),e.sourceSpan,_,o.length>0?o:void 0,void 0)}_consumeBlockGroupOpen(e){const t=this._peek.sourceSpan.fullStart,i=new vl(e.sourceSpan.start,t,e.sourceSpan.fullStart),r=new vl(e.sourceSpan.start,t,e.sourceSpan.fullStart),o=new R_([],i,r,null);this._pushContainer(o,!1);const a=this._consumeBlock(e,26);r.end=a.startSourceSpan.end}_consumeBlock(e,t){this._conditionallyClosePreviousBlock();const i=[];for(;28===this._peek.type;){const _=this._advance();i.push(new sTe(_.parts[0],_.sourceSpan))}this._peek.type===t&&this._advance();const r=this._peek.sourceSpan.fullStart,o=new vl(e.sourceSpan.start,r,e.sourceSpan.fullStart),a=new vl(e.sourceSpan.start,r,e.sourceSpan.fullStart),h=new BA(e.parts[0],i,[],o,a),m=this._getContainer();return m instanceof R_?(m.blocks.push(h),this._containerStack.push(h)):this.errors.push(Nd.create(h.name,h.sourceSpan,"Blocks can only be placed inside of block groups.")),h}_consumeBlockGroupClose(e){const t=e.parts[0],i=this._getContainer();this._conditionallyClosePreviousBlock(),this._popContainer(t,R_,e.sourceSpan)||this.errors.push(Nd.create(t,e.sourceSpan,`Unexpected closing block "${t}". ${i instanceof jh?`There is an unclosed "${i.name}" HTML tag named that may have to be closed first.`:"The block may have been closed earlier."}`))}_conditionallyClosePreviousBlock(){const e=this._getContainer();if(e instanceof BA){const t=e.children.length?e.children[e.children.length-1]:null,i=null===t?null:new vl(t.sourceSpan.end,t.sourceSpan.end);this._popContainer(e.name,BA,i)}}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestParentElement(){for(let e=this._containerStack.length-1;e>-1;e--)if(this._containerStack[e]instanceof jh)return this._containerStack[e];return null}_addToParent(e){const t=this._getContainer();null===t?this.rootNodes.push(e):t instanceof R_?this.errors.push(Nd.create(null,e.sourceSpan,"Block groups can only contain blocks.")):t.children.push(e)}_getElementFullName(e,t,i){if(""===e&&""===(e=this.getTagDefinition(t).implicitNamespacePrefix||"")&&null!=i){const r=ah(i.name)[1];this.getTagDefinition(r).preventNamespaceInheritance||(e=FN(i.name))}return BN(e,t)}}function H7(n,e){return n.length>0&&n[n.length-1]===e}function q7(n,e){return void 0!==zA[e]?zA[e]||n:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):n}class W7 extends ITe{constructor(){super(z7)}parse(e,t,i){return super.parse(e,t,i)}}const X7="ngPreserveWhitespaces",TTe=new Set(["pre","template","textarea","script","style"]),Y7=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",DTe=new RegExp(`[^${Y7}]`),ATe=new RegExp(`[${Y7}]{2,}`,"g");function Z7(n){return n.replace(new RegExp($7,"g")," ")}class K7{visitElement(e,t){return TTe.has(e.name)||function MTe(n){return n.some(e=>e.name===X7)}(e.attrs)?new jh(e.name,Jr(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new jh(e.name,e.attrs,sF(this,e.children),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}visitAttribute(e,t){return e.name!==X7?e:null}visitText(e,t){if(e.value.match(DTe)||t&&(t.prev instanceof zC||t.next instanceof zC)){const o=e.tokens.map(h=>5===h.type?function kTe({type:n,parts:e,sourceSpan:t}){return{type:n,parts:[Q7(e[0])],sourceSpan:t}}(h):h),a=Q7(e.value);return new BC(a,e.sourceSpan,o,e.i18n)}return null}visitComment(e,t){return e}visitExpansion(e,t){return e}visitExpansionCase(e,t){return e}visitBlockGroup(e,t){return new R_(sF(this,e.blocks),e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitBlock(e,t){return new BA(e.name,e.parameters,sF(this,e.children),e.sourceSpan,e.startSourceSpan)}visitBlockParameter(e,t){return e}}function Q7(n){return Z7(n).replace(ATe," ")}function sF(n,e){const t=[];return e.forEach((i,r)=>{const a=i.visit(n,{prev:e[r-1],next:e[r+1]});a&&t.push(a)}),t}function UA(n,e=!1){return zc(Object.keys(n).map(t=>({key:t,quoted:e,value:n[t]})))}const J7=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function eW(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),J7.has(n+"|"+e)||J7.has("*|"+e)}class NTe{constructor(e,t,i,r){this._exprParser=e,this._interpolationConfig=t,this._schemaRegistry=i,this.errors=r}get interpolationConfig(){return this._interpolationConfig}createBoundHostProperties(e,t){const i=[];for(const r of Object.keys(e)){const o=e[r];"string"==typeof o?this.parsePropertyBinding(r,o,!0,t,t.start.offset,void 0,[],i,t):this._reportError(`Value of the host property binding "${r}" needs to be a string representing an expression but got "${o}" (${typeof o})`,t)}return i}createDirectiveHostEventAsts(e,t){const i=[];for(const r of Object.keys(e)){const o=e[r];"string"==typeof o?this.parseEvent(r,o,!1,t,t,[],i,t):this._reportError(`Value of the host listener "${r}" needs to be a string representing an expression but got "${o}" (${typeof o})`,t)}return i}parseInterpolation(e,t,i){const r=t.start.toString(),o=t.fullStart.offset;try{const a=this._exprParser.parseInterpolation(e,r,o,i,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,t),a}catch(a){return this._reportError(`${a}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",r,o)}}parseInterpolationExpression(e,t){const i=t.start.toString(),r=t.start.offset;try{const o=this._exprParser.parseInterpolationExpression(e,i,r);return o&&this._reportExpressionParserErrors(o.errors,t),o}catch(o){return this._reportError(`${o}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",i,r)}}parseInlineTemplateBinding(e,t,i,r,o,a,h,m){const C=this._parseTemplateBindings(e,t,i,i.start.offset+1,r);for(const T of C){const P=O_(i,T.sourceSpan),O=T.key.source,j=O_(i,T.key.span);if(T instanceof SN){const q=T.value?T.value.source:"$implicit",_e=T.value?O_(i,T.value.span):void 0;h.push(new vEe(O,q,P,j,_e))}else if(T.value){const q=m?P:i,_e=O_(i,T.value.ast.sourceSpan);this._parsePropertyAst(O,T.value,q,j,_e,o,a)}else o.push([O,""]),this.parseLiteralAttr(O,null,j,r,void 0,o,a,j)}}_parseTemplateBindings(e,t,i,r,o){const a=i.start.toString();try{const h=this._exprParser.parseTemplateBindings(e,t,a,r,o);return this._reportExpressionParserErrors(h.errors,i),h.warnings.forEach(m=>{this._reportError(m,i,I_.WARNING)}),h.templateBindings}catch(h){return this._reportError(`${h}`,i),[]}}parseLiteralAttr(e,t,i,r,o,a,h,m){lF(e)?(e=e.substring(1),void 0!==m&&(m=O_(m,new up(m.start.offset+1,m.end.offset))),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',i,I_.ERROR),this._parseAnimation(e,t,i,r,m,o,a,h)):h.push(new IN(e,this._exprParser.wrapLiteralPrimitive(t,"",r),lx.LITERAL_ATTR,i,m,o))}parsePropertyBinding(e,t,i,r,o,a,h,m,_){0===e.length&&this._reportError("Property name is missing in binding",r);let C=!1;e.startsWith("animate-")?(C=!0,e=e.substring(8),void 0!==_&&(_=O_(_,new up(_.start.offset+8,_.end.offset)))):lF(e)&&(C=!0,e=e.substring(1),void 0!==_&&(_=O_(_,new up(_.start.offset+1,_.end.offset)))),C?this._parseAnimation(e,t,r,o,_,a,h,m):this._parsePropertyAst(e,this.parseBinding(t,i,a||r,o),r,_,a,h,m)}parsePropertyInterpolation(e,t,i,r,o,a,h,m){const _=this.parseInterpolation(t,r||i,m);return!!_&&(this._parsePropertyAst(e,_,i,h,r,o,a),!0)}_parsePropertyAst(e,t,i,r,o,a,h){a.push([e,t.source]),h.push(new IN(e,t,lx.DEFAULT,i,r,o))}_parseAnimation(e,t,i,r,o,a,h,m){0===e.length&&this._reportError("Animation trigger is missing",i);const _=this.parseBinding(t||"undefined",!1,a||i,r);h.push([e,_.source]),m.push(new IN(e,_,lx.ANIMATION,i,o,a))}parseBinding(e,t,i,r){const o=(i&&i.start||"(unknown)").toString();try{const a=t?this._exprParser.parseSimpleBinding(e,o,r,this._interpolationConfig):this._exprParser.parseBinding(e,o,r,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,i),a}catch(a){return this._reportError(`${a}`,i),this._exprParser.wrapLiteralPrimitive("ERROR",o,r)}}createBoundElementProperty(e,t,i=!1,r=!0){if(t.isAnimation)return new t9(t.name,4,Pa.NONE,t.expression,null,t.sourceSpan,t.keySpan,t.valueSpan);let a,o=null,h=null;const m=t.name.split(".");let _;if(m.length>1)if("attr"==m[0]){h=m.slice(1).join("."),i||this._validatePropertyOrAttributeName(h,t.sourceSpan,!0),_=cF(this._schemaRegistry,e,h,!0);const C=h.indexOf(":");if(C>-1){const T=h.substring(0,C),P=h.substring(C+1);h=BN(T,P)}a=1}else"class"==m[0]?(h=m[1],a=2,_=[Pa.NONE]):"style"==m[0]&&(o=m.length>2?m[2]:null,h=m[1],a=3,_=[Pa.STYLE]);if(null===h){const C=this._schemaRegistry.getMappedPropName(t.name);h=r?C:t.name,_=cF(this._schemaRegistry,e,C,!1),a=0,i||this._validatePropertyOrAttributeName(C,t.sourceSpan,!1)}return new t9(h,a,_[0],t.expression,o,t.sourceSpan,t.keySpan,t.valueSpan)}parseEvent(e,t,i,r,o,a,h,m){0===e.length&&this._reportError("Event name is missing in binding",r),lF(e)?(e=e.slice(1),void 0!==m&&(m=O_(m,new up(m.start.offset+1,m.end.offset))),this._parseAnimationEvent(e,t,i,r,o,h,m)):this._parseRegularEvent(e,t,i,r,o,a,h,m)}calcPossibleSecurityContexts(e,t,i){const r=this._schemaRegistry.getMappedPropName(t);return cF(this._schemaRegistry,e,r,i)}_parseAnimationEvent(e,t,i,r,o,a,h){const m=function M1e(n,e){return JH(n,".",e)}(e,[e,""]),_=m[0],C=m[1].toLowerCase(),T=this._parseAction(t,i,o);a.push(new e9(_,C,1,T,r,o,h)),0===_.length&&this._reportError("Animation event name is missing in binding",r),C?"start"!==C&&"done"!==C&&this._reportError(`The provided animation output phase value "${C}" for "@${_}" is not supported (use start or done)`,r):this._reportError(`The animation trigger output event (@${_}) is missing its phase value name (start or done are currently supported)`,r)}_parseRegularEvent(e,t,i,r,o,a,h,m){const[_,C]=function A1e(n,e){return JH(n,":",e)}(e,[null,e]),T=this._parseAction(t,i,o);a.push([e,T.source]),h.push(new e9(C,_,0,T,r,o,m))}_parseAction(e,t,i){const r=(i&&i.start||"(unknown").toString(),o=i&&i.start?i.start.offset:0;try{const a=this._exprParser.parseAction(e,t,r,o,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,i),!a||a.ast instanceof $h?(this._reportError("Empty expressions are not allowed",i),this._exprParser.wrapLiteralPrimitive("ERROR",r,o)):a}catch(a){return this._reportError(`${a}`,i),this._exprParser.wrapLiteralPrimitive("ERROR",r,o)}}_reportError(e,t,i=I_.ERROR){this.errors.push(new oh(t,e,i))}_reportExpressionParserErrors(e,t){for(const i of e)this._reportError(i.message,t)}_validatePropertyOrAttributeName(e,t,i){const r=i?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);r.error&&this._reportError(r.msg,t,I_.ERROR)}}function lF(n){return"@"==n[0]}function cF(n,e,t,i){const r=[];return b_.parse(e).forEach(o=>{const a=o.element?[o.element]:n.allKnownElementNames(),h=new Set(o.notSelectors.filter(_=>_.isElementSelector()).map(_=>_.element)),m=a.filter(_=>!h.has(_));r.push(...m.map(_=>n.securityContext(_,t,i)))}),0===r.length?[Pa.NONE]:Array.from(new Set(r)).sort()}function O_(n,e){const t=e.start-n.start.offset,i=e.end-n.end.offset;return new vl(n.start.moveBy(t),n.end.moveBy(i),n.fullStart.moveBy(t),n.details)}const BTe=/^([^:/?#]+):/;function nW(n){let e=null,t=null,i=null,r=!1,o="";n.attrs.forEach(m=>{const _=m.name.toLowerCase();"select"==_?e=m.value:"href"==_?t=m.value:"rel"==_?i=m.value:"ngNonBindable"==m.name?r=!0:"ngProjectAs"==m.name&&m.value.length>0&&(o=m.value)}),e=function YTe(n){return null===n||0===n.length?"*":n}(e);const a=n.name.toLowerCase();let h=Gh.OTHER;return NN(a)?h=Gh.NG_CONTENT:"style"==a?h=Gh.STYLE:"script"==a?h=Gh.SCRIPT:"link"==a&&"stylesheet"==i&&(h=Gh.STYLESHEET),new XTe(h,e,t,r,o)}var Gh=function(n){return n[n.NG_CONTENT=0]="NG_CONTENT",n[n.STYLE=1]="STYLE",n[n.STYLESHEET=2]="STYLESHEET",n[n.SCRIPT=3]="SCRIPT",n[n.OTHER=4]="OTHER",n}(Gh||{});class XTe{constructor(e,t,i,r,o){this.type=e,this.selectAttr=t,this.hrefAttr=i,this.nonBindable=r,this.projectAs=o}}const ZTe=/^\d+(ms|s)?$/,KTe=/^\s$/,iW=new Map([[lp,ju],[91,93],[40,41]]);var dh=function(n){return n.IDLE="idle",n.TIMER="timer",n.INTERACTION="interaction",n.IMMEDIATE="immediate",n.HOVER="hover",n.VIEWPORT="viewport",n}(dh||{});function rW({expression:n,sourceSpan:e},t,i){const r=n.indexOf("when");if(-1===r)return i.push(new oh(e,'Could not find "when" keyword in expression')),null;const o=GC(n,r+1),a=t.parseBinding(n.slice(o),!1,e,e.start.offset+o);return new uq(a,e)}function oW({expression:n,sourceSpan:e},t){const i=n.indexOf("on");if(-1===i)return t.push(new oh(e,'Could not find "on" keyword in expression')),[];const r=GC(n,i+1);return new QTe(n,r,e,t).parse()}class QTe{constructor(e,t,i,r){this.expression=e,this.start=t,this.span=i,this.errors=r,this.index=0,this.triggers=[],this.tokens=(new YN).tokenize(e.slice(t))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){const e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(44))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(40)){this.advance();const t=this.errors.length,i=this.consumeParameters();if(this.errors.length!==t)break;this.consumeTrigger(e,i),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}return this.triggers}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1||this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,t){const i=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),r=i.moveBy(this.token().end-e.index),o=new vl(i,r);try{switch(e.toString()){case dh.IDLE:this.triggers.push(function JTe(n,e){if(n.length>0)throw new Error(`"${dh.IDLE}" trigger cannot have parameters`);return new J1e(e)}(t,o));break;case dh.TIMER:this.triggers.push(function eDe(n,e){if(1!==n.length)throw new Error(`"${dh.TIMER}" trigger must have exactly one parameter`);const t=jA(n[0]);if(null===t)throw new Error(`Could not parse time value of trigger "${dh.TIMER}"`);return new nwe(t,e)}(t,o));break;case dh.INTERACTION:this.triggers.push(function tDe(n,e){if(n.length>1)throw new Error(`"${dh.INTERACTION}" trigger can only have zero or one parameters`);return new iwe(n[0]??null,e)}(t,o));break;case dh.IMMEDIATE:this.triggers.push(function nDe(n,e){if(n.length>0)throw new Error(`"${dh.IMMEDIATE}" trigger cannot have parameters`);return new ewe(e)}(t,o));break;case dh.HOVER:this.triggers.push(function iDe(n,e){if(n.length>0)throw new Error(`"${dh.HOVER}" trigger cannot have parameters`);return new twe(e)}(t,o));break;case dh.VIEWPORT:this.triggers.push(function rDe(n,e){if(n.length>1)throw new Error(`"${dh.VIEWPORT}" trigger can only have zero or one parameters`);return new rwe(n[0]??null,e)}(t,o));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(a){this.error(e,a.message)}}consumeParameters(){const e=[];if(!this.token().isCharacter(40))return this.unexpectedToken(this.token()),e;this.advance();const t=[];let i="";for(;this.index<this.tokens.length;){const r=this.token();if(r.isCharacter(41)&&0===t.length){i.length&&e.push(i);break}r.type===jo.Character&&iW.has(r.numValue)&&t.push(iW.get(r.numValue)),t.length>0&&r.isCharacter(t[t.length-1])&&t.pop(),0===t.length&&r.isCharacter(44)&&i.length>0?(e.push(i),i="",this.advance()):(i+=this.tokenText(),this.advance())}return(!this.token().isCharacter(41)||t.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(44)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenText(){return this.expression.slice(this.start+this.token().index,this.start+this.token().end)}error(e,t){const i=this.span.start.moveBy(this.start+e.index),r=i.moveBy(e.end-e.index);this.errors.push(new oh(new vl(i,r),t))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}}function GC(n,e=0){let t=!1;for(let i=e;i<n.length;i++)if(KTe.test(n[i]))t=!0;else if(t)return i;return-1}function jA(n){const e=n.match(ZTe);if(!e)return null;const[t,i]=e;return parseInt(t)*("s"===i?1e3:1)}const oDe=/^prefetch\s+when\s/,sDe=/^prefetch\s+on\s/,sW=/^minimum\s/,aDe=/^after\s/,lDe=/^when\s/,cDe=/^on\s/;var cm=function(n){return n.PLACEHOLDER="placeholder",n.LOADING="loading",n.ERROR="error",n}(cm||{});function hDe(n,e){let t=null;for(const i of n.parameters){if(!sW.test(i.expression))throw new Error(`Unrecognized parameter in "${cm.PLACEHOLDER}" block: "${i.expression}"`);{const r=jA(i.expression.slice(GC(i.expression)));if(null===r)throw new Error('Could not parse time value of parameter "minimum"');t=r}}return new owe(Jr(e,n.children),t,n.sourceSpan,n.startSourceSpan,n.endSourceSpan)}function fDe(n,e){let t=null,i=null;for(const r of n.parameters)if(aDe.test(r.expression)){const o=jA(r.expression.slice(GC(r.expression)));if(null===o)throw new Error('Could not parse time value of parameter "after"');t=o}else{if(!sW.test(r.expression))throw new Error(`Unrecognized parameter in "${cm.LOADING}" block: "${r.expression}"`);{const o=jA(r.expression.slice(GC(r.expression)));if(null===o)throw new Error('Could not parse time value of parameter "minimum"');i=o}}return new swe(Jr(e,n.children),t,i,n.sourceSpan,n.startSourceSpan,n.endSourceSpan)}function pDe(n,e){if(n.parameters.length>0)throw new Error(`"${cm.ERROR}" block cannot have parameters`);return new awe(Jr(e,n.children),n.sourceSpan,n.startSourceSpan,n.endSourceSpan)}const gDe=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,L__BANANA_BOX={start:"[(",end:")]"},L__PROPERTY={start:"[",end:"]"},L__EVENT={start:"(",end:")"};class yDe{constructor(e,t){this.bindingParser=e,this.options=t,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.commentNodes=[],this.inI18nBlock=!1}visitElement(e){const t=uC(e.i18n);t&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);const i=nW(e);if(i.type===Gh.SCRIPT)return null;if(i.type===Gh.STYLE){const _e=function CDe(n){return 1===n.children.length&&n.children[0]instanceof BC?n.children[0].value:null}(e);return null!==_e&&this.styles.push(_e),null}if(i.type===Gh.STYLESHEET&&function FTe(n){if(null==n||0===n.length||"/"==n[0])return!1;const e=n.match(BTe);return null===e||"package"==e[1]||"asset"==e[1]}(i.hrefAttr))return this.styleUrls.push(i.hrefAttr),null;const r=function iCe(n){return"ng-template"===ah(n)[1]}(e.name),o=[],a=[],h=[],m=[],_=[],C={},T=[],P=[];let j,q,O=!1;for(const _e of e.attrs){let me=!1;const te=fW(_e.name);let Pe=!1;if(_e.i18n&&(C[_e.name]=_e.i18n),te.startsWith("*")){O&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",_e.sourceSpan),Pe=!0,O=!0;const _t=_e.value,Dt=te.substring(1),Yt=[];this.bindingParser.parseInlineTemplateBinding(Dt,_t,_e.sourceSpan,_e.valueSpan?_e.valueSpan.start.offset:_e.sourceSpan.start.offset+_e.name.length,[],T,Yt,!0),P.push(...Yt.map(sn=>new dq(sn.name,sn.value,sn.sourceSpan,sn.keySpan,sn.valueSpan)))}else me=this.parseAttribute(r,_e,[],o,a,h,m);!me&&!Pe&&_.push(this.visitAttribute(_e))}if(j=i.nonBindable?Jr(xDe,e.children).flat(1/0):Jr(this,e.children),i.type===Gh.NG_CONTENT){e.children&&!e.children.every(te=>function wDe(n){return n instanceof BC&&0==n.value.trim().length}(te)||function EDe(n){return n instanceof $C}(te))&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);const _e=i.selectAttr,me=e.attrs.map(te=>this.visitAttribute(te));q=new cwe(_e,me,e.sourceSpan,e.i18n),this.ngContentSelectors.push(_e)}else if(r){const _e=this.extractAttributes(e.name,o,C);q=new om(e.name,_,_e.bound,a,[],j,m,h,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{const _e=this.extractAttributes(e.name,o,C);q=new aC(e.name,_,_e.bound,a,j,m,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(O){const _e=this.extractAttributes("ng-template",T,C),me=[];_e.literal.forEach(Dt=>me.push(Dt)),_e.bound.forEach(Dt=>me.push(Dt));const te=q instanceof aC?{attributes:q.attributes,inputs:q.inputs,outputs:q.outputs}:{attributes:[],inputs:[],outputs:[]};q=new om(q instanceof om?null:q.name,te.attributes,te.inputs,te.outputs,me,[q],[],P,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,r&&t?void 0:e.i18n)}return t&&(this.inI18nBlock=!1),q}visitAttribute(e){return new q2(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!uC(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);const t=e.i18n,i={},r={};return Object.keys(t.placeholders).forEach(o=>{const a=t.placeholders[o];if(o.startsWith("VAR_")){const h=o.trim(),m=this.bindingParser.parseInterpolationExpression(a.text,a.sourceSpan);i[h]=new H2(m,a.sourceSpan)}else r[o]=this._visitTextWithInterpolation(a.text,a.sourceSpan,null)}),new hq(i,r,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new Q1e(e.value||"",e.sourceSpan)),null}visitBlockGroup(e,t){const i=e.blocks[0];if(!i)return this.reportError("Block group must have at least one block.",e.sourceSpan),null;if("defer"===i.name&&this.options.enabledBlockTypes.has(i.name)){const{node:r,errors:o}=function uDe(n,e,t){const i=[],[r,...o]=n.blocks,{triggers:a,prefetchTriggers:h}=function mDe(n,e,t){const i=[],r=[];for(const o of n)if(lDe.test(o.expression)){const a=rW(o,e,t);null!==a&&i.push(a)}else if(cDe.test(o.expression))i.push(...oW(o,t));else if(oDe.test(o.expression)){const a=rW(o,e,t);null!==a&&r.push(a)}else sDe.test(o.expression)?r.push(...oW(o,t)):t.push(new oh(o.sourceSpan,"Unrecognized trigger"));return{triggers:i,prefetchTriggers:r}}(r.parameters,t,i),{placeholder:m,loading:_,error:C}=function dDe(n,e,t){let i=null,r=null,o=null;for(const a of n)try{switch(a.name){case cm.PLACEHOLDER:null!==i?e.push(new oh(a.startSourceSpan,`"defer" block can only have one "${cm.PLACEHOLDER}" block`)):i=hDe(a,t);break;case cm.LOADING:null!==r?e.push(new oh(a.startSourceSpan,`"defer" block can only have one "${cm.LOADING}" block`)):r=fDe(a,t);break;case cm.ERROR:null!==o?e.push(new oh(a.startSourceSpan,`"defer" block can only have one "${cm.ERROR}" block`)):o=pDe(a,t);break;default:e.push(new oh(a.startSourceSpan,`Unrecognized block "${a.name}"`))}}catch(h){e.push(new oh(a.startSourceSpan,h.message))}return{placeholder:i,loading:r,error:o}}(o,i,e);return{node:new lwe(Jr(e,r.children),a,h,m,_,C,n.sourceSpan,n.startSourceSpan,n.endSourceSpan),errors:i}}(e,this,this.bindingParser);return this.errors.push(...o),r}return this.reportError(`Unrecognized block "${i.name}".`,i.sourceSpan),null}visitBlock(e,t){}visitBlockParameter(e,t){}extractAttributes(e,t,i){const r=[],o=[];return t.forEach(a=>{const h=i[a.name];if(a.isLiteral)o.push(new q2(a.name,a.expression.source||"",a.sourceSpan,a.keySpan,a.valueSpan,h));else{const m=this.bindingParser.createBoundElementProperty(e,a,!0,!1);r.push(W2.fromBoundElementProperty(m,h))}}),{bound:r,literal:o}}parseAttribute(e,t,i,r,o,a,h){const m=fW(t.name),_=t.value,C=t.sourceSpan,T=t.valueSpan?t.valueSpan.start.offset:C.start.offset;function P(me,te,Pe){const Dt=me.start.moveBy(te.length+(t.name.length-m.length)),Yt=Dt.moveBy(Pe.length);return new vl(Dt,Yt,Dt,Pe)}const O=m.match(gDe);if(O){if(null!=O[1]){const me=O[7],te=P(C,O[1],me);this.bindingParser.parsePropertyBinding(me,_,!1,C,T,t.valueSpan,i,r,te)}else if(O[2])if(e){const me=O[7],te=P(C,O[2],me);this.parseVariable(me,_,C,te,t.valueSpan,a)}else this.reportError('"let-" is only supported on ng-template elements.',C);else if(O[3]){const me=O[7],te=P(C,O[3],me);this.parseReference(me,_,C,te,t.valueSpan,h)}else if(O[4]){const me=[],te=O[7],Pe=P(C,O[4],te);this.bindingParser.parseEvent(te,_,!1,C,t.valueSpan||C,i,me,Pe),uF(me,o)}else if(O[5]){const me=O[7],te=P(C,O[5],me);this.bindingParser.parsePropertyBinding(me,_,!1,C,T,t.valueSpan,i,r,te),this.parseAssignmentEvent(me,_,C,t.valueSpan,i,o,te)}else if(O[6]){const me=P(C,"",m);this.bindingParser.parseLiteralAttr(m,_,C,T,t.valueSpan,i,r,me)}return!0}let j=null;if(m.startsWith(L__BANANA_BOX.start)?j=L__BANANA_BOX:m.startsWith(L__PROPERTY.start)?j=L__PROPERTY:m.startsWith(L__EVENT.start)&&(j=L__EVENT),null!==j&&m.endsWith(j.end)&&m.length>j.start.length+j.end.length){const me=m.substring(j.start.length,m.length-j.end.length),te=P(C,j.start,me);if(j.start===L__BANANA_BOX.start)this.bindingParser.parsePropertyBinding(me,_,!1,C,T,t.valueSpan,i,r,te),this.parseAssignmentEvent(me,_,C,t.valueSpan,i,o,te);else if(j.start===L__PROPERTY.start)this.bindingParser.parsePropertyBinding(me,_,!1,C,T,t.valueSpan,i,r,te);else{const Pe=[];this.bindingParser.parseEvent(me,_,!1,C,t.valueSpan||C,i,Pe,te),uF(Pe,o)}return!0}const q=P(C,"",m);return this.bindingParser.parsePropertyInterpolation(m,_,C,t.valueSpan,i,r,q,t.valueTokens??null)}_visitTextWithInterpolation(e,t,i,r){const o=Z7(e),a=this.bindingParser.parseInterpolation(o,t,i);return a?new H2(a,t,r):new my(o,t)}parseVariable(e,t,i,r,o,a){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',i):0===e.length&&this.reportError("Variable does not have a name",i),a.push(new dq(e,t,i,r,o))}parseReference(e,t,i,r,o,a){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',i):0===e.length?this.reportError("Reference does not have a name",i):a.some(h=>h.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,i),a.push(new uwe(e,t,i,r,o))}parseAssignmentEvent(e,t,i,r,o,a,h){const m=[];this.bindingParser.parseEvent(`${e}Change`,`${t} =$event`,!0,i,r||i,o,m,h),uF(m,a)}reportError(e,t,i=I_.ERROR){this.errors.push(new oh(t,e,i))}}const xDe=new class bDe{visitElement(e){const t=nW(e);if(t.type===Gh.SCRIPT||t.type===Gh.STYLE||t.type===Gh.STYLESHEET)return null;const i=Jr(this,e.children,null);return new aC(e.name,Jr(this,e.attrs),[],[],i,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitComment(e){return null}visitAttribute(e){return new q2(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new my(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlockGroup(e,t){const i=Jr(this,e.blocks);return null!==e.endSourceSpan&&i.push(new my(e.endSourceSpan.toString(),e.endSourceSpan)),i}visitBlock(e,t){return[new my(e.startSourceSpan.toString(),e.startSourceSpan),...Jr(this,e.children)]}visitBlockParameter(e,t){return null}};function fW(n){return/^data-/i.test(n)?n.substring(5):n}function uF(n,e){e.push(...n.map(t=>X2.fromParsedEvent(t)))}var vg=function(n){return n[n.ELEMENT=0]="ELEMENT",n[n.TEMPLATE=1]="TEMPLATE",n}(vg||{});class dF{constructor(e,t,i=0,r=null,o,a){this.index=e,this.ref=t,this.level=i,this.templateIndex=r,this.meta=o,this.registry=a,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=a||function SDe(){return{getUniqueId:Mwe(),icus:new Map}}(),this.id=this._registry.getUniqueId()}appendTag(e,t,i,r){t.isVoid&&r||Q2(this.placeholders,t.isVoid||!r?t.startName:t.closeName,{type:e,index:i,ctx:this.id,isVoid:t.isVoid,closed:r})}get icus(){return this._registry.icus}get isRoot(){return 0===this.level}get isResolved(){return 0===this._unresolvedCtxCount}getSerializedPlaceholders(){const e=new Map;return this.placeholders.forEach((t,i)=>e.set(i,t.map(IDe))),e}appendBinding(e){this.bindings.add(e)}appendIcu(e,t){Q2(this._registry.icus,e,t)}appendBoundText(e){xq(e,this.bindings.size,this.id).forEach((i,r)=>Q2(this.placeholders,r,...i))}appendTemplate(e,t){this.appendTag(vg.TEMPLATE,e,t,!1),this.appendTag(vg.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}appendElement(e,t,i){this.appendTag(vg.ELEMENT,e,t,i)}appendProjection(e,t){this.appendTag(vg.ELEMENT,e,t,!1),this.appendTag(vg.ELEMENT,e,t,!0)}forkChildContext(e,t,i){return new dF(e,this.ref,this.level+1,t,i,this._registry)}reconcileChildContext(e){["start","close"].forEach(i=>{const a=(this.placeholders.get(e.meta[`${i}Name`])||[]).find(mW(this.id,e.templateIndex));a&&(a.ctx=e.id)}),e.placeholders.forEach((i,r)=>{const o=this.placeholders.get(r);if(!o)return void this.placeholders.set(r,i);const a=o.findIndex(mW(e.id,e.templateIndex));if(a>=0){const h=r.startsWith("CLOSE");r.endsWith("NG-TEMPLATE")?o.splice(a+(h?0:1),0,...i):(i[h?i.length-1:0].tmpl=o[a],o.splice(a,1,...i))}else o.push(...i);this.placeholders.set(r,o)}),this._unresolvedCtxCount--}}function hF(n,e,t,i){return K2(`${i?"/":""}${n}${e}`,t)}function pW(n,{index:e,ctx:t,isVoid:i},r){return i?hF(n,e,t)+hF(n,e,t,!0):hF(n,e,t,r)}function mW(n,e){return t=>"object"==typeof t&&t.type===vg.TEMPLATE&&t.index===e&&t.ctx===n}function IDe(n){const e=(i,r)=>pW("#",i,r),t=(i,r)=>pW("*",i,r);switch(n.type){case vg.ELEMENT:return n.closed?e(n,!0)+(n.tmpl?t(n.tmpl,!0):""):n.tmpl?t(n.tmpl)+e(n)+(n.isVoid?t(n.tmpl,!0):""):e(n);case vg.TEMPLATE:return t(n,n.closed);default:return n}}const DDe=new class TDe{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){const t=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}formatPh(e){return`{${dC(e,!1)}}`}};function gW(n){return n.visit(DDe)}const _W={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"};class ADe{constructor(){this._placeHolderNameCounts={},this._signatureToName={}}getStartTagPlaceholderName(e,t,i){const r=this._hashTag(e,t,i);if(this._signatureToName[r])return this._signatureToName[r];const o=e.toUpperCase(),a=_W[o]||`TAG_${o}`,h=this._generateUniqueName(i?a:`START_${a}`);return this._signatureToName[r]=h,h}getCloseTagPlaceholderName(e){const t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];const i=e.toUpperCase(),o=this._generateUniqueName(`CLOSE_${_W[i]||`TAG_${i}`}`);return this._signatureToName[t]=o,o}getPlaceholderName(e,t){const i=e.toUpperCase(),r=`PH: ${i}=${t}`;if(this._signatureToName[r])return this._signatureToName[r];const o=this._generateUniqueName(i);return this._signatureToName[r]=o,o}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}_hashTag(e,t,i){return`<${e}`+Object.keys(t).sort().map(h=>` ${h}=${t[h]}`).join("")+(i?"/>":`></${e}>`)}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;const i=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=i+1,`${e}_${i}`}}const MDe=new L7(new YN);function kDe(n,e){return e}class PDe{constructor(e,t){this._expressionParser=e,this._interpolationConfig=t}toI18nMessage(e,t="",i="",r="",o){const a={isIcu:1==e.length&&e[0]instanceof zC,icuDepth:0,placeholderRegistry:new ADe,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:o||kDe},h=Jr(this,e,a);return new ag(h,a.placeholderToContent,a.placeholderToMessage,t,i,r)}visitElement(e,t){const i=Jr(this,e.children,t),r={};e.attrs.forEach(_=>{r[_.name]=_.value});const o=z7(e.name).isVoid,a=t.placeholderRegistry.getStartTagPlaceholderName(e.name,r,o);t.placeholderToContent[a]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let h="";o||(h=t.placeholderRegistry.getCloseTagPlaceholderName(e.name),t.placeholderToContent[h]={text:`</${e.name}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});const m=new cN(e.name,r,a,h,i,o,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,m)}visitAttribute(e,t){const i=void 0===e.valueTokens||1===e.valueTokens.length?new lg(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitText(e,t){const i=1===e.tokens.length?new lg(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitComment(e,t){return null}visitExpansion(e,t){t.icuDepth++;const i={},r=new ex(e.switchValue,e.type,i,e.sourceSpan);if(e.cases.forEach(h=>{i[h.value]=new op(h.expression.map(m=>m.visit(this,t)),h.expSourceSpan)}),t.icuDepth--,t.isIcu||t.icuDepth>0){const h=t.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return r.expressionPlaceholder=h,t.placeholderToContent[h]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},t.visitNodeFn(e,r)}const o=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[o]=this.toI18nMessage([e],"","","",void 0);const a=new tx(r,o,e.sourceSpan);return t.visitNodeFn(e,a)}visitExpansionCase(e,t){throw new Error("Unreachable code")}visitBlockGroup(e,t){const i=Jr(this,e.blocks,t),r=new op(i,e.sourceSpan);return t.visitNodeFn(e,r)}visitBlock(e,t){const i=Jr(this,e.children,t),r=new op(i,e.sourceSpan);return t.visitNodeFn(e,r)}visitBlockParameter(e,t){}_visitTextWithInterpolation(e,t,i,r){const o=[];let a=!1;for(const h of e)switch(h.type){case 8:case 17:a=!0;const m=h.parts[1],_=m.split(NDe)[2]||"INTERPOLATION",C=i.placeholderRegistry.getPlaceholderName(_,m);i.placeholderToContent[C]={text:h.parts.join(""),sourceSpan:h.sourceSpan},o.push(new cg(m,C,h.sourceSpan));break;default:if(h.parts[0].length>0){const T=o[o.length-1];T instanceof lg?(T.value+=h.parts[0],T.sourceSpan=new vl(T.sourceSpan.start,h.sourceSpan.end,T.sourceSpan.fullStart,T.sourceSpan.details)):o.push(new lg(h.parts[0],h.sourceSpan))}}return a?(function RDe(n,e){if(e instanceof ag&&(function ODe(n){const e=n.nodes;if(1!==e.length||!(e[0]instanceof op))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}(e),e=e.nodes[0]),e instanceof op){!function LDe(n,e){if(n.length!==e.length)throw new Error("The number of i18n message children changed between first and second pass.");if(n.some((t,i)=>e[i].constructor!==t.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}(e.children,n);for(let t=0;t<n.length;t++)n[t].sourceSpan=e.children[t].sourceSpan}}(o,r),new op(o,t)):o[0]}}const NDe=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;class yg extends oh{constructor(e,t){super(e,t)}}const BDe=(n,e)=>(n instanceof FC&&(e instanceof tx&&n.i18n instanceof ag&&(e.previousMessage=n.i18n),n.i18n=e),e);class yW{constructor(e=Ef,t=!1,i=!1){this.interpolationConfig=e,this.keepI18nAttrs=t,this.enableI18nLegacyMessageIdFormat=i,this.hasI18nMeta=!1,this._errors=[]}_generateI18nMessage(e,t="",i){const{meaning:r,description:o,customId:a}=this._parseMetadata(t),m=function vW(n){const e=new PDe(MDe,n);return(t,i,r,o,a)=>e.toI18nMessage(t,i,r,o,a)}(this.interpolationConfig)(e,r,o,a,i);return this._setMessageId(m,t),this._setLegacyIds(m,t),m}visitAllWithErrors(e){const t=e.map(i=>i.visit(this,null));return new jC(t,this._errors)}visitElement(e){let t;if(function Dwe(n){return n.attrs.some(e=>function vq(n){return"i18n"===n||n.startsWith(fN)}(e.name))}(e)){this.hasI18nMeta=!0;const i=[],r={};for(const o of e.attrs)if("i18n"===o.name)t=this._generateI18nMessage(e.children,e.i18n||o.value,BDe),0===t.nodes.length&&(t=void 0),e.i18n=t;else if(o.name.startsWith(fN)){const a=o.name.slice(5);eW(e.name,a)?this._reportError(o,`Translating attribute '${a}' is disallowed for security reasons.`):r[a]=o.value}else i.push(o);if(Object.keys(r).length)for(const o of i){const a=r[o.name];void 0!==a&&o.value&&(o.i18n=this._generateI18nMessage([o],o.i18n||a))}this.keepI18nAttrs||(e.attrs=i)}return Jr(this,e.children,t),e}visitExpansion(e,t){let i;const r=e.i18n;if(this.hasI18nMeta=!0,r instanceof tx){const o=r.name;i=this._generateI18nMessage([e],r),yq(i).name=o,null!==t&&(t.placeholderToMessage[o]=i)}else i=this._generateI18nMessage([e],t||r);return e.i18n=i,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlockGroup(e,t){return Jr(this,e.blocks,t),e}visitBlock(e,t){return Jr(this,e.children,t),e}visitBlockParameter(e,t){return e}_parseMetadata(e){return"string"==typeof e?function VDe(n=""){let e,t,i;if(n=n.trim()){const r=n.indexOf($De),o=n.indexOf(zDe);let a;[a,e]=r>-1?[n.slice(0,r),n.slice(r+2)]:[n,""],[t,i]=o>-1?[a.slice(0,o),a.slice(o+1)]:["",a]}return{customId:e,meaning:t,description:i}}(e):e instanceof ag?e:{}}_setMessageId(e,t){e.id||(e.id=t instanceof ag&&t.id||function YL(n){return n.id||kH(n)}(e))}_setLegacyIds(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[(n=e,function t1e(n){L2??=new TextEncoder;const e=[...L2.encode(n)],t=function o1e(n,e){const t=n.length+3>>>2,i=[];for(let r=0;r<t;r++)i[r]=s1e(n,4*r,e);return i}(e,ZL.Big),i=8*e.length,r=new Uint32Array(80);let o=1732584193,a=4023233417,h=2562383102,m=271733878,_=3285377520;t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;for(let C=0;C<t.length;C+=16){const T=o,P=a,O=h,j=m,q=_;for(let _e=0;_e<80;_e++){r[_e]=_e<16?t[C+_e]:KL(r[_e-3]^r[_e-8]^r[_e-14]^r[_e-16],1);const me=n1e(_e,a,h,m),te=me[0],Pe=me[1],_t=[KL(o,5),te,_,Pe,r[_e]].reduce(x_);_=m,m=h,h=KL(a,30),a=o,o=_t}o=x_(o,T),a=x_(a,P),h=x_(h,O),m=x_(m,j),_=x_(_,q)}return ZE(o)+ZE(a)+ZE(h)+ZE(m)+ZE(_)}(function Jxe(n){return n.map(e=>e.visit(Qxe,null))}(n.nodes).join("")+`[${n.meaning}]`)),kH(e)];else if("string"!=typeof t){const i=t instanceof ag?t:t instanceof tx?t.previousMessage:void 0;e.legacyIds=i?i.legacyIds:[]}var n}_reportError(e,t){this._errors.push(new yg(e.sourceSpan,t))}}const zDe="|",$De="@@";function GDe(n,e,t,i){const r=function WDe(n){return n.nodes.map(e=>e.visit(qDe,null)).join("")}(e),o=[Xt(r)];Object.keys(i).length&&(o.push(UA(pN(i,!0),!0)),o.push(UA({original_code:zc(Object.keys(i).map(m=>({key:dC(m),quoted:!0,value:Xt(e.placeholders[m]?e.placeholders[m].sourceSpan.toString():e.placeholderToMessage[m].nodes.map(_=>_.sourceSpan.toString()).join(""))})))})));const a=t.set(vo("goog.getMsg").callFn(o)).toConstDecl();return a.addLeadingComment(function UDe(n){const e=[];return e.push(n.description?{tagName:"desc",text:n.description}:{tagName:"suppress",text:"{msgDescriptions}"}),n.meaning&&e.push({tagName:"meaning",text:n.meaning}),function qH(n=[]){return new nN(n)}(e)}(e)),[a,new rh(n.set(t))]}const qDe=new class HDe{formatPh(e){return`{$${dC(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){return gW(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}};function XDe(n,e,t){const{messageParts:i,placeHolders:r}=function ZDe(n){const e=[],t=new YDe(n.placeholderToMessage,e);return n.nodes.forEach(i=>i.visit(t)),function QDe(n){const e=[],t=[];n[0]instanceof tC&&e.push(fF(n[0].sourceSpan.start));for(let i=0;i<n.length;i++){const r=n[i];r instanceof Wb?e.push(r):(t.push(r),n[i-1]instanceof tC&&e.push(fF(n[i-1].sourceSpan.end)))}return n[n.length-1]instanceof tC&&e.push(fF(n[n.length-1].sourceSpan.end)),{messageParts:e,placeHolders:t}}(e)}(e),o=function KDe(n){const e=n.nodes[0];return new vl(e.sourceSpan.fullStart,n.nodes[n.nodes.length-1].sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}(e),a=r.map(_=>t[_.text]),h=function XH(n,e,t,i,r){return new N2(n,e,t,i,r)}(e,i,r,a,o),m=n.set(h);return[new rh(m)]}class YDe{constructor(e,t){this.placeholderToMessage=e,this.pieces=t}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Wb)this.pieces[this.pieces.length-1].text+=e.value;else{const t=new vl(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Wb(e.value,t))}}visitContainer(e){e.children.forEach(t=>t.visit(this))}visitIcu(e){this.pieces.push(new Wb(gW(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,t,i){return new tC(dC(e,!1),t,i)}}function fF(n){return new Wb("",new vl(n,n))}const bW=new Set(["$event"]),pF=new Map([["window",Fe.resolveWindow],["document",Fe.resolveDocument],["body",Fe.resolveBody]]),t2e=[" ","\n","\r","\t"];function N_(n,e){return oC(vo(hC).bitwiseAnd(Xt(n),null,!1),e)}function xW(n,e=null,t=null){const{type:i,name:r,target:o,phase:a,handler:h}=n;if(o&&!pF.has(o))throw new Error(`Unexpected global target '${o}' defined for '${r}' event.\n        Supported list of global targets: ${Array.from(pF.keys())}.`);const m="$event",_=new Set,C=null===t||0===t.bindingLevel?vo(sp):t.getOrCreateSharedContextVar(0),T=yEe(t,C,h,"b",n.handlerSpan,_,bW),P=[],O=t?.variableDeclarations(),j=t?.restoreViewStatement();if(O&&P.push(...O),P.push(...T),j){P.unshift(j);const _t=P[P.length-1];_t instanceof _l?P[P.length-1]=new _l(_y(_t.value.sourceSpan,Fe.resetView,[_t.value])):P.push(new rh(_y(null,Fe.resetView,[])))}const q=1===i?function j1e(n,e){return`${iq}${n}.${e}`}(r,a):r,_e=e&&hg(e),me=[];_.has(m)&&me.push(new Xl(m,w_));const te=lc(me,P,ad,null,_e),Pe=[Xt(q),te];return o&&Pe.push(Xt(!1),zi(pF.get(o))),Pe}class mF{constructor(e,t,i=0,r,o,a,h,m,_,C,T,P=function n2e(){return{prepareStatements:[],constExpressions:[],i18nVarRefsCache:new Map}}()){this.constantPool=e,this.level=i,this.contextName=r,this.i18nContext=o,this.templateIndex=a,this.templateName=h,this._namespace=m,this.i18nUseExternalIds=C,this.deferBlocks=T,this._constants=P,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._nestedTemplateFns=[],this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=fC,this.visitVariable=fC,this.visitTextAttribute=fC,this.visitBoundAttribute=fC,this.visitBoundEvent=fC,this._bindingScope=t.nestedScope(i),this.fileBasedI18nSuffix=_.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new wW(e,()=>this.allocateDataSlot(),O=>this.allocatePureFunctionSlots(O),(O,j,q,_e)=>{this._bindingScope.set(this.level,j,_e),this.creationInstruction(null,Fe.pipe,[Xt(q),Xt(O)])})}buildTemplateFunction(e,t,i=0,r){this._ngContentSelectorsOffset=i,this._namespace!==Fe.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach(O=>this.registerContextVariables(O));const o=this.i18nContext||uC(r)&&!Z2(r)&&!(function f2e(n){return 1===n.length&&n[0]instanceof aC}(e)&&e[0].i18n===r),a=_F(e);if(o&&this.i18nStart(null,r,a),au(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach(O=>O()),0===this.level&&this._ngContentReservedSlots.length){const O=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){const j=this._ngContentReservedSlots.map(q=>"*"!==q?O2(q):q);O.push(this.constantPool.getConstLiteral(zh(j),!0))}this.creationInstruction(null,Fe.projectionDef,O,!0)}o&&this.i18nEnd(null,a);const h=tA(this._creationCodeFns),m=tA(this._updateCodeFns),_=this._bindingScope.viewSnapshotStatements(),C=this._bindingScope.variableDeclarations().concat(this._tempVariables),T=h.length>0?[N_(1,_.concat(h))]:[],P=m.length>0?[N_(2,C.concat(m))]:[];return lc([new Xl(hC,Hb),new Xl(sp,null)],[...this._prefixCode,...T,...P],ad,null,this.templateName)}getLocal(e){return this._bindingScope.get(e)}notifyImplicitReceiverUse(){this._bindingScope.notifyImplicitReceiverUse()}maybeRestoreView(){this._bindingScope.maybeRestoreView()}i18nTranslate(e,t={},i,r){const o=i||this.i18nGenerateMainBlockVar(),h=function g2e(n,e,t,i={},r){const o=[kwe(e),oC(rC(vo(DW)).notIdentical(Xt("undefined",JL)).and(vo(DW)),GDe(e,n,t,i),XDe(e,n,pN(i,!1)))];return r&&o.push(new rh(e.set(r(e)))),o}(e,o,this.i18nGenerateClosureVar(e.id),t,r);return this._constants.prepareStatements.push(...h),o}registerContextVariables(e){const t=this._bindingScope.freshReferenceName(),i=this.level,r=vo(e.name+t);this._bindingScope.set(i,e.name,r,1,(o,a)=>{let h;return o.bindingLevel===i?o.isListenerScope()&&o.hasRestoreViewVariable()?(h=vo(Eq),o.notifyRestoredViewContextUse()):h=vo(sp):h=o.getSharedContextName(i)||gF(a),[r.set(h.prop(e.value||"$implicit")).toConstDecl()]})}i18nAppendBindings(e){e.length>0&&e.forEach(t=>this.i18n.appendBinding(t))}i18nBindProps(e){const t={};return Object.keys(e).forEach(i=>{const r=e[i];if(r instanceof my)t[i]=Xt(r.value);else{const o=r.value.visit(this._valueConverter);if(this.allocateBindingSlots(o),o instanceof Tu){const{strings:a,expressions:h}=o,{id:m,bindings:_}=this.i18n,C=function Awe(n,e=0,t=0){if(!n.length)return"";let i="";const r=n.length-1;for(let o=0;o<r;o++)i+=`${n[o]}${K2(e+o,t)}`;return i+=n[r],i}(a,_.size,m);this.i18nAppendBindings(h),t[i]=Xt(C)}}}),t}i18nGenerateMainBlockVar(){return vo(this.constantPool.uniqueName("i18n_"))}i18nGenerateClosureVar(e){let t;const i=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){const r=wq("EXTERNAL_"),o=this.constantPool.uniqueName(i);t=`${r}${hg(e)}$$${o}`}else{const r=wq(i);t=this.constantPool.uniqueName(r)}return vo(t)}i18nUpdateRef(e){const{icus:t,meta:i,isRoot:r,isResolved:o,isEmitted:a}=e;if(r&&o&&!a&&!Z2(i)){e.isEmitted=!0;const h=e.getSerializedPlaceholders();let T,m={},_=h.size?bq(h):{};t.size&&t.forEach((P,O)=>{if(1===P.length)_[O]=P[0];else{const j=K2(`I18N_EXP_${O}`);_[O]=Xt(j),m[O]=fo(P)}}),(Array.from(h.values()).some(P=>P.length>1)||Object.keys(m).length)&&(T=P=>{const O=[P];return Object.keys(m).length&&O.push(UA(m,!0)),_y(null,Fe.i18nPostprocess,O)}),this.i18nTranslate(i,_,e.ref,T)}}i18nStart(e=null,t,i){const r=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(r,this.templateIndex,t):new dF(r,this.i18nGenerateMainBlockVar(),0,this.templateIndex,t);const{id:o,ref:a}=this.i18n,h=[Xt(r),this.addToConsts(a)];o>0&&h.push(Xt(o)),this.creationInstruction(e,i?Fe.i18n:Fe.i18nStart,h)}i18nEnd(e=null,t){if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);const{index:i,bindings:r}=this.i18n;if(r.size){for(const o of r)this.updateInstructionWithAdvance(this.getConstCount()-1,e,Fe.i18nExp,()=>this.convertPropertyBinding(o));this.updateInstruction(e,Fe.i18nApply,[Xt(i)])}t||this.creationInstruction(e,Fe.i18nEnd),this.i18n=null}i18nAttributesInstruction(e,t,i){let r=!1;const o=[];if(t.forEach(a=>{const h=a.i18n,m=a.value.visit(this._valueConverter);if(this.allocateBindingSlots(m),m instanceof Tu){const C=bq(xq(h));o.push(Xt(a.name),this.i18nTranslate(h,C)),m.expressions.forEach(T=>{r=!0,this.updateInstructionWithAdvance(e,i,Fe.i18nExp,()=>this.convertPropertyBinding(T))})}}),o.length>0){const a=Xt(this.allocateDataSlot()),h=this.addToConsts(fo(o));this.creationInstruction(i,Fe.i18nAttributes,[a,h]),r&&this.updateInstruction(i,Fe.i18nApply,[a])}}getNamespaceInstruction(e){switch(e){case"math":return Fe.namespaceMathML;case"svg":return Fe.namespaceSVG;default:return Fe.namespaceHTML}}addNamespaceInstruction(e,t){this._namespace=e,this.creationInstruction(t.startSourceSpan,e)}interpolatedUpdateInstruction(e,t,i,r,o,a){this.updateInstructionWithAdvance(t,r.sourceSpan,e,()=>[Xt(i),...this.getUpdateInstructionArguments(o),...a])}visitContent(e){const t=this.allocateDataSlot(),i=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,r=[Xt(t)];this._ngContentReservedSlots.push(e.selector);const o=e.attributes.filter(h=>"select"!==h.name.toLowerCase()),a=this.getAttributeExpressions(e.name,o,[],[]);a.length>0?r.push(Xt(i),fo(a)):0!==i&&r.push(Xt(i)),this.creationInstruction(e.sourceSpan,Fe.projection,r),this.i18n&&this.i18n.appendProjection(e.i18n,t)}visitElement(e){const t=this.allocateDataSlot(),i=new A7(null);let r=!1;const o=uC(e.i18n)&&!Z2(e.i18n),a=[],[h,m]=ah(e.name),_=LN(e.name);for(const rt of e.attributes){const{name:Ii,value:bi}=rt;"ngNonBindable"===Ii?r=!0:"style"===Ii?i.registerStyleAttr(bi):"class"===Ii?i.registerClassAttr(bi):a.push(rt)}const C=[Xt(t)];_||C.push(Xt(m));const T=[],P=[];e.inputs.forEach(rt=>{i.registerBoundInput(rt)||(0===rt.type&&rt.i18n?P.push(rt):T.push(rt))});const O=this.getAttributeExpressions(e.name,a,T,e.outputs,i,[],P);C.push(this.addAttrsToConsts(O));const j=this.prepareRefsArray(e.references);C.push(this.addToConsts(j));const q=this._namespace,_e=this.getNamespaceInstruction(h);_e!==q&&this.addNamespaceInstruction(_e,e),this.i18n&&this.i18n.appendElement(e.i18n,t);const me=!o&&this.i18n?!_F(e.children):e.children.length>0,te=!i.hasBindingsWithPipes&&0===e.outputs.length&&0===P.length&&!me,Pe=!te&&_F(e.children);if(te)this.creationInstruction(e.sourceSpan,_?Fe.elementContainer:Fe.element,eA(C));else{if(this.creationInstruction(e.startSourceSpan,_?Fe.elementContainerStart:Fe.elementStart,eA(C)),r&&this.creationInstruction(e.startSourceSpan,Fe.disableBindings),P.length>0&&this.i18nAttributesInstruction(t,P,e.startSourceSpan??e.sourceSpan),e.outputs.length>0)for(const rt of e.outputs)this.creationInstruction(rt.sourceSpan,Fe.listener,this.prepareListenerParameter(e.name,rt,t));o&&this.i18nStart(e.startSourceSpan,e.i18n,Pe)}const _t=i.buildUpdateLevelInstructions(this._valueConverter),Dt=_t.length-1;for(let rt=0;rt<=Dt;rt++)this._bindingSlots+=this.processStylingUpdateInstruction(t,_t[rt]);const Yt=Xt(void 0),Wt=[],sn=[];T.forEach(rt=>{const Ii=rt.type;if(4===Ii){const bi=rt.value.visit(this._valueConverter),hr=!(bi instanceof sh&&!bi.value);this.allocateBindingSlots(bi),Wt.push({span:rt.sourceSpan,paramsOrFn:qA(()=>hr?this.convertPropertyBinding(bi):Yt,rq(rt.name))})}else{if(rt.i18n)return;const bi=rt.value.visit(this._valueConverter);if(void 0!==bi){const hr=[],[Dr,Ei]=ah(rt.name);let Nn=TW(rt.securityContext,1===Ii);if(Nn||function m2e(n){return"iframe"===n.toLowerCase()}(e.name)&&AN(rt.name)&&(Nn=zi(Fe.validateIframeAttribute)),Nn&&hr.push(Nn),Dr){const Ci=Xt(Dr);Nn?hr.push(Ci):hr.push(Xt(null),Ci)}if(this.allocateBindingSlots(bi),0===Ii)bi instanceof Tu?this.interpolatedUpdateInstruction(SW(bi),t,Ei,rt,bi,hr):Wt.push({span:rt.sourceSpan,paramsOrFn:qA(()=>this.convertPropertyBinding(bi),Ei,hr)});else if(1===Ii)if(bi instanceof Tu&&vy(bi)>1)this.interpolatedUpdateInstruction(function c2e(n){switch(vy(n)){case 3:return Fe.attributeInterpolate1;case 5:return Fe.attributeInterpolate2;case 7:return Fe.attributeInterpolate3;case 9:return Fe.attributeInterpolate4;case 11:return Fe.attributeInterpolate5;case 13:return Fe.attributeInterpolate6;case 15:return Fe.attributeInterpolate7;case 17:return Fe.attributeInterpolate8;default:return Fe.attributeInterpolateV}}(bi),t,Ei,rt,bi,hr);else{const Ci=bi instanceof Tu?bi.expressions[0]:bi;sn.push({span:rt.sourceSpan,paramsOrFn:qA(()=>this.convertPropertyBinding(Ci),Ei,hr)})}else this.updateInstructionWithAdvance(t,rt.sourceSpan,Fe.classProp,()=>[Xt(t),Xt(Ei),this.convertPropertyBinding(bi),...hr])}}});for(const rt of Wt)this.updateInstructionWithAdvance(t,rt.span,Fe.property,rt.paramsOrFn);for(const rt of sn)this.updateInstructionWithAdvance(t,rt.span,Fe.attribute,rt.paramsOrFn);if(au(this,e.children),!o&&this.i18n&&this.i18n.appendElement(e.i18n,t,!0),!te){const rt=e.endSourceSpan??e.sourceSpan;o&&this.i18nEnd(rt,Pe),r&&this.creationInstruction(rt,Fe.enableBindings),this.creationInstruction(rt,_?Fe.elementContainerEnd:Fe.elementEnd)}}visitTemplate(e){const t="ng-template",i=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(e.i18n,i);const r=e.tagName?ah(e.tagName)[1]:e.tagName,o=`${this.contextName}${e.tagName?"_"+hg(e.tagName):""}_${i}`,a=`${o}_Template`,h=[Xt(i),vo(a),Xt(r)],m=this.getAttributeExpressions(t,e.attributes,e.inputs,e.outputs,void 0,e.templateAttrs);if(h.push(this.addAttrsToConsts(m)),e.references&&e.references.length){const C=this.prepareRefsArray(e.references);h.push(this.addToConsts(C)),h.push(zi(Fe.templateRefExtractor))}const _=new mF(this.constantPool,this._bindingScope,this.level+1,o,this.i18n,i,a,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this.deferBlocks,this._constants);if(this._nestedTemplateFns.push(()=>{const C=_.buildTemplateFunction(e.children,e.variables,this._ngContentReservedSlots.length+this._ngContentSelectorsOffset,e.i18n);this.constantPool.statements.push(C.toDeclStmt(a)),_._ngContentReservedSlots.length&&this._ngContentReservedSlots.push(..._._ngContentReservedSlots)}),this.creationInstruction(e.sourceSpan,Fe.templateCreate,()=>(h.splice(2,0,Xt(_.getConstCount()),Xt(_.getVarCount())),eA(h))),this.templatePropertyBindings(i,e.templateAttrs),r===t){const[C,T]=function O1e(n,e){const t=[],i=[];for(const r of n)(e(r)?t:i).push(r);return[t,i]}(e.inputs,Twe);C.length>0&&this.i18nAttributesInstruction(i,C,e.startSourceSpan??e.sourceSpan),T.length>0&&this.templatePropertyBindings(i,T);for(const P of e.outputs)this.creationInstruction(P.sourceSpan,Fe.listener,this.prepareListenerParameter("ng_template",P,i))}}visitBoundText(e){if(this.i18n){const r=e.value.visit(this._valueConverter);return this.allocateBindingSlots(r),void(r instanceof Tu&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(r.expressions)))}const t=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,Fe.text,[Xt(t)]);const i=e.value.visit(this._valueConverter);this.allocateBindingSlots(i),i instanceof Tu?this.updateInstructionWithAdvance(t,e.sourceSpan,function u2e(n){switch(vy(n)){case 1:return Fe.textInterpolate;case 3:return Fe.textInterpolate1;case 5:return Fe.textInterpolate2;case 7:return Fe.textInterpolate3;case 9:return Fe.textInterpolate4;case 11:return Fe.textInterpolate5;case 13:return Fe.textInterpolate6;case 15:return Fe.textInterpolate7;case 17:return Fe.textInterpolate8;default:return Fe.textInterpolateV}}(i),()=>this.getUpdateInstructionArguments(i)):V2("Text nodes should be interpolated and never bound directly.")}visitText(e){this.i18n||this.creationInstruction(e.sourceSpan,Fe.text,[Xt(this.allocateDataSlot()),Xt(e.value)])}visitIcu(e){let t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));const i=this.i18n,r=this.i18nBindProps(e.vars),o=this.i18nBindProps(e.placeholders),a=e.i18n,h=m=>{const C=pN({...r,...o},!1);return _y(null,Fe.i18nPostprocess,[m,UA(C,!0)])};if(Z2(i.meta))this.i18nTranslate(a,{},i.ref,h);else{const m=this.i18nTranslate(a,{},void 0,h);i.appendIcu(yq(a).name,m)}return t&&this.i18nEnd(null,!0),null}visitDeferredBlock(e){const t=this.allocateDataSlot(),i=this.deferBlocks.get(e),o=`${this.contextName}_Defer_${t}_DepsFn`,a=[Xt(t),i?vo(o):Yb];if(i){const h=[];for(const C of i)if(C.isDeferrable){const T=lc([new Xl("m",w_)],[new _l(vo("m").prop(C.symbolName))]),O=new nC(C.importPath).prop("then").callFn([T]);h.push(O)}else h.push(C.type);const m=[];m.push(new _l(fo(h)));const _=lc([],m,ad,null,o);this.constantPool.statements.push(_.toDeclStmt(o))}this.creationInstruction(e.sourceSpan,Fe.defer,()=>eA(a))}visitDeferredTrigger(e){}visitDeferredBlockPlaceholder(e){}visitDeferredBlockError(e){}visitDeferredBlockLoading(e){}allocateDataSlot(){return this._dataIndex++}getConstCount(){return this._dataIndex}getVarCount(){return this._pureFunctionSlots}getConsts(){return this._constants}getNgContentSelectors(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(zh(this._ngContentReservedSlots),!0):null}bindingContext(){return""+this._bindingContext++}templatePropertyBindings(e,t){const i=[];for(const r of t){if(!(r instanceof W2))continue;const o=r.value.visit(this._valueConverter);if(void 0!==o)if(this.allocateBindingSlots(o),o instanceof Tu){const a=[];this.interpolatedUpdateInstruction(SW(o),e,r.name,r,o,a)}else i.push({span:r.sourceSpan,paramsOrFn:qA(()=>this.convertPropertyBinding(o),r.name)})}for(const r of i)this.updateInstructionWithAdvance(e,r.span,Fe.property,r.paramsOrFn)}instructionFn(e,t,i,r,o=!1){e[o?"unshift":"push"]({span:t,reference:i,paramsOrFn:r})}processStylingUpdateInstruction(e,t){let i=0;if(t)for(const r of t.calls)i+=r.allocateBindingSlots,this.updateInstructionWithAdvance(e,r.sourceSpan,t.reference,()=>r.params(o=>r.supportsInterpolation&&o instanceof Tu?this.getUpdateInstructionArguments(o):this.convertPropertyBinding(o)));return i}creationInstruction(e,t,i,r){this.instructionFn(this._creationCodeFns,e,t,i||[],r)}updateInstructionWithAdvance(e,t,i,r){this.addAdvanceInstructionIfNecessary(e,t),this.updateInstruction(t,i,r)}updateInstruction(e,t,i){this.instructionFn(this._updateCodeFns,e,t,i||[])}addAdvanceInstructionIfNecessary(e,t){if(e!==this._currentIndex){const i=e-this._currentIndex;if(i<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,t,Fe.advance,[Xt(i)]),this._currentIndex=e}}allocatePureFunctionSlots(e){const t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}allocateBindingSlots(e){this._bindingSlots+=e instanceof Tu?e.expressions.length:1}getImplicitReceiverExpr(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?vo(sp):this._bindingScope.getOrCreateSharedContextVar(0)}convertPropertyBinding(e){const t=i9(this,this.getImplicitReceiverExpr(),e,this.bindingContext()),i=t.currValExpr;return this._tempVariables.push(...t.stmts),i}getUpdateInstructionArguments(e){const{args:t,stmts:i}=function wEe(n,e,t,i){const r=new DN(n,e,i,!0),o=r.visitInterpolation(t,Ra.Expression);return r.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),{stmts:r9(r,i),args:o.args}}(this,this.getImplicitReceiverExpr(),e,this.bindingContext());return this._tempVariables.push(...i),t}getAttributeExpressions(e,t,i,r,o,a=[],h=[]){const m=new Set,_=[];let C;for(const P of t)if("ngProjectAs"===P.name&&(C=P),P.i18n){const{i18nVarRefsCache:O}=this._constants;let j;O.has(P.i18n)?j=O.get(P.i18n):(j=this.i18nTranslate(P.i18n),O.set(P.i18n,j)),_.push(Xt(P.name),j)}else _.push(...CW(P.name),h2e(e,P));function T(P,O){"string"==typeof P?m.has(P)||(_.push(...CW(P)),void 0!==O&&_.push(O),m.add(P)):_.push(Xt(P))}if(C&&_.push(...function l2e(n){const e=O2(n.value)[0];return[Xt(5),zh(e)]}(C)),o&&o.populateInitialStylingAttrs(_),i.length||r.length){const P=_.length;for(let O=0;O<i.length;O++){const j=i[O];4!==j.type&&1!==j.type&&T(j.name)}for(let O=0;O<r.length;O++){const j=r[O];1!==j.type&&T(j.name)}_.length!==P&&_.splice(P,0,Xt(3))}return a.length&&(_.push(Xt(4)),a.forEach(P=>T(P.name))),h.length&&(_.push(Xt(6)),h.forEach(P=>T(P.name))),_}addToConsts(e){if(rN(e))return Yb;const t=this._constants.constExpressions;for(let i=0;i<t.length;i++)if(t[i].isEquivalent(e))return Xt(i);return Xt(t.push(e)-1)}addAttrsToConsts(e){return e.length>0?this.addToConsts(fo(e)):Yb}prepareRefsArray(e){return e&&0!==e.length?zh(e.flatMap(i=>{const r=this.allocateDataSlot(),o=this._bindingScope.freshReferenceName(),a=this.level,h=vo(o);return this._bindingScope.set(a,i.name,h,0,(m,_)=>{const C=_>0?[gF(_).toStmt()]:[],T=h.set(zi(Fe.reference).callFn([Xt(r)]));return C.concat(T.toConstDecl())},!0),[i.name,i.value]})):Yb}prepareListenerParameter(e,t,i){return()=>{const r=t.name,o=1===t.type?oq(r,t.phase):hg(r),a=`${this.templateName}_${e}_${o}_${i}_listener`,h=this._bindingScope.nestedScope(this._bindingScope.bindingLevel,bW);return xW(t,a,h)}}}class wW extends _Ee{constructor(e,t,i,r){super(),this.constantPool=e,this.allocateSlot=t,this.allocatePureFunctionSlots=i,this.definePipe=r,this._pipeBindExprs=[]}visitPipe(e,t){const i=this.allocateSlot(),r=`PIPE:${i}`,o=this.allocatePureFunctionSlots(2+e.args.length),a=new fg(e.span,e.sourceSpan,e.nameSpan,new D_(e.span,e.sourceSpan),r),{identifier:h,isVarLength:m}=function r2e(n){const e=i2e[n.length];return{identifier:e||Fe.pipeBindV,isVarLength:!e}}(e.args);this.definePipe(e.name,r,i,zi(h));const _=[e.exp,...e.args],C=this.visitAll(m?[new EC(e.span,e.sourceSpan,_)]:_),T=new Cy(e.span,e.sourceSpan,a,[new sh(e.span,e.sourceSpan,i),new sh(e.span,e.sourceSpan,o),...C],null);return this._pipeBindExprs.push(T),T}updatePipeSlotOffsets(e){this._pipeBindExprs.forEach(t=>{t.args[1].value+=e})}visitLiteralArray(e,t){return new cx(e.span,e.sourceSpan,this.visitAll(e.expressions),i=>{const r=fo(i);return EW(this.constantPool,r,this.allocatePureFunctionSlots)})}visitLiteralMap(e,t){return new cx(e.span,e.sourceSpan,this.visitAll(e.values),i=>{const r=zc(i.map((o,a)=>({key:e.keys[a].key,value:o,quoted:e.keys[a].quoted})));return EW(this.constantPool,r,this.allocatePureFunctionSlots)})}}const i2e=[Fe.pipeBind1,Fe.pipeBind2,Fe.pipeBind3,Fe.pipeBind4],o2e=[Fe.pureFunction0,Fe.pureFunction1,Fe.pureFunction2,Fe.pureFunction3,Fe.pureFunction4,Fe.pureFunction5,Fe.pureFunction6,Fe.pureFunction7,Fe.pureFunction8];function gF(n){return zi(Fe.nextContext).callFn(n>1?[Xt(n)]:[])}function EW(n,e,t){const{literalFactory:i,literalFactoryArguments:r}=n.getLiteralFactory(e),o=t(1+r.length),{identifier:a,isVarLength:h}=function s2e(n){const e=o2e[n.length];return{identifier:e||Fe.pureFunctionV,isVarLength:!e}}(r),m=[Xt(o),i];return h?m.push(fo(r)):m.push(...r),zi(a).callFn(m)}function CW(n){const[e,t]=ah(n),i=Xt(t);return e?[Xt(0),Xt(e),i]:[i]}const bx="$$shared_ctx$$";class GA{static createRootScope(){return new GA}constructor(e=0,t=null,i){if(this.bindingLevel=e,this.parent=t,this.globals=i,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null,this.usesRestoredViewContext=!1,void 0!==i)for(const r of i)this.set(0,r,vo(r))}get(e){let t=this;for(;t;){let i=t.map.get(e);if(null!=i)return t!==this&&(i={retrievalLevel:i.retrievalLevel,lhs:i.lhs,declareLocalCallback:i.declareLocalCallback,declare:!1,priority:i.priority},this.map.set(e,i),this.maybeGenerateSharedContextVar(i),this.maybeRestoreView()),i.declareLocalCallback&&!i.declare&&(i.declare=!0),i.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}set(e,t,i,r=0,o,a){if(this.map.has(t)){if(a)return this;V2(`The name ${t} is already defined in scope to be ${this.map.get(t)}`)}return this.map.set(t,{retrievalLevel:e,lhs:i,declare:!1,declareLocalCallback:o,priority:r}),this}getLocal(e){return this.get(e)}notifyImplicitReceiverUse(){0!==this.bindingLevel&&(this.map.get(bx+0).declare=!0)}nestedScope(e,t){const i=new GA(e,this,t);return e>0&&i.generateSharedContextVar(0),i}getOrCreateSharedContextVar(e){const t=bx+e;return this.map.has(t)||this.generateSharedContextVar(e),this.map.get(t).lhs}getSharedContextName(e){const t=this.map.get(bx+e);return t&&t.declare?t.lhs:null}maybeGenerateSharedContextVar(e){if(1===e.priority&&e.retrievalLevel<this.bindingLevel){const t=this.map.get(bx+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}generateSharedContextVar(e){const t=vo(sp+this.freshReferenceName());this.map.set(bx+e,{retrievalLevel:e,lhs:t,declareLocalCallback:(i,r)=>[t.set(gF(r)).toConstDecl()],declare:!1,priority:2})}getComponentProperty(e){const t=this.map.get(bx+0);return t.declare=!0,this.maybeRestoreView(),t.lhs.prop(e)}maybeRestoreView(){this.isListenerScope()&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=vo(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}restoreViewStatement(){if(this.restoreViewVariable){const e=_y(null,Fe.restoreView,[this.restoreViewVariable]);return this.usesRestoredViewContext?vo(Eq).set(e).toConstDecl():e.toStmt()}return null}viewSnapshotStatements(){return this.restoreViewVariable?[this.restoreViewVariable.set(_y(null,Fe.getCurrentView,[])).toConstDecl()]:[]}isListenerScope(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}variableDeclarations(){let e=0;return Array.from(this.map.values()).filter(t=>t.declare).sort((t,i)=>i.retrievalLevel-t.retrievalLevel||i.priority-t.priority).reduce((t,i)=>{const r=this.bindingLevel-i.retrievalLevel,o=i.declareLocalCallback(this,r-e);return e=r,t.concat(o)},[])}freshReferenceName(){let e=this;for(;e.parent;)e=e.parent;return"_r"+e.referenceNameIndex++}hasRestoreViewVariable(){return!!this.restoreViewVariable}notifyRestoredViewContextUse(){this.usesRestoredViewContext=!0}}function SW(n){switch(vy(n)){case 1:return Fe.propertyInterpolate;case 3:return Fe.propertyInterpolate1;case 5:return Fe.propertyInterpolate2;case 7:return Fe.propertyInterpolate3;case 9:return Fe.propertyInterpolate4;case 11:return Fe.propertyInterpolate5;case 13:return Fe.propertyInterpolate6;case 15:return Fe.propertyInterpolate7;case 17:return Fe.propertyInterpolate8;default:return Fe.propertyInterpolateV}}const IW=new eF;function HA(n=Ef){return new NTe(new L7(new YN),n,IW,[])}function TW(n,e){switch(n){case Pa.HTML:return zi(Fe.sanitizeHtml);case Pa.SCRIPT:return zi(Fe.sanitizeScript);case Pa.STYLE:return e?zi(Fe.sanitizeStyle):null;case Pa.URL:return zi(Fe.sanitizeUrl);case Pa.RESOURCE_URL:return zi(Fe.sanitizeResourceUrl);default:return null}}function h2e(n,e){const t=zh(e.value);if(!eW(n,e.name))return t;switch(IW.securityContext(n,e.name,!0)){case Pa.HTML:return iN(zi(Fe.trustConstantHtml),new JE([new eC(e.value)],[]),void 0,e.valueSpan);case Pa.RESOURCE_URL:return iN(zi(Fe.trustConstantResourceUrl),new JE([new eC(e.value)],[]),void 0,e.valueSpan);default:return t}}function p2e(n){return n instanceof my||n instanceof H2||n instanceof hq}function _F(n){return n.every(p2e)}function qA(n,e,t){return()=>{const i=n(),r=Array.isArray(i)?i:[i];return t&&r.push(...t),e&&r.unshift(Xt(e)),r}}const DW="ngI18nClosureMode";const v2e=/attr\.([^\]]+)/;function MW(n,e,t){const i=new lu,r=O2(n.selector);return i.set("type",n.type.value),r.length>0&&i.set("selectors",zh(r)),n.queries.length>0&&i.set("contentQueries",function I2e(n,e,t){const i=[],r=[],o=Cq(r,mN);for(const h of n){i.push(zi(Fe.contentQuery).callFn([vo("dirIndex"),...RW(h,e)]).toStmt());const m=o(),_=zi(Fe.loadQuery).callFn([]),C=zi(Fe.queryRefresh).callFn([m.set(_)]),T=vo(sp).prop(h.propertyName).set(h.first?m.prop("first"):m);r.push(C.and(T).toStmt())}const a=t?`${t}_ContentQueries`:null;return lc([new Xl(hC,Hb),new Xl(sp,null),new Xl("dirIndex",null)],[N_(1,i),N_(2,r)],ad,null,a)}(n.queries,e,n.name)),n.viewQueries.length&&i.set("viewQuery",function A2e(n,e,t){const i=[],r=[],o=Cq(r,mN);n.forEach(h=>{const m=zi(Fe.viewQuery).callFn(RW(h,e));i.push(m.toStmt());const _=o(),C=zi(Fe.loadQuery).callFn([]),T=zi(Fe.queryRefresh).callFn([_.set(C)]),P=vo(sp).prop(h.propertyName).set(h.first?_.prop("first"):_);r.push(T.and(P).toStmt())});const a=t?`${t}_Query`:null;return lc([new Xl(hC,Hb),new Xl(sp,null)],[N_(1,i),N_(2,r)],ad,null,a)}(n.viewQueries,e,n.name)),i.set("hostBindings",function M2e(n,e,t,i,r,o,a){const h=t.createBoundHostProperties(n.properties,e),m=t.createDirectiveHostEventAsts(n.listeners,e);if(D7){const rt=function PIe(n,e,t){const i=new N9(n.componentName,t,S7);for(const r of n.properties??[])RIe(i,r);for(const r of n.events??[]);return i}({componentName:o,properties:h,events:m},0,i);!function DIe(n){(function ZCe(n){for(const e of n.update)if(e.kind===Qt.Binding)if(e.name.startsWith(X9)){e.bindingKind=Ds.StyleProperty,e.name=e.name.substring(X9.length),KCe(e.name)&&(e.name=QCe(e.name));const{property:t,suffix:i}=Z9(e.name);e.name=t,e.unit=i}else e.name.startsWith("style!")?e.name="style":e.name.startsWith(Y9)&&(e.bindingKind=Ds.ClassName,e.name=Z9(e.name.substring(Y9.length)).property)})(n),_7(n),U9(n),l7(n),i7(n),H9(n),v7(n),B9(n),b7(n),g7(n),p7(n),J9(n),a7(n),r7(n),d7(n),j9(n)}(rt);const Ii=rt.root.vars;return null!==Ii&&Ii>0&&a.set("hostVars",Xt(Ii)),function MIe(n){if(null===n.fnName)throw new Error("AssertionError: host binding function is unnamed");const e=[];for(const o of n.create){if(o.kind!==Qt.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${Qt[o.kind]}`);e.push(o.statement)}const t=[];for(const o of n.update){if(o.kind!==Qt.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${Qt[o.kind]}`);t.push(o.statement)}if(0===e.length&&0===t.length)return null;const i=OA(1,e),r=OA(2,t);return lc([new Xl("rf"),new Xl("ctx")],[...i,...r],void 0,void 0,n.fnName)}(rt)}const _=vo(sp),C=new A7(_),{styleAttr:T,classAttr:P}=n.specialAttributes;void 0!==T&&C.registerStyleAttr(T),void 0!==P&&C.registerClassAttr(P);const O=[],j=[],q=[],_e=e;m&&m.length&&O.push(...function R2e(n,e){const t=[],i=[],r=[];for(const o of n){let a=o.name&&hg(o.name);const h=1===o.type?oq(a,o.targetOrPhase):a,m=e&&a?`${e}_${h}_HostBindingHandler`:null,_=xW(X2.fromParsedEvent(o),m);1==o.type?i.push(_):t.push(_)}for(const o of i)r.push({reference:Fe.syntheticHostListener,paramsOrFn:o,span:null});for(const o of t)r.push({reference:Fe.listener,paramsOrFn:o,span:null});return r}(m,o));const me=[];let Pe,te=0;h&&h.forEach(rt=>{C.registerInputBasedOnName(rt.name,rt.expression,_e)?te+=NA:(me.push(rt),te++)});const _t=()=>(Pe||(Pe=new wW(i,()=>V2("Unexpected node"),Ii=>{const bi=te;return te+=Ii,bi},()=>V2("Unexpected pipe"))),Pe),Dt=[],Yt=[],Wt=[];for(const rt of me){const Ii=rt.expression.visit(_t()),bi=NW(_,Ii),{bindingName:hr,instruction:Dr,isAttribute:Ei}=P2e(rt),Hi=t.calcPossibleSecurityContexts(r,hr,Ei).filter(Ui=>Ui!==Pa.NONE);let Nn=null;Hi.length&&(Nn=2===Hi.length&&Hi.indexOf(Pa.URL)>-1&&Hi.indexOf(Pa.RESOURCE_URL)>-1?zi(Fe.sanitizeUrlOrResourceUrl):TW(Hi[0],Ei));const Ci=[Xt(hr),bi.currValExpr];Nn?Ci.push(Nn):AN(hr)&&Ci.push(zi(Fe.validateIframeAttribute)),q.push(...bi.stmts),Dr===Fe.hostProperty?Dt.push(Ci):Dr===Fe.attribute?Yt.push(Ci):Dr===Fe.syntheticHostProperty?Wt.push(Ci):j.push({reference:Dr,paramsOrFn:Ci,span:null})}for(const rt of Dt)j.push({reference:Fe.hostProperty,paramsOrFn:rt,span:null});for(const rt of Yt)j.push({reference:Fe.attribute,paramsOrFn:rt,span:null});for(const rt of Wt)j.push({reference:Fe.syntheticHostProperty,paramsOrFn:rt,span:null});const sn=function S2e(n){const e=[];for(let t of Object.getOwnPropertyNames(n)){const i=n[t];e.push(Xt(t),i)}return e}(n.attributes);if(C.assignHostAttrs(sn,a),C.hasBindings&&C.buildUpdateLevelInstructions(_t()).forEach(rt=>{for(const Ii of rt.calls)te+=Math.max(Ii.allocateBindingSlots-NA,0),j.push({reference:rt.reference,paramsOrFn:k2e(Ii,_,NW),span:null})}),te&&a.set("hostVars",Xt(te)),O.length>0||j.length>0){const rt=o?`${o}_HostBindings`:null,Ii=[];return O.length>0&&Ii.push(N_(1,tA(O))),j.length>0&&Ii.push(N_(2,q.concat(tA(j)))),lc([new Xl(hC,Hb),new Xl(sp,null)],Ii,ad,null,rt)}return null}(n.host,n.typeSourceSpan,t,e,n.selector||"",n.name,i)),i.set("inputs",J2(n.inputs,!0)),i.set("outputs",J2(n.outputs)),null!==n.exportAs&&i.set("exportAs",fo(n.exportAs.map(o=>Xt(o)))),n.isStandalone&&i.set("standalone",Xt(!0)),n.isSignal&&i.set("signals",Xt(!0)),i}function kW(n,e){const t=[],i=e.providers,r=e.viewProviders,o=Object.keys(e.inputs);if(i||r){const a=[i||new Fh([])];r&&a.push(r),t.push(zi(Fe.ProvidersFeature).callFn(a))}for(const a of o)if(null!==e.inputs[a].transformFunction){t.push(zi(Fe.InputTransformsFeatureFeature));break}e.usesInheritance&&t.push(zi(Fe.InheritDefinitionFeature)),e.fullInheritance&&t.push(zi(Fe.CopyDefinitionFeature)),e.lifecycle.usesOnChanges&&t.push(zi(Fe.NgOnChangesFeature)),e.hasOwnProperty("template")&&e.isStandalone&&t.push(zi(Fe.StandaloneFeature)),e.hostDirectives?.length&&t.push(zi(Fe.HostDirectivesFeature).callFn([B2e(e.hostDirectives)])),t.length&&n.set("features",fo(t))}function w2e(n,e,t){const i=MW(n,e,t);kW(i,n);const r=n.selector&&b_.parse(n.selector),o=r&&r[0];if(o){const T=o.getAttrs();T.length&&i.set("attrs",e.getConstLiteral(fo(T.map(P=>Xt(null!=P?P:void 0))),!0))}const a=n.name,h=a?`${a}_Template`:null,m=n.changeDetection;if(D7){const T=function kIe(n,e,t){const i=new F9(n,t,S7);return XN(i.root,e),i}(n.name,n.template.nodes,e);!function TIe(n){(function tSe(n){for(const[e,t]of n.views){let i=lm.HTML;for(const r of t.create)r.kind!==Qt.Element&&r.kind!==Qt.ElementStart||r.namespace!==i&&(Lr.insertBefore(CCe(r.namespace),r),i=r.namespace)}})(n),_7(n),U9(n),function MCe(n){for(const[e,t]of n.views)kCe(t)}(n),function pIe(n){for(const e of n.units)for(const t of e.update)switch(t.kind){case Qt.Attribute:case Qt.Binding:case Qt.ClassProp:case Qt.ClassMap:case Qt.Property:case Qt.StyleProp:case Qt.StyleMap:t.expression instanceof gx&&Lr.remove(t)}}(n),function uSe(n){for(const e of n.units){let t=!1;for(const i of e.create)switch(i.kind){case Qt.Template:t=!0;break;case Qt.ElementStart:case Qt.Element:case Qt.ContainerStart:case Qt.Container:t=!1;break;case Qt.Listener:t&&Lr.remove(i)}}}(n),function fSe(n){for(const e of n.views.values())pSe(e)}(n),function gSe(n){for(const e of n.views.values())for(const t of e.update)ch(t,i=>!(i instanceof hx)||i.args.length<=4?i:new MA(i.target,i.name,fo(i.args),i.args.length),Fl.None)}(n),l7(n),XCe(n),function yIe(n){for(const e of n.views.values()){e.create.prepend([DC(e.job.allocateXrefId(),{kind:Vh.SavedView,name:null,view:e.xref},new DA)]);for(const t of e.create){if(t.kind!==Qt.Listener)continue;let i=e!==n.root;if(!i)for(const r of t.handlerOps)lh(r,o=>{o instanceof AC&&(i=!0)});i&&bIe(e,t)}}}(n),function DCe(n){for(const[e,t]of n.views)for(const i of t.ops())ch(i,ACe,Fl.None)}(n),function mIe(n){for(const[e,t]of n.views)m7(0,t.create),m7(0,t.update)}(n),g7(n),p7(n),function _Ie(n){for(const[e,t]of n.views){const i=V9(t);let r;for(const o of t.update)switch(o.kind){case Qt.Property:case Qt.Attribute:if(r=gIe.get(o.securityContext)||null,o.sanitizer=r?new PC(r):null,null===o.sanitizer){const a=i.get(o.target);if(void 0===a)throw Error("Property should have an element-like owner");vIe(a)&&AN(o.name)&&(o.sanitizer=new PC(Uh.IframeAttribute))}}}}(n),function JCe(n){for(const e of n.views.values())for(const t of e.create)switch(t.kind){case Qt.ElementStart:case Qt.Element:case Qt.Template:if(!Array.isArray(t.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(t.numSlotsUsed+=t.localRefs.length,t.localRefs.length>0){const i=eSe(t.localRefs);t.localRefs=n.addConst(i)}else t.localRefs=null}}(n),function NCe(n){for(const[e,t]of n.views)for(const i of t.create){if(i.kind!==Qt.ElementStart&&i.kind!==Qt.Element&&i.kind!==Qt.Template)continue;if(!(i.attributes instanceof SA))continue;const r=FCe(i.attributes);i.attributes=r.entries.length>0?n.addConst(r):null}}(n),i7(n),H9(n),v7(n),function xIe(n){const e=new Map;for(const[t,i]of n.views){let r=0;for(const o of i.create)zN(o)&&(o.slot=r,e.set(o.xref,o.slot),r+=o.numSlotsUsed);i.decls=r}for(const[t,i]of n.views)for(const r of i.ops()){if(r.kind===Qt.Template){const o=n.views.get(r.xref);r.decls=o.decls}if(E9(r)&&null===r.slot){if(!e.has(r.target))throw new Error(`AssertionError: no slot allocated for ${Qt[r.kind]} target ${r.target}`);r.slot=e.get(r.target)}lh(r,o=>{if(mg(o)&&E9(o)&&null===o.slot){if(!e.has(o.target))throw new Error(`AssertionError: no slot allocated for ${o.constructor.name} target ${o.target}`);o.slot=e.get(o.target)}})}}(n),B9(n),function WCe(n){for(const[e,t]of n.views){const i=new Map;for(const o of t.create)if(zN(o)){if(null===o.slot)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls");i.set(o.xref,o.slot)}let r=0;for(const o of t.update){if(!x9(o))continue;if(!i.has(o.target))throw new Error(`AssertionError: reference to unknown slot for var ${o.target}`);const a=i.get(o.target);if(r!==a){const h=a-r;if(h<0)throw new Error("AssertionError: slot counter should never need to move backwards");Lr.insertBefore(fCe(h,o.sourceSpan),o),r=a}}}}(n),b7(n),J9(n),function aSe(n){for(const e of n.views.values()){for(const t of e.create)t.kind===Qt.Listener&&n7(t.handlerOps);n7(e.update)}}(n),function cSe(n){for(const[e,t]of n.views){const i=new Set;for(const r of t.create)r.kind===Qt.ElementStart&&r.tag===lSe&&(r.kind=Qt.ContainerStart,i.add(r.xref)),r.kind===Qt.ElementEnd&&i.has(r.xref)&&(r.kind=Qt.ContainerEnd)}}(n),function zCe(n){for(const[e,t]of n.views)for(const i of t.create){const r=BCe.get(i.kind);if(void 0===r)continue;const[o,a]=r;null!==i.prev&&i.prev.kind===o&&(i.prev.kind=a,Lr.remove(i))}}(n),function hSe(n){const e=new Map;for(const t of n.units)for(const i of t.create)VN(i)&&e.set(i.xref,i);for(const[t,i]of n.views)for(const r of i.create)(r.kind===Qt.ElementStart||r.kind===Qt.ContainerStart)&&r.nonBindable&&Lr.insertAfter(yCe(r.xref),r),(r.kind===Qt.ElementEnd||r.kind===Qt.ContainerEnd)&&dSe(e,r.xref).nonBindable&&Lr.insertBefore(bCe(r.xref),r)}(n),a7(n),function TCe(n){for(const e of n.views.values())for(const t of e.update)lh(t,i=>{if(!(i instanceof MA&&i.args instanceof My))return i;if(null===i.varOffset||null===i.args.varOffset)throw new Error("Must run after variable counting");i.varOffset=i.args.varOffset,i.args.varOffset=i.varOffset+z9(i)})}(n),r7(n),d7(n),j9(n)}(T);const P=AIe(T,e);i.set("decls",Xt(T.root.decls)),i.set("vars",Xt(T.root.vars)),T.consts.length>0&&i.set("consts",fo(T.consts)),i.set("template",P)}else{const T=n.template,P=new mF(e,GA.createRootScope(),0,a,null,null,h,Fe.namespaceHTML,n.relativeContextFilePath,n.i18nUseExternalIds,n.deferBlocks),O=P.buildTemplateFunction(T.nodes,[]),j=P.getNgContentSelectors();j&&i.set("ngContentSelectors",j),i.set("decls",Xt(P.getConstCount())),i.set("vars",Xt(P.getVarCount()));const{constExpressions:q,prepareStatements:_e}=P.getConsts();if(q.length>0){let me=fo(q);_e.length>0&&(me=lc([],[..._e,new _l(me)])),i.set("consts",me)}i.set("template",O)}if(n.declarations.length>0&&i.set("dependencies",function E2e(n,e){switch(e){case 0:return n;case 1:return lc([],[new _l(n)]);case 2:const t=n.prop("map").callFn([zi(Fe.resolveForwardRef)]);return lc([],[new _l(t)])}}(fo(n.declarations.map(T=>T.type)),n.declarationListEmitMode)),null===n.encapsulation&&(n.encapsulation=tp.Emulated),n.styles&&n.styles.length){const P=(n.encapsulation==tp.Emulated?function F2e(n,e,t){const i=new MEe;return n.map(r=>i.shimCssText(r,e,t))}(n.styles,"_ngcontent-%COMP%","_nghost-%COMP%"):n.styles).reduce((O,j)=>(j.trim().length>0&&O.push(e.getConstLiteral(Xt(j))),O),[]);P.length>0&&i.set("styles",fo(P))}else n.encapsulation===tp.Emulated&&(n.encapsulation=tp.None);return n.encapsulation!==tp.Emulated&&i.set("encapsulation",Xt(n.encapsulation)),null!==n.animations&&i.set("data",zc([{key:"animation",value:n.animations,quoted:!1}])),null!=m&&m!==YE.Default&&i.set("changeDetection",Xt(m)),{expression:zi(Fe.defineComponent).callFn([i.toLiteralMap()],void 0,!0),type:PW(n),statements:[]}}function PW(n){const e=OW(n);return e.push(yF(n.template.ngContentSelectors)),e.push(su(Xt(n.isStandalone))),e.push(FW(n)),n.isSignal&&e.push(su(Xt(n.isSignal))),su(zi(Fe.ComponentDeclaration,e))}function RW(n,e){const t=[Bwe(n,e),Xt(C2e(n))];return n.read&&t.push(n.read),t}function C2e(n){return(n.descendants?1:0)|(n.static?2:0)|(n.emitDistinctChangesOnly?4:0)}function T2e(n){return su(Xt(n))}function vF(n){return zc(Object.keys(n).map(t=>({key:t,value:Xt(Array.isArray(n[t])?n[t][0]:n[t]),quoted:!0})))}function yF(n){return n.length>0?su(fo(n.map(e=>Xt(e)))):ip}function OW(n){const e=null!==n.selector?n.selector.replace(/\n/g,""):null;return[j2(n.type.type,n.typeArgumentCount),null!==e?T2e(e):ip,null!==n.exportAs?yF(n.exportAs):ip,su(D2e(n)),su(vF(n.outputs)),yF(n.queries.map(t=>t.propertyName))]}function D2e(n){return zc(Object.keys(n.inputs).map(e=>{const t=n.inputs[e];return{key:e,value:zc([{key:"alias",value:Xt(t.bindingPropertyName),quoted:!0},{key:"required",value:Xt(t.required),quoted:!0}]),quoted:!0}}))}function LW(n){const e=OW(n);return e.push(ip),e.push(su(Xt(n.isStandalone))),e.push(FW(n)),n.isSignal&&e.push(su(Xt(n.isSignal))),su(zi(Fe.DirectiveDeclaration,e))}function NW(n,e){return i9(null,n,e,"b")}function k2e(n,e,t){return n.params(i=>t(e,i).currValExpr)}function P2e(n){let t,e=n.name;const i=e.match(v2e);return i?(e=i[1],t=Fe.attribute):n.isAnimation?(e=rq(e),t=Fe.syntheticHostProperty):t=Fe.hostProperty,{bindingName:e,instruction:t,isAttribute:!!i}}const O2e=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function FW(n){return n.hostDirectives?.length?su(fo(n.hostDirectives.map(e=>zc([{key:"directive",value:rC(e.directive.type),quoted:!1},{key:"inputs",value:vF(e.inputs||{}),quoted:!1},{key:"outputs",value:vF(e.outputs||{}),quoted:!1}])))):ip}function B2e(n){const e=[];let t=!1;for(const i of n){if(i.inputs||i.outputs){const r=[{key:"directive",value:i.directive.type,quoted:!1}];if(i.inputs){const o=WA(i.inputs);o&&r.push({key:"inputs",value:o,quoted:!1})}if(i.outputs){const o=WA(i.outputs);o&&r.push({key:"outputs",value:o,quoted:!1})}e.push(zc(r))}else e.push(i.directive.type);i.isForwardReference&&(t=!0)}return t?new E_([],[new _l(fo(e))]):fo(e)}function WA(n){const e=[];for(const t in n)n.hasOwnProperty(t)&&e.push(Xt(t),Xt(n[t]));return e.length>0?fo(e):null}class z2e{}class $2e{constructor(e=new sEe){this.jitEvaluator=e,this.FactoryTarget=rm,this.ResourceLoader=z2e,this.elementSchemaRegistry=new eF}compilePipe(e,t,i){const o=Qq({name:i.name,type:Iu(i.type),typeArgumentCount:0,deps:null,pipeName:i.pipeName,pure:i.pure,isStandalone:i.isStandalone});return this.jitExpression(o.expression,e,t,[])}compilePipeDeclaration(e,t,i){const o=Qq(function tAe(n){return{name:n.type.name,type:Iu(n.type),typeArgumentCount:0,pipeName:n.name,deps:null,pure:n.pure??!0,isStandalone:n.isStandalone??!1}}(i));return this.jitExpression(o.expression,e,t,[])}compileInjectable(e,t,i){const{expression:r,statements:o}=Sq({name:i.name,type:Iu(i.type),typeArgumentCount:i.typeArgumentCount,providedIn:WW(i.providedIn),useClass:xx(i,"useClass"),useFactory:qW(i,"useFactory"),useValue:xx(i,"useValue"),useExisting:xx(i,"useExisting"),deps:i.deps?.map(XW)},!0);return this.jitExpression(r,e,t,o)}compileInjectableDeclaration(e,t,i){const{expression:r,statements:o}=Sq({name:i.type.name,type:Iu(i.type),typeArgumentCount:0,providedIn:WW(i.providedIn),useClass:xx(i,"useClass"),useFactory:qW(i,"useFactory"),useValue:xx(i,"useValue"),useExisting:xx(i,"useExisting"),deps:i.deps?.map(YW)},!0);return this.jitExpression(r,e,t,o)}compileInjector(e,t,i){const o=Yq({name:i.name,type:Iu(i.type),providers:i.providers&&i.providers.length>0?new Vo(i.providers):null,imports:i.imports.map(a=>new Vo(a))});return this.jitExpression(o.expression,e,t,[])}compileInjectorDeclaration(e,t,i){const r=function nAe(n){return{name:n.type.name,type:Iu(n.type),providers:void 0!==n.providers&&n.providers.length>0?new Vo(n.providers):null,imports:void 0!==n.imports?n.imports.map(e=>new Vo(e)):[]}}(i),o=Yq(r);return this.jitExpression(o.expression,e,t,[])}compileNgModule(e,t,i){const o=uEe({kind:T_.Global,type:Iu(i.type),bootstrap:i.bootstrap.map(Iu),declarations:i.declarations.map(Iu),publicDeclarationTypes:null,imports:i.imports.map(Iu),includeImportTypes:!0,exports:i.exports.map(Iu),selectorScopeMode:hA.Inline,containsForwardDecls:!1,schemas:i.schemas?i.schemas.map(Iu):null,id:i.id?new Vo(i.id):null});return this.jitExpression(o.expression,e,t,[])}compileNgModuleDeclaration(e,t,i){const r=function dEe(n){const e=new lu;return e.set("type",new Vo(n.type)),void 0!==n.bootstrap&&e.set("bootstrap",new Vo(n.bootstrap)),void 0!==n.declarations&&e.set("declarations",new Vo(n.declarations)),void 0!==n.imports&&e.set("imports",new Vo(n.imports)),void 0!==n.exports&&e.set("exports",new Vo(n.exports)),void 0!==n.schemas&&e.set("schemas",new Vo(n.schemas)),void 0!==n.id&&e.set("id",new Vo(n.id)),zi(Fe.defineNgModule).callFn([e.toLiteralMap()])}(i);return this.jitExpression(r,e,t,[])}compileDirective(e,t,i){const r=UW(i);return this.compileDirectiveFromMeta(e,t,r)}compileDirectiveDeclaration(e,t,i){const o=jW(i,this.createParseSourceSpan("Directive",i.type.name,t));return this.compileDirectiveFromMeta(e,t,o)}compileDirectiveFromMeta(e,t,i){const r=new KH,a=function x2e(n,e,t){const i=MW(n,e,t);return kW(i,n),{expression:zi(Fe.defineDirective).callFn([i.toLiteralMap()],void 0,!0),type:LW(n),statements:[]}}(i,r,HA());return this.jitExpression(a.expression,e,t,r.statements)}compileComponent(e,t,i){const{template:r,interpolation:o}=HW(i.template,i.name,t,i.preserveWhitespaces,i.interpolation),a={...i,...UW(i),selector:i.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:r,declarations:i.declarations.map(G2e),declarationListEmitMode:0,deferBlocks:new Map,deferrableDeclToImportDecl:new Map,styles:[...i.styles,...r.styles],encapsulation:i.encapsulation,interpolation:o,changeDetection:i.changeDetection,animations:null!=i.animations?new Vo(i.animations):null,viewProviders:null!=i.viewProviders?new Vo(i.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0};return this.compileComponentFromMeta(e,`ng:///${i.name}.js`,a)}compileComponentDeclaration(e,t,i){const o=function j2e(n,e,t){const{template:i,interpolation:r}=HW(n.template,n.type.name,t,n.preserveWhitespaces??!1,n.interpolation),o=[];if(n.dependencies)for(const a of n.dependencies)switch(a.kind){case"directive":case"component":o.push(bF(a));break;case"pipe":o.push(q2e(a))}else(n.components||n.directives||n.pipes)&&(n.components&&o.push(...n.components.map(a=>bF(a,!0))),n.directives&&o.push(...n.directives.map(a=>bF(a))),n.pipes&&o.push(...function H2e(n){return n?Object.keys(n).map(e=>({kind:Ey.Pipe,name:e,type:new Vo(n[e])})):[]}(n.pipes)));return{...jW(n,e),template:i,styles:n.styles??[],declarations:o,viewProviders:void 0!==n.viewProviders?new Vo(n.viewProviders):null,animations:void 0!==n.animations?new Vo(n.animations):null,deferBlocks:new Map,deferrableDeclToImportDecl:new Map,changeDetection:n.changeDetection??YE.Default,encapsulation:n.encapsulation??tp.Emulated,interpolation:r,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0}}(i,this.createParseSourceSpan("Component",i.type.name,t),t);return this.compileComponentFromMeta(e,t,o)}compileComponentFromMeta(e,t,i){const r=new KH,a=w2e(i,r,HA(i.interpolation));return this.jitExpression(a.expression,e,t,r.statements)}compileFactory(e,t,i){const r=py({name:i.name,type:Iu(i.type),typeArgumentCount:i.typeArgumentCount,deps:(n=i.deps,null==n?null:n.map(XW)),target:i.target});var n;return this.jitExpression(r.expression,e,t,r.statements)}compileFactoryDeclaration(e,t,i){const r=py({name:i.type.name,type:Iu(i.type),typeArgumentCount:0,deps:Array.isArray(i.deps)?i.deps.map(YW):i.deps,target:i.target});return this.jitExpression(r.expression,e,t,r.statements)}createParseSourceSpan(e,t,i){return function eEe(n,e,t){const r=new xN("",`in ${n} ${e} in ${t}`);return new vl(new wy(r,-1,-1,-1),new wy(r,-1,-1,-1))}(e,t,i)}jitExpression(e,t,i,r){const o=[...r,new Bh("$def",e,void 0,ih.Exported)];return this.jitEvaluator.evaluateStatements(i,o,new cEe(t),!0).$def}}function zW(n){return{...n,predicate:VW(n.predicate),read:n.read?new Vo(n.read):null,static:n.static,emitDistinctChangesOnly:n.emitDistinctChangesOnly}}function $W(n){return{propertyName:n.propertyName,first:n.first??!1,predicate:VW(n.predicate),descendants:n.descendants??!1,read:n.read?new Vo(n.read):null,static:n.static??!1,emitDistinctChangesOnly:n.emitDistinctChangesOnly??!0}}function VW(n){return Array.isArray(n)?n:aN(new Vo(n),1)}function UW(n){const e=function eAe(n){return n.reduce((e,t)=>{if("string"==typeof t){const[i,r]=KW(t);e[r]={bindingPropertyName:i,classPropertyName:r,required:!1,transformFunction:null}}else e[t.name]={bindingPropertyName:t.alias||t.name,classPropertyName:t.name,required:t.required||!1,transformFunction:null!=t.transform?new Vo(t.transform):null};return e},{})}(n.inputs||[]),t=xF(n.outputs||[]),i=n.propMetadata,r={},o={};for(const a in i)i.hasOwnProperty(a)&&i[a].forEach(h=>{K2e(h)?r[a]={bindingPropertyName:h.alias||a,classPropertyName:a,required:h.required||!1,transformFunction:null!=h.transform?new Vo(h.transform):null}:Q2e(h)&&(o[a]=h.alias||a)});return{...n,typeArgumentCount:0,typeSourceSpan:n.typeSourceSpan,type:Iu(n.type),deps:null,host:X2e(n.propMetadata,n.typeSourceSpan,n.host),inputs:{...e,...r},outputs:{...t,...o},queries:n.queries.map(zW),providers:null!=n.providers?new Vo(n.providers):null,viewQueries:n.viewQueries.map(zW),fullInheritance:!1,hostDirectives:GW(n)}}function jW(n,e){return{name:n.type.name,type:Iu(n.type),typeSourceSpan:e,selector:n.selector??null,inputs:n.inputs?J2e(n.inputs):{},outputs:n.outputs??{},host:V2e(n.host),queries:(n.queries??[]).map($W),viewQueries:(n.viewQueries??[]).map($W),providers:void 0!==n.providers?new Vo(n.providers):null,exportAs:n.exportAs??null,usesInheritance:n.usesInheritance??!1,lifecycle:{usesOnChanges:n.usesOnChanges??!1},deps:null,typeArgumentCount:0,fullInheritance:!1,isStandalone:n.isStandalone??!1,isSignal:n.isSignal??!1,hostDirectives:GW(n)}}function V2e(n={}){return{attributes:U2e(n.attributes??{}),listeners:n.listeners??{},properties:n.properties??{},specialAttributes:{classAttr:n.classAttribute,styleAttr:n.styleAttribute}}}function GW(n){return n.hostDirectives?.length?n.hostDirectives.map(e=>"function"==typeof e?{directive:Iu(e),inputs:null,outputs:null,isForwardReference:!1}:{directive:Iu(e.directive),isForwardReference:!1,inputs:e.inputs?xF(e.inputs):null,outputs:e.outputs?xF(e.outputs):null}):null}function U2e(n){const e={};for(const t of Object.keys(n))e[t]=new Vo(n[t]);return e}function G2e(n){return{...n,type:new Vo(n.type)}}function bF(n,e=null){return{kind:Ey.Directive,isComponent:e||"component"===n.kind,selector:n.selector,type:new Vo(n.type),inputs:n.inputs??[],outputs:n.outputs??[],exportAs:n.exportAs??null}}function q2e(n){return{kind:Ey.Pipe,name:n.name,type:new Vo(n.type)}}function HW(n,e,t,i,r){const o=r?nA.fromArray(r):Ef,a=function d2e(n,e,t={}){const{interpolationConfig:i,preserveWhitespaces:r,enableI18nLegacyMessageIdFormat:o}=t,a=HA(i),m=(new W7).parse(n,e,{leadingTriviaChars:t2e,...t,tokenizeExpansionForms:!0,tokenizeBlocks:null!=t.enabledBlockTypes&&t.enabledBlockTypes.size>0});if(!t.alwaysAttemptHtmlToR3AstConversion&&m.errors&&m.errors.length>0){const Pe={interpolationConfig:i,preserveWhitespaces:r,errors:m.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(Pe.commentNodes=[]),Pe}let _=m.rootNodes;const C=new yW(i,!r,o),T=C.visitAllWithErrors(_);if(!t.alwaysAttemptHtmlToR3AstConversion&&T.errors&&T.errors.length>0){const Pe={interpolationConfig:i,preserveWhitespaces:r,errors:T.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(Pe.commentNodes=[]),Pe}_=T.rootNodes,r||(_=Jr(new K7,_),C.hasI18nMeta&&(_=Jr(new yW(i,!1),_)));const{nodes:P,errors:O,styleUrls:j,styles:q,ngContentSelectors:_e,commentNodes:me}=function vDe(n,e,t){const i=new yDe(e,t),a={nodes:Jr(i,n),errors:e.errors.concat(i.errors),styleUrls:i.styleUrls,styles:i.styles,ngContentSelectors:i.ngContentSelectors};return t.collectCommentNodes&&(a.commentNodes=i.commentNodes),a}(_,a,{collectCommentNodes:!!t.collectCommentNodes,enabledBlockTypes:t.enabledBlockTypes||new Set});O.push(...m.errors,...T.errors);const te={interpolationConfig:i,preserveWhitespaces:r,errors:O.length>0?O:null,nodes:P,styleUrls:j,styles:q,ngContentSelectors:_e};return t.collectCommentNodes&&(te.commentNodes=me),te}(n,t,{preserveWhitespaces:i,interpolationConfig:o,enabledBlockTypes:undefined});if(null!==a.errors){const h=a.errors.map(m=>m.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${h}`)}return{template:a,interpolation:o}}function xx(n,e){if(n.hasOwnProperty(e))return aN(new Vo(n[e]),0)}function qW(n,e){if(n.hasOwnProperty(e))return new Vo(n[e])}function WW(n){return aN("function"==typeof n?new Vo(n):new ou(n??null),0)}function XW(n){const e=null!=n.attribute,t=null===n.token?null:new Vo(n.token);return ZW(e?new Vo(n.attribute):t,e,n.host,n.optional,n.self,n.skipSelf)}function YW(n){const e=n.attribute??!1;return ZW(null===n.token?null:new Vo(n.token),e,n.host??!1,n.optional??!1,n.self??!1,n.skipSelf??!1)}function ZW(n,e,t,i,r,o){return{token:n,attributeNameType:e?Xt("unknown"):null,host:t,optional:i,self:r,skipSelf:o}}function X2e(n,e,t){const i=function L2e(n){const e={},t={},i={},r={};for(const o of Object.keys(n)){const a=n[o],h=o.match(O2e);if(null===h)switch(o){case"class":if("string"!=typeof a)throw new Error("Class binding must be string");r.classAttr=a;break;case"style":if("string"!=typeof a)throw new Error("Style binding must be string");r.styleAttr=a;break;default:e[o]="string"==typeof a?Xt(a):a}else if(null!=h[1]){if("string"!=typeof a)throw new Error("Property binding must be string");i[h[1]]=a}else if(null!=h[2]){if("string"!=typeof a)throw new Error("Event binding must be string");t[h[2]]=a}}return{attributes:e,listeners:t,properties:i,specialAttributes:r}}(t||{}),r=function N2e(n,e){const t=HA();return t.createDirectiveHostEventAsts(n.listeners,e),t.createBoundHostProperties(n.properties,e),t.errors}(i,e);if(r.length)throw new Error(r.map(o=>o.msg).join("\n"));for(const o in n)n.hasOwnProperty(o)&&n[o].forEach(a=>{Y2e(a)?i.properties[a.hostPropertyName||o]=G1e("this",o):Z2e(a)&&(i.listeners[a.eventName||o]=`${o}(${(a.args||[]).join(",")})`)});return i}function Y2e(n){return"HostBinding"===n.ngMetadataName}function Z2e(n){return"HostListener"===n.ngMetadataName}function K2e(n){return"Input"===n.ngMetadataName}function Q2e(n){return"Output"===n.ngMetadataName}function J2e(n){return Object.keys(n).reduce((e,t)=>{const i=n[t];return e[t]="string"==typeof i?{bindingPropertyName:i,classPropertyName:i,transformFunction:null,required:!1}:{bindingPropertyName:i[0],classPropertyName:i[1],transformFunction:i[2]?new Vo(i[2]):null,required:!1},e},{})}function xF(n){return n.reduce((e,t)=>{const[i,r]=KW(t);return e[r]=i,e},{})}function KW(n){const[e,t]=n.split(":",2).map(i=>i.trim());return[t??e,e]}new class R1e{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}("16.2.9"),new class pAe{constructor(){this.closedByParent=!1,this.implicitNamespacePrefix=null,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return am.PARSABLE_DATA}},function iAe(n){(n.ng||(n.ng={})).\u0275compilerFacade=new $2e}(Qb),window.console.log=()=>{},Qte().bootstrapModule(Uxe).then(()=>IH(window)).catch(n=>console.error(n)),IH(window)},1568:(An,Rt,Ce)=>{"use strict";var Le=Ce(8570);function Je(g){var fe=[1/0,1/0,-1/0,-1/0];return Le.coordEach(g,function(Ne){fe[0]>Ne[0]&&(fe[0]=Ne[0]),fe[1]>Ne[1]&&(fe[1]=Ne[1]),fe[2]<Ne[0]&&(fe[2]=Ne[0]),fe[3]<Ne[1]&&(fe[3]=Ne[1])}),fe}Je.default=Je,Rt.Z=Je},621:(An,Rt)=>{"use strict";function Ce(se,be,ie){void 0===ie&&(ie={});var Ve={type:"Feature"};return(0===ie.id||ie.id)&&(Ve.id=ie.id),ie.bbox&&(Ve.bbox=ie.bbox),Ve.properties=be||{},Ve.geometry=se,Ve}function Le(se,be,ie){if(void 0===ie&&(ie={}),!se)throw new Error("coordinates is required");if(!Array.isArray(se))throw new Error("coordinates must be an Array");if(se.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!K(se[0])||!K(se[1]))throw new Error("coordinates must contain numbers");return Ce({type:"Point",coordinates:se},be,ie)}function g(se,be,ie){void 0===ie&&(ie={});for(var Ve=0,Se=se;Ve<Se.length;Ve++){var Y=Se[Ve];if(Y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ge=0;Ge<Y[Y.length-1].length;Ge++)if(Y[Y.length-1][Ge]!==Y[0][Ge])throw new Error("First and last Position are not equivalent.")}return Ce({type:"Polygon",coordinates:se},be,ie)}function Ne(se,be,ie){if(void 0===ie&&(ie={}),se.length<2)throw new Error("coordinates must be an array of two or more positions");return Ce({type:"LineString",coordinates:se},be,ie)}function He(se,be){void 0===be&&(be={});var ie={type:"FeatureCollection"};return be.id&&(ie.id=be.id),be.bbox&&(ie.bbox=be.bbox),ie.features=se,ie}function ct(se,be,ie){return void 0===ie&&(ie={}),Ce({type:"MultiLineString",coordinates:se},be,ie)}function Ht(se,be,ie){return void 0===ie&&(ie={}),Ce({type:"MultiPoint",coordinates:se},be,ie)}function qe(se,be,ie){return void 0===ie&&(ie={}),Ce({type:"MultiPolygon",coordinates:se},be,ie)}function Nt(se,be){void 0===be&&(be="kilometers");var ie=Rt.factors[be];if(!ie)throw new Error(be+" units is invalid");return se*ie}function le(se,be){void 0===be&&(be="kilometers");var ie=Rt.factors[be];if(!ie)throw new Error(be+" units is invalid");return se/ie}function Z(se){return se%(2*Math.PI)*180/Math.PI}function K(se){return!isNaN(se)&&null!==se&&!Array.isArray(se)}Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.earthRadius=6371008.8,Rt.factors={centimeters:100*Rt.earthRadius,centimetres:100*Rt.earthRadius,degrees:Rt.earthRadius/111325,feet:3.28084*Rt.earthRadius,inches:39.37*Rt.earthRadius,kilometers:Rt.earthRadius/1e3,kilometres:Rt.earthRadius/1e3,meters:Rt.earthRadius,metres:Rt.earthRadius,miles:Rt.earthRadius/1609.344,millimeters:1e3*Rt.earthRadius,millimetres:1e3*Rt.earthRadius,nauticalmiles:Rt.earthRadius/1852,radians:1,yards:1.0936*Rt.earthRadius},Rt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Rt.earthRadius,yards:1.0936133},Rt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Rt.feature=Ce,Rt.geometry=function ue(se,be,ie){switch(void 0===ie&&(ie={}),se){case"Point":return Le(be).geometry;case"LineString":return Ne(be).geometry;case"Polygon":return g(be).geometry;case"MultiPoint":return Ht(be).geometry;case"MultiLineString":return ct(be).geometry;case"MultiPolygon":return qe(be).geometry;default:throw new Error(se+" is invalid")}},Rt.point=Le,Rt.points=function Je(se,be,ie){return void 0===ie&&(ie={}),He(se.map(function(Ve){return Le(Ve,be)}),ie)},Rt.polygon=g,Rt.polygons=function fe(se,be,ie){return void 0===ie&&(ie={}),He(se.map(function(Ve){return g(Ve,be)}),ie)},Rt.lineString=Ne,Rt.lineStrings=function Oe(se,be,ie){return void 0===ie&&(ie={}),He(se.map(function(Ve){return Ne(Ve,be)}),ie)},Rt.featureCollection=He,Rt.multiLineString=ct,Rt.multiPoint=Ht,Rt.multiPolygon=qe,Rt.geometryCollection=function Qe(se,be,ie){return void 0===ie&&(ie={}),Ce({type:"GeometryCollection",geometries:se},be,ie)},Rt.round=function je(se,be){if(void 0===be&&(be=0),be&&!(be>=0))throw new Error("precision must be a positive number");var ie=Math.pow(10,be||0);return Math.round(se*ie)/ie},Rt.radiansToLength=Nt,Rt.lengthToRadians=le,Rt.lengthToDegrees=function we(se,be){return Z(le(se,be))},Rt.bearingToAzimuth=function J(se){var be=se%360;return be<0&&(be+=360),be},Rt.radiansToDegrees=Z,Rt.degreesToRadians=function ee(se){return se%360*Math.PI/180},Rt.convertLength=function ke(se,be,ie){if(void 0===be&&(be="kilometers"),void 0===ie&&(ie="kilometers"),!(se>=0))throw new Error("length must be a positive number");return Nt(le(se,be),ie)},Rt.convertArea=function ne(se,be,ie){if(void 0===be&&(be="meters"),void 0===ie&&(ie="kilometers"),!(se>=0))throw new Error("area must be a positive number");var Ve=Rt.areaFactors[be];if(!Ve)throw new Error("invalid original units");var Se=Rt.areaFactors[ie];if(!Se)throw new Error("invalid final units");return se/Ve*Se},Rt.isNumber=K,Rt.isObject=function ye(se){return!!se&&se.constructor===Object},Rt.validateBBox=function Q(se){if(!se)throw new Error("bbox is required");if(!Array.isArray(se))throw new Error("bbox must be an Array");if(4!==se.length&&6!==se.length)throw new Error("bbox must be an Array of 4 or 6 numbers");se.forEach(function(be){if(!K(be))throw new Error("bbox must only contain numbers")})},Rt.validateId=function he(se){if(!se)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof se))throw new Error("id must be a number or a string")}},8570:(An,Rt,Ce)=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});var ue=Ce(621);function Le(ee,ke,ne){if(null!==ee)for(var K,ye,Q,he,se,be,ie,Y,Ve=0,Se=0,Ge=ee.type,De="FeatureCollection"===Ge,Ke="Feature"===Ge,$e=De?ee.features.length:1,ae=0;ae<$e;ae++){se=(Y=!!(ie=De?ee.features[ae].geometry:Ke?ee.geometry:ee)&&"GeometryCollection"===ie.type)?ie.geometries.length:1;for(var Ze=0;Ze<se;Ze++){var et=0,dn=0;if(null!==(he=Y?ie.geometries[Ze]:ie)){be=he.coordinates;var qt=he.type;switch(Ve=!ne||"Polygon"!==qt&&"MultiPolygon"!==qt?0:1,qt){case null:break;case"Point":if(!1===ke(be,Se,ae,et,dn))return!1;Se++,et++;break;case"LineString":case"MultiPoint":for(K=0;K<be.length;K++){if(!1===ke(be[K],Se,ae,et,dn))return!1;Se++,"MultiPoint"===qt&&et++}"LineString"===qt&&et++;break;case"Polygon":case"MultiLineString":for(K=0;K<be.length;K++){for(ye=0;ye<be[K].length-Ve;ye++){if(!1===ke(be[K][ye],Se,ae,et,dn))return!1;Se++}"MultiLineString"===qt&&et++,"Polygon"===qt&&dn++}"Polygon"===qt&&et++;break;case"MultiPolygon":for(K=0;K<be.length;K++){for(dn=0,ye=0;ye<be[K].length;ye++){for(Q=0;Q<be[K][ye].length-Ve;Q++){if(!1===ke(be[K][ye][Q],Se,ae,et,dn))return!1;Se++}dn++}et++}break;case"GeometryCollection":for(K=0;K<he.geometries.length;K++)if(!1===Le(he.geometries[K],ke,ne))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g(ee,ke){var ne;switch(ee.type){case"FeatureCollection":for(ne=0;ne<ee.features.length&&!1!==ke(ee.features[ne].properties,ne);ne++);break;case"Feature":ke(ee.properties,0)}}function Ne(ee,ke){if("Feature"===ee.type)ke(ee,0);else if("FeatureCollection"===ee.type)for(var ne=0;ne<ee.features.length&&!1!==ke(ee.features[ne],ne);ne++);}function ct(ee,ke){var ne,K,ye,Q,he,se,be,ie,Ve,Se,Y=0,Ge="FeatureCollection"===ee.type,De="Feature"===ee.type,Ke=Ge?ee.features.length:1;for(ne=0;ne<Ke;ne++){for(ie=Ge?ee.features[ne].properties:De?ee.properties:{},Ve=Ge?ee.features[ne].bbox:De?ee.bbox:void 0,Se=Ge?ee.features[ne].id:De?ee.id:void 0,he=(be=!!(se=Ge?ee.features[ne].geometry:De?ee.geometry:ee)&&"GeometryCollection"===se.type)?se.geometries.length:1,ye=0;ye<he;ye++)if(null!==(Q=be?se.geometries[ye]:se))switch(Q.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===ke(Q,Y,ie,Ve,Se))return!1;break;case"GeometryCollection":for(K=0;K<Q.geometries.length;K++)if(!1===ke(Q.geometries[K],Y,ie,Ve,Se))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===ke(null,Y,ie,Ve,Se))return!1;Y++}}function qe(ee,ke){ct(ee,function(ne,K,ye,Q,he){var be,se=null===ne?null:ne.type;switch(se){case null:case"Point":case"LineString":case"Polygon":return!1!==ke(ue.feature(ne,ye,{bbox:Q,id:he}),K,0)&&void 0}switch(se){case"MultiPoint":be="Point";break;case"MultiLineString":be="LineString";break;case"MultiPolygon":be="Polygon"}for(var ie=0;ie<ne.coordinates.length;ie++)if(!1===ke(ue.feature({type:be,coordinates:ne.coordinates[ie]},ye),K,ie))return!1})}function je(ee,ke){qe(ee,function(ne,K,ye){var Q=0;if(ne.geometry){var he=ne.geometry.type;if("Point"!==he&&"MultiPoint"!==he){var se,be=0,ie=0,Ve=0;if(!1===Le(ne,function(Se,Y,Ge,De,Ke){if(void 0===se||K>be||De>ie||Ke>Ve)return se=Se,be=K,ie=De,Ve=Ke,void(Q=0);var $e=ue.lineString([se,Se],ne.properties);if(!1===ke($e,K,ye,Ke,Q))return!1;Q++,se=Se}))return!1}}})}function le(ee,ke){if(!ee)throw new Error("geojson is required");qe(ee,function(ne,K,ye){if(null!==ne.geometry){var he=ne.geometry.coordinates;switch(ne.geometry.type){case"LineString":if(!1===ke(ne,K,ye,0,0))return!1;break;case"Polygon":for(var se=0;se<he.length;se++)if(!1===ke(ue.lineString(he[se],ne.properties),K,ye,se))return!1}}})}Rt.coordAll=function He(ee){var ke=[];return Le(ee,function(ne){ke.push(ne)}),ke},Rt.coordEach=Le,Rt.coordReduce=function Je(ee,ke,ne,K){var ye=ne;return Le(ee,function(Q,he,se,be,ie){ye=0===he&&void 0===ne?Q:ke(ye,Q,he,se,be,ie)},K),ye},Rt.featureEach=Ne,Rt.featureReduce=function Oe(ee,ke,ne){var K=ne;return Ne(ee,function(ye,Q){K=0===Q&&void 0===ne?ye:ke(K,ye,Q)}),K},Rt.findPoint=function Z(ee,ke){if(!ue.isObject(ke=ke||{}))throw new Error("options is invalid");var se,ne=ke.featureIndex||0,K=ke.multiFeatureIndex||0,ye=ke.geometryIndex||0,Q=ke.coordIndex||0,he=ke.properties;switch(ee.type){case"FeatureCollection":ne<0&&(ne=ee.features.length+ne),he=he||ee.features[ne].properties,se=ee.features[ne].geometry;break;case"Feature":he=he||ee.properties,se=ee.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":se=ee;break;default:throw new Error("geojson is invalid")}if(null===se)return null;var be=se.coordinates;switch(se.type){case"Point":return ue.point(be,he,ke);case"MultiPoint":return K<0&&(K=be.length+K),ue.point(be[K],he,ke);case"LineString":return Q<0&&(Q=be.length+Q),ue.point(be[Q],he,ke);case"Polygon":return ye<0&&(ye=be.length+ye),Q<0&&(Q=be[ye].length+Q),ue.point(be[ye][Q],he,ke);case"MultiLineString":return K<0&&(K=be.length+K),Q<0&&(Q=be[K].length+Q),ue.point(be[K][Q],he,ke);case"MultiPolygon":return K<0&&(K=be.length+K),ye<0&&(ye=be[K].length+ye),Q<0&&(Q=be[K][ye].length-Q),ue.point(be[K][ye][Q],he,ke)}throw new Error("geojson is invalid")},Rt.findSegment=function J(ee,ke){if(!ue.isObject(ke=ke||{}))throw new Error("options is invalid");var se,ne=ke.featureIndex||0,K=ke.multiFeatureIndex||0,ye=ke.geometryIndex||0,Q=ke.segmentIndex||0,he=ke.properties;switch(ee.type){case"FeatureCollection":ne<0&&(ne=ee.features.length+ne),he=he||ee.features[ne].properties,se=ee.features[ne].geometry;break;case"Feature":he=he||ee.properties,se=ee.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":se=ee;break;default:throw new Error("geojson is invalid")}if(null===se)return null;var be=se.coordinates;switch(se.type){case"Point":case"MultiPoint":return null;case"LineString":return Q<0&&(Q=be.length+Q-1),ue.lineString([be[Q],be[Q+1]],he,ke);case"Polygon":return ye<0&&(ye=be.length+ye),Q<0&&(Q=be[ye].length+Q-1),ue.lineString([be[ye][Q],be[ye][Q+1]],he,ke);case"MultiLineString":return K<0&&(K=be.length+K),Q<0&&(Q=be[K].length+Q-1),ue.lineString([be[K][Q],be[K][Q+1]],he,ke);case"MultiPolygon":return K<0&&(K=be.length+K),ye<0&&(ye=be[K].length+ye),Q<0&&(Q=be[K][ye].length-Q-1),ue.lineString([be[K][ye][Q],be[K][ye][Q+1]],he,ke)}throw new Error("geojson is invalid")},Rt.flattenEach=qe,Rt.flattenReduce=function Qe(ee,ke,ne){var K=ne;return qe(ee,function(ye,Q,he){K=0===Q&&0===he&&void 0===ne?ye:ke(K,ye,Q,he)}),K},Rt.geomEach=ct,Rt.geomReduce=function Ht(ee,ke,ne){var K=ne;return ct(ee,function(ye,Q,he,se,be){K=0===Q&&void 0===ne?ye:ke(K,ye,Q,he,se,be)}),K},Rt.lineEach=le,Rt.lineReduce=function we(ee,ke,ne){var K=ne;return le(ee,function(ye,Q,he,se){K=0===Q&&void 0===ne?ye:ke(K,ye,Q,he,se)}),K},Rt.propEach=g,Rt.propReduce=function fe(ee,ke,ne){var K=ne;return g(ee,function(ye,Q){K=0===Q&&void 0===ne?ye:ke(K,ye,Q)}),K},Rt.segmentEach=je,Rt.segmentReduce=function Nt(ee,ke,ne){var K=ne,ye=!1;return je(ee,function(Q,he,se,be,ie){K=!1===ye&&void 0===ne?Q:ke(K,Q,he,se,be,ie),ye=!0}),K}},1098:(An,Rt,Ce)=>{"use strict";var ue=Ce(491),Le=Ce(5436),Je=Le(ue("String.prototype.indexOf"));An.exports=function(fe,Ne){var Oe=ue(fe,!!Ne);return"function"==typeof Oe&&Je(fe,".prototype.")>-1?Le(Oe):Oe}},5436:(An,Rt,Ce)=>{"use strict";var ue=Ce(5333),Le=Ce(491),Je=Le("%Function.prototype.apply%"),g=Le("%Function.prototype.call%"),fe=Le("%Reflect.apply%",!0)||ue.call(g,Je),Ne=Le("%Object.getOwnPropertyDescriptor%",!0),Oe=Le("%Object.defineProperty%",!0),He=Le("%Math.max%");if(Oe)try{Oe({},"a",{value:1})}catch{Oe=null}An.exports=function(qe){var Qe=fe(ue,g,arguments);return Ne&&Oe&&Ne(Qe,"length").configurable&&Oe(Qe,"length",{value:1+He(0,qe.length-(arguments.length-1))}),Qe};var ct=function(){return fe(ue,Je,arguments)};Oe?Oe(An.exports,"apply",{value:ct}):An.exports.apply=ct},3664:(An,Rt,Ce)=>{"use strict";var ue=Ce(938),Le=Ce(7935),Je=Ce(4179),g=Ce(6138).orient2d;function fe(ne,K,ye){K=Math.max(0,void 0===K?2:K),ye=ye||0;var Q=function Nt(ne){for(var K=ne[0],ye=ne[0],Q=ne[0],he=ne[0],se=0;se<ne.length;se++){var be=ne[se];be[0]<K[0]&&(K=be),be[0]>Q[0]&&(Q=be),be[1]<ye[1]&&(ye=be),be[1]>he[1]&&(he=be)}var ie=[K,ye,Q,he],Ve=ie.slice();for(se=0;se<ne.length;se++)Je(ne[se],ie)||Ve.push(ne[se]);return function ke(ne){ne.sort(ee);for(var K=[],ye=0;ye<ne.length;ye++){for(;K.length>=2&&qe(K[K.length-2],K[K.length-1],ne[ye])<=0;)K.pop();K.push(ne[ye])}for(var Q=[],he=ne.length-1;he>=0;he--){for(;Q.length>=2&&qe(Q[Q.length-2],Q[Q.length-1],ne[he])<=0;)Q.pop();Q.push(ne[he])}return Q.pop(),K.pop(),K.concat(Q)}(Ve)}(ne),he=new ue(16);he.toBBox=function(dn){return{minX:dn[0],minY:dn[1],maxX:dn[0],maxY:dn[1]}},he.compareMinX=function(dn,qt){return dn[0]-qt[0]},he.compareMinY=function(dn,qt){return dn[1]-qt[1]},he.load(ne);for(var ie,se=[],be=0;be<Q.length;be++){var Ve=Q[be];he.remove(Ve),ie=le(Ve,ie),se.push(ie)}var Se=new ue(16);for(be=0;be<se.length;be++)Se.insert(je(se[be]));for(var Y=K*K,Ge=ye*ye;se.length;){var De=se.shift(),Ke=De.p,$e=De.next.p,ae=we(Ke,$e);if(!(ae<Ge)){var Ze=ae/Y;(Ve=Ne(he,De.prev.p,Ke,$e,De.next.next.p,Ze,Se))&&Math.min(we(Ve,Ke),we(Ve,$e))<=Ze&&(se.push(De),se.push(le(Ve,De)),he.remove(Ve),Se.remove(De),Se.insert(je(De)),Se.insert(je(De.next)))}}De=ie;var et=[];do{et.push(De.p),De=De.next}while(De!==ie);return et.push(De.p),et}function Ne(ne,K,ye,Q,he,se,be){for(var ie=new Le([],Oe),Ve=ne.data;Ve;){for(var Se=0;Se<Ve.children.length;Se++){var Y=Ve.children[Se],Ge=Ve.leaf?J(Y,ye,Q):He(ye,Q,Y);Ge>se||ie.push({node:Y,dist:Ge})}for(;ie.length&&!ie.peek().node.children;){var De=ie.pop(),Ke=De.node,$e=J(Ke,K,ye),ae=J(Ke,Q,he);if(De.dist<$e&&De.dist<ae&&Ht(ye,Ke,be)&&Ht(Q,Ke,be))return Ke}(Ve=ie.pop())&&(Ve=Ve.node)}return null}function Oe(ne,K){return ne.dist-K.dist}function He(ne,K,ye){if(ct(ne,ye)||ct(K,ye))return 0;var Q=Z(ne[0],ne[1],K[0],K[1],ye.minX,ye.minY,ye.maxX,ye.minY);if(0===Q)return 0;var he=Z(ne[0],ne[1],K[0],K[1],ye.minX,ye.minY,ye.minX,ye.maxY);if(0===he)return 0;var se=Z(ne[0],ne[1],K[0],K[1],ye.maxX,ye.minY,ye.maxX,ye.maxY);if(0===se)return 0;var be=Z(ne[0],ne[1],K[0],K[1],ye.minX,ye.maxY,ye.maxX,ye.maxY);return 0===be?0:Math.min(Q,he,se,be)}function ct(ne,K){return ne[0]>=K.minX&&ne[0]<=K.maxX&&ne[1]>=K.minY&&ne[1]<=K.maxY}function Ht(ne,K,ye){for(var Q=Math.min(ne[0],K[0]),he=Math.min(ne[1],K[1]),se=Math.max(ne[0],K[0]),be=Math.max(ne[1],K[1]),ie=ye.search({minX:Q,minY:he,maxX:se,maxY:be}),Ve=0;Ve<ie.length;Ve++)if(Qe(ie[Ve].p,ie[Ve].next.p,ne,K))return!1;return!0}function qe(ne,K,ye){return g(ne[0],ne[1],K[0],K[1],ye[0],ye[1])}function Qe(ne,K,ye,Q){return ne!==Q&&K!==ye&&qe(ne,K,ye)>0!=qe(ne,K,Q)>0&&qe(ye,Q,ne)>0!=qe(ye,Q,K)>0}function je(ne){var K=ne.p,ye=ne.next.p;return ne.minX=Math.min(K[0],ye[0]),ne.minY=Math.min(K[1],ye[1]),ne.maxX=Math.max(K[0],ye[0]),ne.maxY=Math.max(K[1],ye[1]),ne}function le(ne,K){var ye={p:ne,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return K?(ye.next=K.next,ye.prev=K,K.next.prev=ye,K.next=ye):(ye.prev=ye,ye.next=ye),ye}function we(ne,K){var ye=ne[0]-K[0],Q=ne[1]-K[1];return ye*ye+Q*Q}function J(ne,K,ye){var Q=K[0],he=K[1],se=ye[0]-Q,be=ye[1]-he;if(0!==se||0!==be){var ie=((ne[0]-Q)*se+(ne[1]-he)*be)/(se*se+be*be);ie>1?(Q=ye[0],he=ye[1]):ie>0&&(Q+=se*ie,he+=be*ie)}return(se=ne[0]-Q)*se+(be=ne[1]-he)*be}function Z(ne,K,ye,Q,he,se,be,ie){var _n,kn,ei,Vt,Ve=ye-ne,Se=Q-K,Y=be-he,Ge=ie-se,De=ne-he,Ke=K-se,$e=Ve*Ve+Se*Se,ae=Ve*Y+Se*Ge,Ze=Y*Y+Ge*Ge,et=Ve*De+Se*Ke,dn=Y*De+Ge*Ke,qt=$e*Ze-ae*ae,vi=qt,Tn=qt;0===qt?(kn=0,vi=1,Vt=dn,Tn=Ze):(Vt=$e*dn-ae*et,(kn=ae*dn-Ze*et)<0?(kn=0,Vt=dn,Tn=Ze):kn>vi&&(kn=vi,Vt=dn+ae,Tn=Ze)),Vt<0?(Vt=0,-et<0?kn=0:-et>$e?kn=vi:(kn=-et,vi=$e)):Vt>Tn&&(Vt=Tn,-et+ae<0?kn=0:-et+ae>$e?kn=vi:(kn=-et+ae,vi=$e));var Gn=(1-(ei=0===Vt?0:Vt/Tn))*he+ei*be-((1-(_n=0===kn?0:kn/vi))*ne+_n*ye),At=(1-ei)*se+ei*ie-((1-_n)*K+_n*Q);return Gn*Gn+At*At}function ee(ne,K){return ne[0]===K[0]?ne[1]-K[1]:ne[0]-K[0]}Le.default&&(Le=Le.default),An.exports=fe,An.exports.default=fe},938:function(An){An.exports=function(){"use strict";function Rt(le,we,J,Z,ee){!function ke(ne,K,ye,Q,he){for(;Q>ye;){if(Q-ye>600){var se=Q-ye+1,be=K-ye+1,ie=Math.log(se),Ve=.5*Math.exp(2*ie/3),Se=.5*Math.sqrt(ie*Ve*(se-Ve)/se)*(be-se/2<0?-1:1);ke(ne,K,Math.max(ye,Math.floor(K-be*Ve/se+Se)),Math.min(Q,Math.floor(K+(se-be)*Ve/se+Se)),he)}var De=ne[K],Ke=ye,$e=Q;for(Ce(ne,ye,K),he(ne[Q],De)>0&&Ce(ne,ye,Q);Ke<$e;){for(Ce(ne,Ke,$e),Ke++,$e--;he(ne[Ke],De)<0;)Ke++;for(;he(ne[$e],De)>0;)$e--}0===he(ne[ye],De)?Ce(ne,ye,$e):Ce(ne,++$e,Q),$e<=K&&(ye=$e+1),K<=$e&&(Q=$e-1)}}(le,we,J||0,Z||le.length-1,ee||ue)}function Ce(le,we,J){var Z=le[we];le[we]=le[J],le[J]=Z}function ue(le,we){return le<we?-1:le>we?1:0}var Le=function(le){void 0===le&&(le=9),this._maxEntries=Math.max(4,le),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Je(le,we,J){if(!J)return we.indexOf(le);for(var Z=0;Z<we.length;Z++)if(J(le,we[Z]))return Z;return-1}function g(le,we){fe(le,0,le.children.length,we,le)}function fe(le,we,J,Z,ee){ee||(ee=je(null)),ee.minX=1/0,ee.minY=1/0,ee.maxX=-1/0,ee.maxY=-1/0;for(var ke=we;ke<J;ke++){var ne=le.children[ke];Ne(ee,le.leaf?Z(ne):ne)}return ee}function Ne(le,we){return le.minX=Math.min(le.minX,we.minX),le.minY=Math.min(le.minY,we.minY),le.maxX=Math.max(le.maxX,we.maxX),le.maxY=Math.max(le.maxY,we.maxY),le}function Oe(le,we){return le.minX-we.minX}function He(le,we){return le.minY-we.minY}function ct(le){return(le.maxX-le.minX)*(le.maxY-le.minY)}function Ht(le){return le.maxX-le.minX+(le.maxY-le.minY)}function qe(le,we){return le.minX<=we.minX&&le.minY<=we.minY&&we.maxX<=le.maxX&&we.maxY<=le.maxY}function Qe(le,we){return we.minX<=le.maxX&&we.minY<=le.maxY&&we.maxX>=le.minX&&we.maxY>=le.minY}function je(le){return{children:le,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Nt(le,we,J,Z,ee){for(var ke=[we,J];ke.length;)if(!((J=ke.pop())-(we=ke.pop())<=Z)){var ne=we+Math.ceil((J-we)/Z/2)*Z;Rt(le,ne,we,J,ee),ke.push(we,ne,ne,J)}}return Le.prototype.all=function(){return this._all(this.data,[])},Le.prototype.search=function(le){var we=this.data,J=[];if(!Qe(le,we))return J;for(var Z=this.toBBox,ee=[];we;){for(var ke=0;ke<we.children.length;ke++){var ne=we.children[ke],K=we.leaf?Z(ne):ne;Qe(le,K)&&(we.leaf?J.push(ne):qe(le,K)?this._all(ne,J):ee.push(ne))}we=ee.pop()}return J},Le.prototype.collides=function(le){var we=this.data;if(!Qe(le,we))return!1;for(var J=[];we;){for(var Z=0;Z<we.children.length;Z++){var ee=we.children[Z],ke=we.leaf?this.toBBox(ee):ee;if(Qe(le,ke)){if(we.leaf||qe(le,ke))return!0;J.push(ee)}}we=J.pop()}return!1},Le.prototype.load=function(le){if(!le||!le.length)return this;if(le.length<this._minEntries){for(var we=0;we<le.length;we++)this.insert(le[we]);return this}var J=this._build(le.slice(),0,le.length-1,0);if(this.data.children.length)if(this.data.height===J.height)this._splitRoot(this.data,J);else{if(this.data.height<J.height){var Z=this.data;this.data=J,J=Z}this._insert(J,this.data.height-J.height-1,!0)}else this.data=J;return this},Le.prototype.insert=function(le){return le&&this._insert(le,this.data.height-1),this},Le.prototype.clear=function(){return this.data=je([]),this},Le.prototype.remove=function(le,we){if(!le)return this;for(var J,Z,ee,ke=this.data,ne=this.toBBox(le),K=[],ye=[];ke||K.length;){if(ke||(ke=K.pop(),Z=K[K.length-1],J=ye.pop(),ee=!0),ke.leaf){var Q=Je(le,ke.children,we);if(-1!==Q)return ke.children.splice(Q,1),K.push(ke),this._condense(K),this}ee||ke.leaf||!qe(ke,ne)?Z?(J++,ke=Z.children[J],ee=!1):ke=null:(K.push(ke),ye.push(J),J=0,Z=ke,ke=ke.children[0])}return this},Le.prototype.toBBox=function(le){return le},Le.prototype.compareMinX=function(le,we){return le.minX-we.minX},Le.prototype.compareMinY=function(le,we){return le.minY-we.minY},Le.prototype.toJSON=function(){return this.data},Le.prototype.fromJSON=function(le){return this.data=le,this},Le.prototype._all=function(le,we){for(var J=[];le;)le.leaf?we.push.apply(we,le.children):J.push.apply(J,le.children),le=J.pop();return we},Le.prototype._build=function(le,we,J,Z){var ee,ke=J-we+1,ne=this._maxEntries;if(ke<=ne)return g(ee=je(le.slice(we,J+1)),this.toBBox),ee;Z||(Z=Math.ceil(Math.log(ke)/Math.log(ne)),ne=Math.ceil(ke/Math.pow(ne,Z-1))),(ee=je([])).leaf=!1,ee.height=Z;var K=Math.ceil(ke/ne),ye=K*Math.ceil(Math.sqrt(ne));Nt(le,we,J,ye,this.compareMinX);for(var Q=we;Q<=J;Q+=ye){var he=Math.min(Q+ye-1,J);Nt(le,Q,he,K,this.compareMinY);for(var se=Q;se<=he;se+=K){var be=Math.min(se+K-1,he);ee.children.push(this._build(le,se,be,Z-1))}}return g(ee,this.toBBox),ee},Le.prototype._chooseSubtree=function(le,we,J,Z){for(;Z.push(we),!we.leaf&&Z.length-1!==J;){for(var ee=1/0,ke=1/0,ne=void 0,K=0;K<we.children.length;K++){var ye=we.children[K],Q=ct(ye),he=(se=le,be=ye,(Math.max(be.maxX,se.maxX)-Math.min(be.minX,se.minX))*(Math.max(be.maxY,se.maxY)-Math.min(be.minY,se.minY))-Q);he<ke?(ke=he,ee=Q<ee?Q:ee,ne=ye):he===ke&&Q<ee&&(ee=Q,ne=ye)}we=ne||we.children[0]}var se,be;return we},Le.prototype._insert=function(le,we,J){var Z=J?le:this.toBBox(le),ee=[],ke=this._chooseSubtree(Z,this.data,we,ee);for(ke.children.push(le),Ne(ke,Z);we>=0&&ee[we].children.length>this._maxEntries;)this._split(ee,we),we--;this._adjustParentBBoxes(Z,ee,we)},Le.prototype._split=function(le,we){var J=le[we],Z=J.children.length,ee=this._minEntries;this._chooseSplitAxis(J,ee,Z);var ke=this._chooseSplitIndex(J,ee,Z),ne=je(J.children.splice(ke,J.children.length-ke));ne.height=J.height,ne.leaf=J.leaf,g(J,this.toBBox),g(ne,this.toBBox),we?le[we-1].children.push(ne):this._splitRoot(J,ne)},Le.prototype._splitRoot=function(le,we){this.data=je([le,we]),this.data.height=le.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},Le.prototype._chooseSplitIndex=function(le,we,J){for(var Z,ee,ke,ne,K,ye,Q,he=1/0,se=1/0,be=we;be<=J-we;be++){var ie=fe(le,0,be,this.toBBox),Ve=fe(le,be,J,this.toBBox),Se=(ee=ie,ke=Ve,void 0,void 0,void 0,void 0,ne=Math.max(ee.minX,ke.minX),K=Math.max(ee.minY,ke.minY),ye=Math.min(ee.maxX,ke.maxX),Q=Math.min(ee.maxY,ke.maxY),Math.max(0,ye-ne)*Math.max(0,Q-K)),Y=ct(ie)+ct(Ve);Se<he?(he=Se,Z=be,se=Y<se?Y:se):Se===he&&Y<se&&(se=Y,Z=be)}return Z||J-we},Le.prototype._chooseSplitAxis=function(le,we,J){var Z=le.leaf?this.compareMinX:Oe,ee=le.leaf?this.compareMinY:He;this._allDistMargin(le,we,J,Z)<this._allDistMargin(le,we,J,ee)&&le.children.sort(Z)},Le.prototype._allDistMargin=function(le,we,J,Z){le.children.sort(Z);for(var ee=this.toBBox,ke=fe(le,0,we,ee),ne=fe(le,J-we,J,ee),K=Ht(ke)+Ht(ne),ye=we;ye<J-we;ye++){var Q=le.children[ye];Ne(ke,le.leaf?ee(Q):Q),K+=Ht(ke)}for(var he=J-we-1;he>=we;he--){var se=le.children[he];Ne(ne,le.leaf?ee(se):se),K+=Ht(ne)}return K},Le.prototype._adjustParentBBoxes=function(le,we,J){for(var Z=J;Z>=0;Z--)Ne(we[Z],le)},Le.prototype._condense=function(le){for(var we=le.length-1,J=void 0;we>=0;we--)0===le[we].children.length?we>0?(J=le[we-1].children).splice(J.indexOf(le[we]),1):this.clear():g(le[we],this.toBBox)},Le}()},3970:(An,Rt,Ce)=>{var ue=Ce(7809),Le=Ce(8147),Je=Ce(314),g=Ce(4720),fe=Ce(1139),Ne=Ce(2365),Oe=Date.prototype.getTime;function ct(Qe){return null==Qe}function Ht(Qe){return!(!Qe||"object"!=typeof Qe||"number"!=typeof Qe.length||"function"!=typeof Qe.copy||"function"!=typeof Qe.slice||Qe.length>0&&"number"!=typeof Qe[0])}An.exports=function He(Qe,je,Nt){var le=Nt||{};return!!(le.strict?Je(Qe,je):Qe===je)||(!Qe||!je||"object"!=typeof Qe&&"object"!=typeof je?le.strict?Je(Qe,je):Qe==je:function qe(Qe,je,Nt){var le,we;if(typeof Qe!=typeof je||ct(Qe)||ct(je)||Qe.prototype!==je.prototype||Le(Qe)!==Le(je))return!1;var J=g(Qe),Z=g(je);if(J!==Z)return!1;if(J||Z)return Qe.source===je.source&&fe(Qe)===fe(je);if(Ne(Qe)&&Ne(je))return Oe.call(Qe)===Oe.call(je);var ee=Ht(Qe),ke=Ht(je);if(ee!==ke)return!1;if(ee||ke){if(Qe.length!==je.length)return!1;for(le=0;le<Qe.length;le++)if(Qe[le]!==je[le])return!1;return!0}if(typeof Qe!=typeof je)return!1;try{var ne=ue(Qe),K=ue(je)}catch{return!1}if(ne.length!==K.length)return!1;for(ne.sort(),K.sort(),le=ne.length-1;le>=0;le--)if(ne[le]!=K[le])return!1;for(le=ne.length-1;le>=0;le--)if(!He(Qe[we=ne[le]],je[we],Nt))return!1;return!0}(Qe,je,le))}},9224:(An,Rt,Ce)=>{"use strict";var ue=Ce(2486)(),Le=Ce(491),Je=ue&&Le("%Object.defineProperty%",!0);if(Je)try{Je({},"a",{value:1})}catch{Je=!1}var g=Le("%SyntaxError%"),fe=Le("%TypeError%"),Ne=Ce(9262);An.exports=function(He,ct,Ht){if(!He||"object"!=typeof He&&"function"!=typeof He)throw new fe("`obj` must be an object or a function`");if("string"!=typeof ct&&"symbol"!=typeof ct)throw new fe("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new fe("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new fe("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new fe("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new fe("`loose`, if provided, must be a boolean");var qe=arguments.length>3?arguments[3]:null,Qe=arguments.length>4?arguments[4]:null,je=arguments.length>5?arguments[5]:null,Nt=arguments.length>6&&arguments[6],le=!!Ne&&Ne(He,ct);if(Je)Je(He,ct,{configurable:null===je&&le?le.configurable:!je,enumerable:null===qe&&le?le.enumerable:!qe,value:Ht,writable:null===Qe&&le?le.writable:!Qe});else{if(!Nt&&(qe||Qe||je))throw new g("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");He[ct]=Ht}}},1648:(An,Rt,Ce)=>{"use strict";var ue=Ce(7809),Le="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Je=Object.prototype.toString,g=Array.prototype.concat,fe=Ce(9224),Oe=Ce(2486)(),He=function(Ht,qe,Qe,je){if(qe in Ht)if(!0===je){if(Ht[qe]===Qe)return}else if(!function(Ht){return"function"==typeof Ht&&"[object Function]"===Je.call(Ht)}(je)||!je())return;Oe?fe(Ht,qe,Qe,!0):fe(Ht,qe,Qe)},ct=function(Ht,qe){var Qe=arguments.length>2?arguments[2]:{},je=ue(qe);Le&&(je=g.call(je,Object.getOwnPropertySymbols(qe)));for(var Nt=0;Nt<je.length;Nt+=1)He(Ht,je[Nt],qe[je[Nt]],Qe[je[Nt]])};ct.supportsDescriptors=!!Oe,An.exports=ct},7649:An=>{function Rt(Ce,ue,Le,Je){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(Ce,ue,Le,Je)}Rt.prototype.run=function(Ce,ue,Le,Je){this._init(Ce,ue,Le,Je);for(var g=0;g<this._datasetLength;g++)if(1!==this._visited[g]){this._visited[g]=1;var fe=this._regionQuery(g);if(fe.length<this.minPts)this.noise.push(g);else{var Ne=this.clusters.length;this.clusters.push([]),this._addToCluster(g,Ne),this._expandCluster(Ne,fe)}}return this.clusters},Rt.prototype._init=function(Ce,ue,Le,Je){if(Ce){if(!(Ce instanceof Array))throw Error("Dataset must be of type array, "+typeof Ce+" given");this.dataset=Ce,this.clusters=[],this.noise=[],this._datasetLength=Ce.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}ue&&(this.epsilon=ue),Le&&(this.minPts=Le),Je&&(this.distance=Je)},Rt.prototype._expandCluster=function(Ce,ue){for(var Le=0;Le<ue.length;Le++){var Je=ue[Le];if(1!==this._visited[Je]){this._visited[Je]=1;var g=this._regionQuery(Je);g.length>=this.minPts&&(ue=this._mergeArrays(ue,g))}1!==this._assigned[Je]&&this._addToCluster(Je,Ce)}},Rt.prototype._addToCluster=function(Ce,ue){this.clusters[ue].push(Ce),this._assigned[Ce]=1},Rt.prototype._regionQuery=function(Ce){for(var ue=[],Le=0;Le<this._datasetLength;Le++)this.distance(this.dataset[Ce],this.dataset[Le])<this.epsilon&&ue.push(Le);return ue},Rt.prototype._mergeArrays=function(Ce,ue){for(var Le=ue.length,Je=0;Je<Le;Je++){var g=ue[Je];Ce.indexOf(g)<0&&Ce.push(g)}return Ce},Rt.prototype._euclideanDistance=function(Ce,ue){for(var Le=0,Je=Math.min(Ce.length,ue.length);Je--;)Le+=(Ce[Je]-ue[Je])*(Ce[Je]-ue[Je]);return Math.sqrt(Le)},An.exports&&(An.exports=Rt)},442:An=>{function Rt(Ce,ue,Le){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(Ce,ue,Le)}Rt.prototype.init=function(Ce,ue,Le){this.assignments=[],this.centroids=[],typeof Ce<"u"&&(this.dataset=Ce),typeof ue<"u"&&(this.k=ue),typeof Le<"u"&&(this.distance=Le)},Rt.prototype.run=function(Ce,ue){this.init(Ce,ue);for(var Le=this.dataset.length,Je=0;Je<this.k;Je++)this.centroids[Je]=this.randomCentroid();for(var g=!0;g;){g=this.assign();for(var fe=0;fe<this.k;fe++){for(var Ne=new Array(Ht),Oe=0,He=0;He<Ht;He++)Ne[He]=0;for(var ct=0;ct<Le;ct++){var Ht=this.dataset[ct].length;if(fe===this.assignments[ct]){for(He=0;He<Ht;He++)Ne[He]+=this.dataset[ct][He];Oe++}}if(Oe>0){for(He=0;He<Ht;He++)Ne[He]/=Oe;this.centroids[fe]=Ne}else this.centroids[fe]=this.randomCentroid(),g=!0}}return this.getClusters()},Rt.prototype.randomCentroid=function(){var ue,Le,Ce=this.dataset.length-1;do{Le=Math.round(Math.random()*Ce),ue=this.dataset[Le]}while(this.centroids.indexOf(ue)>=0);return ue},Rt.prototype.assign=function(){for(var Le,Ce=!1,ue=this.dataset.length,Je=0;Je<ue;Je++)(Le=this.argmin(this.dataset[Je],this.centroids,this.distance))!=this.assignments[Je]&&(this.assignments[Je]=Le,Ce=!0);return Ce},Rt.prototype.getClusters=function(){for(var ue,Ce=new Array(this.k),Le=0;Le<this.assignments.length;Le++)typeof Ce[ue=this.assignments[Le]]>"u"&&(Ce[ue]=[]),Ce[ue].push(Le);return Ce},Rt.prototype.argmin=function(Ce,ue,Le){for(var Ne,Je=Number.MAX_VALUE,g=0,fe=ue.length,Oe=0;Oe<fe;Oe++)(Ne=Le(Ce,ue[Oe]))<Je&&(Je=Ne,g=Oe);return g},Rt.prototype.distance=function(Ce,ue){for(var Le=0,Je=Math.min(Ce.length,ue.length);Je--;){var g=Ce[Je]-ue[Je];Le+=g*g}return Math.sqrt(Le)},An.exports&&(An.exports=Rt)},2195:(An,Rt,Ce)=>{if(An.exports)var ue=Ce(6216);function Le(Je,g,fe,Ne){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Je,g,fe,Ne)}Le.prototype.run=function(Je,g,fe,Ne){this._init(Je,g,fe,Ne);for(var Oe=0,He=this.dataset.length;Oe<He;Oe++)if(1!==this._processed[Oe]){this._processed[Oe]=1,this.clusters.push([Oe]);var ct=this.clusters.length-1;this._orderedList.push(Oe);var Ht=new ue(null,null,"asc"),qe=this._regionQuery(Oe);void 0!==this._distanceToCore(Oe)&&(this._updateQueue(Oe,qe,Ht),this._expandCluster(ct,Ht))}return this.clusters},Le.prototype.getReachabilityPlot=function(){for(var Je=[],g=0,fe=this._orderedList.length;g<fe;g++){var Ne=this._orderedList[g];Je.push([Ne,this._reachability[Ne]])}return Je},Le.prototype._init=function(Je,g,fe,Ne){if(Je){if(!(Je instanceof Array))throw Error("Dataset must be of type array, "+typeof Je+" given");this.dataset=Je,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}g&&(this.epsilon=g),fe&&(this.minPts=fe),Ne&&(this.distance=Ne)},Le.prototype._updateQueue=function(Je,g,fe){var Ne=this;this._coreDistance=this._distanceToCore(Je),g.forEach(function(Oe){if(void 0===Ne._processed[Oe]){var He=Ne.distance(Ne.dataset[Je],Ne.dataset[Oe]),ct=Math.max(Ne._coreDistance,He);void 0===Ne._reachability[Oe]?(Ne._reachability[Oe]=ct,fe.insert(Oe,ct)):ct<Ne._reachability[Oe]&&(Ne._reachability[Oe]=ct,fe.remove(Oe),fe.insert(Oe,ct))}})},Le.prototype._expandCluster=function(Je,g){for(var fe=g.getElements(),Ne=0,Oe=fe.length;Ne<Oe;Ne++){var He=fe[Ne];if(void 0===this._processed[He]){var ct=this._regionQuery(He);this._processed[He]=1,this.clusters[Je].push(He),this._orderedList.push(He),void 0!==this._distanceToCore(He)&&(this._updateQueue(He,ct,g),this._expandCluster(Je,g))}}},Le.prototype._distanceToCore=function(Je){for(var g=this.epsilon,fe=0;fe<g;fe++)if(this._regionQuery(Je,fe).length>=this.minPts)return fe},Le.prototype._regionQuery=function(Je,g){g=g||this.epsilon;for(var fe=[],Ne=0,Oe=this.dataset.length;Ne<Oe;Ne++)this.distance(this.dataset[Je],this.dataset[Ne])<g&&fe.push(Ne);return fe},Le.prototype._euclideanDistance=function(Je,g){for(var fe=0,Ne=Math.min(Je.length,g.length);Ne--;)fe+=(Je[Ne]-g[Ne])*(Je[Ne]-g[Ne]);return Math.sqrt(fe)},An.exports&&(An.exports=Le)},6216:An=>{function Rt(Ce,ue,Le){this._queue=[],this._priorities=[],this._sorting="desc",this._init(Ce,ue,Le)}Rt.prototype.insert=function(Ce,ue){for(var Le=this._queue.length,Je=Le;Je--;){var g=this._priorities[Je];"desc"===this._sorting?ue>g&&(Le=Je):ue<g&&(Le=Je)}this._insertAt(Ce,ue,Le)},Rt.prototype.remove=function(Ce){for(var ue=this._queue.length;ue--;)if(Ce===this._queue[ue]){this._queue.splice(ue,1),this._priorities.splice(ue,1);break}},Rt.prototype.forEach=function(Ce){this._queue.forEach(Ce)},Rt.prototype.getElements=function(){return this._queue},Rt.prototype.getElementPriority=function(Ce){return this._priorities[Ce]},Rt.prototype.getPriorities=function(){return this._priorities},Rt.prototype.getElementsWithPriorities=function(){for(var Ce=[],ue=0,Le=this._queue.length;ue<Le;ue++)Ce.push([this._queue[ue],this._priorities[ue]]);return Ce},Rt.prototype._init=function(Ce,ue,Le){if(Ce&&ue){if(this._queue=[],this._priorities=[],Ce.length!==ue.length)throw new Error("Arrays must have the same length");for(var Je=0;Je<Ce.length;Je++)this.insert(Ce[Je],ue[Je])}Le&&(this._sorting=Le)},Rt.prototype._insertAt=function(Ce,ue,Le){this._queue.length===Le?(this._queue.push(Ce),this._priorities.push(ue)):(this._queue.splice(Le,0,Ce),this._priorities.splice(Le,0,ue))},An.exports&&(An.exports=Rt)},3367:(An,Rt,Ce)=>{An.exports&&(An.exports={DBSCAN:Ce(7649),KMEANS:Ce(442),OPTICS:Ce(2195),PriorityQueue:Ce(6216)})},9145:An=>{"use strict";function Rt(Y,Ge,De){De=De||2;var et,dn,qt,_n,kn,ei,Vt,Ke=Ge&&Ge.length,$e=Ke?Ge[0]*De:Y.length,ae=Ce(Y,0,$e,De,!0),Ze=[];if(!ae||ae.next===ae.prev)return Ze;if(Ke&&(ae=function Oe(Y,Ge,De,Ke){var ae,Ze,qt,$e=[];for(ae=0,Ze=Ge.length;ae<Ze;ae++)(qt=Ce(Y,Ge[ae]*Ke,ae<Ze-1?Ge[ae+1]*Ke:Y.length,Ke,!1))===qt.next&&(qt.steiner=!0),$e.push(le(qt));for($e.sort(He),ae=0;ae<$e.length;ae++)De=ct($e[ae],De);return De}(Y,Ge,ae,De)),Y.length>80*De){et=qt=Y[0],dn=_n=Y[1];for(var vi=De;vi<$e;vi+=De)(kn=Y[vi])<et&&(et=kn),(ei=Y[vi+1])<dn&&(dn=ei),kn>qt&&(qt=kn),ei>_n&&(_n=ei);Vt=0!==(Vt=Math.max(qt-et,_n-dn))?32767/Vt:0}return Le(ae,Ze,De,et,dn,Vt,0),Ze}function Ce(Y,Ge,De,Ke,$e){var ae,Ze;if($e===Se(Y,Ge,De,Ke)>0)for(ae=Ge;ae<De;ae+=Ke)Ze=be(ae,Y[ae],Y[ae+1],Ze);else for(ae=De-Ke;ae>=Ge;ae-=Ke)Ze=be(ae,Y[ae],Y[ae+1],Ze);return Ze&&ee(Ze,Ze.next)&&(ie(Ze),Ze=Ze.next),Ze}function ue(Y,Ge){if(!Y)return Y;Ge||(Ge=Y);var Ke,De=Y;do{if(Ke=!1,De.steiner||!ee(De,De.next)&&0!==Z(De.prev,De,De.next))De=De.next;else{if(ie(De),(De=Ge=De.prev)===De.next)break;Ke=!0}}while(Ke||De!==Ge);return Ge}function Le(Y,Ge,De,Ke,$e,ae,Ze){if(Y){!Ze&&ae&&function Qe(Y,Ge,De,Ke){var $e=Y;do{0===$e.z&&($e.z=Nt($e.x,$e.y,Ge,De,Ke)),$e.prevZ=$e.prev,$e.nextZ=$e.next,$e=$e.next}while($e!==Y);$e.prevZ.nextZ=null,$e.prevZ=null,function je(Y){var Ge,De,Ke,$e,ae,Ze,et,dn,qt=1;do{for(De=Y,Y=null,ae=null,Ze=0;De;){for(Ze++,Ke=De,et=0,Ge=0;Ge<qt&&(et++,Ke=Ke.nextZ);Ge++);for(dn=qt;et>0||dn>0&&Ke;)0!==et&&(0===dn||!Ke||De.z<=Ke.z)?($e=De,De=De.nextZ,et--):($e=Ke,Ke=Ke.nextZ,dn--),ae?ae.nextZ=$e:Y=$e,$e.prevZ=ae,ae=$e;De=Ke}ae.nextZ=null,qt*=2}while(Ze>1)}($e)}(Y,Ke,$e,ae);for(var dn,qt,et=Y;Y.prev!==Y.next;)if(dn=Y.prev,qt=Y.next,ae?g(Y,Ke,$e,ae):Je(Y))Ge.push(dn.i/De|0),Ge.push(Y.i/De|0),Ge.push(qt.i/De|0),ie(Y),Y=qt.next,et=qt.next;else if((Y=qt)===et){Ze?1===Ze?Le(Y=fe(ue(Y),Ge,De),Ge,De,Ke,$e,ae,2):2===Ze&&Ne(Y,Ge,De,Ke,$e,ae):Le(ue(Y),Ge,De,Ke,$e,ae,1);break}}}function Je(Y){var Ge=Y.prev,De=Y,Ke=Y.next;if(Z(Ge,De,Ke)>=0)return!1;for(var $e=Ge.x,ae=De.x,Ze=Ke.x,et=Ge.y,dn=De.y,qt=Ke.y,_n=$e<ae?$e<Ze?$e:Ze:ae<Ze?ae:Ze,kn=et<dn?et<qt?et:qt:dn<qt?dn:qt,ei=$e>ae?$e>Ze?$e:Ze:ae>Ze?ae:Ze,Vt=et>dn?et>qt?et:qt:dn>qt?dn:qt,vi=Ke.next;vi!==Ge;){if(vi.x>=_n&&vi.x<=ei&&vi.y>=kn&&vi.y<=Vt&&we($e,et,ae,dn,Ze,qt,vi.x,vi.y)&&Z(vi.prev,vi,vi.next)>=0)return!1;vi=vi.next}return!0}function g(Y,Ge,De,Ke){var $e=Y.prev,ae=Y,Ze=Y.next;if(Z($e,ae,Ze)>=0)return!1;for(var et=$e.x,dn=ae.x,qt=Ze.x,_n=$e.y,kn=ae.y,ei=Ze.y,Vt=et<dn?et<qt?et:qt:dn<qt?dn:qt,vi=_n<kn?_n<ei?_n:ei:kn<ei?kn:ei,Tn=et>dn?et>qt?et:qt:dn>qt?dn:qt,Un=_n>kn?_n>ei?_n:ei:kn>ei?kn:ei,cn=Nt(Vt,vi,Ge,De,Ke),Lt=Nt(Tn,Un,Ge,De,Ke),Cn=Y.prevZ,Gn=Y.nextZ;Cn&&Cn.z>=cn&&Gn&&Gn.z<=Lt;){if(Cn.x>=Vt&&Cn.x<=Tn&&Cn.y>=vi&&Cn.y<=Un&&Cn!==$e&&Cn!==Ze&&we(et,_n,dn,kn,qt,ei,Cn.x,Cn.y)&&Z(Cn.prev,Cn,Cn.next)>=0||(Cn=Cn.prevZ,Gn.x>=Vt&&Gn.x<=Tn&&Gn.y>=vi&&Gn.y<=Un&&Gn!==$e&&Gn!==Ze&&we(et,_n,dn,kn,qt,ei,Gn.x,Gn.y)&&Z(Gn.prev,Gn,Gn.next)>=0))return!1;Gn=Gn.nextZ}for(;Cn&&Cn.z>=cn;){if(Cn.x>=Vt&&Cn.x<=Tn&&Cn.y>=vi&&Cn.y<=Un&&Cn!==$e&&Cn!==Ze&&we(et,_n,dn,kn,qt,ei,Cn.x,Cn.y)&&Z(Cn.prev,Cn,Cn.next)>=0)return!1;Cn=Cn.prevZ}for(;Gn&&Gn.z<=Lt;){if(Gn.x>=Vt&&Gn.x<=Tn&&Gn.y>=vi&&Gn.y<=Un&&Gn!==$e&&Gn!==Ze&&we(et,_n,dn,kn,qt,ei,Gn.x,Gn.y)&&Z(Gn.prev,Gn,Gn.next)>=0)return!1;Gn=Gn.nextZ}return!0}function fe(Y,Ge,De){var Ke=Y;do{var $e=Ke.prev,ae=Ke.next.next;!ee($e,ae)&&ke($e,Ke,Ke.next,ae)&&Q($e,ae)&&Q(ae,$e)&&(Ge.push($e.i/De|0),Ge.push(Ke.i/De|0),Ge.push(ae.i/De|0),ie(Ke),ie(Ke.next),Ke=Y=ae),Ke=Ke.next}while(Ke!==Y);return ue(Ke)}function Ne(Y,Ge,De,Ke,$e,ae){var Ze=Y;do{for(var et=Ze.next.next;et!==Ze.prev;){if(Ze.i!==et.i&&J(Ze,et)){var dn=se(Ze,et);return Ze=ue(Ze,Ze.next),dn=ue(dn,dn.next),Le(Ze,Ge,De,Ke,$e,ae,0),void Le(dn,Ge,De,Ke,$e,ae,0)}et=et.next}Ze=Ze.next}while(Ze!==Y)}function He(Y,Ge){return Y.x-Ge.x}function ct(Y,Ge){var De=function Ht(Y,Ge){var Ze,De=Ge,Ke=Y.x,$e=Y.y,ae=-1/0;do{if($e<=De.y&&$e>=De.next.y&&De.next.y!==De.y){var et=De.x+($e-De.y)*(De.next.x-De.x)/(De.next.y-De.y);if(et<=Ke&&et>ae&&(ae=et,Ze=De.x<De.next.x?De:De.next,et===Ke))return Ze}De=De.next}while(De!==Ge);if(!Ze)return null;var ei,dn=Ze,qt=Ze.x,_n=Ze.y,kn=1/0;De=Ze;do{Ke>=De.x&&De.x>=qt&&Ke!==De.x&&we($e<_n?Ke:ae,$e,qt,_n,$e<_n?ae:Ke,$e,De.x,De.y)&&(ei=Math.abs($e-De.y)/(Ke-De.x),Q(De,Y)&&(ei<kn||ei===kn&&(De.x>Ze.x||De.x===Ze.x&&qe(Ze,De)))&&(Ze=De,kn=ei)),De=De.next}while(De!==dn);return Ze}(Y,Ge);if(!De)return Ge;var Ke=se(De,Y);return ue(Ke,Ke.next),ue(De,De.next)}function qe(Y,Ge){return Z(Y.prev,Y,Ge.prev)<0&&Z(Ge.next,Y,Y.next)<0}function Nt(Y,Ge,De,Ke,$e){return(Y=1431655765&((Y=858993459&((Y=252645135&((Y=16711935&((Y=(Y-De)*$e|0)|Y<<8))|Y<<4))|Y<<2))|Y<<1))|(Ge=1431655765&((Ge=858993459&((Ge=252645135&((Ge=16711935&((Ge=(Ge-Ke)*$e|0)|Ge<<8))|Ge<<4))|Ge<<2))|Ge<<1))<<1}function le(Y){var Ge=Y,De=Y;do{(Ge.x<De.x||Ge.x===De.x&&Ge.y<De.y)&&(De=Ge),Ge=Ge.next}while(Ge!==Y);return De}function we(Y,Ge,De,Ke,$e,ae,Ze,et){return($e-Ze)*(Ge-et)>=(Y-Ze)*(ae-et)&&(Y-Ze)*(Ke-et)>=(De-Ze)*(Ge-et)&&(De-Ze)*(ae-et)>=($e-Ze)*(Ke-et)}function J(Y,Ge){return Y.next.i!==Ge.i&&Y.prev.i!==Ge.i&&!function ye(Y,Ge){var De=Y;do{if(De.i!==Y.i&&De.next.i!==Y.i&&De.i!==Ge.i&&De.next.i!==Ge.i&&ke(De,De.next,Y,Ge))return!0;De=De.next}while(De!==Y);return!1}(Y,Ge)&&(Q(Y,Ge)&&Q(Ge,Y)&&function he(Y,Ge){var De=Y,Ke=!1,$e=(Y.x+Ge.x)/2,ae=(Y.y+Ge.y)/2;do{De.y>ae!=De.next.y>ae&&De.next.y!==De.y&&$e<(De.next.x-De.x)*(ae-De.y)/(De.next.y-De.y)+De.x&&(Ke=!Ke),De=De.next}while(De!==Y);return Ke}(Y,Ge)&&(Z(Y.prev,Y,Ge.prev)||Z(Y,Ge.prev,Ge))||ee(Y,Ge)&&Z(Y.prev,Y,Y.next)>0&&Z(Ge.prev,Ge,Ge.next)>0)}function Z(Y,Ge,De){return(Ge.y-Y.y)*(De.x-Ge.x)-(Ge.x-Y.x)*(De.y-Ge.y)}function ee(Y,Ge){return Y.x===Ge.x&&Y.y===Ge.y}function ke(Y,Ge,De,Ke){var $e=K(Z(Y,Ge,De)),ae=K(Z(Y,Ge,Ke)),Ze=K(Z(De,Ke,Y)),et=K(Z(De,Ke,Ge));return!!($e!==ae&&Ze!==et||0===$e&&ne(Y,De,Ge)||0===ae&&ne(Y,Ke,Ge)||0===Ze&&ne(De,Y,Ke)||0===et&&ne(De,Ge,Ke))}function ne(Y,Ge,De){return Ge.x<=Math.max(Y.x,De.x)&&Ge.x>=Math.min(Y.x,De.x)&&Ge.y<=Math.max(Y.y,De.y)&&Ge.y>=Math.min(Y.y,De.y)}function K(Y){return Y>0?1:Y<0?-1:0}function Q(Y,Ge){return Z(Y.prev,Y,Y.next)<0?Z(Y,Ge,Y.next)>=0&&Z(Y,Y.prev,Ge)>=0:Z(Y,Ge,Y.prev)<0||Z(Y,Y.next,Ge)<0}function se(Y,Ge){var De=new Ve(Y.i,Y.x,Y.y),Ke=new Ve(Ge.i,Ge.x,Ge.y),$e=Y.next,ae=Ge.prev;return Y.next=Ge,Ge.prev=Y,De.next=$e,$e.prev=De,Ke.next=De,De.prev=Ke,ae.next=Ke,Ke.prev=ae,Ke}function be(Y,Ge,De,Ke){var $e=new Ve(Y,Ge,De);return Ke?($e.next=Ke.next,$e.prev=Ke,Ke.next.prev=$e,Ke.next=$e):($e.prev=$e,$e.next=$e),$e}function ie(Y){Y.next.prev=Y.prev,Y.prev.next=Y.next,Y.prevZ&&(Y.prevZ.nextZ=Y.nextZ),Y.nextZ&&(Y.nextZ.prevZ=Y.prevZ)}function Ve(Y,Ge,De){this.i=Y,this.x=Ge,this.y=De,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Se(Y,Ge,De,Ke){for(var $e=0,ae=Ge,Ze=De-Ke;ae<De;ae+=Ke)$e+=(Y[Ze]-Y[ae])*(Y[ae+1]+Y[Ze+1]),Ze=ae;return $e}An.exports=Rt,An.exports.default=Rt,Rt.deviation=function(Y,Ge,De,Ke){var $e=Ge&&Ge.length,Ze=Math.abs(Se(Y,0,$e?Ge[0]*De:Y.length,De));if($e)for(var et=0,dn=Ge.length;et<dn;et++)Ze-=Math.abs(Se(Y,Ge[et]*De,et<dn-1?Ge[et+1]*De:Y.length,De));var kn=0;for(et=0;et<Ke.length;et+=3){var ei=Ke[et]*De,Vt=Ke[et+1]*De,vi=Ke[et+2]*De;kn+=Math.abs((Y[ei]-Y[vi])*(Y[Vt+1]-Y[ei+1])-(Y[ei]-Y[Vt])*(Y[vi+1]-Y[ei+1]))}return 0===Ze&&0===kn?0:Math.abs((kn-Ze)/Ze)},Rt.flatten=function(Y){for(var Ge=Y[0][0].length,De={vertices:[],holes:[],dimensions:Ge},Ke=0,$e=0;$e<Y.length;$e++){for(var ae=0;ae<Y[$e].length;ae++)for(var Ze=0;Ze<Ge;Ze++)De.vertices.push(Y[$e][ae][Ze]);$e>0&&De.holes.push(Ke+=Y[$e-1].length)}return De}},238:An=>{"use strict";var Ce=Object.prototype.toString,ue=Math.max,Je=function(Oe,He){for(var ct=[],Ht=0;Ht<Oe.length;Ht+=1)ct[Ht]=Oe[Ht];for(var qe=0;qe<He.length;qe+=1)ct[qe+Oe.length]=He[qe];return ct};An.exports=function(Oe){var He=this;if("function"!=typeof He||"[object Function]"!==Ce.apply(He))throw new TypeError("Function.prototype.bind called on incompatible "+He);for(var Ht,ct=function(Oe,He){for(var ct=[],Ht=1,qe=0;Ht<Oe.length;Ht+=1,qe+=1)ct[qe]=Oe[Ht];return ct}(arguments),Qe=ue(0,He.length-ct.length),je=[],Nt=0;Nt<Qe;Nt++)je[Nt]="$"+Nt;if(Ht=Function("binder","return function ("+function(Ne,Oe){for(var He="",ct=0;ct<Ne.length;ct+=1)He+=Ne[ct],ct+1<Ne.length&&(He+=",");return He}(je)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof Ht){var we=He.apply(this,Je(ct,arguments));return Object(we)===we?we:this}return He.apply(Oe,Je(ct,arguments))}),He.prototype){var le=function(){};le.prototype=He.prototype,Ht.prototype=new le,le.prototype=null}return Ht}},5333:(An,Rt,Ce)=>{"use strict";var ue=Ce(238);An.exports=Function.prototype.bind||ue},1552:An=>{"use strict";var Rt=function(){return"string"==typeof function(){}.name},Ce=Object.getOwnPropertyDescriptor;if(Ce)try{Ce([],"length")}catch{Ce=null}Rt.functionsHaveConfigurableNames=function(){if(!Rt()||!Ce)return!1;var Je=Ce(function(){},"name");return!!Je&&!!Je.configurable};var ue=Function.prototype.bind;Rt.boundFunctionsHaveNames=function(){return Rt()&&"function"==typeof ue&&""!==function(){}.bind().name},An.exports=Rt},3198:(An,Rt,Ce)=>{var ue=Ce(3970),Le=function(Ne){this.precision=Ne&&Ne.precision?Ne.precision:17,this.direction=!(!Ne||!Ne.direction)&&Ne.direction,this.pseudoNode=!(!Ne||!Ne.pseudoNode)&&Ne.pseudoNode,this.objectComparator=Ne&&Ne.objectComparator?Ne.objectComparator:fe};function Je(Ne){return Ne.coordinates.map(function(Oe){return{type:Ne.type.replace("Multi",""),coordinates:Oe}})}function g(Ne,Oe){return Ne.hasOwnProperty("coordinates")?Ne.coordinates.length===Oe.coordinates.length:Ne.length===Oe.length}function fe(Ne,Oe){return ue(Ne,Oe,{strict:!0})}Le.prototype.compare=function(Ne,Oe){if(Ne.type!==Oe.type||!g(Ne,Oe))return!1;switch(Ne.type){case"Point":return this.compareCoord(Ne.coordinates,Oe.coordinates);case"LineString":return this.compareLine(Ne.coordinates,Oe.coordinates,0,!1);case"Polygon":return this.comparePolygon(Ne,Oe);case"Feature":return this.compareFeature(Ne,Oe);default:if(0===Ne.type.indexOf("Multi")){var He=this,ct=Je(Ne),Ht=Je(Oe);return ct.every(function(qe){return this.some(function(Qe){return He.compare(qe,Qe)})},Ht)}}return!1},Le.prototype.compareCoord=function(Ne,Oe){if(Ne.length!==Oe.length)return!1;for(var He=0;He<Ne.length;He++)if(Ne[He].toFixed(this.precision)!==Oe[He].toFixed(this.precision))return!1;return!0},Le.prototype.compareLine=function(Ne,Oe,He,ct){if(!g(Ne,Oe))return!1;var Ht=this.pseudoNode?Ne:this.removePseudo(Ne),qe=this.pseudoNode?Oe:this.removePseudo(Oe);if(!ct||this.compareCoord(Ht[0],qe[0])||(qe=this.fixStartIndex(qe,Ht))){var Qe=this.compareCoord(Ht[He],qe[He]);return this.direction||Qe?this.comparePath(Ht,qe):!!this.compareCoord(Ht[He],qe[qe.length-(1+He)])&&this.comparePath(Ht.slice().reverse(),qe)}},Le.prototype.fixStartIndex=function(Ne,Oe){for(var He,ct=-1,Ht=0;Ht<Ne.length;Ht++)if(this.compareCoord(Ne[Ht],Oe[0])){ct=Ht;break}return ct>=0&&(He=[].concat(Ne.slice(ct,Ne.length),Ne.slice(1,ct+1))),He},Le.prototype.comparePath=function(Ne,Oe){var He=this;return Ne.every(function(ct,Ht){return He.compareCoord(ct,this[Ht])},Oe)},Le.prototype.comparePolygon=function(Ne,Oe){if(this.compareLine(Ne.coordinates[0],Oe.coordinates[0],1,!0)){var He=Ne.coordinates.slice(1,Ne.coordinates.length),ct=Oe.coordinates.slice(1,Oe.coordinates.length),Ht=this;return He.every(function(qe){return this.some(function(Qe){return Ht.compareLine(qe,Qe,1,!0)})},ct)}return!1},Le.prototype.compareFeature=function(Ne,Oe){return!(Ne.id!==Oe.id||!this.objectComparator(Ne.properties,Oe.properties)||!this.compareBBox(Ne,Oe))&&this.compare(Ne.geometry,Oe.geometry)},Le.prototype.compareBBox=function(Ne,Oe){return!!(!Ne.bbox&&!Oe.bbox||Ne.bbox&&Oe.bbox&&this.compareCoord(Ne.bbox,Oe.bbox))},Le.prototype.removePseudo=function(Ne){return Ne},An.exports=Le},5665:(An,Rt,Ce)=>{var ue=Ce(7571),Le=Ce(621),Je=Ce(8570),g=Ce(1568).Z,fe=Je.featureEach,He=Le.featureCollection;function ct(Ht){var qe=new ue(Ht);return qe.insert=function(Qe){if("Feature"!==Qe.type)throw new Error("invalid feature");return Qe.bbox=Qe.bbox?Qe.bbox:g(Qe),ue.prototype.insert.call(this,Qe)},qe.load=function(Qe){var je=[];return Array.isArray(Qe)?Qe.forEach(function(Nt){if("Feature"!==Nt.type)throw new Error("invalid features");Nt.bbox=Nt.bbox?Nt.bbox:g(Nt),je.push(Nt)}):fe(Qe,function(Nt){if("Feature"!==Nt.type)throw new Error("invalid features");Nt.bbox=Nt.bbox?Nt.bbox:g(Nt),je.push(Nt)}),ue.prototype.load.call(this,je)},qe.remove=function(Qe,je){if("Feature"!==Qe.type)throw new Error("invalid feature");return Qe.bbox=Qe.bbox?Qe.bbox:g(Qe),ue.prototype.remove.call(this,Qe,je)},qe.clear=function(){return ue.prototype.clear.call(this)},qe.search=function(Qe){var je=ue.prototype.search.call(this,this.toBBox(Qe));return He(je)},qe.collides=function(Qe){return ue.prototype.collides.call(this,this.toBBox(Qe))},qe.all=function(){var Qe=ue.prototype.all.call(this);return He(Qe)},qe.toJSON=function(){return ue.prototype.toJSON.call(this)},qe.fromJSON=function(Qe){return ue.prototype.fromJSON.call(this,Qe)},qe.toBBox=function(Qe){var je;if(Qe.bbox)je=Qe.bbox;else if(Array.isArray(Qe)&&4===Qe.length)je=Qe;else if(Array.isArray(Qe)&&6===Qe.length)je=[Qe[0],Qe[1],Qe[3],Qe[4]];else if("Feature"===Qe.type)je=g(Qe);else{if("FeatureCollection"!==Qe.type)throw new Error("invalid geojson");je=g(Qe)}return{minX:je[0],minY:je[1],maxX:je[2],maxY:je[3]}},qe}An.exports=ct,An.exports.default=ct},7571:function(An){An.exports=function(){"use strict";function Rt(le,we,J,Z,ee){!function ke(ne,K,ye,Q,he){for(;Q>ye;){if(Q-ye>600){var se=Q-ye+1,be=K-ye+1,ie=Math.log(se),Ve=.5*Math.exp(2*ie/3),Se=.5*Math.sqrt(ie*Ve*(se-Ve)/se)*(be-se/2<0?-1:1);ke(ne,K,Math.max(ye,Math.floor(K-be*Ve/se+Se)),Math.min(Q,Math.floor(K+(se-be)*Ve/se+Se)),he)}var De=ne[K],Ke=ye,$e=Q;for(Ce(ne,ye,K),he(ne[Q],De)>0&&Ce(ne,ye,Q);Ke<$e;){for(Ce(ne,Ke,$e),Ke++,$e--;he(ne[Ke],De)<0;)Ke++;for(;he(ne[$e],De)>0;)$e--}0===he(ne[ye],De)?Ce(ne,ye,$e):Ce(ne,++$e,Q),$e<=K&&(ye=$e+1),K<=$e&&(Q=$e-1)}}(le,we,J||0,Z||le.length-1,ee||ue)}function Ce(le,we,J){var Z=le[we];le[we]=le[J],le[J]=Z}function ue(le,we){return le<we?-1:le>we?1:0}var Le=function(le){void 0===le&&(le=9),this._maxEntries=Math.max(4,le),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Je(le,we,J){if(!J)return we.indexOf(le);for(var Z=0;Z<we.length;Z++)if(J(le,we[Z]))return Z;return-1}function g(le,we){fe(le,0,le.children.length,we,le)}function fe(le,we,J,Z,ee){ee||(ee=je(null)),ee.minX=1/0,ee.minY=1/0,ee.maxX=-1/0,ee.maxY=-1/0;for(var ke=we;ke<J;ke++){var ne=le.children[ke];Ne(ee,le.leaf?Z(ne):ne)}return ee}function Ne(le,we){return le.minX=Math.min(le.minX,we.minX),le.minY=Math.min(le.minY,we.minY),le.maxX=Math.max(le.maxX,we.maxX),le.maxY=Math.max(le.maxY,we.maxY),le}function Oe(le,we){return le.minX-we.minX}function He(le,we){return le.minY-we.minY}function ct(le){return(le.maxX-le.minX)*(le.maxY-le.minY)}function Ht(le){return le.maxX-le.minX+(le.maxY-le.minY)}function qe(le,we){return le.minX<=we.minX&&le.minY<=we.minY&&we.maxX<=le.maxX&&we.maxY<=le.maxY}function Qe(le,we){return we.minX<=le.maxX&&we.minY<=le.maxY&&we.maxX>=le.minX&&we.maxY>=le.minY}function je(le){return{children:le,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Nt(le,we,J,Z,ee){for(var ke=[we,J];ke.length;)if(!((J=ke.pop())-(we=ke.pop())<=Z)){var ne=we+Math.ceil((J-we)/Z/2)*Z;Rt(le,ne,we,J,ee),ke.push(we,ne,ne,J)}}return Le.prototype.all=function(){return this._all(this.data,[])},Le.prototype.search=function(le){var we=this.data,J=[];if(!Qe(le,we))return J;for(var Z=this.toBBox,ee=[];we;){for(var ke=0;ke<we.children.length;ke++){var ne=we.children[ke],K=we.leaf?Z(ne):ne;Qe(le,K)&&(we.leaf?J.push(ne):qe(le,K)?this._all(ne,J):ee.push(ne))}we=ee.pop()}return J},Le.prototype.collides=function(le){var we=this.data;if(!Qe(le,we))return!1;for(var J=[];we;){for(var Z=0;Z<we.children.length;Z++){var ee=we.children[Z],ke=we.leaf?this.toBBox(ee):ee;if(Qe(le,ke)){if(we.leaf||qe(le,ke))return!0;J.push(ee)}}we=J.pop()}return!1},Le.prototype.load=function(le){if(!le||!le.length)return this;if(le.length<this._minEntries){for(var we=0;we<le.length;we++)this.insert(le[we]);return this}var J=this._build(le.slice(),0,le.length-1,0);if(this.data.children.length)if(this.data.height===J.height)this._splitRoot(this.data,J);else{if(this.data.height<J.height){var Z=this.data;this.data=J,J=Z}this._insert(J,this.data.height-J.height-1,!0)}else this.data=J;return this},Le.prototype.insert=function(le){return le&&this._insert(le,this.data.height-1),this},Le.prototype.clear=function(){return this.data=je([]),this},Le.prototype.remove=function(le,we){if(!le)return this;for(var J,Z,ee,ke=this.data,ne=this.toBBox(le),K=[],ye=[];ke||K.length;){if(ke||(ke=K.pop(),Z=K[K.length-1],J=ye.pop(),ee=!0),ke.leaf){var Q=Je(le,ke.children,we);if(-1!==Q)return ke.children.splice(Q,1),K.push(ke),this._condense(K),this}ee||ke.leaf||!qe(ke,ne)?Z?(J++,ke=Z.children[J],ee=!1):ke=null:(K.push(ke),ye.push(J),J=0,Z=ke,ke=ke.children[0])}return this},Le.prototype.toBBox=function(le){return le},Le.prototype.compareMinX=function(le,we){return le.minX-we.minX},Le.prototype.compareMinY=function(le,we){return le.minY-we.minY},Le.prototype.toJSON=function(){return this.data},Le.prototype.fromJSON=function(le){return this.data=le,this},Le.prototype._all=function(le,we){for(var J=[];le;)le.leaf?we.push.apply(we,le.children):J.push.apply(J,le.children),le=J.pop();return we},Le.prototype._build=function(le,we,J,Z){var ee,ke=J-we+1,ne=this._maxEntries;if(ke<=ne)return g(ee=je(le.slice(we,J+1)),this.toBBox),ee;Z||(Z=Math.ceil(Math.log(ke)/Math.log(ne)),ne=Math.ceil(ke/Math.pow(ne,Z-1))),(ee=je([])).leaf=!1,ee.height=Z;var K=Math.ceil(ke/ne),ye=K*Math.ceil(Math.sqrt(ne));Nt(le,we,J,ye,this.compareMinX);for(var Q=we;Q<=J;Q+=ye){var he=Math.min(Q+ye-1,J);Nt(le,Q,he,K,this.compareMinY);for(var se=Q;se<=he;se+=K){var be=Math.min(se+K-1,he);ee.children.push(this._build(le,se,be,Z-1))}}return g(ee,this.toBBox),ee},Le.prototype._chooseSubtree=function(le,we,J,Z){for(;Z.push(we),!we.leaf&&Z.length-1!==J;){for(var ee=1/0,ke=1/0,ne=void 0,K=0;K<we.children.length;K++){var ye=we.children[K],Q=ct(ye),he=(se=le,be=ye,(Math.max(be.maxX,se.maxX)-Math.min(be.minX,se.minX))*(Math.max(be.maxY,se.maxY)-Math.min(be.minY,se.minY))-Q);he<ke?(ke=he,ee=Q<ee?Q:ee,ne=ye):he===ke&&Q<ee&&(ee=Q,ne=ye)}we=ne||we.children[0]}var se,be;return we},Le.prototype._insert=function(le,we,J){var Z=J?le:this.toBBox(le),ee=[],ke=this._chooseSubtree(Z,this.data,we,ee);for(ke.children.push(le),Ne(ke,Z);we>=0&&ee[we].children.length>this._maxEntries;)this._split(ee,we),we--;this._adjustParentBBoxes(Z,ee,we)},Le.prototype._split=function(le,we){var J=le[we],Z=J.children.length,ee=this._minEntries;this._chooseSplitAxis(J,ee,Z);var ke=this._chooseSplitIndex(J,ee,Z),ne=je(J.children.splice(ke,J.children.length-ke));ne.height=J.height,ne.leaf=J.leaf,g(J,this.toBBox),g(ne,this.toBBox),we?le[we-1].children.push(ne):this._splitRoot(J,ne)},Le.prototype._splitRoot=function(le,we){this.data=je([le,we]),this.data.height=le.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},Le.prototype._chooseSplitIndex=function(le,we,J){for(var Z,ee,ke,ne,K,ye,Q,he=1/0,se=1/0,be=we;be<=J-we;be++){var ie=fe(le,0,be,this.toBBox),Ve=fe(le,be,J,this.toBBox),Se=(ee=ie,ke=Ve,void 0,void 0,void 0,void 0,ne=Math.max(ee.minX,ke.minX),K=Math.max(ee.minY,ke.minY),ye=Math.min(ee.maxX,ke.maxX),Q=Math.min(ee.maxY,ke.maxY),Math.max(0,ye-ne)*Math.max(0,Q-K)),Y=ct(ie)+ct(Ve);Se<he?(he=Se,Z=be,se=Y<se?Y:se):Se===he&&Y<se&&(se=Y,Z=be)}return Z||J-we},Le.prototype._chooseSplitAxis=function(le,we,J){var Z=le.leaf?this.compareMinX:Oe,ee=le.leaf?this.compareMinY:He;this._allDistMargin(le,we,J,Z)<this._allDistMargin(le,we,J,ee)&&le.children.sort(Z)},Le.prototype._allDistMargin=function(le,we,J,Z){le.children.sort(Z);for(var ee=this.toBBox,ke=fe(le,0,we,ee),ne=fe(le,J-we,J,ee),K=Ht(ke)+Ht(ne),ye=we;ye<J-we;ye++){var Q=le.children[ye];Ne(ke,le.leaf?ee(Q):Q),K+=Ht(ke)}for(var he=J-we-1;he>=we;he--){var se=le.children[he];Ne(ne,le.leaf?ee(se):se),K+=Ht(ne)}return K},Le.prototype._adjustParentBBoxes=function(le,we,J){for(var Z=J;Z>=0;Z--)Ne(we[Z],le)},Le.prototype._condense=function(le){for(var we=le.length-1,J=void 0;we>=0;we--)0===le[we].children.length?we>0?(J=le[we-1].children).splice(J.indexOf(le[we]),1):this.clear():g(le[we],this.toBBox)},Le}()},491:(An,Rt,Ce)=>{"use strict";var ue,Le=SyntaxError,Je=Function,g=TypeError,fe=function(Ve){try{return Je('"use strict"; return ('+Ve+").constructor;")()}catch{}},Ne=Object.getOwnPropertyDescriptor;if(Ne)try{Ne({},"")}catch{Ne=null}var Oe=function(){throw new g},He=Ne?function(){try{return Oe}catch{try{return Ne(arguments,"callee").get}catch{return Oe}}}():Oe,ct=Ce(6152)(),Ht=Ce(9028)(),qe=Object.getPrototypeOf||(Ht?function(Ve){return Ve.__proto__}:null),Qe={},je=typeof Uint8Array>"u"||!qe?ue:qe(Uint8Array),Nt={"%AggregateError%":typeof AggregateError>"u"?ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ue:ArrayBuffer,"%ArrayIteratorPrototype%":ct&&qe?qe([][Symbol.iterator]()):ue,"%AsyncFromSyncIteratorPrototype%":ue,"%AsyncFunction%":Qe,"%AsyncGenerator%":Qe,"%AsyncGeneratorFunction%":Qe,"%AsyncIteratorPrototype%":Qe,"%Atomics%":typeof Atomics>"u"?ue:Atomics,"%BigInt%":typeof BigInt>"u"?ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ue:FinalizationRegistry,"%Function%":Je,"%GeneratorFunction%":Qe,"%Int8Array%":typeof Int8Array>"u"?ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ct&&qe?qe(qe([][Symbol.iterator]())):ue,"%JSON%":"object"==typeof JSON?JSON:ue,"%Map%":typeof Map>"u"?ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ct||!qe?ue:qe((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ue:Promise,"%Proxy%":typeof Proxy>"u"?ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ct||!qe?ue:qe((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ct&&qe?qe(""[Symbol.iterator]()):ue,"%Symbol%":ct?Symbol:ue,"%SyntaxError%":Le,"%ThrowTypeError%":He,"%TypedArray%":je,"%TypeError%":g,"%Uint8Array%":typeof Uint8Array>"u"?ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ue:WeakSet};if(qe)try{null.error}catch(Ve){var le=qe(qe(Ve));Nt["%Error.prototype%"]=le}var we=function Ve(Se){var Y;if("%AsyncFunction%"===Se)Y=fe("async function () {}");else if("%GeneratorFunction%"===Se)Y=fe("function* () {}");else if("%AsyncGeneratorFunction%"===Se)Y=fe("async function* () {}");else if("%AsyncGenerator%"===Se){var Ge=Ve("%AsyncGeneratorFunction%");Ge&&(Y=Ge.prototype)}else if("%AsyncIteratorPrototype%"===Se){var De=Ve("%AsyncGenerator%");De&&qe&&(Y=qe(De.prototype))}return Nt[Se]=Y,Y},J={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=Ce(5333),ee=Ce(836),ke=Z.call(Function.call,Array.prototype.concat),ne=Z.call(Function.apply,Array.prototype.splice),K=Z.call(Function.call,String.prototype.replace),ye=Z.call(Function.call,String.prototype.slice),Q=Z.call(Function.call,RegExp.prototype.exec),he=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,se=/\\(\\)?/g,ie=function(Se,Y){var De,Ge=Se;if(ee(J,Ge)&&(Ge="%"+(De=J[Ge])[0]+"%"),ee(Nt,Ge)){var Ke=Nt[Ge];if(Ke===Qe&&(Ke=we(Ge)),typeof Ke>"u"&&!Y)throw new g("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:De,name:Ge,value:Ke}}throw new Le("intrinsic "+Se+" does not exist!")};An.exports=function(Se,Y){if("string"!=typeof Se||0===Se.length)throw new g("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Y)throw new g('"allowMissing" argument must be a boolean');if(null===Q(/^%?[^%]*%?$/,Se))throw new Le("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ge=function(Se){var Y=ye(Se,0,1),Ge=ye(Se,-1);if("%"===Y&&"%"!==Ge)throw new Le("invalid intrinsic syntax, expected closing `%`");if("%"===Ge&&"%"!==Y)throw new Le("invalid intrinsic syntax, expected opening `%`");var De=[];return K(Se,he,function(Ke,$e,ae,Ze){De[De.length]=ae?K(Ze,se,"$1"):$e||Ke}),De}(Se),De=Ge.length>0?Ge[0]:"",Ke=ie("%"+De+"%",Y),$e=Ke.name,ae=Ke.value,Ze=!1,et=Ke.alias;et&&(De=et[0],ne(Ge,ke([0,1],et)));for(var dn=1,qt=!0;dn<Ge.length;dn+=1){var _n=Ge[dn],kn=ye(_n,0,1),ei=ye(_n,-1);if(('"'===kn||"'"===kn||"`"===kn||'"'===ei||"'"===ei||"`"===ei)&&kn!==ei)throw new Le("property names with quotes must have matching quotes");if(("constructor"===_n||!qt)&&(Ze=!0),ee(Nt,$e="%"+(De+="."+_n)+"%"))ae=Nt[$e];else if(null!=ae){if(!(_n in ae)){if(!Y)throw new g("base intrinsic for "+Se+" exists, but the property is not available.");return}if(Ne&&dn+1>=Ge.length){var Vt=Ne(ae,_n);ae=(qt=!!Vt)&&"get"in Vt&&!("originalValue"in Vt.get)?Vt.get:ae[_n]}else qt=ee(ae,_n),ae=ae[_n];qt&&!Ze&&(Nt[$e]=ae)}}return ae}},9262:(An,Rt,Ce)=>{"use strict";var Le=Ce(491)("%Object.getOwnPropertyDescriptor%",!0);if(Le)try{Le([],"length")}catch{Le=null}An.exports=Le},2486:(An,Rt,Ce)=>{"use strict";var Le=Ce(491)("%Object.defineProperty%",!0),Je=function(){if(Le)try{return Le({},"a",{value:1}),!0}catch{return!1}return!1};Je.hasArrayLengthDefineBug=function(){if(!Je())return null;try{return 1!==Le([],"length",{value:1}).length}catch{return!0}},An.exports=Je},9028:An=>{"use strict";var Rt={foo:{}},Ce=Object;An.exports=function(){return{__proto__:Rt}.foo===Rt.foo&&!({__proto__:null}instanceof Ce)}},6152:(An,Rt,Ce)=>{"use strict";var ue=typeof Symbol<"u"&&Symbol,Le=Ce(5441);An.exports=function(){return"function"==typeof ue&&"function"==typeof Symbol&&"symbol"==typeof ue("foo")&&"symbol"==typeof Symbol("bar")&&Le()}},5441:An=>{"use strict";An.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var Ce={},ue=Symbol("test"),Le=Object(ue);if("string"==typeof ue||"[object Symbol]"!==Object.prototype.toString.call(ue)||"[object Symbol]"!==Object.prototype.toString.call(Le))return!1;for(ue in Ce[ue]=42,Ce)return!1;if("function"==typeof Object.keys&&0!==Object.keys(Ce).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(Ce).length)return!1;var g=Object.getOwnPropertySymbols(Ce);if(1!==g.length||g[0]!==ue||!Object.prototype.propertyIsEnumerable.call(Ce,ue))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var fe=Object.getOwnPropertyDescriptor(Ce,ue);if(42!==fe.value||!0!==fe.enumerable)return!1}return!0}},8041:(An,Rt,Ce)=>{"use strict";var ue=Ce(5441);An.exports=function(){return ue()&&!!Symbol.toStringTag}},836:(An,Rt,Ce)=>{"use strict";var ue=Function.prototype.call,Le=Object.prototype.hasOwnProperty,Je=Ce(5333);An.exports=Je.call(ue,Le)},8147:(An,Rt,Ce)=>{"use strict";var ue=Ce(8041)(),Je=Ce(1098)("Object.prototype.toString"),g=function(He){return!(ue&&He&&"object"==typeof He&&Symbol.toStringTag in He)&&"[object Arguments]"===Je(He)},fe=function(He){return!!g(He)||null!==He&&"object"==typeof He&&"number"==typeof He.length&&He.length>=0&&"[object Array]"!==Je(He)&&"[object Function]"===Je(He.callee)},Ne=function(){return g(arguments)}();g.isLegacyArguments=fe,An.exports=Ne?g:fe},2365:(An,Rt,Ce)=>{"use strict";var ue=Date.prototype.getDay,Je=Object.prototype.toString,fe=Ce(8041)();An.exports=function(Oe){return"object"==typeof Oe&&null!==Oe&&(fe?function(Oe){try{return ue.call(Oe),!0}catch{return!1}}(Oe):"[object Date]"===Je.call(Oe))}},4720:(An,Rt,Ce)=>{"use strict";var Je,g,fe,Ne,ue=Ce(1098),Le=Ce(8041)();if(Le){Je=ue("Object.prototype.hasOwnProperty"),g=ue("RegExp.prototype.exec"),fe={};var Oe=function(){throw fe};Ne={toString:Oe,valueOf:Oe},"symbol"==typeof Symbol.toPrimitive&&(Ne[Symbol.toPrimitive]=Oe)}var He=ue("Object.prototype.toString"),ct=Object.getOwnPropertyDescriptor;An.exports=Le?function(Qe){if(!Qe||"object"!=typeof Qe)return!1;var je=ct(Qe,"lastIndex");if(!je||!Je(je,"value"))return!1;try{g(Qe,Ne)}catch(le){return le===fe}}:function(Qe){return!(!Qe||"object"!=typeof Qe&&"function"!=typeof Qe)&&"[object RegExp]"===He(Qe)}},9422:An=>{An.exports=function Le(Je,g,fe){function Ne(ct,Ht){if(!g[ct]){if(!Je[ct]){if(Oe)return Oe(ct,!0);var Qe=new Error("Cannot find module '"+ct+"'");throw Qe.code="MODULE_NOT_FOUND",Qe}var je=g[ct]={exports:{}};Je[ct][0].call(je.exports,function(Nt){return Ne(Je[ct][1][Nt]||Nt)},je,je.exports,Le,Je,g,fe)}return g[ct].exports}for(var Oe=void 0,He=0;He<fe.length;He++)Ne(fe[He]);return Ne}({1:[function(Le,Je,g){(function(fe){"use strict";var Oe,Ne=fe.MutationObserver||fe.WebKitMutationObserver;if(Ne){var He=0,ct=new Ne(Nt),Ht=fe.document.createTextNode("");ct.observe(Ht,{characterData:!0}),Oe=function(){Ht.data=He=++He%2}}else if(!fe.setImmediate&&typeof fe.MessageChannel<"u"){var qe=new fe.MessageChannel;qe.port1.onmessage=Nt,Oe=function(){qe.port2.postMessage(0)}}else Oe="document"in fe&&"onreadystatechange"in fe.document.createElement("script")?function(){var we=fe.document.createElement("script");we.onreadystatechange=function(){Nt(),we.onreadystatechange=null,we.parentNode.removeChild(we),we=null},fe.document.documentElement.appendChild(we)}:function(){setTimeout(Nt,0)};var Qe,je=[];function Nt(){Qe=!0;for(var we,J,Z=je.length;Z;){for(J=je,je=[],we=-1;++we<Z;)J[we]();Z=je.length}Qe=!1}Je.exports=function le(we){1===je.push(we)&&!Qe&&Oe()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(Le,Je,g){"use strict";var fe=Le(1);function Ne(){}var Oe={},He=["REJECTED"],ct=["FULFILLED"],Ht=["PENDING"];function qe(ne){if("function"!=typeof ne)throw new TypeError("resolver must be a function");this.state=Ht,this.queue=[],this.outcome=void 0,ne!==Ne&&le(this,ne)}function Qe(ne,K,ye){this.promise=ne,"function"==typeof K&&(this.onFulfilled=K,this.callFulfilled=this.otherCallFulfilled),"function"==typeof ye&&(this.onRejected=ye,this.callRejected=this.otherCallRejected)}function je(ne,K,ye){fe(function(){var Q;try{Q=K(ye)}catch(he){return Oe.reject(ne,he)}Q===ne?Oe.reject(ne,new TypeError("Cannot resolve promise with itself")):Oe.resolve(ne,Q)})}function Nt(ne){var K=ne&&ne.then;if(ne&&("object"==typeof ne||"function"==typeof ne)&&"function"==typeof K)return function(){K.apply(ne,arguments)}}function le(ne,K){var ye=!1;function Q(ie){ye||(ye=!0,Oe.reject(ne,ie))}function he(ie){ye||(ye=!0,Oe.resolve(ne,ie))}var be=we(function se(){K(he,Q)});"error"===be.status&&Q(be.value)}function we(ne,K){var ye={};try{ye.value=ne(K),ye.status="success"}catch(Q){ye.status="error",ye.value=Q}return ye}Je.exports=qe,qe.prototype.catch=function(ne){return this.then(null,ne)},qe.prototype.then=function(ne,K){if("function"!=typeof ne&&this.state===ct||"function"!=typeof K&&this.state===He)return this;var ye=new this.constructor(Ne);return this.state!==Ht?je(ye,this.state===ct?ne:K,this.outcome):this.queue.push(new Qe(ye,ne,K)),ye},Qe.prototype.callFulfilled=function(ne){Oe.resolve(this.promise,ne)},Qe.prototype.otherCallFulfilled=function(ne){je(this.promise,this.onFulfilled,ne)},Qe.prototype.callRejected=function(ne){Oe.reject(this.promise,ne)},Qe.prototype.otherCallRejected=function(ne){je(this.promise,this.onRejected,ne)},Oe.resolve=function(ne,K){var ye=we(Nt,K);if("error"===ye.status)return Oe.reject(ne,ye.value);var Q=ye.value;if(Q)le(ne,Q);else{ne.state=ct,ne.outcome=K;for(var he=-1,se=ne.queue.length;++he<se;)ne.queue[he].callFulfilled(K)}return ne},Oe.reject=function(ne,K){ne.state=He,ne.outcome=K;for(var ye=-1,Q=ne.queue.length;++ye<Q;)ne.queue[ye].callRejected(K);return ne},qe.resolve=function J(ne){return ne instanceof this?ne:Oe.resolve(new this(Ne),ne)},qe.reject=function Z(ne){var K=new this(Ne);return Oe.reject(K,ne)},qe.all=function ee(ne){var K=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var ye=ne.length,Q=!1;if(!ye)return this.resolve([]);for(var he=new Array(ye),se=0,be=-1,ie=new this(Ne);++be<ye;)Ve(ne[be],be);return ie;function Ve(Se,Y){K.resolve(Se).then(function Ge(De){he[Y]=De,++se===ye&&!Q&&(Q=!0,Oe.resolve(ie,he))},function(De){Q||(Q=!0,Oe.reject(ie,De))})}},qe.race=function ke(ne){var K=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var ye=ne.length,Q=!1;if(!ye)return this.resolve([]);for(var he=-1,se=new this(Ne);++he<ye;)K.resolve(ne[he]).then(function(Ve){Q||(Q=!0,Oe.resolve(se,Ve))},function(Ve){Q||(Q=!0,Oe.reject(se,Ve))});return se}},{1:1}],3:[function(Le,Je,g){(function(fe){"use strict";"function"!=typeof fe.Promise&&(fe.Promise=Le(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(Le,Je,g){"use strict";var fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(We){return typeof We}:function(We){return We&&"function"==typeof Symbol&&We.constructor===Symbol&&We!==Symbol.prototype?"symbol":typeof We};var He=function Oe(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function Ht(We,Bt){We=We||[],Bt=Bt||{};try{return new Blob(We,Bt)}catch(Ot){if("TypeError"!==Ot.name)throw Ot;for(var tt=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),St=0;St<We.length;St+=1)tt.append(We[St]);return tt.getBlob(Bt.type)}}typeof Promise>"u"&&Le(3);var qe=Promise;function Qe(We,Bt){Bt&&We.then(function(gt){Bt(null,gt)},function(gt){Bt(gt)})}function je(We,Bt,gt){"function"==typeof Bt&&We.then(Bt),"function"==typeof gt&&We.catch(gt)}function Nt(We){return"string"!=typeof We&&(console.warn(We+" used as a key, but it is not a string."),We=String(We)),We}function le(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var we="local-forage-detect-blob-support",J=void 0,Z={},ee=Object.prototype.toString,ke="readonly",ne="readwrite";function K(We){for(var Bt=We.length,gt=new ArrayBuffer(Bt),tt=new Uint8Array(gt),St=0;St<Bt;St++)tt[St]=We.charCodeAt(St);return gt}function Q(We){return"boolean"==typeof J?qe.resolve(J):function ye(We){return new qe(function(Bt){var gt=We.transaction(we,ne),tt=Ht([""]);gt.objectStore(we).put(tt,"key"),gt.onabort=function(St){St.preventDefault(),St.stopPropagation(),Bt(!1)},gt.oncomplete=function(){var St=navigator.userAgent.match(/Chrome\/(\d+)/),Ot=navigator.userAgent.match(/Edge\//);Bt(Ot||!St||parseInt(St[1],10)>=43)}}).catch(function(){return!1})}(We).then(function(Bt){return J=Bt})}function he(We){var Bt=Z[We.name],gt={};gt.promise=new qe(function(tt,St){gt.resolve=tt,gt.reject=St}),Bt.deferredOperations.push(gt),Bt.dbReady=Bt.dbReady?Bt.dbReady.then(function(){return gt.promise}):gt.promise}function se(We){var gt=Z[We.name].deferredOperations.pop();if(gt)return gt.resolve(),gt.promise}function be(We,Bt){var tt=Z[We.name].deferredOperations.pop();if(tt)return tt.reject(Bt),tt.promise}function ie(We,Bt){return new qe(function(gt,tt){if(Z[We.name]=Z[We.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},We.db){if(!Bt)return gt(We.db);he(We),We.db.close()}var St=[We.name];Bt&&St.push(We.version);var Ot=He.open.apply(He,St);Bt&&(Ot.onupgradeneeded=function(ce){var ge=Ot.result;try{ge.createObjectStore(We.storeName),ce.oldVersion<=1&&ge.createObjectStore(we)}catch(nt){if("ConstraintError"!==nt.name)throw nt;console.warn('The database "'+We.name+'" has been upgraded from version '+ce.oldVersion+" to version "+ce.newVersion+', but the storage "'+We.storeName+'" already exists.')}}),Ot.onerror=function(ce){ce.preventDefault(),tt(Ot.error)},Ot.onsuccess=function(){var ce=Ot.result;ce.onversionchange=function(ge){ge.target.close()},gt(ce),se(We)}})}function Ve(We){return ie(We,!1)}function Se(We){return ie(We,!0)}function Y(We,Bt){if(!We.db)return!0;var gt=!We.db.objectStoreNames.contains(We.storeName),St=We.version>We.db.version;if(We.version<We.db.version&&(We.version!==Bt&&console.warn('The database "'+We.name+"\" can't be downgraded from version "+We.db.version+" to version "+We.version+"."),We.version=We.db.version),St||gt){if(gt){var Ot=We.db.version+1;Ot>We.version&&(We.version=Ot)}return!0}return!1}function De(We){return Ht([K(atob(We.data))],{type:We.type})}function Ke(We){return We&&We.__local_forage_encoded_blob}function $e(We){var Bt=this,gt=Bt._initReady().then(function(){var tt=Z[Bt._dbInfo.name];if(tt&&tt.dbReady)return tt.dbReady});return je(gt,We,We),gt}function Ze(We,Bt,gt,tt){void 0===tt&&(tt=1);try{var St=We.db.transaction(We.storeName,Bt);gt(null,St)}catch(Ot){if(tt>0&&(!We.db||"InvalidStateError"===Ot.name||"NotFoundError"===Ot.name))return qe.resolve().then(function(){if(!We.db||"NotFoundError"===Ot.name&&!We.db.objectStoreNames.contains(We.storeName)&&We.version<=We.db.version)return We.db&&(We.version=We.db.version+1),Se(We)}).then(function(){return function ae(We){he(We);for(var Bt=Z[We.name],gt=Bt.forages,tt=0;tt<gt.length;tt++){var St=gt[tt];St._dbInfo.db&&(St._dbInfo.db.close(),St._dbInfo.db=null)}return We.db=null,Ve(We).then(function(Ot){return We.db=Ot,Y(We)?Se(We):Ot}).then(function(Ot){We.db=Bt.db=Ot;for(var ce=0;ce<gt.length;ce++)gt[ce]._dbInfo.db=Ot}).catch(function(Ot){throw be(We,Ot),Ot})}(We).then(function(){Ze(We,Bt,gt,tt-1)})}).catch(gt);gt(Ot)}}var Lt={_driver:"asyncStorage",_initStorage:function dn(We){var Bt=this,gt={db:null};if(We)for(var tt in We)gt[tt]=We[tt];var St=Z[gt.name];St||(Z[gt.name]=St={forages:[],db:null,dbReady:null,deferredOperations:[]}),St.forages.push(Bt),Bt._initReady||(Bt._initReady=Bt.ready,Bt.ready=$e);var Ot=[];function ce(){return qe.resolve()}for(var ge=0;ge<St.forages.length;ge++){var nt=St.forages[ge];nt!==Bt&&Ot.push(nt._initReady().catch(ce))}var yt=St.forages.slice(0);return qe.all(Ot).then(function(){return gt.db=St.db,Ve(gt)}).then(function(Re){return gt.db=Re,Y(gt,Bt._defaultConfig.version)?Se(gt):Re}).then(function(Re){gt.db=St.db=Re,Bt._dbInfo=gt;for(var ut=0;ut<yt.length;ut++){var kt=yt[ut];kt!==Bt&&(kt._dbInfo.db=gt.db,kt._dbInfo.version=gt.version)}})},_support:function ct(){try{if(!He||!He.open)return!1;var We=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Bt="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!We||Bt)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function _n(We,Bt){var gt=this,tt=new qe(function(St,Ot){gt.ready().then(function(){Ze(gt._dbInfo,ke,function(ce,ge){if(ce)return Ot(ce);try{var yt=ge.objectStore(gt._dbInfo.storeName).openCursor(),Re=1;yt.onsuccess=function(){var ut=yt.result;if(ut){var kt=ut.value;Ke(kt)&&(kt=De(kt));var rn=We(kt,ut.key,Re++);void 0!==rn?St(rn):ut.continue()}else St()},yt.onerror=function(){Ot(yt.error)}}catch(ut){Ot(ut)}})}).catch(Ot)});return Qe(tt,Bt),tt},getItem:function qt(We,Bt){var gt=this;We=Nt(We);var tt=new qe(function(St,Ot){gt.ready().then(function(){Ze(gt._dbInfo,ke,function(ce,ge){if(ce)return Ot(ce);try{var yt=ge.objectStore(gt._dbInfo.storeName).get(We);yt.onsuccess=function(){var Re=yt.result;void 0===Re&&(Re=null),Ke(Re)&&(Re=De(Re)),St(Re)},yt.onerror=function(){Ot(yt.error)}}catch(Re){Ot(Re)}})}).catch(Ot)});return Qe(tt,Bt),tt},setItem:function kn(We,Bt,gt){var tt=this;We=Nt(We);var St=new qe(function(Ot,ce){var ge;tt.ready().then(function(){return ge=tt._dbInfo,"[object Blob]"===ee.call(Bt)?Q(ge.db).then(function(nt){return nt?Bt:function Ge(We){return new qe(function(Bt,gt){var tt=new FileReader;tt.onerror=gt,tt.onloadend=function(St){var Ot=btoa(St.target.result||"");Bt({__local_forage_encoded_blob:!0,data:Ot,type:We.type})},tt.readAsBinaryString(We)})}(Bt)}):Bt}).then(function(nt){Ze(tt._dbInfo,ne,function(yt,Re){if(yt)return ce(yt);try{var ut=Re.objectStore(tt._dbInfo.storeName);null===nt&&(nt=void 0);var kt=ut.put(nt,We);Re.oncomplete=function(){void 0===nt&&(nt=null),Ot(nt)},Re.onabort=Re.onerror=function(){ce(kt.error?kt.error:kt.transaction.error)}}catch(rn){ce(rn)}})}).catch(ce)});return Qe(St,gt),St},removeItem:function ei(We,Bt){var gt=this;We=Nt(We);var tt=new qe(function(St,Ot){gt.ready().then(function(){Ze(gt._dbInfo,ne,function(ce,ge){if(ce)return Ot(ce);try{var yt=ge.objectStore(gt._dbInfo.storeName).delete(We);ge.oncomplete=function(){St()},ge.onerror=function(){Ot(yt.error)},ge.onabort=function(){Ot(yt.error?yt.error:yt.transaction.error)}}catch(Re){Ot(Re)}})}).catch(Ot)});return Qe(tt,Bt),tt},clear:function Vt(We){var Bt=this,gt=new qe(function(tt,St){Bt.ready().then(function(){Ze(Bt._dbInfo,ne,function(Ot,ce){if(Ot)return St(Ot);try{var nt=ce.objectStore(Bt._dbInfo.storeName).clear();ce.oncomplete=function(){tt()},ce.onabort=ce.onerror=function(){St(nt.error?nt.error:nt.transaction.error)}}catch(yt){St(yt)}})}).catch(St)});return Qe(gt,We),gt},length:function vi(We){var Bt=this,gt=new qe(function(tt,St){Bt.ready().then(function(){Ze(Bt._dbInfo,ke,function(Ot,ce){if(Ot)return St(Ot);try{var nt=ce.objectStore(Bt._dbInfo.storeName).count();nt.onsuccess=function(){tt(nt.result)},nt.onerror=function(){St(nt.error)}}catch(yt){St(yt)}})}).catch(St)});return Qe(gt,We),gt},key:function Tn(We,Bt){var gt=this,tt=new qe(function(St,Ot){We<0?St(null):gt.ready().then(function(){Ze(gt._dbInfo,ke,function(ce,ge){if(ce)return Ot(ce);try{var nt=ge.objectStore(gt._dbInfo.storeName),yt=!1,Re=nt.openKeyCursor();Re.onsuccess=function(){var ut=Re.result;ut?0===We||yt?St(ut.key):(yt=!0,ut.advance(We)):St(null)},Re.onerror=function(){Ot(Re.error)}}catch(ut){Ot(ut)}})}).catch(Ot)});return Qe(tt,Bt),tt},keys:function Un(We){var Bt=this,gt=new qe(function(tt,St){Bt.ready().then(function(){Ze(Bt._dbInfo,ke,function(Ot,ce){if(Ot)return St(Ot);try{var nt=ce.objectStore(Bt._dbInfo.storeName).openKeyCursor(),yt=[];nt.onsuccess=function(){var Re=nt.result;Re?(yt.push(Re.key),Re.continue()):tt(yt)},nt.onerror=function(){St(nt.error)}}catch(Re){St(Re)}})}).catch(St)});return Qe(gt,We),gt},dropInstance:function cn(We,Bt){Bt=le.apply(this,arguments);var St,gt=this.config();return(We="function"!=typeof We&&We||{}).name||(We.name=We.name||gt.name,We.storeName=We.storeName||gt.storeName),Qe(St=We.name?(We.name===gt.name&&this._dbInfo.db?qe.resolve(this._dbInfo.db):Ve(We).then(function(ge){var nt=Z[We.name],yt=nt.forages;nt.db=ge;for(var Re=0;Re<yt.length;Re++)yt[Re]._dbInfo.db=ge;return ge})).then(We.storeName?function(ge){if(ge.objectStoreNames.contains(We.storeName)){var nt=ge.version+1;he(We);var yt=Z[We.name],Re=yt.forages;ge.close();for(var ut=0;ut<Re.length;ut++){var kt=Re[ut];kt._dbInfo.db=null,kt._dbInfo.version=nt}return new qe(function(vn,xt){var Pn=He.open(We.name,nt);Pn.onerror=function($i){Pn.result.close(),xt($i)},Pn.onupgradeneeded=function(){Pn.result.deleteObjectStore(We.storeName)},Pn.onsuccess=function(){var $i=Pn.result;$i.close(),vn($i)}}).then(function(vn){yt.db=vn;for(var xt=0;xt<Re.length;xt++){var Pn=Re[xt];Pn._dbInfo.db=vn,se(Pn._dbInfo)}}).catch(function(vn){throw(be(We,vn)||qe.resolve()).catch(function(){}),vn})}}:function(ge){he(We);var nt=Z[We.name],yt=nt.forages;ge.close();for(var Re=0;Re<yt.length;Re++)yt[Re]._dbInfo.db=null;return new qe(function(rn,vn){var xt=He.deleteDatabase(We.name);xt.onerror=function(){var Pn=xt.result;Pn&&Pn.close(),vn(xt.error)},xt.onblocked=function(){console.warn('dropInstance blocked for database "'+We.name+'" until all open connections are closed')},xt.onsuccess=function(){var Pn=xt.result;Pn&&Pn.close(),rn(Pn)}}).then(function(rn){nt.db=rn;for(var vn=0;vn<yt.length;vn++)se(yt[vn]._dbInfo)}).catch(function(rn){throw(be(We,rn)||qe.resolve()).catch(function(){}),rn})}):qe.reject("Invalid arguments"),Bt),St}};var Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ae=/^~~local_forage_type~([^~]+)~/,Te="__lfsc__:",lt="arbf",Mt="blob",gr=Object.prototype.toString;function Fr(We){var tt,Ot,ce,ge,nt,Bt=.75*We.length,gt=We.length,St=0;"="===We[We.length-1]&&(Bt--,"="===We[We.length-2]&&Bt--);var yt=new ArrayBuffer(Bt),Re=new Uint8Array(yt);for(tt=0;tt<gt;tt+=4)Ot=Gn.indexOf(We[tt]),ce=Gn.indexOf(We[tt+1]),ge=Gn.indexOf(We[tt+2]),nt=Gn.indexOf(We[tt+3]),Re[St++]=Ot<<2|ce>>4,Re[St++]=(15&ce)<<4|ge>>2,Re[St++]=(3&ge)<<6|63&nt;return yt}function zr(We){var tt,Bt=new Uint8Array(We),gt="";for(tt=0;tt<Bt.length;tt+=3)gt+=Gn[Bt[tt]>>2],gt+=Gn[(3&Bt[tt])<<4|Bt[tt+1]>>4],gt+=Gn[(15&Bt[tt+1])<<2|Bt[tt+2]>>6],gt+=Gn[63&Bt[tt+2]];return Bt.length%3==2?gt=gt.substring(0,gt.length-1)+"=":Bt.length%3==1&&(gt=gt.substring(0,gt.length-2)+"=="),gt}var Ie={serialize:function bo(We,Bt){var gt="";if(We&&(gt=gr.call(We)),We&&("[object ArrayBuffer]"===gt||We.buffer&&"[object ArrayBuffer]"===gr.call(We.buffer))){var tt,St=Te;We instanceof ArrayBuffer?(tt=We,St+=lt):(tt=We.buffer,"[object Int8Array]"===gt?St+="si08":"[object Uint8Array]"===gt?St+="ui08":"[object Uint8ClampedArray]"===gt?St+="uic8":"[object Int16Array]"===gt?St+="si16":"[object Uint16Array]"===gt?St+="ur16":"[object Int32Array]"===gt?St+="si32":"[object Uint32Array]"===gt?St+="ui32":"[object Float32Array]"===gt?St+="fl32":"[object Float64Array]"===gt?St+="fl64":Bt(new Error("Failed to get type for BinaryArray"))),Bt(St+zr(tt))}else if("[object Blob]"===gt){var Ot=new FileReader;Ot.onload=function(){var ce="~~local_forage_type~"+We.type+"~"+zr(this.result);Bt(Te+Mt+ce)},Ot.readAsArrayBuffer(We)}else try{Bt(JSON.stringify(We))}catch(ce){console.error("Couldn't convert value into a JSON string: ",We),Bt(null,ce)}},deserialize:function mt(We){if(We.substring(0,9)!==Te)return JSON.parse(We);var tt,Bt=We.substring(13),gt=We.substring(9,13);if(gt===Mt&&Ae.test(Bt)){var St=Bt.match(Ae);tt=St[1],Bt=Bt.substring(St[0].length)}var Ot=Fr(Bt);switch(gt){case lt:return Ot;case Mt:return Ht([Ot],{type:tt});case"si08":return new Int8Array(Ot);case"ui08":return new Uint8Array(Ot);case"uic8":return new Uint8ClampedArray(Ot);case"si16":return new Int16Array(Ot);case"ur16":return new Uint16Array(Ot);case"si32":return new Int32Array(Ot);case"ui32":return new Uint32Array(Ot);case"fl32":return new Float32Array(Ot);case"fl64":return new Float64Array(Ot);default:throw new Error("Unkown type: "+gt)}},stringToBuffer:Fr,bufferToString:zr};function Me(We,Bt,gt,tt){We.executeSql("CREATE TABLE IF NOT EXISTS "+Bt.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],gt,tt)}function Ct(We,Bt,gt,tt,St,Ot){We.executeSql(gt,tt,St,function(ce,ge){ge.code===ge.SYNTAX_ERR?ce.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Bt.storeName],function(nt,yt){yt.rows.length?Ot(nt,ge):Me(nt,Bt,function(){nt.executeSql(gt,tt,St,Ot)},Ot)},Ot):Ot(ce,ge)},Ot)}function Zt(We,Bt,gt,tt){var St=this;We=Nt(We);var Ot=new qe(function(ce,ge){St.ready().then(function(){void 0===Bt&&(Bt=null);var nt=Bt,yt=St._dbInfo;yt.serializer.serialize(Bt,function(Re,ut){ut?ge(ut):yt.db.transaction(function(kt){Ct(kt,yt,"INSERT OR REPLACE INTO "+yt.storeName+" (key, value) VALUES (?, ?)",[We,Re],function(){ce(nt)},function(rn,vn){ge(vn)})},function(kt){if(kt.code===kt.QUOTA_ERR){if(tt>0)return void ce(Zt.apply(St,[We,nt,gt,tt-1]));ge(kt)}})})}).catch(ge)});return Qe(Ot,gt),Ot}var Zi={_driver:"webSQLStorage",_initStorage:function pt(We){var Bt=this,gt={db:null};if(We)for(var tt in We)gt[tt]="string"!=typeof We[tt]?We[tt].toString():We[tt];var St=new qe(function(Ot,ce){try{gt.db=openDatabase(gt.name,String(gt.version),gt.description,gt.size)}catch(ge){return ce(ge)}gt.db.transaction(function(ge){Me(ge,gt,function(){Bt._dbInfo=gt,Ot()},function(nt,yt){ce(yt)})},ce)});return gt.serializer=Ie,St},_support:function Cn(){return"function"==typeof openDatabase}(),iterate:function en(We,Bt){var gt=this,tt=new qe(function(St,Ot){gt.ready().then(function(){var ce=gt._dbInfo;ce.db.transaction(function(ge){Ct(ge,ce,"SELECT * FROM "+ce.storeName,[],function(nt,yt){for(var Re=yt.rows,ut=Re.length,kt=0;kt<ut;kt++){var rn=Re.item(kt),vn=rn.value;if(vn&&(vn=ce.serializer.deserialize(vn)),void 0!==(vn=We(vn,rn.key,kt+1)))return void St(vn)}St()},function(nt,yt){Ot(yt)})})}).catch(Ot)});return Qe(tt,Bt),tt},getItem:function at(We,Bt){var gt=this;We=Nt(We);var tt=new qe(function(St,Ot){gt.ready().then(function(){var ce=gt._dbInfo;ce.db.transaction(function(ge){Ct(ge,ce,"SELECT * FROM "+ce.storeName+" WHERE key = ? LIMIT 1",[We],function(nt,yt){var Re=yt.rows.length?yt.rows.item(0).value:null;Re&&(Re=ce.serializer.deserialize(Re)),St(Re)},function(nt,yt){Ot(yt)})})}).catch(Ot)});return Qe(tt,Bt),tt},setItem:function It(We,Bt,gt){return Zt.apply(this,[We,Bt,gt,1])},removeItem:function un(We,Bt){var gt=this;We=Nt(We);var tt=new qe(function(St,Ot){gt.ready().then(function(){var ce=gt._dbInfo;ce.db.transaction(function(ge){Ct(ge,ce,"DELETE FROM "+ce.storeName+" WHERE key = ?",[We],function(){St()},function(nt,yt){Ot(yt)})})}).catch(Ot)});return Qe(tt,Bt),tt},clear:function Xn(We){var Bt=this,gt=new qe(function(tt,St){Bt.ready().then(function(){var Ot=Bt._dbInfo;Ot.db.transaction(function(ce){Ct(ce,Ot,"DELETE FROM "+Ot.storeName,[],function(){tt()},function(ge,nt){St(nt)})})}).catch(St)});return Qe(gt,We),gt},length:function ri(We){var Bt=this,gt=new qe(function(tt,St){Bt.ready().then(function(){var Ot=Bt._dbInfo;Ot.db.transaction(function(ce){Ct(ce,Ot,"SELECT COUNT(key) as c FROM "+Ot.storeName,[],function(ge,nt){var yt=nt.rows.item(0).c;tt(yt)},function(ge,nt){St(nt)})})}).catch(St)});return Qe(gt,We),gt},key:function Zn(We,Bt){var gt=this,tt=new qe(function(St,Ot){gt.ready().then(function(){var ce=gt._dbInfo;ce.db.transaction(function(ge){Ct(ge,ce,"SELECT key FROM "+ce.storeName+" WHERE id = ? LIMIT 1",[We+1],function(nt,yt){var Re=yt.rows.length?yt.rows.item(0).key:null;St(Re)},function(nt,yt){Ot(yt)})})}).catch(Ot)});return Qe(tt,Bt),tt},keys:function yr(We){var Bt=this,gt=new qe(function(tt,St){Bt.ready().then(function(){var Ot=Bt._dbInfo;Ot.db.transaction(function(ce){Ct(ce,Ot,"SELECT key FROM "+Ot.storeName,[],function(ge,nt){for(var yt=[],Re=0;Re<nt.rows.length;Re++)yt.push(nt.rows.item(Re).key);tt(yt)},function(ge,nt){St(nt)})})}).catch(St)});return Qe(gt,We),gt},dropInstance:function sr(We,Bt){Bt=le.apply(this,arguments);var gt=this.config();(We="function"!=typeof We&&We||{}).name||(We.name=We.name||gt.name,We.storeName=We.storeName||gt.storeName);var St,tt=this;return Qe(St=We.name?new qe(function(Ot){var ce;ce=We.name===gt.name?tt._dbInfo.db:openDatabase(We.name,"","",0),Ot(We.storeName?{db:ce,storeNames:[We.storeName]}:function Cr(We){return new qe(function(Bt,gt){We.transaction(function(tt){tt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(St,Ot){for(var ce=[],ge=0;ge<Ot.rows.length;ge++)ce.push(Ot.rows.item(ge).name);Bt({db:We,storeNames:ce})},function(St,Ot){gt(Ot)})},function(tt){gt(tt)})})}(ce))}).then(function(Ot){return new qe(function(ce,ge){Ot.db.transaction(function(nt){function yt(rn){return new qe(function(vn,xt){nt.executeSql("DROP TABLE IF EXISTS "+rn,[],function(){vn()},function(Pn,$i){xt($i)})})}for(var Re=[],ut=0,kt=Ot.storeNames.length;ut<kt;ut++)Re.push(yt(Ot.storeNames[ut]));qe.all(Re).then(function(){ce()}).catch(function(rn){ge(rn)})},function(nt){ge(nt)})})}):qe.reject("Invalid arguments"),Bt),St}};function Br(We,Bt){var gt=We.name+"/";return We.storeName!==Bt.storeName&&(gt+=We.storeName+"/"),gt}function wt(){return!function vt(){var We="_localforage_support_test";try{return localStorage.setItem(We,!0),localStorage.removeItem(We),!1}catch{return!0}}()||localStorage.length>0}var rr={_driver:"localStorageWrapper",_initStorage:function nn(We){var gt={};if(We)for(var tt in We)gt[tt]=We[tt];return gt.keyPrefix=Br(We,this._defaultConfig),wt()?(this._dbInfo=gt,gt.serializer=Ie,qe.resolve()):qe.reject()},_support:function Sr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function Vn(We,Bt){var gt=this,tt=gt.ready().then(function(){for(var St=gt._dbInfo,Ot=St.keyPrefix,ce=Ot.length,ge=localStorage.length,nt=1,yt=0;yt<ge;yt++){var Re=localStorage.key(yt);if(0===Re.indexOf(Ot)){var ut=localStorage.getItem(Re);if(ut&&(ut=St.serializer.deserialize(ut)),void 0!==(ut=We(ut,Re.substring(ce),nt++)))return ut}}});return Qe(tt,Bt),tt},getItem:function Sn(We,Bt){var gt=this;We=Nt(We);var tt=gt.ready().then(function(){var St=gt._dbInfo,Ot=localStorage.getItem(St.keyPrefix+We);return Ot&&(Ot=St.serializer.deserialize(Ot)),Ot});return Qe(tt,Bt),tt},setItem:function _r(We,Bt,gt){var tt=this;We=Nt(We);var St=tt.ready().then(function(){void 0===Bt&&(Bt=null);var Ot=Bt;return new qe(function(ce,ge){var nt=tt._dbInfo;nt.serializer.serialize(Bt,function(yt,Re){if(Re)ge(Re);else try{localStorage.setItem(nt.keyPrefix+We,yt),ce(Ot)}catch(ut){("QuotaExceededError"===ut.name||"NS_ERROR_DOM_QUOTA_REACHED"===ut.name)&&ge(ut),ge(ut)}})})});return Qe(St,gt),St},removeItem:function zn(We,Bt){var gt=this;We=Nt(We);var tt=gt.ready().then(function(){localStorage.removeItem(gt._dbInfo.keyPrefix+We)});return Qe(tt,Bt),tt},clear:function an(We){var Bt=this,gt=Bt.ready().then(function(){for(var tt=Bt._dbInfo.keyPrefix,St=localStorage.length-1;St>=0;St--){var Ot=localStorage.key(St);0===Ot.indexOf(tt)&&localStorage.removeItem(Ot)}});return Qe(gt,We),gt},length:function ki(We){var gt=this.keys().then(function(tt){return tt.length});return Qe(gt,We),gt},key:function Qn(We,Bt){var gt=this,tt=gt.ready().then(function(){var Ot,St=gt._dbInfo;try{Ot=localStorage.key(We)}catch{Ot=null}return Ot&&(Ot=Ot.substring(St.keyPrefix.length)),Ot});return Qe(tt,Bt),tt},keys:function oi(We){var Bt=this,gt=Bt.ready().then(function(){for(var tt=Bt._dbInfo,St=localStorage.length,Ot=[],ce=0;ce<St;ce++){var ge=localStorage.key(ce);0===ge.indexOf(tt.keyPrefix)&&Ot.push(ge.substring(tt.keyPrefix.length))}return Ot});return Qe(gt,We),gt},dropInstance:function Ri(We,Bt){if(Bt=le.apply(this,arguments),!(We="function"!=typeof We&&We||{}).name){var gt=this.config();We.name=We.name||gt.name,We.storeName=We.storeName||gt.storeName}var St,tt=this;return Qe(St=We.name?new qe(function(Ot){Ot(We.storeName?Br(We,tt._defaultConfig):We.name+"/")}).then(function(Ot){for(var ce=localStorage.length-1;ce>=0;ce--){var ge=localStorage.key(ce);0===ge.indexOf(Ot)&&localStorage.removeItem(ge)}}):qe.reject("Invalid arguments"),Bt),St}},to=function(Bt,gt){return Bt===gt||"number"==typeof Bt&&"number"==typeof gt&&isNaN(Bt)&&isNaN(gt)},Vr=function(Bt,gt){for(var tt=Bt.length,St=0;St<tt;){if(to(Bt[St],gt))return!0;St++}return!1},To=Array.isArray||function(We){return"[object Array]"===Object.prototype.toString.call(We)},so={},Ns={},No={INDEXEDDB:Lt,WEBSQL:Zi,LOCALSTORAGE:rr},no=[No.INDEXEDDB._driver,No.WEBSQL._driver,No.LOCALSTORAGE._driver],ar=["dropInstance"],Mn=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ar),yl={description:"",driver:no.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function xs(We,Bt){We[Bt]=function(){var gt=arguments;return We.ready().then(function(){return We[Bt].apply(We,gt)})}}function ws(){for(var We=1;We<arguments.length;We++){var Bt=arguments[We];if(Bt)for(var gt in Bt)Bt.hasOwnProperty(gt)&&(arguments[0][gt]=To(Bt[gt])?Bt[gt].slice():Bt[gt])}return arguments[0]}var ko=function(){function We(Bt){for(var gt in function Ne(We,Bt){if(!(We instanceof Bt))throw new TypeError("Cannot call a class as a function")}(this,We),No)if(No.hasOwnProperty(gt)){var tt=No[gt],St=tt._driver;this[gt]=St,so[St]||this.defineDriver(tt)}this._defaultConfig=ws({},yl),this._config=ws({},this._defaultConfig,Bt),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return We.prototype.config=function(gt){if("object"===(typeof gt>"u"?"undefined":fe(gt))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var tt in gt){if("storeName"===tt&&(gt[tt]=gt[tt].replace(/\W/g,"_")),"version"===tt&&"number"!=typeof gt[tt])return new Error("Database version must be a number.");this._config[tt]=gt[tt]}return!("driver"in gt)||!gt.driver||this.setDriver(this._config.driver)}return"string"==typeof gt?this._config[gt]:this._config},We.prototype.defineDriver=function(gt,tt,St){var Ot=new qe(function(ce,ge){try{var nt=gt._driver,yt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!gt._driver)return void ge(yt);for(var Re=Mn.concat("_initStorage"),ut=0,kt=Re.length;ut<kt;ut++){var rn=Re[ut];if((!Vr(ar,rn)||gt[rn])&&"function"!=typeof gt[rn])return void ge(yt)}!function(){for(var ur=function(ji){return function(){var Mr=new Error("Method "+ji+" is not implemented by the current driver"),As=qe.reject(Mr);return Qe(As,arguments[arguments.length-1]),As}},ao=0,yo=ar.length;ao<yo;ao++){var Jt=ar[ao];gt[Jt]||(gt[Jt]=ur(Jt))}}();var Pn=function(ur){so[nt]&&console.info("Redefining LocalForage driver: "+nt),so[nt]=gt,Ns[nt]=ur,ce()};"_support"in gt?gt._support&&"function"==typeof gt._support?gt._support().then(Pn,ge):Pn(!!gt._support):Pn(!0)}catch($i){ge($i)}});return je(Ot,tt,St),Ot},We.prototype.driver=function(){return this._driver||null},We.prototype.getDriver=function(gt,tt,St){var Ot=so[gt]?qe.resolve(so[gt]):qe.reject(new Error("Driver not found."));return je(Ot,tt,St),Ot},We.prototype.getSerializer=function(gt){var tt=qe.resolve(Ie);return je(tt,gt),tt},We.prototype.ready=function(gt){var tt=this,St=tt._driverSet.then(function(){return null===tt._ready&&(tt._ready=tt._initDriver()),tt._ready});return je(St,gt,gt),St},We.prototype.setDriver=function(gt,tt,St){var Ot=this;To(gt)||(gt=[gt]);var ce=this._getSupportedDrivers(gt);function ge(){Ot._config.driver=Ot.driver()}function nt(ut){return Ot._extend(ut),ge(),Ot._ready=Ot._initStorage(Ot._config),Ot._ready}var Re=null!==this._driverSet?this._driverSet.catch(function(){return qe.resolve()}):qe.resolve();return this._driverSet=Re.then(function(){var ut=ce[0];return Ot._dbInfo=null,Ot._ready=null,Ot.getDriver(ut).then(function(kt){Ot._driver=kt._driver,ge(),Ot._wrapLibraryMethodsWithReady(),Ot._initDriver=function yt(ut){return function(){var kt=0;return function rn(){for(;kt<ut.length;){var vn=ut[kt];return kt++,Ot._dbInfo=null,Ot._ready=null,Ot.getDriver(vn).then(nt).catch(rn)}ge();var xt=new Error("No available storage method found.");return Ot._driverSet=qe.reject(xt),Ot._driverSet}()}}(ce)})}).catch(function(){ge();var ut=new Error("No available storage method found.");return Ot._driverSet=qe.reject(ut),Ot._driverSet}),je(this._driverSet,tt,St),this._driverSet},We.prototype.supports=function(gt){return!!Ns[gt]},We.prototype._extend=function(gt){ws(this,gt)},We.prototype._getSupportedDrivers=function(gt){for(var tt=[],St=0,Ot=gt.length;St<Ot;St++){var ce=gt[St];this.supports(ce)&&tt.push(ce)}return tt},We.prototype._wrapLibraryMethodsWithReady=function(){for(var gt=0,tt=Mn.length;gt<tt;gt++)xs(this,Mn[gt])},We.prototype.createInstance=function(gt){return new We(gt)},We}(),Tl=new ko;Je.exports=Tl},{3:3}]},{},[4])(4)},2574:function(An){An.exports=function(){"use strict";var Rt,Ce,ue;function Le(g,fe){if(Rt)if(Ce){var Ne="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Rt+")(sharedChunk); ("+Ce+")(sharedChunk); self.onerror = null;",Oe={};Rt(Oe),ue=fe(Oe),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(ue.workerUrl=window.URL.createObjectURL(new Blob([Ne],{type:"text/javascript"})))}else Ce=fe;else Rt=fe}return Le(0,function(g){var fe=typeof self<"u"?self:{},Ne="2.15.0";let Oe;const He={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Oe){const l=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Oe=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):l}catch{Oe=l}}return Oe},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!He.API_URL)return null;try{const l=new URL(He.API_URL);return"api.mapbox.cn"===l.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===l.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ct={supported:!1,testSupport:function(l){!Qe&&qe&&(je?Nt(l):Ht=l)}};let Ht,qe,Qe=!1,je=!1;function Nt(l){const s=l.createTexture();l.bindTexture(l.TEXTURE_2D,s);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,qe),l.isContextLost())return;ct.supported=!0}catch{}l.deleteTexture(s),Qe=!0}fe.document&&(qe=fe.document.createElement("img"),qe.onload=function(){Ht&&Nt(Ht),Ht=null,je=!0},qe.onerror=function(){Qe=!0,Ht=null},qe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const le="01";function we(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var J=Z;function Z(l,s,u,p){this.cx=3*l,this.bx=3*(u-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=u,this.p2y=p}Z.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(void 0===s&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var u=l,p=0;p<8;p++){var v=this.sampleCurveX(u)-l;if(Math.abs(v)<s)return u;var E=this.sampleCurveDerivativeX(u);if(Math.abs(E)<1e-6)break;u-=v/E}var I=0,M=1;for(u=l,p=0;p<20&&(v=this.sampleCurveX(u),!(Math.abs(v-l)<s));p++)l>v?I=u:M=u,u=.5*(M-I)+I;return u},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};var ee=we(J),ke=ne;function ne(l,s){this.x=l,this.y=s}ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,s){return this.clone()._rotateAround(l,s)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var s=l.x-this.x,u=l.y-this.y;return s*s+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,s){return Math.atan2(this.x*s-this.y*l,this.x*l+this.y*s)},_matMult:function(l){var s=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=s,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var s=Math.cos(l),u=Math.sin(l),p=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=p,this},_rotateAround:function(l,s){var u=Math.cos(l),p=Math.sin(l),v=s.y+p*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-p*(this.y-s.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ne.convert=function(l){return l instanceof ne?l:Array.isArray(l)?new ne(l[0],l[1]):l};var K=we(ke);const ye=Math.PI/180,Q=180/Math.PI;function he(l){return l*ye}function se(l){return l*Q}const be=[[0,0],[1,0],[1,1],[0,1]];function ie(l){if(l<=0)return 0;if(l>=1)return 1;const s=l*l,u=s*l;return 4*(l<.5?u:3*(l-s)+u-.75)}function Ve(l,s,u,p){const v=new ee(l,s,u,p);return function(E){return v.solve(E)}}const Se=Ve(.25,.1,.25,1);function Y(l,s,u){return Math.min(u,Math.max(s,l))}function Ge(l,s,u){return(u=Y((u-l)/(s-l),0,1))*u*(3-2*u)}function De(l,s,u){const p=u-s,v=((l-s)%p+p)%p+s;return v===s?u:v}function Ke(l,s,u){if(!l.length)return u(null,[]);let p=l.length;const v=new Array(l.length);let E=null;l.forEach((I,M)=>{s(I,(R,L)=>{R&&(E=R),v[M]=L,0==--p&&u(E,v)})})}function $e(l){const s=[];for(const u in l)s.push(l[u]);return s}function ae(l,...s){for(const u of s)for(const p in u)l[p]=u[p];return l}let Ze=1;function et(){return Ze++}function dn(){return function l(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function qt(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function _n(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function kn(l,s){l.forEach(u=>{s[u]&&(s[u]=s[u].bind(s))})}function ei(l,s){return-1!==l.indexOf(s,l.length-s.length)}function Vt(l,s,u){const p={};for(const v in l)p[v]=s.call(u||this,l[v],v,l);return p}function vi(l,s,u){const p={};for(const v in l)s.call(u||this,l[v],v,l)&&(p[v]=l[v]);return p}function Tn(l){return Array.isArray(l)?l.map(Tn):"object"==typeof l&&l?Vt(l,Tn):l}const Un={};function cn(l){Un[l]||(typeof console<"u"&&console.warn(l),Un[l]=!0)}function Lt(l,s,u){return(u.y-l.y)*(s.x-l.x)>(s.y-l.y)*(u.x-l.x)}function Cn(l){let s=0;for(let u,p,v=0,E=l.length,I=E-1;v<E;I=v++)u=l[v],p=l[I],s+=(p.x-u.x)*(u.y+p.y);return s}function Gn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function At(l){const s={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,v,E)=>{const I=v||E;return s[p]=!I||I.toLowerCase(),""}),s["max-age"]){const u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s}let Ae=null;function Te(l){if(null==Ae){const s=l.navigator?l.navigator.userAgent:null;Ae=!!l.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ae}function Ee(l){try{const s=fe[l];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}}function lt(l,s){return[l[4*s],l[4*s+1],l[4*s+2],l[4*s+3]]}const Mt="mapbox-tiles";let Bn,yn,ln=500,Fn=50;function Yi(){try{return fe.caches}catch{}}function or(){Yi()&&!Bn&&(Bn=fe.caches.open(Mt))}function ai(l){const s=l.indexOf("?");if(s<0)return l;const p=function(v){const E=v.indexOf("?");return E>0?v.slice(E+1).split("&"):[]}(l).filter(v=>{const E=v.split("=");return"language"===E[0]||"worldview"===E[0]});return p.length?`${l.slice(0,s)}?${p.join("&")}`:l.slice(0,s)}let Ti=1/0;const wr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(wr);class Gi extends Error{constructor(s,u,p){401===u&&en(p)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const gr=Gn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===fe.location.protocol?fe.parent:fe).location.href,Fr=function(l,s){if(!(/^file:/.test(u=l.url)||/^file:/.test(gr())&&!/^\w+:/.test(u))){if(fe.fetch&&fe.Request&&fe.AbortController&&fe.Request.prototype.hasOwnProperty("signal"))return function(p,v){const E=new fe.AbortController,I=new fe.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:gr(),referrerPolicy:p.referrerPolicy,signal:E.signal});let M=!1,R=!1;const L=(z=I.url).indexOf("sku=")>0&&en(z);var z;"json"===p.type&&I.headers.set("Accept","application/json");const V=(X,oe,ve)=>{if(R)return;if(X&&"SecurityError"!==X.message&&cn(X.toString()),oe&&ve)return G(oe);const Ue=Date.now();fe.fetch(I).then(ft=>{if(ft.ok){const Pt=L?ft.clone():null;return G(ft,Pt,Ue)}return v(new Gi(ft.statusText,ft.status,p.url))}).catch(ft=>{"AbortError"!==ft.name&&v(new Error(`${ft.message} ${p.url}`))})},G=(X,oe,ve)=>{("arrayBuffer"===p.type?X.arrayBuffer():"json"===p.type?X.json():X.text()).then(Ue=>{R||(oe&&ve&&function(ft,Pt,ht){if(or(),!Bn)return;const Tt={status:Pt.status,statusText:Pt.statusText,headers:new fe.Headers};Pt.headers.forEach((En,pn)=>Tt.headers.set(pn,En));const Ft=At(Pt.headers.get("Cache-Control")||"");if(Ft["no-store"])return;Ft["max-age"]&&Tt.headers.set("Expires",new Date(ht+1e3*Ft["max-age"]).toUTCString());const zt=Tt.headers.get("Expires");zt&&(new Date(zt).getTime()-ht<42e4||function(En,pn){if(void 0===yn)try{new Response(new ReadableStream),yn=!0}catch{yn=!1}yn?pn(En.body):En.blob().then(pn)}(Pt,En=>{const pn=new fe.Response(En,Tt);or(),Bn&&Bn.then($n=>$n.put(ai(ft.url),pn)).catch($n=>cn($n.message))}))}(I,oe,ve),M=!0,v(null,Ue,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(Ue=>{R||v(new Error(Ue.message))})};return L?function(X,oe){if(or(),!Bn)return oe(null);const ve=ai(X.url);Bn.then(Ue=>{Ue.match(ve).then(ft=>{const Pt=function(ht){if(!ht)return!1;const Tt=new Date(ht.headers.get("Expires")||0),Ft=At(ht.headers.get("Cache-Control")||"");return Tt>Date.now()&&!Ft["no-cache"]}(ft);Ue.delete(ve),Pt&&Ue.put(ve,ft.clone()),oe(null,ft,Pt)}).catch(oe)}).catch(oe)}(I,V):V(null,null),{cancel:()=>{R=!0,M||E.abort()}}}(l,s);if(Gn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,s,void 0,!0)}var u;return function(p,v){const E=new fe.XMLHttpRequest;E.open(p.method||"GET",p.url,!0),"arrayBuffer"===p.type&&(E.responseType="arraybuffer");for(const I in p.headers)E.setRequestHeader(I,p.headers[I]);return"json"===p.type&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials="include"===p.credentials,E.onerror=()=>{v(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||0===E.status)&&null!==E.response){let I=E.response;if("json"===p.type)try{I=JSON.parse(E.response)}catch(M){return v(M)}v(null,I,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else v(new Gi(E.statusText,E.status,p.url))},E.send(p.body),{cancel:()=>E.abort()}}(l,s)},zr=function(l,s){return Fr(ae(l,{type:"arrayBuffer"}),s)};function bo(l){const s=fe.document.createElement("a");return s.href=l,s.protocol===fe.document.location.protocol&&s.host===fe.document.location.host}const mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Me;Ie=[],Me=0;const pt=function(l,s){if(ct.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),Me>=He.MAX_PARALLEL_IMAGE_REQUESTS){const E={requestParameters:l,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(E),E}Me++;let u=!1;const p=()=>{if(!u)for(u=!0,Me--;Ie.length&&Me<He.MAX_PARALLEL_IMAGE_REQUESTS;){const E=Ie.shift(),{requestParameters:I,callback:M,cancelled:R}=E;R||(E.cancel=pt(I,M).cancel)}},v=zr(l,(E,I,M,R)=>{p(),E?s(E):I&&(fe.createImageBitmap?function(L,z){const V=new fe.Blob([new Uint8Array(L)],{type:"image/png"});fe.createImageBitmap(V).then(G=>{z(null,G)}).catch(G=>{z(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(I,(L,z)=>s(L,z,M,R)):function(L,z){const V=new fe.Image,G=fe.URL;V.onload=()=>{z(null,V),G.revokeObjectURL(V.src),V.onload=null,fe.requestAnimationFrame(()=>{V.src=mt})},V.onerror=()=>z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const X=new fe.Blob([new Uint8Array(L)],{type:"image/png"});V.src=L.byteLength?G.createObjectURL(X):mt}(I,(L,z)=>s(L,z,M,R)))});return{cancel:()=>{v.cancel(),p()}}},Ct="NO_ACCESS_TOKEN";function at(l){return 0===l.indexOf("mapbox:")}function en(l){return He.API_URL_REGEX.test(l)}function Zt(l){return He.API_CDN_URL_REGEX.test(l)}function It(l){return He.API_STYLE_REGEX.test(l)&&!un(l)}function un(l){return He.API_SPRITE_REGEX.test(l)}const Xn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ri(l){const s=l.match(Xn);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function Zn(l){const s=l.params.length?`?${l.params.join("&")}`:"";return`${l.protocol}://${l.authority}${l.path}${s}`}const yr="mapbox.eventData";function Cr(l){if(!l)return null;const s=l.split(".");if(!s||3!==s.length)return null;try{return JSON.parse(decodeURIComponent(fe.atob(s[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class sr{constructor(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(s){const u=Cr(He.ACCESS_TOKEN);let p="";return p=u&&u.u?fe.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(v,E)=>String.fromCharCode(+("0x"+E)))):He.ACCESS_TOKEN||"",s?`${yr}.${s}:${p}`:`${yr}:${p}`}fetchEventData(){const s=Ee("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(s)try{const v=fe.localStorage.getItem(u);v&&(this.eventData=JSON.parse(v));const E=fe.localStorage.getItem(p);E&&(this.anonId=E)}catch{cn("Unable to read from LocalStorage")}}saveEventData(){const s=Ee("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(s)try{fe.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&fe.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{cn("Unable to write to LocalStorage")}}processRequests(s){}postEvent(s,u,p,v){if(!He.EVENTS_URL)return;const E=ri(He.EVENTS_URL);E.params.push(`access_token=${v||He.ACCESS_TOKEN||""}`);const I={event:this.type,created:new Date(s).toISOString()},M=u?ae(I,u):I,R={url:Zn(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([M])};var z;this.pendingRequest=(z=L=>{this.pendingRequest=null,p(L),this.saveEventData(),this.processRequests(v)},Fr(ae(R,{method:"POST"}),z))}queueRequest(s,u){this.queue.push(s),this.processRequests(u)}}const Zi=new class extends sr{constructor(l){super("appUserTurnstile"),this._customAccessToken=l}postTurnstileEvent(l,s){He.EVENTS_URL&&He.ACCESS_TOKEN&&Array.isArray(l)&&l.some(u=>at(u)||en(u))&&this.queueRequest(Date.now(),s)}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const s=Cr(He.ACCESS_TOKEN),u=s?s.u:He.ACCESS_TOKEN;let p=u!==this.eventData.tokenU;_n(this.anonId)||(this.anonId=dn(),p=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const E=new Date(this.eventData.lastSuccess),I=new Date(v),M=(v-this.eventData.lastSuccess)/864e5;p=p||M>=1||M<-1||E.getDate()!==I.getDate()}else p=!0;p?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Ne,skuId:le,"enabled.telemetry":!1,userId:this.anonId},E=>{E||(this.eventData.lastSuccess=v,this.eventData.tokenU=u)},l):this.processRequests()}},Sr=Zi.postTurnstileEvent.bind(Zi),Br=new class extends sr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(l,s,u,p){this.skuToken=s,this.errorCb=p,He.EVENTS_URL&&(u||He.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},u):this.errorCb(new Error(Ct)))}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{id:s,timestamp:u}=this.queue.shift();s&&this.success[s]||(this.anonId||this.fetchEventData(),_n(this.anonId)||(this.anonId=dn()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Ne,skuId:le,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):s&&(this.success[s]=!0)},l))}},vt=Br.postMapLoadEvent.bind(Br),wt=new class extends sr{constructor(){super("gljs.performance")}postPerformanceEvent(l,s){He.EVENTS_URL&&(l||He.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:s},l)}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:s,performanceData:u}=this.queue.shift(),p=function(v){const E=fe.performance.getEntriesByType("resource"),I=fe.performance.getEntriesByType("mark"),M=function(G){const X={};if(G)for(const oe in G)if("other"!==oe)for(const ve of G[oe]){const Ue=`${oe}ResolveRangeMin`,ft=`${oe}ResolveRangeMax`,Pt=`${oe}RequestCount`,ht=`${oe}RequestCachedCount`;X[Ue]=Math.min(X[Ue]||1/0,ve.startTime),X[ft]=Math.max(X[ft]||-1/0,ve.responseEnd);const Tt=Ft=>{void 0===X[Ft]&&(X[Ft]=0),++X[Ft]};void 0!==ve.transferSize&&0===ve.transferSize&&Tt(ht),Tt(Pt)}return X}(function(G,X){const oe={};if(G)for(const ve of G){const Ue=X(ve);void 0===oe[Ue]&&(oe[Ue]=[]),oe[Ue].push(ve)}return oe}(E,ki)),R=fe.devicePixelRatio,L=fe.navigator.connection||fe.navigator.mozConnection||fe.navigator.webkitConnection,z={counters:[],metadata:[],attributes:[]},V=(G,X,oe)=>{null!=oe&&G.push({name:X,value:oe.toString()})};for(const G in M)V(z.counters,G,M[G]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(V(z.counters,"interactionRangeMin",v.interactionRange[0]),V(z.counters,"interactionRangeMax",v.interactionRange[1])),I)for(const G of Object.keys(Qn)){const X=Qn[G],oe=I.find(ve=>ve.name===X);oe&&V(z.counters,X,oe.startTime)}return V(z.counters,"visibilityHidden",v.visibilityHidden),V(z.attributes,"style",function(G){if(G)for(const X of G){const oe=X.name.split("?")[0];if(It(oe)){const ve=oe.split("/").slice(-2);if(2===ve.length)return`mapbox://styles/${ve[0]}/${ve[1]}`}}}(E)),V(z.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),V(z.attributes,"fogEnabled",v.fogEnabled?"true":"false"),V(z.attributes,"projection",v.projection),V(z.attributes,"zoom",v.zoom),V(z.metadata,"devicePixelRatio",R),V(z.metadata,"connectionEffectiveType",L?L.effectiveType:void 0),V(z.metadata,"navigatorUserAgent",fe.navigator.userAgent),V(z.metadata,"screenWidth",fe.screen.width),V(z.metadata,"screenHeight",fe.screen.height),V(z.metadata,"windowWidth",fe.innerWidth),V(z.metadata,"windowHeight",fe.innerHeight),V(z.metadata,"mapWidth",v.width/R),V(z.metadata,"mapHeight",v.height/R),V(z.metadata,"webglRenderer",v.renderer),V(z.metadata,"webglVendor",v.vendor),V(z.metadata,"sdkVersion",Ne),V(z.metadata,"sdkIdentifier","mapbox-gl-js"),z}(u);for(const v of p.metadata);for(const v of p.counters);for(const v of p.attributes);this.postEvent(s,p,()=>{},l)}},nn=wt.postPerformanceEvent.bind(wt),an=new class extends sr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(l,s,u,p){if(!He.API_URL||!He.SESSION_PATH)return;const v=ri(He.API_URL+He.SESSION_PATH);v.params.push(`sku=${s||""}`),v.params.push(`access_token=${p||He.ACCESS_TOKEN||""}`);const E={url:Zn(v),headers:{"Content-Type":"text/plain"}};var M;this.pendingRequest=(M=I=>{this.pendingRequest=null,u(I),this.saveEventData(),this.processRequests(p)},Fr(ae(E,{method:"GET"}),M))}getSessionAPI(l,s,u,p){this.skuToken=s,this.errorCb=p,He.SESSION_PATH&&He.API_URL&&(u||He.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},u):this.errorCb(new Error(Ct)))}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{id:s,timestamp:u}=this.queue.shift();s&&this.success[s]||this.getSession(u,this.skuToken,p=>{p?this.errorCb(p):s&&(this.success[s]=!0)},l)}},Sn=an.getSessionAPI.bind(an),Vn=new Set,Qn={create:"create",load:"load",fullLoad:"fullLoad"},oi={mark(l){fe.performance.mark(l)},measure(l,s,u){fe.performance.measure(l,s,u)}};function ki(l){const s=l.name.split("?")[0];return Zt(s)&&s.includes("mapbox-gl.js")?"javascript":Zt(s)&&s.includes("mapbox-gl.css")?"css":He.API_FONTS_REGEX.test(s)?"fontRange":un(s)?"sprite":It(s)?"style":He.API_TILEJSON_REGEX.test(s)?"tilejson":"other"}const zn=fe.performance;function _r(l){const s=l?l.url.toString():void 0;return zn.getEntriesByName(s)}let Ri,rr,to,Vr;const To={now:()=>void 0!==to?to:fe.performance.now(),setNow(l){to=l},restoreNow(){to=void 0},frame(l){const s=fe.requestAnimationFrame(l);return{cancel:()=>fe.cancelAnimationFrame(s)}},getImageData(l,s=0){const{width:u,height:p}=l;Vr||(Vr=fe.document.createElement("canvas"));const v=Vr.getContext("2d",{willReadFrequently:!0});if(!v)throw new Error("failed to create canvas 2d context");return(u>Vr.width||p>Vr.height)&&(Vr.width=u,Vr.height=p),v.clearRect(-s,-s,u+2*s,p+2*s),v.drawImage(l,0,0,u,p),v.getImageData(-s,-s,u+2*s,p+2*s)},resolveURL:l=>(Ri||(Ri=fe.document.createElement("a")),Ri.href=l,Ri.href),get devicePixelRatio(){return fe.devicePixelRatio},get prefersReducedMotion(){return!!fe.matchMedia&&(null==rr&&(rr=fe.matchMedia("(prefers-reduced-motion: reduce)")),rr.matches)}};function so(l,s,u){u[l]&&-1!==u[l].indexOf(s)||(u[l]=u[l]||[],u[l].push(s))}function Ns(l,s,u){if(u&&u[l]){const p=u[l].indexOf(s);-1!==p&&u[l].splice(p,1)}}class No{constructor(s,u={}){ae(this,u),this.type=s}}class no extends No{constructor(s,u={}){super("error",ae({error:s},u))}}class ar{on(s,u){return this._listeners=this._listeners||{},so(s,u,this._listeners),this}off(s,u){return Ns(s,u,this._listeners),Ns(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},so(s,u,this._oneTimeListeners),this):new Promise(p=>this.once(s,p))}fire(s,u){"string"==typeof s&&(s=new No(s,u||{}));const p=s.type;if(this.listens(p)){s.target=this;const v=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const M of v)M.call(this,s);const E=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const M of E)Ns(p,M,this._oneTimeListeners),M.call(this,s);const I=this._eventedParent;I&&(ae(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),I.fire(s))}else s instanceof no&&console.error(s.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}var Mn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function yl(l,...s){for(const u of s)for(const p in u)l[p]=u[p];return l}function xs(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function ws(l){if(Array.isArray(l))return l.map(ws);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const s={};for(const u in l)s[u]=ws(l[u]);return s}return xs(l)}class ko extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}var Tl=ko;class We{constructor(s,u=[]){this.parent=s,this.bindings={};for(const[p,v]of u)this.bindings[p]=v}concat(s){return new We(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}var Bt=We;const gt={kind:"null"},tt={kind:"number"},St={kind:"string"},Ot={kind:"boolean"},ce={kind:"color"},ge={kind:"object"},nt={kind:"value"},yt={kind:"collator"},Re={kind:"formatted"},ut={kind:"resolvedImage"};function kt(l,s){return{kind:"array",itemType:l,N:s}}function rn(l){if("array"===l.kind){const s=rn(l.itemType);return"number"==typeof l.N?`array<${s}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${s}>`}return l.kind}const vn=[gt,tt,St,Ot,ce,Re,ge,kt(nt),ut];function xt(l,s){if("error"===s.kind)return null;if("array"===l.kind){if("array"===s.kind&&(0===s.N&&"value"===s.itemType.kind||!xt(l.itemType,s.itemType))&&("number"!=typeof l.N||l.N===s.N))return null}else{if(l.kind===s.kind)return null;if("value"===l.kind)for(const u of vn)if(!xt(u,s))return null}return`Expected ${rn(l)} but found ${rn(s)} instead.`}function Pn(l,s){return s.some(u=>u.kind===l.kind)}function $i(l,s){return s.some(u=>"null"===u?null===l:"array"===u?Array.isArray(l):"object"===u?l&&!Array.isArray(l)&&"object"==typeof l:u===typeof l)}var ur,ao={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function yo(l){return(l=Math.round(l))<0?0:l>255?255:l}function Jt(l){return yo("%"===l[l.length-1]?parseFloat(l)/100*255:parseInt(l))}function $r(l){return(s="%"===l[l.length-1]?parseFloat(l)/100:parseFloat(l))<0?0:s>1?1:s;var s}function ji(l,s,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?l+(s-l)*u*6:2*u<1?s:3*u<2?l+(s-l)*(2/3-u)*6:l}try{ur={}.parseCSSColor=function(l){var s,u=l.replace(/ /g,"").toLowerCase();if(u in ao)return ao[u].slice();if("#"===u[0])return 4===u.length?(s=parseInt(u.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:7===u.length&&(s=parseInt(u.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var p=u.indexOf("("),v=u.indexOf(")");if(-1!==p&&v+1===u.length){var E=u.substr(0,p),I=u.substr(p+1,v-(p+1)).split(","),M=1;switch(E){case"rgba":if(4!==I.length)return null;M=$r(I.pop());case"rgb":return 3!==I.length?null:[Jt(I[0]),Jt(I[1]),Jt(I[2]),M];case"hsla":if(4!==I.length)return null;M=$r(I.pop());case"hsl":if(3!==I.length)return null;var R=(parseFloat(I[0])%360+360)%360/360,L=$r(I[1]),z=$r(I[2]),V=z<=.5?z*(L+1):z+L-z*L,G=2*z-V;return[yo(255*ji(G,V,R+1/3)),yo(255*ji(G,V,R)),yo(255*ji(G,V,R-1/3)),M];default:return null}}return null}}catch{}class Mr{constructor(s,u,p,v=1){this.r=s,this.g=u,this.b=p,this.a=v}static parse(s){if(!s)return;if(s instanceof Mr)return s;if("string"!=typeof s)return;const u=ur(s);return u?new Mr(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[s,u,p,v]=this.toArray();return`rgba(${Math.round(s)},${Math.round(u)},${Math.round(p)},${v})`}toArray(){const{r:s,g:u,b:p,a:v}=this;return 0===v?[0,0,0,0]:[255*s/v,255*u/v,255*p/v,v]}toArray01(){const{r:s,g:u,b:p,a:v}=this;return 0===v?[0,0,0,0]:[s/v,u/v,p/v,v]}toArray01PremultipliedAlpha(){const{r:s,g:u,b:p,a:v}=this;return[s,u,p,v]}}Mr.black=new Mr(0,0,0,1),Mr.white=new Mr(1,1,1,1),Mr.transparent=new Mr(0,0,0,0),Mr.red=new Mr(1,0,0,1),Mr.blue=new Mr(0,0,1,1);var As=Mr;class Dl{constructor(s,u,p){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Au{constructor(s,u,p,v,E){this.text=s.normalize?s.normalize():s,this.image=u,this.scale=p,this.fontStack=v,this.textColor=E}}class Qs{constructor(s){this.sections=s}static fromString(s){return new Qs([new Au(s,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(s=>0!==s.text.length||s.image&&0!==s.image.name.length)}static factory(s){return s instanceof Qs?s:Qs.fromString(s)}toString(){return 0===this.sections.length?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const u of this.sections){if(u.image){s.push(["image",u.image.name]);continue}s.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),s.push(p)}return s}}class kr{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new kr({name:s,available:!1}):null}serialize(){return["image",this.name]}}function Df(l,s,u,p){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof s&&s>=0&&s<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[l,s,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[l,s,u,p]:[l,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Oa(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof As||l instanceof Dl||l instanceof Qs||l instanceof kr)return!0;if(Array.isArray(l)){for(const s of l)if(!Oa(s))return!1;return!0}if("object"==typeof l){for(const s in l)if(!Oa(l[s]))return!1;return!0}return!1}function Ta(l){if(null===l)return gt;if("string"==typeof l)return St;if("boolean"==typeof l)return Ot;if("number"==typeof l)return tt;if(l instanceof As)return ce;if(l instanceof Dl)return yt;if(l instanceof Qs)return Re;if(l instanceof kr)return ut;if(Array.isArray(l)){const s=l.length;let u;for(const p of l){const v=Ta(p);if(u){if(u===v)continue;u=nt;break}u=v}return kt(u||nt,s)}return ge}function Yl(l){const s=typeof l;return null===l?"":"string"===s||"number"===s||"boolean"===s?String(l):l instanceof As||l instanceof Qs||l instanceof kr?l.toString():JSON.stringify(l)}class qs{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(2!==s.length)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Oa(s[1]))return u.error("invalid value");const p=s[1];let v=Ta(p);const E=u.expectedType;return"array"!==v.kind||0!==v.N||!E||"array"!==E.kind||"number"==typeof E.N&&0!==E.N||(v=E),new qs(v,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof As?["rgba"].concat(this.value.toArray()):this.value instanceof Qs?this.value.serialize():this.value}}var Ka=qs,Qa=class{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}};const Sc={string:St,number:tt,boolean:Ot,object:ge};class cu{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let p,v=1;const E=s[0];if("array"===E){let M,R;if(s.length>2){const L=s[1];if("string"!=typeof L||!(L in Sc)||"object"===L)return u.error('The item type argument of "array" must be one of string, number, boolean',1);M=Sc[L],v++}else M=nt;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);R=s[2],v++}p=kt(M,R)}else p=Sc[E];const I=[];for(;v<s.length;v++){const M=u.parse(s[v],v,nt);if(!M)return null;I.push(M)}return new cu(p,I)}evaluate(s){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(s);if(!xt(this.type,Ta(p)))return p;if(u===this.args.length-1)throw new Qa(`Expected value to be of type ${rn(this.type)}, but found ${rn(Ta(p))} instead.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,u=[s.kind];if("array"===s.kind){const p=s.itemType;if("string"===p.kind||"number"===p.kind||"boolean"===p.kind){u.push(p.kind);const v=s.N;("number"==typeof v||this.args.length>1)&&u.push(v)}}return u.concat(this.args.map(p=>p.serialize()))}}var Zl=cu;class Ic{constructor(s){this.type=Re,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const p=s[1];if(!Array.isArray(p)&&"object"==typeof p)return u.error("First argument must be an image or text section.");const v=[];let E=!1;for(let I=1;I<=s.length-1;++I){const M=s[I];if(E&&"object"==typeof M&&!Array.isArray(M)){E=!1;let R=null;if(M["font-scale"]&&(R=u.parse(M["font-scale"],1,tt),!R))return null;let L=null;if(M["text-font"]&&(L=u.parse(M["text-font"],1,kt(St)),!L))return null;let z=null;if(M["text-color"]&&(z=u.parse(M["text-color"],1,ce),!z))return null;const V=v[v.length-1];V.scale=R,V.font=L,V.textColor=z}else{const R=u.parse(s[I],1,nt);if(!R)return null;const L=R.type.kind;if("string"!==L&&"value"!==L&&"null"!==L&&"resolvedImage"!==L)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,v.push({content:R,scale:null,font:null,textColor:null})}}return new Ic(v)}evaluate(s){return new Qs(this.sections.map(u=>{const p=u.content.evaluate(s);return Ta(p)===ut?new Au("",p,null,null,null):new Au(Yl(p),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)}))}eachChild(s){for(const u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const u of this.sections){s.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),s.push(p)}return s}}class fa{constructor(s){this.type=ut,this.input=s}static parse(s,u){if(2!==s.length)return u.error("Expected two arguments.");const p=u.parse(s[1],1,St);return p?new fa(p):u.error("No image name provided.")}evaluate(s){const u=this.input.evaluate(s),p=kr.fromString(u);return p&&s.availableImages&&(p.available=s.availableImages.indexOf(u)>-1),p}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Uc={"to-boolean":Ot,"to-color":ce,"to-number":tt,"to-string":St};class br{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");const p=s[0];if(("to-boolean"===p||"to-string"===p)&&2!==s.length)return u.error("Expected one argument.");const v=Uc[p],E=[];for(let I=1;I<s.length;I++){const M=u.parse(s[I],I,nt);if(!M)return null;E.push(M)}return new br(v,E)}evaluate(s){if("boolean"===this.type.kind)return!!this.args[0].evaluate(s);if("color"===this.type.kind){let u,p;for(const v of this.args){if(u=v.evaluate(s),p=null,u instanceof As)return u;if("string"==typeof u){const E=s.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Df(u[0],u[1],u[2],u[3]),!p))return new As(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Qa(p||`Could not parse color from value '${"string"==typeof u?u:String(JSON.stringify(u))}'`)}if("number"===this.type.kind){let u=null;for(const p of this.args){if(u=p.evaluate(s),null===u)return 0;const v=Number(u);if(!isNaN(v))return v}throw new Qa(`Could not convert ${JSON.stringify(u)} to number.`)}return"formatted"===this.type.kind?Qs.fromString(Yl(this.args[0].evaluate(s))):"resolvedImage"===this.type.kind?kr.fromString(Yl(this.args[0].evaluate(s))):Yl(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Ic([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new fa(this.args[0]).serialize();const s=[`to-${this.type.kind}`];return this.eachChild(u=>{s.push(u.serialize())}),s}}var Ws=br;const Fs=["Unknown","Point","LineString","Polygon"];var Af=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Fs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const l=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:u,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*s-l[0])+this.featureDistanceData.bearing[1]*(p*s-l[1])}return 0}parseColor(l){let s=this._parseColorCache[l];return s||(s=this._parseColorCache[l]=As.parse(l)),s}};class mi{constructor(s,u,p,v){this.name=s,this.type=u,this._evaluate=p,this.args=v}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,u){const p=s[0],v=mi.definitions[p];if(!v)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(v)?v[0]:v.type,I=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,M=I.filter(([L])=>!Array.isArray(L)||L.length===s.length-1);let R=null;for(const[L,z]of M){R=new Fd(u.registry,u.path,null,u.scope);const V=[];let G=!1;for(let X=1;X<s.length;X++){const oe=s[X],ve=Array.isArray(L)?L[X-1]:L.type,Ue=R.parse(oe,1+V.length,ve);if(!Ue){G=!0;break}V.push(Ue)}if(!G)if(Array.isArray(L)&&L.length!==V.length)R.error(`Expected ${L.length} arguments, but found ${V.length} instead.`);else{for(let X=0;X<V.length;X++){const oe=Array.isArray(L)?L[X]:L.type,ve=V[X];R.concat(X+1).checkSubtype(oe,ve.type)}if(0===R.errors.length)return new mi(p,E,z,V)}}if(1===M.length)u.errors.push(...R.errors);else{const L=(M.length?M:I).map(([V])=>{return G=V,Array.isArray(G)?`(${G.map(rn).join(", ")})`:`(${rn(G.type)}...)`;var G}).join(" | "),z=[];for(let V=1;V<s.length;V++){const G=u.parse(s[V],1+z.length);if(!G)return null;z.push(rn(G.type))}u.error(`Expected arguments of type ${L}, but found (${z.join(", ")}) instead.`)}return null}static register(s,u){mi.definitions=u;for(const p in u)s[p]=mi}}var jc=mi;class po{constructor(s,u,p){this.type=yt,this.locale=p,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(2!==s.length)return u.error("Expected one argument.");const p=s[1];if("object"!=typeof p||Array.isArray(p))return u.error("Collator options argument must be an object.");const v=u.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,Ot);if(!v)return null;const E=u.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,Ot);if(!E)return null;let I=null;return p.locale&&(I=u.parse(p.locale,1,St),!I)?null:new po(v,E,I)}evaluate(s){return new Dl(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}const Gc=8192;function ll(l,s){l[0]=Math.min(l[0],s[0]),l[1]=Math.min(l[1],s[1]),l[2]=Math.max(l[2],s[0]),l[3]=Math.max(l[3],s[1])}function dc(l,s){return!(l[0]<=s[0]||l[2]>=s[2]||l[1]<=s[1]||l[3]>=s[3])}function Xa(l,s){const u=(180+l[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,v=Math.pow(2,s.z);return[Math.round(u*v*Gc),Math.round(p*v*Gc)]}function Mu(l,s,u){const p=l[0]-s[0],v=l[1]-s[1],E=l[0]-u[0],I=l[1]-u[1];return p*I-E*v==0&&p*E<=0&&v*I<=0}function Bl(l,s){let u=!1;for(let I=0,M=s.length;I<M;I++){const R=s[I];for(let L=0,z=R.length;L<z-1;L++){if(Mu(l,R[L],R[L+1]))return!1;(v=R[L])[1]>(p=l)[1]!=(E=R[L+1])[1]>p[1]&&p[0]<(E[0]-v[0])*(p[1]-v[1])/(E[1]-v[1])+v[0]&&(u=!u)}}var p,v,E;return u}function ud(l,s){for(let u=0;u<s.length;u++)if(Bl(l,s[u]))return!0;return!1}function Xs(l,s,u,p){const v=p[0]-u[0],E=p[1]-u[1],I=(l[0]-u[0])*E-v*(l[1]-u[1]),M=(s[0]-u[0])*E-v*(s[1]-u[1]);return I>0&&M<0||I<0&&M>0}function ir(l,s,u){for(const L of u)for(let z=0;z<L.length-1;++z)if((M=[(I=L[z+1])[0]-(E=L[z])[0],I[1]-E[1]])[0]*(R=[(v=s)[0]-(p=l)[0],v[1]-p[1]])[1]-M[1]*R[0]!=0&&Xs(p,v,E,I)&&Xs(E,I,p,v))return!0;var p,v,E,I,M,R;return!1}function er(l,s){for(let u=0;u<l.length;++u)if(!Bl(l[u],s))return!1;for(let u=0;u<l.length-1;++u)if(ir(l[u],l[u+1],s))return!1;return!0}function hh(l,s){for(let u=0;u<s.length;u++)if(er(l,s[u]))return!0;return!1}function bl(l,s,u){const p=[];for(let v=0;v<l.length;v++){const E=[];for(let I=0;I<l[v].length;I++){const M=Xa(l[v][I],u);ll(s,M),E.push(M)}p.push(E)}return p}function ia(l,s,u){const p=[];for(let v=0;v<l.length;v++){const E=bl(l[v],s,u);p.push(E)}return p}function ku(l,s,u,p){if(l[0]<u[0]||l[0]>u[2]){const v=.5*p;let E=l[0]-u[0]>v?-p:u[0]-l[0]>v?p:0;0===E&&(E=l[0]-u[2]>v?-p:u[2]-l[0]>v?p:0),l[0]+=E}ll(s,l)}function Mf(l,s,u,p){const v=Math.pow(2,p.z)*Gc,E=[p.x*Gc,p.y*Gc],I=[];if(!l)return I;for(const M of l)for(const R of M){const L=[R.x+E[0],R.y+E[1]];ku(L,s,u,v),I.push(L)}return I}function Es(l,s,u,p){const v=Math.pow(2,p.z)*Gc,E=[p.x*Gc,p.y*Gc],I=[];if(!l)return I;for(const R of l){const L=[];for(const z of R){const V=[z.x+E[0],z.y+E[1]];ll(s,V),L.push(V)}I.push(L)}if(s[2]-s[0]<=v/2){(M=s)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const R of I)for(const L of R)ku(L,s,u,v)}var M;return I}class Hh{constructor(s,u){this.type=Ot,this.geojson=s,this.geometries=u}static parse(s,u){if(2!==s.length)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Oa(s[1])){const p=s[1];if("FeatureCollection"===p.type)for(let v=0;v<p.features.length;++v){const E=p.features[v].geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new Hh(p,p.features[v].geometry)}else if("Feature"===p.type){const v=p.geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new Hh(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new Hh(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(u,p){const v=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(!I)return!1;if("Polygon"===p.type){const M=bl(p.coordinates,E,I),R=Mf(u.geometry(),v,E,I);if(!dc(v,E))return!1;for(const L of R)if(!Bl(L,M))return!1}if("MultiPolygon"===p.type){const M=ia(p.coordinates,E,I),R=Mf(u.geometry(),v,E,I);if(!dc(v,E))return!1;for(const L of R)if(!ud(L,M))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(u,p){const v=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(!I)return!1;if("Polygon"===p.type){const M=bl(p.coordinates,E,I),R=Es(u.geometry(),v,E,I);if(!dc(v,E))return!1;for(const L of R)if(!er(L,M))return!1}if("MultiPolygon"===p.type){const M=ia(p.coordinates,E,I),R=Es(u.geometry(),v,E,I);if(!dc(v,E))return!1;for(const L of R)if(!hh(L,M))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var xo=Hh;function zl(l){if(l instanceof jc&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof xo)return!1;let s=!0;return l.eachChild(u=>{s&&!zl(u)&&(s=!1)}),s}function Do(l){if(l instanceof jc&&"feature-state"===l.name)return!1;let s=!0;return l.eachChild(u=>{s&&!Do(u)&&(s=!1)}),s}function uu(l,s){if(l instanceof jc&&s.indexOf(l.name)>=0)return!1;let u=!0;return l.eachChild(p=>{u&&!uu(p,s)&&(u=!1)}),u}class cl{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(2!==s.length||"string"!=typeof s[1])return u.error("'var' expression requires exactly one string literal argument.");const p=s[1];return u.scope.has(p)?new cl(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var dm=cl;class qr{constructor(s,u=[],p,v=new Bt,E=[]){this.registry=s,this.path=u,this.key=u.map(I=>`[${I}]`).join(""),this.scope=v,this.errors=E,this.expectedType=p}parse(s,u,p,v,E={}){return u?this.concat(u,p,v)._parse(s,E):this._parse(s,E)}_parse(s,u){function p(v,E,I){return"assert"===I?new Zl(E,[v]):"coerce"===I?new Ws(E,[v]):v}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=s[0];if("string"!=typeof v)return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[v];if(E){let I=E.parse(s,this);if(!I)return null;if(this.expectedType){const M=this.expectedType,R=I.type;if("string"!==M.kind&&"number"!==M.kind&&"boolean"!==M.kind&&"object"!==M.kind&&"array"!==M.kind||"value"!==R.kind)if("color"!==M.kind&&"formatted"!==M.kind&&"resolvedImage"!==M.kind||"value"!==R.kind&&"string"!==R.kind){if(this.checkSubtype(M,R))return null}else I=p(I,M,u.typeAnnotation||"coerce");else I=p(I,M,u.typeAnnotation||"assert")}if(!(I instanceof Ka)&&"resolvedImage"!==I.type.kind&&Ms(I)){const M=new Af;try{I=new Ka(I.type,I.evaluate(M))}catch(R){return this.error(R.message),null}}return I}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,u,p){const v="number"==typeof s?this.path.concat(s):this.path,E=p?this.scope.concat(p):this.scope;return new qr(this.registry,v,u||null,E,this.errors)}error(s,...u){const p=`${this.key}${u.map(v=>`[${v}]`).join("")}`;this.errors.push(new Tl(p,s))}checkSubtype(s,u){const p=xt(s,u);return p&&this.error(p),p}}var Fd=qr;function Ms(l){if(l instanceof dm)return Ms(l.boundExpression);if(l instanceof jc&&"error"===l.name||l instanceof po||l instanceof xo)return!1;const s=l instanceof Ws||l instanceof Zl;let u=!0;return l.eachChild(p=>{u=s?u&&Ms(p):u&&p instanceof Ka}),!!u&&zl(l)&&uu(l,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function fh(l,s){const u=l.length-1;let p,v,E=0,I=u,M=0;for(;E<=I;)if(M=Math.floor((E+I)/2),p=l[M],v=l[M+1],p<=s){if(M===u||s<v)return M;E=M+1}else{if(!(p>s))throw new Qa("Input is not a number.");I=M-1}return 0}class xl{constructor(s,u,p){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(const[v,E]of p)this.labels.push(v),this.outputs.push(E)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(s[1],1,tt);if(!p)return null;const v=[];let E=null;u.expectedType&&"value"!==u.expectedType.kind&&(E=u.expectedType);for(let I=1;I<s.length;I+=2){const M=1===I?-1/0:s[I],R=s[I+1],L=I,z=I+1;if("number"!=typeof M)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(v.length&&v[v.length-1][0]>=M)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const V=u.parse(R,z,E);if(!V)return null;E=E||V.type,v.push([M,V])}return new xl(E,p,v)}evaluate(s){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(s);const v=this.input.evaluate(s);if(v<=u[0])return p[0].evaluate(s);const E=u.length;return v>=u[E-1]?p[E-1].evaluate(s):p[fh(u,v)].evaluate(s)}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s}}var Bd=xl;function lo(l,s,u){return l*(1-u)+s*u}var Tc=Object.freeze({__proto__:null,array:function(l,s,u){return l.map((p,v)=>lo(p,s[v],u))},color:function(l,s,u){return new As(lo(l.r,s.r,u),lo(l.g,s.g,u),lo(l.b,s.b,u),lo(l.a,s.a,u))},number:lo});const ph=4/29,$l=6/29,Al=3*$l*$l,Da=$l*$l*$l,B_=Math.PI/180,dd=180/Math.PI;function Pu(l){return l>Da?Math.pow(l,1/3):l/Al+ph}function fn(l){return l>$l?l*l*l:Al*(l-ph)}function Ru(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function ti(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Ql(l){const s=ti(l.r),u=ti(l.g),p=ti(l.b),v=Pu((.4124564*s+.3575761*u+.1804375*p)/.95047),E=Pu((.2126729*s+.7151522*u+.072175*p)/1);return{l:116*E-16,a:500*(v-E),b:200*(E-Pu((.0193339*s+.119192*u+.9503041*p)/1.08883)),alpha:l.a}}function Dc(l){let s=(l.l+16)/116,u=isNaN(l.a)?s:s+l.a/500,p=isNaN(l.b)?s:s-l.b/200;return s=1*fn(s),u=.95047*fn(u),p=1.08883*fn(p),new As(Ru(3.2404542*u-1.5371385*s-.4985314*p),Ru(-.969266*u+1.8760108*s+.041556*p),Ru(.0556434*u-.2040259*s+1.0572252*p),l.alpha)}function du(l,s,u){const p=s-l;return l+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const Ac={forward:Ql,reverse:Dc,interpolate:function(l,s,u){return{l:lo(l.l,s.l,u),a:lo(l.a,s.a,u),b:lo(l.b,s.b,u),alpha:lo(l.alpha,s.alpha,u)}}},pa={forward:function(l){const{l:s,a:u,b:p}=Ql(l),v=Math.atan2(p,u)*dd;return{h:v<0?v+360:v,c:Math.sqrt(u*u+p*p),l:s,alpha:l.a}},reverse:function(l){const s=l.h*B_,u=l.c;return Dc({l:l.l,a:Math.cos(s)*u,b:Math.sin(s)*u,alpha:l.alpha})},interpolate:function(l,s,u){return{h:du(l.h,s.h,u),c:lo(l.c,s.c,u),l:lo(l.l,s.l,u),alpha:lo(l.alpha,s.alpha,u)}}};var hp=Object.freeze({__proto__:null,hcl:pa,lab:Ac});class Jl{constructor(s,u,p,v,E){this.type=s,this.operator=u,this.interpolation=p,this.input=v,this.labels=[],this.outputs=[];for(const[I,M]of E)this.labels.push(I),this.outputs.push(M)}static interpolationFactor(s,u,p,v){let E=0;if("exponential"===s.name)E=La(u,s.base,p,v);else if("linear"===s.name)E=La(u,1,p,v);else if("cubic-bezier"===s.name){const I=s.controlPoints;E=new ee(I[0],I[1],I[2],I[3]).solve(La(u,1,p,v))}return E}static parse(s,u){let[p,v,E,...I]=s;if(!Array.isArray(v)||0===v.length)return u.error("Expected an interpolation type expression.",1);if("linear"===v[0])v={name:"linear"};else if("exponential"===v[0]){const L=v[1];if("number"!=typeof L)return u.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:L}}else{if("cubic-bezier"!==v[0])return u.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const L=v.slice(1);if(4!==L.length||L.some(z=>"number"!=typeof z||z<0||z>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:L}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,tt),!E)return null;const M=[];let R=null;"interpolate-hcl"===p||"interpolate-lab"===p?R=ce:u.expectedType&&"value"!==u.expectedType.kind&&(R=u.expectedType);for(let L=0;L<I.length;L+=2){const z=I[L],V=I[L+1],G=L+3,X=L+4;if("number"!=typeof z)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(M.length&&M[M.length-1][0]>=z)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const oe=u.parse(V,X,R);if(!oe)return null;R=R||oe.type,M.push([z,oe])}return"number"===R.kind||"color"===R.kind||"array"===R.kind&&"number"===R.itemType.kind&&"number"==typeof R.N?new Jl(R,p,v,E,M):u.error(`Type ${rn(R)} is not interpolatable.`)}evaluate(s){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(s);const v=this.input.evaluate(s);if(v<=u[0])return p[0].evaluate(s);const E=u.length;if(v>=u[E-1])return p[E-1].evaluate(s);const I=fh(u,v),M=Jl.interpolationFactor(this.interpolation,v,u[I],u[I+1]),R=p[I].evaluate(s),L=p[I+1].evaluate(s);return"interpolate"===this.operator?Tc[this.type.kind.toLowerCase()](R,L,M):"interpolate-hcl"===this.operator?pa.reverse(pa.interpolate(pa.forward(R),pa.forward(L),M)):Ac.reverse(Ac.interpolate(Ac.forward(R),Ac.forward(L),M))}eachChild(s){s(this.input);for(const u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,s,this.input.serialize()];for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function La(l,s,u,p){const v=p-u,E=l-u;return 0===v?0:1===s?E/v:(Math.pow(s,E)-1)/(Math.pow(s,v)-1)}var Bs=Jl;class Aa{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expectected at least one argument.");let p=null;const v=u.expectedType;v&&"value"!==v.kind&&(p=v);const E=[];for(const M of s.slice(1)){const R=u.parse(M,1+E.length,p,void 0,{typeAnnotation:"omit"});if(!R)return null;p=p||R.type,E.push(R)}const I=v&&E.some(M=>xt(v,M.type));return new Aa(I?nt:p,E)}evaluate(s){let u,p=null,v=0;for(const E of this.args){if(v++,p=E.evaluate(s),p&&p instanceof kr&&!p.available&&(u||(u=p),p=null,v===this.args.length))return u;if(null!==p)break}return p}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(u=>{s.push(u.serialize())}),s}}var Po=Aa;class Na{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const p=[];for(let E=1;E<s.length-1;E+=2){const I=s[E];if("string"!=typeof I)return u.error(`Expected string, but found ${typeof I} instead.`,E);if(/[^a-zA-Z0-9_]/.test(I))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const M=u.parse(s[E+1],E+1);if(!M)return null;p.push([I,M])}const v=u.parse(s[s.length-1],s.length-1,u.expectedType,p);return v?new Na(p,v):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[u,p]of this.bindings)s.push(u,p.serialize());return s.push(this.result.serialize()),s}}var kf=Na;class Hu{constructor(s,u,p){this.type=s,this.index=u,this.input=p}static parse(s,u){if(3!==s.length)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,tt),v=u.parse(s[2],2,kt(u.expectedType||nt));return p&&v?new Hu(v.type.itemType,p,v):null}evaluate(s){const u=this.index.evaluate(s),p=this.input.evaluate(s);if(u<0)throw new Qa(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new Qa(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new Qa(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var mh=Hu;class hu{constructor(s,u){this.type=Ot,this.needle=s,this.haystack=u}static parse(s,u){if(3!==s.length)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,nt),v=u.parse(s[2],2,nt);return p&&v?Pn(p.type,[Ot,St,tt,gt,nt])?new hu(p,v):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${rn(p.type)} instead`):null}evaluate(s){const u=this.needle.evaluate(s),p=this.haystack.evaluate(s);if(null==p)return!1;if(!$i(u,["boolean","string","number","null"]))throw new Qa(`Expected first argument to be of type boolean, string, number or null, but found ${rn(Ta(u))} instead.`);if(!$i(p,["string","array"]))throw new Qa(`Expected second argument to be of type array or string, but found ${rn(Ta(p))} instead.`);return p.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var hd=hu;class fu{constructor(s,u,p){this.type=tt,this.needle=s,this.haystack=u,this.fromIndex=p}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,nt),v=u.parse(s[2],2,nt);if(!p||!v)return null;if(!Pn(p.type,[Ot,St,tt,gt,nt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${rn(p.type)} instead`);if(4===s.length){const E=u.parse(s[3],3,tt);return E?new fu(p,v,E):null}return new fu(p,v)}evaluate(s){const u=this.needle.evaluate(s),p=this.haystack.evaluate(s);if(!$i(u,["boolean","string","number","null"]))throw new Qa(`Expected first argument to be of type boolean, string, number or null, but found ${rn(Ta(u))} instead.`);if(!$i(p,["string","array"]))throw new Qa(`Expected second argument to be of type array or string, but found ${rn(Ta(p))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(s);return p.indexOf(u,v)}return p.indexOf(u)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Hc=fu;class Ma{constructor(s,u,p,v,E,I){this.inputType=s,this.type=u,this.input=p,this.cases=v,this.outputs=E,this.otherwise=I}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let p,v;u.expectedType&&"value"!==u.expectedType.kind&&(v=u.expectedType);const E={},I=[];for(let L=2;L<s.length-1;L+=2){let z=s[L];const V=s[L+1];Array.isArray(z)||(z=[z]);const G=u.concat(L);if(0===z.length)return G.error("Expected at least one branch label.");for(const oe of z){if("number"!=typeof oe&&"string"!=typeof oe)return G.error("Branch labels must be numbers or strings.");if("number"==typeof oe&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof oe&&Math.floor(oe)!==oe)return G.error("Numeric branch labels must be integer values.");if(p){if(G.checkSubtype(p,Ta(oe)))return null}else p=Ta(oe);if(void 0!==E[String(oe)])return G.error("Branch labels must be unique.");E[String(oe)]=I.length}const X=u.parse(V,L,v);if(!X)return null;v=v||X.type,I.push(X)}const M=u.parse(s[1],1,nt);if(!M)return null;const R=u.parse(s[s.length-1],s.length-1,v);return R?"value"!==M.type.kind&&u.concat(1).checkSubtype(p,M.type)?null:new Ma(p,v,M,E,I,R):null}evaluate(s){const u=this.input.evaluate(s);return(Ta(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],v={};for(const I of u){const M=v[this.cases[I]];void 0===M?(v[this.cases[I]]=p.length,p.push([this.cases[I],[I]])):p[M][1].push(I)}const E=I=>"number"===this.inputType.kind?Number(I):I;for(const[I,M]of p)s.push(1===M.length?E(M[0]):M.map(E)),s.push(this.outputs[I].serialize());return s.push(this.otherwise.serialize()),s}}var gh=Ma;class Ja{constructor(s,u,p){this.type=s,this.branches=u,this.otherwise=p}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&"value"!==u.expectedType.kind&&(p=u.expectedType);const v=[];for(let I=1;I<s.length-1;I+=2){const M=u.parse(s[I],I,Ot);if(!M)return null;const R=u.parse(s[I+1],I+1,p);if(!R)return null;v.push([M,R]),p=p||R.type}const E=u.parse(s[s.length-1],s.length-1,p);return E?new Ja(p,v,E):null}evaluate(s){for(const[u,p]of this.branches)if(u.evaluate(s))return p.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[u,p]of this.branches)s(u),s(p);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(u=>{s.push(u.serialize())}),s}}var ec=Ja;class qc{constructor(s,u,p,v){this.type=s,this.input=u,this.beginIndex=p,this.endIndex=v}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const p=u.parse(s[1],1,nt),v=u.parse(s[2],2,tt);if(!p||!v)return null;if(!Pn(p.type,[kt(nt),St,nt]))return u.error(`Expected first argument to be of type array or string, but found ${rn(p.type)} instead`);if(4===s.length){const E=u.parse(s[3],3,tt);return E?new qc(p.type,p,v,E):null}return new qc(p.type,p,v)}evaluate(s){const u=this.input.evaluate(s),p=this.beginIndex.evaluate(s);if(!$i(u,["string","array"]))throw new Qa(`Expected first argument to be of type array or string, but found ${rn(Ta(u))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(s);return u.slice(p,v)}return u.slice(p)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Pf=qc;function qu(l,s){return"=="===l||"!="===l?"boolean"===s.kind||"string"===s.kind||"number"===s.kind||"null"===s.kind||"value"===s.kind:"string"===s.kind||"number"===s.kind||"value"===s.kind}function Ou(l,s,u,p){return 0===p.compare(s,u)}function hc(l,s,u){const p="=="!==l&&"!="!==l;return class fX{constructor(E,I,M){this.type=Ot,this.lhs=E,this.rhs=I,this.collator=M,this.hasUntypedArgument="value"===E.type.kind||"value"===I.type.kind}static parse(E,I){if(3!==E.length&&4!==E.length)return I.error("Expected two or three arguments.");const M=E[0];let R=I.parse(E[1],1,nt);if(!R)return null;if(!qu(M,R.type))return I.concat(1).error(`"${M}" comparisons are not supported for type '${rn(R.type)}'.`);let L=I.parse(E[2],2,nt);if(!L)return null;if(!qu(M,L.type))return I.concat(2).error(`"${M}" comparisons are not supported for type '${rn(L.type)}'.`);if(R.type.kind!==L.type.kind&&"value"!==R.type.kind&&"value"!==L.type.kind)return I.error(`Cannot compare types '${rn(R.type)}' and '${rn(L.type)}'.`);p&&("value"===R.type.kind&&"value"!==L.type.kind?R=new Zl(L.type,[R]):"value"!==R.type.kind&&"value"===L.type.kind&&(L=new Zl(R.type,[L])));let z=null;if(4===E.length){if("string"!==R.type.kind&&"string"!==L.type.kind&&"value"!==R.type.kind&&"value"!==L.type.kind)return I.error("Cannot use collator to compare non-string types.");if(z=I.parse(E[3],3,yt),!z)return null}return new fX(R,L,z)}evaluate(E){const I=this.lhs.evaluate(E),M=this.rhs.evaluate(E);if(p&&this.hasUntypedArgument){const R=Ta(I),L=Ta(M);if(R.kind!==L.kind||"string"!==R.kind&&"number"!==R.kind)throw new Qa(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${R.kind}, ${L.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const R=Ta(I),L=Ta(M);if("string"!==R.kind||"string"!==L.kind)return s(E,I,M)}return this.collator?u(E,I,M,this.collator.evaluate(E)):s(E,I,M)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}serialize(){const E=[l];return this.eachChild(I=>{E.push(I.serialize())}),E}}}const ul=hc("==",function(l,s,u){return s===u},Ou),Fa=hc("!=",function(l,s,u){return s!==u},function(l,s,u,p){return!Ou(0,s,u,p)}),Ml=hc("<",function(l,s,u){return s<u},function(l,s,u,p){return p.compare(s,u)<0}),hm=hc(">",function(l,s,u){return s>u},function(l,s,u,p){return p.compare(s,u)>0}),fd=hc("<=",function(l,s,u){return s<=u},function(l,s,u,p){return p.compare(s,u)<=0}),zd=hc(">=",function(l,s,u){return s>=u},function(l,s,u,p){return p.compare(s,u)>=0});class Ba{constructor(s,u,p,v,E,I){this.type=St,this.number=s,this.locale=u,this.currency=p,this.unit=v,this.minFractionDigits=E,this.maxFractionDigits=I}static parse(s,u){if(3!==s.length)return u.error("Expected two arguments.");const p=u.parse(s[1],1,tt);if(!p)return null;const v=s[2];if("object"!=typeof v||Array.isArray(v))return u.error("NumberFormat options argument must be an object.");let E=null;if(v.locale&&(E=u.parse(v.locale,1,St),!E))return null;let I=null;if(v.currency&&(I=u.parse(v.currency,1,St),!I))return null;let M=null;if(v.unit&&(M=u.parse(v.unit,1,St),!M))return null;let R=null;if(v["min-fraction-digits"]&&(R=u.parse(v["min-fraction-digits"],1,tt),!R))return null;let L=null;return v["max-fraction-digits"]&&(L=u.parse(v["max-fraction-digits"],1,tt),!L)?null:new Ba(p,E,I,M,R,L)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class ka{constructor(s){this.type=tt,this.input=s}static parse(s,u){if(2!==s.length)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);const p=u.parse(s[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?u.error(`Expected argument of type string or array, but found ${rn(p.type)} instead.`):new ka(p):null}evaluate(s){const u=this.input.evaluate(s);if("string"==typeof u||Array.isArray(u))return u.length;throw new Qa(`Expected value to be of type string or array, but found ${rn(Ta(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(u=>{s.push(u.serialize())}),s}}const Mc={"==":ul,"!=":Fa,">":hm,"<":Ml,">=":zd,"<=":fd,array:Zl,at:mh,boolean:Zl,case:ec,coalesce:Po,collator:po,format:Ic,image:fa,in:hd,"index-of":Hc,interpolate:Bs,"interpolate-hcl":Bs,"interpolate-lab":Bs,length:ka,let:kf,literal:Ka,match:gh,number:Zl,"number-format":Ba,object:Zl,slice:Pf,step:Bd,string:Zl,"to-boolean":Ws,"to-color":Ws,"to-number":Ws,"to-string":Ws,var:dm,within:xo};function fc(l,[s,u,p,v]){s=s.evaluate(l),u=u.evaluate(l),p=p.evaluate(l);const E=v?v.evaluate(l):1,I=Df(s,u,p,E);if(I)throw new Qa(I);return new As(s/255*E,u/255*E,p/255*E,E)}function Lu(l,s){return l in s}function Wu(l,s){const u=s[l];return void 0===u?null:u}function qn(l){return{type:l}}jc.register(Mc,{error:[{kind:"error"},[St],(l,[s])=>{throw new Qa(s.evaluate(l))}],typeof:[St,[nt],(l,[s])=>rn(Ta(s.evaluate(l)))],"to-rgba":[kt(tt,4),[ce],(l,[s])=>s.evaluate(l).toArray()],rgb:[ce,[tt,tt,tt],fc],rgba:[ce,[tt,tt,tt,tt],fc],has:{type:Ot,overloads:[[[St],(l,[s])=>Lu(s.evaluate(l),l.properties())],[[St,ge],(l,[s,u])=>Lu(s.evaluate(l),u.evaluate(l))]]},get:{type:nt,overloads:[[[St],(l,[s])=>Wu(s.evaluate(l),l.properties())],[[St,ge],(l,[s,u])=>Wu(s.evaluate(l),u.evaluate(l))]]},"feature-state":[nt,[St],(l,[s])=>Wu(s.evaluate(l),l.featureState||{})],properties:[ge,[],l=>l.properties()],"geometry-type":[St,[],l=>l.geometryType()],id:[nt,[],l=>l.id()],zoom:[tt,[],l=>l.globals.zoom],pitch:[tt,[],l=>l.globals.pitch||0],"distance-from-center":[tt,[],l=>l.distanceFromCenter()],"heatmap-density":[tt,[],l=>l.globals.heatmapDensity||0],"line-progress":[tt,[],l=>l.globals.lineProgress||0],"sky-radial-progress":[tt,[],l=>l.globals.skyRadialProgress||0],accumulated:[nt,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[tt,qn(tt),(l,s)=>{let u=0;for(const p of s)u+=p.evaluate(l);return u}],"*":[tt,qn(tt),(l,s)=>{let u=1;for(const p of s)u*=p.evaluate(l);return u}],"-":{type:tt,overloads:[[[tt,tt],(l,[s,u])=>s.evaluate(l)-u.evaluate(l)],[[tt],(l,[s])=>-s.evaluate(l)]]},"/":[tt,[tt,tt],(l,[s,u])=>s.evaluate(l)/u.evaluate(l)],"%":[tt,[tt,tt],(l,[s,u])=>s.evaluate(l)%u.evaluate(l)],ln2:[tt,[],()=>Math.LN2],pi:[tt,[],()=>Math.PI],e:[tt,[],()=>Math.E],"^":[tt,[tt,tt],(l,[s,u])=>Math.pow(s.evaluate(l),u.evaluate(l))],sqrt:[tt,[tt],(l,[s])=>Math.sqrt(s.evaluate(l))],log10:[tt,[tt],(l,[s])=>Math.log(s.evaluate(l))/Math.LN10],ln:[tt,[tt],(l,[s])=>Math.log(s.evaluate(l))],log2:[tt,[tt],(l,[s])=>Math.log(s.evaluate(l))/Math.LN2],sin:[tt,[tt],(l,[s])=>Math.sin(s.evaluate(l))],cos:[tt,[tt],(l,[s])=>Math.cos(s.evaluate(l))],tan:[tt,[tt],(l,[s])=>Math.tan(s.evaluate(l))],asin:[tt,[tt],(l,[s])=>Math.asin(s.evaluate(l))],acos:[tt,[tt],(l,[s])=>Math.acos(s.evaluate(l))],atan:[tt,[tt],(l,[s])=>Math.atan(s.evaluate(l))],min:[tt,qn(tt),(l,s)=>Math.min(...s.map(u=>u.evaluate(l)))],max:[tt,qn(tt),(l,s)=>Math.max(...s.map(u=>u.evaluate(l)))],abs:[tt,[tt],(l,[s])=>Math.abs(s.evaluate(l))],round:[tt,[tt],(l,[s])=>{const u=s.evaluate(l);return u<0?-Math.round(-u):Math.round(u)}],floor:[tt,[tt],(l,[s])=>Math.floor(s.evaluate(l))],ceil:[tt,[tt],(l,[s])=>Math.ceil(s.evaluate(l))],"filter-==":[Ot,[St,nt],(l,[s,u])=>l.properties()[s.value]===u.value],"filter-id-==":[Ot,[nt],(l,[s])=>l.id()===s.value],"filter-type-==":[Ot,[St],(l,[s])=>l.geometryType()===s.value],"filter-<":[Ot,[St,nt],(l,[s,u])=>{const p=l.properties()[s.value],v=u.value;return typeof p==typeof v&&p<v}],"filter-id-<":[Ot,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u<p}],"filter->":[Ot,[St,nt],(l,[s,u])=>{const p=l.properties()[s.value],v=u.value;return typeof p==typeof v&&p>v}],"filter-id->":[Ot,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u>p}],"filter-<=":[Ot,[St,nt],(l,[s,u])=>{const p=l.properties()[s.value],v=u.value;return typeof p==typeof v&&p<=v}],"filter-id-<=":[Ot,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u<=p}],"filter->=":[Ot,[St,nt],(l,[s,u])=>{const p=l.properties()[s.value],v=u.value;return typeof p==typeof v&&p>=v}],"filter-id->=":[Ot,[nt],(l,[s])=>{const u=l.id(),p=s.value;return typeof u==typeof p&&u>=p}],"filter-has":[Ot,[nt],(l,[s])=>s.value in l.properties()],"filter-has-id":[Ot,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[Ot,[kt(St)],(l,[s])=>s.value.indexOf(l.geometryType())>=0],"filter-id-in":[Ot,[kt(nt)],(l,[s])=>s.value.indexOf(l.id())>=0],"filter-in-small":[Ot,[St,kt(nt)],(l,[s,u])=>u.value.indexOf(l.properties()[s.value])>=0],"filter-in-large":[Ot,[St,kt(nt)],(l,[s,u])=>function(p,v,E,I){for(;E<=I;){const M=E+I>>1;if(v[M]===p)return!0;v[M]>p?I=M-1:E=M+1}return!1}(l.properties()[s.value],u.value,0,u.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(l,[s,u])=>s.evaluate(l)&&u.evaluate(l)],[qn(Ot),(l,s)=>{for(const u of s)if(!u.evaluate(l))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(l,[s,u])=>s.evaluate(l)||u.evaluate(l)],[qn(Ot),(l,s)=>{for(const u of s)if(u.evaluate(l))return!0;return!1}]]},"!":[Ot,[Ot],(l,[s])=>!s.evaluate(l)],"is-supported-script":[Ot,[St],(l,[s])=>{const u=l.globals&&l.globals.isSupportedScript;return!u||u(s.evaluate(l))}],upcase:[St,[St],(l,[s])=>s.evaluate(l).toUpperCase()],downcase:[St,[St],(l,[s])=>s.evaluate(l).toLowerCase()],concat:[St,qn(nt),(l,s)=>s.map(u=>Yl(u.evaluate(l))).join("")],"resolved-locale":[St,[yt],(l,[s])=>s.evaluate(l).resolvedLocale()]});var dl=Mc;function fp(l){return{result:"success",value:l}}function ra(l){return{result:"error",value:l}}function co(l){return"data-driven"===l["property-type"]}function pc(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function ma(l){return!!l.expression&&l.expression.interpolated}function On(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function ga(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function go(l){return l}function Cs(l,s){const u="color"===s.type,p=l.stops&&"object"==typeof l.stops[0][0],v=p||!(p||void 0!==l.property),E=l.type||(ma(s)?"exponential":"interval");if(u&&((l=yl({},l)).stops&&(l.stops=l.stops.map(L=>[L[0],As.parse(L[1])])),l.default=As.parse(l.default?l.default:s.default)),l.colorSpace&&"rgb"!==l.colorSpace&&!hp[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let I,M,R;if("exponential"===E)I=Fo;else if("interval"===E)I=sa;else if("categorical"===E){I=za,M=Object.create(null);for(const L of l.stops)M[L[0]]=L[1];R=typeof l.stops[0][0]}else{if("identity"!==E)throw new Error(`Unknown function type "${E}"`);I=pp}if(p){const L={},z=[];for(let X=0;X<l.stops.length;X++){const oe=l.stops[X],ve=oe[0].zoom;void 0===L[ve]&&(L[ve]={zoom:ve,type:l.type,property:l.property,default:l.default,stops:[]},z.push(ve)),L[ve].stops.push([oe[0].value,oe[1]])}const V=[];for(const X of z)V.push([L[X].zoom,Cs(L[X],s)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Bs.interpolationFactor.bind(void 0,G),zoomStops:V.map(X=>X[0]),evaluate:({zoom:X},oe)=>Fo({stops:V,base:l.base},s,X).evaluate(X,oe)}}if(v){const L="exponential"===E?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Bs.interpolationFactor.bind(void 0,L),zoomStops:l.stops.map(z=>z[0]),evaluate:({zoom:z})=>I(l,s,z,M,R)}}return{kind:"source",evaluate(L,z){const V=z&&z.properties?z.properties[l.property]:void 0;return void 0===V?oa(l.default,s.default):I(l,s,V,M,R)}}}function oa(l,s,u){return void 0!==l?l:void 0!==s?s:void 0!==u?u:void 0}function za(l,s,u,p,v){return oa(typeof u===v?p[u]:void 0,l.default,s.default)}function sa(l,s,u){if("number"!==On(u))return oa(l.default,s.default);const p=l.stops.length;if(1===p||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[p-1][0])return l.stops[p-1][1];const v=fh(l.stops.map(E=>E[0]),u);return l.stops[v][1]}function Fo(l,s,u){const p=void 0!==l.base?l.base:1;if("number"!==On(u))return oa(l.default,s.default);const v=l.stops.length;if(1===v||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[v-1][0])return l.stops[v-1][1];const E=fh(l.stops.map(z=>z[0]),u),I=function(z,V,G,X){const oe=X-G,ve=z-G;return 0===oe?0:1===V?ve/oe:(Math.pow(V,ve)-1)/(Math.pow(V,oe)-1)}(u,p,l.stops[E][0],l.stops[E+1][0]),M=l.stops[E][1],R=l.stops[E+1][1];let L=Tc[s.type]||go;if(l.colorSpace&&"rgb"!==l.colorSpace){const z=hp[l.colorSpace];L=(V,G)=>z.reverse(z.interpolate(z.forward(V),z.forward(G),I))}return"function"==typeof M.evaluate?{evaluate(...z){const V=M.evaluate.apply(void 0,z),G=R.evaluate.apply(void 0,z);if(void 0!==V&&void 0!==G)return L(V,G,I)}}:L(M,R,I)}function pp(l,s,u){return"color"===s.type?u=As.parse(u):"formatted"===s.type?u=Qs.fromString(u.toString()):"resolvedImage"===s.type?u=kr.fromString(u.toString()):On(u)===s.type||"enum"===s.type&&s.values[u]||(u=void 0),oa(u,l.default,s.default)}class $d{constructor(s,u){var p;this.expression=s,this._warningHistory={},this._evaluator=new Af,this._defaultValue=u?"color"===(p=u).type&&(ga(p.default)||Array.isArray(p.default))?new As(0,0,0,0):"color"===p.type?As.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=u&&"enum"===u.type?u.values:null}evaluateWithoutErrorHandling(s,u,p,v,E,I,M,R){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=v||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=I,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=R||null,this.expression.evaluate(this._evaluator)}evaluate(s,u,p,v,E,I,M,R){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=v||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=I||null,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=R||null;try{const L=this.expression.evaluate(this._evaluator);if(null==L||"number"==typeof L&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Qa(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function $a(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in dl}function kc(l,s){const u=new Fd(dl,[],s?function(v){const E={color:ce,string:St,number:tt,enum:St,boolean:Ot,formatted:Re,resolvedImage:ut};return"array"===v.type?kt(E[v.value]||nt,v.length):E[v.type]}(s):void 0),p=u.parse(l,void 0,void 0,void 0,s&&"string"===s.type?{typeAnnotation:"coerce"}:void 0);return p?fp(new $d(p,s)):ra(u.errors)}class aa{constructor(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent="constant"!==s&&!Do(u.expression)}evaluateWithoutErrorHandling(s,u,p,v,E,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,p,v,E,I)}evaluate(s,u,p,v,E,I){return this._styleExpression.evaluate(s,u,p,v,E,I)}}class Bi{constructor(s,u,p,v){this.kind=s,this.zoomStops=p,this._styleExpression=u,this.isStateDependent="camera"!==s&&!Do(u.expression),this.interpolationType=v}evaluateWithoutErrorHandling(s,u,p,v,E,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,p,v,E,I)}evaluate(s,u,p,v,E,I){return this._styleExpression.evaluate(s,u,p,v,E,I)}interpolationFactor(s,u,p){return this.interpolationType?Bs.interpolationFactor(this.interpolationType,s,u,p):0}}function Or(l,s){if("error"===(l=kc(l,s)).result)return l;const u=l.value.expression,p=zl(u);if(!p&&!co(s))return ra([new Tl("","data expressions not supported")]);const v=uu(u,["zoom","pitch","distance-from-center"]);if(!v&&!pc(s))return ra([new Tl("","zoom expressions not supported")]);const E=Ss(u);return E||v?E instanceof Tl?ra([E]):E instanceof Bs&&!ma(s)?ra([new Tl("",'"interpolate" expressions cannot be used with this property')]):fp(E?new Bi(p?"camera":"composite",l.value,E.labels,E instanceof Bs?E.interpolation:void 0):new aa(p?"constant":"source",l.value)):ra([new Tl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Wr{constructor(s,u){this._parameters=s,this._specification=u,yl(this,Cs(this._parameters,this._specification))}static deserialize(s){return new Wr(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Ss(l){let s=null;if(l instanceof kf)s=Ss(l.result);else if(l instanceof Po){for(const u of l.args)if(s=Ss(u),s)break}else(l instanceof Bd||l instanceof Bs)&&l.input instanceof jc&&"zoom"===l.input.name&&(s=l);return s instanceof Tl||l.eachChild(u=>{const p=Ss(u);p instanceof Tl?s=p:!s&&p?s=new Tl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&p&&s!==p&&(s=new Tl("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}class Di{constructor(s,u,p,v){this.message=(s?`${s}: `:"")+p,v&&(this.identifier=v),null!=u&&u.__line__&&(this.line=u.__line__)}}function _o(l){const s=l.key,u=l.value,p=l.valueSpec||{},v=l.objectElementValidators||{},E=l.style,I=l.styleSpec;let M=[];const R=On(u);if("object"!==R)return[new Di(s,u,`object expected, ${R} found`)];for(const L in u){const z=L.split(".")[0];let V;v[z]?V=v[z]:p[z]?V=B:v["*"]?V=v["*"]:p["*"]&&(V=B),V?M=M.concat(V({key:(s&&`${s}.`)+L,value:u[L],valueSpec:p[z]||p["*"],style:E,styleSpec:I,object:u,objectKey:L},u)):M.push(new Di(s,u[L],`unknown property "${L}"`))}for(const L in p)v[L]||p[L].required&&void 0===p[L].default&&void 0===u[L]&&M.push(new Di(s,u,`missing required property "${L}"`));return M}function pd(l){const s=l.value,u=l.valueSpec,p=l.style,v=l.styleSpec,E=l.key,I=l.arrayElementValidator||B;if("array"!==On(s))return[new Di(E,s,`array expected, ${On(s)} found`)];if(u.length&&s.length!==u.length)return[new Di(E,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new Di(E,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let M={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};v.$version<7&&(M.function=u.function),"object"===On(u.value)&&(M=u.value);let R=[];for(let L=0;L<s.length;L++)R=R.concat(I({array:s,arrayIndex:L,value:s[L],valueSpec:M,style:p,styleSpec:v,key:`${E}[${L}]`}));return R}function Ys(l){const s=l.key,u=l.value,p=l.valueSpec;let v=On(u);if("number"===v&&u!=u&&(v="NaN"),"number"!==v)return[new Di(s,u,`number expected, ${v} found`)];if("minimum"in p){let E=p.minimum;if("array"===On(p.minimum)&&(E=p.minimum[l.arrayIndex]),u<E)return[new Di(s,u,`${u} is less than the minimum value ${E}`)]}if("maximum"in p){let E=p.maximum;if("array"===On(p.maximum)&&(E=p.maximum[l.arrayIndex]),u>E)return[new Di(s,u,`${u} is greater than the maximum value ${E}`)]}return[]}function Is(l){const s=l.valueSpec,u=xs(l.value.type);let p,v,E,I={};const M="categorical"!==u&&void 0===l.value.property,R=!M,L="array"===On(l.value.stops)&&"array"===On(l.value.stops[0])&&"object"===On(l.value.stops[0][0]),z=_o({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(X){if("identity"===u)return[new Di(X.key,X.value,'identity function may not have a "stops" property')];let oe=[];const ve=X.value;return oe=oe.concat(pd({key:X.key,value:ve,valueSpec:X.valueSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:V})),"array"===On(ve)&&0===ve.length&&oe.push(new Di(X.key,ve,"array must have at least one stop")),oe},default:function(X){return B({key:X.key,value:X.value,valueSpec:s,style:X.style,styleSpec:X.styleSpec})}}});return"identity"===u&&M&&z.push(new Di(l.key,l.value,'missing required property "property"')),"identity"===u||l.value.stops||z.push(new Di(l.key,l.value,'missing required property "stops"')),"exponential"===u&&l.valueSpec.expression&&!ma(l.valueSpec)&&z.push(new Di(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(R&&!co(l.valueSpec)?z.push(new Di(l.key,l.value,"property functions not supported")):M&&!pc(l.valueSpec)&&z.push(new Di(l.key,l.value,"zoom functions not supported"))),"categorical"!==u&&!L||void 0!==l.value.property||z.push(new Di(l.key,l.value,'"property" property is required')),z;function V(X){let oe=[];const ve=X.value,Ue=X.key;if("array"!==On(ve))return[new Di(Ue,ve,`array expected, ${On(ve)} found`)];if(2!==ve.length)return[new Di(Ue,ve,`array length 2 expected, length ${ve.length} found`)];if(L){if("object"!==On(ve[0]))return[new Di(Ue,ve,`object expected, ${On(ve[0])} found`)];if(void 0===ve[0].zoom)return[new Di(Ue,ve,"object stop key must have zoom")];if(void 0===ve[0].value)return[new Di(Ue,ve,"object stop key must have value")];const ft=xs(ve[0].zoom);if("number"!=typeof ft)return[new Di(Ue,ve[0].zoom,"stop zoom values must be numbers")];if(E&&E>ft)return[new Di(Ue,ve[0].zoom,"stop zoom values must appear in ascending order")];ft!==E&&(E=ft,v=void 0,I={}),oe=oe.concat(_o({key:`${Ue}[0]`,value:ve[0],valueSpec:{zoom:{}},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:Ys,value:G}}))}else oe=oe.concat(G({key:`${Ue}[0]`,value:ve[0],valueSpec:{},style:X.style,styleSpec:X.styleSpec},ve));return $a(ws(ve[1]))?oe.concat([new Di(`${Ue}[1]`,ve[1],"expressions are not allowed in function stops.")]):oe.concat(B({key:`${Ue}[1]`,value:ve[1],valueSpec:s,style:X.style,styleSpec:X.styleSpec}))}function G(X,oe){const ve=On(X.value),Ue=xs(X.value),ft=null!==X.value?X.value:oe;if(p){if(ve!==p)return[new Di(X.key,ft,`${ve} stop domain type must match previous stop domain type ${p}`)]}else p=ve;if("number"!==ve&&"string"!==ve&&"boolean"!==ve&&"number"!=typeof Ue&&"string"!=typeof Ue&&"boolean"!=typeof Ue)return[new Di(X.key,ft,"stop domain value must be a number, string, or boolean")];if("number"!==ve&&"categorical"!==u){let Pt=`number expected, ${ve} found`;return co(s)&&void 0===u&&(Pt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Di(X.key,ft,Pt)]}return"categorical"!==u||"number"!==ve||"number"==typeof Ue&&isFinite(Ue)&&Math.floor(Ue)===Ue?"categorical"!==u&&"number"===ve&&"number"==typeof Ue&&"number"==typeof v&&void 0!==v&&Ue<v?[new Di(X.key,ft,"stop domain values must appear in ascending order")]:(v=Ue,"categorical"===u&&Ue in I?[new Di(X.key,ft,"stop domain values must be unique")]:(I[Ue]=!0,[])):[new Di(X.key,ft,`integer expected, found ${String(Ue)}`)]}}function Va(l){const s=("property"===l.expressionContext?Or:kc)(ws(l.value),l.valueSpec);if("error"===s.result)return s.value.map(p=>new Di(`${l.key}${p.key}`,l.value,p.message));const u=s.value.expression||s.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!u.outputDefined())return[new Di(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Do(u))return[new Di(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext)return Ir(u,l);if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!uu(u,["zoom","feature-state"]))return[new Di(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!zl(u))return[new Di(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ir(l,s){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(s.valueSpec&&s.valueSpec.expression)for(const v of s.valueSpec.expression.parameters)u.delete(v);if(0===u.size)return[];const p=[];return l instanceof jc&&u.has(l.name)?[new Di(s.key,s.value,`["${l.name}"] expression is not supported in a filter for a ${s.object.type} layer with id: ${s.object.id}`)]:(l.eachChild(v=>{p.push(...Ir(v,s))}),p)}function md(l){const s=l.key,u=l.value,p=l.valueSpec,v=[];return Array.isArray(p.values)?-1===p.values.indexOf(xs(u))&&v.push(new Di(s,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):-1===Object.keys(p.values).indexOf(xs(u))&&v.push(new Di(s,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),v}function Vd(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const s of l.slice(1))if(!Vd(s)&&"boolean"!=typeof s)return!1;return!0;default:return!0}}function gd(l,s="fill"){if(null==l)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Vd(l)||(l=hl(l));const u=l;let p=!0;try{p=function(L){if(!tc(L))return L;let z=ws(L);return kl(z),z=Ya(z),z}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(u,null,2)}\n        `)}const v=Mn[`filter_${s}`],E=kc(p,v);let I=null;if("error"===E.result)throw new Error(E.value.map(L=>`${L.key}: ${L.message}`).join(", "));I=(L,z,V)=>E.value.evaluate(L,z,{},V);let M=null,R=null;if(p!==u){const L=kc(u,v);if("error"===L.result)throw new Error(L.value.map(z=>`${z.key}: ${z.message}`).join(", "));M=(z,V,G,X,oe)=>L.value.evaluate(z,V,{},G,void 0,void 0,X,oe),R=!zl(L.value.expression)}return{filter:I,dynamicFilter:M||void 0,needGeometry:Ud(p),needFeature:!!R}}function Ya(l){if(!Array.isArray(l))return l;const s=function(u){if(Vl.has(u[0]))for(let p=1;p<u.length;p++)if(tc(u[p]))return!0;return u}(l);return!0===s?s:s.map(u=>Ya(u))}function kl(l){let s=!1;const u=[];if("case"===l[0]){for(let p=1;p<l.length-1;p+=2)s=s||tc(l[p]),u.push(l[p+1]);u.push(l[l.length-1])}else if("match"===l[0]){s=s||tc(l[1]);for(let p=2;p<l.length-1;p+=2)u.push(l[p+1]);u.push(l[l.length-1])}else if("step"===l[0]){s=s||tc(l[1]);for(let p=1;p<l.length-1;p+=2)u.push(l[p+1])}s&&(l.length=0,l.push("any",...u));for(let p=1;p<l.length;p++)kl(l[p])}function tc(l){if(!Array.isArray(l))return!1;if("pitch"===(s=l[0])||"distance-from-center"===s)return!0;var s;for(let u=1;u<l.length;u++)if(tc(l[u]))return!0;return!1}const Vl=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function _h(l,s){return l<s?-1:l>s?1:0}function Ud(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let s=1;s<l.length;s++)if(Ud(l[s]))return!0;return!1}function hl(l){if(!l)return!0;const s=l[0];return l.length<=1?"any"!==s:"=="===s?mc(l[1],l[2],"=="):"!="===s?Pi(mc(l[1],l[2],"==")):"<"===s||">"===s||"<="===s||">="===s?mc(l[1],l[2],s):"any"===s?(u=l.slice(1),["any"].concat(u.map(hl))):"all"===s?["all"].concat(l.slice(1).map(hl)):"none"===s?["all"].concat(l.slice(1).map(hl).map(Pi)):"in"===s?pu(l[1],l.slice(2)):"!in"===s?Pi(pu(l[1],l.slice(2))):"has"===s?Pc(l[1]):"!has"===s?Pi(Pc(l[1])):"within"!==s||l;var u}function mc(l,s,u){switch(l){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,l,s]}}function pu(l,s){if(0===s.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",l,["literal",s.sort(_h)]]:["filter-in-small",l,["literal",s]]}}function Pc(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Pi(l){return["!",l]}function mu(l){return Vd(ws(l.value))?Va(yl({},l,{expressionContext:"filter",valueSpec:l.styleSpec[`filter_${l.layerType||"fill"}`]})):gu(l)}function gu(l){const s=l.value,u=l.key;if("array"!==On(s))return[new Di(u,s,`array expected, ${On(s)} found`)];const p=l.styleSpec;let v,E=[];if(s.length<1)return[new Di(u,s,"filter array must have at least 1 element")];switch(E=E.concat(md({key:`${u}[0]`,value:s[0],valueSpec:p.filter_operator,style:l.style,styleSpec:l.styleSpec})),xs(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===xs(s[1])&&E.push(new Di(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":3!==s.length&&E.push(new Di(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(v=On(s[1]),"string"!==v&&E.push(new Di(`${u}[1]`,s[1],`string expected, ${v} found`)));for(let I=2;I<s.length;I++)v=On(s[I]),"$type"===xs(s[1])?E=E.concat(md({key:`${u}[${I}]`,value:s[I],valueSpec:p.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==v&&"number"!==v&&"boolean"!==v&&E.push(new Di(`${u}[${I}]`,s[I],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let I=1;I<s.length;I++)E=E.concat(gu({key:`${u}[${I}]`,value:s[I],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":v=On(s[1]),2!==s.length?E.push(new Di(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):"string"!==v&&E.push(new Di(`${u}[1]`,s[1],`string expected, ${v} found`));break;case"within":v=On(s[1]),2!==s.length?E.push(new Di(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):"object"!==v&&E.push(new Di(`${u}[1]`,s[1],`object expected, ${v} found`))}return E}function Nu(l,s){const u=l.key,p=l.style,v=l.styleSpec,E=l.value,I=l.objectKey,M=v[`${s}_${l.layerType}`];if(!M)return[];const R=I.match(/^(.*)-transition$/);if("paint"===s&&R&&M[R[1]]&&M[R[1]].transition)return B({key:u,value:E,valueSpec:v.transition,style:p,styleSpec:v});const L=l.valueSpec||M[I];if(!L)return[new Di(u,E,`unknown property "${I}"`)];let z;if("string"===On(E)&&co(L)&&!L.tokens&&(z=/^{([^}]+)}$/.exec(E))){const G=`\`{ "type": "identity", "property": ${z?JSON.stringify(z[1]):'"_"'} }\``;return[new Di(u,E,`"${I}" does not support interpolation syntax\nUse an identity property function instead: ${G}.`)]}const V=[];return"symbol"===l.layerType&&("text-field"===I&&p&&!p.glyphs&&V.push(new Di(u,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===I&&ga(ws(E))&&"identity"===xs(E.type)&&V.push(new Di(u,E,'"text-font" does not support identity functions'))),V.concat(B({key:l.key,value:E,valueSpec:L,style:p,styleSpec:v,expressionContext:"property",propertyType:s,propertyKey:I}))}function _a(l){return Nu(l,"paint")}function vh(l){return Nu(l,"layout")}function el(l){let s=[];const u=l.value,p=l.key,v=l.style,E=l.styleSpec;u.type||u.ref||s.push(new Di(p,u,'either "type" or "ref" is required'));let I=xs(u.type);const M=xs(u.ref);if(u.id){const R=xs(u.id);for(let L=0;L<l.arrayIndex;L++){const z=v.layers[L];xs(z.id)===R&&s.push(new Di(p,u.id,`duplicate layer id "${u.id}", previously used at line ${z.id.__line__}`))}}if("ref"in u){let R;["type","source","source-layer","filter","layout"].forEach(L=>{L in u&&s.push(new Di(p,u[L],`"${L}" is prohibited for ref layers`))}),v.layers.forEach(L=>{xs(L.id)===M&&(R=L)}),R?R.ref?s.push(new Di(p,u.ref,"ref cannot reference another ref layer")):I=xs(R.type):"string"==typeof M&&s.push(new Di(p,u.ref,`ref layer "${M}" not found`))}else if("background"!==I&&"sky"!==I)if(u.source){const R=v.sources&&v.sources[u.source],L=R&&xs(R.type);R?"vector"===L&&"raster"===I?s.push(new Di(p,u.source,`layer "${u.id}" requires a raster source`)):"raster"===L&&"raster"!==I?s.push(new Di(p,u.source,`layer "${u.id}" requires a vector source`)):"vector"!==L||u["source-layer"]?"raster-dem"===L&&"hillshade"!==I?s.push(new Di(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==I||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||"geojson"===L&&R.lineMetrics||s.push(new Di(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Di(p,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new Di(p,u.source,`source "${u.source}" not found`))}else s.push(new Di(p,u,'missing required property "source"'));return s=s.concat(_o({key:p,value:u,valueSpec:E.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>B({key:`${p}.type`,value:u.type,valueSpec:E.layer.type,style:l.style,styleSpec:l.styleSpec,object:u,objectKey:"type"}),filter:R=>mu(yl({layerType:I},R)),layout:R=>_o({layer:u,key:R.key,value:R.value,valueSpec:{},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":L=>vh(yl({layerType:I},L))}}),paint:R=>_o({layer:u,key:R.key,value:R.value,valueSpec:{},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":L=>_a(yl({layerType:I},L))}})}})),s}function Ro(l){const s=l.value,u=l.key,p=On(s);return"string"!==p?[new Di(u,s,`string expected, ${p} found`)]:[]}const wl={promoteId:function({key:l,value:s}){if("string"===On(s))return Ro({key:l,value:s});{const u=[];for(const p in s)u.push(...Ro({key:`${l}.${p}`,value:s[p]}));return u}}};function Rf(l){const s=l.value,u=l.key,p=l.styleSpec,v=l.style;if(!s.type)return[new Di(u,s,'"type" is required')];const E=xs(s.type);let I;switch(E){case"vector":case"raster":case"raster-dem":return I=_o({key:u,value:s,valueSpec:p[`source_${E.replace("-","_")}`],style:l.style,styleSpec:p,objectElementValidators:wl}),I;case"geojson":if(I=_o({key:u,value:s,valueSpec:p.source_geojson,style:v,styleSpec:p,objectElementValidators:wl}),s.cluster)for(const M in s.clusterProperties){const[R,L]=s.clusterProperties[M],z="string"==typeof R?[R,["accumulated"],["get",M]]:R;I.push(...Va({key:`${u}.${M}.map`,value:L,expressionContext:"cluster-map"})),I.push(...Va({key:`${u}.${M}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return I;case"video":return _o({key:u,value:s,valueSpec:p.source_video,style:v,styleSpec:p});case"image":return _o({key:u,value:s,valueSpec:p.source_image,style:v,styleSpec:p});case"canvas":return[new Di(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return md({key:`${u}.type`,value:s.type,valueSpec:{values:c(p)},style:v,styleSpec:p})}}function c(l){return l.source.reduce((s,u)=>{const p=l[u];return"enum"===p.type.type&&(s=s.concat(Object.keys(p.type.values))),s},[])}function f(l){const s=l.value,u=l.styleSpec,p=u.light,v=l.style;let E=[];const I=On(s);if(void 0===s)return E;if("object"!==I)return E=E.concat([new Di("light",s,`object expected, ${I} found`)]),E;for(const M in s){const R=M.match(/^(.*)-transition$/);E=E.concat(R&&p[R[1]]&&p[R[1]].transition?B({key:M,value:s[M],valueSpec:u.transition,style:v,styleSpec:u}):p[M]?B({key:M,value:s[M],valueSpec:p[M],style:v,styleSpec:u}):[new Di(M,s[M],`unknown property "${M}"`)])}return E}function b(l){const s=l.value,u=l.key,p=l.style,v=l.styleSpec,E=v.terrain;let I=[];const M=On(s);if(void 0===s)return I;if("object"!==M)return I=I.concat([new Di("terrain",s,`object expected, ${M} found`)]),I;for(const R in s){const L=R.match(/^(.*)-transition$/);I=I.concat(L&&E[L[1]]&&E[L[1]].transition?B({key:R,value:s[R],valueSpec:v.transition,style:p,styleSpec:v}):E[R]?B({key:R,value:s[R],valueSpec:E[R],style:p,styleSpec:v}):[new Di(R,s[R],`unknown property "${R}"`)])}if(s.source){const R=p.sources&&p.sources[s.source],L=R&&xs(R.type);R?"raster-dem"!==L&&I.push(new Di(u,s.source,`terrain cannot be used with a source of type ${String(L)}, it only be used with a "raster-dem" source type`)):I.push(new Di(u,s.source,`source "${s.source}" not found`))}else I.push(new Di(u,s,'terrain is missing required property "source"'));return I}function w(l){const s=l.value,u=l.style,p=l.styleSpec,v=p.fog;let E=[];const I=On(s);if(void 0===s)return E;if("object"!==I)return E=E.concat([new Di("fog",s,`object expected, ${I} found`)]),E;for(const M in s){const R=M.match(/^(.*)-transition$/);E=E.concat(R&&v[R[1]]&&v[R[1]].transition?B({key:M,value:s[M],valueSpec:p.transition,style:u,styleSpec:p}):v[M]?B({key:M,value:s[M],valueSpec:v[M],style:u,styleSpec:p}):[new Di(M,s[M],`unknown property "${M}"`)])}return E}const A={"*":()=>[],array:pd,boolean:function(l){const s=l.value,u=l.key,p=On(s);return"boolean"!==p?[new Di(u,s,`boolean expected, ${p} found`)]:[]},number:Ys,color:function(l){const s=l.key,u=l.value,p=On(u);return"string"!==p?[new Di(s,u,`color expected, ${p} found`)]:null===ur(u)?[new Di(s,u,`color expected, "${u}" found`)]:[]},enum:md,filter:mu,function:Is,layer:el,object:_o,source:Rf,light:f,terrain:b,fog:w,string:Ro,formatted:function(l){return 0===Ro(l).length?[]:Va(l)},resolvedImage:function(l){return 0===Ro(l).length?[]:Va(l)},projection:function(l){const s=l.value,u=l.styleSpec,p=u.projection,v=l.style;let E=[];const I=On(s);if("object"===I)for(const M in s)E=E.concat(B({key:M,value:s[M],valueSpec:p[M],style:v,styleSpec:u}));else"string"!==I&&(E=E.concat([new Di("projection",s,`object or string expected, ${I} found`)]));return E}};function B(l){const s=l.value,u=l.valueSpec,p=l.styleSpec;return u.expression&&ga(xs(s))?Is(l):u.expression&&$a(ws(s))?Va(l):u.type&&A[u.type]?A[u.type](l):_o(yl({},l,{valueSpec:u.type?p[u.type]:u}))}function U(l){const s=l.value,u=l.key,p=Ro(l);return p.length||(-1===s.indexOf("{fontstack}")&&p.push(new Di(u,s,'"glyphs" url must include a "{fontstack}" token')),-1===s.indexOf("{range}")&&p.push(new Di(u,s,'"glyphs" url must include a "{range}" token'))),p}function xe(l,s=Mn){return gn(B({key:"",value:l,valueSpec:s.$root,styleSpec:s,style:l,objectElementValidators:{glyphs:U,"*":()=>[]}}))}const st=l=>gn(_a(l)),$t=l=>gn(vh(l));function gn(l){return l.slice().sort((s,u)=>s.line&&u.line?s.line-u.line:0)}function Rn(l,s){let u=!1;if(s&&s.length)for(const p of s)l.fire(new no(new Error(p.message))),u=!0;return u}var Ai=Vi,Si=3;function Vi(l,s,u){var p=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var v=new Int32Array(this.arrayBuffer);l=v[0],this.d=(s=v[1])+2*(u=v[2]);for(var E=0;E<this.d*this.d;E++){var I=v[Si+E],M=v[Si+E+1];p.push(I===M?null:v.subarray(I,M))}var R=v[Si+p.length+1];this.keys=v.subarray(v[Si+p.length],R),this.bboxes=v.subarray(R),this.insert=this._insertReadonly}else{this.d=s+2*u;for(var L=0;L<this.d*this.d;L++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=l,this.padding=u,this.scale=s/l,this.uid=0;var z=u/s*l;this.min=-z,this.max=l+z}Vi.prototype.insert=function(l,s,u,p,v){this._forEachCell(s,u,p,v,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(v)},Vi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vi.prototype._insertCell=function(l,s,u,p,v,E){this.cells[v].push(E)},Vi.prototype.query=function(l,s,u,p,v){var E=this.min,I=this.max;if(l<=E&&s<=E&&I<=u&&I<=p&&!v)return Array.prototype.slice.call(this.keys);var M=[];return this._forEachCell(l,s,u,p,this._queryCell,M,{},v),M},Vi.prototype._queryCell=function(l,s,u,p,v,E,I,M){var R=this.cells[v];if(null!==R)for(var L=this.keys,z=this.bboxes,V=0;V<R.length;V++){var G=R[V];if(void 0===I[G]){var X=4*G;(M?M(z[X+0],z[X+1],z[X+2],z[X+3]):l<=z[X+2]&&s<=z[X+3]&&u>=z[X+0]&&p>=z[X+1])?(I[G]=!0,E.push(L[G])):I[G]=!1}}},Vi.prototype._forEachCell=function(l,s,u,p,v,E,I,M){for(var R=this._convertToCellCoord(l),L=this._convertToCellCoord(s),z=this._convertToCellCoord(u),V=this._convertToCellCoord(p),G=R;G<=z;G++)for(var X=L;X<=V;X++){var oe=this.d*X+G;if((!M||M(this._convertFromCellCoord(G),this._convertFromCellCoord(X),this._convertFromCellCoord(G+1),this._convertFromCellCoord(X+1)))&&v.call(this,l,s,u,p,oe,E,I,M))return}},Vi.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},Vi.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},Vi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,s=Si+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var v=new Int32Array(s+u+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var E=s,I=0;I<l.length;I++){var M=l[I];v[Si+I]=E,v.set(M,E),E+=M.length}return v[Si+l.length]=E,v.set(this.keys,E),v[Si+l.length+1]=E+=this.keys.length,v.set(this.bboxes,E),E+=this.bboxes.length,v.buffer};var fr=we(Ai);const Co={};function wi(l,s,u={}){Object.defineProperty(l,"_classRegistryKey",{value:s,writeable:!1}),Co[s]={klass:l,omit:u.omit||[]}}wi(Object,"Object"),fr.serialize=function(l,s){const u=l.toArrayBuffer();return s&&s.push(u),{buffer:u}},fr.deserialize=function(l){return new fr(l.buffer)},Object.defineProperty(fr,"name",{value:"Grid"}),wi(fr,"Grid"),wi(As,"Color"),wi(Error,"Error"),wi(Gi,"AJAXError"),wi(kr,"ResolvedImage"),wi(Wr,"StylePropertyFunction"),wi($d,"StyleExpression",{omit:["_evaluator"]}),wi(Bi,"ZoomDependentExpression"),wi(aa,"ZoomConstantExpression"),wi(jc,"CompoundExpression",{omit:["_evaluate"]});for(const l in dl)Co[dl[l]._classRegistryKey]||wi(dl[l],`Expression${l}`);function El(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function _u(l){return fe.ImageBitmap&&l instanceof fe.ImageBitmap}function Wc(l,s){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(El(l)||_u(l))return s&&s.push(l),l;if(ArrayBuffer.isView(l)){const u=l;return s&&s.push(u.buffer),u}if(l instanceof fe.ImageData)return s&&s.push(l.data.buffer),l;if(Array.isArray(l)){const u=[];for(const p of l)u.push(Wc(p,s));return u}if("object"==typeof l){const u=l.constructor,p=u._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const v=u.serialize?u.serialize(l,s):{};if(!u.serialize){for(const E in l)l.hasOwnProperty(E)&&(Co[p].omit.indexOf(E)>=0||(v[E]=Wc(l[E],s)));l instanceof Error&&(v.message=l.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(v.$name=p),v}throw new Error("can't serialize object of type "+typeof l)}function jd(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||El(l)||_u(l)||ArrayBuffer.isView(l)||l instanceof fe.ImageData)return l;if(Array.isArray(l))return l.map(jd);if("object"==typeof l){const s=l.$name||"Object",{klass:u}=Co[s];if(!u)throw new Error(`can't deserialize unregistered class ${s}`);if(u.deserialize)return u.deserialize(l);const p=Object.create(u.prototype);for(const v of Object.keys(l))"$name"!==v&&(p[v]=jd(l[v]));return p}throw new Error("can't deserialize object of type "+typeof l)}const Fi={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Ly(l){for(const s of l)if(Fy(s.charCodeAt(0)))return!0;return!1}function Ny(l){for(const s of l)if(!z_(s.charCodeAt(0)))return!1;return!0}function z_(l){return!(Fi.Arabic(l)||Fi["Arabic Supplement"](l)||Fi["Arabic Extended-A"](l)||Fi["Arabic Presentation Forms-A"](l)||Fi["Arabic Presentation Forms-B"](l))}function Fy(l){return!(746!==l&&747!==l&&(l<4352||!(Fi["Bopomofo Extended"](l)||Fi.Bopomofo(l)||Fi["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Fi["CJK Compatibility Ideographs"](l)||Fi["CJK Compatibility"](l)||Fi["CJK Radicals Supplement"](l)||Fi["CJK Strokes"](l)||!(!Fi["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||Fi["CJK Unified Ideographs Extension A"](l)||Fi["CJK Unified Ideographs"](l)||Fi["Enclosed CJK Letters and Months"](l)||Fi["Hangul Compatibility Jamo"](l)||Fi["Hangul Jamo Extended-A"](l)||Fi["Hangul Jamo Extended-B"](l)||Fi["Hangul Jamo"](l)||Fi["Hangul Syllables"](l)||Fi.Hiragana(l)||Fi["Ideographic Description Characters"](l)||Fi.Kanbun(l)||Fi["Kangxi Radicals"](l)||Fi["Katakana Phonetic Extensions"](l)||Fi.Katakana(l)&&12540!==l||!(!Fi["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!Fi["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Fi["Unified Canadian Aboriginal Syllabics"](l)||Fi["Unified Canadian Aboriginal Syllabics Extended"](l)||Fi["Vertical Forms"](l)||Fi["Yijing Hexagram Symbols"](l)||Fi["Yi Syllables"](l)||Fi["Yi Radicals"](l))))}function Ex(l){return!(Fy(l)||(s=l,Fi["Latin-1 Supplement"](s)&&(167===s||169===s||174===s||177===s||188===s||189===s||190===s||215===s||247===s)||Fi["General Punctuation"](s)&&(8214===s||8224===s||8225===s||8240===s||8241===s||8251===s||8252===s||8258===s||8263===s||8264===s||8265===s||8273===s)||Fi["Letterlike Symbols"](s)||Fi["Number Forms"](s)||Fi["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||9003===s||s>=9085&&s<=9114||s>=9150&&s<=9165||9167===s||s>=9169&&s<=9179||s>=9186&&s<=9215)||Fi["Control Pictures"](s)&&9251!==s||Fi["Optical Character Recognition"](s)||Fi["Enclosed Alphanumerics"](s)||Fi["Geometric Shapes"](s)||Fi["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Fi["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Fi["CJK Symbols and Punctuation"](s)||Fi.Katakana(s)||Fi["Private Use Area"](s)||Fi["CJK Compatibility Forms"](s)||Fi["Small Form Variants"](s)||Fi["Halfwidth and Fullwidth Forms"](s)||8734===s||8756===s||8757===s||s>=9984&&s<=10087||s>=10102&&s<=10131||65532===s||65533===s));var s}function Cx(l){return l>=1424&&l<=2303||Fi["Arabic Presentation Forms-A"](l)||Fi["Arabic Presentation Forms-B"](l)}function Of(l,s){return!(!s&&Cx(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Fi.Khmer(l))}function qh(l){for(const s of l)if(Cx(s.charCodeAt(0)))return!0;return!1}const By="deferred",zy="loading",Ul="loaded";let yh=null,x="unavailable",d=null;const y=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(x="error"),yh&&yh(l)};function S(){D.fire(new No("pluginStateChange",{pluginStatus:x,pluginURL:d}))}const D=new ar,k=function(){return x},N=function(){if(x!==By||!d)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");x=zy,S(),d&&zr({url:d},l=>{l?y(l):(x=Ul,S())})},F={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>x===Ul||null!=F.applyArabicShaping,isLoading:()=>x===zy,setState(l){x=l.pluginStatus,d=l.pluginURL},isParsed:()=>null!=F.applyArabicShaping&&null!=F.processBidirectionalText&&null!=F.processStyledBidirectionalText,getPluginURL:()=>d};class ${constructor(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(s){return function(u,p){for(const v of u)if(!Of(v.charCodeAt(0),p))return!1;return!0}(s,F.isLoaded())}}class W{constructor(s,u){this.property=s,this.value=u,this.expression=function(p,v){if(ga(p))return new Wr(p,v);if($a(p)){const E=Or(p,v);if("error"===E.result)throw new Error(E.value.map(I=>`${I.key}: ${I.message}`).join(", "));return E.value}{let E=p;return"string"==typeof p&&"color"===v.type&&(E=As.parse(p)),{kind:"constant",evaluate:()=>E}}}(void 0===u?s.specification.default:u,s.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(s,u,p){return this.property.possiblyEvaluate(this,s,u,p)}}class H{constructor(s){this.property=s,this.value=new W(s,void 0)}transitioned(s,u){return new ze(this.property,this.value,u,ae({},s.transition,this.transition),s.now)}untransitioned(){return new ze(this.property,this.value,null,{},0)}}class de{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Tn(this._values[s].value.value)}setValue(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new H(this._values[s].property)),this._values[s].value=new W(this._values[s].property,null===u?void 0:Tn(u))}getTransition(s){return Tn(this._values[s].transition)}setTransition(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new H(this._values[s].property)),this._values[s].transition=Tn(u)||void 0}serialize(){const s={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(s[u]=p);const v=this.getTransition(u);void 0!==v&&(s[`${u}-transition`]=v)}return s}transitioned(s,u){const p=new Xe(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].transitioned(s,u._values[v]);return p}untransitioned(){const s=new Xe(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class ze{constructor(s,u,p,v,E){const I=v.delay||0,M=v.duration||0;E=E||0,this.property=s,this.value=u,this.begin=E+I,this.end=this.begin+M,s.specification.transition&&(v.delay||v.duration)&&(this.prior=p)}possiblyEvaluate(s,u,p){const v=s.now||0,E=this.value.possiblyEvaluate(s,u,p),I=this.prior;if(I){if(v>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(v<this.begin)return I.possiblyEvaluate(s,u,p);{const M=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(s,u,p),E,ie(M))}}return E}}class Xe{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,p){const v=new dt(this._properties);for(const E of Object.keys(this._values))v._values[E]=this._values[E].possiblyEvaluate(s,u,p);return v}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class it{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return Tn(this._values[s].value)}setValue(s,u){this._values[s]=new W(this._values[s].property,null===u?void 0:Tn(u))}serialize(){const s={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(s[u]=p)}return s}possiblyEvaluate(s,u,p){const v=new dt(this._properties);for(const E of Object.keys(this._values))v._values[E]=this._values[E].possiblyEvaluate(s,u,p);return v}}class ot{constructor(s,u,p){this.property=s,this.value=u,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(s){return"constant"===this.value.kind?this.value.value:s}evaluate(s,u,p,v){return this.property.evaluate(this.value,this.parameters,s,u,p,v)}}class dt{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class pe{constructor(s){this.specification=s}possiblyEvaluate(s,u){return s.expression.evaluate(u)}interpolate(s,u,p){const v=Tc[this.specification.type];return v?v(s,u,p):s}}class Ye{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,p,v){return new ot(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(u,null,{},p,v)}:s.expression,u)}interpolate(s,u,p){if("constant"!==s.value.kind||"constant"!==u.value.kind)return s;if(void 0===s.value.value||void 0===u.value.value)return new ot(this,{kind:"constant",value:void 0},s.parameters);const v=Tc[this.specification.type];return v?new ot(this,{kind:"constant",value:v(s.value.value,u.value.value,p)},s.parameters):s}evaluate(s,u,p,v,E,I){return"constant"===s.kind?s.value:s.evaluate(u,p,v,E,I)}}class bt{constructor(s){this.specification=s}possiblyEvaluate(s,u,p,v){return!!s.expression.evaluate(u,null,{},p,v)}interpolate(){return!1}}class Et{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new $(0,{});for(const p in s){const v=s[p];v.specification.overridable&&this.overridableProperties.push(p);const E=this.defaultPropertyValues[p]=new W(v,void 0),I=this.defaultTransitionablePropertyValues[p]=new H(v);this.defaultTransitioningPropertyValues[p]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=E.possiblyEvaluate(u)}}}function jt(l,s){return 256*(l=Y(Math.floor(l),0,255))+Y(Math.floor(s),0,255)}wi(Ye,"DataDrivenProperty"),wi(pe,"DataConstantProperty"),wi(bt,"ColorRampProperty");const Gt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ut{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Kt(l,s=1){let u=0,p=0;return{members:l.map(v=>{const E=Gt[v.type].BYTES_PER_ELEMENT,I=u=wn(u,Math.max(s,E)),M=v.components||1;return p=Math.max(p,E),u+=E*M,{name:v.name,type:v.type,components:M,offset:I}}),size:wn(u,Math.max(p,s)),alignment:s}}function wn(l,s){return Math.ceil(l/s)*s}class hi extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){const p=this.length;return this.resize(p+1),this.emplace(p,s,u)}emplace(s,u,p){const v=2*s;return this.int16[v+0]=u,this.int16[v+1]=p,s}}hi.prototype.bytesPerElement=4,wi(hi,"StructArrayLayout2i4");class mn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,s,u,p)}emplace(s,u,p,v){const E=3*s;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=v,s}}mn.prototype.bytesPerElement=6,wi(mn,"StructArrayLayout3i6");class Hn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,v)}emplace(s,u,p,v,E){const I=4*s;return this.int16[I+0]=u,this.int16[I+1]=p,this.int16[I+2]=v,this.int16[I+3]=E,s}}Hn.prototype.bytesPerElement=8,wi(Hn,"StructArrayLayout4i8");class Dn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I,M){const R=this.length;return this.resize(R+1),this.emplace(R,s,u,p,v,E,I,M)}emplace(s,u,p,v,E,I,M,R){const L=6*s,z=12*s,V=3*s;return this.int16[L+0]=u,this.int16[L+1]=p,this.uint8[z+4]=v,this.uint8[z+5]=E,this.uint8[z+6]=I,this.uint8[z+7]=M,this.float32[V+2]=R,s}}Dn.prototype.bytesPerElement=12,wi(Dn,"StructArrayLayout2i4ub1f12");class li extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,v)}emplace(s,u,p,v,E){const I=4*s;return this.float32[I+0]=u,this.float32[I+1]=p,this.float32[I+2]=v,this.float32[I+3]=E,s}}li.prototype.bytesPerElement=16,wi(li,"StructArrayLayout4f16");class bn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,p,v,E)}emplace(s,u,p,v,E,I){const M=6*s,R=3*s;return this.uint16[M+0]=u,this.uint16[M+1]=p,this.uint16[M+2]=v,this.uint16[M+3]=E,this.float32[R+2]=I,s}}bn.prototype.bytesPerElement=12,wi(bn,"StructArrayLayout4ui1f12");class jn extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,v)}emplace(s,u,p,v,E){const I=4*s;return this.uint16[I+0]=u,this.uint16[I+1]=p,this.uint16[I+2]=v,this.uint16[I+3]=E,s}}jn.prototype.bytesPerElement=8,wi(jn,"StructArrayLayout4ui8");class di extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I){const M=this.length;return this.resize(M+1),this.emplace(M,s,u,p,v,E,I)}emplace(s,u,p,v,E,I,M){const R=6*s;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=v,this.int16[R+3]=E,this.int16[R+4]=I,this.int16[R+5]=M,s}}di.prototype.bytesPerElement=12,wi(di,"StructArrayLayout6i12");class ni extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I,M,R,L,z,V,G){const X=this.length;return this.resize(X+1),this.emplace(X,s,u,p,v,E,I,M,R,L,z,V,G)}emplace(s,u,p,v,E,I,M,R,L,z,V,G,X){const oe=12*s;return this.int16[oe+0]=u,this.int16[oe+1]=p,this.int16[oe+2]=v,this.int16[oe+3]=E,this.uint16[oe+4]=I,this.uint16[oe+5]=M,this.uint16[oe+6]=R,this.uint16[oe+7]=L,this.int16[oe+8]=z,this.int16[oe+9]=V,this.int16[oe+10]=G,this.int16[oe+11]=X,s}}ni.prototype.bytesPerElement=24,wi(ni,"StructArrayLayout4i4ui4i24");class fi extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I){const M=this.length;return this.resize(M+1),this.emplace(M,s,u,p,v,E,I)}emplace(s,u,p,v,E,I,M){const R=10*s,L=5*s;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=v,this.float32[L+2]=E,this.float32[L+3]=I,this.float32[L+4]=M,s}}fi.prototype.bytesPerElement=20,wi(fi,"StructArrayLayout3i3f20");class vr extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}vr.prototype.bytesPerElement=4,wi(vr,"StructArrayLayout1ul4");class Ur extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I,M,R,L,z,V,G,X){const oe=this.length;return this.resize(oe+1),this.emplace(oe,s,u,p,v,E,I,M,R,L,z,V,G,X)}emplace(s,u,p,v,E,I,M,R,L,z,V,G,X,oe){const ve=20*s,Ue=10*s;return this.int16[ve+0]=u,this.int16[ve+1]=p,this.int16[ve+2]=v,this.int16[ve+3]=E,this.int16[ve+4]=I,this.float32[Ue+3]=M,this.float32[Ue+4]=R,this.float32[Ue+5]=L,this.float32[Ue+6]=z,this.int16[ve+14]=V,this.uint32[Ue+8]=G,this.uint16[ve+18]=X,this.uint16[ve+19]=oe,s}}Ur.prototype.bytesPerElement=40,wi(Ur,"StructArrayLayout5i4f1i1ul2ui40");class qi extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I,M){const R=this.length;return this.resize(R+1),this.emplace(R,s,u,p,v,E,I,M)}emplace(s,u,p,v,E,I,M,R){const L=8*s;return this.int16[L+0]=u,this.int16[L+1]=p,this.int16[L+2]=v,this.int16[L+4]=E,this.int16[L+5]=I,this.int16[L+6]=M,this.int16[L+7]=R,s}}qi.prototype.bytesPerElement=16,wi(qi,"StructArrayLayout3i2i2i16");class Ki extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,p,v,E)}emplace(s,u,p,v,E,I){const M=4*s,R=8*s;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=v,this.int16[R+6]=E,this.int16[R+7]=I,s}}Ki.prototype.bytesPerElement=16,wi(Ki,"StructArrayLayout2f1f2i16");class uo extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,v)}emplace(s,u,p,v,E){const I=12*s,M=3*s;return this.uint8[I+0]=u,this.uint8[I+1]=p,this.float32[M+1]=v,this.float32[M+2]=E,s}}uo.prototype.bytesPerElement=12,wi(uo,"StructArrayLayout2ub2f12");class ho extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,s,u,p)}emplace(s,u,p,v){const E=3*s;return this.float32[E+0]=u,this.float32[E+1]=p,this.float32[E+2]=v,s}}ho.prototype.bytesPerElement=12,wi(ho,"StructArrayLayout3f12");class dr extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,s,u,p)}emplace(s,u,p,v){const E=3*s;return this.uint16[E+0]=u,this.uint16[E+1]=p,this.uint16[E+2]=v,s}}dr.prototype.bytesPerElement=6,wi(dr,"StructArrayLayout3ui6");class _s extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue,ft,Pt,ht,Tt,Ft){const zt=this.length;return this.resize(zt+1),this.emplace(zt,s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue,ft,Pt,ht,Tt,Ft)}emplace(s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue,ft,Pt,ht,Tt,Ft,zt){const En=30*s,pn=15*s,$n=60*s;return this.int16[En+0]=u,this.int16[En+1]=p,this.int16[En+2]=v,this.float32[pn+2]=E,this.float32[pn+3]=I,this.uint16[En+8]=M,this.uint16[En+9]=R,this.uint32[pn+5]=L,this.uint32[pn+6]=z,this.uint32[pn+7]=V,this.uint16[En+16]=G,this.uint16[En+17]=X,this.uint16[En+18]=oe,this.float32[pn+10]=ve,this.float32[pn+11]=Ue,this.uint8[$n+48]=ft,this.uint8[$n+49]=Pt,this.uint8[$n+50]=ht,this.uint32[pn+13]=Tt,this.int16[En+28]=Ft,this.uint8[$n+58]=zt,s}}_s.prototype.bytesPerElement=60,wi(_s,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class zs extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue,ft,Pt,ht,Tt,Ft,zt,En,pn,$n,ci,In,Wn,Yn,ii){const _i=this.length;return this.resize(_i+1),this.emplace(_i,s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue,ft,Pt,ht,Tt,Ft,zt,En,pn,$n,ci,In,Wn,Yn,ii)}emplace(s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue,ft,Pt,ht,Tt,Ft,zt,En,pn,$n,ci,In,Wn,Yn,ii,_i){const Ln=38*s,Oi=19*s;return this.int16[Ln+0]=u,this.int16[Ln+1]=p,this.int16[Ln+2]=v,this.float32[Oi+2]=E,this.float32[Oi+3]=I,this.int16[Ln+8]=M,this.int16[Ln+9]=R,this.int16[Ln+10]=L,this.int16[Ln+11]=z,this.int16[Ln+12]=V,this.int16[Ln+13]=G,this.uint16[Ln+14]=X,this.uint16[Ln+15]=oe,this.uint16[Ln+16]=ve,this.uint16[Ln+17]=Ue,this.uint16[Ln+18]=ft,this.uint16[Ln+19]=Pt,this.uint16[Ln+20]=ht,this.uint16[Ln+21]=Tt,this.uint16[Ln+22]=Ft,this.uint16[Ln+23]=zt,this.uint16[Ln+24]=En,this.uint16[Ln+25]=pn,this.uint16[Ln+26]=$n,this.uint16[Ln+27]=ci,this.uint16[Ln+28]=In,this.uint32[Oi+15]=Wn,this.float32[Oi+16]=Yn,this.float32[Oi+17]=ii,this.float32[Oi+18]=_i,s}}zs.prototype.bytesPerElement=76,wi(zs,"StructArrayLayout3i2f6i15ui1ul3f76");class Zs extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}Zs.prototype.bytesPerElement=4,wi(Zs,"StructArrayLayout1f4");class ks extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,p,v,E){const I=this.length;return this.resize(I+1),this.emplace(I,s,u,p,v,E)}emplace(s,u,p,v,E,I){const M=5*s;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=v,this.float32[M+3]=E,this.float32[M+4]=I,s}}ks.prototype.bytesPerElement=20,wi(ks,"StructArrayLayout5f20");class Rc extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,s,u,p,v)}emplace(s,u,p,v,E){const I=6*s;return this.uint32[3*s+0]=u,this.uint16[I+2]=p,this.uint16[I+3]=v,this.uint16[I+4]=E,s}}Rc.prototype.bytesPerElement=12,wi(Rc,"StructArrayLayout1ul3ui12");class va extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){const p=this.length;return this.resize(p+1),this.emplace(p,s,u)}emplace(s,u,p){const v=2*s;return this.uint16[v+0]=u,this.uint16[v+1]=p,s}}va.prototype.bytesPerElement=4,wi(va,"StructArrayLayout2ui4");class Fu extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}Fu.prototype.bytesPerElement=2,wi(Fu,"StructArrayLayout1ui2");class _d extends tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){const p=this.length;return this.resize(p+1),this.emplace(p,s,u)}emplace(s,u,p){const v=2*s;return this.float32[v+0]=u,this.float32[v+1]=p,s}}_d.prototype.bytesPerElement=8,wi(_d,"StructArrayLayout2f8");class jr extends Ut{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}jr.prototype.size=40;class Ps extends Ur{get(s){return new jr(this,s)}}wi(Ps,"CollisionBoxArray");class Ao extends Ut{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}Ao.prototype.size=60;class vs extends _s{get(s){return new Ao(this,s)}}wi(vs,"PlacedSymbolArray");class Xc extends Ut{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(s){this._structArray.uint32[this._pos4+15]=s}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xc.prototype.size=76;class la extends zs{get(s){return new Xc(this,s)}}wi(la,"SymbolInstanceArray");class jl extends Zs{getoffsetX(s){return this.float32[1*s+0]}}wi(jl,"GlyphOffsetArray");class Oc extends hi{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}wi(Oc,"SymbolLineVertexArray");class Lf extends Ut{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Lf.prototype.size=12;class fm extends Rc{get(s){return new Lf(this,s)}}wi(fm,"FeatureIndexArray");class bh extends va{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}wi(bh,"FillExtrusionCentroidArray");const Yc=Kt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Wh=Kt([{name:"a_dash",components:4,type:"Uint16"}]);var xg={exports:{}},YC=function(l,s){var u,p,v,E,I,M,R,L;for(p=l.length-(u=3&l.length),v=s,I=3432918353,M=461845907,L=0;L<p;)R=255&l.charCodeAt(L)|(255&l.charCodeAt(++L))<<8|(255&l.charCodeAt(++L))<<16|(255&l.charCodeAt(++L))<<24,++L,v=27492+(65535&(E=5*(65535&(v=(v^=R=(65535&(R=(R=(65535&R)*I+(((R>>>16)*I&65535)<<16)&4294967295)<<15|R>>>17))*M+(((R>>>16)*M&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(R=0,u){case 3:R^=(255&l.charCodeAt(L+2))<<16;case 2:R^=(255&l.charCodeAt(L+1))<<8;case 1:v^=R=(65535&(R=(R=(65535&(R^=255&l.charCodeAt(L)))*I+(((R>>>16)*I&65535)<<16)&4294967295)<<15|R>>>17))*M+(((R>>>16)*M&65535)<<16)&4294967295}return v^=l.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0},io=function(l,s){for(var u,p=l.length,v=s^p,E=0;p>=4;)u=1540483477*(65535&(u=255&l.charCodeAt(E)|(255&l.charCodeAt(++E))<<8|(255&l.charCodeAt(++E))<<16|(255&l.charCodeAt(++E))<<24))+((1540483477*(u>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++E;switch(p){case 3:v^=(255&l.charCodeAt(E+2))<<16;case 2:v^=(255&l.charCodeAt(E+1))<<8;case 1:v=1540483477*(65535&(v^=255&l.charCodeAt(E)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};xg.exports=YC,xg.exports.murmur3=YC,xg.exports.murmur2=io;var $y=we(xg.exports);class Ix{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,u,p,v){this.ids.push(ZC(s)),this.positions.push(u,p,v)}getPositions(s){const u=ZC(s);let p=0,v=this.ids.length-1;for(;p<v;){const I=p+v>>1;this.ids[I]>=u?v=I:p=I+1}const E=[];for(;this.ids[p]===u;)E.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return E}static serialize(s,u){const p=new Float64Array(s.ids),v=new Uint32Array(s.positions);return Tx(p,v,0,p.length-1),u&&u.push(p.buffer,v.buffer),{ids:p,positions:v}}static deserialize(s){const u=new Ix;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u}}function ZC(l){const s=+l;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:$y(String(l))}function Tx(l,s,u,p){for(;u<p;){const v=l[u+p>>1];let E=u-1,I=p+1;for(;;){do{E++}while(l[E]<v);do{I--}while(l[I]>v);if(E>=I)break;Vy(l,E,I),Vy(s,3*E,3*I),Vy(s,3*E+1,3*I+1),Vy(s,3*E+2,3*I+2)}I-u<p-I?(Tx(l,s,u,I),u=I+1):(Tx(l,s,I+1,p),p=I)}}function Vy(l,s,u){const p=l[s];l[s]=l[u],l[u]=p}wi(Ix,"FeaturePositionMap");class Xh{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,u),this.initialized=!0),!!this.location}}class Nf extends Xh{constructor(s){super(s),this.current=0}set(s,u,p){this.fetchUniformLocation(s,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class KC extends Xh{constructor(s){super(s),this.current=[0,0,0,0]}set(s,u,p){this.fetchUniformLocation(s,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class QC extends Xh{constructor(s){super(s),this.current=As.transparent}set(s,u,p){this.fetchUniformLocation(s,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const ZA=new Float32Array(16),KA=new Float32Array(9),QA=new Float32Array(4);function gi(l){return[jt(255*l.r,255*l.g),jt(255*l.b,255*l.a)]}class Bo{constructor(s,u,p){this.value=s,this.uniformNames=u.map(v=>`u_${v}`),this.type=p}setUniform(s,u,p,v,E){u.set(s,E,v.constantOr(this.value))}getBinding(s,u){return"color"===this.type?new QC(s):new Nf(s)}}class Gd{constructor(s,u){this.uniformNames=u.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,u,p,v,E){const I="u_pattern"===E||"u_dash"===E?this.pattern:"u_pixel_ratio"===E?this.pixelRatio:null;I&&u.set(s,E,I)}getBinding(s,u){return"u_pattern"===u||"u_dash"===u?new KC(s):new Nf(s)}}class Bu{constructor(s,u,p,v){this.expression=s,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(s,u,p,v,E,I){const M=this.paintVertexArray.length,R=this.expression.evaluate(new $(0),u,{},E,v,I);this.paintVertexArray.resize(s),this._setPaintValue(M,s,R)}updatePaintArray(s,u,p,v,E){const I=this.expression.evaluate({zoom:0},p,v,void 0,E);this._setPaintValue(s,u,I)}_setPaintValue(s,u,p){if("color"===this.type){const v=gi(p);for(let E=s;E<u;E++)this.paintVertexArray.emplace(E,v[0],v[1])}else{for(let v=s;v<u;v++)this.paintVertexArray.emplace(v,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ua{constructor(s,u,p,v,E,I){this.expression=s,this.uniformNames=u.map(M=>`u_${M}_t`),this.type=p,this.useIntegerZoom=v,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(M=>({name:`a_${M}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(s,u,p,v,E,I){const M=this.expression.evaluate(new $(this.zoom),u,{},E,v,I),R=this.expression.evaluate(new $(this.zoom+1),u,{},E,v,I),L=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(L,s,M,R)}updatePaintArray(s,u,p,v,E){const I=this.expression.evaluate({zoom:this.zoom},p,v,void 0,E),M=this.expression.evaluate({zoom:this.zoom+1},p,v,void 0,E);this._setPaintValue(s,u,I,M)}_setPaintValue(s,u,p,v){if("color"===this.type){const E=gi(p),I=gi(v);for(let M=s;M<u;M++)this.paintVertexArray.emplace(M,E[0],E[1],I[0],I[1])}else{for(let E=s;E<u;E++)this.paintVertexArray.emplace(E,p,v);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(v))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u,p,v,E){const I=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,M=Y(this.expression.interpolationFactor(I,this.zoom,this.zoom+1),0,1);u.set(s,E,M)}getBinding(s,u){return new Nf(s)}}class Ff{constructor(s,u,p,v,E){this.expression=s,this.layerId=E,this.paintVertexAttributes=("array"===p?Wh:Yc).members;for(let I=0;I<u.length;++I);this.paintVertexArray=new v}populatePaintArray(s,u,p){const v=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(v,s,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(s,u,p,v,E,I){this._setPaintValues(s,u,p.patterns&&p.patterns[this.layerId],I)}_setPaintValues(s,u,p,v){if(!v||!p)return;const E=v[p];if(!E)return;const{tl:I,br:M,pixelRatio:R}=E;for(let L=s;L<u;L++)this.paintVertexArray.emplace(L,I[0],I[1],M[0],M[1],R)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hd{constructor(s,u,p=(()=>!0)){this.binders={},this._buffers=[];const v=[];for(const E in s.paint._values){if(!p(E))continue;const I=s.paint.get(E);if(!(I instanceof ot&&co(I.property.specification)))continue;const M=Ax(E,s.type),R=I.value,L=I.property.specification.type,z=!!I.property.useIntegerZoom,V="line-dasharray"===E||E.endsWith("pattern"),G="line-dasharray"===E&&"constant"!==s.layout.get("line-cap").value.kind;if("constant"!==R.kind||G)if("source"===R.kind||G||V){const X=Mx(E,L,"source");this.binders[E]=V?new Ff(R,M,L,X,s.id):new Bu(R,M,L,X),v.push(`/a_${E}`)}else{const X=Mx(E,L,"composite");this.binders[E]=new Ua(R,M,L,z,u,X),v.push(`/z_${E}`)}else this.binders[E]=V?new Gd(R.value,M):new Bo(R.value,M,L),v.push(`/u_${E}`)}this.cacheKey=v.sort().join("")}getMaxValue(s){const u=this.binders[s];return u instanceof Bu||u instanceof Ua?u.maxValue:0}populatePaintArrays(s,u,p,v,E,I){for(const M in this.binders){const R=this.binders[M];(R instanceof Bu||R instanceof Ua||R instanceof Ff)&&R.populatePaintArray(s,u,p,v,E,I)}}setConstantPatternPositions(s){for(const u in this.binders){const p=this.binders[u];p instanceof Gd&&p.setConstantPatternPositions(s)}}updatePaintArrays(s,u,p,v,E,I){let M=!1;for(const R in s){const L=u.getPositions(R);for(const z of L){const V=p.feature(z.index);for(const G in this.binders){const X=this.binders[G];if((X instanceof Bu||X instanceof Ua||X instanceof Ff)&&!0===X.expression.isStateDependent){const oe=v.paint.get(G);X.expression=oe.value,X.updatePaintArray(z.start,z.end,V,s[R],E,I),M=!0}}}}return M}defines(){const s=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Bo||p instanceof Gd)&&s.push(...p.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return s}getBinderAttributes(){const s=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Bu||p instanceof Ua||p instanceof Ff)for(let v=0;v<p.paintVertexAttributes.length;v++)s.push(p.paintVertexAttributes[v].name)}return s}getBinderUniforms(){const s=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Bo||p instanceof Gd||p instanceof Ua)for(const v of p.uniformNames)s.push(v)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const u=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Bo||v instanceof Gd||v instanceof Ua)for(const E of v.uniformNames)u.push({name:E,property:p,binding:v.getBinding(s,E)})}return u}setUniforms(s,u,p,v,E){for(const{name:I,property:M,binding:R}of p)this.binders[M].setUniform(s,R,E,v.get(M),I)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const u=this.binders[s];(u instanceof Bu||u instanceof Ua||u instanceof Ff)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(s){for(const u in this.binders){const p=this.binders[u];(p instanceof Bu||p instanceof Ua||p instanceof Ff)&&p.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const u=this.binders[s];(u instanceof Bu||u instanceof Ua||u instanceof Ff)&&u.destroy()}}}class vu{constructor(s,u,p=(()=>!0)){this.programConfigurations={};for(const v of s)this.programConfigurations[v.id]=new Hd(v,u,p);this.needsUpload=!1,this._featureMap=new Ix,this._bufferOffset=0}populatePaintArrays(s,u,p,v,E,I,M){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(s,u,v,E,I,M);void 0!==u.id&&this._featureMap.add(u.id,p,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,p,v,E){for(const I of p)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(s,this._featureMap,u,I,v,E)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const Dx={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ax(l,s){return Dx[l]||[l.replace(`${s}-`,"").replace(/-/g,"_")]}const JA={"line-pattern":{source:bn,composite:bn},"fill-pattern":{source:bn,composite:bn},"fill-extrusion-pattern":{source:bn,composite:bn},"line-dasharray":{source:jn,composite:jn}},TF={color:{source:_d,composite:li},number:{source:Zs,composite:_d}};function Mx(l,s,u){const p=JA[l];return p&&p[u]||TF[s][u]}wi(Bo,"ConstantBinder"),wi(Gd,"PatternConstantBinder"),wi(Bu,"SourceExpressionBinder"),wi(Ff,"PatternCompositeBinder"),wi(Ua,"CompositeExpressionBinder"),wi(Hd,"ProgramConfiguration",{omit:["_buffers"]}),wi(vu,"ProgramConfigurationSet");const yu="-transition";class gc extends ar{constructor(s,u){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==s.type&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,"background"!==s.type&&"sky"!==s.type&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),u.layout&&(this._unevaluatedLayout=new it(u.layout)),u.paint)){this._transitionablePaint=new de(u.paint);for(const p in s.paint)this.setPaintProperty(p,s.paint[p],{validate:!1});for(const p in s.layout)this.setLayoutProperty(p,s.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dt(u.paint)}}getLayoutProperty(s){return"visibility"===s?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,u,p={}){null!=u&&this._validate($t,`layers.${this.id}.layout.${s}`,s,u,p)||("visibility"!==s?this._unevaluatedLayout.setValue(s,u):this.visibility=u)}getPaintProperty(s){return ei(s,yu)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u,p={}){if(null!=u&&this._validate(st,`layers.${this.id}.paint.${s}`,s,u,p))return!1;if(ei(s,yu))return this._transitionablePaint.setTransition(s.slice(0,-11),u||void 0),!1;{const v=this._transitionablePaint._values[s],E=v.value.isDataDriven(),I=v.value;this._transitionablePaint.setValue(s,u),this._handleSpecialPaintPropertyUpdate(s);const M=this._transitionablePaint._values[s].value,R=M.isDataDriven(),L=ei(s,"pattern")||"line-dasharray"===s;return R||E||L||this._handleOverridablePaintPropertyUpdate(s,I,M)}}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getProgramConfiguration(s){return null}_handleOverridablePaintPropertyUpdate(s,u,p){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||"none"===this.visibility}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),vi(s,(u,p)=>!(void 0===u||"layout"===p&&!Object.keys(u).length||"paint"===p&&!Object.keys(u).length))}_validate(s,u,p,v,E={}){return(!E||!1!==E.validate)&&Rn(this,s.call(xe,{key:u,layerType:this.type,objectKey:p,value:v,styleSpec:Mn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const u=this.paint.get(s);if(u instanceof ot&&co(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=gd(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const JC=Kt([{name:"a_pos",components:2,type:"Int16"}],4),Eg=Kt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Js{constructor(s=[]){this.segments=s}prepareSegment(s,u,p,v){let E=this.segments[this.segments.length-1];return s>Js.MAX_VERTEX_ARRAY_LENGTH&&cn(`Max vertices per segment is ${Js.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!E||E.vertexLength+s>Js.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==v)&&(E={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==v&&(E.sortKey=v),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const s of this.segments)for(const u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,p,v){return new Js([{vertexOffset:s,primitiveOffset:u,vertexLength:p,primitiveLength:v,vaos:{},sortKey:0}])}}Js.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wi(Js,"SegmentVector");var Er=8192;class Bf{constructor(s,u){s&&(u?this.setSouthWest(s).setNorthEast(u):4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof Ho?new Ho(s.lng,s.lat):Ho.convert(s),this}setSouthWest(s){return this._sw=s instanceof Ho?new Ho(s.lng,s.lat):Ho.convert(s),this}extend(s){const u=this._sw,p=this._ne;let v,E;if(s instanceof Ho)v=s,E=s;else{if(!(s instanceof Bf))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(Bf.convert(s)):this.extend(Ho.convert(s)):"object"==typeof s&&null!==s&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(Ho.convert(s)):this;if(v=s._sw,E=s._ne,!v||!E)return this}return u||p?(u.lng=Math.min(v.lng,u.lng),u.lat=Math.min(v.lat,u.lat),p.lng=Math.max(E.lng,p.lng),p.lat=Math.max(E.lat,p.lat)):(this._sw=new Ho(v.lng,v.lat),this._ne=new Ho(E.lng,E.lat)),this}getCenter(){return new Ho((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ho(this.getWest(),this.getNorth())}getSouthEast(){return new Ho(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:u,lat:p}=Ho.convert(s);let v=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&v}static convert(s){return!s||s instanceof Bf?s:new Bf(s)}}var Uy=1e-6,Xu=typeof Float32Array<"u"?Float32Array:Array;function jy(){var l=new Xu(9);return Xu!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Gy(l,s,u){var p=s[0],v=s[1],E=s[2],I=s[3],M=s[4],R=s[5],L=s[6],z=s[7],V=s[8],G=u[0],X=u[1],oe=u[2],ve=u[3],Ue=u[4],ft=u[5],Pt=u[6],ht=u[7],Tt=u[8];return l[0]=G*p+X*I+oe*L,l[1]=G*v+X*M+oe*z,l[2]=G*E+X*R+oe*V,l[3]=ve*p+Ue*I+ft*L,l[4]=ve*v+Ue*M+ft*z,l[5]=ve*E+Ue*R+ft*V,l[6]=Pt*p+ht*I+Tt*L,l[7]=Pt*v+ht*M+Tt*z,l[8]=Pt*E+ht*R+Tt*V,l}function qd(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function $_(l,s){var u=s[0],p=s[1],v=s[2],E=s[3],I=s[4],M=s[5],R=s[6],L=s[7],z=s[8],V=s[9],G=s[10],X=s[11],oe=s[12],ve=s[13],Ue=s[14],ft=s[15],Pt=u*M-p*I,ht=u*R-v*I,Tt=u*L-E*I,Ft=p*R-v*M,zt=p*L-E*M,En=v*L-E*R,pn=z*ve-V*oe,$n=z*Ue-G*oe,ci=z*ft-X*oe,In=V*Ue-G*ve,Wn=V*ft-X*ve,Yn=G*ft-X*Ue,ii=Pt*Yn-ht*Wn+Tt*In+Ft*ci-zt*$n+En*pn;return ii?(l[0]=(M*Yn-R*Wn+L*In)*(ii=1/ii),l[1]=(v*Wn-p*Yn-E*In)*ii,l[2]=(ve*En-Ue*zt+ft*Ft)*ii,l[3]=(G*zt-V*En-X*Ft)*ii,l[4]=(R*ci-I*Yn-L*$n)*ii,l[5]=(u*Yn-v*ci+E*$n)*ii,l[6]=(Ue*Tt-oe*En-ft*ht)*ii,l[7]=(z*En-G*Tt+X*ht)*ii,l[8]=(I*Wn-M*ci+L*pn)*ii,l[9]=(p*ci-u*Wn-E*pn)*ii,l[10]=(oe*zt-ve*Tt+ft*Pt)*ii,l[11]=(V*Tt-z*zt-X*Pt)*ii,l[12]=(M*$n-I*In-R*pn)*ii,l[13]=(u*In-p*$n+v*pn)*ii,l[14]=(ve*ht-oe*Ft-Ue*Pt)*ii,l[15]=(z*Ft-V*ht+G*Pt)*ii,l):null}function pm(l,s,u){var p=s[0],v=s[1],E=s[2],I=s[3],M=s[4],R=s[5],L=s[6],z=s[7],V=s[8],G=s[9],X=s[10],oe=s[11],ve=s[12],Ue=s[13],ft=s[14],Pt=s[15],ht=u[0],Tt=u[1],Ft=u[2],zt=u[3];return l[0]=ht*p+Tt*M+Ft*V+zt*ve,l[1]=ht*v+Tt*R+Ft*G+zt*Ue,l[2]=ht*E+Tt*L+Ft*X+zt*ft,l[3]=ht*I+Tt*z+Ft*oe+zt*Pt,l[4]=(ht=u[4])*p+(Tt=u[5])*M+(Ft=u[6])*V+(zt=u[7])*ve,l[5]=ht*v+Tt*R+Ft*G+zt*Ue,l[6]=ht*E+Tt*L+Ft*X+zt*ft,l[7]=ht*I+Tt*z+Ft*oe+zt*Pt,l[8]=(ht=u[8])*p+(Tt=u[9])*M+(Ft=u[10])*V+(zt=u[11])*ve,l[9]=ht*v+Tt*R+Ft*G+zt*Ue,l[10]=ht*E+Tt*L+Ft*X+zt*ft,l[11]=ht*I+Tt*z+Ft*oe+zt*Pt,l[12]=(ht=u[12])*p+(Tt=u[13])*M+(Ft=u[14])*V+(zt=u[15])*ve,l[13]=ht*v+Tt*R+Ft*G+zt*Ue,l[14]=ht*E+Tt*L+Ft*X+zt*ft,l[15]=ht*I+Tt*z+Ft*oe+zt*Pt,l}function Cg(l,s,u){var p,v,E,I,M,R,L,z,V,G,X,oe,ve=u[0],Ue=u[1],ft=u[2];return s===l?(l[12]=s[0]*ve+s[4]*Ue+s[8]*ft+s[12],l[13]=s[1]*ve+s[5]*Ue+s[9]*ft+s[13],l[14]=s[2]*ve+s[6]*Ue+s[10]*ft+s[14],l[15]=s[3]*ve+s[7]*Ue+s[11]*ft+s[15]):(v=s[1],E=s[2],I=s[3],M=s[4],R=s[5],L=s[6],z=s[7],V=s[8],G=s[9],X=s[10],oe=s[11],l[0]=p=s[0],l[1]=v,l[2]=E,l[3]=I,l[4]=M,l[5]=R,l[6]=L,l[7]=z,l[8]=V,l[9]=G,l[10]=X,l[11]=oe,l[12]=p*ve+M*Ue+V*ft+s[12],l[13]=v*ve+R*Ue+G*ft+s[13],l[14]=E*ve+L*Ue+X*ft+s[14],l[15]=I*ve+z*Ue+oe*ft+s[15]),l}function zf(l,s,u){var p=u[0],v=u[1],E=u[2];return l[0]=s[0]*p,l[1]=s[1]*p,l[2]=s[2]*p,l[3]=s[3]*p,l[4]=s[4]*v,l[5]=s[5]*v,l[6]=s[6]*v,l[7]=s[7]*v,l[8]=s[8]*E,l[9]=s[9]*E,l[10]=s[10]*E,l[11]=s[11]*E,l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l}function Hy(l,s,u){var p=Math.sin(u),v=Math.cos(u),E=s[4],I=s[5],M=s[6],R=s[7],L=s[8],z=s[9],V=s[10],G=s[11];return s!==l&&(l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[4]=E*v+L*p,l[5]=I*v+z*p,l[6]=M*v+V*p,l[7]=R*v+G*p,l[8]=L*v-E*p,l[9]=z*v-I*p,l[10]=V*v-M*p,l[11]=G*v-R*p,l}function V_(l,s,u){var p=Math.sin(u),v=Math.cos(u),E=s[0],I=s[1],M=s[2],R=s[3],L=s[8],z=s[9],V=s[10],G=s[11];return s!==l&&(l[4]=s[4],l[5]=s[5],l[6]=s[6],l[7]=s[7],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=E*v-L*p,l[1]=I*v-z*p,l[2]=M*v-V*p,l[3]=R*v-G*p,l[8]=E*p+L*v,l[9]=I*p+z*v,l[10]=M*p+V*v,l[11]=R*p+G*v,l}function kx(l,s){return l[0]=s[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=s[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Px(l,s,u){var p,v,E,I=u[0],M=u[1],R=u[2],L=Math.hypot(I,M,R);return L<Uy?null:(I*=L=1/L,M*=L,R*=L,p=Math.sin(s),v=Math.cos(s),l[0]=I*I*(E=1-v)+v,l[1]=M*I*E+R*p,l[2]=R*I*E-M*p,l[3]=0,l[4]=I*M*E-R*p,l[5]=M*M*E+v,l[6]=R*M*E+I*p,l[7]=0,l[8]=I*R*E+M*p,l[9]=M*R*E-I*p,l[10]=R*R*E+v,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}Math.hypot||(Math.hypot=function(){for(var l=0,s=arguments.length;s--;)l+=arguments[s]*arguments[s];return Math.sqrt(l)});var Rx=pm;function Ox(){var l=new Xu(3);return Xu!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function eS(l){var s=new Xu(3);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s}function _c(l){return Math.hypot(l[0],l[1],l[2])}function Wd(l,s,u){var p=new Xu(3);return p[0]=l,p[1]=s,p[2]=u,p}function ea(l,s,u){return l[0]=s[0]+u[0],l[1]=s[1]+u[1],l[2]=s[2]+u[2],l}function xh(l,s,u){return l[0]=s[0]-u[0],l[1]=s[1]-u[1],l[2]=s[2]-u[2],l}function tS(l,s,u){return l[0]=s[0]*u[0],l[1]=s[1]*u[1],l[2]=s[2]*u[2],l}function mm(l,s,u){return l[0]=Math.min(s[0],u[0]),l[1]=Math.min(s[1],u[1]),l[2]=Math.min(s[2],u[2]),l}function U_(l,s,u){return l[0]=Math.max(s[0],u[0]),l[1]=Math.max(s[1],u[1]),l[2]=Math.max(s[2],u[2]),l}function Yu(l,s,u){return l[0]=s[0]*u,l[1]=s[1]*u,l[2]=s[2]*u,l}function Sg(l,s,u,p){return l[0]=s[0]+u[0]*p,l[1]=s[1]+u[1]*p,l[2]=s[2]+u[2]*p,l}function vc(l,s){var u=s[0],p=s[1],v=s[2],E=u*u+p*p+v*v;return E>0&&(E=1/Math.sqrt(E)),l[0]=s[0]*E,l[1]=s[1]*E,l[2]=s[2]*E,l}function yc(l,s){return l[0]*s[0]+l[1]*s[1]+l[2]*s[2]}function Lx(l,s,u){var p=s[0],v=s[1],E=s[2],I=u[0],M=u[1],R=u[2];return l[0]=v*R-E*M,l[1]=E*I-p*R,l[2]=p*M-v*I,l}function ja(l,s,u){var p=s[0],v=s[1],E=s[2],I=u[3]*p+u[7]*v+u[11]*E+u[15];return l[0]=(u[0]*p+u[4]*v+u[8]*E+u[12])/(I=I||1),l[1]=(u[1]*p+u[5]*v+u[9]*E+u[13])/I,l[2]=(u[2]*p+u[6]*v+u[10]*E+u[14])/I,l}function j_(l,s,u){var p=u[0],v=u[1],E=u[2],I=s[0],M=s[1],R=s[2],L=v*R-E*M,z=E*I-p*R,V=p*M-v*I,G=v*V-E*z,X=E*L-p*V,oe=p*z-v*L,ve=2*u[3];return z*=ve,V*=ve,X*=2,oe*=2,l[0]=I+(L*=ve)+(G*=2),l[1]=M+z+X,l[2]=R+V+oe,l}var gp,vd=xh,nS=tS,iS=_c;function rS(l,s,u){return l[0]=s[0]*u,l[1]=s[1]*u,l[2]=s[2]*u,l[3]=s[3]*u,l}function gm(l,s){var u=s[0],p=s[1],v=s[2],E=s[3],I=u*u+p*p+v*v+E*E;return I>0&&(I=1/Math.sqrt(I)),l[0]=u*I,l[1]=p*I,l[2]=v*I,l[3]=E*I,l}function wh(l,s,u){var p=s[0],v=s[1],E=s[2],I=s[3];return l[0]=u[0]*p+u[4]*v+u[8]*E+u[12]*I,l[1]=u[1]*p+u[5]*v+u[9]*E+u[13]*I,l[2]=u[2]*p+u[6]*v+u[10]*E+u[14]*I,l[3]=u[3]*p+u[7]*v+u[11]*E+u[15]*I,l}function oS(){var l=new Xu(4);return Xu!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function eM(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l}function qy(l,s,u){u*=.5;var p=s[0],v=s[1],E=s[2],I=s[3],M=Math.sin(u),R=Math.cos(u);return l[0]=p*R+I*M,l[1]=v*R+E*M,l[2]=E*R-v*M,l[3]=I*R-p*M,l}function tM(l,s,u){u*=.5;var p=s[0],v=s[1],E=s[2],I=s[3],M=Math.sin(u),R=Math.cos(u);return l[0]=p*R-E*M,l[1]=v*R+I*M,l[2]=E*R+p*M,l[3]=I*R-v*M,l}Ox(),gp=new Xu(4),Xu!=Float32Array&&(gp[0]=0,gp[1]=0,gp[2]=0,gp[3]=0);var nM=gm;Ox(),Wd(1,0,0),Wd(0,1,0),oS(),oS(),jy();const iM=Kt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:rM}=iM,oM=Kt([{name:"a_pos_3",components:3,type:"Int16"}]);var _m=Kt([{name:"a_pos",type:"Int16",components:2}]);class vm{constructor(s,u){this.pos=s,this.dir=u}intersectsPlane(s,u,p){const v=yc(u,this.dir);if(Math.abs(v)<1e-6)return!1;const E=((s[0]-this.pos[0])*u[0]+(s[1]-this.pos[1])*u[1]+(s[2]-this.pos[2])*u[2])/v;return p[0]=this.pos[0]+this.dir[0]*E,p[1]=this.pos[1]+this.dir[1]*E,p[2]=this.pos[2]+this.dir[2]*E,!0}closestPointOnSphere(s,u,p){if(ve=(X=this.pos)[0],Ue=X[1],ft=X[2],Pt=(oe=s)[0],ht=oe[1],Tt=oe[2],Math.abs(ve-Pt)<=Uy*Math.max(1,Math.abs(ve),Math.abs(Pt))&&Math.abs(Ue-ht)<=Uy*Math.max(1,Math.abs(Ue),Math.abs(ht))&&Math.abs(ft-Tt)<=Uy*Math.max(1,Math.abs(ft),Math.abs(Tt))||0===u)return p[0]=p[1]=p[2]=0,!1;var X,oe,ve,Ue,ft,Pt,ht,Tt;const[v,E,I]=this.dir,M=this.pos[0]-s[0],R=this.pos[1]-s[1],L=this.pos[2]-s[2],z=v*v+E*E+I*I,V=2*(M*v+R*E+L*I),G=V*V-4*z*(M*M+R*R+L*L-u*u);if(G<0){const X=Math.max(-V/2,0),oe=M+v*X,ve=R+E*X,Ue=L+I*X,ft=Math.hypot(oe,ve,Ue);return p[0]=oe*u/ft,p[1]=ve*u/ft,p[2]=Ue*u/ft,!1}{const X=(-V-Math.sqrt(G))/(2*z);if(X<0){const oe=Math.hypot(M,R,L);return p[0]=M*u/oe,p[1]=R*u/oe,p[2]=L*u/oe,!1}return p[0]=M+v*X,p[1]=R+E*X,p[2]=L+I*X,!0}}}class Nx{constructor(s,u,p,v,E){this.TL=s,this.TR=u,this.BR=p,this.BL=v,this.horizon=E}static fromInvProjectionMatrix(s,u,p){const v=[-1,1,1],E=[1,1,1],I=[1,-1,1],M=[-1,-1,1],R=ja(v,v,s),L=ja(E,E,s),z=ja(I,I,s),V=ja(M,M,s);return new Nx(R,L,z,V,u/p)}}class ym{constructor(s,u){this.points=s,this.planes=u}static fromInvProjectionMatrix(s,u,p,v){const E=Math.pow(2,p),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const L=wh([],R,s),z=1/L[3]/u*E;return(V=L)[0]=(G=L)[0]*(X=[z,z,v?1/L[3]:z,z])[0],V[1]=G[1]*X[1],V[2]=G[2]*X[2],V[3]=G[3]*X[3],V;var V,G,X}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const L=vc([],Lx([],vd([],I[R[0]],I[R[1]]),vd([],I[R[2]],I[R[1]]))),z=-yc(L,I[R[1]]);return L.concat(z)});return new ym(I,M)}}class Lc{static fromPoints(s){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const v of s)mm(u,u,v),U_(p,p,v);return new Lc(u,p)}static applyTransform(s,u){const p=s.getCorners();for(let v=0;v<p.length;++v)ja(p[v],p[v],u);return Lc.fromPoints(p)}constructor(s,u){this.min=s,this.max=u,this.center=Yu([],ea([],this.min,this.max),.5)}quadrant(s){const u=[s%2==0,s<2],p=eS(this.min),v=eS(this.max);for(let E=0;E<u.length;E++)p[E]=u[E]?this.min[E]:this.center[E],v[E]=u[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new Lc(p,v)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,u=this.max;return[[s[0],s[1],s[2]],[u[0],s[1],s[2]],[u[0],u[1],s[2]],[s[0],u[1],s[2]],[s[0],s[1],u[2]],[u[0],s[1],u[2]],[u[0],u[1],u[2]],[s[0],u[1],u[2]]]}intersects(s){const u=this.getCorners();let p=!0;for(let v=0;v<s.planes.length;v++){const E=s.planes[v];let I=0;for(let M=0;M<u.length;M++)I+=yc(E,u[M])+E[3]>=0;if(0===I)return 0;I!==u.length&&(p=!1)}if(p)return 2;for(let v=0;v<3;v++){let E=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let M=0;M<s.points.length;M++){const R=s.points[M][v]-this.min[v];E=Math.min(E,R),I=Math.max(I,R)}if(I<0||E>this.max[v]-this.min[v])return 0}return 1}}const Ig=5,sM=6,Eh=Er/Math.PI/2,sS=16383,Zu=[64,32,16],Xd=-Eh,zu=Eh,Fx=[new Lc([Xd,Xd,Xd],[zu,zu,zu]),new Lc([Xd,Xd,Xd],[0,0,zu]),new Lc([0,Xd,Xd],[zu,0,zu]),new Lc([Xd,0,Xd],[0,zu,zu]),new Lc([0,0,Xd],[zu,zu,zu])];function G_(l){return l*Eh/Yh}function H_(l,s,u,p=!0){const v=Yu([],l._camera.position,l.worldSize),E=[s,u,1,1];wh(E,E,l.pixelMatrixInverse),rS(E,E,1/E[3]);const I=vc([],vd([],E,v)),M=l.globeMatrix,R=[M[12],M[13],M[14]],L=vd([],R,v),z=_c(L),V=vc([],L),G=l.worldSize/(2*Math.PI),X=yc(V,I),oe=Math.asin(G/z);if(oe<Math.acos(X)){if(!p)return null;const ci=[],In=[];Yu(ci,I,z/X),vc(In,vd(In,ci,L)),vc(I,ea(I,L,Yu(I,In,Math.tan(oe)*z)))}const ve=[];new vm(v,I).closestPointOnSphere(R,G,ve);const Ue=vc([],lt(M,0)),ft=vc([],lt(M,1)),Pt=vc([],lt(M,2)),ht=yc(Ue,ve),Tt=yc(ft,ve),Ft=yc(Pt,ve),zt=se(Math.asin(-Tt/G));let En=se(Math.atan2(ht,Ft));En=l.center.lng+function(ci,In){const Wn=(In-ci+180)%360-180;return Wn<-180?Wn+360:Wn}(l.center.lng,En);const pn=Kh(En),$n=Y(Uf(zt),0,1);return new kg(pn,$n)}class Bx{constructor(s,u,p){this.a=vd([],s,p),this.b=vd([],u,p),this.center=p;const v=vc([],this.a),E=vc([],this.b);this.angle=Math.acos(yc(v,E))}}function zx(l,s){if(0===l.angle)return null;let u;return u=0===l.a[s]?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[s]/l.a[s]/Math.sin(l.angle)-1/Math.tan(l.angle)),u<0||u>1?null:function(p,v,E,I){const M=Math.sin(E);return p*(Math.sin((1-I)*E)/M)+v*(Math.sin(I*E)/M)}(l.a[s],l.b[s],l.angle,Y(u,0,1))+l.center[s]}function Ch(l){if(l.z<=1)return Fx[l.z+2*l.y+l.x];const s=$f(xm(l));return Lc.fromPoints(s)}function _p(l,s,u){return Yu(l,l,1-u),Sg(l,l,s,u)}function $x(l,s){const u=yp(s.zoom);if(0===u)return Ch(l);const p=xm(l),v=$f(p),E=Kh(p.getWest())*s.worldSize,I=Kh(p.getEast())*s.worldSize,M=Uf(p.getNorth())*s.worldSize,R=Uf(p.getSouth())*s.worldSize,L=[E,M,0],z=[I,M,0],V=[E,R,0],G=[I,R,0],X=$_([],s.globeMatrix);return ja(L,L,X),ja(z,z,X),ja(V,V,X),ja(G,G,X),v[0]=_p(v[0],V,u),v[1]=_p(v[1],G,u),v[2]=_p(v[2],z,u),v[3]=_p(v[3],L,u),Lc.fromPoints(v)}function Vx(l,s,u){for(const p of l)ja(p,p,s),Yu(p,p,u)}function xm({x:l,y:s,z:u}){const p=1/(1<<u),v=new Ho(Yd(l*p),Zc((s+1)*p)),E=new Ho(Yd((l+1)*p),Zc(s*p));return new Bf(v,E)}function $f(l){const s=he(l.getNorth()),u=he(l.getSouth()),p=Math.cos(s),v=Math.cos(u),E=Math.sin(s),I=Math.sin(u),M=l.getWest(),R=l.getEast();return[Tg(v,I,M),Tg(v,I,R),Tg(p,E,R),Tg(p,E,M)]}function Tg(l,s,u,p=Eh){return u=he(u),[l*Math.sin(u)*p,-s*p,l*Math.cos(u)*p]}function wm(l,s,u){return Tg(Math.cos(he(l)),Math.sin(he(l)),s,u)}function Dg(l,s,u,p){const v=1<<u.z,E=(l/Er+u.x)/v;return wm(Zc((s/Er+u.y)/v),Yd(E),p)}function vp({min:l,max:s}){return sS/Math.max(s[0]-l[0],s[1]-l[1],s[2]-l[2])}const aS=new Float64Array(16);function bc(l){const s=vp(l),u=kx(aS,[s,s,s]);return Cg(u,u,((p=[])[0]=-(v=l.min)[0],p[1]=-v[1],p[2]=-v[2],p));var p,v}function Ux(l){const s=(p=l.min,(u=aS)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=p[0],u[13]=p[1],u[14]=p[2],u[15]=1,u);var u,p;const v=1/vp(l);return zf(s,s,[v,v,v])}function $s(l,s,u,p,v){const E=function(R){const L=Er/(2*Math.PI);return R/(2*Math.PI)/L}(u),I=[l,s,-u/(2*Math.PI)],M=qd(new Float64Array(16));return Cg(M,M,I),zf(M,M,[E,E,E]),Hy(M,M,he(-v)),V_(M,M,he(-p)),M}function yp(l){return Ge(Ig,sM,l)}function lS(l,s){const u=wm(s.lat,s.lng);return I=(v=xh([],function(oe){const ve=wm(oe._center.lat,oe._center.lng);let Ue=Lx([],Wd(0,1,0),ve);const ft=Px([],-oe.angle,ve);Ue=ja(Ue,Ue,ft),Px(ft,-oe._pitch,Ue);const Pt=vc([],ve);return Yu(Pt,Pt,G_(oe.cameraToCenterDistance/oe.pixelsPerMeter)),ja(Pt,Pt,ft),ea([],ve,Pt)}(l),u))[0],M=v[1],R=v[2],L=(E=u)[0],z=E[1],V=E[2],X=(G=Math.sqrt(I*I+M*M+R*R)*Math.sqrt(L*L+z*z+V*V))&&yc(v,E)/G,Math.acos(Math.min(Math.max(X,-1),1));var v,E,I,M,R,L,z,V,G,X}function Wy(l,s){return lS(l,s)>Math.PI/2*1.01}const Vf=he(85),Ag=Math.cos(Vf),Mg=Math.sin(Vf),Yh=6371008.8,jx=2*Math.PI*Yh;class Zh{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zh(De(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const u=Math.PI/180,p=this.lat*u,v=s.lat*u,E=Math.sin(p)*Math.sin(v)+Math.cos(p)*Math.cos(v)*Math.cos((s.lng-this.lng)*u);return Yh*Math.acos(Math.min(E,1))}toBounds(s=0){const u=360*s/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new Bf(new Zh(this.lng-p,this.lat-u),new Zh(this.lng+p,this.lat+u))}toEcef(s){const u=G_(s);return wm(this.lat,this.lng,Eh+u)}static convert(s){if(s instanceof Zh)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new Zh(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new Zh(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ho=Zh;function cS(l){return jx*Math.cos(l*Math.PI/180)}function Kh(l){return(180+l)/360}function Uf(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Qh(l,s){return l/cS(s)}function Yd(l){return 360*l-180}function Zc(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function lM(l,s){return l*cS(Zc(s))}const Kc=85.051129;function Em(l){return 1/Math.cos(l*Math.PI/180)}class kg{constructor(s,u,p=0){this.x=+s,this.y=+u,this.z=+p}static fromLngLat(s,u=0){const p=Ho.convert(s);return new kg(Kh(p.lng),Uf(p.lat),Qh(u,p.lat))}toLngLat(){return new Ho(Yd(this.x),Zc(this.y))}toAltitude(){return lM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/jx*Em(Zc(this.y))}}function Gx(l,s,u,p,v,E,I,M,R){const L=(s+p)/2,z=(u+v)/2,V=new K(L,z);M(V),function(G,X,oe,ve,Ue,ft){const Pt=oe-Ue,ht=ve-ft;return Math.abs((ve-X)*Pt-(oe-G)*ht)/Math.hypot(Pt,ht)}(V.x,V.y,E.x,E.y,I.x,I.y)>=R?(Gx(l,s,u,L,z,E,V,M,R),Gx(l,L,z,p,v,V,I,M,R)):l.push(I)}function nc(l,s,u){let p=l[0],v=p.x,E=p.y;s(p);const I=[p];for(let M=1;M<l.length;M++){const R=l[M],{x:L,y:z}=R;s(R),Gx(I,v,E,L,z,p,R,s,u),v=L,E=z,p=R}return I}function Hx(l,s,u,p){if(p(s,u)){const v=s.add(u)._mult(.5);Hx(l,s,v,p),Hx(l,v,u,p)}else l.push(u)}function q_(l,s){let u=l[0];const p=[u];for(let v=1;v<l.length;v++){const E=l[v];Hx(p,u,E,s),u=E}return p}const qx=Math.pow(2,14)-1,yd=-qx-1;function Pg(l,s){const u=Math.round(l.x*s),p=Math.round(l.y*s);return l.x=Y(u,yd,qx),l.y=Y(p,yd,qx),(u<l.x||u>l.x+1||p<l.y||p>l.y+1)&&cn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function Jh(l,s,u){const p=l.loadGeometry(),v=l.extent,E=Er/v;if(s&&u&&u.projection.isReprojectedInTileSpace){const I=1<<s.z,{scale:M,x:R,y:L,projection:z}=u,V=G=>{const X=Yd((s.x+G.x/v)/I),oe=Zc((s.y+G.y/v)/I),ve=z.project(X,oe);G.x=(ve.x*M-R)*v,G.y=(ve.y*M-L)*v};for(let G=0;G<p.length;G++)if(1!==l.type)p[G]=nc(p[G],V,1);else{const X=[];for(const oe of p[G])oe.x<0||oe.x>=v||oe.y<0||oe.y>=v||(V(oe),X.push(oe));p[G]=X}}for(const I of p)for(const M of I)Pg(M,E);return p}function ef(l,s){return{type:l.type,id:l.id,properties:l.properties,geometry:s?Jh(l):[]}}function bp(l,s,u,p,v){l.emplaceBack(2*s+(p+1)/2,2*u+(v+1)/2)}function Xy(l,s,u){l.emplaceBack(s.x,s.y,s.z,16384*u[0],16384*u[1],16384*u[2])}class uS{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new hi,this.indexArray=new dr,this.segments=new Js,this.programConfigurations=new vu(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,p,v){const E=this.layers[0],I=[];let M=null;"circle"===E.type&&(M=E.layout.get("circle-sort-key"));for(const{feature:L,id:z,index:V,sourceLayerIndex:G}of s){const X=this.layers[0]._featureFilter.needGeometry,oe=ef(L,X);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),oe,p))continue;const ve=M?M.evaluate(oe,{},p):void 0,Ue={id:z,properties:L.properties,type:L.type,sourceLayerIndex:G,index:V,geometry:X?oe.geometry:Jh(L,p,v),patterns:{},sortKey:ve};I.push(Ue)}M&&I.sort((L,z)=>L.sortKey-z.sortKey);let R=null;"globe"===v.projection.name&&(this.globeExtVertexArray=new di,R=v.projection);for(const L of I){const{geometry:z,index:V,sourceLayerIndex:G}=L,X=s[V].feature;this.addFeature(L,z,V,u.availableImages,p,R),u.featureIndex.insert(X,z,V,G,this.index)}}update(s,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,JC.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,Eg.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,u,p,v,E,I){for(const M of u)for(const R of M){const L=R.x,z=R.y;if(L<0||L>=Er||z<0||z>=Er)continue;if(I){const X=I.projectTilePoint(L,z,E),oe=I.upVector(E,L,z),ve=this.globeExtVertexArray;Xy(ve,X,oe),Xy(ve,X,oe),Xy(ve,X,oe),Xy(ve,X,oe)}const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),G=V.vertexLength;bp(this.layoutVertexArray,L,z,-1,-1),bp(this.layoutVertexArray,L,z,1,-1),bp(this.layoutVertexArray,L,z,1,1),bp(this.layoutVertexArray,L,z,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+2,G+3),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,{},v,E)}}function dS(l,s){for(let u=0;u<l.length;u++)if(Cm(s,l[u]))return!0;for(let u=0;u<s.length;u++)if(Cm(l,s[u]))return!0;return!!xp(l,s)}function DF(l,s,u){return!!Cm(l,s)||!!Yy(s,l,u)}function Ku(l,s){if(1===l.length)return fS(s,l[0]);for(let u=0;u<s.length;u++){const p=s[u];for(let v=0;v<p.length;v++)if(Cm(l,p[v]))return!0}for(let u=0;u<l.length;u++)if(fS(s,l[u]))return!0;for(let u=0;u<s.length;u++)if(xp(l,s[u]))return!0;return!1}function Wx(l,s,u){if(l.length>1){if(xp(l,s))return!0;for(let p=0;p<s.length;p++)if(Yy(s[p],l,u))return!0}for(let p=0;p<l.length;p++)if(Yy(l[p],s,u))return!0;return!1}function xp(l,s){if(0===l.length||0===s.length)return!1;for(let u=0;u<l.length-1;u++){const p=l[u],v=l[u+1];for(let E=0;E<s.length-1;E++)if(AF(p,v,s[E],s[E+1]))return!0}return!1}function AF(l,s,u,p){return Lt(l,u,p)!==Lt(s,u,p)&&Lt(l,s,u)!==Lt(l,s,p)}function Yy(l,s,u){const p=u*u;if(1===s.length)return l.distSqr(s[0])<p;for(let v=1;v<s.length;v++)if(hS(l,s[v-1],s[v])<p)return!0;return!1}function hS(l,s,u){const p=s.distSqr(u);if(0===p)return l.distSqr(s);const v=((l.x-s.x)*(u.x-s.x)+(l.y-s.y)*(u.y-s.y))/p;return l.distSqr(v<0?s:v>1?u:u.sub(s)._mult(v)._add(s))}function fS(l,s){let u,p,v,E=!1;for(let I=0;I<l.length;I++){u=l[I];for(let M=0,R=u.length-1;M<u.length;R=M++)p=u[M],v=u[R],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(E=!E)}return E}function Cm(l,s){let u=!1;for(let p=0,v=l.length-1;p<l.length;v=p++){const E=l[p],I=l[v];E.y>s.y!=I.y>s.y&&s.x<(I.x-E.x)*(s.y-E.y)/(I.y-E.y)+E.x&&(u=!u)}return u}function pS(l,s,u,p,v){for(const I of l)if(s<=I.x&&u<=I.y&&p>=I.x&&v>=I.y)return!0;const E=[new K(s,u),new K(s,v),new K(p,v),new K(p,u)];if(l.length>2)for(const I of E)if(Cm(l,I))return!0;for(let I=0;I<l.length-1;I++)if(cM(l[I],l[I+1],E))return!0;return!1}function cM(l,s,u){const p=u[0],v=u[2];if(l.x<p.x&&s.x<p.x||l.x>v.x&&s.x>v.x||l.y<p.y&&s.y<p.y||l.y>v.y&&s.y>v.y)return!1;const E=Lt(l,s,u[0]);return E!==Lt(l,s,u[1])||E!==Lt(l,s,u[2])||E!==Lt(l,s,u[3])}function Rg(l,s,u){const p=s.paint.get(l).value;return"constant"===p.kind?p.value:u.programConfigurations.get(s.id).getMaxValue(l)}function Og(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function W_(l,s,u,p,v){if(!s[0]&&!s[1])return l;const E=K.convert(s)._mult(v);"viewport"===u&&E._rotate(-p);const I=[];for(let M=0;M<l.length;M++)I.push(l[M].sub(E));return I}function mS(l,s,u,p){const v=K.convert(l)._mult(p);return"viewport"===s&&v._rotate(-u),v}wi(uS,"CircleBucket",{omit:["layers"]});const Sm=new Et({"circle-sort-key":new Ye(Mn.layout_circle["circle-sort-key"])});var uM={paint:new Et({"circle-radius":new Ye(Mn.paint_circle["circle-radius"]),"circle-color":new Ye(Mn.paint_circle["circle-color"]),"circle-blur":new Ye(Mn.paint_circle["circle-blur"]),"circle-opacity":new Ye(Mn.paint_circle["circle-opacity"]),"circle-translate":new pe(Mn.paint_circle["circle-translate"]),"circle-translate-anchor":new pe(Mn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new pe(Mn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new pe(Mn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ye(Mn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ye(Mn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ye(Mn.paint_circle["circle-stroke-opacity"])}),layout:Sm};function Lg(l,s,u,p,v,E,I,M,R){if(E&&l.queryGeometry.isAboveHorizon)return!1;E&&(R*=l.pixelToTileUnitsFactor);const L=l.tileID.canonical,z=u.projection.upVectorScale(L,u.center.lat,u.worldSize).metersToTile;for(const V of s)for(const G of V){const X=G.add(M),oe=v&&u.elevation?u.elevation.exaggeration()*v.getElevationAt(X.x,X.y,!0):0,ve=u.projection.projectTilePoint(X.x,X.y,L);if(oe>0){const ht=u.projection.upVector(L,X.x,X.y);ve.x+=ht[0]*z*oe,ve.y+=ht[1]*z*oe,ve.z+=ht[2]*z*oe}const Ue=E?X:dM(ve.x,ve.y,ve.z,p),ft=E?l.tilespaceRays.map(ht=>Zy(ht,oe)):l.queryGeometry.screenGeometry,Pt=wh([],[ve.x,ve.y,ve.z,1],p);if(!I&&E?R*=Pt[3]/u.cameraToCenterDistance:I&&!E&&(R*=u.cameraToCenterDistance/Pt[3]),E){const ht=Zc((G.y/Er+L.y)/(1<<L.z));R/=u.projection.pixelsPerMeter(ht,1)/Qh(1,ht)}if(DF(ft,Ue,R))return!0}return!1}function dM(l,s,u,p){const v=wh([],[l,s,u,1],p);return new K(v[0]/v[3],v[1]/v[3])}const Xx=Wd(0,0,0),Yx=Wd(0,0,1);function Zy(l,s){const u=Ox();return Xx[2]=s,l.intersectsPlane(Xx,Yx,u),new K(u[0],u[1])}class Zx extends uS{}function gS(l,{width:s,height:u},p,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==s*u*p)throw new RangeError("mismatched image size")}else v=new Uint8Array(s*u*p);return l.width=s,l.height=u,l.data=v,l}function _S(l,s,u){const{width:p,height:v}=s;p===l.width&&v===l.height||(wp(l,s,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,p),height:Math.min(l.height,v)},u),l.width=p,l.height=v,l.data=s.data)}function wp(l,s,u,p,v,E){if(0===v.width||0===v.height)return s;if(v.width>l.width||v.height>l.height||u.x>l.width-v.width||u.y>l.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>s.width||v.height>s.height||p.x>s.width-v.width||p.y>s.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const I=l.data,M=s.data;for(let R=0;R<v.height;R++){const L=((u.y+R)*l.width+u.x)*E,z=((p.y+R)*s.width+p.x)*E;for(let V=0;V<v.width*E;V++)M[z+V]=I[L+V]}return s}wi(Zx,"HeatmapBucket",{omit:["layers"]});class bd{constructor(s,u){gS(this,s,1,u)}resize(s){_S(this,new bd(s),1)}clone(){return new bd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,p,v,E){wp(s,u,p,v,E,1)}}class Qu{constructor(s,u){gS(this,s,4,u)}resize(s){_S(this,new Qu(s),4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Qu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,p,v,E){wp(s,u,p,v,E,4)}}wi(bd,"AlphaImage"),wi(Qu,"RGBAImage");var MF={paint:new Et({"heatmap-radius":new Ye(Mn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ye(Mn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new pe(Mn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bt(Mn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new pe(Mn.paint_heatmap["heatmap-opacity"])})};function Ky(l){const s={},u=l.resolution||256,p=l.clips?l.clips.length:1,v=l.image||new Qu({width:u,height:p}),E=(I,M,R)=>{s[l.evaluationKey]=R;const L=l.expression.evaluate(s);v.data[I+M+0]=Math.floor(255*L.r/L.a),v.data[I+M+1]=Math.floor(255*L.g/L.a),v.data[I+M+2]=Math.floor(255*L.b/L.a),v.data[I+M+3]=Math.floor(255*L.a)};if(l.clips)for(let I=0,M=0;I<p;++I,M+=4*u)for(let R=0,L=0;R<u;R++,L+=4){const z=R/(u-1),{start:V,end:G}=l.clips[I];E(M,L,V*(1-z)+G*z)}else for(let I=0,M=0;I<u;I++,M+=4)E(0,M,I/(u-1));return v}var hM={paint:new Et({"hillshade-illumination-direction":new pe(Mn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new pe(Mn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new pe(Mn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new pe(Mn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new pe(Mn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new pe(Mn.paint_hillshade["hillshade-accent-color"])})};const kF=Kt([{name:"a_pos",components:2,type:"Int16"}],4),{members:fM}=kF;var Kx={exports:{}};function Qy(l,s,u){u=u||2;var p,v,E,I,M,R,L,z=s&&s.length,V=z?s[0]*u:l.length,G=X_(l,0,V,u,!0),X=[];if(!G||G.next===G.prev)return X;if(z&&(G=function(ve,Ue,ft,Pt){var ht,Tt,Ft,zt=[];for(ht=0,Tt=Ue.length;ht<Tt;ht++)(Ft=X_(ve,Ue[ht]*Pt,ht<Tt-1?Ue[ht+1]*Pt:ve.length,Pt,!1))===Ft.next&&(Ft.steiner=!0),zt.push(OF(Ft));for(zt.sort(pM),ht=0;ht<zt.length;ht++)ft=mM(zt[ht],ft);return ft}(l,s,G,u)),l.length>80*u){p=E=l[0],v=I=l[1];for(var oe=u;oe<V;oe+=u)(M=l[oe])<p&&(p=M),(R=l[oe+1])<v&&(v=R),M>E&&(E=M),R>I&&(I=R);L=0!==(L=Math.max(E-p,I-v))?32767/L:0}return Y_(G,X,u,p,v,L,0),X}function X_(l,s,u,p,v){var E,I;if(v===Ip(l,s,u,p)>0)for(E=s;E<u;E+=p)I=t1(E,l[E],l[E+1],I);else for(E=u-p;E>=s;E-=p)I=t1(E,l[E],l[E+1],I);return I&&Jx(I,I.next)&&(Ng(I),I=I.next),I}function Ep(l,s){if(!l)return l;s||(s=l);var u,p=l;do{if(u=!1,p.steiner||!Jx(p,p.next)&&0!==Pl(p.prev,p,p.next))p=p.next;else{if(Ng(p),(p=s=p.prev)===p.next)break;u=!0}}while(u||p!==s);return s}function Y_(l,s,u,p,v,E,I){if(l){!I&&E&&function(z,V,G,X){var oe=z;do{0===oe.z&&(oe.z=bS(oe.x,oe.y,V,G,X)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next}while(oe!==z);oe.prevZ.nextZ=null,oe.prevZ=null,function(ve){var Ue,ft,Pt,ht,Tt,Ft,zt,En,pn=1;do{for(ft=ve,ve=null,Tt=null,Ft=0;ft;){for(Ft++,Pt=ft,zt=0,Ue=0;Ue<pn&&(zt++,Pt=Pt.nextZ);Ue++);for(En=pn;zt>0||En>0&&Pt;)0!==zt&&(0===En||!Pt||ft.z<=Pt.z)?(ht=ft,ft=ft.nextZ,zt--):(ht=Pt,Pt=Pt.nextZ,En--),Tt?Tt.nextZ=ht:ve=ht,ht.prevZ=Tt,Tt=ht;ft=Pt}Tt.nextZ=null,pn*=2}while(Ft>1)}(oe)}(l,p,v,E);for(var M,R,L=l;l.prev!==l.next;)if(M=l.prev,R=l.next,E?PF(l,p,v,E):vS(l))s.push(M.i/u|0),s.push(l.i/u|0),s.push(R.i/u|0),Ng(l),l=R.next,L=R.next;else if((l=R)===L){I?1===I?Y_(l=yS(Ep(l),s,u),s,u,p,v,E,2):2===I&&RF(l,s,u,p,v,E):Y_(Ep(l),s,u,p,v,E,1);break}}}function vS(l){var s=l.prev,u=l,p=l.next;if(Pl(s,u,p)>=0)return!1;for(var v=s.x,E=u.x,I=p.x,M=s.y,R=u.y,L=p.y,z=v<E?v<I?v:I:E<I?E:I,V=M<R?M<L?M:L:R<L?R:L,G=v>E?v>I?v:I:E>I?E:I,X=M>R?M>L?M:L:R>L?R:L,oe=p.next;oe!==s;){if(oe.x>=z&&oe.x<=G&&oe.y>=V&&oe.y<=X&&Cp(v,M,E,R,I,L,oe.x,oe.y)&&Pl(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function PF(l,s,u,p){var v=l.prev,E=l,I=l.next;if(Pl(v,E,I)>=0)return!1;for(var M=v.x,R=E.x,L=I.x,z=v.y,V=E.y,G=I.y,X=M<R?M<L?M:L:R<L?R:L,oe=z<V?z<G?z:G:V<G?V:G,ve=M>R?M>L?M:L:R>L?R:L,Ue=z>V?z>G?z:G:V>G?V:G,ft=bS(X,oe,s,u,p),Pt=bS(ve,Ue,s,u,p),ht=l.prevZ,Tt=l.nextZ;ht&&ht.z>=ft&&Tt&&Tt.z<=Pt;){if(ht.x>=X&&ht.x<=ve&&ht.y>=oe&&ht.y<=Ue&&ht!==v&&ht!==I&&Cp(M,z,R,V,L,G,ht.x,ht.y)&&Pl(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,Tt.x>=X&&Tt.x<=ve&&Tt.y>=oe&&Tt.y<=Ue&&Tt!==v&&Tt!==I&&Cp(M,z,R,V,L,G,Tt.x,Tt.y)&&Pl(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;ht&&ht.z>=ft;){if(ht.x>=X&&ht.x<=ve&&ht.y>=oe&&ht.y<=Ue&&ht!==v&&ht!==I&&Cp(M,z,R,V,L,G,ht.x,ht.y)&&Pl(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;Tt&&Tt.z<=Pt;){if(Tt.x>=X&&Tt.x<=ve&&Tt.y>=oe&&Tt.y<=Ue&&Tt!==v&&Tt!==I&&Cp(M,z,R,V,L,G,Tt.x,Tt.y)&&Pl(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function yS(l,s,u){var p=l;do{var v=p.prev,E=p.next.next;!Jx(v,E)&&gM(v,p,p.next,E)&&Sp(v,E)&&Sp(E,v)&&(s.push(v.i/u|0),s.push(p.i/u|0),s.push(E.i/u|0),Ng(p),Ng(p.next),p=l=E),p=p.next}while(p!==l);return Ep(p)}function RF(l,s,u,p,v,E){var I=l;do{for(var M=I.next.next;M!==I.prev;){if(I.i!==M.i&&LF(I,M)){var R=Z_(I,M);return I=Ep(I,I.next),R=Ep(R,R.next),Y_(I,s,u,p,v,E,0),void Y_(R,s,u,p,v,E,0)}M=M.next}I=I.next}while(I!==l)}function pM(l,s){return l.x-s.x}function mM(l,s){var u=function(v,E){var I,M=E,R=v.x,L=v.y,z=-1/0;do{if(L<=M.y&&L>=M.next.y&&M.next.y!==M.y){var V=M.x+(L-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(V<=R&&V>z&&(z=V,I=M.x<M.next.x?M:M.next,V===R))return I}M=M.next}while(M!==E);if(!I)return null;var G,X=I,oe=I.x,ve=I.y,Ue=1/0;M=I;do{R>=M.x&&M.x>=oe&&R!==M.x&&Cp(L<ve?R:z,L,oe,ve,L<ve?z:R,L,M.x,M.y)&&(G=Math.abs(L-M.y)/(R-M.x),Sp(M,v)&&(G<Ue||G===Ue&&(M.x>I.x||M.x===I.x&&Qx(I,M)))&&(I=M,Ue=G)),M=M.next}while(M!==X);return I}(l,s);if(!u)return s;var p=Z_(u,l);return Ep(p,p.next),Ep(u,u.next)}function Qx(l,s){return Pl(l.prev,l,s.prev)<0&&Pl(s.next,l,l.next)<0}function bS(l,s,u,p,v){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-u)*v|0)|l<<8))|l<<4))|l<<2))|l<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-p)*v|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function OF(l){var s=l,u=l;do{(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next}while(s!==l);return u}function Cp(l,s,u,p,v,E,I,M){return(v-I)*(s-M)>=(l-I)*(E-M)&&(l-I)*(p-M)>=(u-I)*(s-M)&&(u-I)*(E-M)>=(v-I)*(p-M)}function LF(l,s){return l.next.i!==s.i&&l.prev.i!==s.i&&!function(u,p){var v=u;do{if(v.i!==u.i&&v.next.i!==u.i&&v.i!==p.i&&v.next.i!==p.i&&gM(v,v.next,u,p))return!0;v=v.next}while(v!==u);return!1}(l,s)&&(Sp(l,s)&&Sp(s,l)&&function(u,p){var v=u,E=!1,I=(u.x+p.x)/2,M=(u.y+p.y)/2;do{v.y>M!=v.next.y>M&&v.next.y!==v.y&&I<(v.next.x-v.x)*(M-v.y)/(v.next.y-v.y)+v.x&&(E=!E),v=v.next}while(v!==u);return E}(l,s)&&(Pl(l.prev,l,s.prev)||Pl(l,s.prev,s))||Jx(l,s)&&Pl(l.prev,l,l.next)>0&&Pl(s.prev,s,s.next)>0)}function Pl(l,s,u){return(s.y-l.y)*(u.x-s.x)-(s.x-l.x)*(u.y-s.y)}function Jx(l,s){return l.x===s.x&&l.y===s.y}function gM(l,s,u,p){var v=Jy(Pl(l,s,u)),E=Jy(Pl(l,s,p)),I=Jy(Pl(u,p,l)),M=Jy(Pl(u,p,s));return v!==E&&I!==M||!(0!==v||!e1(l,u,s))||!(0!==E||!e1(l,p,s))||!(0!==I||!e1(u,l,p))||!(0!==M||!e1(u,s,p))}function e1(l,s,u){return s.x<=Math.max(l.x,u.x)&&s.x>=Math.min(l.x,u.x)&&s.y<=Math.max(l.y,u.y)&&s.y>=Math.min(l.y,u.y)}function Jy(l){return l>0?1:l<0?-1:0}function Sp(l,s){return Pl(l.prev,l,l.next)<0?Pl(l,s,l.next)>=0&&Pl(l,l.prev,s)>=0:Pl(l,s,l.prev)<0||Pl(l,l.next,s)<0}function Z_(l,s){var u=new e0(l.i,l.x,l.y),p=new e0(s.i,s.x,s.y),v=l.next,E=s.prev;return l.next=s,s.prev=l,u.next=v,v.prev=u,p.next=u,u.prev=p,E.next=p,p.prev=E,p}function t1(l,s,u,p){var v=new e0(l,s,u);return p?(v.next=p.next,v.prev=p,p.next.prev=v,p.next=v):(v.prev=v,v.next=v),v}function Ng(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function e0(l,s,u){this.i=l,this.x=s,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ip(l,s,u,p){for(var v=0,E=s,I=u-p;E<u;E+=p)v+=(l[I]-l[E])*(l[E+1]+l[I+1]),I=E;return v}Kx.exports=Qy,Kx.exports.default=Qy,Qy.deviation=function(l,s,u,p){var v=s&&s.length,E=Math.abs(Ip(l,0,v?s[0]*u:l.length,u));if(v)for(var I=0,M=s.length;I<M;I++)E-=Math.abs(Ip(l,s[I]*u,I<M-1?s[I+1]*u:l.length,u));var R=0;for(I=0;I<p.length;I+=3){var L=p[I]*u,z=p[I+1]*u,V=p[I+2]*u;R+=Math.abs((l[L]-l[V])*(l[z+1]-l[L+1])-(l[L]-l[z])*(l[V+1]-l[L+1]))}return 0===E&&0===R?0:Math.abs((R-E)/E)},Qy.flatten=function(l){for(var s=l[0][0].length,u={vertices:[],holes:[],dimensions:s},p=0,v=0;v<l.length;v++){for(var E=0;E<l[v].length;E++)for(var I=0;I<s;I++)u.vertices.push(l[v][E][I]);v>0&&u.holes.push(p+=l[v-1].length)}return u};var t0=we(Kx.exports);function xS(l,s,u,p,v){K_(l,s,u||0,p||l.length-1,v||Dp)}function K_(l,s,u,p,v){for(;p>u;){if(p-u>600){var E=p-u+1,I=s-u+1,M=Math.log(E),R=.5*Math.exp(2*M/3),L=.5*Math.sqrt(M*R*(E-R)/E)*(I-E/2<0?-1:1);K_(l,s,Math.max(u,Math.floor(s-I*R/E+L)),Math.min(p,Math.floor(s+(E-I)*R/E+L)),v)}var z=l[s],V=u,G=p;for(Tp(l,u,s),v(l[p],z)>0&&Tp(l,u,p);V<G;){for(Tp(l,V,G),V++,G--;v(l[V],z)<0;)V++;for(;v(l[G],z)>0;)G--}0===v(l[u],z)?Tp(l,u,G):Tp(l,++G,p),G<=s&&(u=G+1),s<=G&&(p=G-1)}}function Tp(l,s,u){var p=l[s];l[s]=l[u],l[u]=p}function Dp(l,s){return l<s?-1:l>s?1:0}function n1(l,s){const u=l.length;if(u<=1)return[l];const p=[];let v,E;for(let I=0;I<u;I++){const M=Cn(l[I]);0!==M&&(l[I].area=Math.abs(M),void 0===E&&(E=M<0),E===M<0?(v&&p.push(v),v=[l[I]]):v.push(l[I]))}if(v&&p.push(v),s>1)for(let I=0;I<p.length;I++)p[I].length<=s||(xS(p[I],s,1,p[I].length-1,_M),p[I]=p[I].slice(0,s));return p}function _M(l,s){return s.area-l.area}function r1(l,s,u){const p=u.patternDependencies;let v=!1;for(const E of s){const I=E.paint.get(`${l}-pattern`);I.isConstant()||(v=!0);const M=I.constantOr(null);M&&(v=!0,p[M]=!0)}return v}function n0(l,s,u,p,v){const E=v.patternDependencies;for(const I of s){const M=I.paint.get(`${l}-pattern`).value;if("constant"!==M.kind){let R=M.evaluate({zoom:p},u,{},v.availableImages);R=R&&R.name?R.name:R,E[R]=!0,u.patterns[I.id]=R}}return u}class Fg{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hi,this.indexArray=new dr,this.indexArray2=new va,this.programConfigurations=new vu(s.layers,s.zoom),this.segments=new Js,this.segments2=new Js,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=s.projection}populate(s,u,p,v){this.hasPattern=r1("fill",this.layers,u);const E=this.layers[0].layout.get("fill-sort-key"),I=[];for(const{feature:M,id:R,index:L,sourceLayerIndex:z}of s){const V=this.layers[0]._featureFilter.needGeometry,G=ef(M,V);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),G,p))continue;const X=E?E.evaluate(G,{},p,u.availableImages):void 0,oe={id:R,properties:M.properties,type:M.type,sourceLayerIndex:z,index:L,geometry:V?G.geometry:Jh(M,p,v),patterns:{},sortKey:X};I.push(oe)}E&&I.sort((M,R)=>M.sortKey-R.sortKey);for(const M of I){const{geometry:R,index:L,sourceLayerIndex:z}=M;if(this.hasPattern){const V=n0("fill",this.layers,M,this.zoom,u);this.patternFeatures.push(V)}else this.addFeature(M,R,L,p,{},u.availableImages);u.featureIndex.insert(s[L].feature,R,L,z,this.index)}}update(s,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,v)}addFeatures(s,u,p,v,E){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,u,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,fM),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,u,p,v,E,I=[]){for(const M of n1(u,500)){let R=0;for(const oe of M)R+=oe.length;const L=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),z=L.vertexLength,V=[],G=[];for(const oe of M){if(0===oe.length)continue;oe!==M[0]&&G.push(V.length/2);const ve=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),Ue=ve.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(Ue+oe.length-1,Ue),V.push(oe[0].x),V.push(oe[0].y);for(let ft=1;ft<oe.length;ft++)this.layoutVertexArray.emplaceBack(oe[ft].x,oe[ft].y),this.indexArray2.emplaceBack(Ue+ft-1,Ue+ft),V.push(oe[ft].x),V.push(oe[ft].y);ve.vertexLength+=oe.length,ve.primitiveLength+=oe.length}const X=t0(V,G);for(let oe=0;oe<X.length;oe+=3)this.indexArray.emplaceBack(z+X[oe],z+X[oe+1],z+X[oe+2]);L.vertexLength+=R,L.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,E,I,v)}}wi(Fg,"FillBucket",{omit:["layers","patternFeatures"]});const vM=new Et({"fill-sort-key":new Ye(Mn.layout_fill["fill-sort-key"])});var yM={paint:new Et({"fill-antialias":new pe(Mn.paint_fill["fill-antialias"]),"fill-opacity":new Ye(Mn.paint_fill["fill-opacity"]),"fill-color":new Ye(Mn.paint_fill["fill-color"]),"fill-outline-color":new Ye(Mn.paint_fill["fill-outline-color"]),"fill-translate":new pe(Mn.paint_fill["fill-translate"]),"fill-translate-anchor":new pe(Mn.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ye(Mn.paint_fill["fill-pattern"])}),layout:vM};const bM=Kt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),wS=Kt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),xM=Kt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:wM}=bM;var Nc={},o1=ke,s1=Ap;function Ap(l,s,u,p,v){this.properties={},this.extent=u,this.type=0,this._pbf=l,this._geometry=-1,this._keys=p,this._values=v,l.readFields(bu,this,s)}function bu(l,s,u){1==l?s.id=u.readVarint():2==l?function(p,v){for(var E=p.readVarint()+p.pos;p.pos<E;){var I=v._keys[p.readVarint()],M=v._values[p.readVarint()];v.properties[I]=M}}(u,s):3==l?s.type=u.readVarint():4==l&&(s._geometry=u.pos)}function Q_(l){for(var s,u,p=0,v=0,E=l.length,I=E-1;v<E;I=v++)p+=((u=l[I]).x-(s=l[v]).x)*(s.y+u.y);return p}Ap.types=["Unknown","Point","LineString","Polygon"],Ap.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var s,u=l.readVarint()+l.pos,p=1,v=0,E=0,I=0,M=[];l.pos<u;){if(v<=0){var R=l.readVarint();p=7&R,v=R>>3}if(v--,1===p||2===p)E+=l.readSVarint(),I+=l.readSVarint(),1===p&&(s&&M.push(s),s=[]),s.push(new o1(E,I));else{if(7!==p)throw new Error("unknown command "+p);s&&s.push(s[0].clone())}}return s&&M.push(s),M},Ap.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var s=l.readVarint()+l.pos,u=1,p=0,v=0,E=0,I=1/0,M=-1/0,R=1/0,L=-1/0;l.pos<s;){if(p<=0){var z=l.readVarint();u=7&z,p=z>>3}if(p--,1===u||2===u)(v+=l.readSVarint())<I&&(I=v),v>M&&(M=v),(E+=l.readSVarint())<R&&(R=E),E>L&&(L=E);else if(7!==u)throw new Error("unknown command "+u)}return[I,R,M,L]},Ap.prototype.toGeoJSON=function(l,s,u){var p,v,E=this.extent*Math.pow(2,u),I=this.extent*l,M=this.extent*s,R=this.loadGeometry(),L=Ap.types[this.type];function z(X){for(var oe=0;oe<X.length;oe++){var ve=X[oe];X[oe]=[360*(ve.x+I)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(ve.y+M)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(p=0;p<R.length;p++)V[p]=R[p][0];z(R=V);break;case 2:for(p=0;p<R.length;p++)z(R[p]);break;case 3:for(R=function(X){var oe=X.length;if(oe<=1)return[X];for(var ve,Ue,ft=[],Pt=0;Pt<oe;Pt++){var ht=Q_(X[Pt]);0!==ht&&(void 0===Ue&&(Ue=ht<0),Ue===ht<0?(ve&&ft.push(ve),ve=[X[Pt]]):ve.push(X[Pt]))}return ve&&ft.push(ve),ft}(R),p=0;p<R.length;p++)for(v=0;v<R[p].length;v++)z(R[p][v])}1===R.length?R=R[0]:L="Multi"+L;var G={type:"Feature",geometry:{type:L,coordinates:R},properties:this.properties};return"id"in this&&(G.id=this.id),G};var ES=s1,a1=CS;function CS(l,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(SS,this,s),this.length=this._features.length}function SS(l,s,u){15===l?s.version=u.readVarint():1===l?s.name=u.readString():5===l?s.extent=u.readVarint():2===l?s._features.push(u.pos):3===l?s._keys.push(u.readString()):4===l&&s._values.push(function(p){for(var v=null,E=p.readVarint()+p.pos;p.pos<E;){var I=p.readVarint()>>3;v=1===I?p.readString():2===I?p.readFloat():3===I?p.readDouble():4===I?p.readVarint64():5===I?p.readVarint():6===I?p.readSVarint():7===I?p.readBoolean():null}return v}(u))}CS.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var s=this._pbf.readVarint()+this._pbf.pos;return new ES(this._pbf,s,this.extent,this._keys,this._values)};var EM=a1;function IS(l,s,u){if(3===l){var p=new EM(u,u.readVarint()+u.pos);p.length&&(s[p.name]=p)}}var l1=Nc.VectorTile=function(l,s){this.layers=l.readFields(IS,{},s)},J_=Nc.VectorTileFeature=s1;function r0(l,s,u,p){const v=[],E=0===p?(I,M,R,L,z,V)=>{I.push(new K(V,R+(V-M)/(L-M)*(z-R)))}:(I,M,R,L,z,V)=>{I.push(new K(M+(V-R)/(z-R)*(L-M),V))};for(const I of l){const M=[];for(const R of I){if(R.length<=2)continue;const L=[];for(let G=0;G<R.length-1;G++){const X=R[G].x,oe=R[G].y,ve=R[G+1].x,Ue=R[G+1].y,ft=0===p?X:oe,Pt=0===p?ve:Ue;ft<s?Pt>s&&E(L,X,oe,ve,Ue,s):ft>u?Pt<u&&E(L,X,oe,ve,Ue,u):L.push(R[G]),Pt<s&&ft>=s&&E(L,X,oe,ve,Ue,s),Pt>u&&ft<=u&&E(L,X,oe,ve,Ue,u)}let z=R[R.length-1];const V=0===p?z.x:z.y;V>=s&&V<=u&&L.push(z),L.length&&(z=L[L.length-1],L[0].x===z.x&&L[0].y===z.y||L.push(L[0]),M.push(L))}M.length&&v.push(M)}return v}Nc.VectorTileLayer=a1;const CM=J_.types,c1=Math.pow(2,13);function Im(l,s,u,p,v,E,I,M){l.emplaceBack((s<<1)+I,(u<<1)+E,(Math.floor(p*c1)<<1)+v,Math.round(M))}function ev(l,s,u){l.emplaceBack(s.x,s.y,s.z,16384*u[0],16384*u[1],16384*u[2])}class Bg{constructor(){this.acc=new K(0,0),this.polyCount=[]}startRing(s){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new K(s.x,s.y),this.max=new K(s.x,s.y))}append(s,u){this.currentPolyCount.edges++,this.acc._add(s);const p=this.min,v=this.max;s.x<p.x?p.x=s.x:s.x>v.x&&(v.x=s.x),s.y<p.y?p.y=s.y:s.y>v.y&&(v.y=s.y),((0===s.x||s.x===Er)&&s.x===u.x)!=((0===s.y||s.y===Er)&&s.y===u.y)&&this.processBorderOverlap(s,u),u.x<0!=s.x<0&&this.addBorderIntersection(0,lo(u.y,s.y,(0-u.x)/(s.x-u.x))),u.x>Er!=s.x>Er&&this.addBorderIntersection(1,lo(u.y,s.y,(Er-u.x)/(s.x-u.x))),u.y<0!=s.y<0&&this.addBorderIntersection(2,lo(u.x,s.x,(0-u.y)/(s.y-u.y))),u.y>Er!=s.y>Er&&this.addBorderIntersection(3,lo(u.x,s.x,(Er-u.y)/(s.y-u.y)))}addBorderIntersection(s,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[s];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(s,u){if(s.x===u.x){if(s.y===u.y)return;const p=0===s.x?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,s.y)}else{const p=0===s.y?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,s.x)}}centroid(){const s=this.polyCount.reduce((u,p)=>u+p.edges,0);return 0!==s?this.acc.div(s)._round():new K(0,0)}span(){return new K(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((s,u)=>s+ +(u[0]!==Number.MAX_VALUE),0)}}class tv{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.layoutVertexArray=new Hn,this.centroidVertexArray=new bh,this.indexArray=new dr,this.programConfigurations=new vu(s.layers,s.zoom),this.segments=new Js,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=s.enableTerrain}populate(s,u,p,v){this.features=[],this.hasPattern=r1("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(E){const I=Math.exp(Math.PI*(1-E.y/(1<<E.z)*2));return 80150034*I/(I*I+1)/Er/(1<<E.z)}(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:E,id:I,index:M,sourceLayerIndex:R}of s){const L=this.layers[0]._featureFilter.needGeometry,z=ef(E,L);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),z,p))continue;const V={id:I,sourceLayerIndex:R,index:M,geometry:L?z.geometry:Jh(E,p,v),properties:E.properties,type:E.type,patterns:{}},G=this.layoutVertexArray.length;this.hasPattern?this.features.push(n0("fill-extrusion",this.layers,V,this.zoom,u)):this.addFeature(V,V.geometry,M,p,{},u.availableImages,v),u.featureIndex.insert(E,V.geometry,M,R,this.index,G)}this.sortBorders()}addFeatures(s,u,p,v,E){for(const I of this.features){const{geometry:M}=I;this.addFeature(I,M,I.index,u,p,v,E)}this.sortBorders()}update(s,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,wM),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,xM.members,!0))),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,wS.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,p,v,E,I,M){const R=[new K(0,0),new K(Er,Er)],L=M.projection,z="globe"===L.name,V=this.enableTerrain&&!z?new Bg:null,G="Polygon"===CM[s.type];z&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new di);const X=n1(u,500);for(let ft=X.length-1;ft>=0;ft--){const Pt=X[ft];(0===Pt.length||(oe=Pt[0]).every(ht=>ht.x<=0)||oe.every(ht=>ht.x>=Er)||oe.every(ht=>ht.y<=0)||oe.every(ht=>ht.y>=Er))&&X.splice(ft,1)}var oe;let ve;if(z)ve=o0(X,R,v);else{ve=[];for(const ft of X)ve.push({polygon:ft,bounds:R})}const Ue=G?this.edgeRadius:0;for(const{polygon:ft,bounds:Pt}of ve){let ht=0,Tt=0;for(const zt of ft)G&&!zt[0].equals(zt[zt.length-1])&&zt.push(zt[0]),Tt+=G?zt.length-1:zt.length;const Ft=this.segments.prepareSegment((G?5:4)*Tt,this.layoutVertexArray,this.indexArray);if(G){const zt=[],En=[];ht=Ft.vertexLength;for(const $n of ft){let ci,In;$n.length&&$n!==ft[0]&&En.push(zt.length/2),ci=$n[1].sub($n[0])._perp()._unit();for(let Wn=1;Wn<$n.length;Wn++){const Yn=$n[Wn],ii=$n[Wn===$n.length-1?1:Wn+1];let{x:_i,y:Ln}=Yn;if(Ue){In=ii.sub(Yn)._perp()._unit();const Oi=ci.add(In)._unit(),Wi=Ue*Math.min(4,1/(ci.x*Oi.x+ci.y*Oi.y));_i+=Wi*Oi.x,Ln+=Wi*Oi.y,ci=In}Im(this.layoutVertexArray,_i,Ln,0,0,1,1,0),Ft.vertexLength++,zt.push(Yn.x,Yn.y),z&&ev(this.layoutVertexExtArray,L.projectTilePoint(_i,Ln,v),L.upVector(v,_i,Ln))}}const pn=t0(zt,En);for(let $n=0;$n<pn.length;$n+=3)this.indexArray.emplaceBack(ht+pn[$n],ht+pn[$n+2],ht+pn[$n+1]),Ft.primitiveLength++}for(const zt of ft){V&&zt.length&&V.startRing(zt[0]);let En,pn,$n,ci=zt.length>4&&Tm(zt[zt.length-2],zt[0],zt[1]),In=Ue?DS(zt[zt.length-2],zt[0],zt[1],Ue):0;pn=zt[1].sub(zt[0])._perp()._unit();let Wn=!0;for(let Yn=1,ii=0;Yn<zt.length;Yn++){let _i=zt[Yn-1],Ln=zt[Yn];const Oi=zt[Yn===zt.length-1?1:Yn+1];if(V&&G&&V.currentPolyCount.top++,d1(Ln,_i,Pt)){Ue&&(pn=Oi.sub(Ln)._perp()._unit(),Wn=!Wn);continue}V&&V.append(Ln,_i);const Wi=Ln.sub(_i)._perp(),Li=Wi.x/(Math.abs(Wi.x)+Math.abs(Wi.y)),Zr=Wi.y>0?1:0,yi=_i.dist(Ln);if(ii+yi>32768&&(ii=0),Ue){$n=Oi.sub(Ln)._perp()._unit();let Gr=u1(_i,Ln,Oi,TS(pn,$n),Ue);isNaN(Gr)&&(Gr=0);const Pr=Ln.sub(_i)._unit();_i=_i.add(Pr.mult(In))._round(),Ln=Ln.add(Pr.mult(-Gr))._round(),In=Gr,pn=$n}const xr=Ft.vertexLength,Kr=zt.length>4&&Tm(_i,Ln,Oi);let Oo=nv(ii,ci,Wn);if(Im(this.layoutVertexArray,_i.x,_i.y,Li,Zr,0,0,Oo),Im(this.layoutVertexArray,_i.x,_i.y,Li,Zr,0,1,Oo),ii+=yi,Oo=nv(ii,Kr,!Wn),ci=Kr,Im(this.layoutVertexArray,Ln.x,Ln.y,Li,Zr,0,0,Oo),Im(this.layoutVertexArray,Ln.x,Ln.y,Li,Zr,0,1,Oo),Ft.vertexLength+=4,this.indexArray.emplaceBack(xr+0,xr+1,xr+2),this.indexArray.emplaceBack(xr+1,xr+3,xr+2),Ft.primitiveLength+=2,Ue){const Gr=ht+(1===Yn?zt.length-2:Yn-2),Pr=1===Yn?ht:Gr+1;if(this.indexArray.emplaceBack(xr+1,Gr,xr+3),this.indexArray.emplaceBack(Gr,Pr,xr+3),Ft.primitiveLength+=2,void 0===En&&(En=xr),!d1(Oi,zt[Yn],Pt)){const Us=Yn===zt.length-1?En:Ft.vertexLength;this.indexArray.emplaceBack(xr+2,xr+3,Us),this.indexArray.emplaceBack(xr+3,Us+1,Us),this.indexArray.emplaceBack(xr+3,Pr,Us+1),Ft.primitiveLength+=3}Wn=!Wn}if(z){const Gr=this.layoutVertexExtArray,Pr=L.projectTilePoint(_i.x,_i.y,v),Us=L.projectTilePoint(Ln.x,Ln.y,v),Qr=L.upVector(v,_i.x,_i.y),Xr=L.upVector(v,Ln.x,Ln.y);ev(Gr,Pr,Qr),ev(Gr,Pr,Qr),ev(Gr,Us,Xr),ev(Gr,Us,Xr)}}G&&(ht+=zt.length-1)}}if(V&&V.polyCount.length>0){if(V.borders){V.vertexArrayOffset=this.centroidVertexArray.length;const ft=V.borders,Pt=this.featuresOnBorder.push(V)-1;for(let ht=0;ht<4;ht++)ft[ht][0]!==Number.MAX_VALUE&&this.borders[ht].push(Pt)}this.encodeCentroid(V.borders?void 0:V.centroid(),V)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,E,I,v)}sortBorders(){for(let s=0;s<4;s++)this.borders[s].sort((u,p)=>this.featuresOnBorder[u].borders[s][0]-this.featuresOnBorder[p].borders[s][0])}encodeCentroid(s,u,p=!0){let v,E;if(s)if(0!==s.y){const M=u.span()._mult(this.tileToMeter);v=(Math.max(s.x,1)<<3)+Math.min(7,Math.round(M.x/10)),E=(Math.max(s.y,1)<<3)+Math.min(7,Math.round(M.y/10))}else v=Math.ceil(7*(s.x+450)),E=0;else v=0,E=+p;let I=p?this.centroidVertexArray.length:u.vertexArrayOffset;for(const M of u.polyCount){p&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*M.edges+M.top);for(let R=0;R<M.top;R++)this.centroidVertexArray.emplace(I++,v,E);for(let R=0;R<2*M.edges;R++)this.centroidVertexArray.emplace(I++,0,E),this.centroidVertexArray.emplace(I++,v,E)}}}function TS(l,s){const u=l.add(s)._unit();return l.x*u.x+l.y*u.y}function DS(l,s,u,p){const v=s.sub(l)._perp()._unit(),E=u.sub(s)._perp()._unit();return u1(l,s,u,TS(v,E),p)}function u1(l,s,u,p,v){const E=Math.sqrt(1-p*p);return Math.min(l.dist(s)/3,s.dist(u)/3,v*E/p)}function d1(l,s,u){return l.x<u[0].x&&s.x<u[0].x||l.x>u[1].x&&s.x>u[1].x||l.y<u[0].y&&s.y<u[0].y||l.y>u[1].y&&s.y>u[1].y}function Tm(l,s,u){if(l.x<0||l.x>=Er||s.x<0||s.x>=Er||u.x<0||u.x>=Er)return!1;const p=u.sub(s),v=p.perp(),E=l.sub(s);return(p.x*E.x+p.y*E.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(E.x*E.x+E.y*E.y))>-.866&&v.x*E.x+v.y*E.y<0}function nv(l,s,u){const p=s?2|l:-3&l;return u?1|p:-2&p}function h1(){const l=Math.PI/32,s=Math.tan(l),u=Yh;return u*Math.sqrt(1+2*s*s)-u}function o0(l,s,u){const p=1<<u.z,v=Yd(u.x/p),E=Yd((u.x+1)/p),I=Zc(u.y/p),M=Zc((u.y+1)/p);return function(R,L,z,V,G=0,X){const oe=[];if(!R.length||!z||!V)return oe;const ve=(zt,En)=>{for(const pn of zt)oe.push({polygon:pn,bounds:En})},Ue=Math.ceil(Math.log2(z)),ft=Math.ceil(Math.log2(V)),Pt=Ue-ft,ht=[];for(let zt=0;zt<Math.abs(Pt);zt++)ht.push(Pt>0?0:1);for(let zt=0;zt<Math.min(Ue,ft);zt++)ht.push(0),ht.push(1);let Tt=R;if(Tt=r0(Tt,L[0].y-G,L[1].y+G,1),Tt=r0(Tt,L[0].x-G,L[1].x+G,0),!Tt.length)return oe;const Ft=[];for(ht.length?Ft.push({polygons:Tt,bounds:L,depth:0}):ve(Tt,L);Ft.length;){const zt=Ft.pop(),En=zt.depth,pn=ht[En],$n=zt.bounds[0],ci=zt.bounds[1],In=0===pn?$n.x:$n.y,Wn=0===pn?ci.x:ci.y,Yn=X?X(pn,In,Wn):.5*(In+Wn),ii=r0(zt.polygons,In-G,Yn+G,pn),_i=r0(zt.polygons,Yn-G,Wn+G,pn);if(ii.length){const Ln=[$n,new K(0===pn?Yn:ci.x,1===pn?Yn:ci.y)];ht.length>En+1?Ft.push({polygons:ii,bounds:Ln,depth:En+1}):ve(ii,Ln)}if(_i.length){const Ln=[new K(0===pn?Yn:$n.x,1===pn?Yn:$n.y),ci];ht.length>En+1?Ft.push({polygons:_i,bounds:Ln,depth:En+1}):ve(_i,Ln)}}return oe}(l,s,Math.ceil((E-v)/11.25),Math.ceil((I-M)/11.25),1,(R,L,z)=>{if(0===R)return.5*(L+z);{const V=Zc((u.y+L/Er)/p);return(Uf(.5*(Zc((u.y+z/Er)/p)+V))*p-u.y)*Er}})}wi(tv,"FillExtrusionBucket",{omit:["layers","features"]}),wi(Bg,"PartMetadata");const s0=new Et({"fill-extrusion-edge-radius":new pe(Mn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var SM={paint:new Et({"fill-extrusion-opacity":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ye(Mn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ye(Mn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ye(Mn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ye(Mn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new pe(Mn["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:s0};function AS(l,s,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[l*p-2*Math.PI*6378137/2,s*p-2*Math.PI*6378137/2]}class a0{constructor(s,u,p){this.z=s,this.x=u,this.y=p,this.key=iv(0,s,s,u,p)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u){const p=(I=this.y,M=this.z,R=AS(256*(E=this.x),256*(I=Math.pow(2,M)-I-1),M),L=AS(256*(E+1),256*(I+1),M),R[0]+","+R[1]+","+L[0]+","+L[1]),v=function(E,I,M){let R,L="";for(let z=E;z>0;z--)R=1<<z-1,L+=(I&R?1:0)+(M&R?2:0);return L}(this.z,this.x,this.y);var E,I,M,R,L;return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===u?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",v).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class MS{constructor(s,u){this.wrap=s,this.canonical=u,this.key=iv(s,u.z,u.z,u.x,u.y)}}class xu{constructor(s,u,p,v,E){this.overscaledZ=s,this.wrap=u,this.canonical=new a0(p,+v,+E),this.key=0===u&&s===p?this.canonical.key:iv(u,s,p,v,E)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const u=this.canonical.z-s;return s>this.canonical.z?new xu(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xu(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u=!0){if(this.overscaledZ===s&&u)return this.key;if(s>this.canonical.z)return iv(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-s;return iv(this.wrap*+u,s,s,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const u=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new xu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,v=2*this.canonical.y;return[new xu(u,this.wrap,u,p,v),new xu(u,this.wrap,u,p+1,v),new xu(u,this.wrap,u,p,v+1),new xu(u,this.wrap,u,p+1,v+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new xu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new xu(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new MS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function iv(l,s,u,p,v){const E=1<<Math.min(u,22);let I=E*(v%E)+p%E;return l&&u<22&&(I+=E*E*((l<0?-2*l-1:2*l)%(1<<2*(22-u)))),16*(32*I+u)+(s-u)}wi(a0,"CanonicalTileID"),wi(xu,"OverscaledTileID",{omit:["projMatrix"]});class Dm extends K{constructor(s,u,p){super(s,u),this.z=p}}function Mp(l,s){return l.x*s.x+l.y*s.y}function l0(l,s){if(1===l.length){let u=0;const p=s[u++];let v;for(;!v||p.equals(v);)if(v=s[u++],!v)return 1/0;for(;u<s.length;u++){const E=s[u],I=l[0],M=v.sub(p),R=E.sub(p),L=I.sub(p),z=Mp(M,M),V=Mp(M,R),G=Mp(R,R),X=Mp(L,M),oe=Mp(L,R),ve=z*G-V*V,Ue=(G*X-V*oe)/ve,ft=(z*oe-V*X)/ve,Pt=p.z*(1-Ue-ft)+v.z*Ue+E.z*ft;if(isFinite(Pt))return Pt}return 1/0}{let u=1/0;for(const p of s)u=Math.min(u,p.z);return u}}function c0(l,s,u,p,v,E,I,M){const R=I*v.getElevationAt(l,s,!0,!0),L=0!==E[0],z=L?0===E[1]?I*(E[0]/7-450):I*function(V,G,X){const oe=Math.floor(G[0]/8),ve=Math.floor(G[1]/8),Ue=10*(G[0]-8*oe),ft=10*(G[1]-8*ve),Pt=V.getElevationAt(oe,ve,!0,!0),ht=V.getMeterToDEM(X),Tt=Math.floor(.5*(Ue*ht-1)),Ft=Math.floor(.5*(ft*ht-1)),zt=V.tileCoordToPixel(oe,ve),En=2*Tt+1,pn=2*Ft+1,$n=(Wi=En,Li=pn,[(_i=V).getElevationAtPixel(Ln=zt.x-Tt,Oi=zt.y-Ft,!0),_i.getElevationAtPixel(Ln+Li,Oi,!0),_i.getElevationAtPixel(Ln,Oi+Li,!0),_i.getElevationAtPixel(Ln+Wi,Oi+Li,!0)]),ci=Math.abs($n[0]-$n[1]),In=Math.abs($n[2]-$n[3]),Wn=Math.abs($n[0]-$n[2])+Math.abs($n[1]-$n[3]),Yn=Math.min(.25,.5*ht*(ci+In)/En),ii=Math.min(.25,.5*ht*Wn/pn);var _i,Ln,Oi,Wi,Li;return Pt+Math.max(Yn*Ue,ii*ft)}(v,E,M):R;return{base:R+(0===u)?-1:u,top:L?Math.max(z+p,R+u+2):R+p}}const IM=Kt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:TM}=IM,f1=Kt([{name:"a_packed",components:4,type:"Float32"}]),{members:kS}=f1,Am=J_.types,PS=Math.cos(Math.PI/180*37.5);class rv{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Dn,this.layoutVertexArray2=new li,this.indexArray=new dr,this.programConfigurations=new vu(s.layers,s.zoom),this.segments=new Js,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,p,v){this.hasPattern=r1("line",this.layers,u);const E=this.layers[0].layout.get("line-sort-key"),I=[];for(const{feature:z,id:V,index:G,sourceLayerIndex:X}of s){const oe=this.layers[0]._featureFilter.needGeometry,ve=ef(z,oe);if(!this.layers[0]._featureFilter.filter(new $(this.zoom),ve,p))continue;const Ue=E?E.evaluate(ve,{},p):void 0,ft={id:V,properties:z.properties,type:z.type,sourceLayerIndex:X,index:G,geometry:oe?ve.geometry:Jh(z,p,v),patterns:{},sortKey:Ue};I.push(ft)}E&&I.sort((z,V)=>z.sortKey-V.sortKey);const{lineAtlas:M,featureIndex:R}=u,L=this.addConstantDashes(M);for(const z of I){const{geometry:V,index:G,sourceLayerIndex:X}=z;if(L&&this.addFeatureDashes(z,M),this.hasPattern){const oe=n0("line",this.layers,z,this.zoom,u);this.patternFeatures.push(oe)}else this.addFeature(z,V,G,p,M.positions,u.availableImages);R.insert(s[G].feature,V,G,X,this.index)}}addConstantDashes(s){let u=!1;for(const p of this.layers){const v=p.paint.get("line-dasharray").value,E=p.layout.get("line-cap").value;if("constant"!==v.kind||"constant"!==E.kind)u=!0;else{const I=E.value,M=v.value;if(!M)continue;s.addDash(M,I)}}return u}addFeatureDashes(s,u){const p=this.zoom;for(const v of this.layers){const E=v.paint.get("line-dasharray").value,I=v.layout.get("line-cap").value;if("constant"===E.kind&&"constant"===I.kind)continue;let M,R;if("constant"===E.kind){if(M=E.value,!M)continue}else M=E.evaluate({zoom:p},s);R="constant"===I.kind?I.value:I.evaluate({zoom:p},s),u.addDash(M,R),s.patterns[v.id]=u.getKey(M,R)}}update(s,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,p,v)}addFeatures(s,u,p,v,E){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,u,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,kS)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,TM),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,p,v,E,I){const M=this.layers[0].layout,R=M.get("line-join").evaluate(s,{}),L=M.get("line-cap").evaluate(s,{}),z=M.get("line-miter-limit"),V=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const G of u)this.addLine(G,s,R,L,z,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,E,I,v)}addLine(s,u,p,v,E,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ft=0;ft<s.length-1;ft++)this.totalDistance+=s[ft].dist(s[ft+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const M="Polygon"===Am[u.type];let R=s.length;for(;R>=2&&s[R-1].equals(s[R-2]);)R--;let L=0;for(;L<R-1&&s[L].equals(s[L+1]);)L++;if(R<(M?3:2))return;"bevel"===p&&(E=1.05);const z=this.overscaling<=16?15*Er/(512*this.overscaling):0,V=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let G,X,oe,ve,Ue;this.e1=this.e2=-1,M&&(G=s[R-2],Ue=s[L].sub(G)._unit()._perp());for(let ft=L;ft<R;ft++){if(oe=ft===R-1?M?s[L+1]:void 0:s[ft+1],oe&&s[ft].equals(oe))continue;Ue&&(ve=Ue),G&&(X=G),G=s[ft],Ue=oe?oe.sub(G)._unit()._perp():ve,ve=ve||Ue;let Pt=ve.add(Ue);0===Pt.x&&0===Pt.y||Pt._unit();const ht=ve.x*Ue.x+ve.y*Ue.y,Tt=Pt.x*Ue.x+Pt.y*Ue.y,Ft=0!==Tt?1/Tt:1/0,zt=2*Math.sqrt(2-2*Tt),En=Tt<PS&&X&&oe,pn=ve.x*Ue.y-ve.y*Ue.x>0;if(En&&ft>L){const In=G.dist(X);if(In>2*z){const Wn=G.sub(G.sub(X)._mult(z/In)._round());this.updateDistance(X,Wn),this.addCurrentVertex(Wn,ve,0,0,V),X=Wn}}const $n=X&&oe;let ci=$n?p:M?"butt":v;if($n&&"round"===ci&&(Ft<I?ci="miter":Ft<=2&&(ci="fakeround")),"miter"===ci&&Ft>E&&(ci="bevel"),"bevel"===ci&&(Ft>2&&(ci="flipbevel"),Ft<E&&(ci="miter")),X&&this.updateDistance(X,G),"miter"===ci)Pt._mult(Ft),this.addCurrentVertex(G,Pt,0,0,V);else if("flipbevel"===ci){if(Ft>100)Pt=Ue.mult(-1);else{const In=Ft*ve.add(Ue).mag()/ve.sub(Ue).mag();Pt._perp()._mult(In*(pn?-1:1))}this.addCurrentVertex(G,Pt,0,0,V),this.addCurrentVertex(G,Pt.mult(-1),0,0,V)}else if("bevel"===ci||"fakeround"===ci){const In=-Math.sqrt(Ft*Ft-1),Wn=pn?In:0,Yn=pn?0:In;if(X&&this.addCurrentVertex(G,ve,Wn,Yn,V),"fakeround"===ci){const ii=Math.round(180*zt/Math.PI/20);for(let _i=1;_i<ii;_i++){let Ln=_i/ii;if(.5!==Ln){const Wi=Ln-.5;Ln+=Ln*Wi*(Ln-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*Wi*Wi+(.848013+ht*(.215638*ht-1.06021)))}const Oi=Ue.sub(ve)._mult(Ln)._add(ve)._unit()._mult(pn?-1:1);this.addHalfVertex(G,Oi.x,Oi.y,!1,pn,0,V)}}oe&&this.addCurrentVertex(G,Ue,-Wn,-Yn,V)}else if("butt"===ci)this.addCurrentVertex(G,Pt,0,0,V);else if("square"===ci){const In=X?1:-1;X||this.addCurrentVertex(G,Pt,In,In,V),this.addCurrentVertex(G,Pt,0,0,V),X&&this.addCurrentVertex(G,Pt,In,In,V)}else"round"===ci&&(X&&(this.addCurrentVertex(G,ve,0,0,V),this.addCurrentVertex(G,ve,1,1,V,!0)),oe&&(this.addCurrentVertex(G,Ue,-1,-1,V,!0),this.addCurrentVertex(G,Ue,0,0,V)));if(En&&ft<R-1){const In=G.dist(oe);if(In>2*z){const Wn=G.add(oe.sub(G)._mult(z/In)._round());this.updateDistance(G,Wn),this.addCurrentVertex(Wn,Ue,0,0,V),G=Wn}}}}addCurrentVertex(s,u,p,v,E,I=!1){const M=u.y*v-u.x,R=-u.y-u.x*v;this.addHalfVertex(s,u.x+u.y*p,u.y-u.x*p,I,!1,p,E),this.addHalfVertex(s,M,R,I,!0,-v,E)}addHalfVertex({x:s,y:u},p,v,E,I,M,R){this.layoutVertexArray.emplaceBack((s<<1)+(E?1:0),(u<<1)+(I?1:0),Math.round(63*p)+128,Math.round(63*v)+128,1+(0===M?0:M<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const L=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),R.primitiveLength++),I?this.e2=L:this.e1=L}updateScaledDistance(){if(this.lineClips){const s=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=s*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(s,u){this.distance+=s.dist(u),this.updateScaledDistance()}}wi(rv,"LineBucket",{omit:["layers","patternFeatures"]});const DM=new Et({"line-cap":new Ye(Mn.layout_line["line-cap"]),"line-join":new Ye(Mn.layout_line["line-join"]),"line-miter-limit":new pe(Mn.layout_line["line-miter-limit"]),"line-round-limit":new pe(Mn.layout_line["line-round-limit"]),"line-sort-key":new Ye(Mn.layout_line["line-sort-key"])});var AM={paint:new Et({"line-opacity":new Ye(Mn.paint_line["line-opacity"]),"line-color":new Ye(Mn.paint_line["line-color"]),"line-translate":new pe(Mn.paint_line["line-translate"]),"line-translate-anchor":new pe(Mn.paint_line["line-translate-anchor"]),"line-width":new Ye(Mn.paint_line["line-width"]),"line-gap-width":new Ye(Mn.paint_line["line-gap-width"]),"line-offset":new Ye(Mn.paint_line["line-offset"]),"line-blur":new Ye(Mn.paint_line["line-blur"]),"line-dasharray":new Ye(Mn.paint_line["line-dasharray"]),"line-pattern":new Ye(Mn.paint_line["line-pattern"]),"line-gradient":new bt(Mn.paint_line["line-gradient"]),"line-trim-offset":new pe(Mn.paint_line["line-trim-offset"])}),layout:DM};const ov=new class extends Ye{possiblyEvaluate(l,s){return s=new $(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(l,s)}evaluate(l,s,u,p){return s=ae({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(l,s,u,p)}}(AM.paint.properties["line-width"].specification);function RS(l,s){return s>0?s+2*l:l}ov.useIntegerZoom=!0;const OS=Kt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),LS=Kt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),NS=Kt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Kt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p1=Kt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),FS=Kt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Kt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sv=Kt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),av=Kt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Kt([{name:"triangle",components:3,type:"Uint16"}]),Kt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Kt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Kt([{type:"Float32",name:"offsetX"}]),Kt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ic=24;const xd=128;function zg(l,s){const{expression:u}=s;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new $(l+1))};if("source"===u.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:v}=u;let E=0;for(;E<p.length&&p[E]<=l;)E++;E=Math.max(0,E-1);let I=E;for(;I<p.length&&p[I]<l+1;)I++;I=Math.min(p.length-1,I);const M=p[E],R=p[I];return"composite"===u.kind?{kind:"composite",minZoom:M,maxZoom:R,interpolationType:v}:{kind:"camera",minZoom:M,maxZoom:R,minSize:u.evaluate(new $(M)),maxSize:u.evaluate(new $(R)),interpolationType:v}}}function lv(l,{uSize:s,uSizeT:u},{lowerSize:p,upperSize:v}){return"source"===l.kind?p/xd:"composite"===l.kind?lo(p/xd,v/xd,u):s}function kp(l,s){let u=0,p=0;if("constant"===l.kind)p=l.layoutSize;else if("source"!==l.kind){const{interpolationType:v,minZoom:E,maxZoom:I}=l,M=v?Y(Bs.interpolationFactor(v,s,E,I),0,1):0;"camera"===l.kind?p=lo(l.minSize,l.maxSize,M):u=M}return{uSizeT:u,uSize:p}}var cv=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:xd,evaluateSizeForFeature:lv,evaluateSizeForZoom:kp,getSizeData:zg});function MM(l,s,u){return l.sections.forEach(p=>{p.text=function(v,E,I){const M=E.layout.get("text-transform").evaluate(I,{});return"uppercase"===M?v=v.toLocaleUpperCase():"lowercase"===M&&(v=v.toLocaleLowerCase()),F.applyArabicShaping&&(v=F.applyArabicShaping(v)),v}(p.text,s,u)}),l}const $g={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function kM(l){return"\ufe36"===l||"\ufe48"===l||"\ufe38"===l||"\ufe44"===l||"\ufe42"===l||"\ufe3e"===l||"\ufe3c"===l||"\ufe3a"===l||"\ufe18"===l||"\ufe40"===l||"\ufe10"===l||"\ufe13"===l||"\ufe14"===l||"\uff40"===l||"\uffe3"===l||"\ufe11"===l||"\ufe12"===l}function PM(l){return"\ufe35"===l||"\ufe47"===l||"\ufe37"===l||"\ufe43"===l||"\ufe41"===l||"\ufe3d"===l||"\ufe3b"===l||"\ufe39"===l||"\ufe17"===l||"\ufe3f"===l}var BS=Rs,m1=function(l,s,u,p,v){var E,I,M=8*v-p-1,R=(1<<M)-1,L=R>>1,z=-7,V=u?v-1:0,G=u?-1:1,X=l[s+V];for(V+=G,E=X&(1<<-z)-1,X>>=-z,z+=M;z>0;E=256*E+l[s+V],V+=G,z-=8);for(I=E&(1<<-z)-1,E>>=-z,z+=p;z>0;I=256*I+l[s+V],V+=G,z-=8);if(0===E)E=1-L;else{if(E===R)return I?NaN:1/0*(X?-1:1);I+=Math.pow(2,p),E-=L}return(X?-1:1)*I*Math.pow(2,E-p)},g1=function(l,s,u,p,v,E){var I,M,R,L=8*E-v-1,z=(1<<L)-1,V=z>>1,G=23===v?Math.pow(2,-24)-Math.pow(2,-77):0,X=p?0:E-1,oe=p?1:-1,ve=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(M=isNaN(s)?1:0,I=z):(I=Math.floor(Math.log(s)/Math.LN2),s*(R=Math.pow(2,-I))<1&&(I--,R*=2),(s+=I+V>=1?G/R:G*Math.pow(2,1-V))*R>=2&&(I++,R/=2),I+V>=z?(M=0,I=z):I+V>=1?(M=(s*R-1)*Math.pow(2,v),I+=V):(M=s*Math.pow(2,V-1)*Math.pow(2,v),I=0));v>=8;l[u+X]=255&M,X+=oe,M/=256,v-=8);for(I=I<<v|M,L+=v;L>0;l[u+X]=255&I,X+=oe,I/=256,L-=8);l[u+X-oe]|=128*ve};function Rs(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}Rs.Varint=0,Rs.Fixed64=1,Rs.Bytes=2,Rs.Fixed32=5;var uv=4294967296,Mm=1/uv,zS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function jf(l){return l.type===Rs.Bytes?l.readVarint()+l.pos:l.pos+1}function $S(l,s,u){var p=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));u.realloc(p);for(var v=u.pos-1;v>=l;v--)u.buf[v+p]=u.buf[v]}function _1(l,s){for(var u=0;u<l.length;u++)s.writeVarint(l[u])}function RM(l,s){for(var u=0;u<l.length;u++)s.writeSVarint(l[u])}function Vg(l,s){for(var u=0;u<l.length;u++)s.writeFloat(l[u])}function u0(l,s){for(var u=0;u<l.length;u++)s.writeDouble(l[u])}function v1(l,s){for(var u=0;u<l.length;u++)s.writeBoolean(l[u])}function VS(l,s){for(var u=0;u<l.length;u++)s.writeFixed32(l[u])}function US(l,s){for(var u=0;u<l.length;u++)s.writeSFixed32(l[u])}function jS(l,s){for(var u=0;u<l.length;u++)s.writeFixed64(l[u])}function km(l,s){for(var u=0;u<l.length;u++)s.writeSFixed64(l[u])}function d0(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+16777216*l[s+3]}function Ug(l,s,u){l[u]=s,l[u+1]=s>>>8,l[u+2]=s>>>16,l[u+3]=s>>>24}function GS(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+(l[s+3]<<24)}Rs.prototype={destroy:function(){this.buf=null},readFields:function(l,s,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),v=p>>3,E=this.pos;this.type=7&p,l(v,s,this),this.pos===E&&this.skip(p)}return s},readMessage:function(l,s){return this.readFields(l,s,this.readVarint()+this.pos)},readFixed32:function(){var l=d0(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=GS(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=d0(this.buf,this.pos)+d0(this.buf,this.pos+4)*uv;return this.pos+=8,l},readSFixed64:function(){var l=d0(this.buf,this.pos)+GS(this.buf,this.pos+4)*uv;return this.pos+=8,l},readFloat:function(){var l=m1(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=m1(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var s,u,p=this.buf;return s=127&(u=p[this.pos++]),u<128?s:(s|=(127&(u=p[this.pos++]))<<7,u<128?s:(s|=(127&(u=p[this.pos++]))<<14,u<128?s:(s|=(127&(u=p[this.pos++]))<<21,u<128?s:function(v,E,I){var M,R,L=I.buf;if(M=(112&(R=L[I.pos++]))>>4,R<128||(M|=(127&(R=L[I.pos++]))<<3,R<128)||(M|=(127&(R=L[I.pos++]))<<10,R<128)||(M|=(127&(R=L[I.pos++]))<<17,R<128)||(M|=(127&(R=L[I.pos++]))<<24,R<128)||(M|=(1&(R=L[I.pos++]))<<31,R<128))return function dv(l,s,u){return u?4294967296*s+(l>>>0):4294967296*(s>>>0)+(l>>>0)}(v,M,E);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(u=p[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,s=this.pos;return this.pos=l,l-s>=12&&zS?zS.decode(this.buf.subarray(s,l)):function(u,p,v){for(var E="",I=p;I<v;){var M,R,L,z=u[I],V=null,G=z>239?4:z>223?3:z>191?2:1;if(I+G>v)break;1===G?z<128&&(V=z):2===G?128==(192&(M=u[I+1]))&&(V=(31&z)<<6|63&M)<=127&&(V=null):3===G?(R=u[I+2],128==(192&(M=u[I+1]))&&128==(192&R)&&((V=(15&z)<<12|(63&M)<<6|63&R)<=2047||V>=55296&&V<=57343)&&(V=null)):4===G&&(R=u[I+2],L=u[I+3],128==(192&(M=u[I+1]))&&128==(192&R)&&128==(192&L)&&((V=(15&z)<<18|(63&M)<<12|(63&R)<<6|63&L)<=65535||V>=1114112)&&(V=null)),null===V?(V=65533,G=1):V>65535&&(V-=65536,E+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),E+=String.fromCharCode(V),I+=G}return E}(this.buf,s,l)},readBytes:function(){var l=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,l);return this.pos=l,s},readPackedVarint:function(l,s){if(this.type!==Rs.Bytes)return l.push(this.readVarint(s));var u=jf(this);for(l=l||[];this.pos<u;)l.push(this.readVarint(s));return l},readPackedSVarint:function(l){if(this.type!==Rs.Bytes)return l.push(this.readSVarint());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==Rs.Bytes)return l.push(this.readBoolean());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==Rs.Bytes)return l.push(this.readFloat());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==Rs.Bytes)return l.push(this.readDouble());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==Rs.Bytes)return l.push(this.readFixed32());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==Rs.Bytes)return l.push(this.readSFixed32());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==Rs.Bytes)return l.push(this.readFixed64());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==Rs.Bytes)return l.push(this.readSFixed64());var s=jf(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed64());return l},skip:function(l){var s=7&l;if(s===Rs.Varint)for(;this.buf[this.pos++]>127;);else if(s===Rs.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Rs.Fixed32)this.pos+=4;else{if(s!==Rs.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(l,s){this.writeVarint(l<<3|s)},realloc:function(l){for(var s=this.length||16;s<this.pos+l;)s*=2;if(s!==this.length){var u=new Uint8Array(s);u.set(this.buf),this.buf=u,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Ug(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Ug(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Ug(this.buf,-1&l,this.pos),Ug(this.buf,Math.floor(l*Mm),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Ug(this.buf,-1&l,this.pos),Ug(this.buf,Math.floor(l*Mm),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(s,u){var p,v,E,M;if(s>=0?(p=s%4294967296|0,v=s/4294967296|0):(v=~(-s/4294967296),4294967295^(p=~(-s%4294967296))?p=p+1|0:(p=0,v=v+1|0)),s>=0x10000000000000000||s<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),E=p,(M=u).buf[M.pos++]=127&E|128,E>>>=7,M.buf[M.pos++]=127&E|128,E>>>=7,M.buf[M.pos++]=127&E|128,E>>>=7,M.buf[M.pos++]=127&E|128,M.buf[M.pos]=127&(E>>>=7),function(E,I){var M=(7&E)<<4;I.buf[I.pos++]|=M|((E>>>=3)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E|((E>>>=7)?128:0),E&&(I.buf[I.pos++]=127&E)))))}(v,u)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var s=this.pos;this.pos=function(p,v,E){for(var I,M,R=0;R<v.length;R++){if((I=v.charCodeAt(R))>55295&&I<57344){if(!M){I>56319||R+1===v.length?(p[E++]=239,p[E++]=191,p[E++]=189):M=I;continue}if(I<56320){p[E++]=239,p[E++]=191,p[E++]=189,M=I;continue}I=M-55296<<10|I-56320|65536,M=null}else M&&(p[E++]=239,p[E++]=191,p[E++]=189,M=null);I<128?p[E++]=I:(I<2048?p[E++]=I>>6|192:(I<65536?p[E++]=I>>12|224:(p[E++]=I>>18|240,p[E++]=I>>12&63|128),p[E++]=I>>6&63|128),p[E++]=63&I|128)}return E}(this.buf,l,this.pos);var u=this.pos-s;u>=128&&$S(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeFloat:function(l){this.realloc(4),g1(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),g1(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var s=l.length;this.writeVarint(s),this.realloc(s);for(var u=0;u<s;u++)this.buf[this.pos++]=l[u]},writeRawMessage:function(l,s){this.pos++;var u=this.pos;l(s,this);var p=this.pos-u;p>=128&&$S(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(l,s,u){this.writeTag(l,Rs.Bytes),this.writeRawMessage(s,u)},writePackedVarint:function(l,s){s.length&&this.writeMessage(l,_1,s)},writePackedSVarint:function(l,s){s.length&&this.writeMessage(l,RM,s)},writePackedBoolean:function(l,s){s.length&&this.writeMessage(l,v1,s)},writePackedFloat:function(l,s){s.length&&this.writeMessage(l,Vg,s)},writePackedDouble:function(l,s){s.length&&this.writeMessage(l,u0,s)},writePackedFixed32:function(l,s){s.length&&this.writeMessage(l,VS,s)},writePackedSFixed32:function(l,s){s.length&&this.writeMessage(l,US,s)},writePackedFixed64:function(l,s){s.length&&this.writeMessage(l,jS,s)},writePackedSFixed64:function(l,s){s.length&&this.writeMessage(l,km,s)},writeBytesField:function(l,s){this.writeTag(l,Rs.Bytes),this.writeBytes(s)},writeFixed32Field:function(l,s){this.writeTag(l,Rs.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(l,s){this.writeTag(l,Rs.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(l,s){this.writeTag(l,Rs.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(l,s){this.writeTag(l,Rs.Fixed64),this.writeSFixed64(s)},writeVarintField:function(l,s){this.writeTag(l,Rs.Varint),this.writeVarint(s)},writeSVarintField:function(l,s){this.writeTag(l,Rs.Varint),this.writeSVarint(s)},writeStringField:function(l,s){this.writeTag(l,Rs.Bytes),this.writeString(s)},writeFloatField:function(l,s){this.writeTag(l,Rs.Fixed32),this.writeFloat(s)},writeDoubleField:function(l,s){this.writeTag(l,Rs.Fixed64),this.writeDouble(s)},writeBooleanField:function(l,s){this.writeVarintField(l,!!s)}};var h0=we(BS);const y1=3;function wd(l,s,u){s.glyphs=[],1===l&&u.readMessage(tf,s)}function tf(l,s,u){if(3===l){const{id:p,bitmap:v,width:E,height:I,left:M,top:R,advance:L}=u.readMessage(OM,{});s.glyphs.push({id:p,bitmap:new bd({width:E+2*y1,height:I+2*y1},v),metrics:{width:E,height:I,left:M,top:R,advance:L}})}else 4===l?s.ascender=u.readSVarint():5===l&&(s.descender=u.readSVarint())}function OM(l,s,u){1===l?s.id=u.readVarint():2===l?s.bitmap=u.readBytes():3===l?s.width=u.readVarint():4===l?s.height=u.readVarint():5===l?s.left=u.readSVarint():6===l?s.top=u.readSVarint():7===l&&(s.advance=u.readVarint())}const HS=y1;function b1(l){let s=0,u=0;for(const I of l)s+=I.w*I.h,u=Math.max(u,I.w);l.sort((I,M)=>M.h-I.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}];let v=0,E=0;for(const I of l)for(let M=p.length-1;M>=0;M--){const R=p[M];if(!(I.w>R.w||I.h>R.h)){if(I.x=R.x,I.y=R.y,E=Math.max(E,I.y+I.h),v=Math.max(v,I.x+I.w),I.w===R.w&&I.h===R.h){const L=p.pop();M<p.length&&(p[M]=L)}else I.h===R.h?(R.x+=I.w,R.w-=I.w):I.w===R.w?(R.y+=I.h,R.h-=I.h):(p.push({x:R.x+I.w,y:R.y,w:R.w-I.w,h:I.h}),R.y+=I.h,R.h-=I.h);break}}return{w:v,h:E,fill:s/(v*E)||0}}const $u=1;class x1{constructor(s,{pixelRatio:u,version:p,stretchX:v,stretchY:E,content:I}){this.paddedRect=s,this.pixelRatio=u,this.stretchX=v,this.stretchY=E,this.content=I,this.version=p}get tl(){return[this.paddedRect.x+$u,this.paddedRect.y+$u]}get br(){return[this.paddedRect.x+this.paddedRect.w-$u,this.paddedRect.y+this.paddedRect.h-$u]}get displaySize(){return[(this.paddedRect.w-2*$u)/this.pixelRatio,(this.paddedRect.h-2*$u)/this.pixelRatio]}}class qS{constructor(s,u){const p={},v={};this.haveRenderCallbacks=[];const E=[];this.addImages(s,p,E),this.addImages(u,v,E);const{w:I,h:M}=b1(E),R=new Qu({width:I||1,height:M||1});for(const L in s){const z=s[L],V=p[L].paddedRect;Qu.copy(z.data,R,{x:0,y:0},{x:V.x+$u,y:V.y+$u},z.data)}for(const L in u){const z=u[L],V=v[L].paddedRect,G=V.x+$u,X=V.y+$u,oe=z.data.width,ve=z.data.height;Qu.copy(z.data,R,{x:0,y:0},{x:G,y:X},z.data),Qu.copy(z.data,R,{x:0,y:ve-1},{x:G,y:X-1},{width:oe,height:1}),Qu.copy(z.data,R,{x:0,y:0},{x:G,y:X+ve},{width:oe,height:1}),Qu.copy(z.data,R,{x:oe-1,y:0},{x:G-1,y:X},{width:1,height:ve}),Qu.copy(z.data,R,{x:0,y:0},{x:G+oe,y:X},{width:1,height:ve})}this.image=R,this.iconPositions=p,this.patternPositions=v}addImages(s,u,p){for(const v in s){const E=s[v],I={x:0,y:0,w:E.data.width+2*$u,h:E.data.height+2*$u};p.push(I),u[v]=new x1(I,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(s,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>s.hasImage(p)),s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in s.updatedImages)this.patchUpdatedImage(this.iconPositions[p],s.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],s.getImage(p),u)}patchUpdatedImage(s,u,p){if(!s||!u||s.version===u.version)return;s.version=u.version;const[v,E]=s.tl;p.update(u.data,void 0,{x:v,y:E})}}wi(x1,"ImagePosition"),wi(qS,"ImageAtlas");const Ju={horizontal:1,vertical:2,horizontalOnly:3},WS=-17;class hv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,u){const p=new hv;return p.scale=s||1,p.fontStack=u,p}static forImage(s){const u=new hv;return u.imageName=s,u}}class jg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u){const p=new jg;for(let v=0;v<s.sections.length;v++){const E=s.sections[v];E.image?p.addImageSection(E):p.addTextSection(E,u)}return p}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(s){this.text=function(u,p){let v="";for(let E=0;E<u.length;E++){const I=u.charCodeAt(E+1)||null,M=u.charCodeAt(E-1)||null;v+=!p&&(I&&Ex(I)&&!$g[u[E+1]]||M&&Ex(M)&&!$g[u[E-1]])||!$g[u[E]]?u[E]:$g[u[E]]}return v}(this.text,s)}trim(){let s=0;for(let p=0;p<this.text.length&&Pm[this.text.charCodeAt(p)];p++)s++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=s&&Pm[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){const p=new jg;return p.text=this.text.substring(s,u),p.sectionIndex=this.sectionIndex.slice(s,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}addTextSection(s,u){this.text+=s.text,this.sections.push(hv.forText(s.scale,s.fontStack||u));const p=this.sections.length-1;for(let v=0;v<s.text.length;++v)this.sectionIndex.push(p)}addImageSection(s){const u=s.image?s.image.name:"";if(0===u.length)return void cn("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(hv.forImage(u)),this.sectionIndex.push(this.sections.length-1)):cn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function w1(l,s,u,p,v,E,I,M,R,L,z,V,G,X,oe){const ve=jg.fromFeature(l,v);V===Ju.vertical&&ve.verticalizePunctuation(G);let Ue=[];const ft=function(zt,En,pn,$n,ci,In){if(!zt)return[];const Wn=[],Yn=function(Oi,Wi,Li,Zr,yi,xr){let Kr=0;for(let Oo=0;Oo<Oi.length();Oo++){const Gr=Oi.getSection(Oo);Kr+=Gg(Oi.getCharCode(Oo),Gr,Zr,yi,Wi,xr)}return Kr/Math.max(1,Math.ceil(Kr/Li))}(zt,En,pn,$n,ci,In),ii=zt.text.indexOf("\u200b")>=0;let _i=0;for(let Oi=0;Oi<zt.length();Oi++){const Wi=zt.getSection(Oi),Li=zt.getCharCode(Oi);if(Pm[Li]||(_i+=Gg(Li,Wi,$n,ci,En,In)),Oi<zt.length()-1){const Zr=!((Ln=Li)<11904||!(Fi["Bopomofo Extended"](Ln)||Fi.Bopomofo(Ln)||Fi["CJK Compatibility Forms"](Ln)||Fi["CJK Compatibility Ideographs"](Ln)||Fi["CJK Compatibility"](Ln)||Fi["CJK Radicals Supplement"](Ln)||Fi["CJK Strokes"](Ln)||Fi["CJK Symbols and Punctuation"](Ln)||Fi["CJK Unified Ideographs Extension A"](Ln)||Fi["CJK Unified Ideographs"](Ln)||Fi["Enclosed CJK Letters and Months"](Ln)||Fi["Halfwidth and Fullwidth Forms"](Ln)||Fi.Hiragana(Ln)||Fi["Ideographic Description Characters"](Ln)||Fi["Kangxi Radicals"](Ln)||Fi["Katakana Phonetic Extensions"](Ln)||Fi.Katakana(Ln)||Fi["Vertical Forms"](Ln)||Fi["Yi Radicals"](Ln)||Fi["Yi Syllables"](Ln)));(Gf[Li]||Zr||Wi.imageName)&&Wn.push(C1(Oi+1,_i,Yn,Wn,XS(Li,zt.getCharCode(Oi+1),Zr&&ii),!1))}}var Ln;return LM(C1(zt.length(),_i,Yn,Wn,0,!0))}(ve,L,E,s,p,X),{processBidirectionalText:Pt,processStyledBidirectionalText:ht}=F;if(Pt&&1===ve.sections.length){const zt=Pt(ve.toString(),ft);for(const En of zt){const pn=new jg;pn.text=En,pn.sections=ve.sections;for(let $n=0;$n<En.length;$n++)pn.sectionIndex.push(0);Ue.push(pn)}}else if(ht){const zt=ht(ve.text,ve.sectionIndex,ft);for(const En of zt){const pn=new jg;pn.text=En[0],pn.sectionIndex=En[1],pn.sections=ve.sections,Ue.push(pn)}}else Ue=function(zt,En){const pn=[],$n=zt.text;let ci=0;for(const In of En)pn.push(zt.substring(ci,In)),ci=In;return ci<$n.length&&pn.push(zt.substring(ci,$n.length)),pn}(ve,ft);const Tt=[],Ft={positionedLines:Tt,text:ve.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(zt,En,pn,$n,ci,In,Wn,Yn,ii,_i,Ln,Oi){let Wi=0,Li=0,Zr=0;const yi="right"===Yn?1:"left"===Yn?0:.5;let xr=!1;for(const Qr of ci){const Xr=Qr.getSections();for(const js of Xr){if(js.imageName)continue;const ta=En[js.fontStack];if(ta&&(xr=void 0!==ta.ascender&&void 0!==ta.descender,!xr))break}if(!xr)break}let Kr=0;for(const Qr of ci){Qr.trim();const Xr=Qr.getMaxScale(),js=(Xr-1)*ic,ta={positionedGlyphs:[],lineOffset:0};zt.positionedLines[Kr]=ta;const Ks=ta.positionedGlyphs;let Gs=0;if(!Qr.length()){Li+=In,++Kr;continue}let pr=0,si=0;for(let re=0;re<Qr.length();re++){const tl=Qr.getSection(re),Cl=Qr.getSectionIndex(re),ya=Qr.getCharCode(re);let wo=tl.scale,nl=null,Ts=null,Qc=null,il=ic,Gl=0;const Ol=!(ii===Ju.horizontal||!Ln&&!Fy(ya)||Ln&&(Pm[ya]||(Oo=ya,Fi.Arabic(Oo)||Fi["Arabic Supplement"](Oo)||Fi["Arabic Extended-A"](Oo)||Fi["Arabic Presentation Forms-A"](Oo)||Fi["Arabic Presentation Forms-B"](Oo))));if(tl.imageName){const Jc=$n[tl.imageName];if(!Jc)continue;Qc=tl.imageName,zt.iconsInText=zt.iconsInText||!0,Ts=Jc.paddedRect;const Ll=Jc.displaySize;wo=wo*ic/Oi,nl={width:Ll[0],height:Ll[1],left:$u,top:-HS,advance:Ol?Ll[1]:Ll[0],localGlyph:!1},Gl=xr?-nl.height*wo:WS+Xr*ic-Ll[1]*wo,il=nl.advance;const Th=(Ol?Ll[0]:Ll[1])*wo-ic*Xr;Th>0&&Th>Gs&&(Gs=Th)}else{const Jc=pn[tl.fontStack];if(!Jc)continue;Jc[ya]&&(Ts=Jc[ya]);const Ll=En[tl.fontStack];if(!Ll)continue;const Th=Ll.glyphs[ya];if(!Th)continue;if(nl=Th.metrics,il=8203!==ya?ic:0,xr){const Jg=void 0!==Ll.ascender?Math.abs(Ll.ascender):0,Iv=void 0!==Ll.descender?Math.abs(Ll.descender):0,e_=(Jg+Iv)*wo;pr<e_&&(pr=e_,si=(Jg-Iv)/2*wo),Gl=-Jg*wo}else Gl=WS+(Xr-wo)*ic}Ol?(zt.verticalizable=!0,Ks.push({glyph:ya,imageName:Qc,x:Wi,y:Li+Gl,vertical:Ol,scale:wo,localGlyph:nl.localGlyph,fontStack:tl.fontStack,sectionIndex:Cl,metrics:nl,rect:Ts}),Wi+=il*wo+_i):(Ks.push({glyph:ya,imageName:Qc,x:Wi,y:Li+Gl,vertical:Ol,scale:wo,localGlyph:nl.localGlyph,fontStack:tl.fontStack,sectionIndex:Cl,metrics:nl,rect:Ts}),Wi+=nl.advance*wo+_i)}0!==Ks.length&&(Zr=Math.max(Wi-_i,Zr),xr?NM(Ks,yi,Gs,si,In*Xr/2):NM(Ks,yi,Gs,0,In/2)),Wi=0;const fl=In*Xr+Gs;ta.lineOffset=Math.max(Gs,js),Li+=fl,++Kr}var Oo;const Gr=Li,{horizontalAlign:Pr,verticalAlign:Us}=YS(Wn);(function(Qr,Xr,js,ta,Ks,Gs){const pr=(Xr-js)*Ks,si=-Gs*ta;for(const fl of Qr)for(const re of fl.positionedGlyphs)re.x+=pr,re.y+=si})(zt.positionedLines,yi,Pr,Us,Zr,Gr),zt.top+=-Us*Gr,zt.bottom=zt.top+Gr,zt.left+=-Pr*Zr,zt.right=zt.left+Zr,zt.hasBaseline=xr}(Ft,s,u,p,Ue,I,M,R,V,L,G,oe),!function(zt){for(const En of zt)if(0!==En.positionedGlyphs.length)return!1;return!0}(Tt)&&Ft}const Pm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gg(l,s,u,p,v,E){if(s.imageName){const I=p[s.imageName];return I?I.displaySize[0]*s.scale*ic/E+v:0}{const I=u[s.fontStack],M=I&&I.glyphs[l];return M?M.metrics.advance*s.scale+v:0}}function E1(l,s,u,p){const v=Math.pow(l-s,2);return p?l<s?v/2:2*v:v+Math.abs(u)*u}function XS(l,s,u){let p=0;return 10===l&&(p-=1e4),u&&(p+=150),40!==l&&65288!==l||(p+=50),41!==s&&65289!==s||(p+=50),p}function C1(l,s,u,p,v,E){let I=null,M=E1(s,u,v,E);for(const R of p){const L=E1(s-R.x,u,v,E)+R.badness;L<=M&&(I=R,M=L)}return{index:l,x:s,priorBreak:I,badness:M}}function LM(l){return l?LM(l.priorBreak).concat(l.index):[]}function YS(l){let s=.5,u=.5;switch(l){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function NM(l,s,u,p,v){if(!(s||u||p||v))return;const E=l.length-1,I=l[E],M=(I.x+I.metrics.advance*I.scale)*s;for(let R=0;R<=E;R++)l[R].x-=M,l[R].y+=u+p+v}function S1(l,s,u){const{horizontalAlign:p,verticalAlign:v}=YS(u),E=s[0]-l.displaySize[0]*p,I=s[1]-l.displaySize[1]*v;return{image:l,top:I,bottom:I+l.displaySize[1],left:E,right:E+l.displaySize[0]}}function f0(l,s,u,p,v,E){const I=l.image;let M;if(I.content){const Ue=I.content,ft=I.pixelRatio||1;M=[Ue[0]/ft,Ue[1]/ft,I.displaySize[0]-Ue[2]/ft,I.displaySize[1]-Ue[3]/ft]}const R=s.left*E,L=s.right*E;let z,V,G,X;"width"===u||"both"===u?(X=v[0]+R-p[3],V=v[0]+L+p[1]):(X=v[0]+(R+L-I.displaySize[0])/2,V=X+I.displaySize[0]);const oe=s.top*E,ve=s.bottom*E;return"height"===u||"both"===u?(z=v[1]+oe-p[0],G=v[1]+ve+p[2]):(z=v[1]+(oe+ve-I.displaySize[1])/2,G=z+I.displaySize[1]),{image:I,top:z,right:V,bottom:G,left:X,collisionPadding:M}}class Pp extends K{constructor(s,u,p,v,E){super(s,u),this.angle=v,this.z=p,void 0!==E&&(this.segment=E)}clone(){return new Pp(this.x,this.y,this.z,this.angle,this.segment)}}function FM(l,s,u,p,v){if(void 0===s.segment)return!0;let E=s,I=s.segment+1,M=0;for(;M>-u/2;){if(I--,I<0)return!1;M-=l[I].dist(E),E=l[I]}M+=l[I].dist(l[I+1]),I++;const R=[];let L=0;for(;M<u/2;){const z=l[I],V=l[I+1];if(!V)return!1;let G=l[I-1].angleTo(z)-z.angleTo(V);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:M,angleDelta:G}),L+=G;M-R[0].distance>p;)L-=R.shift().angleDelta;if(L>v)return!1;I++,M+=z.dist(V)}return!0}function I1(l){let s=0;for(let u=0;u<l.length-1;u++)s+=l[u].dist(l[u+1]);return s}function ZS(l,s,u){return l?.6*s*u:0}function KS(l,s){return Math.max(l?l.right-l.left:0,s?s.right-s.left:0)}function BM(l,s,u,p,v,E){const I=ZS(u,v,E),M=KS(u,p)*E;let R=0;const L=I1(l)/2;for(let z=0;z<l.length-1;z++){const V=l[z],G=l[z+1],X=V.dist(G);if(R+X>L){const oe=(L-R)/X,ve=lo(V.x,G.x,oe),Ue=lo(V.y,G.y,oe),ft=new Pp(ve,Ue,0,G.angleTo(V),z);return!I||FM(l,ft,M,I,s)?ft:void 0}R+=X}}function zM(l,s,u,p,v,E,I,M,R){const L=ZS(p,E,I),z=KS(p,v),V=z*I,G=0===l[0].x||l[0].x===R||0===l[0].y||l[0].y===R;return s-V<s/4&&(s=V+s/4),T1(l,G?s/2*M%s:(z/2+2*E)*I*M%s,s,L,u,V,G,!1,R)}function T1(l,s,u,p,v,E,I,M,R){const L=E/2,z=I1(l);let V=0,G=s-u,X=[];for(let oe=0;oe<l.length-1;oe++){const ve=l[oe],Ue=l[oe+1],ft=ve.dist(Ue),Pt=Ue.angleTo(ve);for(;G+u<V+ft;){G+=u;const ht=(G-V)/ft,Tt=lo(ve.x,Ue.x,ht),Ft=lo(ve.y,Ue.y,ht);if(Tt>=0&&Tt<R&&Ft>=0&&Ft<R&&G-L>=0&&G+L<=z){const zt=new Pp(Tt,Ft,0,Pt,oe);zt._round(),p&&!FM(l,zt,E,p,v)||X.push(zt)}}V+=ft}return M||X.length||I||(X=T1(l,V/2,u,p,v,E,I,!0,R)),X}function fv(l,s,u,p,v){const E=[];for(let I=0;I<l.length;I++){const M=l[I];let R;for(let L=0;L<M.length-1;L++){let z=M[L],V=M[L+1];z.x<s&&V.x<s||(z.x<s?z=new K(s,z.y+(s-z.x)/(V.x-z.x)*(V.y-z.y))._round():V.x<s&&(V=new K(s,z.y+(s-z.x)/(V.x-z.x)*(V.y-z.y))._round()),z.y<u&&V.y<u||(z.y<u?z=new K(z.x+(u-z.y)/(V.y-z.y)*(V.x-z.x),u)._round():V.y<u&&(V=new K(z.x+(u-z.y)/(V.y-z.y)*(V.x-z.x),u)._round()),z.x>=p&&V.x>=p||(z.x>=p?z=new K(p,z.y+(p-z.x)/(V.x-z.x)*(V.y-z.y))._round():V.x>=p&&(V=new K(p,z.y+(p-z.x)/(V.x-z.x)*(V.y-z.y))._round()),z.y>=v&&V.y>=v||(z.y>=v?z=new K(z.x+(v-z.y)/(V.y-z.y)*(V.x-z.x),v)._round():V.y>=v&&(V=new K(z.x+(v-z.y)/(V.y-z.y)*(V.x-z.x),v)._round()),R&&z.equals(R[R.length-1])||(R=[z],E.push(R)),R.push(V)))))}}return E}wi(Pp,"Anchor");const Hg=1e20;function p0(l,s,u,p,v,E,I,M,R){for(let L=s;L<s+p;L++)QS(l,u*E+L,E,v,I,M,R);for(let L=u;L<u+v;L++)QS(l,L*E+s,1,p,I,M,R)}function QS(l,s,u,p,v,E,I){E[0]=0,I[0]=-Hg,I[1]=Hg,v[0]=l[s];for(let M=1,R=0,L=0;M<p;M++){v[M]=l[s+M*u];const z=M*M;do{const V=E[R];L=(v[M]-v[V]+z-V*V)/(M-V)/2}while(L<=I[R]&&--R>-1);R++,E[R]=M,I[R]=L,I[R+1]=Hg}for(let M=0,R=0;M<p;M++){for(;I[R+1]<M;)R++;const L=E[R],z=M-L;l[s+M*u]=v[L]+z*z}}const Ga=2,D1={none:0,ideographs:1,all:2};class qg{constructor(s,u,p){this.requestManager=s,this.localGlyphMode=u,this.localFontFamily=p,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s){this.url=s}getGlyphs(s,u){const p=[];for(const v in s)for(const E of s[v])p.push({stack:v,id:E});Ke(p,({stack:v,id:E},I)=>{let M=this.entries[v];M||(M=this.entries[v]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let R=M.glyphs[E];if(void 0!==R)return void I(null,{stack:v,id:E,glyph:R});if(R=this._tinySDF(M,v,E),R)return M.glyphs[E]=R,void I(null,{stack:v,id:E,glyph:R});const L=Math.floor(E/256);if(256*L>65535)return void I(new Error("glyphs > 65535 not supported"));if(M.ranges[L])return void I(null,{stack:v,id:E,glyph:R});let z=M.requests[L];z||(z=M.requests[L]=[],qg.loadGlyphRange(v,L,this.url,this.requestManager,(V,G)=>{if(G){M.ascender=G.ascender,M.descender=G.descender;for(const X in G.glyphs)this._doesCharSupportLocalGlyph(+X)||(M.glyphs[+X]=G.glyphs[+X]);M.ranges[L]=!0}for(const X of z)X(V,G);delete M.requests[L]})),z.push((V,G)=>{V?I(V):G&&I(null,{stack:v,id:E,glyph:G.glyphs[E]||null})})},(v,E)=>{if(v)u(v);else if(E){const I={};for(const{stack:M,id:R,glyph:L}of E)void 0===I[M]&&(I[M]={}),void 0===I[M].glyphs&&(I[M].glyphs={}),I[M].glyphs[R]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics},I[M].ascender=this.entries[M].ascender,I[M].descender=this.entries[M].descender;u(null,I)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==D1.none&&(this.localGlyphMode===D1.all?!!this.localFontFamily:!!this.localFontFamily&&(Fi["CJK Unified Ideographs"](s)||Fi["Hangul Syllables"](s)||Fi.Hiragana(s)||Fi.Katakana(s)||Fi["CJK Symbols and Punctuation"](s)))}_tinySDF(s,u,p){const v=this.localFontFamily;if(!v||!this._doesCharSupportLocalGlyph(p))return;let E=s.tinySDF;if(!E){let ve="400";/bold/i.test(u)?ve="900":/medium/i.test(u)?ve="500":/light/i.test(u)&&(ve="200"),E=s.tinySDF=new qg.TinySDF({fontFamily:v,fontWeight:ve,fontSize:24*Ga,buffer:3*Ga,radius:8*Ga}),E.fontWeight=ve}if(this.localGlyphs[E.fontWeight][p])return this.localGlyphs[E.fontWeight][p];const I=String.fromCharCode(p),{data:M,width:R,height:L,glyphWidth:z,glyphHeight:V,glyphLeft:G,glyphTop:X,glyphAdvance:oe}=E.draw(I);return this.localGlyphs[E.fontWeight][p]={id:p,bitmap:new bd({width:R,height:L},M),metrics:{width:z/Ga,height:V/Ga,left:G/Ga,top:X/Ga-27,advance:oe/Ga,localGlyph:!0}}}}qg.loadGlyphRange=function(l,s,u,p,v){const E=256*s,I=E+255,M=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",`${E}-${I}`),wr.Glyphs);zr(M,(R,L)=>{if(R)v(R);else if(L){const z={},V=new h0(L).readFields(wd,{});for(const G of V.glyphs)z[G.id]=G;v(null,{glyphs:z,ascender:V.ascender,descender:V.descender})}})},qg.TinySDF=class{constructor({fontSize:l=24,buffer:s=3,radius:u=8,cutoff:p=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:I="normal"}={}){this.buffer=s,this.cutoff=p,this.radius=u;const M=this.size=l+4*s,R=this._createCanvas(M),L=this.ctx=R.getContext("2d",{willReadFrequently:!0});L.font=`${I} ${E} ${l}px ${v}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(l){const s=document.createElement("canvas");return s.width=s.height=l,s}draw(l){const{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(l),I=Math.ceil(u),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-v))),R=Math.min(this.size-this.buffer,I+Math.ceil(p)),L=M+2*this.buffer,z=R+2*this.buffer,V=Math.max(L*z,0),G=new Uint8ClampedArray(V),X={data:G,width:L,height:z,glyphWidth:M,glyphHeight:R,glyphTop:I,glyphLeft:0,glyphAdvance:s};if(0===M||0===R)return X;const{ctx:oe,buffer:ve,gridInner:Ue,gridOuter:ft}=this;oe.clearRect(ve,ve,M,R),oe.fillText(l,ve,ve+I);const Pt=oe.getImageData(ve,ve,M,R);ft.fill(Hg,0,V),Ue.fill(0,0,V);for(let ht=0;ht<R;ht++)for(let Tt=0;Tt<M;Tt++){const Ft=Pt.data[4*(ht*M+Tt)+3]/255;if(0===Ft)continue;const zt=(ht+ve)*L+Tt+ve;if(1===Ft)ft[zt]=0,Ue[zt]=Hg;else{const En=.5-Ft;ft[zt]=En>0?En*En:0,Ue[zt]=En<0?En*En:0}}p0(ft,0,0,L,z,L,this.f,this.v,this.z),p0(Ue,ve,ve,M,R,L,this.f,this.v,this.z);for(let ht=0;ht<V;ht++){const Tt=Math.sqrt(ft[ht])-Math.sqrt(Ue[ht]);G[ht]=Math.round(255-255*(Tt/this.radius+this.cutoff))}return X}};const Rp=$u;function A1(l,s,u,p){const v=[],E=l.image,I=E.pixelRatio,M=E.paddedRect.w-2*Rp,R=E.paddedRect.h-2*Rp,L=l.right-l.left,z=l.bottom-l.top,V=E.stretchX||[[0,M]],G=E.stretchY||[[0,R]],X=(In,Wn)=>In+Wn[1]-Wn[0],oe=V.reduce(X,0),ve=G.reduce(X,0),Ue=M-oe,ft=R-ve;let Pt=0,ht=oe,Tt=0,Ft=ve,zt=0,En=Ue,pn=0,$n=ft;if(E.content&&p){const In=E.content;Pt=m0(V,0,In[0]),Tt=m0(G,0,In[1]),ht=m0(V,In[0],In[2]),Ft=m0(G,In[1],In[3]),zt=In[0]-Pt,pn=In[1]-Tt,En=In[2]-In[0]-ht,$n=In[3]-In[1]-Ft}const ci=(In,Wn,Yn,ii)=>{const _i=g0(In.stretch-Pt,ht,L,l.left),Ln=_0(In.fixed-zt,En,In.stretch,oe),Oi=g0(Wn.stretch-Tt,Ft,z,l.top),Wi=_0(Wn.fixed-pn,$n,Wn.stretch,ve),Li=g0(Yn.stretch-Pt,ht,L,l.left),Zr=_0(Yn.fixed-zt,En,Yn.stretch,oe),yi=g0(ii.stretch-Tt,Ft,z,l.top),xr=_0(ii.fixed-pn,$n,ii.stretch,ve),Kr=new K(_i,Oi),Oo=new K(Li,Oi),Gr=new K(Li,yi),Pr=new K(_i,yi),Us=new K(Ln/I,Wi/I),Qr=new K(Zr/I,xr/I),Xr=s*Math.PI/180;if(Xr){const Ks=Math.sin(Xr),Gs=Math.cos(Xr),pr=[Gs,-Ks,Ks,Gs];Kr._matMult(pr),Oo._matMult(pr),Pr._matMult(pr),Gr._matMult(pr)}const js=In.stretch+In.fixed,ta=Wn.stretch+Wn.fixed;return{tl:Kr,tr:Oo,bl:Pr,br:Gr,tex:{x:E.paddedRect.x+Rp+js,y:E.paddedRect.y+Rp+ta,w:Yn.stretch+Yn.fixed-js,h:ii.stretch+ii.fixed-ta},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Us,pixelOffsetBR:Qr,minFontScaleX:En/I/L,minFontScaleY:$n/I/z,isSDF:u}};if(p&&(E.stretchX||E.stretchY)){const In=JS(V,Ue,oe),Wn=JS(G,ft,ve);for(let Yn=0;Yn<In.length-1;Yn++){const ii=In[Yn],_i=In[Yn+1];for(let Ln=0;Ln<Wn.length-1;Ln++)v.push(ci(ii,Wn[Ln],_i,Wn[Ln+1]))}}else v.push(ci({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:R+1}));return v}function m0(l,s,u){let p=0;for(const v of l)p+=Math.max(s,Math.min(u,v[1]))-Math.max(s,Math.min(u,v[0]));return p}function JS(l,s,u){const p=[{fixed:-Rp,stretch:0}];for(const[v,E]of l){const I=p[p.length-1];p.push({fixed:v-I.stretch,stretch:I.stretch}),p.push({fixed:v-I.stretch,stretch:I.stretch+(E-v)})}return p.push({fixed:s+Rp,stretch:u}),p}function g0(l,s,u,p){return l/s*u+p}function _0(l,s,u,p){return l-s*u/p}function eI(l,s,u,p){const v=s+l.positionedLines[p].lineOffset;return 0===p?u+v/2:u+(v+(s+l.positionedLines[p-1].lineOffset))/2}class NF{constructor(s=[],u=FF){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const s=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:u,compare:p}=this,v=u[s];for(;s>0;){const E=s-1>>1,I=u[E];if(p(v,I)>=0)break;u[s]=I,s=E}u[s]=v}_down(s){const{data:u,compare:p}=this,v=this.length>>1,E=u[s];for(;s<v;){let I=1+(s<<1),M=u[I];const R=I+1;if(R<this.length&&p(u[R],M)<0&&(I=R,M=u[R]),p(M,E)>=0)break;u[s]=M,s=I}u[s]=E}}function FF(l,s){return l<s?-1:l>s?1:0}function pv(l,s=1,u=!1){let p=1/0,v=1/0,E=-1/0,I=-1/0;const M=l[0];for(let X=0;X<M.length;X++){const oe=M[X];(!X||oe.x<p)&&(p=oe.x),(!X||oe.y<v)&&(v=oe.y),(!X||oe.x>E)&&(E=oe.x),(!X||oe.y>I)&&(I=oe.y)}const R=Math.min(E-p,I-v);let L=R/2;const z=new NF([],xi);if(0===R)return new K(p,v);for(let X=p;X<E;X+=R)for(let oe=v;oe<I;oe+=R)z.push(new nf(X+L,oe+L,L,l));let V=function(X){let oe=0,ve=0,Ue=0;const ft=X[0];for(let Pt=0,ht=ft.length,Tt=ht-1;Pt<ht;Tt=Pt++){const Ft=ft[Pt],zt=ft[Tt],En=Ft.x*zt.y-zt.x*Ft.y;ve+=(Ft.x+zt.x)*En,Ue+=(Ft.y+zt.y)*En,oe+=3*En}return new nf(ve/oe,Ue/oe,0,X)}(l),G=z.length;for(;z.length;){const X=z.pop();(X.d>V.d||!V.d)&&(V=X,u&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,G)),X.max-V.d<=s||(L=X.h/2,z.push(new nf(X.p.x-L,X.p.y-L,L,l)),z.push(new nf(X.p.x+L,X.p.y-L,L,l)),z.push(new nf(X.p.x-L,X.p.y+L,L,l)),z.push(new nf(X.p.x+L,X.p.y+L,L,l)),G+=4)}return u&&(console.log(`num probes: ${G}`),console.log(`best distance: ${V.d}`)),V.p}function xi(l,s){return s.max-l.max}class nf{constructor(s,u,p,v){this.p=new K(s,u),this.h=p,this.d=function(E,I){let M=!1,R=1/0;for(let L=0;L<I.length;L++){const z=I[L];for(let V=0,G=z.length,X=G-1;V<G;X=V++){const oe=z[V],ve=z[X];oe.y>E.y!=ve.y>E.y&&E.x<(ve.x-oe.x)*(E.y-oe.y)/(ve.y-oe.y)+oe.x&&(M=!M),R=Math.min(R,hS(E,oe,ve))}}return(M?1:-1)*Math.sqrt(R)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}}const Rm=7,v0=Number.POSITIVE_INFINITY,M1=Math.sqrt(2);function y0(l,[s,u]){let p=0,v=0;if(u===v0){s<0&&(s=0);const E=s/M1;switch(l){case"top-right":case"top-left":v=E-Rm;break;case"bottom-right":case"bottom-left":v=-E+Rm;break;case"bottom":v=-s+Rm;break;case"top":v=s-Rm}switch(l){case"top-right":case"bottom-right":p=-E;break;case"top-left":case"bottom-left":p=E;break;case"left":p=s;break;case"right":p=-s}}else{switch(s=Math.abs(s),u=Math.abs(u),l){case"top-right":case"top-left":case"top":v=u-Rm;break;case"bottom-right":case"bottom-left":case"bottom":v=-u+Rm}switch(l){case"top-right":case"bottom-right":case"right":p=-s;break;case"top-left":case"bottom-left":case"left":p=s}}return[p,v]}function $M(l,s,u,p,v,E,I,M,R,L){l.createArrays(),l.tilePixelRatio=Er/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const z=l.layers[0].layout,V=l.layers[0]._unevaluatedLayout._values,G={};if("composite"===l.textSizeData.kind){const{minZoom:ve,maxZoom:Ue}=l.textSizeData;G.compositeTextSizes=[V["text-size"].possiblyEvaluate(new $(ve),M),V["text-size"].possiblyEvaluate(new $(Ue),M)]}if("composite"===l.iconSizeData.kind){const{minZoom:ve,maxZoom:Ue}=l.iconSizeData;G.compositeIconSizes=[V["icon-size"].possiblyEvaluate(new $(ve),M),V["icon-size"].possiblyEvaluate(new $(Ue),M)]}G.layoutTextSize=V["text-size"].possiblyEvaluate(new $(R+1),M),G.layoutIconSize=V["icon-size"].possiblyEvaluate(new $(R+1),M),G.textMaxSize=V["text-size"].possiblyEvaluate(new $(18),M);const X="map"===z.get("text-rotation-alignment")&&"point"!==z.get("symbol-placement"),oe=z.get("text-size");for(const ve of l.features){const Ue=z.get("text-font").evaluate(ve,{},M).join(","),ft=oe.evaluate(ve,{},M),Pt=G.layoutTextSize.evaluate(ve,{},M),ht=(G.layoutIconSize.evaluate(ve,{},M),{horizontal:{},vertical:void 0}),Tt=ve.text;let Ft,zt=[0,0];if(Tt){const $n=Tt.toString(),ci=z.get("text-letter-spacing").evaluate(ve,{},M)*ic,In=z.get("text-line-height").evaluate(ve,{},M)*ic,Wn=Ny($n)?ci:0,Yn=z.get("text-anchor").evaluate(ve,{},M),ii=z.get("text-variable-anchor");if(!ii){const Li=z.get("text-radial-offset").evaluate(ve,{},M);zt=Li?y0(Yn,[Li*ic,v0]):z.get("text-offset").evaluate(ve,{},M).map(Zr=>Zr*ic)}let _i=X?"center":z.get("text-justify").evaluate(ve,{},M);const Ln="point"===z.get("symbol-placement"),Oi=Ln?z.get("text-max-width").evaluate(ve,{},M)*ic:1/0,Wi=Li=>{l.allowVerticalPlacement&&Ly($n)&&(ht.vertical=w1(Tt,s,u,v,Ue,Oi,In,Yn,Li,Wn,zt,Ju.vertical,!0,Pt,ft))};if(!X&&ii){const Li="auto"===_i?ii.map(yi=>b0(yi)):[_i];let Zr=!1;for(let yi=0;yi<Li.length;yi++){const xr=Li[yi];if(!ht.horizontal[xr])if(Zr)ht.horizontal[xr]=ht.horizontal[0];else{const Kr=w1(Tt,s,u,v,Ue,Oi,In,"center",xr,Wn,zt,Ju.horizontal,!1,Pt,ft);Kr&&(ht.horizontal[xr]=Kr,Zr=1===Kr.positionedLines.length)}}Wi("left")}else{if("auto"===_i&&(_i=b0(Yn)),Ln||z.get("text-writing-mode").indexOf("horizontal")>=0||!Ly($n)){const Li=w1(Tt,s,u,v,Ue,Oi,In,Yn,_i,Wn,zt,Ju.horizontal,!1,Pt,ft);Li&&(ht.horizontal[_i]=Li)}Wi(Ln?"left":_i)}}let En=!1;if(ve.icon&&ve.icon.name){const $n=p[ve.icon.name];$n&&(Ft=S1(v[ve.icon.name],z.get("icon-offset").evaluate(ve,{},M),z.get("icon-anchor").evaluate(ve,{},M)),En=$n.sdf,void 0===l.sdfIcons?l.sdfIcons=$n.sdf:l.sdfIcons!==$n.sdf&&cn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($n.pixelRatio!==l.pixelRatio||0!==z.get("icon-rotate").constantOr(1))&&(l.iconsNeedLinear=!0))}const pn=nI(ht.horizontal)||ht.vertical;l.iconsInText||(l.iconsInText=!!pn&&pn.iconsInText),(pn||Ft)&&tI(l,ve,ht,Ft,p,G,Pt,0,zt,En,I,M,L)}E&&l.generateCollisionDebugBuffers(R,l.collisionBoxArray)}function b0(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tI(l,s,u,p,v,E,I,M,R,L,z,V,G){let X=E.textMaxSize.evaluate(s,{},V);void 0===X&&(X=I);const oe=l.layers[0].layout,ve=oe.get("icon-offset").evaluate(s,{},V),Ue=nI(u.horizontal)||u.vertical,ft="globe"===G.name,Pt=ic,ht=I/Pt,Tt=l.tilePixelRatio*X/Pt,Ft=(Yn=l.overscaling,l.zoom>18&&Yn>2&&(Yn>>=1),Math.max(Er/(512*Yn),1)*oe.get("symbol-spacing")),zt=oe.get("text-padding")*l.tilePixelRatio,En=oe.get("icon-padding")*l.tilePixelRatio,pn=he(oe.get("text-max-angle")),$n="map"===oe.get("text-rotation-alignment")&&"point"!==oe.get("symbol-placement"),ci="map"===oe.get("icon-rotation-alignment")&&"point"!==oe.get("symbol-placement"),In=oe.get("symbol-placement"),Wn=Ft/2;var Yn;const ii=oe.get("icon-text-fit");let _i;p&&"none"!==ii&&(l.allowVerticalPlacement&&u.vertical&&(_i=f0(p,u.vertical,ii,oe.get("icon-text-fit-padding"),ve,ht)),Ue&&(p=f0(p,Ue,ii,oe.get("icon-text-fit-padding"),ve,ht)));const Ln=(Oi,Wi,Li)=>{if(Wi.x<0||Wi.x>=Er||Wi.y<0||Wi.y>=Er)return;let Zr=null;if(ft){const{x:yi,y:xr,z:Kr}=G.projectTilePoint(Wi.x,Wi.y,Li);Zr={anchor:new Pp(yi,xr,Kr,0,void 0),up:G.upVector(Li,Wi.x,Wi.y)}}!function(yi,xr,Kr,Oo,Gr,Pr,Us,Qr,Xr,js,ta,Ks,Gs,pr,si,fl,re,tl,Cl,ya,wo,nl,Ts,Qc,il){const Gl=yi.addToLineVertexArray(xr,Oo);let Ol,Jc,Ll,Th,Jg,Iv,e_,_I=0,vI=0,yI=0,bI=0,O0=-1,L0=-1;const cf={};let xI=$y("");const xc=Kr?Kr.anchor:xr;let Q1=0,J1=0;if(void 0===Xr._unevaluatedLayout.getValue("text-radial-offset")?[Q1,J1]=Xr.layout.get("text-offset").evaluate(wo,{},il).map(id=>id*ic):(Q1=Xr.layout.get("text-radial-offset").evaluate(wo,{},il)*ic,J1=v0),yi.allowVerticalPlacement&&Gr.vertical){const id=Gr.vertical;if(si)Iv=w0(id),Qr&&(e_=w0(Qr));else{const rd=Xr.layout.get("text-rotate").evaluate(wo,{},il)+90;Ll=Wg(js,xc,xr,ta,Ks,Gs,id,pr,rd,fl),Qr&&(Th=Wg(js,xc,xr,ta,Ks,Gs,Qr,tl,rd))}}if(Pr){const id=Xr.layout.get("icon-rotate").evaluate(wo,{},il),rd="none"!==Xr.layout.get("icon-text-fit"),Dv=A1(Pr,id,Ts,rd),N0=Qr?A1(Qr,id,Ts,rd):void 0;Jc=Wg(js,xc,xr,ta,Ks,Gs,Pr,tl,id),_I=4*Dv.length;const EI=yi.iconSizeData;let Vm=null;"source"===EI.kind?(Vm=[xd*Xr.layout.get("icon-size").evaluate(wo,{},il)],Vm[0]>Om&&cn(`${yi.layerIds[0]}: Value for "icon-size" is >= ${Op}. Reduce your "icon-size".`)):"composite"===EI.kind&&(Vm=[xd*nl.compositeIconSizes[0].evaluate(wo,{},il),xd*nl.compositeIconSizes[1].evaluate(wo,{},il)],(Vm[0]>Om||Vm[1]>Om)&&cn(`${yi.layerIds[0]}: Value for "icon-size" is >= ${Op}. Reduce your "icon-size".`)),yi.addSymbols(yi.icon,Dv,Vm,ya,Cl,wo,!1,Kr,xr,Gl.lineStartIndex,Gl.lineLength,-1,Qc,il),O0=yi.icon.placedSymbolArray.length-1,N0&&(vI=4*N0.length,yi.addSymbols(yi.icon,N0,Vm,ya,Cl,wo,Ju.vertical,Kr,xr,Gl.lineStartIndex,Gl.lineLength,-1,Qc,il),L0=yi.icon.placedSymbolArray.length-1)}for(const id in Gr.horizontal){const rd=Gr.horizontal[id];Ol||(xI=$y(rd.text),si?Jg=w0(rd):Ol=Wg(js,xc,xr,ta,Ks,Gs,rd,pr,Xr.layout.get("text-rotate").evaluate(wo,{},il),fl));const Dv=1===rd.positionedLines.length;if(yI+=x0(yi,Kr,xr,rd,Us,Xr,si,wo,fl,Gl,Gr.vertical?Ju.horizontal:Ju.horizontalOnly,Dv?Object.keys(Gr.horizontal):[id],cf,O0,nl,Qc,il),Dv)break}Gr.vertical&&(bI+=x0(yi,Kr,xr,Gr.vertical,Us,Xr,si,wo,fl,Gl,Ju.vertical,["vertical"],cf,L0,nl,Qc,il));let $m=-1;const Tv=(id,rd)=>id?Math.max(id,rd):rd;$m=Tv(Jg,$m),$m=Tv(Iv,$m),$m=Tv(e_,$m);const wI=$m>-1?1:0;yi.glyphOffsetArray.length>=sf.MAX_GLYPHS&&cn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==wo.sortKey&&yi.addToSortKeyRanges(yi.symbolInstances.length,wo.sortKey),yi.symbolInstances.emplaceBack(xc.x,xc.y,xc.z,xr.x,xr.y,cf.right>=0?cf.right:-1,cf.center>=0?cf.center:-1,cf.left>=0?cf.left:-1,cf.vertical>=0?cf.vertical:-1,O0,L0,xI,void 0!==Ol?Ol:yi.collisionBoxArray.length,void 0!==Ol?Ol+1:yi.collisionBoxArray.length,void 0!==Ll?Ll:yi.collisionBoxArray.length,void 0!==Ll?Ll+1:yi.collisionBoxArray.length,void 0!==Jc?Jc:yi.collisionBoxArray.length,void 0!==Jc?Jc+1:yi.collisionBoxArray.length,Th||yi.collisionBoxArray.length,Th?Th+1:yi.collisionBoxArray.length,ta,yI,bI,_I,vI,wI,0,Q1,J1,$m)}(l,Wi,Zr,Oi,u,p,v,_i,l.layers[0],l.collisionBoxArray,s.index,s.sourceLayerIndex,l.index,zt,$n,R,0,En,ci,ve,s,E,L,z,V)};if("line"===In)for(const Oi of fv(s.geometry,0,0,Er,Er)){const Wi=zM(Oi,Ft,pn,u.vertical||Ue,p,Pt,Tt,l.overscaling,Er);for(const Li of Wi)Ue&&iI(l,Ue.text,Wn,Li)||Ln(Oi,Li,V)}else if("line-center"===In){for(const Oi of s.geometry)if(Oi.length>1){const Wi=BM(Oi,pn,u.vertical||Ue,p,Pt,Tt);Wi&&Ln(Oi,Wi,V)}}else if("Polygon"===s.type)for(const Oi of n1(s.geometry,0)){const Wi=pv(Oi,16);Ln(Oi[0],new Pp(Wi.x,Wi.y,0,0,void 0),V)}else if("LineString"===s.type)for(const Oi of s.geometry)Ln(Oi,new Pp(Oi[0].x,Oi[0].y,0,0,void 0),V);else if("Point"===s.type)for(const Oi of s.geometry)for(const Wi of Oi)Ln([Wi],new Pp(Wi.x,Wi.y,0,0,void 0),V)}const Op=255,Om=Op*xd;function x0(l,s,u,p,v,E,I,M,R,L,z,V,G,X,oe,ve,Ue){const ft=function(Tt,Ft,zt,En,pn,$n,ci,In){const Wn=[];if(0===Ft.positionedLines.length)return Wn;const Yn=En.layout.get("text-rotate").evaluate($n,{})*Math.PI/180,ii=function(Li){const Zr=Li[0],yi=Li[1],xr=Zr*yi;return xr>0?[Zr,-yi]:xr<0?[-Zr,yi]:0===Zr?[yi,Zr]:[yi,-Zr]}(zt);let _i=Math.abs(Ft.top-Ft.bottom);for(const Li of Ft.positionedLines)_i-=Li.lineOffset;const Ln=Ft.positionedLines.length,Oi=_i/Ln;let Wi=Ft.top-zt[1];for(let Li=0;Li<Ln;++Li){const Zr=Ft.positionedLines[Li];Wi=eI(Ft,Oi,Wi,Li);for(const yi of Zr.positionedGlyphs){if(!yi.rect)continue;const xr=yi.rect||{};let Kr=HS+1,Oo=!0,Gr=1,Pr=0;if(yi.imageName){const Ts=ci[yi.imageName];if(!Ts)continue;if(Ts.sdf){cn("SDF images are not supported in formatted text and will be ignored.");continue}Oo=!1,Gr=Ts.pixelRatio,Kr=$u/Gr}const Us=(pn||In)&&yi.vertical,Qr=yi.metrics.advance*yi.scale/2,Xr=yi.metrics,js=yi.rect;if(null===js)continue;In&&Ft.verticalizable&&(Pr=yi.imageName?Qr-yi.metrics.width*yi.scale/2:0);const ta=pn?[yi.x+Qr,yi.y]:[0,0];let Ks=[0,0],Gs=[0,0],pr=!1;pn||(Us?(Gs=[yi.x+Qr+ii[0],yi.y+ii[1]-Pr],pr=!0):Ks=[yi.x+Qr+zt[0],yi.y+zt[1]-Pr]);const si=js.w*yi.scale/(Gr*(yi.localGlyph?Ga:1)),fl=js.h*yi.scale/(Gr*(yi.localGlyph?Ga:1));let re,tl,Cl,ya;if(Us){const Ts=yi.y-Wi,Qc=new K(-Qr,Qr-Ts),il=-Math.PI/2,Gl=new K(...Gs);re=new K(-Qr+Ks[0],Ks[1]),re._rotateAround(il,Qc)._add(Gl),re.x+=-Ts+Qr,re.y-=(Xr.left-Kr)*yi.scale;const Ol=yi.imageName?Xr.advance*yi.scale:ic*yi.scale,Jc=String.fromCharCode(yi.glyph);kM(Jc)?re.x+=(1-Kr)*yi.scale:PM(Jc)?re.x+=Ol-Xr.height*yi.scale+(-Kr-1)*yi.scale:re.x+=yi.imageName||Xr.width+2*Kr===js.w&&Xr.height+2*Kr===js.h?(Ol-fl)/2:(Ol-(Xr.height+2*Kr)*yi.scale)/2,tl=new K(re.x,re.y-si),Cl=new K(re.x+fl,re.y),ya=new K(re.x+fl,re.y-si)}else{const Ts=(Xr.left-Kr)*yi.scale-Qr+Ks[0],Qc=(-Xr.top-Kr)*yi.scale+Ks[1],il=Ts+si,Gl=Qc+fl;re=new K(Ts,Qc),tl=new K(il,Qc),Cl=new K(Ts,Gl),ya=new K(il,Gl)}if(Yn){let Ts;Ts=pn?new K(0,0):pr?new K(ii[0],ii[1]):new K(zt[0],zt[1]),re._rotateAround(Yn,Ts),tl._rotateAround(Yn,Ts),Cl._rotateAround(Yn,Ts),ya._rotateAround(Yn,Ts)}const wo=new K(0,0),nl=new K(0,0);Wn.push({tl:re,tr:tl,bl:Cl,br:ya,tex:xr,writingMode:Ft.writingMode,glyphOffset:ta,sectionIndex:yi.sectionIndex,isSDF:Oo,pixelOffsetTL:wo,pixelOffsetBR:nl,minFontScaleX:0,minFontScaleY:0})}}return Wn}(0,p,R,E,I,M,v,l.allowVerticalPlacement),Pt=l.textSizeData;let ht=null;"source"===Pt.kind?(ht=[xd*E.layout.get("text-size").evaluate(M,{},Ue)],ht[0]>Om&&cn(`${l.layerIds[0]}: Value for "text-size" is >= ${Op}. Reduce your "text-size".`)):"composite"===Pt.kind&&(ht=[xd*oe.compositeTextSizes[0].evaluate(M,{},Ue),xd*oe.compositeTextSizes[1].evaluate(M,{},Ue)],(ht[0]>Om||ht[1]>Om)&&cn(`${l.layerIds[0]}: Value for "text-size" is >= ${Op}. Reduce your "text-size".`)),l.addSymbols(l.text,ft,ht,R,I,M,z,s,u,L.lineStartIndex,L.lineLength,X,ve,Ue);for(const Tt of V)G[Tt]=l.text.placedSymbolArray.length-1;return 4*ft.length}function nI(l){for(const s in l)return l[s];return null}function Wg(l,s,u,p,v,E,I,M,R,L){let z=I.top,V=I.bottom,G=I.left,X=I.right;const oe=I.collisionPadding;if(oe&&(G-=oe[0],z-=oe[1],X+=oe[2],V+=oe[3]),R){const ve=new K(G,z),Ue=new K(X,z),ft=new K(G,V),Pt=new K(X,V),ht=he(R);let Tt=new K(0,0);L&&(Tt=new K(L[0],L[1])),ve._rotateAround(ht,Tt),Ue._rotateAround(ht,Tt),ft._rotateAround(ht,Tt),Pt._rotateAround(ht,Tt),G=Math.min(ve.x,Ue.x,ft.x,Pt.x),X=Math.max(ve.x,Ue.x,ft.x,Pt.x),z=Math.min(ve.y,Ue.y,ft.y,Pt.y),V=Math.max(ve.y,Ue.y,ft.y,Pt.y)}return l.emplaceBack(s.x,s.y,s.z,u.x,u.y,G,z,X,V,M,p,v,E),l.length-1}function w0(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const s=l.bottom-l.top;return s>0?Math.max(10,s):null}function iI(l,s,u,p){const v=l.compareText;if(s in v){const E=v[s];for(let I=E.length-1;I>=0;I--)if(p.dist(E[I])<u)return!0}else v[s]=[];return v[s].push(p),!1}function Lp(l,s){const u=l.fovAboveCenter,p=l.elevation?l.elevation.getMinElevationBelowMSL()*s:0,v=(l._camera.position[2]*l.worldSize-p)/Math.cos(l._pitch),E=Math.sin(u)*v/Math.sin(Math.max(Math.PI/2-l._pitch-u,.01)),I=Math.sin(l._pitch)*E+v;return Math.min(1.01*I,v*(1/l._horizonShift))}function Lm(l,s){if(!s.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:s};const u=Math.pow(2,-l.z),p=l.x*u,v=(l.x+1)*u,E=l.y*u,I=(l.y+1)*u,M=Yd(p),R=Yd(v),L=Zc(E),z=Zc(I),V=s.project(M,L),G=s.project(R,L),X=s.project(R,z),oe=s.project(M,z);let ve=Math.min(V.x,G.x,X.x,oe.x),Ue=Math.min(V.y,G.y,X.y,oe.y),ft=Math.max(V.x,G.x,X.x,oe.x),Pt=Math.max(V.y,G.y,X.y,oe.y);const ht=u/16;function Tt(zt,En,pn,$n,ci,In){const Wn=(pn+ci)/2,Yn=($n+In)/2,ii=s.project(Yd(Wn),Zc(Yn)),_i=Math.max(0,ve-ii.x,Ue-ii.y,ii.x-ft,ii.y-Pt);ve=Math.min(ve,ii.x),ft=Math.max(ft,ii.x),Ue=Math.min(Ue,ii.y),Pt=Math.max(Pt,ii.y),_i>ht&&(Tt(zt,ii,pn,$n,Wn,Yn),Tt(ii,En,Wn,Yn,ci,In))}Tt(V,G,p,E,v,E),Tt(G,X,v,E,v,I),Tt(X,oe,v,I,p,I),Tt(oe,V,p,I,p,E),ve-=ht,Ue-=ht,ft+=ht,Pt+=ht;const Ft=1/Math.max(ft-ve,Pt-Ue);return{scale:Ft,x:ve*Ft,y:Ue*Ft,x2:ft*Ft,y2:Pt*Ft,projection:s}}const k1=qd(new Float32Array(16));class Sh{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,u){return{x:0,y:0,z:0}}unproject(s,u){return new Ho(0,0)}projectTilePoint(s,u,p){return{x:s,y:u,z:0}}locationPoint(s,u,p=!0){return s._coordinatePoint(s.locationCoordinate(u),p)}pixelsPerMeter(s,u){return Qh(1,s)*u}pixelSpaceConversion(s,u,p){return 1}farthestPixelDistance(s){return Lp(s,s.pixelsPerMeter)}pointCoordinate(s,u,p,v){const E=s.horizonLineFromTop(!1),I=new K(u,Math.max(E,p));return s.rayIntersectionCoordinate(s.pointRayIntersection(I,v))}pointCoordinate3D(s,u,p){const v=new K(u,p);if(s.elevation)return s.elevation.pointCoordinate(v);{const E=this.pointCoordinate(s,v.x,v.y,0);return[E.x,E.y,E.z]}}isPointAboveHorizon(s,u){if(s.elevation)return!this.pointCoordinate3D(s,u.x,u.y);const p=s.horizonLineFromTop();return u.y<p}createInversionMatrix(s,u){return k1}createTileMatrix(s,u,p){let v,E,I;const M=p.canonical,R=qd(new Float64Array(16));if(this.isReprojectedInTileSpace){const L=Lm(M,this);v=1,E=L.x+p.wrap*L.scale,I=L.y,zf(R,R,[v/L.scale,v/L.scale,s.pixelsPerMeter/u])}else v=u/s.zoomScale(M.z),E=(M.x+Math.pow(2,M.z)*p.wrap)*v,I=M.y*v;return Cg(R,R,[E,I,0]),zf(R,R,[v/Er,v/Er,1]),R}upVector(s,u,p){return[0,0,1]}upVectorScale(s,u,p){return{metersToTile:1}}}class VM extends Sh{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[u,p]=this.parallels=s.parallels||[29.5,45.5],v=Math.sin(he(u));this.n=(v+Math.sin(he(p)))/2,this.c=1+v*(2*this.n-v),this.r0=Math.sqrt(this.c)/this.n}project(s,u){const{n:p,c:v,r0:E}=this,I=he(s-this.center[0]),M=he(u),R=Math.sqrt(v-2*p*Math.sin(M))/p;return{x:R*Math.sin(I*p),y:R*Math.cos(I*p)-E,z:0}}unproject(s,u){const{n:p,c:v,r0:E}=this,I=E+u;let M=Math.atan2(s,Math.abs(I))*Math.sign(I);I*p<0&&(M-=Math.PI*Math.sign(s)*Math.sign(I));const R=he(this.center[0])*p;M=De(M,-Math.PI-R,Math.PI-R);const L=Y(se(M/p)+this.center[0],-180,180),z=Math.asin(Y((v-(s*s+I*I)*p*p)/(2*p),-1,1)),V=Y(se(z),-Kc,Kc);return new Ho(L,V)}}const Nm=1.340264,Np=-.081106,Rl=893e-6,Fp=.003796,Xg=Math.sqrt(3)/2;class UM extends Sh{project(s,u){u=u/180*Math.PI,s=s/180*Math.PI;const p=Math.asin(Xg*Math.sin(u)),v=p*p,E=v*v*v;return{x:.5*(s*Math.cos(p)/(Xg*(Nm+3*Np*v+E*(7*Rl+9*Fp*v)))/Math.PI+.5),y:1-.5*(p*(Nm+Np*v+E*(Rl+Fp*v))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,v=p*p,E=v*v*v;for(let z,V,G,X=0;X<12&&(V=p*(Nm+Np*v+E*(Rl+Fp*v))-u,G=Nm+3*Np*v+E*(7*Rl+9*Fp*v),z=V/G,p=Y(p-z,-Math.PI/3,Math.PI/3),v=p*p,E=v*v*v,!(Math.abs(z)<1e-12));++X);const I=Xg*s*(Nm+3*Np*v+E*(7*Rl+9*Fp*v))/Math.cos(p),M=Math.asin(Math.sin(p)/Xg),R=Y(180*I/Math.PI,-180,180),L=Y(180*M/Math.PI,-Kc,Kc);return new Ho(R,L)}}class jM extends Sh{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){return{x:.5+s/360,y:.5-u/360,z:0}}unproject(s,u){const p=360*(s-.5),v=Y(360*(.5-u),-Kc,Kc);return new Ho(p,v)}}const Fm=Math.PI/2;function Hf(l){return Math.tan((Fm+l)/2)}class GM extends Sh{constructor(s){super(s),this.center=s.center||[0,30];const[u,p]=this.parallels=s.parallels||[30,30];let v=he(u),E=he(p);this.southernCenter=v+E<0,this.southernCenter&&(v=-v,E=-E);const I=Math.cos(v),M=Hf(v);this.n=v===E?Math.sin(v):Math.log(I/Math.cos(E))/Math.log(Hf(E)/M),this.f=I*Math.pow(Hf(v),this.n)/this.n}project(s,u){u=he(u),this.southernCenter&&(u=-u),s=he(s-this.center[0]);const p=1e-6,{n:v,f:E}=this;E>0?u<-Fm+p&&(u=-Fm+p):u>Fm-p&&(u=Fm-p);const I=E/Math.pow(Hf(u),v);let M=I*Math.sin(v*s),R=E-I*Math.cos(v*s);return M=.5*(M/Math.PI+.5),R=.5*(R/Math.PI+.5),{x:M,y:this.southernCenter?R:1-R,z:0}}unproject(s,u){s=(2*s-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:v}=this,E=v-u,I=Math.sign(E),M=Math.sign(p)*Math.sqrt(s*s+E*E);let R=Math.atan2(s,Math.abs(E))*I;E*p<0&&(R-=Math.PI*Math.sign(s)*I);const L=Y(se(R/p)+this.center[0],-180,180),z=Y(se(2*Math.atan(Math.pow(v/M,1/p))-Fm),-Kc,Kc);return new Ho(L,this.southernCenter?-z:z)}}class rI extends Sh{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,u){return{x:Kh(s),y:Uf(u),z:0}}unproject(s,u){const p=Yd(s),v=Zc(u);return new Ho(p,v)}}const oI=he(Kc);class P1 extends Sh{project(s,u){const p=(u=he(u))*u,v=p*p;return{x:.5*((s=he(s))*(.8707-.131979*p+v*(v*(.003971*p-.001529*v)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+v*(.028874*p-.044475-.005916*v)))/Math.PI+1),z:0}}unproject(s,u){s=(2*s-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,v=25,E=0,I=p*p;do{I=p*p;const L=I*I;E=(p*(1.007226+I*(.015085+L*(.028874*I-.044475-.005916*L)))-u)/(1.007226+I*(.045255+L*(.259866*I-.311325-.005916*11*L))),p=Y(p-E,-oI,oI)}while(Math.abs(E)>1e-6&&--v>0);I=p*p;const M=Y(se(s/(.8707+I*(I*(I*I*I*(.003971-.001529*I)-.013791)-.131979))),-180,180),R=se(p);return new Ho(M,R)}}const mv=he(Kc);class HM extends Sh{project(s,u){u=he(u),s=he(s);const p=Math.cos(u),v=2/Math.PI,E=Math.acos(p*Math.cos(s/2)),I=Math.sin(E)/E,M=.5*(s*v+2*p*Math.sin(s/2)/I)||0,R=.5*(u+Math.sin(u)/I)||0;return{x:.5*(M/Math.PI+.5),y:1-.5*(R/Math.PI+1),z:0}}unproject(s,u){let p=s=(2*s-.5)*Math.PI,v=u=(2*(1-u)-1)*Math.PI,E=25;const I=1e-6;let M=0,R=0;do{const L=Math.cos(v),z=Math.sin(v),V=2*z*L,G=z*z,X=L*L,oe=Math.cos(p/2),ve=Math.sin(p/2),Ue=2*oe*ve,ft=ve*ve,Pt=1-X*oe*oe,ht=Pt?1/Pt:0,Tt=Pt?Math.acos(L*oe)*Math.sqrt(1/Pt):0,Ft=.5*(2*Tt*L*ve+2*p/Math.PI)-s,zt=.5*(Tt*z+v)-u,En=.5*ht*(X*ft+Tt*L*oe*G)+1/Math.PI,pn=ht*(Ue*V/4-Tt*z*ve),$n=.125*ht*(V*ve-Tt*z*X*Ue),ci=.5*ht*(G*oe+Tt*ft*L)+.5,In=pn*$n-ci*En;M=(zt*pn-Ft*ci)/In,R=(Ft*$n-zt*En)/In,p=Y(p-M,-Math.PI,Math.PI),v=Y(v-R,-mv,mv)}while((Math.abs(M)>I||Math.abs(R)>I)&&--E>0);return new Ho(se(p),se(v))}}class R1 extends Sh{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(he(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,u){const{scale:p,cosPhi:v}=this;return{x:he(s)*v*p+.5,y:-Math.sin(he(u))/v*p+.5,z:0}}unproject(s,u){const{scale:p,cosPhi:v}=this,E=-(u-.5)/p,I=Y(se((s-.5)/p)/v,-180,180),M=Math.asin(Y(E*v,-1,1)),R=Y(se(M),-Kc,Kc);return new Ho(I,R)}}class rf extends rI{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,u,p){const v=Dg(s,u,p);return ja(v,v,bc(Ch(p))),{x:v[0],y:v[1],z:v[2]}}locationPoint(s,u){const p=wm(u.lat,u.lng),v=vc([],p),E=s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(u),s._centerAltitude):s._centerAltitude;Sg(p,p,v,Qh(1,0)*Er*E);const I=qd(new Float64Array(16));return pm(I,s.pixelMatrix,s.globeMatrix),ja(p,p,I),new K(p[0],p[1])}pixelsPerMeter(s,u){return Qh(1,0)*u}pixelSpaceConversion(s,u,p){const v=Qh(1,s)*u,E=lo(Qh(1,45)*u,v,p);return this.pixelsPerMeter(s,u)/E}createTileMatrix(s,u,p){const v=Ux(Ch(p.canonical));return pm(new Float64Array(16),s.globeMatrix,v)}createInversionMatrix(s,u){const{center:p}=s,v=bc(Ch(u));return V_(v,v,he(p.lng)),Hy(v,v,he(p.lat)),zf(v,v,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(v)}pointCoordinate(s,u,p,v){return H_(s,u,p,!0)||new kg(0,0)}pointCoordinate3D(s,u,p){const v=this.pointCoordinate(s,u,p,0);return[v.x,v.y,v.z]}isPointAboveHorizon(s,u){return!H_(s,u.x,u.y,!1)}farthestPixelDistance(s){const u=function(v,E){const I=v.cameraToCenterDistance,M=v._centerAltitude*E,R=v._camera,L=v._camera.forward(),z=ea([],Yu([],L,-I),[0,0,M]),V=v.worldSize/(2*Math.PI),G=[0,0,-V],X=v.width/v.height,oe=Math.tan(v.fovAboveCenter),ve=Yu([],R.up(),oe),Ue=Yu([],R.right(),oe*X),ft=vc([],ea([],ea([],L,ve),Ue)),Pt=[];let ht;if(new vm(z,ft).closestPointOnSphere(G,V,Pt)){const Tt=ea([],Pt,G),Ft=vd([],Tt,z);ht=Math.cos(v.fovAboveCenter)*_c(Ft)}else{const Tt=vd([],z,G),Ft=vd([],G,z);vc(Ft,Ft);const zt=_c(Tt)-V;ht=Math.sqrt(zt*(zt+2*V));const En=Math.acos(ht/(V+zt))-Math.acos(yc(L,Ft));ht*=Math.cos(En)}return 1.01*ht}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),p=yp(s.zoom);if(p>0){const v=Lp(s,Qh(1,s.center.lat)*s.worldSize),E=s.worldSize/(2*Math.PI),I=Math.max(s.width,s.height)/s.worldSize*Math.PI;return lo(u,v+E*(1-Math.cos(I)),Math.pow(p,10))}return u}upVector(s,u,p){return Dg(u,p,s,1)}upVectorScale(s){return{metersToTile:G_(vp(Ch(s)))}}}function qM(l){const s=l.parallels,u=!!s&&Math.abs(s[0]+s[1])<.01;switch(l.name){case"mercator":return new rI(l);case"equirectangular":return new jM(l);case"naturalEarth":return new P1(l);case"equalEarth":return new UM(l);case"winkelTripel":return new HM(l);case"albers":return u?new R1(l):new VM(l);case"lambertConformalConic":return u?new R1(l):new GM(l);case"globe":return new rf(l)}throw new Error(`Invalid projection name: ${l.name}`)}const Zd=J_.types,O1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function E0(l,s,u,p,v,E,I,M,R,L,z,V,G){const X=M?Math.min(Om,Math.round(M[0])):0,oe=M?Math.min(Om,Math.round(M[1])):0;l.emplaceBack(s,u,Math.round(32*p),Math.round(32*v),E,I,(X<<1)+(R?1:0),oe,16*L,16*z,256*V,256*G)}function L1(l,s,u,p,v,E,I){l.emplaceBack(s,u,p,v,E,I)}function N1(l,s,u,p,v){l.emplaceBack(s,u,p,v),l.emplaceBack(s,u,p,v),l.emplaceBack(s,u,p,v),l.emplaceBack(s,u,p,v)}function C0(l){for(const s of l.sections)if(qh(s.text))return!0;return!1}class F1{constructor(s){this.layoutVertexArray=new ni,this.indexArray=new dr,this.programConfigurations=s,this.segments=new Js,this.dynamicLayoutVertexArray=new li,this.opacityVertexArray=new vr,this.placedSymbolArray=new vs,this.globeExtVertexArray=new fi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(s,u,p,v){this.isEmpty()||(p&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,OS.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,NS.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,O1,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,LS.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||v)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}wi(F1,"SymbolBuffers");class gv{constructor(s,u,p){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new p,this.segments=new Js,this.collisionVertexArray=new uo,this.collisionVertexArrayExt=new ho}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,p1.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,FS.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}wi(gv,"CollisionBuffers");class sf{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(I=>I.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qd([]),this.placementViewportMatrix=qd([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zg(this.zoom,u["text-size"]),this.iconSizeData=zg(this.zoom,u["icon-size"]);const p=this.layers[0].layout,v=p.get("symbol-sort-key"),E=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==E&&void 0!==v.constantOr(1),this.sortFeaturesByY=("viewport-y"===E||"auto"===E&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(I=>Ju[I]),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=s.sourceID,this.projection=s.projection}createArrays(){this.text=new F1(new vu(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new F1(new vu(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new jl,this.lineVertexArray=new Oc,this.symbolInstances=new la}calculateGlyphDependencies(s,u,p,v,E){for(let I=0;I<s.length;I++)if(u[s.charCodeAt(I)]=!0,v&&E){const M=$g[s.charAt(I)];M&&(u[M.charCodeAt(0)]=!0)}}populate(s,u,p,v){const E=this.layers[0],I=E.layout,M="globe"===this.projection.name,R=I.get("text-font"),L=I.get("text-field"),z=I.get("icon-image"),V=("constant"!==L.value.kind||L.value.value instanceof Qs&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&("constant"!==R.value.kind||R.value.value.length>0),G="constant"!==z.value.kind||!!z.value.value||Object.keys(z.parameters).length>0,X=I.get("symbol-sort-key");if(this.features=[],!V&&!G)return;const oe=u.iconDependencies,ve=u.glyphDependencies,Ue=u.availableImages,ft=new $(this.zoom);for(const{feature:Pt,id:ht,index:Tt,sourceLayerIndex:Ft}of s){const zt=E._featureFilter.needGeometry,En=ef(Pt,zt);if(!E._featureFilter.filter(ft,En,p))continue;if(zt||(En.geometry=Jh(Pt,p,v)),M&&1!==Pt.type&&p.z<=5){const In=En.geometry,Wn=.98078528056,Yn=(ii,_i)=>yc(Dg(ii.x,ii.y,p,1),Dg(_i.x,_i.y,p,1))<Wn;for(let ii=0;ii<In.length;ii++)In[ii]=q_(In[ii],Yn)}let pn,$n;if(V){const In=E.getValueAndResolveTokens("text-field",En,p,Ue),Wn=Qs.factory(In);C0(Wn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===k()||this.hasRTLText&&F.isParsed())&&(pn=MM(Wn,E,En))}if(G){const In=E.getValueAndResolveTokens("icon-image",En,p,Ue);$n=In instanceof kr?In:kr.fromString(In)}if(!pn&&!$n)continue;const ci=this.sortFeaturesByKey?X.evaluate(En,{},p):void 0;if(this.features.push({id:ht,text:pn,icon:$n,index:Tt,sourceLayerIndex:Ft,geometry:En.geometry,properties:Pt.properties,type:Zd[Pt.type],sortKey:ci}),$n&&(oe[$n.name]=!0),pn){const In=R.evaluate(En,{},p).join(","),Wn="map"===I.get("text-rotation-alignment")&&"point"!==I.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ju.vertical)>=0;for(const Yn of pn.sections)if(Yn.image)oe[Yn.image.name]=!0;else{const ii=Ly(pn.toString()),_i=Yn.fontStack||In,Ln=ve[_i]=ve[_i]||{};this.calculateGlyphDependencies(Yn.text,Ln,Wn,this.allowVerticalPlacement,ii)}}}"line"===I.get("symbol-placement")&&(this.features=function(Pt){const ht={},Tt={},Ft=[];let zt=0;function En(In){Ft.push(Pt[In]),zt++}function pn(In,Wn,Yn){const ii=Tt[In];return delete Tt[In],Tt[Wn]=ii,Ft[ii].geometry[0].pop(),Ft[ii].geometry[0]=Ft[ii].geometry[0].concat(Yn[0]),ii}function $n(In,Wn,Yn){const ii=ht[Wn];return delete ht[Wn],ht[In]=ii,Ft[ii].geometry[0].shift(),Ft[ii].geometry[0]=Yn[0].concat(Ft[ii].geometry[0]),ii}function ci(In,Wn,Yn){const ii=Yn?Wn[0][Wn[0].length-1]:Wn[0][0];return`${In}:${ii.x}:${ii.y}`}for(let In=0;In<Pt.length;In++){const Wn=Pt[In],Yn=Wn.geometry,ii=Wn.text?Wn.text.toString():null;if(!ii){En(In);continue}const _i=ci(ii,Yn),Ln=ci(ii,Yn,!0);if(_i in Tt&&Ln in ht&&Tt[_i]!==ht[Ln]){const Oi=$n(_i,Ln,Yn),Wi=pn(_i,Ln,Ft[Oi].geometry);delete ht[_i],delete Tt[Ln],Tt[ci(ii,Ft[Wi].geometry,!0)]=Wi,Ft[Oi].geometry=null}else _i in Tt?pn(_i,Ln,Yn):Ln in ht?$n(_i,Ln,Yn):(En(In),ht[_i]=zt-1,Tt[Ln]=zt-1)}return Ft.filter(In=>In.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Pt,ht)=>Pt.sortKey-ht.sortKey)}update(s,u,p,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,p,v),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,p,v))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=qM(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){const p=this.lineVertexArray.length;if(void 0!==s.segment)for(const{x:v,y:E}of u)this.lineVertexArray.emplaceBack(v,E);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(s,u,p,v,E,I,M,R,L,z,V,G,X,oe){const ve=s.indexArray,Ue=s.layoutVertexArray,ft=s.globeExtVertexArray,Pt=s.segments.prepareSegment(4*u.length,Ue,ve,this.canOverlap?I.sortKey:void 0),ht=this.glyphOffsetArray.length,Tt=Pt.vertexLength,Ft=this.allowVerticalPlacement&&M===Ju.vertical?Math.PI/2:0,zt=I.text&&I.text.sections;for(let pn=0;pn<u.length;pn++){const{tl:$n,tr:ci,bl:In,br:Wn,tex:Yn,pixelOffsetTL:ii,pixelOffsetBR:_i,minFontScaleX:Ln,minFontScaleY:Oi,glyphOffset:Wi,isSDF:Li,sectionIndex:Zr}=u[pn],yi=Pt.vertexLength,xr=Wi[1];if(E0(Ue,L.x,L.y,$n.x,xr+$n.y,Yn.x,Yn.y,p,Li,ii.x,ii.y,Ln,Oi),E0(Ue,L.x,L.y,ci.x,xr+ci.y,Yn.x+Yn.w,Yn.y,p,Li,_i.x,ii.y,Ln,Oi),E0(Ue,L.x,L.y,In.x,xr+In.y,Yn.x,Yn.y+Yn.h,p,Li,ii.x,_i.y,Ln,Oi),E0(Ue,L.x,L.y,Wn.x,xr+Wn.y,Yn.x+Yn.w,Yn.y+Yn.h,p,Li,_i.x,_i.y,Ln,Oi),R){const{x:Kr,y:Oo,z:Gr}=R.anchor,[Pr,Us,Qr]=R.up;L1(ft,Kr,Oo,Gr,Pr,Us,Qr),L1(ft,Kr,Oo,Gr,Pr,Us,Qr),L1(ft,Kr,Oo,Gr,Pr,Us,Qr),L1(ft,Kr,Oo,Gr,Pr,Us,Qr),N1(s.dynamicLayoutVertexArray,Kr,Oo,Gr,Ft)}else N1(s.dynamicLayoutVertexArray,L.x,L.y,L.z,Ft);ve.emplaceBack(yi,yi+1,yi+2),ve.emplaceBack(yi+1,yi+2,yi+3),Pt.vertexLength+=4,Pt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wi[0]),pn!==u.length-1&&Zr===u[pn+1].sectionIndex||s.programConfigurations.populatePaintArrays(Ue.length,I,I.index,{},X,oe,zt&&zt[Zr])}const En=R?R.anchor:L;s.placedSymbolArray.emplaceBack(En.x,En.y,En.z,L.x,L.y,ht,this.glyphOffsetArray.length-ht,Tt,z,V,L.segment,p?p[0]:0,p?p[1]:0,v[0],v[1],M,0,!1,0,G,0)}_commitLayoutVertex(s,u,p,v,E,I,M){s.emplaceBack(u,p,v,E,I,Math.round(M.x),Math.round(M.y))}_addCollisionDebugVertices(s,u,p,v,E,I,M){const R=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),L=R.vertexLength,z=M.tileAnchorX,V=M.tileAnchorY;for(let X=0;X<4;X++)p.collisionVertexArray.emplaceBack(0,0,0,0);p.collisionVertexArrayExt.emplaceBack(u,-s.padding,-s.padding),p.collisionVertexArrayExt.emplaceBack(u,s.padding,-s.padding),p.collisionVertexArrayExt.emplaceBack(u,s.padding,s.padding),p.collisionVertexArrayExt.emplaceBack(u,-s.padding,s.padding),this._commitLayoutVertex(p.layoutVertexArray,v,E,I,z,V,new K(s.x1,s.y1)),this._commitLayoutVertex(p.layoutVertexArray,v,E,I,z,V,new K(s.x2,s.y1)),this._commitLayoutVertex(p.layoutVertexArray,v,E,I,z,V,new K(s.x2,s.y2)),this._commitLayoutVertex(p.layoutVertexArray,v,E,I,z,V,new K(s.x1,s.y2)),R.vertexLength+=4;const G=p.indexArray;G.emplaceBack(L,L+1),G.emplaceBack(L+1,L+2),G.emplaceBack(L+2,L+3),G.emplaceBack(L+3,L),R.primitiveLength+=4}_addTextDebugCollisionBoxes(s,u,p,v,E,I){for(let M=v;M<E;M++){const R=p.get(M),L=this.getSymbolInstanceTextSize(s,I,u,M);this._addCollisionDebugVertices(R,L,this.textCollisionBox,R.projectedAnchorX,R.projectedAnchorY,R.projectedAnchorZ,I)}}_addIconDebugCollisionBoxes(s,u,p,v,E,I){for(let M=v;M<E;M++){const R=p.get(M),L=this.getSymbolInstanceIconSize(s,u,I.placedIconSymbolIndex);this._addCollisionDebugVertices(R,L,this.iconCollisionBox,R.projectedAnchorX,R.projectedAnchorY,R.projectedAnchorZ,I)}}generateCollisionDebugBuffers(s,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gv(qi,sv.members,va),this.iconCollisionBox=new gv(qi,sv.members,va);const p=kp(this.iconSizeData,s),v=kp(this.textSizeData,s);for(let E=0;E<this.symbolInstances.length;E++){const I=this.symbolInstances.get(E);this._addTextDebugCollisionBoxes(v,s,u,I.textBoxStartIndex,I.textBoxEndIndex,I),this._addTextDebugCollisionBoxes(v,s,u,I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I),this._addIconDebugCollisionBoxes(p,s,u,I.iconBoxStartIndex,I.iconBoxEndIndex,I),this._addIconDebugCollisionBoxes(p,s,u,I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I)}}getSymbolInstanceTextSize(s,u,p,v){const E=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:v),I=lv(this.textSizeData,s,E)/ic;return this.tilePixelRatio*I}getSymbolInstanceIconSize(s,u,p){const v=this.icon.placedSymbolArray.get(p),E=lv(this.iconSizeData,s,v);return this.tilePixelRatio*E}_commitDebugCollisionVertexUpdate(s,u,p){s.emplaceBack(u,-p,-p),s.emplaceBack(u,p,-p),s.emplaceBack(u,p,p),s.emplaceBack(u,-p,p)}_updateTextDebugCollisionBoxes(s,u,p,v,E,I){for(let M=v;M<E;M++){const R=p.get(M),L=this.getSymbolInstanceTextSize(s,I,u,M);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,L,R.padding)}}_updateIconDebugCollisionBoxes(s,u,p,v,E,I){for(let M=v;M<E;M++){const R=p.get(M),L=this.getSymbolInstanceIconSize(s,u,I);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,L,R.padding)}}updateCollisionDebugBuffers(s,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=kp(this.iconSizeData,s),v=kp(this.textSizeData,s);for(let E=0;E<this.symbolInstances.length;E++){const I=this.symbolInstances.get(E);this._updateTextDebugCollisionBoxes(v,s,u,I.textBoxStartIndex,I.textBoxEndIndex,I),this._updateTextDebugCollisionBoxes(v,s,u,I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I),this._updateIconDebugCollisionBoxes(p,s,u,I.iconBoxStartIndex,I.iconBoxEndIndex,I.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(p,s,u,I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,u,p,v,E,I,M,R,L){const z={};if(u<p){const{x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt,featureIndex:Ft}=s.get(u);z.textBox={x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt},z.textFeatureIndex=Ft}if(v<E){const{x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt,featureIndex:Ft}=s.get(v);z.verticalTextBox={x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt},z.verticalTextFeatureIndex=Ft}if(I<M){const{x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt,featureIndex:Ft}=s.get(I);z.iconBox={x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt},z.iconFeatureIndex=Ft}if(R<L){const{x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt,featureIndex:Ft}=s.get(R);z.verticalIconBox={x1:V,y1:G,x2:X,y2:oe,padding:ve,projectedAnchorX:Ue,projectedAnchorY:ft,projectedAnchorZ:Pt,tileAnchorX:ht,tileAnchorY:Tt},z.verticalIconFeatureIndex=Ft}return z}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,u){const p=s.placedSymbolArray.get(u),v=p.vertexStartIndex+4*p.numGlyphs;for(let E=p.vertexStartIndex;E<v;E+=4)s.indexArray.emplaceBack(E,E+1,E+2),s.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const u=Math.sin(s),p=Math.cos(s),v=[],E=[],I=[];for(let M=0;M<this.symbolInstances.length;++M){I.push(M);const R=this.symbolInstances.get(M);v.push(0|Math.round(u*R.tileAnchorX+p*R.tileAnchorY)),E.push(R.featureIndex)}return I.sort((M,R)=>v[M]-v[R]||E[R]-E[M]),I}addToSortKeyRanges(s,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:E,leftJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:M,placedIconSymbolIndex:R,verticalPlacedIconSymbolIndex:L}=p;v>=0&&this.addIndicesForPlacedSymbol(this.text,v),E>=0&&E!==v&&this.addIndicesForPlacedSymbol(this.text,E),I>=0&&I!==E&&I!==v&&this.addIndicesForPlacedSymbol(this.text,I),M>=0&&this.addIndicesForPlacedSymbol(this.text,M),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R),L>=0&&this.addIndicesForPlacedSymbol(this.icon,L)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}wi(sf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=N1;const Yg=new Et({"symbol-placement":new pe(Mn.layout_symbol["symbol-placement"]),"symbol-spacing":new pe(Mn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new pe(Mn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ye(Mn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new pe(Mn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new pe(Mn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new pe(Mn.layout_symbol["icon-ignore-placement"]),"icon-optional":new pe(Mn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new pe(Mn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ye(Mn.layout_symbol["icon-size"]),"icon-text-fit":new pe(Mn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pe(Mn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ye(Mn.layout_symbol["icon-image"]),"icon-rotate":new Ye(Mn.layout_symbol["icon-rotate"]),"icon-padding":new pe(Mn.layout_symbol["icon-padding"]),"icon-keep-upright":new pe(Mn.layout_symbol["icon-keep-upright"]),"icon-offset":new Ye(Mn.layout_symbol["icon-offset"]),"icon-anchor":new Ye(Mn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new pe(Mn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new pe(Mn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new pe(Mn.layout_symbol["text-rotation-alignment"]),"text-field":new Ye(Mn.layout_symbol["text-field"]),"text-font":new Ye(Mn.layout_symbol["text-font"]),"text-size":new Ye(Mn.layout_symbol["text-size"]),"text-max-width":new Ye(Mn.layout_symbol["text-max-width"]),"text-line-height":new Ye(Mn.layout_symbol["text-line-height"]),"text-letter-spacing":new Ye(Mn.layout_symbol["text-letter-spacing"]),"text-justify":new Ye(Mn.layout_symbol["text-justify"]),"text-radial-offset":new Ye(Mn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new pe(Mn.layout_symbol["text-variable-anchor"]),"text-anchor":new Ye(Mn.layout_symbol["text-anchor"]),"text-max-angle":new pe(Mn.layout_symbol["text-max-angle"]),"text-writing-mode":new pe(Mn.layout_symbol["text-writing-mode"]),"text-rotate":new Ye(Mn.layout_symbol["text-rotate"]),"text-padding":new pe(Mn.layout_symbol["text-padding"]),"text-keep-upright":new pe(Mn.layout_symbol["text-keep-upright"]),"text-transform":new Ye(Mn.layout_symbol["text-transform"]),"text-offset":new Ye(Mn.layout_symbol["text-offset"]),"text-allow-overlap":new pe(Mn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new pe(Mn.layout_symbol["text-ignore-placement"]),"text-optional":new pe(Mn.layout_symbol["text-optional"])});var _v={paint:new Et({"icon-opacity":new Ye(Mn.paint_symbol["icon-opacity"]),"icon-color":new Ye(Mn.paint_symbol["icon-color"]),"icon-halo-color":new Ye(Mn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ye(Mn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ye(Mn.paint_symbol["icon-halo-blur"]),"icon-translate":new pe(Mn.paint_symbol["icon-translate"]),"icon-translate-anchor":new pe(Mn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ye(Mn.paint_symbol["text-opacity"]),"text-color":new Ye(Mn.paint_symbol["text-color"],{runtimeType:ce,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Ye(Mn.paint_symbol["text-halo-color"]),"text-halo-width":new Ye(Mn.paint_symbol["text-halo-width"]),"text-halo-blur":new Ye(Mn.paint_symbol["text-halo-blur"]),"text-translate":new pe(Mn.paint_symbol["text-translate"]),"text-translate-anchor":new pe(Mn.paint_symbol["text-translate-anchor"])}),layout:Yg};class S0{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:gt,this.defaultValue=s}evaluate(s){if(s.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wi(S0,"FormatSectionOverride",{omit:["defaultValue"]});class Bp extends gc{constructor(s){super(s,_v)}recalculate(s,u){super.recalculate(s,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const v=[];for(const E of p)v.indexOf(E)<0&&v.push(E);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(s,u,p,v){const E=this.layout.get(s).evaluate(u,{},p,v),I=this._unevaluatedLayout._values[s];return I.isDataDriven()||$a(I.value)||!E?E:(M=u.properties,E.replace(/{([^{}]+)}/g,(L,z)=>z in M?String(M[z]):""));var M}createBucket(s){return new sf(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of _v.paint.overridableProperties){if(!Bp.hasPaintOverride(this.layout,s))continue;const u=this.paint.get(s),p=new S0(u),v=new $d(p,u.property.specification);let E=null;E="constant"===u.value.kind||"source"===u.value.kind?new aa("source",v):new Bi("composite",v,u.value.zoomStops,u.value._interpolationType),this.paint._values[s]=new ot(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&Bp.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){const p=s.get("text-field"),v=_v.paint.properties[u];let E=!1;const I=M=>{for(const R of M)if(v.overrides&&v.overrides.hasOverride(R))return void(E=!0)};if("constant"===p.value.kind&&p.value.value instanceof Qs)I(p.value.value.sections);else if("source"===p.value.kind){const M=L=>{E||(L instanceof Ka&&Ta(L.value)===Re?I(L.value.sections):L instanceof Ic?I(L.sections):L.eachChild(M))},R=p.value;R._styleExpression&&M(R._styleExpression.expression)}return E}getProgramConfiguration(s){return new Hd(this,s)}}var I0={paint:new Et({"background-color":new pe(Mn.paint_background["background-color"]),"background-pattern":new pe(Mn.paint_background["background-pattern"]),"background-opacity":new pe(Mn.paint_background["background-opacity"])})},Zg={paint:new Et({"raster-opacity":new pe(Mn.paint_raster["raster-opacity"]),"raster-hue-rotate":new pe(Mn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new pe(Mn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new pe(Mn.paint_raster["raster-brightness-max"]),"raster-saturation":new pe(Mn.paint_raster["raster-saturation"]),"raster-contrast":new pe(Mn.paint_raster["raster-contrast"]),"raster-resampling":new pe(Mn.paint_raster["raster-resampling"]),"raster-fade-duration":new pe(Mn.paint_raster["raster-fade-duration"])})};class B1 extends gc{constructor(s){super(s,{}),this.implementation=s}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}var z1={paint:new Et({"sky-type":new pe(Mn.paint_sky["sky-type"]),"sky-atmosphere-sun":new pe(Mn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new pe(Mn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new pe(Mn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new pe(Mn.paint_sky["sky-gradient-radius"]),"sky-gradient":new bt(Mn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new pe(Mn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new pe(Mn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new pe(Mn.paint_sky["sky-opacity"])})};function Kg(l,s,u){const p=[0,0,1],v=eM([]);return tM(v,v,u?-he(l)+Math.PI:he(l)),qy(v,v,-he(s)),j_(p,p,v),vc(p,p)}const BF={circle:class extends gc{constructor(l){super(l,uM)}createBucket(l){return new uS(l)}queryRadius(l){const s=l;return Rg("circle-radius",this,s)+Rg("circle-stroke-width",this,s)+Og(this.paint.get("circle-translate"))}queryIntersectsFeature(l,s,u,p,v,E,I,M){const R=mS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),L=this.paint.get("circle-radius").evaluate(s,u)+this.paint.get("circle-stroke-width").evaluate(s,u);return Lg(l,p,E,I,M,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),R,L)}getProgramIds(){return["circle"]}getProgramConfiguration(l){return new Hd(this,l)}},heatmap:class extends gc{createBucket(l){return new Zx(l)}constructor(l){super(l,MF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"heatmap-color"===l&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ky({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return Rg("heatmap-radius",this,l)}queryIntersectsFeature(l,s,u,p,v,E,I,M){const R=this.paint.get("heatmap-radius").evaluate(s,u);return Lg(l,p,E,I,M,!0,!0,new K(0,0),R)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(l){return new Hd(this,l)}},hillshade:class extends gc{constructor(l){super(l,hM)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends gc{constructor(l){super(l,yM)}getProgramIds(){const l=this.paint.get("fill-pattern"),s=l&&l.constantOr(1),u=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(l){return new Hd(this,l)}recalculate(l,s){super.recalculate(l,s);const u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Fg(l)}queryRadius(){return Og(this.paint.get("fill-translate"))}queryIntersectsFeature(l,s,u,p,v,E){return!l.queryGeometry.isAboveHorizon&&Ku(W_(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}},"fill-extrusion":class extends gc{constructor(l){super(l,SM)}createBucket(l){return new tv(l)}queryRadius(){return Og(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(l){return new Hd(this,l)}queryIntersectsFeature(l,s,u,p,v,E,I,M,R){const L=mS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),z=this.paint.get("fill-extrusion-height").evaluate(s,u),V=this.paint.get("fill-extrusion-base").evaluate(s,u),G=[0,0],X=M&&E.elevation,oe=E.elevation?E.elevation.exaggeration():1,ve=l.tile.getBucket(this);if(X&&ve instanceof tv){const Tt=ve.centroidVertexArray,Ft=R+1;Ft<Tt.length&&(G[0]=Tt.geta_centroid_pos0(Ft),G[1]=Tt.geta_centroid_pos1(Ft))}if(0===G[0]&&1===G[1])return!1;"globe"===E.projection.name&&(p=o0([p],[new K(0,0),new K(Er,Er)],l.tileID.canonical).map(Tt=>Tt.polygon).flat());const Ue=X?M:null,[ft,Pt]=(Ft=p,zt=V,En=z,pn=L,$n=I,ci=Ue,In=G,Wn=oe,Yn=E.center.lat,"globe"===(Tt=E).projection.name?function(_i,Ln,Oi,Wi,Li,Zr,yi,xr,Kr,Oo,Gr){const Pr=[],Us=[],Qr=_i.projection.upVectorScale(Gr,_i.center.lat,_i.worldSize).metersToTile,Xr=[0,0,0,1],js=[0,0,0,1],ta=(Gs,pr,si,fl)=>{Gs[0]=pr,Gs[1]=si,Gs[2]=fl,Gs[3]=1},Ks=h1();Oi>0&&(Oi+=Ks),Wi+=Ks;for(const Gs of Ln){const pr=[],si=[];for(const fl of Gs){const re=fl.x+Li.x,tl=fl.y+Li.y,Cl=_i.projection.projectTilePoint(re,tl,Gr),ya=_i.projection.upVector(Gr,fl.x,fl.y);let wo=Oi,nl=Wi;if(yi){const Ts=c0(re,tl,Oi,Wi,yi,xr,Kr,Oo);wo+=Ts.base,nl+=Ts.top}0!==Oi?ta(Xr,Cl.x+ya[0]*Qr*wo,Cl.y+ya[1]*Qr*wo,Cl.z+ya[2]*Qr*wo):ta(Xr,Cl.x,Cl.y,Cl.z),ta(js,Cl.x+ya[0]*Qr*nl,Cl.y+ya[1]*Qr*nl,Cl.z+ya[2]*Qr*nl),ja(Xr,Xr,Zr),ja(js,js,Zr),pr.push(new Dm(Xr[0],Xr[1],Xr[2])),si.push(new Dm(js[0],js[1],js[2]))}Pr.push(pr),Us.push(si)}return[Pr,Us]}(Tt,Ft,zt,En,pn,$n,ci,In,Wn,Yn,l.tileID.canonical):ci?function(_i,Ln,Oi,Wi,Li,Zr,yi,xr,Kr){const Oo=[],Gr=[],Pr=[0,0,0,1];for(const Us of _i){const Qr=[],Xr=[];for(const js of Us){const ta=js.x+Wi.x,Ks=js.y+Wi.y,Gs=c0(ta,Ks,Ln,Oi,Zr,yi,xr,Kr);Pr[0]=ta,Pr[1]=Ks,Pr[2]=Gs.base,Pr[3]=1,wh(Pr,Pr,Li),Pr[3]=Math.max(Pr[3],1e-5);const pr=new Dm(Pr[0]/Pr[3],Pr[1]/Pr[3],Pr[2]/Pr[3]);Pr[0]=ta,Pr[1]=Ks,Pr[2]=Gs.top,Pr[3]=1,wh(Pr,Pr,Li),Pr[3]=Math.max(Pr[3],1e-5);const si=new Dm(Pr[0]/Pr[3],Pr[1]/Pr[3],Pr[2]/Pr[3]);Qr.push(pr),Xr.push(si)}Oo.push(Qr),Gr.push(Xr)}return[Oo,Gr]}(Ft,zt,En,pn,$n,ci,In,Wn,Yn):function(_i,Ln,Oi,Wi,Li){const Zr=[],yi=[],xr=Li[8]*Ln,Kr=Li[9]*Ln,Oo=Li[10]*Ln,Gr=Li[11]*Ln,Pr=Li[8]*Oi,Us=Li[9]*Oi,Qr=Li[10]*Oi,Xr=Li[11]*Oi;for(const js of _i){const ta=[],Ks=[];for(const Gs of js){const pr=Gs.x+Wi.x,si=Gs.y+Wi.y,fl=Li[0]*pr+Li[4]*si+Li[12],re=Li[1]*pr+Li[5]*si+Li[13],tl=Li[2]*pr+Li[6]*si+Li[14],Cl=Li[3]*pr+Li[7]*si+Li[15],ya=fl+xr,wo=re+Kr,nl=tl+Oo,Ts=Math.max(Cl+Gr,1e-5),Qc=fl+Pr,il=re+Us,Gl=tl+Qr,Ol=Math.max(Cl+Xr,1e-5);ta.push(new Dm(ya/Ts,wo/Ts,nl/Ts)),Ks.push(new Dm(Qc/Ol,il/Ol,Gl/Ol))}Zr.push(ta),yi.push(Ks)}return[Zr,yi]}(Ft,zt,En,pn,$n)),ht=l.queryGeometry;var Tt,Ft,zt,En,pn,$n,ci,In,Wn,Yn;return function(Tt,Ft,zt){let En=1/0;Ku(zt,Ft)&&(En=l0(zt,Ft[0]));for(let pn=0;pn<Ft.length;pn++){const $n=Ft[pn],ci=Tt[pn];for(let In=0;In<$n.length-1;In++){const Wn=$n[In],Yn=[Wn,$n[In+1],ci[In+1],ci[In],Wn];dS(zt,Yn)&&(En=Math.min(En,l0(zt,Yn)))}}return En!==1/0&&En}(ft,Pt,ht.isPointQuery()?ht.screenBounds:ht.screenGeometry)}},line:class extends gc{constructor(l){super(l,AM),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if("line-gradient"===l){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof Bd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,s){super.recalculate(l,s),this.paint._values["line-floorwidth"]=ov.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new rv(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(l){return new Hd(this,l)}queryRadius(l){const s=l,u=RS(Rg("line-width",this,s),Rg("line-gap-width",this,s)),p=Rg("line-offset",this,s);return u/2+Math.abs(p)+Og(this.paint.get("line-translate"))}queryIntersectsFeature(l,s,u,p,v,E){if(l.queryGeometry.isAboveHorizon)return!1;const I=W_(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,l.pixelToTileUnitsFactor),M=l.pixelToTileUnitsFactor/2*RS(this.paint.get("line-width").evaluate(s,u),this.paint.get("line-gap-width").evaluate(s,u)),R=this.paint.get("line-offset").evaluate(s,u);return R&&(p=function(L,z){const V=[],G=new K(0,0);for(let X=0;X<L.length;X++){const oe=L[X],ve=[];for(let Ue=0;Ue<oe.length;Ue++){const ft=oe[Ue],Pt=oe[Ue+1],ht=0===Ue?G:ft.sub(oe[Ue-1])._unit()._perp(),Tt=Ue===oe.length-1?G:Pt.sub(ft)._unit()._perp(),Ft=ht._add(Tt)._unit();Ft._mult(1/(Ft.x*Tt.x+Ft.y*Tt.y)),ve.push(Ft._mult(z)._add(ft))}V.push(ve)}return V}(p,R*l.pixelToTileUnitsFactor)),function(L,z,V){for(let G=0;G<z.length;G++){const X=z[G];if(L.length>=3)for(let oe=0;oe<X.length;oe++)if(Cm(L,X[oe]))return!0;if(Wx(L,X,V))return!0}return!1}(I,p,M)}isTileClipped(){return!0}},symbol:Bp,background:class extends gc{constructor(l){super(l,I0)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends gc{constructor(l){super(l,Zg)}getProgramIds(){return["raster"]}},sky:class extends gc{constructor(l){super(l,z1),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"sky-gradient"===l?this._updateColorRamp():"sky-atmosphere-sun"!==l&&"sky-atmosphere-halo-color"!==l&&"sky-atmosphere-color"!==l&&"sky-atmosphere-sun-intensity"!==l||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ky({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(l,s){if("atmosphere"===this.paint.get("sky-type")){const p=this.paint.get("sky-atmosphere-sun"),v=!p,E=l.style.light,I=E.properties.get("position");return v&&"viewport"===E.properties.get("anchor")&&cn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),v?Kg(I.azimuthal,90-I.polar,s):Kg(p[0],90-p[1],s)}const u=this.paint.get("sky-gradient-center");return Kg(u[0],90-u[1],s)}is3D(){return!1}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return"atmosphere"===l?["skyboxCapture","skybox"]:"gradient"===l?["skyboxGradient"]:null}}};class Bm{constructor(s,u,p,v){this.context=s,this.format=p,this.texture=s.gl.createTexture(),this.update(u,v)}update(s,u,p){const{width:v,height:E}=s,{context:I}=this,{gl:M}=I,{HTMLImageElement:R,HTMLCanvasElement:L,HTMLVideoElement:z,ImageData:V,ImageBitmap:G}=fe;if(M.bindTexture(M.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||!1!==u.premultiply)),p||this.size&&this.size[0]===v&&this.size[1]===E){const{x:X,y:oe}=p||{x:0,y:0};s instanceof R||s instanceof L||s instanceof z||s instanceof V||G&&s instanceof G?M.texSubImage2D(M.TEXTURE_2D,0,X,oe,M.RGBA,M.UNSIGNED_BYTE,s):M.texSubImage2D(M.TEXTURE_2D,0,X,oe,v,E,M.RGBA,M.UNSIGNED_BYTE,s.data)}else this.size=[v,E],s instanceof R||s instanceof L||s instanceof z||s instanceof V||G&&s instanceof G?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,s):M.texImage2D(M.TEXTURE_2D,0,this.format,v,E,0,this.format,M.UNSIGNED_BYTE,s.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&M.generateMipmap(M.TEXTURE_2D)}bind(s,u){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),s!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap?s===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_NEAREST:s),this.filter=s),u!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class vv{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class WM{constructor(){this.tasks={},this.taskQueue=[],kn(["process"],this),this.invoker=new vv(this.process),this.nextId=0}add(s,u){const p=this.nextId++,v=function({type:E,isSymbolTile:I,zoom:M}){return M=M||0,"message"===E?0:"maybePrepare"!==E||I?"parseTile"!==E||I?"parseTile"===E&&I?300-M:"maybePrepare"===E&&I?400-M:500:200-M:100-M}(u);if(0===v){Gn();try{s()}finally{}return{cancel:()=>{}}}return this.tasks[p]={fn:s,metadata:u,priority:v,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){Gn();try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const s=this.pick();if(null===s)return;const u=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let s=null,u=1/0;for(let v=0;v<this.taskQueue.length;v++){const E=this.tasks[this.taskQueue[v]];E.priority<u&&(u=E.priority,s=v)}if(null===s)return null;const p=this.taskQueue[s];return this.taskQueue.splice(s,1),p}remove(){this.invoker.remove()}}class $1{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){const p=s[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const XM=["tile","layer","source","sourceLayer","state"];class sI{constructor(s,u,p,v,E){this.type="Feature",this._vectorTileFeature=s,this._z=u,this._x=p,this._y=v,this.properties=s.properties,this.id=E}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(s.id=this.id);for(const u of XM)void 0!==this[u]&&(s[u]=this[u]);return s}}const zp=new Uint16Array(8184);for(let l=0;l<2046;l++){let s=l+2,u=0,p=0,v=0,E=0,I=0,M=0;for(1&s?v=E=I=32:u=p=M=32;(s>>=1)>1;){const L=u+v>>1,z=p+E>>1;1&s?(v=u,E=p,u=I,p=M):(u=v,p=E,v=I,E=M),I=L,M=z}const R=4*l;zp[R+0]=u,zp[R+1]=p,zp[R+2]=v,zp[R+3]=E}const af=new Uint16Array(2178),zm=new Uint8Array(1089),T0=new Uint16Array(1089);function yv(l){return 0===l?-.03125:32===l?.03125:0}var D0=Kt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const aI={type:2,extent:Er,loadGeometry:()=>[[new K(0,0),new K(Er+1,0),new K(Er+1,Er+1),new K(0,Er+1),new K(0,0)]]};class A0{constructor(s,u,p,v,E){this.tileID=s,this.uid=et(),this.uses=0,this.tileSize=u,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=E,this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(s){const u=s+this.timeAdded;u<To.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Lm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(s,u,p){if(this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(v,E){const I={};if(!E)return I;for(const M of v){const R=M.layerIds.map(L=>E.getLayer(L)).filter(Boolean);if(0!==R.length){M.layers=R,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(L=>R.filter(z=>z.id===L)[0]));for(const L of R)I[L.id]=M}}return I}(s.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof sf){if(this.hasSymbolBuckets=!0,!p)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof sf&&E.hasRTLText){this.hasRTLText=!0,F.isLoading()||F.isLoaded()||"deferred"!==k()||N();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(E))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),s.lineAtlas&&(this.lineAtlas=s.lineAtlas)}else this.collisionBoxArray=new Ps}unloadVectorData(){if(this.hasData()){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(s){return this.buckets[s.id]}upload(s){for(const p in this.buckets){const v=this.buckets[p];v.uploadPending()&&v.upload(s)}const u=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Bm(s,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Bm(s,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Bm(s,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,u,p,v,E,I,M,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:v,pixelPosMatrix:M,transform:I,params:E,tileTransform:this.tileTransform},s,u,p):{}}querySourceFeatures(s,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const v=p.loadVTLayers(),E=u?u.sourceLayer:"",I=v._geojsonTileLayer||v[E];if(!I)return;const M=gd(u&&u.filter),{z:R,x:L,y:z}=this.tileID.canonical,V={z:R,x:L,y:z};for(let G=0;G<I.length;G++){const X=I.feature(G);if(M.needGeometry){const Ue=ef(X,!0);if(!M.filter(new $(this.tileID.overscaledZ),Ue,this.tileID.canonical))continue}else if(!M.filter(new $(this.tileID.overscaledZ),X))continue;const oe=p.getId(X,E),ve=new sI(X,R,L,z,oe);ve.tile=V,s.push(ve)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const u=this.expirationTime;if(s.cacheControl){const p=At(s.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const p=Date.now();let v=!1;if(this.expirationTime>p)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const E=this.expirationTime-u;E?this.expirationTime=p+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length||!u)return;const p=this.latestFeatureIndex.loadVTLayers(),v=u.style.listImages();for(const E in this.buckets){if(!u.style.hasLayer(E))continue;const I=this.buckets[E],M=I.layers[0].sourceLayer||"_geojsonTileLayer",R=p[M],L=s[M];if(!R||!L||0===Object.keys(L).length)continue;if(I.update(L,R,v,this.imageAtlas&&this.imageAtlas.patternPositions||{}),I instanceof rv||I instanceof Fg){const V=u.style._getSourceCache(I.layers[0].source);u._terrain&&u._terrain.enabled&&V&&I.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(V.id,this.tileID)}const z=u&&u.style&&u.style.getLayer(E);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(I)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<To.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=To.now()+s}setTexture(s,u){const p=u.context,v=p.gl;this.texture=this.texture||u.getTileTexture(s.width),this.texture?this.texture.update(s,{useMipmap:!0}):(this.texture=new Bm(p,s,v.RGBA,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(s,u){const p={};for(const v of u)p[v]=!0;this.dependencies[s]=p}hasDependency(s,u){for(const p of s){const v=this.dependencies[p];if(v)for(const E of u)if(v[E])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(s,u){if(!u||"mercator"===u.name||this._tileDebugBuffer)return;const p=Jh(aI,this.tileID.canonical,this.tileTransform)[0],v=new hi,E=new Fu;for(let I=0;I<p.length;I++){const{x:M,y:R}=p[I];v.emplaceBack(M,R),E.emplaceBack(I)}E.emplaceBack(0),this._tileDebugIndexBuffer=s.createIndexBuffer(E),this._tileDebugBuffer=s.createVertexBuffer(v,_m.members),this._tileDebugSegments=Js.simpleSegment(0,0,v.length,E.length)}_makeTileBoundsBuffers(s,u){if(this._tileBoundsBuffer||!u||"mercator"===u.name)return;const p=Jh(aI,this.tileID.canonical,this.tileTransform)[0];let v,E;if(this.isRaster){const I=function(M,R){const L=Lm(M,R),z=Math.pow(2,M.z);for(let Ue=0;Ue<33;Ue++)for(let ft=0;ft<33;ft++){const Pt=Yd((M.x+(ft+yv(ft))/32)/z),ht=Zc((M.y+(Ue+yv(Ue))/32)/z),Tt=R.project(Pt,ht),Ft=33*Ue+ft;af[2*Ft+0]=Math.round((Tt.x*L.scale-L.x)*Er),af[2*Ft+1]=Math.round((Tt.y*L.scale-L.y)*Er)}zm.fill(0),T0.fill(0);for(let Ue=2045;Ue>=0;Ue--){const ft=4*Ue,Pt=zp[ft+0],ht=zp[ft+1],Tt=zp[ft+2],Ft=zp[ft+3],zt=Pt+Tt>>1,En=ht+Ft>>1,pn=zt+En-ht,$n=En+Pt-zt,ci=33*ht+Pt,In=33*Ft+Tt,Wn=33*En+zt,Yn=Math.hypot((af[2*ci+0]+af[2*In+0])/2-af[2*Wn+0],(af[2*ci+1]+af[2*In+1])/2-af[2*Wn+1])>=16;zm[Wn]=zm[Wn]||(Yn?1:0),Ue<1022&&(zm[Wn]=zm[Wn]||zm[33*(ht+$n>>1)+(Pt+pn>>1)]||zm[33*(Ft+$n>>1)+(Tt+pn>>1)])}const V=new Hn,G=new dr;let X=0;function oe(Ue,ft){const Pt=33*ft+Ue;return 0===T0[Pt]&&(V.emplaceBack(af[2*Pt+0],af[2*Pt+1],Ue*Er/32,ft*Er/32),T0[Pt]=++X),T0[Pt]-1}function ve(Ue,ft,Pt,ht,Tt,Ft){const zt=Ue+Pt>>1,En=ft+ht>>1;if(Math.abs(Ue-Tt)+Math.abs(ft-Ft)>1&&zm[33*En+zt])ve(Tt,Ft,Ue,ft,zt,En),ve(Pt,ht,Tt,Ft,zt,En);else{const pn=oe(Ue,ft),$n=oe(Pt,ht),ci=oe(Tt,Ft);G.emplaceBack(pn,$n,ci)}}return ve(0,0,32,32,32,0),ve(32,32,0,0,0,32),{vertices:V,indices:G}}(this.tileID.canonical,u);v=I.vertices,E=I.indices}else{v=new Hn,E=new dr;for(const{x:M,y:R}of p)v.emplaceBack(M,R,0,0);const I=t0(v.int16,void 0,4);for(let M=0;M<I.length;M+=3)E.emplaceBack(I[M],I[M+1],I[M+2])}this._tileBoundsBuffer=s.createVertexBuffer(v,D0.members),this._tileBoundsIndexBuffer=s.createIndexBuffer(E),this._tileBoundsSegments=Js.simpleSegment(0,0,v.length,E.length)}_makeGlobeTileDebugBuffers(s,u){const p=u.projection;if(!p||"globe"!==p.name||u.freezeTileCoverage)return;const v=this.tileID.canonical,E=bc($x(v,u)),I=yp(u.zoom);let M;I>0&&(M=$_(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(s,v,u,E,M,I),this._makeGlobeTileDebugTextBuffer(s,v,u,E,M,I)}_globePoint(s,u,p,v,E,I,M){let R=Dg(s,u,p);if(I){const L=1<<p.z,z=Kh(v.center.lng),V=Uf(v.center.lat),G=(p.x+.5)/L-z;let X=0;G>.5?X=-1:G<-.5&&(X=1);let oe=(s/Er+p.x)/L+X,ve=(u/Er+p.y)/L;oe=(oe-z)*v._pixelsPerMercatorPixel+z,ve=(ve-V)*v._pixelsPerMercatorPixel+V;const Ue=[oe*v.worldSize,ve*v.worldSize,0];ja(Ue,Ue,I),R=_p(R,Ue,M)}return ja(R,R,E)}_makeGlobeTileDebugBorderBuffer(s,u,p,v,E,I){const M=new hi,R=new Fu,L=new mn,z=(G,X,oe,ve,Ue)=>{const ft=(oe-G)/(Ue-1),Pt=(ve-X)/(Ue-1),ht=M.length;for(let Tt=0;Tt<Ue;Tt++){const Ft=G+Tt*ft,zt=X+Tt*Pt;M.emplaceBack(Ft,zt);const En=this._globePoint(Ft,zt,u,p,v,E,I);L.emplaceBack(En[0],En[1],En[2]),R.emplaceBack(ht+Tt)}},V=Er;z(0,0,V,0,16),z(V,0,V,V,16),z(V,V,0,V,16),z(0,V,0,0,16),this._tileDebugIndexBuffer=s.createIndexBuffer(R),this._tileDebugBuffer=s.createVertexBuffer(M,_m.members),this._globeTileDebugBorderBuffer=s.createVertexBuffer(L,oM.members),this._tileDebugSegments=Js.simpleSegment(0,0,M.length,R.length)}_makeGlobeTileDebugTextBuffer(s,u,p,v,E,I){const M=Er/4,R=new hi,L=new dr,z=new mn,V=25;L.reserve(32),R.reserve(V),z.reserve(V);const G=(X,oe)=>V*X+oe;for(let X=0;X<V;X++){const oe=X*M;for(let ve=0;ve<V;ve++){const Ue=ve*M;R.emplaceBack(Ue,oe);const ft=this._globePoint(Ue,oe,u,p,v,E,I);z.emplaceBack(ft[0],ft[1],ft[2])}}for(let X=0;X<4;X++)for(let oe=0;oe<4;oe++){const ve=G(X,oe),Ue=G(X,oe+1),ft=G(X+1,oe),Pt=G(X+1,oe+1);L.emplaceBack(ve,Ue,ft),L.emplaceBack(ft,Ue,Pt)}this._tileDebugTextIndexBuffer=s.createIndexBuffer(L),this._tileDebugTextBuffer=s.createVertexBuffer(R,_m.members),this._globeTileDebugTextBuffer=s.createVertexBuffer(z,oM.members),this._tileDebugTextSegments=Js.simpleSegment(0,0,V,32)}}class V1{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,u,p){const v=String(u);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][v]=this.stateChanges[s][v]||{},ae(this.stateChanges[s][v],p),null===this.deletedStates[s]){this.deletedStates[s]={};for(const E in this.state[s])E!==v&&(this.deletedStates[s][E]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][v]){this.deletedStates[s][v]={};for(const E in this.state[s][v])p[E]||(this.deletedStates[s][v][E]=null)}else for(const E in p)this.deletedStates[s]&&this.deletedStates[s][v]&&null===this.deletedStates[s][v][E]&&delete this.deletedStates[s][v][E]}removeFeatureState(s,u,p){if(null===this.deletedStates[s])return;const v=String(u);if(this.deletedStates[s]=this.deletedStates[s]||{},p&&void 0!==u)null!==this.deletedStates[s][v]&&(this.deletedStates[s][v]=this.deletedStates[s][v]||{},this.deletedStates[s][v][p]=null);else if(void 0!==u)if(this.stateChanges[s]&&this.stateChanges[s][v])for(p in this.deletedStates[s][v]={},this.stateChanges[s][v])this.deletedStates[s][v][p]=null;else this.deletedStates[s][v]=null;else this.deletedStates[s]=null}getState(s,u){const p=String(u),v=ae({},(this.state[s]||{})[p],(this.stateChanges[s]||{})[p]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const E=this.deletedStates[s][u];if(null===E)return{};for(const I in E)delete v[I]}return v}initializeTileState(s,u){s.setFeatureState(this.state,u)}coalesceChanges(s,u){const p={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const I in this.stateChanges[v])this.state[v][I]||(this.state[v][I]={}),ae(this.state[v][I],this.stateChanges[v][I]),E[I]=this.state[v][I];p[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(null===this.deletedStates[v])for(const I in this.state[v])E[I]={},this.state[v][I]={};else for(const I in this.deletedStates[v]){if(null===this.deletedStates[v][I])this.state[v][I]={};else if(this.state[v][I])for(const M of Object.keys(this.deletedStates[v][I]))delete this.state[v][I][M];E[I]=this.state[v][I]}p[v]=p[v]||{},ae(p[v],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const v in s)s[v].setFeatureState(p,u)}}class bv{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,u){const p=this.toIdx(s,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(s,u){return this.leaves[this.toIdx(s,u)]}toIdx(s,u){return u*this.size+s}}function lI(l,s,u,p){let v=0,E=Number.MAX_VALUE;for(let I=0;I<3;I++)if(Math.abs(p[I])<1e-15){if(u[I]<l[I]||u[I]>s[I])return null}else{const M=1/p[I];let R=(l[I]-u[I])*M,L=(s[I]-u[I])*M;if(R>L){const z=R;R=L,L=z}if(R>v&&(v=R),L<E&&(E=L),v>E)return null}return v}function U1(l,s,u,p,v,E,I,M,R,L,z){const V=p-l,G=v-s,X=E-u,oe=I-l,ve=M-s,Ue=R-u,ft=z[1]*Ue-z[2]*ve,Pt=z[2]*oe-z[0]*Ue,ht=z[0]*ve-z[1]*oe,Tt=V*ft+G*Pt+X*ht;if(Math.abs(Tt)<1e-15)return null;const Ft=1/Tt,zt=L[0]-l,En=L[1]-s,pn=L[2]-u,$n=(zt*ft+En*Pt+pn*ht)*Ft;if($n<0||$n>1)return null;const ci=En*X-pn*G,In=pn*V-zt*X,Wn=zt*G-En*V,Yn=(z[0]*ci+z[1]*In+z[2]*Wn)*Ft;return Yn<0||$n+Yn>1?null:(oe*ci+ve*In+Ue*Wn)*Ft}function cI(l,s,u){return(l-s)/(u-s)}function j1(l,s,u,p,v,E,I,M,R){const L=1<<u,z=E-p,V=I-v,G=(l+1)/L*z+p,X=(s+0)/L*V+v,oe=(s+1)/L*V+v;M[0]=(l+0)/L*z+p,M[1]=X,R[0]=G,R[1]=oe}class YM{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(E){const I=Math.ceil(Math.log2(E.dim/8)),M=[];let R=Math.ceil(Math.pow(2,I));const L=1/R,z=(X,oe,ve,Ue,ft)=>{const Pt=Ue?1:0,ht=(X+1)*ve-Pt,Tt=oe*ve,Ft=(oe+1)*ve-Pt;ft[0]=X*ve,ft[1]=Tt,ft[2]=ht,ft[3]=Ft};let V=new bv(R);const G=[];for(let X=0;X<R*R;X++){z(X%R,Math.floor(X/R),L,!1,G);const oe=Ed(G[0],G[1],E),ve=Ed(G[2],G[1],E),Ue=Ed(G[2],G[3],E),ft=Ed(G[0],G[3],E);V.minimums.push(Math.min(oe,ve,Ue,ft)),V.maximums.push(Math.max(oe,ve,Ue,ft)),V.leaves.push(1)}for(M.push(V),R/=2;R>=1;R/=2){const X=M[M.length-1];V=new bv(R);for(let oe=0;oe<R*R;oe++){z(oe%R,Math.floor(oe/R),2,!0,G);const ve=X.getElevation(G[0],G[1]),Ue=X.getElevation(G[2],G[1]),ft=X.getElevation(G[2],G[3]),Pt=X.getElevation(G[0],G[3]),ht=X.isLeaf(G[0],G[1]),Tt=X.isLeaf(G[2],G[1]),Ft=X.isLeaf(G[2],G[3]),zt=X.isLeaf(G[0],G[3]),En=Math.min(ve.min,Ue.min,ft.min,Pt.min),pn=Math.max(ve.max,Ue.max,ft.max,Pt.max),$n=ht&&Tt&&Ft&&zt;V.maximums.push(pn),V.minimums.push(En),V.leaves.push(pn-En<=5&&$n?1:0)}M.push(V)}return M}(this.dem),p=u.length-1,v=u[p];this._addNode(v.minimums[0],v.maximums[0],v.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(s,u,p,v,E,I,M=1){return lI([s,u,-100],[p,v,this.maximums[0]*M],E,I)}raycast(s,u,p,v,E,I,M=1){if(!this.nodeCount)return null;const R=this.raycastRoot(s,u,p,v,E,I,M);if(null==R)return null;const L=[],z=[],V=[],G=[],X=[{idx:0,t:R,nodex:0,nodey:0,depth:0}];for(;X.length>0;){const{idx:oe,t:ve,nodex:Ue,nodey:ft,depth:Pt}=X.pop();if(this.leaves[oe]){j1(Ue,ft,Pt,s,u,p,v,V,G);const Tt=1<<Pt,Ft=(Ue+0)/Tt,zt=(Ue+1)/Tt,En=(ft+0)/Tt,pn=(ft+1)/Tt,$n=Ed(Ft,En,this.dem)*M,ci=Ed(zt,En,this.dem)*M,In=Ed(zt,pn,this.dem)*M,Wn=Ed(Ft,pn,this.dem)*M,Yn=U1(V[0],V[1],$n,G[0],V[1],ci,G[0],G[1],In,E,I),ii=U1(G[0],G[1],In,V[0],G[1],Wn,V[0],V[1],$n,E,I),_i=Math.min(null!==Yn?Yn:Number.MAX_VALUE,null!==ii?ii:Number.MAX_VALUE);if(_i!==Number.MAX_VALUE)return _i;{const Ln=Sg([],E,I,ve);if(uI($n,ci,Wn,In,cI(Ln[0],V[0],G[0]),cI(Ln[1],V[1],G[1]))>=Ln[2])return ve}continue}let ht=0;for(let Tt=0;Tt<this._siblingOffset.length;Tt++){j1((Ue<<1)+this._siblingOffset[Tt][0],(ft<<1)+this._siblingOffset[Tt][1],Pt+1,s,u,p,v,V,G),V[2]=-100,G[2]=this.maximums[this.childOffsets[oe]+Tt]*M;const Ft=lI(V,G,E,I);if(null!=Ft){const zt=Ft;L[Tt]=zt;let En=!1;for(let pn=0;pn<ht&&!En;pn++)zt>=L[z[pn]]&&(z.splice(pn,0,Tt),En=!0);En||(z[ht]=Tt),ht++}}for(let Tt=0;Tt<ht;Tt++){const Ft=z[Tt];X.push({idx:this.childOffsets[oe]+Ft,t:L[Ft],nodex:(Ue<<1)+this._siblingOffset[Ft][0],nodey:(ft<<1)+this._siblingOffset[Ft][1],depth:Pt+1})}}return null}_addNode(s,u,p){return this.minimums.push(s),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(s,u,p,v,E){if(1===s[v].isLeaf(u,p))return;this.childOffsets[E]||(this.childOffsets[E]=this.nodeCount);const I=v-1,M=s[I];let R=0,L=0;for(let z=0;z<this._siblingOffset.length;z++){const V=2*u+this._siblingOffset[z][0],G=2*p+this._siblingOffset[z][1],X=M.getElevation(V,G),oe=M.isLeaf(V,G),ve=this._addNode(X.min,X.max,oe);oe&&(R|=1<<z),L||(L=ve)}for(let z=0;z<this._siblingOffset.length;z++)R&1<<z||this._construct(s,2*u+this._siblingOffset[z][0],2*p+this._siblingOffset[z][1],I,L+z)}}function uI(l,s,u,p,v,E){return lo(lo(l,u,E),lo(s,p,E),v)}function Ed(l,s,u){const p=u.dim,v=Y(l*p-.5,0,p-1),E=Y(s*p-.5,0,p-1),I=Math.floor(v),M=Math.floor(E),R=Math.min(I+1,p-1),L=Math.min(M+1,p-1);return uI(u.get(I,M),u.get(R,M),u.get(I,L),u.get(R,L),v-I,E-M)}const dI={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Qg(l,s,u){return(256*l*256+256*s+u)/10-1e4}function Kn(l,s,u){return 256*l+s+u/256-32768}class M0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,u,p,v=!1,E=!1){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return cn(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const I=this.dim=u.height-2,M=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=p||"mapbox",this.borderReady=v,!v){for(let R=0;R<I;R++)M[this._idx(-1,R)]=M[this._idx(0,R)],M[this._idx(I,R)]=M[this._idx(I-1,R)],M[this._idx(R,-1)]=M[this._idx(R,0)],M[this._idx(R,I)]=M[this._idx(R,I-1)];M[this._idx(-1,-1)]=M[this._idx(0,0)],M[this._idx(I,-1)]=M[this._idx(I-1,0)],M[this._idx(-1,I)]=M[this._idx(0,I-1)],M[this._idx(I,I)]=M[this._idx(I-1,I-1)],E&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new YM(this)}get(s,u,p=!1){p&&(s=Y(s,-1,this.dim),u=Y(u,-1,this.dim));const v=4*this._idx(s,u);return("terrarium"===this.encoding?Kn:Qg)(this.pixels[v],this.pixels[v+1],this.pixels[v+2])}static getUnpackVector(s){return dI[s]}get unpackVector(){return dI[this.encoding]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}static pack(s,u){const p=[0,0,0,0],v=M0.getUnpackVector(u);let E=Math.floor((s+v[3])/v[2]);return p[2]=E%256,E=Math.floor(E/256),p[1]=E%256,E=Math.floor(E/256),p[0]=E,p}getPixels(){return new Qu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,u,p){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let v=u*this.dim,E=u*this.dim+this.dim,I=p*this.dim,M=p*this.dim+this.dim;switch(u){case-1:v=E-1;break;case 1:E=v+1}switch(p){case-1:I=M-1;break;case 1:M=I+1}const R=-u*this.dim,L=-p*this.dim;for(let z=I;z<M;z++)for(let V=v;V<E;V++){const G=4*this._idx(V,z),X=4*this._idx(V+R,z+L);this.pixels[G+0]=s.pixels[X+0],this.pixels[G+1]=s.pixels[X+1],this.pixels[G+2]=s.pixels[X+2],this.pixels[G+3]=s.pixels[X+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}wi(M0,"DEMData"),wi(YM,"DemMinMaxQuadTree",{omit:["dem"]});class xv{constructor(s,u){this.max=s,this.onRemove=u,this.reset()}reset(){for(const s in this.data)for(const u of this.data[s])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(s,u,p){const v=s.wrapped().key;void 0===this.data[v]&&(this.data[v]=[]);const E={value:u,timeout:void 0};if(void 0!==p&&(E.timeout=setTimeout(()=>{this.remove(s,E)},p)),this.data[v].push(E),this.order.push(v),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const u=this.data[s].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),u.value}getByKey(s){const u=this.data[s];return u?u[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,u){if(!this.has(s))return this;const p=s.wrapped().key,v=void 0===u?0:this.data[p].indexOf(u),E=this.data[p][v];return this.data[p].splice(v,1),E.timeout&&clearTimeout(E.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(E.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(s){const u=[];for(const p in this.data)for(const v of this.data[p])s(v.value)||u.push(v);for(const p of u)this.remove(p.value.tileID,p)}}class td{constructor(s,u,p){this.func=s,this.mask=u,this.range=p}}td.ReadOnly=!1,td.ReadWrite=!0,td.disabled=new td(519,td.ReadOnly,[0,1]);class H1{constructor(s,u,p,v,E,I){this.test=s,this.ref=u,this.mask=p,this.fail=v,this.depthFail=E,this.pass=I}}H1.disabled=new H1({func:519,mask:0},0,0,7680,7680,7680);class wu{constructor(s,u,p){this.blendFunction=s,this.blendColor=u,this.mask=p}}wu.Replace=[1,0],wu.disabled=new wu(wu.Replace,As.transparent,[!1,!1,!1,!1]),wu.unblended=new wu(wu.Replace,As.transparent,[!0,!0,!0,!0]),wu.alphaBlended=new wu([1,771],As.transparent,[!0,!0,!0,!0]);class lf{constructor(s,u,p){this.enable=s,this.mode=u,this.frontFace=p}}lf.disabled=new lf(!1,1029,2305),lf.backCCW=new lf(!0,1029,2305),lf.backCW=new lf(!0,1029,2304),lf.frontCW=new lf(!0,1028,2304),lf.frontCCW=new lf(!0,1028,2305);class qf extends ar{constructor(s,u,p){super(),this.id=s,this._onlySymbols=p,u.on("data",v=>{"source"===v.dataType&&"metadata"===v.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===v.dataType&&"content"===v.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new xv(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new V1,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(s){this.map=s,this._minTileCacheSize=void 0===this._minTileCacheSize&&s?s._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&s?s._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const s in this._tiles){const u=this._tiles[s];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(s,u){return s.isSymbolTile=this._onlySymbols,this._source.loadTile(s,u)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){if(this._source.abortTile)return this._source.abortTile(s,()=>{})}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(s),p.prepare(this.map.style.imageManager)}}getIds(){return $e(this._tiles).map(s=>s.tileID).sort(W1).map(s=>s.key)}getRenderableIds(s){const u=[];for(const p in this._tiles)this._isIdRenderable(+p,s)&&u.push(this._tiles[p]);return s?u.sort((p,v)=>{const E=p.tileID,I=v.tileID,M=new K(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),R=new K(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-I.overscaledZ||R.y-M.y||R.x-M.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(W1).map(p=>p.key)}hasRenderableParent(s){const u=this.findLoadedParent(s,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(s,u){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(u||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(+s,"reloading")}}_reloadTile(s,u){const p=this._tiles[s];p&&("loading"!==p.state&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,s,u)))}_tileLoaded(s,u,p,v){if(v)if(s.state="errored",404!==v.status)this._source.fire(new no(v,{tile:s}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const E=this.map.painter.terrain;this.update(this.transform,E.getScaledDemTileSize(),!0),E.resetTileLookupCache(this.id)}else this.update(this.transform);else s.timeAdded=To.now(),"expired"===p&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(u,s),"raster-dem"===this._source.type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),this._source.fire(new No("data",{dataType:"source",tile:s,coord:s.tileID,sourceCacheId:this.id}))}_backfillDEM(s){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const E=u[v];if(s.neighboringTiles&&s.neighboringTiles[E]){const I=this.getTileByID(E);p(s,I),p(I,s)}}function p(v,E){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let I=E.tileID.canonical.x-v.tileID.canonical.x;const M=E.tileID.canonical.y-v.tileID.canonical.y,R=Math.pow(2,v.tileID.canonical.z),L=E.tileID.key;0===I&&0===M||Math.abs(M)>1||(Math.abs(I)>1&&(1===Math.abs(I+R)?I+=R:1===Math.abs(I-R)&&(I-=R)),E.dem&&v.dem&&(v.dem.backfillBorder(E.dem,I,M),v.neighboringTiles&&v.neighboringTiles[L]&&(v.neighboringTiles[L].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,u,p,v){for(const E in this._tiles){let I=this._tiles[E];if(v[E]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>p)continue;let M=I.tileID;for(;I&&I.tileID.overscaledZ>u+1;){const L=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[L.key],I&&I.hasData()&&(M=L)}let R=M;for(;R.overscaledZ>u;)if(R=R.scaledTo(R.overscaledZ-1),s[R.key]){v[M.key]=M;break}}}findLoadedParent(s,u){if(s.key in this._loadedParentTiles){const p=this._loadedParentTiles[s.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=s.overscaledZ-1;p>=u;p--){const v=s.scaledTo(p),E=this._getLoadedTile(v);if(E)return E}}_getLoadedTile(s){const u=this._tiles[s.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?s.wrapped().key:s.canonical.key)}updateCacheSize(s,u){u=u||this._source.tileSize;const p=Math.ceil(s.width/u)+1,v=Math.ceil(s.height/u)+1,E=Math.floor(p*v*5),I="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,E):E,M="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(M)}handleWrapJump(s){const u=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,u){const p={};for(const v in this._tiles){const E=this._tiles[v];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),p[E.tileID.key]=E}this._tiles=p;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(s,u,p){if(this.transform=s,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;let v;this.updateCacheSize(s,u),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(M=>new xu(M.canonical.z,M.wrap,M.canonical.z,M.canonical.x,M.canonical.y)):(v=s.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(v=v.filter(M=>this._source.hasTile(M)))):v=[];const E=this._updateRetainedTiles(v);if(hI(this._source.type)&&0!==v.length){const M={},R={},L=Object.keys(E);for(const V of L){const G=E[V],X=this._tiles[V];if(!X||X.fadeEndTime&&X.fadeEndTime<=To.now())continue;const oe=this.findLoadedParent(G,Math.max(G.overscaledZ-qf.maxOverzooming,this._source.minzoom));oe&&(this._addTile(oe.tileID),M[oe.tileID.key]=oe.tileID),R[V]=G}const z=v[v.length-1].overscaledZ;for(const V in this._tiles){const G=this._tiles[V];if(E[V]||!G.hasData())continue;let X=G.tileID;for(;X.overscaledZ>z;){X=X.scaledTo(X.overscaledZ-1);const oe=this._tiles[X.key];if(oe&&oe.hasData()&&R[X.key]){E[V]=G.tileID;break}}}for(const V in M)E[V]||(this._coveredTiles[V]=!0,E[V]=M[V])}for(const M in E)this._tiles[M].clearFadeHold();const I=function(M,R){const L=[];for(const z in M)z in R||L.push(z);return L}(this._tiles,E);for(const M of I){const R=this._tiles[M];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(+M)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(+s)}_updateRetainedTiles(s){const u={};if(0===s.length)return u;const p={},v=s.reduce((L,z)=>Math.min(L,z.overscaledZ),1/0),E=s[0].overscaledZ,I=Math.max(E-qf.maxOverzooming,this._source.minzoom),M=Math.max(E+qf.maxUnderzooming,this._source.minzoom),R={};for(const L of s){const z=this._addTile(L);u[L.key]=L,z.hasData()||v<this._source.maxzoom&&(R[L.key]=L)}this._retainLoadedChildren(R,v,M,u);for(const L of s){let z=this._tiles[L.key];if(z.hasData())continue;if(L.canonical.z>=this._source.maxzoom){const G=L.children(this._source.maxzoom)[0],X=this.getTile(G);if(X&&X.hasData()){u[G.key]=G;continue}}else{const G=L.children(this._source.maxzoom);if(u[G[0].key]&&u[G[1].key]&&u[G[2].key]&&u[G[3].key])continue}let V=z.wasRequested();for(let G=L.overscaledZ-1;G>=I;--G){const X=L.scaledTo(G);if(p[X.key]||(p[X.key]=!0,z=this.getTile(X),!z&&V&&(z=this._addTile(X)),z&&(u[X.key]=X,V=z.wasRequested(),z.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const u=[];let p,v=this._tiles[s].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){p=this._loadedParentTiles[v.key];break}u.push(v.key);const E=v.scaledTo(v.overscaledZ-1);if(p=this._getLoadedTile(E),p)break;v=E}for(const E of u)this._loadedParentTiles[E]=p}}_addTile(s){let u=this._tiles[s.key];if(u)return u;u=this._cache.getAndRemove(s),u&&(this._setTileReloadTimer(s.key,u),u.tileID=s,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,u)));const p=!!u;if(!p){const v=this.map?this.map.painter:null;u=new A0(s,this._source.tileSize*s.overscaleFactor(),this.transform.tileZoom,v,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,s.key,u.state))}return u?(u.uses++,this._tiles[s.key]=u,p||this._source.fire(new No("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(s,u){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const p=u.getExpiryTimeout();p&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},p))}_removeTile(s){const u=this._tiles[s];u&&(u.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(+s);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(s,u,p){const v=[],E=this.transform;if(!E)return v;const I="globe"===E.projection.name,M=Kh(E.center.lng);for(const R in this._tiles){const L=this._tiles[R];if(p&&L.clearQueryDebugViz(),L.holdingForFade())continue;let z;if(I){const V=L.tileID.canonical;if(0===V.z){const G=[Math.abs(Y(M,...Ev(V,-1))-M),Math.abs(Y(M,...Ev(V,1))-M)];z=[0,2*G.indexOf(Math.min(...G))-1]}else{const G=[Math.abs(Y(M,...Ev(V,-1))-M),Math.abs(Y(M,...Ev(V,0))-M),Math.abs(Y(M,...Ev(V,1))-M)];z=[G.indexOf(Math.min(...G))-1]}}else z=[0];for(const V of z){const G=s.containsTile(L,E,u,V);G&&v.push(G)}}return v}getVisibleCoordinates(s){const u=this.getRenderableIds(s).map(p=>this._tiles[p].tileID);for(const p of u)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(hI(this._source.type))for(const s in this._tiles){const u=this._tiles[s];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=To.now())return!0}return!1}setFeatureState(s,u,p){this._state.updateState(s=s||"_geojsonTileLayer",u,p)}removeFeatureState(s,u,p){this._state.removeFeatureState(s=s||"_geojsonTileLayer",u,p)}getFeatureState(s,u){return this._state.getState(s=s||"_geojsonTileLayer",u)}setDependencies(s,u,p){const v=this._tiles[s];v&&v.setDependencies(u,p)}reloadTilesForDependencies(s,u){for(const p in this._tiles)this._tiles[p].hasDependency(s,u)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(s,u))}_preloadTiles(s,u){if(!this._sourceLoaded){const M=()=>{this._sourceLoaded&&(this._source.off("data",M),this._preloadTiles(s,u))};return void this._source.on("data",M)}const p=new Map,v=Array.isArray(s)?s:[s],E=this.map.painter.terrain,I=this.usedForTerrain&&E?E.getScaledDemTileSize():this._source.tileSize;for(const M of v){const R=M.coveringTiles({tileSize:I,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const L of R)p.set(L.key,L);this.usedForTerrain&&M.updateElevation(!1)}Ke(Array.from(p.values()),(M,R)=>{const L=new A0(M,this._source.tileSize*M.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(L,z=>{"raster-dem"===this._source.type&&L.dem&&this._backfillDEM(L),R(z,L)})},u)}}function W1(l,s){const u=Math.abs(2*l.wrap)-+(l.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return l.overscaledZ-s.overscaledZ||p-u||s.canonical.y-l.canonical.y||s.canonical.x-l.canonical.x}function hI(l){return"raster"===l||"image"===l||"video"===l||"custom"===l}function Ev(l,s){const u=1<<l.z;return[l.x/u+s,(l.x+1)/u+s]}qf.maxOverzooming=10,qf.maxUnderzooming=3;class Cv{constructor(s,u,p){this._demTile=s,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(s,u,p){const v=p||s.findDEMTileFor(u);if(!v||!v.dem)return;const E=v.dem,I=v.tileID,M=1<<u.canonical.z-I.canonical.z;return new Cv(v,v.tileSize/Er/M,[(u.canonical.x/M-I.canonical.x)*E.dim,(u.canonical.y/M-I.canonical.y)*E.dim])}tileCoordToPixel(s,u){const p=u*this._scale+this._offset[1],v=Math.floor(s*this._scale+this._offset[0]),E=Math.floor(p);return new K(v,E)}getElevationAt(s,u,p,v){const E=s*this._scale+this._offset[0],I=u*this._scale+this._offset[1],M=Math.floor(E),R=Math.floor(I),L=this._dem;return v=!!v,p?lo(lo(L.get(M,R,v),L.get(M,R+1,v),I-R),lo(L.get(M+1,R,v),L.get(M+1,R+1,v),I-R),E-M):L.get(M,R,v)}getElevationAtPixel(s,u,p){return this._dem.get(s,u,!!p)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Qh(1,s)*this._dem.stride}}class fI{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new fr(Er,16,0),this.featureIndexArray=new fm,this.promoteId=u}insert(s,u,p,v,E,I=0){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,v,E,I);const R=this.grid;for(let L=0;L<u.length;L++){const z=u[L],V=[1/0,1/0,-1/0,-1/0];for(let G=0;G<z.length;G++){const X=z[G];V[0]=Math.min(V[0],X.x),V[1]=Math.min(V[1],X.y),V[2]=Math.max(V[2],X.x),V[3]=Math.max(V[3],X.y)}V[0]<Er&&V[1]<Er&&V[2]>=0&&V[3]>=0&&R.insert(M,V[0],V[1],V[2],V[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new l1(new h0(this.rawTileData)).layers,this.sourceLayerCoder=new $1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,u,p,v){this.loadVTLayers();const E=s.params||{},I=gd(E.filter),M=s.tileResult,R=s.transform,L=M.bufferedTilespaceBounds,z=this.grid.query(L.min.x,L.min.y,L.max.x,L.max.y,(oe,ve,Ue,ft)=>pS(M.bufferedTilespaceGeometry,oe,ve,Ue,ft));z.sort(ZM);let V=null;R.elevation&&z.length>0&&(V=Cv.create(R.elevation,this.tileID));const G={};let X;for(let oe=0;oe<z.length;oe++){const ve=z[oe];if(ve===X)continue;X=ve;const Ue=this.featureIndexArray.get(ve);let ft=null;this.loadMatchingFeature(G,Ue,I,E.layers,E.availableImages,u,p,v,(Pt,ht,Tt,Ft=0)=>(ft||(ft=Jh(Pt,this.tileID.canonical,s.tileTransform)),ht.queryIntersectsFeature(M,Pt,Tt,ft,this.z,s.transform,s.pixelPosMatrix,V,Ft)))}return G}loadMatchingFeature(s,u,p,v,E,I,M,R,L){const{featureIndex:z,bucketIndex:V,sourceLayerIndex:G,layoutVertexArrayOffset:X}=u,oe=this.bucketLayerIDs[V];if(v&&!function(Pt,ht){for(let Tt=0;Tt<Pt.length;Tt++)if(ht.indexOf(Pt[Tt])>=0)return!0;return!1}(v,oe))return;const ve=this.sourceLayerCoder.decode(G),Ue=this.vtLayers[ve].feature(z);if(p.needGeometry){const Pt=ef(Ue,!0);if(!p.filter(new $(this.tileID.overscaledZ),Pt,this.tileID.canonical))return}else if(!p.filter(new $(this.tileID.overscaledZ),Ue))return;const ft=this.getId(Ue,ve);for(let Pt=0;Pt<oe.length;Pt++){const ht=oe[Pt];if(v&&v.indexOf(ht)<0)continue;const Tt=I[ht];if(!Tt)continue;let Ft={};void 0!==ft&&R&&(Ft=R.getState(Tt.sourceLayer||"_geojsonTileLayer",ft));const zt=ae({},M[ht]);zt.paint=X1(zt.paint,Tt.paint,Ue,Ft,E),zt.layout=X1(zt.layout,Tt.layout,Ue,Ft,E);const En=!L||L(Ue,Tt,Ft,X);if(!En)continue;const pn=new sI(Ue,this.z,this.x,this.y,ft);pn.layer=zt;let $n=s[ht];void 0===$n&&($n=s[ht]=[]),$n.push({featureIndex:z,feature:pn,intersectionZ:En})}}lookupSymbolFeatures(s,u,p,v,E,I,M,R){const L={};this.loadVTLayers();const z=gd(E);for(const V of s)this.loadMatchingFeature(L,{bucketIndex:p,sourceLayerIndex:v,featureIndex:V,layoutVertexArrayOffset:0},z,I,M,R,u);return L}loadFeature(s){const{featureIndex:u,sourceLayerIndex:p}=s;this.loadVTLayers();const v=this.sourceLayerCoder.decode(p),E=this.vtFeatures[v];if(E[u])return E[u];const I=this.vtLayers[v].feature(u);return E[u]=I,I}hasLayer(s){for(const u of this.bucketLayerIDs)for(const p of u)if(s===p)return!0;return!1}getId(s,u){let p=s.id;if(this.promoteId){const v="string"==typeof this.promoteId?this.promoteId:this.promoteId[u];null!=v&&(p=s.properties[v]),"boolean"==typeof p&&(p=Number(p))}return p}}function X1(l,s,u,p,v){return Vt(l,(E,I)=>{const M=s instanceof dt?s.get(I):null;return M&&M.evaluate?M.evaluate(u,p,v):M})}function ZM(l,s){return s-l}wi(fI,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class pI{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.image=new bd({width:s,height:u}),this.positions={},this.uploaded=!1}getDash(s,u){const p=this.getKey(s,u);return this.positions[p]}trim(){const s=this.width,u=this.height=qt(this.nextRow);this.image.resize({width:s,height:u})}getKey(s,u){return s.join(",")+u}getDashRanges(s,u,p){const v=[];let E=s.length%2==1?-s[s.length-1]*p:0,I=s[0]*p,M=!0;v.push({left:E,right:I,isDash:M,zeroLength:0===s[0]});let R=s[0];for(let L=1;L<s.length;L++){M=!M;const z=s[L];E=R*p,R+=z,I=R*p,v.push({left:E,right:I,isDash:M,zeroLength:0===z})}return v}addRoundDash(s,u,p){const v=u/2;for(let E=-p;E<=p;E++){const I=this.width*(this.nextRow+p+E);let M=0,R=s[M];for(let L=0;L<this.width;L++){L/R.right>1&&(R=s[++M]);const z=Math.abs(L-R.left),V=Math.abs(L-R.right),G=Math.min(z,V);let X;const oe=E/p*(v+1);if(R.isDash){const ve=v-Math.abs(oe);X=Math.sqrt(G*G+ve*ve)}else X=v-Math.sqrt(G*G+oe*oe);this.image.data[I+L]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(s,u){for(let R=s.length-1;R>=0;--R){const L=s[R],z=s[R+1];L.zeroLength?s.splice(R,1):z&&z.isDash===L.isDash&&(z.left=L.left,s.splice(R,1))}const p=s[0],v=s[s.length-1];p.isDash===v.isDash&&(p.left=v.left-this.width,v.right=p.right+this.width);const E=this.width*this.nextRow;let I=0,M=s[I];for(let R=0;R<this.width;R++){R/M.right>1&&(M=s[++I]);const L=Math.abs(R-M.left),z=Math.abs(R-M.right),V=Math.min(L,z);this.image.data[E+R]=Math.max(0,Math.min(255,(M.isDash?V:-V)+u+128))}}addDash(s,u){const p=this.getKey(s,u);if(this.positions[p])return this.positions[p];const v="round"===u,E=v?7:0,I=2*E+1;if(this.nextRow+I>this.height)return cn("LineAtlas out of space"),null;0===s.length&&s.push(1);let M=0;for(let z=0;z<s.length;z++)s[z]<0&&(cn("Negative value is found in line dasharray, replacing values with 0"),s[z]=0),M+=s[z];if(0!==M){const z=this.width/M,V=this.getDashRanges(s,this.width,z);v?this.addRoundDash(V,z,E):this.addRegularDash(V,"square"===u?.5*z:0)}const R=this.nextRow+E;this.nextRow+=I;const L={tl:[R,E],br:[M,0]};return this.positions[p]=L,L}}wi(pI,"LineAtlas");const KM=1*Ga;class Y1{constructor(s){const u={},p=[];for(const M in s){const R=s[M],L=u[M]={};for(const z in R.glyphs){const V=R.glyphs[+z];if(!V||0===V.bitmap.width||0===V.bitmap.height)continue;const G=V.metrics.localGlyph?KM:1,X={x:0,y:0,w:V.bitmap.width+2*G,h:V.bitmap.height+2*G};p.push(X),L[z]=X}}const{w:v,h:E}=b1(p),I=new bd({width:v||1,height:E||1});for(const M in s){const R=s[M];for(const L in R.glyphs){const z=R.glyphs[+L];if(!z||0===z.bitmap.width||0===z.bitmap.height)continue;const V=u[M][L],G=z.metrics.localGlyph?KM:1;bd.copy(z.bitmap,I,{x:0,y:0},{x:V.x+G,y:V.y+G},z.bitmap)}}this.image=I,this.positions=u}}wi(Y1,"GlyphAtlas");class mI{constructor(s){this.tileID=new xu(s.tileID.overscaledZ,s.tileID.wrap,s.tileID.canonical.z,s.tileID.canonical.x,s.tileID.canonical.y),this.tileZoom=s.tileZoom,this.uid=s.uid,this.zoom=s.zoom,this.canonical=s.tileID.canonical,this.pixelRatio=s.pixelRatio,this.tileSize=s.tileSize,this.source=s.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=s.showCollisionBoxes,this.collectResourceTiming=!!s.collectResourceTiming,this.returnDependencies=!!s.returnDependencies,this.promoteId=s.promoteId,this.enableTerrain=!!s.enableTerrain,this.isSymbolTile=s.isSymbolTile,this.tileTransform=Lm(s.tileID.canonical,s.projection),this.projection=s.projection}parse(s,u,p,v,E){this.status="parsing",this.data=s,this.collisionBoxArray=new Ps;const I=new $1(Object.keys(s.layers).sort()),M=new fI(this.tileID,this.promoteId);M.bucketLayerIDs=[];const R={},L=new pI(256,256),z={featureIndex:M,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:L,availableImages:p},V=u.familiesBySource[this.source];for(const Ft in V){const zt=s.layers[Ft];if(!zt)continue;let En=!1,pn=!1;for(const In of V[Ft])"symbol"===In[0].type?En=!0:pn=!0;if(!0===this.isSymbolTile&&!En||!1===this.isSymbolTile&&!pn)continue;1===zt.version&&cn(`Vector tile source "${this.source}" layer "${Ft}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $n=I.encode(Ft),ci=[];for(let In=0;In<zt.length;In++){const Wn=zt.feature(In),Yn=M.getId(Wn,Ft);ci.push({feature:Wn,id:Yn,index:In,sourceLayerIndex:$n})}for(const In of V[Ft]){const Wn=In[0];void 0!==this.isSymbolTile&&"symbol"===Wn.type!==this.isSymbolTile||Wn.minzoom&&this.zoom<Math.floor(Wn.minzoom)||Wn.maxzoom&&this.zoom>=Wn.maxzoom||"none"!==Wn.visibility&&(Vs(In,this.zoom,p),(R[Wn.id]=Wn.createBucket({index:M.bucketLayerIDs.length,layers:In,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$n,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:p})).populate(ci,z,this.tileID.canonical,this.tileTransform),M.bucketLayerIDs.push(In.map(Yn=>Yn.id)))}}let G,X,oe,ve;L.trim();const Ue={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ft=()=>{if(G)return E(G);if(X&&oe&&ve){const Ft=new Y1(X),zt=new qS(oe,ve);for(const En in R){const pn=R[En];pn instanceof sf?(Vs(pn.layers,this.zoom,p),$M(pn,X,Ft.positions,oe,zt.iconPositions,this.showCollisionBoxes,p,this.tileID.canonical,this.tileZoom,this.projection)):pn.hasPattern&&(pn instanceof rv||pn instanceof Fg||pn instanceof tv)&&(Vs(pn.layers,this.zoom,p),pn.addFeatures(z,this.tileID.canonical,zt.patternPositions,p,this.tileTransform))}this.status="done",E(null,{buckets:$e(R).filter(En=>!En.isEmpty()),featureIndex:M,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ft.image,lineAtlas:L,imageAtlas:zt,glyphMap:this.returnDependencies?X:null,iconMap:this.returnDependencies?oe:null,glyphPositions:this.returnDependencies?Ft.positions:null})}},Pt=Vt(z.glyphDependencies,Ft=>Object.keys(Ft).map(Number));Object.keys(Pt).length?v.send("getGlyphs",{uid:this.uid,stacks:Pt},(Ft,zt)=>{G||(G=Ft,X=zt,ft())},void 0,!1,Ue):X={};const ht=Object.keys(z.iconDependencies);ht.length?v.send("getImages",{icons:ht,source:this.source,tileID:this.tileID,type:"icons"},(Ft,zt)=>{G||(G=Ft,oe=zt,ft())},void 0,!1,Ue):oe={};const Tt=Object.keys(z.patternDependencies);Tt.length?v.send("getImages",{icons:Tt,source:this.source,tileID:this.tileID,type:"patterns"},(Ft,zt)=>{G||(G=Ft,ve=zt,ft())},void 0,!1,Ue):ve={},ft()}}function Vs(l,s,u){const p=new $(s);for(const v of l)v.recalculate(p,u)}class Z1{constructor(s){this.entries={},this.scheduler=s}request(s,u,p,v){const E=this.entries[s]=this.entries[s]||{callbacks:[]};if(E.result){const[I,M]=E.result;return this.scheduler?this.scheduler.add(()=>{v(I,M)},u):v(I,M),()=>{}}return E.callbacks.push(v),E.cancel||(E.cancel=p((I,M)=>{E.result=[I,M];for(const R of E.callbacks)this.scheduler?this.scheduler.add(()=>{R(I,M)},u):R(I,M);setTimeout(()=>delete this.entries[s],3e3)})),()=>{E.result||(E.callbacks=E.callbacks.filter(I=>I!==v),E.callbacks.length||(E.cancel(),delete this.entries[s]))}}}function QM(l,s,u){const p=JSON.stringify(l.request);return l.data&&(this.deduped.entries[p]={result:[null,l.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},v=>{const E=zr(l.request,(I,M,R,L)=>{I?v(I):M&&v(null,{vectorTile:u?void 0:new l1(new h0(M)),rawData:M,cacheControl:R,expires:L})});return()=>{E.cancel(),v()}},s)}const k0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class nd{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(s,0,2);if(219!==u)throw new Error("Data does not appear to be in a KDBush format.");const v=p>>4;if(1!==v)throw new Error(`Got v${v} data when expected v1.`);const E=k0[15&p];if(!E)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(s,2,1),[M]=new Uint32Array(s,4,1);return new nd(M,I,E,s)}constructor(s,u=64,p=Float64Array,v){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const E=k0.indexOf(this.ArrayType),I=2*s*this.ArrayType.BYTES_PER_ELEMENT,M=s*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-M%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${p}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+M+R,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+I+M+R),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+M+R,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=s,this.coords[this._pos++]=u,p}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return Sv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,p,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:I,nodeSize:M}=this,R=[0,E.length-1,0],L=[];for(;R.length;){const z=R.pop()||0,V=R.pop()||0,G=R.pop()||0;if(V-G<=M){for(let Ue=G;Ue<=V;Ue++){const ft=I[2*Ue],Pt=I[2*Ue+1];ft>=s&&ft<=p&&Pt>=u&&Pt<=v&&L.push(E[Ue])}continue}const X=G+V>>1,oe=I[2*X],ve=I[2*X+1];oe>=s&&oe<=p&&ve>=u&&ve<=v&&L.push(E[X]),(0===z?s<=oe:u<=ve)&&(R.push(G),R.push(X-1),R.push(1-z)),(0===z?p>=oe:v>=ve)&&(R.push(X+1),R.push(V),R.push(1-z))}return L}within(s,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:E,nodeSize:I}=this,M=[0,v.length-1,0],R=[],L=p*p;for(;M.length;){const z=M.pop()||0,V=M.pop()||0,G=M.pop()||0;if(V-G<=I){for(let Ue=G;Ue<=V;Ue++)R0(E[2*Ue],E[2*Ue+1],s,u)<=L&&R.push(v[Ue]);continue}const X=G+V>>1,oe=E[2*X],ve=E[2*X+1];R0(oe,ve,s,u)<=L&&R.push(v[X]),(0===z?s-p<=oe:u-p<=ve)&&(M.push(G),M.push(X-1),M.push(1-z)),(0===z?s+p>=oe:u+p>=ve)&&(M.push(X+1),M.push(V),M.push(1-z))}return R}}function Sv(l,s,u,p,v,E){if(v-p<=u)return;const I=p+v>>1;gI(l,s,I,p,v,E),Sv(l,s,u,p,I-1,1-E),Sv(l,s,u,I+1,v,1-E)}function gI(l,s,u,p,v,E){for(;v>p;){if(v-p>600){const L=v-p+1,z=u-p+1,V=Math.log(L),G=.5*Math.exp(2*V/3),X=.5*Math.sqrt(V*G*(L-G)/L)*(z-L/2<0?-1:1);gI(l,s,u,Math.max(p,Math.floor(u-z*G/L+X)),Math.min(v,Math.floor(u+(L-z)*G/L+X)),E)}const I=s[2*u+E];let M=p,R=v;for(P0(l,s,p,u),s[2*v+E]>I&&P0(l,s,p,v);M<R;){for(P0(l,s,M,R),M++,R--;s[2*M+E]<I;)M++;for(;s[2*R+E]>I;)R--}s[2*p+E]===I?P0(l,s,p,R):(R++,P0(l,s,R,v)),R<=u&&(p=R+1),u<=R&&(v=R-1)}}function P0(l,s,u,p){K1(l,u,p),K1(s,2*u,2*p),K1(s,2*u+1,2*p+1)}function K1(l,s,u){const p=l[s];l[s]=l[u],l[u]=p}function R0(l,s,u,p){const v=l-u,E=s-p;return v*v+E*E}g.ARRAY_TYPE=Xu,g.AUTH_ERR_MSG=Ct,g.Aabb=Lc,g.Actor=class{constructor(l,s,u){this.target=l,this.parent=s,this.mapId=u,this.callbacks={},this.cancelCallbacks={},kn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Gn()?l:fe,this.scheduler=new WM}send(l,s,u,p,v=!1,E){const I=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=E,this.callbacks[I]=u);const M=Te(this.globalScope)?void 0:[];return this.target.postMessage({id:I,type:l,hasCallback:!!u,targetMapId:p,mustQueue:v,sourceMapId:this.mapId,data:Wc(s,M)},M),{cancel:()=>{u&&delete this.callbacks[I],this.target.postMessage({id:I,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(l){const s=l.data,u=s.id;if(u&&(!s.targetMapId||this.mapId===s.targetMapId))if("<cancel>"===s.type){const p=this.cancelCallbacks[u];delete this.cancelCallbacks[u],p&&p.cancel()}else if(s.mustQueue||Gn()){const p=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,s),p&&p.metadata||{type:"message"})}else this.processTask(u,s)}processTask(l,s){if("<response>"===s.type){const u=this.callbacks[l];delete this.callbacks[l],u&&(s.error?u(jd(s.error)):u(null,jd(s.data)))}else{const u=Te(this.globalScope)?void 0:[],p=s.hasCallback?(E,I)=>{delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:E?Wc(E):null,data:Wc(I,u)},u)}:E=>{},v=jd(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,v,p);else if(this.parent.getWorkerSource){const E=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,E[0],v.source)[E[1]](v,p)}else p(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},g.CanonicalTileID=a0,g.Color=As,g.ColorMode=wu,g.CullFaceMode=lf,g.DEMData=M0,g.DataConstantProperty=pe,g.DedupedRequest=Z1,g.DepthMode=td,g.EXTENT=Er,g.Elevation=class{isDataAvailableAtPoint(l){const s=this._source();if(this.isUsingMockSource()||!s||l.y<0||l.y>1)return!1;const u=s.getSource().maxzoom,p=1<<u,v=Math.floor(l.x),E=Math.floor((l.x-v)*p),I=Math.floor(l.y*p),M=this.findDEMTileFor(new xu(u,v,u,E,I));return!(!M||!M.dem)}getAtPointOrZero(l,s=0){return this.getAtPoint(l,s)||0}getAtPoint(l,s,u=!0){if(this.isUsingMockSource())return null;null==s&&(s=null);const p=this._source();if(!p||l.y<0||l.y>1)return s;const v=p.getSource().maxzoom,E=1<<v,I=Math.floor(l.x),M=l.x-I,R=new xu(v,I,v,Math.floor(M*E),Math.floor(l.y*E)),L=this.findDEMTileFor(R);if(!L||!L.dem)return s;const z=L.dem,V=1<<L.tileID.canonical.z,G=(M*V-L.tileID.canonical.x)*z.dim,X=(l.y*V-L.tileID.canonical.y)*z.dim,oe=Math.floor(G),ve=Math.floor(X);return(u?this.exaggeration():1)*lo(lo(z.get(oe,ve),z.get(oe,ve+1),X-ve),lo(z.get(oe+1,ve),z.get(oe+1,ve+1),X-ve),G-oe)}getAtTileOffset(l,s,u){const p=1<<l.canonical.z;return this.getAtPointOrZero(new kg(l.wrap+(l.canonical.x+s/Er)/p,(l.canonical.y+u/Er)/p))}getAtTileOffsetFunc(l,s,u,p){return v=>{const E=this.getAtTileOffset(l,v.x,v.y),I=p.upVector(l.canonical,v.x,v.y);return Yu(I,I,E*p.upVectorScale(l.canonical,s,u).metersToTile),I}}getForTilePoints(l,s,u,p){if(this.isUsingMockSource())return!1;const v=Cv.create(this,l,p);return!!v&&(s.forEach(E=>{E[2]=this.exaggeration()*v.getElevationAt(E[0],E[1],u)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(l);if(!s||!s.dem)return null;const u=s.dem.tree,p=s.tileID,v=1<<l.canonical.z-p.canonical.z;let E=l.canonical.x/v-p.canonical.x,I=l.canonical.y/v-p.canonical.y,M=0;for(let R=0;R<l.canonical.z-p.canonical.z&&!u.leaves[M];R++){E*=2,I*=2;const L=2*Math.floor(I)+Math.floor(E);M=u.childOffsets[M]+L,E%=1,I%=1}return{min:this.exaggeration()*u.minimums[M],max:this.exaggeration()*u.maximums[M]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,s,u){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},g.ErrorEvent=no,g.EvaluationParameters=$,g.Event=No,g.Evented=ar,g.FillExtrusionBucket=tv,g.Frustum=ym,g.FrustumCorners=Nx,g.GLOBE_RADIUS=Eh,g.GLOBE_SCALE_MATCH_LATITUDE=45,g.GLOBE_ZOOM_THRESHOLD_MAX=sM,g.GLOBE_ZOOM_THRESHOLD_MIN=Ig,g.GlobeSharedBuffers=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const l of this._wireframeSegments)l.destroy()}}_fillGridMeshWithLods(l,s){const u=new hi,p=new dr,v=[],E=l+1+2,I=s[0]+1,M=s[0]+1+(1+s.length),R=(L,z,V)=>{let G=L===E-1?L-2:0===L?L:L-1;return G+=V?24575:0,[G,z]};for(let L=0;L<E;++L)u.emplaceBack(...R(L,0,!0));for(let L=0;L<I;++L)for(let z=0;z<E;++z)u.emplaceBack(...R(z,L,(0===z||z===E-1)&&!0));for(let L=0;L<s.length;++L){const z=s[L];for(let V=0;V<E;++V)u.emplaceBack(...R(V,z,!0))}for(let L=0;L<s.length;++L){const z=p.length,V=s[L]+1+2,G=new dr;for(let ve=0;ve<V-1;ve++){const Ue=ve===V-2,ft=Ue?E*(M-s.length+L-ve):E;for(let Pt=0;Pt<E-1;Pt++){const ht=ve*E+Pt;0===ve||Ue||0===Pt||Pt===E-2?(G.emplaceBack(ht+1,ht,ht+ft),G.emplaceBack(ht+ft,ht+ft+1,ht+1)):(p.emplaceBack(ht+1,ht,ht+ft),p.emplaceBack(ht+ft,ht+ft+1,ht+1))}}const X=Js.simpleSegment(0,z,u.length,p.length-z);for(let ve=0;ve<G.uint16.length;ve+=3)p.emplaceBack(G.uint16[ve],G.uint16[ve+1],G.uint16[ve+2]);const oe=Js.simpleSegment(0,z,u.length,p.length-z);v.push({withoutSkirts:X,withSkirts:oe})}return{vertices:u,indices:p,segments:v}}_createGrid(l){const s=this._fillGridMeshWithLods(64,Zu);this._gridSegments=s.segments,this._gridBuffer=l.createVertexBuffer(s.vertices,_m.members),this._gridIndexBuffer=l.createIndexBuffer(s.indices,!0)}_createPoles(l){const s=new dr;for(let v=0;v<=64;v++)s.emplaceBack(0,v+1,v+2);this._poleIndexBuffer=l.createIndexBuffer(s,!0);const u=new ks,p=new ks;this._poleSegments=[];for(let v=0,E=0;v<Ig;v++){const I=360/(1<<v);u.emplaceBack(0,-Eh,0,.5,0),p.emplaceBack(0,-Eh,0,.5,1);for(let M=0;M<=64;M++){const R=M/64,L=lo(0,I,R),[z,V,G]=Tg(Ag,Mg,L,Eh);u.emplaceBack(z,V,G,R,0),p.emplaceBack(z,V,G,R,1)}this._poleSegments.push(Js.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(u,rM,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(p,rM,!1)}getGridBuffers(l,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}getWirefameBuffers(l,s){if(!this._wireframeSegments){const u=new va,p=64,v=p+1+2,E=1;this._wireframeSegments=[];for(let I=0,M=0;I<Zu.length;I++){const R=Zu[I];for(let z=E;z<R+E;z++)for(let V=E;V<p+E;V++){const G=z*v+V;u.emplaceBack(G,G+1),u.emplaceBack(G,G+v),u.emplaceBack(G,G+v+1)}const L=R*p*3;this._wireframeSegments.push(Js.simpleSegment(0,M,(R+1)*v,L)),M+=L}this._wireframeIndexBuffer=l.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[s]]}},g.GlyphManager=qg,g.ImagePosition=x1,g.KDBush=nd,g.LivePerformanceUtils=oi,g.LngLat=Ho,g.LngLatBounds=Bf,g.LocalGlyphMode=D1,g.MAX_MERCATOR_LATITUDE=Kc,g.MercatorCoordinate=kg,g.ONE_EM=ic,g.OverscaledTileID=xu,g.PerformanceMarkers=Qn,g.Point=K,g.Properties=Et,g.RGBAImage=Qu,g.Ray=vm,g.RequestManager=class{constructor(l,s,u){this._transformRequestFn=l,this._customAccessToken=s,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const l=function(){let s="";for(let u=0;u<10;u++)s+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",le,s].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,s){return this._transformRequestFn&&this._transformRequestFn(l,s)||{url:l}}normalizeStyleURL(l,s){if(!at(l))return l;const u=ri(l);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||s)}normalizeGlyphsURL(l,s){if(!at(l))return l;const u=ri(l);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||s)}normalizeSourceURL(l,s,u,p){if(!at(l))return l;const v=ri(l);return v.path=`/v4/${v.authority}.json`,v.params.push("secure"),u&&v.params.push(`language=${u}`),p&&v.params.push(`worldview=${p}`),this._makeAPIURL(v,this._customAccessToken||s)}normalizeSpriteURL(l,s,u,p){const v=ri(l);return at(l)?(v.path=`/styles/v1${v.path}/sprite${s}${u}`,this._makeAPIURL(v,this._customAccessToken||p)):(v.path+=`${s}${u}`,Zn(v))}normalizeTileURL(l,s,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!at(l))return l;const p=ri(l);p.path=p.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${s||u&&"raster"!==p.authority&&512===u?"@2x":""}${ct.supported?".webp":"$1"}`),"raster"===p.authority?p.path=`/${He.RASTER_URL_PREFIX}${p.path}`:(p.path=p.path.replace(/^.+\/v4\//,"/"),p.path=`/${He.TILE_URL_VERSION}${p.path}`);const v=this._customAccessToken||function(E){for(const I of E){const M=I.match(/^access_token=(.*)$/);if(M)return M[1]}return null}(p.params)||He.ACCESS_TOKEN;return He.REQUIRE_ACCESS_TOKEN&&v&&this._skuToken&&p.params.push(`sku=${this._skuToken}`),this._makeAPIURL(p,v)}canonicalizeTileURL(l,s){const u=ri(l);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return l;let p="mapbox://";u.path.match(/^\/raster\/v1\//)?p+=`raster/${u.path.replace(`/${He.RASTER_URL_PREFIX}/`,"")}`:p+=`tiles/${u.path.replace(`/${He.TILE_URL_VERSION}/`,"")}`;let v=u.params;return s&&(v=v.filter(E=>!E.match(/^access_token=/))),v.length&&(p+=`?${v.join("&")}`),p}canonicalizeTileset(l,s){const u=!!s&&at(s),p=[];for(const v of l.tiles||[])en(v)?p.push(this.canonicalizeTileURL(v,u)):p.push(v);return p}_makeAPIURL(l,s){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",p=ri(He.API_URL);if(l.protocol=p.protocol,l.authority=p.authority,"http"===l.protocol){const v=l.params.indexOf("secure");v>=0&&l.params.splice(v,1)}if("/"!==p.path&&(l.path=`${p.path}${l.path}`),!He.REQUIRE_ACCESS_TOKEN)return Zn(l);if(s=s||He.ACCESS_TOKEN,!this._silenceAuthErrors){if(!s)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if("s"===s[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return l.params=l.params.filter(v=>-1===v.indexOf("access_token")),l.params.push(`access_token=${s||""}`),Zn(l)}},g.ResourceType=wr,g.SegmentVector=Js,g.SourceCache=qf,g.StencilMode=H1,g.StructArrayLayout1ui2=Fu,g.StructArrayLayout2f1f2i16=Ki,g.StructArrayLayout2i4=hi,g.StructArrayLayout2ui4=va,g.StructArrayLayout3f12=ho,g.StructArrayLayout3ui6=dr,g.StructArrayLayout4i8=Hn,g.StructArrayLayout5f20=ks,g.Texture=Bm,g.Tile=A0,g.Transitionable=de,g.Uniform1f=Nf,g.Uniform1i=class extends Xh{constructor(l){super(l),this.current=0}set(l,s,u){this.fetchUniformLocation(l,s)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},g.Uniform2f=class extends Xh{constructor(l){super(l),this.current=[0,0]}set(l,s,u){this.fetchUniformLocation(l,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},g.Uniform3f=class extends Xh{constructor(l){super(l),this.current=[0,0,0]}set(l,s,u){this.fetchUniformLocation(l,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},g.Uniform4f=KC,g.UniformColor=QC,g.UniformMatrix2f=class extends Xh{constructor(l){super(l),this.current=QA}set(l,s,u){if(this.fetchUniformLocation(l,s))for(let p=0;p<4;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}},g.UniformMatrix3f=class extends Xh{constructor(l){super(l),this.current=KA}set(l,s,u){if(this.fetchUniformLocation(l,s))for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}},g.UniformMatrix4f=class extends Xh{constructor(l){super(l),this.current=ZA}set(l,s,u){if(this.fetchUniformLocation(l,s)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let p=1;p<16;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},g.UnwrappedTileID=MS,g.ValidationError=Di,g.VectorTileFeature=J_,g.VectorTileWorkerSource=class extends ar{constructor(l,s,u,p,v){super(),this.actor=l,this.layerIndex=s,this.availableImages=u,this.loadVectorData=v||QM,this.loading={},this.loaded={},this.deduped=new Z1(l.scheduler),this.isSpriteLoaded=p,this.scheduler=l.scheduler}loadTile(l,s){const u=l.uid,p=l&&l.request,v=p&&p.collectResourceTiming,E=this.loading[u]=new mI(l);E.abort=this.loadVectorData(l,(I,M)=>{const R=!this.loading[u];if(delete this.loading[u],R||I||!M)return E.status="done",R||(this.loaded[u]=E),s(I);const L=M.rawData,z={};M.expires&&(z.expires=M.expires),M.cacheControl&&(z.cacheControl=M.cacheControl),E.vectorTile=M.vectorTile||new l1(new h0(L));const V=()=>{E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,(G,X)=>{if(G||!X)return s(G);const oe={};if(v){const ve=_r(p);ve.length>0&&(oe.resourceTiming=JSON.parse(JSON.stringify(ve)))}s(null,ae({rawTileData:L.slice(0)},X,z,oe))})};this.isSpriteLoaded?V():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(V,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom}):V()}),this.loaded=this.loaded||{},this.loaded[u]=E})}reloadTile(l,s){const u=this.loaded,p=l.uid,v=this;if(u&&u[p]){const E=u[p];E.showCollisionBoxes=l.showCollisionBoxes,E.enableTerrain=!!l.enableTerrain,E.projection=l.projection,E.tileTransform=Lm(l.tileID.canonical,l.projection);const I=(M,R)=>{const L=E.reloadCallback;L&&(delete E.reloadCallback,E.parse(E.vectorTile,v.layerIndex,this.availableImages,v.actor,L)),s(M,R)};"parsing"===E.status?E.reloadCallback=I:"done"===E.status&&(E.vectorTile?E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,I):I())}}abortTile(l,s){const u=l.uid,p=this.loading[u];p&&(p.abort&&p.abort(),delete this.loading[u]),s()}removeTile(l,s){const u=this.loaded,p=l.uid;u&&u[p]&&delete u[p],s()}},g.WritingMode=Ju,g.ZoomDependentExpression=Bi,g.add=ea,g.addDynamicAttributes=N1,g.adjoint=function(l,s){var u=s[0],p=s[1],v=s[2],E=s[3],I=s[4],M=s[5],R=s[6],L=s[7],z=s[8];return l[0]=I*z-M*L,l[1]=v*L-p*z,l[2]=p*M-v*I,l[3]=M*R-E*z,l[4]=u*z-v*R,l[5]=v*E-u*M,l[6]=E*L-I*R,l[7]=p*R-u*L,l[8]=u*I-p*E,l},g.asyncAll=Ke,g.bezier=Ve,g.bindAll=kn,g.boundsAttributes=D0,g.bufferConvexPolygon=function(l,s){const u=[];for(let p=0;p<l.length;p++){const v=De(p-1,-1,l.length-1),E=De(p+1,-1,l.length-1),I=l[p],M=l[E],R=l[v].sub(I).unit(),L=M.sub(I).unit(),z=L.angleWithSep(R.x,R.y),V=R.add(L).unit().mult(-1*s/Math.sin(z/2));u.push(I.add(V))}return u},g.cacheEntryPossiblyAdded=function(l){Ti++,Ti>Fn&&(l.getActor().send("enforceCacheSizeLimit",ln),Ti=0)},g.calculateGlobeLabelMatrix=function(l,s){const{x:u,y:p}=l.point,v=$s(u,p,l.worldSize/l._pixelsPerMercatorPixel,0,0);return pm(v,v,Ux(Ch(s)))},g.calculateGlobeMatrix=function(l){const{x:s,y:u}=l.point,{lng:p,lat:v}=l._center;return $s(s,u,l.worldSize,p,v)},g.calculateGlobeMercatorMatrix=function(l){const s=l.pixelsPerMeter,u=s/Qh(1,l.center.lat),p=qd(new Float64Array(16));return Cg(p,p,[l.point.x,l.point.y,0]),zf(p,p,[u,u,s]),Float32Array.from(p)},g.circumferenceAtLatitude=cS,g.clamp=Y,g.clearTileCache=function(l){if(!Yi())return;const s=fe.caches.delete(Mt);l&&s.catch(l).then(()=>l())},g.clipLine=fv,g.clone=function(l){var s=new Xu(16);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],s},g.clone$1=Tn,g.collisionCircleLayout=av,g.config=He,g.conjugate=function(l,s){return l[0]=-s[0],l[1]=-s[1],l[2]=-s[2],l[3]=s[3],l},g.create=function(){var l=new Xu(16);return Xu!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},g.create$1=jy,g.createExpression=kc,g.createLayout=Kt,g.createStyleLayer=function(l){return"custom"===l.type?new B1(l):new BF[l.type](l)},g.cross=Lx,g.degToRad=he,g.distance=function(l,s){return Math.hypot(s[0]-l[0],s[1]-l[1],s[2]-l[2])},g.div=function(l,s,u){return l[0]=s[0]/u[0],l[1]=s[1]/u[1],l[2]=s[2]/u[2],l},g.dot=yc,g.earthRadius=Yh,g.ease=Se,g.easeCubicInOut=ie,g.ecefToLatLng=function([l,s,u]){const p=Math.hypot(l,s,u),v=Math.atan2(l,u),E=.5*Math.PI-Math.acos(-s/p);return new Ho(se(v),se(E))},g.emitValidationErrors=Rn,g.endsWith=ei,g.enforceCacheSizeLimit=function(l){or(),Bn&&Bn.then(s=>{s.keys().then(u=>{for(let p=0;p<u.length-l;p++)s.delete(u[p])})})},g.evaluateSizeForFeature=lv,g.evaluateSizeForZoom=kp,g.evaluateVariableOffset=y0,g.evented=D,g.exactEquals=function(l,s){return l[0]===s[0]&&l[1]===s[1]&&l[2]===s[2]&&l[3]===s[3]},g.exactEquals$1=function(l,s){return l[0]===s[0]&&l[1]===s[1]&&l[2]===s[2]},g.exported=To,g.exported$1=ct,g.extend=ae,g.extend$1=yl,g.fillExtrusionHeightLift=h1,g.filterObject=vi,g.fromMat4=function(l,s){return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[4],l[4]=s[5],l[5]=s[6],l[6]=s[8],l[7]=s[9],l[8]=s[10],l},g.fromQuat=function(l,s){var u=s[0],p=s[1],v=s[2],E=s[3],I=u+u,M=p+p,R=v+v,L=u*I,z=p*I,V=p*M,G=v*I,X=v*M,oe=v*R,ve=E*I,Ue=E*M,ft=E*R;return l[0]=1-V-oe,l[1]=z+ft,l[2]=G-Ue,l[3]=0,l[4]=z-ft,l[5]=1-L-oe,l[6]=X+ve,l[7]=0,l[8]=G+Ue,l[9]=X-ve,l[10]=1-L-V,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},g.fromRotation=function(l,s){var u=Math.sin(s),p=Math.cos(s);return l[0]=p,l[1]=u,l[2]=0,l[3]=-u,l[4]=p,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},g.fromScaling=kx,g.furthestTileCorner=function(l){const s=Math.round((l+45+360)%360/90)%4;return be[s]},g.getAABBPointSquareDist=function(l,s,u){let p=0;for(let v=0;v<2;++v){const E=u?u[v]:0;l[v]>E&&(p+=(l[v]-E)*(l[v]-E)),s[v]<E&&(p+=(E-s[v])*(E-s[v]))}return p},g.getAnchorAlignment=YS,g.getAnchorJustification=b0,g.getBounds=function(l){let s=1/0,u=1/0,p=-1/0,v=-1/0;for(const E of l)s=Math.min(s,E.x),u=Math.min(u,E.y),p=Math.max(p,E.x),v=Math.max(v,E.y);return{min:new K(s,u),max:new K(p,v)}},g.getColumn=lt,g.getDefaultExportFromCjs=we,g.getGridMatrix=function(l,s,u,p){const v=s.getNorth(),E=s.getSouth(),I=s.getWest(),M=s.getEast(),R=1<<l.z,L=M-I,z=v-E,V=L/64,G=-z/Zu[u],X=[0,V,0,G,0,0,v,I,0];if(l.z>0){const oe=180/p;Gy(X,X,[oe/L+1,0,0,0,oe/z+1,0,-.5*oe/V,.5*oe/G,1])}return X[2]=R,X[5]=l.x,X[8]=l.y,X},g.getImage=pt,g.getJSON=function(l,s){return Fr(ae(l,{type:"json"}),s)},g.getLatitudinalLod=function(l){const s=Kc-5;l=Y(l,-s,s)/s*90;const u=Math.pow(Math.abs(Math.sin(he(l))),3);return Math.round(u*(Zu.length-1))},g.getMapSessionAPI=Sn,g.getPerformanceMeasurement=_r,g.getProjection=qM,g.getRTLTextPluginStatus=k,g.getReferrer=gr,g.getTilePoint=function(l,{x:s,y:u},p=0){return new K(((s-p)*l.scale-l.x)*Er,(u*l.scale-l.y)*Er)},g.getTileVec3=function(l,s,u=0){return Wd(((s.x-u)*l.scale-l.x)*Er,(s.y*l.scale-l.y)*Er,lM(s.z,s.y))},g.getVideo=function(l,s){const u=fe.document.createElement("video");u.muted=!0,u.onloadstart=function(){s(null,u)};for(let p=0;p<l.length;p++){const v=fe.document.createElement("source");bo(l[p])||(u.crossOrigin="Anonymous"),v.src=l[p],u.appendChild(v)}return{cancel:()=>{}}},g.globeCenterToScreenPoint=function(l){const s=[0,0,0],u=qd(new Float64Array(16));return pm(u,l.pixelMatrix,l.globeMatrix),ja(s,s,u),new K(s[0],s[1])},g.globeDenormalizeECEF=Ux,g.globeECEFOrigin=function(l,s){const u=[0,0,0];return ja(u,u,bc(Ch(s.canonical))),ja(u,u,l),u},g.globeMetersToEcef=G_,g.globeNormalizeECEF=bc,g.globePixelsToTileUnits=function(l,s){return Er/(512*Math.pow(2,l))*vp(Ch(s))},g.globePoleMatrixForTile=function(l,s,u){const p=qd(new Float64Array(16)),v=(s/(1<<l)-.5)*Math.PI*2;return V_(p,u.globeMatrix,v),Float32Array.from(p)},g.globeTileBounds=Ch,g.globeTiltAtLngLat=lS,g.globeToMercatorTransition=yp,g.globeUseCustomAntiAliasing=function(l,s,u){const p=yp(u.zoom),v=l.style.map._antialias,E=!!s.extStandardDerivatives,I=s.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return 0===p&&!v&&!I&&E},g.identity=qd,g.identity$1=eM,g.invert=$_,g.isFullscreen=function(){return!!fe.document.fullscreenElement||!!fe.document.webkitFullscreenElement},g.isLngLatBehindGlobe=Wy,g.isMapAuthenticated=function(l){return Vn.has(l)},g.isMapboxURL=at,g.isSafariWithAntialiasingBug=function(l){const s=l.navigator?l.navigator.userAgent:null;return!!Te(l)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},g.latFromMercatorY=Zc,g.latLngToECEF=wm,g.len=iS,g.length=_c,g.length$1=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},g.lngFromMercatorX=Yd,g.loadVectorTile=QM,g.makeRequest=Fr,g.mapValue=function(l,s,u,p,v){return Y((l-s)/(u-s)*(v-p)+p,p,v)},g.mercatorScale=Em,g.mercatorXfromLng=Kh,g.mercatorYfromLat=Uf,g.mercatorZfromAltitude=Qh,g.mul=Rx,g.mul$1=nS,g.multiply=pm,g.multiply$1=Gy,g.multiply$2=tS,g.nextPowerOfTwo=qt,g.normalize=vc,g.normalize$1=nM,g.normalize$2=gm,g.number=lo,g.ortho=function(l,s,u,p,v,E,I){var M=1/(s-u),R=1/(p-v),L=1/(E-I);return l[0]=-2*M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*R,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*L,l[11]=0,l[12]=(s+u)*M,l[13]=(v+p)*R,l[14]=(I+E)*L,l[15]=1,l},g.pbf=BS,g.perspective=function(l,s,u,p,v){var E,I=1/Math.tan(s/2);return l[0]=I/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=v&&v!==1/0?(l[10]=(v+p)*(E=1/(p-v)),l[14]=2*v*p*E):(l[10]=-1,l[14]=-2*p),l},g.pick=function(l,s){const u={};for(let p=0;p<s.length;p++){const v=s[p];v in l&&(u[v]=l[v])}return u},g.plugin=F,g.pointGeometry=ke,g.polesInViewport=function(l){const s=qd(new Float64Array(16));pm(s,l.pixelMatrix,l.globeMatrix);const u=[0,Xd,0],p=[0,zu,0];return ja(u,u,s),ja(p,p,s),[u[0]>0&&u[0]<=l.width&&u[1]>0&&u[1]<=l.height&&!Wy(l,new Ho(l.center.lat,90)),p[0]>0&&p[0]<=l.width&&p[1]>0&&p[1]<=l.height&&!Wy(l,new Ho(l.center.lat,-90))]},g.polygonContainsPoint=Cm,g.polygonIntersectsBox=pS,g.polygonIntersectsPolygon=dS,g.polygonizeBounds=function(l,s,u=0,p=!0){const v=new K(u,u),E=l.sub(v),I=s.add(v),M=[E,new K(I.x,E.y),I,new K(E.x,I.y)];return p&&M.push(E.clone()),M},g.posAttributes=_m,g.postMapLoadEvent=vt,g.postPerformanceEvent=nn,g.postTurnstileEvent=Sr,g.potpack=b1,g.prevPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},g.radToDeg=se,g.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],g.registerForPluginStateChange=function(l){return l({pluginStatus:x,pluginURL:d}),D.on("pluginStateChange",l),l},g.removeAuthState=function(l){Vn.delete(l)},g.renderColorRamp=Ky,g.resample=nc,g.rotateX=Hy,g.rotateX$1=qy,g.rotateY=V_,g.rotateY$1=tM,g.rotateZ=function(l,s,u){var p=Math.sin(u),v=Math.cos(u),E=s[0],I=s[1],M=s[2],R=s[3],L=s[4],z=s[5],V=s[6],G=s[7];return s!==l&&(l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=E*v+L*p,l[1]=I*v+z*p,l[2]=M*v+V*p,l[3]=R*v+G*p,l[4]=L*v-E*p,l[5]=z*v-I*p,l[6]=V*v-M*p,l[7]=G*v-R*p,l},g.rotateZ$1=function(l,s,u){u*=.5;var p=s[0],v=s[1],E=s[2],I=s[3],M=Math.sin(u),R=Math.cos(u);return l[0]=p*R+v*M,l[1]=v*R-p*M,l[2]=E*R+I*M,l[3]=I*R-E*M,l},g.scale=zf,g.scale$1=rS,g.scale$2=Yu,g.scaleAndAdd=Sg,g.set=function(l,s,u,p){return l[0]=s,l[1]=u,l[2]=p,l},g.setCacheLimits=function(l,s){ln=l,Fn=s},g.setColumn=function(l,s,u){l[4*s+0]=u[0],l[4*s+1]=u[1],l[4*s+2]=u[2],l[4*s+3]=u[3]},g.setRTLTextPlugin=function(l,s,u=!1){if(x===By||x===zy||x===Ul)throw new Error("setRTLTextPlugin cannot be called multiple times.");d=To.resolveURL(l),x=By,yh=s,S(),u||N()},g.smoothstep=Ge,g.spec=Mn,g.squaredLength=function(l){var s=l[0],u=l[1],p=l[2];return s*s+u*u+p*p},g.storeAuthState=function(l,s){s?Vn.add(l):Vn.delete(l)},g.sub=vd,g.subtract=xh,g.symbolSize=cv,g.tileAABB=function(l,s,u,p,v,E,I,M,R){if("globe"===R.name)return function aM(l,s,u){const p=s/l.worldSize,v=l.globeMatrix;if(u.z<=1){const pn=Ch(u).getCorners();return Vx(pn,v,p),Lc.fromPoints(pn)}const E=xm(u),I=$f(E);Vx(I,v,p);const M=Number.MAX_VALUE,R=[-M,-M,-M],L=[M,M,M];if(E.contains(l.center)){for(const ci of I)mm(L,L,ci),U_(R,R,ci);R[2]=0;const pn=l.point,$n=[pn.x*p,pn.y*p,0];return mm(L,L,$n),U_(R,R,$n),new Lc(L,R)}const z=[v[12]*p,v[13]*p,v[14]*p],V=E.getCenter(),G=Y(l.center.lat,-Kc,Kc),X=Y(V.lat,-Kc,Kc),oe=Kh(l.center.lng),ve=Uf(G);let Ue=oe-Kh(V.lng);const ft=ve-Uf(X);Ue>.5?Ue-=1:Ue<-.5&&(Ue+=1);let Pt=0;Math.abs(Ue)>Math.abs(ft)?Pt=Ue>=0?1:3:(Pt=ft>=0?0:2,Sg(z,z,[v[4]*p,v[5]*p,v[6]*p],-Math.sin(he(ft>=0?E.getSouth():E.getNorth()))*Eh));const ht=I[Pt],Tt=I[(Pt+1)%4],Ft=new Bx(ht,Tt,z),zt=[zx(Ft,0)||ht[0],zx(Ft,1)||ht[1],zx(Ft,2)||ht[2]],En=yp(l.zoom);if(En>0){const pn=function({x:ci,y:In,z:Wn},Yn,ii,_i,Ln){const Oi=1/(1<<Wn);let Wi=ci*Oi,Li=Wi+Oi,Zr=In*Oi,yi=Zr+Oi,xr=0;const Kr=(Wi+Li)/2-_i;return Kr>.5?xr=-1:Kr<-.5&&(xr=1),Wi=((Wi+xr)*Yn-(_i*=Yn))*ii+_i,Li=((Li+xr)*Yn-_i)*ii+_i,Zr=(Zr*Yn-(Ln*=Yn))*ii+Ln,yi=(yi*Yn-Ln)*ii+Ln,[[Wi,yi,0],[Li,yi,0],[Li,Zr,0],[Wi,Zr,0]]}(u,s,l._pixelsPerMercatorPixel,oe,ve);for(let ci=0;ci<I.length;ci++)_p(I[ci],pn[ci],En);const $n=ea([],pn[Pt],pn[(Pt+1)%4]);Yu($n,$n,.5),_p(zt,$n,En)}for(const pn of I)mm(L,L,pn),U_(R,R,pn);return L[2]=Math.min(ht[2],Tt[2]),mm(L,L,zt),U_(R,R,zt),new Lc(L,R)}(l,s,new a0(u,p,v));const L=Lm({z:u,x:p,y:v},R);return new Lc([(E+L.x/L.scale)*s,s*(L.y/L.scale),I],[(E+L.x2/L.scale)*s,s*(L.y2/L.scale),M])},g.tileCornersToBounds=xm,g.tileTransform=Lm,g.transformMat3=function(l,s,u){var p=s[0],v=s[1],E=s[2];return l[0]=p*u[0]+v*u[3]+E*u[6],l[1]=p*u[1]+v*u[4]+E*u[7],l[2]=p*u[2]+v*u[5]+E*u[8],l},g.transformMat4=ja,g.transformMat4$1=wh,g.transformQuat=j_,g.transitionTileAABBinECEF=$x,g.translate=Cg,g.transpose=function(l,s){if(l===s){var u=s[1],p=s[2],v=s[5];l[1]=s[3],l[2]=s[6],l[3]=u,l[5]=s[7],l[6]=p,l[7]=v}else l[0]=s[0],l[1]=s[3],l[2]=s[6],l[3]=s[1],l[4]=s[4],l[5]=s[7],l[6]=s[2],l[7]=s[5],l[8]=s[8];return l},g.triggerPluginCompletionEvent=y,g.uniqueId=et,g.updateGlobeVertexNormal=function(l,s,u,p,v){const E=5*s+2;l.float32[E+0]=u,l.float32[E+1]=p,l.float32[E+2]=v},g.validateCustomStyleLayer=function(l){const s=[],u=l.id;return void 0===u&&s.push({message:`layers.${u}: missing required property "id"`}),void 0===l.render&&s.push({message:`layers.${u}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},g.validateFilter=l=>gn(mu(l)),g.validateFog=l=>gn(w(l)),g.validateLayer=l=>gn(el(l)),g.validateLight=l=>gn(f(l)),g.validateSource=l=>gn(Rf(l)),g.validateStyle=xe,g.validateTerrain=l=>gn(b(l)),g.values=$e,g.vectorTile=Nc,g.version=Ne,g.warnOnce=cn,g.window=fe,g.wrap=De}),Le(0,function(g){function fe(mt){if("number"==typeof mt||"boolean"==typeof mt||"string"==typeof mt||null==mt)return JSON.stringify(mt);if(Array.isArray(mt)){let Me="[";for(const pt of mt)Me+=`${fe(pt)},`;return`${Me}]`}let Ie="{";for(const Me of Object.keys(mt).sort())Ie+=`${Me}:${fe(mt[Me])},`;return`${Ie}}`}function Ne(mt){let Ie="";for(const Me of g.refProperties)Ie+=`/${fe(mt[Me])}`;return Ie}class Oe{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,Me){for(const Ct of Ie)this._layerConfigs[Ct.id]=Ct,(this._layers[Ct.id]=g.createStyleLayer(Ct)).compileFilter(),this.keyCache[Ct.id]&&delete this.keyCache[Ct.id];for(const Ct of Me)delete this.keyCache[Ct],delete this._layerConfigs[Ct],delete this._layers[Ct];this.familiesBySource={};const pt=function(Ct,at){const en={};for(let It=0;It<Ct.length;It++){const un=at&&at[Ct[It].id]||Ne(Ct[It]);at&&(at[Ct[It].id]=un);let Xn=en[un];Xn||(Xn=en[un]=[]),Xn.push(Ct[It])}const Zt=[];for(const It in en)Zt.push(en[It]);return Zt}(g.values(this._layerConfigs),this.keyCache);for(const Ct of pt){const at=Ct.map(ri=>this._layers[ri.id]),en=at[0];if("none"===en.visibility)continue;const Zt=en.source||"";let It=this.familiesBySource[Zt];It||(It=this.familiesBySource[Zt]={});const un=en.sourceLayer||"_geojsonTileLayer";let Xn=It[un];Xn||(Xn=It[un]=[]),Xn.push(at)}}}class He{loadTile(Ie,Me){const{uid:pt,encoding:Ct,rawImageData:at,padding:en,buildQuadTree:Zt}=Ie,It=g.window.ImageBitmap&&at instanceof g.window.ImageBitmap?this.getImageData(at,en):at;Me(null,new g.DEMData(pt,It,Ct,en<1,Zt))}getImageData(Ie,Me){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const pt=this.offscreenCanvasContext.getImageData(-Me,-Me,Ie.width+2*Me,Ie.height+2*Me);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),pt}}function ct(mt,Ie){if(0!==mt.length){Ht(mt[0],Ie);for(var Me=1;Me<mt.length;Me++)Ht(mt[Me],!Ie)}}function Ht(mt,Ie){for(var Me=0,pt=0,Ct=0,at=mt.length,en=at-1;Ct<at;en=Ct++){var Zt=(mt[Ct][0]-mt[en][0])*(mt[en][1]+mt[Ct][1]),It=Me+Zt;pt+=Math.abs(Me)>=Math.abs(Zt)?Me-It+Zt:Zt-It+Me,Me=It}Me+pt>=0!=!!Ie&&mt.reverse()}var qe=g.getDefaultExportFromCjs(function mt(Ie,Me){var pt,Ct=Ie&&Ie.type;if("FeatureCollection"===Ct)for(pt=0;pt<Ie.features.length;pt++)mt(Ie.features[pt],Me);else if("GeometryCollection"===Ct)for(pt=0;pt<Ie.geometries.length;pt++)mt(Ie.geometries[pt],Me);else if("Feature"===Ct)mt(Ie.geometry,Me);else if("Polygon"===Ct)ct(Ie.coordinates,Me);else if("MultiPolygon"===Ct)for(pt=0;pt<Ie.coordinates.length;pt++)ct(Ie.coordinates[pt],Me);return Ie});const Qe=g.VectorTileFeature.prototype.toGeoJSON;var je={exports:{}},Nt=g.pointGeometry,le=g.vectorTile.VectorTileFeature,we=J;function J(mt,Ie){this.options=Ie||{},this.features=mt,this.length=mt.length}function Z(mt,Ie){this.id="number"==typeof mt.id?mt.id:void 0,this.type=mt.type,this.rawGeometry=1===mt.type?[mt.geometry]:mt.geometry,this.properties=mt.tags,this.extent=Ie||4096}J.prototype.feature=function(mt){return new Z(this.features[mt],this.options.extent)},Z.prototype.loadGeometry=function(){var mt=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<mt.length;Ie++){for(var Me=mt[Ie],pt=[],Ct=0;Ct<Me.length;Ct++)pt.push(new Nt(Me[Ct][0],Me[Ct][1]));this.geometry.push(pt)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var mt=this.geometry,Ie=1/0,Me=-1/0,pt=1/0,Ct=-1/0,at=0;at<mt.length;at++)for(var en=mt[at],Zt=0;Zt<en.length;Zt++){var It=en[Zt];Ie=Math.min(Ie,It.x),Me=Math.max(Me,It.x),pt=Math.min(pt,It.y),Ct=Math.max(Ct,It.y)}return[Ie,pt,Me,Ct]},Z.prototype.toGeoJSON=le.prototype.toGeoJSON;var ee=g.pbf,ke=we;function ne(mt){var Ie=new ee;return function(Me,pt){for(var Ct in Me.layers)pt.writeMessage(3,K,Me.layers[Ct])}(mt,Ie),Ie.finish()}function K(mt,Ie){var Me;Ie.writeVarintField(15,mt.version||1),Ie.writeStringField(1,mt.name||""),Ie.writeVarintField(5,mt.extent||4096);var pt={keys:[],values:[],keycache:{},valuecache:{}};for(Me=0;Me<mt.length;Me++)pt.feature=mt.feature(Me),Ie.writeMessage(2,ye,pt);var Ct=pt.keys;for(Me=0;Me<Ct.length;Me++)Ie.writeStringField(3,Ct[Me]);var at=pt.values;for(Me=0;Me<at.length;Me++)Ie.writeMessage(4,ie,at[Me])}function ye(mt,Ie){var Me=mt.feature;void 0!==Me.id&&Ie.writeVarintField(1,Me.id),Ie.writeMessage(2,Q,mt),Ie.writeVarintField(3,Me.type),Ie.writeMessage(4,be,Me)}function Q(mt,Ie){var Me=mt.feature,pt=mt.keys,Ct=mt.values,at=mt.keycache,en=mt.valuecache;for(var Zt in Me.properties){var It=Me.properties[Zt],un=at[Zt];if(null!==It){void 0===un&&(pt.push(Zt),at[Zt]=un=pt.length-1),Ie.writeVarint(un);var Xn=typeof It;"string"!==Xn&&"boolean"!==Xn&&"number"!==Xn&&(It=JSON.stringify(It));var ri=Xn+":"+It,Zn=en[ri];void 0===Zn&&(Ct.push(It),en[ri]=Zn=Ct.length-1),Ie.writeVarint(Zn)}}}function he(mt,Ie){return(Ie<<3)+(7&mt)}function se(mt){return mt<<1^mt>>31}function be(mt,Ie){for(var Me=mt.loadGeometry(),pt=mt.type,Ct=0,at=0,en=Me.length,Zt=0;Zt<en;Zt++){var It=Me[Zt],un=1;1===pt&&(un=It.length),Ie.writeVarint(he(1,un));for(var Xn=3===pt?It.length-1:It.length,ri=0;ri<Xn;ri++){1===ri&&1!==pt&&Ie.writeVarint(he(2,Xn-1));var Zn=It[ri].x-Ct,yr=It[ri].y-at;Ie.writeVarint(se(Zn)),Ie.writeVarint(se(yr)),Ct+=Zn,at+=yr}3===pt&&Ie.writeVarint(he(7,1))}}function ie(mt,Ie){var Me=typeof mt;"string"===Me?Ie.writeStringField(1,mt):"boolean"===Me?Ie.writeBooleanField(7,mt):"number"===Me&&(mt%1!=0?Ie.writeDoubleField(3,mt):mt<0?Ie.writeSVarintField(6,mt):Ie.writeVarintField(5,mt))}je.exports=ne,je.exports.fromVectorTileJs=ne,je.exports.fromGeojsonVt=function(mt,Ie){Ie=Ie||{};var Me={};for(var pt in mt)Me[pt]=new ke(mt[pt].features,Ie),Me[pt].name=pt,Me[pt].version=Ie.version,Me[pt].extent=Ie.extent;return ne({layers:Me})},je.exports.GeoJSONWrapper=ke;var Ve=g.getDefaultExportFromCjs(je.exports);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:mt=>mt},Y=Math.fround||(Ge=new Float32Array(1),mt=>(Ge[0]=+mt,Ge[0]));var Ge;const De=3,Ke=5,$e=6;class ae{constructor(Ie){this.options=Object.assign(Object.create(Se),Ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ie){const{log:Me,minZoom:pt,maxZoom:Ct}=this.options;Me&&console.time("total time");const at=`prepare ${Ie.length} points`;Me&&console.time(at),this.points=Ie;const en=[];for(let It=0;It<Ie.length;It++){const un=Ie[It];if(!un.geometry)continue;const[Xn,ri]=un.geometry.coordinates,Zn=Y(dn(Xn)),yr=Y(qt(ri));en.push(Zn,yr,1/0,It,-1,1),this.options.reduce&&en.push(0)}let Zt=this.trees[Ct+1]=this._createTree(en);Me&&console.timeEnd(at);for(let It=Ct;It>=pt;It--){const un=+Date.now();Zt=this.trees[It]=this._createTree(this._cluster(Zt,It)),Me&&console.log("z%d: %d clusters in %dms",It,Zt.numItems,+Date.now()-un)}return Me&&console.timeEnd("total time"),this}getClusters(Ie,Me){let pt=((Ie[0]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,Ie[1]));let at=180===Ie[2]?180:((Ie[2]+180)%360+360)%360-180;const en=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)pt=-180,at=180;else if(pt>at){const ri=this.getClusters([pt,Ct,180,en],Me),Zn=this.getClusters([-180,Ct,at,en],Me);return ri.concat(Zn)}const Zt=this.trees[this._limitZoom(Me)],It=Zt.range(dn(pt),qt(en),dn(at),qt(Ct)),un=Zt.data,Xn=[];for(const ri of It){const Zn=this.stride*ri;Xn.push(un[Zn+Ke]>1?Ze(un,Zn,this.clusterProps):this.points[un[Zn+De]])}return Xn}getChildren(Ie){const Me=this._getOriginId(Ie),pt=this._getOriginZoom(Ie),Ct="No cluster with the specified id.",at=this.trees[pt];if(!at)throw new Error(Ct);const en=at.data;if(Me*this.stride>=en.length)throw new Error(Ct);const Zt=this.options.radius/(this.options.extent*Math.pow(2,pt-1)),It=at.within(en[Me*this.stride],en[Me*this.stride+1],Zt),un=[];for(const Xn of It){const ri=Xn*this.stride;en[ri+4]===Ie&&un.push(en[ri+Ke]>1?Ze(en,ri,this.clusterProps):this.points[en[ri+De]])}if(0===un.length)throw new Error(Ct);return un}getLeaves(Ie,Me,pt){const Ct=[];return this._appendLeaves(Ct,Ie,Me=Me||10,pt=pt||0,0),Ct}getTile(Ie,Me,pt){const Ct=this.trees[this._limitZoom(Ie)],at=Math.pow(2,Ie),{extent:en,radius:Zt}=this.options,It=Zt/en,un=(pt-It)/at,Xn=(pt+1+It)/at,ri={features:[]};return this._addTileFeatures(Ct.range((Me-It)/at,un,(Me+1+It)/at,Xn),Ct.data,Me,pt,at,ri),0===Me&&this._addTileFeatures(Ct.range(1-It/at,un,1,Xn),Ct.data,at,pt,at,ri),Me===at-1&&this._addTileFeatures(Ct.range(0,un,It/at,Xn),Ct.data,-1,pt,at,ri),ri.features.length?ri:null}getClusterExpansionZoom(Ie){let Me=this._getOriginZoom(Ie)-1;for(;Me<=this.options.maxZoom;){const pt=this.getChildren(Ie);if(Me++,1!==pt.length)break;Ie=pt[0].properties.cluster_id}return Me}_appendLeaves(Ie,Me,pt,Ct,at){const en=this.getChildren(Me);for(const Zt of en){const It=Zt.properties;if(It&&It.cluster?at+It.point_count<=Ct?at+=It.point_count:at=this._appendLeaves(Ie,It.cluster_id,pt,Ct,at):at<Ct?at++:Ie.push(Zt),Ie.length===pt)break}return at}_createTree(Ie){const Me=new g.KDBush(Ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pt=0;pt<Ie.length;pt+=this.stride)Me.add(Ie[pt],Ie[pt+1]);return Me.finish(),Me.data=Ie,Me}_addTileFeatures(Ie,Me,pt,Ct,at,en){for(const Zt of Ie){const It=Zt*this.stride,un=Me[It+Ke]>1;let Xn,ri,Zn;if(un)Xn=et(Me,It,this.clusterProps),ri=Me[It],Zn=Me[It+1];else{const sr=this.points[Me[It+De]];Xn=sr.properties;const[Zi,Sr]=sr.geometry.coordinates;ri=dn(Zi),Zn=qt(Sr)}const yr={type:1,geometry:[[Math.round(this.options.extent*(ri*at-pt)),Math.round(this.options.extent*(Zn*at-Ct))]],tags:Xn};let Cr;Cr=un||this.options.generateId?Me[It+De]:this.points[Me[It+De]].id,void 0!==Cr&&(yr.id=Cr),en.features.push(yr)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,Me){const{radius:pt,extent:Ct,reduce:at,minPoints:en}=this.options,Zt=pt/(Ct*Math.pow(2,Me)),It=Ie.data,un=[],Xn=this.stride;for(let ri=0;ri<It.length;ri+=Xn){if(It[ri+2]<=Me)continue;It[ri+2]=Me;const Zn=It[ri],yr=It[ri+1],Cr=Ie.within(It[ri],It[ri+1],Zt),sr=It[ri+Ke];let Zi=sr;for(const Sr of Cr){const Br=Sr*Xn;It[Br+2]>Me&&(Zi+=It[Br+Ke])}if(Zi>sr&&Zi>=en){let Sr,Br=Zn*sr,vt=yr*sr,wt=-1;const nn=((ri/Xn|0)<<5)+(Me+1)+this.points.length;for(const an of Cr){const Sn=an*Xn;if(It[Sn+2]<=Me)continue;It[Sn+2]=Me;const Vn=It[Sn+Ke];Br+=It[Sn]*Vn,vt+=It[Sn+1]*Vn,It[Sn+4]=nn,at&&(Sr||(Sr=this._map(It,ri,!0),wt=this.clusterProps.length,this.clusterProps.push(Sr)),at(Sr,this._map(It,Sn)))}It[ri+4]=nn,un.push(Br/Zi,vt/Zi,1/0,nn,-1,Zi),at&&un.push(wt)}else{for(let Sr=0;Sr<Xn;Sr++)un.push(It[ri+Sr]);if(Zi>1)for(const Sr of Cr){const Br=Sr*Xn;if(!(It[Br+2]<=Me)){It[Br+2]=Me;for(let vt=0;vt<Xn;vt++)un.push(It[Br+vt])}}}}return un}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,Me,pt){if(Ie[Me+Ke]>1){const en=this.clusterProps[Ie[Me+$e]];return pt?Object.assign({},en):en}const Ct=this.points[Ie[Me+De]].properties,at=this.options.map(Ct);return pt&&at===Ct?Object.assign({},at):at}}function Ze(mt,Ie,Me){return{type:"Feature",id:mt[Ie+De],properties:et(mt,Ie,Me),geometry:{type:"Point",coordinates:[(pt=mt[Ie],360*(pt-.5)),_n(mt[Ie+1])]}};var pt}function et(mt,Ie,Me){const pt=mt[Ie+Ke],Ct=pt>=1e4?`${Math.round(pt/1e3)}k`:pt>=1e3?Math.round(pt/100)/10+"k":pt,at=mt[Ie+$e],en=-1===at?{}:Object.assign({},Me[at]);return Object.assign(en,{cluster:!0,cluster_id:mt[Ie+De],point_count:pt,point_count_abbreviated:Ct})}function dn(mt){return mt/360+.5}function qt(mt){const Ie=Math.sin(mt*Math.PI/180),Me=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Me<0?0:Me>1?1:Me}function _n(mt){const Ie=(180-360*mt)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function kn(mt,Ie,Me,pt){for(var Ct,at=pt,en=Me-Ie>>1,Zt=Me-Ie,It=mt[Ie],un=mt[Ie+1],Xn=mt[Me],ri=mt[Me+1],Zn=Ie+3;Zn<Me;Zn+=3){var yr=ei(mt[Zn],mt[Zn+1],It,un,Xn,ri);if(yr>at)Ct=Zn,at=yr;else if(yr===at){var Cr=Math.abs(Zn-en);Cr<Zt&&(Ct=Zn,Zt=Cr)}}at>pt&&(Ct-Ie>3&&kn(mt,Ie,Ct,pt),mt[Ct+2]=at,Me-Ct>3&&kn(mt,Ct,Me,pt))}function ei(mt,Ie,Me,pt,Ct,at){var en=Ct-Me,Zt=at-pt;if(0!==en||0!==Zt){var It=((mt-Me)*en+(Ie-pt)*Zt)/(en*en+Zt*Zt);It>1?(Me=Ct,pt=at):It>0&&(Me+=en*It,pt+=Zt*It)}return(en=mt-Me)*en+(Zt=Ie-pt)*Zt}function Vt(mt,Ie,Me,pt){var Ct={id:void 0===mt?null:mt,type:Ie,geometry:Me,tags:pt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(at){var en=at.geometry,Zt=at.type;if("Point"===Zt||"MultiPoint"===Zt||"LineString"===Zt)vi(at,en);else if("Polygon"===Zt||"MultiLineString"===Zt)for(var It=0;It<en.length;It++)vi(at,en[It]);else if("MultiPolygon"===Zt)for(It=0;It<en.length;It++)for(var un=0;un<en[It].length;un++)vi(at,en[It][un])}(Ct),Ct}function vi(mt,Ie){for(var Me=0;Me<Ie.length;Me+=3)mt.minX=Math.min(mt.minX,Ie[Me]),mt.minY=Math.min(mt.minY,Ie[Me+1]),mt.maxX=Math.max(mt.maxX,Ie[Me]),mt.maxY=Math.max(mt.maxY,Ie[Me+1])}function Tn(mt,Ie,Me,pt){if(Ie.geometry){var Ct=Ie.geometry.coordinates,at=Ie.geometry.type,en=Math.pow(Me.tolerance/((1<<Me.maxZoom)*Me.extent),2),Zt=[],It=Ie.id;if(Me.promoteId?It=Ie.properties[Me.promoteId]:Me.generateId&&(It=pt||0),"Point"===at)Un(Ct,Zt);else if("MultiPoint"===at)for(var un=0;un<Ct.length;un++)Un(Ct[un],Zt);else if("LineString"===at)cn(Ct,Zt,en,!1);else if("MultiLineString"===at){if(Me.lineMetrics){for(un=0;un<Ct.length;un++)cn(Ct[un],Zt=[],en,!1),mt.push(Vt(It,"LineString",Zt,Ie.properties));return}Lt(Ct,Zt,en,!1)}else if("Polygon"===at)Lt(Ct,Zt,en,!0);else{if("MultiPolygon"!==at){if("GeometryCollection"===at){for(un=0;un<Ie.geometry.geometries.length;un++)Tn(mt,{id:It,geometry:Ie.geometry.geometries[un],properties:Ie.properties},Me,pt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(un=0;un<Ct.length;un++){var Xn=[];Lt(Ct[un],Xn,en,!0),Zt.push(Xn)}}mt.push(Vt(It,at,Zt,Ie.properties))}}function Un(mt,Ie){Ie.push(Cn(mt[0])),Ie.push(Gn(mt[1])),Ie.push(0)}function cn(mt,Ie,Me,pt){for(var Ct,at,en=0,Zt=0;Zt<mt.length;Zt++){var It=Cn(mt[Zt][0]),un=Gn(mt[Zt][1]);Ie.push(It),Ie.push(un),Ie.push(0),Zt>0&&(en+=pt?(Ct*un-It*at)/2:Math.sqrt(Math.pow(It-Ct,2)+Math.pow(un-at,2))),Ct=It,at=un}var Xn=Ie.length-3;Ie[2]=1,kn(Ie,0,Xn,Me),Ie[Xn+2]=1,Ie.size=Math.abs(en),Ie.start=0,Ie.end=Ie.size}function Lt(mt,Ie,Me,pt){for(var Ct=0;Ct<mt.length;Ct++){var at=[];cn(mt[Ct],at,Me,pt),Ie.push(at)}}function Cn(mt){return mt/360+.5}function Gn(mt){var Ie=Math.sin(mt*Math.PI/180),Me=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Me<0?0:Me>1?1:Me}function At(mt,Ie,Me,pt,Ct,at,en,Zt){if(pt/=Ie,at>=(Me/=Ie)&&en<pt)return mt;if(en<Me||at>=pt)return null;for(var It=[],un=0;un<mt.length;un++){var Xn=mt[un],ri=Xn.geometry,Zn=Xn.type,yr=0===Ct?Xn.minX:Xn.minY,Cr=0===Ct?Xn.maxX:Xn.maxY;if(yr>=Me&&Cr<pt)It.push(Xn);else if(!(Cr<Me||yr>=pt)){var sr=[];if("Point"===Zn||"MultiPoint"===Zn)Ae(ri,sr,Me,pt,Ct);else if("LineString"===Zn)Te(ri,sr,Me,pt,Ct,!1,Zt.lineMetrics);else if("MultiLineString"===Zn)lt(ri,sr,Me,pt,Ct,!1);else if("Polygon"===Zn)lt(ri,sr,Me,pt,Ct,!0);else if("MultiPolygon"===Zn)for(var Zi=0;Zi<ri.length;Zi++){var Sr=[];lt(ri[Zi],Sr,Me,pt,Ct,!0),Sr.length&&sr.push(Sr)}if(sr.length){if(Zt.lineMetrics&&"LineString"===Zn){for(Zi=0;Zi<sr.length;Zi++)It.push(Vt(Xn.id,Zn,sr[Zi],Xn.tags));continue}"LineString"!==Zn&&"MultiLineString"!==Zn||(1===sr.length?(Zn="LineString",sr=sr[0]):Zn="MultiLineString"),"Point"!==Zn&&"MultiPoint"!==Zn||(Zn=3===sr.length?"Point":"MultiPoint"),It.push(Vt(Xn.id,Zn,sr,Xn.tags))}}}return It.length?It:null}function Ae(mt,Ie,Me,pt,Ct){for(var at=0;at<mt.length;at+=3){var en=mt[at+Ct];en>=Me&&en<=pt&&(Ie.push(mt[at]),Ie.push(mt[at+1]),Ie.push(mt[at+2]))}}function Te(mt,Ie,Me,pt,Ct,at,en){for(var Zt,It,un=Ee(mt),Xn=0===Ct?ln:Fn,ri=mt.start,Zn=0;Zn<mt.length-3;Zn+=3){var yr=mt[Zn],Cr=mt[Zn+1],sr=mt[Zn+2],Zi=mt[Zn+3],Sr=mt[Zn+4],Br=0===Ct?yr:Cr,vt=0===Ct?Zi:Sr,wt=!1;en&&(Zt=Math.sqrt(Math.pow(yr-Zi,2)+Math.pow(Cr-Sr,2))),Br<Me?vt>Me&&(It=Xn(un,yr,Cr,Zi,Sr,Me),en&&(un.start=ri+Zt*It)):Br>pt?vt<pt&&(It=Xn(un,yr,Cr,Zi,Sr,pt),en&&(un.start=ri+Zt*It)):Mt(un,yr,Cr,sr),vt<Me&&Br>=Me&&(It=Xn(un,yr,Cr,Zi,Sr,Me),wt=!0),vt>pt&&Br<=pt&&(It=Xn(un,yr,Cr,Zi,Sr,pt),wt=!0),!at&&wt&&(en&&(un.end=ri+Zt*It),Ie.push(un),un=Ee(mt)),en&&(ri+=Zt)}var nn=mt.length-3;yr=mt[nn],Cr=mt[nn+1],sr=mt[nn+2],(Br=0===Ct?yr:Cr)>=Me&&Br<=pt&&Mt(un,yr,Cr,sr),nn=un.length-3,at&&nn>=3&&(un[nn]!==un[0]||un[nn+1]!==un[1])&&Mt(un,un[0],un[1],un[2]),un.length&&Ie.push(un)}function Ee(mt){var Ie=[];return Ie.size=mt.size,Ie.start=mt.start,Ie.end=mt.end,Ie}function lt(mt,Ie,Me,pt,Ct,at){for(var en=0;en<mt.length;en++)Te(mt[en],Ie,Me,pt,Ct,at,!1)}function Mt(mt,Ie,Me,pt){mt.push(Ie),mt.push(Me),mt.push(pt)}function ln(mt,Ie,Me,pt,Ct,at){var en=(at-Ie)/(pt-Ie);return mt.push(at),mt.push(Me+(Ct-Me)*en),mt.push(1),en}function Fn(mt,Ie,Me,pt,Ct,at){var en=(at-Me)/(Ct-Me);return mt.push(Ie+(pt-Ie)*en),mt.push(at),mt.push(1),en}function Bn(mt,Ie){for(var Me=[],pt=0;pt<mt.length;pt++){var Ct,at=mt[pt],en=at.type;if("Point"===en||"MultiPoint"===en||"LineString"===en)Ct=yn(at.geometry,Ie);else if("MultiLineString"===en||"Polygon"===en){Ct=[];for(var Zt=0;Zt<at.geometry.length;Zt++)Ct.push(yn(at.geometry[Zt],Ie))}else if("MultiPolygon"===en)for(Ct=[],Zt=0;Zt<at.geometry.length;Zt++){for(var It=[],un=0;un<at.geometry[Zt].length;un++)It.push(yn(at.geometry[Zt][un],Ie));Ct.push(It)}Me.push(Vt(at.id,en,Ct,at.tags))}return Me}function yn(mt,Ie){var Me=[];Me.size=mt.size,void 0!==mt.start&&(Me.start=mt.start,Me.end=mt.end);for(var pt=0;pt<mt.length;pt+=3)Me.push(mt[pt]+Ie,mt[pt+1],mt[pt+2]);return Me}function Yi(mt,Ie){if(mt.transformed)return mt;var Me,pt,Ct,at=1<<mt.z,en=mt.x,Zt=mt.y;for(Me=0;Me<mt.features.length;Me++){var It=mt.features[Me],un=It.geometry,Xn=It.type;if(It.geometry=[],1===Xn)for(pt=0;pt<un.length;pt+=2)It.geometry.push(or(un[pt],un[pt+1],Ie,at,en,Zt));else for(pt=0;pt<un.length;pt++){var ri=[];for(Ct=0;Ct<un[pt].length;Ct+=2)ri.push(or(un[pt][Ct],un[pt][Ct+1],Ie,at,en,Zt));It.geometry.push(ri)}}return mt.transformed=!0,mt}function or(mt,Ie,Me,pt,Ct,at){return[Math.round(Me*(mt*pt-Ct)),Math.round(Me*(Ie*pt-at))]}function ai(mt,Ie,Me,pt,Ct){for(var at=Ie===Ct.maxZoom?0:Ct.tolerance/((1<<Ie)*Ct.extent),en={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Me,y:pt,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Zt=0;Zt<mt.length;Zt++){en.numFeatures++,Ti(en,mt[Zt],at,Ct);var It=mt[Zt].minX,un=mt[Zt].minY,Xn=mt[Zt].maxX,ri=mt[Zt].maxY;It<en.minX&&(en.minX=It),un<en.minY&&(en.minY=un),Xn>en.maxX&&(en.maxX=Xn),ri>en.maxY&&(en.maxY=ri)}return en}function Ti(mt,Ie,Me,pt){var Ct=Ie.geometry,at=Ie.type,en=[];if("Point"===at||"MultiPoint"===at)for(var Zt=0;Zt<Ct.length;Zt+=3)en.push(Ct[Zt]),en.push(Ct[Zt+1]),mt.numPoints++,mt.numSimplified++;else if("LineString"===at)wr(en,Ct,mt,Me,!1,!1);else if("MultiLineString"===at||"Polygon"===at)for(Zt=0;Zt<Ct.length;Zt++)wr(en,Ct[Zt],mt,Me,"Polygon"===at,0===Zt);else if("MultiPolygon"===at)for(var It=0;It<Ct.length;It++){var un=Ct[It];for(Zt=0;Zt<un.length;Zt++)wr(en,un[Zt],mt,Me,!0,0===Zt)}if(en.length){var Xn=Ie.tags||null;if("LineString"===at&&pt.lineMetrics){for(var ri in Xn={},Ie.tags)Xn[ri]=Ie.tags[ri];Xn.mapbox_clip_start=Ct.start/Ct.size,Xn.mapbox_clip_end=Ct.end/Ct.size}var Zn={geometry:en,type:"Polygon"===at||"MultiPolygon"===at?3:"LineString"===at||"MultiLineString"===at?2:1,tags:Xn};null!==Ie.id&&(Zn.id=Ie.id),mt.features.push(Zn)}}function wr(mt,Ie,Me,pt,Ct,at){var en=pt*pt;if(pt>0&&Ie.size<(Ct?en:pt))Me.numPoints+=Ie.length/3;else{for(var Zt=[],It=0;It<Ie.length;It+=3)(0===pt||Ie[It+2]>en)&&(Me.numSimplified++,Zt.push(Ie[It]),Zt.push(Ie[It+1])),Me.numPoints++;Ct&&function(un,Xn){for(var ri=0,Zn=0,yr=un.length,Cr=yr-2;Zn<yr;Cr=Zn,Zn+=2)ri+=(un[Zn]-un[Cr])*(un[Zn+1]+un[Cr+1]);if(ri>0===Xn)for(Zn=0,yr=un.length;Zn<yr/2;Zn+=2){var sr=un[Zn],Zi=un[Zn+1];un[Zn]=un[yr-2-Zn],un[Zn+1]=un[yr-1-Zn],un[yr-2-Zn]=sr,un[yr-1-Zn]=Zi}}(Zt,at),mt.push(Zt)}}function Gi(mt,Ie){var Me=(Ie=this.options=function(Ct,at){for(var en in at)Ct[en]=at[en];return Ct}(Object.create(this.options),Ie)).debug;if(Me&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ct,at,en,Zt,It,un,pt=function(Ct,at){var en=[];if("FeatureCollection"===Ct.type)for(var Zt=0;Zt<Ct.features.length;Zt++)Tn(en,Ct.features[Zt],at,Zt);else Tn(en,"Feature"===Ct.type?Ct:{geometry:Ct},at);return en}(mt,Ie);this.tiles={},this.tileCoords=[],Me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Zt=Ct=pt,It=At(Ct,1,-1-(en=(at=Ie).buffer/at.extent),en,0,-1,2,at),un=At(Ct,1,1-en,2+en,0,-1,2,at),(It||un)&&(Zt=At(Ct,1,-en,1+en,0,-1,2,at)||[],It&&(Zt=Bn(It,1).concat(Zt)),un&&(Zt=Zt.concat(Bn(un,-1)))),(pt=Zt).length&&this.splitTile(pt,0,0,0),Me&&(pt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gr(mt,Ie,Me){return 32*((1<<mt)*Me+Ie)+mt}function Fr(mt,Ie){const Me=mt.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const pt=this._geoJSONIndex.getTile(Me.z,Me.x,Me.y);if(!pt)return Ie(null,null);const Ct=new class{constructor(en){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.EXTENT,this.length=en.length,this._features=en}feature(en){return new class{constructor(Zt){this._feature=Zt,this.extent=g.EXTENT,this.type=Zt.type,this.properties=Zt.tags,"id"in Zt&&!isNaN(Zt.id)&&(this.id=parseInt(Zt.id,10))}loadGeometry(){if(1===this._feature.type){const Zt=[];for(const It of this._feature.geometry)Zt.push([new g.Point(It[0],It[1])]);return Zt}{const Zt=[];for(const It of this._feature.geometry){const un=[];for(const Xn of It)un.push(new g.Point(Xn[0],Xn[1]));Zt.push(un)}return Zt}}toGeoJSON(Zt,It,un){return Qe.call(this,Zt,It,un)}}(this._features[en])}}(pt.features);let at=Ve(Ct);0===at.byteOffset&&at.byteLength===at.buffer.byteLength||(at=new Uint8Array(at)),Ie(null,{vectorTile:Ct,rawData:at.buffer})}Gi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gi.prototype.splitTile=function(mt,Ie,Me,pt,Ct,at,en){for(var Zt=[mt,Ie,Me,pt],It=this.options,un=It.debug;Zt.length;){pt=Zt.pop(),Me=Zt.pop(),Ie=Zt.pop(),mt=Zt.pop();var Xn=1<<Ie,ri=gr(Ie,Me,pt),Zn=this.tiles[ri];if(!Zn&&(un>1&&console.time("creation"),Zn=this.tiles[ri]=ai(mt,Ie,Me,pt,It),this.tileCoords.push({z:Ie,x:Me,y:pt}),un)){un>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,Me,pt,Zn.numFeatures,Zn.numPoints,Zn.numSimplified),console.timeEnd("creation"));var yr="z"+Ie;this.stats[yr]=(this.stats[yr]||0)+1,this.total++}if(Zn.source=mt,Ct){if(Ie===It.maxZoom||Ie===Ct)continue;var Cr=1<<Ct-Ie;if(Me!==Math.floor(at/Cr)||pt!==Math.floor(en/Cr))continue}else if(Ie===It.indexMaxZoom||Zn.numPoints<=It.indexMaxPoints)continue;if(Zn.source=null,0!==mt.length){un>1&&console.time("clipping");var sr,Zi,Sr,Br,vt,wt,nn=.5*It.buffer/It.extent,an=.5-nn,Sn=.5+nn,Vn=1+nn;sr=Zi=Sr=Br=null,vt=At(mt,Xn,Me-nn,Me+Sn,0,Zn.minX,Zn.maxX,It),wt=At(mt,Xn,Me+an,Me+Vn,0,Zn.minX,Zn.maxX,It),mt=null,vt&&(sr=At(vt,Xn,pt-nn,pt+Sn,1,Zn.minY,Zn.maxY,It),Zi=At(vt,Xn,pt+an,pt+Vn,1,Zn.minY,Zn.maxY,It),vt=null),wt&&(Sr=At(wt,Xn,pt-nn,pt+Sn,1,Zn.minY,Zn.maxY,It),Br=At(wt,Xn,pt+an,pt+Vn,1,Zn.minY,Zn.maxY,It),wt=null),un>1&&console.timeEnd("clipping"),Zt.push(sr||[],Ie+1,2*Me,2*pt),Zt.push(Zi||[],Ie+1,2*Me,2*pt+1),Zt.push(Sr||[],Ie+1,2*Me+1,2*pt),Zt.push(Br||[],Ie+1,2*Me+1,2*pt+1)}}},Gi.prototype.getTile=function(mt,Ie,Me){var pt=this.options,Ct=pt.extent,at=pt.debug;if(mt<0||mt>24)return null;var en=1<<mt,Zt=gr(mt,Ie=(Ie%en+en)%en,Me);if(this.tiles[Zt])return Yi(this.tiles[Zt],Ct);at>1&&console.log("drilling down to z%d-%d-%d",mt,Ie,Me);for(var It,un=mt,Xn=Ie,ri=Me;!It&&un>0;)un--,Xn=Math.floor(Xn/2),ri=Math.floor(ri/2),It=this.tiles[gr(un,Xn,ri)];return It&&It.source?(at>1&&console.log("found parent tile z%d-%d-%d",un,Xn,ri),at>1&&console.time("drilling down"),this.splitTile(It.source,un,Xn,ri,mt,Ie,Me),at>1&&console.timeEnd("drilling down"),this.tiles[Zt]?Yi(this.tiles[Zt],Ct):null):null};class zr extends g.VectorTileWorkerSource{constructor(Ie,Me,pt,Ct,at){super(Ie,Me,pt,Ct,Fr),at&&(this.loadGeoJSON=at)}loadData(Ie,Me){const pt=Ie&&Ie.request,Ct=pt&&pt.collectResourceTiming;this.loadGeoJSON(Ie,(at,en)=>{if(at||!en)return Me(at);if("object"!=typeof en)return Me(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{qe(en,!0);try{if(Ie.filter){const It=g.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===It.result)throw new Error(It.value.map(Xn=>`${Xn.key}: ${Xn.message}`).join(", "));en={type:"FeatureCollection",features:en.features.filter(Xn=>It.value.evaluate({zoom:0},Xn))}}this._geoJSONIndex=Ie.cluster?new ae(function({superclusterOptions:It,clusterProperties:un}){if(!un||!It)return It;const Xn={},ri={},Zn={accumulated:null,zoom:0},yr={properties:null},Cr=Object.keys(un);for(const sr of Cr){const[Zi,Sr]=un[sr],Br=g.createExpression(Sr),vt=g.createExpression("string"==typeof Zi?[Zi,["accumulated"],["get",sr]]:Zi);Xn[sr]=Br.value,ri[sr]=vt.value}return It.map=sr=>{yr.properties=sr;const Zi={};for(const Sr of Cr)Zi[Sr]=Xn[Sr].evaluate(Zn,yr);return Zi},It.reduce=(sr,Zi)=>{yr.properties=Zi;for(const Sr of Cr)Zn.accumulated=sr[Sr],sr[Sr]=ri[Sr].evaluate(Zn,yr)},It}(Ie)).load(en.features):new Gi(It=en,Ie.geojsonVtOptions)}catch(It){return Me(It)}this.loaded={};const Zt={};if(Ct){const It=g.getPerformanceMeasurement(pt);It&&(Zt.resourceTiming={},Zt.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(It)))}Me(null,Zt)}var It})}reloadTile(Ie,Me){const pt=this.loaded;return pt&&pt[Ie.uid]?super.reloadTile(Ie,Me):this.loadTile(Ie,Me)}loadGeoJSON(Ie,Me){if(Ie.request)g.getJSON(Ie.request,Me);else{if("string"!=typeof Ie.data)return Me(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));try{return Me(null,JSON.parse(Ie.data))}catch{return Me(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ie,Me){try{Me(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(pt){Me(pt)}}getClusterChildren(Ie,Me){try{Me(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(pt){Me(pt)}}getClusterLeaves(Ie,Me){try{Me(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(pt){Me(pt)}}}class bo{constructor(Ie){this.self=Ie,this.actor=new g.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=g.getProjection({name:"mercator"}),this.workerSourceTypes={vector:g.VectorTileWorkerSource,geojson:zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Me,pt)=>{if(this.workerSourceTypes[Me])throw new Error(`Worker source with name "${Me}" already registered.`);this.workerSourceTypes[Me]=pt},this.self.registerRTLTextPlugin=Me=>{if(g.plugin.isParsed())throw new Error("RTL text plugin already registered.");g.plugin.applyArabicShaping=Me.applyArabicShaping,g.plugin.processBidirectionalText=Me.processBidirectionalText,g.plugin.processStyledBidirectionalText=Me.processStyledBidirectionalText}}clearCaches(Ie,Me,pt){delete this.layerIndexes[Ie],delete this.availableImages[Ie],delete this.workerSources[Ie],delete this.demWorkerSources[Ie],pt()}checkIfReady(Ie,Me,pt){pt()}setReferrer(Ie,Me){this.referrer=Me}spriteLoaded(Ie,Me){this.isSpriteLoaded[Ie]=Me;for(const pt in this.workerSources[Ie]){const Ct=this.workerSources[Ie][pt];for(const at in Ct)Ct[at]instanceof g.VectorTileWorkerSource&&(Ct[at].isSpriteLoaded=Me,Ct[at].fire(new g.Event("isSpriteLoaded")))}}setImages(Ie,Me,pt){this.availableImages[Ie]=Me;for(const Ct in this.workerSources[Ie]){const at=this.workerSources[Ie][Ct];for(const en in at)at[en].availableImages=Me}pt()}enableTerrain(Ie,Me,pt){this.terrain=Me,pt()}setProjection(Ie,Me){this.projections[Ie]=g.getProjection(Me)}setLayers(Ie,Me,pt){this.getLayerIndex(Ie).replace(Me),pt()}updateLayers(Ie,Me,pt){this.getLayerIndex(Ie).update(Me.layers,Me.removedIds),pt()}loadTile(Ie,Me,pt){const Ct=this.enableTerrain?g.extend({enableTerrain:this.terrain},Me):Me;Ct.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Me.type,Me.source).loadTile(Ct,pt)}loadDEMTile(Ie,Me,pt){const Ct=this.enableTerrain?g.extend({buildQuadTree:this.terrain},Me):Me;this.getDEMWorkerSource(Ie,Me.source).loadTile(Ct,pt)}reloadTile(Ie,Me,pt){const Ct=this.enableTerrain?g.extend({enableTerrain:this.terrain},Me):Me;Ct.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Me.type,Me.source).reloadTile(Ct,pt)}abortTile(Ie,Me,pt){this.getWorkerSource(Ie,Me.type,Me.source).abortTile(Me,pt)}removeTile(Ie,Me,pt){this.getWorkerSource(Ie,Me.type,Me.source).removeTile(Me,pt)}removeSource(Ie,Me,pt){if(!this.workerSources[Ie]||!this.workerSources[Ie][Me.type]||!this.workerSources[Ie][Me.type][Me.source])return;const Ct=this.workerSources[Ie][Me.type][Me.source];delete this.workerSources[Ie][Me.type][Me.source],void 0!==Ct.removeSource?Ct.removeSource(Me,pt):pt()}loadWorkerSource(Ie,Me,pt){try{this.self.importScripts(Me.url),pt()}catch(Ct){pt(Ct.toString())}}syncRTLPluginState(Ie,Me,pt){try{g.plugin.setState(Me);const Ct=g.plugin.getPluginURL();if(g.plugin.isLoaded()&&!g.plugin.isParsed()&&null!=Ct){this.self.importScripts(Ct);const at=g.plugin.isParsed();pt(at?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ct}`),at)}}catch(Ct){pt(Ct.toString())}}getAvailableImages(Ie){let Me=this.availableImages[Ie];return Me||(Me=[]),Me}getLayerIndex(Ie){let Me=this.layerIndexes[Ie];return Me||(Me=this.layerIndexes[Ie]=new Oe),Me}getWorkerSource(Ie,Me,pt){return this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][Me]||(this.workerSources[Ie][Me]={}),this.workerSources[Ie][Me][pt]||(this.workerSources[Ie][Me][pt]=new this.workerSourceTypes[Me]({send:(at,en,Zt,It,un,Xn)=>{this.actor.send(at,en,Zt,Ie,un,Xn)},scheduler:this.actor.scheduler},this.getLayerIndex(Ie),this.getAvailableImages(Ie),this.isSpriteLoaded[Ie])),this.workerSources[Ie][Me][pt]}getDEMWorkerSource(Ie,Me){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][Me]||(this.demWorkerSources[Ie][Me]=new He),this.demWorkerSources[Ie][Me]}enforceCacheSizeLimit(Ie,Me){g.enforceCacheSizeLimit(Me)}getWorkerPerformanceMetrics(Ie,Me,pt){pt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new bo(self)),bo}),Le(0,function(g){function fe(x,d){if(Array.isArray(x)){if(!Array.isArray(d)||x.length!==d.length)return!1;for(let y=0;y<x.length;y++)if(!fe(x[y],d[y]))return!1;return!0}if("object"==typeof x&&null!==x&&null!==d){if("object"!=typeof d||Object.keys(x).length!==Object.keys(d).length)return!1;for(const y in x)if(!fe(x[y],d[y]))return!1;return!0}return x===d}var Ne=Oe;function Oe(x){return d=x,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,D,k=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(k);try{D=new Worker(N),S=!0}catch{S=!1}return D&&D.terminate(),URL.revokeObjectURL(N),S}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var S=document.createElement("canvas");S.width=S.height=1;var D=S.getContext("2d");if(!D)return!1;var k=D.getImageData(0,0,1,1);return k&&k.width===S.width}()||(void 0===He[y=d&&d.failIfMajorPerformanceCaveat]&&(He[y]=function(S){var D,N,F,$,k=(N=S,F=document.createElement("canvas"),($=Object.create(Oe.webGLContextAttributes)).failIfMajorPerformanceCaveat=N,F.getContext("webgl",$)||F.getContext("experimental-webgl",$));if(!k)return!1;try{D=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!D||k.isContextLost())&&(k.shaderSource(D,"void main() {}"),k.compileShader(D),!0===k.getShaderParameter(D,k.COMPILE_STATUS))}(y)),!He[y]||document.documentMode));var d,y}var He={};function ct(x,d,y){const S=g.window.document.createElement(x);return void 0!==d&&(S.className=d),y&&y.appendChild(S),S}function Ht(x,d,y){const S=g.window.document.createElementNS("http://www.w3.org/2000/svg",x);for(const D of Object.keys(d))S.setAttributeNS(null,D,d[D]);return y&&y.appendChild(S),S}Oe.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const qe=g.window.document&&g.window.document.documentElement.style,Qe=qe&&void 0!==qe.userSelect?"userSelect":"WebkitUserSelect";let je;function Nt(){qe&&Qe&&(je=qe[Qe],qe[Qe]="none")}function le(){qe&&Qe&&(qe[Qe]=je)}function we(x){x.preventDefault(),x.stopPropagation(),g.window.removeEventListener("click",we,!0)}function J(){g.window.addEventListener("click",we,!0),g.window.setTimeout(()=>{g.window.removeEventListener("click",we,!0)},0)}function Z(x,d){const y=x.getBoundingClientRect();return ne(x,y,d)}function ee(x,d){const y=x.getBoundingClientRect(),S=[];for(let D=0;D<d.length;D++)S.push(ne(x,y,d[D]));return S}function ke(x){return void 0!==g.window.InstallTrigger&&2===x.button&&x.ctrlKey&&g.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:x.button}function ne(x,d,y){const S=x.offsetWidth===d.width?1:x.offsetWidth/d.width;return new g.Point((y.clientX-d.left)*S,(y.clientY-d.top)*S)}function K(x,d){var y=d[0],S=d[1],D=d[2],k=d[3],N=y*k-D*S;return N?(x[0]=k*(N=1/N),x[1]=-S*N,x[2]=-D*N,x[3]=y*N,x):null}function ye(x){const{userImage:d}=x;return!!(d&&d.render&&d.render())&&(x.data.replace(new Uint8Array(d.data.buffer)),!0)}class Q extends g.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new g.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:y,callback:S}of this.requestors)this._notify(y,S);this.requestors=[]}}hasImage(d){return!!this.getImage(d)}getImage(d){return this.images[d]}addImage(d,y){this._validate(d,y)&&(this.images[d]=y)}_validate(d,y){let S=!0;return this._validateStretch(y.stretchX,y.data&&y.data.width)||(this.fire(new g.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),S=!1),this._validateStretch(y.stretchY,y.data&&y.data.height)||(this.fire(new g.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),S=!1),this._validateContent(y.content,y)||(this.fire(new g.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),S=!1),S}_validateStretch(d,y){if(!d)return!0;let S=0;for(const D of d){if(D[0]<S||D[1]<D[0]||y<D[1])return!1;S=D[1]}return!0}_validateContent(d,y){return!(d&&(4!==d.length||d[0]<0||y.data.width<d[0]||d[1]<0||y.data.height<d[1]||d[2]<0||y.data.width<d[2]||d[3]<0||y.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,y){y.version=this.images[d].version+1,this.images[d]=y,this.updatedImages[d]=!0}removeImage(d){const y=this.images[d];delete this.images[d],delete this.patterns[d],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,y){let S=!0;if(!this.isLoaded())for(const D of d)this.images[D]||(S=!1);this.isLoaded()||S?this._notify(d,y):this.requestors.push({ids:d,callback:y})}_notify(d,y){const S={};for(const D of d){this.images[D]||this.fire(new g.Event("styleimagemissing",{id:D}));const k=this.images[D];k?S[D]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:!(!k.userImage||!k.userImage.render)}:g.warnOnce(`Image "${D}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}y(null,S)}getPixelSize(){const{width:d,height:y}=this.atlasImage;return{width:d,height:y}}getPattern(d){const y=this.patterns[d],S=this.getImage(d);if(!S)return null;if(y&&y.position.version===S.version)return y.position;if(y)y.position.version=S.version;else{const D={w:S.data.width+2,h:S.data.height+2,x:0,y:0},k=new g.ImagePosition(D,S);this.patterns[d]={bin:D,position:k}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const y=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new g.Texture(d,this.atlasImage,y.RGBA),this.atlasTexture&&this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const k in this.patterns)d.push(this.patterns[k].bin);const{w:y,h:S}=g.potpack(d),D=this.atlasImage;D.resize({width:y||1,height:S||1});for(const k in this.patterns){const{bin:N}=this.patterns[k],F=N.x+1,$=N.y+1,W=this.images[k].data,H=W.width,de=W.height;g.RGBAImage.copy(W,D,{x:0,y:0},{x:F,y:$},{width:H,height:de}),g.RGBAImage.copy(W,D,{x:0,y:de-1},{x:F,y:$-1},{width:H,height:1}),g.RGBAImage.copy(W,D,{x:0,y:0},{x:F,y:$+de},{width:H,height:1}),g.RGBAImage.copy(W,D,{x:H-1,y:0},{x:F-1,y:$},{width:1,height:de}),g.RGBAImage.copy(W,D,{x:0,y:0},{x:F+H,y:$},{width:1,height:de})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const y of d){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const S=this.images[y];ye(S)&&this.updateImage(y,S)}}}const he=new g.Properties({anchor:new g.DataConstantProperty(g.spec.light.anchor),position:new class{constructor(){this.specification=g.spec.light.position}possiblyEvaluate(x,d){return function([y,S,D]){const k=g.degToRad(S+90),N=g.degToRad(D);return{x:y*Math.cos(k)*Math.sin(N),y:y*Math.sin(k)*Math.sin(N),z:y*Math.cos(N),azimuthal:S,polar:D}}(x.expression.evaluate(d))}interpolate(x,d,y){return{x:g.number(x.x,d.x,y),y:g.number(x.y,d.y,y),z:g.number(x.z,d.z,y),azimuthal:g.number(x.azimuthal,d.azimuthal,y),polar:g.number(x.polar,d.polar,y)}}},color:new g.DataConstantProperty(g.spec.light.color),intensity:new g.DataConstantProperty(g.spec.light.intensity)});class se extends g.Evented{constructor(d){super(),this._transitionable=new g.Transitionable(he),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,y={}){if(!this._validate(g.validateLight,d,y))for(const S in d){const D=d[S];g.endsWith(S,"-transition")?this._transitionable.setTransition(S.slice(0,-11),D):this._transitionable.setValue(S,D)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,y,S){return(!S||!1!==S.validate)&&g.emitValidationErrors(this,d.call(g.validateStyle,g.extend({value:y,style:{glyphs:!0,sprite:!0},styleSpec:g.spec})))}}const be=new g.Properties({source:new g.DataConstantProperty(g.spec.terrain.source),exaggeration:new g.DataConstantProperty(g.spec.terrain.exaggeration)});let ie=class extends g.Evented{constructor(x,d){super(),this._transitionable=new g.Transitionable(be),this.set(x),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(x){for(const d in x){const y=x[d];g.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),y):this._transitionable.setValue(d,y)}}updateTransitions(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(x){this.properties=this._transitioning.possiblyEvaluate(x)}};function Ve(x,d,y,S){const D=g.smoothstep(45,65,y),[k,N]=Se(x,S),F=g.length(d);let $=1-Math.min(1,Math.exp((F-k)/(N-k)*-6));return $*=$*$,$=Math.min(1,1.00747*$),$*D*x.alpha}function Se(x,d){const y=.5/Math.tan(.5*d);return[x.range[0]+y,x.range[1]+y]}const Y=new g.Properties({range:new g.DataConstantProperty(g.spec.fog.range),color:new g.DataConstantProperty(g.spec.fog.color),"high-color":new g.DataConstantProperty(g.spec.fog["high-color"]),"space-color":new g.DataConstantProperty(g.spec.fog["space-color"]),"horizon-blend":new g.DataConstantProperty(g.spec.fog["horizon-blend"]),"star-intensity":new g.DataConstantProperty(g.spec.fog["star-intensity"])});class Ge extends g.Evented{constructor(d,y){super(),this._transitionable=new g.Transitionable(Y),this.set(d),this._transitioning=this._transitionable.untransitioned(),this._transform=y}get state(){const d=this._transform,y="globe"===d.projection.name,S=g.globeToMercatorTransition(d.zoom),D=this.properties.get("range"),k=[.5,3];return{range:y?[g.number(k[0],D[0],S),g.number(k[1],D[1],S)]:D,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(d,y={}){if(!this._validate(g.validateFog,d,y)){for(const S of Object.keys(g.spec.fog))d&&void 0===d[S]&&(d[S]=g.spec.fog[S].default);for(const S in d){const D=d[S];g.endsWith(S,"-transition")?this._transitionable.setTransition(S.slice(0,-11),D):this._transitionable.setValue(S,D)}}}getOpacity(d){if(!this._transform.projection.supportsFog)return 0;const y=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:g.smoothstep(45,65,d))*y.a}getOpacityAtLatLng(d,y){return this._transform.projection.supportsFog?function(S,D,k){const N=g.MercatorCoordinate.fromLngLat(D),F=k.elevation?k.elevation.getAtPointOrZero(N):0,$=[N.x,N.y,F];return g.transformMat4($,$,k.mercatorFogMatrix),Ve(S,$,k.pitch,k._fov)}(this.state,d,y):0}getFovAdjustedRange(d){return this._transform.projection.supportsFog?Se(this.state,d):[0,1]}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,y,S){return(!S||!1!==S.validate)&&g.emitValidationErrors(this,d.call(g.validateStyle,g.extend({value:y,style:{glyphs:!0,sprite:!0},styleSpec:g.spec})))}}class De{constructor(d,y){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=g.uniqueId();const S=this.workerPool.acquire(this.id);for(let D=0;D<S.length;D++){const k=new De.Actor(S[D],y,this.id);k.name=`Worker ${D}`,this.actors.push(k)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(d,y,S){g.asyncAll(this.actors,(D,k)=>{D.send(d,y,k)},S=S||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ke(x,d,y){return d*(g.EXTENT/(x.tileSize*Math.pow(2,y-x.tileID.overscaledZ)))}De.Actor=g.Actor;class $e{constructor(d,y,S,D){this.screenBounds=d,this.cameraPoint=y,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=S,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,D)}static createFromScreenPoints(d,y){let S,D;if(d instanceof g.Point||"number"==typeof d[0]){const k=g.Point.convert(d);S=[k],D=y.isPointAboveHorizon(k)}else{const k=g.Point.convert(d[0]),N=g.Point.convert(d[1]);S=[k,N],D=g.polygonizeBounds(k,N).every(F=>y.isPointAboveHorizon(F))}return new $e(S,y.getCameraPoint(),D,y)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(d){return g.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],d)}bufferedCameraGeometry(d){const y=this.screenBounds[0],S=1===this.screenBounds.length?this.screenBounds[0].add(new g.Point(1,1)):this.screenBounds[1],D=g.polygonizeBounds(y,S,0,!1);return this.cameraPoint.y>S.y&&(this.cameraPoint.x>y.x&&this.cameraPoint.x<S.x?D.splice(3,0,this.cameraPoint):this.cameraPoint.x>=S.x?D[2]=this.cameraPoint:this.cameraPoint.x<=y.x&&(D[3]=this.cameraPoint)),g.bufferConvexPolygon(D,d)}bufferedCameraGeometryGlobe(d){const y=this.screenBounds[0],S=1===this.screenBounds.length?this.screenBounds[0].add(new g.Point(1,1)):this.screenBounds[1],D=g.polygonizeBounds(y,S,d),k=this.cameraPoint.clone();switch(3*((k.y>y.y)+(k.y>S.y))+((k.x>y.x)+(k.x>S.x))){case 0:D[0]=k,D[4]=k.clone();break;case 1:D.splice(1,0,k);break;case 2:D[1]=k;break;case 3:D.splice(4,0,k);break;case 5:D.splice(2,0,k);break;case 6:D[3]=k;break;case 7:D.splice(3,0,k);break;case 8:D[2]=k}return D}containsTile(d,y,S,D=0){const k=d.queryPadding/y._pixelsPerMercatorPixel+1,N=S?this._bufferedCameraMercator(k,y):this._bufferedScreenMercator(k,y);let F=d.tileID.wrap+(N.unwrapped?D:0);const $=N.polygon.map(dt=>g.getTilePoint(d.tileTransform,dt,F));if(!g.polygonIntersectsBox($,0,0,g.EXTENT,g.EXTENT))return;F=d.tileID.wrap+(this.screenGeometryMercator.unwrapped?D:0);const W=this.screenGeometryMercator.polygon.map(dt=>g.getTileVec3(d.tileTransform,dt,F)),H=W.map(dt=>new g.Point(dt[0],dt[1])),de=y.getFreeCameraOptions().position||new g.MercatorCoordinate(0,0,0),ze=g.getTileVec3(d.tileTransform,de,F),Xe=W.map(dt=>{const pe=g.sub(dt,dt,ze);return g.normalize(pe,pe),new g.Ray(ze,pe)}),it=Ke(d,1,y.zoom)*y._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:H,tilespaceRays:Xe,bufferedTilespaceGeometry:$,bufferedTilespaceBounds:(ot=g.getBounds($),ot.min.x=g.clamp(ot.min.x,0,g.EXTENT),ot.min.y=g.clamp(ot.min.y,0,g.EXTENT),ot.max.x=g.clamp(ot.max.x,0,g.EXTENT),ot.max.y=g.clamp(ot.max.y,0,g.EXTENT),ot),tile:d,tileID:d.tileID,pixelToTileUnitsFactor:it};var ot}_bufferedScreenMercator(d,y){const S=et(d);if(this._screenRaycastCache[S])return this._screenRaycastCache[S];{let D;return D="globe"===y.projection.name?this._projectAndResample(this.bufferedScreenGeometry(d),y):{polygon:this.bufferedScreenGeometry(d).map(k=>y.pointCoordinate3D(k)),unwrapped:!0},this._screenRaycastCache[S]=D,D}}_bufferedCameraMercator(d,y){const S=et(d);if(this._cameraRaycastCache[S])return this._cameraRaycastCache[S];{let D;return D="globe"===y.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(d),y):{polygon:this.bufferedCameraGeometry(d).map(k=>y.pointCoordinate3D(k)),unwrapped:!0},this._cameraRaycastCache[S]=D,D}}_projectAndResample(d,y){const S=function(k,N){const F=g.multiply([],N.pixelMatrix,N.globeMatrix),$=[0,-g.GLOBE_RADIUS,0,1],W=[0,g.GLOBE_RADIUS,0,1],H=[0,0,0,1];g.transformMat4$1($,$,F),g.transformMat4$1(W,W,F),g.transformMat4$1(H,H,F);const de=new g.Point($[0]/$[3],$[1]/$[3]),ze=new g.Point(W[0]/W[3],W[1]/W[3]),Xe=g.polygonContainsPoint(k,de)&&$[3]<H[3],it=g.polygonContainsPoint(k,ze)&&W[3]<H[3];if(!Xe&&!it)return null;const ot=function(Ut,tn,Kt){for(let wn=1;wn<Ut.length;wn++){const hi=Ze(tn.pointCoordinate3D(Ut[wn-1]).x),mn=Ze(tn.pointCoordinate3D(Ut[wn]).x);if(Kt<0){if(hi<mn)return{idx:wn,t:-hi/(mn-1-hi)}}else if(mn<hi)return{idx:wn,t:(1-hi)/(mn+1-hi)}}return null}(k,N,Xe?-1:1);if(!ot)return null;const{idx:dt,t:pe}=ot;let Ye=dt>1?ae(k.slice(0,dt),N):[],bt=dt<k.length?ae(k.slice(dt),N):[];Ye=Ye.map(Ut=>new g.Point(Ze(Ut.x),Ut.y)),bt=bt.map(Ut=>new g.Point(Ze(Ut.x),Ut.y));const Et=[...Ye];0===Et.length&&Et.push(bt[bt.length-1]);const jt=g.number(Et[Et.length-1].y,(0===bt.length?Ye[0]:bt[0]).y,pe);let Gt;return Gt=Xe?[new g.Point(0,jt),new g.Point(0,0),new g.Point(1,0),new g.Point(1,jt)]:[new g.Point(1,jt),new g.Point(1,1),new g.Point(0,1),new g.Point(0,jt)],Et.push(...Gt),0===bt.length?Et.push(Ye[0]):Et.push(...bt),{polygon:Et.map(Ut=>new g.MercatorCoordinate(Ut.x,Ut.y)),unwrapped:!1}}(d,y);if(S)return S;const D=function(k,N){let F=!1,$=-1/0,W=0;for(let de=0;de<k.length-1;de++)k[de].x>$&&($=k[de].x,W=de);for(let de=0;de<k.length-1;de++){const ze=(W+de)%(k.length-1),Xe=k[ze],it=k[ze+1];Math.abs(Xe.x-it.x)>.5&&(Xe.x<it.x?(Xe.x+=1,0===ze&&(k[k.length-1].x+=1)):(it.x+=1,ze+1===k.length-1&&(k[0].x+=1)),F=!0)}const H=g.mercatorXfromLng(N.center.lng);return F&&H<Math.abs(H-1)&&k.forEach(de=>{de.x-=1}),{polygon:k,unwrapped:F}}(ae(d,y).map(k=>new g.Point(Ze(k.x),k.y)),y);return{polygon:D.polygon.map(k=>new g.MercatorCoordinate(k.x,k.y)),unwrapped:D.unwrapped}}}function ae(x,d){return g.resample(x,y=>{const S=d.pointCoordinate3D(y);y.x=S.x,y.y=S.y},1/256)}function Ze(x){return x<0?1+x%1:x%1}function et(x){return 100*x|0}function dn(x,d,y,S,D){const k=function(N,F){if(N)return D(N);if(F){x.url&&F.tiles&&x.tiles&&delete x.tiles;const $=g.pick(g.extend(F,x),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);F.vector_layers&&($.vectorLayers=F.vector_layers,$.vectorLayerIds=$.vectorLayers.map(W=>W.id)),$.tiles=d.canonicalizeTileset($,x.url),D(null,$)}};return x.url?g.getJSON(d.transformRequest(d.normalizeSourceURL(x.url,null,y,S),g.ResourceType.Source),k):g.exported.frame(()=>k(null,x))}class qt{constructor(d,y,S){this.bounds=g.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=y||0,this.maxzoom=S||24}validateBounds(d){return Array.isArray(d)&&4===d.length?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const y=Math.pow(2,d.z),S=Math.floor(g.mercatorXfromLng(this.bounds.getWest())*y),D=Math.floor(g.mercatorYfromLat(this.bounds.getNorth())*y),k=Math.ceil(g.mercatorXfromLng(this.bounds.getEast())*y),N=Math.ceil(g.mercatorYfromLat(this.bounds.getSouth())*y);return d.x>=S&&d.x<k&&d.y>=D&&d.y<N}}class _n{constructor(d,y,S){this.context=d;const D=d.gl;this.buffer=D.createBuffer(),this.dynamicDraw=!!S,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||y.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const y=this.context.gl;this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ei{constructor(d,y,S,D){this.length=y.length,this.attributes=S,this.itemSize=y.bytesPerElement,this.dynamicDraw=D,this.context=d;const k=d.gl;this.buffer=k.createBuffer(),d.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||y.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,y){for(let S=0;S<this.attributes.length;S++){const D=y.attributes[this.attributes[S].name];void 0!==D&&d.enableVertexAttribArray(D)}}setVertexAttribPointers(d,y,S){for(let D=0;D<this.attributes.length;D++){const k=this.attributes[D],N=y.attributes[k.name];void 0!==N&&d.vertexAttribPointer(N,k.components,d[kn[k.type]],!1,this.itemSize,k.offset+this.itemSize*(S||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Vt{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class vi extends Vt{getDefault(){return g.Color.transparent}set(d){const y=this.current;(d.r!==y.r||d.g!==y.g||d.b!==y.b||d.a!==y.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Tn extends Vt{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class Un extends Vt{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class cn extends Vt{getDefault(){return[!0,!0,!0,!0]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||d[3]!==y[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Lt extends Vt{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Cn extends Vt{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class Gn extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const y=this.current;(d.func!==y.func||d.ref!==y.ref||d.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class At extends Vt{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class Ae extends Vt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=d,this.dirty=!1}}class Te extends Vt{getDefault(){return[0,1]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ee extends Vt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=d,this.dirty=!1}}class lt extends Vt{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Mt extends Vt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.BLEND):y.disable(y.BLEND),this.current=d,this.dirty=!1}}class ln extends Vt{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Fn extends Vt{getDefault(){return g.Color.transparent}set(d){const y=this.current;(d.r!==y.r||d.g!==y.g||d.b!==y.b||d.a!==y.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Bn extends Vt{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class yn extends Vt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=d,this.dirty=!1}}class Yi extends Vt{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class or extends Vt{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}let ai,Ti=class extends Vt{getDefault(){return null}set(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)}};class wr extends Vt{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class Gi extends Vt{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||d[3]!==y[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class gr extends Vt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Fr extends Vt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class zr extends Vt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class bo extends Vt{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class mt extends Vt{getDefault(){return null}set(d){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Ie extends Vt{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Me extends Vt{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class pt extends Vt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Ct extends Vt{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class at extends Vt{constructor(d,y){super(d),this.context=d,this.parent=y}getDefault(){return null}}class en extends at{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Zt extends at{attachment(){return this.gl.DEPTH_ATTACHMENT}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,this.attachment(),y.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class It extends Zt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class un{constructor(d,y,S,D){this.context=d,this.width=y,this.height=S;const k=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new en(d,k),D&&(this.depthAttachment=new Zt(d,k))}destroy(){const d=this.context.gl,y=this.colorAttachment.get();if(y&&d.deleteTexture(y),this.depthAttachment){const S=this.depthAttachment.get();S&&d.deleteRenderbuffer(S)}d.deleteFramebuffer(this.framebuffer)}}class Xn{constructor(d,y=!1){if(this.gl=d,this.isWebGL2=y,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),y){const S=d;this.extVertexArrayObject={createVertexArrayOES:S.createVertexArray.bind(d),deleteVertexArrayOES:S.deleteVertexArray.bind(d),bindVertexArrayOES:S.bindVertexArray.bind(d)}}this.clearColor=new vi(this),this.clearDepth=new Tn(this),this.clearStencil=new Un(this),this.colorMask=new cn(this),this.depthMask=new Lt(this),this.stencilMask=new Cn(this),this.stencilFunc=new Gn(this),this.stencilOp=new At(this),this.stencilTest=new Ae(this),this.depthRange=new Te(this),this.depthTest=new Ee(this),this.depthFunc=new lt(this),this.blend=new Mt(this),this.blendFunc=new ln(this),this.blendColor=new Fn(this),this.blendEquation=new Bn(this),this.cullFace=new yn(this),this.cullFaceSide=new Yi(this),this.frontFace=new or(this),this.program=new Ti(this),this.activeTexture=new wr(this),this.viewport=new Gi(this),this.bindFramebuffer=new gr(this),this.bindRenderbuffer=new Fr(this),this.bindTexture=new zr(this),this.bindVertexBuffer=new bo(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ie(this),this.pixelStoreUnpack=new Me(this),this.pixelStoreUnpackPremultiplyAlpha=new pt(this),this.pixelStoreUnpackFlipY=new Ct(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=d.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=d.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=d.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),y||(this.extTextureHalfFloat=d.getExtension("OES_texture_half_float")),(y||this.extTextureHalfFloat&&d.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=y||d.getExtension("OES_standard_derivatives"),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,y){return new _n(this,d,y)}createVertexBuffer(d,y,S){return new ei(this,d,y,S)}createRenderbuffer(d,y,S){const D=this.gl,k=D.createRenderbuffer();return this.bindRenderbuffer.set(k),D.renderbufferStorage(D.RENDERBUFFER,d,y,S),this.bindRenderbuffer.set(null),k}createFramebuffer(d,y,S){return new un(this,d,y,S)}clear({color:d,depth:y,stencil:S}){const D=this.gl;let k=0;d&&(k|=D.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),void 0!==y&&(k|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),void 0!==S&&(k|=D.STENCIL_BUFFER_BIT,this.clearStencil.set(S),this.stencilMask.set(255)),D.clear(k)}setCullFace(d){!1===d.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){fe(d.blendFunction,g.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ri extends g.Evented{constructor(d,y,S,D){if(super(),this.id=d,this.dispatcher=S,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,g.extend(this,g.pick(y,["url","scheme","tileSize","promoteId"])),this._options=g.extend({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D),this._tileWorkers={},this._deduped=new g.DedupedRequest}load(d){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"}));const y=Array.isArray(this.map._language)?this.map._language.join():this.map._language,S=this.map._worldview;this._tileJSONRequest=dn(this._options,this.map._requestManager,y,S,(D,k)=>{this._tileJSONRequest=null,this._loaded=!0,D?(y&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${y}`),S&&2!==S.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${S}`),this.fire(new g.ErrorEvent(D))):k&&(g.extend(this,k),k.bounds&&(this.tileBounds=new qt(k.bounds,this.minzoom,this.maxzoom)),g.postTurnstileEvent(k.tiles,this.map._requestManager._customAccessToken),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(D)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return g.extend({},this._options)}loadTile(d,y){const S=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),D={request:this.map._requestManager.transformRequest(S,g.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:g.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(D.request.collectResourceTiming=this._collectResourceTiming,d.actor&&"expired"!==d.state)"loading"===d.state?d.reloadCallback=y:d.request=d.actor.send("reloadTile",D,k.bind(this));else if(d.actor=this._tileWorkers[S]=this._tileWorkers[S]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",D,k.bind(this),void 0,!0);else{const N=g.loadVectorTile.call({deduped:this._deduped},D,(F,$)=>{F||!$?k.call(this,F):(D.data={cacheControl:$.cacheControl,expires:$.expires,rawData:$.rawData.slice(0)},d.actor&&d.actor.send("loadTile",D,k.bind(this),void 0,!0))},!0);d.request={cancel:N}}function k(N,F){return delete d.request,d.aborted?y(null):N&&404!==N.status?y(N):(F&&F.resourceTiming&&(d.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&d.setExpiryData(F),d.loadVectorData(F,this.map.painter),g.cacheEntryPossiblyAdded(this.dispatcher),y(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Zn extends g.Evented{constructor(d,y,S,D){super(),this.id=d,this.dispatcher=S,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=g.extend({type:"raster"},y),g.extend(this,g.pick(y,["url","scheme","tileSize"]))}load(d){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dn(this._options,this.map._requestManager,null,null,(y,S)=>{this._tileJSONRequest=null,this._loaded=!0,y?this.fire(new g.ErrorEvent(y)):S&&(g.extend(this,S),S.bounds&&(this.tileBounds=new qt(S.bounds,this.minzoom,this.maxzoom)),g.postTurnstileEvent(S.tiles),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(y)})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return g.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,y){const S=g.exported.devicePixelRatio>=2,D=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),S,this.tileSize);d.request=g.getImage(this.map._requestManager.transformRequest(D,g.ResourceType.Tile),(k,N,F,$)=>(delete d.request,d.aborted?(d.state="unloaded",y(null)):k?(d.state="errored",y(k)):N?(this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:F,expires:$}),d.setTexture(N,this.map.painter),d.state="loaded",g.cacheEntryPossiblyAdded(this.dispatcher),void y(null)):y(null)))}static loadTileData(d,y,S){d.setTexture(y,S)}static unloadTileData(d,y){d.texture&&y.saveTileTexture(d.texture)}abortTile(d,y){d.request&&(d.request.cancel(),delete d.request),y()}unloadTile(d,y){d.texture&&this.map.painter.saveTileTexture(d.texture),y()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function yr(x,d,y,S,D,k,N,F){const $=[x,y,D,d,S,k,1,1,1],W=[N,F,1],H=g.adjoint([],$),[de,ze,Xe]=g.transformMat3(W,W,g.transpose(H,H));return g.multiply$1($,[de,0,0,0,ze,0,0,0,Xe],$)}class Cr extends g.Evented{constructor(d,y,S,D){super(),this.id=d,this.dispatcher=S,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=y,this._dirty=!1}load(d,y){this._loaded=y||!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=g.getImage(this.map._requestManager.transformRequest(this.url,g.ResourceType.Image),(S,D)=>{if(this._imageRequest=null,this._loaded=!0,S)this.fire(new g.ErrorEvent(S));else if(D){const{HTMLImageElement:k}=g.window;this.image=D instanceof k?g.exported.getImageData(D):D,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,d&&(this.coordinates=d),this._finishLoading()}})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this._imageRequest&&d.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=d.url,this.load(d.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(d){this.coordinates=d,this._boundsArray=void 0;const y=d.map(g.MercatorCoordinate.fromLngLat);return this.tileID=function(S){let D=1/0,k=1/0,N=-1/0,F=-1/0;for(const de of S)D=Math.min(D,de.x),k=Math.min(k,de.y),N=Math.max(N,de.x),F=Math.max(F,de.y);const $=Math.max(N-D,F-k),W=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),H=Math.pow(2,W);return new g.CanonicalTileID(W,Math.floor((D+N)/2*H),Math.floor((k+F)/2*H))}(y),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(d){for(const $ in this.tiles){const W=this.tiles[$];"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}if(this._boundsArray)return;const y=g.tileTransform(this.tileID,this.map.transform.projection),[S,D,k,N]=this.coordinates.map($=>{const W=y.projection.project($[0],$[1]);return g.getTilePoint(y,W)._round()});this.perspectiveTransform=function($,W,H,de,ze,Xe,it,ot,dt,pe){const Ye=yr(0,0,$,0,0,W,$,W),bt=yr(H,de,ze,Xe,it,ot,dt,pe);return g.multiply$1(bt,g.adjoint(Ye,Ye),bt),[bt[6]/bt[8]*$/g.EXTENT,bt[7]/bt[8]*W/g.EXTENT]}(this.width,this.height,S.x,S.y,D.x,D.y,N.x,N.y,k.x,k.y);const F=this._boundsArray=new g.StructArrayLayout4i8;F.emplaceBack(S.x,S.y,0,0),F.emplaceBack(D.x,D.y,g.EXTENT,0),F.emplaceBack(N.x,N.y,0,g.EXTENT),F.emplaceBack(k.x,k.y,g.EXTENT,g.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=d.createVertexBuffer(F,g.boundsAttributes.members),this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const d=this.map.painter.context,y=d.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new g.Texture(d,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(d)}loadTile(d,y){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},y(null)):(d.state="errored",y(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const sr={vector:ri,raster:Zn,"raster-dem":class extends Zn{constructor(x,d,y,S){super(x,d,y,S),this.type="raster-dem",this.maxzoom=22,this._options=g.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(x,d){const y=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function S(D,k){D&&(x.state="errored",d(D)),k&&(x.dem=k,x.dem.onDeserialize(),x.needsHillshadePrepare=!0,x.needsDEMTextureUpload=!0,x.state="loaded",d(null))}x.request=g.getImage(this.map._requestManager.transformRequest(y,g.ResourceType.Tile),function(D,k,N,F){if(delete x.request,x.aborted)x.state="unloaded",d(null);else if(D)x.state="errored",d(D);else if(k){this.map._refreshExpiredTiles&&x.setExpiryData({cacheControl:N,expires:F});const $=g.window.ImageBitmap&&k instanceof g.window.ImageBitmap&&(null==ai&&(ai=g.window.OffscreenCanvas&&new g.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof g.window.createImageBitmap),ai),W=1-(k.width-g.prevPowerOfTwo(k.width))/2;W<1||x.neighboringTiles||(x.neighboringTiles=this._getNeighboringTiles(x.tileID));const H=$?k:g.exported.getImageData(k,W),de={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:H,encoding:this.encoding,padding:W};x.actor&&"expired"!==x.state||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",de,S.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(x){const d=x.canonical,y=Math.pow(2,d.z),S=(d.x-1+y)%y,D=0===d.x?x.wrap-1:x.wrap,k=(d.x+1+y)%y,N=d.x+1===y?x.wrap+1:x.wrap,F={};return F[new g.OverscaledTileID(x.overscaledZ,D,d.z,S,d.y).key]={backfilled:!1},F[new g.OverscaledTileID(x.overscaledZ,N,d.z,k,d.y).key]={backfilled:!1},d.y>0&&(F[new g.OverscaledTileID(x.overscaledZ,D,d.z,S,d.y-1).key]={backfilled:!1},F[new g.OverscaledTileID(x.overscaledZ,x.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},F[new g.OverscaledTileID(x.overscaledZ,N,d.z,k,d.y-1).key]={backfilled:!1}),d.y+1<y&&(F[new g.OverscaledTileID(x.overscaledZ,D,d.z,S,d.y+1).key]={backfilled:!1},F[new g.OverscaledTileID(x.overscaledZ,x.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},F[new g.OverscaledTileID(x.overscaledZ,N,d.z,k,d.y+1).key]={backfilled:!1}),F}unloadTile(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded"}},geojson:class extends g.Evented{constructor(x,d,y,S){super(),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=y.getActor(),this.setEventedParent(S),this._data=d.data,this._options=g.extend({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const D=g.EXTENT/this.tileSize;this.workerOptions=g.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*D,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*D,extent:g.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:g.EXTENT,radius:(void 0!==d.clusterRadius?d.clusterRadius:50)*D,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}onAdd(x){this.map=x,this.setData(this._data)}setData(x){return this._data=x,this._updateWorkerData(),this}getClusterExpansionZoom(x,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},d),this}getClusterChildren(x,d){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},d),this}getClusterLeaves(x,d,y,S){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:d,offset:y},S),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new g.Event("dataloading",{dataType:"source"})),this._loaded=!1;const x=g.extend({},this.workerOptions),d=this._data;"string"==typeof d?(x.request=this.map._requestManager.transformRequest(g.exported.resolveURL(d),g.ResourceType.Source),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,x,(y,S)=>{if(this._loaded=!0,this._pendingLoad=null,y)this.fire(new g.ErrorEvent(y));else{const D={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&S&&S.resourceTiming&&S.resourceTiming[this.id]&&(D.resourceTiming=S.resourceTiming[this.id]),this.fire(new g.Event("data",D)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(x,d){const y=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(y,{type:this.type,uid:x.uid,tileID:x.tileID,tileZoom:x.tileZoom,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:g.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(S,D)=>(delete x.request,x.unloadVectorData(),x.aborted?d(null):S?d(S):(x.loadVectorData(D,this.map.painter,"reloadTile"===y),d(null))),void 0,"loadTile"===y)}abortTile(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0}unloadTile(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return g.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Cr{constructor(x,d,y,S){super(x,d,y,S),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const x=this.options;this.urls=[];for(const d of x.urls)this.urls.push(this.map._requestManager.transformRequest(d,g.ResourceType.Source).url);g.getVideo(this.urls,(d,y)=>{this._loaded=!0,d?this.fire(new g.ErrorEvent(d)):y&&(this.video=y,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(x){if(this.video){const d=this.video.seekable;x<d.start(0)||x>d.end(0)?this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=x}}getVideo(){return this.video}onAdd(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const x=this.map.painter.context,d=x.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new g.Texture(x,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(x)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Cr,canvas:class extends Cr{constructor(x,d,y,S){super(x,d,y,S),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(D=>!Array.isArray(D)||2!==D.length||D.some(k=>"number"!=typeof k))||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof g.window.HTMLCanvasElement||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${x}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof g.window.HTMLCanvasElement?this.options.canvas:g.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new g.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const d=this.map.painter.context;this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new g.Texture(d,this.canvas,d.gl.RGBA,{premultiply:!0}),this._prepareData(d)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const x of[this.canvas.width,this.canvas.height])if(isNaN(x)||x<=0)return!0;return!1}},custom:class extends g.Evented{constructor(x,d,y,S){super(),this.id=x,this.type="custom",this._dataType="raster",this._dispatcher=y,this._implementation=d,this.setEventedParent(S),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new g.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new g.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new qt(this._implementation.bounds,this.minzoom,this.maxzoom)),d.update=this._update.bind(this),d.clearTiles=this._clearTiles.bind(this),d.coveringTiles=this._coveringTiles.bind(this),g.extend(this,g.pick(d,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return g.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(x){this._map=x,this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(x),this.load()}onRemove(x){this._implementation.onRemove&&this._implementation.onRemove(x)}hasTile(x){if(this._implementation.hasTile){const{x:d,y,z:S}=x.canonical;return this._implementation.hasTile({x:d,y,z:S})}return!this.tileBounds||this.tileBounds.contains(x.canonical)}loadTile(x,d){const{x:y,y:S,z:D}=x.tileID.canonical,k=new g.window.AbortController;x.request=Promise.resolve(this._implementation.loadTile({x:y,y:S,z:D},{signal:k.signal})).then(function(N){return delete x.request,x.aborted?(x.state="unloaded",d(null)):void 0===N?(x.state="errored",d(null)):null===N?(this.loadTileData(x,{width:this.tileSize,height:this.tileSize,data:null}),x.state="loaded",d(null)):(F=N)instanceof g.window.ImageData||F instanceof g.window.HTMLCanvasElement||F instanceof g.window.ImageBitmap||F instanceof g.window.HTMLImageElement?(this.loadTileData(x,N),x.state="loaded",void d(null)):(x.state="errored",d(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var F}.bind(this)).catch(N=>{20!==N.code&&(x.state="errored",d(N))}),x.request.cancel=()=>k.abort()}loadTileData(x,d){Zn.loadTileData(x,d,this._map.painter)}unloadTileData(x){Zn.unloadTileData(x,this._map.painter)}unloadTile(x,d){if(this.unloadTileData(x),this._implementation.unloadTile){const{x:y,y:S,z:D}=x.tileID.canonical;this._implementation.unloadTile({x:y,y:S,z:D})}d()}abortTile(x,d){x.request&&x.request.cancel&&(x.request.cancel(),delete x.request),d()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(x=>({x:x.canonical.x,y:x.canonical.y,z:x.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Zi=function(x,d,y,S){const D=new sr[d.type](x,d,y,S);if(D.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${D.id}`);return g.bindAll(["load","abort","unload","serialize","prepare"],D),D};function Sr(x,d){const y=g.identity([]);return g.scale(y,y,[.5*x.width,.5*-x.height,1]),g.translate(y,y,[1,-1,0]),g.multiply(y,y,x.calculateProjMatrix(d.toUnwrapped())),Float32Array.from(y)}function Br(x,d,y,S,D,k,N,F=!1){const $=x.tilesIn(S,N,F);$.sort(wt);const W=[];for(const de of $)W.push({wrappedTileID:de.tile.tileID.wrapped().key,queryResults:de.tile.queryRenderedFeatures(d,y,x._state,de,D,k,Sr(x.transform,de.tile.tileID),F)});const H=function(de){const ze={},Xe={};for(const it of de){const ot=it.queryResults,dt=it.wrappedTileID,pe=Xe[dt]=Xe[dt]||{};for(const Ye in ot){const bt=ot[Ye],Et=pe[Ye]=pe[Ye]||{},jt=ze[Ye]=ze[Ye]||[];for(const Gt of bt)Et[Gt.featureIndex]||(Et[Gt.featureIndex]=!0,jt.push(Gt))}}return ze}(W);for(const de in H)H[de].forEach(ze=>{const Xe=ze.feature,it=Xe.layer;it&&"background"!==it.type&&"sky"!==it.type&&(Xe.source=it.source,it["source-layer"]&&(Xe.sourceLayer=it["source-layer"]),Xe.state=void 0!==Xe.id?x.getFeatureState(it["source-layer"],Xe.id):{})});return H}function vt(x,d){const y=x.getRenderableIds().map(k=>x.getTileByID(k)),S=[],D={};for(let k=0;k<y.length;k++){const N=y[k],F=N.tileID.canonical.key;D[F]||(D[F]=!0,N.querySourceFeatures(S,d))}return S}function wt(x,d){const y=x.tileID,S=d.tileID;return y.overscaledZ-S.overscaledZ||y.canonical.y-S.canonical.y||y.wrap-S.wrap||y.canonical.x-S.canonical.x}function nn(){return null!=yh.workerClass?new yh.workerClass:new g.window.Worker(yh.workerUrl)}const an="mapboxgl_preloaded_worker_pool";class Sn{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<Sn.workerCount;)this.workers.push(new nn);return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],0===this.numActive()&&(this.workers.forEach(y=>{y.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[an]}numActive(){return Object.keys(this.active).length}}let Vn;function Qn(){return Vn||(Vn=new Sn),Vn}function oi(x,d){const y={};for(const S in x)"ref"!==S&&(y[S]=x[S]);return g.refProperties.forEach(S=>{S in d&&(y[S]=d[S])}),y}function ki(x){x=x.slice();const d=Object.create(null);for(let y=0;y<x.length;y++)d[x[y].id]=x[y];for(let y=0;y<x.length;y++)"ref"in x[y]&&(x[y]=oi(x[y],d[x[y].ref]));return x}Sn.workerCount=2;const zn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function _r(x,d,y){y.push({command:zn.addSource,args:[x,d[x]]})}function Ri(x,d,y){d.push({command:zn.removeSource,args:[x]}),y[x]=!0}function rr(x,d,y,S){Ri(x,y,S),_r(x,d,y)}function to(x,d,y){let S;for(S in x[y])if(x[y].hasOwnProperty(S)&&"data"!==S&&!fe(x[y][S],d[y][S]))return!1;for(S in d[y])if(d[y].hasOwnProperty(S)&&"data"!==S&&!fe(x[y][S],d[y][S]))return!1;return!0}function Vr(x,d,y,S,D,k){let N;for(N in d=d||{},x=x||{})x.hasOwnProperty(N)&&(fe(x[N],d[N])||y.push({command:k,args:[S,N,d[N],D]}));for(N in d)d.hasOwnProperty(N)&&!x.hasOwnProperty(N)&&(fe(x[N],d[N])||y.push({command:k,args:[S,N,d[N],D]}))}function To(x){return x.id}function so(x,d){return x[d.id]=d,x}class Ns{constructor(d,y){this.reset(d,y)}reset(d,y){this.points=d||[],this._distances=[0];for(let S=1;S<this.points.length;S++)this._distances[S]=this._distances[S-1]+this.points[S].dist(this.points[S-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(1===this.points.length)return this.points[0];d=g.clamp(d,0,1);let y=1,S=this._distances[y];const D=d*this.paddedLength+this.padding;for(;S<D&&y<this._distances.length;)S=this._distances[++y];const k=y-1,N=this._distances[k],F=S-N,$=F>0?(D-N)/F:0;return this.points[k].mult(1-$).add(this.points[y].mult($))}}class No{constructor(d,y,S){const D=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(d/S),this.yCellCount=Math.ceil(y/S);for(let N=0;N<this.xCellCount*this.yCellCount;N++)D.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=y,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,y,S,D,k){this._forEachCell(y,S,D,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(D),this.bboxes.push(k)}insertCircle(d,y,S,D){this._forEachCell(y-D,S-D,y+D,S+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(y),this.circles.push(S),this.circles.push(D)}_insertBoxCell(d,y,S,D,k,N){this.boxCells[k].push(N)}_insertCircleCell(d,y,S,D,k,N){this.circleCells[k].push(N)}_query(d,y,S,D,k,N){if(S<0||d>this.width||D<0||y>this.height)return!k&&[];const F=[];if(d<=0&&y<=0&&this.width<=S&&this.height<=D){if(k)return!0;for(let $=0;$<this.boxKeys.length;$++)F.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const W=this.circles[3*$],H=this.circles[3*$+1],de=this.circles[3*$+2];F.push({key:this.circleKeys[$],x1:W-de,y1:H-de,x2:W+de,y2:H+de})}return N?F.filter(N):F}return this._forEachCell(d,y,S,D,this._queryCell,F,{hitTest:k,seenUids:{box:{},circle:{}}},N),k?F.length>0:F}_queryCircle(d,y,S,D,k){const N=d-S,F=d+S,$=y-S,W=y+S;if(F<0||N>this.width||W<0||$>this.height)return!D&&[];const H=[];return this._forEachCell(N,$,F,W,this._queryCellCircle,H,{hitTest:D,circle:{x:d,y,radius:S},seenUids:{box:{},circle:{}}},k),D?H.length>0:H}query(d,y,S,D,k){return this._query(d,y,S,D,!1,k)}hitTest(d,y,S,D,k){return this._query(d,y,S,D,!0,k)}hitTestCircle(d,y,S,D){return this._queryCircle(d,y,S,!0,D)}_queryCell(d,y,S,D,k,N,F,$){const W=F.seenUids,H=this.boxCells[k];if(null!==H){const ze=this.bboxes;for(const Xe of H)if(!W.box[Xe]){W.box[Xe]=!0;const it=4*Xe;if(d<=ze[it+2]&&y<=ze[it+3]&&S>=ze[it+0]&&D>=ze[it+1]&&(!$||$(this.boxKeys[Xe]))){if(F.hitTest)return N.push(!0),!0;N.push({key:this.boxKeys[Xe],x1:ze[it],y1:ze[it+1],x2:ze[it+2],y2:ze[it+3]})}}}const de=this.circleCells[k];if(null!==de){const ze=this.circles;for(const Xe of de)if(!W.circle[Xe]){W.circle[Xe]=!0;const it=3*Xe;if(this._circleAndRectCollide(ze[it],ze[it+1],ze[it+2],d,y,S,D)&&(!$||$(this.circleKeys[Xe]))){if(F.hitTest)return N.push(!0),!0;{const ot=ze[it],dt=ze[it+1],pe=ze[it+2];N.push({key:this.circleKeys[Xe],x1:ot-pe,y1:dt-pe,x2:ot+pe,y2:dt+pe})}}}}}_queryCellCircle(d,y,S,D,k,N,F,$){const W=F.circle,H=F.seenUids,de=this.boxCells[k];if(null!==de){const Xe=this.bboxes;for(const it of de)if(!H.box[it]){H.box[it]=!0;const ot=4*it;if(this._circleAndRectCollide(W.x,W.y,W.radius,Xe[ot+0],Xe[ot+1],Xe[ot+2],Xe[ot+3])&&(!$||$(this.boxKeys[it])))return N.push(!0),!0}}const ze=this.circleCells[k];if(null!==ze){const Xe=this.circles;for(const it of ze)if(!H.circle[it]){H.circle[it]=!0;const ot=3*it;if(this._circlesCollide(Xe[ot],Xe[ot+1],Xe[ot+2],W.x,W.y,W.radius)&&(!$||$(this.circleKeys[it])))return N.push(!0),!0}}}_forEachCell(d,y,S,D,k,N,F,$){const W=this._convertToXCellCoord(d),H=this._convertToYCellCoord(y),de=this._convertToXCellCoord(S),ze=this._convertToYCellCoord(D);for(let Xe=W;Xe<=de;Xe++)for(let it=H;it<=ze;it++)if(k.call(this,d,y,S,D,this.xCellCount*it+Xe,N,F,$))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,y,S,D,k,N){const F=D-d,$=k-y,W=S+N;return W*W>F*F+$*$}_circleAndRectCollide(d,y,S,D,k,N,F){const $=(N-D)/2,W=Math.abs(d-(D+$));if(W>$+S)return!1;const H=(F-k)/2,de=Math.abs(y-(k+H));if(de>H+S)return!1;if(W<=$||de<=H)return!0;const ze=W-$,Xe=de-H;return ze*ze+Xe*Xe<=S*S}}const no={unknown:0,flipRequired:1,flipNotRequired:2},ar=Math.tan(85*Math.PI/180);function Mn(x,d,y,S,D,k,N){const F=g.create();if(y)if("globe"===k.name){const $=g.calculateGlobeLabelMatrix(D,d);g.multiply(F,F,$)}else{const $=K([],N);F[0]=$[0],F[1]=$[1],F[4]=$[2],F[5]=$[3],S||g.rotateZ(F,F,D.angle)}else g.multiply(F,D.labelPlaneMatrix,x);return F}function yl(x,d,y,S,D,k,N){const F=Mn(x,d,y,S,D,k,N);return"globe"===k.name&&y||(F[2]=F[6]=F[10]=F[14]=0),F}function xs(x,d,y,S,D,k,N){if(y){if("globe"===k.name){const F=Mn(x,d,y,S,D,k,N);return g.invert(F,F),g.multiply(F,x,F),F}{const F=g.clone(x),$=g.identity([]);return $[0]=N[0],$[1]=N[1],$[4]=N[2],$[5]=N[3],g.multiply(F,F,$),S||g.rotateZ(F,F,-D.angle),F}}return D.glCoordMatrix}function ws(x,d,y,S){const D=[x,d,y,1];y?g.transformMat4$1(D,D,S):nt(D,D,S);const k=D[3];return D[0]/=k,D[1]/=k,D[2]/=k,D}function ko(x,d){return Math.min(.5+x/d*.5,1.5)}function Tl(x,d){const y=x[0]/x[3],S=x[1]/x[3];return y>=-d[0]&&y<=d[0]&&S>=-d[1]&&S<=d[1]}function We(x,d,y,S,D,k,N,F,$,W){const H=y.transform,de=S?x.textSizeData:x.iconSizeData,ze=g.evaluateSizeForZoom(de,y.transform.zoom),Xe="globe"===H.projection.name,it=[256/y.width*2+1,256/y.height*2+1],ot=S?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;ot.clear();let dt=null;Xe&&(dt=S?x.text.globeExtVertexArray:x.icon.globeExtVertexArray);const pe=x.lineVertexArray,Ye=S?x.text.placedSymbolArray:x.icon.placedSymbolArray,bt=y.transform.width/y.transform.height;let Et,jt=!1;for(let Gt=0;Gt<Ye.length;Gt++){const Ut=Ye.get(Gt),{numGlyphs:tn,writingMode:Kt}=Ut;if(Kt!==g.WritingMode.vertical||jt||Et===g.WritingMode.horizontal||(jt=!0),Et=Kt,(Ut.hidden||Kt===g.WritingMode.vertical)&&!jt){ge(tn,ot);continue}jt=!1;const wn=new g.Point(Ut.tileAnchorX,Ut.tileAnchorY);let{x:hi,y:mn,z:Hn}=H.projection.projectTilePoint(wn.x,wn.y,W.canonical);if($){const[Ur,qi,Ki]=$(wn);hi+=Ur,mn+=qi,Hn+=Ki}const Dn=[hi,mn,Hn,1];if(g.transformMat4$1(Dn,Dn,d),!Tl(Dn,it)){ge(tn,ot);continue}const li=ko(y.transform.cameraToCenterDistance,Dn[3]),bn=g.evaluateSizeForFeature(de,ze,Ut),jn=N?bn/li:bn*li,di=ws(hi,mn,Hn,D);if(di[3]<=0){ge(tn,ot);continue}let ni={};const fi=N?null:$,vr=tt(Ut,jn,!1,F,d,D,k,x.glyphOffsetArray,pe,ot,dt,di,wn,ni,bt,fi,H.projection,W,N);jt=vr.useVertical,fi&&vr.needsFlipping&&(ni={}),(vr.notEnoughRoom||jt||vr.needsFlipping&&tt(Ut,jn,!0,F,d,D,k,x.glyphOffsetArray,pe,ot,dt,di,wn,ni,bt,fi,H.projection,W,N).notEnoughRoom)&&ge(tn,ot)}S?(x.text.dynamicLayoutVertexBuffer.updateData(ot),dt&&x.text.globeExtVertexBuffer.updateData(dt)):(x.icon.dynamicLayoutVertexBuffer.updateData(ot),dt&&x.icon.globeExtVertexBuffer.updateData(dt))}function Bt(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot){const{lineStartIndex:dt,glyphStartIndex:pe,segment:Ye}=F,bt=pe+F.numGlyphs,Et=dt+F.lineLength,jt=d.getoffsetX(pe),Gt=d.getoffsetX(bt-1),Ut=ce(x*jt,y,S,D,k,N,Ye,dt,Et,$,W,H,de,ze,!0,Xe,it,ot);if(!Ut)return null;const tn=ce(x*Gt,y,S,D,k,N,Ye,dt,Et,$,W,H,de,ze,!0,Xe,it,ot);return tn?{first:Ut,last:tn}:null}function gt(x,d,y,S){return x===g.WritingMode.horizontal&&Math.abs(S)>Math.abs(y)?{useVertical:!0}:x===g.WritingMode.vertical?S>0?{needsFlipping:!0}:null:d!==no.unknown&&(0===(D=y)||Math.abs(S/D)>ar)?d===no.flipRequired?{needsFlipping:!0}:null:y<0?{needsFlipping:!0}:null;var D}function tt(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot,dt,pe,Ye){const bt=d/24,Et=x.lineOffsetX*bt,jt=x.lineOffsetY*bt,{lineStartIndex:Gt,glyphStartIndex:Ut,numGlyphs:tn,segment:Kt,writingMode:wn,flipState:hi}=x,mn=Gt+x.lineLength,Hn=Dn=>{if(H){const[di,ni,fi]=Dn.up,vr=W.length;g.updateGlobeVertexNormal(H,vr+0,di,ni,fi),g.updateGlobeVertexNormal(H,vr+1,di,ni,fi),g.updateGlobeVertexNormal(H,vr+2,di,ni,fi),g.updateGlobeVertexNormal(H,vr+3,di,ni,fi)}const[li,bn,jn]=Dn.point;g.addDynamicAttributes(W,li,bn,jn,Dn.angle)};if(tn>1){const Dn=Bt(bt,F,Et,jt,y,de,ze,x,$,k,Xe,ot,!1,dt,pe,Ye);if(!Dn)return{notEnoughRoom:!0};if(S&&!y){let[li,bn,jn]=Dn.first.point,[di,ni,fi]=Dn.last.point;[li,bn]=ws(li,bn,jn,N),[di,ni]=ws(di,ni,fi,N);const vr=gt(wn,hi,(di-li)*it,ni-bn);if(x.flipState=vr&&vr.needsFlipping?no.flipRequired:no.flipNotRequired,vr)return vr}Hn(Dn.first);for(let li=Ut+1;li<Ut+tn-1;li++){const bn=ce(bt*F.getoffsetX(li),Et,jt,y,de,ze,Kt,Gt,mn,$,k,Xe,ot,!1,!1,dt,pe,Ye);if(!bn)return W.length-=4*(li-Ut),{notEnoughRoom:!0};Hn(bn)}Hn(Dn.last)}else{if(S&&!y){const li=ws(ze.x,ze.y,0,D),bn=Gt+Kt+1,jn=new g.Point($.getx(bn),$.gety(bn)),di=ws(jn.x,jn.y,0,D),ni=di[3]>0?di:Ot(ze,jn,li,1,D,void 0,dt,pe.canonical),fi=gt(wn,hi,(ni[0]-li[0])*it,ni[1]-li[1]);if(x.flipState=fi&&fi.needsFlipping?no.flipRequired:no.flipNotRequired,fi)return fi}const Dn=ce(bt*F.getoffsetX(Ut),Et,jt,y,de,ze,Kt,Gt,mn,$,k,Xe,ot,!1,!1,dt,pe,Ye);if(!Dn)return{notEnoughRoom:!0};Hn(Dn)}return{}}function St(x,d,y,S,D){const{x:k,y:N,z:F}=S.projectTilePoint(x.x,x.y,d);if(!D)return ws(k,N,F,y);const[$,W,H]=D(x);return ws(k+$,N+W,F+H,y)}function Ot(x,d,y,S,D,k,N,F){const $=St(x.sub(d)._unit()._add(x),F,D,N,k);return g.sub($,y,$),g.normalize($,$),g.scaleAndAdd($,y,$,S)}function ce(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot,dt,pe){const Ye=S?x-d:x+d;let bt=Ye>0?1:-1,Et=0;S&&(bt*=-1,Et=Math.PI),bt<0&&(Et+=Math.PI);let jt=F+N+(bt>0?0:1)|0,Gt=D,Ut=D,tn=0,Kt=0;const wn=Math.abs(Ye),hi=[],mn=[];let Hn=k,Dn=Hn;const li=()=>Ot(Dn,Hn,Ut,wn-tn+1,H,ze,ot,dt.canonical);for(;tn+Kt<=wn;){if(jt+=bt,jt<F||jt>=$)return null;if(Ut=Gt,Dn=Hn,hi.push(Ut),Xe&&mn.push(Dn),Hn=new g.Point(W.getx(jt),W.gety(jt)),Gt=de[jt],!Gt){const Ki=St(Hn,dt.canonical,H,ot,ze);Gt=Ki[3]>0?de[jt]=Ki:li()}tn+=Kt,Kt=g.distance(Ut,Gt)}it&&ze&&(de[jt]&&(Gt=li(),Kt=g.distance(Ut,Gt)),de[jt]=Gt);const bn=(wn-tn)/Kt,jn=Hn.sub(Dn)._mult(bn)._add(Dn),di=g.sub([],Gt,Ut),ni=g.scaleAndAdd([],Ut,di,bn);let fi=[0,0,1],vr=di[0],Ur=di[1];if(pe&&(fi=ot.upVector(dt.canonical,jn.x,jn.y),0!==fi[0]||0!==fi[1]||1!==fi[2])){const Ki=[fi[2],0,-fi[0]],uo=g.cross([],fi,Ki);g.normalize(Ki,Ki),g.normalize(uo,uo),vr=g.dot(di,Ki),Ur=g.dot(di,uo)}if(y){const Ki=g.cross([],fi,di);g.normalize(Ki,Ki),g.scaleAndAdd(ni,ni,Ki,y*bt)}const qi=Et+Math.atan2(Ur,vr);return hi.push(ni),Xe&&mn.push(jn),{point:ni,angle:qi,path:hi,tilePath:mn,up:fi}}function ge(x,d){const y=d.length,S=y+4*x;d.resize(S),d.float32.fill(-1/0,4*y,4*S)}function nt(x,d,y){const S=d[0],D=d[1];return x[0]=y[0]*S+y[4]*D+y[12],x[1]=y[1]*S+y[5]*D+y[13],x[3]=y[3]*S+y[7]*D+y[15],x}const yt=100;class Re{constructor(d,y,S=new No(d.width+200,d.height+200,25),D=new No(d.width+200,d.height+200,25)){this.transform=d,this.grid=S,this.ignoredGrid=D,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+yt,this.screenBottomBoundary=d.height+yt,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.fogState=y}placeCollisionBox(d,y,S,D,k,N,F,$){let W=S.projectedAnchorX,H=S.projectedAnchorY,de=S.projectedAnchorZ;const ze=S.elevation,Xe=S.tileID,it=d.getProjection();if(ze&&Xe){const[Gt,Ut,tn]=it.upVector(Xe.canonical,S.tileAnchorX,S.tileAnchorY),Kt=it.upVectorScale(Xe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;W+=Gt*ze*Kt,H+=Ut*ze*Kt,de+=tn*ze*Kt}const ot=this.projectAndGetPerspectiveRatio(F,W,H,de,S.tileID,"globe"===it.name||!!ze||this.transform.pitch>0,it),dt=N*ot.perspectiveRatio,pe=(S.x1*y+D.x-S.padding)*dt+ot.point.x,Ye=(S.y1*y+D.y-S.padding)*dt+ot.point.y,bt=(S.x2*y+D.x+S.padding)*dt+ot.point.x,Et=(S.y2*y+D.y+S.padding)*dt+ot.point.y,jt=ot.perspectiveRatio<=.55||ot.occluded;return!this.isInsideGrid(pe,Ye,bt,Et)||!k&&this.grid.hitTest(pe,Ye,bt,Et,$)||jt?{box:[],offscreen:!1,occluded:ot.occluded}:{box:[pe,Ye,bt,Et],offscreen:this.isOffscreen(pe,Ye,bt,Et),occluded:!1}}placeCollisionCircles(d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot){const dt=[],pe=this.transform.elevation,Ye=d.getProjection(),bt=pe?pe.getAtTileOffsetFunc(ot,this.transform.center.lat,this.transform.worldSize,Ye):null,Et=new g.Point(S.tileAnchorX,S.tileAnchorY);let{x:jt,y:Gt,z:Ut}=Ye.projectTilePoint(Et.x,Et.y,ot.canonical);if(bt){const[jn,di,ni]=bt(Et);jt+=jn,Gt+=di,Ut+=ni}const tn="globe"===Ye.name,Kt=this.projectAndGetPerspectiveRatio(F,jt,Gt,Ut,ot,tn||!!pe||this.transform.pitch>0,Ye),{perspectiveRatio:wn}=Kt,hi=(de?N/wn:N*wn)/g.ONE_EM,mn=ws(jt,Gt,Ut,$),Hn=Kt.signedDistanceFromCamera>0?Bt(hi,k,S.lineOffsetX*hi,S.lineOffsetY*hi,!1,mn,Et,S,D,$,{},pe&&!de?bt:null,de&&!!pe,Ye,ot,de):null;let Dn=!1,li=!1,bn=!0;if(Hn&&!Kt.occluded){const jn=.5*Xe*wn+it,di=new g.Point(-100,-100),ni=new g.Point(this.screenRightBoundary,this.screenBottomBoundary),fi=new Ns,{first:vr,last:Ur}=Hn,qi=vr.path.length;let Ki=[];for(let dr=qi-1;dr>=1;dr--)Ki.push(vr.path[dr]);for(let dr=1;dr<Ur.path.length;dr++)Ki.push(Ur.path[dr]);const uo=2.5*jn;W&&(Ki=Ki.map(([dr,_s,zs],Zs)=>(bt&&!tn&&(zs=bt(Zs<qi-1?vr.tilePath[qi-1-Zs]:Ur.tilePath[Zs-qi+2])[2]),ws(dr,_s,zs,W))),Ki.some(dr=>dr[3]<=0)&&(Ki=[]));let ho=[];if(Ki.length>0){let dr=1/0,_s=-1/0,zs=1/0,Zs=-1/0;for(const ks of Ki)dr=Math.min(dr,ks[0]),zs=Math.min(zs,ks[1]),_s=Math.max(_s,ks[0]),Zs=Math.max(Zs,ks[1]);_s>=di.x&&dr<=ni.x&&Zs>=di.y&&zs<=ni.y&&(ho=[Ki.map(ks=>new g.Point(ks[0],ks[1]))],(dr<di.x||_s>ni.x||zs<di.y||Zs>ni.y)&&(ho=g.clipLine(ho,di.x,di.y,ni.x,ni.y)))}for(const dr of ho){fi.reset(dr,.25*jn);let _s=0;_s=fi.length<=.5*jn?1:Math.ceil(fi.paddedLength/uo)+1;for(let zs=0;zs<_s;zs++){const Zs=zs/Math.max(_s-1,1),ks=fi.lerp(Zs),Rc=ks.x+yt,va=ks.y+yt;dt.push(Rc,va,jn,0);const Fu=Rc-jn,_d=va-jn,jr=Rc+jn,Ps=va+jn;if(bn=bn&&this.isOffscreen(Fu,_d,jr,Ps),li=li||this.isInsideGrid(Fu,_d,jr,Ps),!y&&this.grid.hitTestCircle(Rc,va,jn,ze)&&(Dn=!0,!H))return{circles:[],offscreen:!1,collisionDetected:Dn,occluded:!1}}}}return{circles:!H&&Dn||!li?[]:dt,offscreen:bn,collisionDetected:Dn,occluded:Kt.occluded}}queryRenderedSymbols(d){if(0===d.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const y=[];let S=1/0,D=1/0,k=-1/0,N=-1/0;for(const H of d){const de=new g.Point(H.x+yt,H.y+yt);S=Math.min(S,de.x),D=Math.min(D,de.y),k=Math.max(k,de.x),N=Math.max(N,de.y),y.push(de)}const F=this.grid.query(S,D,k,N).concat(this.ignoredGrid.query(S,D,k,N)),$={},W={};for(const H of F){const de=H.key;if(void 0===$[de.bucketInstanceId]&&($[de.bucketInstanceId]={}),$[de.bucketInstanceId][de.featureIndex])continue;const ze=[new g.Point(H.x1,H.y1),new g.Point(H.x2,H.y1),new g.Point(H.x2,H.y2),new g.Point(H.x1,H.y2)];g.polygonIntersectsPolygon(y,ze)&&($[de.bucketInstanceId][de.featureIndex]=!0,void 0===W[de.bucketInstanceId]&&(W[de.bucketInstanceId]=[]),W[de.bucketInstanceId].push(de.featureIndex))}return W}insertCollisionBox(d,y,S,D,k){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:D,collisionGroupID:k},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,y,S,D,k){const N=y?this.ignoredGrid:this.grid,F={bucketInstanceId:S,featureIndex:D,collisionGroupID:k};for(let $=0;$<d.length;$+=4)N.insertCircle(F,d[$],d[$+1],d[$+2])}projectAndGetPerspectiveRatio(d,y,S,D,k,N,F){const $=[y,S,D,1];let W=!1;D||this.transform.pitch>0?(g.transformMat4$1($,$,d),this.fogState&&k&&"globe"!==F.name&&(W=function(ze,Xe,it,ot,dt,pe){const Ye=pe.calculateFogTileMatrix(dt),bt=[Xe,it,ot];return g.transformMat4(bt,bt,Ye),Ve(ze,bt,pe.pitch,pe._fov)}(this.fogState,y,S,D,k.toUnwrapped(),this.transform)>.9)):nt($,$,d);const H=$[3];return{point:new g.Point(($[0]/H+1)/2*this.transform.width+yt,(-$[1]/H+1)/2*this.transform.height+yt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(F)/H*.5,1.5),signedDistanceFromCamera:H,occluded:N&&$[2]>H||W}}isOffscreen(d,y,S,D){return S<yt||d>=this.screenRightBoundary||D<yt||y>this.screenBottomBoundary}isInsideGrid(d,y,S,D){return S>=0&&d<this.gridRightBoundary&&D>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const d=g.identity([]);return g.translate(d,d,[-100,-100,0]),d}}function ut(x,d,y){const S=d.createTileMatrix(x,x.worldSize,y.toUnwrapped());return g.multiply(new Float32Array(16),x.projMatrix,S)}function kt(x,d,y){if(d.projection.name===y.projection.name)return x.projMatrix;const S=y.clone();return S.setProjection(d.projection),ut(S,d.getProjection(),x)}function rn(x,d,y){return d.name===y.projection.name?x.projMatrix:ut(y,d,x)}class vn{constructor(d,y,S,D){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?y:-y))):D&&S?1:0,this.placed=S}isHidden(){return 0===this.opacity&&!this.placed}}class xt{constructor(d,y,S,D,k,N=!1){this.text=new vn(d?d.text:null,y,S,k),this.icon=new vn(d?d.icon:null,y,D,k),this.clipped=N}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pn{constructor(d,y,S,D=!1){this.text=d,this.icon=y,this.skipFade=S,this.clipped=D}}class $i{constructor(){this.invProjMatrix=g.create(),this.viewportMatrix=g.create(),this.circles=[]}}class ur{constructor(d,y,S,D,k){this.bucketInstanceId=d,this.featureIndex=y,this.sourceLayerIndex=S,this.bucketIndex=D,this.tileID=k}}class ao{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const y=++this.maxGroupID;this.collisionGroups[d]={ID:y,predicate:S=>S.collisionGroupID===y}}return this.collisionGroups[d]}}function yo(x,d,y,S,D){const{horizontalAlign:k,verticalAlign:N}=g.getAnchorAlignment(x),F=-(k-.5)*d,$=-(N-.5)*y,W=g.evaluateVariableOffset(x,S);return new g.Point(F+W[0]*D,$+W[1]*D)}function Jt(x,d,y,S,D){const k=new g.Point(x,d);return y&&k._rotate(S?D:-D),k}class $r{constructor(d,y,S,D,k){this.transform=d.clone(),this.projection=d.projection.name,this.collisionIndex=new Re(this.transform,k),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ao(S),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,y,S,D){const k=S.getBucket(y),N=S.latestFeatureIndex;if(!k||!N||y.id!==k.layerIds[0])return;const F=k.layers[0].layout,$=S.collisionBoxArray,W=Math.pow(2,this.transform.zoom-S.tileID.overscaledZ),H=S.tileSize/g.EXTENT,de=S.tileID.toUnwrapped();this.transform.setProjection(k.projection);const ze=(Xe=S.tileID,it=k.getProjection(),ot=this.transform,it.name===this.projection?ot.calculateProjMatrix(Xe.toUnwrapped()):ut(ot,it,Xe));var Xe,it,ot;const dt="map"===F.get("text-pitch-alignment"),pe="map"===F.get("text-rotation-alignment");y.compileFilter();const Ye=y.dynamicFilter(),bt=y.dynamicFilterNeedsFeature(),Et=this.transform.calculatePixelsToTileUnitsMatrix(S),jt=yl(ze,S.tileID.canonical,dt,pe,this.transform,k.getProjection(),Et);let Gt=null;if(dt){const Kt=xs(ze,S.tileID.canonical,dt,pe,this.transform,k.getProjection(),Et);Gt=g.multiply([],this.transform.labelPlaneMatrix,Kt)}let Ut=null;Ye&&S.latestFeatureIndex&&(Ut={unwrappedTileID:de,dynamicFilter:Ye,dynamicFilterNeedsFeature:bt,featureIndex:S.latestFeatureIndex}),this.retainedQueryData[k.bucketInstanceId]=new ur(k.bucketInstanceId,N,k.sourceLayerIndex,k.index,S.tileID);const tn={bucket:k,layout:F,posMatrix:ze,textLabelPlaneMatrix:jt,labelToScreenMatrix:Gt,clippingData:Ut,scale:W,textPixelRatio:H,holdingForFade:S.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:g.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:g.evaluateSizeForZoom(k.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(D)for(const Kt of k.sortKeyRanges){const{sortKey:wn,symbolInstanceStart:hi,symbolInstanceEnd:mn}=Kt;d.push({sortKey:wn,symbolInstanceStart:hi,symbolInstanceEnd:mn,parameters:tn})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:tn})}attemptAnchorPlacement(d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot,dt,pe,Ye){const{textOffset0:bt,textOffset1:Et,crossTileID:jt}=ze,Gt=[bt,Et],Ut=yo(d,S,D,Gt,k),tn=this.collisionIndex.placeCollisionBox(it,k,y,Jt(Ut.x,Ut.y,N,F,this.transform.angle),de,$,W,H.predicate);if(dt){const Kt=it.getSymbolInstanceIconSize(Ye,this.transform.zoom,ze.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(it,Kt,dt,Jt(Ut.x,Ut.y,N,F,this.transform.angle),de,$,W,H.predicate).box.length)return}if(tn.box.length>0){let Kt;return this.prevPlacement&&this.prevPlacement.variableOffsets[jt]&&this.prevPlacement.placements[jt]&&this.prevPlacement.placements[jt].text&&(Kt=this.prevPlacement.variableOffsets[jt].anchor),this.variableOffsets[jt]={textOffset:Gt,width:S,height:D,anchor:d,textScale:k,prevAnchor:Kt},this.markUsedJustification(it,d,ze,ot),it.allowVerticalPlacement&&(this.markUsedOrientation(it,ot,ze),this.placedOrientations[jt]=ot),{shift:Ut,placedGlyphBoxes:tn}}}placeLayerBucketPart(d,y,S,D){const{bucket:k,layout:N,posMatrix:F,textLabelPlaneMatrix:$,labelToScreenMatrix:W,clippingData:H,textPixelRatio:de,holdingForFade:ze,collisionBoxArray:Xe,partiallyEvaluatedTextSize:it,partiallyEvaluatedIconSize:ot,collisionGroup:dt}=d.parameters,pe=N.get("text-optional"),Ye=N.get("icon-optional"),bt=N.get("text-allow-overlap"),Et=N.get("icon-allow-overlap"),jt="map"===N.get("text-rotation-alignment"),Gt="map"===N.get("text-pitch-alignment"),Ut="none"!==N.get("icon-text-fit"),tn="viewport-y"===N.get("symbol-z-order");this.transform.setProjection(k.projection);let Kt=bt&&(Et||!k.hasIconData()||Ye),wn=Et&&(bt||!k.hasTextData()||pe);!k.collisionArrays&&Xe&&k.deserializeCollisionBoxes(Xe),S&&D&&k.updateCollisionDebugBuffers(this.transform.zoom,Xe);const hi=(mn,Hn,Dn)=>{const{crossTileID:li,numVerticalGlyphVertices:bn}=mn;if(H){const jr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ps=null;if(H.dynamicFilterNeedsFeature){const Ao=this.retainedQueryData[k.bucketInstanceId];Ps=H.featureIndex.loadFeature({featureIndex:mn.featureIndex,bucketIndex:Ao.bucketIndex,sourceLayerIndex:Ao.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,H.dynamicFilter)(jr,Ps,this.retainedQueryData[k.bucketInstanceId].tileID.canonical,new g.Point(mn.tileAnchorX,mn.tileAnchorY),this.transform.calculateDistanceTileData(H.unwrappedTileID)))return this.placements[li]=new Pn(!1,!1,!1,!0),void y.add(li)}if(y.has(li))return;if(ze)return void(this.placements[li]=new Pn(!1,!1,!1));let jn=!1,di=!1,ni=!0,fi=!1,vr=!1,Ur=null,qi={box:null,offscreen:null,occluded:null},Ki={box:null,offscreen:null,occluded:null},uo=null,ho=null,dr=null,_s=0,zs=0,Zs=0;Dn.textFeatureIndex?_s=Dn.textFeatureIndex:mn.useRuntimeCollisionCircles&&(_s=mn.featureIndex),Dn.verticalTextFeatureIndex&&(zs=Dn.verticalTextFeatureIndex);const ks=jr=>{jr.tileID=this.retainedQueryData[k.bucketInstanceId].tileID;const Ps=this.transform.elevation;(Ps||jr.elevation)&&(jr.elevation=Ps?Ps.getAtTileOffset(jr.tileID,jr.tileAnchorX,jr.tileAnchorY):0)},Rc=Dn.textBox;if(Rc){ks(Rc);const jr=Ao=>{let vs=g.WritingMode.horizontal;if(k.allowVerticalPlacement&&!Ao&&this.prevPlacement){const Xc=this.prevPlacement.placedOrientations[li];Xc&&(this.placedOrientations[li]=Xc,vs=Xc,this.markUsedOrientation(k,vs,mn))}return vs},Ps=(Ao,vs)=>{if(k.allowVerticalPlacement&&bn>0&&Dn.verticalTextBox){for(const Xc of k.writingModes)if(Xc===g.WritingMode.vertical?(qi=vs(),Ki=qi):qi=Ao(),qi&&qi.box&&qi.box.length)break}else qi=Ao()};if(N.get("text-variable-anchor")){let Ao=N.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[li]){const la=this.prevPlacement.variableOffsets[li];Ao.indexOf(la.anchor)>0&&(Ao=Ao.filter(jl=>jl!==la.anchor),Ao.unshift(la.anchor))}const vs=(la,jl,Oc)=>{const Lf=k.getSymbolInstanceTextSize(it,mn,this.transform.zoom,Hn),fm=(la.x2-la.x1)*Lf+2*la.padding,bh=(la.y2-la.y1)*Lf+2*la.padding,Yc=Ut&&!Et?jl:null;Yc&&ks(Yc);let Wh={box:[],offscreen:!1,occluded:!1};const xg=bt?2*Ao.length:Ao.length;for(let mp=0;mp<xg;++mp){const wg=this.attemptAnchorPlacement(Ao[mp%Ao.length],la,fm,bh,Lf,jt,Gt,de,F,dt,mp>=Ao.length,mn,Hn,k,Oc,Yc,it,ot);if(wg&&(Wh=wg.placedGlyphBoxes,Wh&&Wh.box&&Wh.box.length)){jn=!0,Ur=wg.shift;break}}return Wh};Ps(()=>vs(Rc,Dn.iconBox,g.WritingMode.horizontal),()=>{const la=Dn.verticalTextBox;return la&&ks(la),k.allowVerticalPlacement&&!(qi&&qi.box&&qi.box.length)&&bn>0&&la?vs(la,Dn.verticalIconBox,g.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),qi&&(jn=qi.box,ni=qi.offscreen,fi=qi.occluded);const Xc=jr(!(!qi||!qi.box));if(!jn&&this.prevPlacement){const la=this.prevPlacement.variableOffsets[li];la&&(this.variableOffsets[li]=la,this.markUsedJustification(k,la.anchor,mn,Xc))}}else{const Ao=(vs,Xc)=>{const la=k.getSymbolInstanceTextSize(it,mn,this.transform.zoom,Hn),jl=this.collisionIndex.placeCollisionBox(k,la,vs,new g.Point(0,0),bt,de,F,dt.predicate);return jl&&jl.box&&jl.box.length&&(this.markUsedOrientation(k,Xc,mn),this.placedOrientations[li]=Xc),jl};Ps(()=>Ao(Rc,g.WritingMode.horizontal),()=>{const vs=Dn.verticalTextBox;return k.allowVerticalPlacement&&bn>0&&vs?(ks(vs),Ao(vs,g.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),jr(!!(qi&&qi.box&&qi.box.length))}}if(uo=qi,jn=uo&&uo.box&&uo.box.length>0,ni=uo&&uo.offscreen,fi=uo&&uo.occluded,mn.useRuntimeCollisionCircles){const jr=k.text.placedSymbolArray.get(mn.centerJustifiedTextSymbolIndex>=0?mn.centerJustifiedTextSymbolIndex:mn.verticalPlacedTextSymbolIndex),Ps=g.evaluateSizeForFeature(k.textSizeData,it,jr),Ao=N.get("text-padding");ho=this.collisionIndex.placeCollisionCircles(k,bt,jr,k.lineVertexArray,k.glyphOffsetArray,Ps,F,$,W,S,Gt,dt.predicate,mn.collisionCircleDiameter*Ps/g.ONE_EM,Ao,this.retainedQueryData[k.bucketInstanceId].tileID),jn=bt||ho.circles.length>0&&!ho.collisionDetected,ni=ni&&ho.offscreen,fi=ho.occluded}if(Dn.iconFeatureIndex&&(Zs=Dn.iconFeatureIndex),Dn.iconBox){const jr=Ps=>{ks(Ps);const Ao=Ut&&Ur?Jt(Ur.x,Ur.y,jt,Gt,this.transform.angle):new g.Point(0,0),vs=k.getSymbolInstanceIconSize(ot,this.transform.zoom,mn.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(k,vs,Ps,Ao,Et,de,F,dt.predicate)};Ki&&Ki.box&&Ki.box.length&&Dn.verticalIconBox?(dr=jr(Dn.verticalIconBox),di=dr.box.length>0):(dr=jr(Dn.iconBox),di=dr.box.length>0),ni=ni&&dr.offscreen,vr=dr.occluded}const va=pe||0===mn.numHorizontalGlyphVertices&&0===bn,Fu=Ye||0===mn.numIconVertices;if(va||Fu?Fu?va||(di=di&&jn):jn=di&&jn:di=jn=di&&jn,jn&&uo&&uo.box&&this.collisionIndex.insertCollisionBox(uo.box,N.get("text-ignore-placement"),k.bucketInstanceId,Ki&&Ki.box&&zs?zs:_s,dt.ID),di&&dr&&this.collisionIndex.insertCollisionBox(dr.box,N.get("icon-ignore-placement"),k.bucketInstanceId,Zs,dt.ID),ho&&(jn&&this.collisionIndex.insertCollisionCircles(ho.circles,N.get("text-ignore-placement"),k.bucketInstanceId,_s,dt.ID),S)){const jr=k.bucketInstanceId;let Ps=this.collisionCircleArrays[jr];void 0===Ps&&(Ps=this.collisionCircleArrays[jr]=new $i);for(let Ao=0;Ao<ho.circles.length;Ao+=4)Ps.circles.push(ho.circles[Ao+0]),Ps.circles.push(ho.circles[Ao+1]),Ps.circles.push(ho.circles[Ao+2]),Ps.circles.push(ho.collisionDetected?1:0)}const _d="globe"!==k.projection.name;Kt=Kt&&(_d||!fi),wn=wn&&(_d||!vr),this.placements[li]=new Pn(jn||Kt,di||wn,ni||k.justReloaded),y.add(li)};if(tn){const mn=k.getSortedSymbolIndexes(this.transform.angle);for(let Hn=mn.length-1;Hn>=0;--Hn){const Dn=mn[Hn];hi(k.symbolInstances.get(Dn),Dn,k.collisionArrays[Dn])}}else for(let mn=d.symbolInstanceStart;mn<d.symbolInstanceEnd;mn++)hi(k.symbolInstances.get(mn),mn,k.collisionArrays[mn]);if(S&&k.bucketInstanceId in this.collisionCircleArrays){const mn=this.collisionCircleArrays[k.bucketInstanceId];g.invert(mn.invProjMatrix,F),mn.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(d,y,S,D){const{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:N,rightJustifiedTextSymbolIndex:F,verticalPlacedTextSymbolIndex:$,crossTileID:W}=S,H=g.getAnchorJustification(y),de=D===g.WritingMode.vertical?$:"left"===H?k:"center"===H?N:"right"===H?F:-1;k>=0&&(d.text.placedSymbolArray.get(k).crossTileID=de>=0&&k!==de?0:W),N>=0&&(d.text.placedSymbolArray.get(N).crossTileID=de>=0&&N!==de?0:W),F>=0&&(d.text.placedSymbolArray.get(F).crossTileID=de>=0&&F!==de?0:W),$>=0&&(d.text.placedSymbolArray.get($).crossTileID=de>=0&&$!==de?0:W)}markUsedOrientation(d,y,S){const D=y===g.WritingMode.horizontal||y===g.WritingMode.horizontalOnly?y:0,k=y===g.WritingMode.vertical?y:0,{leftJustifiedTextSymbolIndex:N,centerJustifiedTextSymbolIndex:F,rightJustifiedTextSymbolIndex:$,verticalPlacedTextSymbolIndex:W}=S,H=d.text.placedSymbolArray;N>=0&&(H.get(N).placedOrientation=D),F>=0&&(H.get(F).placedOrientation=D),$>=0&&(H.get($).placedOrientation=D),W>=0&&(H.get(W).placedOrientation=k)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let S=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const D=y?y.symbolFadeChange(d):1,k=y?y.opacities:{},N=y?y.variableOffsets:{},F=y?y.placedOrientations:{};for(const $ in this.placements){const W=this.placements[$],H=k[$];H?(this.opacities[$]=new xt(H,D,W.text,W.icon,null,W.clipped),S=S||W.text!==H.text.placed||W.icon!==H.icon.placed):(this.opacities[$]=new xt(null,D,W.text,W.icon,W.skipFade,W.clipped),S=S||W.text||W.icon)}for(const $ in k){const W=k[$];if(!this.opacities[$]){const H=new xt(W,D,!1,!1);H.isHidden()||(this.opacities[$]=H,S=S||W.text.placed||W.icon.placed)}}for(const $ in N)this.variableOffsets[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.variableOffsets[$]=N[$]);for(const $ in F)this.placedOrientations[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.placedOrientations[$]=F[$]);S?this.lastPlacementChangeTime=d:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:d)}updateLayerOpacities(d,y){const S=new Set;for(const D of y){const k=D.getBucket(d);k&&D.latestFeatureIndex&&d.id===k.layerIds[0]&&this.updateBucketOpacities(k,S,D.collisionBoxArray)}}updateBucketOpacities(d,y,S){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const D=d.layers[0].layout,k=!!d.layers[0].dynamicFilter(),N=new xt(null,0,!1,!1,!0),F=D.get("text-allow-overlap"),$=D.get("icon-allow-overlap"),W=D.get("text-variable-anchor"),H="map"===D.get("text-rotation-alignment"),de="map"===D.get("text-pitch-alignment"),ze="none"!==D.get("icon-text-fit"),Xe=new xt(null,0,F&&($||!d.hasIconData()||D.get("icon-optional")),$&&(F||!d.hasTextData()||D.get("text-optional")),!0);!d.collisionArrays&&S&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(S);const it=(dt,pe,Ye)=>{for(let bt=0;bt<pe/4;bt++)dt.opacityVertexArray.emplaceBack(Ye)};let ot=0;for(let dt=0;dt<d.symbolInstances.length;dt++){const pe=d.symbolInstances.get(dt),{numHorizontalGlyphVertices:Ye,numVerticalGlyphVertices:bt,crossTileID:Et,numIconVertices:jt}=pe,Gt=y.has(Et);let Ut=this.opacities[Et];Gt?Ut=N:Ut||(Ut=Xe,this.opacities[Et]=Ut),y.add(Et);const tn=Ye>0||bt>0,Kt=jt>0,wn=this.placedOrientations[Et],hi=wn===g.WritingMode.vertical,mn=wn===g.WritingMode.horizontal||wn===g.WritingMode.horizontalOnly;if(!tn&&!Kt||Ut.isHidden()||ot++,tn){const Hn=Oa(Ut.text);it(d.text,Ye,hi?Ta:Hn),it(d.text,bt,mn?Ta:Hn);const Dn=Ut.text.isHidden(),{leftJustifiedTextSymbolIndex:li,centerJustifiedTextSymbolIndex:bn,rightJustifiedTextSymbolIndex:jn,verticalPlacedTextSymbolIndex:di}=pe,ni=d.text.placedSymbolArray,fi=Dn||hi?1:0;li>=0&&(ni.get(li).hidden=fi),bn>=0&&(ni.get(bn).hidden=fi),jn>=0&&(ni.get(jn).hidden=fi),di>=0&&(ni.get(di).hidden=Dn||mn?1:0);const vr=this.variableOffsets[Et];vr&&this.markUsedJustification(d,vr.anchor,pe,wn);const Ur=this.placedOrientations[Et];Ur&&(this.markUsedJustification(d,"left",pe,Ur),this.markUsedOrientation(d,Ur,pe))}if(Kt){const Hn=Oa(Ut.icon),{placedIconSymbolIndex:Dn,verticalPlacedIconSymbolIndex:li}=pe,bn=d.icon.placedSymbolArray,jn=Ut.icon.isHidden()?1:0;Dn>=0&&(it(d.icon,jt,hi?Ta:Hn),bn.get(Dn).hidden=jn),li>=0&&(it(d.icon,pe.numVerticalIconVertices,mn?Ta:Hn),bn.get(li).hidden=jn)}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const Hn=d.collisionArrays[dt];if(Hn){let Dn=new g.Point(0,0),li=!0;if(Hn.textBox||Hn.verticalTextBox){if(W){const jn=this.variableOffsets[Et];jn?(Dn=yo(jn.anchor,jn.width,jn.height,jn.textOffset,jn.textScale),H&&Dn._rotate(de?this.transform.angle:-this.transform.angle)):li=!1}k&&(li=!Ut.clipped),Hn.textBox&&ji(d.textCollisionBox.collisionVertexArray,Ut.text.placed,!li||hi,Dn.x,Dn.y),Hn.verticalTextBox&&ji(d.textCollisionBox.collisionVertexArray,Ut.text.placed,!li||mn,Dn.x,Dn.y)}const bn=li&&!(mn||!Hn.verticalIconBox);Hn.iconBox&&ji(d.iconCollisionBox.collisionVertexArray,Ut.icon.placed,bn,ze?Dn.x:0,ze?Dn.y:0),Hn.verticalIconBox&&ji(d.iconCollisionBox.collisionVertexArray,Ut.icon.placed,!bn,ze?Dn.x:0,ze?Dn.y:0)}}}if(d.fullyClipped=0===ot,d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){const dt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=dt.invProjMatrix,d.placementViewportMatrix=dt.viewportMatrix,d.collisionCircleArray=dt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return 0===this.fadeDuration?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,y){const S=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*S>d}setStale(){this.stale=!0}}function ji(x,d,y,S,D){x.emplaceBack(d?1:0,y?1:0,S||0,D||0),x.emplaceBack(d?1:0,y?1:0,S||0,D||0),x.emplaceBack(d?1:0,y?1:0,S||0,D||0),x.emplaceBack(d?1:0,y?1:0,S||0,D||0)}const Mr=Math.pow(2,25),As=Math.pow(2,24),Dl=Math.pow(2,17),Au=Math.pow(2,16),Qs=Math.pow(2,9),kr=Math.pow(2,8),Df=Math.pow(2,1);function Oa(x){if(0===x.opacity&&!x.placed)return 0;if(1===x.opacity&&x.placed)return 4294967295;const d=x.placed?1:0,y=Math.floor(127*x.opacity);return y*Mr+d*As+y*Dl+d*Au+y*Qs+d*kr+y*Df+d}const Ta=0;class Yl{constructor(d){this._sortAcrossTiles="viewport-y"!==d.layout.get("symbol-z-order")&&void 0!==d.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(d,y,S,D,k){const N=this._bucketParts;for(;this._currentTileIndex<d.length;)if(y.getBucketParts(N,D,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((F,$)=>F.sortKey-$.sortKey));this._currentPartIndex<N.length;){const F=N[this._currentPartIndex];if(y.placeLayerBucketPart(F,this._seenCrossTileIDs,S,0===F.symbolInstanceStart),this._currentPartIndex++,k())return!0}return!1}}class qs{constructor(d,y,S,D,k,N,F,$){this.placement=new $r(d,k,N,F,$),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(d,y,S){const D=g.exported.now(),k=()=>{const N=g.exported.now()-D;return!this._forceFullPlacement&&N>2};for(;this._currentPlacementIndex>=0;){const N=y[d[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if("symbol"===N.type&&(!N.minzoom||N.minzoom<=F)&&(!N.maxzoom||N.maxzoom>F)){if(this._inProgressLayer||(this._inProgressLayer=new Yl(N)),this._inProgressLayer.continuePlacement(S[N.source],this.placement,this._showCollisionBoxes,N,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const Ka=512/g.EXTENT/2;class Qa{constructor(d,y,S){this.tileID=d,this.bucketInstanceId=S,this.index=new g.KDBush(y.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const D=d.canonical.x*g.EXTENT,k=d.canonical.y*g.EXTENT;for(let N=0;N<y.length;N++){const{key:F,crossTileID:$,tileAnchorX:W,tileAnchorY:H}=y.get(N),de=Math.floor((D+W)*Ka),ze=Math.floor((k+H)*Ka);this.index.add(de,ze),this.keys.push(F),this.crossTileIDs.push($)}this.index.finish()}findMatches(d,y,S){const D=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z),k=Ka/Math.pow(2,y.canonical.z-this.tileID.canonical.z),N=y.canonical.x*g.EXTENT,F=y.canonical.y*g.EXTENT;for(let $=0;$<d.length;$++){const W=d.get($);if(W.crossTileID)continue;const{key:H,tileAnchorX:de,tileAnchorY:ze}=W,Xe=Math.floor((N+de)*k),it=Math.floor((F+ze)*k),ot=this.index.range(Xe-D,it-D,Xe+D,it+D);for(const dt of ot){const pe=this.crossTileIDs[dt];if(this.keys[dt]===H&&!S.has(pe)){S.add(pe),W.crossTileID=pe;break}}}}}class Sc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class cu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const y=Math.round((d-this.lng)/360);if(0!==y)for(const S in this.indexes){const D=this.indexes[S],k={};for(const N in D){const F=D[N];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+y),k[F.tileID.key]=F}this.indexes[S]=k}this.lng=d}addBucket(d,y,S){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let k=0;k<y.symbolInstances.length;k++)y.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]=new Set);const D=this.usedCrossTileIDs[d.overscaledZ];for(const k in this.indexes){const N=this.indexes[k];if(Number(k)>d.overscaledZ)for(const F in N){const $=N[F];$.tileID.isChildOf(d)&&$.findMatches(y.symbolInstances,d,D)}else{const F=N[d.scaledTo(Number(k)).key];F&&F.findMatches(y.symbolInstances,d,D)}}for(let k=0;k<y.symbolInstances.length;k++){const N=y.symbolInstances.get(k);N.crossTileID||(N.crossTileID=S.generate(),D.add(N.crossTileID))}return void 0===this.indexes[d.overscaledZ]&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Qa(d,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(d,y){for(const S of y.crossTileIDs)this.usedCrossTileIDs[d].delete(S)}removeStaleBuckets(d){let y=!1;for(const S in this.indexes){const D=this.indexes[S];for(const k in D)d[D[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(S,D[k]),delete D[k],y=!0)}return y}}class Zl{constructor(){this.layerIndexes={},this.crossTileIDs=new Sc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,y,S,D){let k=this.layerIndexes[d.id];void 0===k&&(k=this.layerIndexes[d.id]=new cu);let N=!1;const F={};"globe"!==D.name&&k.handleWrapJump(S);for(const $ of y){const W=$.getBucket(d);W&&d.id===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket($.tileID,W,this.crossTileIDs)&&(N=!0),F[W.bucketInstanceId]=!0)}return k.removeStaleBuckets(F)&&(N=!0),N}pruneUnusedLayers(d){const y={};d.forEach(S=>{y[S]=!0});for(const S in this.layerIndexes)y[S]||delete this.layerIndexes[S]}}const Ic=(x,d)=>g.emitValidationErrors(x,d&&d.filter(y=>"source.canvas"!==y.identifier)),fa=g.pick(zn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Uc=g.pick(zn,["setCenter","setZoom","setBearing","setPitch"]),br={version:8,layers:[],sources:{}},Ws={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Fs extends g.Evented{constructor(d,y={}){super(),this.map=d,this.dispatcher=new De(Qn(),this),this.imageManager=new Q,this.imageManager.setEventedParent(this),this.glyphManager=new g.GlyphManager(d._requestManager,y.localFontFamily?g.LocalGlyphMode.all:y.localIdeographFontFamily?g.LocalGlyphMode.ideographs:g.LocalGlyphMode.none,y.localFontFamily||y.localIdeographFontFamily),this.crossTileSymbolIndex=new Zl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",g.getReferrer());const S=this;this._rtlTextPluginCallback=Fs.registerForPluginStateChange(D=>{S.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(k,N)=>{if(g.triggerPluginCompletionEvent(k),N&&N.every(F=>F))for(const F in S._sourceCaches){const $=S._sourceCaches[F],W=$.getSource().type;"vector"!==W&&"geojson"!==W||$.reload()}})}),this.on("data",D=>{if("source"!==D.dataType||"metadata"!==D.sourceDataType)return;const k=this.getSource(D.sourceId);if(k&&k.vectorLayerIds)for(const N in this._layers){const F=this._layers[N];F.source===k.id&&this._validateLayer(F)}})}loadURL(d,y={}){this.fire(new g.Event("dataloading",{dataType:"style"}));const S="boolean"==typeof y.validate?y.validate:!g.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,y.accessToken);const D=this.map._requestManager.transformRequest(d,g.ResourceType.Style);this._request=g.getJSON(D,(k,N)=>{this._request=null,k?this.fire(new g.ErrorEvent(k)):N&&this._load(N,S)})}loadJSON(d,y={}){this.fire(new g.Event("dataloading",{dataType:"style"})),this._request=g.exported.frame(()=>{this._request=null,this._load(d,!1!==y.validate)})}loadEmpty(){this.fire(new g.Event("dataloading",{dataType:"style"})),this._load(br,!1)}_updateLayerCount(d,y){const S=y?1:-1;d.is3D()&&(this._num3DLayers+=S),"circle"===d.type&&(this._numCircleLayers+=S),"symbol"===d.type&&(this._numSymbolLayers+=S)}_load(d,y){if(y&&Ic(this,g.validateStyle(d)))return;this._loaded=!0,this.stylesheet=g.clone$1(d),this._updateMapProjection();for(const D in d.sources)this.addSource(D,d.sources[D],{validate:!1});this._changed=!1,d.sprite?this._loadSprite(d.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(d.glyphs);const S=ki(this.stylesheet.layers);this._order=S.map(D=>D.id),this._layers={},this._serializedLayers={};for(const D of S){const k=g.createStyleLayer(D);k.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new se(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new g.Event("data",{dataType:"style"})),this.fire(new g.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(d){d?this.stylesheet.projection=d:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(d){this._spriteRequest=function(y,S,D){let k,N,F;const $=g.exported.devicePixelRatio>1?"@2x":"";let W=g.getJSON(S.transformRequest(S.normalizeSpriteURL(y,$,".json"),g.ResourceType.SpriteJSON),(ze,Xe)=>{W=null,F||(F=ze,k=Xe,de())}),H=g.getImage(S.transformRequest(S.normalizeSpriteURL(y,$,".png"),g.ResourceType.SpriteImage),(ze,Xe)=>{H=null,F||(F=ze,N=Xe,de())});function de(){if(F)D(F);else if(k&&N){const ze=g.exported.getImageData(N),Xe={};for(const it in k){const{width:ot,height:dt,x:pe,y:Ye,sdf:bt,pixelRatio:Et,stretchX:jt,stretchY:Gt,content:Ut}=k[it],tn=new g.RGBAImage({width:ot,height:dt});g.RGBAImage.copy(ze,tn,{x:pe,y:Ye},{x:0,y:0},{width:ot,height:dt}),Xe[it]={data:tn,pixelRatio:Et,sdf:bt,stretchX:jt,stretchY:Gt,content:Ut}}D(null,Xe)}}return{cancel(){W&&(W.cancel(),W=null),H&&(H.cancel(),H=null)}}}(d,this.map._requestManager,(y,S)=>{if(this._spriteRequest=null,y)this.fire(new g.ErrorEvent(y));else if(S)for(const D in S)this.imageManager.addImage(D,S[D]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new g.Event("data",{dataType:"style"}))})}_validateLayer(d){const y=this.getSource(d.source);if(!y)return;const S=d.sourceLayer;S&&("geojson"===y.type||y.vectorLayerIds&&-1===y.vectorLayerIds.indexOf(S))&&this.fire(new g.ErrorEvent(new Error(`Source layer "${S}" does not exist on source "${y.id}" as specified by style layer "${d.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this._sourceCaches)if(!this._sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const y=[];for(const S of d){const D=this._layers[S];"custom"!==D.type&&y.push(D.serialize())}return y}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const d in this._sourceCaches)if(this._sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(d){return!!this.terrain&&("function"==typeof d.isLayerDraped?d.isLayerDraped():Ws[d.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(d){if(!this._loaded)return;const y=this._changed;if(this._changed){const D=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(D.length||k.length)&&this._updateWorkerLayers(D,k);for(const N in this._updatedSources){const F=this._updatedSources[N];"reload"===F?this._reloadSource(N):"clear"===F&&this._clearSource(N)}this._updateTilesForChangedImages();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(d);this.light.updateTransitions(d),this.fog&&this.fog.updateTransitions(d),this._resetUpdates()}const S={};for(const D in this._sourceCaches){const k=this._sourceCaches[D];S[D]=k.used,k.used=!1}for(const D of this._order){const k=this._layers[D];if(k.recalculate(d,this._availableImages),!k.isHidden(d.zoom)){const F=this._getLayerSourceCache(k);F&&(F.used=!0)}const N=this.map.painter;if(N){const F=k.getProgramIds();if(!F)continue;const $=k.getProgramConfiguration(d.zoom);for(const W of F)N.useProgram(W,$)}}for(const D in S){const k=this._sourceCaches[D];S[D]!==k.used&&k.getSource().fire(new g.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light.recalculate(d),this.terrain&&this.terrain.recalculate(d),this.fog&&this.fog.recalculate(d),this.z=d.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),y&&this.fire(new g.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const y in this._sourceCaches)this._sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,y){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(d){if(this._checkLoaded(),Ic(this,g.validateStyle(d)))return!1;(d=g.clone$1(d)).layers=ki(d.layers);const y=function(D,k){if(!D)return[{command:zn.setStyle,args:[k]}];let N=[];try{if(!fe(D.version,k.version))return[{command:zn.setStyle,args:[k]}];fe(D.center,k.center)||N.push({command:zn.setCenter,args:[k.center]}),fe(D.zoom,k.zoom)||N.push({command:zn.setZoom,args:[k.zoom]}),fe(D.bearing,k.bearing)||N.push({command:zn.setBearing,args:[k.bearing]}),fe(D.pitch,k.pitch)||N.push({command:zn.setPitch,args:[k.pitch]}),fe(D.sprite,k.sprite)||N.push({command:zn.setSprite,args:[k.sprite]}),fe(D.glyphs,k.glyphs)||N.push({command:zn.setGlyphs,args:[k.glyphs]}),fe(D.transition,k.transition)||N.push({command:zn.setTransition,args:[k.transition]}),fe(D.light,k.light)||N.push({command:zn.setLight,args:[k.light]}),fe(D.fog,k.fog)||N.push({command:zn.setFog,args:[k.fog]}),fe(D.projection,k.projection)||N.push({command:zn.setProjection,args:[k.projection]});const F={},$=[];!function(de,ze,Xe,it){let ot;for(ot in ze=ze||{},de=de||{})de.hasOwnProperty(ot)&&(ze.hasOwnProperty(ot)||Ri(ot,Xe,it));for(ot in ze){if(!ze.hasOwnProperty(ot))continue;const dt=ze[ot];de.hasOwnProperty(ot)?fe(de[ot],dt)||("geojson"===de[ot].type&&"geojson"===dt.type&&to(de,ze,ot)?Xe.push({command:zn.setGeoJSONSourceData,args:[ot,dt.data]}):rr(ot,ze,Xe,it)):_r(ot,ze,Xe)}}(D.sources,k.sources,$,F);const W=[];D.layers&&D.layers.forEach(de=>{de.source&&F[de.source]?N.push({command:zn.removeLayer,args:[de.id]}):W.push(de)});let H=D.terrain;H&&F[H.source]&&(N.push({command:zn.setTerrain,args:[void 0]}),H=void 0),N=N.concat($),fe(H,k.terrain)||N.push({command:zn.setTerrain,args:[k.terrain]}),function(de,ze,Xe){ze=ze||[];const it=(de=de||[]).map(To),ot=ze.map(To),dt=de.reduce(so,{}),pe=ze.reduce(so,{}),Ye=it.slice(),bt=Object.create(null);let Et,jt,Gt,Ut,tn,Kt,wn;for(Et=0,jt=0;Et<it.length;Et++)Gt=it[Et],pe.hasOwnProperty(Gt)?jt++:(Xe.push({command:zn.removeLayer,args:[Gt]}),Ye.splice(Ye.indexOf(Gt,jt),1));for(Et=0,jt=0;Et<ot.length;Et++)Gt=ot[ot.length-1-Et],Ye[Ye.length-1-Et]!==Gt&&(dt.hasOwnProperty(Gt)?(Xe.push({command:zn.removeLayer,args:[Gt]}),Ye.splice(Ye.lastIndexOf(Gt,Ye.length-jt),1)):jt++,Kt=Ye[Ye.length-Et],Xe.push({command:zn.addLayer,args:[pe[Gt],Kt]}),Ye.splice(Ye.length-Et,0,Gt),bt[Gt]=!0);for(Et=0;Et<ot.length;Et++)if(Gt=ot[Et],Ut=dt[Gt],tn=pe[Gt],!bt[Gt]&&!fe(Ut,tn))if(fe(Ut.source,tn.source)&&fe(Ut["source-layer"],tn["source-layer"])&&fe(Ut.type,tn.type)){for(wn in Vr(Ut.layout,tn.layout,Xe,Gt,null,zn.setLayoutProperty),Vr(Ut.paint,tn.paint,Xe,Gt,null,zn.setPaintProperty),fe(Ut.filter,tn.filter)||Xe.push({command:zn.setFilter,args:[Gt,tn.filter]}),fe(Ut.minzoom,tn.minzoom)&&fe(Ut.maxzoom,tn.maxzoom)||Xe.push({command:zn.setLayerZoomRange,args:[Gt,tn.minzoom,tn.maxzoom]}),Ut)Ut.hasOwnProperty(wn)&&"layout"!==wn&&"paint"!==wn&&"filter"!==wn&&"metadata"!==wn&&"minzoom"!==wn&&"maxzoom"!==wn&&(0===wn.indexOf("paint.")?Vr(Ut[wn],tn[wn],Xe,Gt,wn.slice(6),zn.setPaintProperty):fe(Ut[wn],tn[wn])||Xe.push({command:zn.setLayerProperty,args:[Gt,wn,tn[wn]]}));for(wn in tn)tn.hasOwnProperty(wn)&&!Ut.hasOwnProperty(wn)&&"layout"!==wn&&"paint"!==wn&&"filter"!==wn&&"metadata"!==wn&&"minzoom"!==wn&&"maxzoom"!==wn&&(0===wn.indexOf("paint.")?Vr(Ut[wn],tn[wn],Xe,Gt,wn.slice(6),zn.setPaintProperty):fe(Ut[wn],tn[wn])||Xe.push({command:zn.setLayerProperty,args:[Gt,wn,tn[wn]]}))}else Xe.push({command:zn.removeLayer,args:[Gt]}),Kt=Ye[Ye.lastIndexOf(Gt)+1],Xe.push({command:zn.addLayer,args:[tn,Kt]})}(W,k.layers,N)}catch(F){console.warn("Unable to compute style diff:",F),N=[{command:zn.setStyle,args:[k]}]}return N}(this.serialize(),d).filter(D=>!(D.command in Uc));if(0===y.length)return!1;const S=y.filter(D=>!(D.command in fa));if(S.length>0)throw new Error(`Unimplemented: ${S.map(D=>D.command).join(", ")}.`);return y.forEach(D=>{"setTransition"!==D.command&&"setProjection"!==D.command&&this[D.command].apply(this,D.args)}),this.stylesheet=d,this._updateMapProjection(),!0}addImage(d,y){return this.getImage(d)?this.fire(new g.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(d,y),this._afterImageUpdated(d),this)}updateImage(d,y){this.imageManager.updateImage(d,y)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){return this.getImage(d)?(this.imageManager.removeImage(d),this._afterImageUpdated(d),this):this.fire(new g.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(d,y,S={}){if(this._checkLoaded(),void 0!==this.getSource(d))throw new Error("There is already a source with this ID");if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(g.validateSource,`sources.${d}`,y,null,S))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const D=Zi(d,y,this.dispatcher,this);D.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(d),source:D.serialize(),sourceId:d}));const k=N=>{const F=(N?"symbol:":"other:")+d,$=this._sourceCaches[F]=new g.SourceCache(F,D,N);(N?this._symbolSourceCaches:this._otherSourceCaches)[d]=$,$.style=this,$.onAdd(this.map)};k(!1),"vector"!==y.type&&"geojson"!==y.type||k(!0),D.onAdd&&D.onAdd(this.map),this._changed=!0}removeSource(d){this._checkLoaded();const y=this.getSource(d);if(!y)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===d)return this.fire(new g.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${D}" is using it.`)));if(this.terrain&&this.terrain.get().source===d)return this.fire(new g.ErrorEvent(new Error(`Source "${d}" cannot be removed while terrain is using it.`)));const S=this._getSourceCaches(d);for(const D of S)delete this._sourceCaches[D.id],delete this._updatedSources[D.id],D.fire(new g.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:D.getSource().id})),D.setEventedParent(null),D.clearTiles();return delete this._otherSourceCaches[d],delete this._symbolSourceCaches[d],y.setEventedParent(null),y.onRemove&&y.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(d,y){this._checkLoaded(),this.getSource(d).setData(y),this._changed=!0}getSource(d){const y=this._getSourceCache(d);return y&&y.getSource()}_getSources(){const d=[];for(const y in this._otherSourceCaches){const S=this._getSourceCache(y);S&&d.push(S.getSource())}return d}addLayer(d,y,S={}){this._checkLoaded();const D=d.id;if(this.getLayer(D))return void this.fire(new g.ErrorEvent(new Error(`Layer with id "${D}" already exists on this map`)));let k;if("custom"===d.type){if(Ic(this,g.validateCustomStyleLayer(d)))return;k=g.createStyleLayer(d)}else{if("object"==typeof d.source&&(this.addSource(D,d.source),d=g.clone$1(d),d=g.extend(d,{source:D})),this._validate(g.validateLayer,`layers.${D}`,d,{arrayIndex:-1},S))return;k=g.createStyleLayer(d),this._validateLayer(k),k.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}const N=y?this._order.indexOf(y):this._order.length;if(y&&-1===N)return void this.fire(new g.ErrorEvent(new Error(`Layer with id "${y}" does not exist on this map.`)));this._order.splice(N,0,D),this._layerOrderChanged=!0,this._layers[D]=k;const F=this._getLayerSourceCache(k);if(this._removedLayers[D]&&k.source&&F&&"custom"!==k.type){const $=this._removedLayers[D];delete this._removedLayers[D],$.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",F.pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(d,y){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===y)return;const S=this._order.indexOf(d);this._order.splice(S,1);const D=y?this._order.indexOf(y):this._order.length;y&&-1===D?this.fire(new g.ErrorEvent(new Error(`Layer with id "${y}" does not exist on this map.`))):(this._order.splice(D,0,d),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(d){this._checkLoaded();const y=this._layers[d];if(!y)return void this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be removed.`)));y.setEventedParent(null),this._updateLayerCount(y,!1);const S=this._order.indexOf(d);this._order.splice(S,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=y,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],y.onRemove&&y.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}hasLayerType(d){for(const y in this._layers)if(this._layers[y].type===d)return!0;return!1}setLayerZoomRange(d,y,S){this._checkLoaded();const D=this.getLayer(d);D?D.minzoom===y&&D.maxzoom===S||(null!=y&&(D.minzoom=y),null!=S&&(D.maxzoom=S),this._updateLayer(D)):this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(d,y,S={}){this._checkLoaded();const D=this.getLayer(d);if(D){if(!fe(D.filter,y))return null==y?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(g.validateFilter,`layers.${D.id}.filter`,y,{layerType:D.type},S)||(D.filter=g.clone$1(y),this._updateLayer(D)))}else this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be filtered.`)))}getFilter(d){const y=this.getLayer(d);return y&&g.clone$1(y.filter)}setLayoutProperty(d,y,S,D={}){this._checkLoaded();const k=this.getLayer(d);k?fe(k.getLayoutProperty(y),S)||(k.setLayoutProperty(y,S,D),this._updateLayer(k)):this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(d,y){const S=this.getLayer(d);if(S)return S.getLayoutProperty(y);this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style.`)))}setPaintProperty(d,y,S,D={}){this._checkLoaded();const k=this.getLayer(d);k?fe(k.getPaintProperty(y),S)||(k.setPaintProperty(y,S,D)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new g.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(d,y){const S=this.getLayer(d);return S&&S.getPaintProperty(y)}setFeatureState(d,y){this._checkLoaded();const S=d.source,D=d.sourceLayer,k=this.getSource(S);if(!k)return void this.fire(new g.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`)));const N=k.type;if("geojson"===N&&D)return void this.fire(new g.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===N&&!D)return void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===d.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided.")));const F=this._getSourceCaches(S);for(const $ of F)$.setFeatureState(D,d.id,y)}removeFeatureState(d,y){this._checkLoaded();const S=d.source,D=this.getSource(S);if(!D)return void this.fire(new g.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`)));const k=D.type,N="vector"===k?d.sourceLayer:void 0;if("vector"===k&&!N)return void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(y&&"string"!=typeof d.id&&"number"!=typeof d.id)return void this.fire(new g.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const F=this._getSourceCaches(S);for(const $ of F)$.removeFeatureState(N,d.id,y)}getFeatureState(d){this._checkLoaded();const y=d.source,S=d.sourceLayer,D=this.getSource(y);if(D){if("vector"!==D.type||S)return void 0===d.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(y)[0].getFeatureState(S,d.id);this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new g.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return g.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const d={};for(const y in this._sourceCaches){const S=this._sourceCaches[y].getSource();d[S.id]||(d[S.id]=S.serialize())}return g.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:d,layers:this._serializeLayers(this._order)},y=>void 0!==y)}_updateLayer(d){this._updatedLayers[d.id]=!0;const y=this._getLayerSourceCache(d);d.source&&!this._updatedSources[d.source]&&y&&"raster"!==y.getSource().type&&(this._updatedSources[d.source]="reload",y.pause()),this._changed=!0,d.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(d){const y=N=>"fill-extrusion"===this._layers[N].type,S={},D=[];for(let N=this._order.length-1;N>=0;N--){const F=this._order[N];if(y(F)){S[F]=N;for(const $ of d){const W=$[F];if(W)for(const H of W)D.push(H)}}}D.sort((N,F)=>F.intersectionZ-N.intersectionZ);const k=[];for(let N=this._order.length-1;N>=0;N--){const F=this._order[N];if(y(F))for(let $=D.length-1;$>=0;$--){const W=D[$].feature;if(S[W.layer.id]<N)break;k.push(W),D.pop()}else for(const $ of d){const W=$[F];if(W)for(const H of W)k.push(H.feature)}}return k}queryRenderedFeatures(d,y,S){y&&y.filter&&this._validate(g.validateFilter,"queryRenderedFeatures.filter",y.filter,null,y);const D={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new g.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const $ of y.layers){const W=this._layers[$];if(!W)return this.fire(new g.ErrorEvent(new Error(`The layer '${$}' does not exist in the map's style and cannot be queried for features.`))),[];D[W.source]=!0}}const k=[];y.availableImages=this._availableImages;const N=y&&y.layers?y.layers.some($=>{const W=this.getLayer($);return W&&W.is3D()}):this.has3DLayers(),F=$e.createFromScreenPoints(d,S);for(const $ in this._sourceCaches){const W=this._sourceCaches[$].getSource().id;y.layers&&!D[W]||k.push(Br(this._sourceCaches[$],this._layers,this._serializedLayers,F,y,S,N,!!this.map._showQueryGeometry))}return this.placement&&k.push(function($,W,H,de,ze,Xe,it){const ot={},dt=Xe.queryRenderedSymbols(de),pe=[];for(const Ye of Object.keys(dt).map(Number))pe.push(it[Ye]);pe.sort(wt);for(const Ye of pe){const bt=Ye.featureIndex.lookupSymbolFeatures(dt[Ye.bucketInstanceId],W,Ye.bucketIndex,Ye.sourceLayerIndex,ze.filter,ze.layers,ze.availableImages,$);for(const Et in bt){const jt=ot[Et]=ot[Et]||[],Gt=bt[Et];Gt.sort((Ut,tn)=>{const Kt=Ye.featureSortOrder;if(Kt){const wn=Kt.indexOf(Ut.featureIndex);return Kt.indexOf(tn.featureIndex)-wn}return tn.featureIndex-Ut.featureIndex});for(const Ut of Gt)jt.push(Ut)}}for(const Ye in ot)ot[Ye].forEach(bt=>{const Et=bt.feature,jt=H($[Ye]);if(!jt)return;const Gt=jt.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=Gt});return ot}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),F.screenGeometry,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(d,y){y&&y.filter&&this._validate(g.validateFilter,"querySourceFeatures.filter",y.filter,null,y);const S=this._getSourceCaches(d);let D=[];for(const k of S)D=D.concat(vt(k,y));return D}addSourceType(d,y,S){return Fs.getSourceType(d)?S(new Error(`A source type called "${d}" already exists.`)):(Fs.setSourceType(d,y),y.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:y.workerSourceURL},S):S(null,null))}getLight(){return this.light.getLight()}setLight(d,y={}){this._checkLoaded();const S=this.light.getLight();let D=!1;for(const N in d)if(!fe(d[N],S[N])){D=!0;break}if(!D)return;const k=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(d,y),this.light.updateTransitions(k)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(d,y=1){if(this._checkLoaded(),!d)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let S=d;if(1===y){if("object"==typeof S.source){const D="terrain-dem-src";this.addSource(D,S.source),S=g.clone$1(S),S=g.extend(S,{source:D})}if(this._validate(g.validateTerrain,"terrain",S))return}if(!this.terrain||this.terrain&&y!==this.terrain.drapeRenderMode){if(!S)return;this._createTerrain(S,y)}else{const D=this.terrain,k=D.get();for(const N of Object.keys(g.spec.terrain))!S.hasOwnProperty(N)&&g.spec.terrain[N].default&&(S[N]=g.spec.terrain[N].default);for(const N in S)if(!fe(S[N],k[N])){D.set(S),this.stylesheet.terrain=S;const F=this._setTransitionParameters({duration:0});D.updateTransitions(F);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(d){const y=this.fog=new Ge(d,this.map.transform);this.stylesheet.fog=d;const S=this._setTransitionParameters({duration:0});y.updateTransitions(S)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const d of this.map._markers)d._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(d){if(this._checkLoaded(),!d)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const y=this.fog,S=y.get();0===Object.keys(d).length&&y.set(d);for(const D in d)if(!fe(d[D],S[D])){y.set(d),this.stylesheet.fog=d;const k=this._setTransitionParameters({duration:0});y.updateTransitions(k);break}}else this._createFog(d);this._markersNeedUpdate=!0}_setTransitionParameters(d){return{now:g.exported.now(),transition:g.extend(d,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const d=this._order.filter(S=>this.isLayerDraped(this._layers[S])),y=this._order.filter(S=>!this.isLayerDraped(this._layers[S]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...d),this._drapedFirstOrder.push(...y)}_createTerrain(d,y){const S=this.terrain=new ie(d,y);this.stylesheet.terrain=d,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const D=this._setTransitionParameters({duration:0});S.updateTransitions(D)}_force3DLayerUpdate(){for(const d in this._layers){const y=this._layers[d];"fill-extrusion"===y.type&&this._updateLayer(y)}}_forceSymbolLayerUpdate(){for(const d in this._layers){const y=this._layers[d];"symbol"===y.type&&this._updateLayer(y)}}_validate(d,y,S,D,k={}){return(!k||!1!==k.validate)&&Ic(this,d.call(g.validateStyle,g.extend({key:y,style:this.serialize(),value:S,styleSpec:g.spec},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),g.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this._sourceCaches)this._sourceCaches[d].clearTiles(),this._sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){const y=this._getSourceCaches(d);for(const S of y)S.clearTiles()}_reloadSource(d){const y=this._getSourceCaches(d);for(const S of y)S.resume(),S.reload()}_reloadSources(){for(const d of this._getSources())d.reload&&d.reload()}_updateSources(d){for(const y in this._sourceCaches)this._sourceCaches[y].update(d)}_generateCollisionBoxes(){for(const d in this._sourceCaches){const y=this._sourceCaches[d];y.resume(),y.reload()}}_updatePlacement(d,y,S,D,k=!1){let N=!1,F=!1;const $={};for(const W of this._order){const H=this._layers[W];if("symbol"!==H.type)continue;if(!$[H.source]){const ze=this._getLayerSourceCache(H);if(!ze)continue;$[H.source]=ze.getRenderableIds(!0).map(Xe=>ze.getTileByID(Xe)).sort((Xe,it)=>it.tileID.overscaledZ-Xe.tileID.overscaledZ||(Xe.tileID.isLessThan(it.tileID)?-1:1))}const de=this.crossTileSymbolIndex.addLayer(H,$[H.source],d.center.lng,d.projection);N=N||de}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),k=k||this._layerOrderChanged||0===S,this._layerOrderChanged&&this.fire(new g.Event("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.exported.now(),d.zoom))&&(this.pauseablePlacement=new qs(d,this._order,k,y,S,D,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.exported.now()),F=!0),N&&this.pauseablePlacement.placement.setStale()),F||N)for(const W of this._order){const H=this._layers[W];"symbol"===H.type&&this.placement.updateLayerOpacities(H,$[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.exported.now())}_releaseSymbolFadeTiles(){for(const d in this._sourceCaches)this._sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,y,S){this.imageManager.getImages(y.icons,S),this._updateTilesForChangedImages();const D=k=>{k&&k.setDependencies(y.tileID.key,y.type,y.icons)};D(this._otherSourceCaches[y.source]),D(this._symbolSourceCaches[y.source])}getGlyphs(d,y,S){this.glyphManager.getGlyphs(y.stacks,S)}getResource(d,y,S){return g.makeRequest(y,S)}_getSourceCache(d){return this._otherSourceCaches[d]}_getLayerSourceCache(d){return"symbol"===d.type?this._symbolSourceCaches[d.source]:this._otherSourceCaches[d.source]}_getSourceCaches(d){const y=[];return this._otherSourceCaches[d]&&y.push(this._otherSourceCaches[d]),this._symbolSourceCaches[d]&&y.push(this._symbolSourceCaches[d]),y}_isSourceCacheLoaded(d){const y=this._getSourceCaches(d);return 0===y.length?(this.fire(new g.ErrorEvent(new Error(`There is no source with ID '${d}'`))),!1):y.every(S=>S.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Fs.getSourceType=function(x){return sr[x]},Fs.setSourceType=function(x,d){sr[x]=d},Fs.registerForPluginStateChange=g.registerForPluginStateChange;var Af="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",mi="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",jc="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",po="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Gc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let ll={},dc={};const Xa=[];ir(Af,Xa),ir(jc,Xa),ir(po,Xa),ir(Gc,Xa),ll=er("",jc),dc=er(Gc,po);const Mu=er("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Bl=Af,ud="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Xs={background:er("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:er("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:er("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:er("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:er("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:er("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:er("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:er("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:er("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:er("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:er("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:er("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:er("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:er("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:er("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:er("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:er("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:er("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:er("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:er("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:er("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:er("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:er("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",mi),skyboxGradient:er("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",mi),skyboxCapture:er("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:er("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:er("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function ir(x,d){const y=x.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let S of y)if(S=S.trim(),"#"===S[0]&&S.includes("if")&&!S.includes("endif")){S=S.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const D=S.split(" ");for(const k of D)d.includes(k)||d.push(k)}}function er(x,d){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,S=d.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),D={},k=[...Xa];return ir(x,k),ir(d,k),{fragmentSource:x=x.replace(y,(N,F,$,W,H)=>(D[H]=!0,"define"===F?`\n#ifndef HAS_UNIFORM_u_${H}\nvarying ${$} ${W} ${H};\n#else\nuniform ${$} ${W} u_${H};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${H}\n    ${$} ${W} ${H} = u_${H};\n#endif\n`)),vertexSource:d=d.replace(y,(N,F,$,W,H)=>{const de="float"===W?"vec2":"vec4",ze=H.match(/color/)?"color":de;return D[H]?"define"===F?`\n#ifndef HAS_UNIFORM_u_${H}\nuniform lowp float u_${H}_t;\nattribute ${$} ${de} a_${H};\nvarying ${$} ${W} ${H};\n#else\nuniform ${$} ${W} u_${H};\n#endif\n`:"vec4"===ze?`\n#ifndef HAS_UNIFORM_u_${H}\n    ${H} = a_${H};\n#else\n    ${$} ${W} ${H} = u_${H};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${H}\n    ${H} = unpack_mix_${ze}(a_${H}, u_${H}_t);\n#else\n    ${$} ${W} ${H} = u_${H};\n#endif\n`:"define"===F?`\n#ifndef HAS_UNIFORM_u_${H}\nuniform lowp float u_${H}_t;\nattribute ${$} ${de} a_${H};\n#else\nuniform ${$} ${W} u_${H};\n#endif\n`:"vec4"===ze?`\n#ifndef HAS_UNIFORM_u_${H}\n    ${$} ${W} ${H} = a_${H};\n#else\n    ${$} ${W} ${H} = u_${H};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${H}\n    ${$} ${W} ${H} = unpack_mix_${ze}(a_${H}, u_${H}_t);\n#else\n    ${$} ${W} ${H} = u_${H};\n#endif\n`}),staticAttributes:S,usedDefines:k}}class hh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(d,y,S,D,k,N,F){this.context=d;let $=this.boundPaintVertexBuffers.length!==D.length;for(let H=0;!$&&H<D.length;H++)this.boundPaintVertexBuffers[H]!==D[H]&&($=!0);let W=this.boundDynamicVertexBuffers.length!==F.length;for(let H=0;!W&&H<F.length;H++)this.boundDynamicVertexBuffers[H]!==F[H]&&(W=!0);if(!d.extVertexArrayObject||!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==S||$||W||this.boundIndexBuffer!==k||this.boundVertexOffset!==N)this.freshBind(y,S,D,k,N,F);else{d.bindVertexArrayOES.set(this.vao);for(const H of F)H&&H.bind();k&&k.dynamicDraw&&k.bind()}}freshBind(d,y,S,D,k,N){let F;const $=d.numAttributes,W=this.context,H=W.gl;if(W.extVertexArrayObject)this.vao&&this.destroy(),this.vao=W.extVertexArrayObject.createVertexArrayOES(),W.bindVertexArrayOES.set(this.vao),F=0,this.boundProgram=d,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=S,this.boundIndexBuffer=D,this.boundVertexOffset=k,this.boundDynamicVertexBuffers=N;else{F=W.currentNumAttributes||0;for(let de=$;de<F;de++)H.disableVertexAttribArray(de)}y.enableAttributes(H,d),y.bind(),y.setVertexAttribPointers(H,d,k);for(const de of S)de.enableAttributes(H,d),de.bind(),de.setVertexAttribPointers(H,d,k);for(const de of N)de&&(de.enableAttributes(H,d),de.bind(),de.setVertexAttribPointers(H,d,k));D&&D.bind(),W.currentNumAttributes=$}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function bl(x,d){const y=Math.pow(2,d.canonical.z),S=d.canonical.y;return[new g.MercatorCoordinate(0,S/y).toLngLat().lat,new g.MercatorCoordinate(0,(S+1)/y).toLngLat().lat]}function ia(x,d,y,S,D,k,N){const F=x.context,$=F.gl,W=y.fbo;if(!W)return;x.prepareDrawTile();const H=x.useProgram("hillshade");F.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,W.colorAttachment.get());const de=((ot,dt,pe,Ye)=>{const bt=pe.paint.get("hillshade-shadow-color"),Et=pe.paint.get("hillshade-highlight-color"),jt=pe.paint.get("hillshade-accent-color");let Gt=pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===pe.paint.get("hillshade-illumination-anchor")&&(Gt-=ot.transform.angle);const Ut=!ot.options.moving;return{u_matrix:Ye||ot.transform.calculateProjMatrix(dt.tileID.toUnwrapped(),Ut),u_image:0,u_latrange:bl(0,dt.tileID),u_light:[pe.paint.get("hillshade-exaggeration"),Gt],u_shadow:bt,u_highlight:Et,u_accent:jt}})(x,y,S,x.terrain?d.projMatrix:null);x.prepareDrawProgram(F,H,d.toUnwrapped());const{tileBoundsBuffer:ze,tileBoundsIndexBuffer:Xe,tileBoundsSegments:it}=x.getTileBoundsBuffers(y);H.draw(F,$.TRIANGLES,D,k,N,g.CullFaceMode.disabled,de,S.id,ze,Xe,it)}function ku(x,d,y){if(!d.needsDEMTextureUpload)return;const S=x.context,D=S.gl;S.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||x.getTileTexture(y.stride);const k=y.getPixels();d.demTexture?d.demTexture.update(k,{premultiply:!1}):d.demTexture=new g.Texture(S,k,D.RGBA,{premultiply:!1}),d.needsDEMTextureUpload=!1}function Mf(x,d,y,S,D,k){const N=x.context,F=N.gl;if(!d.dem)return;const $=d.dem;if(N.activeTexture.set(F.TEXTURE1),ku(x,d,$),!d.demTexture)return;d.demTexture.bind(F.NEAREST,F.CLAMP_TO_EDGE);const W=$.dim;N.activeTexture.set(F.TEXTURE0);let H=d.fbo;if(!H){const it=new g.Texture(N,{width:W,height:W,data:null},F.RGBA);it.bind(F.LINEAR,F.CLAMP_TO_EDGE),H=d.fbo=N.createFramebuffer(W,W,!0),H.colorAttachment.set(it.texture)}N.bindFramebuffer.set(H.framebuffer),N.viewport.set([0,0,W,W]);const{tileBoundsBuffer:de,tileBoundsIndexBuffer:ze,tileBoundsSegments:Xe}=x.getMercatorTileBoundsBuffers();x.useProgram("hillshadePrepare").draw(N,F.TRIANGLES,S,D,k,g.CullFaceMode.disabled,((it,ot)=>{const dt=ot.stride,pe=g.create();return g.ortho(pe,0,g.EXTENT,-g.EXTENT,0,0,1),g.translate(pe,pe,[0,-g.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[dt,dt],u_zoom:it.overscaledZ,u_unpack:ot.unpackVector}})(d.tileID,$),y.id,de,ze,Xe),d.needsHillshadePrepare=!1}const Es=x=>({u_matrix:new g.UniformMatrix4f(x),u_image0:new g.Uniform1i(x),u_skirt_height:new g.Uniform1f(x)}),Hh=(x,d)=>({u_matrix:x,u_image0:0,u_skirt_height:d}),xo=(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it)=>({u_proj_matrix:Float32Array.from(x),u_globe_matrix:d,u_normalize_matrix:Float32Array.from(S),u_merc_matrix:y,u_zoom_transition:D,u_merc_center:k,u_image0:0,u_frustum_tl:N,u_frustum_tr:F,u_frustum_br:$,u_frustum_bl:W,u_globe_pos:H,u_globe_radius:de,u_viewport:ze,u_grid_matrix:it?Float32Array.from(it):new Float32Array(9),u_skirt_height:Xe});function zl(x,d){return null!=x&&null!=d&&!(!x.hasData()||!d.hasData())&&null!=x.demTexture&&null!=d.demTexture&&x.tileID.key!==d.tileID.key}const Do=new class{constructor(){this.operations={}}newMorphing(x,d,y,S,D){if(x in this.operations){const k=this.operations[x];k.to.tileID.key!==y.tileID.key&&(k.queued=y)}else this.operations[x]={startTime:S,phase:0,duration:D,from:d,to:y,queued:null}}getMorphValuesForProxy(x){if(!(x in this.operations))return null;const d=this.operations[x];return{from:d.from,to:d.to,phase:d.phase}}update(x){for(const d in this.operations){const y=this.operations[d];for(y.phase=(x-y.startTime)/y.duration;y.phase>=1||!this._validOp(y);)if(!this._nextOp(y,x)){delete this.operations[d];break}}}_nextOp(x,d){return!!x.queued&&(x.from=x.to,x.to=x.queued,x.queued=null,x.phase=0,x.startTime=d,!0)}_validOp(x){return x.from.hasData()&&x.to.hasData()}},uu={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function cl(x){return 6*Math.pow(1.5,22-x)}function dm(x,d){const y=1<<x.z;return!d&&(0===x.x||x.x===y-1)||0===x.y||x.y===y-1}const qr=x=>({u_matrix:x});function Fd(x,d,y,S,D){if(D>0){const k=g.exported.now(),N=(k-x.timeAdded)/D,F=d?(k-d.timeAdded)/D:-1,$=y.getSource(),W=S.coveringZoomLevel({tileSize:$.tileSize,roundZoom:$.roundZoom}),H=!d||Math.abs(d.tileID.overscaledZ-W)>Math.abs(x.tileID.overscaledZ-W),de=H&&x.refreshedUponExpiration?1:g.clamp(H?N:1-F,0,1);return x.refreshedUponExpiration&&N>=1&&(x.refreshedUponExpiration=!1),d?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}class Ms extends g.SourceCache{constructor(d){const y={type:"raster-dem",maxzoom:d.transform.maxZoom},S=new De(Qn(),null),D=Zi("mock-dem",y,S,d.style);super("mock-dem",D,!1),D.setEventedParent(this),this._sourceLoaded=!0}_loadTile(d,y){d.state="loaded",y(null)}}class fh extends g.SourceCache{constructor(d){const y=Zi("proxy",{type:"geojson",maxzoom:d.transform.maxZoom},new De(Qn(),null),d.style);super("proxy",y,!1),y.setEventedParent(this),this.map=this.getSource().map=d,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(d,y,S){if(d.freezeTileCoverage)return;this.transform=d;const D=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((k,N)=>{if(k[N.key]="",!this._tiles[N.key]){const F=new g.Tile(N,this._source.tileSize*N.overscaleFactor(),d.tileZoom);F.state="loaded",this._tiles[N.key]=F}return k},{});for(const k in this._tiles)k in D||(this.freeFBO(k),this._tiles[k].unloadVectorData(),delete this._tiles[k])}freeFBO(d){const y=this.proxyCachedFBO[d];if(void 0!==y){const S=Object.values(y);this.renderCachePool.push(...S),delete this.proxyCachedFBO[d]}}deallocRenderCache(){this.renderCache.forEach(d=>d.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class xl extends g.OverscaledTileID{constructor(d,y,S){super(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y),this.proxyTileKey=y,this.projMatrix=S}}class Bd extends g.Elevation{constructor(d,y){super(),this.painter=d,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[S,D,k]=function($){const W=new g.StructArrayLayout2i4,H=new g.StructArrayLayout3ui6;W.reserve(17161),H.reserve(33800);const ze=g.EXTENT/128,Xe=g.EXTENT+ze/2,it=Xe+ze;for(let dt=-ze;dt<it;dt+=ze)for(let pe=-ze;pe<it;pe+=ze){const Ye=pe<0||pe>Xe||dt<0||dt>Xe?24575:0,bt=g.clamp(Math.round(pe),0,g.EXTENT),Et=g.clamp(Math.round(dt),0,g.EXTENT);W.emplaceBack(bt+Ye,Et)}const ot=(dt,pe)=>{const Ye=131*pe+dt;H.emplaceBack(Ye+1,Ye,Ye+131),H.emplaceBack(Ye+131,Ye+131+1,Ye+1)};for(let dt=1;dt<129;dt++)for(let pe=1;pe<129;pe++)ot(pe,dt);return[0,129].forEach(dt=>{for(let pe=0;pe<130;pe++)ot(pe,dt),ot(dt,pe)}),[W,H,32768]}(),N=d.context;this.gridBuffer=N.createVertexBuffer(S,g.posAttributes.members),this.gridIndexBuffer=N.createIndexBuffer(D),this.gridSegments=g.SegmentVector.simpleSegment(0,0,S.length,D.length),this.gridNoSkirtSegments=g.SegmentVector.simpleSegment(0,0,S.length,k),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fh(y.map),this.orthoMatrix=g.create(),g.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,g.EXTENT,0,g.EXTENT,0,1);const F=N.gl;this._overlapStencilMode=new g.StencilMode({func:F.GEQUAL,mask:255},0,255,F.KEEP,F.KEEP,F.REPLACE),this._previousZoom=d.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=y,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ms(y.map)}set style(d){d.on("data",this._onStyleDataEvent.bind(this)),d.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=d,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(d,y,S){if(d&&d.terrain){this._style!==d&&(this.style=d),this.enabled=!0;const D=d.terrain.properties;this.sourceCache=0===d.terrain.drapeRenderMode?this._mockSourceCache:d._getSourceCache(D.get("source")),this._exaggeration=D.get("exaggeration");const k=()=>{this.sourceCache.used&&g.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const N=this.getScaledDemTileSize();this.sourceCache.update(y,N,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,k(),this._initializing=!0),k(),y.updateElevation(!0,S),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(y),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(d){this._findCoveringTileCache[d]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const d=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==d.efficiency&&g.warnOnce(`Terrain render cache efficiency is not optimal (${d.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${d.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(d){d.coord&&"source"===d.dataType?this._clearRenderCacheForTile(d.sourceCacheId,d.coord):"style"===d.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const d in this._style._sourceCaches)this._style._sourceCaches[d].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(d=>d.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const d=2*this.proxySourceCache.getSource().tileSize;return[d,d]}set useVertexMorphing(d){this._useVertexMorphing=d}updateTileBinding(d){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const y=this.proxySourceCache,S=this.painter.transform;this._initializing&&(this._initializing=0===S._centerAltitude&&-1===this.getAtPointOrZero(g.MercatorCoordinate.fromLngLat(S.center),-1),this._emptyDEMTextureDirty=!this._initializing);const D=this.proxyCoords=y.getIds().map($=>{const W=y.getTileByID($).tileID;return W.projMatrix=S.calculateProjMatrix(W.toUnwrapped()),W});(function($,W){const H=W.transform.pointCoordinate(W.transform.getCameraPoint()),de=new g.Point(H.x,H.y);$.sort((ze,Xe)=>{if(Xe.overscaledZ-ze.overscaledZ)return Xe.overscaledZ-ze.overscaledZ;const it=new g.Point(ze.canonical.x+(1<<ze.canonical.z)*ze.wrap,ze.canonical.y),ot=new g.Point(Xe.canonical.x+(1<<Xe.canonical.z)*Xe.wrap,Xe.canonical.y),dt=de.mult(1<<ze.canonical.z);return dt.x-=.5,dt.y-=.5,dt.distSqr(it)-dt.distSqr(ot)})})(D,this.painter),this._previousZoom=S.zoom;const k=this.proxyToSource||{};this.proxyToSource={},D.forEach($=>{this.proxyToSource[$.key]={}}),this.terrainTileForTile={};const N=this._style._sourceCaches;for(const $ in N){const W=N[$];if(!W.used||(W!==this.sourceCache&&this.resetTileLookupCache(W.id),this._setupProxiedCoordsForOrtho(W,d[$],k),W.usedForTerrain))continue;const H=d[$];W.getSource().reparseOverscaled&&this._assignTerrainTiles(H)}this.proxiedCoords[y.id]=D.map($=>new xl($,$.key,this.orthoMatrix)),this._assignTerrainTiles(D),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(k),this.renderingToTexture=!1,this._updateTimestamp=g.exported.now();const F={};this._visibleDemTiles=[];for(const $ of this.proxyCoords){const W=this.terrainTileForTile[$.key];if(!W)continue;const H=W.tileID.key;H in F||(this._visibleDemTiles.push(W),F[H]=H)}}_assignTerrainTiles(d){this._initializing||d.forEach(y=>{if(this.terrainTileForTile[y.key])return;const S=this._findTileCoveringTileID(y,this.sourceCache);S&&(this.terrainTileForTile[y.key]=S)})}_prepareDEMTextures(){const d=this.painter.context,y=d.gl;for(const S in this.terrainTileForTile){const D=this.terrainTileForTile[S],k=D.dem;!k||D.demTexture&&!D.needsDEMTextureUpload||(d.activeTexture.set(y.TEXTURE1),ku(this.painter,D,k))}}_prepareDemTileUniforms(d,y,S,D){if(!y||null==y.demTexture)return!1;const k=d.tileID.canonical,N=Math.pow(2,y.tileID.canonical.z-k.z),F=D||"";return S[`u_dem_tl${F}`]=[k.x*N%1,k.y*N%1],S[`u_dem_scale${F}`]=N,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const d=this.painter.context,y=d.gl;if(!this._emptyDepthBufferTexture){const S=new g.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new g.Texture(d,S,y.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let d=0;const y=this._visibleDemTiles.reduce((S,D)=>{if(!D.dem)return S;const k=D.dem.tree.minimums[0];return k>0&&d++,S+k},0);return d?y/d:0}_updateEmptyDEMTexture(){const d=this.painter.context,y=d.gl;d.activeTexture.set(y.TEXTURE2);const S=this._getLoadedAreaMinimum(),D=new g.RGBAImage({width:1,height:1},new Uint8Array(g.DEMData.pack(S,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let k=this._emptyDEMTexture;return k?k.update(D,{premultiply:!1}):k=this._emptyDEMTexture=new g.Texture(d,D,y.RGBA,{premultiply:!1}),k}setupElevationDraw(d,y,S){const D=this.painter.context,k=D.gl,N=(F=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:g.DEMData.getUnpackVector(F),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var F;N.u_dem_size=this.sourceCache.getSource().tileSize,N.u_exaggeration=this.exaggeration();let $=null,W=null,H=1;if(S&&S.morphing&&this._useVertexMorphing){const de=S.morphing.srcDemTile,ze=S.morphing.dstDemTile;H=S.morphing.phase,de&&ze&&(this._prepareDemTileUniforms(d,de,N,"_prev")&&(W=de),this._prepareDemTileUniforms(d,ze,N)&&($=ze))}if(W&&$?(D.activeTexture.set(k.TEXTURE2),$.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),D.activeTexture.set(k.TEXTURE4),W.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),N.u_dem_lerp=H):($=this.terrainTileForTile[d.tileID.key],D.activeTexture.set(k.TEXTURE2),(this._prepareDemTileUniforms(d,$,N)?$.demTexture:this.emptyDEMTexture).bind(k.NEAREST,k.CLAMP_TO_EDGE)),D.activeTexture.set(k.TEXTURE3),S&&S.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),this._depthFBO&&(N.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),N.u_depth_size_inv=[1,1]),S&&S.useMeterToDem&&$){const de=(1<<$.tileID.canonical.z)*g.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;N.u_meter_to_dem=de}if(S&&S.labelPlaneMatrixInv&&(N.u_label_plane_matrix_inv=S.labelPlaneMatrixInv),y.setTerrainUniformValues(D,N),"globe"===this.painter.transform.projection.name){const de=this.globeUniformValues(this.painter.transform,d.tileID.canonical,S&&S.useDenormalizedUpVectorScale);y.setGlobeUniformValues(D,de)}}globeUniformValues(d,y,S){const D=d.projection;return{u_tile_tl_up:D.upVector(y,0,0),u_tile_tr_up:D.upVector(y,g.EXTENT,0),u_tile_br_up:D.upVector(y,g.EXTENT,g.EXTENT),u_tile_bl_up:D.upVector(y,0,g.EXTENT),u_tile_up_scale:S?g.globeMetersToEcef(1):D.upVectorScale(y,d.center.lat,d.worldSize).metersToTile}}renderToBackBuffer(d){const y=this.painter,S=this.painter.context;0!==d.length&&(S.bindFramebuffer.set(null),S.viewport.set([0,0,y.width,y.height]),y.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(D,k,N,F,$){if("globe"===D.transform.projection.name)!function(W,H,de,ze,Xe){const it=W.context,ot=it.gl;let dt,pe;const Ye=W.options.showTerrainWireframe?2:0,bt=W.transform,Et=g.globeUseCustomAntiAliasing(W,it,bt),jt=(li,bn)=>{if(pe===li)return;const jn=[uu[li],"PROJECTION_GLOBE_VIEW"];Et&&jn.push("CUSTOM_ANTIALIASING"),bn&&jn.push(uu[Ye]),dt=W.useProgram("globeRaster",null,jn),pe=li},Gt=W.colorModeForRenderPass(),Ut=new g.DepthMode(ot.LEQUAL,g.DepthMode.ReadWrite,W.depthRangeFor3D);Do.update(Xe);const tn=g.calculateGlobeMercatorMatrix(bt),Kt=[g.mercatorXfromLng(bt.center.lng),g.mercatorYfromLat(bt.center.lat)],wn=Ye?[!1,!0]:[!1],hi=W.globeSharedBuffers,mn=[bt.width*g.exported.devicePixelRatio,bt.height*g.exported.devicePixelRatio],Hn=Float32Array.from(bt.globeMatrix),Dn={useDenormalizedUpVectorScale:!0};if(wn.forEach(li=>{const bn=W.transform,jn=cl(bn.zoom)*H.exaggeration();pe=-1;const di=li?ot.LINES:ot.TRIANGLES;for(const ni of ze){const fi=de.getTile(ni),vr=g.StencilMode.disabled,Ur=H.prevTerrainTileForTile[ni.key],qi=H.terrainTileForTile[ni.key];zl(Ur,qi)&&Do.newMorphing(ni.key,Ur,qi,Xe,250),it.activeTexture.set(ot.TEXTURE0),fi.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE);const Ki=Do.getMorphValuesForProxy(ni.key),uo=Ki?1:0;Ki&&g.extend$1(Dn,{morphing:{srcDemTile:Ki.from,dstDemTile:Ki.to,phase:g.easeCubicInOut(Ki.phase)}});const ho=g.tileCornersToBounds(ni.canonical),dr=g.getLatitudinalLod(ho.getCenter().lat),_s=g.getGridMatrix(ni.canonical,ho,dr,bn.worldSize/bn._pixelsPerMercatorPixel),zs=g.globeNormalizeECEF(g.globeTileBounds(ni.canonical)),Zs=xo(bn.projMatrix,Hn,tn,zs,g.globeToMercatorTransition(bn.zoom),Kt,bn.frustumCorners.TL,bn.frustumCorners.TR,bn.frustumCorners.BR,bn.frustumCorners.BL,bn.globeCenterInViewSpace,bn.globeRadius,mn,jn,_s);if(jt(uo,li),H.setupElevationDraw(fi,dt,Dn),W.prepareDrawProgram(it,dt,ni.toUnwrapped()),hi){const[ks,Rc,va]=li?hi.getWirefameBuffers(W.context,dr):hi.getGridBuffers(dr,0!==jn);dt.draw(it,di,Ut,vr,Gt,g.CullFaceMode.backCCW,Zs,"globe_raster",ks,Rc,va)}}}),hi){const li=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Et&&li.push("CUSTOM_ANTIALIASING"),dt=W.useProgram("globeRaster",null,li);for(const bn of ze){const{x:jn,y:di,z:ni}=bn.canonical,fi=0===di,vr=di===(1<<ni)-1,[Ur,qi,Ki,uo]=hi.getPoleBuffers(ni);if(uo&&(fi||vr)){const ho=de.getTile(bn);it.activeTexture.set(ot.TEXTURE0),ho.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE);let dr=g.globePoleMatrixForTile(ni,jn,bt);const _s=g.globeNormalizeECEF(g.globeTileBounds(bn.canonical)),zs=(Zs,ks)=>Zs.draw(it,ot.TRIANGLES,Ut,g.StencilMode.disabled,Gt,g.CullFaceMode.disabled,xo(bt.projMatrix,dr,dr,_s,0,Kt,bt.frustumCorners.TL,bt.frustumCorners.TR,bt.frustumCorners.BR,bt.frustumCorners.BL,bt.globeCenterInViewSpace,bt.globeRadius,mn,0),"globe_pole_raster",ks,Ki,uo);H.setupElevationDraw(ho,dt,Dn),W.prepareDrawProgram(it,dt,bn.toUnwrapped()),fi&&zs(dt,Ur),vr&&(dr=g.scale(g.create(),dr,[1,-1,1]),zs(dt,qi))}}}}(D,k,N,F,$);else{const W=D.context,H=W.gl;let de,ze;const Xe=D.options.showTerrainWireframe?2:0,it=(bt,Et)=>{if(ze===bt)return;const jt=[uu[bt]];Et&&jt.push(uu[Xe]),de=D.useProgram("terrainRaster",null,jt),ze=bt},ot=D.colorModeForRenderPass(),dt=new g.DepthMode(H.LEQUAL,g.DepthMode.ReadWrite,D.depthRangeFor3D);Do.update($);const pe=D.transform,Ye=cl(pe.zoom)*k.exaggeration();(Xe?[!1,!0]:[!1]).forEach(bt=>{ze=-1;const Et=bt?H.LINES:H.TRIANGLES,[jt,Gt]=bt?k.getWirefameBuffer():[k.gridIndexBuffer,k.gridSegments];for(const Ut of F){const tn=N.getTile(Ut),Kt=g.StencilMode.disabled,wn=k.prevTerrainTileForTile[Ut.key],hi=k.terrainTileForTile[Ut.key];zl(wn,hi)&&Do.newMorphing(Ut.key,wn,hi,$,250),W.activeTexture.set(H.TEXTURE0),tn.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST);const mn=Do.getMorphValuesForProxy(Ut.key),Hn=mn?1:0;let Dn;mn&&(Dn={morphing:{srcDemTile:mn.from,dstDemTile:mn.to,phase:g.easeCubicInOut(mn.phase)}});const li=Hh(Ut.projMatrix,dm(Ut.canonical,pe.renderWorldCopies)?Ye/10:Ye);it(Hn,bt),k.setupElevationDraw(tn,de,Dn),D.prepareDrawProgram(W,de,Ut.toUnwrapped()),de.draw(W,Et,dt,Kt,ot,g.CullFaceMode.backCCW,li,"terrain_raster",k.gridBuffer,jt,Gt)}})}}(y,this,this.proxySourceCache,d,this._updateTimestamp),this.renderingToTexture=!0,y.gpuTimingDeferredRenderEnd(),d.splice(0,d.length))}renderBatch(d){if(0===this._drapedRenderBatches.length)return d+1;this.renderingToTexture=!0;const y=this.painter,S=this.painter.context,D=this.proxySourceCache,k=this.proxiedCoords[D.id],N=this._drapedRenderBatches.shift(),F=[],$=y.style.order;let W=0;for(const H of k){const de=D.getTileByID(H.proxyTileKey),ze=D.proxyCachedFBO[H.key]?D.proxyCachedFBO[H.key][d]:void 0,Xe=void 0!==ze?D.renderCache[ze]:this.pool[W++],it=void 0!==ze;if(de.texture=Xe.tex,it&&!Xe.dirty){F.push(de.tileID);continue}let ot;S.bindFramebuffer.set(Xe.fb.framebuffer),this.renderedToTile=!1,Xe.dirty&&(S.clear({color:g.Color.transparent,stencil:0}),Xe.dirty=!1);for(let dt=N.start;dt<=N.end;++dt){const pe=y.style._layers[$[dt]];if(pe.isHidden(y.transform.zoom))continue;const Ye=y.style._getLayerSourceCache(pe),bt=Ye?this.proxyToSource[H.key][Ye.id]:[H];if(!bt)continue;const Et=bt;S.viewport.set([0,0,Xe.fb.width,Xe.fb.height]),ot!==(Ye?Ye.id:null)&&(this._setupStencil(Xe,bt,pe,Ye),ot=Ye?Ye.id:null),y.renderLayer(y,Ye,pe,Et)}this.renderedToTile?(Xe.dirty=!0,F.push(de.tileID)):it||--W,5===W&&(W=0,this.renderToBackBuffer(F))}return this.renderToBackBuffer(F),this.renderingToTexture=!1,S.bindFramebuffer.set(null),S.viewport.set([0,0,y.width,y.height]),N.end+1}postRender(){}renderCacheEfficiency(d){const y=d.order.length;if(0===y)return{efficiency:100};let S,D=0,k=0,N=!1;for(let F=0;F<y;++F){const $=d._layers[d.order[F]];this._style.isLayerDraped($)?(N&&++D,++k):N||(N=!0,S=$.id)}return 0===k?{efficiency:100}:{efficiency:100*(1-D/k),firstUndrapedLayer:S}}getMinElevationBelowMSL(){let d=0;return this._visibleDemTiles.filter(y=>y.dem).forEach(y=>{d=Math.min(d,y.dem.tree.minimums[0])}),0===d?d:(d-30)*this._exaggeration}raycast(d,y,S){if(!this._visibleDemTiles)return null;const D=this._visibleDemTiles.filter(k=>k.dem).map(k=>{const N=k.tileID,F=1<<N.overscaledZ,{x:$,y:W}=N.canonical,H=$/F,de=($+1)/F,ze=W/F,Xe=(W+1)/F;return{minx:H,miny:ze,maxx:de,maxy:Xe,t:k.dem.tree.raycastRoot(H,ze,de,Xe,d,y,S),tile:k}});D.sort((k,N)=>(null!==k.t?k.t:Number.MAX_VALUE)-(null!==N.t?N.t:Number.MAX_VALUE));for(const k of D){if(null==k.t)return null;const N=k.tile.dem.tree.raycast(k.minx,k.miny,k.maxx,k.maxy,d,y,S);if(null!=N)return N}return null}_createFBO(){const d=this.painter.context,y=d.gl,S=this.drapeBufferSize;d.activeTexture.set(y.TEXTURE0);const D=new g.Texture(d,{width:S[0],height:S[1],data:null},y.RGBA);D.bind(y.LINEAR,y.CLAMP_TO_EDGE);const k=d.createFramebuffer(S[0],S[1],!1);return k.colorAttachment.set(D.texture),k.depthAttachment=new It(d,k.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=d.createRenderbuffer(d.gl.DEPTH_STENCIL,S[0],S[1]),this._stencilRef=0,k.depthAttachment.set(this._sharedDepthStencil),d.clear({stencil:0})):k.depthAttachment.set(this._sharedDepthStencil),d.extTextureFilterAnisotropic&&!d.extTextureFilterAnisotropicForceOff&&y.texParameterf(y.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax),{fb:k,tex:D,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d].hasTransition())return!0;return this._style.order.some(d=>{const y=this._style._layers[d],S=y.isHidden(this.painter.transform.zoom);return"custom"===y.type?!S&&y.shouldRedrape():!S&&y.hasTransition()})}_clearLineLayersFromRenderCache(){let d=!1;for(const S of this._style._getSources())if(S instanceof ri){d=!0;break}if(!d)return;const y={};for(let S=0;S<this._style.order.length;++S){const D=this._style._layers[this._style.order[S]],k=this._style._getLayerSourceCache(D);if(k&&!y[k.id]&&!D.isHidden(this.painter.transform.zoom)&&"line"===D.type&&D.widthExpression()instanceof g.ZoomDependentExpression){y[k.id]=!0;for(const N of this.proxyCoords){const F=this.proxyToSource[N.key][k.id];if(F)for(const $ of F)this._clearRenderCacheForTile(k.id,$)}}}}_clearRasterLayersFromRenderCache(){let d=!1;for(const S in this._style._sourceCaches)if(this._style._sourceCaches[S]._source instanceof Zn){d=!0;break}if(!d)return;const y={};for(let S=0;S<this._style.order.length;++S){const D=this._style._layers[this._style.order[S]],k=this._style._getLayerSourceCache(D);if(!k||y[k.id]||D.isHidden(this.painter.transform.zoom)||"raster"!==D.type)continue;const N=D.paint.get("raster-fade-duration");for(const F of this.proxyCoords){const $=this.proxyToSource[F.key][k.id];if($)for(const W of $){const H=Fd(k.getTile(W),k.findLoadedParent(W,0),k,this.painter.transform,N);(1!==H.opacity||0!==H.mix)&&this._clearRenderCacheForTile(k.id,W)}}}}_setupDrapedRenderBatches(){const d=this._style.order,y=d.length;if(0===y)return;const S=[];let D,k=0,N=this._style._layers[d[k]];for(;!this._style.isLayerDraped(N)&&N.isHidden(this.painter.transform.zoom)&&++k<y;)N=this._style._layers[d[k]];for(;k<y;++k){const F=this._style._layers[d[k]];F.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(F)?void 0===D&&(D=k):void 0!==D&&(S.push({start:D,end:k-1}),D=void 0))}void 0!==D&&S.push({start:D,end:k-1}),this._drapedRenderBatches=S}_setupRenderCache(d){const y=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,y.renderCache.length>y.renderCachePool.length){const N=Object.values(y.proxyCachedFBO);y.proxyCachedFBO={};for(let F=0;F<N.length;++F){const $=Object.values(N[F]);y.renderCachePool.push(...$)}}return}this._clearRasterLayersFromRenderCache();const S=this.proxyCoords,D=this._tilesDirty;for(let N=S.length-1;N>=0;N--){const F=S[N];if(y.getTileByID(F.key),void 0!==y.proxyCachedFBO[F.key]){const $=d[F.key],W=this.proxyToSource[F.key];let H=0;for(const de in W){const ze=W[de],Xe=$[de];if(!Xe||Xe.length!==ze.length||ze.some((it,ot)=>it!==Xe[ot]||D[de]&&D[de].hasOwnProperty(it.key))){H=-1;break}++H}for(const de in y.proxyCachedFBO[F.key])y.renderCache[y.proxyCachedFBO[F.key][de]].dirty=H<0||H!==Object.values($).length}}const k=[...this._drapedRenderBatches];k.sort((N,F)=>F.end-F.start-(N.end-N.start));for(const N of k)for(const F of S){if(y.proxyCachedFBO[F.key])continue;let $=y.renderCachePool.pop();void 0===$&&y.renderCache.length<50&&($=y.renderCache.length,y.renderCache.push(this._createFBO())),void 0!==$&&(y.proxyCachedFBO[F.key]={},y.proxyCachedFBO[F.key][N.start]=$,y.renderCache[$].dirty=!0)}this._tilesDirty={}}_setupStencil(d,y,S,D){if(!D||!this._sourceTilesOverlap[D.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const k=this.painter.context,N=k.gl;if(y.length<=1)return void(this._overlapStencilType=!1);let F;if(S.isTileClipped())F=y.length,this._overlapStencilMode.test={func:N.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(y[0].overscaledZ>y[y.length-1].overscaledZ))return void(this._overlapStencilType=!1);F=1,this._overlapStencilMode.test={func:N.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+F>255&&(k.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=F,this._overlapStencilMode.ref=this._stencilRef,S.isTileClipped()&&this._renderTileClippingMasks(y,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(d){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[d.key]),this._overlapStencilMode):g.StencilMode.disabled}_renderTileClippingMasks(d,y){const S=this.painter,D=this.painter.context,k=D.gl;S._tileClippingMaskIDs={},D.setColorMode(g.ColorMode.disabled),D.setDepthMode(g.DepthMode.disabled);const N=S.useProgram("clippingMask");for(const F of d){const $=S._tileClippingMaskIDs[F.key]=--y;N.draw(D,k.TRIANGLES,g.DepthMode.disabled,new g.StencilMode({func:k.ALWAYS,mask:0},$,255,k.KEEP,k.KEEP,k.REPLACE),g.ColorMode.disabled,g.CullFaceMode.disabled,qr(F.projMatrix),"$clipping",S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}}pointCoordinate(d){const y=this.painter.transform;if(d.x<0||d.x>y.width||d.y<0||d.y>y.height)return null;const S=[d.x,d.y,1,1];g.transformMat4$1(S,S,y.pixelMatrixInverse),g.scale$1(S,S,1/S[3]),S[0]/=y.worldSize,S[1]/=y.worldSize;const D=y._camera.position,k=g.mercatorZfromAltitude(1,y.center.lat),N=[D[0],D[1],D[2]/k,0],F=g.subtract([],S.slice(0,3),N);g.normalize(F,F);const $=this.raycast(N,F,this._exaggeration);return null!==$&&$?(g.scaleAndAdd(N,N,F,$),N[3]=N[2],N[2]*=k,N):null}drawDepth(){const d=this.painter,y=d.context,S=this.proxySourceCache,D=Math.ceil(d.width),k=Math.ceil(d.height);if(!this._depthFBO||this._depthFBO.width===D&&this._depthFBO.height===k||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const N=y.gl,F=y.createFramebuffer(D,k,!0);y.activeTexture.set(N.TEXTURE0);const $=new g.Texture(y,{width:D,height:k,data:null},N.RGBA);$.bind(N.NEAREST,N.CLAMP_TO_EDGE),F.colorAttachment.set($.texture);const W=y.createRenderbuffer(y.gl.DEPTH_COMPONENT16,D,k);F.depthAttachment.set(W),this._depthFBO=F,this._depthTexture=$}y.bindFramebuffer.set(this._depthFBO.framebuffer),y.viewport.set([0,0,D,k]),function(N,F,$,W){if("globe"===N.transform.projection.name)return;const H=N.context,de=H.gl;H.clear({depth:1});const ze=N.useProgram("terrainDepth"),Xe=new g.DepthMode(de.LESS,g.DepthMode.ReadWrite,N.depthRangeFor3D);for(const it of W){const ot=$.getTile(it),dt=Hh(it.projMatrix,0);F.setupElevationDraw(ot,ze),ze.draw(H,de.TRIANGLES,Xe,g.StencilMode.disabled,g.ColorMode.unblended,g.CullFaceMode.backCCW,dt,"terrain_depth",F.gridBuffer,F.gridIndexBuffer,F.gridNoSkirtSegments)}}(d,this,S,this.proxyCoords)}_setupProxiedCoordsForOrtho(d,y,S){if(d.getSource()instanceof Cr)return this._setupProxiedCoordsForImageSource(d,y,S);this._findCoveringTileCache[d.id]=this._findCoveringTileCache[d.id]||{};const D=this.proxiedCoords[d.id]=[],k=this.proxyCoords;for(let F=0;F<k.length;F++){const $=k[F],W=this._findTileCoveringTileID($,d);if(W){const H=this._createProxiedId($,W,S[$.key]&&S[$.key][d.id]);D.push(H),this.proxyToSource[$.key][d.id]=[H]}}let N=!1;for(let F=0;F<y.length;F++){const $=d.getTile(y[F]);if(!$||!$.hasData())continue;const W=this._findTileCoveringTileID($.tileID,this.proxySourceCache);if(W&&W.tileID.canonical.z!==$.tileID.canonical.z){const H=this.proxyToSource[W.tileID.key][d.id],de=this._createProxiedId(W.tileID,$,S[W.tileID.key]&&S[W.tileID.key][d.id]);H?H.splice(H.length-1,0,de):this.proxyToSource[W.tileID.key][d.id]=[de],D.push(de),N=!0}}this._sourceTilesOverlap[d.id]=N}_setupProxiedCoordsForImageSource(d,y,S){if(!d.getSource().loaded())return;const D=this.proxiedCoords[d.id]=[],k=this.proxyCoords,N=d.getSource(),F=new g.Point(N.tileID.x,N.tileID.y)._div(1<<N.tileID.z),$=N.coordinates.map(g.MercatorCoordinate.fromLngLat).reduce((H,de)=>(H.min.x=Math.min(H.min.x,de.x-F.x),H.min.y=Math.min(H.min.y,de.y-F.y),H.max.x=Math.max(H.max.x,de.x-F.x),H.max.y=Math.max(H.max.y,de.y-F.y),H),{min:new g.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new g.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),W=(H,de)=>{const ze=H.wrap+H.canonical.x/(1<<H.canonical.z),Xe=H.canonical.y/(1<<H.canonical.z),it=g.EXTENT/(1<<H.canonical.z),ot=de.wrap+de.canonical.x/(1<<de.canonical.z),dt=de.canonical.y/(1<<de.canonical.z);return ze+it<ot+$.min.x||ze>ot+$.max.x||Xe+it<dt+$.min.y||Xe>dt+$.max.y};for(let H=0;H<k.length;H++){const de=k[H];for(let ze=0;ze<y.length;ze++){const Xe=d.getTile(y[ze]);if(!Xe||!Xe.hasData()||W(de,Xe.tileID))continue;const it=this._createProxiedId(de,Xe,S[de.key]&&S[de.key][d.id]),ot=this.proxyToSource[de.key][d.id];ot?ot.push(it):this.proxyToSource[de.key][d.id]=[it],D.push(it)}}}_createProxiedId(d,y,S){let D=this.orthoMatrix;if(S){const k=S.find(N=>N.key===y.tileID.key);if(k)return k}if(y.tileID.key!==d.key){const k=d.canonical.z-y.tileID.canonical.z;let N,F,$;D=g.create();const W=y.tileID.wrap-d.wrap<<d.overscaledZ;k>0?(N=g.EXTENT>>k,F=N*((y.tileID.canonical.x<<k)-d.canonical.x+W),$=N*((y.tileID.canonical.y<<k)-d.canonical.y)):(N=g.EXTENT<<-k,F=g.EXTENT*(y.tileID.canonical.x-(d.canonical.x+W<<-k)),$=g.EXTENT*(y.tileID.canonical.y-(d.canonical.y<<-k))),g.ortho(D,0,N,0,N,0,1),g.translate(D,D,[F,$,0])}return new xl(y.tileID,d.key,D)}_findTileCoveringTileID(d,y){let S=y.getTile(d);if(S&&S.hasData())return S;const D=this._findCoveringTileCache[y.id],k=D[d.key];if(S=k?y.getTileByID(k):null,S&&S.hasData()||null===k)return S;let N=S?S.tileID:d,F=N.overscaledZ;const $=y.getSource().minzoom,W=[];if(!k){const de=y.getSource().maxzoom;if(d.canonical.z>=de){const ze=d.canonical.z-de;y.getSource().reparseOverscaled?(F=Math.max(d.canonical.z+2,y.transform.tileZoom),N=new g.OverscaledTileID(F,d.wrap,de,d.canonical.x>>ze,d.canonical.y>>ze)):0!==ze&&(F=de,N=new g.OverscaledTileID(F,d.wrap,de,d.canonical.x>>ze,d.canonical.y>>ze))}N.key!==d.key&&(W.push(N.key),S=y.getTile(N))}const H=de=>{W.forEach(ze=>{D[ze]=de}),W.length=0};for(F-=1;F>=$&&(!S||!S.hasData());F--){S&&H(S.tileID.key);const de=N.calculateScaledKey(F);if(S=y.getTileByID(de),S&&S.hasData())break;const ze=D[de];if(null===ze)break;void 0===ze?W.push(de):S=y.getTileByID(ze)}return H(S?S.tileID.key:null),S&&S.hasData()?S:null}findDEMTileFor(d){return this.enabled?this._findTileCoveringTileID(d,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(d,y){let S=this._tilesDirty[d];S||(S=this._tilesDirty[d]={}),S[y.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const d=function(y){let S=0;const D=new g.StructArrayLayout2ui4,k=131;for(let N=1;N<129;N++){for(let F=1;F<129;F++)S=N*k+F,D.emplaceBack(S,S+1),D.emplaceBack(S,S+k),D.emplaceBack(S+1,S+k),128===N&&D.emplaceBack(S+k,S+k+1);D.emplaceBack(S+1,S+1+k)}return D}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(d),this.wireframeSegments=g.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,d.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class lo{static cacheKey(d,y,S,D){let k=`${y}${D?D.cacheKey:""}`;for(const N of S)d.usedDefines.includes(N)&&(k+=`/${N}`);return k}constructor(d,y,S,D,k,N){const F=d.gl;this.program=F.createProgram();const $=function(pe){const Ye=[];for(let bt=0;bt<pe.length;bt++){if(null===pe[bt])continue;const Et=pe[bt].split(" ");Ye.push(Et.pop())}return Ye}(S.staticAttributes),W=D?D.getBinderAttributes():[],H=$.concat(W);let de=D?D.defines():[];de=de.concat(N.map(pe=>`#define ${pe}`));const ze=d.isWebGL2?"#version 300 es\n":"",Xe=ze+de.concat(d.extStandardDerivatives&&0===ze.length?"#extension GL_OES_standard_derivatives : enable\n".concat(ud):ud,ud,Bl,Mu.fragmentSource,dc.fragmentSource,S.fragmentSource).join("\n"),it=ze+de.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Bl,Mu.vertexSource,dc.vertexSource,ll.vertexSource,S.vertexSource).join("\n"),ot=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);F.shaderSource(ot,Xe),F.compileShader(ot),F.attachShader(this.program,ot);const dt=F.createShader(F.VERTEX_SHADER);if(F.isContextLost())this.failedToCreate=!0;else{F.shaderSource(dt,it),F.compileShader(dt),F.attachShader(this.program,dt),this.attributes={},this.numAttributes=H.length;for(let pe=0;pe<this.numAttributes;pe++)H[pe]&&(F.bindAttribLocation(this.program,pe,H[pe]),this.attributes[H[pe]]=pe);F.linkProgram(this.program),F.deleteShader(dt),F.deleteShader(ot),this.fixedUniforms=k(d),this.binderUniforms=D?D.getUniforms(d):[],N.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new g.Uniform1i(pe=d),u_dem_prev:new g.Uniform1i(pe),u_dem_unpack:new g.Uniform4f(pe),u_dem_tl:new g.Uniform2f(pe),u_dem_scale:new g.Uniform1f(pe),u_dem_tl_prev:new g.Uniform2f(pe),u_dem_scale_prev:new g.Uniform1f(pe),u_dem_size:new g.Uniform1f(pe),u_dem_lerp:new g.Uniform1f(pe),u_exaggeration:new g.Uniform1f(pe),u_depth:new g.Uniform1i(pe),u_depth_size_inv:new g.Uniform2f(pe),u_meter_to_dem:new g.Uniform1f(pe),u_label_plane_matrix_inv:new g.UniformMatrix4f(pe)}),N.includes("GLOBE")&&(this.globeUniforms=(pe=>({u_tile_tl_up:new g.Uniform3f(pe),u_tile_tr_up:new g.Uniform3f(pe),u_tile_br_up:new g.Uniform3f(pe),u_tile_bl_up:new g.Uniform3f(pe),u_tile_up_scale:new g.Uniform1f(pe)}))(d)),N.includes("FOG")&&(this.fogUniforms=(pe=>({u_fog_matrix:new g.UniformMatrix4f(pe),u_fog_range:new g.Uniform2f(pe),u_fog_color:new g.Uniform4f(pe),u_fog_horizon_blend:new g.Uniform1f(pe),u_fog_temporal_offset:new g.Uniform1f(pe),u_frustum_tl:new g.Uniform3f(pe),u_frustum_tr:new g.Uniform3f(pe),u_frustum_br:new g.Uniform3f(pe),u_frustum_bl:new g.Uniform3f(pe),u_globe_pos:new g.Uniform3f(pe),u_globe_radius:new g.Uniform1f(pe),u_globe_transition:new g.Uniform1f(pe),u_is_globe:new g.Uniform1i(pe),u_viewport:new g.Uniform2f(pe)}))(d))}var pe}setTerrainUniformValues(d,y){if(!this.terrainUniforms)return;const S=this.terrainUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const D in y)S[D]&&S[D].set(this.program,D,y[D])}}setGlobeUniformValues(d,y){if(!this.globeUniforms)return;const S=this.globeUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const D in y)S[D]&&S[D].set(this.program,D,y[D])}}setFogUniformValues(d,y){if(!this.fogUniforms)return;const S=this.fogUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const D in y)S[D].set(this.program,D,y[D])}}draw(d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot){const dt=d.gl;if(this.failedToCreate)return;d.program.set(this.program),d.setDepthMode(S),d.setStencilMode(D),d.setColorMode(k),d.setCullFace(N);for(const Ye of Object.keys(this.fixedUniforms))this.fixedUniforms[Ye].set(this.program,Ye,F[Ye]);it&&it.setUniforms(this.program,d,this.binderUniforms,ze,{zoom:Xe});const pe={[dt.LINES]:2,[dt.TRIANGLES]:3,[dt.LINE_STRIP]:1}[y];for(const Ye of de.get()){const bt=Ye.vaos||(Ye.vaos={});(bt[$]||(bt[$]=new hh)).bind(d,this,W,it?it.getPaintVertexBuffers():[],H,Ye.vertexOffset,ot||[]),dt.drawElements(y,Ye.primitiveLength*pe,dt.UNSIGNED_SHORT,Ye.primitiveOffset*pe*2)}}}function Tc(x,d){const y=Math.pow(2,d.tileID.overscaledZ),S=d.tileSize*Math.pow(2,x.transform.tileZoom)/y,D=S*(d.tileID.canonical.x+d.tileID.wrap*y),k=S*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ke(d,1,x.transform.tileZoom),u_pixel_coord_upper:[D>>16,k>>16],u_pixel_coord_lower:[65535&D,65535&k]}}const mo=g.create(),Kl=(x,d,y,S,D,k,N,F,$,W,H)=>{const de=d.style.light,ze=de.properties.get("position"),Xe=[ze.x,ze.y,ze.z],it=g.create$1();"viewport"===de.properties.get("anchor")&&(g.fromRotation(it,-d.transform.angle),g.transformMat3(Xe,Xe,it));const ot=de.properties.get("color"),dt=d.transform,pe={u_matrix:x,u_lightpos:Xe,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[ot.r,ot.g,ot.b],u_vertical_gradient:+y,u_opacity:S,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:mo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:D,u_edge_radius:k};return"globe"===dt.projection.name&&(pe.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],pe.u_zoom_transition=$,pe.u_inv_rot_matrix=H,pe.u_merc_center=W,pe.u_up_dir=dt.projection.upVector(new g.CanonicalTileID(0,0,0),W[0]*g.EXTENT,W[1]*g.EXTENT),pe.u_height_lift=F),pe},ph=(x,d,y,S,D,k,N,F,$,W,H,de)=>{const ze=Kl(x,d,y,S,D,k,N,$,W,H,de),Xe={u_height_factor:-Math.pow(2,N.overscaledZ)/F.tileSize/8};return g.extend(ze,Tc(d,F),Xe)},$l=x=>({u_matrix:x}),Al=(x,d,y)=>g.extend($l(x),Tc(d,y)),Da=(x,d)=>({u_matrix:x,u_world:d}),B_=(x,d,y,S)=>g.extend(Al(x,d,y),{u_world:S}),dd=g.create(),Pu=(x,d,y,S,D,k)=>{const N=x.transform,F="globe"===N.projection.name;let $;if("map"===k.paint.get("circle-pitch-alignment"))if(F){const H=g.globePixelsToTileUnits(N.zoom,d.canonical)*N._pixelsPerMercatorPixel;$=Float32Array.from([H,0,0,H])}else $=N.calculatePixelsToTileUnitsMatrix(y);else $=new Float32Array([N.pixelsToGLUnits[0],0,0,N.pixelsToGLUnits[1]]);const W={u_camera_to_center_distance:N.cameraToCenterDistance,u_matrix:x.translatePosMatrix(d.projMatrix,y,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_device_pixel_ratio:g.exported.devicePixelRatio,u_extrude_scale:$,u_inv_rot_matrix:dd,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(F){W.u_inv_rot_matrix=S,W.u_merc_center=D,W.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],W.u_zoom_transition=g.globeToMercatorTransition(N.zoom);const H=D[0]*g.EXTENT,de=D[1]*g.EXTENT;W.u_up_dir=N.projection.upVector(new g.CanonicalTileID(0,0,0),H,de)}return W},fn=x=>{const d=[];return"map"===x.paint.get("circle-pitch-alignment")&&d.push("PITCH_WITH_MAP"),"map"===x.paint.get("circle-pitch-scale")&&d.push("SCALE_WITH_MAP"),d},Ru=(x,d,y,S)=>{const D=g.EXTENT/y.tileSize;return{u_matrix:x,u_camera_to_center_distance:d.getCameraToCenterDistance(S),u_extrude_scale:[d.pixelsToGLUnits[0]/D,d.pixelsToGLUnits[1]/D]}},ti=(x,d,y=1)=>({u_matrix:x,u_color:d,u_overlay:0,u_overlay_scale:y}),Ql=g.create(),Dc=(x,d,y,S,D,k,N)=>{const F=x.transform,$="globe"===F.projection.name,W=$?g.globePixelsToTileUnits(F.zoom,d.canonical)*F._pixelsPerMercatorPixel:Ke(y,1,k),H={u_matrix:d.projMatrix,u_extrude_scale:W,u_intensity:N,u_inv_rot_matrix:Ql,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if($){H.u_inv_rot_matrix=S,H.u_merc_center=D,H.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],H.u_zoom_transition=g.globeToMercatorTransition(F.zoom);const de=D[0]*g.EXTENT,ze=D[1]*g.EXTENT;H.u_up_dir=F.projection.upVector(new g.CanonicalTileID(0,0,0),de,ze)}return H},du=(x,d,y,S,D,k,N)=>{const F=x.transform,$=F.calculatePixelsToTileUnitsMatrix(d);return{u_matrix:hp(x,d,y,S),u_pixels_to_tile_units:$,u_device_pixel_ratio:k,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:D,u_texsize:Jl(y)?d.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:pa(d,x.transform),u_alpha_discard_threshold:0,u_trim_offset:N}},Ac=(x,d,y,S,D)=>{const k=x.transform;return{u_matrix:hp(x,d,y,S),u_texsize:d.imageAtlasTexture.size,u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(d),u_device_pixel_ratio:D,u_image:0,u_tile_units_to_pixels:pa(d,k),u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function pa(x,d){return 1/Ke(x,1,d.tileZoom)}function hp(x,d,y,S){return x.translatePosMatrix(S||d.tileID.projMatrix,d,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}function Jl(x){const d=x.paint.get("line-dasharray").value;return d.value||"constant"!==d.kind}const La=(x,d,y,S,D,k)=>{return{u_matrix:x,u_tl_parent:d,u_scale_parent:y,u_fade_t:S.mix,u_opacity:S.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(F=D.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(N=D.paint.get("raster-contrast"),N>0?1/(1-N):1+N),u_spin_weights:Bs(D.paint.get("raster-hue-rotate")),u_perspective_transform:k};var N,F};function Bs(x){x*=Math.PI/180;const d=Math.sin(x),y=Math.cos(x);return[(2*y+1)/3,(-Math.sqrt(3)*d-y+1)/3,(Math.sqrt(3)*d-y+1)/3]}const Aa=g.create(),Po=(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot)=>{const dt=D.transform,pe={u_is_size_zoom_constant:+("constant"===x||"source"===x),u_is_size_feature_constant:+("constant"===x||"camera"===x),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:dt.cameraToCenterDistance,u_rotate_symbol:+y,u_aspect_ratio:dt.width/dt.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:N,u_coord_matrix:F,u_is_text:+$,u_pitch_with_map:+S,u_texsize:W,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Aa,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Aa,u_up_vector:[0,-1,0]};return"globe"===ot.name&&(pe.u_tile_id=[H.canonical.x,H.canonical.y,1<<H.canonical.z],pe.u_zoom_transition=de,pe.u_inv_rot_matrix=Xe,pe.u_merc_center=ze,pe.u_camera_forward=dt._camera.forward(),pe.u_ecef_origin=g.globeECEFOrigin(dt.globeMatrix,H.toUnwrapped()),pe.u_tile_matrix=Float32Array.from(dt.globeMatrix),pe.u_up_vector=it),pe},Na=(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot,dt)=>g.extend(Po(x,d,y,S,D,k,N,F,$,W,de,ze,Xe,it,ot,dt),{u_gamma_scale:S?D.transform.cameraToCenterDistance*Math.cos(D.terrain?0:D.transform._pitch):1,u_device_pixel_ratio:g.exported.devicePixelRatio,u_is_halo:+H}),kf=(x,d,y,S,D,k,N,F,$,W,H,de,ze,Xe,it,ot)=>g.extend(Na(x,d,y,S,D,k,N,F,!0,$,!0,H,de,ze,Xe,it,ot),{u_texsize_icon:W,u_texture_icon:1}),Hu=(x,d,y)=>({u_matrix:x,u_opacity:d,u_color:y}),mh=(x,d,y,S,D)=>g.extend(function(k,N,F){const $=N.imageManager.getPattern(k.toString()),{width:W,height:H}=N.imageManager.getPixelSize(),de=Math.pow(2,F.tileID.overscaledZ),ze=F.tileSize*Math.pow(2,N.transform.tileZoom)/de,Xe=ze*(F.tileID.canonical.x+F.tileID.wrap*de),it=ze*F.tileID.canonical.y;return{u_image:0,u_pattern_tl:$.tl,u_pattern_br:$.br,u_texsize:[W,H],u_pattern_size:$.displaySize,u_tile_units_to_pixels:1/Ke(F,1,N.transform.tileZoom),u_pixel_coord_upper:[Xe>>16,it>>16],u_pixel_coord_lower:[65535&Xe,65535&it]}}(S,y,D),{u_matrix:x,u_opacity:d}),hu={fillExtrusion:x=>({u_matrix:new g.UniformMatrix4f(x),u_lightpos:new g.Uniform3f(x),u_lightintensity:new g.Uniform1f(x),u_lightcolor:new g.Uniform3f(x),u_vertical_gradient:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x),u_edge_radius:new g.Uniform1f(x),u_ao:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_up_dir:new g.Uniform3f(x),u_height_lift:new g.Uniform1f(x)}),fillExtrusionPattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_lightpos:new g.Uniform3f(x),u_lightintensity:new g.Uniform1f(x),u_lightcolor:new g.Uniform3f(x),u_vertical_gradient:new g.Uniform1f(x),u_height_factor:new g.Uniform1f(x),u_edge_radius:new g.Uniform1f(x),u_ao:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_up_dir:new g.Uniform3f(x),u_height_lift:new g.Uniform1f(x),u_image:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x)}),fill:x=>({u_matrix:new g.UniformMatrix4f(x)}),fillPattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_image:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x)}),fillOutline:x=>({u_matrix:new g.UniformMatrix4f(x),u_world:new g.Uniform2f(x)}),fillOutlinePattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_world:new g.Uniform2f(x),u_image:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x)}),circle:x=>({u_camera_to_center_distance:new g.Uniform1f(x),u_extrude_scale:new g.UniformMatrix2f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_up_dir:new g.Uniform3f(x)}),collisionBox:x=>({u_matrix:new g.UniformMatrix4f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_extrude_scale:new g.Uniform2f(x)}),collisionCircle:x=>({u_matrix:new g.UniformMatrix4f(x),u_inv_matrix:new g.UniformMatrix4f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_viewport_size:new g.Uniform2f(x)}),debug:x=>({u_color:new g.UniformColor(x),u_matrix:new g.UniformMatrix4f(x),u_overlay:new g.Uniform1i(x),u_overlay_scale:new g.Uniform1f(x)}),clippingMask:x=>({u_matrix:new g.UniformMatrix4f(x)}),heatmap:x=>({u_extrude_scale:new g.Uniform1f(x),u_intensity:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_up_dir:new g.Uniform3f(x)}),heatmapTexture:x=>({u_image:new g.Uniform1i(x),u_color_ramp:new g.Uniform1i(x),u_opacity:new g.Uniform1f(x)}),hillshade:x=>({u_matrix:new g.UniformMatrix4f(x),u_image:new g.Uniform1i(x),u_latrange:new g.Uniform2f(x),u_light:new g.Uniform2f(x),u_shadow:new g.UniformColor(x),u_highlight:new g.UniformColor(x),u_accent:new g.UniformColor(x)}),hillshadePrepare:x=>({u_matrix:new g.UniformMatrix4f(x),u_image:new g.Uniform1i(x),u_dimension:new g.Uniform2f(x),u_zoom:new g.Uniform1f(x),u_unpack:new g.Uniform4f(x)}),line:x=>({u_matrix:new g.UniformMatrix4f(x),u_pixels_to_tile_units:new g.UniformMatrix2f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_units_to_pixels:new g.Uniform2f(x),u_dash_image:new g.Uniform1i(x),u_gradient_image:new g.Uniform1i(x),u_image_height:new g.Uniform1f(x),u_texsize:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x),u_alpha_discard_threshold:new g.Uniform1f(x),u_trim_offset:new g.Uniform2f(x)}),linePattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_texsize:new g.Uniform2f(x),u_pixels_to_tile_units:new g.UniformMatrix2f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_image:new g.Uniform1i(x),u_units_to_pixels:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x),u_alpha_discard_threshold:new g.Uniform1f(x)}),raster:x=>({u_matrix:new g.UniformMatrix4f(x),u_tl_parent:new g.Uniform2f(x),u_scale_parent:new g.Uniform1f(x),u_fade_t:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x),u_image0:new g.Uniform1i(x),u_image1:new g.Uniform1i(x),u_brightness_low:new g.Uniform1f(x),u_brightness_high:new g.Uniform1f(x),u_saturation_factor:new g.Uniform1f(x),u_contrast_factor:new g.Uniform1f(x),u_spin_weights:new g.Uniform3f(x),u_perspective_transform:new g.Uniform2f(x)}),symbolIcon:x=>({u_is_size_zoom_constant:new g.Uniform1i(x),u_is_size_feature_constant:new g.Uniform1i(x),u_size_t:new g.Uniform1f(x),u_size:new g.Uniform1f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_rotate_symbol:new g.Uniform1i(x),u_aspect_ratio:new g.Uniform1f(x),u_fade_change:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_label_plane_matrix:new g.UniformMatrix4f(x),u_coord_matrix:new g.UniformMatrix4f(x),u_is_text:new g.Uniform1i(x),u_pitch_with_map:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_camera_forward:new g.Uniform3f(x),u_tile_matrix:new g.UniformMatrix4f(x),u_up_vector:new g.Uniform3f(x),u_ecef_origin:new g.Uniform3f(x),u_texture:new g.Uniform1i(x)}),symbolSDF:x=>({u_is_size_zoom_constant:new g.Uniform1i(x),u_is_size_feature_constant:new g.Uniform1i(x),u_size_t:new g.Uniform1f(x),u_size:new g.Uniform1f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_rotate_symbol:new g.Uniform1i(x),u_aspect_ratio:new g.Uniform1f(x),u_fade_change:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_label_plane_matrix:new g.UniformMatrix4f(x),u_coord_matrix:new g.UniformMatrix4f(x),u_is_text:new g.Uniform1i(x),u_pitch_with_map:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_texture:new g.Uniform1i(x),u_gamma_scale:new g.Uniform1f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_tile_id:new g.Uniform3f(x),u_zoom_transition:new g.Uniform1f(x),u_inv_rot_matrix:new g.UniformMatrix4f(x),u_merc_center:new g.Uniform2f(x),u_camera_forward:new g.Uniform3f(x),u_tile_matrix:new g.UniformMatrix4f(x),u_up_vector:new g.Uniform3f(x),u_ecef_origin:new g.Uniform3f(x),u_is_halo:new g.Uniform1i(x)}),symbolTextAndIcon:x=>({u_is_size_zoom_constant:new g.Uniform1i(x),u_is_size_feature_constant:new g.Uniform1i(x),u_size_t:new g.Uniform1f(x),u_size:new g.Uniform1f(x),u_camera_to_center_distance:new g.Uniform1f(x),u_rotate_symbol:new g.Uniform1i(x),u_aspect_ratio:new g.Uniform1f(x),u_fade_change:new g.Uniform1f(x),u_matrix:new g.UniformMatrix4f(x),u_label_plane_matrix:new g.UniformMatrix4f(x),u_coord_matrix:new g.UniformMatrix4f(x),u_is_text:new g.Uniform1i(x),u_pitch_with_map:new g.Uniform1i(x),u_texsize:new g.Uniform2f(x),u_texsize_icon:new g.Uniform2f(x),u_texture:new g.Uniform1i(x),u_texture_icon:new g.Uniform1i(x),u_gamma_scale:new g.Uniform1f(x),u_device_pixel_ratio:new g.Uniform1f(x),u_is_halo:new g.Uniform1i(x)}),background:x=>({u_matrix:new g.UniformMatrix4f(x),u_opacity:new g.Uniform1f(x),u_color:new g.UniformColor(x)}),backgroundPattern:x=>({u_matrix:new g.UniformMatrix4f(x),u_opacity:new g.Uniform1f(x),u_image:new g.Uniform1i(x),u_pattern_tl:new g.Uniform2f(x),u_pattern_br:new g.Uniform2f(x),u_texsize:new g.Uniform2f(x),u_pattern_size:new g.Uniform2f(x),u_pixel_coord_upper:new g.Uniform2f(x),u_pixel_coord_lower:new g.Uniform2f(x),u_tile_units_to_pixels:new g.Uniform1f(x)}),terrainRaster:Es,terrainDepth:Es,skybox:x=>({u_matrix:new g.UniformMatrix4f(x),u_sun_direction:new g.Uniform3f(x),u_cubemap:new g.Uniform1i(x),u_opacity:new g.Uniform1f(x),u_temporal_offset:new g.Uniform1f(x)}),skyboxGradient:x=>({u_matrix:new g.UniformMatrix4f(x),u_color_ramp:new g.Uniform1i(x),u_center_direction:new g.Uniform3f(x),u_radius:new g.Uniform1f(x),u_opacity:new g.Uniform1f(x),u_temporal_offset:new g.Uniform1f(x)}),skyboxCapture:x=>({u_matrix_3f:new g.UniformMatrix3f(x),u_sun_direction:new g.Uniform3f(x),u_sun_intensity:new g.Uniform1f(x),u_color_tint_r:new g.Uniform4f(x),u_color_tint_m:new g.Uniform4f(x),u_luminance:new g.Uniform1f(x)}),globeRaster:x=>({u_proj_matrix:new g.UniformMatrix4f(x),u_globe_matrix:new g.UniformMatrix4f(x),u_normalize_matrix:new g.UniformMatrix4f(x),u_merc_matrix:new g.UniformMatrix4f(x),u_zoom_transition:new g.Uniform1f(x),u_merc_center:new g.Uniform2f(x),u_image0:new g.Uniform1i(x),u_grid_matrix:new g.UniformMatrix3f(x),u_skirt_height:new g.Uniform1f(x),u_frustum_tl:new g.Uniform3f(x),u_frustum_tr:new g.Uniform3f(x),u_frustum_br:new g.Uniform3f(x),u_frustum_bl:new g.Uniform3f(x),u_globe_pos:new g.Uniform3f(x),u_globe_radius:new g.Uniform1f(x),u_viewport:new g.Uniform2f(x)}),globeAtmosphere:x=>({u_frustum_tl:new g.Uniform3f(x),u_frustum_tr:new g.Uniform3f(x),u_frustum_br:new g.Uniform3f(x),u_frustum_bl:new g.Uniform3f(x),u_horizon:new g.Uniform1f(x),u_transition:new g.Uniform1f(x),u_fadeout_range:new g.Uniform1f(x),u_color:new g.Uniform4f(x),u_high_color:new g.Uniform4f(x),u_space_color:new g.Uniform4f(x),u_star_intensity:new g.Uniform1f(x),u_star_density:new g.Uniform1f(x),u_star_size:new g.Uniform1f(x),u_temporal_offset:new g.Uniform1f(x),u_horizon_angle:new g.Uniform1f(x),u_rotation_matrix:new g.UniformMatrix4f(x)})};let hd;function fu(x,d,y,S,D,k,N){const F=x.context,$=F.gl,W=x.transform,H=x.useProgram("collisionBox"),de=[];let ze=0,Xe=0;for(let Et=0;Et<S.length;Et++){const jt=S[Et],Gt=d.getTile(jt),Ut=Gt.getBucket(y);if(!Ut)continue;const tn=kt(jt,Ut,W);let Kt=tn;0===D[0]&&0===D[1]||(Kt=x.translatePosMatrix(tn,Gt,D,k));const wn=N?Ut.textCollisionBox:Ut.iconCollisionBox,hi=Ut.collisionCircleArray;if(hi.length>0){const mn=g.create(),Hn=Kt;g.mul(mn,Ut.placementInvProjMatrix,W.glCoordMatrix),g.mul(mn,mn,Ut.placementViewportMatrix),de.push({circleArray:hi,circleOffset:Xe,transform:Hn,invTransform:mn,projection:Ut.getProjection()}),ze+=hi.length/4,Xe=ze}wn&&(x.terrain&&x.terrain.setupElevationDraw(Gt,H),H.draw(F,$.LINES,g.DepthMode.disabled,g.StencilMode.disabled,x.colorModeForRenderPass(),g.CullFaceMode.disabled,Ru(Kt,W,Gt,Ut.getProjection()),y.id,wn.layoutVertexBuffer,wn.indexBuffer,wn.segments,null,W.zoom,null,[wn.collisionVertexBuffer,wn.collisionVertexBufferExt]))}if(!N||!de.length)return;const it=x.useProgram("collisionCircle"),ot=new g.StructArrayLayout2f1f2i16;ot.resize(4*ze),ot._trim();let dt=0;for(const Et of de)for(let jt=0;jt<Et.circleArray.length/4;jt++){const Gt=4*jt,Ut=Et.circleArray[Gt+0],tn=Et.circleArray[Gt+1],Kt=Et.circleArray[Gt+2],wn=Et.circleArray[Gt+3];ot.emplace(dt++,Ut,tn,Kt,wn,0),ot.emplace(dt++,Ut,tn,Kt,wn,1),ot.emplace(dt++,Ut,tn,Kt,wn,2),ot.emplace(dt++,Ut,tn,Kt,wn,3)}(!hd||hd.length<2*ze)&&(hd=function(Et){const jt=2*Et,Gt=new g.StructArrayLayout3ui6;Gt.resize(jt),Gt._trim();for(let Ut=0;Ut<jt;Ut++){const tn=6*Ut;Gt.uint16[tn+0]=4*Ut+0,Gt.uint16[tn+1]=4*Ut+1,Gt.uint16[tn+2]=4*Ut+2,Gt.uint16[tn+3]=4*Ut+2,Gt.uint16[tn+4]=4*Ut+3,Gt.uint16[tn+5]=4*Ut+0}return Gt}(ze));const pe=F.createIndexBuffer(hd,!0),Ye=F.createVertexBuffer(ot,g.collisionCircleLayout.members,!0);for(const Et of de){const jt={u_matrix:Et.transform,u_inv_matrix:Et.invTransform,u_camera_to_center_distance:(bt=W).getCameraToCenterDistance(Et.projection),u_viewport_size:[bt.width,bt.height]};it.draw(F,$.TRIANGLES,g.DepthMode.disabled,g.StencilMode.disabled,x.colorModeForRenderPass(),g.CullFaceMode.disabled,jt,y.id,Ye,pe,g.SegmentVector.simpleSegment(0,2*Et.circleOffset,Et.circleArray.length,Et.circleArray.length/2),null,W.zoom)}var bt;Ye.destroy(),pe.destroy()}const Hc=g.create();function Ma({width:x,height:d,anchor:y,textOffset:S,textScale:D},k){const{horizontalAlign:N,verticalAlign:F}=g.getAnchorAlignment(y),$=-(N-.5)*x,W=-(F-.5)*d,H=g.evaluateVariableOffset(y,S);return new g.Point(($/D+H[0])*k,(W/D+H[1])*k)}function gh(x,d,y,S,D,k,N,F,$,W,H){const de=x.text.placedSymbolArray,ze=x.text.dynamicLayoutVertexArray,Xe=x.icon.dynamicLayoutVertexArray,it={},ot=x.getProjection(),dt=rn(F,ot,k),pe=k.elevation,Ye=ot.upVectorScale(F.canonical,k.center.lat,k.worldSize).metersToTile;ze.clear();for(let bt=0;bt<de.length;bt++){const Et=de.get(bt),{tileAnchorX:jt,tileAnchorY:Gt,numGlyphs:Ut}=Et,tn=Et.hidden||!Et.crossTileID||x.allowVerticalPlacement&&!Et.placedOrientation?null:S[Et.crossTileID];if(tn){let Kt=0,wn=0,hi=0;if(pe){const fi=pe?pe.getAtTileOffset(F,jt,Gt):0,[vr,Ur,qi]=ot.upVector(F.canonical,jt,Gt);Kt=fi*vr*Ye,wn=fi*Ur*Ye,hi=fi*qi*Ye}let[mn,Hn,Dn,li]=ws(Et.projectedAnchorX+Kt,Et.projectedAnchorY+wn,Et.projectedAnchorZ+hi,y?dt:N);const bn=ko(k.getCameraToCenterDistance(ot),li);let jn=D.evaluateSizeForFeature(x.textSizeData,W,Et)*bn/g.ONE_EM;y&&(jn*=x.tilePixelRatio/$);const di=Ma(tn,jn);y?(({x:mn,y:Hn,z:Dn}=ot.projectTilePoint(jt+di.x,Gt+di.y,F.canonical)),[mn,Hn,Dn]=ws(mn+Kt,Hn+wn,Dn+hi,N)):(d&&di._rotate(-k.angle),mn+=di.x,Hn+=di.y,Dn=0);const ni=x.allowVerticalPlacement&&Et.placedOrientation===g.WritingMode.vertical?Math.PI/2:0;for(let fi=0;fi<Ut;fi++)g.addDynamicAttributes(ze,mn,Hn,Dn,ni);H&&Et.associatedIconIndex>=0&&(it[Et.associatedIconIndex]={x:mn,y:Hn,z:Dn,angle:ni})}else ge(Ut,ze)}if(H){Xe.clear();const bt=x.icon.placedSymbolArray;for(let Et=0;Et<bt.length;Et++){const jt=bt.get(Et),{numGlyphs:Gt}=jt,Ut=it[Et];if(jt.hidden||!Ut)ge(Gt,Xe);else{const{x:tn,y:Kt,z:wn,angle:hi}=Ut;for(let mn=0;mn<Gt;mn++)g.addDynamicAttributes(Xe,tn,Kt,wn,hi)}}x.icon.dynamicLayoutVertexBuffer.updateData(Xe)}x.text.dynamicLayoutVertexBuffer.updateData(ze)}function Ja(x,d,y){return y.iconsInText&&d?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function ec(x,d,y,S,D,k,N,F,$,W,H,de){const ze=x.context,Xe=ze.gl,it=x.transform,ot="map"===F,dt="map"===$,pe=ot&&"point"!==y.layout.get("symbol-placement"),Ye=ot&&!dt&&!pe,bt=void 0!==y.layout.get("symbol-sort-key").constantOr(1);let Et=!1;const jt=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),Gt=[g.mercatorXfromLng(it.center.lng),g.mercatorYfromLat(it.center.lat)],Ut=y.layout.get("text-variable-anchor"),tn="globe"===it.projection.name,Kt=[],wn=[0,-1,0];let hi=wn;!tn&&!it.mercatorFromTransition||ot||(hi=function(mn){const Hn=mn._camera.getWorldToCamera(mn.worldSize,1),Dn=g.multiply([],Hn,mn.globeMatrix);g.invert(Dn,Dn);const li=[0,0,0],bn=[0,1,0,0];return g.transformMat4$1(bn,bn,Dn),li[0]=bn[0],li[1]=bn[1],li[2]=bn[2],g.normalize(li,li),li}(it));for(const mn of S){const Hn=d.getTile(mn),Dn=Hn.getBucket(y);if(!Dn||"mercator"===Dn.projection.name&&tn)continue;const li=D?Dn.text:Dn.icon;if(!li||Dn.fullyClipped||!li.segments.get().length)continue;const bn=li.programConfigurations.get(y.id),jn=D||Dn.sdfIcons,di=D?Dn.textSizeData:Dn.iconSizeData,ni=dt||0!==it.pitch,fi=g.evaluateSizeForZoom(di,it.zoom);let vr,Ur,qi,Ki,uo=[0,0],ho=null;if(D)Ur=Hn.glyphAtlasTexture,qi=Xe.LINEAR,vr=Hn.glyphAtlasTexture.size,Dn.iconsInText&&(uo=Hn.imageAtlasTexture.size,ho=Hn.imageAtlasTexture,Ki=ni||x.options.rotating||x.options.zooming||"composite"===di.kind||"camera"===di.kind?Xe.LINEAR:Xe.NEAREST);else{const bh=1!==y.layout.get("icon-size").constantOr(0)||Dn.iconsNeedLinear;Ur=Hn.imageAtlasTexture,qi=jn||x.options.rotating||x.options.zooming||bh||ni?Xe.LINEAR:Xe.NEAREST,vr=Hn.imageAtlasTexture.size}const dr="globe"===Dn.projection.name,_s=dr?hi:wn,zs=dr?g.globeToMercatorTransition(it.zoom):0,Zs=rn(mn,Dn.getProjection(),it),ks=it.calculatePixelsToTileUnitsMatrix(Hn),Rc=Mn(Zs,Hn.tileID.canonical,dt,ot,it,Dn.getProjection(),ks),va=x.terrain&&dt&&pe?g.invert(g.create(),Rc):Hc,Fu=xs(Zs,Hn.tileID.canonical,dt,ot,it,Dn.getProjection(),ks),_d=Ut&&Dn.hasTextData(),jr="none"!==y.layout.get("icon-text-fit")&&_d&&Dn.hasIconData();if(pe){const bh=it.elevation,Yc=bh?bh.getAtTileOffsetFunc(mn,it.center.lat,it.worldSize,Dn.getProjection()):null,Wh=yl(Zs,Hn.tileID.canonical,dt,ot,it,Dn.getProjection(),ks);We(Dn,Zs,x,D,Wh,Fu,dt,W,Yc,mn)}const Ps=pe||D&&Ut||jr,Ao=x.translatePosMatrix(Zs,Hn,k,N),vs=Ps?Hc:Rc,Xc=x.translatePosMatrix(Fu,Hn,k,N,!0),la=Dn.getProjection().createInversionMatrix(it,mn.canonical),jl=[];x.terrainRenderModeElevated()&&dt&&jl.push("PITCH_WITH_MAP_TERRAIN"),dr&&jl.push("PROJECTION_GLOBE_VIEW"),Ps&&jl.push("PROJECTED_POS_ON_VIEWPORT");const Oc=jn&&0!==y.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1);let Lf;Lf=jn?Dn.iconsInText?kf(di.kind,fi,Ye,dt,x,Ao,vs,Xc,vr,uo,mn,zs,Gt,la,_s,Dn.getProjection()):Na(di.kind,fi,Ye,dt,x,Ao,vs,Xc,D,vr,!0,mn,zs,Gt,la,_s,Dn.getProjection()):Po(di.kind,fi,Ye,dt,x,Ao,vs,Xc,D,vr,mn,zs,Gt,la,_s,Dn.getProjection());const fm={program:x.useProgram(Ja(jn,D,Dn),bn,jl),buffers:li,uniformValues:Lf,atlasTexture:Ur,atlasTextureIcon:ho,atlasInterpolation:qi,atlasInterpolationIcon:Ki,isSDF:jn,hasHalo:Oc,tile:Hn,labelPlaneMatrixInv:va};if(bt&&Dn.canOverlap){Et=!0;const bh=li.segments.get();for(const Yc of bh)Kt.push({segments:new g.SegmentVector([Yc]),sortKey:Yc.sortKey,state:fm})}else Kt.push({segments:li.segments,sortKey:0,state:fm})}Et&&Kt.sort((mn,Hn)=>mn.sortKey-Hn.sortKey);for(const mn of Kt){const Hn=mn.state;if(x.terrain&&x.terrain.setupElevationDraw(Hn.tile,Hn.program,{useDepthForOcclusion:!tn,labelPlaneMatrixInv:Hn.labelPlaneMatrixInv}),ze.activeTexture.set(Xe.TEXTURE0),Hn.atlasTexture.bind(Hn.atlasInterpolation,Xe.CLAMP_TO_EDGE),Hn.atlasTextureIcon&&(ze.activeTexture.set(Xe.TEXTURE1),Hn.atlasTextureIcon&&Hn.atlasTextureIcon.bind(Hn.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),Hn.isSDF){const Dn=Hn.uniformValues;Hn.hasHalo&&(Dn.u_is_halo=1,qc(Hn.buffers,mn.segments,y,x,Hn.program,jt,H,de,Dn)),Dn.u_is_halo=0}qc(Hn.buffers,mn.segments,y,x,Hn.program,jt,H,de,Hn.uniformValues)}}function qc(x,d,y,S,D,k,N,F,$){const W=S.context,H=[x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer,x.globeExtVertexBuffer];D.draw(W,W.gl.TRIANGLES,k,N,F,g.CullFaceMode.disabled,$,y.id,x.layoutVertexBuffer,x.indexBuffer,d,y.paint,S.transform.zoom,x.programConfigurations.get(y.id),H)}function Pf(x,d,y,S,D,k,N){const F=x.context.gl,$=y.paint.get("fill-pattern"),W=$&&$.constantOr(1);let H,de,ze,Xe,it;N?(de=W&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=F.LINES):(de=W?"fillPattern":"fill",H=F.TRIANGLES);for(const ot of S){const dt=d.getTile(ot);if(W&&!dt.patternsLoaded())continue;const pe=dt.getBucket(y);if(!pe)continue;x.prepareDrawTile();const Ye=pe.programConfigurations.get(y.id),bt=x.useProgram(de,Ye);W&&(x.context.activeTexture.set(F.TEXTURE0),dt.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Ye.updatePaintBuffers());const Et=$.constantOr(null);if(Et&&dt.imageAtlas){const Gt=dt.imageAtlas.patternPositions[Et.toString()];Gt&&Ye.setConstantPatternPositions(Gt)}const jt=x.translatePosMatrix(ot.projMatrix,dt,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if(N){Xe=pe.indexBuffer2,it=pe.segments2;const Gt=x.terrain&&x.terrain.renderingToTexture?x.terrain.drapeBufferSize:[F.drawingBufferWidth,F.drawingBufferHeight];ze="fillOutlinePattern"===de&&W?B_(jt,x,dt,Gt):Da(jt,Gt)}else Xe=pe.indexBuffer,it=pe.segments,ze=W?Al(jt,x,dt):$l(jt);x.prepareDrawProgram(x.context,bt,ot.toUnwrapped()),bt.draw(x.context,H,D,x.stencilModeForClipping(ot),k,g.CullFaceMode.disabled,ze,y.id,pe.layoutVertexBuffer,Xe,it,y.paint,x.transform.zoom,Ye)}}function qu(x,d,y,S,D,k,N){const F=x.context,$=F.gl,W=x.transform,H=y.paint.get("fill-extrusion-pattern"),de=H.constantOr(1),ze=y.paint.get("fill-extrusion-opacity"),Xe=[y.paint.get("fill-extrusion-ambient-occlusion-intensity"),y.paint.get("fill-extrusion-ambient-occlusion-radius")],it=y.layout.get("fill-extrusion-edge-radius"),ot=it>0&&!y.paint.get("fill-extrusion-rounded-roof"),dt=ot?0:it,pe="globe"===W.projection.name?g.fillExtrusionHeightLift():0,Ye="globe"===W.projection.name,bt=Ye?g.globeToMercatorTransition(W.zoom):0,Et=[g.mercatorXfromLng(W.center.lng),g.mercatorYfromLat(W.center.lat)],jt=[];Ye&&jt.push("PROJECTION_GLOBE_VIEW"),Xe[0]>0&&jt.push("FAUX_AO"),ot&&jt.push("ZERO_ROOF_RADIUS");for(const Gt of S){const Ut=d.getTile(Gt),tn=Ut.getBucket(y);if(!tn||tn.projection.name!==W.projection.name)continue;const Kt=tn.programConfigurations.get(y.id),wn=x.useProgram(de?"fillExtrusionPattern":"fillExtrusion",Kt,jt);if(x.terrain){const jn=x.terrain;if(x.style.terrainSetForDrapingOnly())jn.setupElevationDraw(Ut,wn,{useMeterToDem:!0});else{if(!tn.enableTerrain)continue;if(jn.setupElevationDraw(Ut,wn,{useMeterToDem:!0}),Ou(F,d,Gt,tn,y,jn),!tn.centroidVertexBuffer){const di=wn.attributes.a_centroid_pos;void 0!==di&&$.vertexAttrib2f(di,0,0)}}}de&&(x.context.activeTexture.set($.TEXTURE0),Ut.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Kt.updatePaintBuffers());const hi=H.constantOr(null);if(hi&&Ut.imageAtlas){const jn=Ut.imageAtlas.patternPositions[hi.toString()];jn&&Kt.setConstantPatternPositions(jn)}const mn=x.translatePosMatrix(Gt.projMatrix,Ut,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),Hn=W.projection.createInversionMatrix(W,Gt.canonical),Dn=y.paint.get("fill-extrusion-vertical-gradient"),li=de?ph(mn,x,Dn,ze,Xe,dt,Gt,Ut,pe,bt,Et,Hn):Kl(mn,x,Dn,ze,Xe,dt,Gt,pe,bt,Et,Hn);x.prepareDrawProgram(F,wn,Gt.toUnwrapped());const bn=[];x.terrain&&bn.push(tn.centroidVertexBuffer),Ye&&bn.push(tn.layoutVertexExtBuffer),wn.draw(F,F.gl.TRIANGLES,D,k,N,g.CullFaceMode.backCCW,li,y.id,tn.layoutVertexBuffer,tn.indexBuffer,tn.segments,y.paint,x.transform.zoom,Kt,bn)}}function Ou(x,d,y,S,D,k){const N=[pe=>{let Ye=pe.canonical.x-1,bt=pe.wrap;return Ye<0&&(Ye=(1<<pe.canonical.z)-1,bt--),new g.OverscaledTileID(pe.overscaledZ,bt,pe.canonical.z,Ye,pe.canonical.y)},pe=>{let Ye=pe.canonical.x+1,bt=pe.wrap;return Ye===1<<pe.canonical.z&&(Ye=0,bt++),new g.OverscaledTileID(pe.overscaledZ,bt,pe.canonical.z,Ye,pe.canonical.y)},pe=>new g.OverscaledTileID(pe.overscaledZ,pe.wrap,pe.canonical.z,pe.canonical.x,(0===pe.canonical.y?1<<pe.canonical.z:pe.canonical.y)-1),pe=>new g.OverscaledTileID(pe.overscaledZ,pe.wrap,pe.canonical.z,pe.canonical.x,pe.canonical.y===(1<<pe.canonical.z)-1?0:pe.canonical.y+1)],F=pe=>{const Ye=d.getSource().minzoom,bt=jt=>{const Gt=d.getTileByID(jt);if(Gt&&Gt.hasData())return Gt.getBucket(D)},Et=[0,-1,1];for(const jt of Et){if(pe.overscaledZ+jt<Ye)continue;const Gt=bt(pe.calculateScaledKey(pe.overscaledZ+jt));if(Gt)return Gt}},$=[0,0,0],W=(pe,Ye)=>($[0]=Math.min(pe.min.y,Ye.min.y),$[1]=Math.max(pe.max.y,Ye.max.y),$[2]=g.EXTENT-Ye.min.x>pe.max.x?Ye.min.x-g.EXTENT:pe.max.x,$),H=(pe,Ye)=>($[0]=Math.min(pe.min.x,Ye.min.x),$[1]=Math.max(pe.max.x,Ye.max.x),$[2]=g.EXTENT-Ye.min.y>pe.max.y?Ye.min.y-g.EXTENT:pe.max.y,$),de=[(pe,Ye)=>W(pe,Ye),(pe,Ye)=>W(Ye,pe),(pe,Ye)=>H(pe,Ye),(pe,Ye)=>H(Ye,pe)],ze=new g.Point(0,0);let Xe,it,ot;const dt=(pe,Ye,bt,Et,jt)=>{const Gt=[[Et?bt:pe,Et?pe:bt,0],[Et?bt:Ye,Et?Ye:bt,0]],Ut=jt<0?g.EXTENT+jt:jt,tn=[Et?Ut:(pe+Ye)/2,Et?(pe+Ye)/2:Ut,0];return 0===bt&&jt<0||0!==bt&&jt>0?k.getForTilePoints(ot,[tn],!0,it):Gt.push(tn),k.getForTilePoints(y,Gt,!0,Xe),Math.max(Gt[0][2],Gt[1][2],tn[2])/k.exaggeration()};for(let pe=0;pe<4;pe++){const Ye=(pe<2?1:5)-pe,bt=S.borders[pe];if(0===bt.length)continue;const Et=ot=N[pe](y),jt=F(Et);if(!(jt&&jt instanceof g.FillExtrusionBucket&&jt.enableTerrain)||S.borderDoneWithNeighborZ[pe]===jt.canonical.z&&jt.borderDoneWithNeighborZ[Ye]===S.canonical.z||(it=k.findDEMTileFor(Et),!it||!it.dem))continue;if(!Xe){const Kt=k.findDEMTileFor(y);if(!Kt||!Kt.dem)return;Xe=Kt}const Gt=jt.borders[Ye];let Ut=0;const tn=jt.borderDoneWithNeighborZ[Ye]!==S.canonical.z;if(S.canonical.z===jt.canonical.z){for(let Kt=0;Kt<bt.length;Kt++){const wn=S.featuresOnBorder[bt[Kt]],hi=wn.borders[pe];let mn;for(;Ut<Gt.length&&(mn=jt.featuresOnBorder[Gt[Ut]],!(mn.borders[Ye][1]>hi[0]+3));)tn&&jt.encodeCentroid(void 0,mn,!1),Ut++;if(mn&&Ut<Gt.length){const Hn=Ut;let Dn=0;for(;!(mn.borders[Ye][0]>hi[1]-3)&&(Dn++,++Ut!==Gt.length);)mn=jt.featuresOnBorder[Gt[Ut]];if(mn=jt.featuresOnBorder[Gt[Hn]],wn.intersectsCount()>1||mn.intersectsCount()>1||1!==Dn){1!==Dn&&(Ut=Hn),S.encodeCentroid(void 0,wn,!1),tn&&jt.encodeCentroid(void 0,mn,!1);continue}const li=de[pe](wn,mn),bn=pe%2?g.EXTENT-1:0;ze.x=dt(li[0],Math.min(g.EXTENT-1,li[1]),bn,pe<2,li[2]),ze.y=0,S.encodeCentroid(ze,wn,!1),tn&&jt.encodeCentroid(ze,mn,!1)}else S.encodeCentroid(void 0,wn,!1)}S.borderDoneWithNeighborZ[pe]=jt.canonical.z,S.needsCentroidUpdate=!0,tn&&(jt.borderDoneWithNeighborZ[Ye]=S.canonical.z,jt.needsCentroidUpdate=!0)}else{for(const Kt of bt)S.encodeCentroid(void 0,S.featuresOnBorder[Kt],!1);if(tn){for(const Kt of Gt)jt.encodeCentroid(void 0,jt.featuresOnBorder[Kt],!1);jt.borderDoneWithNeighborZ[Ye]=S.canonical.z,jt.needsCentroidUpdate=!0}S.borderDoneWithNeighborZ[pe]=jt.canonical.z,S.needsCentroidUpdate=!0}}(S.needsCentroidUpdate||!S.centroidVertexBuffer&&0!==S.centroidVertexArray.length)&&S.uploadCentroid(x)}const hc=new g.Color(1,0,0,1),ul=new g.Color(0,1,0,1),Fa=new g.Color(0,0,1,1),Ml=new g.Color(1,0,1,1),hm=new g.Color(0,1,1,1);function fd(x,d,y){const S=x.context,D=x.transform,k=S.gl,N="globe"===D.projection.name,F=N?["PROJECTION_GLOBE_VIEW"]:null;let $=y.projMatrix;if(N&&g.globeToMercatorTransition(D.zoom)>0){const wn=g.transitionTileAABBinECEF(y.canonical,D),hi=g.globeDenormalizeECEF(wn);$=g.multiply(new Float32Array(16),D.globeMatrix,hi),g.multiply($,D.projMatrix,$)}const W=x.useProgram("debug",null,F),H=d.getTileByID(y.key);x.terrain&&x.terrain.setupElevationDraw(H,W);const de=g.DepthMode.disabled,ze=g.StencilMode.disabled,Xe=x.colorModeForRenderPass();S.activeTexture.set(k.TEXTURE0),x.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),N?H._makeGlobeTileDebugBuffers(x.context,D):H._makeDebugTileBoundsBuffers(x.context,D.projection);const ot=H._tileDebugBuffer||x.debugBuffer,dt=H._tileDebugIndexBuffer||x.debugIndexBuffer,pe=H._tileDebugSegments||x.debugSegments;W.draw(S,k.LINE_STRIP,de,ze,Xe,g.CullFaceMode.disabled,ti($,g.Color.red),"$debug",ot,dt,pe,null,null,null,[H._globeTileDebugBorderBuffer]);const Ye=H.latestRawTileData,bt=Math.floor((Ye&&Ye.byteLength||0)/1024),Et=d.getTile(y).tileSize,jt=512/Math.min(Et,512)*(y.overscaledZ/D.zoom)*.5;let Gt=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(Gt+=` => ${y.overscaledZ}`),Gt+=` ${bt}kb`,function(wn,hi){wn.initDebugOverlayCanvas();const mn=wn.debugOverlayCanvas,Hn=wn.context.gl,Dn=wn.debugOverlayCanvas.getContext("2d");Dn.clearRect(0,0,mn.width,mn.height),Dn.shadowColor="white",Dn.shadowBlur=2,Dn.lineWidth=1.5,Dn.strokeStyle="white",Dn.textBaseline="top",Dn.font="bold 36px Open Sans, sans-serif",Dn.fillText(hi,5,5),Dn.strokeText(hi,5,5),wn.debugOverlayTexture.update(mn),wn.debugOverlayTexture.bind(Hn.LINEAR,Hn.CLAMP_TO_EDGE)}(x,Gt);const Ut=H._tileDebugTextBuffer||x.debugBuffer,tn=H._tileDebugTextIndexBuffer||x.quadTriangleIndexBuffer,Kt=H._tileDebugTextSegments||x.debugSegments;W.draw(S,k.TRIANGLES,de,ze,g.ColorMode.alphaBlended,g.CullFaceMode.disabled,ti($,g.Color.transparent,jt),"$debug",Ut,tn,Kt,null,null,null,[H._globeTileDebugTextBuffer])}function zd(x,d,y,S){ka(x,0,d+y/2,x.transform.width,y,S)}function Ba(x,d,y,S){ka(x,d-y/2,0,y,x.transform.height,S)}function ka(x,d,y,S,D,k){const N=x.context,F=N.gl;F.enable(F.SCISSOR_TEST),F.scissor(d*g.exported.devicePixelRatio,y*g.exported.devicePixelRatio,S*g.exported.devicePixelRatio,D*g.exported.devicePixelRatio),N.clear({color:k}),F.disable(F.SCISSOR_TEST)}const Mc=g.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:fc}=Mc;function Lu(x,d,y,S){x.emplaceBack(d,y,S)}class Wu{constructor(d){this.vertexArray=new g.StructArrayLayout3f12,this.indices=new g.StructArrayLayout3ui6,Lu(this.vertexArray,-1,-1,1),Lu(this.vertexArray,1,-1,1),Lu(this.vertexArray,-1,1,1),Lu(this.vertexArray,1,1,1),Lu(this.vertexArray,-1,-1,-1),Lu(this.vertexArray,1,-1,-1),Lu(this.vertexArray,-1,1,-1),Lu(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=d.createVertexBuffer(this.vertexArray,fc),this.indexBuffer=d.createIndexBuffer(this.indices),this.segment=g.SegmentVector.simpleSegment(0,0,36,12)}}function qn(x,d,y,S,D,k){const N=x.gl,F=d.paint.get("sky-atmosphere-color"),$=d.paint.get("sky-atmosphere-halo-color"),W=d.paint.get("sky-atmosphere-sun-intensity"),H={u_matrix_3f:g.fromMat4(g.create$1(),S),u_sun_direction:D,u_sun_intensity:W,u_color_tint_r:[(it=F).r,it.g,it.b,it.a],u_color_tint_m:[(ot=$).r,ot.g,ot.b,ot.a],u_luminance:5e-5};var it,ot;N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_CUBE_MAP_POSITIVE_X+k,d.skyboxTexture,0),y.draw(x,N.TRIANGLES,g.DepthMode.disabled,g.StencilMode.disabled,g.ColorMode.unblended,g.CullFaceMode.frontCW,H,"skyboxCapture",d.skyboxGeometry.vertexBuffer,d.skyboxGeometry.indexBuffer,d.skyboxGeometry.segment)}const dl=g.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class fp{constructor(d){const y=new g.StructArrayLayout5f20;y.emplaceBack(-1,1,1,0,0),y.emplaceBack(1,1,1,1,0),y.emplaceBack(1,-1,1,1,1),y.emplaceBack(-1,-1,1,0,1);const S=new g.StructArrayLayout3ui6;S.emplaceBack(0,1,2),S.emplaceBack(2,3,0),this.vertexBuffer=d.createVertexBuffer(y,dl.members),this.indexBuffer=d.createIndexBuffer(S),this.segments=g.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ra={symbol:function(x,d,y,S,D){if("translucent"!==x.renderPass)return;const k=g.StencilMode.disabled,N=x.colorModeForRenderPass();y.layout.get("text-variable-anchor")&&function(F,$,W,H,de,ze,Xe){const it=$.transform,ot="map"===de,dt="map"===ze;for(const pe of F){const Ye=H.getTile(pe),bt=Ye.getBucket(W);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const Et=g.evaluateSizeForZoom(bt.textSizeData,it.zoom),jt=rn(pe,bt.getProjection(),it),Gt=it.calculatePixelsToTileUnitsMatrix(Ye),Ut=Mn(jt,Ye.tileID.canonical,dt,ot,it,bt.getProjection(),Gt),tn="none"!==W.layout.get("icon-text-fit")&&bt.hasIconData();if(Et){const Kt=Math.pow(2,it.zoom-Ye.tileID.overscaledZ);gh(bt,ot,dt,Xe,g.symbolSize,it,Ut,pe,Kt,Et,tn)}}}(S,x,y,d,y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),D),0!==y.paint.get("icon-opacity").constantOr(1)&&ec(x,d,y,S,!1,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),y.layout.get("icon-rotation-alignment"),y.layout.get("icon-pitch-alignment"),y.layout.get("icon-keep-upright"),k,N),0!==y.paint.get("text-opacity").constantOr(1)&&ec(x,d,y,S,!0,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),y.layout.get("text-keep-upright"),k,N),d.map.showCollisionBoxes&&(fu(x,d,y,S,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),!0),fu(x,d,y,S,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),!1))},circle:function(x,d,y,S){if("translucent"!==x.renderPass)return;const D=y.paint.get("circle-opacity"),k=y.paint.get("circle-stroke-width"),N=y.paint.get("circle-stroke-opacity"),F=void 0!==y.layout.get("circle-sort-key").constantOr(1);if(0===D.constantOr(1)&&(0===k.constantOr(1)||0===N.constantOr(1)))return;const $=x.context,W=$.gl,H=x.transform,de=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),ze=g.StencilMode.disabled,Xe=x.colorModeForRenderPass(),it="globe"===H.projection.name,ot=[g.mercatorXfromLng(H.center.lng),g.mercatorYfromLat(H.center.lat)],dt=[];for(let Ye=0;Ye<S.length;Ye++){const bt=S[Ye],Et=d.getTile(bt),jt=Et.getBucket(y);if(!jt||jt.projection.name!==H.projection.name)continue;const Gt=jt.programConfigurations.get(y.id),Ut=fn(y);it&&Ut.push("PROJECTION_GLOBE_VIEW");const tn=x.useProgram("circle",Gt,Ut),Kt=jt.layoutVertexBuffer,wn=jt.globeExtVertexBuffer,hi=jt.indexBuffer,mn=H.projection.createInversionMatrix(H,bt.canonical),Hn={programConfiguration:Gt,program:tn,layoutVertexBuffer:Kt,globeExtVertexBuffer:wn,indexBuffer:hi,uniformValues:Pu(x,bt,Et,mn,ot,y),tile:Et};if(F){const Dn=jt.segments.get();for(const li of Dn)dt.push({segments:new g.SegmentVector([li]),sortKey:li.sortKey,state:Hn})}else dt.push({segments:jt.segments,sortKey:0,state:Hn})}F&&dt.sort((Ye,bt)=>Ye.sortKey-bt.sortKey);const pe={useDepthForOcclusion:!it};for(const Ye of dt){const{programConfiguration:bt,program:Et,layoutVertexBuffer:jt,globeExtVertexBuffer:Gt,indexBuffer:Ut,uniformValues:tn,tile:Kt}=Ye.state,wn=Ye.segments;x.terrain&&x.terrain.setupElevationDraw(Kt,Et,pe),x.prepareDrawProgram($,Et,Kt.tileID.toUnwrapped()),Et.draw($,W.TRIANGLES,de,ze,Xe,g.CullFaceMode.disabled,tn,y.id,jt,Ut,wn,y.paint,H.zoom,bt,[Gt])}},heatmap:function(x,d,y,S){if(0!==y.paint.get("heatmap-opacity"))if("offscreen"===x.renderPass){const D=x.context,k=D.gl,N=g.StencilMode.disabled,F=new g.ColorMode([k.ONE,k.ONE],g.Color.transparent,[!0,!0,!0,!0]);(function(Xe,it,ot,dt){const pe=Xe.gl,Ye=it.width*dt,bt=it.height*dt;Xe.activeTexture.set(pe.TEXTURE1),Xe.viewport.set([0,0,Ye,bt]);let Et=ot.heatmapFbo;if(!Et||Et&&(Et.width!==Ye||Et.height!==bt)){Et&&Et.destroy();const jt=pe.createTexture();pe.bindTexture(pe.TEXTURE_2D,jt),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),Et=ot.heatmapFbo=Xe.createFramebuffer(Ye,bt,!1),function(Gt,Ut,tn,Kt,wn,hi){const mn=Gt.gl;mn.texImage2D(mn.TEXTURE_2D,0,Gt.isWebGL2&&Gt.extRenderToTextureHalfFloat?mn.RGBA16F:mn.RGBA,wn,hi,0,mn.RGBA,Gt.extRenderToTextureHalfFloat?Gt.isWebGL2?mn.HALF_FLOAT:Gt.extTextureHalfFloat.HALF_FLOAT_OES:mn.UNSIGNED_BYTE,null),Kt.colorAttachment.set(tn)}(Xe,0,jt,Et,Ye,bt)}else pe.bindTexture(pe.TEXTURE_2D,Et.colorAttachment.get()),Xe.bindFramebuffer.set(Et.framebuffer)})(D,x,y,"globe"===x.transform.projection.name?.5:.25),D.clear({color:g.Color.transparent});const $=x.transform,W="globe"===$.projection.name,H=W?["PROJECTION_GLOBE_VIEW"]:null,de=W?g.CullFaceMode.frontCCW:g.CullFaceMode.disabled,ze=[g.mercatorXfromLng($.center.lng),g.mercatorYfromLat($.center.lat)];for(let Xe=0;Xe<S.length;Xe++){const it=S[Xe];if(d.hasRenderableParent(it))continue;const ot=d.getTile(it),dt=ot.getBucket(y);if(!dt||dt.projection.name!==$.projection.name)continue;const pe=dt.programConfigurations.get(y.id),Ye=x.useProgram("heatmap",pe,H),{zoom:bt}=x.transform;x.terrain&&x.terrain.setupElevationDraw(ot,Ye),x.prepareDrawProgram(D,Ye,it.toUnwrapped());const Et=$.projection.createInversionMatrix($,it.canonical);Ye.draw(D,k.TRIANGLES,g.DepthMode.disabled,N,F,de,Dc(x,it,ot,Et,ze,bt,y.paint.get("heatmap-intensity")),y.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,y.paint,x.transform.zoom,pe,W?[dt.globeExtVertexBuffer]:null)}D.viewport.set([0,0,x.width,x.height])}else"translucent"===x.renderPass&&(x.context.setColorMode(x.colorModeForRenderPass()),function(D,k){const N=D.context,F=N.gl,$=k.heatmapFbo;if(!$)return;N.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,$.colorAttachment.get()),N.activeTexture.set(F.TEXTURE1);let W=k.colorRampTexture;W||(W=k.colorRampTexture=new g.Texture(N,k.colorRamp,F.RGBA)),W.bind(F.LINEAR,F.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(N,F.TRIANGLES,g.DepthMode.disabled,g.StencilMode.disabled,D.colorModeForRenderPass(),g.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:k.paint.get("heatmap-opacity")},k.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,k.paint,D.transform.zoom)}(x,y))},line:function(x,d,y,S){if("translucent"!==x.renderPass)return;const D=y.paint.get("line-opacity"),k=y.paint.get("line-width");if(0===D.constantOr(1)||0===k.constantOr(1))return;const N=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),F=x.colorModeForRenderPass(),$=x.terrain&&x.terrain.renderingToTexture?1:g.exported.devicePixelRatio,W=y.paint.get("line-dasharray"),H=W.constantOr(1),de=y.layout.get("line-cap"),ze=y.paint.get("line-pattern"),Xe=ze.constantOr(1),it=y.paint.get("line-gradient"),ot=Xe?"linePattern":"line",dt=x.context,pe=dt.gl,Ye=(Et=>{const jt=[];Jl(Et)&&jt.push("RENDER_LINE_DASH"),Et.paint.get("line-gradient")&&jt.push("RENDER_LINE_GRADIENT");const Gt=Et.paint.get("line-trim-offset");0===Gt[0]&&0===Gt[1]||jt.push("RENDER_LINE_TRIM_OFFSET");const Ut=Et.paint.get("line-pattern").constantOr(1),tn=1!==Et.paint.get("line-opacity").constantOr(1);return!Ut&&tn&&jt.push("RENDER_LINE_ALPHA_DISCARD"),jt})(y);let bt=Ye.includes("RENDER_LINE_ALPHA_DISCARD");x.terrain&&x.terrain.clipOrMaskOverlapStencilType()&&(bt=!1);for(const Et of S){const jt=d.getTile(Et);if(Xe&&!jt.patternsLoaded())continue;const Gt=jt.getBucket(y);if(!Gt)continue;x.prepareDrawTile();const Ut=Gt.programConfigurations.get(y.id),tn=x.useProgram(ot,Ut,Ye),Kt=ze.constantOr(null);if(Kt&&jt.imageAtlas){const jn=jt.imageAtlas.patternPositions[Kt.toString()];jn&&Ut.setConstantPatternPositions(jn)}const wn=W.constantOr(null),hi=de.constantOr(null);if(!Xe&&wn&&hi&&jt.lineAtlas){const jn=jt.lineAtlas.getDash(wn,hi);jn&&Ut.setConstantPatternPositions(jn)}let[mn,Hn]=y.paint.get("line-trim-offset");("round"===hi||"square"===hi)&&mn!==Hn&&(0===mn&&(mn-=1),1===Hn&&(Hn+=1));const Dn=x.terrain?Et.projMatrix:null,li=Xe?Ac(x,jt,y,Dn,$):du(x,jt,y,Dn,Gt.lineClipsArray.length,$,[mn,Hn]);if(it){const jn=Gt.gradients[y.id];let di=jn.texture;if(y.gradientVersion!==jn.version){let ni=256;if(y.stepInterpolant){const fi=d.getSource().maxzoom,vr=Et.canonical.z===fi?Math.ceil(1<<x.transform.maxZoom-Et.canonical.z):1;ni=g.clamp(g.nextPowerOfTwo(Gt.maxLineLength/g.EXTENT*1024*vr),256,dt.maxTextureSize)}jn.gradient=g.renderColorRamp({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:ni,image:jn.gradient||void 0,clips:Gt.lineClipsArray}),jn.texture?jn.texture.update(jn.gradient):jn.texture=new g.Texture(dt,jn.gradient,pe.RGBA),jn.version=y.gradientVersion,di=jn.texture}dt.activeTexture.set(pe.TEXTURE1),di.bind(y.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}H&&(dt.activeTexture.set(pe.TEXTURE0),jt.lineAtlasTexture.bind(pe.LINEAR,pe.REPEAT),Ut.updatePaintBuffers()),Xe&&(dt.activeTexture.set(pe.TEXTURE0),jt.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ut.updatePaintBuffers()),x.prepareDrawProgram(dt,tn,Et.toUnwrapped());const bn=jn=>{tn.draw(dt,pe.TRIANGLES,N,jn,F,g.CullFaceMode.disabled,li,y.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,y.paint,x.transform.zoom,Ut,[Gt.layoutVertexBuffer2])};if(bt){const jn=x.stencilModeForClipping(Et).ref;0===jn&&x.terrain&&dt.clear({stencil:0});const di={func:pe.EQUAL,mask:255};li.u_alpha_discard_threshold=.8,bn(new g.StencilMode(di,jn,255,pe.KEEP,pe.KEEP,pe.INVERT)),li.u_alpha_discard_threshold=0,bn(new g.StencilMode(di,jn,255,pe.KEEP,pe.KEEP,pe.KEEP))}else bn(x.stencilModeForClipping(Et))}bt&&(x.resetStencilClippingMasks(),x.terrain&&dt.clear({stencil:0}))},fill:function(x,d,y,S){const D=y.paint.get("fill-color"),k=y.paint.get("fill-opacity");if(0===k.constantOr(1))return;const N=x.colorModeForRenderPass(),F=y.paint.get("fill-pattern"),$=x.opaquePassEnabledForLayer()&&!F.constantOr(1)&&1===D.constantOr(g.Color.transparent).a&&1===k.constantOr(0)?"opaque":"translucent";if(x.renderPass===$){const W=x.depthModeForSublayer(1,"opaque"===x.renderPass?g.DepthMode.ReadWrite:g.DepthMode.ReadOnly);Pf(x,d,y,S,W,N,!1)}if("translucent"===x.renderPass&&y.paint.get("fill-antialias")){const W=x.depthModeForSublayer(y.getPaintProperty("fill-outline-color")?2:0,g.DepthMode.ReadOnly);Pf(x,d,y,S,W,N,!0)}},"fill-extrusion":function(x,d,y,S){const D=y.paint.get("fill-extrusion-opacity");if(0!==D&&"translucent"===x.renderPass){const k=new g.DepthMode(x.context.gl.LEQUAL,g.DepthMode.ReadWrite,x.depthRangeFor3D);if(1!==D||y.paint.get("fill-extrusion-pattern").constantOr(1))qu(x,d,y,S,k,g.StencilMode.disabled,g.ColorMode.disabled),qu(x,d,y,S,k,x.stencilModeFor3D(),x.colorModeForRenderPass()),x.resetStencilClippingMasks();else{const N=x.colorModeForRenderPass();qu(x,d,y,S,k,g.StencilMode.disabled,N)}}},hillshade:function(x,d,y,S){if("offscreen"!==x.renderPass&&"translucent"!==x.renderPass)return;const D=x.context,k=x.depthModeForSublayer(0,g.DepthMode.ReadOnly),N=x.colorModeForRenderPass(),F=x.terrain&&x.terrain.renderingToTexture,[$,W]="translucent"!==x.renderPass||F?[{},S]:x.stencilConfigForOverlap(S);for(const H of W){const de=d.getTile(H);if(de.needsHillshadePrepare&&"offscreen"===x.renderPass)Mf(x,de,y,k,g.StencilMode.disabled,N);else if("translucent"===x.renderPass){const ze=F&&x.terrain?x.terrain.stencilModeForRTTOverlap(H):$[H.overscaledZ];ia(x,H,de,y,k,ze,N)}}D.viewport.set([0,0,x.width,x.height]),x.resetStencilClippingMasks()},raster:function(x,d,y,S,D,k){if("translucent"!==x.renderPass||0===y.paint.get("raster-opacity")||!S.length)return;const N=x.context,F=N.gl,$=d.getSource(),W=x.useProgram("raster"),H=x.colorModeForRenderPass(),de=x.terrain&&x.terrain.renderingToTexture,[ze,Xe]=$ instanceof Cr||de?[{},S]:x.stencilConfigForOverlap(S),it=Xe[Xe.length-1].overscaledZ,ot=!x.options.moving;for(const dt of Xe){const pe=de?g.DepthMode.disabled:x.depthModeForSublayer(dt.overscaledZ-it,1===y.paint.get("raster-opacity")?g.DepthMode.ReadWrite:g.DepthMode.ReadOnly,F.LESS),Ye=dt.toUnwrapped(),bt=d.getTile(dt);if(de&&(!bt||!bt.hasData()))continue;const Et=de?dt.projMatrix:x.transform.calculateProjMatrix(Ye,ot),jt=x.terrain&&de?x.terrain.stencilModeForRTTOverlap(dt):ze[dt.overscaledZ],Gt=k?0:y.paint.get("raster-fade-duration");bt.registerFadeDuration(Gt);const Ut=d.findLoadedParent(dt,0),tn=Fd(bt,Ut,d,x.transform,Gt);let Kt,wn;x.terrain&&x.terrain.prepareDrawTile();const hi="nearest"===y.paint.get("raster-resampling")?F.NEAREST:F.LINEAR;N.activeTexture.set(F.TEXTURE0),bt.texture.bind(hi,F.CLAMP_TO_EDGE),N.activeTexture.set(F.TEXTURE1),Ut?(Ut.texture.bind(hi,F.CLAMP_TO_EDGE),Kt=Math.pow(2,Ut.tileID.overscaledZ-bt.tileID.overscaledZ),wn=[bt.tileID.canonical.x*Kt%1,bt.tileID.canonical.y*Kt%1]):bt.texture.bind(hi,F.CLAMP_TO_EDGE),bt.texture.useMipmap&&N.extTextureFilterAnisotropic&&x.transform.pitch>20&&F.texParameterf(F.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);const mn=La(Et,wn||[0,0],Kt||1,tn,y,$ instanceof Cr?$.perspectiveTransform:[0,0]);if(x.prepareDrawProgram(N,W,Ye),$ instanceof Cr)$.boundsBuffer&&$.boundsSegments&&W.draw(N,F.TRIANGLES,pe,g.StencilMode.disabled,H,g.CullFaceMode.disabled,mn,y.id,$.boundsBuffer,x.quadTriangleIndexBuffer,$.boundsSegments);else{const{tileBoundsBuffer:Hn,tileBoundsIndexBuffer:Dn,tileBoundsSegments:li}=x.getTileBoundsBuffers(bt);W.draw(N,F.TRIANGLES,pe,jt,H,g.CullFaceMode.disabled,mn,y.id,Hn,Dn,li)}}x.resetStencilClippingMasks()},background:function(x,d,y,S){const D=y.paint.get("background-color"),k=y.paint.get("background-opacity");if(0===k)return;const N=x.context,F=N.gl,$=x.transform,W=$.tileSize,H=y.paint.get("background-pattern");if(x.isPatternMissing(H))return;const de=!H&&1===D.a&&1===k&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==de)return;const ze=g.StencilMode.disabled,Xe=x.depthModeForSublayer(0,"opaque"===de?g.DepthMode.ReadWrite:g.DepthMode.ReadOnly),it=x.colorModeForRenderPass(),ot=x.useProgram(H?"backgroundPattern":"background");let dt,pe=S;pe||(dt=x.getBackgroundTiles(),pe=Object.values(dt).map(Ye=>Ye.tileID)),H&&(N.activeTexture.set(F.TEXTURE0),x.imageManager.bind(x.context));for(const Ye of pe){const bt=Ye.toUnwrapped(),Et=S?Ye.projMatrix:x.transform.calculateProjMatrix(bt);x.prepareDrawTile();const jt=d?d.getTile(Ye):dt?dt[Ye.key]:new g.Tile(Ye,W,$.zoom,x),Gt=H?mh(Et,k,x,H,{tileID:Ye,tileSize:W}):Hu(Et,k,D);x.prepareDrawProgram(N,ot,bt);const{tileBoundsBuffer:Ut,tileBoundsIndexBuffer:tn,tileBoundsSegments:Kt}=x.getTileBoundsBuffers(jt);ot.draw(N,F.TRIANGLES,Xe,ze,it,g.CullFaceMode.disabled,Gt,y.id,Ut,tn,Kt)}},sky:function(x,d,y){const S=x.transform,D="mercator"===S.projection.name||"globe"===S.projection.name?1:g.smoothstep(7,8,S.zoom),k=y.paint.get("sky-opacity")*D;if(0===k)return;const N=x.context,F=y.paint.get("sky-type"),$=new g.DepthMode(N.gl.LEQUAL,g.DepthMode.ReadOnly,[0,1]),W=x.frameCounter/1e3%1;"atmosphere"===F?"offscreen"===x.renderPass?y.needsSkyboxCapture(x)&&(function(H,de,ze,Xe){const it=H.context,ot=it.gl;let dt=de.skyboxFbo;if(!dt){dt=de.skyboxFbo=it.createFramebuffer(32,32,!1),de.skyboxGeometry=new Wu(it),de.skyboxTexture=it.gl.createTexture(),ot.bindTexture(ot.TEXTURE_CUBE_MAP,de.skyboxTexture),ot.texParameteri(ot.TEXTURE_CUBE_MAP,ot.TEXTURE_WRAP_S,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_CUBE_MAP,ot.TEXTURE_WRAP_T,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_CUBE_MAP,ot.TEXTURE_MIN_FILTER,ot.LINEAR),ot.texParameteri(ot.TEXTURE_CUBE_MAP,ot.TEXTURE_MAG_FILTER,ot.LINEAR);for(let Et=0;Et<6;++Et)ot.texImage2D(ot.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,ot.RGBA,32,32,0,ot.RGBA,ot.UNSIGNED_BYTE,null)}it.bindFramebuffer.set(dt.framebuffer),it.viewport.set([0,0,32,32]);const pe=de.getCenter(H,!0),Ye=H.useProgram("skyboxCapture"),bt=new Float64Array(16);g.identity(bt),g.rotateY(bt,bt,.5*-Math.PI),qn(it,de,Ye,bt,pe,0),g.identity(bt),g.rotateY(bt,bt,.5*Math.PI),qn(it,de,Ye,bt,pe,1),g.identity(bt),g.rotateX(bt,bt,.5*-Math.PI),qn(it,de,Ye,bt,pe,2),g.identity(bt),g.rotateX(bt,bt,.5*Math.PI),qn(it,de,Ye,bt,pe,3),g.identity(bt),qn(it,de,Ye,bt,pe,4),g.identity(bt),g.rotateY(bt,bt,Math.PI),qn(it,de,Ye,bt,pe,5),it.viewport.set([0,0,H.width,H.height])}(x,y),y.markSkyboxValid(x)):"sky"===x.renderPass&&function(H,de,ze,Xe,it){const ot=H.context,dt=ot.gl,pe=H.transform,Ye=H.useProgram("skybox");ot.activeTexture.set(dt.TEXTURE0),dt.bindTexture(dt.TEXTURE_CUBE_MAP,de.skyboxTexture);const bt={u_matrix:pe.skyboxMatrix,u_sun_direction:de.getCenter(H,!1),u_cubemap:0,u_opacity:Xe,u_temporal_offset:it};H.prepareDrawProgram(ot,Ye),Ye.draw(ot,dt.TRIANGLES,ze,g.StencilMode.disabled,H.colorModeForRenderPass(),g.CullFaceMode.backCW,bt,"skybox",de.skyboxGeometry.vertexBuffer,de.skyboxGeometry.indexBuffer,de.skyboxGeometry.segment)}(x,y,$,k,W):"gradient"===F&&"sky"===x.renderPass&&function(H,de,ze,Xe,it){const ot=H.context,dt=ot.gl,pe=H.transform,Ye=H.useProgram("skyboxGradient");de.skyboxGeometry||(de.skyboxGeometry=new Wu(ot)),ot.activeTexture.set(dt.TEXTURE0);let bt=de.colorRampTexture;bt||(bt=de.colorRampTexture=new g.Texture(ot,de.colorRamp,dt.RGBA)),bt.bind(dt.LINEAR,dt.CLAMP_TO_EDGE);const Et=(jt=pe.skyboxMatrix,Gt=de.getCenter(H,!1),Ut=de.paint.get("sky-gradient-radius"),tn=Xe,Kt=it,{u_matrix:jt,u_color_ramp:0,u_center_direction:Gt,u_radius:g.degToRad(Ut),u_opacity:tn,u_temporal_offset:Kt});var jt,Gt,Ut,tn,Kt;H.prepareDrawProgram(ot,Ye),Ye.draw(ot,dt.TRIANGLES,ze,g.StencilMode.disabled,H.colorModeForRenderPass(),g.CullFaceMode.backCW,Et,"skyboxGradient",de.skyboxGeometry.vertexBuffer,de.skyboxGeometry.indexBuffer,de.skyboxGeometry.segment)}(x,y,$,k,W)},debug:function(x,d,y){for(let S=0;S<y.length;S++)fd(x,d,y[S])},custom:function(x,d,y,S){const D=x.context,k=y.implementation;if(!x.transform.projection.unsupportedLayers||!x.transform.projection.unsupportedLayers.includes("custom")||x.terrain&&(x.terrain.renderingToTexture||"offscreen"===x.renderPass)&&y.isLayerDraped()){if("offscreen"===x.renderPass){const N=k.prerender;if(N){if(x.setCustomLayerDefaults(),D.setColorMode(x.colorModeForRenderPass()),"globe"===x.transform.projection.name){const F=x.transform.pointMerc;N.call(k,D.gl,x.transform.customLayerMatrix(),x.transform.getProjection(),x.transform.globeToMercatorMatrix(),g.globeToMercatorTransition(x.transform.zoom),[F.x,F.y],x.transform.pixelsPerMeterRatio)}else N.call(k,D.gl,x.transform.customLayerMatrix());D.setDirty(),x.setBaseState()}}else if("translucent"===x.renderPass){if(x.terrain&&x.terrain.renderingToTexture){const F=k.renderToTile;if(F){const $=S[0].canonical,W=new g.MercatorCoordinate($.x+S[0].wrap*(1<<$.z),$.y,$.z);D.setDepthMode(g.DepthMode.disabled),D.setStencilMode(g.StencilMode.disabled),D.setColorMode(x.colorModeForRenderPass()),x.setCustomLayerDefaults(),F.call(k,D.gl,W),D.setDirty(),x.setBaseState()}return}x.setCustomLayerDefaults(),D.setColorMode(x.colorModeForRenderPass()),D.setStencilMode(g.StencilMode.disabled);const N="3d"===k.renderingMode?new g.DepthMode(x.context.gl.LEQUAL,g.DepthMode.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,g.DepthMode.ReadOnly);if(D.setDepthMode(N),"globe"===x.transform.projection.name){const F=x.transform.pointMerc;k.render(D.gl,x.transform.customLayerMatrix(),x.transform.getProjection(),x.transform.globeToMercatorMatrix(),g.globeToMercatorTransition(x.transform.zoom),[F.x,F.y],x.transform.pixelsPerMeterRatio)}else k.render(D.gl,x.transform.customLayerMatrix());D.setDirty(),x.setBaseState(),D.bindFramebuffer.set(null)}}else g.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class co{constructor(d,y,S=!1){this.context=new Xn(d,S),this.transform=y,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=g.SourceCache.maxUnderzooming+g.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(d,y){const S=!!d&&!!d.terrain&&this.transform.projection.supportsTerrain;if(!(S||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Bd(this,d));const D=this._terrain;this.transform.elevation=S?D:null,D.update(d,this.transform,y)}_updateFog(d){const y=d.fog;if(!y||"globe"===this.transform.projection.name||y.getOpacity(this.transform.pitch)<1||y.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[S,D]=y.getFovAdjustedRange(this.transform._fov);if(S>D)return void(this.transform.fogCullDistSq=null);const k=S+.78*(D-S);this.transform.fogCullDistSq=k*k}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(d,y){if(this.width=d*g.exported.devicePixelRatio,this.height=y*g.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style.order)this.style._layers[S].resize()}setup(){const d=this.context,y=new g.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(g.EXTENT,0),y.emplaceBack(0,g.EXTENT),y.emplaceBack(g.EXTENT,g.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(y,g.posAttributes.members),this.tileExtentSegments=g.SegmentVector.simpleSegment(0,0,4,2);const S=new g.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(g.EXTENT,0),S.emplaceBack(0,g.EXTENT),S.emplaceBack(g.EXTENT,g.EXTENT),this.debugBuffer=d.createVertexBuffer(S,g.posAttributes.members),this.debugSegments=g.SegmentVector.simpleSegment(0,0,4,5);const D=new g.StructArrayLayout2i4;D.emplaceBack(-1,-1),D.emplaceBack(1,-1),D.emplaceBack(-1,1),D.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(D,g.posAttributes.members),this.viewportSegments=g.SegmentVector.simpleSegment(0,0,4,2);const k=new g.StructArrayLayout4i8;k.emplaceBack(0,0,0,0),k.emplaceBack(g.EXTENT,0,g.EXTENT,0),k.emplaceBack(0,g.EXTENT,0,g.EXTENT),k.emplaceBack(g.EXTENT,g.EXTENT,g.EXTENT,g.EXTENT),this.mercatorBoundsBuffer=d.createVertexBuffer(k,g.boundsAttributes.members),this.mercatorBoundsSegments=g.SegmentVector.simpleSegment(0,0,4,2);const N=new g.StructArrayLayout3ui6;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(N);const F=new g.StructArrayLayout1ui2;for(const W of[0,1,3,2,0])F.emplaceBack(W);this.debugIndexBuffer=d.createIndexBuffer(F),this.emptyTexture=new g.Texture(d,new g.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),d.gl.RGBA),this.identityMat=g.create();const $=this.context.gl;this.stencilClearMode=new g.StencilMode({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.loadTimeStamps.push(g.window.performance.now()),this.atmosphereBuffer=new fp(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(d){return d._makeTileBoundsBuffers(this.context,this.transform.projection),d._tileBoundsBuffer?{tileBoundsBuffer:d._tileBoundsBuffer,tileBoundsIndexBuffer:d._tileBoundsIndexBuffer,tileBoundsSegments:d._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const d=this.context,y=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(d,y.TRIANGLES,g.DepthMode.disabled,this.stencilClearMode,g.ColorMode.disabled,g.CullFaceMode.disabled,qr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(d,y,S){if(!y||this.currentStencilSource===y.id||!d.isTileClipped()||!S||0===S.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let F=!1;for(const $ of S)if(void 0===this._tileClippingMaskIDs[$.key]){F=!0;break}if(!F)return}this.currentStencilSource=y.id;const D=this.context,k=D.gl;this.nextStencilID+S.length>256&&this.clearStencil(),D.setColorMode(g.ColorMode.disabled),D.setDepthMode(g.DepthMode.disabled);const N=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of S){const $=y.getTile(F),W=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,{tileBoundsBuffer:H,tileBoundsIndexBuffer:de,tileBoundsSegments:ze}=this.getTileBoundsBuffers($);N.draw(D,k.TRIANGLES,g.DepthMode.disabled,new g.StencilMode({func:k.ALWAYS,mask:0},W,255,k.KEEP,k.KEEP,k.REPLACE),g.ColorMode.disabled,g.CullFaceMode.disabled,qr(F.projMatrix),"$clipping",H,de,ze)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,y=this.context.gl;return new g.StencilMode({func:y.NOTEQUAL,mask:255},d,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(d){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(d);const y=this.context.gl;return new g.StencilMode({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(d){const y=this.context.gl,S=d.sort((N,F)=>F.overscaledZ-N.overscaledZ),D=S[S.length-1].overscaledZ,k=S[0].overscaledZ-D+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const N={};for(let F=0;F<k;F++)N[F+D]=new g.StencilMode({func:y.GEQUAL,mask:255},F+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=k,[N,S]}return[{[D]:g.StencilMode.disabled},S]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new g.ColorMode([d.CONSTANT_COLOR,d.ONE],new g.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?g.ColorMode.unblended:g.ColorMode.alphaBlended}depthModeForSublayer(d,y,S){if(!this.opaquePassEnabledForLayer())return g.DepthMode.disabled;const D=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new g.DepthMode(S||this.context.gl.LEQUAL,y,[D,D])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,y){this.style=d,this.options=y,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(g.exported.now()),this.imageManager.beginFrame();const S=this.style.order,D=this.style._sourceCaches;for(const W in D){const H=D[W];H.used&&H.prepare(this.context)}const k={},N={},F={};for(const W in D){const H=D[W];k[W]=H.getVisibleCoordinates(),N[W]=k[W].slice().reverse(),F[W]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<S.length;W++)if(this.style._layers[S[W]].is3D()){this.opaquePassCutoff=W;break}if(this.terrain&&(this.terrain.updateTileBinding(F),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new g.GlobeSharedBuffers(this.context)),!g.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const W of S){const H=this.style._layers[W],de=d._getLayerSourceCache(H);if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const ze=de?N[de.id]:void 0;("custom"===H.type||H.isSky()||ze&&ze.length)&&this.renderLayer(this,de,H,ze)}this.depthRangeFor3D=[0,1-(d.order.length+2)*this.numSublayers*this.depthEpsilon];const $=this.terrain;if($&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&$.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:y.showOverdrawInspector?g.Color.black:g.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[S[this.currentLayer]],H=d._getLayerSourceCache(W);if(W.isSky())continue;const de=H?N[H.id]:void 0;this._renderTileClippingMasks(W,H,de),this.renderLayer(this,H,W,de)}if(this.style.fog&&this.transform.projection.supportsFog&&function(W,H){const de=W.context,ze=de.gl,Xe=W.transform,it=new g.DepthMode(ze.LEQUAL,g.DepthMode.ReadOnly,[0,1]),ot=W.useProgram("globeAtmosphere",null,"globe"===Xe.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),dt=g.globeToMercatorTransition(Xe.zoom),pe=H.properties.get("color").toArray01(),Ye=H.properties.get("high-color").toArray01(),bt=H.properties.get("space-color").toArray01PremultipliedAlpha(),Et=g.identity$1([]);g.rotateY$1(Et,Et,-g.degToRad(Xe._center.lng)),g.rotateX$1(Et,Et,g.degToRad(Xe._center.lat)),g.rotateZ$1(Et,Et,Xe.angle),g.rotateX$1(Et,Et,-Xe._pitch);const jt=g.fromQuat(new Float32Array(16),Et),Gt=g.mapValue(H.properties.get("star-intensity"),0,1,0,.25),tn=g.mapValue(H.properties.get("horizon-blend"),0,1,5e-4,.25),Kt=g.globeUseCustomAntiAliasing(W,de,Xe)&&5e-4===tn?Xe.worldSize/(2*Math.PI*1.025)-1:Xe.globeRadius,wn=W.frameCounter/1e3%1,hi=g.length(Xe.globeCenterInViewSpace),mn=Math.sqrt(Math.pow(hi,2)-Math.pow(Kt,2)),Hn=Math.acos(mn/hi),Dn={u_frustum_tl:Xe.frustumCorners.TL,u_frustum_tr:Xe.frustumCorners.TR,u_frustum_br:Xe.frustumCorners.BR,u_frustum_bl:Xe.frustumCorners.BL,u_horizon:Xe.frustumCorners.horizon,u_transition:dt,u_fadeout_range:tn,u_color:pe,u_high_color:Ye,u_space_color:bt,u_star_intensity:Gt,u_star_size:5*g.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:wn,u_horizon_angle:Hn,u_rotation_matrix:jt};W.prepareDrawProgram(de,ot);const li=W.atmosphereBuffer;li&&ot.draw(de,ze.TRIANGLES,it,g.StencilMode.disabled,g.ColorMode.alphaBlended,g.CullFaceMode.backCW,Dn,"skybox",li.vertexBuffer,li.indexBuffer,li.segments)}(this,this.style.fog),this.renderPass="sky",(g.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const W=this.style._layers[S[this.currentLayer]],H=d._getLayerSourceCache(W);W.isSky()&&this.renderLayer(this,H,W,H?N[H.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<S.length;){const W=this.style._layers[S[this.currentLayer]],H=d._getLayerSourceCache(W);if(W.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(W)){if(W.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const de=H?("symbol"===W.type?F:N)[H.id]:void 0;this._renderTileClippingMasks(W,H,H?k[H.id]:void 0),this.renderLayer(this,H,W,de),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let W=null;g.values(this.style._layers).forEach(H=>{const de=d._getLayerSourceCache(H);de&&!H.isHidden(this.transform.zoom)&&(!W||W.getSource().maxzoom<de.getSource().maxzoom)&&(W=de)}),W&&this.options.showTileBoundaries&&ra.debug(this,W,W.getVisibleCoordinates())}this.options.showPadding&&function(W){const H=W.transform.padding;zd(W,W.transform.height-(H.top||0),3,hc),zd(W,H.bottom||0,3,ul),Ba(W,H.left||0,3,Fa),Ba(W,W.transform.width-(H.right||0),3,Ml);const de=W.transform.centerPoint;var ze,Xe,it,ot;ka(ze=W,(Xe=de.x)-1,(it=W.transform.height-de.y)-10,2,20,ot=hm),ka(ze,Xe-10,it-1,20,2,ot)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(g.window.performance.now()),this.saveCanvasCopy())}renderLayer(d,y,S,D){S.isHidden(this.transform.zoom)||("background"===S.type||"sky"===S.type||"custom"===S.type||D&&D.length)&&(this.id=S.id,this.gpuTimingStart(S),(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes(S.type)||d.terrain&&"custom"===S.type)&&ra[S.type](d,y,S,D,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const y=this.context.extTimerQuery;let S=this.gpuTimers[d.id];S||(S=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:y.createQueryEXT()}),S.calls++,y.beginQueryEXT(y.TIME_ELAPSED_EXT,S.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const d=this.context.extTimerQuery,y=d.createQueryEXT();this.deferredRenderGpuTimeQueries.push(y),d.beginQueryEXT(d.TIME_ELAPSED_EXT,y)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}collectDeferredRenderGpuQueries(){const d=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],d}queryGpuTimers(d){const y={};for(const S in d){const D=d[S],k=this.context.extTimerQuery,N=k.getQueryObjectEXT(D.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(D.query),y[S]=N}return y}queryGpuTimeDeferredRender(d){if(!this.options.gpuTimingDeferredRender)return 0;const y=this.context.extTimerQuery;let S=0;for(const D of d)S+=y.getQueryObjectEXT(D,y.QUERY_RESULT_EXT)/1e6,y.deleteQueryEXT(D);return S}translatePosMatrix(d,y,S,D,k){if(!S[0]&&!S[1])return d;const N=k?"map"===D?this.transform.angle:0:"viewport"===D?-this.transform.angle:0;if(N){const W=Math.sin(N),H=Math.cos(N);S=[S[0]*H-S[1]*W,S[0]*W+S[1]*H]}const F=[k?S[0]:Ke(y,S[0],this.transform.zoom),k?S[1]:Ke(y,S[1],this.transform.zoom),0],$=new Float32Array(16);return g.translate($,d,F),$}saveTileTexture(d){const y=this._tileTextures[d.size[0]];y?y.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const y=this._tileTextures[d];return y&&y.length>0?y.pop():null}isPatternMissing(d){return null===d||void 0!==d&&!this.imageManager.getPattern(d.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const d=this.terrain&&this.terrain.renderingToTexture,y=this.terrain&&0===this.terrain.exaggeration(),S=this.style&&this.style.fog,D=[];return this.terrainRenderModeElevated()&&D.push("TERRAIN"),"globe"===this.transform.projection.name&&D.push("GLOBE"),y&&D.push("ZERO_EXAGGERATION"),S&&!d&&0!==S.getOpacity(this.transform.pitch)&&D.push("FOG"),d&&D.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&D.push("OVERDRAW_INSPECTOR"),D}useProgram(d,y,S){this.cache=this.cache||{};const D=S||[],k=this.currentGlobalDefines().concat(D),N=lo.cacheKey(Xs[d],d,k,y);return this.cache[N]||(this.cache[N]=new lo(this.context,d,Xs[d],y,hu[d],k)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=g.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new g.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(d,y,S){if(this.terrain&&this.terrain.renderingToTexture)return;const D=this.style.fog;if(D){const k=D.getOpacity(this.transform.pitch),N=((F,$,W,H,de,ze,Xe,it,ot,dt,pe)=>{const Ye=F.transform,bt=$.properties.get("color").toArray01();bt[3]=H;const Et=F.frameCounter/1e3%1;return{u_fog_matrix:W?Ye.calculateFogTileMatrix(W):F.identityMat,u_fog_range:$.getFovAdjustedRange(Ye._fov),u_fog_color:bt,u_fog_horizon_blend:$.properties.get("horizon-blend"),u_fog_temporal_offset:Et,u_frustum_tl:de,u_frustum_tr:ze,u_frustum_br:Xe,u_frustum_bl:it,u_globe_pos:ot,u_globe_radius:dt,u_viewport:pe,u_globe_transition:g.globeToMercatorTransition(Ye.zoom),u_is_globe:+("globe"===Ye.projection.name)}})(this,D,S,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*g.exported.devicePixelRatio,this.transform.height*g.exported.devicePixelRatio]);y.setFogUniformValues(d,N)}}setTileLoadedFlag(d){this.tileLoaded=d}saveCanvasCopy(){const d=this.canvasCopy();d&&(this.frameCopies.push(d),this.tileLoaded=!1)}canvasCopy(){const d=this.context.gl,y=d.createTexture();return d.bindTexture(d.TEXTURE_2D,y),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,0,0,d.drawingBufferWidth,d.drawingBufferHeight,0),y}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const d=this.style&&this.style.fog;return!!d&&0!==d.getOpacity(this.transform.pitch)}getBackgroundTiles(){const d=this._backgroundTiles,y=this._backgroundTiles={},S=this.transform.coveringTiles({tileSize:512});for(const D of S)y[D.key]=d[D.key]||new g.Tile(D,512,this.transform.tileZoom,this);return y}clearBackgroundTiles(){this._backgroundTiles={}}}class pc{constructor(d=0,y=0,S=0,D=0){if(isNaN(d)||d<0||isNaN(y)||y<0||isNaN(S)||S<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=y,this.left=S,this.right=D}interpolate(d,y,S){return null!=y.top&&null!=d.top&&(this.top=g.number(d.top,y.top,S)),null!=y.bottom&&null!=d.bottom&&(this.bottom=g.number(d.bottom,y.bottom,S)),null!=y.left&&null!=d.left&&(this.left=g.number(d.left,y.left,S)),null!=y.right&&null!=d.right&&(this.right=g.number(d.right,y.right,S)),this}getCenter(d,y){const S=g.clamp((this.left+d-this.right)/2,0,d),D=g.clamp((this.top+y-this.bottom)/2,0,y);return new g.Point(S,D)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new pc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ma(x,d){const y=g.getColumn(x,3);g.fromQuat(x,d),g.setColumn(x,3,y)}function On(x,d){const y=g.identity$1([]);return g.rotateZ$1(y,y,-d),g.rotateX$1(y,y,-x),y}function ga(x,d){const y=[x[0],x[1],0],S=[d[0],d[1],0];if(g.length(y)>=1e-15){const N=g.normalize([],y);g.scale$2(S,N,g.dot(S,N)),d[0]=S[0],d[1]=S[1]}const D=g.cross([],d,x);if(g.len(D)<1e-15)return null;const k=Math.atan2(-D[1],D[0]);return On(Math.atan2(Math.sqrt(x[0]*x[0]+x[1]*x[1]),-x[2]),k)}class go{constructor(d,y){this.position=d,this.orientation=y}get position(){return this._position}set position(d){if(d){const y=d instanceof g.MercatorCoordinate?d:new g.MercatorCoordinate(d[0],d[1],d[2]);this._renderWorldCopies&&(y.x=g.wrap(y.x,0,1)),this._position=y}else this._position=null}lookAtPoint(d,y){if(this.orientation=null,!this.position)return;const S=this.position,D=this._elevation?this._elevation.getAtPointOrZero(g.MercatorCoordinate.fromLngLat(d)):0,k=g.MercatorCoordinate.fromLngLat(d,D),N=[k.x-S.x,k.y-S.y,k.z-S.z];y||(y=[0,0,1]),y[2]=Math.abs(y[2]),this.orientation=ga(N,y)}setPitchBearing(d,y){this.orientation=On(g.degToRad(d),g.degToRad(-y))}}class Cs{constructor(d,y){this._transform=g.identity([]),this.orientation=y,this.position=d}get mercatorPosition(){const d=this.position;return new g.MercatorCoordinate(d[0],d[1],d[2])}get position(){const d=g.getColumn(this._transform,3);return[d[0],d[1],d[2]]}set position(d){var y;d&&g.setColumn(this._transform,3,[(y=d)[0],y[1],y[2],1])}get orientation(){return this._orientation}set orientation(d){this._orientation=d||g.identity$1([]),d&&ma(this._transform,this._orientation)}getPitchBearing(){const d=this.forward(),y=this.right();return{bearing:Math.atan2(-y[1],y[0]),pitch:Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2])}}setPitchBearing(d,y){this._orientation=On(d,y),ma(this._transform,this._orientation)}forward(){const d=g.getColumn(this._transform,2);return[-d[0],-d[1],-d[2]]}up(){const d=g.getColumn(this._transform,1);return[-d[0],-d[1],-d[2]]}right(){const d=g.getColumn(this._transform,0);return[d[0],d[1],d[2]]}getCameraToWorld(d,y){const S=new Float64Array(16);return g.invert(S,this.getWorldToCamera(d,y)),S}getWorldToCameraPosition(d,y,S){const D=this.position;g.scale$2(D,D,-d);const k=new Float64Array(16);return g.fromScaling(k,[S,S,S]),g.translate(k,k,D),k[10]*=y,k}getWorldToCamera(d,y){const S=new Float64Array(16),D=new Float64Array(4),k=this.position;return g.conjugate(D,this._orientation),g.scale$2(k,k,-d),g.fromQuat(S,D),g.translate(S,S,k),S[1]*=-1,S[5]*=-1,S[9]*=-1,S[13]*=-1,S[8]*=y,S[9]*=y,S[10]*=y,S[11]*=y,S}getCameraToClipPerspective(d,y,S,D){const k=new Float64Array(16);return g.perspective(k,d,y,S,D),k}getDistanceToElevation(d,y=!1){const S=0===d?0:g.mercatorZfromAltitude(d,y?g.latFromMercatorY(this.position[1]):this.position[1]),D=this.forward();return(S-this.position[2])/D[2]}clone(){return new Cs([...this.position],[...this.orientation])}}function oa(x,d){const y=sa(x.projection,x.zoom,x.width,x.height),S=function(k,N,F,$,W){const H=new g.LngLat(F.lng-180*Fo,F.lat),de=new g.LngLat(F.lng+180*Fo,F.lat),ze=k.project(H.lng,H.lat),Xe=k.project(de.lng,de.lat),it=-Math.atan2(Xe.y-ze.y,Xe.x-ze.x),ot=g.MercatorCoordinate.fromLngLat(F);ot.y=g.clamp(ot.y,-1+Fo,1-Fo);const dt=ot.toLngLat(),pe=k.project(dt.lng,dt.lat),Ye=g.MercatorCoordinate.fromLngLat(dt);Ye.x+=Fo;const bt=Ye.toLngLat(),Et=k.project(bt.lng,bt.lat),jt=$d(Et.x-pe.x,Et.y-pe.y,it),Gt=g.MercatorCoordinate.fromLngLat(dt);Gt.y+=Fo;const Ut=Gt.toLngLat(),tn=k.project(Ut.lng,Ut.lat),Kt=$d(tn.x-pe.x,tn.y-pe.y,it),wn=Math.abs(jt.x)/Math.abs(Kt.y),hi=g.identity([]);g.rotateZ(hi,hi,-it*(1-(W?0:$)));const mn=g.identity([]);return g.scale(mn,mn,[1,1-(1-wn)*$,1]),mn[4]=-Kt.x/Kt.y*$,g.rotateZ(mn,mn,it),g.multiply(mn,hi,mn),mn}(x.projection,0,x.center,y,d),D=za(x);return g.scale(S,S,[D,D,1]),S}function za(x){const d=x.projection,y=sa(x.projection,x.zoom,x.width,x.height),S=pp(d,x.center),D=pp(d,g.LngLat.convert(d.center));return Math.pow(2,S*y+(1-y)*D)}function sa(x,d,y,S,D=1/0){const k=x.range;if(!k)return 0;const N=Math.min(D,Math.max(y,S)),F=Math.log(N/1024)/Math.LN2;return g.smoothstep(k[0]+F,k[1]+F,d)}const Fo=1/4e4;function pp(x,d){const y=g.clamp(d.lat,-g.MAX_MERCATOR_LATITUDE,g.MAX_MERCATOR_LATITUDE),S=new g.LngLat(d.lng-180*Fo,y),D=new g.LngLat(d.lng+180*Fo,y),k=x.project(S.lng,y),N=x.project(D.lng,y),F=g.MercatorCoordinate.fromLngLat(S),$=g.MercatorCoordinate.fromLngLat(D),W=N.x-k.x,H=N.y-k.y,de=$.x-F.x,ze=$.y-F.y,Xe=Math.sqrt((de*de+ze*ze)/(W*W+H*H));return Math.log(Xe)/Math.LN2}function $d(x,d,y){const S=Math.cos(y),D=Math.sin(y);return{x:x*S-d*D,y:x*D+d*S}}class $a{constructor(d,y,S,D,k,N,F){this.tileSize=512,this._renderWorldCopies=void 0===k||k,this._minZoom=d||0,this._maxZoom=y||22,this._minPitch=S??0,this._maxPitch=D??60,this.setProjection(N),this.setMaxBounds(F),this.width=0,this.height=0,this._center=new g.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new pc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Cs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const d=new $a(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return d._elevation=this._elevation,d._centerAltitude=this._centerAltitude,d._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,d.tileSize=this.tileSize,d.mercatorFromTransition=this.mercatorFromTransition,d.width=this.width,d.height=this.height,d.cameraElevationReference=this.cameraElevationReference,d._center=this._center,d._setZoom(this.zoom),d._seaLevelZoom=this._seaLevelZoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._nearZ=this._nearZ,d._farZ=this._farZ,d._averageElevation=this._averageElevation,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._camera=this._camera.clone(),d._calcMatrices(),d.freezeTileCoverage=this.freezeTileCoverage,d.frustumCorners=this.frustumCorners,d}get elevation(){return this._elevation}set elevation(d){this._elevation!==d&&(this._elevation=d,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(d,y=!1){const S=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||S)&&this._updateCameraOnTerrain(),(d||S)&&this._constrainCamera(y),this._calcMatrices()}getProjection(){return g.pick(this.projection,["name","center","parallels"])}setProjection(d){this.projectionOptions=d||{name:"mercator"};const y=this.projection?this.getProjection():void 0;this.projection=g.getProjection(this.projectionOptions);const S=!fe(y,this.getProjection());return S&&this._calcMatrices(),this.mercatorFromTransition=!1,S}setMercatorFromTransition(){const d=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=g.getProjection({name:"mercator"});const y=d!==this.projection.name;return y&&this._calcMatrices(),y}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(d){void 0===d?d=!0:null===d&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get cameraWorldSize(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return g.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new g.Point(this.width,this.height)}get bearing(){return g.wrap(this.rotation,-180,180)}set bearing(d){this.rotation=d}get rotation(){return-this.angle/Math.PI*180}set rotation(d){const y=-d*Math.PI/180;var S,D,k,N,F,$,W,H,de,ze;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=(S=new g.ARRAY_TYPE(4),g.ARRAY_TYPE!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S),D=this.rotationMatrix,N=this.angle,F=(k=this.rotationMatrix)[0],$=k[1],W=k[2],H=k[3],de=Math.sin(N),ze=Math.cos(N),D[0]=F*ze+W*de,D[1]=$*ze+H*de,D[2]=F*-de+W*ze,D[3]=$*-de+H*ze)}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const y=g.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const d=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/d)}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=g.degToRad(d),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(d){this._averageElevation=d,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(d){const y=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._setZoom(y),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(d){this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;this._centerAltitude=d.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=d.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const d=this._elevation,y=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],S=this.horizonLineFromTop();let D=0,k=0;for(let N=0;N<y.length;N++){const F=new g.Point(y[N][0]*this.width,S+y[N][1]*(this.height-S)),$=d.pointCoordinate(F);if(!$)continue;const W=1/Math.hypot($[0]-this._camera.position[0],$[1]-this._camera.position[1]);D+=$[3]*W,k+=W}return 0===k?NaN:D/k}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const d=this._seaLevelZoom,y=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),S=this.pixelsPerMeter/this.worldSize*y,D=this._mercatorZfromZoom(d),k=this._mercatorZfromZoom(this._maxZoom),N=Math.max(D-S,k);this._setZoom(this._zoomFromMercatorZ(N))}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}computeZoomRelativeTo(d){const y=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,d.toAltitude()));let S;S=d.z<this._camera.position[2]?[y.x,y.y,y.z]:[d.x,d.y,d.z];const D=g.length(g.sub([],this._camera.position,S));return g.clamp(this._zoomFromMercatorZ(D),this._minZoom,this._maxZoom)}setFreeCameraOptions(d){if(!this.height||!d.position&&!d.orientation)return;this._updateCameraState();let y=!1;if(d.orientation&&!g.exactEquals(d.orientation,this._camera.orientation)&&(y=this._setCameraOrientation(d.orientation)),d.position){const S=[d.position.x,d.position.y,d.position.z];g.exactEquals$1(S,this._camera.position)||(this._setCameraPosition(S),y=!0)}y&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const d=this._camera.position,y=new go;return y.position=new g.MercatorCoordinate(d[0],d[1],d[2]),y.orientation=this._camera.orientation,y._elevation=this.elevation,y._renderWorldCopies=this.renderWorldCopies,y}_setCameraOrientation(d){if(!g.length$1(d))return!1;g.normalize$1(d,d);const y=g.transformQuat([],[0,0,-1],d),S=g.transformQuat([],[0,-1,0],d);if(S[2]<0)return!1;const D=ga(y,S);return!!D&&(this._camera.orientation=D,!0)}_setCameraPosition(d){const y=this.zoomScale(this.minZoom)*this.tileSize,S=this.zoomScale(this.maxZoom)*this.tileSize,D=this.cameraToCenterDistance;d[2]=g.clamp(d[2],D/S,D/y),this._camera.position=d}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,y,S){this._unmodified=!1,this._edgeInsets.interpolate(d,y,S),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const y=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(d){const y=[new g.UnwrappedTileID(0,d)];if(this.renderWorldCopies){const S=this.pointCoordinate(new g.Point(0,0)),D=this.pointCoordinate(new g.Point(this.width,0)),k=this.pointCoordinate(new g.Point(this.width,this.height)),N=this.pointCoordinate(new g.Point(0,this.height)),F=Math.floor(Math.min(S.x,D.x,k.x,N.x)),$=Math.floor(Math.max(S.x,D.x,k.x,N.x)),W=1;for(let H=F-W;H<=$+W;H++)0!==H&&y.push(new g.UnwrappedTileID(H,d))}return y}coveringTiles(d){let y=this.coveringZoomLevel(d);const S=y,D=this.elevation&&!d.isTerrainDEM,k="mercator"===this.projection.name;if(void 0!==d.minzoom&&y<d.minzoom)return[];void 0!==d.maxzoom&&y>d.maxzoom&&(y=d.maxzoom);const N=this.locationCoordinate(this.center),F=this.center.lat,$=1<<y,W=[$*N.x,$*N.y,0],H="globe"===this.projection.name,de=!H,ze=g.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y,de),Xe=H?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),it=$*g.mercatorZfromAltitude(1,this.center.lat),ot=this._camera.position[2]/g.mercatorZfromAltitude(1,this.center.lat),dt=[$*Xe.x,$*Xe.y,ot*(de?1:it)],pe=this.cameraToCenterDistance/d.tileSize*(d.roundZoom?1:.502),Ye=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?y:0,bt=d.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Et=d.isTerrainDEM?-bt:this._elevation?this._elevation.getMinElevationBelowMSL():0,jt=this.projection.isReprojectedInTileSpace?za(this):1,Gt=bn=>{const di=new g.MercatorCoordinate(bn.x+25e-6,bn.y,bn.z),ni=new g.MercatorCoordinate(bn.x,bn.y+25e-6,bn.z),fi=bn.toLngLat(),vr=di.toLngLat(),Ur=ni.toLngLat(),qi=this.locationCoordinate(fi),Ki=this.locationCoordinate(vr),uo=this.locationCoordinate(Ur),ho=Math.hypot(Ki.x-qi.x,Ki.y-qi.y),dr=Math.hypot(uo.x-qi.x,uo.y-qi.y);return Math.sqrt(ho*dr)*jt/25e-6},Ut=bn=>{const jn=bt,di=Et;return{aabb:g.tileAABB(this,$,0,0,0,bn,di,jn,this.projection),zoom:0,x:0,y:0,minZ:di,maxZ:jn,wrap:bn,fullyVisible:!1}},tn=[];let Kt=[];const wn=y,hi=d.reparseOverscaled?S:y,mn=bn=>bn*bn,Hn=mn((ot-this._centerAltitude)*it),Dn=bn=>{if(!this._elevation||!bn.tileID||!k)return;const jn=this._elevation.getMinMaxForTile(bn.tileID),di=bn.aabb;jn?(di.min[2]=jn.min,di.max[2]=jn.max,di.center[2]=(di.min[2]+di.max[2])/2):(bn.shouldSplit=li(bn),bn.shouldSplit||(di.min[2]=di.max[2]=di.center[2]=this._centerAltitude))},li=bn=>{if(bn.zoom<Ye)return!0;if(bn.zoom===wn)return!1;if(null!=bn.shouldSplit)return bn.shouldSplit;const jn=bn.aabb.distanceX(dt),di=bn.aabb.distanceY(dt);let ni=Hn,fi=1;if(H){ni=mn(bn.aabb.distanceZ(dt));const qi=Math.pow(2,bn.zoom),Ki=g.latFromMercatorY((bn.y+1)/qi),uo=g.latFromMercatorY(bn.y/qi),ho=Math.min(Math.max(F,Ki),uo),dr=g.circumferenceAtLatitude(ho)/g.circumferenceAtLatitude(F);if(fi=ho===F?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,dr/this._mercatorScaleRatio),this.zoom<=g.GLOBE_ZOOM_THRESHOLD_MIN&&bn.zoom===wn-1&&dr>=.9)return!0}else if(D&&(ni=mn(bn.aabb.distanceZ(dt)*it)),this.projection.isReprojectedInTileSpace&&S<=5){const qi=Math.pow(2,bn.zoom),Ki=Gt(new g.MercatorCoordinate((bn.x+.5)/qi,(bn.y+.5)/qi));fi=Ki>.85?1:Ki}const vr=jn*jn+di*di+ni;return vr<mn((1<<wn-bn.zoom)*pe*fi*((qi,Ki)=>{if(Ki*mn(.707)<qi)return 1;const uo=Math.sqrt(Ki/qi);return uo/(1.4144271570014144+(Math.pow(1.1,uo-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ni,Hn),vr))};if(this.renderWorldCopies)for(let bn=1;bn<=3;bn++)tn.push(Ut(-bn)),tn.push(Ut(bn));for(tn.push(Ut(0));tn.length>0;){const bn=tn.pop(),jn=bn.x,di=bn.y;let ni=bn.fullyVisible;if(!ni){const fi=bn.aabb.intersects(ze);if(0===fi)continue;ni=2===fi}if(bn.zoom!==wn&&li(bn))for(let fi=0;fi<4;fi++){const vr=(jn<<1)+fi%2,Ur=(di<<1)+(fi>>1),qi={aabb:k?bn.aabb.quadrant(fi):g.tileAABB(this,$,bn.zoom+1,vr,Ur,bn.wrap,bn.minZ,bn.maxZ,this.projection),zoom:bn.zoom+1,x:vr,y:Ur,wrap:bn.wrap,fullyVisible:ni,tileID:void 0,shouldSplit:void 0,minZ:bn.minZ,maxZ:bn.maxZ};D&&!H&&(qi.tileID=new g.OverscaledTileID(bn.zoom+1===wn?hi:bn.zoom+1,bn.wrap,bn.zoom+1,vr,Ur),Dn(qi)),tn.push(qi)}else{const fi=bn.zoom===wn?hi:bn.zoom;if(d.minzoom&&d.minzoom>fi)continue;const vr=W[0]-(.5+jn+(bn.wrap<<bn.zoom))*(1<<y-bn.zoom),Ur=W[1]-.5-di,qi=bn.tileID?bn.tileID:new g.OverscaledTileID(fi,bn.wrap,bn.zoom,jn,di);Kt.push({tileID:qi,distanceSq:vr*vr+Ur*Ur})}}if(this.fogCullDistSq){const bn=this.fogCullDistSq,jn=this.horizonLineFromTop();Kt=Kt.filter(di=>{const ni=[0,0,0,1],fi=[g.EXTENT,g.EXTENT,0,1],vr=this.calculateFogTileMatrix(di.tileID.toUnwrapped());g.transformMat4$1(ni,ni,vr),g.transformMat4$1(fi,fi,vr);const Ur=g.getAABBPointSquareDist(ni,fi);if(0===Ur)return!0;let qi=!1;const Ki=this._elevation;if(Ki&&Ur>bn&&0!==jn){const uo=this.calculateProjMatrix(di.tileID.toUnwrapped());let ho;d.isTerrainDEM||(ho=Ki.getMinMaxForTile(di.tileID)),ho||(ho={min:Et,max:bt});const dr=g.furthestTileCorner(this.rotation),_s=[dr[0]*g.EXTENT,dr[1]*g.EXTENT,ho.max];g.transformMat4(_s,_s,uo),qi=(1-_s[1])*this.height*.5<jn}return Ur<bn||qi})}return Kt.sort((bn,jn)=>bn.distanceSq-jn.distanceSq).map(bn=>bn.tileID)}resize(d,y){this.width=d,this.height=y,this.pixelsToGLUnits=[2/d,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const y=g.clamp(d.lat,-g.MAX_MERCATOR_LATITUDE,g.MAX_MERCATOR_LATITUDE),S=this.projection.project(d.lng,y);return new g.Point(S.x*this.worldSize,S.y*this.worldSize)}unproject(d){return this.projection.unproject(d.x/this.worldSize,d.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/g.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(d,y){let S,D;const k=this.centerPoint;if("globe"===this.projection.name){const F=this.worldSize;S=(y.x-k.x)/F,D=(y.y-k.y)/F}else{const F=this.pointCoordinate(y),$=this.pointCoordinate(k);S=F.x-$.x,D=F.y-$.y}const N=this.locationCoordinate(d);this.setLocation(new g.MercatorCoordinate(N.x-S,N.y-D))}setLocation(d){this.center=this.coordinateLocation(d),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(d){return this.projection.locationPoint(this,d)}locationPoint3D(d){return this.projection.locationPoint(this,d,!0)}pointLocation(d){return this.coordinateLocation(this.pointCoordinate(d))}pointLocation3D(d){return this.coordinateLocation(this.pointCoordinate3D(d))}locationCoordinate(d,y){const S=y?g.mercatorZfromAltitude(y,d.lat):void 0,D=this.projection.project(d.lng,d.lat);return new g.MercatorCoordinate(D.x,D.y,S)}coordinateLocation(d){return this.projection.unproject(d.x,d.y)}pointRayIntersection(d,y){const S=y??this._centerAltitude,D=[d.x,d.y,0,1],k=[d.x,d.y,1,1];g.transformMat4$1(D,D,this.pixelMatrixInverse),g.transformMat4$1(k,k,this.pixelMatrixInverse);const N=k[3];g.scale$1(D,D,1/D[3]),g.scale$1(k,k,1/N);const F=D[2],$=k[2];return{p0:D,p1:k,t:F===$?0:(S-F)/($-F)}}screenPointToMercatorRay(d){const y=[d.x,d.y,0,1],S=[d.x,d.y,1,1];return g.transformMat4$1(y,y,this.pixelMatrixInverse),g.transformMat4$1(S,S,this.pixelMatrixInverse),g.scale$1(y,y,1/y[3]),g.scale$1(S,S,1/S[3]),y[2]=g.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,S[2]=g.mercatorZfromAltitude(S[2],this._center.lat)*this.worldSize,g.scale$1(y,y,1/this.worldSize),g.scale$1(S,S,1/this.worldSize),new g.Ray([y[0],y[1],y[2]],g.normalize([],g.sub([],S,y)))}rayIntersectionCoordinate(d){const{p0:y,p1:S,t:D}=d,k=g.mercatorZfromAltitude(y[2],this._center.lat),N=g.mercatorZfromAltitude(S[2],this._center.lat);return new g.MercatorCoordinate(g.number(y[0],S[0],D)/this.worldSize,g.number(y[1],S[1],D)/this.worldSize,g.number(k,N,D))}pointCoordinate(d,y=this._centerAltitude){return this.projection.pointCoordinate(this,d.x,d.y,y)}pointCoordinate3D(d){if(!this.elevation)return this.pointCoordinate(d);let y=this.projection.pointCoordinate3D(this,d.x,d.y);if(y)return new g.MercatorCoordinate(y[0],y[1],y[2]);let S=0,D=this.horizonLineFromTop();if(d.y>D)return this.pointCoordinate(d);const k=.02*D,N=d.clone();for(let F=0;F<10&&D-S>k;F++){N.y=g.number(S,D,.66);const $=this.projection.pointCoordinate3D(this,N.x,N.y);$?(D=N.y,y=$):S=N.y}return y?new g.MercatorCoordinate(y[0],y[1],y[2]):this.pointCoordinate(d)}isPointAboveHorizon(d){return this.projection.isPointAboveHorizon(this,d)}isPointOnSurface(d){if(d.y<0||d.y>this.height||d.x<0||d.x>this.width)return!1;if(this.elevation||this.zoom>=g.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(d);const y=this.pointCoordinate(d);return y.y>=0&&y.y<=1}_coordinatePoint(d,y){const S=y&&this.elevation?this.elevation.getAtPointOrZero(d,this._centerAltitude):this._centerAltitude,D=[d.x*this.worldSize,d.y*this.worldSize,S+d.toAltitude(),1];return g.transformMat4$1(D,D,this.pixelMatrix),D[3]>0?new g.Point(D[0]/D[3],D[1]/D[3]):new g.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:d,left:y}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,k=this.pointLocation3D(new g.Point(y,d)),N=this.pointLocation3D(new g.Point(D,d)),F=this.pointLocation3D(new g.Point(D,S)),$=this.pointLocation3D(new g.Point(y,S));let W=Math.min(k.lng,N.lng,F.lng,$.lng),H=Math.max(k.lng,N.lng,F.lng,$.lng),de=Math.min(k.lat,N.lat,F.lat,$.lat),ze=Math.max(k.lat,N.lat,F.lat,$.lat);const Xe=Math.pow(2,-this.zoom)/16*270,it="globe"===this.projection.name?1:4,ot=(dt,pe,Ye,bt,Et)=>{const jt=(dt+Ye)/2,Gt=(pe+bt)/2,Ut=new g.Point(jt,Gt),{lng:tn,lat:Kt}=this.pointLocation3D(Ut),wn=Math.max(0,W-tn,de-Kt,tn-H,Kt-ze);W=Math.min(W,tn),H=Math.max(H,tn),de=Math.min(de,Kt),ze=Math.max(ze,Kt),(Et<it||wn>Xe)&&(ot(dt,pe,jt,Gt,Et+1),ot(jt,Gt,Ye,bt,Et+1))};if(ot(y,d,D,d,1),ot(D,d,D,S,1),ot(D,S,y,S,1),ot(y,S,y,d,1),"globe"===this.projection.name){const[dt,pe]=g.polesInViewport(this);dt?(ze=90,H=180,W=-180):pe&&(de=-90,H=180,W=-180)}return new g.LngLatBounds(new g.LngLat(W,de),new g.LngLat(H,ze))}_getBoundsRectangular(d,y){const{top:S,left:D}=this._edgeInsets,k=this.height-this._edgeInsets.bottom,N=this.width-this._edgeInsets.right,F=new g.Point(D,S),$=new g.Point(N,S),W=new g.Point(N,k),H=new g.Point(D,k);let de=this.pointCoordinate(F,d),ze=this.pointCoordinate($,d);const Xe=this.pointCoordinate(W,y),it=this.pointCoordinate(H,y),ot=(dt,pe)=>(pe.y-dt.y)/(pe.x-dt.x);return de.y>1&&ze.y>=0?de=new g.MercatorCoordinate((1-it.y)/ot(it,de)+it.x,1):de.y<0&&ze.y<=1&&(de=new g.MercatorCoordinate(-it.y/ot(it,de)+it.x,0)),ze.y>1&&de.y>=0?ze=new g.MercatorCoordinate((1-Xe.y)/ot(Xe,ze)+Xe.x,1):ze.y<0&&de.y<=1&&(ze=new g.MercatorCoordinate(-Xe.y/ot(Xe,ze)+Xe.x,0)),(new g.LngLatBounds).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(ze)).extend(this.coordinateLocation(it)).extend(this.coordinateLocation(Xe))}_getBoundsRectangularTerrain(){const d=this.elevation;if(!d.visibleDemTiles.length||d.isUsingMockSource())return this._getBoundsRectangular(0,0);const y=d.visibleDemTiles.reduce((S,D)=>{if(D.dem){const k=D.dem.tree;S.min=Math.min(S.min,k.minimums[0]),S.max=Math.max(S.max,k.maximums[0])}return S},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(y.min*d.exaggeration(),y.max*d.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(d=!0){const y=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,S=this.height/2-y*(1-this._horizonShift);return d?Math.max(0,S):S}getMaxBounds(){return this.maxBounds}setMaxBounds(d){this.maxBounds=d,this.minLat=-g.MAX_MERCATOR_LATITUDE,this.maxLat=g.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,d&&(this.minLat=d.getSouth(),this.maxLat=d.getNorth(),this.minLng=d.getWest(),this.maxLng=d.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=g.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=g.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=g.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=g.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(d,y){return this.projection.createTileMatrix(this,y,d)}calculateDistanceTileData(d){const y=d.key,S=this._distanceTileDataCache;if(S[y])return S[y];const D=d.canonical,k=1/this.height,N=this.cameraWorldSize,F=N/this.zoomScale(D.z),$=(D.x+Math.pow(2,D.z)*d.wrap)*F,W=D.y*F,H=this.point;H.x*=N/this.worldSize,H.y*=N/this.worldSize;const de=this.angle,ze=Math.sin(-de),Xe=-Math.cos(-de);return S[y]={bearing:[ze,Xe],center:[(H.x-$)*k,(H.y-W)*k],scale:F/g.EXTENT*k},S[y]}calculateFogTileMatrix(d){const y=d.key,S=this._fogTileMatrixCache;if(S[y])return S[y];const D=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,d);return g.multiply(D,this.worldToFogMatrix,D),S[y]=new Float32Array(D),S[y]}calculateProjMatrix(d,y=!1){const S=d.key,D=y?this._alignedProjMatrixCache:this._projMatrixCache;if(D[S])return D[S];const k=this.calculatePosMatrix(d,this.worldSize);return g.multiply(k,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:y?this.alignedProjMatrix:this.projMatrix,k),D[S]=new Float32Array(k),D[S]}calculatePixelsToTileUnitsMatrix(d){const y=d.tileID.key,S=this._pixelsToTileUnitsCache;if(S[y])return S[y];const D=function(k,N){const{scale:F}=k.tileTransform,$=F*g.EXTENT/(k.tileSize*Math.pow(2,N.zoom-k.tileID.overscaledZ+k.tileID.canonical.z));return W=new Float32Array(4),ze=(H=N.inverseAdjustmentMatrix)[1],Xe=H[2],it=H[3],dt=(de=[$,$])[1],W[0]=H[0]*(ot=de[0]),W[1]=ze*ot,W[2]=Xe*dt,W[3]=it*dt,W;var W,H,de,ze,Xe,it,ot,dt}(d,this);return S[y]=D,S[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const d=1/this.worldSize,y=g.fromScaling([],[d,d,d]);return g.multiply(y,y,this.globeMatrix),y}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const d=this._elevation;this._updateCameraState();const y=g.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(y),D=this._camera.forward(),k=g.mercatorZfromAltitude(1,this._center.lat);S[2]/=k,D[2]/=k,g.normalize(D,D);const N=d.raycast(S,D,d.exaggeration());if(N){const F=g.scaleAndAdd([],S,D,N),$=new g.MercatorCoordinate(F[0],F[1],g.mercatorZfromAltitude(F[2],g.latFromMercatorY(F[1]))),W=($.z+g.length([$.x-S[0],$.y-S[1],$.z-S[2]*k]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(W),this._centerAltitude=$.toAltitude(),this._center=this.coordinateLocation($),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(d=!1){if(!this._elevation)return;const y=this._elevation,S=g.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,D=this._computeCameraPosition(S),k=y.getAtPointOrZero(new g.MercatorCoordinate(...D)),N=this.pixelsPerMeter/this.worldSize*k,F=this._minimumHeightOverTerrain(),$=D[2]-N;if($<=F)if($<0||d){const W=this.locationCoordinate(this._center,this._centerAltitude),H=[D[0],D[1],W.z-D[2]],de=g.length(H);H[2]-=(F-$)/this._pixelsPerMercatorPixel;const ze=g.length(H);if(0===ze)return;g.scale$2(H,H,de/ze*this._pixelsPerMercatorPixel),this._camera.position=[D[0],D[1],W.z*this._pixelsPerMercatorPixel-H[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const d="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||d){const ze=this.center;return ze.lat=g.clamp(ze.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!d)&&(ze.lng=g.clamp(ze.lng,this.minLng,this.maxLng)),this.center=ze,void(this._constraining=!1)}const y=this._unmodified,{x:S,y:D}=this.point;let k=0,N=S,F=D;const $=this.width/2,W=this.height/2,H=this.worldMinY*this.scale,de=this.worldMaxY*this.scale;if(D-W<H&&(F=H+W),D+W>de&&(F=de-W),de-H<this.height&&(k=Math.max(k,this.height/(de-H)),F=(de+H)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ze=this.worldMinX*this.scale,Xe=this.worldMaxX*this.scale,it=this.worldSize/2-(ze+Xe)/2;N=(S+it+this.worldSize)%this.worldSize-it,N-$<ze&&(N=ze+$),N+$>Xe&&(N=Xe-$),Xe-ze<this.width&&(k=Math.max(k,this.width/(Xe-ze)),N=(Xe+ze)/2)}N===S&&F===D||(this.center=this.unproject(new g.Point(N,F))),k&&(this.zoom+=this.scaleZoom(k)),this._constrainCamera(),this._unmodified=y,this._constraining=!1}_minZoomForBounds(){let d=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(d=Math.max(d,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),d}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,y=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=g.mercatorZfromAltitude(1,this.center.lat)/g.mercatorZfromAltitude(1,g.GLOBE_SCALE_MATCH_LATITUDE));const S=sa(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,S),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const D="meters"===this.projection.zAxisUnit?y:1,k=this._camera.getWorldToCamera(this.worldSize,D),N=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);N[8]=2*-d.x/this.width,N[9]=2*d.y/this.height;let F=g.mul([],N,k);if(this.projection.isReprojectedInTileSpace){const Gt=this.locationCoordinate(this.center),Ut=g.identity([]);g.translate(Ut,Ut,[Gt.x*this.worldSize,Gt.y*this.worldSize,0]),g.multiply(Ut,Ut,oa(this)),g.translate(Ut,Ut,[-Gt.x*this.worldSize,-Gt.y*this.worldSize,0]),g.multiply(F,F,Ut),this.inverseAdjustmentMatrix=function(tn){const Kt=oa(tn,!0);return K([],[Kt[0],Kt[1],Kt[4],Kt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=g.scale([],F,[this.worldSize,this.worldSize,this.worldSize/D,1]),this.projMatrix=F,this.invProjMatrix=g.invert(new Float64Array(16),this.projMatrix);const $=g.invert([],N);this.frustumCorners=g.FrustumCorners.fromInvProjectionMatrix($,this.horizonLineFromTop(),this.height);const W=new Float32Array(16);g.identity(W),g.scale(W,W,[1,-1,1]),g.rotateX(W,W,this._pitch),g.rotateZ(W,W,this.angle);const H=g.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),de=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;H[8]=2*-d.x/this.width,H[9]=2*(d.y+de)/this.height,this.skyboxMatrix=g.multiply(W,H,W);const ze=this.point,Xe=ze.x,it=ze.y,ot=this.width%2/2,dt=this.height%2/2,pe=Math.cos(this.angle),Ye=Math.sin(this.angle),bt=Xe-Math.round(Xe)+pe*ot+Ye*dt,Et=it-Math.round(it)+pe*dt+Ye*ot,jt=new Float64Array(F);if(g.translate(jt,jt,[bt>.5?bt-1:bt,Et>.5?Et-1:Et,0]),this.alignedProjMatrix=jt,F=g.create(),g.scale(F,F,[this.width/2,-this.height/2,1]),g.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=g.create(),g.scale(F,F,[1,-1,1]),g.translate(F,F,[-1,-1,0]),g.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.pixelMatrix=g.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},F=g.invert(new Float64Array(16),this.pixelMatrix),!F)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=F,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=g.calculateGlobeMatrix(this);const Gt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=g.transformMat4(Gt,Gt,k),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=F;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const d=this.cameraWorldSizeForFog,y=this.cameraPixelsPerMeter,S=this._camera.position,D=1/this.height/this._pixelsPerMercatorPixel,k=[d,d,y];g.scale$2(k,k,D),g.scale$2(S,S,-1),g.multiply$2(S,S,k);const N=g.create();g.translate(N,N,S),g.scale(N,N,k),this.mercatorFogMatrix=N,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(d,y,D)}_computeCameraPosition(d){const y=(d=d||this.pixelsPerMeter)/this.pixelsPerMeter,S=this._camera.forward(),D=this.point,k=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*y-d/this.worldSize*this._centerAltitude;return[D.x/this.worldSize-S[0]*k,D.y/this.worldSize-S[1]*k,d/this.worldSize*this._centerAltitude-S[2]*k]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(d){const y=this._maxCameraBoundsDistance()*Math.cos(this._pitch),S=this._camera.position[2],D=d[2];let k=1;this.projection.wrap&&(this.center=this.center.wrap()),D>0&&(k=Math.min((y-S)/D,1)),this._camera.position=g.scaleAndAdd([],this._camera.position,d,k),this._updateStateFromCamera()}_updateStateFromCamera(){const d=this._camera.position,y=this._camera.forward(),{pitch:S,bearing:D}=this._camera.getPitchBearing(),k=g.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,N=this._mercatorZfromZoom(this._maxZoom)*Math.cos(g.degToRad(this._maxPitch)),F=Math.max((d[2]-k)/Math.cos(S),N),$=this._zoomFromMercatorZ(F);g.scaleAndAdd(d,d,y,F),this._pitch=g.clamp(S,g.degToRad(this.minPitch),g.degToRad(this.maxPitch)),this.angle=g.wrap(D,-Math.PI,Math.PI),this._setZoom(g.clamp($,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new g.MercatorCoordinate(d[0],d[1],d[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(d){return Math.pow(2,d)*this.tileSize}_mercatorZfromZoom(d){return this.cameraToCenterDistance/this._worldSizeFromZoom(d)}_minimumHeightOverTerrain(){const d=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(d)}_zoomFromMercatorZ(d){return this.scaleZoom(this.cameraToCenterDistance/(d*this.tileSize))}zoomFromMercatorZAdjusted(d){let y=0,S=g.GLOBE_ZOOM_THRESHOLD_MAX,D=0,k=1/0;for(;S-y>1e-6&&S>y;){const N=y+.5*(S-y),F=this.tileSize*Math.pow(2,N),$=this.getCameraToCenterDistance(this.projection,N,F),W=this.scaleZoom($/(d*this.tileSize)),H=Math.abs(N-W);H<k&&(k=H,D=N),N<W?y=N:S=N}return D}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(g.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(d,y){const S=Math.min(d.x,y.x),D=Math.max(d.x,y.x),k=Math.min(d.y,y.y),N=Math.max(d.y,y.y);if(k<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const F=[new g.Point(S,k),new g.Point(D,N),new g.Point(S,N),new g.Point(D,k)],$=this.renderWorldCopies?-3:0,W=this.renderWorldCopies?4:1;for(const H of F){const de=this.pointRayIntersection(H);if(de.t<0)return!0;const ze=this.rayIntersectionCoordinate(de);if(ze.x<$||ze.y<0||ze.x>W||ze.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+g.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new g.Point(0,0),new g.Point(this.width,this.height))}zoomDeltaToMovement(d,y){const S=g.length(g.sub([],this._camera.position,d)),D=this._zoomFromMercatorZ(S)+y;return S-this._mercatorZfromZoom(D)}getCameraPoint(){if("globe"===this.projection.name){const d=function([y,S,D],k){const N=[y,S,D,1];g.transformMat4$1(N,N,k);const F=N[3]=Math.max(N[3],1e-6);return N[0]/=F,N[1]/=F,N[2]/=F,N}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new g.Point(d[0],d[1])}{const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new g.Point(0,d))}}getCameraToCenterDistance(d,y=this.zoom,S=this.worldSize){const D=sa(d,y,this.width,this.height,1024),k=d.pixelSpaceConversion(this.center.lat,S,D);return.5/Math.tan(.5*this._fov)*this.height*k}getWorldToCameraMatrix(){const d=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&g.multiply(d,d,this.globeMatrix),d}}function kc(x,d){let y=!1,S=null;const D=()=>{S=null,y&&(x(),S=setTimeout(D,d),y=!1)};return()=>(y=!0,S||D(),S)}class aa{constructor(d){this._hashName=d&&encodeURIComponent(d),g.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=kc(this._updateHashUnthrottled.bind(this),300)}addTo(d){return this._map=d,g.window.addEventListener("hashchange",this._onHashChange,!1),d.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),g.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const d=this._map;if(!d)return"";const y=Bi(d);if(this._hashName){const S=this._hashName;let D=!1;const k=g.window.location.hash.slice(1).split("&").map(N=>{const F=N.split("=")[0];return F===S?(D=!0,`${F}=${y}`):N}).filter(N=>N);return D||k.push(`${S}=${y}`),`#${k.join("&")}`}return`#${y}`}_getCurrentHash(){const d=g.window.location.hash.replace("#","");if(this._hashName){let y;return d.split("&").map(S=>S.split("=")).forEach(S=>{S[0]===this._hashName&&(y=S)}),(y&&y[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._map;if(!d)return!1;const y=this._getCurrentHash();if(y.length>=3&&!y.some(S=>isNaN(S))){const S=d.dragRotate.isEnabled()&&d.touchZoomRotate.isEnabled()?+(y[3]||0):d.getBearing();return d.jumpTo({center:[+y[2],+y[1]],zoom:+y[0],bearing:S,pitch:+(y[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=g.window.location.href.replace(/(#.+)?$/,this.getHashString());g.window.history.replaceState(g.window.history.state,null,d)}}function Bi(x,d){const y=x.getCenter(),S=Math.round(100*x.getZoom())/100,D=Math.ceil((S*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,D),N=Math.round(y.lng*k)/k,F=Math.round(y.lat*k)/k,$=x.getBearing(),W=x.getPitch();let H=d?`/${N}/${F}/${S}`:`${S}/${F}/${N}`;return($||W)&&(H+="/"+Math.round(10*$)/10),W&&(H+=`/${Math.round(W)}`),H}const Or={linearity:.3,easing:g.bezier(0,0,.3,1)},Wr=g.extend({deceleration:2500,maxSpeed:1400},Or),Ss=g.extend({deceleration:20,maxSpeed:1400},Or),Di=g.extend({deceleration:1e3,maxSpeed:360},Or),_o=g.extend({deceleration:1e3,maxSpeed:90},Or);class pd{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,y=g.exported.now();for(;d.length>0&&y-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const y={zoom:0,bearing:0,pitch:0,pan:new g.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)y.zoom+=k.zoomDelta||0,y.bearing+=k.bearingDelta||0,y.pitch+=k.pitchDelta||0,k.panDelta&&y.pan._add(k.panDelta),k.around&&(y.around=k.around),k.pinchAround&&(y.pinchAround=k.pinchAround);const S=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(y.pan.mag()){const k=Is(y.pan.mag(),S,g.extend({},Wr,d||{}));D.offset=y.pan.mult(k.amount/y.pan.mag()),D.center=this._map.transform.center,Ys(D,k)}if(y.zoom){const k=Is(y.zoom,S,Ss);D.zoom=this._map.transform.zoom+k.amount,Ys(D,k)}if(y.bearing){const k=Is(y.bearing,S,Di);D.bearing=this._map.transform.bearing+g.clamp(k.amount,-179,179),Ys(D,k)}if(y.pitch){const k=Is(y.pitch,S,_o);D.pitch=this._map.transform.pitch+k.amount,Ys(D,k)}if(D.zoom||D.bearing){const k=void 0===y.pinchAround?y.around:y.pinchAround;D.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),D.noMoveStart=!0,D}}function Ys(x,d){(!x.duration||x.duration<d.duration)&&(x.duration=d.duration,x.easing=d.easing)}function Is(x,d,y){const{maxSpeed:S,linearity:D,deceleration:k}=y,N=g.clamp(x*D/(d/1e3),-S,S),F=Math.abs(N)/(k*D);return{easing:y.easing,duration:1e3*F,amount:N*(F/2)}}class Va extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,y,S,D={}){const k=Z(y.getCanvasContainer(),S),N=y.unproject(k);super(d,g.extend({point:k,lngLat:N,originalEvent:S},D)),this._defaultPrevented=!1,this.target=y}}class Ir extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,y,S){const D="touchend"===d?S.changedTouches:S.touches,k=ee(y.getCanvasContainer(),D),N=k.map($=>y.unproject($)),F=k.reduce(($,W,H,de)=>$.add(W.div(de.length)),new g.Point(0,0));super(d,{points:k,point:F,lngLats:N,lngLat:y.unproject(F),originalEvent:S}),this._defaultPrevented=!1}}class md extends g.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,y,S){super(d,{originalEvent:S}),this._defaultPrevented=!1}}class Vd{constructor(d,y){this._map=d,this._clickTolerance=y.clickTolerance}reset(){this._mousedownPos=void 0}wheel(d){return this._firePreventable(new md(d.type,this._map,d))}mousedown(d,y){return this._mousedownPos=y,this._firePreventable(new Va(d.type,this._map,d))}mouseup(d){this._map.fire(new Va(d.type,this._map,d))}preclick(d){const y=g.extend({},d);y.type="preclick",this._map.fire(new Va(y.type,this._map,y))}click(d,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||(this.preclick(d),this._map.fire(new Va(d.type,this._map,d)))}dblclick(d){return this._firePreventable(new Va(d.type,this._map,d))}mouseover(d){this._map.fire(new Va(d.type,this._map,d))}mouseout(d){this._map.fire(new Va(d.type,this._map,d))}touchstart(d){return this._firePreventable(new Ir(d.type,this._map,d))}touchmove(d){this._map.fire(new Ir(d.type,this._map,d))}touchend(d){this._map.fire(new Ir(d.type,this._map,d))}touchcancel(d){this._map.fire(new Ir(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gd{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(d){this._map.fire(new Va(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Va("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new Va(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ya{constructor(d,y){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,y){this.isEnabled()&&d.shiftKey&&0===d.button&&(Nt(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(d,y){if(!this._active)return;const S=y,D=this._startPos,k=this._lastPos;if(!D||!k||k.equals(S)||!this._box&&S.dist(D)<this._clickTolerance)return;this._lastPos=S,this._box||(this._box=ct("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const N=Math.min(D.x,S.x),F=Math.max(D.x,S.x),$=Math.min(D.y,S.y),W=Math.max(D.y,S.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${N}px,${$}px)`,this._box.style.width=F-N+"px",this._box.style.height=W-$+"px")})}mouseupWindow(d,y){if(!this._active)return;const S=this._startPos,D=y;if(S&&0===d.button){if(this.reset(),J(),S.x!==D.x||S.y!==D.y)return this._map.fire(new g.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:k=>k.fitScreenCoordinates(S,D,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",d)}}keydown(d){this._active&&27===d.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",d))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),le(),delete this._startPos,delete this._lastPos}_fireEvent(d,y){return this._map.fire(new g.Event(d,{originalEvent:y}))}}function kl(x,d){const y={};for(let S=0;S<x.length;S++)y[x[S].identifier]=d[S];return y}class tc{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(d,y,S){(this.centroid||S.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=d.timeStamp),S.length===this.numTouches&&(this.centroid=function(D){const k=new g.Point(0,0);for(const N of D)k._add(N);return k.div(D.length)}(y),this.touches=kl(S,y)))}touchmove(d,y,S){if(this.aborted||!this.centroid)return;const D=kl(S,y);for(const k in this.touches){const N=D[k];(!N||N.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(d,y,S){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),0===S.length){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class Vl{constructor(d){this.singleTap=new tc(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(d,y,S){this.singleTap.touchstart(d,y,S)}touchmove(d,y,S){this.singleTap.touchmove(d,y,S)}touchend(d,y,S){const D=this.singleTap.touchend(d,y,S);if(D){const k=d.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(D)<30;if(k&&N||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class _h{constructor(){this._zoomIn=new Vl({numTouches:1,numTaps:2}),this._zoomOut=new Vl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,y,S){this._zoomIn.touchstart(d,y,S),this._zoomOut.touchstart(d,y,S)}touchmove(d,y,S){this._zoomIn.touchmove(d,y,S),this._zoomOut.touchmove(d,y,S)}touchend(d,y,S){const D=this._zoomIn.touchend(d,y,S),k=this._zoomOut.touchend(d,y,S);return D?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(D)},{originalEvent:d})}):k?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(k)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ud={0:1,2:2};class hl{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(d,y){return!1}_move(d,y){return{}}mousedown(d,y){if(this._lastPoint)return;const S=ke(d);this._correctButton(d,S)&&(this._lastPoint=y,this._eventButton=S)}mousemoveWindow(d,y){const S=this._lastPoint;if(S)if(d.preventDefault(),null!=this._eventButton&&function(D,k){const N=Ud[k];return void 0===D.buttons||(D.buttons&N)!==N}(d,this._eventButton))this.reset();else if(this._moved||!(y.dist(S)<this._clickTolerance))return this._moved=!0,this._lastPoint=y,this._move(S,y)}mouseupWindow(d){this._lastPoint&&ke(d)===this._eventButton&&(this._moved&&J(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mc extends hl{mousedown(d,y){super.mousedown(d,y),this._lastPoint&&(this._active=!0)}_correctButton(d,y){return 0===y&&!d.ctrlKey}_move(d,y){return{around:y,panDelta:y.sub(d)}}}class pu extends hl{_correctButton(d,y){return 0===y&&d.ctrlKey||2===y}_move(d,y){const S=.8*(y.x-d.x);if(S)return this._active=!0,{bearingDelta:S}}contextmenu(d){d.preventDefault()}}class Pc extends hl{_correctButton(d,y){return 0===y&&d.ctrlKey||2===y}_move(d,y){const S=-.5*(y.y-d.y);if(S)return this._active=!0,{pitchDelta:S}}contextmenu(d){d.preventDefault()}}class Pi{constructor(d,y){this._map=d,this._el=d.getCanvasContainer(),this._minTouches=1,this._clickTolerance=y.clickTolerance||1,this.reset(),g.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new g.Point(0,0)}touchstart(d,y,S){return this._calculateTransform(d,y,S)}touchmove(d,y,S){if(this._active&&!(S.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===S.length&&!g.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return d.cancelable&&d.preventDefault(),this._calculateTransform(d,y,S)}}touchend(d,y,S){this._calculateTransform(d,y,S),this._active&&S.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,y,S){S.length>0&&(this._active=!0);const D=kl(S,y),k=new g.Point(0,0),N=new g.Point(0,0);let F=0;for(const W in D){const H=D[W],de=this._touches[W];de&&(k._add(H),N._add(H.sub(de)),F++,D[W]=H)}if(this._touches=D,F<this._minTouches||!N.mag())return;const $=N.div(F);return this._sum._add($),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(F),panDelta:$}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ct("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class mu{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(d){}_move(d,y,S){return{}}touchstart(d,y,S){this._firstTwoTouches||S.length<2||(this._firstTwoTouches=[S[0].identifier,S[1].identifier],this._start([y[0],y[1]]))}touchmove(d,y,S){const D=this._firstTwoTouches;if(!D)return;d.preventDefault();const[k,N]=D,F=gu(S,y,k),$=gu(S,y,N);if(!F||!$)return;const W=this._aroundCenter?null:F.add($).div(2);return this._move([F,$],W,d)}touchend(d,y,S){if(!this._firstTwoTouches)return;const[D,k]=this._firstTwoTouches,N=gu(S,y,D),F=gu(S,y,k);N&&F||(this._active&&J(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function gu(x,d,y){for(let S=0;S<x.length;S++)if(x[S].identifier===y)return d[S]}function Nu(x,d){return Math.log(x/d)/Math.LN2}class _a extends mu{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,y){const S=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(Nu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nu(this._distance,S),pinchAround:y}}}function vh(x,d){return 180*x.angleWith(d)/Math.PI}class el extends mu{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,y){const S=this._vector;if(this._vector=d[0].sub(d[1]),S&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:vh(this._vector,S),pinchAround:y}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const y=25/(Math.PI*this._minDiameter)*360,S=this._startVector;if(!S)return!1;const D=vh(d,S);return Math.abs(D)<y}}function Ro(x){return Math.abs(x.y)>Math.abs(x.x)}class wl extends mu{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(d){this._lastPoints=d,Ro(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,y,S){const D=this._lastPoints;if(!D)return;const k=d[0].sub(D[0]),N=d[1].sub(D[1]);return this._map._cooperativeGestures&&!g.isFullscreen()&&S.touches.length<3||(this._valid=this.gestureBeginsVertically(k,N,S.timeStamp),!this._valid)?void 0:(this._lastPoints=d,this._active=!0,{pitchDelta:(k.y+N.y)/2*-.5})}gestureBeginsVertically(d,y,S){if(void 0!==this._valid)return this._valid;const D=d.mag()>=2,k=y.mag()>=2;if(!D&&!k)return;if(!D||!k)return null==this._firstMove&&(this._firstMove=S),S-this._firstMove<100&&void 0;const N=d.y>0==y.y>0;return Ro(d)&&Ro(y)&&N}}const Rf={panStep:100,bearingStep:15,pitchStep:10};class c{constructor(){const d=Rf;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let y=0,S=0,D=0,k=0,N=0;switch(d.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:d.shiftKey?S=-1:(d.preventDefault(),k=-1);break;case 39:d.shiftKey?S=1:(d.preventDefault(),k=1);break;case 38:d.shiftKey?D=1:(d.preventDefault(),N=-1);break;case 40:d.shiftKey?D=-1:(d.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(S=0,D=0),{cameraAnimation:F=>{const $=F.getZoom();F.easeTo({duration:300,easeId:"keyboardHandler",easing:f,zoom:y?Math.round($)+y*(d.shiftKey?2:1):$,bearing:F.getBearing()+S*this._bearingStep,pitch:F.getPitch()+D*this._pitchStep,offset:[-k*this._panStep,-N*this._panStep],center:F.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function f(x){return x*(2-x)}const b=4.000244140625;class w{constructor(d,y){this._map=d,this._el=d.getCanvasContainer(),this._handler=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,g.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(d.ctrlKey||d.metaKey||this.isZooming()||g.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let y=d.deltaMode===g.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const S=g.exported.now(),D=S-(this._lastWheelEventTime||0);this._lastWheelEventTime=S,0!==y&&y%b==0?this._type="wheel":0!==y&&Math.abs(y)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(D*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),d.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=d,this._delta-=y,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=Z(this._el,d);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:y,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;"wheel"===this._type&&d.projection.wrap&&(d._center.lng>=180||d._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const y=()=>d._terrainEnabled()&&this._aroundCoord?d.computeZoomRelativeTo(this._aroundCoord):d.zoom;if(0!==this._delta){const $="wheel"===this._type&&Math.abs(this._delta)>b?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&0!==W&&(W=1/W);const H=y(),de=Math.pow(2,H),ze="number"==typeof this._targetZoom?d.zoomScale(this._targetZoom):de;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(ze*W))),"wheel"===this._type&&(this._startZoom=H,this._easing=this._smoothOutEasing(200)),this._delta=0}const S="number"==typeof this._targetZoom?this._targetZoom:y(),D=this._startZoom,k=this._easing;let N,F=!1;if("wheel"===this._type&&D&&k){const $=Math.min((g.exported.now()-this._lastWheelEventTime)/200,1),W=k($);N=g.number(D,S,W),$<1?this._frameId||(this._frameId=!0):F=!0}else N=S,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:N-y(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let y=g.ease;if(this._prevEase){const S=this._prevEase,D=(g.exported.now()-S.start)/S.duration,k=S.easing(D+.01)-S.easing(D),N=.27/Math.sqrt(k*k+1e-4)*.01,F=Math.sqrt(.0729-N*N);y=g.bezier(N,F,.25,1)}return this._prevEase={start:g.exported.now(),duration:d,easing:y},y}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ct("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(g.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class A{constructor(d,y){this._clickZoom=d,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class B{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(d,y){return d.preventDefault(),{cameraAnimation:S=>{S.easeTo({duration:300,zoom:S.getZoom()+(d.shiftKey?-1:1),around:S.unproject(y)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class U{constructor(){this._tap=new Vl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(d,y,S){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?S.length>0&&(this._swipePoint=y[0],this._swipeTouch=S[0].identifier):this._tap.touchstart(d,y,S))}touchmove(d,y,S){if(this._tapTime){if(this._swipePoint){if(S[0].identifier!==this._swipeTouch)return;const D=y[0],k=D.y-this._swipePoint.y;return this._swipePoint=D,d.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(d,y,S)}touchend(d,y,S){this._tapTime?this._swipePoint&&0===S.length&&this.reset():this._tap.touchend(d,y,S)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xe{constructor(d,y,S){this._el=d,this._mousePan=y,this._touchPan=S}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class st{constructor(d,y,S){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=y,this._mousePitch=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $t{constructor(d,y,S,D){this._el=d,this._touchZoom=y,this._touchRotate=S,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const gn=x=>x.zoom||x.drag||x.pitch||x.rotate;class Rn extends g.Event{}class Ai{constructor(){this.constants=[1,1,.01],this.radius=0}setup(d,y){const S=g.sub([],y,d);this.radius=g.length(S[2]<0?g.div([],S,this.constants):[S[0],S[1],0])}projectRay(d){g.div(d,d,this.constants),g.normalize(d,d),g.mul$1(d,d,this.constants);const y=g.scale$2([],d,this.radius);if(y[2]>0){const S=g.scale$2([],[0,0,1],g.dot(y,[0,0,1])),D=g.scale$2([],g.normalize([],[y[0],y[1],0]),this.radius),k=g.add([],y,g.scale$2([],g.sub([],g.add([],D,S),y),2));y[0]=k[0],y[1]=k[1]}return y}}function Si(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class Vi{constructor(d,y){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new pd(d),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ai,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(y),g.bindAll(["handleEvent","handleWindowEvent"],this);const S=this._el;this._listeners=[[S,"touchstart",{passive:!0}],[S,"touchmove",{passive:!1}],[S,"touchend",void 0],[S,"touchcancel",void 0],[S,"mousedown",void 0],[S,"mousemove",void 0],[S,"mouseup",void 0],[g.window.document,"mousemove",{capture:!0}],[g.window.document,"mouseup",void 0],[S,"mouseover",void 0],[S,"mouseout",void 0],[S,"dblclick",void 0],[S,"click",void 0],[S,"keydown",{capture:!1}],[S,"keyup",void 0],[S,"wheel",{passive:!1}],[S,"contextmenu",void 0],[g.window,"blur",void 0]];for(const[D,k,N]of this._listeners)D.addEventListener(k,D===g.window.document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[d,y,S]of this._listeners)d.removeEventListener(y,d===g.window.document?this.handleWindowEvent:this.handleEvent,S)}_addDefaultHandlers(d){const y=this._map,S=y.getCanvasContainer();this._add("mapEvent",new Vd(y,d));const D=y.boxZoom=new Ya(y,d);this._add("boxZoom",D);const k=new _h,N=new B;y.doubleClickZoom=new A(N,k),this._add("tapZoom",k),this._add("clickZoom",N);const F=new U;this._add("tapDragZoom",F);const $=y.touchPitch=new wl(y);this._add("touchPitch",$);const W=new pu(d),H=new Pc(d);y.dragRotate=new st(d,W,H),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);const de=new mc(d),ze=new Pi(y,d);y.dragPan=new xe(S,de,ze),this._add("mousePan",de),this._add("touchPan",ze,["touchZoom","touchRotate"]);const Xe=new el,it=new _a;y.touchZoomRotate=new $t(S,it,Xe,F),this._add("touchRotate",Xe,["touchPan","touchZoom"]),this._add("touchZoom",it,["touchPan","touchRotate"]),this._add("blockableMapEvent",new gd(y));const ot=y.scrollZoom=new w(y,this);this._add("scrollZoom",ot,["mousePan"]);const dt=y.keyboard=new c;this._add("keyboard",dt);for(const pe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[pe]&&y[pe].enable(d[pe])}_add(d,y,S){this._handlers.push({handlerName:d,handler:y,allowed:S}),this._handlersById[d]=y}stop(d){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gn(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(d,y,S){for(const D in d)if(D!==S&&(!y||y.indexOf(D)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const y=[];for(const S of d)this._el.contains(S.target)&&y.push(S);return y}handleEvent(d,y){this._updatingCamera=!0;const S="renderFrame"===d.type,D=S?void 0:d,k={needsRenderFrame:!1},N={},F={},$=d.touches?this._getMapTouches(d.touches):void 0,W=$?ee(this._el,$):S?void 0:Z(this._el,d);for(const{handlerName:ze,handler:Xe,allowed:it}of this._handlers){if(!Xe.isEnabled())continue;let ot;this._blockedByActive(F,it,ze)?Xe.reset():Xe[y||d.type]&&(ot=Xe[y||d.type](d,W,$),this.mergeHandlerResult(k,N,ot,ze,D),ot&&ot.needsRenderFrame&&this._triggerRenderFrame()),(ot||Xe.isActive())&&(F[ze]=Xe)}const H={};for(const ze in this._previousActiveHandlers)F[ze]||(H[ze]=D);this._previousActiveHandlers=F,(Object.keys(H).length||Si(k))&&(this._changes.push([k,N,H]),this._triggerRenderFrame()),(Object.keys(F).length||Si(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:de}=k;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))}mergeHandlerResult(d,y,S,D,k){if(!S)return;g.extend(d,S);const N={handlerName:D,originalEvent:S.originalEvent||k};void 0!==S.zoomDelta&&(y.zoom=N),void 0!==S.panDelta&&(y.drag=N),void 0!==S.pitchDelta&&(y.pitch=N),void 0!==S.bearingDelta&&(y.rotate=N)}_applyChanges(){const d={},y={},S={};for(const[D,k,N]of this._changes)D.panDelta&&(d.panDelta=(d.panDelta||new g.Point(0,0))._add(D.panDelta)),D.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+D.pitchDelta),void 0!==D.around&&(d.around=D.around),void 0!==D.aroundCoord&&(d.aroundCoord=D.aroundCoord),void 0!==D.pinchAround&&(d.pinchAround=D.pinchAround),D.noInertia&&(d.noInertia=D.noInertia),g.extend(y,k),g.extend(S,N);this._updateMapTransform(d,y,S),this._changes=[]}_updateMapTransform(d,y,S){const D=this._map,k=D.transform,N=Ye=>[Ye.x,Ye.y,Ye.z];if((Ye=>{const bt=this._eventsInProgress.drag;return bt&&!this._handlersById[bt.handlerName].isActive()})()&&!Si(d)){const Ye=k.zoom;k.cameraElevationReference="sea",k.recenterOnTerrain(),k.cameraElevationReference="ground",Ye!==k.zoom&&this._map._update(!0)}if(k._isCameraConstrained&&D._stop(!0),!Si(d))return void this._fireEvents(y,S,!0);let{panDelta:F,zoomDelta:$,bearingDelta:W,pitchDelta:H,around:de,aroundCoord:ze,pinchAround:Xe}=d;k._isCameraConstrained&&($>0&&($=0),k._isCameraConstrained=!1),void 0!==Xe&&(de=Xe),($||(Ye=>y.drag&&!this._eventsInProgress.drag)())&&de&&(this._dragOrigin=N(k.pointCoordinate3D(de)),this._trackingEllipsoid.setup(k._camera.position,this._dragOrigin)),k.cameraElevationReference="sea",D._stop(!0),de=de||D.transform.centerPoint,W&&(k.bearing+=W),H&&(k.pitch+=H),k._updateCameraState();const it=[0,0,0];if(F)if("mercator"===k.projection.name){const Ye=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(de).dir),bt=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(de.sub(F)).dir);it[0]=bt[0]-Ye[0],it[1]=bt[1]-Ye[1]}else{const Ye=k.pointCoordinate(de);if("globe"===k.projection.name){F=F.rotate(-k.angle);const bt=k._pixelsPerMercatorPixel/k.worldSize;it[0]=-F.x*g.mercatorScale(g.latFromMercatorY(Ye.y))*bt,it[1]=-F.y*g.mercatorScale(k.center.lat)*bt}else{const bt=k.pointCoordinate(de.sub(F));Ye&&bt&&(it[0]=bt.x-Ye.x,it[1]=bt.y-Ye.y)}}const ot=k.zoom,dt=[0,0,0];if($){const Ye=N(ze||k.pointCoordinate3D(de)),bt={dir:g.normalize([],g.sub([],Ye,k._camera.position))};if(bt.dir[2]<0){const Et=k.zoomDeltaToMovement(Ye,$);g.scale$2(dt,bt.dir,Et)}}const pe=g.add(it,it,dt);k._translateCameraConstrained(pe),$&&Math.abs(k.zoom-ot)>1e-4&&k.recenterOnTerrain(),k.cameraElevationReference="ground",this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(y,S,!0)}_fireEvents(d,y,S){const D=gn(this._eventsInProgress),k=gn(d),N={};for(const H in d){const{originalEvent:de}=d[H];this._eventsInProgress[H]||(N[`${H}start`]=de),this._eventsInProgress[H]=d[H]}!D&&k&&this._fireEvent("movestart",k.originalEvent);for(const H in N)this._fireEvent(H,N[H]);k&&this._fireEvent("move",k.originalEvent);for(const H in d){const{originalEvent:de}=d[H];this._fireEvent(H,de)}const F={};let $;for(const H in this._eventsInProgress){const{handlerName:de,originalEvent:ze}=this._eventsInProgress[H];this._handlersById[de].isActive()||(delete this._eventsInProgress[H],$=y[de]||ze,F[`${H}end`]=$)}for(const H in F)this._fireEvent(H,F[H]);const W=gn(this._eventsInProgress);if(S&&(D||k)&&!W){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=ze=>0!==ze&&-this._bearingSnap<ze&&ze<this._bearingSnap;H?(de(H.bearing||this._map.getBearing())&&(H.bearing=0),this._map.easeTo(H,{originalEvent:$})):(this._map.fire(new g.Event("moveend",{originalEvent:$})),de(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,y){this._map.fire(new g.Event(d,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{this._frameId=void 0,this.handleEvent(new Rn("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const fr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Co extends g.Evented{constructor(d,y){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=y.bearingSnap,this._respectPrefersReducedMotion=!1!==y.respectPrefersReducedMotion,g.bindAll(["_renderFrameCallback"],this)}getCenter(){return new g.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,y){return this.jumpTo({center:d},y)}panBy(d,y,S){return d=g.Point.convert(d).mult(-1),this.panTo(this.transform.center,g.extend({offset:d},y),S)}panTo(d,y,S){return this.easeTo(g.extend({center:d},y),S)}getZoom(){return this.transform.zoom}setZoom(d,y){return this.jumpTo({zoom:d},y),this}zoomTo(d,y,S){return this.easeTo(g.extend({zoom:d},y),S)}zoomIn(d,y){return this.zoomTo(this.getZoom()+1,d,y),this}zoomOut(d,y){return this.zoomTo(this.getZoom()-1,d,y),this}getBearing(){return this.transform.bearing}setBearing(d,y){return this.jumpTo({bearing:d},y),this}getPadding(){return this.transform.padding}setPadding(d,y){return this.jumpTo({padding:d},y),this}rotateTo(d,y,S){return this.easeTo(g.extend({bearing:d},y),S)}resetNorth(d,y){return this.rotateTo(0,g.extend({duration:1e3},d),y),this}resetNorthPitch(d,y){return this.easeTo(g.extend({bearing:0,pitch:0,duration:1e3},d),y),this}snapToNorth(d,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,y):this}getPitch(){return this.transform.pitch}setPitch(d,y){return this.jumpTo({pitch:d},y),this}cameraForBounds(d,y){d=g.LngLatBounds.convert(d);const S=y&&y.bearing||0,D=y&&y.pitch||0,k=d.getNorthWest(),N=d.getSouthEast();return this._cameraForBounds(this.transform,k,N,S,D,y)}_extendCameraOptions(d){const y={top:0,bottom:0,right:0,left:0};if("number"==typeof(d=g.extend({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding){const S=d.padding;d.padding={top:S,bottom:S,right:S,left:S}}return d.padding=g.extend(y,d.padding),d}_minimumAABBFrustumDistance(d,y){const S=y.max[0]-y.min[0],D=y.max[1]-y.min[1];return S/D>d.aspect?S/(2*Math.tan(.5*d.fovX)*d.aspect):D/(2*Math.tan(.5*d.fovY)*d.aspect)}_cameraForBoundsOnGlobe(d,y,S,D,k,N){const F=d.clone(),$=this._extendCameraOptions(N);F.bearing=D,F.pitch=k;const W=g.LngLat.convert(y),H=g.LngLat.convert(S),de=.5*(W.lat+H.lat),ze=.5*(W.lng+H.lng),Xe=g.latLngToECEF(de,ze),it=g.normalize([],Xe),ot=g.normalize([],g.cross([],it,[0,1,0])),dt=g.cross([],ot,it),pe=[ot[0],ot[1],ot[2],0,dt[0],dt[1],dt[2],0,it[0],it[1],it[2],0,0,0,0,1],Ye=[Xe,g.latLngToECEF(W.lat,W.lng),g.latLngToECEF(H.lat,W.lng),g.latLngToECEF(H.lat,H.lng),g.latLngToECEF(W.lat,H.lng),g.latLngToECEF(de,W.lng),g.latLngToECEF(de,H.lng),g.latLngToECEF(W.lat,ze),g.latLngToECEF(H.lat,ze)];let bt=g.Aabb.fromPoints(Ye.map(ni=>[g.dot(ot,ni),g.dot(dt,ni),g.dot(it,ni)]));const Et=g.transformMat4([],bt.center,pe);0===g.squaredLength(Et)&&g.set(Et,0,0,1),g.normalize(Et,Et),g.scale$2(Et,Et,g.GLOBE_RADIUS),F.center=g.ecefToLatLng(Et);const jt=F.getWorldToCameraMatrix(),Gt=g.invert(new Float64Array(16),jt);bt=g.Aabb.applyTransform(bt,g.multiply([],jt,pe)),g.transformMat4(Et,Et,jt);const Ut=.5*(bt.max[2]-bt.min[2]),tn=this._minimumAABBFrustumDistance(F,bt),Kt=g.scale$2([],[0,0,1],Ut),wn=g.add(Kt,Et,Kt),hi=tn+(0===F.pitch?0:g.distance(Et,wn)),mn=F.globeCenterInViewSpace,Hn=g.sub([],Et,[mn[0],mn[1],mn[2]]);g.normalize(Hn,Hn),g.scale$2(Hn,Hn,hi);const Dn=g.add([],Et,Hn);g.transformMat4(Dn,Dn,Gt);const li=g.earthRadius/g.GLOBE_RADIUS,bn=g.length(Dn),jn=g.mercatorZfromAltitude(Math.max(bn*li-g.earthRadius,Number.EPSILON),0),di=Math.min(F.zoomFromMercatorZAdjusted(jn),$.maxZoom);return di>.5*(g.GLOBE_ZOOM_THRESHOLD_MIN+g.GLOBE_ZOOM_THRESHOLD_MAX)?(F.setProjection({name:"mercator"}),F.zoom=di,this._cameraForBounds(F,y,S,D,k,N)):{center:F.center,zoom:di,bearing:D,pitch:k}}queryTerrainElevation(d,y){const S=this.transform.elevation;return S?(y=g.extend({},{exaggerated:!0},y),S.getAtPoint(g.MercatorCoordinate.fromLngLat(d),null,y.exaggerated)):null}_cameraForBounds(d,y,S,D,k,N){if("globe"===d.projection.name)return this._cameraForBoundsOnGlobe(d,y,S,D,k,N);const F=d.clone(),$=this._extendCameraOptions(N),W=F.padding;F.bearing=D,F.pitch=k;const H=g.LngLat.convert(y),de=g.LngLat.convert(S),ze=new g.LngLat(H.lng,de.lat),Xe=new g.LngLat(de.lng,H.lat),it=F.project(H),ot=F.project(de),dt=this.queryTerrainElevation(H),pe=this.queryTerrainElevation(de),Ye=this.queryTerrainElevation(ze),bt=this.queryTerrainElevation(Xe),Et=[[it.x,it.y,Math.min(dt||0,pe||0,Ye||0,bt||0)],[ot.x,ot.y,Math.max(dt||0,pe||0,Ye||0,bt||0)]];let jt=g.Aabb.fromPoints(Et);const Gt=F.getWorldToCameraMatrix(),Ut=g.invert(new Float64Array(16),Gt);jt=g.Aabb.applyTransform(jt,Gt);const tn=g.sub([],jt.max,jt.min),Kt=W.left||0,wn=W.right||0,hi=W.bottom||0,mn=W.top||0,{left:Hn,right:Dn,top:li,bottom:bn}=$.padding,jn=.5*(Kt+wn),di=.5*(mn+hi),ni=Math.min(F.scaleZoom(F.scale*Math.min((F.width-(Kt+wn+Hn+Dn))/tn[0],(F.height-(hi+mn+bn+li))/tn[1])),$.maxZoom),fi=F.scale/F.zoomScale(ni);jt=new g.Aabb([jt.min[0]-(Hn+jn)*fi,jt.min[1]-(bn+di)*fi,jt.min[2]],[jt.max[0]+(Dn+jn)*fi,jt.max[1]+(li+di)*fi,jt.max[2]]);const vr=.5*tn[2],Ur=this._minimumAABBFrustumDistance(F,jt),qi=[0,0,1,0];g.transformMat4$1(qi,qi,Gt),g.normalize$2(qi,qi);const Ki=g.scale$2([],qi,Ur+vr),uo=g.add([],jt.center,Ki),ho=("number"==typeof $.offset.x&&"number"==typeof $.offset.y?new g.Point($.offset.x,$.offset.y):g.Point.convert($.offset)).rotate(-g.degToRad(D));jt.center[0]-=ho.x*fi,jt.center[1]+=ho.y*fi,g.transformMat4(jt.center,jt.center,Ut),g.transformMat4(uo,uo,Ut);const dr=[jt.center[0],jt.center[1],uo[2]*F.pixelsPerMeter];g.scale$2(dr,dr,1/F.worldSize);const _s=g.lngFromMercatorX(dr[0]),zs=g.latFromMercatorY(dr[1]),Zs=Math.min(F._zoomFromMercatorZ(dr[2]),$.maxZoom),ks=new g.LngLat(_s,zs);return F.mercatorFromTransition&&Zs<.5*(g.GLOBE_ZOOM_THRESHOLD_MIN+g.GLOBE_ZOOM_THRESHOLD_MAX)?(F.setProjection({name:"globe"}),F.zoom=Zs,this._cameraForBounds(F,y,S,D,k,N)):{center:ks,zoom:Zs,bearing:D,pitch:k}}fitBounds(d,y,S){const D=this.cameraForBounds(d,y);return this._fitInternal(D,y,S)}fitScreenCoordinates(d,y,S,D,k){const N=g.Point.convert(d),F=g.Point.convert(y),$=new g.Point(Math.min(N.x,F.x),Math.min(N.y,F.y)),W=new g.Point(Math.max(N.x,F.x),Math.max(N.y,F.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(N,F))return this;const H=this.transform.pointLocation3D($),de=this.transform.pointLocation3D(W),ze=this.transform.pointLocation3D(new g.Point($.x,W.y)),Xe=this.transform.pointLocation3D(new g.Point(W.x,$.y)),it=[Math.min(H.lng,de.lng,ze.lng,Xe.lng),Math.min(H.lat,de.lat,ze.lat,Xe.lat)],ot=[Math.max(H.lng,de.lng,ze.lng,Xe.lng),Math.max(H.lat,de.lat,ze.lat,Xe.lat)],dt=D&&D.pitch?D.pitch:this.getPitch(),pe=this._cameraForBounds(this.transform,it,ot,S,dt,D);return this._fitInternal(pe,D,k)}_fitInternal(d,y,S){return d?(delete(y=g.extend(d,y)).padding,y.linear?this.easeTo(y,S):this.flyTo(y,S)):this}jumpTo(d,y){this.stop();const S=d.preloadOnly?this.transform.clone():this.transform;let D=!1,k=!1,N=!1;return"zoom"in d&&S.zoom!==+d.zoom&&(D=!0,S.zoom=+d.zoom),void 0!==d.center&&(S.center=g.LngLat.convert(d.center)),"bearing"in d&&S.bearing!==+d.bearing&&(k=!0,S.bearing=+d.bearing),"pitch"in d&&S.pitch!==+d.pitch&&(N=!0,S.pitch=+d.pitch),null==d.padding||S.isPaddingEqual(d.padding)||(S.padding=d.padding),d.preloadOnly?(this._preloadTiles(S),this):(this.fire(new g.Event("movestart",y)).fire(new g.Event("move",y)),D&&this.fire(new g.Event("zoomstart",y)).fire(new g.Event("zoom",y)).fire(new g.Event("zoomend",y)),k&&this.fire(new g.Event("rotatestart",y)).fire(new g.Event("rotate",y)).fire(new g.Event("rotateend",y)),N&&this.fire(new g.Event("pitchstart",y)).fire(new g.Event("pitch",y)).fire(new g.Event("pitchend",y)),this.fire(new g.Event("moveend",y)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||g.warnOnce(fr),this.transform.getFreeCameraOptions()}setFreeCameraOptions(d,y){const S=this.transform;if(!S.projection.supportsFreeCamera)return g.warnOnce(fr),this;this.stop();const D=S.zoom,k=S.pitch,N=S.bearing;S.setFreeCameraOptions(d);const F=D!==S.zoom,$=k!==S.pitch,W=N!==S.bearing;return this.fire(new g.Event("movestart",y)).fire(new g.Event("move",y)),F&&this.fire(new g.Event("zoomstart",y)).fire(new g.Event("zoom",y)).fire(new g.Event("zoomend",y)),W&&this.fire(new g.Event("rotatestart",y)).fire(new g.Event("rotate",y)).fire(new g.Event("rotateend",y)),$&&this.fire(new g.Event("pitchstart",y)).fire(new g.Event("pitch",y)).fire(new g.Event("pitchend",y)),this.fire(new g.Event("moveend",y)),this}easeTo(d,y){this._stop(!1,d.easeId),(!1===(d=g.extend({offset:[0,0],duration:500,easing:g.ease},d)).animate||this._prefersReducedMotion(d))&&(d.duration=0);const S=this.transform,D=this.getZoom(),k=this.getBearing(),N=this.getPitch(),F=this.getPadding(),$="zoom"in d?+d.zoom:D,W="bearing"in d?this._normalizeBearing(d.bearing,k):k,H="pitch"in d?+d.pitch:N,de="padding"in d?d.padding:S.padding,ze=g.Point.convert(d.offset);let Xe,it,ot;if("globe"===S.projection.name){const Kt=g.MercatorCoordinate.fromLngLat(S.center),wn=ze.rotate(-S.angle);Kt.x+=wn.x/S.worldSize,Kt.y+=wn.y/S.worldSize;const hi=Kt.toLngLat(),mn=g.LngLat.convert(d.center||hi);this._normalizeCenter(mn),Xe=S.centerPoint.add(wn),it=new g.Point(Kt.x,Kt.y).mult(S.worldSize),ot=new g.Point(g.mercatorXfromLng(mn.lng),g.mercatorYfromLat(mn.lat)).mult(S.worldSize).sub(it)}else{Xe=S.centerPoint.add(ze);const Kt=S.pointLocation(Xe),wn=g.LngLat.convert(d.center||Kt);this._normalizeCenter(wn),it=S.project(Kt),ot=S.project(wn).sub(it)}const dt=S.zoomScale($-D);let pe,Ye;d.around&&(pe=g.LngLat.convert(d.around),Ye=S.locationPoint(pe));const bt=this._zooming||$!==D,Et=this._rotating||k!==W,jt=this._pitching||H!==N,Gt=!S.isPaddingEqual(de),Ut=Kt=>wn=>{if(bt&&(Kt.zoom=g.number(D,$,wn)),Et&&(Kt.bearing=g.number(k,W,wn)),jt&&(Kt.pitch=g.number(N,H,wn)),Gt&&(Kt.interpolatePadding(F,de,wn),Xe=Kt.centerPoint.add(ze)),pe)Kt.setLocationAtPoint(pe,Ye);else{const hi=Kt.zoomScale(Kt.zoom-D),mn=$>D?Math.min(2,dt):Math.max(.5,dt),Hn=Math.pow(mn,1-wn),Dn=Kt.unproject(it.add(ot.mult(wn*Hn)).mult(hi));Kt.setLocationAtPoint(Kt.renderWorldCopies?Dn.wrap():Dn,Xe)}return d.preloadOnly||this._fireMoveEvents(y),Kt};if(d.preloadOnly){const Kt=this._emulate(Ut,d.duration,S);return this._preloadTiles(Kt),this}const tn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=bt,this._rotating=Et,this._pitching=jt,this._padding=Gt,this._easeId=d.easeId,this._prepareEase(y,d.noMoveStart,tn),this._ease(Ut(S),Kt=>{S.recenterOnTerrain(),this._afterEase(y,Kt)},d),this}_prepareEase(d,y,S={}){this._moving=!0,this.transform.cameraElevationReference="sea",y||S.moving||this.fire(new g.Event("movestart",d)),this._zooming&&!S.zooming&&this.fire(new g.Event("zoomstart",d)),this._rotating&&!S.rotating&&this.fire(new g.Event("rotatestart",d)),this._pitching&&!S.pitching&&this.fire(new g.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new g.Event("move",d)),this._zooming&&this.fire(new g.Event("zoom",d)),this._rotating&&this.fire(new g.Event("rotate",d)),this._pitching&&this.fire(new g.Event("pitch",d))}_afterEase(d,y){if(this._easeId&&y&&this._easeId===y)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const S=this._zooming,D=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,S&&this.fire(new g.Event("zoomend",d)),D&&this.fire(new g.Event("rotateend",d)),k&&this.fire(new g.Event("pitchend",d)),this.fire(new g.Event("moveend",d))}flyTo(d,y){if(this._prefersReducedMotion(d)){const ni=g.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ni,y)}this.stop(),d=g.extend({offset:[0,0],speed:1.2,curve:1.42,easing:g.ease},d);const S=this.transform,D=this.getZoom(),k=this.getBearing(),N=this.getPitch(),F=this.getPadding(),$="zoom"in d?g.clamp(+d.zoom,S.minZoom,S.maxZoom):D,W="bearing"in d?this._normalizeBearing(d.bearing,k):k,H="pitch"in d?+d.pitch:N,de="padding"in d?d.padding:S.padding,ze=S.zoomScale($-D),Xe=g.Point.convert(d.offset);let it=S.centerPoint.add(Xe);const ot=S.pointLocation(it),dt=g.LngLat.convert(d.center||ot);this._normalizeCenter(dt);const pe=S.project(ot),Ye=S.project(dt).sub(pe);let bt=d.curve;const Et=Math.max(S.width,S.height),jt=Et/ze,Gt=Ye.mag();if("minZoom"in d){const ni=g.clamp(Math.min(d.minZoom,D,$),S.minZoom,S.maxZoom),fi=Et/S.zoomScale(ni-D);bt=Math.sqrt(fi/Gt*2)}const Ut=bt*bt;function tn(ni){const fi=(jt*jt-Et*Et+(ni?-1:1)*Ut*Ut*Gt*Gt)/(2*(ni?jt:Et)*Ut*Gt);return Math.log(Math.sqrt(fi*fi+1)-fi)}function Kt(ni){return(Math.exp(ni)-Math.exp(-ni))/2}function wn(ni){return(Math.exp(ni)+Math.exp(-ni))/2}const hi=tn(0);let mn=function(ni){return wn(hi)/wn(hi+bt*ni)},Hn=function(ni){return Et*((wn(hi)*(Kt(fi=hi+bt*ni)/wn(fi))-Kt(hi))/Ut)/Gt;var fi},Dn=(tn(1)-hi)/bt;if(Math.abs(Gt)<1e-6||!isFinite(Dn)){if(Math.abs(Et-jt)<1e-6)return this.easeTo(d,y);const ni=jt<Et?-1:1;Dn=Math.abs(Math.log(jt/Et))/bt,Hn=function(){return 0},mn=function(fi){return Math.exp(ni*bt*fi)}}d.duration="duration"in d?+d.duration:1e3*Dn/("screenSpeed"in d?+d.screenSpeed/bt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0);const li=k!==W,bn=H!==N,jn=!S.isPaddingEqual(de),di=ni=>fi=>{const vr=fi*Dn,Ur=1/mn(vr);ni.zoom=1===fi?$:D+ni.scaleZoom(Ur),li&&(ni.bearing=g.number(k,W,fi)),bn&&(ni.pitch=g.number(N,H,fi)),jn&&(ni.interpolatePadding(F,de,fi),it=ni.centerPoint.add(Xe));const qi=1===fi?dt:ni.unproject(pe.add(Ye.mult(Hn(vr))).mult(Ur));return ni.setLocationAtPoint(ni.renderWorldCopies?qi.wrap():qi,it),ni._updateCameraOnTerrain(),d.preloadOnly||this._fireMoveEvents(y),ni};if(d.preloadOnly){const ni=this._emulate(di,d.duration,S);return this._preloadTiles(ni),this}return this._zooming=!0,this._rotating=li,this._pitching=bn,this._padding=jn,this._prepareEase(y,!1),this._ease(di(S),()=>this._afterEase(y),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,y){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const S=this._onEaseEnd;this._onEaseEnd=void 0,S.call(this,y)}if(!d){const S=this.handlers;S&&S.stop(!1)}return this}_ease(d,y,S){!1===S.animate||0===S.duration?(d(1),y()):(this._easeStart=g.exported.now(),this._easeOptions=S,this._onEaseFrame=d,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((g.exported.now()-this._easeStart)/this._easeOptions.duration,1),y=this._onEaseFrame;y&&y(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,y){d=g.wrap(d,-180,180);const S=Math.abs(d-y);return Math.abs(d-360-y)<S&&(d-=360),Math.abs(d+360-y)<S&&(d+=360),d}_normalizeCenter(d){const y=this.transform;if(!y.renderWorldCopies||y.maxBounds)return;const S=d.lng-y.center.lng;d.lng+=S>180?-360:S<-180?360:0}_prefersReducedMotion(d){return this._respectPrefersReducedMotion&&g.exported.prefersReducedMotion&&!(d&&d.essential)}_emulate(d,y,S){const D=Math.ceil(15*y/1e3),k=[],N=d(S.clone());for(let F=0;F<=D;F++){const $=N(F/D);k.push($.clone())}return k}}class wi{constructor(d={}){this.options=d,g.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){const y=this.options&&this.options.compact;return this._map=d,this._container=ct("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ct("button","mapboxgl-ctrl-attrib-button",this._container),ct("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ct("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===y&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(d,y){const S=this._map._getUIString(`AttributionControl.${y}`);d.setAttribute("aria-label",S),d.removeAttribute("title"),d.firstElementChild&&d.firstElementChild.setAttribute("title",S)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));const y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||g.config.ACCESS_TOKEN}];if(d){const S=y.reduce((D,k,N)=>(k.value&&(D+=`${k.key}=${k.value}${N<y.length-1?"&":""}`),D),"?");d.href=`${g.config.FEEDBACK_URL}/${S}#${Bi(this._map,!0)}`,d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}}_updateData(d){!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let d=[];if(this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const y=this._map.style._sourceCaches;for(const D in y){const k=y[D];if(k.used){const N=k.getSource();N.attribution&&d.indexOf(N.attribution)<0&&d.push(N.attribution)}}d.sort((D,k)=>D.length-k.length),d=d.filter((D,k)=>{for(let N=k+1;N<d.length;N++)if(d[N].indexOf(D)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=[...this.options.customAttribution,...d]:d.unshift(this.options.customAttribution));const S=d.join(" | ");S!==this._attribHTML&&(this._attribHTML=S,d.length?(this._innerContainer.innerHTML=S,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class El{constructor(){g.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(d){this._map=d,this._container=ct("div","mapboxgl-ctrl");const y=ct("a","mapboxgl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://www.mapbox.com/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(d){d&&"metadata"!==d.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const d=this._map.style._sourceCaches;if(0===Object.entries(d).length)return!0;for(const y in d){const S=d[y].getSource();if(S.hasOwnProperty("mapbox_logo")&&!S.mapbox_logo)return!1}return!0}_updateCompact(){const d=this._container.children;if(d.length){const y=d[0];this._map.getCanvasContainer().offsetWidth<250?y.classList.add("mapboxgl-compact"):y.classList.remove("mapboxgl-compact")}}}class _u{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const y=++this._id;return this._queue.push({callback:d,id:y,cancelled:!1}),y}remove(d){const y=this._currentlyRunning,S=y?this._queue.concat(y):this._queue;for(const D of S)if(D.id===d)return void(D.cancelled=!0)}run(d=0){const y=this._currentlyRunning=this._queue;this._queue=[];for(const S of y)if(!S.cancelled&&(S.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Wc(x,d,y){if(x=new g.LngLat(x.lng,x.lat),d){const S=new g.LngLat(x.lng-360,x.lat),D=new g.LngLat(x.lng+360,x.lat),k=360*Math.ceil(Math.abs(x.lng-y.center.lng)/360),N=y.locationPoint(x).distSqr(d),F=d.x<0||d.y<0||d.x>y.width||d.y>y.height;y.locationPoint(S).distSqr(d)<N&&(F||Math.abs(S.lng-y.center.lng)<k)?x=S:y.locationPoint(D).distSqr(d)<N&&(F||Math.abs(D.lng-y.center.lng)<k)&&(x=D)}for(;Math.abs(x.lng-y.center.lng)>180;){const S=y.locationPoint(x);if(S.x>=0&&S.y>=0&&S.x<=y.width&&S.y<=y.height)break;x.lng>y.center.lng?x.lng-=360:x.lng+=360}return x}const jd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Fi extends g.Evented{constructor(d,y){if(super(),(d instanceof g.window.HTMLElement||y)&&(d=g.extend({element:d},y)),g.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=d&&d.occludedOpacity||.2,d&&d.element)this._element=d.element,this._offset=g.Point.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=ct("div");const D=41,k=27,N=Ht("svg",{display:"block",height:D*this._scale+"px",width:k*this._scale+"px",viewBox:`0 0 ${k} ${D}`},this._element),F=Ht("radialGradient",{id:"shadowGradient"},Ht("defs",{},N));Ht("stop",{offset:"10%","stop-opacity":.4},F),Ht("stop",{offset:"100%","stop-opacity":.05},F),Ht("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},N),Ht("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},N),Ht("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},N),Ht("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},N),this._offset=g.Point.convert(d&&d.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()});const S=this._element.classList;for(const D in jd)S.remove(`mapboxgl-marker-anchor-${D}`);S.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(d){return d===this._map||(this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._updateMoving),d.on("moveend",this._update),d.on("remove",this._clearFadeTimer),d._addMarker(this),this.setDraggable(this._draggable),this._update(),d.on("click",this._onMapClick)),this}remove(){const d=this._map;return d&&(d.off("click",this._onMapClick),d.off("move",this._updateMoving),d.off("moveend",this._update),d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler),d.off("mouseup",this._onUp),d.off("touchend",this._onUp),d.off("mousemove",this._onMove),d.off("touchmove",this._onMove),d.off("remove",this._clearFadeTimer),d._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=g.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(24.6+D)],"bottom-right":[-D,-1*(24.6+D)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=d,d._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(d){const y=d.code,S=d.charCode||d.keyCode;"Space"!==y&&"Enter"!==y&&32!==S&&13!==S||this.togglePopup()}_onMapClick(d){const y=d.originalEvent.target,S=this._element;this._popup&&(y===S||S.contains(y))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?(d.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(d.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const d=this._map,y=this._pos;if(!d||!y)return!1;const S=d.unproject(y),D=d.getFreeCameraOptions();if(!D.position)return!1;const k=D.position.toLngLat();return k.distanceTo(S)<.9*k.distanceTo(this._lngLat)}_evaluateOpacity(){const d=this._map;if(!d)return;const y=this._pos;if(!y||y.x<0||y.x>d.transform.width||y.y<0||y.y>d.transform.height)return void this._clearFadeTimer();const S=d.unproject(y);let D;d._showingGlobe()&&g.isLngLatBehindGlobe(d.transform,this._lngLat)?D=0:(D=1-d._queryFogOpacity(S),d.transform._terrainEnabled()&&d.getTerrain()&&this._behindTerrain()&&(D*=this._occludedOpacity)),this._element.style.opacity=`${D}`,this._element.style.pointerEvents=D>0?"auto":"none",this._popup&&this._popup._setOpacity(D),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const d=this._pos;if(!d||!this._map)return;const y=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${d.x}px,${d.y}px)\n            ${jd[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${y.x}px,${y.y}px)\n        `}_calculateXYTransform(){const d=this._pos,y=this._map,S=this.getPitchAlignment();if(!y||!d||"map"!==S)return"";if(!y._showingGlobe()){const $=y.getPitch();return $?`rotateX(${$}deg)`:""}const D=g.radToDeg(g.globeTiltAtLngLat(y.transform,this._lngLat)),k=d.sub(g.globeCenterToScreenPoint(y.transform)),N=Math.abs(k.x)+Math.abs(k.y);if(0===N)return"";const F=D/N;return`rotateX(${-k.y*F}deg) rotateY(${k.x*F}deg)`}_calculateZTransform(){const d=this._pos,y=this._map;if(!y||!d)return"";let S=0;const D=this.getRotationAlignment();if("map"===D)if(y._showingGlobe()){const k=y.project(new g.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),N=y.project(new g.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(k);S=g.radToDeg(Math.atan2(N.y,N.x))-90}else S=-y.getBearing();else if("horizon"===D){const k=g.smoothstep(4,6,y.getZoom()),N=g.globeCenterToScreenPoint(y.transform);N.y+=k*y.transform.height;const F=d.sub(N),$=g.radToDeg(Math.atan2(F.y,F.x));S=($>90?$-270:$+90)*(1-k)}return S+=this._rotation,S?`rotateZ(${S}deg)`:""}_update(d){g.window.cancelAnimationFrame(this._updateFrameId);const y=this._map;y&&(y.transform.renderWorldCopies&&(this._lngLat=Wc(this._lngLat,this._pos,y.transform)),this._pos=y.project(this._lngLat),!0===d?this._updateFrameId=g.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),y._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(y._showingGlobe()||y.getTerrain()||y.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(d){return this._offset=g.Point.convert(d),this._update(),this}_onMove(d){const y=this._map;if(!y)return;const S=this._pointerdownPos,D=this._positionDelta;if(S&&D){if(!this._isDragging){const k=this._clickTolerance||y._clickTolerance;if(d.point.dist(S)<k)return;this._isDragging=!0}this._pos=d.point.sub(D),this._lngLat=y.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new g.Event("dragstart"))),this.fire(new g.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const d=this._map;d&&(d.off("mousemove",this._onMove),d.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new g.Event("dragend")),this._state="inactive"}_addDragHandler(d){const y=this._map,S=this._pos;y&&S&&this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(S),this._pointerdownPos=d.point,this._state="pending",y.on("mousemove",this._onMove),y.on("touchmove",this._onMove),y.once("mouseup",this._onUp),y.once("touchend",this._onUp))}setDraggable(d){this._draggable=!!d;const y=this._map;return y&&(d?(y.on("mousedown",this._addDragHandler),y.on("touchstart",this._addDragHandler)):(y.off("mousedown",this._addDragHandler),y.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(d){return this._occludedOpacity=d||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Ly={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ny=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function z_(x=new g.Point(0,0),d="bottom"){if("number"==typeof x){const y=Math.round(Math.sqrt(.5*Math.pow(x,2)));switch(d){case"top":return new g.Point(0,x);case"top-left":return new g.Point(y,y);case"top-right":return new g.Point(-y,y);case"bottom":return new g.Point(0,-x);case"bottom-left":return new g.Point(y,-y);case"bottom-right":return new g.Point(-y,-y);case"left":return new g.Point(x,0);case"right":return new g.Point(-x,0)}return new g.Point(0,0)}return x instanceof g.Point||Array.isArray(x)?g.Point.convert(x):g.Point.convert(x[d]||[0,0])}class Fy{constructor(d){this.jumpTo(d)}getValue(d){if(d<=this._startTime)return this._start;if(d>=this._endTime)return this._end;const y=g.easeCubicInOut((d-this._startTime)/(this._endTime-this._startTime));return this._start*(1-y)+this._end*y}isEasing(d){return d>=this._startTime&&d<=this._endTime}jumpTo(d){this._startTime=-1/0,this._endTime=-1/0,this._start=d,this._end=d}easeTo(d,y,S){this._start=this.getValue(y),this._end=d,this._startTime=y,this._endTime=y+S}}const Ex={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Cx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Of={showCompass:!0,showZoom:!0,visualizePitch:!1};class qh{constructor(d,y,S=!1){this._clickTolerance=10,this.element=y,this.mouseRotate=new pu({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,S&&(this.mousePitch=new Pc({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),g.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener("mousedown",this.mousedown),y.addEventListener("touchstart",this.touchstart,{passive:!1}),y.addEventListener("touchmove",this.touchmove),y.addEventListener("touchend",this.touchend),y.addEventListener("touchcancel",this.reset)}down(d,y){this.mouseRotate.mousedown(d,y),this.mousePitch&&this.mousePitch.mousedown(d,y),Nt()}move(d,y){const S=this.map,D=this.mouseRotate.mousemoveWindow(d,y),k=D&&D.bearingDelta;if(k&&S.setBearing(S.getBearing()+k),this.mousePitch){const N=this.mousePitch.mousemoveWindow(d,y),F=N&&N.pitchDelta;F&&S.setPitch(S.getPitch()+F)}}off(){const d=this.element;d.removeEventListener("mousedown",this.mousedown),d.removeEventListener("touchstart",this.touchstart,{passive:!1}),d.removeEventListener("touchmove",this.touchmove),d.removeEventListener("touchend",this.touchend),d.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){le(),g.window.removeEventListener("mousemove",this.mousemove),g.window.removeEventListener("mouseup",this.mouseup)}mousedown(d){this.down(g.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),Z(this.element,d)),g.window.addEventListener("mousemove",this.mousemove),g.window.addEventListener("mouseup",this.mouseup)}mousemove(d){this.move(d,Z(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){1!==d.targetTouches.length?this.reset():(this._startPos=this._lastPos=ee(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){1!==d.targetTouches.length?this.reset():(this._lastPos=ee(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){0===d.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const By={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},zy={maxWidth:100,unit:"metric"},Ul={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},yh={version:g.version,supported:Ne,setRTLTextPlugin:g.setRTLTextPlugin,getRTLTextPluginStatus:g.getRTLTextPluginStatus,Map:class extends Co{constructor(x){if(g.LivePerformanceUtils.mark(g.PerformanceMarkers.create),null!=(x=g.extend({},Cx,x)).minZoom&&null!=x.maxZoom&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=x.minPitch&&null!=x.maxPitch&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=x.minPitch&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=x.maxPitch&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(x.antialias&&g.isSafariWithAntialiasingBug(g.window)&&(x.antialias=!1,g.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new $a(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),x),this._interactive=x.interactive,this._minTileCacheSize=x.minTileCacheSize,this._maxTileCacheSize=x.maxTileCacheSize,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._useWebGL2=x.useWebGL2,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=x.crossSourceCollisions,this._collectResourceTiming=x.collectResourceTiming,this._optimizeForTerrain=x.optimizeForTerrain,this._language=this._parseLanguage(x.language),this._worldview=x.worldview,this._renderTaskQueue=new _u,this._domRenderTaskQueue=new _u,this._controls=[],this._markers=[],this._popups=[],this._mapId=g.uniqueId(),this._locale=g.extend({},Ex,x.locale),this._clickTolerance=x.clickTolerance,this._cooperativeGestures=x.cooperativeGestures,this._performanceMetricsCollection=x.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Fy(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new g.RequestManager(x.transformRequest,x.accessToken,x.testMode),this._silenceAuthErrors=!!x.testMode,"string"==typeof x.container){if(this._container=g.window.document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof g.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(this._container.childNodes.length>0&&g.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),x.maxBounds&&this.setMaxBounds(x.maxBounds),g.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==g.window&&(g.window.addEventListener("online",this._onWindowOnline,!1),g.window.addEventListener("resize",this._onWindowResize,!1),g.window.addEventListener("orientationchange",this._onWindowResize,!1),g.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),g.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Vi(this,x),this._localFontFamily=x.localFontFamily,this._localIdeographFontFamily=x.localIdeographFontFamily,x.style&&this.setStyle(x.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),x.projection&&this.setProjection(x.projection),this._hash=x.hash&&new aa("string"==typeof x.hash&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,g.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),x.attributionControl&&this.addControl(new wi({customAttribution:x.customAttribution})),this._logoControl=new El,this.addControl(this._logoControl,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new g.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new g.Event(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(x,d){if(void 0===d&&(d=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=x.onAdd(this);this._controls.push(x);const S=this._controlPositions[d];return-1!==d.indexOf("bottom")?S.insertBefore(y,S.firstChild):S.appendChild(y),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(x);return d>-1&&this._controls.splice(d,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(x){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const d=!this._moving;return d&&this.fire(new g.Event("movestart",x)).fire(new g.Event("move",x)),this.fire(new g.Event("resize",x)),d&&this.fire(new g.Event("moveend",x)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(x){return this.transform.setMaxBounds(g.LngLatBounds.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x?this.setZoom(x):this.fire(new g.Event("zoomstart")).fire(new g.Event("zoom")).fire(new g.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x?this.setZoom(x):this.fire(new g.Event("zoomstart")).fire(new g.Event("zoom")).fire(new g.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x?this.setPitch(x):this.fire(new g.Event("pitchstart")).fire(new g.Event("pitch")).fire(new g.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x?this.setPitch(x):this.fire(new g.Event("pitchstart")).fire(new g.Event("pitch")).fire(new g.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(x){return"auto"===x?g.window.navigator.language:Array.isArray(x)?0===x.length?void 0:x.map(d=>"auto"===d?g.window.navigator.language:d):x}setLanguage(x){const d=this._parseLanguage(x);if(!this.style||d===this._language)return this;this._language=d,this.style._reloadSources();for(const y of this._controls)y._setLanguage&&y._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(x){return this.style&&x!==this._worldview?(this._worldview=x,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(x){return this._lazyInitEmptyStyle(),x?"string"==typeof x&&(x={name:x}):x=null,this._useExplicitProjection=!!x,this._prioritizeAndUpdateProjection(x,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const x=this.transform,d=x.projection.name;let y;"globe"===d&&x.zoom>=g.GLOBE_ZOOM_THRESHOLD_MAX?(x.setMercatorFromTransition(),y=!0):"mercator"===d&&x.zoom<g.GLOBE_ZOOM_THRESHOLD_MAX&&(x.setProjection({name:"globe"}),y=!0),y&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(x,d){return this._updateProjection(x||d||{name:"mercator"})}_updateProjection(x){let d;if(d="globe"===x.name&&this.transform.zoom>=g.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(x),this.style.applyProjectionUpdate(),d){this.painter.clearBackgroundTiles();for(const y in this.style._sourceCaches)this.style._sourceCaches[y].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(x){return this.transform.locationPoint3D(g.LngLat.convert(x))}unproject(x){return this.transform.pointLocation3D(g.Point.convert(x))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(x,d,y){if("mouseenter"===x||"mouseover"===x){let S=!1;const D=N=>{const F=d.filter(W=>this.getLayer(W)),$=F.length?this.queryRenderedFeatures(N.point,{layers:F}):[];$.length?S||(S=!0,y.call(this,new Va(x,this,N.originalEvent,{features:$}))):S=!1},k=()=>{S=!1};return{layers:new Set(d),listener:y,delegates:{mousemove:D,mouseout:k}}}if("mouseleave"===x||"mouseout"===x){let S=!1;const D=N=>{const F=d.filter($=>this.getLayer($));(F.length?this.queryRenderedFeatures(N.point,{layers:F}):[]).length?S=!0:S&&(S=!1,y.call(this,new Va(x,this,N.originalEvent)))},k=N=>{S&&(S=!1,y.call(this,new Va(x,this,N.originalEvent)))};return{layers:new Set(d),listener:y,delegates:{mousemove:D,mouseout:k}}}{const S=D=>{const k=d.filter(F=>this.getLayer(F)),N=k.length?this.queryRenderedFeatures(D.point,{layers:k}):[];N.length&&(D.features=N,y.call(this,D),delete D.features)};return{layers:new Set(d),listener:y,delegates:{[x]:S}}}}on(x,d,y){if(void 0===y)return super.on(x,d);Array.isArray(d)||(d=[d]);const S=this._createDelegatedListener(x,d,y);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(S);for(const D in S.delegates)this.on(D,S.delegates[D]);return this}once(x,d,y){if(void 0===y)return super.once(x,d);Array.isArray(d)||(d=[d]);const S=this._createDelegatedListener(x,d,y);for(const D in S.delegates)this.once(D,S.delegates[D]);return this}off(x,d,y){if(void 0===y)return super.off(x,d);d=new Set(Array.isArray(d)?d:[d]);const S=(k,N)=>{if(k.size!==N.size)return!1;for(const F of k)if(!N.has(F))return!1;return!0},D=this._delegatedListeners?this._delegatedListeners[x]:void 0;return D&&(k=>{for(let N=0;N<k.length;N++){const F=k[N];if(F.listener===y&&S(F.layers,d)){for(const $ in F.delegates)this.off($,F.delegates[$]);return k.splice(N,1),this}}})(D),this}queryRenderedFeatures(x,d){return this.style?(void 0!==d||void 0===x||x instanceof g.Point||Array.isArray(x)||(d=x,x=void 0),this.style.queryRenderedFeatures(x=x||[[0,0],[this.transform.width,this.transform.height]],d=d||{},this.transform)):[]}querySourceFeatures(x,d){return this.style.querySourceFeatures(x,d)}isPointOnSurface(x){const{name:d}=this.transform.projection;return"globe"!==d&&"mercator"!==d&&g.warnOnce(`${d} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(g.Point.convert(x))}setStyle(x,d){return!1!==(d=g.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},d)).diff&&d.localIdeographFontFamily===this._localIdeographFontFamily&&d.localFontFamily===this._localFontFamily&&this.style&&x?(this._diffStyle(x,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._localFontFamily=d.localFontFamily,this._updateStyle(x,d))}_getUIString(x){const d=this._locale[x];if(null==d)throw new Error(`Missing UI string '${x}'`);return d}_updateStyle(x,d){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),x&&(this.style=new Fs(this,d||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof x?this.style.loadURL(x):this.style.loadJSON(x)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Fs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,d){if("string"==typeof x){const y=this._requestManager.normalizeStyleURL(x),S=this._requestManager.transformRequest(y,g.ResourceType.Style);g.getJSON(S,(D,k)=>{D?this.fire(new g.ErrorEvent(D)):k&&this._updateDiff(k,d)})}else"object"==typeof x&&this._updateDiff(x,d)}_updateDiff(x,d){try{this.style.setState(x)&&this._update(!0)}catch(y){g.warnOnce(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(x,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(g.warnOnce("There is no style added to the map."),!1)}addSource(x,d){return this._lazyInitEmptyStyle(),this.style.addSource(x,d),this._update(!0)}isSourceLoaded(x){return!!this.style&&this.style._isSourceCacheLoaded(x)}areTilesLoaded(){const x=this.style&&this.style._sourceCaches;for(const d in x){const y=x[d]._tiles;for(const S in y){const D=y[S];if("loaded"!==D.state&&"errored"!==D.state)return!1}}return!0}addSourceType(x,d,y){this._lazyInitEmptyStyle(),this.style.addSourceType(x,d,y)}removeSource(x){return this.style.removeSource(x),this._updateTerrain(),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,d,{pixelRatio:y=1,sdf:S=!1,stretchX:D,stretchY:k,content:N}={}){if(this._lazyInitEmptyStyle(),d instanceof g.window.HTMLImageElement||g.window.ImageBitmap&&d instanceof g.window.ImageBitmap){const{width:F,height:$,data:W}=g.exported.getImageData(d);this.style.addImage(x,{data:new g.RGBAImage({width:F,height:$},W),pixelRatio:y,stretchX:D,stretchY:k,content:N,sdf:S,version:0})}else if(void 0===d.width||void 0===d.height)this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:F,height:$}=d,W=d;this.style.addImage(x,{data:new g.RGBAImage({width:F,height:$},new Uint8Array(W.data)),pixelRatio:y,stretchX:D,stretchY:k,content:N,sdf:S,version:0,userImage:W}),W.onAdd&&W.onAdd(this,x)}}updateImage(x,d){const y=this.style.getImage(x);if(!y)return void this.fire(new g.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=d instanceof g.window.HTMLImageElement||g.window.ImageBitmap&&d instanceof g.window.ImageBitmap?g.exported.getImageData(d):d,{width:D,height:k}=S;void 0!==D&&void 0!==k?D===y.data.width&&k===y.data.height?(y.data.replace(S.data,!(d instanceof g.window.HTMLImageElement||g.window.ImageBitmap&&d instanceof g.window.ImageBitmap)),this.style.updateImage(x,y)):this.fire(new g.ErrorEvent(new Error(`The width and height of the updated image (${D}, ${k})\n                must be that same as the previous version of the image\n                (${y.data.width}, ${y.data.height})`))):this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new g.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x,d){g.getImage(this._requestManager.transformRequest(x,g.ResourceType.Image),(y,S)=>{d(y,S instanceof g.window.HTMLImageElement?g.exported.getImageData(S):S)})}listImages(){return this.style.listImages()}addLayer(x,d){return this._lazyInitEmptyStyle(),this.style.addLayer(x,d),this._update(!0)}moveLayer(x,d){return this.style.moveLayer(x,d),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}setLayerZoomRange(x,d,y){return this.style.setLayerZoomRange(x,d,y),this._update(!0)}setFilter(x,d,y={}){return this.style.setFilter(x,d,y),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,d,y,S={}){return this.style.setPaintProperty(x,d,y,S),this._update(!0)}getPaintProperty(x,d){return this.style.getPaintProperty(x,d)}setLayoutProperty(x,d,y,S={}){return this.style.setLayoutProperty(x,d,y,S),this._update(!0)}getLayoutProperty(x,d){return this.style.getLayoutProperty(x,d)}setLight(x,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,d),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(x){return this._lazyInitEmptyStyle(),!x&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(x),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(x){return this._lazyInitEmptyStyle(),this.style.setFog(x),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(x){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(g.LngLat.convert(x),this.transform):0}setFeatureState(x,d){return this.style.setFeatureState(x,d),this._update()}removeFeatureState(x,d){return this.style.removeFeatureState(x,d),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}_updateContainerDimensions(){if(!this._container)return;const x=this._container.getBoundingClientRect().width||400,d=this._container.getBoundingClientRect().height||300;let y,S,D,k=this._container;for(;k&&(!S||!D);){const N=g.window.getComputedStyle(k).transform;N&&"none"!==N&&(y=N.match(/matrix.*\((.+)\)/)[1].split(", "),y[0]&&"0"!==y[0]&&"1"!==y[0]&&(S=y[0]),y[3]&&"0"!==y[3]&&"1"!==y[3]&&(D=y[3])),k=k.parentElement}this._containerWidth=S?Math.abs(x/S):x,this._containerHeight=D?Math.abs(d/D):d}_detectMissingCSS(){"rgb(250, 128, 114)"!==g.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&g.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const x=this._container;x.classList.add("mapboxgl-map"),(this._missingCSSCanary=ct("div","mapboxgl-canary",x)).style.visibility="hidden",this._detectMissingCSS();const d=this._canvasContainer=ct("div","mapboxgl-canvas-container",x);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=ct("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const y=this._controlContainer=ct("div","mapboxgl-control-container",x),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(D=>{S[D]=ct("div",`mapboxgl-ctrl-${D}`,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,d){const y=g.exported.devicePixelRatio||1;this._canvas.width=y*Math.ceil(x),this._canvas.height=y*Math.ceil(d),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${d}px`}_addMarker(x){this._markers.push(x)}_removeMarker(x){const d=this._markers.indexOf(x);-1!==d&&this._markers.splice(d,1)}_addPopup(x){this._popups.push(x)}_removePopup(x){const d=this._popups.indexOf(x);-1!==d&&this._popups.splice(d,1)}_setupPainter(){const x=g.extend({},Ne.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._useWebGL2&&this._canvas.getContext("webgl2",x),y=d||this._canvas.getContext("webgl",x)||this._canvas.getContext("experimental-webgl",x);y?(this._useWebGL2&&!d&&g.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),g.storeAuthState(y,!0),this.painter=new co(y,this.transform,!!d),this.on("data",S=>{"source"===S.dataType&&this.painter.setTileLoadedFlag(!0)}),g.exported$1.testSupport(y)):this.fire(new g.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(x){x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new g.Event("webglcontextlost",{originalEvent:x}))}_contextRestored(x){this._setupPainter(),this.resize(),this._update(),this.fire(new g.Event("webglcontextrestored",{originalEvent:x}))}_onMapScroll(x){if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_requestDomTask(x){!this.loaded()||this.loaded()&&!this.isMoving()?x():this._domRenderTaskQueue.add(x)}_render(x){let d;const y=this.painter.context.extTimerQuery,S=g.exported.now();if(this.listens("gpu-timing-frame")&&(d=y.createQueryEXT(),y.beginQueryEXT(y.TIME_ELAPSED_EXT,d)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],g.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],g.window.performance.now())),this._renderTaskQueue.run(x),this._domRenderTaskQueue.run(x),this._removed)return;this._updateProjectionTransition();const D=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const F=this.transform.zoom,$=this.transform.pitch,W=g.exported.now(),H=new g.EvaluationParameters(F,{now:W,fadeDuration:D,pitch:$,transition:this.style.getTransition()});this.style.update(H)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(S),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):k=this._updateAverageElevation(S),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,D,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:D,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new g.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new g.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),d){const F=g.exported.now()-S;y.endQueryEXT(y.TIME_ELAPSED_EXT,d),setTimeout(()=>{const $=y.getQueryObjectEXT(d,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(d),this.fire(new g.Event("gpu-timing-frame",{cpuTime:F,gpuTime:$})),g.window.performance.mark("frame-gpu",{startTime:S,detail:{gpuTime:$}})},50)}if(this.listens("gpu-timing-layer")){const F=this.painter.collectGpuTimers();setTimeout(()=>{const $=this.painter.queryGpuTimers(F);this.fire(new g.Event("gpu-timing-layer",{layerTimes:$}))},50)}if(this.listens("gpu-timing-deferred-render")){const F=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const $=this.painter.queryGpuTimeDeferredRender(F);this.fire(new g.Event("gpu-timing-deferred-render",{gpuTime:$}))},50)}const N=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(N||this._repaint)this.triggerRepaint();else{const F=!this.isMoving()&&this.loaded();if(F&&(k=this._updateAverageElevation(S,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),F&&(this.fire(new g.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const $=this._calculateSpeedIndex();this.fire(new g.Event("speedindexcompleted",{speedIndex:$})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||N||(this._fullyLoaded=!0,g.LivePerformanceUtils.mark(g.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&g.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(x){for(const d of this._markers)x&&!this.getRenderWorldCopies()&&(d._lngLat=d._lngLat.wrap()),d._update();for(const d of this._popups)!x||this.getRenderWorldCopies()||d._trackPointer||(d._lngLat=d._lngLat.wrap()),d._update()}_updateAverageElevation(x,d=!1){const y=S=>(this.transform.averageElevation=S,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&y(0);if((d||x-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(x)){const S=this.transform.averageElevation;let D=this.transform.sampleAverageElevation(),k=!1;this.transform.elevation&&(k=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(D)?D=0:this._averageElevationLastSampledAt=x;const N=Math.abs(S-D);if(N>1){if(this._isInitialLoad||k)return this._averageElevation.jumpTo(D),y(D);this._averageElevation.easeTo(D,x,300)}else if(N>1e-4)return this._averageElevation.jumpTo(D),y(D)}return!!this._averageElevation.isEasing(x)&&y(this._averageElevation.getValue(x))}_authenticate(){g.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,x=>{if(x&&(x.message===g.AUTH_ERR_MSG||401===x.status)){const d=this.painter.context.gl;g.storeAuthState(d,!1),this._logoControl instanceof El&&this._logoControl._updateLogo(),d&&d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT|d.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new g.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),g.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const x=this._isDragging();this.painter.updateTerrain(this.style,x)}_calculateSpeedIndex(){const x=this.painter.canvasCopy(),d=this.painter.getCanvasCopiesAndTimestamps();d.timeStamps.push(performance.now());const y=this.painter.context.gl,S=y.createFramebuffer();function D(k){y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,k,0);const N=new Uint8Array(y.drawingBufferWidth*y.drawingBufferHeight*4);return y.readPixels(0,0,y.drawingBufferWidth,y.drawingBufferHeight,y.RGBA,y.UNSIGNED_BYTE,N),N}return y.bindFramebuffer(y.FRAMEBUFFER,S),this._canvasPixelComparison(D(x),d.canvasCopies.map(D),d.timeStamps)}_canvasPixelComparison(x,d,y){let S=y[1]-y[0];const D=x.length/4;for(let k=0;k<d.length;k++){const N=d[k];let F=0;for(let $=0;$<N.length;$+=4)N[$]===x[$]&&N[$+1]===x[$+1]&&N[$+2]===x[$+2]&&N[$+3]===x[$+3]&&(F+=1);S+=(y[k+2]-y[k+1])*(1-F/D)}return S}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==g.window&&(g.window.removeEventListener("resize",this._onWindowResize,!1),g.window.removeEventListener("orientationchange",this._onWindowResize,!1),g.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),g.window.removeEventListener("online",this._onWindowOnline,!1),g.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),g.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new g.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(x){this._renderNextFrame=this._renderNextFrame||x,this.style&&!this._frame&&(this._frame=g.exported.frame(d=>{const y=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,y&&this._render(d)}))}_preloadTiles(x){const d=this.style?Object.values(this.style._sourceCaches):[];return g.asyncAll(d,(y,S)=>y._preloadTiles(x,S),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(x){this._trackResize&&this.resize({originalEvent:x})._update()}_onVisibilityChange(){"hidden"===g.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(x){this._showTerrainWireframe!==x&&(this._showTerrainWireframe=x,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(x){this._speedIndexTiming!==x&&(this._speedIndexTiming=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(x){this._showTileAABBs!==x&&(this._showTileAABBs=x,x&&this._update())}_setCacheLimits(x,d){g.setCacheLimits(x,d)}get version(){return g.version}},NavigationControl:class{constructor(x){this.options=g.extend({},Of,x),this._container=ct("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(g.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",d=>{this._map&&this._map.zoomIn({},{originalEvent:d})}),ct("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",d=>{this._map&&this._map.zoomOut({},{originalEvent:d})}),ct("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(g.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",d=>{const y=this._map;y&&(this.options.visualizePitch?y.resetNorthPitch({},{originalEvent:d}):y.resetNorth({},{originalEvent:d}))}),this._compassIcon=ct("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const x=this._map;if(!x)return;const d=x.getZoom(),y=d===x.getMaxZoom(),S=d===x.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=S,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",S.toString())}_rotateCompassArrow(){const x=this._map;if(!x)return;const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(x.transform.pitch*(Math.PI/180)),.5)}) rotateX(${x.transform.pitch}deg) rotateZ(${x.transform.angle*(180/Math.PI)}deg)`:`rotate(${x.transform.angle*(180/Math.PI)}deg)`;x._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=d)})}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),x.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&x.on("pitch",this._rotateCompassArrow),x.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qh(x,this._compass,this.options.visualizePitch)),this._container}onRemove(){const x=this._map;x&&(this._container.remove(),this.options.showZoom&&x.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&x.off("pitch",this._rotateCompassArrow),x.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(x,d){const y=ct("button",x,this._container);return y.type="button",y.addEventListener("click",d),y}_setButtonTitle(x,d){if(!this._map)return;const y=this._map._getUIString(`NavigationControl.${d}`);x.setAttribute("aria-label",y),x.firstElementChild&&x.firstElementChild.setAttribute("title",y)}},GeolocateControl:class extends g.Evented{constructor(x){super(),this.options=g.extend({geolocation:g.window.navigator.geolocation},By,x),g.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=kc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(x){return this._map=x,this._container=ct("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(x){const d=(y=!!this.options.geolocation)=>{this._supportsGeolocation=y,x(y)};void 0!==this._supportsGeolocation?x(this._supportsGeolocation):void 0!==g.window.navigator.permissions?g.window.navigator.permissions.query({name:"geolocation"}).then(y=>d("denied"!==y.state)).catch(()=>d()):d()}_isOutOfMapMaxBounds(x){const d=this._map.getMaxBounds(),y=x.coords;return!!d&&(y.longitude<d.getWest()||y.longitude>d.getEast()||y.latitude<d.getSouth()||y.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new g.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(x),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new g.Event("geolocate",x)),this._finish()}}_updateCamera(x){const d=new g.LngLat(x.coords.longitude,x.coords.latitude),y=x.coords.accuracy,S=this._map.getBearing(),D=g.extend({bearing:S},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(y),D,{geolocateSource:!0})}_updateMarker(x){if(x){const d=new g.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const x=this._map.transform,d=g.mercatorZfromAltitude(1,x._center.lat)*x.worldSize,y=Math.ceil(2*this._accuracy*d);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(x){if(this._map){if(this.options.trackUserLocation)if(1===x.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===x.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new g.Event("error",x)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(x){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=ct("button","mapboxgl-ctrl-geolocate",this._container),ct("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===x){g.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ct("div","mapboxgl-user-location"),this._dotElement.appendChild(ct("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ct("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Fi({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ct("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new g.Event("trackuserlocationend")))})}}_onDeviceOrientation(x){this._userLocationDotMarker&&(x.webkitCompassHeading?this._heading=x.webkitCompassHeading:!0===x.absolute&&(this._heading=-1*x.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return g.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new g.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new g.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new g.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(x={maximumAge:6e5,timeout:0},this._noTimeout=!0):(x=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,x),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const x=()=>{g.window.addEventListener("ondeviceorientationabsolute"in g.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==g.window.DeviceMotionEvent&&"function"==typeof g.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(d=>{"granted"===d&&x()}).catch(console.error):x()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),g.window.removeEventListener("deviceorientation",this._onDeviceOrientation),g.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:wi,ScaleControl:class{constructor(x){this.options=g.extend({},zy,x),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),g.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const x=this.options.maxWidth||100,d=this._map,y=d._containerHeight/2,S=d._containerWidth/2-x/2,D=d.unproject([S,y]),k=d.unproject([S+x,y]),N=D.distanceTo(k);if("imperial"===this.options.unit){const F=3.2808*N;F>5280?this._setScale(x,F/5280,"mile"):this._setScale(x,F,"foot")}else"nautical"===this.options.unit?this._setScale(x,N/1852,"nautical-mile"):N>=1e3?this._setScale(x,N/1e3,"kilometer"):this._setScale(x,N,"meter")}_setScale(x,d,y){this._map._requestDomTask(()=>{const S=function(k){const N=Math.pow(10,`${Math.floor(k)}`.length-1);let F=k/N;return F=F>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:function($){const W=Math.pow(10,Math.ceil(-Math.log($)/Math.LN10));return Math.round($*W)/W}(F),N*F}(d),D=S/d;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==y?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:y}).format(S):`${S}&nbsp;${Ul[y]}`,this._container.style.width=x*D+"px"})}onAdd(x){return this._map=x,this._language=x.getLanguage(),this._container=ct("div","mapboxgl-ctrl mapboxgl-ctrl-scale",x.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(x){this._language=x,this._update()}setUnit(x){this.options.unit=x,this._update()}},FullscreenControl:class{constructor(x){this._fullscreen=!1,x&&x.container&&(x.container instanceof g.window.HTMLElement?this._container=x.container:g.warnOnce("Full screen control 'container' must be a DOM element.")),g.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in g.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in g.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=ct("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",g.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,g.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!g.window.document.fullscreenEnabled&&!g.window.document.webkitFullscreenEnabled)}_setupUI(){const x=this._fullscreenButton=ct("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ct("span","mapboxgl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),g.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",x)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(g.window.document.fullscreenElement||g.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?g.window.document.exitFullscreen?g.window.document.exitFullscreen():g.window.document.webkitCancelFullScreen&&g.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends g.Evented{constructor(x){super(),this.options=g.extend(Object.create(Ly),x),g.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(x&&x.className?x.className.trim().split(/\s+/):[])}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&x.on("preclick",this._onClose),this.options.closeOnMove&&x.on("move",this._onClose),x.on("remove",this.remove),this._update(),x._addPopup(this),this._focusFirstElement(),this._trackPointer?(x.on("mousemove",this._onMouseEvent),x.on("mouseup",this._onMouseEvent),x._canvasContainer.classList.add("mapboxgl-track-pointer")):x.on("move",this._update),this.fire(new g.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const x=this._map;return x&&(x.off("move",this._update),x.off("move",this._onClose),x.off("preclick",this._onClose),x.off("click",this._onClose),x.off("remove",this.remove),x.off("mousemove",this._onMouseEvent),x.off("mouseup",this._onMouseEvent),x.off("drag",this._onMouseEvent),x._canvasContainer&&x._canvasContainer.classList.remove("mapboxgl-track-pointer"),x._removePopup(this),this._map=void 0),this.fire(new g.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(x){this._lngLat=g.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update();const d=this._map;return d&&(d.on("move",this._update),d.off("mousemove",this._onMouseEvent),d._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const x=this._map;return x&&(x.off("move",this._update),x.on("mousemove",this._onMouseEvent),x.on("drag",this._onMouseEvent),x._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(g.window.document.createTextNode(x))}setHTML(x){const d=g.window.document.createDocumentFragment(),y=g.window.document.createElement("body");let S;for(y.innerHTML=x;S=y.firstChild,S;)d.appendChild(S);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){let d=this._content;if(d)for(;d.hasChildNodes();)d.firstChild&&d.removeChild(d.firstChild);else d=this._content=ct("div","mapboxgl-popup-content",this._container||void 0);if(d.appendChild(x),this.options.closeButton){const y=this._closeButton=ct("button","mapboxgl-popup-close-button",d);y.type="button",y.setAttribute("aria-label","Close popup"),y.setAttribute("aria-hidden","true"),y.innerHTML="&#215;",y.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(x){return this._classList.add(x),this._updateClassList(),this}removeClassName(x){return this._classList.delete(x),this._updateClassList(),this}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){let d;return this._classList.delete(x)?d=!1:(this._classList.add(x),d=!0),this._updateClassList(),d}_onMouseEvent(x){this._update(x.point)}_getAnchor(x){if(this.options.anchor)return this.options.anchor;const d=this._map,y=this._container,S=this._pos;if(!d||!y||!S)return"bottom";const D=y.offsetWidth,k=y.offsetHeight,N=S.x<D/2,F=S.x>d.transform.width-D/2;if(S.y+x<k)return N?"top-left":F?"top-right":"top";if(S.y>d.transform.height-k){if(N)return"bottom-left";if(F)return"bottom-right"}return N?"left":F?"right":"bottom"}_updateClassList(){const x=this._container;if(!x)return;const d=[...this._classList];d.push("mapboxgl-popup"),this._anchor&&d.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&d.push("mapboxgl-popup-track-pointer"),x.className=d.join(" ")}_update(x){const d=this._map,y=this._content;if(!d||!this._lngLat&&!this._trackPointer||!y)return;let S=this._container;if(S||(S=this._container=ct("div","mapboxgl-popup",d.getContainer()),this._tip=ct("div","mapboxgl-popup-tip",S),S.appendChild(y)),this.options.maxWidth&&S.style.maxWidth!==this.options.maxWidth&&(S.style.maxWidth=this.options.maxWidth),d.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wc(this._lngLat,this._pos,d.transform)),!this._trackPointer||x){const D=this._pos=this._trackPointer&&x?x:d.project(this._lngLat),k=z_(this.options.offset),N=this._anchor=this._getAnchor(k.y),F=z_(this.options.offset,N),$=D.add(F).round();d._requestDomTask(()=>{this._container&&N&&(this._container.style.transform=`${jd[N]} translate(${$.x}px,${$.y}px)`)})}if(!this._marker&&d._showingGlobe()){const D=g.isLngLatBehindGlobe(d.transform,this._lngLat)?0:1;this._setOpacity(D)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(Ny);x&&x.focus()}_onClose(){this.remove()}_setOpacity(x){this._container&&(this._container.style.opacity=`${x}`),this._content&&(this._content.style.pointerEvents=x?"auto":"none")}},Marker:Fi,Style:Fs,LngLat:g.LngLat,LngLatBounds:g.LngLatBounds,Point:g.Point,MercatorCoordinate:g.MercatorCoordinate,FreeCameraOptions:go,Evented:g.Evented,config:g.config,prewarm:function(){Qn().acquire(an)},clearPrewarmedResources:function(){const x=Vn;x&&(x.isPreloaded()&&1===x.numActive()?(x.release(an),Vn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return g.config.ACCESS_TOKEN},set accessToken(x){g.config.ACCESS_TOKEN=x},get baseApiUrl(){return g.config.API_URL},set baseApiUrl(x){g.config.API_URL=x},get workerCount(){return Sn.workerCount},set workerCount(x){Sn.workerCount=x},get maxParallelImageRequests(){return g.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(x){g.config.MAX_PARALLEL_IMAGE_REQUESTS=x},clearStorage(x){g.clearTileCache(x)},workerUrl:"",workerClass:null,setNow:g.exported.setNow,restoreNow:g.exported.restoreNow};return yh}),ue}()},4772:An=>{"use strict";var Rt=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;An.exports=function Je(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var fe={},Ne=0;Ne<10;Ne++)fe["_"+String.fromCharCode(Ne)]=Ne;if("0123456789"!==Object.getOwnPropertyNames(fe).map(function(ct){return fe[ct]}).join(""))return!1;var He={};return"abcdefghijklmnopqrst".split("").forEach(function(ct){He[ct]=ct}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},He)).join("")}catch{return!1}}()?Object.assign:function(g,fe){for(var Ne,He,Oe=function Le(g){if(null==g)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}(g),ct=1;ct<arguments.length;ct++){for(var Ht in Ne=Object(arguments[ct]))Ce.call(Ne,Ht)&&(Oe[Ht]=Ne[Ht]);if(Rt){He=Rt(Ne);for(var qe=0;qe<He.length;qe++)ue.call(Ne,He[qe])&&(Oe[He[qe]]=Ne[He[qe]])}}return Oe}},4246:An=>{"use strict";var Rt=function(Ce){return Ce!=Ce};An.exports=function(ue,Le){return 0===ue&&0===Le?1/ue==1/Le:!!(ue===Le||Rt(ue)&&Rt(Le))}},314:(An,Rt,Ce)=>{"use strict";var ue=Ce(1648),Le=Ce(5436),Je=Ce(4246),g=Ce(1353),fe=Ce(3090),Ne=Le(g(),Object);ue(Ne,{getPolyfill:g,implementation:Je,shim:fe}),An.exports=Ne},1353:(An,Rt,Ce)=>{"use strict";var ue=Ce(4246);An.exports=function(){return"function"==typeof Object.is?Object.is:ue}},3090:(An,Rt,Ce)=>{"use strict";var ue=Ce(1353),Le=Ce(1648);An.exports=function(){var g=ue();return Le(Object,{is:g},{is:function(){return Object.is!==g}}),g}},7972:(An,Rt,Ce)=>{"use strict";var ue;if(!Object.keys){var Le=Object.prototype.hasOwnProperty,Je=Object.prototype.toString,g=Ce(9637),fe=Object.prototype.propertyIsEnumerable,Ne=!fe.call({toString:null},"toString"),Oe=fe.call(function(){},"prototype"),He=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ct=function(je){var Nt=je.constructor;return Nt&&Nt.prototype===je},Ht={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},qe=function(){if(typeof window>"u")return!1;for(var je in window)try{if(!Ht["$"+je]&&Le.call(window,je)&&null!==window[je]&&"object"==typeof window[je])try{ct(window[je])}catch{return!0}}catch{return!0}return!1}();ue=function(Nt){var le=null!==Nt&&"object"==typeof Nt,we="[object Function]"===Je.call(Nt),J=g(Nt),Z=le&&"[object String]"===Je.call(Nt),ee=[];if(!le&&!we&&!J)throw new TypeError("Object.keys called on a non-object");var ke=Oe&&we;if(Z&&Nt.length>0&&!Le.call(Nt,0))for(var ne=0;ne<Nt.length;++ne)ee.push(String(ne));if(J&&Nt.length>0)for(var K=0;K<Nt.length;++K)ee.push(String(K));else for(var ye in Nt)(!ke||"prototype"!==ye)&&Le.call(Nt,ye)&&ee.push(String(ye));if(Ne)for(var Q=function(je){if(typeof window>"u"||!qe)return ct(je);try{return ct(je)}catch{return!1}}(Nt),he=0;he<He.length;++he)(!Q||"constructor"!==He[he])&&Le.call(Nt,He[he])&&ee.push(He[he]);return ee}}An.exports=ue},7809:(An,Rt,Ce)=>{"use strict";var ue=Array.prototype.slice,Le=Ce(9637),Je=Object.keys,g=Je?function(Oe){return Je(Oe)}:Ce(7972),fe=Object.keys;g.shim=function(){if(Object.keys){var Oe=function(){var He=Object.keys(arguments);return He&&He.length===arguments.length}(1,2);Oe||(Object.keys=function(ct){return Le(ct)?fe(ue.call(ct)):fe(ct)})}else Object.keys=g;return Object.keys||g},An.exports=g},9637:An=>{"use strict";var Rt=Object.prototype.toString;An.exports=function(ue){var Le=Rt.call(ue),Je="[object Arguments]"===Le;return Je||(Je="[object Array]"!==Le&&null!==ue&&"object"==typeof ue&&"number"==typeof ue.length&&ue.length>=0&&"[object Function]"===Rt.call(ue.callee)),Je}},4018:An=>{An.exports=function(Ce,ue,Le,Je){var g=Ce[0],fe=Ce[1],Ne=!1;void 0===Le&&(Le=0),void 0===Je&&(Je=ue.length);for(var Oe=(Je-Le)/2,He=0,ct=Oe-1;He<Oe;ct=He++){var Ht=ue[Le+2*He+0],qe=ue[Le+2*He+1],je=ue[Le+2*ct+1];qe>fe!=je>fe&&g<(ue[Le+2*ct+0]-Ht)*(fe-qe)/(je-qe)+Ht&&(Ne=!Ne)}return Ne}},4179:(An,Rt,Ce)=>{var ue=Ce(4018),Le=Ce(8875);An.exports=function(g,fe,Ne,Oe){return fe.length>0&&Array.isArray(fe[0])?Le(g,fe,Ne,Oe):ue(g,fe,Ne,Oe)},An.exports.nested=Le,An.exports.flat=ue},8875:An=>{An.exports=function(Ce,ue,Le,Je){var g=Ce[0],fe=Ce[1],Ne=!1;void 0===Le&&(Le=0),void 0===Je&&(Je=ue.length);for(var Oe=Je-Le,He=0,ct=Oe-1;He<Oe;ct=He++){var Ht=ue[He+Le][0],qe=ue[He+Le][1],je=ue[ct+Le][1];qe>fe!=je>fe&&g<(ue[ct+Le][0]-Ht)*(fe-qe)/(je-qe)+Ht&&(Ne=!Ne)}return Ne}},8464:function(An){An.exports=function(){"use strict";function Rt(At,Ae){if(!(At instanceof Ae))throw new TypeError("Cannot call a class as a function")}function Ce(At,Ae){for(var Te=0;Te<Ae.length;Te++){var Ee=Ae[Te];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(At,Ee.key,Ee)}}function ue(At,Ae,Te){return Ae&&Ce(At.prototype,Ae),Te&&Ce(At,Te),At}var Le=function At(Ae,Te){this.next=null,this.key=Ae,this.data=Te,this.left=null,this.right=null};function Je(At,Ae){return At>Ae?1:At<Ae?-1:0}function g(At,Ae,Te){for(var Ee=new Le(null,null),lt=Ee,Mt=Ee;;){var ln=Te(At,Ae.key);if(ln<0){if(null===Ae.left)break;if(Te(At,Ae.left.key)<0&&(Ae.left=(Fn=Ae.left).right,Fn.right=Ae,null===(Ae=Fn).left))break;Mt.left=Ae,Mt=Ae,Ae=Ae.left}else{if(!(ln>0))break;if(null===Ae.right)break;var Fn;if(Te(At,Ae.right.key)>0&&(Ae.right=(Fn=Ae.right).left,Fn.left=Ae,null===(Ae=Fn).right))break;lt.right=Ae,lt=Ae,Ae=Ae.right}}return lt.right=Ae.left,Mt.left=Ae.right,Ae.left=Ee.right,Ae.right=Ee.left,Ae}function fe(At,Ae,Te,Ee){var lt=new Le(At,Ae);if(null===Te)return lt.left=lt.right=null,lt;var Mt=Ee(At,(Te=g(At,Te,Ee)).key);return Mt<0?(lt.left=Te.left,lt.right=Te,Te.left=null):Mt>=0&&(lt.right=Te.right,lt.left=Te,Te.right=null),lt}function Ne(At,Ae,Te){var Ee=null,lt=null;if(Ae){var Mt=Te((Ae=g(At,Ae,Te)).key,At);0===Mt?(Ee=Ae.left,lt=Ae.right):Mt<0?(lt=Ae.right,Ae.right=null,Ee=Ae):(Ee=Ae.left,Ae.left=null,lt=Ae)}return{left:Ee,right:lt}}function He(At,Ae,Te,Ee,lt){if(At){Ee(Ae+(Te?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+lt(At)+"\n");var Mt=Ae+(Te?"    ":"\u2502   ");At.left&&He(At.left,Mt,!1,Ee,lt),At.right&&He(At.right,Mt,!0,Ee,lt)}}var ct=function(){function At(Ae){void 0===Ae&&(Ae=Je),this._root=null,this._size=0,this._comparator=Ae}return At.prototype.insert=function(Ae,Te){return this._size++,this._root=fe(Ae,Te,this._root,this._comparator)},At.prototype.add=function(Ae,Te){var Ee=new Le(Ae,Te);null===this._root&&(Ee.left=Ee.right=null,this._size++,this._root=Ee);var lt=this._comparator,Mt=g(Ae,this._root,lt),ln=lt(Ae,Mt.key);return 0===ln?this._root=Mt:(ln<0?(Ee.left=Mt.left,Ee.right=Mt,Mt.left=null):ln>0&&(Ee.right=Mt.right,Ee.left=Mt,Mt.right=null),this._size++,this._root=Ee),this._root},At.prototype.remove=function(Ae){this._root=this._remove(Ae,this._root,this._comparator)},At.prototype._remove=function(Ae,Te,Ee){var lt;return null===Te?null:0===Ee(Ae,(Te=g(Ae,Te,Ee)).key)?(null===Te.left?lt=Te.right:(lt=g(Ae,Te.left,Ee)).right=Te.right,this._size--,lt):Te},At.prototype.pop=function(){var Ae=this._root;if(Ae){for(;Ae.left;)Ae=Ae.left;return this._root=g(Ae.key,this._root,this._comparator),this._root=this._remove(Ae.key,this._root,this._comparator),{key:Ae.key,data:Ae.data}}return null},At.prototype.findStatic=function(Ae){for(var Te=this._root,Ee=this._comparator;Te;){var lt=Ee(Ae,Te.key);if(0===lt)return Te;Te=lt<0?Te.left:Te.right}return null},At.prototype.find=function(Ae){return this._root&&(this._root=g(Ae,this._root,this._comparator),0!==this._comparator(Ae,this._root.key))?null:this._root},At.prototype.contains=function(Ae){for(var Te=this._root,Ee=this._comparator;Te;){var lt=Ee(Ae,Te.key);if(0===lt)return!0;Te=lt<0?Te.left:Te.right}return!1},At.prototype.forEach=function(Ae,Te){for(var Ee=this._root,lt=[],Mt=!1;!Mt;)null!==Ee?(lt.push(Ee),Ee=Ee.left):0!==lt.length?(Ee=lt.pop(),Ae.call(Te,Ee),Ee=Ee.right):Mt=!0;return this},At.prototype.range=function(Ae,Te,Ee,lt){for(var Mt=[],ln=this._comparator,Fn=this._root;0!==Mt.length||Fn;)if(Fn)Mt.push(Fn),Fn=Fn.left;else{if(ln((Fn=Mt.pop()).key,Te)>0)break;if(ln(Fn.key,Ae)>=0&&Ee.call(lt,Fn))return this;Fn=Fn.right}return this},At.prototype.keys=function(){var Ae=[];return this.forEach(function(Te){return Ae.push(Te.key)}),Ae},At.prototype.values=function(){var Ae=[];return this.forEach(function(Te){return Ae.push(Te.data)}),Ae},At.prototype.min=function(){return this._root?this.minNode(this._root).key:null},At.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},At.prototype.minNode=function(Ae){if(void 0===Ae&&(Ae=this._root),Ae)for(;Ae.left;)Ae=Ae.left;return Ae},At.prototype.maxNode=function(Ae){if(void 0===Ae&&(Ae=this._root),Ae)for(;Ae.right;)Ae=Ae.right;return Ae},At.prototype.at=function(Ae){for(var Te=this._root,Ee=!1,lt=0,Mt=[];!Ee;)if(Te)Mt.push(Te),Te=Te.left;else if(Mt.length>0){if(Te=Mt.pop(),lt===Ae)return Te;lt++,Te=Te.right}else Ee=!0;return null},At.prototype.next=function(Ae){var Te=this._root,Ee=null;if(Ae.right){for(Ee=Ae.right;Ee.left;)Ee=Ee.left;return Ee}for(var lt=this._comparator;Te;){var Mt=lt(Ae.key,Te.key);if(0===Mt)break;Mt<0?(Ee=Te,Te=Te.left):Te=Te.right}return Ee},At.prototype.prev=function(Ae){var Te=this._root,Ee=null;if(null!==Ae.left){for(Ee=Ae.left;Ee.right;)Ee=Ee.right;return Ee}for(var lt=this._comparator;Te;){var Mt=lt(Ae.key,Te.key);if(0===Mt)break;Mt<0?Te=Te.left:(Ee=Te,Te=Te.right)}return Ee},At.prototype.clear=function(){return this._root=null,this._size=0,this},At.prototype.toList=function(){return function Qe(At){for(var Ae=At,Te=[],Ee=!1,lt=new Le(null,null),Mt=lt;!Ee;)Ae?(Te.push(Ae),Ae=Ae.left):Te.length>0?Ae=(Ae=Mt=Mt.next=Te.pop()).right:Ee=!0;return Mt.next=null,lt.next}(this._root)},At.prototype.load=function(Ae,Te,Ee){void 0===Te&&(Te=[]),void 0===Ee&&(Ee=!1);var lt=Ae.length,Mt=this._comparator;if(Ee&&le(Ae,Te,0,lt-1,Mt),null===this._root)this._root=Ht(Ae,Te,0,lt),this._size=lt;else{var ln=function Nt(At,Ae,Te){for(var Ee=new Le(null,null),lt=Ee,Mt=At,ln=Ae;null!==Mt&&null!==ln;)Te(Mt.key,ln.key)<0?(lt.next=Mt,Mt=Mt.next):(lt.next=ln,ln=ln.next),lt=lt.next;return null!==Mt?lt.next=Mt:null!==ln&&(lt.next=ln),Ee.next}(this.toList(),function qe(At,Ae){for(var Te=new Le(null,null),Ee=Te,lt=0;lt<At.length;lt++)Ee=Ee.next=new Le(At[lt],Ae[lt]);return Ee.next=null,Te.next}(Ae,Te),Mt);this._root=je({head:ln},0,lt=this._size+lt)}return this},At.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(At.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),At.prototype.toString=function(Ae){void 0===Ae&&(Ae=function(lt){return String(lt.key)});var Te=[];return He(this._root,"",!0,function(Ee){return Te.push(Ee)},Ae),Te.join("")},At.prototype.update=function(Ae,Te,Ee){var lt=this._comparator,Mt=Ne(Ae,this._root,lt),ln=Mt.left,Fn=Mt.right;lt(Ae,Te)<0?Fn=fe(Te,Ee,Fn,lt):ln=fe(Te,Ee,ln,lt),this._root=function Oe(At,Ae,Te){return null===Ae?At:(null===At||((Ae=g(At.key,Ae,Te)).left=At),Ae)}(ln,Fn,lt)},At.prototype.split=function(Ae){return Ne(Ae,this._root,this._comparator)},At}();function Ht(At,Ae,Te,Ee){var lt=Ee-Te;if(lt>0){var Mt=Te+Math.floor(lt/2),Bn=new Le(At[Mt],Ae[Mt]);return Bn.left=Ht(At,Ae,Te,Mt),Bn.right=Ht(At,Ae,Mt+1,Ee),Bn}return null}function je(At,Ae,Te){var Ee=Te-Ae;if(Ee>0){var lt=Ae+Math.floor(Ee/2),Mt=je(At,Ae,lt),ln=At.head;return ln.left=Mt,At.head=At.head.next,ln.right=je(At,lt+1,Te),ln}return null}function le(At,Ae,Te,Ee,lt){if(!(Te>=Ee)){for(var Mt=At[Te+Ee>>1],ln=Te-1,Fn=Ee+1;;){do{ln++}while(lt(At[ln],Mt)<0);do{Fn--}while(lt(At[Fn],Mt)>0);if(ln>=Fn)break;var Bn=At[ln];At[ln]=At[Fn],At[Fn]=Bn,Bn=Ae[ln],Ae[ln]=Ae[Fn],Ae[Fn]=Bn}le(At,Ae,Te,Fn,lt),le(At,Ae,Fn+1,Ee,lt)}}var we=function(Ae,Te){return Ae.ll.x<=Te.x&&Te.x<=Ae.ur.x&&Ae.ll.y<=Te.y&&Te.y<=Ae.ur.y},J=function(Ae,Te){return Te.ur.x<Ae.ll.x||Ae.ur.x<Te.ll.x||Te.ur.y<Ae.ll.y||Ae.ur.y<Te.ll.y?null:{ll:{x:Ae.ll.x<Te.ll.x?Te.ll.x:Ae.ll.x,y:Ae.ll.y<Te.ll.y?Te.ll.y:Ae.ll.y},ur:{x:Ae.ur.x<Te.ur.x?Ae.ur.x:Te.ur.x,y:Ae.ur.y<Te.ur.y?Ae.ur.y:Te.ur.y}}},Z=Number.EPSILON;void 0===Z&&(Z=Math.pow(2,-52));var ee=Z*Z,ke=function(Ae,Te){if(-Z<Ae&&Ae<Z&&-Z<Te&&Te<Z)return 0;var Ee=Ae-Te;return Ee*Ee<ee*Ae*Te?0:Ae<Te?-1:1},ne=function(){function At(){Rt(this,At),this.reset()}return ue(At,[{key:"reset",value:function(){this.xRounder=new K,this.yRounder=new K}},{key:"round",value:function(Te,Ee){return{x:this.xRounder.round(Te),y:this.yRounder.round(Ee)}}}]),At}(),K=function(){function At(){Rt(this,At),this.tree=new ct,this.round(0)}return ue(At,[{key:"round",value:function(Te){var Ee=this.tree.add(Te),lt=this.tree.prev(Ee);if(null!==lt&&0===ke(Ee.key,lt.key))return this.tree.remove(Te),lt.key;var Mt=this.tree.next(Ee);return null!==Mt&&0===ke(Ee.key,Mt.key)?(this.tree.remove(Te),Mt.key):Te}}]),At}(),ye=new ne,Q=function(Ae,Te){return Ae.x*Te.y-Ae.y*Te.x},he=function(Ae,Te){return Ae.x*Te.x+Ae.y*Te.y},se=function(Ae,Te,Ee){var ln=Q({x:Te.x-Ae.x,y:Te.y-Ae.y},{x:Ee.x-Ae.x,y:Ee.y-Ae.y});return ke(ln,0)},be=function(Ae){return Math.sqrt(he(Ae,Ae))},ie=function(Ae,Te,Ee){var lt={x:Te.x-Ae.x,y:Te.y-Ae.y},Mt={x:Ee.x-Ae.x,y:Ee.y-Ae.y};return Q(Mt,lt)/be(Mt)/be(lt)},Ve=function(Ae,Te,Ee){var lt={x:Te.x-Ae.x,y:Te.y-Ae.y},Mt={x:Ee.x-Ae.x,y:Ee.y-Ae.y};return he(Mt,lt)/be(Mt)/be(lt)},Se=function(Ae,Te,Ee){return 0===Te.y?null:{x:Ae.x+Te.x/Te.y*(Ee-Ae.y),y:Ee}},Y=function(Ae,Te,Ee){return 0===Te.x?null:{x:Ee,y:Ae.y+Te.y/Te.x*(Ee-Ae.x)}},De=function(){function At(Ae,Te){Rt(this,At),void 0===Ae.events?Ae.events=[this]:Ae.events.push(this),this.point=Ae,this.isLeft=Te}return ue(At,null,[{key:"compare",value:function(Te,Ee){var lt=At.comparePoints(Te.point,Ee.point);return 0!==lt?lt:(Te.point!==Ee.point&&Te.link(Ee),Te.isLeft!==Ee.isLeft?Te.isLeft?1:-1:$e.compare(Te.segment,Ee.segment))}},{key:"comparePoints",value:function(Te,Ee){return Te.x<Ee.x?-1:Te.x>Ee.x?1:Te.y<Ee.y?-1:Te.y>Ee.y?1:0}}]),ue(At,[{key:"link",value:function(Te){if(Te.point===this.point)throw new Error("Tried to link already linked events");for(var Ee=Te.point.events,lt=0,Mt=Ee.length;lt<Mt;lt++){var ln=Ee[lt];this.point.events.push(ln),ln.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Te=this.point.events.length,Ee=0;Ee<Te;Ee++){var lt=this.point.events[Ee];if(void 0===lt.segment.consumedBy)for(var Mt=Ee+1;Mt<Te;Mt++){var ln=this.point.events[Mt];void 0===ln.consumedBy&&lt.otherSE.point.events===ln.otherSE.point.events&&lt.segment.consume(ln.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Te=[],Ee=0,lt=this.point.events.length;Ee<lt;Ee++){var Mt=this.point.events[Ee];Mt!==this&&!Mt.segment.ringOut&&Mt.segment.isInResult()&&Te.push(Mt)}return Te}},{key:"getLeftmostComparator",value:function(Te){var Ee=this,lt=new Map,Mt=function(Fn){var Bn=Fn.otherSE;lt.set(Fn,{sine:ie(Ee.point,Te.point,Bn.point),cosine:Ve(Ee.point,Te.point,Bn.point)})};return function(ln,Fn){lt.has(ln)||Mt(ln),lt.has(Fn)||Mt(Fn);var Bn=lt.get(ln),yn=Bn.sine,Yi=Bn.cosine,or=lt.get(Fn),ai=or.sine,Ti=or.cosine;return yn>=0&&ai>=0?Yi<Ti?1:Yi>Ti?-1:0:yn<0&&ai<0?Yi<Ti?-1:Yi>Ti?1:0:ai<yn?-1:ai>yn?1:0}}}]),At}(),Ke=0,$e=function(){function At(Ae,Te,Ee,lt){Rt(this,At),this.id=++Ke,this.leftSE=Ae,Ae.segment=this,Ae.otherSE=Te,this.rightSE=Te,Te.segment=this,Te.otherSE=Ae,this.rings=Ee,this.windings=lt}return ue(At,null,[{key:"compare",value:function(Te,Ee){var lt=Te.leftSE.point.x,Mt=Ee.leftSE.point.x,ln=Te.rightSE.point.x,Fn=Ee.rightSE.point.x;if(Fn<lt)return 1;if(ln<Mt)return-1;var Bn=Te.leftSE.point.y,yn=Ee.leftSE.point.y,Yi=Te.rightSE.point.y,or=Ee.rightSE.point.y;if(lt<Mt){if(yn<Bn&&yn<Yi)return 1;if(yn>Bn&&yn>Yi)return-1;var ai=Te.comparePoint(Ee.leftSE.point);if(ai<0)return 1;if(ai>0)return-1;var Ti=Ee.comparePoint(Te.rightSE.point);return 0!==Ti?Ti:-1}if(lt>Mt){if(Bn<yn&&Bn<or)return-1;if(Bn>yn&&Bn>or)return 1;var wr=Ee.comparePoint(Te.leftSE.point);if(0!==wr)return wr;var Gi=Te.comparePoint(Ee.rightSE.point);return Gi<0?1:Gi>0?-1:1}if(Bn<yn)return-1;if(Bn>yn)return 1;if(ln<Fn){var gr=Ee.comparePoint(Te.rightSE.point);if(0!==gr)return gr}if(ln>Fn){var Fr=Te.comparePoint(Ee.rightSE.point);if(Fr<0)return 1;if(Fr>0)return-1}if(ln!==Fn){var zr=Yi-Bn,bo=ln-lt,mt=or-yn,Ie=Fn-Mt;if(zr>bo&&mt<Ie)return 1;if(zr<bo&&mt>Ie)return-1}return ln>Fn?1:ln<Fn||Yi<or?-1:Yi>or?1:Te.id<Ee.id?-1:Te.id>Ee.id?1:0}}]),ue(At,[{key:"replaceRightSE",value:function(Te){this.rightSE=Te,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Te=this.leftSE.point.y,Ee=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Te<Ee?Te:Ee},ur:{x:this.rightSE.point.x,y:Te>Ee?Te:Ee}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Te){return Te.x===this.leftSE.point.x&&Te.y===this.leftSE.point.y||Te.x===this.rightSE.point.x&&Te.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Te){if(this.isAnEndpoint(Te))return 0;var Ee=this.leftSE.point,lt=this.rightSE.point,Mt=this.vector();if(Ee.x===lt.x)return Te.x===Ee.x?0:Te.x<Ee.x?1:-1;if(Te.x===Ee.x+(Te.y-Ee.y)/Mt.y*Mt.x)return 0;var yn=Ee.y+(Te.x-Ee.x)/Mt.x*Mt.y;return Te.y===yn?0:Te.y<yn?-1:1}},{key:"getIntersection",value:function(Te){var Ee=this.bbox(),lt=Te.bbox(),Mt=J(Ee,lt);if(null===Mt)return null;var ln=this.leftSE.point,Fn=this.rightSE.point,Bn=Te.leftSE.point,yn=Te.rightSE.point,Yi=we(Ee,Bn)&&0===this.comparePoint(Bn),or=we(lt,ln)&&0===Te.comparePoint(ln),ai=we(Ee,yn)&&0===this.comparePoint(yn),Ti=we(lt,Fn)&&0===Te.comparePoint(Fn);if(or&&Yi)return Ti&&!ai?Fn:!Ti&&ai?yn:null;if(or)return ai&&ln.x===yn.x&&ln.y===yn.y?null:ln;if(Yi)return Ti&&Fn.x===Bn.x&&Fn.y===Bn.y?null:Bn;if(Ti&&ai)return null;if(Ti)return Fn;if(ai)return yn;var wr=function(Ae,Te,Ee,lt){if(0===Te.x)return Y(Ee,lt,Ae.x);if(0===lt.x)return Y(Ae,Te,Ee.x);if(0===Te.y)return Se(Ee,lt,Ae.y);if(0===lt.y)return Se(Ae,Te,Ee.y);var Mt=Q(Te,lt);if(0==Mt)return null;var ln={x:Ee.x-Ae.x,y:Ee.y-Ae.y},Fn=Q(ln,Te)/Mt,Bn=Q(ln,lt)/Mt;return{x:(Ae.x+Bn*Te.x+(Ee.x+Fn*lt.x))/2,y:(Ae.y+Bn*Te.y+(Ee.y+Fn*lt.y))/2}}(ln,this.vector(),Bn,Te.vector());return null!==wr&&we(Mt,wr)?ye.round(wr.x,wr.y):null}},{key:"split",value:function(Te){var Ee=[],lt=void 0!==Te.events,Mt=new De(Te,!0),ln=new De(Te,!1),Fn=this.rightSE;this.replaceRightSE(ln),Ee.push(ln),Ee.push(Mt);var Bn=new At(Mt,Fn,this.rings.slice(),this.windings.slice());return De.comparePoints(Bn.leftSE.point,Bn.rightSE.point)>0&&Bn.swapEvents(),De.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),lt&&(Mt.checkForConsuming(),ln.checkForConsuming()),Ee}},{key:"swapEvents",value:function(){var Te=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Te,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Ee=0,lt=this.windings.length;Ee<lt;Ee++)this.windings[Ee]*=-1}},{key:"consume",value:function(Te){for(var Ee=this,lt=Te;Ee.consumedBy;)Ee=Ee.consumedBy;for(;lt.consumedBy;)lt=lt.consumedBy;var Mt=At.compare(Ee,lt);if(0!==Mt){if(Mt>0){var ln=Ee;Ee=lt,lt=ln}if(Ee.prev===lt){var Fn=Ee;Ee=lt,lt=Fn}for(var Bn=0,yn=lt.rings.length;Bn<yn;Bn++){var Yi=lt.rings[Bn],or=lt.windings[Bn],ai=Ee.rings.indexOf(Yi);-1===ai?(Ee.rings.push(Yi),Ee.windings.push(or)):Ee.windings[ai]+=or}lt.rings=null,lt.windings=null,lt.consumedBy=Ee,lt.leftSE.consumedBy=Ee.leftSE,lt.rightSE.consumedBy=Ee.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var Te=this.beforeState();this._afterState={rings:Te.rings.slice(0),windings:Te.windings.slice(0),multiPolys:[]};for(var Ee=this._afterState.rings,lt=this._afterState.windings,Mt=this._afterState.multiPolys,ln=0,Fn=this.rings.length;ln<Fn;ln++){var Bn=this.rings[ln],yn=this.windings[ln],Yi=Ee.indexOf(Bn);-1===Yi?(Ee.push(Bn),lt.push(yn)):lt[Yi]+=yn}for(var or=[],ai=[],Ti=0,wr=Ee.length;Ti<wr;Ti++)if(0!==lt[Ti]){var Gi=Ee[Ti],gr=Gi.poly;if(-1===ai.indexOf(gr))if(Gi.isExterior)or.push(gr);else{-1===ai.indexOf(gr)&&ai.push(gr);var Fr=or.indexOf(Gi.poly);-1!==Fr&&or.splice(Fr,1)}}for(var zr=0,bo=or.length;zr<bo;zr++){var mt=or[zr].multiPoly;-1===Mt.indexOf(mt)&&Mt.push(mt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var Te=this.beforeState().multiPolys,Ee=this.afterState().multiPolys;switch(Tn.type){case"union":this._isInResult=0===Te.length!=(0===Ee.length);break;case"intersection":var ln,Fn;Te.length<Ee.length?(ln=Te.length,Fn=Ee.length):(ln=Ee.length,Fn=Te.length),this._isInResult=Fn===Tn.numMultiPolys&&ln<Fn;break;case"xor":var Bn=Math.abs(Te.length-Ee.length);this._isInResult=Bn%2==1;break;case"difference":var yn=function(or){return 1===or.length&&or[0].isSubject};this._isInResult=yn(Te)!==yn(Ee);break;default:throw new Error("Unrecognized operation type found ".concat(Tn.type))}return this._isInResult}}],[{key:"fromRing",value:function(Te,Ee,lt){var Mt,ln,Fn,Bn=De.comparePoints(Te,Ee);if(Bn<0)Mt=Te,ln=Ee,Fn=1;else{if(!(Bn>0))throw new Error("Tried to create degenerate segment at [".concat(Te.x,", ").concat(Te.y,"]"));Mt=Ee,ln=Te,Fn=-1}return new At(new De(Mt,!0),new De(ln,!1),[lt],[Fn])}}]),At}(),ae=function(){function At(Ae,Te,Ee){if(Rt(this,At),!Array.isArray(Ae)||0===Ae.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Te,this.isExterior=Ee,this.segments=[],"number"!=typeof Ae[0][0]||"number"!=typeof Ae[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var lt=ye.round(Ae[0][0],Ae[0][1]);this.bbox={ll:{x:lt.x,y:lt.y},ur:{x:lt.x,y:lt.y}};for(var Mt=lt,ln=1,Fn=Ae.length;ln<Fn;ln++){if("number"!=typeof Ae[ln][0]||"number"!=typeof Ae[ln][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Bn=ye.round(Ae[ln][0],Ae[ln][1]);Bn.x===Mt.x&&Bn.y===Mt.y||(this.segments.push($e.fromRing(Mt,Bn,this)),Bn.x<this.bbox.ll.x&&(this.bbox.ll.x=Bn.x),Bn.y<this.bbox.ll.y&&(this.bbox.ll.y=Bn.y),Bn.x>this.bbox.ur.x&&(this.bbox.ur.x=Bn.x),Bn.y>this.bbox.ur.y&&(this.bbox.ur.y=Bn.y),Mt=Bn)}(lt.x!==Mt.x||lt.y!==Mt.y)&&this.segments.push($e.fromRing(Mt,lt,this))}return ue(At,[{key:"getSweepEvents",value:function(){for(var Te=[],Ee=0,lt=this.segments.length;Ee<lt;Ee++){var Mt=this.segments[Ee];Te.push(Mt.leftSE),Te.push(Mt.rightSE)}return Te}}]),At}(),Ze=function(){function At(Ae,Te){if(Rt(this,At),!Array.isArray(Ae))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ae(Ae[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Ee=1,lt=Ae.length;Ee<lt;Ee++){var Mt=new ae(Ae[Ee],this,!1);Mt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Mt.bbox.ll.x),Mt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Mt.bbox.ll.y),Mt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Mt.bbox.ur.x),Mt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Mt.bbox.ur.y),this.interiorRings.push(Mt)}this.multiPoly=Te}return ue(At,[{key:"getSweepEvents",value:function(){for(var Te=this.exteriorRing.getSweepEvents(),Ee=0,lt=this.interiorRings.length;Ee<lt;Ee++)for(var Mt=this.interiorRings[Ee].getSweepEvents(),ln=0,Fn=Mt.length;ln<Fn;ln++)Te.push(Mt[ln]);return Te}}]),At}(),et=function(){function At(Ae,Te){if(Rt(this,At),!Array.isArray(Ae))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof Ae[0][0][0]&&(Ae=[Ae])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Ee=0,lt=Ae.length;Ee<lt;Ee++){var Mt=new Ze(Ae[Ee],this);Mt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Mt.bbox.ll.x),Mt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Mt.bbox.ll.y),Mt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Mt.bbox.ur.x),Mt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Mt.bbox.ur.y),this.polys.push(Mt)}this.isSubject=Te}return ue(At,[{key:"getSweepEvents",value:function(){for(var Te=[],Ee=0,lt=this.polys.length;Ee<lt;Ee++)for(var Mt=this.polys[Ee].getSweepEvents(),ln=0,Fn=Mt.length;ln<Fn;ln++)Te.push(Mt[ln]);return Te}}]),At}(),dn=function(){function At(Ae){Rt(this,At),this.events=Ae;for(var Te=0,Ee=Ae.length;Te<Ee;Te++)Ae[Te].segment.ringOut=this;this.poly=null}return ue(At,null,[{key:"factory",value:function(Te){for(var Ee=[],lt=0,Mt=Te.length;lt<Mt;lt++){var ln=Te[lt];if(ln.isInResult()&&!ln.ringOut){for(var Fn=null,Bn=ln.leftSE,yn=ln.rightSE,Yi=[Bn],or=Bn.point,ai=[];Fn=Bn,Yi.push(Bn=yn),Bn.point!==or;)for(;;){var Ti=Bn.getAvailableLinkedEvents();if(0===Ti.length){var wr=Yi[0].point,Gi=Yi[Yi.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(wr.x,",")+" ".concat(wr.y,"]. Last matching segment found ends at")+" [".concat(Gi.x,", ").concat(Gi.y,"]."))}if(1===Ti.length){yn=Ti[0].otherSE;break}for(var gr=null,Fr=0,zr=ai.length;Fr<zr;Fr++)if(ai[Fr].point===Bn.point){gr=Fr;break}if(null===gr){ai.push({index:Yi.length,point:Bn.point});var Ie=Bn.getLeftmostComparator(Fn);yn=Ti.sort(Ie)[0].otherSE;break}var bo=ai.splice(gr)[0],mt=Yi.splice(bo.index);mt.unshift(mt[0].otherSE),Ee.push(new At(mt.reverse()))}Ee.push(new At(Yi))}}return Ee}}]),ue(At,[{key:"getGeom",value:function(){for(var Te=this.events[0].point,Ee=[Te],lt=1,Mt=this.events.length-1;lt<Mt;lt++){var ln=this.events[lt].point;0!==se(ln,Te,this.events[lt+1].point)&&(Ee.push(ln),Te=ln)}if(1===Ee.length)return null;0===se(Ee[0],Te,Ee[1])&&Ee.shift(),Ee.push(Ee[0]);for(var Yi=this.isExteriorRing()?1:-1,or=this.isExteriorRing()?0:Ee.length-1,ai=this.isExteriorRing()?Ee.length:-1,Ti=[],wr=or;wr!=ai;wr+=Yi)Ti.push([Ee[wr].x,Ee[wr].y]);return Ti}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var Te=this.enclosingRing();this._isExteriorRing=!Te||!Te.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Te=this.events[0],Ee=1,lt=this.events.length;Ee<lt;Ee++){var Mt=this.events[Ee];De.compare(Te,Mt)>0&&(Te=Mt)}for(var ln=Te.segment.prevInResult(),Fn=ln?ln.prevInResult():null;;){if(!ln)return null;if(!Fn)return ln.ringOut;if(Fn.ringOut!==ln.ringOut)return Fn.ringOut.enclosingRing()!==ln.ringOut?ln.ringOut:ln.ringOut.enclosingRing();ln=Fn.prevInResult(),Fn=ln?ln.prevInResult():null}}}]),At}(),qt=function(){function At(Ae){Rt(this,At),this.exteriorRing=Ae,Ae.poly=this,this.interiorRings=[]}return ue(At,[{key:"addInterior",value:function(Te){this.interiorRings.push(Te),Te.poly=this}},{key:"getGeom",value:function(){var Te=[this.exteriorRing.getGeom()];if(null===Te[0])return null;for(var Ee=0,lt=this.interiorRings.length;Ee<lt;Ee++){var Mt=this.interiorRings[Ee].getGeom();null!==Mt&&Te.push(Mt)}return Te}}]),At}(),_n=function(){function At(Ae){Rt(this,At),this.rings=Ae,this.polys=this._composePolys(Ae)}return ue(At,[{key:"getGeom",value:function(){for(var Te=[],Ee=0,lt=this.polys.length;Ee<lt;Ee++){var Mt=this.polys[Ee].getGeom();null!==Mt&&Te.push(Mt)}return Te}},{key:"_composePolys",value:function(Te){for(var Ee=[],lt=0,Mt=Te.length;lt<Mt;lt++){var ln=Te[lt];if(!ln.poly)if(ln.isExteriorRing())Ee.push(new qt(ln));else{var Fn=ln.enclosingRing();Fn.poly||Ee.push(new qt(Fn)),Fn.poly.addInterior(ln)}}return Ee}}]),At}(),kn=function(){function At(Ae){var Te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e.compare;Rt(this,At),this.queue=Ae,this.tree=new ct(Te),this.segments=[]}return ue(At,[{key:"process",value:function(Te){var Ee=Te.segment,lt=[];if(Te.consumedBy)return Te.isLeft?this.queue.remove(Te.otherSE):this.tree.remove(Ee),lt;var Mt=Te.isLeft?this.tree.insert(Ee):this.tree.find(Ee);if(!Mt)throw new Error("Unable to find segment #".concat(Ee.id," ")+"[".concat(Ee.leftSE.point.x,", ").concat(Ee.leftSE.point.y,"] -> ")+"[".concat(Ee.rightSE.point.x,", ").concat(Ee.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var ln=Mt,Fn=Mt,Bn=void 0,yn=void 0;void 0===Bn;)null===(ln=this.tree.prev(ln))?Bn=null:void 0===ln.key.consumedBy&&(Bn=ln.key);for(;void 0===yn;)null===(Fn=this.tree.next(Fn))?yn=null:void 0===Fn.key.consumedBy&&(yn=Fn.key);if(Te.isLeft){var Yi=null;if(Bn){var or=Bn.getIntersection(Ee);if(null!==or&&(Ee.isAnEndpoint(or)||(Yi=or),!Bn.isAnEndpoint(or)))for(var ai=this._splitSafely(Bn,or),Ti=0,wr=ai.length;Ti<wr;Ti++)lt.push(ai[Ti])}var Gi=null;if(yn){var gr=yn.getIntersection(Ee);if(null!==gr&&(Ee.isAnEndpoint(gr)||(Gi=gr),!yn.isAnEndpoint(gr)))for(var Fr=this._splitSafely(yn,gr),zr=0,bo=Fr.length;zr<bo;zr++)lt.push(Fr[zr])}if(null!==Yi||null!==Gi){var mt;mt=null===Yi?Gi:null===Gi||De.comparePoints(Yi,Gi)<=0?Yi:Gi,this.queue.remove(Ee.rightSE),lt.push(Ee.rightSE);for(var Me=Ee.split(mt),pt=0,Ct=Me.length;pt<Ct;pt++)lt.push(Me[pt])}lt.length>0?(this.tree.remove(Ee),lt.push(Te)):(this.segments.push(Ee),Ee.prev=Bn)}else{if(Bn&&yn){var at=Bn.getIntersection(yn);if(null!==at){if(!Bn.isAnEndpoint(at))for(var en=this._splitSafely(Bn,at),Zt=0,It=en.length;Zt<It;Zt++)lt.push(en[Zt]);if(!yn.isAnEndpoint(at))for(var un=this._splitSafely(yn,at),Xn=0,ri=un.length;Xn<ri;Xn++)lt.push(un[Xn])}}this.tree.remove(Ee)}return lt}},{key:"_splitSafely",value:function(Te,Ee){this.tree.remove(Te);var lt=Te.rightSE;this.queue.remove(lt);var Mt=Te.split(Ee);return Mt.push(lt),void 0===Te.consumedBy&&this.tree.insert(Te),Mt}}]),At}(),ei=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Vt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Tn=new(function(){function At(){Rt(this,At)}return ue(At,[{key:"run",value:function(Te,Ee,lt){Tn.type=Te,ye.reset();for(var Mt=[new et(Ee,!0)],ln=0,Fn=lt.length;ln<Fn;ln++)Mt.push(new et(lt[ln],!1));if(Tn.numMultiPolys=Mt.length,"difference"===Tn.type)for(var Bn=Mt[0],yn=1;yn<Mt.length;)null!==J(Mt[yn].bbox,Bn.bbox)?yn++:Mt.splice(yn,1);if("intersection"===Tn.type)for(var Yi=0,or=Mt.length;Yi<or;Yi++)for(var ai=Mt[Yi],Ti=Yi+1,wr=Mt.length;Ti<wr;Ti++)if(null===J(ai.bbox,Mt[Ti].bbox))return[];for(var Gi=new ct(De.compare),gr=0,Fr=Mt.length;gr<Fr;gr++)for(var zr=Mt[gr].getSweepEvents(),bo=0,mt=zr.length;bo<mt;bo++)if(Gi.insert(zr[bo]),Gi.size>ei)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Ie=new kn(Gi),Me=Gi.size,pt=Gi.pop();pt;){var Ct=pt.key;if(Gi.size===Me){var at=Ct.segment;throw new Error("Unable to pop() ".concat(Ct.isLeft?"left":"right"," SweepEvent ")+"[".concat(Ct.point.x,", ").concat(Ct.point.y,"] from segment #").concat(at.id," ")+"[".concat(at.leftSE.point.x,", ").concat(at.leftSE.point.y,"] -> ")+"[".concat(at.rightSE.point.x,", ").concat(at.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Gi.size>ei)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Ie.segments.length>Vt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var en=Ie.process(Ct),Zt=0,It=en.length;Zt<It;Zt++){var un=en[Zt];void 0===un.consumedBy&&Gi.insert(un)}Me=Gi.size,pt=Gi.pop()}ye.reset();var Xn=dn.factory(Ie.segments);return new _n(Xn).getGeom()}}]),At}());return{union:function(Ae){for(var Te=arguments.length,Ee=new Array(Te>1?Te-1:0),lt=1;lt<Te;lt++)Ee[lt-1]=arguments[lt];return Tn.run("union",Ae,Ee)},intersection:function(Ae){for(var Te=arguments.length,Ee=new Array(Te>1?Te-1:0),lt=1;lt<Te;lt++)Ee[lt-1]=arguments[lt];return Tn.run("intersection",Ae,Ee)},xor:function(Ae){for(var Te=arguments.length,Ee=new Array(Te>1?Te-1:0),lt=1;lt<Te;lt++)Ee[lt-1]=arguments[lt];return Tn.run("xor",Ae,Ee)},difference:function(Ae){for(var Te=arguments.length,Ee=new Array(Te>1?Te-1:0),lt=1;lt<Te;lt++)Ee[lt-1]=arguments[lt];return Tn.run("difference",Ae,Ee)}}}()},7861:(An,Rt,Ce)=>{"use strict";An.exports=Le,An.exports.default=Le;var ue=Ce(2136);function Le(J,Z){if(!(this instanceof Le))return new Le(J,Z);this._maxEntries=Math.max(4,J||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),Z&&this._initFormat(Z),this.clear()}function Je(J,Z,ee){if(!ee)return Z.indexOf(J);for(var ke=0;ke<Z.length;ke++)if(ee(J,Z[ke]))return ke;return-1}function g(J,Z){fe(J,0,J.children.length,Z,J)}function fe(J,Z,ee,ke,ne){ne||(ne=le(null)),ne.minX=1/0,ne.minY=1/0,ne.maxX=-1/0,ne.maxY=-1/0;for(var ye,K=Z;K<ee;K++)ye=J.children[K],Ne(ne,J.leaf?ke(ye):ye);return ne}function Ne(J,Z){return J.minX=Math.min(J.minX,Z.minX),J.minY=Math.min(J.minY,Z.minY),J.maxX=Math.max(J.maxX,Z.maxX),J.maxY=Math.max(J.maxY,Z.maxY),J}function Oe(J,Z){return J.minX-Z.minX}function He(J,Z){return J.minY-Z.minY}function ct(J){return(J.maxX-J.minX)*(J.maxY-J.minY)}function Ht(J){return J.maxX-J.minX+(J.maxY-J.minY)}function qe(J,Z){return(Math.max(Z.maxX,J.maxX)-Math.min(Z.minX,J.minX))*(Math.max(Z.maxY,J.maxY)-Math.min(Z.minY,J.minY))}function Qe(J,Z){var ee=Math.max(J.minX,Z.minX),ke=Math.max(J.minY,Z.minY),ne=Math.min(J.maxX,Z.maxX),K=Math.min(J.maxY,Z.maxY);return Math.max(0,ne-ee)*Math.max(0,K-ke)}function je(J,Z){return J.minX<=Z.minX&&J.minY<=Z.minY&&Z.maxX<=J.maxX&&Z.maxY<=J.maxY}function Nt(J,Z){return Z.minX<=J.maxX&&Z.minY<=J.maxY&&Z.maxX>=J.minX&&Z.maxY>=J.minY}function le(J){return{children:J,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function we(J,Z,ee,ke,ne){for(var ye,K=[Z,ee];K.length;)!((ee=K.pop())-(Z=K.pop())<=ke)&&(ye=Z+Math.ceil((ee-Z)/ke/2)*ke,ue(J,ye,Z,ee,ne),K.push(Z,ye,ye,ee))}Le.prototype={all:function(){return this._all(this.data,[])},search:function(J){var Z=this.data,ee=[],ke=this.toBBox;if(!Nt(J,Z))return ee;for(var K,ye,Q,he,ne=[];Z;){for(K=0,ye=Z.children.length;K<ye;K++)Q=Z.children[K],Nt(J,he=Z.leaf?ke(Q):Q)&&(Z.leaf?ee.push(Q):je(J,he)?this._all(Q,ee):ne.push(Q));Z=ne.pop()}return ee},collides:function(J){var Z=this.data,ee=this.toBBox;if(!Nt(J,Z))return!1;for(var ne,K,ye,Q,ke=[];Z;){for(ne=0,K=Z.children.length;ne<K;ne++)if(ye=Z.children[ne],Nt(J,Q=Z.leaf?ee(ye):ye)){if(Z.leaf||je(J,Q))return!0;ke.push(ye)}Z=ke.pop()}return!1},load:function(J){if(!J||!J.length)return this;if(J.length<this._minEntries){for(var Z=0,ee=J.length;Z<ee;Z++)this.insert(J[Z]);return this}var ke=this._build(J.slice(),0,J.length-1,0);if(this.data.children.length)if(this.data.height===ke.height)this._splitRoot(this.data,ke);else{if(this.data.height<ke.height){var ne=this.data;this.data=ke,ke=ne}this._insert(ke,this.data.height-ke.height-1,!0)}else this.data=ke;return this},insert:function(J){return J&&this._insert(J,this.data.height-1),this},clear:function(){return this.data=le([]),this},remove:function(J,Z){if(!J)return this;for(var ye,Q,he,se,ee=this.data,ke=this.toBBox(J),ne=[],K=[];ee||ne.length;){if(ee||(ee=ne.pop(),Q=ne[ne.length-1],ye=K.pop(),se=!0),ee.leaf&&-1!==(he=Je(J,ee.children,Z)))return ee.children.splice(he,1),ne.push(ee),this._condense(ne),this;se||ee.leaf||!je(ee,ke)?Q?(ye++,ee=Q.children[ye],se=!1):ee=null:(ne.push(ee),K.push(ye),ye=0,Q=ee,ee=ee.children[0])}return this},toBBox:function(J){return J},compareMinX:Oe,compareMinY:He,toJSON:function(){return this.data},fromJSON:function(J){return this.data=J,this},_all:function(J,Z){for(var ee=[];J;)J.leaf?Z.push.apply(Z,J.children):ee.push.apply(ee,J.children),J=ee.pop();return Z},_build:function(J,Z,ee,ke){var ye,ne=ee-Z+1,K=this._maxEntries;if(ne<=K)return g(ye=le(J.slice(Z,ee+1)),this.toBBox),ye;ke||(ke=Math.ceil(Math.log(ne)/Math.log(K)),K=Math.ceil(ne/Math.pow(K,ke-1))),(ye=le([])).leaf=!1,ye.height=ke;var se,be,ie,Ve,Q=Math.ceil(ne/K),he=Q*Math.ceil(Math.sqrt(K));for(we(J,Z,ee,he,this.compareMinX),se=Z;se<=ee;se+=he)for(we(J,se,ie=Math.min(se+he-1,ee),Q,this.compareMinY),be=se;be<=ie;be+=Q)Ve=Math.min(be+Q-1,ie),ye.children.push(this._build(J,be,Ve,ke-1));return g(ye,this.toBBox),ye},_chooseSubtree:function(J,Z,ee,ke){for(var ne,K,ye,Q,he,se,be,ie;ke.push(Z),!Z.leaf&&ke.length-1!==ee;){for(be=ie=1/0,ne=0,K=Z.children.length;ne<K;ne++)he=ct(ye=Z.children[ne]),(se=qe(J,ye)-he)<ie?(ie=se,be=he<be?he:be,Q=ye):se===ie&&he<be&&(be=he,Q=ye);Z=Q||Z.children[0]}return Z},_insert:function(J,Z,ee){var ne=ee?J:(0,this.toBBox)(J),K=[],ye=this._chooseSubtree(ne,this.data,Z,K);for(ye.children.push(J),Ne(ye,ne);Z>=0&&K[Z].children.length>this._maxEntries;)this._split(K,Z),Z--;this._adjustParentBBoxes(ne,K,Z)},_split:function(J,Z){var ee=J[Z],ke=ee.children.length,ne=this._minEntries;this._chooseSplitAxis(ee,ne,ke);var K=this._chooseSplitIndex(ee,ne,ke),ye=le(ee.children.splice(K,ee.children.length-K));ye.height=ee.height,ye.leaf=ee.leaf,g(ee,this.toBBox),g(ye,this.toBBox),Z?J[Z-1].children.push(ye):this._splitRoot(ee,ye)},_splitRoot:function(J,Z){this.data=le([J,Z]),this.data.height=J.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},_chooseSplitIndex:function(J,Z,ee){var ke,ne,K,ye,Q,he,se,be;for(he=se=1/0,ke=Z;ke<=ee-Z;ke++)ye=Qe(ne=fe(J,0,ke,this.toBBox),K=fe(J,ke,ee,this.toBBox)),Q=ct(ne)+ct(K),ye<he?(he=ye,be=ke,se=Q<se?Q:se):ye===he&&Q<se&&(se=Q,be=ke);return be},_chooseSplitAxis:function(J,Z,ee){var ke=J.leaf?this.compareMinX:Oe,ne=J.leaf?this.compareMinY:He;this._allDistMargin(J,Z,ee,ke)<this._allDistMargin(J,Z,ee,ne)&&J.children.sort(ke)},_allDistMargin:function(J,Z,ee,ke){J.children.sort(ke);var he,se,ne=this.toBBox,K=fe(J,0,Z,ne),ye=fe(J,ee-Z,ee,ne),Q=Ht(K)+Ht(ye);for(he=Z;he<ee-Z;he++)se=J.children[he],Ne(K,J.leaf?ne(se):se),Q+=Ht(K);for(he=ee-Z-1;he>=Z;he--)se=J.children[he],Ne(ye,J.leaf?ne(se):se),Q+=Ht(ye);return Q},_adjustParentBBoxes:function(J,Z,ee){for(var ke=ee;ke>=0;ke--)Ne(Z[ke],J)},_condense:function(J){for(var ee,Z=J.length-1;Z>=0;Z--)0===J[Z].children.length?Z>0?(ee=J[Z-1].children).splice(ee.indexOf(J[Z]),1):this.clear():g(J[Z],this.toBBox)},_initFormat:function(J){var Z=["return a"," - b",";"];this.compareMinX=new Function("a","b",Z.join(J[0])),this.compareMinY=new Function("a","b",Z.join(J[1])),this.toBBox=new Function("a","return {minX: a"+J[0]+", minY: a"+J[1]+", maxX: a"+J[2]+", maxY: a"+J[3]+"};")}}},2136:function(An){An.exports=function(){"use strict";function Ce(Je,g,fe,Ne,Oe){for(;Ne>fe;){if(Ne-fe>600){var He=Ne-fe+1,ct=g-fe+1,Ht=Math.log(He),qe=.5*Math.exp(2*Ht/3),Qe=.5*Math.sqrt(Ht*qe*(He-qe)/He)*(ct-He/2<0?-1:1);Ce(Je,g,Math.max(fe,Math.floor(g-ct*qe/He+Qe)),Math.min(Ne,Math.floor(g+(He-ct)*qe/He+Qe)),Oe)}var le=Je[g],we=fe,J=Ne;for(ue(Je,fe,g),Oe(Je[Ne],le)>0&&ue(Je,fe,Ne);we<J;){for(ue(Je,we,J),we++,J--;Oe(Je[we],le)<0;)we++;for(;Oe(Je[J],le)>0;)J--}0===Oe(Je[fe],le)?ue(Je,fe,J):ue(Je,++J,Ne),J<=g&&(fe=J+1),g<=J&&(Ne=J-1)}}function ue(Je,g,fe){var Ne=Je[g];Je[g]=Je[fe],Je[fe]=Ne}function Le(Je,g){return Je<g?-1:Je>g?1:0}return function Rt(Je,g,fe,Ne,Oe){Ce(Je,g,fe||0,Ne||Je.length-1,Oe||Le)}}()},3817:(An,Rt,Ce)=>{"use strict";var ue=Ce(9789),Le=Object,Je=TypeError;An.exports=ue(function(){if(null!=this&&this!==Le(this))throw new Je("RegExp.prototype.flags getter called on non-object");var fe="";return this.hasIndices&&(fe+="d"),this.global&&(fe+="g"),this.ignoreCase&&(fe+="i"),this.multiline&&(fe+="m"),this.dotAll&&(fe+="s"),this.unicode&&(fe+="u"),this.unicodeSets&&(fe+="v"),this.sticky&&(fe+="y"),fe},"get flags",!0)},1139:(An,Rt,Ce)=>{"use strict";var ue=Ce(1648),Le=Ce(5436),Je=Ce(3817),g=Ce(4861),fe=Ce(6002),Ne=Le(g());ue(Ne,{getPolyfill:g,implementation:Je,shim:fe}),An.exports=Ne},4861:(An,Rt,Ce)=>{"use strict";var ue=Ce(3817),Le=Ce(1648).supportsDescriptors,Je=Object.getOwnPropertyDescriptor;An.exports=function(){if(Le&&"gim"===/a/gim.flags){var fe=Je(RegExp.prototype,"flags");if(fe&&"function"==typeof fe.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var Ne="",Oe={};if(Object.defineProperty(Oe,"hasIndices",{get:function(){Ne+="d"}}),Object.defineProperty(Oe,"sticky",{get:function(){Ne+="y"}}),"dy"===Ne)return fe.get}}return ue}},6002:(An,Rt,Ce)=>{"use strict";var ue=Ce(1648).supportsDescriptors,Le=Ce(4861),Je=Object.getOwnPropertyDescriptor,g=Object.defineProperty,fe=TypeError,Ne=Object.getPrototypeOf,Oe=/a/;An.exports=function(){if(!ue||!Ne)throw new fe("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var ct=Le(),Ht=Ne(Oe),qe=Je(Ht,"flags");return(!qe||qe.get!==ct)&&g(Ht,"flags",{configurable:!0,enumerable:!1,get:ct}),ct}},6138:function(An,Rt){!function(Ce){"use strict";function Je(je,Nt,le,we,J){let Z,ee,ke,ne,K=Nt[0],ye=we[0],Q=0,he=0;ye>K==ye>-K?(Z=K,K=Nt[++Q]):(Z=ye,ye=we[++he]);let se=0;if(Q<je&&he<le)for(ye>K==ye>-K?(ke=Z-((ee=K+Z)-K),K=Nt[++Q]):(ke=Z-((ee=ye+Z)-ye),ye=we[++he]),Z=ee,0!==ke&&(J[se++]=ke);Q<je&&he<le;)ye>K==ye>-K?(ke=Z-((ee=Z+K)-(ne=ee-Z))+(K-ne),K=Nt[++Q]):(ke=Z-((ee=Z+ye)-(ne=ee-Z))+(ye-ne),ye=we[++he]),Z=ee,0!==ke&&(J[se++]=ke);for(;Q<je;)ke=Z-((ee=Z+K)-(ne=ee-Z))+(K-ne),K=Nt[++Q],Z=ee,0!==ke&&(J[se++]=ke);for(;he<le;)ke=Z-((ee=Z+ye)-(ne=ee-Z))+(ye-ne),ye=we[++he],Z=ee,0!==ke&&(J[se++]=ke);return 0===Z&&0!==se||(J[se++]=Z),se}function g(je){return new Float64Array(je)}const He=g(4),ct=g(8),Ht=g(12),qe=g(16),Qe=g(4);Ce.orient2d=function(je,Nt,le,we,J,Z){const ee=(Nt-Z)*(le-J),ke=(je-J)*(we-Z),ne=ee-ke;if(0===ee||0===ke||ee>0!=ke>0)return ne;const K=Math.abs(ee+ke);return Math.abs(ne)>=33306690738754716e-32*K?ne:-function(ye,Q,he,se,be,ie,Ve){let Se,Y,Ge,De,Ke,$e,ae,Ze,et,dn,qt,_n,kn,ei,Vt,vi,Tn,Un;const cn=ye-be,Lt=he-be,Cn=Q-ie,Gn=se-ie;Ke=(Vt=(Ze=cn-(ae=($e=134217729*cn)-($e-cn)))*(dn=Gn-(et=($e=134217729*Gn)-($e-Gn)))-((ei=cn*Gn)-ae*et-Ze*et-ae*dn))-(qt=Vt-(Tn=(Ze=Cn-(ae=($e=134217729*Cn)-($e-Cn)))*(dn=Lt-(et=($e=134217729*Lt)-($e-Lt)))-((vi=Cn*Lt)-ae*et-Ze*et-ae*dn))),He[0]=Vt-(qt+Ke)+(Ke-Tn),Ke=(kn=ei-((_n=ei+qt)-(Ke=_n-ei))+(qt-Ke))-(qt=kn-vi),He[1]=kn-(qt+Ke)+(Ke-vi),Ke=(Un=_n+qt)-_n,He[2]=_n-(Un-Ke)+(qt-Ke),He[3]=Un;let At=function(Mt,ln){let Fn=ln[0];for(let Bn=1;Bn<4;Bn++)Fn+=ln[Bn];return Fn}(0,He),Ae=22204460492503146e-32*Ve;if(At>=Ae||-At>=Ae||(Se=ye-(cn+(Ke=ye-cn))+(Ke-be),Ge=he-(Lt+(Ke=he-Lt))+(Ke-be),Y=Q-(Cn+(Ke=Q-Cn))+(Ke-ie),De=se-(Gn+(Ke=se-Gn))+(Ke-ie),0===Se&&0===Y&&0===Ge&&0===De)||(Ae=11093356479670487e-47*Ve+33306690738754706e-32*Math.abs(At),(At+=cn*De+Gn*Se-(Cn*Ge+Lt*Y))>=Ae||-At>=Ae))return At;Ke=(Vt=(Ze=Se-(ae=($e=134217729*Se)-($e-Se)))*(dn=Gn-(et=($e=134217729*Gn)-($e-Gn)))-((ei=Se*Gn)-ae*et-Ze*et-ae*dn))-(qt=Vt-(Tn=(Ze=Y-(ae=($e=134217729*Y)-($e-Y)))*(dn=Lt-(et=($e=134217729*Lt)-($e-Lt)))-((vi=Y*Lt)-ae*et-Ze*et-ae*dn))),Qe[0]=Vt-(qt+Ke)+(Ke-Tn),Ke=(kn=ei-((_n=ei+qt)-(Ke=_n-ei))+(qt-Ke))-(qt=kn-vi),Qe[1]=kn-(qt+Ke)+(Ke-vi),Ke=(Un=_n+qt)-_n,Qe[2]=_n-(Un-Ke)+(qt-Ke),Qe[3]=Un;const Te=Je(4,He,4,Qe,ct);Ke=(Vt=(Ze=cn-(ae=($e=134217729*cn)-($e-cn)))*(dn=De-(et=($e=134217729*De)-($e-De)))-((ei=cn*De)-ae*et-Ze*et-ae*dn))-(qt=Vt-(Tn=(Ze=Cn-(ae=($e=134217729*Cn)-($e-Cn)))*(dn=Ge-(et=($e=134217729*Ge)-($e-Ge)))-((vi=Cn*Ge)-ae*et-Ze*et-ae*dn))),Qe[0]=Vt-(qt+Ke)+(Ke-Tn),Ke=(kn=ei-((_n=ei+qt)-(Ke=_n-ei))+(qt-Ke))-(qt=kn-vi),Qe[1]=kn-(qt+Ke)+(Ke-vi),Ke=(Un=_n+qt)-_n,Qe[2]=_n-(Un-Ke)+(qt-Ke),Qe[3]=Un;const Ee=Je(Te,ct,4,Qe,Ht);Ke=(Vt=(Ze=Se-(ae=($e=134217729*Se)-($e-Se)))*(dn=De-(et=($e=134217729*De)-($e-De)))-((ei=Se*De)-ae*et-Ze*et-ae*dn))-(qt=Vt-(Tn=(Ze=Y-(ae=($e=134217729*Y)-($e-Y)))*(dn=Ge-(et=($e=134217729*Ge)-($e-Ge)))-((vi=Y*Ge)-ae*et-Ze*et-ae*dn))),Qe[0]=Vt-(qt+Ke)+(Ke-Tn),Ke=(kn=ei-((_n=ei+qt)-(Ke=_n-ei))+(qt-Ke))-(qt=kn-vi),Qe[1]=kn-(qt+Ke)+(Ke-vi),Ke=(Un=_n+qt)-_n,Qe[2]=_n-(Un-Ke)+(qt-Ke),Qe[3]=Un;const lt=Je(Ee,Ht,4,Qe,qe);return qe[lt-1]}(je,Nt,le,we,J,Z,K)},Ce.orient2dfast=function(je,Nt,le,we,J,Z){return(Nt-Z)*(le-J)-(je-J)*(we-Z)},Object.defineProperty(Ce,"__esModule",{value:!0})}(Rt)},9789:(An,Rt,Ce)=>{"use strict";var ue=Ce(9224),Le=Ce(2486)(),Je=Ce(1552).functionsHaveConfigurableNames(),g=TypeError;An.exports=function(Ne,Oe){if("function"!=typeof Ne)throw new g("`fn` is not a function");return(!(arguments.length>2&&arguments[2])||Je)&&(Le?ue(Ne,"name",Oe,!0,!0):ue(Ne,"name",Oe)),Ne}},9579:An=>{"use strict";An.exports={eudist:function(Ce,ue,Le){for(var Je=Ce.length,g=0,fe=0;fe<Je;fe++){var Ne=(Ce[fe]||0)-(ue[fe]||0);g+=Ne*Ne}return Le?Math.sqrt(g):g},mandist:function(Ce,ue,Le){for(var Je=Ce.length,g=0,fe=0;fe<Je;fe++)g+=Math.abs((Ce[fe]||0)-(ue[fe]||0));return Le?Math.sqrt(g):g},dist:function(Ce,ue,Le){var Je=Math.abs(Ce-ue);return Le?Je:Je*Je}}},7180:(An,Rt,Ce)=>{"use strict";var ue=Ce(9579),Le=ue.eudist,Je=ue.dist;An.exports={kmrand:function(fe,Ne){for(var Oe={},He=[],ct=Ne<<2,Ht=fe.length,qe=fe[0].length>0;He.length<Ne&&ct-- >0;){var Qe=fe[Math.floor(Math.random()*Ht)],je=qe?Qe.join("_"):""+Qe;Oe[je]||(Oe[je]=!0,He.push(Qe))}if(He.length<Ne)throw new Error("Error initializating clusters");return He},kmpp:function(fe,Ne){var Oe=fe[0].length?Le:Je,He=[],ct=fe.length,Ht=fe[0].length>0,Qe=fe[Math.floor(Math.random()*ct)];for(Ht&&Qe.join("_"),He.push(Qe);He.length<Ne;){for(var Nt=[],le=He.length,we=0,J=[],Z=0;Z<ct;Z++){for(var ee=1/0,ke=0;ke<le;ke++){var ne=Oe(fe[Z],He[ke]);ne<=ee&&(ee=ne)}Nt[Z]=ee}for(var K=0;K<ct;K++)we+=Nt[K];for(var ye=0;ye<ct;ye++)J[ye]={i:ye,v:fe[ye],pr:Nt[ye]/we,cs:0};J.sort(function(be,ie){return be.pr-ie.pr}),J[0].cs=J[0].pr;for(var Q=1;Q<ct;Q++)J[Q].cs=J[Q-1].cs+J[Q].pr;for(var he=Math.random(),se=0;se<ct-1&&J[se++].cs<he;);He.push(J[se-1].v)}return He}}},3282:(An,Rt,Ce)=>{"use strict";var ue=Ce(9579),Le=Ce(7180),Je=ue.eudist,Ne=Le.kmrand,Oe=Le.kmpp;function ct(qe,Qe,je){je=je||[];for(var Nt=0;Nt<qe;Nt++)je[Nt]=Qe;return je}An.exports=function Ht(qe,Qe,je,Nt){var le=[],we=[],J=[],Z=[],ee=!1,ke=Nt||1e4,ne=qe.length,K=qe[0].length,ye=K>0,Q=[];if(je)le="kmrand"==je?Ne(qe,Qe):"kmpp"==je?Oe(qe,Qe):je;else for(var he={};le.length<Qe;){var se=Math.floor(Math.random()*ne);he[se]||(he[se]=!0,le.push(qe[se]))}do{ct(Qe,0,Q);for(var be=0;be<ne;be++){for(var ie=1/0,Ve=0,Se=0;Se<Qe;Se++)(Z=ye?Je(qe[be],le[Se]):Math.abs(qe[be]-le[Se]))<=ie&&(ie=Z,Ve=Se);J[be]=Ve,Q[Ve]++}for(var Y=[],De=(we=[],0);De<Qe;De++)Y[De]=ye?ct(K,0,Y[De]):0,we[De]=le[De];if(ye){for(var Ke=0;Ke<Qe;Ke++)le[Ke]=[];for(var $e=0;$e<ne;$e++)for(var Ze=Y[J[$e]],et=qe[$e],dn=0;dn<K;dn++)Ze[dn]+=et[dn];ee=!0;for(var qt=0;qt<Qe;qt++){for(var _n=le[qt],kn=Y[qt],ei=we[qt],Vt=Q[qt],vi=0;vi<K;vi++)_n[vi]=kn[vi]/Vt||0;if(ee)for(var Tn=0;Tn<K;Tn++)if(ei[Tn]!=_n[Tn]){ee=!1;break}}}else{for(var Un=0;Un<ne;Un++)Y[J[Un]]+=qe[Un];for(var Lt=0;Lt<Qe;Lt++)le[Lt]=Y[Lt]/Q[Lt]||0;ee=!0;for(var Cn=0;Cn<Qe;Cn++)if(we[Cn]!=le[Cn]){ee=!1;break}}ee=ee||--ke<=0}while(!ee);return{it:1e4-ke,k:Qe,idxs:J,centroids:le}}},6635:(An,Rt,Ce)=>{"use strict";Ce.d(Rt,{H:()=>Se,a:()=>Me,b:()=>Ie,c:()=>At,g:()=>Gn,h:()=>ie,p:()=>Nt,r:()=>at});var ue=Ce(5861);let Je,g,fe,Ne=!1,Oe=!1,He=!1,Ht=!1;const qe=typeof window<"u"?window:{},Qe=qe.document||{head:{}},je={$flags$:0,$resourcesUrl$:"",jmp:vt=>vt(),raf:vt=>requestAnimationFrame(vt),ael:(vt,wt,nn,an)=>vt.addEventListener(wt,nn,an),rel:(vt,wt,nn,an)=>vt.removeEventListener(wt,nn,an),ce:(vt,wt)=>new CustomEvent(vt,wt)},Nt=vt=>Promise.resolve(vt),le=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch{}return!1})(),J="http://www.w3.org/1999/xlink",ke=new WeakMap,Q=(vt,wt)=>"sc-"+vt.$tagName$,he={},be=vt=>"object"==(vt=typeof vt)||"function"===vt,ie=(vt,wt,...nn)=>{let an=null,Sn=null,Vn=null,Qn=!1,oi=!1;const ki=[],zn=Ri=>{for(let rr=0;rr<Ri.length;rr++)an=Ri[rr],Array.isArray(an)?zn(an):null!=an&&"boolean"!=typeof an&&((Qn="function"!=typeof vt&&!be(an))&&(an=String(an)),Qn&&oi?ki[ki.length-1].$text$+=an:ki.push(Qn?Ve(null,an):an),oi=Qn)};if(zn(nn),wt){wt.key&&(Sn=wt.key),wt.name&&(Vn=wt.name);{const Ri=wt.className||wt.class;Ri&&(wt.class="object"!=typeof Ri?Ri:Object.keys(Ri).filter(rr=>Ri[rr]).join(" "))}}const _r=Ve(vt,null);return _r.$attrs$=wt,ki.length>0&&(_r.$children$=ki),_r.$key$=Sn,_r.$name$=Vn,_r},Ve=(vt,wt)=>({$flags$:0,$tag$:vt,$text$:wt,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Se={},Ge=(vt,wt,nn,an,Sn,Vn)=>{if(nn!==an){let Qn=Zt(vt,wt),oi=wt.toLowerCase();if("class"===wt){const ki=vt.classList,zn=Ke(nn),_r=Ke(an);ki.remove(...zn.filter(Ri=>Ri&&!_r.includes(Ri))),ki.add(..._r.filter(Ri=>Ri&&!zn.includes(Ri)))}else if("style"===wt){for(const ki in nn)(!an||null==an[ki])&&(ki.includes("-")?vt.style.removeProperty(ki):vt.style[ki]="");for(const ki in an)(!nn||an[ki]!==nn[ki])&&(ki.includes("-")?vt.style.setProperty(ki,an[ki]):vt.style[ki]=an[ki])}else if("key"!==wt)if("ref"===wt)an&&an(vt);else if(Qn||"o"!==wt[0]||"n"!==wt[1]){const ki=be(an);if((Qn||ki&&null!==an)&&!Sn)try{if(vt.tagName.includes("-"))vt[wt]=an;else{const _r=an??"";"list"===wt?Qn=!1:(null==nn||vt[wt]!=_r)&&(vt[wt]=_r)}}catch{}let zn=!1;oi!==(oi=oi.replace(/^xlink\:?/,""))&&(wt=oi,zn=!0),null==an||!1===an?(!1!==an||""===vt.getAttribute(wt))&&(zn?vt.removeAttributeNS(J,wt):vt.removeAttribute(wt)):(!Qn||4&Vn||Sn)&&!ki&&(an=!0===an?"":an,zn?vt.setAttributeNS(J,wt,an):vt.setAttribute(wt,an))}else wt="-"===wt[2]?wt.slice(3):Zt(qe,oi)?oi.slice(2):oi[2]+wt.slice(3),nn&&je.rel(vt,wt,nn,!1),an&&je.ael(vt,wt,an,!1)}},De=/\s/,Ke=vt=>vt?vt.split(De):[],$e=(vt,wt,nn,an)=>{const Sn=11===wt.$elm$.nodeType&&wt.$elm$.host?wt.$elm$.host:wt.$elm$,Vn=vt&&vt.$attrs$||he,Qn=wt.$attrs$||he;for(an in Vn)an in Qn||Ge(Sn,an,Vn[an],void 0,nn,wt.$flags$);for(an in Qn)Ge(Sn,an,Vn[an],Qn[an],nn,wt.$flags$)},ae=(vt,wt,nn,an)=>{const Sn=wt.$children$[nn];let Qn,oi,ki,Vn=0;if(Ne||(He=!0,"slot"===Sn.$tag$&&(Je&&an.classList.add(Je+"-s"),Sn.$flags$|=Sn.$children$?2:1)),null!==Sn.$text$)Qn=Sn.$elm$=Qe.createTextNode(Sn.$text$);else if(1&Sn.$flags$)Qn=Sn.$elm$=Qe.createTextNode("");else if(Qn=Sn.$elm$=Qe.createElement(2&Sn.$flags$?"slot-fb":Sn.$tag$),$e(null,Sn,!1),(vt=>null!=vt)(Je)&&Qn["s-si"]!==Je&&Qn.classList.add(Qn["s-si"]=Je),Sn.$children$)for(Vn=0;Vn<Sn.$children$.length;++Vn)oi=ae(vt,Sn,Vn,Qn),oi&&Qn.appendChild(oi);return Qn["s-hn"]=fe,3&Sn.$flags$&&(Qn["s-sr"]=!0,Qn["s-cr"]=g,Qn["s-sn"]=Sn.$name$||"",ki=vt&&vt.$children$&&vt.$children$[nn],ki&&ki.$tag$===Sn.$tag$&&vt.$elm$&&Ze(vt.$elm$,!1)),Qn},Ze=(vt,wt)=>{je.$flags$|=1;const nn=vt.childNodes;for(let an=nn.length-1;an>=0;an--){const Sn=nn[an];Sn["s-hn"]!==fe&&Sn["s-ol"]&&(ei(Sn).insertBefore(Sn,kn(Sn)),Sn["s-ol"].remove(),Sn["s-ol"]=void 0,He=!0),wt&&Ze(Sn,wt)}je.$flags$&=-2},et=(vt,wt,nn,an,Sn,Vn)=>{let oi,Qn=vt["s-cr"]&&vt["s-cr"].parentNode||vt;for(Qn.shadowRoot&&Qn.tagName===fe&&(Qn=Qn.shadowRoot);Sn<=Vn;++Sn)an[Sn]&&(oi=ae(null,nn,Sn,vt),oi&&(an[Sn].$elm$=oi,Qn.insertBefore(oi,kn(wt))))},dn=(vt,wt,nn,an,Sn)=>{for(;wt<=nn;++wt)(an=vt[wt])&&(Sn=an.$elm$,Lt(an),Oe=!0,Sn["s-ol"]?Sn["s-ol"].remove():Ze(Sn,!0),Sn.remove())},_n=(vt,wt)=>vt.$tag$===wt.$tag$&&("slot"===vt.$tag$?vt.$name$===wt.$name$:vt.$key$===wt.$key$),kn=vt=>vt&&vt["s-ol"]||vt,ei=vt=>(vt["s-ol"]?vt["s-ol"]:vt).parentNode,Vt=(vt,wt)=>{const nn=wt.$elm$=vt.$elm$,an=vt.$children$,Sn=wt.$children$,Qn=wt.$text$;let oi;null===Qn?("slot"===wt.$tag$||$e(vt,wt,!1),null!==an&&null!==Sn?((vt,wt,nn,an)=>{let Vr,To,Sn=0,Vn=0,Qn=0,oi=0,ki=wt.length-1,zn=wt[0],_r=wt[ki],Ri=an.length-1,rr=an[0],to=an[Ri];for(;Sn<=ki&&Vn<=Ri;)if(null==zn)zn=wt[++Sn];else if(null==_r)_r=wt[--ki];else if(null==rr)rr=an[++Vn];else if(null==to)to=an[--Ri];else if(_n(zn,rr))Vt(zn,rr),zn=wt[++Sn],rr=an[++Vn];else if(_n(_r,to))Vt(_r,to),_r=wt[--ki],to=an[--Ri];else if(_n(zn,to))("slot"===zn.$tag$||"slot"===to.$tag$)&&Ze(zn.$elm$.parentNode,!1),Vt(zn,to),vt.insertBefore(zn.$elm$,_r.$elm$.nextSibling),zn=wt[++Sn],to=an[--Ri];else if(_n(_r,rr))("slot"===zn.$tag$||"slot"===to.$tag$)&&Ze(_r.$elm$.parentNode,!1),Vt(_r,rr),vt.insertBefore(_r.$elm$,zn.$elm$),_r=wt[--ki],rr=an[++Vn];else{for(Qn=-1,oi=Sn;oi<=ki;++oi)if(wt[oi]&&null!==wt[oi].$key$&&wt[oi].$key$===rr.$key$){Qn=oi;break}Qn>=0?(To=wt[Qn],To.$tag$!==rr.$tag$?Vr=ae(wt&&wt[Vn],nn,Qn,vt):(Vt(To,rr),wt[Qn]=void 0,Vr=To.$elm$),rr=an[++Vn]):(Vr=ae(wt&&wt[Vn],nn,Vn,vt),rr=an[++Vn]),Vr&&ei(zn.$elm$).insertBefore(Vr,kn(zn.$elm$))}Sn>ki?et(vt,null==an[Ri+1]?null:an[Ri+1].$elm$,nn,an,Vn,Ri):Vn>Ri&&dn(wt,Sn,ki)})(nn,an,wt,Sn):null!==Sn?(null!==vt.$text$&&(nn.textContent=""),et(nn,null,wt,Sn,0,Sn.length-1)):null!==an&&dn(an,0,an.length-1)):(oi=nn["s-cr"])?oi.parentNode.textContent=Qn:vt.$text$!==Qn&&(nn.data=Qn)},vi=vt=>{const wt=vt.childNodes;let nn,an,Sn,Vn,Qn,oi;for(an=0,Sn=wt.length;an<Sn;an++)if(nn=wt[an],1===nn.nodeType){if(nn["s-sr"])for(Qn=nn["s-sn"],nn.hidden=!1,Vn=0;Vn<Sn;Vn++)if(oi=wt[Vn].nodeType,wt[Vn]["s-hn"]!==nn["s-hn"]||""!==Qn){if(1===oi&&Qn===wt[Vn].getAttribute("slot")){nn.hidden=!0;break}}else if(1===oi||3===oi&&""!==wt[Vn].textContent.trim()){nn.hidden=!0;break}vi(nn)}},Tn=[],Un=vt=>{let wt,nn,an,Sn,Vn,Qn,oi=0;const ki=vt.childNodes,zn=ki.length;for(;oi<zn;oi++){if(wt=ki[oi],wt["s-sr"]&&(nn=wt["s-cr"])&&nn.parentNode)for(an=nn.parentNode.childNodes,Sn=wt["s-sn"],Qn=an.length-1;Qn>=0;Qn--)nn=an[Qn],!nn["s-cn"]&&!nn["s-nr"]&&nn["s-hn"]!==wt["s-hn"]&&(cn(nn,Sn)?(Vn=Tn.find(_r=>_r.$nodeToRelocate$===nn),Oe=!0,nn["s-sn"]=nn["s-sn"]||Sn,Vn?Vn.$slotRefNode$=wt:Tn.push({$slotRefNode$:wt,$nodeToRelocate$:nn}),nn["s-sr"]&&Tn.map(_r=>{cn(_r.$nodeToRelocate$,nn["s-sn"])&&(Vn=Tn.find(Ri=>Ri.$nodeToRelocate$===nn),Vn&&!_r.$slotRefNode$&&(_r.$slotRefNode$=Vn.$slotRefNode$))})):Tn.some(_r=>_r.$nodeToRelocate$===nn)||Tn.push({$nodeToRelocate$:nn}));1===wt.nodeType&&Un(wt)}},cn=(vt,wt)=>1===vt.nodeType?null===vt.getAttribute("slot")&&""===wt||vt.getAttribute("slot")===wt:vt["s-sn"]===wt||""===wt,Lt=vt=>{vt.$attrs$&&vt.$attrs$.ref&&vt.$attrs$.ref(null),vt.$children$&&vt.$children$.map(Lt)},Gn=vt=>Ct(vt).$hostElement$,At=(vt,wt,nn)=>{const an=Gn(vt);return{emit:Sn=>Ae(an,wt,{bubbles:!!(4&nn),composed:!!(2&nn),cancelable:!!(1&nn),detail:Sn})}},Ae=(vt,wt,nn)=>{const an=je.ce(wt,nn);return vt.dispatchEvent(an),an},Te=(vt,wt)=>{wt&&!vt.$onRenderResolve$&&wt["s-p"]&&wt["s-p"].push(new Promise(nn=>vt.$onRenderResolve$=nn))},Ee=(vt,wt)=>{if(vt.$flags$|=16,!(4&vt.$flags$))return Te(vt,vt.$ancestorComponent$),Br(()=>lt(vt,wt));vt.$flags$|=512},lt=(vt,wt)=>{const an=vt.$lazyInstance$;let Sn;return Sn=yn(an,wt?"componentWillLoad":"componentWillUpdate"),Yi(Sn,()=>Mt(vt,an,wt))},Mt=function(){var vt=(0,ue.Z)(function*(wt,nn,an){const Sn=wt.$hostElement$,Qn=Sn["s-rc"];an&&(vt=>{const wt=vt.$cmpMeta$,nn=vt.$hostElement$,an=wt.$flags$,Vn=((vt,wt,nn,an)=>{let Sn=Q(wt);const Vn=ri.get(Sn);if(vt=11===vt.nodeType?vt:Qe,Vn)if("string"==typeof Vn){let oi,Qn=ke.get(vt=vt.head||vt);Qn||ke.set(vt,Qn=new Set),Qn.has(Sn)||(oi=Qe.createElement("style"),oi.innerHTML=Vn,vt.insertBefore(oi,vt.querySelector("link")),Qn&&Qn.add(Sn))}else vt.adoptedStyleSheets.includes(Vn)||(vt.adoptedStyleSheets=[...vt.adoptedStyleSheets,Vn]);return Sn})(nn.shadowRoot?nn.shadowRoot:nn.getRootNode(),wt);10&an&&(nn["s-sc"]=Vn,nn.classList.add(Vn+"-h"))})(wt);ln(wt,nn),Qn&&(Qn.map(ki=>ki()),Sn["s-rc"]=void 0);{const ki=Sn["s-p"],zn=()=>Fn(wt);0===ki.length?zn():(Promise.all(ki).then(zn),wt.$flags$|=4,ki.length=0)}});return function(nn,an,Sn){return vt.apply(this,arguments)}}(),ln=(vt,wt,nn)=>{try{wt=wt.render(),vt.$flags$&=-17,vt.$flags$|=2,((vt,wt)=>{const nn=vt.$hostElement$,an=vt.$cmpMeta$,Sn=vt.$vnode$||Ve(null,null),Vn=(vt=>vt&&vt.$tag$===Se)(wt)?wt:ie(null,null,wt);if(fe=nn.tagName,an.$attrsToReflect$&&(Vn.$attrs$=Vn.$attrs$||{},an.$attrsToReflect$.map(([Qn,oi])=>Vn.$attrs$[oi]=nn[Qn])),Vn.$tag$=null,Vn.$flags$|=4,vt.$vnode$=Vn,Vn.$elm$=Sn.$elm$=nn.shadowRoot||nn,Je=nn["s-sc"],g=nn["s-cr"],Ne=0!=(1&an.$flags$),Oe=!1,Vt(Sn,Vn),je.$flags$|=1,He){Un(Vn.$elm$);let Qn,oi,ki,zn,_r,Ri,rr=0;for(;rr<Tn.length;rr++)Qn=Tn[rr],oi=Qn.$nodeToRelocate$,oi["s-ol"]||(ki=Qe.createTextNode(""),ki["s-nr"]=oi,oi.parentNode.insertBefore(oi["s-ol"]=ki,oi));for(rr=0;rr<Tn.length;rr++)if(Qn=Tn[rr],oi=Qn.$nodeToRelocate$,Qn.$slotRefNode$){for(zn=Qn.$slotRefNode$.parentNode,_r=Qn.$slotRefNode$.nextSibling,ki=oi["s-ol"];ki=ki.previousSibling;)if(Ri=ki["s-nr"],Ri&&Ri["s-sn"]===oi["s-sn"]&&zn===Ri.parentNode&&(Ri=Ri.nextSibling,!Ri||!Ri["s-nr"])){_r=Ri;break}(!_r&&zn!==oi.parentNode||oi.nextSibling!==_r)&&oi!==_r&&(!oi["s-hn"]&&oi["s-ol"]&&(oi["s-hn"]=oi["s-ol"].parentNode.nodeName),zn.insertBefore(oi,_r))}else 1===oi.nodeType&&(oi.hidden=!0)}Oe&&vi(Vn.$elm$),je.$flags$&=-2,Tn.length=0})(vt,wt)}catch(an){It(an,vt.$hostElement$)}return null},Fn=vt=>{const nn=vt.$hostElement$,Sn=vt.$lazyInstance$,Vn=vt.$ancestorComponent$;64&vt.$flags$||(vt.$flags$|=64,or(nn),yn(Sn,"componentDidLoad"),vt.$onReadyResolve$(nn),Vn||Bn()),vt.$onInstanceResolve$(nn),vt.$onRenderResolve$&&(vt.$onRenderResolve$(),vt.$onRenderResolve$=void 0),512&vt.$flags$&&Sr(()=>Ee(vt,!1)),vt.$flags$&=-517},Bn=vt=>{or(Qe.documentElement),Sr(()=>Ae(qe,"appload",{detail:{namespace:"stripe-elements"}}))},yn=(vt,wt,nn)=>{if(vt&&vt[wt])try{return vt[wt](nn)}catch(an){It(an)}},Yi=(vt,wt)=>vt&&vt.then?vt.then(wt):wt(),or=vt=>vt.classList.add("hydrated"),Gi=(vt,wt,nn)=>{if(wt.$members$){vt.watchers&&(wt.$watchers$=vt.watchers);const an=Object.entries(wt.$members$),Sn=vt.prototype;if(an.map(([Vn,[Qn]])=>{31&Qn||2&nn&&32&Qn?Object.defineProperty(Sn,Vn,{get(){return((vt,wt)=>Ct(this).$instanceValues$.get(wt))(0,Vn)},set(oi){((vt,wt,nn,an)=>{const Sn=Ct(vt),Vn=Sn.$hostElement$,Qn=Sn.$instanceValues$.get(wt),oi=Sn.$flags$,ki=Sn.$lazyInstance$;nn=((vt,wt)=>null==vt||be(vt)?vt:4&wt?"false"!==vt&&(""===vt||!!vt):1&wt?String(vt):vt)(nn,an.$members$[wt][0]);const zn=Number.isNaN(Qn)&&Number.isNaN(nn);if((!(8&oi)||void 0===Qn)&&nn!==Qn&&!zn&&(Sn.$instanceValues$.set(wt,nn),ki)){if(an.$watchers$&&128&oi){const Ri=an.$watchers$[wt];Ri&&Ri.map(rr=>{try{ki[rr](nn,Qn,wt)}catch(to){It(to,Vn)}})}2==(18&oi)&&Ee(Sn,!1)}})(this,Vn,oi,wt)},configurable:!0,enumerable:!0}):1&nn&&64&Qn&&Object.defineProperty(Sn,Vn,{value(...oi){const ki=Ct(this);return ki.$onInstancePromise$.then(()=>ki.$lazyInstance$[Vn](...oi))}})}),1&nn){const Vn=new Map;Sn.attributeChangedCallback=function(Qn,oi,ki){je.jmp(()=>{const zn=Vn.get(Qn);if(this.hasOwnProperty(zn))ki=this[zn],delete this[zn];else if(Sn.hasOwnProperty(zn)&&"number"==typeof this[zn]&&this[zn]==ki)return;this[zn]=(null!==ki||"boolean"!=typeof this[zn])&&ki})},vt.observedAttributes=an.filter(([Qn,oi])=>15&oi[0]).map(([Qn,oi])=>{const ki=oi[1]||Qn;return Vn.set(ki,Qn),512&oi[0]&&wt.$attrsToReflect$.push([Qn,ki]),ki})}}return vt},gr=function(){var vt=(0,ue.Z)(function*(wt,nn,an,Sn,Vn){if(!(32&nn.$flags$)){{if(nn.$flags$|=32,(Vn=Xn(an)).then){const zn=()=>{};Vn=yield Vn,zn()}Vn.isProxied||(an.$watchers$=Vn.watchers,Gi(Vn,an,2),Vn.isProxied=!0);const ki=()=>{};nn.$flags$|=8;try{new Vn(nn)}catch(zn){It(zn)}nn.$flags$&=-9,nn.$flags$|=128,ki(),Fr(nn.$lazyInstance$)}if(Vn.style){let ki=Vn.style;const zn=Q(an);if(!ri.has(zn)){const _r=()=>{};((vt,wt,nn)=>{let an=ri.get(vt);le&&nn?(an=an||new CSSStyleSheet,an.replace(wt)):an=wt,ri.set(vt,an)})(zn,ki,!!(1&an.$flags$)),_r()}}}const Qn=nn.$ancestorComponent$,oi=()=>Ee(nn,!0);Qn&&Qn["s-rc"]?Qn["s-rc"].push(oi):oi()});return function(nn,an,Sn,Vn,Qn){return vt.apply(this,arguments)}}(),Fr=vt=>{yn(vt,"connectedCallback")},Ie=(vt,wt={})=>{const an=[],Sn=wt.exclude||[],Vn=qe.customElements,Qn=Qe.head,oi=Qn.querySelector("meta[charset]"),ki=Qe.createElement("style"),zn=[];let _r,Ri=!0;Object.assign(je,wt),je.$resourcesUrl$=new URL(wt.resourcesUrl||"./",Qe.baseURI).href,vt.map(rr=>{rr[1].map(to=>{const Vr={$flags$:to[0],$tagName$:to[1],$members$:to[2],$listeners$:to[3]};Vr.$members$=to[2],Vr.$attrsToReflect$=[],Vr.$watchers$={};const To=Vr.$tagName$,so=class extends HTMLElement{constructor(Ns){super(Ns),en(Ns=this,Vr),1&Vr.$flags$&&Ns.attachShadow({mode:"open"})}connectedCallback(){_r&&(clearTimeout(_r),_r=null),Ri?zn.push(this):je.jmp(()=>(vt=>{if(!(1&je.$flags$)){const wt=Ct(vt),nn=wt.$cmpMeta$,an=()=>{};if(1&wt.$flags$)Fr(wt.$lazyInstance$);else{wt.$flags$|=1,12&nn.$flags$&&(vt=>{const wt=vt["s-cr"]=Qe.createComment("");wt["s-cn"]=!0,vt.insertBefore(wt,vt.firstChild)})(vt);{let Sn=vt;for(;Sn=Sn.parentNode||Sn.host;)if(Sn["s-p"]){Te(wt,wt.$ancestorComponent$=Sn);break}}nn.$members$&&Object.entries(nn.$members$).map(([Sn,[Vn]])=>{if(31&Vn&&vt.hasOwnProperty(Sn)){const Qn=vt[Sn];delete vt[Sn],vt[Sn]=Qn}}),gr(vt,wt,nn)}an()}})(this))}disconnectedCallback(){je.jmp(()=>(vt=>{if(!(1&je.$flags$)){const nn=Ct(this).$lazyInstance$;yn(nn,"disconnectedCallback")}})())}componentOnReady(){return Ct(this).$onReadyPromise$}};Vr.$lazyBundleId$=rr[0],!Sn.includes(To)&&!Vn.get(To)&&(an.push(To),Vn.define(To,Gi(so,Vr,1)))})}),ki.innerHTML=an+"{visibility:hidden}.hydrated{visibility:inherit}",ki.setAttribute("data-styles",""),Qn.insertBefore(ki,oi?oi.nextSibling:Qn.firstChild),Ri=!1,zn.length?zn.map(rr=>rr.connectedCallback()):je.jmp(()=>_r=setTimeout(Bn,30))},Me=vt=>{const wt=new URL(vt,je.$resourcesUrl$);return wt.origin!==qe.location.origin?wt.href:wt.pathname},pt=new WeakMap,Ct=vt=>pt.get(vt),at=(vt,wt)=>pt.set(wt.$lazyInstance$=vt,wt),en=(vt,wt)=>{const nn={$flags$:0,$hostElement$:vt,$cmpMeta$:wt,$instanceValues$:new Map};return nn.$onInstancePromise$=new Promise(an=>nn.$onInstanceResolve$=an),nn.$onReadyPromise$=new Promise(an=>nn.$onReadyResolve$=an),vt["s-p"]=[],vt["s-rc"]=[],pt.set(vt,nn)},Zt=(vt,wt)=>wt in vt,It=(vt,wt)=>(0,console.error)(vt,wt),un=new Map,Xn=(vt,wt,nn)=>{const an=vt.$tagName$.replace(/-/g,"_"),Sn=vt.$lazyBundleId$,Vn=un.get(Sn);return Vn?Vn[an]:Ce(5764)(`./${Sn}.entry.js`).then(Qn=>(un.set(Sn,Qn),Qn[an]),It)},ri=new Map,Zn=[],yr=[],Cr=(vt,wt)=>nn=>{vt.push(nn),Ht||(Ht=!0,wt&&4&je.$flags$?Sr(Zi):je.raf(Zi))},sr=vt=>{for(let wt=0;wt<vt.length;wt++)try{vt[wt](performance.now())}catch(nn){It(nn)}vt.length=0},Zi=()=>{sr(Zn),sr(yr),(Ht=Zn.length>0)&&je.raf(Zi)},Sr=vt=>Nt().then(vt),Br=Cr(yr,!0)},7935:(An,Rt,Ce)=>{"use strict";Ce.r(Rt),Ce.d(Rt,{default:()=>ue});class ue{constructor(g=[],fe=Le){if(this.data=g,this.length=this.data.length,this.compare=fe,this.length>0)for(let Ne=(this.length>>1)-1;Ne>=0;Ne--)this._down(Ne)}push(g){this.data.push(g),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const g=this.data[0],fe=this.data.pop();return this.length--,this.length>0&&(this.data[0]=fe,this._down(0)),g}peek(){return this.data[0]}_up(g){const{data:fe,compare:Ne}=this,Oe=fe[g];for(;g>0;){const He=g-1>>1,ct=fe[He];if(Ne(Oe,ct)>=0)break;fe[g]=ct,g=He}fe[g]=Oe}_down(g){const{data:fe,compare:Ne}=this,Oe=this.length>>1,He=fe[g];for(;g<Oe;){let ct=1+(g<<1),Ht=fe[ct];const qe=ct+1;if(qe<this.length&&Ne(fe[qe],Ht)<0&&(ct=qe,Ht=fe[qe]),Ne(Ht,He)>=0)break;fe[g]=Ht,g=ct}fe[g]=He}}function Le(Je,g){return Je<g?-1:Je>g?1:0}},4855:function(An,Rt){!function(Ce){"use strict";function ue(){}function Le(c){this.message=c||""}function Je(c){this.message=c||""}function g(c){this.message=c||""}function fe(){}function Ne(c){return null===c?Zi:c.color}function Oe(c){return null===c?null:c.parent}function He(c,f){null!==c&&(c.color=f)}function ct(c){return null===c?null:c.left}function Ht(c){return null===c?null:c.right}function qe(){this.root_=null,this.size_=0}function Qe(){}function je(){this.array_=[],arguments[0]instanceof Me&&this.addAll(arguments[0])}function Nt(){}function le(c){this.message=c||""}function we(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(c){if(null==this)throw new TypeError(this+" is not an object");var f=Object(this),b=Math.max(Math.min(f.length,9007199254740991),0)||0,w=1 in arguments&&parseInt(Number(arguments[1]),10)||0;w=w<0?Math.max(b+w,0):Math.min(w,b);var A=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:b;for(A=A<0?Math.max(b+arguments[2],0):Math.min(A,b);w<A;)f[w]=c,++w;return f},writable:!0}),Number.isFinite=Number.isFinite||function(c){return"number"==typeof c&&isFinite(c)},Number.isInteger=Number.isInteger||function(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(c){return c!=c},Math.trunc=Math.trunc||function(c){return c<0?Math.ceil(c):Math.floor(c)};var J=function(){};J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J},J.prototype.equalsWithTolerance=function(c,f,b){return Math.abs(c-f)<=b};var Z=function(c){function f(b){c.call(this,b),this.name="IllegalArgumentException",this.message=b,this.stack=(new c).stack}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f}(Error),ee=function(){},ke={MAX_VALUE:{configurable:!0}};ee.isNaN=function(c){return Number.isNaN(c)},ee.doubleToLongBits=function(c){return c},ee.longBitsToDouble=function(c){return c},ee.isInfinite=function(c){return!Number.isFinite(c)},ke.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ee,ke);var ne=function(){},K=function(){},ye=function(){},Q=function c(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=c.NULL_ORDINATE;else if(1===arguments.length){var f=arguments[0];this.x=f.x,this.y=f.y,this.z=f.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=c.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},he={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Q.prototype.setOrdinate=function(c,f){switch(c){case Q.X:this.x=f;break;case Q.Y:this.y=f;break;case Q.Z:this.z=f;break;default:throw new Z("Invalid ordinate index: "+c)}},Q.prototype.equals2D=function(){if(1===arguments.length){var c=arguments[0];return this.x===c.x&&this.y===c.y}if(2===arguments.length){var f=arguments[0],b=arguments[1];return!!J.equalsWithTolerance(this.x,f.x,b)&&!!J.equalsWithTolerance(this.y,f.y,b)}},Q.prototype.getOrdinate=function(c){switch(c){case Q.X:return this.x;case Q.Y:return this.y;case Q.Z:return this.z}throw new Z("Invalid ordinate index: "+c)},Q.prototype.equals3D=function(c){return this.x===c.x&&this.y===c.y&&(this.z===c.z||ee.isNaN(this.z))&&ee.isNaN(c.z)},Q.prototype.equals=function(c){return c instanceof Q&&this.equals2D(c)},Q.prototype.equalInZ=function(c,f){return J.equalsWithTolerance(this.z,c.z,f)},Q.prototype.compareTo=function(c){return this.x<c.x?-1:this.x>c.x?1:this.y<c.y?-1:this.y>c.y?1:0},Q.prototype.clone=function(){},Q.prototype.copy=function(){return new Q(this)},Q.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Q.prototype.distance3D=function(c){var f=this.x-c.x,b=this.y-c.y,w=this.z-c.z;return Math.sqrt(f*f+b*b+w*w)},Q.prototype.distance=function(c){var f=this.x-c.x,b=this.y-c.y;return Math.sqrt(f*f+b*b)},Q.prototype.hashCode=function(){var c=17;return 37*(c=37*c+Q.hashCode(this.x))+Q.hashCode(this.y)},Q.prototype.setCoordinate=function(c){this.x=c.x,this.y=c.y,this.z=c.z},Q.prototype.interfaces_=function(){return[ne,K,ue]},Q.prototype.getClass=function(){return Q},Q.hashCode=function(){if(1===arguments.length){var f=ee.doubleToLongBits(arguments[0]);return Math.trunc((f^f)>>>32)}},he.DimensionalComparator.get=function(){return se},he.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},he.NULL_ORDINATE.get=function(){return ee.NaN},he.X.get=function(){return 0},he.Y.get=function(){return 1},he.Z.get=function(){return 2},Object.defineProperties(Q,he);var se=function(c){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var f=arguments[0];if(2!==f&&3!==f)throw new Z("only 2 or 3 dimensions may be specified");this._dimensionsToTest=f}};se.prototype.compare=function(c,f){var b=c,w=f,A=se.compare(b.x,w.x);if(0!==A)return A;var B=se.compare(b.y,w.y);return 0!==B?B:this._dimensionsToTest<=2?0:se.compare(b.z,w.z)},se.prototype.interfaces_=function(){return[ye]},se.prototype.getClass=function(){return se},se.compare=function(c,f){return c<f?-1:c>f?1:ee.isNaN(c)?ee.isNaN(f)?0:-1:ee.isNaN(f)?1:0};var be=function(){};be.prototype.create=function(){},be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be};var ie=function(){},Ve={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.toLocationSymbol=function(c){switch(c){case ie.EXTERIOR:return"e";case ie.BOUNDARY:return"b";case ie.INTERIOR:return"i";case ie.NONE:return"-"}throw new Z("Unknown location value: "+c)},Ve.INTERIOR.get=function(){return 0},Ve.BOUNDARY.get=function(){return 1},Ve.EXTERIOR.get=function(){return 2},Ve.NONE.get=function(){return-1},Object.defineProperties(ie,Ve);var Se=function(c,f){return c.interfaces_&&c.interfaces_().indexOf(f)>-1},Y=function(){},Ge={LOG_10:{configurable:!0}};Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.log10=function(c){var f=Math.log(c);return ee.isInfinite(f)||ee.isNaN(f)?f:f/Y.LOG_10},Y.min=function(c,f,b,w){var A=c;return f<A&&(A=f),b<A&&(A=b),w<A&&(A=w),A},Y.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var c=arguments[0],f=arguments[1],b=arguments[2];return c<f?f:c>b?b:c}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var w=arguments[0],A=arguments[1],B=arguments[2];return w<A?A:w>B?B:w}},Y.wrap=function(c,f){return c<0?f- -c%f:c%f},Y.max=function(){if(3===arguments.length){var f=arguments[1],b=arguments[2],w=arguments[0];return f>w&&(w=f),b>w&&(w=b),w}if(4===arguments.length){var B=arguments[1],U=arguments[2],xe=arguments[3],st=arguments[0];return B>st&&(st=B),U>st&&(st=U),xe>st&&(st=xe),st}},Y.average=function(c,f){return(c+f)/2},Ge.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Y,Ge);var De=function(c){this.str=c};De.prototype.append=function(c){this.str+=c},De.prototype.setCharAt=function(c,f){this.str=this.str.substr(0,c)+f+this.str.substr(c+1)},De.prototype.toString=function(c){return this.str};var Ke=function(c){this.value=c};Ke.prototype.intValue=function(){return this.value},Ke.prototype.compareTo=function(c){return this.value<c?-1:this.value>c?1:0},Ke.isNaN=function(c){return Number.isNaN(c)};var $e=function(){};$e.isWhitespace=function(c){return c<=32&&c>=0||127===c},$e.toUpperCase=function(c){return c.toUpperCase()};var ae=function c(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof c?this.init(arguments[0]):"string"==typeof arguments[0]&&c.call(this,c.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},Ze={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};ae.prototype.le=function(c){return(this._hi<c._hi||this._hi===c._hi)&&this._lo<=c._lo},ae.prototype.extractSignificantDigits=function(c,f){var b=this.abs(),w=ae.magnitude(b._hi),A=ae.TEN.pow(w);(b=b.divide(A)).gt(ae.TEN)?(b=b.divide(ae.TEN),w+=1):b.lt(ae.ONE)&&(b=b.multiply(ae.TEN),w-=1);for(var B=w+1,U=new De,xe=ae.MAX_PRINT_DIGITS-1,st=0;st<=xe;st++){c&&st===B&&U.append(".");var $t=Math.trunc(b._hi);if($t<0)break;var gn=!1,Rn=0;$t>9?(gn=!0,Rn="9"):Rn="0"+$t,U.append(Rn),b=b.subtract(ae.valueOf($t)).multiply(ae.TEN),gn&&b.selfAdd(ae.TEN);var Ai=!0,Si=ae.magnitude(b._hi);if(Si<0&&Math.abs(Si)>=xe-st&&(Ai=!1),!Ai)break}return f[0]=w,U.toString()},ae.prototype.sqr=function(){return this.multiply(this)},ae.prototype.doubleValue=function(){return this._hi+this._lo},ae.prototype.subtract=function(){return arguments[0]instanceof ae?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},ae.prototype.equals=function(){if(1===arguments.length){var c=arguments[0];return this._hi===c._hi&&this._lo===c._lo}},ae.prototype.isZero=function(){return 0===this._hi&&0===this._lo},ae.prototype.selfSubtract=function(){if(arguments[0]instanceof ae){var c=arguments[0];return this.isNaN()?this:this.selfAdd(-c._hi,-c._lo)}if("number"==typeof arguments[0]){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f,0)}},ae.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},ae.prototype.min=function(c){return this.le(c)?this:c},ae.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof ae){var c=arguments[0];return this.selfDivide(c._hi,c._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var B,xe,st,gn,b=arguments[0],A=null,U=null,$t=null,Rn=null;return this._hi=Rn=(st=this._hi/b)+($t=(this._hi-(gn=st*b)-(Rn=(A=($t=ae.SPLIT*st)-(A=$t-st))*(U=(Rn=ae.SPLIT*b)-(U=Rn-b))-gn+A*(xe=b-U)+(B=st-A)*U+B*xe)+this._lo-st*arguments[1])/b),this._lo=st-Rn+$t,this}},ae.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},ae.prototype.divide=function(){if(arguments[0]instanceof ae){var b,A,B,xe,c=arguments[0],f=null,w=null,U=null,st=null;return b=(B=this._hi/c._hi)-(f=(U=ae.SPLIT*B)-(f=U-B)),st=f*(w=(st=ae.SPLIT*c._hi)-(w=st-c._hi))-(xe=B*c._hi)+f*(A=c._hi-w)+b*w+b*A,new ae(st=B+(U=(this._hi-xe-st+this._lo-B*c._lo)/c._hi),B-st+U)}if("number"==typeof arguments[0]){var $t=arguments[0];return ee.isNaN($t)?ae.createNaN():ae.copy(this).selfDivide($t,0)}},ae.prototype.ge=function(c){return(this._hi>c._hi||this._hi===c._hi)&&this._lo>=c._lo},ae.prototype.pow=function(c){if(0===c)return ae.valueOf(1);var f=new ae(this),b=ae.valueOf(1),w=Math.abs(c);if(w>1)for(;w>0;)w%2==1&&b.selfMultiply(f),(w/=2)>0&&(f=f.sqr());else b=f;return c<0?b.reciprocal():b},ae.prototype.ceil=function(){if(this.isNaN())return ae.NaN;var c=Math.ceil(this._hi),f=0;return c===this._hi&&(f=Math.ceil(this._lo)),new ae(c,f)},ae.prototype.compareTo=function(c){return this._hi<c._hi?-1:this._hi>c._hi?1:this._lo<c._lo?-1:this._lo>c._lo?1:0},ae.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},ae.prototype.setValue=function(){return arguments[0]instanceof ae||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},ae.prototype.max=function(c){return this.ge(c)?this:c},ae.prototype.sqrt=function(){if(this.isZero())return ae.valueOf(0);if(this.isNegative())return ae.NaN;var c=1/Math.sqrt(this._hi),b=ae.valueOf(this._hi*c),w=this.subtract(b.sqr())._hi*(.5*c);return b.add(w)},ae.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof ae){var c=arguments[0];return this.selfAdd(c._hi,c._lo)}if("number"==typeof arguments[0]){var b,w,A,U,xe,f=arguments[0];return this._hi=(b=(A=this._hi+f)+(xe=f-(U=A-this._hi)+(this._hi-(A-U))+this._lo))+(w=xe+(A-b)),this._lo=w+(b-this._hi),this}}else if(2===arguments.length){var gn,Rn,Si,Co,st=arguments[0],$t=arguments[1],Ai=null,Vi=null,fr=null;Vi=(Si=this._hi+st)-(fr=Si-this._hi),Ai=(Rn=this._lo+$t)-(Co=Rn-this._lo);var wi=(gn=Si+(fr=(Vi=st-fr+(this._hi-Vi))+Rn))+(fr=(Ai=$t-Co+(this._lo-Ai))+(fr+(Si-gn))),El=fr+(gn-wi);return this._hi=wi,this._lo=El,this}},ae.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof ae){var c=arguments[0];return this.selfMultiply(c._hi,c._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var B,xe,b=arguments[0],A=null,U=null,st=null,$t=null;A=(st=ae.SPLIT*this._hi)-this._hi,A=st-A;var gn=(st=this._hi*b)+($t=A*(U=($t=ae.SPLIT*b)-(U=$t-b))-st+A*(xe=b-U)+(B=this._hi-A)*U+B*xe+(this._hi*arguments[1]+this._lo*b)),Rn=$t+(A=st-gn);return this._hi=gn,this._lo=Rn,this}},ae.prototype.selfSqr=function(){return this.selfMultiply(this)},ae.prototype.floor=function(){if(this.isNaN())return ae.NaN;var c=Math.floor(this._hi),f=0;return c===this._hi&&(f=Math.floor(this._lo)),new ae(c,f)},ae.prototype.negate=function(){return this.isNaN()?this:new ae(-this._hi,-this._lo)},ae.prototype.clone=function(){},ae.prototype.multiply=function(){if(arguments[0]instanceof ae){var c=arguments[0];return c.isNaN()?ae.createNaN():ae.copy(this).selfMultiply(c)}if("number"==typeof arguments[0]){var f=arguments[0];return ee.isNaN(f)?ae.createNaN():ae.copy(this).selfMultiply(f,0)}},ae.prototype.isNaN=function(){return ee.isNaN(this._hi)},ae.prototype.intValue=function(){return Math.trunc(this._hi)},ae.prototype.toString=function(){var c=ae.magnitude(this._hi);return c>=-3&&c<=20?this.toStandardNotation():this.toSciNotation()},ae.prototype.toStandardNotation=function(){var c=this.getSpecialNumberString();if(null!==c)return c;var f=new Array(1).fill(null),b=this.extractSignificantDigits(!0,f),w=f[0]+1,A=b;return"."===b.charAt(0)?A="0"+b:w<0?A="0."+ae.stringOfChar("0",-w)+b:-1===b.indexOf(".")&&(A=b+ae.stringOfChar("0",w-b.length)+".0"),this.isNegative()?"-"+A:A},ae.prototype.reciprocal=function(){var f,w,A,U,c=null,b=null,B=null,xe=null;f=(A=1/this._hi)-(c=(B=ae.SPLIT*A)-(c=B-A)),b=(xe=ae.SPLIT*this._hi)-this._hi;var st=A+(B=(1-(U=A*this._hi)-(xe=c*(b=xe-b)-U+c*(w=this._hi-b)+f*b+f*w)-A*this._lo)/this._hi);return new ae(st,A-st+B)},ae.prototype.toSciNotation=function(){if(this.isZero())return ae.SCI_NOT_ZERO;var c=this.getSpecialNumberString();if(null!==c)return c;var f=new Array(1).fill(null),b=this.extractSignificantDigits(!1,f),w=ae.SCI_NOT_EXPONENT_CHAR+f[0];if("0"===b.charAt(0))throw new Error("Found leading zero: "+b);var A="";b.length>1&&(A=b.substring(1));var B=b.charAt(0)+"."+A;return this.isNegative()?"-"+B+w:B+w},ae.prototype.abs=function(){return this.isNaN()?ae.NaN:this.isNegative()?this.negate():new ae(this)},ae.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},ae.prototype.lt=function(c){return(this._hi<c._hi||this._hi===c._hi)&&this._lo<c._lo},ae.prototype.add=function(){if(arguments[0]instanceof ae){var c=arguments[0];return ae.copy(this).selfAdd(c)}if("number"==typeof arguments[0]){var f=arguments[0];return ae.copy(this).selfAdd(f)}},ae.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof ae){var f=arguments[0];this._hi=f._hi,this._lo=f._lo}}else if(2===arguments.length){var w=arguments[1];this._hi=arguments[0],this._lo=w}},ae.prototype.gt=function(c){return(this._hi>c._hi||this._hi===c._hi)&&this._lo>c._lo},ae.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},ae.prototype.trunc=function(){return this.isNaN()?ae.NaN:this.isPositive()?this.floor():this.ceil()},ae.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},ae.prototype.interfaces_=function(){return[ue,ne,K]},ae.prototype.getClass=function(){return ae},ae.sqr=function(c){return ae.valueOf(c).selfMultiply(c)},ae.valueOf=function(){return"string"==typeof arguments[0]?ae.parse(arguments[0]):"number"==typeof arguments[0]?new ae(arguments[0]):void 0},ae.sqrt=function(c){return ae.valueOf(c).sqrt()},ae.parse=function(c){for(var f=0,b=c.length;$e.isWhitespace(c.charAt(f));)f++;var w=!1;if(f<b){var A=c.charAt(f);"-"!==A&&"+"!==A||(f++,"-"===A&&(w=!0))}for(var B=new ae,U=0,xe=0,st=0;!(f>=b);){var $t=c.charAt(f);if(f++,$e.isDigit($t)){var gn=$t-"0";B.selfMultiply(ae.TEN),B.selfAdd(gn),U++}else{if("."!==$t){if("e"===$t||"E"===$t){var Rn=c.substring(f);try{st=Ke.parseInt(Rn)}catch(Co){throw Co instanceof Error?new Error("Invalid exponent "+Rn+" in string "+c):Co}break}throw new Error("Unexpected character '"+$t+"' at position "+f+" in string "+c)}xe=U}}var Ai=B,Si=U-xe-st;if(0===Si)Ai=B;else if(Si>0){var Vi=ae.TEN.pow(Si);Ai=B.divide(Vi)}else if(Si<0){var fr=ae.TEN.pow(-Si);Ai=B.multiply(fr)}return w?Ai.negate():Ai},ae.createNaN=function(){return new ae(ee.NaN,ee.NaN)},ae.copy=function(c){return new ae(c)},ae.magnitude=function(c){var f=Math.abs(c),b=Math.log(f)/Math.log(10),w=Math.trunc(Math.floor(b));return 10*Math.pow(10,w)<=f&&(w+=1),w},ae.stringOfChar=function(c,f){for(var b=new De,w=0;w<f;w++)b.append(c);return b.toString()},Ze.PI.get=function(){return new ae(3.141592653589793,12246467991473532e-32)},Ze.TWO_PI.get=function(){return new ae(6.283185307179586,24492935982947064e-32)},Ze.PI_2.get=function(){return new ae(1.5707963267948966,6123233995736766e-32)},Ze.E.get=function(){return new ae(2.718281828459045,14456468917292502e-32)},Ze.NaN.get=function(){return new ae(ee.NaN,ee.NaN)},Ze.EPS.get=function(){return 123259516440783e-46},Ze.SPLIT.get=function(){return 134217729},Ze.MAX_PRINT_DIGITS.get=function(){return 32},Ze.TEN.get=function(){return ae.valueOf(10)},Ze.ONE.get=function(){return ae.valueOf(1)},Ze.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ze.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(ae,Ze);var et=function(){},dn={DP_SAFE_EPSILON:{configurable:!0}};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.orientationIndex=function(c,f,b){var w=et.orientationIndexFilter(c,f,b);if(w<=1)return w;var A=ae.valueOf(f.x).selfAdd(-c.x),B=ae.valueOf(f.y).selfAdd(-c.y),U=ae.valueOf(b.x).selfAdd(-f.x),xe=ae.valueOf(b.y).selfAdd(-f.y);return A.selfMultiply(xe).selfSubtract(B.selfMultiply(U)).signum()},et.signOfDet2x2=function(c,f,b,w){return c.multiply(w).selfSubtract(f.multiply(b)).signum()},et.intersection=function(c,f,b,w){var A=ae.valueOf(w.y).selfSubtract(b.y).selfMultiply(ae.valueOf(f.x).selfSubtract(c.x)),B=ae.valueOf(w.x).selfSubtract(b.x).selfMultiply(ae.valueOf(f.y).selfSubtract(c.y)),U=A.subtract(B),xe=ae.valueOf(w.x).selfSubtract(b.x).selfMultiply(ae.valueOf(c.y).selfSubtract(b.y)),st=ae.valueOf(w.y).selfSubtract(b.y).selfMultiply(ae.valueOf(c.x).selfSubtract(b.x)),$t=xe.subtract(st).selfDivide(U).doubleValue(),gn=ae.valueOf(c.x).selfAdd(ae.valueOf(f.x).selfSubtract(c.x).selfMultiply($t)).doubleValue(),Rn=ae.valueOf(f.x).selfSubtract(c.x).selfMultiply(ae.valueOf(c.y).selfSubtract(b.y)),Ai=ae.valueOf(f.y).selfSubtract(c.y).selfMultiply(ae.valueOf(c.x).selfSubtract(b.x)),Si=Rn.subtract(Ai).selfDivide(U).doubleValue(),Vi=ae.valueOf(b.y).selfAdd(ae.valueOf(w.y).selfSubtract(b.y).selfMultiply(Si)).doubleValue();return new Q(gn,Vi)},et.orientationIndexFilter=function(c,f,b){var w=null,A=(c.x-b.x)*(f.y-b.y),B=(c.y-b.y)*(f.x-b.x),U=A-B;if(A>0){if(B<=0)return et.signum(U);w=A+B}else{if(!(A<0)||B>=0)return et.signum(U);w=-A-B}var xe=et.DP_SAFE_EPSILON*w;return U>=xe||-U>=xe?et.signum(U):2},et.signum=function(c){return c>0?1:c<0?-1:0},dn.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(et,dn);var qt=function(){},_n={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};_n.X.get=function(){return 0},_n.Y.get=function(){return 1},_n.Z.get=function(){return 2},_n.M.get=function(){return 3},qt.prototype.setOrdinate=function(c,f,b){},qt.prototype.size=function(){},qt.prototype.getOrdinate=function(c,f){},qt.prototype.getCoordinate=function(){},qt.prototype.getCoordinateCopy=function(c){},qt.prototype.getDimension=function(){},qt.prototype.getX=function(c){},qt.prototype.clone=function(){},qt.prototype.expandEnvelope=function(c){},qt.prototype.copy=function(){},qt.prototype.getY=function(c){},qt.prototype.toCoordinateArray=function(){},qt.prototype.interfaces_=function(){return[K]},qt.prototype.getClass=function(){return qt},Object.defineProperties(qt,_n);var kn=function(){},ei=function(c){function f(){c.call(this,"Projective point not representable on the Cartesian plane.")}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(kn),Vt=function(){};Vt.arraycopy=function(c,f,b,w,A){for(var B=0,U=f;U<f+A;U++)b[w+B]=c[U],B++},Vt.getProperty=function(c){return{"line.separator":"\n"}[c]};var vi=function c(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var f=arguments[0];this.x=f.x,this.y=f.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var w=arguments[1];this.x=arguments[0],this.y=w,this.w=1}else if(arguments[0]instanceof c&&arguments[1]instanceof c){var A=arguments[0],B=arguments[1];this.x=A.y*B.w-B.y*A.w,this.y=B.x*A.w-A.x*B.w,this.w=A.x*B.y-B.x*A.y}else if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var U=arguments[0],xe=arguments[1];this.x=U.y-xe.y,this.y=xe.x-U.x,this.w=U.x*xe.y-xe.x*U.y}}else if(3===arguments.length){var $t=arguments[1],gn=arguments[2];this.x=arguments[0],this.y=$t,this.w=gn}else if(4===arguments.length){var Rn=arguments[0],Ai=arguments[1],Si=arguments[2],Vi=arguments[3],fr=Rn.y-Ai.y,Co=Ai.x-Rn.x,wi=Rn.x*Ai.y-Ai.x*Rn.y,El=Si.y-Vi.y,_u=Vi.x-Si.x,Wc=Si.x*Vi.y-Vi.x*Si.y;this.x=Co*Wc-_u*wi,this.y=El*wi-fr*Wc,this.w=fr*_u-El*Co}};vi.prototype.getY=function(){var c=this.y/this.w;if(ee.isNaN(c)||ee.isInfinite(c))throw new ei;return c},vi.prototype.getX=function(){var c=this.x/this.w;if(ee.isNaN(c)||ee.isInfinite(c))throw new ei;return c},vi.prototype.getCoordinate=function(){var c=new Q;return c.x=this.getX(),c.y=this.getY(),c},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.intersection=function(c,f,b,w){var A=c.y-f.y,B=f.x-c.x,U=c.x*f.y-f.x*c.y,xe=b.y-w.y,st=w.x-b.x,$t=b.x*w.y-w.x*b.y,gn=A*st-xe*B,Rn=(B*$t-st*U)/gn,Ai=(xe*U-A*$t)/gn;if(ee.isNaN(Rn)||ee.isInfinite(Rn)||ee.isNaN(Ai)||ee.isInfinite(Ai))throw new ei;return new Q(Rn,Ai)};var Tn=function c(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof Q){var f=arguments[0];this.init(f.x,f.x,f.y,f.y)}else arguments[0]instanceof c&&this.init(arguments[0]);else if(2===arguments.length){var w=arguments[0],A=arguments[1];this.init(w.x,A.x,w.y,A.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Un={serialVersionUID:{configurable:!0}};Tn.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Tn.prototype.equals=function(c){if(!(c instanceof Tn))return!1;var f=c;return this.isNull()?f.isNull():this._maxx===f.getMaxX()&&this._maxy===f.getMaxY()&&this._minx===f.getMinX()&&this._miny===f.getMinY()},Tn.prototype.intersection=function(c){return this.isNull()||c.isNull()||!this.intersects(c)?new Tn:new Tn(this._minx>c._minx?this._minx:c._minx,this._maxx<c._maxx?this._maxx:c._maxx,this._miny>c._miny?this._miny:c._miny,this._maxy<c._maxy?this._maxy:c._maxy)},Tn.prototype.isNull=function(){return this._maxx<this._minx},Tn.prototype.getMaxX=function(){return this._maxx},Tn.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Q){var c=arguments[0];return this.covers(c.x,c.y)}if(arguments[0]instanceof Tn){var f=arguments[0];return!this.isNull()&&!f.isNull()&&f.getMinX()>=this._minx&&f.getMaxX()<=this._maxx&&f.getMinY()>=this._miny&&f.getMaxY()<=this._maxy}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];return!this.isNull()&&b>=this._minx&&b<=this._maxx&&w>=this._miny&&w<=this._maxy}},Tn.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Tn){var c=arguments[0];return!this.isNull()&&!c.isNull()&&!(c._minx>this._maxx||c._maxx<this._minx||c._miny>this._maxy||c._maxy<this._miny)}if(arguments[0]instanceof Q){var f=arguments[0];return this.intersects(f.x,f.y)}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];return!this.isNull()&&!(b>this._maxx||b<this._minx||w>this._maxy||w<this._miny)}},Tn.prototype.getMinY=function(){return this._miny},Tn.prototype.getMinX=function(){return this._minx},Tn.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Q){var c=arguments[0];this.expandToInclude(c.x,c.y)}else if(arguments[0]instanceof Tn){var f=arguments[0];if(f.isNull())return null;this.isNull()?(this._minx=f.getMinX(),this._maxx=f.getMaxX(),this._miny=f.getMinY(),this._maxy=f.getMaxY()):(f._minx<this._minx&&(this._minx=f._minx),f._maxx>this._maxx&&(this._maxx=f._maxx),f._miny<this._miny&&(this._miny=f._miny),f._maxy>this._maxy&&(this._maxy=f._maxy))}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];this.isNull()?(this._minx=b,this._maxx=b,this._miny=w,this._maxy=w):(b<this._minx&&(this._minx=b),b>this._maxx&&(this._maxx=b),w<this._miny&&(this._miny=w),w>this._maxy&&(this._maxy=w))}},Tn.prototype.minExtent=function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return c<f?c:f},Tn.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Tn.prototype.compareTo=function(c){var f=c;return this.isNull()?f.isNull()?0:-1:f.isNull()?1:this._minx<f._minx?-1:this._minx>f._minx?1:this._miny<f._miny?-1:this._miny>f._miny?1:this._maxx<f._maxx?-1:this._maxx>f._maxx?1:this._maxy<f._maxy?-1:this._maxy>f._maxy?1:0},Tn.prototype.translate=function(c,f){if(this.isNull())return null;this.init(this.getMinX()+c,this.getMaxX()+c,this.getMinY()+f,this.getMaxY()+f)},Tn.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Tn.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Tn.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Tn.prototype.maxExtent=function(){if(this.isNull())return 0;var c=this.getWidth(),f=this.getHeight();return c>f?c:f},Tn.prototype.expandBy=function(){if(1===arguments.length){var c=arguments[0];this.expandBy(c,c)}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this.isNull())return null;this._minx-=f,this._maxx+=f,this._miny-=b,this._maxy+=b,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Tn.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Tn)return this.covers(arguments[0]);if(arguments[0]instanceof Q)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Tn.prototype.centre=function(){return this.isNull()?null:new Q((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Tn.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Q){var c=arguments[0];this.init(c.x,c.x,c.y,c.y)}else if(arguments[0]instanceof Tn){var f=arguments[0];this._minx=f._minx,this._maxx=f._maxx,this._miny=f._miny,this._maxy=f._maxy}}else if(2===arguments.length){var b=arguments[0],w=arguments[1];this.init(b.x,w.x,b.y,w.y)}else if(4===arguments.length){var A=arguments[0],B=arguments[1],U=arguments[2],xe=arguments[3];A<B?(this._minx=A,this._maxx=B):(this._minx=B,this._maxx=A),U<xe?(this._miny=U,this._maxy=xe):(this._miny=xe,this._maxy=U)}},Tn.prototype.getMaxY=function(){return this._maxy},Tn.prototype.distance=function(c){if(this.intersects(c))return 0;var f=0;this._maxx<c._minx?f=c._minx-this._maxx:this._minx>c._maxx&&(f=this._minx-c._maxx);var b=0;return this._maxy<c._miny?b=c._miny-this._maxy:this._miny>c._maxy&&(b=this._miny-c._maxy),0===f?b:0===b?f:Math.sqrt(f*f+b*b)},Tn.prototype.hashCode=function(){var c=17;return 37*(c=37*(c=37*(c=37*c+Q.hashCode(this._minx))+Q.hashCode(this._maxx))+Q.hashCode(this._miny))+Q.hashCode(this._maxy)},Tn.prototype.interfaces_=function(){return[ne,ue]},Tn.prototype.getClass=function(){return Tn},Tn.intersects=function(){if(3===arguments.length){var c=arguments[0],f=arguments[1],b=arguments[2];return b.x>=(c.x<f.x?c.x:f.x)&&b.x<=(c.x>f.x?c.x:f.x)&&b.y>=(c.y<f.y?c.y:f.y)&&b.y<=(c.y>f.y?c.y:f.y)}if(4===arguments.length){var w=arguments[0],A=arguments[1],B=arguments[2],U=arguments[3],xe=Math.min(B.x,U.x),st=Math.max(B.x,U.x),$t=Math.min(w.x,A.x),gn=Math.max(w.x,A.x);return!($t>st||gn<xe||(xe=Math.min(B.y,U.y),st=Math.max(B.y,U.y),$t=Math.min(w.y,A.y),gn=Math.max(w.y,A.y),$t>st||gn<xe))}},Un.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Tn,Un);var cn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Lt=function(c){this.geometryFactory=c||new ge};Lt.prototype.read=function(c){var f,b;c=c.replace(/[\n\r]/g," ");var A=cn.typeStr.exec(c);if(-1!==c.search("EMPTY")&&((A=cn.emptyTypeStr.exec(c))[2]=void 0),A&&(b=A[1].toLowerCase(),Gn[b]&&(f=Gn[b].apply(this,[A[2]]))),void 0===f)throw new Error("Could not parse WKT "+c);return f},Lt.prototype.write=function(c){return this.extractGeometry(c)},Lt.prototype.extractGeometry=function(c){var f=c.getGeometryType().toLowerCase();if(!Cn[f])return null;var b=f.toUpperCase();return c.isEmpty()?b+" EMPTY":b+"("+Cn[f].apply(this,[c])+")"};var Cn={coordinate:function(c){return c.x+" "+c.y},point:function(c){return Cn.coordinate.call(this,c._coordinates._coordinates[0])},multipoint:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push("("+Cn.point.apply(this,[c._geometries[b]])+")");return f.join(",")},linestring:function(c){for(var f=[],b=0,w=c._points._coordinates.length;b<w;++b)f.push(Cn.coordinate.apply(this,[c._points._coordinates[b]]));return f.join(",")},linearring:function(c){for(var f=[],b=0,w=c._points._coordinates.length;b<w;++b)f.push(Cn.coordinate.apply(this,[c._points._coordinates[b]]));return f.join(",")},multilinestring:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push("("+Cn.linestring.apply(this,[c._geometries[b]])+")");return f.join(",")},polygon:function(c){var f=[];f.push("("+Cn.linestring.apply(this,[c._shell])+")");for(var b=0,w=c._holes.length;b<w;++b)f.push("("+Cn.linestring.apply(this,[c._holes[b]])+")");return f.join(",")},multipolygon:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push("("+Cn.polygon.apply(this,[c._geometries[b]])+")");return f.join(",")},geometrycollection:function(c){for(var f=[],b=0,w=c._geometries.length;b<w;++b)f.push(this.extractGeometry(c._geometries[b]));return f.join(",")}},Gn={point:function(c){if(void 0===c)return this.geometryFactory.createPoint();var f=c.trim().split(cn.spaces);return this.geometryFactory.createPoint(new Q(Number.parseFloat(f[0]),Number.parseFloat(f[1])))},multipoint:function(c){if(void 0===c)return this.geometryFactory.createMultiPoint();for(var f,b=c.trim().split(","),w=[],A=0,B=b.length;A<B;++A)f=b[A].replace(cn.trimParens,"$1"),w.push(Gn.point.apply(this,[f]));return this.geometryFactory.createMultiPoint(w)},linestring:function(c){if(void 0===c)return this.geometryFactory.createLineString();for(var f,b=c.trim().split(","),w=[],A=0,B=b.length;A<B;++A)f=b[A].trim().split(cn.spaces),w.push(new Q(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLineString(w)},linearring:function(c){if(void 0===c)return this.geometryFactory.createLinearRing();for(var f,b=c.trim().split(","),w=[],A=0,B=b.length;A<B;++A)f=b[A].trim().split(cn.spaces),w.push(new Q(Number.parseFloat(f[0]),Number.parseFloat(f[1])));return this.geometryFactory.createLinearRing(w)},multilinestring:function(c){if(void 0===c)return this.geometryFactory.createMultiLineString();for(var f,b=c.trim().split(cn.parenComma),w=[],A=0,B=b.length;A<B;++A)f=b[A].replace(cn.trimParens,"$1"),w.push(Gn.linestring.apply(this,[f]));return this.geometryFactory.createMultiLineString(w)},polygon:function(c){if(void 0===c)return this.geometryFactory.createPolygon();for(var f,b,w,A,B=c.trim().split(cn.parenComma),U=[],xe=0,st=B.length;xe<st;++xe)f=B[xe].replace(cn.trimParens,"$1"),b=Gn.linestring.apply(this,[f]),w=this.geometryFactory.createLinearRing(b._points),0===xe?A=w:U.push(w);return this.geometryFactory.createPolygon(A,U)},multipolygon:function(c){if(void 0===c)return this.geometryFactory.createMultiPolygon();for(var f,b=c.trim().split(cn.doubleParenComma),w=[],A=0,B=b.length;A<B;++A)f=b[A].replace(cn.trimParens,"$1"),w.push(Gn.polygon.apply(this,[f]));return this.geometryFactory.createMultiPolygon(w)},geometrycollection:function(c){if(void 0===c)return this.geometryFactory.createGeometryCollection();for(var f=(c=c.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),b=[],w=0,A=f.length;w<A;++w)b.push(this.read(f[w]));return this.geometryFactory.createGeometryCollection(b)}},At=function(c){this.parser=new Lt(c)};At.prototype.write=function(c){return this.parser.write(c)},At.toLineString=function(c,f){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+c.x+" "+c.y+", "+f.x+" "+f.y+" )"};var Ae=function(c){function f(b){c.call(this,b),this.name="RuntimeException",this.message=b,this.stack=(new c).stack}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f}(Error),Te=function(c){function f(){c.call(this),0===arguments.length?c.call(this):1===arguments.length&&c.call(this,arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ae),Ee=function(){};Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.shouldNeverReachHere=function(){if(0===arguments.length)Ee.shouldNeverReachHere(null);else if(1===arguments.length){var c=arguments[0];throw new Te("Should never reach here"+(null!==c?": "+c:""))}},Ee.isTrue=function(){var f;if(1===arguments.length)Ee.isTrue(arguments[0],null);else if(2===arguments.length&&(f=arguments[1],!arguments[0]))throw null===f?new Te:new Te(f)},Ee.equals=function(){var c,f,b;if(2===arguments.length)Ee.equals(c=arguments[0],f=arguments[1],null);else if(3===arguments.length&&(b=arguments[2],!(f=arguments[1]).equals(c=arguments[0])))throw new Te("Expected "+c+" but encountered "+f+(null!==b?": "+b:""))};var lt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Q,this._intPt[1]=new Q,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Mt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};lt.prototype.getIndexAlongSegment=function(c,f){return this.computeIntLineIndex(),this._intLineIndex[c][f]},lt.prototype.getTopologySummary=function(){var c=new De;return this.isEndPoint()&&c.append(" endpoint"),this._isProper&&c.append(" proper"),this.isCollinear()&&c.append(" collinear"),c.toString()},lt.prototype.computeIntersection=function(c,f,b,w){this._inputLines[0][0]=c,this._inputLines[0][1]=f,this._inputLines[1][0]=b,this._inputLines[1][1]=w,this._result=this.computeIntersect(c,f,b,w)},lt.prototype.getIntersectionNum=function(){return this._result},lt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var c=arguments[0];this.getEdgeDistance(c,0)>this.getEdgeDistance(c,1)?(this._intLineIndex[c][0]=0,this._intLineIndex[c][1]=1):(this._intLineIndex[c][0]=1,this._intLineIndex[c][1]=0)}},lt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},lt.prototype.setPrecisionModel=function(c){this._precisionModel=c},lt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var c=arguments[0],f=0;f<this._result;f++)if(!this._intPt[f].equals2D(this._inputLines[c][0])&&!this._intPt[f].equals2D(this._inputLines[c][1]))return!0;return!1}},lt.prototype.getIntersection=function(c){return this._intPt[c]},lt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},lt.prototype.hasIntersection=function(){return this._result!==lt.NO_INTERSECTION},lt.prototype.getEdgeDistance=function(c,f){return lt.computeEdgeDistance(this._intPt[f],this._inputLines[c][0],this._inputLines[c][1])},lt.prototype.isCollinear=function(){return this._result===lt.COLLINEAR_INTERSECTION},lt.prototype.toString=function(){return At.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+At.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},lt.prototype.getEndpoint=function(c,f){return this._inputLines[c][f]},lt.prototype.isIntersection=function(c){for(var f=0;f<this._result;f++)if(this._intPt[f].equals2D(c))return!0;return!1},lt.prototype.getIntersectionAlongSegment=function(c,f){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[c][f]]},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt.computeEdgeDistance=function(c,f,b){var w=Math.abs(b.x-f.x),A=Math.abs(b.y-f.y),B=-1;if(c.equals(f))B=0;else if(c.equals(b))B=w>A?w:A;else{var U=Math.abs(c.x-f.x),xe=Math.abs(c.y-f.y);0!==(B=w>A?U:xe)||c.equals(f)||(B=Math.max(U,xe))}return Ee.isTrue(!(0===B&&!c.equals(f)),"Bad distance calculation"),B},lt.nonRobustComputeEdgeDistance=function(c,f,b){var w=c.x-f.x,A=c.y-f.y,B=Math.sqrt(w*w+A*A);return Ee.isTrue(!(0===B&&!c.equals(f)),"Invalid distance calculation"),B},Mt.DONT_INTERSECT.get=function(){return 0},Mt.DO_INTERSECT.get=function(){return 1},Mt.COLLINEAR.get=function(){return 2},Mt.NO_INTERSECTION.get=function(){return 0},Mt.POINT_INTERSECTION.get=function(){return 1},Mt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(lt,Mt);var ln=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.isInSegmentEnvelopes=function(b){var w=new Tn(this._inputLines[0][0],this._inputLines[0][1]),A=new Tn(this._inputLines[1][0],this._inputLines[1][1]);return w.contains(b)&&A.contains(b)},f.prototype.computeIntersection=function(){if(3!==arguments.length)return c.prototype.computeIntersection.apply(this,arguments);var b=arguments[0],w=arguments[1],A=arguments[2];if(this._isProper=!1,Tn.intersects(w,A,b)&&0===yn.orientationIndex(w,A,b)&&0===yn.orientationIndex(A,w,b))return this._isProper=!0,(b.equals(w)||b.equals(A))&&(this._isProper=!1),this._result=c.POINT_INTERSECTION,null;this._result=c.NO_INTERSECTION},f.prototype.normalizeToMinimum=function(b,w,A,B,U){U.x=this.smallestInAbsValue(b.x,w.x,A.x,B.x),U.y=this.smallestInAbsValue(b.y,w.y,A.y,B.y),b.x-=U.x,b.y-=U.y,w.x-=U.x,w.y-=U.y,A.x-=U.x,A.y-=U.y,B.x-=U.x,B.y-=U.y},f.prototype.safeHCoordinateIntersection=function(b,w,A,B){var U=null;try{U=vi.intersection(b,w,A,B)}catch(xe){if(!(xe instanceof ei))throw xe;U=f.nearestEndpoint(b,w,A,B)}return U},f.prototype.intersection=function(b,w,A,B){var U=this.intersectionWithNormalization(b,w,A,B);return this.isInSegmentEnvelopes(U)||(U=new Q(f.nearestEndpoint(b,w,A,B))),null!==this._precisionModel&&this._precisionModel.makePrecise(U),U},f.prototype.smallestInAbsValue=function(b,w,A,B){var U=b,xe=Math.abs(U);return Math.abs(w)<xe&&(U=w,xe=Math.abs(w)),Math.abs(A)<xe&&(U=A,xe=Math.abs(A)),Math.abs(B)<xe&&(U=B),U},f.prototype.checkDD=function(b,w,A,B,U){var xe=et.intersection(b,w,A,B),st=this.isInSegmentEnvelopes(xe);Vt.out.println("DD in env = "+st+"  --------------------- "+xe),U.distance(xe)>1e-4&&Vt.out.println("Distance = "+U.distance(xe))},f.prototype.intersectionWithNormalization=function(b,w,A,B){var U=new Q(b),xe=new Q(w),st=new Q(A),$t=new Q(B),gn=new Q;this.normalizeToEnvCentre(U,xe,st,$t,gn);var Rn=this.safeHCoordinateIntersection(U,xe,st,$t);return Rn.x+=gn.x,Rn.y+=gn.y,Rn},f.prototype.computeCollinearIntersection=function(b,w,A,B){var U=Tn.intersects(b,w,A),xe=Tn.intersects(b,w,B),st=Tn.intersects(A,B,b),$t=Tn.intersects(A,B,w);return U&&xe?(this._intPt[0]=A,this._intPt[1]=B,c.COLLINEAR_INTERSECTION):st&&$t?(this._intPt[0]=b,this._intPt[1]=w,c.COLLINEAR_INTERSECTION):U&&st?(this._intPt[0]=A,this._intPt[1]=b,!A.equals(b)||xe||$t?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):U&&$t?(this._intPt[0]=A,this._intPt[1]=w,!A.equals(w)||xe||st?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):xe&&st?(this._intPt[0]=B,this._intPt[1]=b,!B.equals(b)||U||$t?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):xe&&$t?(this._intPt[0]=B,this._intPt[1]=w,!B.equals(w)||U||st?c.COLLINEAR_INTERSECTION:c.POINT_INTERSECTION):c.NO_INTERSECTION},f.prototype.normalizeToEnvCentre=function(b,w,A,B,U){var xe=b.x<w.x?b.x:w.x,st=b.y<w.y?b.y:w.y,$t=b.x>w.x?b.x:w.x,gn=b.y>w.y?b.y:w.y,Rn=A.x<B.x?A.x:B.x,Ai=A.y<B.y?A.y:B.y,Si=A.x>B.x?A.x:B.x,Vi=A.y>B.y?A.y:B.y,Co=((st>Ai?st:Ai)+(gn<Vi?gn:Vi))/2;U.x=((xe>Rn?xe:Rn)+($t<Si?$t:Si))/2,U.y=Co,b.x-=U.x,b.y-=U.y,w.x-=U.x,w.y-=U.y,A.x-=U.x,A.y-=U.y,B.x-=U.x,B.y-=U.y},f.prototype.computeIntersect=function(b,w,A,B){if(this._isProper=!1,!Tn.intersects(b,w,A,B))return c.NO_INTERSECTION;var U=yn.orientationIndex(b,w,A),xe=yn.orientationIndex(b,w,B);if(U>0&&xe>0||U<0&&xe<0)return c.NO_INTERSECTION;var st=yn.orientationIndex(A,B,b),$t=yn.orientationIndex(A,B,w);return st>0&&$t>0||st<0&&$t<0?c.NO_INTERSECTION:0===U&&0===xe&&0===st&&0===$t?this.computeCollinearIntersection(b,w,A,B):(0===U||0===xe||0===st||0===$t?(this._isProper=!1,b.equals2D(A)||b.equals2D(B)?this._intPt[0]=b:w.equals2D(A)||w.equals2D(B)?this._intPt[0]=w:0===U?this._intPt[0]=new Q(A):0===xe?this._intPt[0]=new Q(B):0===st?this._intPt[0]=new Q(b):0===$t&&(this._intPt[0]=new Q(w))):(this._isProper=!0,this._intPt[0]=this.intersection(b,w,A,B)),c.POINT_INTERSECTION)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.nearestEndpoint=function(b,w,A,B){var U=b,xe=yn.distancePointLine(b,A,B),st=yn.distancePointLine(w,A,B);return st<xe&&(xe=st,U=w),(st=yn.distancePointLine(A,b,w))<xe&&(xe=st,U=A),(st=yn.distancePointLine(B,b,w))<xe&&(xe=st,U=B),U},f}(lt),Fn=function(){};Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.orientationIndex=function(c,f,b){return Fn.signOfDet2x2(f.x-c.x,f.y-c.y,b.x-f.x,b.y-f.y)},Fn.signOfDet2x2=function(c,f,b,w){var A=null,B=null,U=null;if(A=1,0===c||0===w)return 0===f||0===b?0:f>0?b>0?-A:A:b>0?A:-A;if(0===f||0===b)return w>0?c>0?A:-A:c>0?-A:A;if(f>0?w>0?f<=w||(A=-A,B=c,c=b,b=B,B=f,f=w,w=B):f<=-w?(A=-A,b=-b,w=-w):(B=c,c=-b,b=B,B=f,f=-w,w=B):w>0?-f<=w?(A=-A,c=-c,f=-f):(B=-c,c=b,b=B,B=-f,f=w,w=B):f>=w?(c=-c,f=-f,b=-b,w=-w):(A=-A,B=-c,c=-b,b=B,B=-f,f=-w,w=B),c>0){if(!(b>0&&c<=b))return A}else{if(b>0||!(c>=b))return-A;A=-A,c=-c,b=-b}for(;;){if((w-=(U=Math.floor(b/c))*f)<0)return-A;if(w>f)return A;if(c>(b-=U*c)+b){if(f<w+w)return A}else{if(f>w+w)return-A;b=c-b,w=f-w,A=-A}if(0===w)return 0===b?0:-A;if(0===b||(c-=(U=Math.floor(c/b))*b,(f-=U*w)<0))return A;if(f>w)return-A;if(b>c+c){if(w<f+f)return-A}else{if(w>f+f)return A;c=b-c,f=w-f,A=-A}if(0===f)return 0===c?0:A;if(0===c)return-A}};var Bn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Bn.prototype.countSegment=function(c,f){if(c.x<this._p.x&&f.x<this._p.x)return null;if(this._p.x===f.x&&this._p.y===f.y)return this._isPointOnSegment=!0,null;if(c.y===this._p.y&&f.y===this._p.y){var b=c.x,w=f.x;return b>w&&(b=f.x,w=c.x),this._p.x>=b&&this._p.x<=w&&(this._isPointOnSegment=!0),null}if(c.y>this._p.y&&f.y<=this._p.y||f.y>this._p.y&&c.y<=this._p.y){var B=c.y-this._p.y,xe=f.y-this._p.y,st=Fn.signOfDet2x2(c.x-this._p.x,B,f.x-this._p.x,xe);if(0===st)return this._isPointOnSegment=!0,null;xe<B&&(st=-st),st>0&&this._crossingCount++}},Bn.prototype.isPointInPolygon=function(){return this.getLocation()!==ie.EXTERIOR},Bn.prototype.getLocation=function(){return this._isPointOnSegment?ie.BOUNDARY:this._crossingCount%2==1?ie.INTERIOR:ie.EXTERIOR},Bn.prototype.isOnSegment=function(){return this._isPointOnSegment},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.locatePointInRing=function(){if(arguments[0]instanceof Q&&Se(arguments[1],qt)){for(var f=arguments[1],b=new Bn(arguments[0]),w=new Q,A=new Q,B=1;B<f.size();B++)if(f.getCoordinate(B,w),f.getCoordinate(B-1,A),b.countSegment(w,A),b.isOnSegment())return b.getLocation();return b.getLocation()}if(arguments[0]instanceof Q&&arguments[1]instanceof Array){for(var xe=arguments[1],st=new Bn(arguments[0]),$t=1;$t<xe.length;$t++)if(st.countSegment(xe[$t],xe[$t-1]),st.isOnSegment())return st.getLocation();return st.getLocation()}};var yn=function(){},Yi={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn},yn.orientationIndex=function(c,f,b){return et.orientationIndex(c,f,b)},yn.signedArea=function(){if(arguments[0]instanceof Array){var c=arguments[0];if(c.length<3)return 0;for(var f=0,b=c[0].x,w=1;w<c.length-1;w++)f+=(c[w].x-b)*(c[w-1].y-c[w+1].y);return f/2}if(Se(arguments[0],qt)){var U=arguments[0],xe=U.size();if(xe<3)return 0;var st=new Q,$t=new Q,gn=new Q;U.getCoordinate(0,$t),U.getCoordinate(1,gn);var Rn=$t.x;gn.x-=Rn;for(var Ai=0,Si=1;Si<xe-1;Si++)st.y=$t.y,$t.x=gn.x,$t.y=gn.y,U.getCoordinate(Si+1,gn),gn.x-=Rn,Ai+=$t.x*(st.y-gn.y);return Ai/2}},yn.distanceLineLine=function(c,f,b,w){if(c.equals(f))return yn.distancePointLine(c,b,w);if(b.equals(w))return yn.distancePointLine(w,c,f);var A=!1;if(Tn.intersects(c,f,b,w)){var B=(f.x-c.x)*(w.y-b.y)-(f.y-c.y)*(w.x-b.x);if(0===B)A=!0;else{var xe=((c.y-b.y)*(f.x-c.x)-(c.x-b.x)*(f.y-c.y))/B,st=((c.y-b.y)*(w.x-b.x)-(c.x-b.x)*(w.y-b.y))/B;(st<0||st>1||xe<0||xe>1)&&(A=!0)}}else A=!0;return A?Y.min(yn.distancePointLine(c,b,w),yn.distancePointLine(f,b,w),yn.distancePointLine(b,c,f),yn.distancePointLine(w,c,f)):0},yn.isPointInRing=function(c,f){return yn.locatePointInRing(c,f)!==ie.EXTERIOR},yn.computeLength=function(c){var f=c.size();if(f<=1)return 0;var b=0,w=new Q;c.getCoordinate(0,w);for(var A=w.x,B=w.y,U=1;U<f;U++){c.getCoordinate(U,w);var xe=w.x,st=w.y,$t=xe-A,gn=st-B;b+=Math.sqrt($t*$t+gn*gn),A=xe,B=st}return b},yn.isCCW=function(c){var f=c.length-1;if(f<3)throw new Z("Ring has fewer than 4 points, so orientation cannot be determined");for(var b=c[0],w=0,A=1;A<=f;A++){var B=c[A];B.y>b.y&&(b=B,w=A)}var U=w;do{(U-=1)<0&&(U=f)}while(c[U].equals2D(b)&&U!==w);var xe=w;do{xe=(xe+1)%f}while(c[xe].equals2D(b)&&xe!==w);var st=c[U],$t=c[xe];if(st.equals2D(b)||$t.equals2D(b)||st.equals2D($t))return!1;var gn=yn.computeOrientation(st,b,$t);return 0===gn?st.x>$t.x:gn>0},yn.locatePointInRing=function(c,f){return Bn.locatePointInRing(c,f)},yn.distancePointLinePerpendicular=function(c,f,b){var w=(b.x-f.x)*(b.x-f.x)+(b.y-f.y)*(b.y-f.y);return Math.abs(((f.y-c.y)*(b.x-f.x)-(f.x-c.x)*(b.y-f.y))/w)*Math.sqrt(w)},yn.computeOrientation=function(c,f,b){return yn.orientationIndex(c,f,b)},yn.distancePointLine=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1];if(0===f.length)throw new Z("Line array must contain at least one vertex");for(var b=c.distance(f[0]),w=0;w<f.length-1;w++){var A=yn.distancePointLine(c,f[w],f[w+1]);A<b&&(b=A)}return b}if(3===arguments.length){var B=arguments[0],U=arguments[1],xe=arguments[2];if(U.x===xe.x&&U.y===xe.y)return B.distance(U);var st=(xe.x-U.x)*(xe.x-U.x)+(xe.y-U.y)*(xe.y-U.y),$t=((B.x-U.x)*(xe.x-U.x)+(B.y-U.y)*(xe.y-U.y))/st;return $t<=0?B.distance(U):$t>=1?B.distance(xe):Math.abs(((U.y-B.y)*(xe.x-U.x)-(U.x-B.x)*(xe.y-U.y))/st)*Math.sqrt(st)}},yn.isOnLine=function(c,f){for(var b=new ln,w=1;w<f.length;w++)if(b.computeIntersection(c,f[w-1],f[w]),b.hasIntersection())return!0;return!1},Yi.CLOCKWISE.get=function(){return-1},Yi.RIGHT.get=function(){return yn.CLOCKWISE},Yi.COUNTERCLOCKWISE.get=function(){return 1},Yi.LEFT.get=function(){return yn.COUNTERCLOCKWISE},Yi.COLLINEAR.get=function(){return 0},Yi.STRAIGHT.get=function(){return yn.COLLINEAR},Object.defineProperties(yn,Yi);var or=function(){};or.prototype.filter=function(c){},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or};var ai=function(){var c=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=c,this._SRID=c.getSRID()},Ti={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ai.prototype.isGeometryCollection=function(){return this.getSortIndex()===ai.SORTINDEX_GEOMETRYCOLLECTION},ai.prototype.getFactory=function(){return this._factory},ai.prototype.getGeometryN=function(c){return this},ai.prototype.getArea=function(){return 0},ai.prototype.isRectangle=function(){return!1},ai.prototype.equals=function(){if(arguments[0]instanceof ai){var c=arguments[0];return null!==c&&this.equalsTopo(c)}if(arguments[0]instanceof Object){var f=arguments[0];return f instanceof ai&&this.equalsExact(f)}},ai.prototype.equalsExact=function(c){return this===c||this.equalsExact(c,0)},ai.prototype.geometryChanged=function(){this.apply(ai.geometryChangedFilter)},ai.prototype.geometryChangedAction=function(){this._envelope=null},ai.prototype.equalsNorm=function(c){return null!==c&&this.norm().equalsExact(c.norm())},ai.prototype.getLength=function(){return 0},ai.prototype.getNumGeometries=function(){return 1},ai.prototype.compareTo=function(){if(1===arguments.length){var c=arguments[0],f=c;return this.getSortIndex()!==f.getSortIndex()?this.getSortIndex()-f.getSortIndex():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(c)}if(2===arguments.length){var b=arguments[0],w=arguments[1];return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(b,w)}},ai.prototype.getUserData=function(){return this._userData},ai.prototype.getSRID=function(){return this._SRID},ai.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ai.prototype.checkNotGeometryCollection=function(c){if(c.getSortIndex()===ai.SORTINDEX_GEOMETRYCOLLECTION)throw new Z("This method does not support GeometryCollection arguments")},ai.prototype.equal=function(c,f,b){return 0===b?c.equals(f):c.distance(f)<=b},ai.prototype.norm=function(){var c=this.copy();return c.normalize(),c},ai.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ai.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Tn(this._envelope)},ai.prototype.setSRID=function(c){this._SRID=c},ai.prototype.setUserData=function(c){this._userData=c},ai.prototype.compare=function(c,f){for(var b=c.iterator(),w=f.iterator();b.hasNext()&&w.hasNext();){var A=b.next(),B=w.next(),U=A.compareTo(B);if(0!==U)return U}return b.hasNext()?1:w.hasNext()?-1:0},ai.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ai.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ai.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ai.SORTINDEX_MULTIPOINT||this.getSortIndex()===ai.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ai.SORTINDEX_MULTIPOLYGON},ai.prototype.interfaces_=function(){return[K,ne,ue]},ai.prototype.getClass=function(){return ai},ai.hasNonEmptyElements=function(c){for(var f=0;f<c.length;f++)if(!c[f].isEmpty())return!0;return!1},ai.hasNullElements=function(c){for(var f=0;f<c.length;f++)if(null===c[f])return!0;return!1},Ti.serialVersionUID.get=function(){return 0x799ea46522854c00},Ti.SORTINDEX_POINT.get=function(){return 0},Ti.SORTINDEX_MULTIPOINT.get=function(){return 1},Ti.SORTINDEX_LINESTRING.get=function(){return 2},Ti.SORTINDEX_LINEARRING.get=function(){return 3},Ti.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ti.SORTINDEX_POLYGON.get=function(){return 5},Ti.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ti.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ti.geometryChangedFilter.get=function(){return wr},Object.defineProperties(ai,Ti);var wr=function(){};wr.interfaces_=function(){return[or]},wr.filter=function(c){c.geometryChangedAction()};var Gi=function(){};Gi.prototype.filter=function(c){},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi};var gr=function(){},Fr={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};gr.prototype.isInBoundary=function(c){},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},Fr.Mod2BoundaryNodeRule.get=function(){return zr},Fr.EndPointBoundaryNodeRule.get=function(){return bo},Fr.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},Fr.MonoValentEndPointBoundaryNodeRule.get=function(){return Ie},Fr.MOD2_BOUNDARY_RULE.get=function(){return new zr},Fr.ENDPOINT_BOUNDARY_RULE.get=function(){return new bo},Fr.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},Fr.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ie},Fr.OGC_SFS_BOUNDARY_RULE.get=function(){return gr.MOD2_BOUNDARY_RULE},Object.defineProperties(gr,Fr);var zr=function(){};zr.prototype.isInBoundary=function(c){return c%2==1},zr.prototype.interfaces_=function(){return[gr]},zr.prototype.getClass=function(){return zr};var bo=function(){};bo.prototype.isInBoundary=function(c){return c>0},bo.prototype.interfaces_=function(){return[gr]},bo.prototype.getClass=function(){return bo};var mt=function(){};mt.prototype.isInBoundary=function(c){return c>1},mt.prototype.interfaces_=function(){return[gr]},mt.prototype.getClass=function(){return mt};var Ie=function(){};Ie.prototype.isInBoundary=function(c){return 1===c},Ie.prototype.interfaces_=function(){return[gr]},Ie.prototype.getClass=function(){return Ie};var Me=function(){};Me.prototype.add=function(){},Me.prototype.addAll=function(){},Me.prototype.isEmpty=function(){},Me.prototype.iterator=function(){},Me.prototype.size=function(){},Me.prototype.toArray=function(){},Me.prototype.remove=function(){},(Le.prototype=new Error).name="IndexOutOfBoundsException";var pt=function(){};pt.prototype.hasNext=function(){},pt.prototype.next=function(){},pt.prototype.remove=function(){};var Ct=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.get=function(){},f.prototype.set=function(){},f.prototype.isEmpty=function(){},f}(Me);(Je.prototype=new Error).name="NoSuchElementException";var at=function(c){function f(){c.call(this),this.array_=[],arguments[0]instanceof Me&&this.addAll(arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.ensureCapacity=function(){},f.prototype.interfaces_=function(){return[c,Me]},f.prototype.add=function(b){return 1===arguments.length?this.array_.push(b):this.array_.splice(arguments[0],arguments[1]),!0},f.prototype.clear=function(){this.array_=[]},f.prototype.addAll=function(b){for(var w=b.iterator();w.hasNext();)this.add(w.next());return!0},f.prototype.set=function(b,w){var A=this.array_[b];return this.array_[b]=w,A},f.prototype.iterator=function(){return new en(this)},f.prototype.get=function(b){if(b<0||b>=this.size())throw new Le;return this.array_[b]},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.size=function(){return this.array_.length},f.prototype.toArray=function(){for(var b=[],w=0,A=this.array_.length;w<A;w++)b.push(this.array_[w]);return b},f.prototype.remove=function(b){for(var w=!1,A=0,B=this.array_.length;A<B;A++)if(this.array_[A]===b){this.array_.splice(A,1),w=!0;break}return w},f}(Ct),en=function(c){function f(b){c.call(this),this.arrayList_=b,this.position_=0}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Je;return this.arrayList_.get(this.position_++)},f.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},f.prototype.set=function(b){return this.arrayList_.set(this.position_-1,b)},f.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},f}(pt),Zt=function(c){function f(){if(c.call(this),0!==arguments.length)if(1===arguments.length){var w=arguments[0];this.ensureCapacity(w.length),this.add(w,!0)}else if(2===arguments.length){var A=arguments[0],B=arguments[1];this.ensureCapacity(A.length),this.add(A,B)}}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={coordArrayType:{configurable:!0}};return b.coordArrayType.get=function(){return new Array(0).fill(null)},f.prototype.getCoordinate=function(w){return this.get(w)},f.prototype.addAll=function(){if(2===arguments.length){for(var A=arguments[1],B=!1,U=arguments[0].iterator();U.hasNext();)this.add(U.next(),A),B=!0;return B}return c.prototype.addAll.apply(this,arguments)},f.prototype.clone=function(){for(var w=c.prototype.clone.call(this),A=0;A<this.size();A++)w.add(A,this.get(A).copy());return w},f.prototype.toCoordinateArray=function(){return this.toArray(f.coordArrayType)},f.prototype.add=function(){if(1===arguments.length)c.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof Q&&"boolean"==typeof arguments[1]){var U=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(U))return null;c.prototype.add.call(this,U)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var $t=arguments[0],gn=arguments[1];if(arguments[2])for(var Rn=0;Rn<$t.length;Rn++)this.add($t[Rn],gn);else for(var Ai=$t.length-1;Ai>=0;Ai--)this.add($t[Ai],gn);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Q){var Si=arguments[0],Vi=arguments[1];if(!arguments[2]){var fr=this.size();if(fr>0&&(Si>0&&this.get(Si-1).equals2D(Vi)||Si<fr&&this.get(Si).equals2D(Vi)))return null}c.prototype.add.call(this,Si,Vi)}}else if(4===arguments.length){var Co=arguments[0],wi=arguments[1],El=arguments[2],_u=arguments[3],Wc=1;El>_u&&(Wc=-1);for(var jd=El;jd!==_u;jd+=Wc)this.add(Co[jd],wi);return!0}},f.prototype.closeRing=function(){this.size()>0&&this.add(new Q(this.get(0)),!1)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},Object.defineProperties(f,b),f}(at),It=function(){},un={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};un.ForwardComparator.get=function(){return Xn},un.BidirectionalComparator.get=function(){return ri},un.coordArrayType.get=function(){return new Array(0).fill(null)},It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.isRing=function(c){return!(c.length<4||!c[0].equals2D(c[c.length-1]))},It.ptNotInList=function(c,f){for(var b=0;b<c.length;b++){var w=c[b];if(It.indexOf(w,f)<0)return w}return null},It.scroll=function(c,f){var b=It.indexOf(f,c);if(b<0)return null;var w=new Array(c.length).fill(null);Vt.arraycopy(c,b,w,0,c.length-b),Vt.arraycopy(c,0,w,c.length-b,b),Vt.arraycopy(w,0,c,0,c.length)},It.equals=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1];if(c===f)return!0;if(null===c||null===f||c.length!==f.length)return!1;for(var b=0;b<c.length;b++)if(!c[b].equals(f[b]))return!1;return!0}if(3===arguments.length){var w=arguments[0],A=arguments[1],B=arguments[2];if(w===A)return!0;if(null===w||null===A||w.length!==A.length)return!1;for(var U=0;U<w.length;U++)if(0!==B.compare(w[U],A[U]))return!1;return!0}},It.intersection=function(c,f){for(var b=new Zt,w=0;w<c.length;w++)f.intersects(c[w])&&b.add(c[w],!0);return b.toCoordinateArray()},It.hasRepeatedPoints=function(c){for(var f=1;f<c.length;f++)if(c[f-1].equals(c[f]))return!0;return!1},It.removeRepeatedPoints=function(c){return It.hasRepeatedPoints(c)?new Zt(c,!1).toCoordinateArray():c},It.reverse=function(c){for(var f=c.length-1,b=Math.trunc(f/2),w=0;w<=b;w++){var A=c[w];c[w]=c[f-w],c[f-w]=A}},It.removeNull=function(c){for(var f=0,b=0;b<c.length;b++)null!==c[b]&&f++;var w=new Array(f).fill(null);if(0===f)return w;for(var A=0,B=0;B<c.length;B++)null!==c[B]&&(w[A++]=c[B]);return w},It.copyDeep=function(){if(1===arguments.length){for(var c=arguments[0],f=new Array(c.length).fill(null),b=0;b<c.length;b++)f[b]=new Q(c[b]);return f}if(5===arguments.length)for(var w=arguments[0],A=arguments[1],B=arguments[2],U=arguments[3],xe=arguments[4],st=0;st<xe;st++)B[U+st]=new Q(w[A+st])},It.isEqualReversed=function(c,f){for(var b=0;b<c.length;b++)if(0!==c[b].compareTo(f[c.length-b-1]))return!1;return!0},It.envelope=function(c){for(var f=new Tn,b=0;b<c.length;b++)f.expandToInclude(c[b]);return f},It.toCoordinateArray=function(c){return c.toArray(It.coordArrayType)},It.atLeastNCoordinatesOrNothing=function(c,f){return f.length>=c?f:[]},It.indexOf=function(c,f){for(var b=0;b<f.length;b++)if(c.equals(f[b]))return b;return-1},It.increasingDirection=function(c){for(var f=0;f<Math.trunc(c.length/2);f++){var w=c[f].compareTo(c[c.length-1-f]);if(0!==w)return w}return 1},It.compare=function(c,f){for(var b=0;b<c.length&&b<f.length;){var w=c[b].compareTo(f[b]);if(0!==w)return w;b++}return b<f.length?-1:b<c.length?1:0},It.minCoordinate=function(c){for(var f=null,b=0;b<c.length;b++)(null===f||f.compareTo(c[b])>0)&&(f=c[b]);return f},It.extract=function(c,f,b){f=Y.clamp(f,0,c.length);var w=(b=Y.clamp(b,-1,c.length))-f+1;b<0&&(w=0),f>=c.length&&(w=0),b<f&&(w=0);var A=new Array(w).fill(null);if(0===w)return A;for(var B=0,U=f;U<=b;U++)A[B++]=c[U];return A},Object.defineProperties(It,un);var Xn=function(){};Xn.prototype.compare=function(c,f){return It.compare(c,f)},Xn.prototype.interfaces_=function(){return[ye]},Xn.prototype.getClass=function(){return Xn};var ri=function(){};ri.prototype.compare=function(c,f){var b=c,w=f;if(b.length<w.length)return-1;if(b.length>w.length)return 1;if(0===b.length)return 0;var A=It.compare(b,w);return It.isEqualReversed(b,w)?0:A},ri.prototype.OLDcompare=function(c,f){var b=c,w=f;if(b.length<w.length)return-1;if(b.length>w.length)return 1;if(0===b.length)return 0;for(var A=It.increasingDirection(b),B=It.increasingDirection(w),U=A>0?0:b.length-1,xe=B>0?0:b.length-1,st=0;st<b.length;st++){var $t=b[U].compareTo(w[xe]);if(0!==$t)return $t;U+=A,xe+=B}return 0},ri.prototype.interfaces_=function(){return[ye]},ri.prototype.getClass=function(){return ri};var Zn=function(){};Zn.prototype.get=function(){},Zn.prototype.put=function(){},Zn.prototype.size=function(){},Zn.prototype.values=function(){},Zn.prototype.entrySet=function(){};var yr=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f}(Zn);(g.prototype=new Error).name="OperationNotSupported",(fe.prototype=new Me).contains=function(){};var Cr=function(c){function f(){c.call(this),this.array_=[],arguments[0]instanceof Me&&this.addAll(arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.contains=function(b){for(var w=0,A=this.array_.length;w<A;w++)if(this.array_[w]===b)return!0;return!1},f.prototype.add=function(b){return!this.contains(b)&&(this.array_.push(b),!0)},f.prototype.addAll=function(b){for(var w=b.iterator();w.hasNext();)this.add(w.next());return!0},f.prototype.remove=function(b){throw new Error},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var b=[],w=0,A=this.array_.length;w<A;w++)b.push(this.array_[w]);return b},f.prototype.iterator=function(){return new sr(this)},f}(fe),sr=function(c){function f(b){c.call(this),this.hashSet_=b,this.position_=0}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Je;return this.hashSet_.array_[this.position_++]},f.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},f.prototype.remove=function(){throw new g},f}(pt),Zi=0;(qe.prototype=new yr).get=function(c){for(var f=this.root_;null!==f;){var b=c.compareTo(f.key);if(b<0)f=f.left;else{if(!(b>0))return f.value;f=f.right}}return null},qe.prototype.put=function(c,f){if(null===this.root_)return this.root_={key:c,value:f,left:null,right:null,parent:null,color:Zi,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var b,w,A=this.root_;do{if(b=A,(w=c.compareTo(A.key))<0)A=A.left;else{if(!(w>0)){var B=A.value;return A.value=f,B}A=A.right}}while(null!==A);var U={key:c,left:null,right:null,value:f,parent:b,color:Zi,getValue:function(){return this.value},getKey:function(){return this.key}};return w<0?b.left=U:b.right=U,this.fixAfterInsertion(U),this.size_++,null},qe.prototype.fixAfterInsertion=function(c){for(c.color=1;null!=c&&c!==this.root_&&1===c.parent.color;)if(Oe(c)===ct(Oe(Oe(c)))){var f=Ht(Oe(Oe(c)));1===Ne(f)?(He(Oe(c),Zi),He(f,Zi),He(Oe(Oe(c)),1),c=Oe(Oe(c))):(c===Ht(Oe(c))&&(c=Oe(c),this.rotateLeft(c)),He(Oe(c),Zi),He(Oe(Oe(c)),1),this.rotateRight(Oe(Oe(c))))}else{var b=ct(Oe(Oe(c)));1===Ne(b)?(He(Oe(c),Zi),He(b,Zi),He(Oe(Oe(c)),1),c=Oe(Oe(c))):(c===ct(Oe(c))&&(c=Oe(c),this.rotateRight(c)),He(Oe(c),Zi),He(Oe(Oe(c)),1),this.rotateLeft(Oe(Oe(c))))}this.root_.color=Zi},qe.prototype.values=function(){var c=new at,f=this.getFirstEntry();if(null!==f)for(c.add(f.value);null!==(f=qe.successor(f));)c.add(f.value);return c},qe.prototype.entrySet=function(){var c=new Cr,f=this.getFirstEntry();if(null!==f)for(c.add(f);null!==(f=qe.successor(f));)c.add(f);return c},qe.prototype.rotateLeft=function(c){if(null!=c){var f=c.right;c.right=f.left,null!=f.left&&(f.left.parent=c),f.parent=c.parent,null===c.parent?this.root_=f:c.parent.left===c?c.parent.left=f:c.parent.right=f,f.left=c,c.parent=f}},qe.prototype.rotateRight=function(c){if(null!=c){var f=c.left;c.left=f.right,null!=f.right&&(f.right.parent=c),f.parent=c.parent,null===c.parent?this.root_=f:c.parent.right===c?c.parent.right=f:c.parent.left=f,f.right=c,c.parent=f}},qe.prototype.getFirstEntry=function(){var c=this.root_;if(null!=c)for(;null!=c.left;)c=c.left;return c},qe.successor=function(c){if(null===c)return null;if(null!==c.right){for(var f=c.right;null!==f.left;)f=f.left;return f}for(var b=c.parent,w=c;null!==b&&w===b.right;)w=b,b=b.parent;return b},qe.prototype.size=function(){return this.size_};var Sr=function(){};Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Qe.prototype=new fe,(je.prototype=new Qe).contains=function(c){for(var f=0,b=this.array_.length;f<b;f++)if(0===this.array_[f].compareTo(c))return!0;return!1},je.prototype.add=function(c){if(this.contains(c))return!1;for(var f=0,b=this.array_.length;f<b;f++)if(1===this.array_[f].compareTo(c))return this.array_.splice(f,0,c),!0;return this.array_.push(c),!0},je.prototype.addAll=function(c){for(var f=c.iterator();f.hasNext();)this.add(f.next());return!0},je.prototype.remove=function(c){throw new g},je.prototype.size=function(){return this.array_.length},je.prototype.isEmpty=function(){return 0===this.array_.length},je.prototype.toArray=function(){for(var c=[],f=0,b=this.array_.length;f<b;f++)c.push(this.array_[f]);return c},je.prototype.iterator=function(){return new Br(this)};var Br=function(c){this.treeSet_=c,this.position_=0};Br.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Je;return this.treeSet_.array_[this.position_++]},Br.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Br.prototype.remove=function(){throw new g};var vt=function(){};vt.sort=function(){var c,f,b,A=arguments[0];if(1===arguments.length)A.sort(function(U,xe){return U.compareTo(xe)});else if(2===arguments.length)b=arguments[1],A.sort(function(U,xe){return b.compare(U,xe)});else if(3===arguments.length){(f=A.slice(arguments[1],arguments[2])).sort();var B=A.slice(0,arguments[1]).concat(f,A.slice(arguments[2],A.length));for(A.splice(0,A.length),c=0;c<B.length;c++)A.push(B[c])}else if(4===arguments.length)for(f=A.slice(arguments[1],arguments[2]),b=arguments[3],f.sort(function(U,xe){return b.compare(U,xe)}),B=A.slice(0,arguments[1]).concat(f,A.slice(arguments[2],A.length)),A.splice(0,A.length),c=0;c<B.length;c++)A.push(B[c])},vt.asList=function(c){for(var f=new at,b=0,w=c.length;b<w;b++)f.add(c[b]);return f};var wt=function(){},nn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};nn.P.get=function(){return 0},nn.L.get=function(){return 1},nn.A.get=function(){return 2},nn.FALSE.get=function(){return-1},nn.TRUE.get=function(){return-2},nn.DONTCARE.get=function(){return-3},nn.SYM_FALSE.get=function(){return"F"},nn.SYM_TRUE.get=function(){return"T"},nn.SYM_DONTCARE.get=function(){return"*"},nn.SYM_P.get=function(){return"0"},nn.SYM_L.get=function(){return"1"},nn.SYM_A.get=function(){return"2"},wt.prototype.interfaces_=function(){return[]},wt.prototype.getClass=function(){return wt},wt.toDimensionSymbol=function(c){switch(c){case wt.FALSE:return wt.SYM_FALSE;case wt.TRUE:return wt.SYM_TRUE;case wt.DONTCARE:return wt.SYM_DONTCARE;case wt.P:return wt.SYM_P;case wt.L:return wt.SYM_L;case wt.A:return wt.SYM_A}throw new Z("Unknown dimension value: "+c)},wt.toDimensionValue=function(c){switch($e.toUpperCase(c)){case wt.SYM_FALSE:return wt.FALSE;case wt.SYM_TRUE:return wt.TRUE;case wt.SYM_DONTCARE:return wt.DONTCARE;case wt.SYM_P:return wt.P;case wt.SYM_L:return wt.L;case wt.SYM_A:return wt.A}throw new Z("Unknown dimension symbol: "+c)},Object.defineProperties(wt,nn);var an=function(){};an.prototype.filter=function(c){},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an};var Sn=function(){};Sn.prototype.filter=function(c,f){},Sn.prototype.isDone=function(){},Sn.prototype.isGeometryChanged=function(){},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn};var Vn=function(c){function f(w,A){if(c.call(this,A),this._geometries=w||[],c.hasNullElements(this._geometries))throw new Z("geometries must not contain null elements")}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){for(var w=new Tn,A=0;A<this._geometries.length;A++)w.expandToInclude(this._geometries[A].getEnvelopeInternal());return w},f.prototype.getGeometryN=function(w){return this._geometries[w]},f.prototype.getSortIndex=function(){return c.SORTINDEX_GEOMETRYCOLLECTION},f.prototype.getCoordinates=function(){for(var w=new Array(this.getNumPoints()).fill(null),A=-1,B=0;B<this._geometries.length;B++)for(var U=this._geometries[B].getCoordinates(),xe=0;xe<U.length;xe++)w[++A]=U[xe];return w},f.prototype.getArea=function(){for(var w=0,A=0;A<this._geometries.length;A++)w+=this._geometries[A].getArea();return w},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];if(!this.isEquivalentClass(w))return!1;var B=w;if(this._geometries.length!==B._geometries.length)return!1;for(var U=0;U<this._geometries.length;U++)if(!this._geometries[U].equalsExact(B._geometries[U],A))return!1;return!0}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var w=0;w<this._geometries.length;w++)this._geometries[w].normalize();vt.sort(this._geometries)},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},f.prototype.getBoundaryDimension=function(){for(var w=wt.FALSE,A=0;A<this._geometries.length;A++)w=Math.max(w,this._geometries[A].getBoundaryDimension());return w},f.prototype.getDimension=function(){for(var w=wt.FALSE,A=0;A<this._geometries.length;A++)w=Math.max(w,this._geometries[A].getDimension());return w},f.prototype.getLength=function(){for(var w=0,A=0;A<this._geometries.length;A++)w+=this._geometries[A].getLength();return w},f.prototype.getNumPoints=function(){for(var w=0,A=0;A<this._geometries.length;A++)w+=this._geometries[A].getNumPoints();return w},f.prototype.getNumGeometries=function(){return this._geometries.length},f.prototype.reverse=function(){for(var A=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)A[B]=this._geometries[B].reverse();return this.getFactory().createGeometryCollection(A)},f.prototype.compareToSameClass=function(){if(1===arguments.length){var w=arguments[0],A=new je(vt.asList(this._geometries)),B=new je(vt.asList(w._geometries));return this.compare(A,B)}if(2===arguments.length){for(var xe=arguments[1],st=arguments[0],$t=this.getNumGeometries(),gn=st.getNumGeometries(),Rn=0;Rn<$t&&Rn<gn;){var Ai=this.getGeometryN(Rn),Si=st.getGeometryN(Rn),Vi=Ai.compareToSameClass(Si,xe);if(0!==Vi)return Vi;Rn++}return Rn<$t?1:Rn<gn?-1:0}},f.prototype.apply=function(){if(Se(arguments[0],Gi))for(var w=arguments[0],A=0;A<this._geometries.length;A++)this._geometries[A].apply(w);else if(Se(arguments[0],Sn)){var B=arguments[0];if(0===this._geometries.length)return null;for(var U=0;U<this._geometries.length&&(this._geometries[U].apply(B),!B.isDone());U++);B.isGeometryChanged()&&this.geometryChanged()}else if(Se(arguments[0],an)){var xe=arguments[0];xe.filter(this);for(var st=0;st<this._geometries.length;st++)this._geometries[st].apply(xe)}else if(Se(arguments[0],or)){var $t=arguments[0];$t.filter(this);for(var gn=0;gn<this._geometries.length;gn++)this._geometries[gn].apply($t)}},f.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Ee.shouldNeverReachHere(),null},f.prototype.clone=function(){var w=c.prototype.clone.call(this);w._geometries=new Array(this._geometries.length).fill(null);for(var A=0;A<this._geometries.length;A++)w._geometries[A]=this._geometries[A].clone();return w},f.prototype.getGeometryType=function(){return"GeometryCollection"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),A=0;A<w.length;A++)w[A]=this._geometries[A].copy();return new f(w,this._factory)},f.prototype.isEmpty=function(){for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isEmpty())return!1;return!0},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(f,b),f}(ai),Qn=function(c){function f(){c.apply(this,arguments)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return ai.SORTINDEX_MULTILINESTRING},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];return!!this.isEquivalentClass(w)&&c.prototype.equalsExact.call(this,w,A)}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?wt.FALSE:0},f.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isClosed())return!1;return!0},f.prototype.getDimension=function(){return 1},f.prototype.reverse=function(){for(var w=this._geometries.length,A=new Array(w).fill(null),B=0;B<this._geometries.length;B++)A[w-1-B]=this._geometries[B].reverse();return this.getFactory().createMultiLineString(A)},f.prototype.getBoundary=function(){return new oi(this).getBoundary()},f.prototype.getGeometryType=function(){return"MultiLineString"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),A=0;A<w.length;A++)w[A]=this._geometries[A].copy();return new f(w,this._factory)},f.prototype.interfaces_=function(){return[Sr]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(f,b),f}(Vn),oi=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var c=arguments[0],f=gr.MOD2_BOUNDARY_RULE;this._geom=c,this._geomFact=c.getFactory(),this._bnRule=f}else if(2===arguments.length){var b=arguments[0],w=arguments[1];this._geom=b,this._geomFact=b.getFactory(),this._bnRule=w}};oi.prototype.boundaryMultiLineString=function(c){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var f=this.computeBoundaryCoordinates(c);return 1===f.length?this._geomFact.createPoint(f[0]):this._geomFact.createMultiPointFromCoords(f)},oi.prototype.getBoundary=function(){return this._geom instanceof rr?this.boundaryLineString(this._geom):this._geom instanceof Qn?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},oi.prototype.boundaryLineString=function(c){return this._geom.isEmpty()?this.getEmptyMultiPoint():c.isClosed()?this._bnRule.isInBoundary(2)?c.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([c.getStartPoint(),c.getEndPoint()])},oi.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},oi.prototype.computeBoundaryCoordinates=function(c){var f=new at;this._endpointMap=new qe;for(var b=0;b<c.getNumGeometries();b++){var w=c.getGeometryN(b);0!==w.getNumPoints()&&(this.addEndpoint(w.getCoordinateN(0)),this.addEndpoint(w.getCoordinateN(w.getNumPoints()-1)))}for(var A=this._endpointMap.entrySet().iterator();A.hasNext();){var B=A.next(),U=B.getValue().count;this._bnRule.isInBoundary(U)&&f.add(B.getKey())}return It.toCoordinateArray(f)},oi.prototype.addEndpoint=function(c){var f=this._endpointMap.get(c);null===f&&(f=new ki,this._endpointMap.put(c,f)),f.count++},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.getBoundary=function(){return 1===arguments.length?new oi(arguments[0]).getBoundary():2===arguments.length?new oi(arguments[0],arguments[1]).getBoundary():void 0};var ki=function(){this.count=null};ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki};var zn=function(){},_r={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.chars=function(c,f){for(var b=new Array(f).fill(null),w=0;w<f;w++)b[w]=c;return String(b)},zn.getStackTrace=function(){if(1===arguments.length){var c=arguments[0],f=new function(){},b=new function(){}(f);return c.printStackTrace(b),f.toString()}if(2===arguments.length){for(var A=arguments[1],B="",U=new function(){}(new function(){}(zn.getStackTrace(arguments[0]))),xe=0;xe<A;xe++)try{B+=U.readLine()+zn.NEWLINE}catch(st){if(!(st instanceof Nt))throw st;Ee.shouldNeverReachHere()}return B}},zn.split=function(c,f){for(var b=f.length,w=new at,A=""+c,B=A.indexOf(f);B>=0;){var U=A.substring(0,B);w.add(U),B=(A=A.substring(B+b)).indexOf(f)}A.length>0&&w.add(A);for(var xe=new Array(w.size()).fill(null),st=0;st<xe.length;st++)xe[st]=w.get(st);return xe},zn.toString=function(){if(1===arguments.length)return zn.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},zn.spaces=function(c){return zn.chars(" ",c)},_r.NEWLINE.get=function(){return Vt.getProperty("line.separator")},_r.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(zn,_r);var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.copyCoord=function(c,f,b,w){for(var A=Math.min(c.getDimension(),b.getDimension()),B=0;B<A;B++)b.setOrdinate(w,B,c.getOrdinate(f,B))},Ri.isRing=function(c){var f=c.size();return 0===f||!(f<=3)&&c.getOrdinate(0,qt.X)===c.getOrdinate(f-1,qt.X)&&c.getOrdinate(0,qt.Y)===c.getOrdinate(f-1,qt.Y)},Ri.isEqual=function(c,f){var b=c.size();if(b!==f.size())return!1;for(var w=Math.min(c.getDimension(),f.getDimension()),A=0;A<b;A++)for(var B=0;B<w;B++){var U=c.getOrdinate(A,B),xe=f.getOrdinate(A,B);if(!(c.getOrdinate(A,B)===f.getOrdinate(A,B)||ee.isNaN(U)&&ee.isNaN(xe)))return!1}return!0},Ri.extend=function(c,f,b){var w=c.create(b,f.getDimension()),A=f.size();if(Ri.copy(f,0,w,0,A),A>0)for(var B=A;B<b;B++)Ri.copy(f,A-1,w,B,1);return w},Ri.reverse=function(c){for(var f=c.size()-1,b=Math.trunc(f/2),w=0;w<=b;w++)Ri.swap(c,w,f-w)},Ri.swap=function(c,f,b){if(f===b)return null;for(var w=0;w<c.getDimension();w++){var A=c.getOrdinate(f,w);c.setOrdinate(f,w,c.getOrdinate(b,w)),c.setOrdinate(b,w,A)}},Ri.copy=function(c,f,b,w,A){for(var B=0;B<A;B++)Ri.copyCoord(c,f+B,b,w+B)},Ri.toString=function(){if(1===arguments.length){var c=arguments[0],f=c.size();if(0===f)return"()";var b=c.getDimension(),w=new De;w.append("(");for(var A=0;A<f;A++){A>0&&w.append(" ");for(var B=0;B<b;B++)B>0&&w.append(","),w.append(zn.toString(c.getOrdinate(A,B)))}return w.append(")"),w.toString()}},Ri.ensureValidRing=function(c,f){var b=f.size();return 0===b?f:b<=3?Ri.createClosedRing(c,f,4):f.getOrdinate(0,qt.X)===f.getOrdinate(b-1,qt.X)&&f.getOrdinate(0,qt.Y)===f.getOrdinate(b-1,qt.Y)?f:Ri.createClosedRing(c,f,b+1)},Ri.createClosedRing=function(c,f,b){var w=c.create(b,f.getDimension()),A=f.size();Ri.copy(f,0,w,0,A);for(var B=A;B<b;B++)Ri.copy(f,0,w,B,1);return w};var rr=function(c){function f(w,A){c.call(this,A),this._points=null,this.init(w)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Tn:this._points.expandEnvelope(new Tn)},f.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},f.prototype.getSortIndex=function(){return c.SORTINDEX_LINESTRING},f.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];if(!this.isEquivalentClass(w))return!1;var B=w;if(this._points.size()!==B._points.size())return!1;for(var U=0;U<this._points.size();U++)if(!this.equal(this._points.getCoordinate(U),B._points.getCoordinate(U),A))return!1;return!0}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){for(var w=0;w<Math.trunc(this._points.size()/2);w++){var A=this._points.size()-1-w;if(!this._points.getCoordinate(w).equals(this._points.getCoordinate(A)))return this._points.getCoordinate(w).compareTo(this._points.getCoordinate(A))>0&&Ri.reverse(this._points),null}},f.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},f.prototype.getBoundaryDimension=function(){return this.isClosed()?wt.FALSE:0},f.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},f.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},f.prototype.getDimension=function(){return 1},f.prototype.getLength=function(){return yn.computeLength(this._points)},f.prototype.getNumPoints=function(){return this._points.size()},f.prototype.reverse=function(){var w=this._points.copy();return Ri.reverse(w),this.getFactory().createLineString(w)},f.prototype.compareToSameClass=function(){if(1===arguments.length){for(var w=arguments[0],A=0,B=0;A<this._points.size()&&B<w._points.size();){var U=this._points.getCoordinate(A).compareTo(w._points.getCoordinate(B));if(0!==U)return U;A++,B++}return A<this._points.size()?1:B<w._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},f.prototype.apply=function(){if(Se(arguments[0],Gi))for(var w=arguments[0],A=0;A<this._points.size();A++)w.filter(this._points.getCoordinate(A));else if(Se(arguments[0],Sn)){var B=arguments[0];if(0===this._points.size())return null;for(var U=0;U<this._points.size()&&(B.filter(this._points,U),!B.isDone());U++);B.isGeometryChanged()&&this.geometryChanged()}else(Se(arguments[0],an)||Se(arguments[0],or))&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return new oi(this).getBoundary()},f.prototype.isEquivalentClass=function(w){return w instanceof f},f.prototype.clone=function(){var w=c.prototype.clone.call(this);return w._points=this._points.clone(),w},f.prototype.getCoordinateN=function(w){return this._points.getCoordinate(w)},f.prototype.getGeometryType=function(){return"LineString"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._points},f.prototype.isEmpty=function(){return 0===this._points.size()},f.prototype.init=function(w){if(null===w&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),1===w.size())throw new Z("Invalid number of points in LineString (found "+w.size()+" - must be 0 or >= 2)");this._points=w},f.prototype.isCoordinate=function(w){for(var A=0;A<this._points.size();A++)if(this._points.getCoordinate(A).equals(w))return!0;return!1},f.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},f.prototype.getPointN=function(w){return this.getFactory().createPoint(this._points.getCoordinate(w))},f.prototype.interfaces_=function(){return[Sr]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(f,b),f}(ai),to=function(){};to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to};var Vr=function(c){function f(w,A){c.call(this,A),this._coordinates=w||null,this.init(this._coordinates)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Tn;var w=new Tn;return w.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),w},f.prototype.getSortIndex=function(){return c.SORTINDEX_POINT},f.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];return!!this.isEquivalentClass(w)&&(!(!this.isEmpty()||!w.isEmpty())||this.isEmpty()===w.isEmpty()&&this.equal(w.getCoordinate(),this.getCoordinate(),A))}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){},f.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},f.prototype.getBoundaryDimension=function(){return wt.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getNumPoints=function(){return this.isEmpty()?0:1},f.prototype.reverse=function(){return this.copy()},f.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},f.prototype.compareToSameClass=function(){if(1===arguments.length){var w=arguments[0];return this.getCoordinate().compareTo(w.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},f.prototype.apply=function(){if(Se(arguments[0],Gi)){var w=arguments[0];if(this.isEmpty())return null;w.filter(this.getCoordinate())}else if(Se(arguments[0],Sn)){var A=arguments[0];if(this.isEmpty())return null;A.filter(this._coordinates,0),A.isGeometryChanged()&&this.geometryChanged()}else(Se(arguments[0],an)||Se(arguments[0],or))&&arguments[0].filter(this)},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.clone=function(){var w=c.prototype.clone.call(this);return w._coordinates=this._coordinates.clone(),w},f.prototype.getGeometryType=function(){return"Point"},f.prototype.copy=function(){return new f(this._coordinates.copy(),this._factory)},f.prototype.getCoordinateSequence=function(){return this._coordinates},f.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},f.prototype.isEmpty=function(){return 0===this._coordinates.size()},f.prototype.init=function(w){null===w&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),Ee.isTrue(w.size()<=1),this._coordinates=w},f.prototype.isSimple=function(){return!0},f.prototype.interfaces_=function(){return[to]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(f,b),f}(ai),To=function(){};To.prototype.interfaces_=function(){return[]},To.prototype.getClass=function(){return To};var so=function(c){function f(w,A,B){if(c.call(this,B),this._shell=null,this._holes=null,null===w&&(w=this.getFactory().createLinearRing()),null===A&&(A=[]),c.hasNullElements(A))throw new Z("holes must not contain null elements");if(w.isEmpty()&&c.hasNonEmptyElements(A))throw new Z("shell is empty but holes are not");this._shell=w,this._holes=A}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},f.prototype.getSortIndex=function(){return c.SORTINDEX_POLYGON},f.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var w=new Array(this.getNumPoints()).fill(null),A=-1,B=this._shell.getCoordinates(),U=0;U<B.length;U++)w[++A]=B[U];for(var xe=0;xe<this._holes.length;xe++)for(var st=this._holes[xe].getCoordinates(),$t=0;$t<st.length;$t++)w[++A]=st[$t];return w},f.prototype.getArea=function(){var w=0;w+=Math.abs(yn.signedArea(this._shell.getCoordinateSequence()));for(var A=0;A<this._holes.length;A++)w-=Math.abs(yn.signedArea(this._holes[A].getCoordinateSequence()));return w},f.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var w=this._shell.getCoordinateSequence(),A=this.getEnvelopeInternal(),B=0;B<5;B++){var U=w.getX(B);if(U!==A.getMinX()&&U!==A.getMaxX())return!1;var xe=w.getY(B);if(xe!==A.getMinY()&&xe!==A.getMaxY())return!1}for(var st=w.getX(0),$t=w.getY(0),gn=1;gn<=4;gn++){var Rn=w.getX(gn),Ai=w.getY(gn);if(Rn!==st==(Ai!==$t))return!1;st=Rn,$t=Ai}return!0},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];if(!this.isEquivalentClass(w))return!1;var B=w;if(!this._shell.equalsExact(B._shell,A)||this._holes.length!==B._holes.length)return!1;for(var st=0;st<this._holes.length;st++)if(!this._holes[st].equalsExact(B._holes[st],A))return!1;return!0}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var w=0;w<this._holes.length;w++)this.normalize(this._holes[w],!1);vt.sort(this._holes)}else if(2===arguments.length){var A=arguments[0],B=arguments[1];if(A.isEmpty())return null;var U=new Array(A.getCoordinates().length-1).fill(null);Vt.arraycopy(A.getCoordinates(),0,U,0,U.length);var xe=It.minCoordinate(A.getCoordinates());It.scroll(U,xe),Vt.arraycopy(U,0,A.getCoordinates(),0,U.length),A.getCoordinates()[U.length]=U[0],yn.isCCW(A.getCoordinates())===B&&It.reverse(A.getCoordinates())}},f.prototype.getCoordinate=function(){return this._shell.getCoordinate()},f.prototype.getNumInteriorRing=function(){return this._holes.length},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.getLength=function(){var w=0;w+=this._shell.getLength();for(var A=0;A<this._holes.length;A++)w+=this._holes[A].getLength();return w},f.prototype.getNumPoints=function(){for(var w=this._shell.getNumPoints(),A=0;A<this._holes.length;A++)w+=this._holes[A].getNumPoints();return w},f.prototype.reverse=function(){var w=this.copy();w._shell=this._shell.copy().reverse(),w._holes=new Array(this._holes.length).fill(null);for(var A=0;A<this._holes.length;A++)w._holes[A]=this._holes[A].copy().reverse();return w},f.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},f.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var xe=arguments[1],st=arguments[0],Rn=this._shell.compareToSameClass(st._shell,xe);if(0!==Rn)return Rn;for(var Ai=this.getNumInteriorRing(),Si=st.getNumInteriorRing(),Vi=0;Vi<Ai&&Vi<Si;){var fr=this.getInteriorRingN(Vi),Co=st.getInteriorRingN(Vi),wi=fr.compareToSameClass(Co,xe);if(0!==wi)return wi;Vi++}return Vi<Ai?1:Vi<Si?-1:0}},f.prototype.apply=function(w){if(Se(w,Gi)){this._shell.apply(w);for(var A=0;A<this._holes.length;A++)this._holes[A].apply(w)}else if(Se(w,Sn)){if(this._shell.apply(w),!w.isDone())for(var B=0;B<this._holes.length&&(this._holes[B].apply(w),!w.isDone());B++);w.isGeometryChanged()&&this.geometryChanged()}else if(Se(w,an))w.filter(this);else if(Se(w,or)){w.filter(this),this._shell.apply(w);for(var U=0;U<this._holes.length;U++)this._holes[U].apply(w)}},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var w=new Array(this._holes.length+1).fill(null);w[0]=this._shell;for(var A=0;A<this._holes.length;A++)w[A+1]=this._holes[A];return w.length<=1?this.getFactory().createLinearRing(w[0].getCoordinateSequence()):this.getFactory().createMultiLineString(w)},f.prototype.clone=function(){var w=c.prototype.clone.call(this);w._shell=this._shell.clone(),w._holes=new Array(this._holes.length).fill(null);for(var A=0;A<this._holes.length;A++)w._holes[A]=this._holes[A].clone();return w},f.prototype.getGeometryType=function(){return"Polygon"},f.prototype.copy=function(){for(var w=this._shell.copy(),A=new Array(this._holes.length).fill(null),B=0;B<A.length;B++)A[B]=this._holes[B].copy();return new f(w,A,this._factory)},f.prototype.getExteriorRing=function(){return this._shell},f.prototype.isEmpty=function(){return this._shell.isEmpty()},f.prototype.getInteriorRingN=function(w){return this._holes[w]},f.prototype.interfaces_=function(){return[To]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(f,b),f}(ai),Ns=function(c){function f(){c.apply(this,arguments)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return ai.SORTINDEX_MULTIPOINT},f.prototype.isValid=function(){return!0},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];return!!this.isEquivalentClass(w)&&c.prototype.equalsExact.call(this,w,A)}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():c.prototype.getCoordinate.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return wt.FALSE},f.prototype.getDimension=function(){return 0},f.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},f.prototype.getGeometryType=function(){return"MultiPoint"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),A=0;A<w.length;A++)w[A]=this._geometries[A].copy();return new f(w,this._factory)},f.prototype.interfaces_=function(){return[to]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(f,b),f}(Vn),No=function(c){function f(w,A){w instanceof Q&&A instanceof ge&&(w=A.getCoordinateSequenceFactory().create(w)),c.call(this,w,A),this.validateConstruction()}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return ai.SORTINDEX_LINEARRING},f.prototype.getBoundaryDimension=function(){return wt.FALSE},f.prototype.isClosed=function(){return!!this.isEmpty()||c.prototype.isClosed.call(this)},f.prototype.reverse=function(){var w=this._points.copy();return Ri.reverse(w),this.getFactory().createLinearRing(w)},f.prototype.validateConstruction=function(){if(!this.isEmpty()&&!c.prototype.isClosed.call(this))throw new Z("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<f.MINIMUM_VALID_SIZE)throw new Z("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},f.prototype.getGeometryType=function(){return"LinearRing"},f.prototype.copy=function(){return new f(this._points.copy(),this._factory)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.MINIMUM_VALID_SIZE.get=function(){return 4},b.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(f,b),f}(rr),no=function(c){function f(){c.apply(this,arguments)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={serialVersionUID:{configurable:!0}};return f.prototype.getSortIndex=function(){return ai.SORTINDEX_MULTIPOLYGON},f.prototype.equalsExact=function(){if(2===arguments.length){var w=arguments[0],A=arguments[1];return!!this.isEquivalentClass(w)&&c.prototype.equalsExact.call(this,w,A)}return c.prototype.equalsExact.apply(this,arguments)},f.prototype.getBoundaryDimension=function(){return 1},f.prototype.getDimension=function(){return 2},f.prototype.reverse=function(){for(var A=new Array(this._geometries.length).fill(null),B=0;B<this._geometries.length;B++)A[B]=this._geometries[B].reverse();return this.getFactory().createMultiPolygon(A)},f.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var w=new at,A=0;A<this._geometries.length;A++)for(var B=this._geometries[A].getBoundary(),U=0;U<B.getNumGeometries();U++)w.add(B.getGeometryN(U));var xe=new Array(w.size()).fill(null);return this.getFactory().createMultiLineString(w.toArray(xe))},f.prototype.getGeometryType=function(){return"MultiPolygon"},f.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),A=0;A<w.length;A++)w[A]=this._geometries[A].copy();return new f(w,this._factory)},f.prototype.interfaces_=function(){return[To]},f.prototype.getClass=function(){return f},b.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(f,b),f}(Vn),ar=function(c){this._factory=c||null,this._isUserDataCopied=!1},Mn={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ar.prototype.setCopyUserData=function(c){this._isUserDataCopied=c},ar.prototype.edit=function(c,f){if(null===c)return null;var b=this.editInternal(c,f);return this._isUserDataCopied&&b.setUserData(c.getUserData()),b},ar.prototype.editInternal=function(c,f){return null===this._factory&&(this._factory=c.getFactory()),c instanceof Vn?this.editGeometryCollection(c,f):c instanceof so?this.editPolygon(c,f):c instanceof Vr||c instanceof rr?f.edit(c,this._factory):(Ee.shouldNeverReachHere("Unsupported Geometry class: "+c.getClass().getName()),null)},ar.prototype.editGeometryCollection=function(c,f){for(var b=f.edit(c,this._factory),w=new at,A=0;A<b.getNumGeometries();A++){var B=this.edit(b.getGeometryN(A),f);null===B||B.isEmpty()||w.add(B)}return b.getClass()===Ns?this._factory.createMultiPoint(w.toArray([])):b.getClass()===Qn?this._factory.createMultiLineString(w.toArray([])):b.getClass()===no?this._factory.createMultiPolygon(w.toArray([])):this._factory.createGeometryCollection(w.toArray([]))},ar.prototype.editPolygon=function(c,f){var b=f.edit(c,this._factory);if(null===b&&(b=this._factory.createPolygon(null)),b.isEmpty())return b;var w=this.edit(b.getExteriorRing(),f);if(null===w||w.isEmpty())return this._factory.createPolygon();for(var A=new at,B=0;B<b.getNumInteriorRing();B++){var U=this.edit(b.getInteriorRingN(B),f);null===U||U.isEmpty()||A.add(U)}return this._factory.createPolygon(w,A.toArray([]))},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ar.GeometryEditorOperation=function(){},Mn.NoOpGeometryOperation.get=function(){return yl},Mn.CoordinateOperation.get=function(){return xs},Mn.CoordinateSequenceOperation.get=function(){return ws},Object.defineProperties(ar,Mn);var yl=function(){};yl.prototype.edit=function(c,f){return c},yl.prototype.interfaces_=function(){return[ar.GeometryEditorOperation]},yl.prototype.getClass=function(){return yl};var xs=function(){};xs.prototype.edit=function(c,f){var b=this.editCoordinates(c.getCoordinates(),c);return null===b?c:c instanceof No?f.createLinearRing(b):c instanceof rr?f.createLineString(b):c instanceof Vr?b.length>0?f.createPoint(b[0]):f.createPoint():c},xs.prototype.interfaces_=function(){return[ar.GeometryEditorOperation]},xs.prototype.getClass=function(){return xs};var ws=function(){};ws.prototype.edit=function(c,f){return c instanceof No?f.createLinearRing(this.edit(c.getCoordinateSequence(),c)):c instanceof rr?f.createLineString(this.edit(c.getCoordinateSequence(),c)):c instanceof Vr?f.createPoint(this.edit(c.getCoordinateSequence(),c)):c},ws.prototype.interfaces_=function(){return[ar.GeometryEditorOperation]},ws.prototype.getClass=function(){return ws};var ko=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var c=arguments[0];this._coordinates=new Array(c).fill(null);for(var f=0;f<c;f++)this._coordinates[f]=new Q}else if(Se(arguments[0],qt)){var b=arguments[0];if(null===b)return this._coordinates=new Array(0).fill(null),null;this._dimension=b.getDimension(),this._coordinates=new Array(b.size()).fill(null);for(var w=0;w<this._coordinates.length;w++)this._coordinates[w]=b.getCoordinateCopy(w)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var A=arguments[0],B=arguments[1];this._coordinates=A,this._dimension=B,null===A&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var U=arguments[0],xe=arguments[1];this._coordinates=new Array(U).fill(null),this._dimension=xe;for(var st=0;st<U;st++)this._coordinates[st]=new Q}},Tl={serialVersionUID:{configurable:!0}};ko.prototype.setOrdinate=function(c,f,b){switch(f){case qt.X:this._coordinates[c].x=b;break;case qt.Y:this._coordinates[c].y=b;break;case qt.Z:this._coordinates[c].z=b;break;default:throw new Z("invalid ordinateIndex")}},ko.prototype.size=function(){return this._coordinates.length},ko.prototype.getOrdinate=function(c,f){switch(f){case qt.X:return this._coordinates[c].x;case qt.Y:return this._coordinates[c].y;case qt.Z:return this._coordinates[c].z}return ee.NaN},ko.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var f=arguments[0],b=arguments[1];b.x=this._coordinates[f].x,b.y=this._coordinates[f].y,b.z=this._coordinates[f].z}},ko.prototype.getCoordinateCopy=function(c){return new Q(this._coordinates[c])},ko.prototype.getDimension=function(){return this._dimension},ko.prototype.getX=function(c){return this._coordinates[c].x},ko.prototype.clone=function(){for(var c=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)c[f]=this._coordinates[f].clone();return new ko(c,this._dimension)},ko.prototype.expandEnvelope=function(c){for(var f=0;f<this._coordinates.length;f++)c.expandToInclude(this._coordinates[f]);return c},ko.prototype.copy=function(){for(var c=new Array(this.size()).fill(null),f=0;f<this._coordinates.length;f++)c[f]=this._coordinates[f].copy();return new ko(c,this._dimension)},ko.prototype.toString=function(){if(this._coordinates.length>0){var c=new De(17*this._coordinates.length);c.append("("),c.append(this._coordinates[0]);for(var f=1;f<this._coordinates.length;f++)c.append(", "),c.append(this._coordinates[f]);return c.append(")"),c.toString()}return"()"},ko.prototype.getY=function(c){return this._coordinates[c].y},ko.prototype.toCoordinateArray=function(){return this._coordinates},ko.prototype.interfaces_=function(){return[qt,ue]},ko.prototype.getClass=function(){return ko},Tl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ko,Tl);var We=function(){},Bt={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};We.prototype.readResolve=function(){return We.instance()},We.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ko(arguments[0]);if(Se(arguments[0],qt))return new ko(arguments[0])}else if(2===arguments.length){var b=arguments[0],w=arguments[1];return w>3&&(w=3),w<2?new ko(b):new ko(b,w)}},We.prototype.interfaces_=function(){return[be,ue]},We.prototype.getClass=function(){return We},We.instance=function(){return We.instanceObject},Bt.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Bt.instanceObject.get=function(){return new We},Object.defineProperties(We,Bt);var gt=function(c){function f(){c.call(this),this.map_=new Map}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.get=function(b){return this.map_.get(b)||null},f.prototype.put=function(b,w){return this.map_.set(b,w),w},f.prototype.values=function(){for(var b=new at,w=this.map_.values(),A=w.next();!A.done;)b.add(A.value),A=w.next();return b},f.prototype.entrySet=function(){var b=new Cr;return this.map_.entries().forEach(function(w){return b.add(w)}),b},f.prototype.size=function(){return this.map_.size()},f}(Zn),tt=function c(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=c.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ot){var f=arguments[0];this._modelType=f,f===c.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var b=arguments[0];this._modelType=c.FIXED,this.setScale(b)}else if(arguments[0]instanceof c){var w=arguments[0];this._modelType=w._modelType,this._scale=w._scale}},St={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};tt.prototype.equals=function(c){return c instanceof tt&&this._modelType===c._modelType&&this._scale===c._scale},tt.prototype.compareTo=function(c){var f=c,b=this.getMaximumSignificantDigits(),w=f.getMaximumSignificantDigits();return new Ke(b).compareTo(new Ke(w))},tt.prototype.getScale=function(){return this._scale},tt.prototype.isFloating=function(){return this._modelType===tt.FLOATING||this._modelType===tt.FLOATING_SINGLE},tt.prototype.getType=function(){return this._modelType},tt.prototype.toString=function(){var c="UNKNOWN";return this._modelType===tt.FLOATING?c="Floating":this._modelType===tt.FLOATING_SINGLE?c="Floating-Single":this._modelType===tt.FIXED&&(c="Fixed (Scale="+this.getScale()+")"),c},tt.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var c=arguments[0];return ee.isNaN(c)||this._modelType===tt.FLOATING_SINGLE?c:this._modelType===tt.FIXED?Math.round(c*this._scale)/this._scale:c}if(arguments[0]instanceof Q){var f=arguments[0];if(this._modelType===tt.FLOATING)return null;f.x=this.makePrecise(f.x),f.y=this.makePrecise(f.y)}},tt.prototype.getMaximumSignificantDigits=function(){var c=16;return this._modelType===tt.FLOATING?c=16:this._modelType===tt.FLOATING_SINGLE?c=6:this._modelType===tt.FIXED&&(c=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),c},tt.prototype.setScale=function(c){this._scale=Math.abs(c)},tt.prototype.interfaces_=function(){return[ue,ne]},tt.prototype.getClass=function(){return tt},tt.mostPrecise=function(c,f){return c.compareTo(f)>=0?c:f},St.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},St.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(tt,St);var Ot=function c(f){this._name=f||null,c.nameToTypeMap.put(f,this)},ce={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ot.prototype.readResolve=function(){return Ot.nameToTypeMap.get(this._name)},Ot.prototype.toString=function(){return this._name},Ot.prototype.interfaces_=function(){return[ue]},Ot.prototype.getClass=function(){return Ot},ce.serialVersionUID.get=function(){return-552860263173159e4},ce.nameToTypeMap.get=function(){return new gt},Object.defineProperties(Ot,ce),tt.Type=Ot,tt.FIXED=new Ot("FIXED"),tt.FLOATING=new Ot("FLOATING"),tt.FLOATING_SINGLE=new Ot("FLOATING SINGLE");var ge=function c(){this._precisionModel=new tt,this._SRID=0,this._coordinateSequenceFactory=c.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Se(arguments[0],be)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof tt&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},nt={serialVersionUID:{configurable:!0}};ge.prototype.toGeometry=function(c){return c.isNull()?this.createPoint(null):c.getMinX()===c.getMaxX()&&c.getMinY()===c.getMaxY()?this.createPoint(new Q(c.getMinX(),c.getMinY())):c.getMinX()===c.getMaxX()||c.getMinY()===c.getMaxY()?this.createLineString([new Q(c.getMinX(),c.getMinY()),new Q(c.getMaxX(),c.getMaxY())]):this.createPolygon(this.createLinearRing([new Q(c.getMinX(),c.getMinY()),new Q(c.getMinX(),c.getMaxY()),new Q(c.getMaxX(),c.getMaxY()),new Q(c.getMaxX(),c.getMinY()),new Q(c.getMinX(),c.getMinY())]),null)},ge.prototype.createLineString=function(c){return c?c instanceof Array?new rr(this.getCoordinateSequenceFactory().create(c),this):Se(c,qt)?new rr(c,this):void 0:new rr(this.getCoordinateSequenceFactory().create([]),this)},ge.prototype.createMultiLineString=function(){return 0===arguments.length?new Qn(null,this):1===arguments.length?new Qn(arguments[0],this):void 0},ge.prototype.buildGeometry=function(c){for(var f=null,b=!1,w=!1,A=c.iterator();A.hasNext();){var B=A.next(),U=B.getClass();null===f&&(f=U),U!==f&&(b=!0),B.isGeometryCollectionOrDerived()&&(w=!0)}if(null===f)return this.createGeometryCollection();if(b||w)return this.createGeometryCollection(ge.toGeometryArray(c));var xe=c.iterator().next();if(c.size()>1){if(xe instanceof so)return this.createMultiPolygon(ge.toPolygonArray(c));if(xe instanceof rr)return this.createMultiLineString(ge.toLineStringArray(c));if(xe instanceof Vr)return this.createMultiPoint(ge.toPointArray(c));Ee.shouldNeverReachHere("Unhandled class: "+xe.getClass().getName())}return xe},ge.prototype.createMultiPointFromCoords=function(c){return this.createMultiPoint(null!==c?this.getCoordinateSequenceFactory().create(c):null)},ge.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Q){var c=arguments[0];return this.createPoint(null!==c?this.getCoordinateSequenceFactory().create([c]):null)}if(Se(arguments[0],qt))return new Vr(arguments[0],this)}},ge.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ge.prototype.createPolygon=function(){if(0===arguments.length)return new so(null,null,this);if(1===arguments.length){if(Se(arguments[0],qt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof No)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new so(arguments[0],arguments[1],this)},ge.prototype.getSRID=function(){return this._SRID},ge.prototype.createGeometryCollection=function(){return 0===arguments.length?new Vn(null,this):1===arguments.length?new Vn(arguments[0],this):void 0},ge.prototype.createGeometry=function(c){return new ar(this).edit(c,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},ge.prototype.getPrecisionModel=function(){return this._precisionModel},ge.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var c=arguments[0];return this.createLinearRing(null!==c?this.getCoordinateSequenceFactory().create(c):null)}if(Se(arguments[0],qt))return new No(arguments[0],this)}},ge.prototype.createMultiPolygon=function(){return 0===arguments.length?new no(null,this):1===arguments.length?new no(arguments[0],this):void 0},ge.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ns(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ns(arguments[0],this);if(arguments[0]instanceof Array){var f=arguments[0];return this.createMultiPoint(null!==f?this.getCoordinateSequenceFactory().create(f):null)}if(Se(arguments[0],qt)){var b=arguments[0];if(null===b)return this.createMultiPoint(new Array(0).fill(null));for(var w=new Array(b.size()).fill(null),A=0;A<b.size();A++){var B=this.getCoordinateSequenceFactory().create(1,b.getDimension());Ri.copy(b,A,B,0,1),w[A]=this.createPoint(B)}return this.createMultiPoint(w)}}},ge.prototype.interfaces_=function(){return[ue]},ge.prototype.getClass=function(){return ge},ge.toMultiPolygonArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.toGeometryArray=function(c){if(null===c)return null;var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.getDefaultCoordinateSequenceFactory=function(){return We.instance()},ge.toMultiLineStringArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.toLineStringArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.toMultiPointArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.toLinearRingArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.toPointArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.toPolygonArray=function(c){var f=new Array(c.size()).fill(null);return c.toArray(f)},ge.createPointFromInternalCoord=function(c,f){return f.getPrecisionModel().makePrecise(c),f.getFactory().createPoint(c)},nt.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ge,nt);var yt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Re=function(c){this.geometryFactory=c||new ge};Re.prototype.read=function(c){var f,b=(f="string"==typeof c?JSON.parse(c):c).type;if(!ut[b])throw new Error("Unknown GeoJSON type: "+f.type);return-1!==yt.indexOf(b)?ut[b].apply(this,[f.coordinates]):ut[b].apply(this,"GeometryCollection"===b?[f.geometries]:[f])},Re.prototype.write=function(c){var f=c.getGeometryType();if(!kt[f])throw new Error("Geometry is not supported");return kt[f].apply(this,[c])};var ut={Feature:function(c){var f={};for(var b in c)f[b]=c[b];if(c.geometry){if(!ut[c.geometry.type])throw new Error("Unknown GeoJSON type: "+c.type);f.geometry=this.read(c.geometry)}return c.bbox&&(f.bbox=ut.bbox.apply(this,[c.bbox])),f},FeatureCollection:function(c){var f={};if(c.features){f.features=[];for(var b=0;b<c.features.length;++b)f.features.push(this.read(c.features[b]))}return c.bbox&&(f.bbox=this.parse.bbox.apply(this,[c.bbox])),f},coordinates:function(c){for(var f=[],b=0;b<c.length;++b){var w=c[b];f.push(new Q(w[0],w[1]))}return f},bbox:function(c){return this.geometryFactory.createLinearRing([new Q(c[0],c[1]),new Q(c[2],c[1]),new Q(c[2],c[3]),new Q(c[0],c[3]),new Q(c[0],c[1])])},Point:function(c){var f=new Q(c[0],c[1]);return this.geometryFactory.createPoint(f)},MultiPoint:function(c){for(var f=[],b=0;b<c.length;++b)f.push(ut.Point.apply(this,[c[b]]));return this.geometryFactory.createMultiPoint(f)},LineString:function(c){var f=ut.coordinates.apply(this,[c]);return this.geometryFactory.createLineString(f)},MultiLineString:function(c){for(var f=[],b=0;b<c.length;++b)f.push(ut.LineString.apply(this,[c[b]]));return this.geometryFactory.createMultiLineString(f)},Polygon:function(c){for(var f=ut.coordinates.apply(this,[c[0]]),b=this.geometryFactory.createLinearRing(f),w=[],A=1;A<c.length;++A){var U=ut.coordinates.apply(this,[c[A]]),xe=this.geometryFactory.createLinearRing(U);w.push(xe)}return this.geometryFactory.createPolygon(b,w)},MultiPolygon:function(c){for(var f=[],b=0;b<c.length;++b)f.push(ut.Polygon.apply(this,[c[b]]));return this.geometryFactory.createMultiPolygon(f)},GeometryCollection:function(c){for(var f=[],b=0;b<c.length;++b)f.push(this.read(c[b]));return this.geometryFactory.createGeometryCollection(f)}},kt={coordinate:function(c){return[c.x,c.y]},Point:function(c){return{type:"Point",coordinates:kt.coordinate.apply(this,[c.getCoordinate()])}},MultiPoint:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var A=kt.Point.apply(this,[c._geometries[b]]);f.push(A.coordinates)}return{type:"MultiPoint",coordinates:f}},LineString:function(c){for(var f=[],b=c.getCoordinates(),w=0;w<b.length;++w)f.push(kt.coordinate.apply(this,[b[w]]));return{type:"LineString",coordinates:f}},MultiLineString:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var A=kt.LineString.apply(this,[c._geometries[b]]);f.push(A.coordinates)}return{type:"MultiLineString",coordinates:f}},Polygon:function(c){var f=[],b=kt.LineString.apply(this,[c._shell]);f.push(b.coordinates);for(var w=0;w<c._holes.length;++w){var B=kt.LineString.apply(this,[c._holes[w]]);f.push(B.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var A=kt.Polygon.apply(this,[c._geometries[b]]);f.push(A.coordinates)}return{type:"MultiPolygon",coordinates:f}},GeometryCollection:function(c){for(var f=[],b=0;b<c._geometries.length;++b){var w=c._geometries[b],A=w.getGeometryType();f.push(kt[A].apply(this,[w]))}return{type:"GeometryCollection",geometries:f}}},rn=function(c){this.geometryFactory=c||new ge,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Re(this.geometryFactory)};rn.prototype.read=function(c){var f=this.parser.read(c);return this.precisionModel.getType()===tt.FIXED&&this.reducePrecision(f),f},rn.prototype.reducePrecision=function(c){var f,b;if(c.coordinate)this.precisionModel.makePrecise(c.coordinate);else if(c.points)for(f=0,b=c.points.length;f<b;f++)this.precisionModel.makePrecise(c.points[f]);else if(c.geometries)for(f=0,b=c.geometries.length;f<b;f++)this.reducePrecision(c.geometries[f])};var vn=function(){this.parser=new Re(this.geometryFactory)};vn.prototype.write=function(c){return this.parser.write(c)};var xt=function(){},Pn={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};xt.prototype.interfaces_=function(){return[]},xt.prototype.getClass=function(){return xt},xt.opposite=function(c){return c===xt.LEFT?xt.RIGHT:c===xt.RIGHT?xt.LEFT:c},Pn.ON.get=function(){return 0},Pn.LEFT.get=function(){return 1},Pn.RIGHT.get=function(){return 2},Object.defineProperties(xt,Pn),(le.prototype=new Error).name="EmptyStackException",(we.prototype=new Ct).add=function(c){return this.array_.push(c),!0},we.prototype.get=function(c){if(c<0||c>=this.size())throw new Error;return this.array_[c]},we.prototype.push=function(c){return this.array_.push(c),c},we.prototype.pop=function(c){if(0===this.array_.length)throw new le;return this.array_.pop()},we.prototype.peek=function(){if(0===this.array_.length)throw new le;return this.array_[this.array_.length-1]},we.prototype.empty=function(){return 0===this.array_.length},we.prototype.isEmpty=function(){return this.empty()},we.prototype.search=function(c){return this.array_.indexOf(c)},we.prototype.size=function(){return this.array_.length},we.prototype.toArray=function(){for(var c=[],f=0,b=this.array_.length;f<b;f++)c.push(this.array_[f]);return c};var $i=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};$i.prototype.getCoordinate=function(){return this._minCoord},$i.prototype.getRightmostSide=function(c,f){var b=this.getRightmostSideOfSegment(c,f);return b<0&&(b=this.getRightmostSideOfSegment(c,f-1)),b<0&&(this._minCoord=null,this.checkForRightmostCoordinate(c)),b},$i.prototype.findRightmostEdgeAtVertex=function(){var c=this._minDe.getEdge().getCoordinates();Ee.isTrue(this._minIndex>0&&this._minIndex<c.length,"rightmost point expected to be interior vertex of edge");var f=c[this._minIndex-1],b=c[this._minIndex+1],w=yn.computeOrientation(this._minCoord,b,f),A=!1;(f.y<this._minCoord.y&&b.y<this._minCoord.y&&w===yn.COUNTERCLOCKWISE||f.y>this._minCoord.y&&b.y>this._minCoord.y&&w===yn.CLOCKWISE)&&(A=!0),A&&(this._minIndex=this._minIndex-1)},$i.prototype.getRightmostSideOfSegment=function(c,f){var b=c.getEdge().getCoordinates();if(f<0||f+1>=b.length||b[f].y===b[f+1].y)return-1;var w=xt.LEFT;return b[f].y<b[f+1].y&&(w=xt.RIGHT),w},$i.prototype.getEdge=function(){return this._orientedDe},$i.prototype.checkForRightmostCoordinate=function(c){for(var f=c.getEdge().getCoordinates(),b=0;b<f.length-1;b++)(null===this._minCoord||f[b].x>this._minCoord.x)&&(this._minDe=c,this._minIndex=b,this._minCoord=f[b])},$i.prototype.findRightmostEdgeAtNode=function(){var c=this._minDe.getNode().getEdges();this._minDe=c.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},$i.prototype.findEdge=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next();b.isForward()&&this.checkForRightmostCoordinate(b)}Ee.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===xt.LEFT&&(this._orientedDe=this._minDe.getSym())},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i};var ur=function(c){function f(b,w){c.call(this,f.msgWithCoord(b,w)),this.pt=w?new Q(w):null,this.name="TopologyException"}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.getCoordinate=function(){return this.pt},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.msgWithCoord=function(b,w){return w?b:b+" [ "+w+" ]"},f}(Ae),ao=function(){this.array_=[]};ao.prototype.addLast=function(c){this.array_.push(c)},ao.prototype.removeFirst=function(){return this.array_.shift()},ao.prototype.isEmpty=function(){return 0===this.array_.length};var yo=function(){this._finder=null,this._dirEdgeList=new at,this._nodes=new at,this._rightMostCoord=null,this._env=null,this._finder=new $i};yo.prototype.clearVisitedEdges=function(){for(var c=this._dirEdgeList.iterator();c.hasNext();)c.next().setVisited(!1)},yo.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},yo.prototype.computeNodeDepth=function(c){for(var f=null,b=c.getEdges().iterator();b.hasNext();){var w=b.next();if(w.isVisited()||w.getSym().isVisited()){f=w;break}}if(null===f)throw new ur("unable to find edge to compute depths at "+c.getCoordinate());c.getEdges().computeDepths(f);for(var A=c.getEdges().iterator();A.hasNext();){var B=A.next();B.setVisited(!0),this.copySymDepths(B)}},yo.prototype.computeDepth=function(c){this.clearVisitedEdges();var f=this._finder.getEdge();f.setEdgeDepths(xt.RIGHT,c),this.copySymDepths(f),this.computeDepths(f)},yo.prototype.create=function(c){this.addReachable(c),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},yo.prototype.findResultEdges=function(){for(var c=this._dirEdgeList.iterator();c.hasNext();){var f=c.next();f.getDepth(xt.RIGHT)>=1&&f.getDepth(xt.LEFT)<=0&&!f.isInteriorAreaEdge()&&f.setInResult(!0)}},yo.prototype.computeDepths=function(c){var f=new Cr,b=new ao,w=c.getNode();for(b.addLast(w),f.add(w),c.setVisited(!0);!b.isEmpty();){var A=b.removeFirst();f.add(A),this.computeNodeDepth(A);for(var B=A.getEdges().iterator();B.hasNext();){var U=B.next().getSym();if(!U.isVisited()){var xe=U.getNode();f.contains(xe)||(b.addLast(xe),f.add(xe))}}}},yo.prototype.compareTo=function(c){return this._rightMostCoord.x<c._rightMostCoord.x?-1:this._rightMostCoord.x>c._rightMostCoord.x?1:0},yo.prototype.getEnvelope=function(){if(null===this._env){for(var c=new Tn,f=this._dirEdgeList.iterator();f.hasNext();)for(var b=f.next().getEdge().getCoordinates(),w=0;w<b.length-1;w++)c.expandToInclude(b[w]);this._env=c}return this._env},yo.prototype.addReachable=function(c){var f=new we;for(f.add(c);!f.empty();){var b=f.pop();this.add(b,f)}},yo.prototype.copySymDepths=function(c){var f=c.getSym();f.setDepth(xt.LEFT,c.getDepth(xt.RIGHT)),f.setDepth(xt.RIGHT,c.getDepth(xt.LEFT))},yo.prototype.add=function(c,f){c.setVisited(!0),this._nodes.add(c);for(var b=c.getEdges().iterator();b.hasNext();){var w=b.next();this._dirEdgeList.add(w);var A=w.getSym().getNode();A.isVisited()||f.push(A)}},yo.prototype.getNodes=function(){return this._nodes},yo.prototype.getDirectedEdges=function(){return this._dirEdgeList},yo.prototype.interfaces_=function(){return[ne]},yo.prototype.getClass=function(){return yo};var Jt=function c(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[xt.ON]=b}else if(arguments[0]instanceof c){var w=arguments[0];if(this.init(w.location.length),null!==w)for(var A=0;A<this.location.length;A++)this.location[A]=w.location[A]}}else if(3===arguments.length){var B=arguments[0],U=arguments[1],xe=arguments[2];this.init(3),this.location[xt.ON]=B,this.location[xt.LEFT]=U,this.location[xt.RIGHT]=xe}};Jt.prototype.setAllLocations=function(c){for(var f=0;f<this.location.length;f++)this.location[f]=c},Jt.prototype.isNull=function(){for(var c=0;c<this.location.length;c++)if(this.location[c]!==ie.NONE)return!1;return!0},Jt.prototype.setAllLocationsIfNull=function(c){for(var f=0;f<this.location.length;f++)this.location[f]===ie.NONE&&(this.location[f]=c)},Jt.prototype.isLine=function(){return 1===this.location.length},Jt.prototype.merge=function(c){if(c.location.length>this.location.length){var f=new Array(3).fill(null);f[xt.ON]=this.location[xt.ON],f[xt.LEFT]=ie.NONE,f[xt.RIGHT]=ie.NONE,this.location=f}for(var b=0;b<this.location.length;b++)this.location[b]===ie.NONE&&b<c.location.length&&(this.location[b]=c.location[b])},Jt.prototype.getLocations=function(){return this.location},Jt.prototype.flip=function(){if(this.location.length<=1)return null;var c=this.location[xt.LEFT];this.location[xt.LEFT]=this.location[xt.RIGHT],this.location[xt.RIGHT]=c},Jt.prototype.toString=function(){var c=new De;return this.location.length>1&&c.append(ie.toLocationSymbol(this.location[xt.LEFT])),c.append(ie.toLocationSymbol(this.location[xt.ON])),this.location.length>1&&c.append(ie.toLocationSymbol(this.location[xt.RIGHT])),c.toString()},Jt.prototype.setLocations=function(c,f,b){this.location[xt.ON]=c,this.location[xt.LEFT]=f,this.location[xt.RIGHT]=b},Jt.prototype.get=function(c){return c<this.location.length?this.location[c]:ie.NONE},Jt.prototype.isArea=function(){return this.location.length>1},Jt.prototype.isAnyNull=function(){for(var c=0;c<this.location.length;c++)if(this.location[c]===ie.NONE)return!0;return!1},Jt.prototype.setLocation=function(){1===arguments.length?this.setLocation(xt.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Jt.prototype.init=function(c){this.location=new Array(c).fill(null),this.setAllLocations(ie.NONE)},Jt.prototype.isEqualOnSide=function(c,f){return this.location[f]===c.location[f]},Jt.prototype.allPositionsEqual=function(c){for(var f=0;f<this.location.length;f++)if(this.location[f]!==c)return!1;return!0},Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var $r=function c(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var f=arguments[0];this.elt[0]=new Jt(f),this.elt[1]=new Jt(f)}else if(arguments[0]instanceof c){var b=arguments[0];this.elt[0]=new Jt(b.elt[0]),this.elt[1]=new Jt(b.elt[1])}}else if(2===arguments.length){var w=arguments[0],A=arguments[1];this.elt[0]=new Jt(ie.NONE),this.elt[1]=new Jt(ie.NONE),this.elt[w].setLocation(A)}else if(3===arguments.length){var B=arguments[0],U=arguments[1],xe=arguments[2];this.elt[0]=new Jt(B,U,xe),this.elt[1]=new Jt(B,U,xe)}else if(4===arguments.length){var st=arguments[0],$t=arguments[1],gn=arguments[2],Rn=arguments[3];this.elt[0]=new Jt(ie.NONE,ie.NONE,ie.NONE),this.elt[1]=new Jt(ie.NONE,ie.NONE,ie.NONE),this.elt[st].setLocations($t,gn,Rn)}};$r.prototype.getGeometryCount=function(){var c=0;return this.elt[0].isNull()||c++,this.elt[1].isNull()||c++,c},$r.prototype.setAllLocations=function(c,f){this.elt[c].setAllLocations(f)},$r.prototype.isNull=function(c){return this.elt[c].isNull()},$r.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var c=arguments[0];this.setAllLocationsIfNull(0,c),this.setAllLocationsIfNull(1,c)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},$r.prototype.isLine=function(c){return this.elt[c].isLine()},$r.prototype.merge=function(c){for(var f=0;f<2;f++)null===this.elt[f]&&null!==c.elt[f]?this.elt[f]=new Jt(c.elt[f]):this.elt[f].merge(c.elt[f])},$r.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$r.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(xt.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},$r.prototype.toString=function(){var c=new De;return null!==this.elt[0]&&(c.append("A:"),c.append(this.elt[0].toString())),null!==this.elt[1]&&(c.append(" B:"),c.append(this.elt[1].toString())),c.toString()},$r.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},$r.prototype.isAnyNull=function(c){return this.elt[c].isAnyNull()},$r.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(xt.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},$r.prototype.isEqualOnSide=function(c,f){return this.elt[0].isEqualOnSide(c.elt[0],f)&&this.elt[1].isEqualOnSide(c.elt[1],f)},$r.prototype.allPositionsEqual=function(c,f){return this.elt[c].allPositionsEqual(f)},$r.prototype.toLine=function(c){this.elt[c].isArea()&&(this.elt[c]=new Jt(this.elt[c].location[0]))},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.toLineLabel=function(c){for(var f=new $r(ie.NONE),b=0;b<2;b++)f.setLocation(b,c.getLocation(b));return f};var ji=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new at,this._pts=new at,this._label=new $r(ie.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new at,this._geometryFactory=null;var c=arguments[0];this._geometryFactory=arguments[1],this.computePoints(c),this.computeRing()};ji.prototype.computeRing=function(){if(null!==this._ring)return null;for(var c=new Array(this._pts.size()).fill(null),f=0;f<this._pts.size();f++)c[f]=this._pts.get(f);this._ring=this._geometryFactory.createLinearRing(c),this._isHole=yn.isCCW(this._ring.getCoordinates())},ji.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},ji.prototype.computePoints=function(c){this._startDe=c;var f=c,b=!0;do{if(null===f)throw new ur("Found null DirectedEdge");if(f.getEdgeRing()===this)throw new ur("Directed Edge visited twice during ring-building at "+f.getCoordinate());this._edges.add(f);var w=f.getLabel();Ee.isTrue(w.isArea()),this.mergeLabel(w),this.addPoints(f.getEdge(),f.isForward(),b),b=!1,this.setEdgeRing(f,this),f=this.getNext(f)}while(f!==this._startDe)},ji.prototype.getLinearRing=function(){return this._ring},ji.prototype.getCoordinate=function(c){return this._pts.get(c)},ji.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var c=this._startDe;do{var f=c.getNode().getEdges().getOutgoingDegree(this);f>this._maxNodeDegree&&(this._maxNodeDegree=f),c=this.getNext(c)}while(c!==this._startDe);this._maxNodeDegree*=2},ji.prototype.addPoints=function(c,f,b){var w=c.getCoordinates();if(f){var A=1;b&&(A=0);for(var B=A;B<w.length;B++)this._pts.add(w[B])}else{var U=w.length-2;b&&(U=w.length-1);for(var xe=U;xe>=0;xe--)this._pts.add(w[xe])}},ji.prototype.isHole=function(){return this._isHole},ji.prototype.setInResult=function(){var c=this._startDe;do{c.getEdge().setInResult(!0),c=c.getNext()}while(c!==this._startDe)},ji.prototype.containsPoint=function(c){var f=this.getLinearRing();if(!f.getEnvelopeInternal().contains(c)||!yn.isPointInRing(c,f.getCoordinates()))return!1;for(var b=this._holes.iterator();b.hasNext();)if(b.next().containsPoint(c))return!1;return!0},ji.prototype.addHole=function(c){this._holes.add(c)},ji.prototype.isShell=function(){return null===this._shell},ji.prototype.getLabel=function(){return this._label},ji.prototype.getEdges=function(){return this._edges},ji.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},ji.prototype.getShell=function(){return this._shell},ji.prototype.mergeLabel=function(){if(1===arguments.length){var c=arguments[0];this.mergeLabel(c,0),this.mergeLabel(c,1)}else if(2===arguments.length){var b=arguments[1],w=arguments[0].getLocation(b,xt.RIGHT);if(w===ie.NONE)return null;if(this._label.getLocation(b)===ie.NONE)return this._label.setLocation(b,w),null}},ji.prototype.setShell=function(c){this._shell=c,null!==c&&c.addHole(this)},ji.prototype.toPolygon=function(c){for(var f=new Array(this._holes.size()).fill(null),b=0;b<this._holes.size();b++)f[b]=this._holes.get(b).getLinearRing();return c.createPolygon(this.getLinearRing(),f)},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji};var Mr=function(c){function f(){c.call(this,arguments[0],arguments[1])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.setEdgeRing=function(b,w){b.setMinEdgeRing(w)},f.prototype.getNext=function(b){return b.getNextMin()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ji),As=function(c){function f(){c.call(this,arguments[0],arguments[1])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.buildMinimalRings=function(){var b=new at,w=this._startDe;do{if(null===w.getMinEdgeRing()){var A=new Mr(w,this._geometryFactory);b.add(A)}w=w.getNext()}while(w!==this._startDe);return b},f.prototype.setEdgeRing=function(b,w){b.setEdgeRing(w)},f.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var b=this._startDe;do{b.getNode().getEdges().linkMinimalDirectedEdges(this),b=b.getNext()}while(b!==this._startDe)},f.prototype.getNext=function(b){return b.getNext()},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(ji),Dl=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};Dl.prototype.setVisited=function(c){this._isVisited=c},Dl.prototype.setInResult=function(c){this._isInResult=c},Dl.prototype.isCovered=function(){return this._isCovered},Dl.prototype.isCoveredSet=function(){return this._isCoveredSet},Dl.prototype.setLabel=function(c){this._label=c},Dl.prototype.getLabel=function(){return this._label},Dl.prototype.setCovered=function(c){this._isCovered=c,this._isCoveredSet=!0},Dl.prototype.updateIM=function(c){Ee.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(c)},Dl.prototype.isInResult=function(){return this._isInResult},Dl.prototype.isVisited=function(){return this._isVisited},Dl.prototype.interfaces_=function(){return[]},Dl.prototype.getClass=function(){return Dl};var Au=function(c){function f(){c.call(this),this._coord=null,this._edges=null;var w=arguments[1];this._coord=arguments[0],this._edges=w,this._label=new $r(0,ie.NONE)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.isIncidentEdgeInResult=function(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();)if(b.next().getEdge().isInResult())return!0;return!1},f.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},f.prototype.getCoordinate=function(){return this._coord},f.prototype.print=function(b){b.println("node "+this._coord+" lbl: "+this._label)},f.prototype.computeIM=function(b){},f.prototype.computeMergedLocation=function(b,w){var A=ie.NONE;if(A=this._label.getLocation(w),!b.isNull(w)){var B=b.getLocation(w);A!==ie.BOUNDARY&&(A=B)}return A},f.prototype.setLabel=function(){if(2!==arguments.length)return c.prototype.setLabel.apply(this,arguments);var b=arguments[0],w=arguments[1];null===this._label?this._label=new $r(b,w):this._label.setLocation(b,w)},f.prototype.getEdges=function(){return this._edges},f.prototype.mergeLabel=function(){if(arguments[0]instanceof f)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof $r)for(var w=arguments[0],A=0;A<2;A++){var B=this.computeMergedLocation(w,A);this._label.getLocation(A)===ie.NONE&&this._label.setLocation(A,B)}},f.prototype.add=function(b){this._edges.insert(b),b.setNode(this)},f.prototype.setLabelBoundary=function(b){if(null===this._label)return null;var w=ie.NONE;null!==this._label&&(w=this._label.getLocation(b)),this._label.setLocation(b,w===ie.BOUNDARY?ie.INTERIOR:ie.BOUNDARY)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Dl),Qs=function(){this.nodeMap=new qe,this.nodeFact=null,this.nodeFact=arguments[0]};Qs.prototype.find=function(c){return this.nodeMap.get(c)},Qs.prototype.addNode=function(){if(arguments[0]instanceof Q){var c=arguments[0],f=this.nodeMap.get(c);return null===f&&(f=this.nodeFact.createNode(c),this.nodeMap.put(c,f)),f}if(arguments[0]instanceof Au){var b=arguments[0],w=this.nodeMap.get(b.getCoordinate());return null===w?(this.nodeMap.put(b.getCoordinate(),b),b):(w.mergeLabel(b),w)}},Qs.prototype.print=function(c){for(var f=this.iterator();f.hasNext();)f.next().print(c)},Qs.prototype.iterator=function(){return this.nodeMap.values().iterator()},Qs.prototype.values=function(){return this.nodeMap.values()},Qs.prototype.getBoundaryNodes=function(c){for(var f=new at,b=this.iterator();b.hasNext();){var w=b.next();w.getLabel().getLocation(c)===ie.BOUNDARY&&f.add(w)}return f},Qs.prototype.add=function(c){var f=c.getCoordinate();this.addNode(f).add(c)},Qs.prototype.interfaces_=function(){return[]},Qs.prototype.getClass=function(){return Qs};var kr=function(){},Df={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.isNorthern=function(c){return c===kr.NE||c===kr.NW},kr.isOpposite=function(c,f){return c!==f&&(c-f+4)%4==2},kr.commonHalfPlane=function(c,f){if(c===f)return c;if((c-f+4)%4==2)return-1;var b=c<f?c:f;return 0===b&&3===(c>f?c:f)?3:b},kr.isInHalfPlane=function(c,f){return f===kr.SE?c===kr.SE||c===kr.SW:c===f||c===f+1},kr.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var c=arguments[0],f=arguments[1];if(0===c&&0===f)throw new Z("Cannot compute the quadrant for point ( "+c+", "+f+" )");return c>=0?f>=0?kr.NE:kr.SE:f>=0?kr.NW:kr.SW}if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var b=arguments[0],w=arguments[1];if(w.x===b.x&&w.y===b.y)throw new Z("Cannot compute the quadrant for two identical points "+b);return w.x>=b.x?w.y>=b.y?kr.NE:kr.SE:w.y>=b.y?kr.NW:kr.SW}},Df.NE.get=function(){return 0},Df.NW.get=function(){return 1},Df.SW.get=function(){return 2},Df.SE.get=function(){return 3},Object.defineProperties(kr,Df);var Oa=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var b=arguments[1],w=arguments[2];this._edge=arguments[0],this.init(b,w),this._label=null}else if(4===arguments.length){var B=arguments[1],U=arguments[2],xe=arguments[3];this._edge=arguments[0],this.init(B,U),this._label=xe}};Oa.prototype.compareDirection=function(c){return this._dx===c._dx&&this._dy===c._dy?0:this._quadrant>c._quadrant?1:this._quadrant<c._quadrant?-1:yn.computeOrientation(c._p0,c._p1,this._p1)},Oa.prototype.getDy=function(){return this._dy},Oa.prototype.getCoordinate=function(){return this._p0},Oa.prototype.setNode=function(c){this._node=c},Oa.prototype.print=function(c){var f=Math.atan2(this._dy,this._dx),b=this.getClass().getName(),w=b.lastIndexOf("."),A=b.substring(w+1);c.print("  "+A+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label)},Oa.prototype.compareTo=function(c){return this.compareDirection(c)},Oa.prototype.getDirectedCoordinate=function(){return this._p1},Oa.prototype.getDx=function(){return this._dx},Oa.prototype.getLabel=function(){return this._label},Oa.prototype.getEdge=function(){return this._edge},Oa.prototype.getQuadrant=function(){return this._quadrant},Oa.prototype.getNode=function(){return this._node},Oa.prototype.toString=function(){var c=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),b=f.lastIndexOf(".");return"  "+f.substring(b+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+c+"   "+this._label},Oa.prototype.computeLabel=function(c){},Oa.prototype.init=function(c,f){this._p0=c,this._p1=f,this._dx=f.x-c.x,this._dy=f.y-c.y,this._quadrant=kr.quadrant(this._dx,this._dy),Ee.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Oa.prototype.interfaces_=function(){return[ne]},Oa.prototype.getClass=function(){return Oa};var Ta=function(c){function f(){var b=arguments[0],w=arguments[1];if(c.call(this,b),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=w,w)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var A=b.getNumPoints()-1;this.init(b.getCoordinate(A),b.getCoordinate(A-1))}this.computeDirectedLabel()}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.getNextMin=function(){return this._nextMin},f.prototype.getDepth=function(b){return this._depth[b]},f.prototype.setVisited=function(b){this._isVisited=b},f.prototype.computeDirectedLabel=function(){this._label=new $r(this._edge.getLabel()),this._isForward||this._label.flip()},f.prototype.getNext=function(){return this._next},f.prototype.setDepth=function(b,w){if(-999!==this._depth[b]&&this._depth[b]!==w)throw new ur("assigned depths do not match",this.getCoordinate());this._depth[b]=w},f.prototype.isInteriorAreaEdge=function(){for(var b=!0,w=0;w<2;w++)this._label.isArea(w)&&this._label.getLocation(w,xt.LEFT)===ie.INTERIOR&&this._label.getLocation(w,xt.RIGHT)===ie.INTERIOR||(b=!1);return b},f.prototype.setNextMin=function(b){this._nextMin=b},f.prototype.print=function(b){c.prototype.print.call(this,b),b.print(" "+this._depth[xt.LEFT]+"/"+this._depth[xt.RIGHT]),b.print(" ("+this.getDepthDelta()+")"),this._isInResult&&b.print(" inResult")},f.prototype.setMinEdgeRing=function(b){this._minEdgeRing=b},f.prototype.isLineEdge=function(){var b=this._label.isLine(0)||this._label.isLine(1),w=!this._label.isArea(0)||this._label.allPositionsEqual(0,ie.EXTERIOR),A=!this._label.isArea(1)||this._label.allPositionsEqual(1,ie.EXTERIOR);return b&&w&&A},f.prototype.setEdgeRing=function(b){this._edgeRing=b},f.prototype.getMinEdgeRing=function(){return this._minEdgeRing},f.prototype.getDepthDelta=function(){var b=this._edge.getDepthDelta();return this._isForward||(b=-b),b},f.prototype.setInResult=function(b){this._isInResult=b},f.prototype.getSym=function(){return this._sym},f.prototype.isForward=function(){return this._isForward},f.prototype.getEdge=function(){return this._edge},f.prototype.printEdge=function(b){this.print(b),b.print(" "),this._isForward?this._edge.print(b):this._edge.printReverse(b)},f.prototype.setSym=function(b){this._sym=b},f.prototype.setVisitedEdge=function(b){this.setVisited(b),this._sym.setVisited(b)},f.prototype.setEdgeDepths=function(b,w){var A=this.getEdge().getDepthDelta();this._isForward||(A=-A);var B=1;b===xt.LEFT&&(B=-1);var U=xt.opposite(b),xe=w+A*B;this.setDepth(b,w),this.setDepth(U,xe)},f.prototype.getEdgeRing=function(){return this._edgeRing},f.prototype.isInResult=function(){return this._isInResult},f.prototype.setNext=function(b){this._next=b},f.prototype.isVisited=function(){return this._isVisited},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.depthFactor=function(b,w){return b===ie.EXTERIOR&&w===ie.INTERIOR?1:b===ie.INTERIOR&&w===ie.EXTERIOR?-1:0},f}(Oa),Yl=function(){};Yl.prototype.createNode=function(c){return new Au(c,null)},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var qs=function(){this._edges=new at,this._nodes=null,this._edgeEndList=new at,0===arguments.length?this._nodes=new Qs(new Yl):1===arguments.length&&(this._nodes=new Qs(arguments[0]))};qs.prototype.printEdges=function(c){c.println("Edges:");for(var f=0;f<this._edges.size();f++){c.println("edge "+f+":");var b=this._edges.get(f);b.print(c),b.eiList.print(c)}},qs.prototype.find=function(c){return this._nodes.find(c)},qs.prototype.addNode=function(){return arguments[0]instanceof Au||arguments[0]instanceof Q?this._nodes.addNode(arguments[0]):void 0},qs.prototype.getNodeIterator=function(){return this._nodes.iterator()},qs.prototype.linkResultDirectedEdges=function(){for(var c=this._nodes.iterator();c.hasNext();)c.next().getEdges().linkResultDirectedEdges()},qs.prototype.debugPrintln=function(c){Vt.out.println(c)},qs.prototype.isBoundaryNode=function(c,f){var b=this._nodes.find(f);if(null===b)return!1;var w=b.getLabel();return null!==w&&w.getLocation(c)===ie.BOUNDARY},qs.prototype.linkAllDirectedEdges=function(){for(var c=this._nodes.iterator();c.hasNext();)c.next().getEdges().linkAllDirectedEdges()},qs.prototype.matchInSameDirection=function(c,f,b,w){return!!c.equals(b)&&yn.computeOrientation(c,f,w)===yn.COLLINEAR&&kr.quadrant(c,f)===kr.quadrant(b,w)},qs.prototype.getEdgeEnds=function(){return this._edgeEndList},qs.prototype.debugPrint=function(c){Vt.out.print(c)},qs.prototype.getEdgeIterator=function(){return this._edges.iterator()},qs.prototype.findEdgeInSameDirection=function(c,f){for(var b=0;b<this._edges.size();b++){var w=this._edges.get(b),A=w.getCoordinates();if(this.matchInSameDirection(c,f,A[0],A[1])||this.matchInSameDirection(c,f,A[A.length-1],A[A.length-2]))return w}return null},qs.prototype.insertEdge=function(c){this._edges.add(c)},qs.prototype.findEdgeEnd=function(c){for(var f=this.getEdgeEnds().iterator();f.hasNext();){var b=f.next();if(b.getEdge()===c)return b}return null},qs.prototype.addEdges=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next();this._edges.add(b);var w=new Ta(b,!0),A=new Ta(b,!1);w.setSym(A),A.setSym(w),this.add(w),this.add(A)}},qs.prototype.add=function(c){this._nodes.add(c),this._edgeEndList.add(c)},qs.prototype.getNodes=function(){return this._nodes.values()},qs.prototype.findEdge=function(c,f){for(var b=0;b<this._edges.size();b++){var w=this._edges.get(b),A=w.getCoordinates();if(c.equals(A[0])&&f.equals(A[1]))return w}return null},qs.prototype.interfaces_=function(){return[]},qs.prototype.getClass=function(){return qs},qs.linkResultDirectedEdges=function(c){for(var f=c.iterator();f.hasNext();)f.next().getEdges().linkResultDirectedEdges()};var Ka=function(){this._geometryFactory=null,this._shellList=new at,this._geometryFactory=arguments[0]};Ka.prototype.sortShellsAndHoles=function(c,f,b){for(var w=c.iterator();w.hasNext();){var A=w.next();A.isHole()?b.add(A):f.add(A)}},Ka.prototype.computePolygons=function(c){for(var f=new at,b=c.iterator();b.hasNext();){var w=b.next().toPolygon(this._geometryFactory);f.add(w)}return f},Ka.prototype.placeFreeHoles=function(c,f){for(var b=f.iterator();b.hasNext();){var w=b.next();if(null===w.getShell()){var A=this.findEdgeRingContaining(w,c);if(null===A)throw new ur("unable to assign hole to a shell",w.getCoordinate(0));w.setShell(A)}}},Ka.prototype.buildMinimalEdgeRings=function(c,f,b){for(var w=new at,A=c.iterator();A.hasNext();){var B=A.next();if(B.getMaxNodeDegree()>2){B.linkDirectedEdgesForMinimalEdgeRings();var U=B.buildMinimalRings(),xe=this.findShell(U);null!==xe?(this.placePolygonHoles(xe,U),f.add(xe)):b.addAll(U)}else w.add(B)}return w},Ka.prototype.containsPoint=function(c){for(var f=this._shellList.iterator();f.hasNext();)if(f.next().containsPoint(c))return!0;return!1},Ka.prototype.buildMaximalEdgeRings=function(c){for(var f=new at,b=c.iterator();b.hasNext();){var w=b.next();if(w.isInResult()&&w.getLabel().isArea()&&null===w.getEdgeRing()){var A=new As(w,this._geometryFactory);f.add(A),A.setInResult()}}return f},Ka.prototype.placePolygonHoles=function(c,f){for(var b=f.iterator();b.hasNext();){var w=b.next();w.isHole()&&w.setShell(c)}},Ka.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ka.prototype.findEdgeRingContaining=function(c,f){for(var b=c.getLinearRing(),w=b.getEnvelopeInternal(),A=b.getCoordinateN(0),B=null,U=null,xe=f.iterator();xe.hasNext();){var st=xe.next(),$t=st.getLinearRing(),gn=$t.getEnvelopeInternal();null!==B&&(U=B.getLinearRing().getEnvelopeInternal());var Rn=!1;gn.contains(w)&&yn.isPointInRing(A,$t.getCoordinates())&&(Rn=!0),Rn&&(null===B||U.contains(gn))&&(B=st)}return B},Ka.prototype.findShell=function(c){for(var f=0,b=null,w=c.iterator();w.hasNext();){var A=w.next();A.isHole()||(b=A,f++)}return Ee.isTrue(f<=1,"found two shells in MinimalEdgeRing list"),b},Ka.prototype.add=function(){if(1===arguments.length){var c=arguments[0];this.add(c.getEdgeEnds(),c.getNodes())}else if(2===arguments.length){var f=arguments[0];qs.linkResultDirectedEdges(arguments[1]);var w=this.buildMaximalEdgeRings(f),A=new at,B=this.buildMinimalEdgeRings(w,this._shellList,A);this.sortShellsAndHoles(B,this._shellList,A),this.placeFreeHoles(this._shellList,A)}},Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka};var Qa=function(){};Qa.prototype.getBounds=function(){},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa};var Sc=function(){this._bounds=null,this._item=null;var f=arguments[1];this._bounds=arguments[0],this._item=f};Sc.prototype.getItem=function(){return this._item},Sc.prototype.getBounds=function(){return this._bounds},Sc.prototype.interfaces_=function(){return[Qa,ue]},Sc.prototype.getClass=function(){return Sc};var cu=function(){this._size=null,this._items=null,this._size=0,this._items=new at,this._items.add(null)};cu.prototype.poll=function(){if(this.isEmpty())return null;var c=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),c},cu.prototype.size=function(){return this._size},cu.prototype.reorder=function(c){for(var f=null,b=this._items.get(c);2*c<=this._size&&((f=2*c)!==this._size&&this._items.get(f+1).compareTo(this._items.get(f))<0&&f++,this._items.get(f).compareTo(b)<0);c=f)this._items.set(c,this._items.get(f));this._items.set(c,b)},cu.prototype.clear=function(){this._size=0,this._items.clear()},cu.prototype.isEmpty=function(){return 0===this._size},cu.prototype.add=function(c){this._items.add(null),this._size+=1;var f=this._size;for(this._items.set(0,c);c.compareTo(this._items.get(Math.trunc(f/2)))<0;f/=2)this._items.set(f,this._items.get(Math.trunc(f/2)));this._items.set(f,c)},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var Zl=function(){};Zl.prototype.visitItem=function(c){},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Ic=function(){};Ic.prototype.insert=function(c,f){},Ic.prototype.remove=function(c,f){},Ic.prototype.query=function(){},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic};var fa=function(){this._childBoundables=new at,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},Uc={serialVersionUID:{configurable:!0}};fa.prototype.getLevel=function(){return this._level},fa.prototype.size=function(){return this._childBoundables.size()},fa.prototype.getChildBoundables=function(){return this._childBoundables},fa.prototype.addChildBoundable=function(c){Ee.isTrue(null===this._bounds),this._childBoundables.add(c)},fa.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},fa.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},fa.prototype.interfaces_=function(){return[Qa,ue]},fa.prototype.getClass=function(){return fa},Uc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(fa,Uc);var br=function(){};br.reverseOrder=function(){return{compare:function(c,f){return f.compareTo(c)}}},br.min=function(c){return br.sort(c),c.get(0)},br.sort=function(c,f){var b=c.toArray();f?vt.sort(b,f):vt.sort(b);for(var w=c.iterator(),A=0,B=b.length;A<B;A++)w.next(),w.set(b[A])},br.singletonList=function(c){var f=new at;return f.add(c),f};var Ws=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var f=arguments[1],b=arguments[2];this._boundable1=arguments[0],this._boundable2=f,this._itemDistance=b,this._distance=this.distance()};Ws.prototype.expandToQueue=function(c,f){var b=Ws.isComposite(this._boundable1),w=Ws.isComposite(this._boundable2);if(b&&w)return Ws.area(this._boundable1)>Ws.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,c,f),null):(this.expand(this._boundable2,this._boundable1,c,f),null);if(b)return this.expand(this._boundable1,this._boundable2,c,f),null;if(w)return this.expand(this._boundable2,this._boundable1,c,f),null;throw new Z("neither boundable is composite")},Ws.prototype.isLeaves=function(){return!(Ws.isComposite(this._boundable1)||Ws.isComposite(this._boundable2))},Ws.prototype.compareTo=function(c){return this._distance<c._distance?-1:this._distance>c._distance?1:0},Ws.prototype.expand=function(c,f,b,w){for(var A=c.getChildBoundables().iterator();A.hasNext();){var B=A.next(),U=new Ws(B,f,this._itemDistance);U.getDistance()<w&&b.add(U)}},Ws.prototype.getBoundable=function(c){return 0===c?this._boundable1:this._boundable2},Ws.prototype.getDistance=function(){return this._distance},Ws.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ws.prototype.interfaces_=function(){return[ne]},Ws.prototype.getClass=function(){return Ws},Ws.area=function(c){return c.getBounds().getArea()},Ws.isComposite=function(c){return c instanceof fa};var Fs=function c(){if(this._root=null,this._built=!1,this._itemBoundables=new at,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=c.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var b=arguments[0];Ee.isTrue(b>1,"Node capacity must be greater than 1"),this._nodeCapacity=b}},Af={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Fs.prototype.getNodeCapacity=function(){return this._nodeCapacity},Fs.prototype.lastNode=function(c){return c.get(c.size()-1)},Fs.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var c=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var b=f.next();b instanceof fa?c+=this.size(b):b instanceof Sc&&(c+=1)}return c}},Fs.prototype.removeItem=function(c,f){for(var b=null,w=c.getChildBoundables().iterator();w.hasNext();){var A=w.next();A instanceof Sc&&A.getItem()===f&&(b=A)}return null!==b&&(c.getChildBoundables().remove(b),!0)},Fs.prototype.itemsTree=function(){if(0===arguments.length){this.build();var c=this.itemsTree(this._root);return null===c?new at:c}if(1===arguments.length){for(var f=arguments[0],b=new at,w=f.getChildBoundables().iterator();w.hasNext();){var A=w.next();if(A instanceof fa){var B=this.itemsTree(A);null!==B&&b.add(B)}else A instanceof Sc?b.add(A.getItem()):Ee.shouldNeverReachHere()}return b.size()<=0?null:b}},Fs.prototype.insert=function(c,f){Ee.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Sc(c,f))},Fs.prototype.boundablesAtLevel=function(){if(1===arguments.length){var c=arguments[0],f=new at;return this.boundablesAtLevel(c,this._root,f),f}if(3===arguments.length){var b=arguments[0],w=arguments[1],A=arguments[2];if(Ee.isTrue(b>-2),w.getLevel()===b)return A.add(w),null;for(var B=w.getChildBoundables().iterator();B.hasNext();){var U=B.next();U instanceof fa?this.boundablesAtLevel(b,U,A):(Ee.isTrue(U instanceof Sc),-1===b&&A.add(U))}return null}},Fs.prototype.query=function(){if(1===arguments.length){var c=arguments[0];this.build();var f=new at;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.query(c,this._root,f),f}if(2===arguments.length){var b=arguments[0],w=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),b)&&this.query(b,this._root,w)}else if(3===arguments.length)if(Se(arguments[2],Zl)&&arguments[0]instanceof Object&&arguments[1]instanceof fa)for(var A=arguments[0],U=arguments[2],xe=arguments[1].getChildBoundables(),st=0;st<xe.size();st++){var $t=xe.get(st);this.getIntersectsOp().intersects($t.getBounds(),A)&&($t instanceof fa?this.query(A,$t,U):$t instanceof Sc?U.visitItem($t.getItem()):Ee.shouldNeverReachHere())}else if(Se(arguments[2],Ct)&&arguments[0]instanceof Object&&arguments[1]instanceof fa)for(var gn=arguments[0],Ai=arguments[2],Si=arguments[1].getChildBoundables(),Vi=0;Vi<Si.size();Vi++){var fr=Si.get(Vi);this.getIntersectsOp().intersects(fr.getBounds(),gn)&&(fr instanceof fa?this.query(gn,fr,Ai):fr instanceof Sc?Ai.add(fr.getItem()):Ee.shouldNeverReachHere())}},Fs.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Fs.prototype.getRoot=function(){return this.build(),this._root},Fs.prototype.remove=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.remove(c,this._root,f)}if(3===arguments.length){var b=arguments[0],w=arguments[1],A=arguments[2],B=this.removeItem(w,A);if(B)return!0;for(var U=null,xe=w.getChildBoundables().iterator();xe.hasNext();){var st=xe.next();if(this.getIntersectsOp().intersects(st.getBounds(),b)&&st instanceof fa&&(B=this.remove(b,st,A))){U=st;break}}return null!==U&&U.getChildBoundables().isEmpty()&&w.getChildBoundables().remove(U),B}},Fs.prototype.createHigherLevels=function(c,f){Ee.isTrue(!c.isEmpty());var b=this.createParentBoundables(c,f+1);return 1===b.size()?b.get(0):this.createHigherLevels(b,f+1)},Fs.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var c=0,f=arguments[0].getChildBoundables().iterator();f.hasNext();){var b=f.next();if(b instanceof fa){var w=this.depth(b);w>c&&(c=w)}}return c+1}},Fs.prototype.createParentBoundables=function(c,f){Ee.isTrue(!c.isEmpty());var b=new at;b.add(this.createNode(f));var w=new at(c);br.sort(w,this.getComparator());for(var A=w.iterator();A.hasNext();){var B=A.next();this.lastNode(b).getChildBoundables().size()===this.getNodeCapacity()&&b.add(this.createNode(f)),this.lastNode(b).addChildBoundable(B)}return b},Fs.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Fs.prototype.interfaces_=function(){return[ue]},Fs.prototype.getClass=function(){return Fs},Fs.compareDoubles=function(c,f){return c>f?1:c<f?-1:0},Af.IntersectsOp.get=function(){return mi},Af.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Af.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Fs,Af);var mi=function(){},jc=function(){};jc.prototype.distance=function(c,f){},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var po=function(c){function f(w){c.call(this,w=w||f.DEFAULT_NODE_CAPACITY)}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return f.prototype.createParentBoundablesFromVerticalSlices=function(w,A){Ee.isTrue(w.length>0);for(var B=new at,U=0;U<w.length;U++)B.addAll(this.createParentBoundablesFromVerticalSlice(w[U],A));return B},f.prototype.createNode=function(w){return new Gc(w)},f.prototype.size=function(){return 0===arguments.length?c.prototype.size.call(this):c.prototype.size.apply(this,arguments)},f.prototype.insert=function(){if(2!==arguments.length)return c.prototype.insert.apply(this,arguments);var w=arguments[0],A=arguments[1];if(w.isNull())return null;c.prototype.insert.call(this,w,A)},f.prototype.getIntersectsOp=function(){return f.intersectsOp},f.prototype.verticalSlices=function(w,A){for(var B=Math.trunc(Math.ceil(w.size()/A)),U=new Array(A).fill(null),xe=w.iterator(),st=0;st<A;st++){U[st]=new at;for(var $t=0;xe.hasNext()&&$t<B;){var gn=xe.next();U[st].add(gn),$t++}}return U},f.prototype.query=function(){if(1===arguments.length)return c.prototype.query.call(this,arguments[0]);2===arguments.length?c.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(Se(arguments[2],Zl)&&arguments[0]instanceof Object&&arguments[1]instanceof fa||Se(arguments[2],Ct)&&arguments[0]instanceof Object&&arguments[1]instanceof fa)&&c.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},f.prototype.getComparator=function(){return f.yComparator},f.prototype.createParentBoundablesFromVerticalSlice=function(w,A){return c.prototype.createParentBoundables.call(this,w,A)},f.prototype.remove=function(){return 2===arguments.length?c.prototype.remove.call(this,arguments[0],arguments[1]):c.prototype.remove.apply(this,arguments)},f.prototype.depth=function(){return 0===arguments.length?c.prototype.depth.call(this):c.prototype.depth.apply(this,arguments)},f.prototype.createParentBoundables=function(w,A){Ee.isTrue(!w.isEmpty());var B=Math.trunc(Math.ceil(w.size()/this.getNodeCapacity())),U=new at(w);br.sort(U,f.xComparator);var xe=this.verticalSlices(U,Math.trunc(Math.ceil(Math.sqrt(B))));return this.createParentBoundablesFromVerticalSlices(xe,A)},f.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Se(arguments[0],jc)){var w=arguments[0],A=new Ws(this.getRoot(),this.getRoot(),w);return this.nearestNeighbour(A)}if(arguments[0]instanceof Ws)return this.nearestNeighbour(arguments[0],ee.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof f&&Se(arguments[1],jc)){var U=arguments[0],xe=arguments[1],st=new Ws(this.getRoot(),U.getRoot(),xe);return this.nearestNeighbour(st)}if(arguments[0]instanceof Ws&&"number"==typeof arguments[1]){var $t=arguments[0],gn=arguments[1],Rn=null,Ai=new cu;for(Ai.add($t);!Ai.isEmpty()&&gn>0;){var Si=Ai.poll(),Vi=Si.getDistance();if(Vi>=gn)break;Si.isLeaves()?(gn=Vi,Rn=Si):Si.expandToQueue(Ai,gn)}return[Rn.getBoundable(0).getItem(),Rn.getBoundable(1).getItem()]}}else if(3===arguments.length){var wi=arguments[2],El=new Sc(arguments[0],arguments[1]),_u=new Ws(this.getRoot(),El,wi);return this.nearestNeighbour(_u)[0]}},f.prototype.interfaces_=function(){return[Ic,ue]},f.prototype.getClass=function(){return f},f.centreX=function(w){return f.avg(w.getMinX(),w.getMaxX())},f.avg=function(w,A){return(w+A)/2},f.centreY=function(w){return f.avg(w.getMinY(),w.getMaxY())},b.STRtreeNode.get=function(){return Gc},b.serialVersionUID.get=function(){return 0x39920f7d5f261e0},b.xComparator.get=function(){return{interfaces_:function(){return[ye]},compare:function(w,A){return c.compareDoubles(f.centreX(w.getBounds()),f.centreX(A.getBounds()))}}},b.yComparator.get=function(){return{interfaces_:function(){return[ye]},compare:function(w,A){return c.compareDoubles(f.centreY(w.getBounds()),f.centreY(A.getBounds()))}}},b.intersectsOp.get=function(){return{interfaces_:function(){return[c.IntersectsOp]},intersects:function(w,A){return w.intersects(A)}}},b.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(f,b),f}(Fs),Gc=function(c){function f(){c.call(this,arguments[0])}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.computeBounds=function(){for(var b=null,w=this.getChildBoundables().iterator();w.hasNext();){var A=w.next();null===b?b=new Tn(A.getBounds()):b.expandToInclude(A.getBounds())}return b},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(fa),ll=function(){};ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll},ll.relativeSign=function(c,f){return c<f?-1:c>f?1:0},ll.compare=function(c,f,b){if(f.equals2D(b))return 0;var w=ll.relativeSign(f.x,b.x),A=ll.relativeSign(f.y,b.y);switch(c){case 0:return ll.compareValue(w,A);case 1:return ll.compareValue(A,w);case 2:return ll.compareValue(A,-w);case 3:return ll.compareValue(-w,A);case 4:return ll.compareValue(-w,-A);case 5:return ll.compareValue(-A,-w);case 6:return ll.compareValue(-A,w);case 7:return ll.compareValue(w,-A)}return Ee.shouldNeverReachHere("invalid octant value"),0},ll.compareValue=function(c,f){return c<0?-1:c>0?1:f<0?-1:f>0?1:0};var dc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var c=arguments[0],f=arguments[1],b=arguments[2],w=arguments[3];this._segString=c,this.coord=new Q(f),this.segmentIndex=b,this._segmentOctant=w,this._isInterior=!f.equals2D(c.getCoordinate(b))};dc.prototype.getCoordinate=function(){return this.coord},dc.prototype.print=function(c){c.print(this.coord),c.print(" seg # = "+this.segmentIndex)},dc.prototype.compareTo=function(c){var f=c;return this.segmentIndex<f.segmentIndex?-1:this.segmentIndex>f.segmentIndex?1:this.coord.equals2D(f.coord)?0:ll.compare(this._segmentOctant,this.coord,f.coord)},dc.prototype.isEndPoint=function(c){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===c},dc.prototype.isInterior=function(){return this._isInterior},dc.prototype.interfaces_=function(){return[ne]},dc.prototype.getClass=function(){return dc};var Xa=function(){this._nodeMap=new qe,this._edge=null,this._edge=arguments[0]};Xa.prototype.getSplitCoordinates=function(){var c=new Zt;this.addEndpoints();for(var f=this.iterator(),b=f.next();f.hasNext();){var w=f.next();this.addEdgeCoordinates(b,w,c),b=w}return c.toCoordinateArray()},Xa.prototype.addCollapsedNodes=function(){var c=new at;this.findCollapsesFromInsertedNodes(c),this.findCollapsesFromExistingVertices(c);for(var f=c.iterator();f.hasNext();){var b=f.next().intValue();this.add(this._edge.getCoordinate(b),b)}},Xa.prototype.print=function(c){c.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(c)},Xa.prototype.findCollapsesFromExistingVertices=function(c){for(var f=0;f<this._edge.size()-2;f++){var b=this._edge.getCoordinate(f),w=this._edge.getCoordinate(f+2);b.equals2D(w)&&c.add(new Ke(f+1))}},Xa.prototype.addEdgeCoordinates=function(c,f,b){var w=this._edge.getCoordinate(f.segmentIndex),A=f.isInterior()||!f.coord.equals2D(w);b.add(new Q(c.coord),!1);for(var B=c.segmentIndex+1;B<=f.segmentIndex;B++)b.add(this._edge.getCoordinate(B));A&&b.add(new Q(f.coord))},Xa.prototype.iterator=function(){return this._nodeMap.values().iterator()},Xa.prototype.addSplitEdges=function(c){this.addEndpoints(),this.addCollapsedNodes();for(var f=this.iterator(),b=f.next();f.hasNext();){var w=f.next(),A=this.createSplitEdge(b,w);c.add(A),b=w}},Xa.prototype.findCollapseIndex=function(c,f,b){if(!c.coord.equals2D(f.coord))return!1;var w=f.segmentIndex-c.segmentIndex;return f.isInterior()||w--,1===w&&(b[0]=c.segmentIndex+1,!0)},Xa.prototype.findCollapsesFromInsertedNodes=function(c){for(var f=new Array(1).fill(null),b=this.iterator(),w=b.next();b.hasNext();){var A=b.next();this.findCollapseIndex(w,A,f)&&c.add(new Ke(f[0])),w=A}},Xa.prototype.getEdge=function(){return this._edge},Xa.prototype.addEndpoints=function(){var c=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(c),c)},Xa.prototype.createSplitEdge=function(c,f){var b=f.segmentIndex-c.segmentIndex+2,w=this._edge.getCoordinate(f.segmentIndex),A=f.isInterior()||!f.coord.equals2D(w);A||b--;var B=new Array(b).fill(null),U=0;B[U++]=new Q(c.coord);for(var xe=c.segmentIndex+1;xe<=f.segmentIndex;xe++)B[U++]=this._edge.getCoordinate(xe);return A&&(B[U]=new Q(f.coord)),new Xs(B,this._edge.getData())},Xa.prototype.add=function(c,f){var b=new dc(this._edge,c,f,this._edge.getSegmentOctant(f)),w=this._nodeMap.get(b);return null!==w?(Ee.isTrue(w.coord.equals2D(c),"Found equal nodes with different coordinates"),w):(this._nodeMap.put(b,b),b)},Xa.prototype.checkSplitEdgesCorrectness=function(c){var f=this._edge.getCoordinates(),b=c.get(0).getCoordinate(0);if(!b.equals2D(f[0]))throw new Ae("bad split edge start point at "+b);var w=c.get(c.size()-1).getCoordinates(),A=w[w.length-1];if(!A.equals2D(f[f.length-1]))throw new Ae("bad split edge end point at "+A)},Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa};var Mu=function(){};Mu.prototype.interfaces_=function(){return[]},Mu.prototype.getClass=function(){return Mu},Mu.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var c=arguments[0],f=arguments[1];if(0===c&&0===f)throw new Z("Cannot compute the octant for point ( "+c+", "+f+" )");var b=Math.abs(c),w=Math.abs(f);return c>=0?f>=0?b>=w?0:1:b>=w?7:6:f>=0?b>=w?3:2:b>=w?4:5}if(arguments[0]instanceof Q&&arguments[1]instanceof Q){var A=arguments[0],B=arguments[1],U=B.x-A.x,xe=B.y-A.y;if(0===U&&0===xe)throw new Z("Cannot compute the octant for two identical points "+A);return Mu.octant(U,xe)}};var Bl=function(){};Bl.prototype.getCoordinates=function(){},Bl.prototype.size=function(){},Bl.prototype.getCoordinate=function(c){},Bl.prototype.isClosed=function(){},Bl.prototype.setData=function(c){},Bl.prototype.getData=function(){},Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl};var ud=function(){};ud.prototype.addIntersection=function(c,f){},ud.prototype.interfaces_=function(){return[Bl]},ud.prototype.getClass=function(){return ud};var Xs=function(){this._nodeList=new Xa(this),this._pts=null,this._data=null;var f=arguments[1];this._pts=arguments[0],this._data=f};Xs.prototype.getCoordinates=function(){return this._pts},Xs.prototype.size=function(){return this._pts.length},Xs.prototype.getCoordinate=function(c){return this._pts[c]},Xs.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Xs.prototype.getSegmentOctant=function(c){return c===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(c),this.getCoordinate(c+1))},Xs.prototype.setData=function(c){this._data=c},Xs.prototype.safeOctant=function(c,f){return c.equals2D(f)?0:Mu.octant(c,f)},Xs.prototype.getData=function(){return this._data},Xs.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var w=arguments[1],B=new Q(arguments[0].getIntersection(arguments[3]));this.addIntersection(B,w)}},Xs.prototype.toString=function(){return At.toLineString(new ko(this._pts))},Xs.prototype.getNodeList=function(){return this._nodeList},Xs.prototype.addIntersectionNode=function(c,f){var b=f,w=b+1;return w<this._pts.length&&c.equals2D(this._pts[w])&&(b=w),this._nodeList.add(c,b)},Xs.prototype.addIntersections=function(c,f,b){for(var w=0;w<c.getIntersectionNum();w++)this.addIntersection(c,f,b,w)},Xs.prototype.interfaces_=function(){return[ud]},Xs.prototype.getClass=function(){return Xs},Xs.getNodedSubstrings=function(){if(1===arguments.length){var c=arguments[0],f=new at;return Xs.getNodedSubstrings(c,f),f}if(2===arguments.length)for(var w=arguments[1],A=arguments[0].iterator();A.hasNext();)A.next().getNodeList().addSplitEdges(w)};var ir=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Q,this.p1=new Q;else if(1===arguments.length){var c=arguments[0];this.p0=new Q(c.p0),this.p1=new Q(c.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var w=arguments[2],A=arguments[3];this.p0=new Q(arguments[0],arguments[1]),this.p1=new Q(w,A)}},er={serialVersionUID:{configurable:!0}};ir.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ir.prototype.orientationIndex=function(){if(arguments[0]instanceof ir){var c=arguments[0],f=yn.orientationIndex(this.p0,this.p1,c.p0),b=yn.orientationIndex(this.p0,this.p1,c.p1);return f>=0&&b>=0||f<=0&&b<=0?Math.max(f,b):0}if(arguments[0]instanceof Q)return yn.orientationIndex(this.p0,this.p1,arguments[0])},ir.prototype.toGeometry=function(c){return c.createLineString([this.p0,this.p1])},ir.prototype.isVertical=function(){return this.p0.x===this.p1.x},ir.prototype.equals=function(c){if(!(c instanceof ir))return!1;var f=c;return this.p0.equals(f.p0)&&this.p1.equals(f.p1)},ir.prototype.intersection=function(c){var f=new ln;return f.computeIntersection(this.p0,this.p1,c.p0,c.p1),f.hasIntersection()?f.getIntersection(0):null},ir.prototype.project=function(){if(arguments[0]instanceof Q){var c=arguments[0];if(c.equals(this.p0)||c.equals(this.p1))return new Q(c);var f=this.projectionFactor(c),b=new Q;return b.x=this.p0.x+f*(this.p1.x-this.p0.x),b.y=this.p0.y+f*(this.p1.y-this.p0.y),b}if(arguments[0]instanceof ir){var w=arguments[0],A=this.projectionFactor(w.p0),B=this.projectionFactor(w.p1);if(A>=1&&B>=1||A<=0&&B<=0)return null;var U=this.project(w.p0);A<0&&(U=this.p0),A>1&&(U=this.p1);var xe=this.project(w.p1);return B<0&&(xe=this.p0),B>1&&(xe=this.p1),new ir(U,xe)}},ir.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ir.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ir.prototype.getCoordinate=function(c){return 0===c?this.p0:this.p1},ir.prototype.distancePerpendicular=function(c){return yn.distancePointLinePerpendicular(c,this.p0,this.p1)},ir.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ir.prototype.midPoint=function(){return ir.midPoint(this.p0,this.p1)},ir.prototype.projectionFactor=function(c){if(c.equals(this.p0))return 0;if(c.equals(this.p1))return 1;var f=this.p1.x-this.p0.x,b=this.p1.y-this.p0.y,w=f*f+b*b;return w<=0?ee.NaN:((c.x-this.p0.x)*f+(c.y-this.p0.y)*b)/w},ir.prototype.closestPoints=function(c){var f=this.intersection(c);if(null!==f)return[f,f];var b=new Array(2).fill(null),w=ee.MAX_VALUE,A=null,B=this.closestPoint(c.p0);w=B.distance(c.p0),b[0]=B,b[1]=c.p0;var U=this.closestPoint(c.p1);(A=U.distance(c.p1))<w&&(w=A,b[0]=U,b[1]=c.p1);var xe=c.closestPoint(this.p0);(A=xe.distance(this.p0))<w&&(w=A,b[0]=this.p0,b[1]=xe);var st=c.closestPoint(this.p1);return(A=st.distance(this.p1))<w&&(w=A,b[0]=this.p1,b[1]=st),b},ir.prototype.closestPoint=function(c){var f=this.projectionFactor(c);return f>0&&f<1?this.project(c):this.p0.distance(c)<this.p1.distance(c)?this.p0:this.p1},ir.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ir.prototype.getLength=function(){return this.p0.distance(this.p1)},ir.prototype.compareTo=function(c){var f=c,b=this.p0.compareTo(f.p0);return 0!==b?b:this.p1.compareTo(f.p1)},ir.prototype.reverse=function(){var c=this.p0;this.p0=this.p1,this.p1=c},ir.prototype.equalsTopo=function(c){return this.p0.equals(c.p0)&&(this.p1.equals(c.p1)||this.p0.equals(c.p1))&&this.p1.equals(c.p0)},ir.prototype.lineIntersection=function(c){try{return vi.intersection(this.p0,this.p1,c.p0,c.p1)}catch(f){if(!(f instanceof ei))throw f}return null},ir.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ir.prototype.pointAlongOffset=function(c,f){var b=this.p0.x+c*(this.p1.x-this.p0.x),w=this.p0.y+c*(this.p1.y-this.p0.y),A=this.p1.x-this.p0.x,B=this.p1.y-this.p0.y,U=Math.sqrt(A*A+B*B),xe=0,st=0;if(0!==f){if(U<=0)throw new Error("Cannot compute offset from zero-length line segment");xe=f*A/U,st=f*B/U}return new Q(b-st,w+xe)},ir.prototype.setCoordinates=function(){if(1===arguments.length){var c=arguments[0];this.setCoordinates(c.p0,c.p1)}else if(2===arguments.length){var f=arguments[0],b=arguments[1];this.p0.x=f.x,this.p0.y=f.y,this.p1.x=b.x,this.p1.y=b.y}},ir.prototype.segmentFraction=function(c){var f=this.projectionFactor(c);return f<0?f=0:(f>1||ee.isNaN(f))&&(f=1),f},ir.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ir.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ir.prototype.distance=function(){if(arguments[0]instanceof ir){var c=arguments[0];return yn.distanceLineLine(this.p0,this.p1,c.p0,c.p1)}if(arguments[0]instanceof Q)return yn.distancePointLine(arguments[0],this.p0,this.p1)},ir.prototype.pointAlong=function(c){var f=new Q;return f.x=this.p0.x+c*(this.p1.x-this.p0.x),f.y=this.p0.y+c*(this.p1.y-this.p0.y),f},ir.prototype.hashCode=function(){var c=ee.doubleToLongBits(this.p0.x);c^=31*ee.doubleToLongBits(this.p0.y);var f=Math.trunc(c)^Math.trunc(c>>32),b=ee.doubleToLongBits(this.p1.x);return b^=31*ee.doubleToLongBits(this.p1.y),f^Math.trunc(b)^Math.trunc(b>>32)},ir.prototype.interfaces_=function(){return[ne,ue]},ir.prototype.getClass=function(){return ir},ir.midPoint=function(c,f){return new Q((c.x+f.x)/2,(c.y+f.y)/2)},er.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ir,er);var hh=function(){this.tempEnv1=new Tn,this.tempEnv2=new Tn,this._overlapSeg1=new ir,this._overlapSeg2=new ir};hh.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var b=arguments[2],w=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),b.getLineSegment(w,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var bl=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var f=arguments[1],b=arguments[2],w=arguments[3];this._pts=arguments[0],this._start=f,this._end=b,this._context=w};bl.prototype.getLineSegment=function(c,f){f.p0=this._pts[c],f.p1=this._pts[c+1]},bl.prototype.computeSelect=function(c,f,b,w){if(w.tempEnv1.init(this._pts[f],this._pts[b]),b-f==1)return w.select(this,f),null;if(!c.intersects(w.tempEnv1))return null;var U=Math.trunc((f+b)/2);f<U&&this.computeSelect(c,f,U,w),U<b&&this.computeSelect(c,U,b,w)},bl.prototype.getCoordinates=function(){for(var c=new Array(this._end-this._start+1).fill(null),f=0,b=this._start;b<=this._end;b++)c[f++]=this._pts[b];return c},bl.prototype.computeOverlaps=function(c,f){this.computeOverlapsInternal(this._start,this._end,c,c._start,c._end,f)},bl.prototype.setId=function(c){this._id=c},bl.prototype.select=function(c,f){this.computeSelect(c,this._start,this._end,f)},bl.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Tn(this._pts[this._start],this._pts[this._end])),this._env},bl.prototype.getEndIndex=function(){return this._end},bl.prototype.getStartIndex=function(){return this._start},bl.prototype.getContext=function(){return this._context},bl.prototype.getId=function(){return this._id},bl.prototype.computeOverlapsInternal=function(c,f,b,w,A,B){var U=this._pts[c],xe=this._pts[f],st=b._pts[w],$t=b._pts[A];if(f-c==1&&A-w==1)return B.overlap(this,c,b,w),null;if(B.tempEnv1.init(U,xe),B.tempEnv2.init(st,$t),!B.tempEnv1.intersects(B.tempEnv2))return null;var gn=Math.trunc((c+f)/2),Rn=Math.trunc((w+A)/2);c<gn&&(w<Rn&&this.computeOverlapsInternal(c,gn,b,w,Rn,B),Rn<A&&this.computeOverlapsInternal(c,gn,b,Rn,A,B)),gn<f&&(w<Rn&&this.computeOverlapsInternal(gn,f,b,w,Rn,B),Rn<A&&this.computeOverlapsInternal(gn,f,b,Rn,A,B))},bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl};var ia=function(){};ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia},ia.getChainStartIndices=function(c){var f=0,b=new at;b.add(new Ke(f));do{var w=ia.findChainEnd(c,f);b.add(new Ke(w)),f=w}while(f<c.length-1);return ia.toIntArray(b)},ia.findChainEnd=function(c,f){for(var b=f;b<c.length-1&&c[b].equals2D(c[b+1]);)b++;if(b>=c.length-1)return c.length-1;for(var w=kr.quadrant(c[b],c[b+1]),A=f+1;A<c.length&&(c[A-1].equals2D(c[A])||kr.quadrant(c[A-1],c[A])===w);)A++;return A-1},ia.getChains=function(){if(1===arguments.length)return ia.getChains(arguments[0],null);if(2===arguments.length){for(var f=arguments[0],b=arguments[1],w=new at,A=ia.getChainStartIndices(f),B=0;B<A.length-1;B++){var U=new bl(f,A[B],A[B+1],b);w.add(U)}return w}},ia.toIntArray=function(c){for(var f=new Array(c.size()).fill(null),b=0;b<f.length;b++)f[b]=c.get(b).intValue();return f};var ku=function(){};ku.prototype.computeNodes=function(c){},ku.prototype.getNodedSubstrings=function(){},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku};var Mf=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};Mf.prototype.setSegmentIntersector=function(c){this._segInt=c},Mf.prototype.interfaces_=function(){return[ku]},Mf.prototype.getClass=function(){return Mf};var Es=function(c){function f(w){w?c.call(this,w):c.call(this),this._monoChains=new at,this._index=new po,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f;var b={SegmentOverlapAction:{configurable:!0}};return f.prototype.getMonotoneChains=function(){return this._monoChains},f.prototype.getNodedSubstrings=function(){return Xs.getNodedSubstrings(this._nodedSegStrings)},f.prototype.getIndex=function(){return this._index},f.prototype.add=function(w){for(var A=ia.getChains(w.getCoordinates(),w).iterator();A.hasNext();){var B=A.next();B.setId(this._idCounter++),this._index.insert(B.getEnvelope(),B),this._monoChains.add(B)}},f.prototype.computeNodes=function(w){this._nodedSegStrings=w;for(var A=w.iterator();A.hasNext();)this.add(A.next());this.intersectChains()},f.prototype.intersectChains=function(){for(var w=new Hh(this._segInt),A=this._monoChains.iterator();A.hasNext();)for(var B=A.next(),U=this._index.query(B.getEnvelope()).iterator();U.hasNext();){var xe=U.next();if(xe.getId()>B.getId()&&(B.computeOverlaps(xe,w),this._nOverlaps++),this._segInt.isDone())return null}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},b.SegmentOverlapAction.get=function(){return Hh},Object.defineProperties(f,b),f}(Mf),Hh=function(c){function f(){c.call(this),this._si=null,this._si=arguments[0]}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.overlap=function(){if(4!==arguments.length)return c.prototype.overlap.apply(this,arguments);var w=arguments[1],A=arguments[2],B=arguments[3],U=arguments[0].getContext(),xe=A.getContext();this._si.processIntersections(U,w,xe,B)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(hh),xo=function c(){if(this._quadrantSegments=c.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=c.CAP_ROUND,this._joinStyle=c.JOIN_ROUND,this._mitreLimit=c.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=c.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var w=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(w)}else if(4===arguments.length){var B=arguments[1],U=arguments[2],xe=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(B),this.setJoinStyle(U),this.setMitreLimit(xe)}},zl={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};xo.prototype.getEndCapStyle=function(){return this._endCapStyle},xo.prototype.isSingleSided=function(){return this._isSingleSided},xo.prototype.setQuadrantSegments=function(c){this._quadrantSegments=c,0===this._quadrantSegments&&(this._joinStyle=xo.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=xo.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),c<=0&&(this._quadrantSegments=1),this._joinStyle!==xo.JOIN_ROUND&&(this._quadrantSegments=xo.DEFAULT_QUADRANT_SEGMENTS)},xo.prototype.getJoinStyle=function(){return this._joinStyle},xo.prototype.setJoinStyle=function(c){this._joinStyle=c},xo.prototype.setSimplifyFactor=function(c){this._simplifyFactor=c<0?0:c},xo.prototype.getSimplifyFactor=function(){return this._simplifyFactor},xo.prototype.getQuadrantSegments=function(){return this._quadrantSegments},xo.prototype.setEndCapStyle=function(c){this._endCapStyle=c},xo.prototype.getMitreLimit=function(){return this._mitreLimit},xo.prototype.setMitreLimit=function(c){this._mitreLimit=c},xo.prototype.setSingleSided=function(c){this._isSingleSided=c},xo.prototype.interfaces_=function(){return[]},xo.prototype.getClass=function(){return xo},xo.bufferDistanceError=function(c){var f=Math.PI/2/c;return 1-Math.cos(f/2)},zl.CAP_ROUND.get=function(){return 1},zl.CAP_FLAT.get=function(){return 2},zl.CAP_SQUARE.get=function(){return 3},zl.JOIN_ROUND.get=function(){return 1},zl.JOIN_MITRE.get=function(){return 2},zl.JOIN_BEVEL.get=function(){return 3},zl.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},zl.DEFAULT_MITRE_LIMIT.get=function(){return 5},zl.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(xo,zl);var Do=function(c){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=yn.COUNTERCLOCKWISE,this._inputLine=c||null},uu={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Do.prototype.isDeletable=function(c,f,b,w){var A=this._inputLine[c],B=this._inputLine[f],U=this._inputLine[b];return!!this.isConcave(A,B,U)&&!!this.isShallow(A,B,U,w)&&this.isShallowSampled(A,B,c,b,w)},Do.prototype.deleteShallowConcavities=function(){for(var c=1,f=this.findNextNonDeletedIndex(c),b=this.findNextNonDeletedIndex(f),w=!1;b<this._inputLine.length;){var A=!1;this.isDeletable(c,f,b,this._distanceTol)&&(this._isDeleted[f]=Do.DELETE,A=!0,w=!0),f=this.findNextNonDeletedIndex(c=A?b:f),b=this.findNextNonDeletedIndex(f)}return w},Do.prototype.isShallowConcavity=function(c,f,b,w){return yn.computeOrientation(c,f,b)===this._angleOrientation&&yn.distancePointLine(f,c,b)<w},Do.prototype.isShallowSampled=function(c,f,b,w,A){var B=Math.trunc((w-b)/Do.NUM_PTS_TO_CHECK);B<=0&&(B=1);for(var U=b;U<w;U+=B)if(!this.isShallow(c,f,this._inputLine[U],A))return!1;return!0},Do.prototype.isConcave=function(c,f,b){return yn.computeOrientation(c,f,b)===this._angleOrientation},Do.prototype.simplify=function(c){this._distanceTol=Math.abs(c),c<0&&(this._angleOrientation=yn.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var f=!1;do{f=this.deleteShallowConcavities()}while(f);return this.collapseLine()},Do.prototype.findNextNonDeletedIndex=function(c){for(var f=c+1;f<this._inputLine.length&&this._isDeleted[f]===Do.DELETE;)f++;return f},Do.prototype.isShallow=function(c,f,b,w){return yn.distancePointLine(f,c,b)<w},Do.prototype.collapseLine=function(){for(var c=new Zt,f=0;f<this._inputLine.length;f++)this._isDeleted[f]!==Do.DELETE&&c.add(this._inputLine[f]);return c.toCoordinateArray()},Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do},Do.simplify=function(c,f){return new Do(c).simplify(f)},uu.INIT.get=function(){return 0},uu.DELETE.get=function(){return 1},uu.KEEP.get=function(){return 1},uu.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Do,uu);var cl=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new at},dm={COORDINATE_ARRAY_TYPE:{configurable:!0}};cl.prototype.getCoordinates=function(){return this._ptList.toArray(cl.COORDINATE_ARRAY_TYPE)},cl.prototype.setPrecisionModel=function(c){this._precisionModel=c},cl.prototype.addPt=function(c){var f=new Q(c);if(this._precisionModel.makePrecise(f),this.isRedundant(f))return null;this._ptList.add(f)},cl.prototype.revere=function(){},cl.prototype.addPts=function(c,f){if(f)for(var b=0;b<c.length;b++)this.addPt(c[b]);else for(var w=c.length-1;w>=0;w--)this.addPt(c[w])},cl.prototype.isRedundant=function(c){if(this._ptList.size()<1)return!1;var f=this._ptList.get(this._ptList.size()-1);return c.distance(f)<this._minimimVertexDistance},cl.prototype.toString=function(){return(new ge).createLineString(this.getCoordinates()).toString()},cl.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var c=new Q(this._ptList.get(0)),f=this._ptList.get(this._ptList.size()-1);if(c.equals(f))return null;this._ptList.add(c)},cl.prototype.setMinimumVertexDistance=function(c){this._minimimVertexDistance=c},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},dm.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(cl,dm);var qr=function(){},Fd={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.toDegrees=function(c){return 180*c/Math.PI},qr.normalize=function(c){for(;c>Math.PI;)c-=qr.PI_TIMES_2;for(;c<=-Math.PI;)c+=qr.PI_TIMES_2;return c},qr.angle=function(){if(1===arguments.length){var c=arguments[0];return Math.atan2(c.y,c.x)}if(2===arguments.length){var f=arguments[0],b=arguments[1];return Math.atan2(b.y-f.y,b.x-f.x)}},qr.isAcute=function(c,f,b){return(c.x-f.x)*(b.x-f.x)+(c.y-f.y)*(b.y-f.y)>0},qr.isObtuse=function(c,f,b){return(c.x-f.x)*(b.x-f.x)+(c.y-f.y)*(b.y-f.y)<0},qr.interiorAngle=function(c,f,b){var w=qr.angle(f,c),A=qr.angle(f,b);return Math.abs(A-w)},qr.normalizePositive=function(c){if(c<0){for(;c<0;)c+=qr.PI_TIMES_2;c>=qr.PI_TIMES_2&&(c=0)}else{for(;c>=qr.PI_TIMES_2;)c-=qr.PI_TIMES_2;c<0&&(c=0)}return c},qr.angleBetween=function(c,f,b){var w=qr.angle(f,c),A=qr.angle(f,b);return qr.diff(w,A)},qr.diff=function(c,f){var b=null;return(b=c<f?f-c:c-f)>Math.PI&&(b=2*Math.PI-b),b},qr.toRadians=function(c){return c*Math.PI/180},qr.getTurn=function(c,f){var b=Math.sin(f-c);return b>0?qr.COUNTERCLOCKWISE:b<0?qr.CLOCKWISE:qr.NONE},qr.angleBetweenOriented=function(c,f,b){var w=qr.angle(f,c),A=qr.angle(f,b)-w;return A<=-Math.PI?A+qr.PI_TIMES_2:A>Math.PI?A-qr.PI_TIMES_2:A},Fd.PI_TIMES_2.get=function(){return 2*Math.PI},Fd.PI_OVER_2.get=function(){return Math.PI/2},Fd.PI_OVER_4.get=function(){return Math.PI/4},Fd.COUNTERCLOCKWISE.get=function(){return yn.COUNTERCLOCKWISE},Fd.CLOCKWISE.get=function(){return yn.CLOCKWISE},Fd.NONE.get=function(){return yn.COLLINEAR},Object.defineProperties(qr,Fd);var Ms=function c(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ir,this._seg1=new ir,this._offset0=new ir,this._offset1=new ir,this._side=0,this._hasNarrowConcaveAngle=!1;var b=arguments[1],w=arguments[2];this._precisionModel=arguments[0],this._bufParams=b,this._li=new ln,this._filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===xo.JOIN_ROUND&&(this._closingSegLengthFactor=c.MAX_CLOSING_SEG_LEN_FACTOR),this.init(w)},fh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ms.prototype.addNextSegment=function(c,f){if(this._s0=this._s1,this._s1=this._s2,this._s2=c,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var b=yn.computeOrientation(this._s0,this._s1,this._s2),w=b===yn.CLOCKWISE&&this._side===xt.LEFT||b===yn.COUNTERCLOCKWISE&&this._side===xt.RIGHT;0===b?this.addCollinear(f):w?this.addOutsideTurn(b,f):this.addInsideTurn(b,f)},Ms.prototype.addLineEndCap=function(c,f){var b=new ir(c,f),w=new ir;this.computeOffsetSegment(b,xt.LEFT,this._distance,w);var A=new ir;this.computeOffsetSegment(b,xt.RIGHT,this._distance,A);var xe=Math.atan2(f.y-c.y,f.x-c.x);switch(this._bufParams.getEndCapStyle()){case xo.CAP_ROUND:this._segList.addPt(w.p1),this.addFilletArc(f,xe+Math.PI/2,xe-Math.PI/2,yn.CLOCKWISE,this._distance),this._segList.addPt(A.p1);break;case xo.CAP_FLAT:this._segList.addPt(w.p1),this._segList.addPt(A.p1);break;case xo.CAP_SQUARE:var st=new Q;st.x=Math.abs(this._distance)*Math.cos(xe),st.y=Math.abs(this._distance)*Math.sin(xe);var $t=new Q(w.p1.x+st.x,w.p1.y+st.y),gn=new Q(A.p1.x+st.x,A.p1.y+st.y);this._segList.addPt($t),this._segList.addPt(gn)}},Ms.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ms.prototype.addMitreJoin=function(c,f,b,w){var A=!0,B=null;try{B=vi.intersection(f.p0,f.p1,b.p0,b.p1),(w<=0?1:B.distance(c)/Math.abs(w))>this._bufParams.getMitreLimit()&&(A=!1)}catch(U){if(!(U instanceof ei))throw U;B=new Q(0,0),A=!1}A?this._segList.addPt(B):this.addLimitedMitreJoin(f,b,w,this._bufParams.getMitreLimit())},Ms.prototype.addFilletCorner=function(c,f,b,w,A){var xe=Math.atan2(f.y-c.y,f.x-c.x),gn=Math.atan2(b.y-c.y,b.x-c.x);w===yn.CLOCKWISE?xe<=gn&&(xe+=2*Math.PI):xe>=gn&&(xe-=2*Math.PI),this._segList.addPt(f),this.addFilletArc(c,xe,gn,w,A),this._segList.addPt(b)},Ms.prototype.addOutsideTurn=function(c,f){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ms.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===xo.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===xo.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(f&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,c,this._distance),this._segList.addPt(this._offset1.p0))},Ms.prototype.createSquare=function(c){this._segList.addPt(new Q(c.x+this._distance,c.y+this._distance)),this._segList.addPt(new Q(c.x+this._distance,c.y-this._distance)),this._segList.addPt(new Q(c.x-this._distance,c.y-this._distance)),this._segList.addPt(new Q(c.x-this._distance,c.y+this._distance)),this._segList.closeRing()},Ms.prototype.addSegments=function(c,f){this._segList.addPts(c,f)},Ms.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ms.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ms.prototype.initSideSegments=function(c,f,b){this._s1=c,this._s2=f,this._side=b,this._seg1.setCoordinates(c,f),this.computeOffsetSegment(this._seg1,b,this._distance,this._offset1)},Ms.prototype.addLimitedMitreJoin=function(c,f,b,w){var A=this._seg0.p1,B=qr.angle(A,this._seg0.p0),U=qr.angleBetweenOriented(this._seg0.p0,A,this._seg1.p1)/2,xe=qr.normalize(B+U),st=qr.normalize(xe+Math.PI),$t=w*b,gn=b-$t*Math.abs(Math.sin(U)),Rn=A.x+$t*Math.cos(st),Ai=A.y+$t*Math.sin(st),Si=new Q(Rn,Ai),Vi=new ir(A,Si),fr=Vi.pointAlongOffset(1,gn),Co=Vi.pointAlongOffset(1,-gn);this._side===xt.LEFT?(this._segList.addPt(fr),this._segList.addPt(Co)):(this._segList.addPt(Co),this._segList.addPt(fr))},Ms.prototype.computeOffsetSegment=function(c,f,b,w){var A=f===xt.LEFT?1:-1,B=c.p1.x-c.p0.x,U=c.p1.y-c.p0.y,xe=Math.sqrt(B*B+U*U),st=A*b*B/xe,$t=A*b*U/xe;w.p0.x=c.p0.x-$t,w.p0.y=c.p0.y+st,w.p1.x=c.p1.x-$t,w.p1.y=c.p1.y+st},Ms.prototype.addFilletArc=function(c,f,b,w,A){var B=w===yn.CLOCKWISE?-1:1,U=Math.abs(f-b),xe=Math.trunc(U/this._filletAngleQuantum+.5);if(xe<1)return null;for(var st=U/xe,$t=0,gn=new Q;$t<U;){var Rn=f+B*$t;gn.x=c.x+A*Math.cos(Rn),gn.y=c.y+A*Math.sin(Rn),this._segList.addPt(gn),$t+=st}},Ms.prototype.addInsideTurn=function(c,f){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ms.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var b=new Q((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(b);var w=new Q((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(w)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ms.prototype.createCircle=function(c){var f=new Q(c.x+this._distance,c.y);this._segList.addPt(f),this.addFilletArc(c,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ms.prototype.addBevelJoin=function(c,f){this._segList.addPt(c.p1),this._segList.addPt(f.p0)},Ms.prototype.init=function(c){this._distance=c,this._maxCurveSegmentError=c*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new cl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(c*Ms.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ms.prototype.addCollinear=function(c){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===xo.JOIN_BEVEL||this._bufParams.getJoinStyle()===xo.JOIN_MITRE?(c&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,yn.CLOCKWISE,this._distance))},Ms.prototype.closeRing=function(){this._segList.closeRing()},Ms.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ms.prototype.interfaces_=function(){return[]},Ms.prototype.getClass=function(){return Ms},fh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},fh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},fh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},fh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ms,fh);var xl=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var f=arguments[1];this._precisionModel=arguments[0],this._bufParams=f};xl.prototype.getOffsetCurve=function(c,f){if(this._distance=f,0===f)return null;var b=f<0,w=Math.abs(f),A=this.getSegGen(w);c.length<=1?this.computePointCurve(c[0],A):this.computeOffsetCurve(c,b,A);var B=A.getCoordinates();return b&&It.reverse(B),B},xl.prototype.computeSingleSidedBufferCurve=function(c,f,b){var w=this.simplifyTolerance(this._distance);if(f){b.addSegments(c,!0);var A=Do.simplify(c,-w),B=A.length-1;b.initSideSegments(A[B],A[B-1],xt.LEFT),b.addFirstSegment();for(var U=B-2;U>=0;U--)b.addNextSegment(A[U],!0)}else{b.addSegments(c,!1);var xe=Do.simplify(c,w),st=xe.length-1;b.initSideSegments(xe[0],xe[1],xt.LEFT),b.addFirstSegment();for(var $t=2;$t<=st;$t++)b.addNextSegment(xe[$t],!0)}b.addLastSegment(),b.closeRing()},xl.prototype.computeRingBufferCurve=function(c,f,b){var w=this.simplifyTolerance(this._distance);f===xt.RIGHT&&(w=-w);var A=Do.simplify(c,w),B=A.length-1;b.initSideSegments(A[B-1],A[0],f);for(var U=1;U<=B;U++)b.addNextSegment(A[U],1!==U);b.closeRing()},xl.prototype.computeLineBufferCurve=function(c,f){var b=this.simplifyTolerance(this._distance),w=Do.simplify(c,b),A=w.length-1;f.initSideSegments(w[0],w[1],xt.LEFT);for(var B=2;B<=A;B++)f.addNextSegment(w[B],!0);f.addLastSegment(),f.addLineEndCap(w[A-1],w[A]);var U=Do.simplify(c,-b),xe=U.length-1;f.initSideSegments(U[xe],U[xe-1],xt.LEFT);for(var st=xe-2;st>=0;st--)f.addNextSegment(U[st],!0);f.addLastSegment(),f.addLineEndCap(U[1],U[0]),f.closeRing()},xl.prototype.computePointCurve=function(c,f){switch(this._bufParams.getEndCapStyle()){case xo.CAP_ROUND:f.createCircle(c);break;case xo.CAP_SQUARE:f.createSquare(c)}},xl.prototype.getLineCurve=function(c,f){if(this._distance=f,f<0&&!this._bufParams.isSingleSided()||0===f)return null;var b=Math.abs(f),w=this.getSegGen(b);return c.length<=1?this.computePointCurve(c[0],w):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(c,f<0,w):this.computeLineBufferCurve(c,w),w.getCoordinates()},xl.prototype.getBufferParameters=function(){return this._bufParams},xl.prototype.simplifyTolerance=function(c){return c*this._bufParams.getSimplifyFactor()},xl.prototype.getRingCurve=function(c,f,b){if(this._distance=b,c.length<=2)return this.getLineCurve(c,b);if(0===b)return xl.copyCoordinates(c);var w=this.getSegGen(b);return this.computeRingBufferCurve(c,f,w),w.getCoordinates()},xl.prototype.computeOffsetCurve=function(c,f,b){var w=this.simplifyTolerance(this._distance);if(f){var A=Do.simplify(c,-w),B=A.length-1;b.initSideSegments(A[B],A[B-1],xt.LEFT),b.addFirstSegment();for(var U=B-2;U>=0;U--)b.addNextSegment(A[U],!0)}else{var xe=Do.simplify(c,w),st=xe.length-1;b.initSideSegments(xe[0],xe[1],xt.LEFT),b.addFirstSegment();for(var $t=2;$t<=st;$t++)b.addNextSegment(xe[$t],!0)}b.addLastSegment()},xl.prototype.getSegGen=function(c){return new Ms(this._precisionModel,this._bufParams,c)},xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl},xl.copyCoordinates=function(c){for(var f=new Array(c.length).fill(null),b=0;b<f.length;b++)f[b]=new Q(c[b]);return f};var Bd=function(){this._subgraphs=null,this._seg=new ir,this._cga=new yn,this._subgraphs=arguments[0]},lo={DepthSegment:{configurable:!0}};Bd.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var c=arguments[0],f=new at,b=this._subgraphs.iterator();b.hasNext();){var w=b.next(),A=w.getEnvelope();c.y<A.getMinY()||c.y>A.getMaxY()||this.findStabbedSegments(c,w.getDirectedEdges(),f)}return f}if(3===arguments.length)if(Se(arguments[2],Ct)&&arguments[0]instanceof Q&&arguments[1]instanceof Ta){for(var B=arguments[0],U=arguments[1],xe=arguments[2],st=U.getEdge().getCoordinates(),$t=0;$t<st.length-1;$t++)if(this._seg.p0=st[$t],this._seg.p1=st[$t+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<B.x||this._seg.isHorizontal()||B.y<this._seg.p0.y||B.y>this._seg.p1.y||yn.computeOrientation(this._seg.p0,this._seg.p1,B)===yn.RIGHT)){var gn=U.getDepth(xt.LEFT);this._seg.p0.equals(st[$t])||(gn=U.getDepth(xt.RIGHT));var Rn=new Tc(this._seg,gn);xe.add(Rn)}}else if(Se(arguments[2],Ct)&&arguments[0]instanceof Q&&Se(arguments[1],Ct))for(var Ai=arguments[0],Vi=arguments[2],fr=arguments[1].iterator();fr.hasNext();){var Co=fr.next();Co.isForward()&&this.findStabbedSegments(Ai,Co,Vi)}},Bd.prototype.getDepth=function(c){var f=this.findStabbedSegments(c);return 0===f.size()?0:br.min(f)._leftDepth},Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},lo.DepthSegment.get=function(){return Tc},Object.defineProperties(Bd,lo);var Tc=function(){this._upwardSeg=null,this._leftDepth=null;var f=arguments[1];this._upwardSeg=new ir(arguments[0]),this._leftDepth=f};Tc.prototype.compareTo=function(c){var f=c;if(this._upwardSeg.minX()>=f._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=f._upwardSeg.minX())return-1;var b=this._upwardSeg.orientationIndex(f._upwardSeg);return 0!==b||0!=(b=-1*f._upwardSeg.orientationIndex(this._upwardSeg))?b:this._upwardSeg.compareTo(f._upwardSeg)},Tc.prototype.compareX=function(c,f){var b=c.p0.compareTo(f.p0);return 0!==b?b:c.p1.compareTo(f.p1)},Tc.prototype.toString=function(){return this._upwardSeg.toString()},Tc.prototype.interfaces_=function(){return[ne]},Tc.prototype.getClass=function(){return Tc};var mo=function(c,f,b){this.p0=c||null,this.p1=f||null,this.p2=b||null};mo.prototype.area=function(){return mo.area(this.p0,this.p1,this.p2)},mo.prototype.signedArea=function(){return mo.signedArea(this.p0,this.p1,this.p2)},mo.prototype.interpolateZ=function(c){if(null===c)throw new Z("Supplied point is null.");return mo.interpolateZ(c,this.p0,this.p1,this.p2)},mo.prototype.longestSideLength=function(){return mo.longestSideLength(this.p0,this.p1,this.p2)},mo.prototype.isAcute=function(){return mo.isAcute(this.p0,this.p1,this.p2)},mo.prototype.circumcentre=function(){return mo.circumcentre(this.p0,this.p1,this.p2)},mo.prototype.area3D=function(){return mo.area3D(this.p0,this.p1,this.p2)},mo.prototype.centroid=function(){return mo.centroid(this.p0,this.p1,this.p2)},mo.prototype.inCentre=function(){return mo.inCentre(this.p0,this.p1,this.p2)},mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo},mo.area=function(c,f,b){return Math.abs(((b.x-c.x)*(f.y-c.y)-(f.x-c.x)*(b.y-c.y))/2)},mo.signedArea=function(c,f,b){return((b.x-c.x)*(f.y-c.y)-(f.x-c.x)*(b.y-c.y))/2},mo.det=function(c,f,b,w){return c*w-f*b},mo.interpolateZ=function(c,f,b,w){var A=f.x,B=f.y,U=b.x-A,xe=w.x-A,st=b.y-B,$t=w.y-B,gn=U*$t-xe*st,Rn=c.x-A,Ai=c.y-B;return f.z+($t*Rn-xe*Ai)/gn*(b.z-f.z)+(-st*Rn+U*Ai)/gn*(w.z-f.z)},mo.longestSideLength=function(c,f,b){var w=c.distance(f),A=f.distance(b),B=b.distance(c),U=w;return A>U&&(U=A),B>U&&(U=B),U},mo.isAcute=function(c,f,b){return!!qr.isAcute(c,f,b)&&!!qr.isAcute(f,b,c)&&!!qr.isAcute(b,c,f)},mo.circumcentre=function(c,f,b){var w=b.x,A=b.y,B=c.x-w,U=c.y-A,xe=f.x-w,st=f.y-A,$t=2*mo.det(B,U,xe,st),gn=mo.det(U,B*B+U*U,st,xe*xe+st*st),Rn=mo.det(B,B*B+U*U,xe,xe*xe+st*st);return new Q(w-gn/$t,A+Rn/$t)},mo.perpendicularBisector=function(c,f){var b=f.x-c.x,w=f.y-c.y,A=new vi(c.x+b/2,c.y+w/2,1),B=new vi(c.x-w+b/2,c.y+b+w/2,1);return new vi(A,B)},mo.angleBisector=function(c,f,b){var w=f.distance(c),A=w/(w+f.distance(b));return new Q(c.x+A*(b.x-c.x),c.y+A*(b.y-c.y))},mo.area3D=function(c,f,b){var w=f.x-c.x,A=f.y-c.y,B=f.z-c.z,U=b.x-c.x,xe=b.y-c.y,st=b.z-c.z,$t=A*st-B*xe,gn=B*U-w*st,Rn=w*xe-A*U;return Math.sqrt($t*$t+gn*gn+Rn*Rn)/2},mo.centroid=function(c,f,b){return new Q((c.x+f.x+b.x)/3,(c.y+f.y+b.y)/3)},mo.inCentre=function(c,f,b){var w=f.distance(b),A=c.distance(b),B=c.distance(f),U=w+A+B;return new Q((w*c.x+A*f.x+B*b.x)/U,(w*c.y+A*f.y+B*b.y)/U)};var Kl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new at;var f=arguments[1],b=arguments[2];this._inputGeom=arguments[0],this._distance=f,this._curveBuilder=b};Kl.prototype.addPoint=function(c){if(this._distance<=0)return null;var f=c.getCoordinates(),b=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(b,ie.EXTERIOR,ie.INTERIOR)},Kl.prototype.addPolygon=function(c){var f=this._distance,b=xt.LEFT;this._distance<0&&(f=-this._distance,b=xt.RIGHT);var w=c.getExteriorRing(),A=It.removeRepeatedPoints(w.getCoordinates());if(this._distance<0&&this.isErodedCompletely(w,this._distance)||this._distance<=0&&A.length<3)return null;this.addPolygonRing(A,f,b,ie.EXTERIOR,ie.INTERIOR);for(var B=0;B<c.getNumInteriorRing();B++){var U=c.getInteriorRingN(B),xe=It.removeRepeatedPoints(U.getCoordinates());this._distance>0&&this.isErodedCompletely(U,-this._distance)||this.addPolygonRing(xe,f,xt.opposite(b),ie.INTERIOR,ie.EXTERIOR)}},Kl.prototype.isTriangleErodedCompletely=function(c,f){var b=new mo(c[0],c[1],c[2]),w=b.inCentre();return yn.distancePointLine(w,b.p0,b.p1)<Math.abs(f)},Kl.prototype.addLineString=function(c){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var f=It.removeRepeatedPoints(c.getCoordinates()),b=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(b,ie.EXTERIOR,ie.INTERIOR)},Kl.prototype.addCurve=function(c,f,b){if(null===c||c.length<2)return null;var w=new Xs(c,new $r(0,ie.BOUNDARY,f,b));this._curveList.add(w)},Kl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Kl.prototype.addPolygonRing=function(c,f,b,w,A){if(0===f&&c.length<No.MINIMUM_VALID_SIZE)return null;var B=w,U=A;c.length>=No.MINIMUM_VALID_SIZE&&yn.isCCW(c)&&(B=A,U=w,b=xt.opposite(b));var xe=this._curveBuilder.getRingCurve(c,b,f);this.addCurve(xe,B,U)},Kl.prototype.add=function(c){if(c.isEmpty())return null;c instanceof so?this.addPolygon(c):c instanceof rr?this.addLineString(c):c instanceof Vr?this.addPoint(c):(c instanceof Ns||c instanceof Qn||c instanceof no||c instanceof Vn)&&this.addCollection(c)},Kl.prototype.isErodedCompletely=function(c,f){var b=c.getCoordinates();if(b.length<4)return f<0;if(4===b.length)return this.isTriangleErodedCompletely(b,f);var w=c.getEnvelopeInternal(),A=Math.min(w.getHeight(),w.getWidth());return f<0&&2*Math.abs(f)>A},Kl.prototype.addCollection=function(c){for(var f=0;f<c.getNumGeometries();f++){var b=c.getGeometryN(f);this.add(b)}},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var ph=function(){};ph.prototype.locate=function(c){},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph};var $l=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var c=arguments[0];this._parent=c,this._atStart=!0,this._index=0,this._max=c.getNumGeometries()};$l.prototype.next=function(){if(this._atStart)return this._atStart=!1,$l.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Je;var c=this._parent.getGeometryN(this._index++);return c instanceof Vn?(this._subcollectionIterator=new $l(c),this._subcollectionIterator.next()):c},$l.prototype.remove=function(){throw new Error(this.getClass().getName())},$l.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},$l.prototype.interfaces_=function(){return[pt]},$l.prototype.getClass=function(){return $l},$l.isAtomic=function(c){return!(c instanceof Vn)};var Al=function(){this._geom=null,this._geom=arguments[0]};Al.prototype.locate=function(c){return Al.locate(c,this._geom)},Al.prototype.interfaces_=function(){return[ph]},Al.prototype.getClass=function(){return Al},Al.isPointInRing=function(c,f){return!!f.getEnvelopeInternal().intersects(c)&&yn.isPointInRing(c,f.getCoordinates())},Al.containsPointInPolygon=function(c,f){if(f.isEmpty())return!1;var b=f.getExteriorRing();if(!Al.isPointInRing(c,b))return!1;for(var w=0;w<f.getNumInteriorRing();w++){var A=f.getInteriorRingN(w);if(Al.isPointInRing(c,A))return!1}return!0},Al.containsPoint=function(c,f){if(f instanceof so)return Al.containsPointInPolygon(c,f);if(f instanceof Vn)for(var b=new $l(f);b.hasNext();){var w=b.next();if(w!==f&&Al.containsPoint(c,w))return!0}return!1},Al.locate=function(c,f){return f.isEmpty()?ie.EXTERIOR:Al.containsPoint(c,f)?ie.INTERIOR:ie.EXTERIOR};var Da=function(){this._edgeMap=new qe,this._edgeList=null,this._ptInAreaLocation=[ie.NONE,ie.NONE]};Da.prototype.getNextCW=function(c){this.getEdges();var f=this._edgeList.indexOf(c),b=f-1;return 0===f&&(b=this._edgeList.size()-1),this._edgeList.get(b)},Da.prototype.propagateSideLabels=function(c){for(var f=ie.NONE,b=this.iterator();b.hasNext();){var w=b.next().getLabel();w.isArea(c)&&w.getLocation(c,xt.LEFT)!==ie.NONE&&(f=w.getLocation(c,xt.LEFT))}if(f===ie.NONE)return null;for(var A=f,B=this.iterator();B.hasNext();){var U=B.next(),xe=U.getLabel();if(xe.getLocation(c,xt.ON)===ie.NONE&&xe.setLocation(c,xt.ON,A),xe.isArea(c)){var st=xe.getLocation(c,xt.LEFT),$t=xe.getLocation(c,xt.RIGHT);if($t!==ie.NONE){if($t!==A)throw new ur("side location conflict",U.getCoordinate());st===ie.NONE&&Ee.shouldNeverReachHere("found single null side (at "+U.getCoordinate()+")"),A=st}else Ee.isTrue(xe.getLocation(c,xt.LEFT)===ie.NONE,"found single null side"),xe.setLocation(c,xt.RIGHT,A),xe.setLocation(c,xt.LEFT,A)}}},Da.prototype.getCoordinate=function(){var c=this.iterator();return c.hasNext()?c.next().getCoordinate():null},Da.prototype.print=function(c){Vt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var f=this.iterator();f.hasNext();)f.next().print(c)},Da.prototype.isAreaLabelsConsistent=function(c){return this.computeEdgeEndLabels(c.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Da.prototype.checkAreaLabelsConsistent=function(c){var f=this.getEdges();if(f.size()<=0)return!0;var b=f.size()-1,w=f.get(b).getLabel().getLocation(c,xt.LEFT);Ee.isTrue(w!==ie.NONE,"Found unlabelled area edge");for(var A=w,B=this.iterator();B.hasNext();){var U=B.next().getLabel();Ee.isTrue(U.isArea(c),"Found non-area edge");var xe=U.getLocation(c,xt.LEFT),st=U.getLocation(c,xt.RIGHT);if(xe===st||st!==A)return!1;A=xe}return!0},Da.prototype.findIndex=function(c){this.iterator();for(var f=0;f<this._edgeList.size();f++)if(this._edgeList.get(f)===c)return f;return-1},Da.prototype.iterator=function(){return this.getEdges().iterator()},Da.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new at(this._edgeMap.values())),this._edgeList},Da.prototype.getLocation=function(c,f,b){return this._ptInAreaLocation[c]===ie.NONE&&(this._ptInAreaLocation[c]=Al.locate(f,b[c].getGeometry())),this._ptInAreaLocation[c]},Da.prototype.toString=function(){var c=new De;c.append("EdgeEndStar:   "+this.getCoordinate()),c.append("\n");for(var f=this.iterator();f.hasNext();){var b=f.next();c.append(b),c.append("\n")}return c.toString()},Da.prototype.computeEdgeEndLabels=function(c){for(var f=this.iterator();f.hasNext();)f.next().computeLabel(c)},Da.prototype.computeLabelling=function(c){this.computeEdgeEndLabels(c[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var f=[!1,!1],b=this.iterator();b.hasNext();)for(var w=b.next().getLabel(),A=0;A<2;A++)w.isLine(A)&&w.getLocation(A)===ie.BOUNDARY&&(f[A]=!0);for(var B=this.iterator();B.hasNext();)for(var U=B.next(),xe=U.getLabel(),st=0;st<2;st++)if(xe.isAnyNull(st)){var $t=ie.NONE;if(f[st])$t=ie.EXTERIOR;else{var gn=U.getCoordinate();$t=this.getLocation(st,gn,c)}xe.setAllLocationsIfNull(st,$t)}},Da.prototype.getDegree=function(){return this._edgeMap.size()},Da.prototype.insertEdgeEnd=function(c,f){this._edgeMap.put(c,f),this._edgeList=null},Da.prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da};var B_=function(c){function f(){c.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var b=null,w=null,A=this._SCANNING_FOR_INCOMING,B=0;B<this._resultAreaEdgeList.size();B++){var U=this._resultAreaEdgeList.get(B),xe=U.getSym();if(U.getLabel().isArea())switch(null===b&&U.isInResult()&&(b=U),A){case this._SCANNING_FOR_INCOMING:if(!xe.isInResult())continue;w=xe,A=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!U.isInResult())continue;w.setNext(U),A=this._SCANNING_FOR_INCOMING}}if(A===this._LINKING_TO_OUTGOING){if(null===b)throw new ur("no outgoing dirEdge found",this.getCoordinate());Ee.isTrue(b.isInResult(),"unable to link last incoming dirEdge"),w.setNext(b)}},f.prototype.insert=function(b){this.insertEdgeEnd(b,b)},f.prototype.getRightmostEdge=function(){var b=this.getEdges(),w=b.size();if(w<1)return null;var A=b.get(0);if(1===w)return A;var B=b.get(w-1),U=A.getQuadrant(),xe=B.getQuadrant();return kr.isNorthern(U)&&kr.isNorthern(xe)?A:kr.isNorthern(U)||kr.isNorthern(xe)?0!==A.getDy()?A:0!==B.getDy()?B:(Ee.shouldNeverReachHere("found two horizontal edges incident on node"),null):B},f.prototype.print=function(b){Vt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var w=this.iterator();w.hasNext();){var A=w.next();b.print("out "),A.print(b),b.println(),b.print("in "),A.getSym().print(b),b.println()}},f.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new at;for(var b=this.iterator();b.hasNext();){var w=b.next();(w.isInResult()||w.getSym().isInResult())&&this._resultAreaEdgeList.add(w)}return this._resultAreaEdgeList},f.prototype.updateLabelling=function(b){for(var w=this.iterator();w.hasNext();){var A=w.next().getLabel();A.setAllLocationsIfNull(0,b.getLocation(0)),A.setAllLocationsIfNull(1,b.getLocation(1))}},f.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var b=null,w=null,A=this._edgeList.size()-1;A>=0;A--){var B=this._edgeList.get(A),U=B.getSym();null===w&&(w=U),null!==b&&U.setNext(b),b=B}w.setNext(b)},f.prototype.computeDepths=function(){if(1===arguments.length){var b=arguments[0],w=this.findIndex(b),A=b.getDepth(xt.LEFT),B=b.getDepth(xt.RIGHT),U=this.computeDepths(w+1,this._edgeList.size(),A);if(this.computeDepths(0,w,U)!==B)throw new ur("depth mismatch at "+b.getCoordinate())}else if(3===arguments.length){for(var st=arguments[1],$t=arguments[2],gn=arguments[0];gn<st;gn++){var Rn=this._edgeList.get(gn);Rn.setEdgeDepths(xt.RIGHT,$t),$t=Rn.getDepth(xt.LEFT)}return $t}},f.prototype.mergeSymLabels=function(){for(var b=this.iterator();b.hasNext();){var w=b.next();w.getLabel().merge(w.getSym().getLabel())}},f.prototype.linkMinimalDirectedEdges=function(b){for(var w=null,A=null,B=this._SCANNING_FOR_INCOMING,U=this._resultAreaEdgeList.size()-1;U>=0;U--){var xe=this._resultAreaEdgeList.get(U),st=xe.getSym();switch(null===w&&xe.getEdgeRing()===b&&(w=xe),B){case this._SCANNING_FOR_INCOMING:if(st.getEdgeRing()!==b)continue;A=st,B=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(xe.getEdgeRing()!==b)continue;A.setNextMin(xe),B=this._SCANNING_FOR_INCOMING}}B===this._LINKING_TO_OUTGOING&&(Ee.isTrue(null!==w,"found null for first outgoing dirEdge"),Ee.isTrue(w.getEdgeRing()===b,"unable to link last incoming dirEdge"),A.setNextMin(w))},f.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var b=0,w=this.iterator();w.hasNext();)w.next().isInResult()&&b++;return b}if(1===arguments.length){for(var A=arguments[0],B=0,U=this.iterator();U.hasNext();)U.next().getEdgeRing()===A&&B++;return B}},f.prototype.getLabel=function(){return this._label},f.prototype.findCoveredLineEdges=function(){for(var b=ie.NONE,w=this.iterator();w.hasNext();){var A=w.next(),B=A.getSym();if(!A.isLineEdge()){if(A.isInResult()){b=ie.INTERIOR;break}if(B.isInResult()){b=ie.EXTERIOR;break}}}if(b===ie.NONE)return null;for(var U=b,xe=this.iterator();xe.hasNext();){var st=xe.next(),$t=st.getSym();st.isLineEdge()?st.getEdge().setCovered(U===ie.INTERIOR):(st.isInResult()&&(U=ie.EXTERIOR),$t.isInResult()&&(U=ie.INTERIOR))}},f.prototype.computeLabelling=function(b){c.prototype.computeLabelling.call(this,b),this._label=new $r(ie.NONE);for(var w=this.iterator();w.hasNext();)for(var A=w.next().getEdge().getLabel(),B=0;B<2;B++){var U=A.getLocation(B);U!==ie.INTERIOR&&U!==ie.BOUNDARY||this._label.setLocation(B,ie.INTERIOR)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Da),dd=function(c){function f(){c.apply(this,arguments)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.createNode=function(b){return new Au(b,new B_)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Yl),Pu=function c(){this._pts=null,this._orientation=null;var f=arguments[0];this._pts=f,this._orientation=c.orientation(f)};Pu.prototype.compareTo=function(c){return Pu.compareOriented(this._pts,this._orientation,c._pts,c._orientation)},Pu.prototype.interfaces_=function(){return[ne]},Pu.prototype.getClass=function(){return Pu},Pu.orientation=function(c){return 1===It.increasingDirection(c)},Pu.compareOriented=function(c,f,b,w){for(var A=f?1:-1,B=w?1:-1,U=f?c.length:-1,xe=w?b.length:-1,st=f?0:c.length-1,$t=w?0:b.length-1;;){var gn=c[st].compareTo(b[$t]);if(0!==gn)return gn;var Rn=(st+=A)===U,Ai=($t+=B)===xe;if(Rn&&!Ai)return-1;if(!Rn&&Ai)return 1;if(Rn&&Ai)return 0}};var fn=function(){this._edges=new at,this._ocaMap=new qe};fn.prototype.print=function(c){c.print("MULTILINESTRING ( ");for(var f=0;f<this._edges.size();f++){var b=this._edges.get(f);f>0&&c.print(","),c.print("(");for(var w=b.getCoordinates(),A=0;A<w.length;A++)A>0&&c.print(","),c.print(w[A].x+" "+w[A].y);c.println(")")}c.print(")  ")},fn.prototype.addAll=function(c){for(var f=c.iterator();f.hasNext();)this.add(f.next())},fn.prototype.findEdgeIndex=function(c){for(var f=0;f<this._edges.size();f++)if(this._edges.get(f).equals(c))return f;return-1},fn.prototype.iterator=function(){return this._edges.iterator()},fn.prototype.getEdges=function(){return this._edges},fn.prototype.get=function(c){return this._edges.get(c)},fn.prototype.findEqualEdge=function(c){var f=new Pu(c.getCoordinates());return this._ocaMap.get(f)},fn.prototype.add=function(c){this._edges.add(c);var f=new Pu(c.getCoordinates());this._ocaMap.put(f,c)},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var Ru=function(){};Ru.prototype.processIntersections=function(c,f,b,w){},Ru.prototype.isDone=function(){},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru};var ti=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};ti.prototype.isTrivialIntersection=function(c,f,b,w){if(c===b&&1===this._li.getIntersectionNum()){if(ti.isAdjacentSegments(f,w))return!0;if(c.isClosed()){var A=c.size()-1;if(0===f&&w===A||0===w&&f===A)return!0}}return!1},ti.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ti.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ti.prototype.getLineIntersector=function(){return this._li},ti.prototype.hasProperIntersection=function(){return this._hasProper},ti.prototype.processIntersections=function(c,f,b,w){if(c===b&&f===w)return null;this.numTests++;var A=c.getCoordinates()[f],B=c.getCoordinates()[f+1],U=b.getCoordinates()[w],xe=b.getCoordinates()[w+1];this._li.computeIntersection(A,B,U,xe),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(c,f,b,w)||(this._hasIntersection=!0,c.addIntersections(this._li,f,0),b.addIntersections(this._li,w,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ti.prototype.hasIntersection=function(){return this._hasIntersection},ti.prototype.isDone=function(){return!1},ti.prototype.hasInteriorIntersection=function(){return this._hasInterior},ti.prototype.interfaces_=function(){return[Ru]},ti.prototype.getClass=function(){return ti},ti.isAdjacentSegments=function(c,f){return 1===Math.abs(c-f)};var Ql=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var f=arguments[1],b=arguments[2];this.coord=new Q(arguments[0]),this.segmentIndex=f,this.dist=b};Ql.prototype.getSegmentIndex=function(){return this.segmentIndex},Ql.prototype.getCoordinate=function(){return this.coord},Ql.prototype.print=function(c){c.print(this.coord),c.print(" seg # = "+this.segmentIndex),c.println(" dist = "+this.dist)},Ql.prototype.compareTo=function(c){return this.compare(c.segmentIndex,c.dist)},Ql.prototype.isEndPoint=function(c){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===c},Ql.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Ql.prototype.getDistance=function(){return this.dist},Ql.prototype.compare=function(c,f){return this.segmentIndex<c?-1:this.segmentIndex>c?1:this.dist<f?-1:this.dist>f?1:0},Ql.prototype.interfaces_=function(){return[ne]},Ql.prototype.getClass=function(){return Ql};var Dc=function(){this._nodeMap=new qe,this.edge=null,this.edge=arguments[0]};Dc.prototype.print=function(c){c.println("Intersections:");for(var f=this.iterator();f.hasNext();)f.next().print(c)},Dc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Dc.prototype.addSplitEdges=function(c){this.addEndpoints();for(var f=this.iterator(),b=f.next();f.hasNext();){var w=f.next(),A=this.createSplitEdge(b,w);c.add(A),b=w}},Dc.prototype.addEndpoints=function(){var c=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[c],c,0)},Dc.prototype.createSplitEdge=function(c,f){var b=f.segmentIndex-c.segmentIndex+2,A=f.dist>0||!f.coord.equals2D(this.edge.pts[f.segmentIndex]);A||b--;var B=new Array(b).fill(null),U=0;B[U++]=new Q(c.coord);for(var xe=c.segmentIndex+1;xe<=f.segmentIndex;xe++)B[U++]=this.edge.pts[xe];return A&&(B[U]=f.coord),new Jl(B,new $r(this.edge._label))},Dc.prototype.add=function(c,f,b){var w=new Ql(c,f,b),A=this._nodeMap.get(w);return null!==A?A:(this._nodeMap.put(w,w),w)},Dc.prototype.isIntersection=function(c){for(var f=this.iterator();f.hasNext();)if(f.next().coord.equals(c))return!0;return!1},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var du=function(){};du.prototype.getChainStartIndices=function(c){var f=0,b=new at;b.add(new Ke(f));do{var w=this.findChainEnd(c,f);b.add(new Ke(w)),f=w}while(f<c.length-1);return du.toIntArray(b)},du.prototype.findChainEnd=function(c,f){for(var b=kr.quadrant(c[f],c[f+1]),w=f+1;w<c.length&&kr.quadrant(c[w-1],c[w])===b;)w++;return w-1},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du},du.toIntArray=function(c){for(var f=new Array(c.size()).fill(null),b=0;b<f.length;b++)f[b]=c.get(b).intValue();return f};var Ac=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Tn,this.env2=new Tn;var c=arguments[0];this.e=c,this.pts=c.getCoordinates();var f=new du;this.startIndex=f.getChainStartIndices(this.pts)};Ac.prototype.getCoordinates=function(){return this.pts},Ac.prototype.getMaxX=function(c){var f=this.pts[this.startIndex[c]].x,b=this.pts[this.startIndex[c+1]].x;return f>b?f:b},Ac.prototype.getMinX=function(c){var f=this.pts[this.startIndex[c]].x,b=this.pts[this.startIndex[c+1]].x;return f<b?f:b},Ac.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var c=arguments[0],f=arguments[1],b=arguments[2];this.computeIntersectsForChain(this.startIndex[c],this.startIndex[c+1],f,f.startIndex[b],f.startIndex[b+1],arguments[3])}else if(6===arguments.length){var A=arguments[0],B=arguments[1],U=arguments[2],xe=arguments[3],st=arguments[4],$t=arguments[5],gn=this.pts[A],Rn=this.pts[B],Ai=U.pts[xe],Si=U.pts[st];if(B-A==1&&st-xe==1)return $t.addIntersections(this.e,A,U.e,xe),null;if(this.env1.init(gn,Rn),this.env2.init(Ai,Si),!this.env1.intersects(this.env2))return null;var Vi=Math.trunc((A+B)/2),fr=Math.trunc((xe+st)/2);A<Vi&&(xe<fr&&this.computeIntersectsForChain(A,Vi,U,xe,fr,$t),fr<st&&this.computeIntersectsForChain(A,Vi,U,fr,st,$t)),Vi<B&&(xe<fr&&this.computeIntersectsForChain(Vi,B,U,xe,fr,$t),fr<st&&this.computeIntersectsForChain(Vi,B,U,fr,st,$t))}},Ac.prototype.getStartIndexes=function(){return this.startIndex},Ac.prototype.computeIntersects=function(c,f){for(var b=0;b<this.startIndex.length-1;b++)for(var w=0;w<c.startIndex.length-1;w++)this.computeIntersectsForChain(b,c,w,f)},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var pa=function c(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var f=0;f<2;f++)for(var b=0;b<3;b++)this._depth[f][b]=c.NULL_VALUE},hp={NULL_VALUE:{configurable:!0}};pa.prototype.getDepth=function(c,f){return this._depth[c][f]},pa.prototype.setDepth=function(c,f,b){this._depth[c][f]=b},pa.prototype.isNull=function(){if(0===arguments.length){for(var c=0;c<2;c++)for(var f=0;f<3;f++)if(this._depth[c][f]!==pa.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===pa.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===pa.NULL_VALUE:void 0},pa.prototype.normalize=function(){for(var c=0;c<2;c++)if(!this.isNull(c)){var f=this._depth[c][1];this._depth[c][2]<f&&(f=this._depth[c][2]),f<0&&(f=0);for(var b=1;b<3;b++){var w=0;this._depth[c][b]>f&&(w=1),this._depth[c][b]=w}}},pa.prototype.getDelta=function(c){return this._depth[c][xt.RIGHT]-this._depth[c][xt.LEFT]},pa.prototype.getLocation=function(c,f){return this._depth[c][f]<=0?ie.EXTERIOR:ie.INTERIOR},pa.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},pa.prototype.add=function(){if(1===arguments.length)for(var c=arguments[0],f=0;f<2;f++)for(var b=1;b<3;b++){var w=c.getLocation(f,b);w!==ie.EXTERIOR&&w!==ie.INTERIOR||(this.isNull(f,b)?this._depth[f][b]=pa.depthAtLocation(w):this._depth[f][b]+=pa.depthAtLocation(w))}else 3===arguments.length&&arguments[2]===ie.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},pa.prototype.interfaces_=function(){return[]},pa.prototype.getClass=function(){return pa},pa.depthAtLocation=function(c){return c===ie.EXTERIOR?0:c===ie.INTERIOR?1:pa.NULL_VALUE},hp.NULL_VALUE.get=function(){return-1},Object.defineProperties(pa,hp);var Jl=function(c){function f(){if(c.call(this),this.pts=null,this._env=null,this.eiList=new Dc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new pa,this._depthDelta=0,1===arguments.length)f.call(this,arguments[0],null);else if(2===arguments.length){var A=arguments[1];this.pts=arguments[0],this._label=A}}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.getDepth=function(){return this._depth},f.prototype.getCollapsedEdge=function(){var b=new Array(2).fill(null);return b[0]=this.pts[0],b[1]=this.pts[1],new f(b,$r.toLineLabel(this._label))},f.prototype.isIsolated=function(){return this._isIsolated},f.prototype.getCoordinates=function(){return this.pts},f.prototype.setIsolated=function(b){this._isIsolated=b},f.prototype.setName=function(b){this._name=b},f.prototype.equals=function(b){if(!(b instanceof f))return!1;var w=b;if(this.pts.length!==w.pts.length)return!1;for(var A=!0,B=!0,U=this.pts.length,xe=0;xe<this.pts.length;xe++)if(this.pts[xe].equals2D(w.pts[xe])||(A=!1),this.pts[xe].equals2D(w.pts[--U])||(B=!1),!A&&!B)return!1;return!0},f.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},f.prototype.print=function(b){b.print("edge "+this._name+": "),b.print("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&b.print(","),b.print(this.pts[w].x+" "+this.pts[w].y);b.print(")  "+this._label+" "+this._depthDelta)},f.prototype.computeIM=function(b){f.updateIM(this._label,b)},f.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},f.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},f.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},f.prototype.getDepthDelta=function(){return this._depthDelta},f.prototype.getNumPoints=function(){return this.pts.length},f.prototype.printReverse=function(b){b.print("edge "+this._name+": ");for(var w=this.pts.length-1;w>=0;w--)b.print(this.pts[w]+" ");b.println("")},f.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ac(this)),this._mce},f.prototype.getEnvelope=function(){if(null===this._env){this._env=new Tn;for(var b=0;b<this.pts.length;b++)this._env.expandToInclude(this.pts[b])}return this._env},f.prototype.addIntersection=function(b,w,A,B){var U=new Q(b.getIntersection(B)),xe=w,st=b.getEdgeDistance(A,B),$t=xe+1;$t<this.pts.length&&U.equals2D(this.pts[$t])&&(xe=$t,st=0),this.eiList.add(U,xe,st)},f.prototype.toString=function(){var b=new De;b.append("edge "+this._name+": "),b.append("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&b.append(","),b.append(this.pts[w].x+" "+this.pts[w].y);return b.append(")  "+this._label+" "+this._depthDelta),b.toString()},f.prototype.isPointwiseEqual=function(b){if(this.pts.length!==b.pts.length)return!1;for(var w=0;w<this.pts.length;w++)if(!this.pts[w].equals2D(b.pts[w]))return!1;return!0},f.prototype.setDepthDelta=function(b){this._depthDelta=b},f.prototype.getEdgeIntersectionList=function(){return this.eiList},f.prototype.addIntersections=function(b,w,A){for(var B=0;B<b.getIntersectionNum();B++)this.addIntersection(b,w,A,B)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.updateIM=function(){if(2!==arguments.length)return c.prototype.updateIM.apply(this,arguments);var b=arguments[0],w=arguments[1];w.setAtLeastIfValid(b.getLocation(0,xt.ON),b.getLocation(1,xt.ON),1),b.isArea()&&(w.setAtLeastIfValid(b.getLocation(0,xt.LEFT),b.getLocation(1,xt.LEFT),2),w.setAtLeastIfValid(b.getLocation(0,xt.RIGHT),b.getLocation(1,xt.RIGHT),2))},f}(Dl),La=function(c){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new fn,this._bufParams=c||null};La.prototype.setWorkingPrecisionModel=function(c){this._workingPrecisionModel=c},La.prototype.insertUniqueEdge=function(c){var f=this._edgeList.findEqualEdge(c);if(null!==f){var b=f.getLabel(),w=c.getLabel();f.isPointwiseEqual(c)||(w=new $r(c.getLabel())).flip(),b.merge(w);var A=La.depthDelta(w),B=f.getDepthDelta()+A;f.setDepthDelta(B)}else this._edgeList.add(c),c.setDepthDelta(La.depthDelta(c.getLabel()))},La.prototype.buildSubgraphs=function(c,f){for(var b=new at,w=c.iterator();w.hasNext();){var A=w.next(),B=A.getRightmostCoordinate(),U=new Bd(b).getDepth(B);A.computeDepth(U),A.findResultEdges(),b.add(A),f.add(A.getDirectedEdges(),A.getNodes())}},La.prototype.createSubgraphs=function(c){for(var f=new at,b=c.getNodes().iterator();b.hasNext();){var w=b.next();if(!w.isVisited()){var A=new yo;A.create(w),f.add(A)}}return br.sort(f,br.reverseOrder()),f},La.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},La.prototype.getNoder=function(c){if(null!==this._workingNoder)return this._workingNoder;var f=new Es,b=new ln;return b.setPrecisionModel(c),f.setSegmentIntersector(new ti(b)),f},La.prototype.buffer=function(c,f){var b=this._workingPrecisionModel;null===b&&(b=c.getPrecisionModel()),this._geomFact=c.getFactory();var w=new xl(b,this._bufParams),A=new Kl(c,f,w).getCurves();if(A.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(A,b),this._graph=new qs(new dd),this._graph.addEdges(this._edgeList.getEdges());var B=this.createSubgraphs(this._graph),U=new Ka(this._geomFact);this.buildSubgraphs(B,U);var xe=U.getPolygons();return xe.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(xe)},La.prototype.computeNodedEdges=function(c,f){var b=this.getNoder(f);b.computeNodes(c);for(var w=b.getNodedSubstrings().iterator();w.hasNext();){var A=w.next(),B=A.getCoordinates();if(2!==B.length||!B[0].equals2D(B[1])){var U=A.getData(),xe=new Jl(A.getCoordinates(),new $r(U));this.insertUniqueEdge(xe)}}},La.prototype.setNoder=function(c){this._workingNoder=c},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La},La.depthDelta=function(c){var f=c.getLocation(0,xt.LEFT),b=c.getLocation(0,xt.RIGHT);return f===ie.INTERIOR&&b===ie.EXTERIOR?1:f===ie.EXTERIOR&&b===ie.INTERIOR?-1:0},La.convertSegStrings=function(c){for(var f=new ge,b=new at;c.hasNext();){var w=c.next(),A=f.createLineString(w.getCoordinates());b.add(A)}return f.buildGeometry(b)};var Bs=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var f=arguments[1];this._noder=arguments[0],this._scaleFactor=f,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var w=arguments[1],A=arguments[2],B=arguments[3];this._noder=arguments[0],this._scaleFactor=w,this._offsetX=A,this._offsetY=B,this._isScaled=!this.isIntegerPrecision()}};Bs.prototype.rescale=function(){if(Se(arguments[0],Me))for(var c=arguments[0].iterator();c.hasNext();){var f=c.next();this.rescale(f.getCoordinates())}else if(arguments[0]instanceof Array){for(var b=arguments[0],w=0;w<b.length;w++)b[w].x=b[w].x/this._scaleFactor+this._offsetX,b[w].y=b[w].y/this._scaleFactor+this._offsetY;2===b.length&&b[0].equals2D(b[1])&&Vt.out.println(b)}},Bs.prototype.scale=function(){if(Se(arguments[0],Me)){for(var c=arguments[0],f=new at,b=c.iterator();b.hasNext();){var w=b.next();f.add(new Xs(this.scale(w.getCoordinates()),w.getData()))}return f}if(arguments[0]instanceof Array){for(var A=arguments[0],B=new Array(A.length).fill(null),U=0;U<A.length;U++)B[U]=new Q(Math.round((A[U].x-this._offsetX)*this._scaleFactor),Math.round((A[U].y-this._offsetY)*this._scaleFactor),A[U].z);return It.removeRepeatedPoints(B)}},Bs.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Bs.prototype.getNodedSubstrings=function(){var c=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(c),c},Bs.prototype.computeNodes=function(c){var f=c;this._isScaled&&(f=this.scale(c)),this._noder.computeNodes(f)},Bs.prototype.interfaces_=function(){return[ku]},Bs.prototype.getClass=function(){return Bs};var Aa=function(){this._li=new ln,this._segStrings=null,this._segStrings=arguments[0]},Po={fact:{configurable:!0}};Aa.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var c=this._segStrings.iterator();c.hasNext();){var f=c.next().getCoordinates();this.checkEndPtVertexIntersections(f[0],this._segStrings),this.checkEndPtVertexIntersections(f[f.length-1],this._segStrings)}else if(2===arguments.length)for(var b=arguments[0],w=arguments[1].iterator();w.hasNext();)for(var A=w.next().getCoordinates(),B=1;B<A.length-1;B++)if(A[B].equals(b))throw new Ae("found endpt/interior pt intersection at index "+B+" :pt "+b)},Aa.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var c=this._segStrings.iterator();c.hasNext();)for(var f=c.next(),b=this._segStrings.iterator();b.hasNext();){var w=b.next();this.checkInteriorIntersections(f,w)}else if(2===arguments.length)for(var A=arguments[0],B=arguments[1],U=A.getCoordinates(),xe=B.getCoordinates(),st=0;st<U.length-1;st++)for(var $t=0;$t<xe.length-1;$t++)this.checkInteriorIntersections(A,st,B,$t);else if(4===arguments.length){var gn=arguments[0],Rn=arguments[1],Ai=arguments[2],Si=arguments[3];if(gn===Ai&&Rn===Si)return null;var Vi=gn.getCoordinates()[Rn],fr=gn.getCoordinates()[Rn+1],Co=Ai.getCoordinates()[Si],wi=Ai.getCoordinates()[Si+1];if(this._li.computeIntersection(Vi,fr,Co,wi),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Vi,fr)||this.hasInteriorIntersection(this._li,Co,wi)))throw new Ae("found non-noded intersection at "+Vi+"-"+fr+" and "+Co+"-"+wi)}},Aa.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Aa.prototype.checkCollapses=function(){if(0===arguments.length)for(var c=this._segStrings.iterator();c.hasNext();){var f=c.next();this.checkCollapses(f)}else if(1===arguments.length)for(var b=arguments[0].getCoordinates(),w=0;w<b.length-2;w++)this.checkCollapse(b[w],b[w+1],b[w+2])},Aa.prototype.hasInteriorIntersection=function(c,f,b){for(var w=0;w<c.getIntersectionNum();w++){var A=c.getIntersection(w);if(!A.equals(f)&&!A.equals(b))return!0}return!1},Aa.prototype.checkCollapse=function(c,f,b){if(c.equals(b))throw new Ae("found non-noded collapse at "+Aa.fact.createLineString([c,f,b]))},Aa.prototype.interfaces_=function(){return[]},Aa.prototype.getClass=function(){return Aa},Po.fact.get=function(){return new ge},Object.defineProperties(Aa,Po);var Na=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var c=arguments[0],f=arguments[1],b=arguments[2];if(this._originalPt=c,this._pt=c,this._scaleFactor=f,this._li=b,f<=0)throw new Z("Scale factor must be non-zero");1!==f&&(this._pt=new Q(this.scale(c.x),this.scale(c.y)),this._p0Scaled=new Q,this._p1Scaled=new Q),this.initCorners(this._pt)},kf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Na.prototype.intersectsScaled=function(c,f){var b=Math.min(c.x,f.x),w=Math.max(c.x,f.x),A=Math.min(c.y,f.y),B=Math.max(c.y,f.y),U=this._maxx<b||this._minx>w||this._maxy<A||this._miny>B;if(U)return!1;var xe=this.intersectsToleranceSquare(c,f);return Ee.isTrue(!(U&&xe),"Found bad envelope test"),xe},Na.prototype.initCorners=function(c){this._minx=c.x-.5,this._maxx=c.x+.5,this._miny=c.y-.5,this._maxy=c.y+.5,this._corner[0]=new Q(this._maxx,this._maxy),this._corner[1]=new Q(this._minx,this._maxy),this._corner[2]=new Q(this._minx,this._miny),this._corner[3]=new Q(this._maxx,this._miny)},Na.prototype.intersects=function(c,f){return 1===this._scaleFactor?this.intersectsScaled(c,f):(this.copyScaled(c,this._p0Scaled),this.copyScaled(f,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Na.prototype.scale=function(c){return Math.round(c*this._scaleFactor)},Na.prototype.getCoordinate=function(){return this._originalPt},Na.prototype.copyScaled=function(c,f){f.x=this.scale(c.x),f.y=this.scale(c.y)},Na.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var c=Na.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Tn(this._originalPt.x-c,this._originalPt.x+c,this._originalPt.y-c,this._originalPt.y+c)}return this._safeEnv},Na.prototype.intersectsPixelClosure=function(c,f){return this._li.computeIntersection(c,f,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(c,f,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Na.prototype.intersectsToleranceSquare=function(c,f){var b=!1,w=!1;return this._li.computeIntersection(c,f,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(c,f,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(b=!0),this._li.computeIntersection(c,f,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(w=!0),this._li.computeIntersection(c,f,this._corner[3],this._corner[0]),this._li.isProper()||b&&w||c.equals(this._pt)||f.equals(this._pt)))))},Na.prototype.addSnappedNode=function(c,f){var b=c.getCoordinate(f),w=c.getCoordinate(f+1);return!!this.intersects(b,w)&&(c.addIntersection(this.getCoordinate(),f),!0)},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na},kf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Na,kf);var Hu=function(){this.tempEnv1=new Tn,this.selectedSegment=new ir};Hu.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Hu.prototype.interfaces_=function(){return[]},Hu.prototype.getClass=function(){return Hu};var mh=function(){this._index=null,this._index=arguments[0]},hu={HotPixelSnapAction:{configurable:!0}};mh.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var f=arguments[0],b=arguments[1],w=arguments[2],A=f.getSafeEnvelope(),B=new hd(f,b,w);return this._index.query(A,{interfaces_:function(){return[Zl]},visitItem:function(U){U.select(A,B)}}),B.isNodeAdded()}},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},hu.HotPixelSnapAction.get=function(){return hd},Object.defineProperties(mh,hu);var hd=function(c){function f(){c.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var w=arguments[1],A=arguments[2];this._hotPixel=arguments[0],this._parentEdge=w,this._hotPixelVertexIndex=A}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.isNodeAdded=function(){return this._isNodeAdded},f.prototype.select=function(){if(2!==arguments.length)return c.prototype.select.apply(this,arguments);var w=arguments[1],A=arguments[0].getContext();if(null!==this._parentEdge&&A===this._parentEdge&&w===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(A,w)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Hu),fu=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new at};fu.prototype.processIntersections=function(c,f,b,w){if(c===b&&f===w)return null;var A=c.getCoordinates()[f],B=c.getCoordinates()[f+1],U=b.getCoordinates()[w],xe=b.getCoordinates()[w+1];if(this._li.computeIntersection(A,B,U,xe),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var st=0;st<this._li.getIntersectionNum();st++)this._interiorIntersections.add(this._li.getIntersection(st));c.addIntersections(this._li,f,0),b.addIntersections(this._li,w,1)}},fu.prototype.isDone=function(){return!1},fu.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fu.prototype.interfaces_=function(){return[Ru]},fu.prototype.getClass=function(){return fu};var Hc=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var c=arguments[0];this._pm=c,this._li=new ln,this._li.setPrecisionModel(c),this._scaleFactor=c.getScale()};Hc.prototype.checkCorrectness=function(c){var f=Xs.getNodedSubstrings(c),b=new Aa(f);try{b.checkValid()}catch(w){if(!(w instanceof kn))throw w;w.printStackTrace()}},Hc.prototype.getNodedSubstrings=function(){return Xs.getNodedSubstrings(this._nodedSegStrings)},Hc.prototype.snapRound=function(c,f){var b=this.findInteriorIntersections(c,f);this.computeIntersectionSnaps(b),this.computeVertexSnaps(c)},Hc.prototype.findInteriorIntersections=function(c,f){var b=new fu(f);return this._noder.setSegmentIntersector(b),this._noder.computeNodes(c),b.getInteriorIntersections()},Hc.prototype.computeVertexSnaps=function(){if(Se(arguments[0],Me))for(var c=arguments[0].iterator();c.hasNext();){var f=c.next();this.computeVertexSnaps(f)}else if(arguments[0]instanceof Xs)for(var b=arguments[0],w=b.getCoordinates(),A=0;A<w.length;A++){var B=new Na(w[A],this._scaleFactor,this._li);this._pointSnapper.snap(B,b,A)&&b.addIntersection(w[A],A)}},Hc.prototype.computeNodes=function(c){this._nodedSegStrings=c,this._noder=new Es,this._pointSnapper=new mh(this._noder.getIndex()),this.snapRound(c,this._li)},Hc.prototype.computeIntersectionSnaps=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next(),w=new Na(b,this._scaleFactor,this._li);this._pointSnapper.snap(w)}},Hc.prototype.interfaces_=function(){return[ku]},Hc.prototype.getClass=function(){return Hc};var Ma=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new xo,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var b=arguments[1];this._argGeom=arguments[0],this._bufParams=b}},gh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ma.prototype.bufferFixedPrecision=function(c){var f=new Bs(new Hc(new tt(1)),c.getScale()),b=new La(this._bufParams);b.setWorkingPrecisionModel(c),b.setNoder(f),this._resultGeometry=b.buffer(this._argGeom,this._distance)},Ma.prototype.bufferReducedPrecision=function(){var c=this;if(0===arguments.length){for(var f=Ma.MAX_PRECISION_DIGITS;f>=0;f--){try{c.bufferReducedPrecision(f)}catch(B){if(!(B instanceof ur))throw B;c._saveException=B}if(null!==c._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var w=Ma.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),A=new tt(w);this.bufferFixedPrecision(A)}},Ma.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var c=this._argGeom.getFactory().getPrecisionModel();c.getType()===tt.FIXED?this.bufferFixedPrecision(c):this.bufferReducedPrecision()},Ma.prototype.setQuadrantSegments=function(c){this._bufParams.setQuadrantSegments(c)},Ma.prototype.bufferOriginalPrecision=function(){try{var c=new La(this._bufParams);this._resultGeometry=c.buffer(this._argGeom,this._distance)}catch(f){if(!(f instanceof Ae))throw f;this._saveException=f}},Ma.prototype.getResultGeometry=function(c){return this._distance=c,this.computeGeometry(),this._resultGeometry},Ma.prototype.setEndCapStyle=function(c){this._bufParams.setEndCapStyle(c)},Ma.prototype.interfaces_=function(){return[]},Ma.prototype.getClass=function(){return Ma},Ma.bufferOp=function(){if(2===arguments.length){var f=arguments[1];return new Ma(arguments[0]).getResultGeometry(f)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ai&&"number"==typeof arguments[1]){var w=arguments[1],A=arguments[2],B=new Ma(arguments[0]);return B.setQuadrantSegments(A),B.getResultGeometry(w)}if(arguments[2]instanceof xo&&arguments[0]instanceof ai&&"number"==typeof arguments[1]){var xe=arguments[1];return new Ma(arguments[0],arguments[2]).getResultGeometry(xe)}}else if(4===arguments.length){var gn=arguments[1],Rn=arguments[2],Ai=arguments[3],Si=new Ma(arguments[0]);return Si.setQuadrantSegments(Rn),Si.setEndCapStyle(Ai),Si.getResultGeometry(gn)}},Ma.precisionScaleFactor=function(c,f,b){var w=c.getEnvelopeInternal(),A=Y.max(Math.abs(w.getMaxX()),Math.abs(w.getMaxY()),Math.abs(w.getMinX()),Math.abs(w.getMinY()))+2*(f>0?f:0),B=b-Math.trunc(Math.log(A)/Math.log(10)+1);return Math.pow(10,B)},gh.CAP_ROUND.get=function(){return xo.CAP_ROUND},gh.CAP_BUTT.get=function(){return xo.CAP_FLAT},gh.CAP_FLAT.get=function(){return xo.CAP_FLAT},gh.CAP_SQUARE.get=function(){return xo.CAP_SQUARE},gh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ma,gh);var Ja=function(){this._pt=[new Q,new Q],this._distance=ee.NaN,this._isNull=!0};Ja.prototype.getCoordinates=function(){return this._pt},Ja.prototype.getCoordinate=function(c){return this._pt[c]},Ja.prototype.setMinimum=function(){if(1===arguments.length){var c=arguments[0];this.setMinimum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w<this._distance&&this.initialize(f,b,w)}},Ja.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var c=arguments[0],f=arguments[1];this._pt[0].setCoordinate(c),this._pt[1].setCoordinate(f),this._distance=c.distance(f),this._isNull=!1}else if(3===arguments.length){var w=arguments[1],A=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(w),this._distance=A,this._isNull=!1}},Ja.prototype.getDistance=function(){return this._distance},Ja.prototype.setMaximum=function(){if(1===arguments.length){var c=arguments[0];this.setMaximum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w>this._distance&&this.initialize(f,b,w)}},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja};var ec=function(){};ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeDistance=function(){if(arguments[2]instanceof Ja&&arguments[0]instanceof rr&&arguments[1]instanceof Q)for(var f=arguments[1],b=arguments[2],w=arguments[0].getCoordinates(),A=new ir,B=0;B<w.length-1;B++){A.setCoordinates(w[B],w[B+1]);var U=A.closestPoint(f);b.setMinimum(U,f)}else if(arguments[2]instanceof Ja&&arguments[0]instanceof so&&arguments[1]instanceof Q){var xe=arguments[0],st=arguments[1],$t=arguments[2];ec.computeDistance(xe.getExteriorRing(),st,$t);for(var gn=0;gn<xe.getNumInteriorRing();gn++)ec.computeDistance(xe.getInteriorRingN(gn),st,$t)}else if(arguments[2]instanceof Ja&&arguments[0]instanceof ai&&arguments[1]instanceof Q){var Rn=arguments[0],Ai=arguments[1],Si=arguments[2];if(Rn instanceof rr)ec.computeDistance(Rn,Ai,Si);else if(Rn instanceof so)ec.computeDistance(Rn,Ai,Si);else if(Rn instanceof Vn)for(var Vi=Rn,fr=0;fr<Vi.getNumGeometries();fr++){var Co=Vi.getGeometryN(fr);ec.computeDistance(Co,Ai,Si)}else Si.setMinimum(Rn.getCoordinate(),Ai)}else if(arguments[2]instanceof Ja&&arguments[0]instanceof ir&&arguments[1]instanceof Q){var El=arguments[1],_u=arguments[2],Wc=arguments[0].closestPoint(El);_u.setMinimum(Wc,El)}};var qc=function(c){this._maxPtDist=new Ja,this._inputGeom=c||null},Pf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};qc.prototype.computeMaxMidpointDistance=function(c){var f=new Ou(this._inputGeom);c.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},qc.prototype.computeMaxVertexDistance=function(c){var f=new qu(this._inputGeom);c.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())},qc.prototype.findDistance=function(c){return this.computeMaxVertexDistance(c),this.computeMaxMidpointDistance(c),this._maxPtDist.getDistance()},qc.prototype.getDistancePoints=function(){return this._maxPtDist},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc},Pf.MaxPointDistanceFilter.get=function(){return qu},Pf.MaxMidpointDistanceFilter.get=function(){return Ou},Object.defineProperties(qc,Pf);var qu=function(c){this._maxPtDist=new Ja,this._minPtDist=new Ja,this._geom=c||null};qu.prototype.filter=function(c){this._minPtDist.initialize(),ec.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},qu.prototype.getMaxPointDistance=function(){return this._maxPtDist},qu.prototype.interfaces_=function(){return[Gi]},qu.prototype.getClass=function(){return qu};var Ou=function(c){this._maxPtDist=new Ja,this._minPtDist=new Ja,this._geom=c||null};Ou.prototype.filter=function(c,f){if(0===f)return null;var b=c.getCoordinate(f-1),w=c.getCoordinate(f),A=new Q((b.x+w.x)/2,(b.y+w.y)/2);this._minPtDist.initialize(),ec.computeDistance(this._geom,A,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ou.prototype.isDone=function(){return!1},Ou.prototype.isGeometryChanged=function(){return!1},Ou.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ou.prototype.interfaces_=function(){return[Sn]},Ou.prototype.getClass=function(){return Ou};var hc=function(c){this._comps=c||null};hc.prototype.filter=function(c){c instanceof so&&this._comps.add(c)},hc.prototype.interfaces_=function(){return[an]},hc.prototype.getClass=function(){return hc},hc.getPolygons=function(){if(1===arguments.length)return hc.getPolygons(arguments[0],new at);if(2===arguments.length){var f=arguments[0],b=arguments[1];return f instanceof so?b.add(f):f instanceof Vn&&f.apply(new hc(b)),b}};var ul=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var b=arguments[1];this._lines=arguments[0],this._isForcedToLineString=b}};ul.prototype.filter=function(c){if(this._isForcedToLineString&&c instanceof No){var f=c.getFactory().createLineString(c.getCoordinateSequence());return this._lines.add(f),null}c instanceof rr&&this._lines.add(c)},ul.prototype.setForceToLineString=function(c){this._isForcedToLineString=c},ul.prototype.interfaces_=function(){return[or]},ul.prototype.getClass=function(){return ul},ul.getGeometry=function(){if(1===arguments.length){var c=arguments[0];return c.getFactory().buildGeometry(ul.getLines(c))}if(2===arguments.length){var f=arguments[0],b=arguments[1];return f.getFactory().buildGeometry(ul.getLines(f,b))}},ul.getLines=function(){if(1===arguments.length)return ul.getLines(arguments[0],!1);if(2===arguments.length){if(Se(arguments[0],Me)&&Se(arguments[1],Me)){for(var b=arguments[1],w=arguments[0].iterator();w.hasNext();){var A=w.next();ul.getLines(A,b)}return b}if(arguments[0]instanceof ai&&"boolean"==typeof arguments[1]){var B=arguments[0],U=arguments[1],xe=new at;return B.apply(new ul(xe,U)),xe}if(arguments[0]instanceof ai&&Se(arguments[1],Me)){var st=arguments[0],$t=arguments[1];return st instanceof rr?$t.add(st):st.apply(new ul($t)),$t}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Se(arguments[0],Me)&&Se(arguments[1],Me)){for(var Rn=arguments[1],Ai=arguments[2],Si=arguments[0].iterator();Si.hasNext();){var Vi=Si.next();ul.getLines(Vi,Rn,Ai)}return Rn}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ai&&Se(arguments[1],Me)){var Co=arguments[1];return arguments[0].apply(new ul(Co,arguments[2])),Co}}};var Fa=function(){if(this._boundaryRule=gr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var c=arguments[0];if(null===c)throw new Z("Rule must be non-null");this._boundaryRule=c}};Fa.prototype.locateInternal=function(){if(arguments[0]instanceof Q&&arguments[1]instanceof so){var c=arguments[0],f=arguments[1];if(f.isEmpty())return ie.EXTERIOR;var b=f.getExteriorRing(),w=this.locateInPolygonRing(c,b);if(w===ie.EXTERIOR)return ie.EXTERIOR;if(w===ie.BOUNDARY)return ie.BOUNDARY;for(var A=0;A<f.getNumInteriorRing();A++){var B=f.getInteriorRingN(A),U=this.locateInPolygonRing(c,B);if(U===ie.INTERIOR)return ie.EXTERIOR;if(U===ie.BOUNDARY)return ie.BOUNDARY}return ie.INTERIOR}if(arguments[0]instanceof Q&&arguments[1]instanceof rr){var xe=arguments[0],st=arguments[1];if(!st.getEnvelopeInternal().intersects(xe))return ie.EXTERIOR;var $t=st.getCoordinates();return st.isClosed()||!xe.equals($t[0])&&!xe.equals($t[$t.length-1])?yn.isOnLine(xe,$t)?ie.INTERIOR:ie.EXTERIOR:ie.BOUNDARY}if(arguments[0]instanceof Q&&arguments[1]instanceof Vr){var gn=arguments[0];return arguments[1].getCoordinate().equals2D(gn)?ie.INTERIOR:ie.EXTERIOR}},Fa.prototype.locateInPolygonRing=function(c,f){return f.getEnvelopeInternal().intersects(c)?yn.locatePointInRing(c,f.getCoordinates()):ie.EXTERIOR},Fa.prototype.intersects=function(c,f){return this.locate(c,f)!==ie.EXTERIOR},Fa.prototype.updateLocationInfo=function(c){c===ie.INTERIOR&&(this._isIn=!0),c===ie.BOUNDARY&&this._numBoundaries++},Fa.prototype.computeLocation=function(c,f){if(f instanceof Vr&&this.updateLocationInfo(this.locateInternal(c,f)),f instanceof rr)this.updateLocationInfo(this.locateInternal(c,f));else if(f instanceof so)this.updateLocationInfo(this.locateInternal(c,f));else if(f instanceof Qn)for(var b=f,w=0;w<b.getNumGeometries();w++){var A=b.getGeometryN(w);this.updateLocationInfo(this.locateInternal(c,A))}else if(f instanceof no)for(var B=f,U=0;U<B.getNumGeometries();U++){var xe=B.getGeometryN(U);this.updateLocationInfo(this.locateInternal(c,xe))}else if(f instanceof Vn)for(var st=new $l(f);st.hasNext();){var $t=st.next();$t!==f&&this.computeLocation(c,$t)}},Fa.prototype.locate=function(c,f){return f.isEmpty()?ie.EXTERIOR:f instanceof rr||f instanceof so?this.locateInternal(c,f):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(c,f),this._boundaryRule.isInBoundary(this._numBoundaries)?ie.BOUNDARY:this._numBoundaries>0||this._isIn?ie.INTERIOR:ie.EXTERIOR)},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa};var Ml=function c(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)c.call(this,arguments[0],c.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var A=arguments[1],B=arguments[2];this._component=arguments[0],this._segIndex=A,this._pt=B}},hm={INSIDE_AREA:{configurable:!0}};Ml.prototype.isInsideArea=function(){return this._segIndex===Ml.INSIDE_AREA},Ml.prototype.getCoordinate=function(){return this._pt},Ml.prototype.getGeometryComponent=function(){return this._component},Ml.prototype.getSegmentIndex=function(){return this._segIndex},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml},hm.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ml,hm);var fd=function(c){this._pts=c||null};fd.prototype.filter=function(c){c instanceof Vr&&this._pts.add(c)},fd.prototype.interfaces_=function(){return[an]},fd.prototype.getClass=function(){return fd},fd.getPoints=function(){if(1===arguments.length){var c=arguments[0];return c instanceof Vr?br.singletonList(c):fd.getPoints(c,new at)}if(2===arguments.length){var f=arguments[0],b=arguments[1];return f instanceof Vr?b.add(f):f instanceof Vn&&f.apply(new fd(b)),b}};var zd=function(){this._locations=null,this._locations=arguments[0]};zd.prototype.filter=function(c){(c instanceof Vr||c instanceof rr||c instanceof so)&&this._locations.add(new Ml(c,0,c.getCoordinate()))},zd.prototype.interfaces_=function(){return[an]},zd.prototype.getClass=function(){return zd},zd.getLocations=function(c){var f=new at;return c.apply(new zd(f)),f};var Ba=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Fa,this._minDistanceLocation=null,this._minDistance=ee.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var b=arguments[0],w=arguments[1],A=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=b,this._geom[1]=w,this._terminateDistance=A}};Ba.prototype.computeContainmentDistance=function(){if(0===arguments.length){var c=new Array(2).fill(null);if(this.computeContainmentDistance(0,c),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,c)}else if(2===arguments.length){var f=arguments[0],b=arguments[1],w=1-f,A=hc.getPolygons(this._geom[f]);if(A.size()>0){var B=zd.getLocations(this._geom[w]);if(this.computeContainmentDistance(B,A,b),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[w]=b[0],this._minDistanceLocation[f]=b[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Se(arguments[0],Ct)&&Se(arguments[1],Ct)){for(var U=arguments[0],xe=arguments[1],st=arguments[2],$t=0;$t<U.size();$t++)for(var gn=U.get($t),Rn=0;Rn<xe.size();Rn++)if(this.computeContainmentDistance(gn,xe.get(Rn),st),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ml&&arguments[1]instanceof so){var Ai=arguments[0],Si=arguments[1],Vi=arguments[2],fr=Ai.getCoordinate();if(ie.EXTERIOR!==this._ptLocator.locate(fr,Si))return this._minDistance=0,Vi[0]=Ai,Vi[1]=new Ml(Si,fr),null}},Ba.prototype.computeMinDistanceLinesPoints=function(c,f,b){for(var w=0;w<c.size();w++)for(var A=c.get(w),B=0;B<f.size();B++){var U=f.get(B);if(this.computeMinDistance(A,U,b),this._minDistance<=this._terminateDistance)return null}},Ba.prototype.computeFacetDistance=function(){var c=new Array(2).fill(null),f=ul.getLines(this._geom[0]),b=ul.getLines(this._geom[1]),w=fd.getPoints(this._geom[0]),A=fd.getPoints(this._geom[1]);return this.computeMinDistanceLines(f,b,c),this.updateMinDistance(c,!1),this._minDistance<=this._terminateDistance?null:(c[0]=null,c[1]=null,this.computeMinDistanceLinesPoints(f,A,c),this.updateMinDistance(c,!1),this._minDistance<=this._terminateDistance?null:(c[0]=null,c[1]=null,this.computeMinDistanceLinesPoints(b,w,c),this.updateMinDistance(c,!0),this._minDistance<=this._terminateDistance?null:(c[0]=null,c[1]=null,this.computeMinDistancePoints(w,A,c),void this.updateMinDistance(c,!1))))},Ba.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ba.prototype.updateMinDistance=function(c,f){if(null===c[0])return null;f?(this._minDistanceLocation[0]=c[1],this._minDistanceLocation[1]=c[0]):(this._minDistanceLocation[0]=c[0],this._minDistanceLocation[1]=c[1])},Ba.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ba.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof rr&&arguments[1]instanceof Vr){var c=arguments[0],f=arguments[1],b=arguments[2];if(c.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var w=c.getCoordinates(),A=f.getCoordinate(),B=0;B<w.length-1;B++){var U=yn.distancePointLine(A,w[B],w[B+1]);if(U<this._minDistance){this._minDistance=U;var xe=new ir(w[B],w[B+1]).closestPoint(A);b[0]=new Ml(c,B,xe),b[1]=new Ml(f,0,A)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof rr&&arguments[1]instanceof rr){var st=arguments[0],$t=arguments[1],gn=arguments[2];if(st.getEnvelopeInternal().distance($t.getEnvelopeInternal())>this._minDistance)return null;for(var Rn=st.getCoordinates(),Ai=$t.getCoordinates(),Si=0;Si<Rn.length-1;Si++)for(var Vi=0;Vi<Ai.length-1;Vi++){var fr=yn.distanceLineLine(Rn[Si],Rn[Si+1],Ai[Vi],Ai[Vi+1]);if(fr<this._minDistance){this._minDistance=fr;var Co=new ir(Rn[Si],Rn[Si+1]),wi=new ir(Ai[Vi],Ai[Vi+1]),El=Co.closestPoints(wi);gn[0]=new Ml(st,Si,El[0]),gn[1]=new Ml($t,Vi,El[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ba.prototype.computeMinDistancePoints=function(c,f,b){for(var w=0;w<c.size();w++)for(var A=c.get(w),B=0;B<f.size();B++){var U=f.get(B),xe=A.getCoordinate().distance(U.getCoordinate());if(xe<this._minDistance&&(this._minDistance=xe,b[0]=new Ml(A,0,A.getCoordinate()),b[1]=new Ml(U,0,U.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ba.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Z("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ba.prototype.computeMinDistanceLines=function(c,f,b){for(var w=0;w<c.size();w++)for(var A=c.get(w),B=0;B<f.size();B++){var U=f.get(B);if(this.computeMinDistance(A,U,b),this._minDistance<=this._terminateDistance)return null}},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba},Ba.distance=function(c,f){return new Ba(c,f).distance()},Ba.isWithinDistance=function(c,f,b){return new Ba(c,f,b).distance()<=b},Ba.nearestPoints=function(c,f){return new Ba(c,f).nearestPoints()};var ka=function(){this._pt=[new Q,new Q],this._distance=ee.NaN,this._isNull=!0};ka.prototype.getCoordinates=function(){return this._pt},ka.prototype.getCoordinate=function(c){return this._pt[c]},ka.prototype.setMinimum=function(){if(1===arguments.length){var c=arguments[0];this.setMinimum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w<this._distance&&this.initialize(f,b,w)}},ka.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var c=arguments[0],f=arguments[1];this._pt[0].setCoordinate(c),this._pt[1].setCoordinate(f),this._distance=c.distance(f),this._isNull=!1}else if(3===arguments.length){var w=arguments[1],A=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(w),this._distance=A,this._isNull=!1}},ka.prototype.toString=function(){return At.toLineString(this._pt[0],this._pt[1])},ka.prototype.getDistance=function(){return this._distance},ka.prototype.setMaximum=function(){if(1===arguments.length){var c=arguments[0];this.setMaximum(c._pt[0],c._pt[1])}else if(2===arguments.length){var f=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(f,b),null;var w=f.distance(b);w>this._distance&&this.initialize(f,b,w)}},ka.prototype.interfaces_=function(){return[]},ka.prototype.getClass=function(){return ka};var Mc=function(){};Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc},Mc.computeDistance=function(){if(arguments[2]instanceof ka&&arguments[0]instanceof rr&&arguments[1]instanceof Q)for(var c=arguments[0],f=arguments[1],b=arguments[2],w=new ir,A=c.getCoordinates(),B=0;B<A.length-1;B++){w.setCoordinates(A[B],A[B+1]);var U=w.closestPoint(f);b.setMinimum(U,f)}else if(arguments[2]instanceof ka&&arguments[0]instanceof so&&arguments[1]instanceof Q){var xe=arguments[0],st=arguments[1],$t=arguments[2];Mc.computeDistance(xe.getExteriorRing(),st,$t);for(var gn=0;gn<xe.getNumInteriorRing();gn++)Mc.computeDistance(xe.getInteriorRingN(gn),st,$t)}else if(arguments[2]instanceof ka&&arguments[0]instanceof ai&&arguments[1]instanceof Q){var Rn=arguments[0],Ai=arguments[1],Si=arguments[2];if(Rn instanceof rr)Mc.computeDistance(Rn,Ai,Si);else if(Rn instanceof so)Mc.computeDistance(Rn,Ai,Si);else if(Rn instanceof Vn)for(var Vi=Rn,fr=0;fr<Vi.getNumGeometries();fr++){var Co=Vi.getGeometryN(fr);Mc.computeDistance(Co,Ai,Si)}else Si.setMinimum(Rn.getCoordinate(),Ai)}else if(arguments[2]instanceof ka&&arguments[0]instanceof ir&&arguments[1]instanceof Q){var El=arguments[1],_u=arguments[2],Wc=arguments[0].closestPoint(El);_u.setMinimum(Wc,El)}};var fc=function(){this._g0=null,this._g1=null,this._ptDist=new ka,this._densifyFrac=0;var f=arguments[1];this._g0=arguments[0],this._g1=f},Lu={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};fc.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},fc.prototype.setDensifyFraction=function(c){if(c>1||c<=0)throw new Z("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=c},fc.prototype.compute=function(c,f){this.computeOrientedDistance(c,f,this._ptDist),this.computeOrientedDistance(f,c,this._ptDist)},fc.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},fc.prototype.computeOrientedDistance=function(c,f,b){var w=new Wu(f);if(c.apply(w),b.setMaximum(w.getMaxPointDistance()),this._densifyFrac>0){var A=new qn(f,this._densifyFrac);c.apply(A),b.setMaximum(A.getMaxPointDistance())}},fc.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},fc.distance=function(){if(2===arguments.length)return new fc(arguments[0],arguments[1]).distance();if(3===arguments.length){var A=arguments[2],B=new fc(arguments[0],arguments[1]);return B.setDensifyFraction(A),B.distance()}},Lu.MaxPointDistanceFilter.get=function(){return Wu},Lu.MaxDensifiedByFractionDistanceFilter.get=function(){return qn},Object.defineProperties(fc,Lu);var Wu=function(){this._maxPtDist=new ka,this._minPtDist=new ka,this._euclideanDist=new Mc,this._geom=null,this._geom=arguments[0]};Wu.prototype.filter=function(c){this._minPtDist.initialize(),Mc.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Wu.prototype.getMaxPointDistance=function(){return this._maxPtDist},Wu.prototype.interfaces_=function(){return[Gi]},Wu.prototype.getClass=function(){return Wu};var qn=function(){this._maxPtDist=new ka,this._minPtDist=new ka,this._geom=null,this._numSubSegs=0;var f=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/f))};qn.prototype.filter=function(c,f){if(0===f)return null;for(var b=c.getCoordinate(f-1),w=c.getCoordinate(f),A=(w.x-b.x)/this._numSubSegs,B=(w.y-b.y)/this._numSubSegs,U=0;U<this._numSubSegs;U++){var $t=new Q(b.x+U*A,b.y+U*B);this._minPtDist.initialize(),Mc.computeDistance(this._geom,$t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},qn.prototype.isDone=function(){return!1},qn.prototype.isGeometryChanged=function(){return!1},qn.prototype.getMaxPointDistance=function(){return this._maxPtDist},qn.prototype.interfaces_=function(){return[Sn]},qn.prototype.getClass=function(){return qn};var dl=function(c,f,b){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=c||null,this._bufDistance=f||null,this._result=b||null},fp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};dl.prototype.checkMaximumDistance=function(c,f,b){var w=new fc(f,c);if(w.setDensifyFraction(.25),this._maxDistanceFound=w.orientedDistance(),this._maxDistanceFound>b){this._isValid=!1;var A=w.getCoordinates();this._errorLocation=A[1],this._errorIndicator=c.getFactory().createLineString(A),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+At.toLineString(A[0],A[1])+")"}},dl.prototype.isValid=function(){var c=Math.abs(this._bufDistance),f=dl.MAX_DISTANCE_DIFF_FRAC*c;return this._minValidDistance=c-f,this._maxValidDistance=c+f,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),dl.VERBOSE&&Vt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},dl.prototype.checkNegativeValid=function(){if(!(this._input instanceof so||this._input instanceof no||this._input instanceof Vn))return null;var c=this.getPolygonLines(this._input);if(this.checkMinimumDistance(c,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(c,this._result,this._maxValidDistance)},dl.prototype.getErrorIndicator=function(){return this._errorIndicator},dl.prototype.checkMinimumDistance=function(c,f,b){var w=new Ba(c,f,b);if(this._minDistanceFound=w.distance(),this._minDistanceFound<b){this._isValid=!1;var A=w.nearestPoints();this._errorLocation=w.nearestPoints()[1],this._errorIndicator=c.getFactory().createLineString(A),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+At.toLineString(A[0],A[1])+" )"}},dl.prototype.checkPositiveValid=function(){var c=this._result.getBoundary();if(this.checkMinimumDistance(this._input,c,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,c,this._maxValidDistance)},dl.prototype.getErrorLocation=function(){return this._errorLocation},dl.prototype.getPolygonLines=function(c){for(var f=new at,b=new ul(f),w=hc.getPolygons(c).iterator();w.hasNext();)w.next().apply(b);return c.getFactory().buildGeometry(f)},dl.prototype.getErrorMessage=function(){return this._errMsg},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},fp.VERBOSE.get=function(){return!1},fp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(dl,fp);var ra=function(c,f,b){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=c||null,this._distance=f||null,this._result=b||null},co={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ra.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ra.prototype.checkEnvelope=function(){if(this._distance<0)return null;var c=this._distance*ra.MAX_ENV_DIFF_FRAC;0===c&&(c=.001);var f=new Tn(this._input.getEnvelopeInternal());f.expandBy(this._distance);var b=new Tn(this._result.getEnvelopeInternal());b.expandBy(c),b.contains(f)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(b)),this.report("Envelope")},ra.prototype.checkDistance=function(){var c=new dl(this._input,this._distance,this._result);c.isValid()||(this._isValid=!1,this._errorMsg=c.getErrorMessage(),this._errorLocation=c.getErrorLocation(),this._errorIndicator=c.getErrorIndicator()),this.report("Distance")},ra.prototype.checkArea=function(){var c=this._input.getArea(),f=this._result.getArea();this._distance>0&&c>f&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&c<f&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ra.prototype.checkPolygonal=function(){this._result instanceof so||this._result instanceof no||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ra.prototype.getErrorIndicator=function(){return this._errorIndicator},ra.prototype.getErrorLocation=function(){return this._errorLocation},ra.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ra.prototype.report=function(c){if(!ra.VERBOSE)return null;Vt.out.println("Check "+c+": "+(this._isValid?"passed":"FAILED"))},ra.prototype.getErrorMessage=function(){return this._errorMsg},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra},ra.isValidMsg=function(c,f,b){var w=new ra(c,f,b);return w.isValid()?null:w.getErrorMessage()},ra.isValid=function(c,f,b){return!!new ra(c,f,b).isValid()},co.VERBOSE.get=function(){return!1},co.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ra,co);var pc=function(){this._pts=null,this._data=null;var f=arguments[1];this._pts=arguments[0],this._data=f};pc.prototype.getCoordinates=function(){return this._pts},pc.prototype.size=function(){return this._pts.length},pc.prototype.getCoordinate=function(c){return this._pts[c]},pc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},pc.prototype.getSegmentOctant=function(c){return c===this._pts.length-1?-1:Mu.octant(this.getCoordinate(c),this.getCoordinate(c+1))},pc.prototype.setData=function(c){this._data=c},pc.prototype.getData=function(){return this._data},pc.prototype.toString=function(){return At.toLineString(new ko(this._pts))},pc.prototype.interfaces_=function(){return[Bl]},pc.prototype.getClass=function(){return pc};var ma=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new at,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};ma.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ma.prototype.setCheckEndSegmentsOnly=function(c){this._isCheckEndSegmentsOnly=c},ma.prototype.getIntersectionSegments=function(){return this._intSegments},ma.prototype.count=function(){return this._intersectionCount},ma.prototype.getIntersections=function(){return this._intersections},ma.prototype.setFindAllIntersections=function(c){this._findAllIntersections=c},ma.prototype.setKeepIntersections=function(c){this._keepIntersections=c},ma.prototype.processIntersections=function(c,f,b,w){if(!this._findAllIntersections&&this.hasIntersection()||c===b&&f===w||this._isCheckEndSegmentsOnly&&!this.isEndSegment(c,f)&&!this.isEndSegment(b,w))return null;var A=c.getCoordinates()[f],B=c.getCoordinates()[f+1],U=b.getCoordinates()[w],xe=b.getCoordinates()[w+1];this._li.computeIntersection(A,B,U,xe),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=A,this._intSegments[1]=B,this._intSegments[2]=U,this._intSegments[3]=xe,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ma.prototype.isEndSegment=function(c,f){return 0===f||f>=c.size()-2},ma.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ma.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ma.prototype.interfaces_=function(){return[Ru]},ma.prototype.getClass=function(){return ma},ma.createAllIntersectionsFinder=function(c){var f=new ma(c);return f.setFindAllIntersections(!0),f},ma.createAnyIntersectionFinder=function(c){return new ma(c)},ma.createIntersectionCounter=function(c){var f=new ma(c);return f.setFindAllIntersections(!0),f.setKeepIntersections(!1),f};var On=function(){this._li=new ln,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};On.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},On.prototype.getIntersections=function(){return this._segInt.getIntersections()},On.prototype.isValid=function(){return this.execute(),this._isValid},On.prototype.setFindAllIntersections=function(c){this._findAllIntersections=c},On.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ma(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var c=new Es;if(c.setSegmentIntersector(this._segInt),c.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},On.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ur(this.getErrorMessage(),this._segInt.getInteriorIntersection())},On.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var c=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+At.toLineString(c[0],c[1])+" and "+At.toLineString(c[2],c[3])},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.computeIntersections=function(c){var f=new On(c);return f.setFindAllIntersections(!0),f.isValid(),f.getIntersections()};var ga=function c(){this._nv=null,this._nv=new On(c.toSegmentStrings(arguments[0]))};ga.prototype.checkValid=function(){this._nv.checkValid()},ga.prototype.interfaces_=function(){return[]},ga.prototype.getClass=function(){return ga},ga.toSegmentStrings=function(c){for(var f=new at,b=c.iterator();b.hasNext();){var w=b.next();f.add(new pc(w.getCoordinates(),w))}return f},ga.checkValid=function(c){new ga(c).checkValid()};var go=function(c){this._mapOp=c};go.prototype.map=function(c){for(var f=new at,b=0;b<c.getNumGeometries();b++){var w=this._mapOp.map(c.getGeometryN(b));w.isEmpty()||f.add(w)}return c.getFactory().createGeometryCollection(ge.toGeometryArray(f))},go.prototype.interfaces_=function(){return[]},go.prototype.getClass=function(){return go},go.map=function(c,f){return new go(f).map(c)};var Cs=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new at,this._resultLineList=new at;var f=arguments[1],b=arguments[2];this._op=arguments[0],this._geometryFactory=f,this._ptLocator=b};Cs.prototype.collectLines=function(c){for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var b=f.next();this.collectLineEdge(b,c,this._lineEdgesList),this.collectBoundaryTouchEdge(b,c,this._lineEdgesList)}},Cs.prototype.labelIsolatedLine=function(c,f){var b=this._ptLocator.locate(c.getCoordinate(),this._op.getArgGeometry(f));c.getLabel().setLocation(f,b)},Cs.prototype.build=function(c){return this.findCoveredLineEdges(),this.collectLines(c),this.buildLines(c),this._resultLineList},Cs.prototype.collectLineEdge=function(c,f,b){var w=c.getLabel(),A=c.getEdge();c.isLineEdge()&&(c.isVisited()||!Pi.isResultOfOp(w,f)||A.isCovered()||(b.add(A),c.setVisitedEdge(!0)))},Cs.prototype.findCoveredLineEdges=function(){for(var c=this._op.getGraph().getNodes().iterator();c.hasNext();)c.next().getEdges().findCoveredLineEdges();for(var f=this._op.getGraph().getEdgeEnds().iterator();f.hasNext();){var b=f.next(),w=b.getEdge();if(b.isLineEdge()&&!w.isCoveredSet()){var A=this._op.isCoveredByA(b.getCoordinate());w.setCovered(A)}}},Cs.prototype.labelIsolatedLines=function(c){for(var f=c.iterator();f.hasNext();){var b=f.next(),w=b.getLabel();b.isIsolated()&&(w.isNull(0)?this.labelIsolatedLine(b,0):this.labelIsolatedLine(b,1))}},Cs.prototype.buildLines=function(c){for(var f=this._lineEdgesList.iterator();f.hasNext();){var b=f.next(),w=this._geometryFactory.createLineString(b.getCoordinates());this._resultLineList.add(w),b.setInResult(!0)}},Cs.prototype.collectBoundaryTouchEdge=function(c,f,b){var w=c.getLabel();return c.isLineEdge()||c.isVisited()||c.isInteriorAreaEdge()||c.getEdge().isInResult()?null:(Ee.isTrue(!(c.isInResult()||c.getSym().isInResult())||!c.getEdge().isInResult()),void(Pi.isResultOfOp(w,f)&&f===Pi.INTERSECTION&&(b.add(c.getEdge()),c.setVisitedEdge(!0))))},Cs.prototype.interfaces_=function(){return[]},Cs.prototype.getClass=function(){return Cs};var oa=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new at;var f=arguments[1];this._op=arguments[0],this._geometryFactory=f};oa.prototype.filterCoveredNodeToPoint=function(c){var f=c.getCoordinate();if(!this._op.isCoveredByLA(f)){var b=this._geometryFactory.createPoint(f);this._resultPointList.add(b)}},oa.prototype.extractNonCoveredResultNodes=function(c){for(var f=this._op.getGraph().getNodes().iterator();f.hasNext();){var b=f.next();if(!(b.isInResult()||b.isIncidentEdgeInResult()||0!==b.getEdges().getDegree()&&c!==Pi.INTERSECTION)){var w=b.getLabel();Pi.isResultOfOp(w,c)&&this.filterCoveredNodeToPoint(b)}}},oa.prototype.build=function(c){return this.extractNonCoveredResultNodes(c),this._resultPointList},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa};var za=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};za.prototype.transformPoint=function(c,f){return this._factory.createPoint(this.transformCoordinates(c.getCoordinateSequence(),c))},za.prototype.transformPolygon=function(c,f){var b=!0,w=this.transformLinearRing(c.getExteriorRing(),c);null!==w&&w instanceof No&&!w.isEmpty()||(b=!1);for(var A=new at,B=0;B<c.getNumInteriorRing();B++){var U=this.transformLinearRing(c.getInteriorRingN(B),c);null===U||U.isEmpty()||(U instanceof No||(b=!1),A.add(U))}if(b)return this._factory.createPolygon(w,A.toArray([]));var xe=new at;return null!==w&&xe.add(w),xe.addAll(A),this._factory.buildGeometry(xe)},za.prototype.createCoordinateSequence=function(c){return this._factory.getCoordinateSequenceFactory().create(c)},za.prototype.getInputGeometry=function(){return this._inputGeom},za.prototype.transformMultiLineString=function(c,f){for(var b=new at,w=0;w<c.getNumGeometries();w++){var A=this.transformLineString(c.getGeometryN(w),c);null!==A&&(A.isEmpty()||b.add(A))}return this._factory.buildGeometry(b)},za.prototype.transformCoordinates=function(c,f){return this.copy(c)},za.prototype.transformLineString=function(c,f){return this._factory.createLineString(this.transformCoordinates(c.getCoordinateSequence(),c))},za.prototype.transformMultiPoint=function(c,f){for(var b=new at,w=0;w<c.getNumGeometries();w++){var A=this.transformPoint(c.getGeometryN(w),c);null!==A&&(A.isEmpty()||b.add(A))}return this._factory.buildGeometry(b)},za.prototype.transformMultiPolygon=function(c,f){for(var b=new at,w=0;w<c.getNumGeometries();w++){var A=this.transformPolygon(c.getGeometryN(w),c);null!==A&&(A.isEmpty()||b.add(A))}return this._factory.buildGeometry(b)},za.prototype.copy=function(c){return c.copy()},za.prototype.transformGeometryCollection=function(c,f){for(var b=new at,w=0;w<c.getNumGeometries();w++){var A=this.transform(c.getGeometryN(w));null!==A&&(this._pruneEmptyGeometry&&A.isEmpty()||b.add(A))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ge.toGeometryArray(b)):this._factory.buildGeometry(b)},za.prototype.transform=function(c){if(this._inputGeom=c,this._factory=c.getFactory(),c instanceof Vr)return this.transformPoint(c,null);if(c instanceof Ns)return this.transformMultiPoint(c,null);if(c instanceof No)return this.transformLinearRing(c,null);if(c instanceof rr)return this.transformLineString(c,null);if(c instanceof Qn)return this.transformMultiLineString(c,null);if(c instanceof so)return this.transformPolygon(c,null);if(c instanceof no)return this.transformMultiPolygon(c,null);if(c instanceof Vn)return this.transformGeometryCollection(c,null);throw new Z("Unknown Geometry subtype: "+c.getClass().getName())},za.prototype.transformLinearRing=function(c,f){var b=this.transformCoordinates(c.getCoordinateSequence(),c);if(null===b)return this._factory.createLinearRing(null);var w=b.size();return w>0&&w<4&&!this._preserveType?this._factory.createLineString(b):this._factory.createLinearRing(b)},za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za};var sa=function c(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ir,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof rr&&"number"==typeof arguments[1]){var b=arguments[1];c.call(this,arguments[0].getCoordinates(),b)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var w=arguments[0],A=arguments[1];this._srcPts=w,this._isClosed=c.isClosed(w),this._snapTolerance=A}};sa.prototype.snapVertices=function(c,f){for(var b=this._isClosed?c.size()-1:c.size(),w=0;w<b;w++){var A=c.get(w),B=this.findSnapForVertex(A,f);null!==B&&(c.set(w,new Q(B)),0===w&&this._isClosed&&c.set(c.size()-1,new Q(B)))}},sa.prototype.findSnapForVertex=function(c,f){for(var b=0;b<f.length;b++){if(c.equals2D(f[b]))return null;if(c.distance(f[b])<this._snapTolerance)return f[b]}return null},sa.prototype.snapTo=function(c){var f=new Zt(this._srcPts);return this.snapVertices(f,c),this.snapSegments(f,c),f.toCoordinateArray()},sa.prototype.snapSegments=function(c,f){if(0===f.length)return null;var b=f.length;f[0].equals2D(f[f.length-1])&&(b=f.length-1);for(var w=0;w<b;w++){var A=f[w],B=this.findSegmentIndexToSnap(A,c);B>=0&&c.add(B+1,new Q(A),!1)}},sa.prototype.findSegmentIndexToSnap=function(c,f){for(var b=ee.MAX_VALUE,w=-1,A=0;A<f.size()-1;A++){if(this._seg.p0=f.get(A),this._seg.p1=f.get(A+1),this._seg.p0.equals2D(c)||this._seg.p1.equals2D(c)){if(this._allowSnappingToSourceVertices)continue;return-1}var B=this._seg.distance(c);B<this._snapTolerance&&B<b&&(b=B,w=A)}return w},sa.prototype.setAllowSnappingToSourceVertices=function(c){this._allowSnappingToSourceVertices=c},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa},sa.isClosed=function(c){return!(c.length<=1)&&c[0].equals2D(c[c.length-1])};var Fo=function(c){this._srcGeom=c||null},pp={SNAP_PRECISION_FACTOR:{configurable:!0}};Fo.prototype.snapTo=function(c,f){var b=this.extractTargetCoordinates(c);return new $d(f,b).transform(this._srcGeom)},Fo.prototype.snapToSelf=function(c,f){var b=this.extractTargetCoordinates(this._srcGeom),w=new $d(c,b,!0).transform(this._srcGeom),A=w;return f&&Se(A,To)&&(A=w.buffer(0)),A},Fo.prototype.computeSnapTolerance=function(c){return this.computeMinimumSegmentLength(c)/10},Fo.prototype.extractTargetCoordinates=function(c){for(var f=new je,b=c.getCoordinates(),w=0;w<b.length;w++)f.add(b[w]);return f.toArray(new Array(0).fill(null))},Fo.prototype.computeMinimumSegmentLength=function(c){for(var f=ee.MAX_VALUE,b=0;b<c.length-1;b++){var w=c[b].distance(c[b+1]);w<f&&(f=w)}return f},Fo.prototype.interfaces_=function(){return[]},Fo.prototype.getClass=function(){return Fo},Fo.snap=function(c,f,b){var w=new Array(2).fill(null),A=new Fo(c);w[0]=A.snapTo(f,b);var B=new Fo(f);return w[1]=B.snapTo(w[0],b),w},Fo.computeOverlaySnapTolerance=function(){if(1===arguments.length){var c=arguments[0],f=Fo.computeSizeBasedSnapTolerance(c),b=c.getPrecisionModel();if(b.getType()===tt.FIXED){var w=1/b.getScale()*2/1.415;w>f&&(f=w)}return f}if(2===arguments.length){var B=arguments[1];return Math.min(Fo.computeOverlaySnapTolerance(arguments[0]),Fo.computeOverlaySnapTolerance(B))}},Fo.computeSizeBasedSnapTolerance=function(c){var f=c.getEnvelopeInternal();return Math.min(f.getHeight(),f.getWidth())*Fo.SNAP_PRECISION_FACTOR},Fo.snapToSelf=function(c,f,b){return new Fo(c).snapToSelf(f,b)},pp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Fo,pp);var $d=function(c){function f(b,w,A){c.call(this),this._snapTolerance=b||null,this._snapPts=w||null,this._isSelfSnap=void 0!==A&&A}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.snapLine=function(b,w){var A=new sa(b,this._snapTolerance);return A.setAllowSnappingToSourceVertices(this._isSelfSnap),A.snapTo(w)},f.prototype.transformCoordinates=function(b,w){var A=b.toCoordinateArray(),B=this.snapLine(A,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(B)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(za),$a=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$a.prototype.getCommon=function(){return ee.longBitsToDouble(this._commonBits)},$a.prototype.add=function(c){var f=ee.doubleToLongBits(c);return this._isFirst?(this._commonBits=f,this._commonSignExp=$a.signExpBits(this._commonBits),this._isFirst=!1,null):$a.signExpBits(f)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$a.numCommonMostSigMantissaBits(this._commonBits,f),void(this._commonBits=$a.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$a.prototype.toString=function(){if(1===arguments.length){var c=arguments[0],f=ee.longBitsToDouble(c),b="0000000000000000000000000000000000000000000000000000000000000000"+ee.toBinaryString(c),w=b.substring(b.length-64);return w.substring(0,1)+"  "+w.substring(1,12)+"(exp) "+w.substring(12)+" [ "+f+" ]"}},$a.prototype.interfaces_=function(){return[]},$a.prototype.getClass=function(){return $a},$a.getBit=function(c,f){return c&1<<f?1:0},$a.signExpBits=function(c){return c>>52},$a.zeroLowerBits=function(c,f){return c&~((1<<f)-1)},$a.numCommonMostSigMantissaBits=function(c,f){for(var b=0,w=52;w>=0;w--){if($a.getBit(c,w)!==$a.getBit(f,w))return b;b++}return 52};var kc=function(){this._commonCoord=null,this._ccFilter=new Bi},aa={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};kc.prototype.addCommonBits=function(c){var f=new Or(this._commonCoord);c.apply(f),c.geometryChanged()},kc.prototype.removeCommonBits=function(c){if(0===this._commonCoord.x&&0===this._commonCoord.y)return c;var f=new Q(this._commonCoord);f.x=-f.x,f.y=-f.y;var b=new Or(f);return c.apply(b),c.geometryChanged(),c},kc.prototype.getCommonCoordinate=function(){return this._commonCoord},kc.prototype.add=function(c){c.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},aa.CommonCoordinateFilter.get=function(){return Bi},aa.Translater.get=function(){return Or},Object.defineProperties(kc,aa);var Bi=function(){this._commonBitsX=new $a,this._commonBitsY=new $a};Bi.prototype.filter=function(c){this._commonBitsX.add(c.x),this._commonBitsY.add(c.y)},Bi.prototype.getCommonCoordinate=function(){return new Q(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Bi.prototype.interfaces_=function(){return[Gi]},Bi.prototype.getClass=function(){return Bi};var Or=function(){this.trans=null,this.trans=arguments[0]};Or.prototype.filter=function(c,f){var b=c.getOrdinate(f,0)+this.trans.x,w=c.getOrdinate(f,1)+this.trans.y;c.setOrdinate(f,0,b),c.setOrdinate(f,1,w)},Or.prototype.isDone=function(){return!1},Or.prototype.isGeometryChanged=function(){return!0},Or.prototype.interfaces_=function(){return[Sn]},Or.prototype.getClass=function(){return Or};var Wr=function(c,f){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=c,this._geom[1]=f,this.computeSnapTolerance()};Wr.prototype.selfSnap=function(c){return new Fo(c).snapTo(c,this._snapTolerance)},Wr.prototype.removeCommonBits=function(c){this._cbr=new kc,this._cbr.add(c[0]),this._cbr.add(c[1]);var f=new Array(2).fill(null);return f[0]=this._cbr.removeCommonBits(c[0].copy()),f[1]=this._cbr.removeCommonBits(c[1].copy()),f},Wr.prototype.prepareResult=function(c){return this._cbr.addCommonBits(c),c},Wr.prototype.getResultGeometry=function(c){var f=this.snap(this._geom),b=Pi.overlayOp(f[0],f[1],c);return this.prepareResult(b)},Wr.prototype.checkValid=function(c){c.isValid()||Vt.out.println("Snapped geometry is invalid")},Wr.prototype.computeSnapTolerance=function(){this._snapTolerance=Fo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Wr.prototype.snap=function(c){var f=this.removeCommonBits(c);return Fo.snap(f[0],f[1],this._snapTolerance)},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.overlayOp=function(c,f,b){return new Wr(c,f).getResultGeometry(b)},Wr.union=function(c,f){return Wr.overlayOp(c,f,Pi.UNION)},Wr.intersection=function(c,f){return Wr.overlayOp(c,f,Pi.INTERSECTION)},Wr.symDifference=function(c,f){return Wr.overlayOp(c,f,Pi.SYMDIFFERENCE)},Wr.difference=function(c,f){return Wr.overlayOp(c,f,Pi.DIFFERENCE)};var Ss=function(c,f){this._geom=new Array(2).fill(null),this._geom[0]=c,this._geom[1]=f};Ss.prototype.getResultGeometry=function(c){var f=null,b=!1,w=null;try{f=Pi.overlayOp(this._geom[0],this._geom[1],c),b=!0}catch(A){if(!(A instanceof Ae))throw A;w=A}if(!b)try{f=Wr.overlayOp(this._geom[0],this._geom[1],c)}catch(A){throw A instanceof Ae?w:A}return f},Ss.prototype.interfaces_=function(){return[]},Ss.prototype.getClass=function(){return Ss},Ss.overlayOp=function(c,f,b){return new Ss(c,f).getResultGeometry(b)},Ss.union=function(c,f){return Ss.overlayOp(c,f,Pi.UNION)},Ss.intersection=function(c,f){return Ss.overlayOp(c,f,Pi.INTERSECTION)},Ss.symDifference=function(c,f){return Ss.overlayOp(c,f,Pi.SYMDIFFERENCE)},Ss.difference=function(c,f){return Ss.overlayOp(c,f,Pi.DIFFERENCE)};var Di=function(){this.mce=null,this.chainIndex=null;var f=arguments[1];this.mce=arguments[0],this.chainIndex=f};Di.prototype.computeIntersections=function(c,f){this.mce.computeIntersectsForChain(this.chainIndex,c.mce,c.chainIndex,f)},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di};var _o=function c(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var f=arguments[0],b=arguments[1];this._eventType=c.DELETE,this._xValue=f,this._insertEvent=b}else if(3===arguments.length){var w=arguments[0],A=arguments[1],B=arguments[2];this._eventType=c.INSERT,this._label=w,this._xValue=A,this._obj=B}},pd={INSERT:{configurable:!0},DELETE:{configurable:!0}};_o.prototype.isDelete=function(){return this._eventType===_o.DELETE},_o.prototype.setDeleteEventIndex=function(c){this._deleteEventIndex=c},_o.prototype.getObject=function(){return this._obj},_o.prototype.compareTo=function(c){return this._xValue<c._xValue?-1:this._xValue>c._xValue?1:this._eventType<c._eventType?-1:this._eventType>c._eventType?1:0},_o.prototype.getInsertEvent=function(){return this._insertEvent},_o.prototype.isInsert=function(){return this._eventType===_o.INSERT},_o.prototype.isSameLabel=function(c){return null!==this._label&&this._label===c._label},_o.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},_o.prototype.interfaces_=function(){return[ne]},_o.prototype.getClass=function(){return _o},pd.INSERT.get=function(){return 1},pd.DELETE.get=function(){return 2},Object.defineProperties(_o,pd);var Ys=function(){};Ys.prototype.interfaces_=function(){return[]},Ys.prototype.getClass=function(){return Ys};var Is=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var f=arguments[1],b=arguments[2];this._li=arguments[0],this._includeProper=f,this._recordIsolated=b};Is.prototype.isTrivialIntersection=function(c,f,b,w){if(c===b&&1===this._li.getIntersectionNum()){if(Is.isAdjacentSegments(f,w))return!0;if(c.isClosed()){var A=c.getNumPoints()-1;if(0===f&&w===A||0===w&&f===A)return!0}}return!1},Is.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Is.prototype.setIsDoneIfProperInt=function(c){this._isDoneWhenProperInt=c},Is.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Is.prototype.isBoundaryPointInternal=function(c,f){for(var b=f.iterator();b.hasNext();){var w=b.next().getCoordinate();if(c.isIntersection(w))return!0}return!1},Is.prototype.hasProperIntersection=function(){return this._hasProper},Is.prototype.hasIntersection=function(){return this._hasIntersection},Is.prototype.isDone=function(){return this._isDone},Is.prototype.isBoundaryPoint=function(c,f){return!(null===f||!this.isBoundaryPointInternal(c,f[0])&&!this.isBoundaryPointInternal(c,f[1]))},Is.prototype.setBoundaryNodes=function(c,f){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=c,this._bdyNodes[1]=f},Is.prototype.addIntersections=function(c,f,b,w){if(c===b&&f===w)return null;this.numTests++;var A=c.getCoordinates()[f],B=c.getCoordinates()[f+1],U=b.getCoordinates()[w],xe=b.getCoordinates()[w+1];this._li.computeIntersection(A,B,U,xe),this._li.hasIntersection()&&(this._recordIsolated&&(c.setIsolated(!1),b.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(c,f,b,w)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(c.addIntersections(this._li,f,0),b.addIntersections(this._li,w,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Is.prototype.interfaces_=function(){return[]},Is.prototype.getClass=function(){return Is},Is.isAdjacentSegments=function(c,f){return 1===Math.abs(c-f)};var Va=function(c){function f(){c.call(this),this.events=new at,this.nOverlaps=null}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.prepareEvents=function(){br.sort(this.events);for(var b=0;b<this.events.size();b++){var w=this.events.get(b);w.isDelete()&&w.getInsertEvent().setDeleteEventIndex(b)}},f.prototype.computeIntersections=function(){if(1===arguments.length){var b=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var w=0;w<this.events.size();w++){var A=this.events.get(w);if(A.isInsert()&&this.processOverlaps(w,A.getDeleteEventIndex(),A,b),b.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Is&&Se(arguments[0],Ct)&&Se(arguments[1],Ct)){var B=arguments[0],U=arguments[1],xe=arguments[2];this.addEdges(B,B),this.addEdges(U,U),this.computeIntersections(xe)}else if("boolean"==typeof arguments[2]&&Se(arguments[0],Ct)&&arguments[1]instanceof Is){var st=arguments[0],$t=arguments[1];arguments[2]?this.addEdges(st,null):this.addEdges(st),this.computeIntersections($t)}},f.prototype.addEdge=function(b,w){for(var A=b.getMonotoneChainEdge(),B=A.getStartIndexes(),U=0;U<B.length-1;U++){var xe=new Di(A,U),st=new _o(w,A.getMinX(U),xe);this.events.add(st),this.events.add(new _o(A.getMaxX(U),st))}},f.prototype.processOverlaps=function(b,w,A,B){for(var U=A.getObject(),xe=b;xe<w;xe++){var st=this.events.get(xe);if(st.isInsert()){var $t=st.getObject();A.isSameLabel(st)||(U.computeIntersections($t,B),this.nOverlaps++)}}},f.prototype.addEdges=function(){if(1===arguments.length)for(var b=arguments[0].iterator();b.hasNext();){var w=b.next();this.addEdge(w,w)}else if(2===arguments.length)for(var B=arguments[1],U=arguments[0].iterator();U.hasNext();){var xe=U.next();this.addEdge(xe,B)}},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ys),Ir=function(){this._min=ee.POSITIVE_INFINITY,this._max=ee.NEGATIVE_INFINITY},md={NodeComparator:{configurable:!0}};Ir.prototype.getMin=function(){return this._min},Ir.prototype.intersects=function(c,f){return!(this._min>f||this._max<c)},Ir.prototype.getMax=function(){return this._max},Ir.prototype.toString=function(){return At.toLineString(new Q(this._min,0),new Q(this._max,0))},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},md.NodeComparator.get=function(){return Vd},Object.defineProperties(Ir,md);var Vd=function(){};Vd.prototype.compare=function(c,f){var A=(c._min+c._max)/2,B=(f._min+f._max)/2;return A<B?-1:A>B?1:0},Vd.prototype.interfaces_=function(){return[ye]},Vd.prototype.getClass=function(){return Vd};var gd=function(c){function f(){c.call(this),this._item=null;var w=arguments[1],A=arguments[2];this._min=arguments[0],this._max=w,this._item=A}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.query=function(b,w,A){if(!this.intersects(b,w))return null;A.visitItem(this._item)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ir),Ya=function(c){function f(){c.call(this),this._node1=null,this._node2=null;var w=arguments[1];this._node1=arguments[0],this._node2=w,this.buildExtent(this._node1,this._node2)}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.buildExtent=function(b,w){this._min=Math.min(b._min,w._min),this._max=Math.max(b._max,w._max)},f.prototype.query=function(b,w,A){if(!this.intersects(b,w))return null;null!==this._node1&&this._node1.query(b,w,A),null!==this._node2&&this._node2.query(b,w,A)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(Ir),kl=function(){this._leaves=new at,this._root=null,this._level=0};kl.prototype.buildTree=function(){br.sort(this._leaves,new Ir.NodeComparator);for(var c=this._leaves,f=null,b=new at;;){if(this.buildLevel(c,b),1===b.size())return b.get(0);f=c,c=b,b=f}},kl.prototype.insert=function(c,f,b){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gd(c,f,b))},kl.prototype.query=function(c,f,b){this.init(),this._root.query(c,f,b)},kl.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},kl.prototype.printNode=function(c){Vt.out.println(At.toLineString(new Q(c._min,this._level),new Q(c._max,this._level)))},kl.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},kl.prototype.buildLevel=function(c,f){this._level++,f.clear();for(var b=0;b<c.size();b+=2){var w=c.get(b);if(null===(b+1<c.size()?c.get(b):null))f.add(w);else{var A=new Ya(c.get(b),c.get(b+1));f.add(A)}}},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl};var tc=function(){this._items=new at};tc.prototype.visitItem=function(c){this._items.add(c)},tc.prototype.getItems=function(){return this._items},tc.prototype.interfaces_=function(){return[Zl]},tc.prototype.getClass=function(){return tc};var Vl=function(){this._index=null;var c=arguments[0];if(!Se(c,To))throw new Z("Argument must be Polygonal");this._index=new hl(c)},_h={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Vl.prototype.locate=function(c){var f=new Bn(c),b=new Ud(f);return this._index.query(c.y,c.y,b),f.getLocation()},Vl.prototype.interfaces_=function(){return[ph]},Vl.prototype.getClass=function(){return Vl},_h.SegmentVisitor.get=function(){return Ud},_h.IntervalIndexedGeometry.get=function(){return hl},Object.defineProperties(Vl,_h);var Ud=function(){this._counter=null,this._counter=arguments[0]};Ud.prototype.visitItem=function(c){var f=c;this._counter.countSegment(f.getCoordinate(0),f.getCoordinate(1))},Ud.prototype.interfaces_=function(){return[Zl]},Ud.prototype.getClass=function(){return Ud};var hl=function(){this._index=new kl,this.init(arguments[0])};hl.prototype.init=function(c){for(var f=ul.getLines(c).iterator();f.hasNext();){var b=f.next().getCoordinates();this.addLine(b)}},hl.prototype.addLine=function(c){for(var f=1;f<c.length;f++){var b=new ir(c[f-1],c[f]),w=Math.min(b.p0.y,b.p1.y),A=Math.max(b.p0.y,b.p1.y);this._index.insert(w,A,b)}},hl.prototype.query=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1],b=new tc;return this._index.query(c,f,b),b.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var mc=function(c){function f(){if(c.call(this),this._parentGeom=null,this._lineEdgeMap=new gt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Fa,2===arguments.length){var w=arguments[1],A=gr.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=w,this._boundaryNodeRule=A,null!==w&&this.add(w)}else if(3===arguments.length){var U=arguments[1],xe=arguments[2];this._argIndex=arguments[0],this._parentGeom=U,this._boundaryNodeRule=xe,null!==U&&this.add(U)}}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.insertBoundaryPoint=function(b,w){var A=this._nodes.addNode(w).getLabel(),B=1;A.getLocation(b,xt.ON)===ie.BOUNDARY&&B++;var U=f.determineBoundary(this._boundaryNodeRule,B);A.setLocation(b,U)},f.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var B=arguments[1],U=arguments[2],xe=new Is(arguments[0],!0,!1);return xe.setIsDoneIfProperInt(U),this.createEdgeSetIntersector().computeIntersections(this._edges,xe,B||!(this._parentGeom instanceof No||this._parentGeom instanceof so||this._parentGeom instanceof no)),this.addSelfIntersectionNodes(this._argIndex),xe}},f.prototype.computeSplitEdges=function(b){for(var w=this._edges.iterator();w.hasNext();)w.next().eiList.addSplitEdges(b)},f.prototype.computeEdgeIntersections=function(b,w,A){var B=new Is(w,A,!0);return B.setBoundaryNodes(this.getBoundaryNodes(),b.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,b._edges,B),B},f.prototype.getGeometry=function(){return this._parentGeom},f.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},f.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},f.prototype.addPoint=function(){if(arguments[0]instanceof Vr){var b=arguments[0].getCoordinate();this.insertPoint(this._argIndex,b,ie.INTERIOR)}else arguments[0]instanceof Q&&this.insertPoint(this._argIndex,arguments[0],ie.INTERIOR)},f.prototype.addPolygon=function(b){this.addPolygonRing(b.getExteriorRing(),ie.EXTERIOR,ie.INTERIOR);for(var w=0;w<b.getNumInteriorRing();w++){var A=b.getInteriorRingN(w);this.addPolygonRing(A,ie.INTERIOR,ie.EXTERIOR)}},f.prototype.addEdge=function(b){this.insertEdge(b);var w=b.getCoordinates();this.insertPoint(this._argIndex,w[0],ie.BOUNDARY),this.insertPoint(this._argIndex,w[w.length-1],ie.BOUNDARY)},f.prototype.addLineString=function(b){var w=It.removeRepeatedPoints(b.getCoordinates());if(w.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=w[0],null;var A=new Jl(w,new $r(this._argIndex,ie.INTERIOR));this._lineEdgeMap.put(b,A),this.insertEdge(A),Ee.isTrue(w.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,w[0]),this.insertBoundaryPoint(this._argIndex,w[w.length-1])},f.prototype.getInvalidPoint=function(){return this._invalidPoint},f.prototype.getBoundaryPoints=function(){for(var b=this.getBoundaryNodes(),w=new Array(b.size()).fill(null),A=0,B=b.iterator();B.hasNext();){var U=B.next();w[A++]=U.getCoordinate().copy()}return w},f.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},f.prototype.addSelfIntersectionNode=function(b,w,A){if(this.isBoundaryNode(b,w))return null;A===ie.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(b,w):this.insertPoint(b,w,A)},f.prototype.addPolygonRing=function(b,w,A){if(b.isEmpty())return null;var B=It.removeRepeatedPoints(b.getCoordinates());if(B.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=B[0],null;var U=w,xe=A;yn.isCCW(B)&&(U=A,xe=w);var st=new Jl(B,new $r(this._argIndex,ie.BOUNDARY,U,xe));this._lineEdgeMap.put(b,st),this.insertEdge(st),this.insertPoint(this._argIndex,B[0],ie.BOUNDARY)},f.prototype.insertPoint=function(b,w,A){var B=this._nodes.addNode(w),U=B.getLabel();null===U?B._label=new $r(b,A):U.setLocation(b,A)},f.prototype.createEdgeSetIntersector=function(){return new Va},f.prototype.addSelfIntersectionNodes=function(b){for(var w=this._edges.iterator();w.hasNext();)for(var A=w.next(),B=A.getLabel().getLocation(b),U=A.eiList.iterator();U.hasNext();){var xe=U.next();this.addSelfIntersectionNode(b,xe.coord,B)}},f.prototype.add=function(){if(1!==arguments.length)return c.prototype.add.apply(this,arguments);var b=arguments[0];if(b.isEmpty())return null;if(b instanceof no&&(this._useBoundaryDeterminationRule=!1),b instanceof so)this.addPolygon(b);else if(b instanceof rr)this.addLineString(b);else if(b instanceof Vr)this.addPoint(b);else if(b instanceof Ns)this.addCollection(b);else if(b instanceof Qn)this.addCollection(b);else if(b instanceof no)this.addCollection(b);else{if(!(b instanceof Vn))throw new Error(b.getClass().getName());this.addCollection(b)}},f.prototype.addCollection=function(b){for(var w=0;w<b.getNumGeometries();w++){var A=b.getGeometryN(w);this.add(A)}},f.prototype.locate=function(b){return Se(this._parentGeom,To)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Vl(this._parentGeom)),this._areaPtLocator.locate(b)):this._ptLocator.locate(b,this._parentGeom)},f.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):c.prototype.findEdge.apply(this,arguments)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f.determineBoundary=function(b,w){return b.isInBoundary(w)?ie.BOUNDARY:ie.INTERIOR},f}(qs),pu=function(){if(this._li=new ln,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var c=arguments[0];this.setComputationPrecision(c.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new mc(0,c)}else if(2===arguments.length){var f=arguments[0],b=arguments[1],w=gr.OGC_SFS_BOUNDARY_RULE;f.getPrecisionModel().compareTo(b.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(b.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new mc(0,f,w),this._arg[1]=new mc(1,b,w)}else if(3===arguments.length){var A=arguments[0],B=arguments[1],U=arguments[2];A.getPrecisionModel().compareTo(B.getPrecisionModel())>=0?this.setComputationPrecision(A.getPrecisionModel()):this.setComputationPrecision(B.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new mc(0,A,U),this._arg[1]=new mc(1,B,U)}};pu.prototype.getArgGeometry=function(c){return this._arg[c].getGeometry()},pu.prototype.setComputationPrecision=function(c){this._resultPrecisionModel=c,this._li.setPrecisionModel(this._resultPrecisionModel)},pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu};var Pc=function(){};Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.map=function(){if(arguments[0]instanceof ai&&Se(arguments[1],Pc.MapOp)){for(var c=arguments[0],f=arguments[1],b=new at,w=0;w<c.getNumGeometries();w++){var A=f.map(c.getGeometryN(w));null!==A&&b.add(A)}return c.getFactory().buildGeometry(b)}if(Se(arguments[0],Me)&&Se(arguments[1],Pc.MapOp)){for(var B=arguments[0],U=arguments[1],xe=new at,st=B.iterator();st.hasNext();){var $t=st.next(),gn=U.map($t);null!==gn&&xe.add(gn)}return xe}},Pc.MapOp=function(){};var Pi=function(c){function f(){var b=arguments[0];c.call(this,b,arguments[1]),this._ptLocator=new Fa,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new fn,this._resultPolyList=new at,this._resultLineList=new at,this._resultPointList=new at,this._graph=new qs(new dd),this._geomFact=b.getFactory()}return c&&(f.__proto__=c),(f.prototype=Object.create(c&&c.prototype)).constructor=f,f.prototype.insertUniqueEdge=function(b){var w=this._edgeList.findEqualEdge(b);if(null!==w){var A=w.getLabel(),B=b.getLabel();w.isPointwiseEqual(b)||(B=new $r(b.getLabel())).flip();var U=w.getDepth();U.isNull()&&U.add(A),U.add(B),A.merge(B)}else this._edgeList.add(b)},f.prototype.getGraph=function(){return this._graph},f.prototype.cancelDuplicateResultEdges=function(){for(var b=this._graph.getEdgeEnds().iterator();b.hasNext();){var w=b.next(),A=w.getSym();w.isInResult()&&A.isInResult()&&(w.setInResult(!1),A.setInResult(!1))}},f.prototype.isCoveredByLA=function(b){return!!this.isCovered(b,this._resultLineList)||!!this.isCovered(b,this._resultPolyList)},f.prototype.computeGeometry=function(b,w,A,B){var U=new at;return U.addAll(b),U.addAll(w),U.addAll(A),U.isEmpty()?f.createEmptyResult(B,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(U)},f.prototype.mergeSymLabels=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().mergeSymLabels()},f.prototype.isCovered=function(b,w){for(var A=w.iterator();A.hasNext();){var B=A.next();if(this._ptLocator.locate(b,B)!==ie.EXTERIOR)return!0}return!1},f.prototype.replaceCollapsedEdges=function(){for(var b=new at,w=this._edgeList.iterator();w.hasNext();){var A=w.next();A.isCollapsed()&&(w.remove(),b.add(A.getCollapsedEdge()))}this._edgeList.addAll(b)},f.prototype.updateNodeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var w=b.next(),A=w.getEdges().getLabel();w.getLabel().merge(A)}},f.prototype.getResultGeometry=function(b){return this.computeOverlay(b),this._resultGeom},f.prototype.insertUniqueEdges=function(b){for(var w=b.iterator();w.hasNext();){var A=w.next();this.insertUniqueEdge(A)}},f.prototype.computeOverlay=function(b){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var w=new at;this._arg[0].computeSplitEdges(w),this._arg[1].computeSplitEdges(w),this.insertUniqueEdges(w),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ga.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(b),this.cancelDuplicateResultEdges();var A=new Ka(this._geomFact);A.add(this._graph),this._resultPolyList=A.getPolygons();var B=new Cs(this,this._geomFact,this._ptLocator);this._resultLineList=B.build(b);var U=new oa(this,this._geomFact,this._ptLocator);this._resultPointList=U.build(b),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,b)},f.prototype.labelIncompleteNode=function(b,w){var A=this._ptLocator.locate(b.getCoordinate(),this._arg[w].getGeometry());b.getLabel().setLocation(w,A)},f.prototype.copyPoints=function(b){for(var w=this._arg[b].getNodeIterator();w.hasNext();){var A=w.next();this._graph.addNode(A.getCoordinate()).setLabel(b,A.getLabel().getLocation(b))}},f.prototype.findResultAreaEdges=function(b){for(var w=this._graph.getEdgeEnds().iterator();w.hasNext();){var A=w.next(),B=A.getLabel();B.isArea()&&!A.isInteriorAreaEdge()&&f.isResultOfOp(B.getLocation(0,xt.RIGHT),B.getLocation(1,xt.RIGHT),b)&&A.setInResult(!0)}},f.prototype.computeLabelsFromDepths=function(){for(var b=this._edgeList.iterator();b.hasNext();){var w=b.next(),A=w.getLabel(),B=w.getDepth();if(!B.isNull()){B.normalize();for(var U=0;U<2;U++)A.isNull(U)||!A.isArea()||B.isNull(U)||(0===B.getDelta(U)?A.toLine(U):(Ee.isTrue(!B.isNull(U,xt.LEFT),"depth of LEFT side has not been initialized"),A.setLocation(U,xt.LEFT,B.getLocation(U,xt.LEFT)),Ee.isTrue(!B.isNull(U,xt.RIGHT),"depth of RIGHT side has not been initialized"),A.setLocation(U,xt.RIGHT,B.getLocation(U,xt.RIGHT))))}}},f.prototype.computeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},f.prototype.labelIncompleteNodes=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var w=b.next(),A=w.getLabel();w.isIsolated()&&(A.isNull(0)?this.labelIncompleteNode(w,0):this.labelIncompleteNode(w,1)),w.getEdges().updateLabelling(A)}},f.prototype.isCoveredByA=function(b){return!!this.isCovered(b,this._resultPolyList)},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f},f}(pu);Pi.overlayOp=function(c,f,b){return new Pi(c,f).getResultGeometry(b)},Pi.intersection=function(c,f){if(c.isEmpty()||f.isEmpty())return Pi.createEmptyResult(Pi.INTERSECTION,c,f,c.getFactory());if(c.isGeometryCollection()){var b=f;return go.map(c,{interfaces_:function(){return[Pc.MapOp]},map:function(w){return w.intersection(b)}})}return c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Ss.overlayOp(c,f,Pi.INTERSECTION)},Pi.symDifference=function(c,f){if(c.isEmpty()||f.isEmpty()){if(c.isEmpty()&&f.isEmpty())return Pi.createEmptyResult(Pi.SYMDIFFERENCE,c,f,c.getFactory());if(c.isEmpty())return f.copy();if(f.isEmpty())return c.copy()}return c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Ss.overlayOp(c,f,Pi.SYMDIFFERENCE)},Pi.resultDimension=function(c,f,b){var w=f.getDimension(),A=b.getDimension(),B=-1;switch(c){case Pi.INTERSECTION:B=Math.min(w,A);break;case Pi.UNION:B=Math.max(w,A);break;case Pi.DIFFERENCE:B=w;break;case Pi.SYMDIFFERENCE:B=Math.max(w,A)}return B},Pi.createEmptyResult=function(c,f,b,w){var A=null;switch(Pi.resultDimension(c,f,b)){case-1:A=w.createGeometryCollection(new Array(0).fill(null));break;case 0:A=w.createPoint();break;case 1:A=w.createLineString();break;case 2:A=w.createPolygon()}return A},Pi.difference=function(c,f){return c.isEmpty()?Pi.createEmptyResult(Pi.DIFFERENCE,c,f,c.getFactory()):f.isEmpty()?c.copy():(c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Ss.overlayOp(c,f,Pi.DIFFERENCE))},Pi.isResultOfOp=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1],b=c.getLocation(0),w=c.getLocation(1);return Pi.isResultOfOp(b,w,f)}if(3===arguments.length){var A=arguments[0],B=arguments[1];switch(A===ie.BOUNDARY&&(A=ie.INTERIOR),B===ie.BOUNDARY&&(B=ie.INTERIOR),arguments[2]){case Pi.INTERSECTION:return A===ie.INTERIOR&&B===ie.INTERIOR;case Pi.UNION:return A===ie.INTERIOR||B===ie.INTERIOR;case Pi.DIFFERENCE:return A===ie.INTERIOR&&B!==ie.INTERIOR;case Pi.SYMDIFFERENCE:return A===ie.INTERIOR&&B!==ie.INTERIOR||A!==ie.INTERIOR&&B===ie.INTERIOR}return!1}},Pi.INTERSECTION=1,Pi.UNION=2,Pi.DIFFERENCE=3,Pi.SYMDIFFERENCE=4;var mu=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Fa,this._seg=new ir;var c=arguments[0],f=arguments[1];this._g=c,this._boundaryDistanceTolerance=f,this._linework=this.extractLinework(c)};mu.prototype.isWithinToleranceOfBoundary=function(c){for(var f=0;f<this._linework.getNumGeometries();f++)for(var b=this._linework.getGeometryN(f).getCoordinateSequence(),w=0;w<b.size()-1;w++)if(b.getCoordinate(w,this._seg.p0),b.getCoordinate(w+1,this._seg.p1),this._seg.distance(c)<=this._boundaryDistanceTolerance)return!0;return!1},mu.prototype.getLocation=function(c){return this.isWithinToleranceOfBoundary(c)?ie.BOUNDARY:this._ptLocator.locate(c,this._g)},mu.prototype.extractLinework=function(c){var f=new gu;c.apply(f);var b=f.getLinework(),w=ge.toLineStringArray(b);return c.getFactory().createMultiLineString(w)},mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu};var gu=function(){this._linework=null,this._linework=new at};gu.prototype.getLinework=function(){return this._linework},gu.prototype.filter=function(c){if(c instanceof so){var f=c;this._linework.add(f.getExteriorRing());for(var b=0;b<f.getNumInteriorRing();b++)this._linework.add(f.getInteriorRingN(b))}},gu.prototype.interfaces_=function(){return[an]},gu.prototype.getClass=function(){return gu};var Nu=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};Nu.prototype.extractPoints=function(c,f,b){for(var w=c.getCoordinates(),A=0;A<w.length-1;A++)this.computeOffsetPoints(w[A],w[A+1],f,b)},Nu.prototype.setSidesToGenerate=function(c,f){this._doLeft=c,this._doRight=f},Nu.prototype.getPoints=function(c){for(var f=new at,b=ul.getLines(this._g).iterator();b.hasNext();){var w=b.next();this.extractPoints(w,c,f)}return f},Nu.prototype.computeOffsetPoints=function(c,f,b,w){var A=f.x-c.x,B=f.y-c.y,U=Math.sqrt(A*A+B*B),xe=b*A/U,st=b*B/U,$t=(f.x+c.x)/2,gn=(f.y+c.y)/2;if(this._doLeft){var Rn=new Q($t-st,gn+xe);w.add(Rn)}if(this._doRight){var Ai=new Q($t+st,gn-xe);w.add(Ai)}},Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu};var _a=function c(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=c.TOLERANCE,this._testCoords=new at;var f=arguments[0],b=arguments[1],w=arguments[2];this._boundaryDistanceTolerance=c.computeBoundaryDistanceTolerance(f,b),this._geom=[f,b,w],this._locFinder=[new mu(this._geom[0],this._boundaryDistanceTolerance),new mu(this._geom[1],this._boundaryDistanceTolerance),new mu(this._geom[2],this._boundaryDistanceTolerance)]},vh={TOLERANCE:{configurable:!0}};_a.prototype.reportResult=function(c,f,b){Vt.out.println("Overlay result invalid - A:"+ie.toLocationSymbol(f[0])+" B:"+ie.toLocationSymbol(f[1])+" expected:"+(b?"i":"e")+" actual:"+ie.toLocationSymbol(f[2]))},_a.prototype.isValid=function(c){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(c)},_a.prototype.checkValid=function(){if(1===arguments.length){for(var c=arguments[0],f=0;f<this._testCoords.size();f++){var b=this._testCoords.get(f);if(!this.checkValid(c,b))return this._invalidLocation=b,!1}return!0}if(2===arguments.length){var w=arguments[0],A=arguments[1];return this._location[0]=this._locFinder[0].getLocation(A),this._location[1]=this._locFinder[1].getLocation(A),this._location[2]=this._locFinder[2].getLocation(A),!!_a.hasLocation(this._location,ie.BOUNDARY)||this.isValidResult(w,this._location)}},_a.prototype.addTestPts=function(c){var f=new Nu(c);this._testCoords.addAll(f.getPoints(5*this._boundaryDistanceTolerance))},_a.prototype.isValidResult=function(c,f){var b=Pi.isResultOfOp(f[0],f[1],c),w=!(b^f[2]===ie.INTERIOR);return w||this.reportResult(c,f,b),w},_a.prototype.getInvalidLocation=function(){return this._invalidLocation},_a.prototype.interfaces_=function(){return[]},_a.prototype.getClass=function(){return _a},_a.hasLocation=function(c,f){for(var b=0;b<3;b++)if(c[b]===f)return!0;return!1},_a.computeBoundaryDistanceTolerance=function(c,f){return Math.min(Fo.computeSizeBasedSnapTolerance(c),Fo.computeSizeBasedSnapTolerance(f))},_a.isValid=function(c,f,b,w){return new _a(c,f,w).isValid(b)},vh.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(_a,vh);var el=function c(f){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=c.extractFactory(f),this._inputGeoms=f};el.prototype.extractElements=function(c,f){if(null===c)return null;for(var b=0;b<c.getNumGeometries();b++){var w=c.getGeometryN(b);this._skipEmpty&&w.isEmpty()||f.add(w)}},el.prototype.combine=function(){for(var c=new at,f=this._inputGeoms.iterator();f.hasNext();){var b=f.next();this.extractElements(b,c)}return 0===c.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(c)},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.combine=function(){return 1===arguments.length?new el(arguments[0]).combine():2===arguments.length?new el(el.createList(arguments[0],arguments[1])).combine():3===arguments.length?new el(el.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},el.extractFactory=function(c){return c.isEmpty()?null:c.iterator().next().getFactory()},el.createList=function(){if(2===arguments.length){var c=arguments[0],f=arguments[1],b=new at;return b.add(c),b.add(f),b}if(3===arguments.length){var w=arguments[0],A=arguments[1],B=arguments[2],U=new at;return U.add(w),U.add(A),U.add(B),U}};var Ro=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new at)},wl={STRTREE_NODE_CAPACITY:{configurable:!0}};Ro.prototype.reduceToGeometries=function(c){for(var f=new at,b=c.iterator();b.hasNext();){var w=b.next(),A=null;Se(w,Ct)?A=this.unionTree(w):w instanceof ai&&(A=w),f.add(A)}return f},Ro.prototype.extractByEnvelope=function(c,f,b){for(var w=new at,A=0;A<f.getNumGeometries();A++){var B=f.getGeometryN(A);B.getEnvelopeInternal().intersects(c)?w.add(B):b.add(B)}return this._geomFactory.buildGeometry(w)},Ro.prototype.unionOptimized=function(c,f){var b=c.getEnvelopeInternal(),w=f.getEnvelopeInternal();if(!b.intersects(w))return el.combine(c,f);if(c.getNumGeometries()<=1&&f.getNumGeometries()<=1)return this.unionActual(c,f);var A=b.intersection(w);return this.unionUsingEnvelopeIntersection(c,f,A)},Ro.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var c=new po(Ro.STRTREE_NODE_CAPACITY),f=this._inputPolys.iterator();f.hasNext();){var b=f.next();c.insert(b.getEnvelopeInternal(),b)}this._inputPolys=null;var w=c.itemsTree();return this.unionTree(w)},Ro.prototype.binaryUnion=function(){if(1===arguments.length){var c=arguments[0];return this.binaryUnion(c,0,c.size())}if(3===arguments.length){var f=arguments[0],b=arguments[1],w=arguments[2];if(w-b<=1){var A=Ro.getGeometry(f,b);return this.unionSafe(A,null)}if(w-b==2)return this.unionSafe(Ro.getGeometry(f,b),Ro.getGeometry(f,b+1));var B=Math.trunc((w+b)/2),U=this.binaryUnion(f,b,B),xe=this.binaryUnion(f,B,w);return this.unionSafe(U,xe)}},Ro.prototype.repeatedUnion=function(c){for(var f=null,b=c.iterator();b.hasNext();){var w=b.next();f=null===f?w.copy():f.union(w)}return f},Ro.prototype.unionSafe=function(c,f){return null===c&&null===f?null:null===c?f.copy():null===f?c.copy():this.unionOptimized(c,f)},Ro.prototype.unionActual=function(c,f){return Ro.restrictToPolygons(c.union(f))},Ro.prototype.unionTree=function(c){var f=this.reduceToGeometries(c);return this.binaryUnion(f)},Ro.prototype.unionUsingEnvelopeIntersection=function(c,f,b){var w=new at,A=this.extractByEnvelope(b,c,w),B=this.extractByEnvelope(b,f,w),U=this.unionActual(A,B);return w.add(U),el.combine(w)},Ro.prototype.bufferUnion=function(){if(1===arguments.length){var c=arguments[0];return c.get(0).getFactory().buildGeometry(c).buffer(0)}if(2===arguments.length){var f=arguments[0],b=arguments[1];return f.getFactory().createGeometryCollection([f,b]).buffer(0)}},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro},Ro.restrictToPolygons=function(c){if(Se(c,To))return c;var f=hc.getPolygons(c);return 1===f.size()?f.get(0):c.getFactory().createMultiPolygon(ge.toPolygonArray(f))},Ro.getGeometry=function(c,f){return f>=c.size()?null:c.get(f)},Ro.union=function(c){return new Ro(c).union()},wl.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ro,wl);var Rf=function(){};Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.union=function(c,f){if(c.isEmpty()||f.isEmpty()){if(c.isEmpty()&&f.isEmpty())return Pi.createEmptyResult(Pi.UNION,c,f,c.getFactory());if(c.isEmpty())return f.copy();if(f.isEmpty())return c.copy()}return c.checkNotGeometryCollection(c),c.checkNotGeometryCollection(f),Ss.overlayOp(c,f,Pi.UNION)},Ce.GeoJSONReader=rn,Ce.GeoJSONWriter=vn,Ce.OverlayOp=Pi,Ce.UnionOp=Rf,Ce.BufferOp=Ma,Object.defineProperty(Ce,"__esModule",{value:!0})}(Rt)},863:(An,Rt,Ce)=>{var ue={"./ion-accordion_2.entry.js":[8484,8592,8484],"./ion-action-sheet.entry.js":[9882,8592,9882],"./ion-alert.entry.js":[6304,8592,6304],"./ion-app_8.entry.js":[5860,8592,5860],"./ion-avatar_3.entry.js":[3544,3544],"./ion-back-button.entry.js":[505,8592,505],"./ion-backdrop.entry.js":[469,469],"./ion-breadcrumb_2.entry.js":[9857,8592,9857],"./ion-button_2.entry.js":[1372,1372],"./ion-card_5.entry.js":[3150,3150],"./ion-checkbox.entry.js":[7635,8592,7635],"./ion-chip.entry.js":[6673,6673],"./ion-col_3.entry.js":[1315,1315],"./ion-datetime-button.entry.js":[433,9302,433],"./ion-datetime_3.entry.js":[7059,9302,8592,7059],"./ion-fab_3.entry.js":[4087,8592,4087],"./ion-img.entry.js":[1745,1745],"./ion-infinite-scroll_2.entry.js":[9352,8592,9352],"./ion-input.entry.js":[4530,8592,4530],"./ion-item-option_3.entry.js":[8633,8592,8633],"./ion-item_8.entry.js":[5962,8592,5962],"./ion-loading.entry.js":[3483,8592,3483],"./ion-menu_3.entry.js":[8382,8592,8382],"./ion-modal.entry.js":[8577,8592,8577],"./ion-nav_2.entry.js":[5675,8592,5675],"./ion-picker-column-internal.entry.js":[9992,8592,9992],"./ion-picker-internal.entry.js":[9820,9820],"./ion-popover.entry.js":[185,8592,185],"./ion-progress-bar.entry.js":[5454,5454],"./ion-radio_2.entry.js":[4458,8592,4458],"./ion-range.entry.js":[7666,8592,7666],"./ion-refresher_2.entry.js":[7219,8592,7219],"./ion-reorder_2.entry.js":[2975,8592,2975],"./ion-ripple-effect.entry.js":[7465,7465],"./ion-route_4.entry.js":[4764,4764],"./ion-searchbar.entry.js":[3998,8592,3998],"./ion-segment_2.entry.js":[3672,8592,3672],"./ion-select_3.entry.js":[6754,8592,6754],"./ion-spinner.entry.js":[9588,8592,9588],"./ion-split-pane.entry.js":[9793,9793],"./ion-tab-bar_2.entry.js":[4090,8592,4090],"./ion-tab_2.entry.js":[2841,2841],"./ion-text.entry.js":[8811,8811],"./ion-textarea.entry.js":[3734,8592,3734],"./ion-toast.entry.js":[6642,8592,6642],"./ion-toggle.entry.js":[8866,8592,8866]};function Le(Je){if(!Ce.o(ue,Je))return Promise.resolve().then(()=>{var Ne=new Error("Cannot find module '"+Je+"'");throw Ne.code="MODULE_NOT_FOUND",Ne});var g=ue[Je],fe=g[0];return Promise.all(g.slice(1).map(Ce.e)).then(()=>Ce(fe))}Le.keys=()=>Object.keys(ue),Le.id=863,An.exports=Le},5764:(An,Rt,Ce)=>{var ue={"./ion-icon.entry.js":[5191,5191],"./stripe-payment-request-button.entry.js":[5057,8592,5057],"./stripe-payment-sheet.entry.js":[2797,2797],"./stripe-payment_2.entry.js":[1681,8592,1681]};function Le(Je){if(!Ce.o(ue,Je))return Promise.resolve().then(()=>{var Ne=new Error("Cannot find module '"+Je+"'");throw Ne.code="MODULE_NOT_FOUND",Ne});var g=ue[Je],fe=g[0];return Promise.all(g.slice(1).map(Ce.e)).then(()=>Ce(fe))}Le.keys=()=>Object.keys(ue),Le.id=5764,An.exports=Le},5861:(An,Rt,Ce)=>{"use strict";function ue(Je,g,fe,Ne,Oe,He,ct){try{var Ht=Je[He](ct),qe=Ht.value}catch(Qe){return void fe(Qe)}Ht.done?g(qe):Promise.resolve(qe).then(Ne,Oe)}function Le(Je){return function(){var g=this,fe=arguments;return new Promise(function(Ne,Oe){var He=Je.apply(g,fe);function ct(qe){ue(He,Ne,Oe,ct,Ht,"next",qe)}function Ht(qe){ue(He,Ne,Oe,ct,Ht,"throw",qe)}ct(void 0)})}}Ce.d(Rt,{Z:()=>Le})}},An=>{An(An.s=9189)}]);